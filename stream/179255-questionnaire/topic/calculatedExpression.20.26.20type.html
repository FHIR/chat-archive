---
layout: page
title: "FHIR Chat  · calculatedExpression &amp; type · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type.html">calculatedExpression &amp; type</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="235922504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/calculatedExpression%20%26%20type/near/235922504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type.html#235922504">(Apr 23 2021 at 23:19)</a>:</h4>
<p>Is it documented someplace that the result of a calculatedExpression should agree with item.type, and what the behavior should be if it doesn't?  I couldn't find it.</p>



<a name="235979938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/calculatedExpression%20%26%20type/near/235979938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type.html#235979938">(Apr 24 2021 at 15:41)</a>:</h4>
<p>Probably not defined - care to create a change request?</p>



<a name="236221737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/calculatedExpression%20%26%20type/near/236221737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type.html#236221737">(Apr 26 2021 at 18:30)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-31991">FHIR-31991</a></p>



<a name="241787902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/calculatedExpression%20%26%20type/near/241787902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ephraim Kigamba <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type.html#241787902">(Jun 07 2021 at 14:50)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , can <code>calculatedExpression</code> be used to copy the value/answer of another item?</p>



<a name="241788074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/calculatedExpression%20%26%20type/near/241788074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type.html#241788074">(Jun 07 2021 at 14:51)</a>:</h4>
<p>Yes, though you might also need <code>variable</code>, depending on the relative location.</p>



<a name="241892924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/calculatedExpression%20%26%20type/near/241892924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ephraim Kigamba <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type.html#241892924">(Jun 08 2021 at 09:46)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Do you have a quick example where variable would be needed?</p>



<a name="241918580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/calculatedExpression%20%26%20type/near/241918580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type.html#241918580">(Jun 08 2021 at 13:27)</a>:</h4>
<p>calculatedExpression will only have access to descendant items.  If the item you want to copy is a sibling or ancestor, you'll have to capture the value in a variable to be able to reference it with calculatedExpression in the current item.</p>



<a name="241919092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/calculatedExpression%20%26%20type/near/241919092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ephraim Kigamba <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type.html#241919092">(Jun 08 2021 at 13:30)</a>:</h4>
<p>Oh! Cool. Now I get you</p>



<a name="241937354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/calculatedExpression%20%26%20type/near/241937354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type.html#241937354">(Jun 08 2021 at 15:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type/near/241918580">said</a>:</p>
<blockquote>
<p>calculatedExpression will only have access to descendant items.  If the item you want to copy is a sibling or ancestor, you'll have to capture the value in a variable to be able to reference it with calculatedExpression in the current item.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> I don't think that is correct, in general.  An Expression can access anything in the Questionnaire/QuestionnaireResponse via %questionnaire and %resource.  However, if you are dealing with an Expression in a repeating group, you can't find the correct repetition that way, and need to rely on %context, which limits you to the item and its children.  In that case you would want a variable on the repeating group.</p>



<a name="241938203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/calculatedExpression%20%26%20type/near/241938203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ephraim Kigamba <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/calculatedExpression.20.26.20type.html#241938203">(Jun 08 2021 at 15:29)</a>:</h4>
<p><span class="user-mention" data-user-id="195344">@Paul Lynch</span> Noted. Thanks for the clarification.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
