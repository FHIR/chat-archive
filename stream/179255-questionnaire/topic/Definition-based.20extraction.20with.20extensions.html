---
layout: page
title: "FHIR Chat  · Definition-based extraction with extensions · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions.html">Definition-based extraction with extensions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="276176161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Definition-based%20extraction%20with%20extensions/near/276176161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nitin Sabale <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions.html#276176161">(Mar 22 2022 at 11:49)</a>:</h4>
<p>When using definition based extraction to extract resources, what will be the right way to add definition for a questionnaire where resource can be extracted with extensions.</p>
<p>Ex. Following is an sample questionnaire<br>
{<br>
    "type" : "Questionnaire",<br>
    ...<br>
    "item":[<br>
             {<br>
              "type": "choice",<br>
              "extension": [<br>
                {<br>
                  "url": "<a href="http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl">http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl</a>",<br>
                  "valueCodeableConcept": {<br>
                    "coding": [<br>
                      {<br>
                        "system": "<a href="http://hl7.org/fhir/questionnaire-item-control">http://hl7.org/fhir/questionnaire-item-control</a>",<br>
                        "code": "drop-down",<br>
                        "display": "Drop Down"<br>
                      }<br>
                    ],<br>
                  }<br>
                }<br>
              ],<br>
              "definition" : "???????",<br>
              "linkId": "religion",<br>
              "text": "Religion",<br>
              "answerOption": [<br>
                {<br>
                  "valueCoding": {<br>
                    "code": "1013",<br>
                    "display": "Christian",<br>
                    "system": "<a href="http://terminology.hl7.org/CodeSystem/v3-ReligiousAffiliation">http://terminology.hl7.org/CodeSystem/v3-ReligiousAffiliation</a>"<br>
                  }<br>
                },<br>
                {<br>
                  "valueCoding": {<br>
                    "code": "1023",<br>
                    "display": "Islam",<br>
                    "system": "<a href="http://terminology.hl7.org/CodeSystem/v3-ReligiousAffiliation">http://terminology.hl7.org/CodeSystem/v3-ReligiousAffiliation</a>"<br>
                  }<br>
                },<br>
                ]<br>
            }<br>
        ]</p>
<p>}</p>
<p>Patient(<a href="http://build.fhir.org/ig/WorldHealthOrganization/smart-anc/StructureDefinition-anc-patient.html">http://build.fhir.org/ig/WorldHealthOrganization/smart-anc/StructureDefinition-anc-patient.html</a>) resource has field patient-religion which is an extension.<br>
Now I wanted to know what value I need to put in the definition field(??????), to get the answer extracted?</p>
<p>Let me know if there are any working examples which I can look at. <a href="/user_uploads/10155/nWDqhkbF0pTNcrYO4VTi8gnR/anc-patient.PNG">anc-patient.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/nWDqhkbF0pTNcrYO4VTi8gnR/anc-patient.PNG" title="anc-patient.PNG"><img src="/user_uploads/10155/nWDqhkbF0pTNcrYO4VTi8gnR/anc-patient.PNG"></a></div>



<a name="276189635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Definition-based%20extraction%20with%20extensions/near/276189635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions.html#276189635">(Mar 22 2022 at 13:39)</a>:</h4>
<p>I don't think we've talked about this.  My leaning would be for the FHIRPath to allow the 'extension' element - so you could use extension('whatever').value.  Can you submit a tracker item for us to talk about this and make it explicit in the spec?</p>



<a name="276251497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Definition-based%20extraction%20with%20extensions/near/276251497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions.html#276251497">(Mar 22 2022 at 20:44)</a>:</h4>
<p>It's the value from the <a href="http://elementdefinition.id">elementdefinition.id</a> in the referenced StructureDefinition isn't it?</p>



<a name="276251897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Definition-based%20extraction%20with%20extensions/near/276251897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions.html#276251897">(Mar 22 2022 at 20:47)</a>:</h4>
<p><a href="https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/prac-ext-demo/_history/11?_format=html">https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/prac-ext-demo/_history/11?_format=html</a></p>



<a name="276252066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Definition-based%20extraction%20with%20extensions/near/276252066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions.html#276252066">(Mar 22 2022 at 20:49)</a>:</h4>
<p>If you use that form and create some a QR you can try out the $extract on that server.</p>



<a name="276252489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Definition-based%20extraction%20with%20extensions/near/276252489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions.html#276252489">(Mar 22 2022 at 20:52)</a>:</h4>
<p><a href="https://sqlonfhir-r4.azurewebsites.net/fhir/QuestionnaireResponse/a0680f7c05bf407093e9993897832729">https://sqlonfhir-r4.azurewebsites.net/fhir/QuestionnaireResponse/a0680f7c05bf407093e9993897832729</a></p>



<a name="276252561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Definition-based%20extraction%20with%20extensions/near/276252561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions.html#276252561">(Mar 22 2022 at 20:53)</a>:</h4>
<p><a href="https://sqlonfhir-r4.azurewebsites.net/fhir/QuestionnaireResponse/a0680f7c05bf407093e9993897832729/$extract">https://sqlonfhir-r4.azurewebsites.net/fhir/QuestionnaireResponse/a0680f7c05bf407093e9993897832729/$extract</a></p>



<a name="276446316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Definition-based%20extraction%20with%20extensions/near/276446316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kashyap Jois <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions.html#276446316">(Mar 24 2022 at 08:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions/near/276189635">said</a>:</p>
<blockquote>
<p>I don't think we've talked about this.  My leaning would be for the FHIRPath to allow the 'extension' element - so you could use extension('whatever').value.  Can you submit a tracker item for us to talk about this and make it explicit in the spec?</p>
</blockquote>
<p>Hi <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , should we raise a tracker item in Jira?</p>



<a name="276459935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Definition-based%20extraction%20with%20extensions/near/276459935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kashyap Jois <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions.html#276459935">(Mar 24 2022 at 11:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191367">Brian Postlethwaite</span> <a href="#narrow/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions/near/276251497">said</a>:</p>
<blockquote>
<p>It's the value from the <a href="http://elementdefinition.id">elementdefinition.id</a> in the referenced StructureDefinition isn't it?</p>
</blockquote>
<p>Thanks, the example that you shared with the server works! We did some debugging and found that the implementation of the extraction piece in android fhir sdk is restricted to fields present in the resource .java:class (i.e. org.hl7.fhir.r4.model.*) . So that means extensions cant be extracted using splicing since it is not supported in the SDK.</p>
<p>cc: <span class="user-mention" data-user-id="366686">@Jing Tang</span></p>



<a name="276500219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Definition-based%20extraction%20with%20extensions/near/276500219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Definition-based.20extraction.20with.20extensions.html#276500219">(Mar 24 2022 at 16:17)</a>:</h4>
<p><span class="user-mention" data-user-id="382830">@Kashyap Jois</span> - yes please</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
