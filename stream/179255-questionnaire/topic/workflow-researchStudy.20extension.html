---
layout: page
title: "FHIR Chat  · workflow-researchStudy extension · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/workflow-researchStudy.20extension.html">workflow-researchStudy extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="244505397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/workflow-researchStudy%20extension/near/244505397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/workflow-researchStudy.20extension.html#244505397">(Jul 01 2021 at 00:25)</a>:</h4>
<p>In my post on Grouping Questionnaire Responses, the syntax of the workflow-researchStudy extension was discussed and appeared to be correct.</p>
<p>Since then, I have tried multiple times to use that syntax provided by creating a Questionnaire Response with this workflow extension, but I am having issues. I am testing on the R4 public UHN HAPI server at <a href="http://hapi.fhir.org/">http://hapi.fhir.org/</a></p>
<p>The extension that I am trying is:</p>
<p>"extension":<br>
     [{<br>
        "url": "<a href="http://hl7.org/fhir/StructureDefinition/workflow-researchStudy">http://hl7.org/fhir/StructureDefinition/workflow-researchStudy</a>",<br>
        "value": {<br>
            "reference": "<a href="http://hapi.fhir.org/baseR4/ResearchStudy/2126240">http://hapi.fhir.org/baseR4/ResearchStudy/2126240</a>",<br>
            "display": "2126240"<br>
            }<br>
    }]</p>
<p>Each time, I get apparent success (201 created), but when I look at the Questionnaire Response (eg. 2379536), the extension is not there. </p>
<p>So, I tried this:</p>
<p>"extension":<br>
    [{              <br>
        "url": "<a href="http://hl7.org/fhir/StructureDefinition/workflow-researchStudy">http://hl7.org/fhir/StructureDefinition/workflow-researchStudy</a>",<br>
            "valueUrl": "<a href="http://hapi.fhir.org/baseR4/ResearchStudy/2126240">http://hapi.fhir.org/baseR4/ResearchStudy/2126240</a>" <br>
    }]</p>
<p>which seems better in that the Questionnaire Response (eg. 2379538) has the extension.  But, I don't think it is correct, because when I try to validate the Questionnaire Response, I get the error: </p>
<p>"severity": "error",<br>
    "code": "processing",<br>
 "diagnostics": "The Extension '<a href="http://hl7.org/fhir/StructureDefinition/workflow-researchStudy">http://hl7.org/fhir/StructureDefinition/workflow-researchStudy</a>' definition allows for the types [Reference] but found type url"     </p>
<p>What am I doing wrong?  Why is my extension disappearing?</p>



<a name="244513196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/workflow-researchStudy%20extension/near/244513196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/workflow-researchStudy.20extension.html#244513196">(Jul 01 2021 at 02:57)</a>:</h4>
<p>The first is correct.  <span class="user-mention" data-user-id="191319">@James Agnew</span> ?</p>



<a name="246477135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/workflow-researchStudy%20extension/near/246477135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/workflow-researchStudy.20extension.html#246477135">(Jul 19 2021 at 16:21)</a>:</h4>
<p>I am still having no success with workflow-researchStudy extension.<br>
The syntax that Lloyd says is correct is:</p>
<p>"extension":<br>
[{<br>
    "url": "<a href="http://hl7.org/fhir/StructureDefinition/workflow-researchStudy">http://hl7.org/fhir/StructureDefinition/workflow-researchStudy</a>",<br>
    "value": {<br>
        "reference": "<a href="http://hapi.fhir.org/baseR4/ResearchStudy/2126240">http://hapi.fhir.org/baseR4/ResearchStudy/2126240</a>",<br>
        "display": "2126240"<br>
    }<br>
}]</p>
<p>Each time, I get apparent success (201 created) in the HAPI server (either our organization's HAPI server or the HAPI test server, but when I look at the Questionnaire Response (eg. 2379536), the workflow-researchStudy extension is not there.</p>
<p>This other syntax allows the extension to be created in the Questionnaire Response:</p>
<p>"extension" : {<br>
        "url" : "<a href="http://hl7.org/fhir/StructureDefinition/workflow-researchStudy">http://hl7.org/fhir/StructureDefinition/workflow-researchStudy</a>",<br>
        "valueUrl" : "<a href="http://hapi.fhir.org/baseR4/ResearchStudy/2126240">http://hapi.fhir.org/baseR4/ResearchStudy/2126240</a>"<br>
    }</p>
<p>but then the Questionnaire Response won't validate.</p>



<a name="246477274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/workflow-researchStudy%20extension/near/246477274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/workflow-researchStudy.20extension.html#246477274">(Jul 19 2021 at 16:22)</a>:</h4>
<p>It should be "valueReference", not "value"</p>



<a name="246524024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/workflow-researchStudy%20extension/near/246524024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/workflow-researchStudy.20extension.html#246524024">(Jul 19 2021 at 22:37)</a>:</h4>
<p>Thank you.  This syntax has fixed everything.    In case anyone else needs the workflow-researchStudy extension, this is the correct syntax:<br>
      [<br>
                   {<br>
                       "url" : "<a href="http://hl7.org/fhir/StructureDefinition/workflow-researchStudy">http://hl7.org/fhir/StructureDefinition/workflow-researchStudy</a>",<br>
                       "valueReference" : {<br>
                            "reference" : "<a href="http://hapi.fhir.org/baseR4/ResearchStudy/2126240">http://hapi.fhir.org/baseR4/ResearchStudy/2126240</a>",<br>
                            "display" : "2126240"<br>
                        }<br>
            }<br>
    ]</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
