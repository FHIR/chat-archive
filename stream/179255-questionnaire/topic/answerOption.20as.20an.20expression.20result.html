---
layout: page
title: "FHIR Chat  · answerOption as an expression result · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20as.20an.20expression.20result.html">answerOption as an expression result</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="274329910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20as%20an%20expression%20result/near/274329910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20as.20an.20expression.20result.html#274329910">(Mar 06 2022 at 21:45)</a>:</h4>
<p>In a questionnaire, I want to use a calculated expression like if the answer to question 1 or 2 is x,  then populate question 3 with "Approved", but I don't want the string "Approved", I want the coding from the answerOption for question 3. </p>
<p>A. Which of these do I want my fhirpath expression to return?</p>
<ol>
<li>
<p>[{"system":"www.terminologyexample.com","code":"Approved","display":"Approved"}]</p>
</li>
<li>
<p>[{"valueCoding":{"system":"www.terminologyexample.com","code":"Approved","display":"Approved"}}]</p>
</li>
<li>
<p>"answerOption":[{"valueCoding":{"system":"www.terminologyexample.com","code":"Approved","display":"Approved"}}]</p>
</li>
</ol>
<p>B. For the syntax, this is what seems to work in the fhirpath tester,  but it doesn't work in LHC Forms:</p>
<p>iif(conditional for Question1 or Question2, %questionnaire.item.where(linkId = 'Question3').answerOption.where(valueCoding.display = 'Approved'))</p>
<p>Since I am referring to the answerOption for question 3 from an extension on question 3, should my expression be more local like:</p>
<p>iif(conditional for Question1 or Question2,  %item.answerOption.where(valueCoding.display = 'Approved'))</p>
<p>or</p>
<p>iif(conditional for Question1 or Question2,  %answerOption.where(valueCoding.display = 'Approved'))</p>
<p>C. And how do I know if I need a % or not?   Should the syntax be %item.answerOption...   or item.answerOption...</p>



<a name="274333698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20as%20an%20expression%20result/near/274333698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20as.20an.20expression.20result.html#274333698">(Mar 06 2022 at 23:04)</a>:</h4>
<p>a) you would want #2.  However, there should be an "http://" at the start of your system.<br>
b) driving off 'display' is usually a bad idea - it's supposed to be for human consumption and it can change at any time without any expectation it'll impact code.  Is there a reason you can't know what the 'code' is for approved?<br>
c) '%' is used when you're referencing a context variable.  So if you're referring to an element name within context, you don't need/want it.  When you're referring to a special context variable (%context, %resource, %questionnaire, etc.) you do.</p>



<a name="274472513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20as%20an%20expression%20result/near/274472513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20as.20an.20expression.20result.html#274472513">(Mar 07 2022 at 23:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I think the answer to (a) is #1.  That is the Coding.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
