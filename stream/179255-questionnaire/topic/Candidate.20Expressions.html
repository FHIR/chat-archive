---
layout: page
title: "FHIR Chat  · Candidate Expressions · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html">Candidate Expressions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="198164330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198164330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198164330">(May 20 2020 at 07:45)</a>:</h4>
<p>Has anyone implemented these as yet?<br>
<a href="http://build.fhir.org/ig/HL7/sdc/StructureDefinition-sdc-questionnaire-candidateExpression.html">http://build.fhir.org/ig/HL7/sdc/StructureDefinition-sdc-questionnaire-candidateExpression.html</a><br>
Better description is on this page (maybe we should copy some of this text onto the extension page itself)<br>
<a href="http://build.fhir.org/ig/HL7/sdc/expressions.html">http://build.fhir.org/ig/HL7/sdc/expressions.html</a><br>
"CandidateExpressions should rarely, if ever, declare a name element." was added to the bottom, and I came up with a great use for that property (and all expressions I'll be putting into my forms) where this is the name that I use from an expression library, so that I can manage them better. (this is kind of like the library extension)</p>



<a name="198164586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198164586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198164586">(May 20 2020 at 07:48)</a>:</h4>
<p>Could this candidate expression be a "source" for a group level item, and then the child items for the group as they are "selected" from the source then leverage the initialExpression to populate values from that selection?<br>
e.g. Have a CandidateExpression on a group for "Contacts" for the patient, then the items in the group be name, contact number, relationship, then the selection could easily enable selecting a few from the record, then shoving into the responses.<br>
Or select relevant medications and then read the name dose etc.</p>



<a name="198211319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198211319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198211319">(May 20 2020 at 15:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> - is that an allows use of the Expression data type?  I.e. just specify a name and have it looked up in a library?</p>



<a name="198213219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198213219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198213219">(May 20 2020 at 15:15)</a>:</h4>
<p>Well, we haven't used it that way so far, but it's not an unreasonable thing to do. We currently do that quite a bit, we just do it a bit differently in that the "expression" element is the name of the expression in the library.</p>



<a name="198213309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198213309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198213309">(May 20 2020 at 15:16)</a>:</h4>
<p>And the reference points to the Library containing the expression.</p>



<a name="198214693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198214693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198214693">(May 20 2020 at 15:25)</a>:</h4>
<p>I think I prefer that approach.  It puts code in the code place and leaves name for human rendering</p>



<a name="198242944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198242944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198242944">(May 20 2020 at 19:03)</a>:</h4>
<p>We introduced the media type <code>text/cql.identifier</code> to support that use case, it would make sense to do the same thing for the FHIRPath case, that would be the signal for the implementation to know that the expression was actually the id of a content element in the referenced library.</p>



<a name="198255591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198255591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198255591">(May 20 2020 at 20:50)</a>:</h4>
<p>I was still having the expression in the questionnaire (keeping things simple for the renderer), was just a use where I was having it as a management thing.</p>



<a name="198255645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198255645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198255645">(May 20 2020 at 20:51)</a>:</h4>
<p>I'll log tracker to remove the "rarely provide a name" text</p>



<a name="198257928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198257928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198257928">(May 20 2020 at 21:11)</a>:</h4>
<p>FHIR-27537</p>



<a name="198260546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198260546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198260546">(May 20 2020 at 21:39)</a>:</h4>
<p><a href="http://build.fhir.org/ig/HL7/sdc/expressions.html">http://build.fhir.org/ig/HL7/sdc/expressions.html</a> says "name allows the result of the expression to be referenced within other expressions."  I am not sure if that makes sense for candidateExpression, but if it did I would expect it to be defining a variable with the result of the candidateExpression expression.</p>



<a name="198385162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/198385162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#198385162">(May 21 2020 at 22:26)</a>:</h4>
<p>I created an example of trying out the <code>candidateExpression</code> on a group value<br>
<a href="https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/pre-pop-test-candexpr">https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/pre-pop-test-candexpr</a><br>
Does this make sense to anyone other than me (refer to the contacts item)</p>



<a name="203434919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/203434919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joee Garcia <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#203434919">(Jul 09 2020 at 20:19)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>, Looking at the related JIRA ticket for this: <a href="https://jira.hl7.org/browse/FHIR-27537">https://jira.hl7.org/browse/FHIR-27537</a>... it seems that your example does not comply with the resolution on this ticket:</p>
<p><em>Will change "CandidateExpressions should rarely, if ever, declare a name element" to "CandidateExpresssion name can be used for documentation purposes, but will not be exposed for reference in other CQL or FHIRPath expressions</em>.  </p>
<p>It references the candidateExpression name "selectedContact" in other FHIRPath expressions (ie for the  initialExpression "%selectedContact.telecom.where(system='phone').first().value")</p>
<p>Which is correct? Can the "name" element be used as a reference or not? Can you clarify <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> ?</p>



<a name="204138933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Candidate%20Expressions/near/204138933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joee Garcia <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Candidate.20Expressions.html#204138933">(Jul 16 2020 at 20:32)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>,   We discussed this issue in the SDC Meeting and have added a change request for it: <a href="https://jira.hl7.org/browse/FHIR-28081">https://jira.hl7.org/browse/FHIR-28081</a>. Because of this, I've updated the sample questionnaire you submitted (questionnaire-fhirpath-prepop-candexpr) to use calculatedExpression for the child items instead of initialExpression (as initialExpression is only evaluated on initial load and calculatedExpression will work better when selecting/editing the answer linked to the candidateExpression)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
