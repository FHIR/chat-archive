---
layout: page
title: "FHIR Chat  · Limitations of &#x27;definition&#x27; for population/extraction · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html">Limitations of &#x27;definition&#x27; for population/extraction</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188162666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188162666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188162666">(Feb 13 2020 at 23:13)</a>:</h4>
<p>Gabriella Brown raised <a href="http://jira.hl7.org/browse/FHIR-25251" target="_blank" title="http://jira.hl7.org/browse/FHIR-25251">FHIR#25251</a> which asks whether we truly intend to limit item.definition references to element ids actually defined in the referenced profile or whether it's legitimate to reach 'deeper' into the structure than the snapshot actually exposes.  (E.g. pointing to Patient.name.given in the base Patient resource profile).  We've come up with 3 possible different answers, each having different pros and cons in terms of complexity, expressivity, etc. and who gets to feel the pain.  We're seeking wider community feedback.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> please take a look at the comments on the issue and provide thoughts either here or there.</p>



<a name="188162754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188162754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188162754">(Feb 13 2020 at 23:14)</a>:</h4>
<p>looks like the wrong task to me</p>



<a name="188162801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188162801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188162801">(Feb 13 2020 at 23:15)</a>:</h4>
<p>Fixed.  (Had copied the filter number rather than the issue number)</p>



<a name="188163410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188163410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188163410">(Feb 13 2020 at 23:22)</a>:</h4>
<p>some comments:</p>
<ul>
<li>it should definitely be id not path </li>
<li>it's not useful to talk out of a profile into implied content - you are referring to an element definition, and the definition doesn't depend on the context through which you find it. </li>
<li>not is it useful to alias the element. e.g [core]#HumanName.text isn't different to [us-core]#/Patient.name.text, and so shouldn't be given an alias</li>
</ul>
<p>Given that, I think that (a) we should be clear that it's id. and (b) you should have to refer to the id directly.</p>



<a name="188163640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188163640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188163640">(Feb 13 2020 at 23:26)</a>:</h4>
<p>Meaning that if you want to refer specifically to Patient.name.given, you'd have to define a specific profile that exposed that - because pointing to HumanName.given doesn't have the same semantic.</p>



<a name="188163645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188163645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188163645">(Feb 13 2020 at 23:26)</a>:</h4>
<p>(context is different)</p>



<a name="188168172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188168172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gabriela Brown <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188168172">(Feb 14 2020 at 00:42)</a>:</h4>
<p>Thanks for bringing this up for discussion! What do you mean by exposing Patient.name.given in a profile? Is it generally intended that a Profile should be created to be able to use a Questionnaire? </p>
<p>Generally, what is the way to create a questionnaire for an arbitrary structure definition? (<a href="https://www.hl7.org/fhir/operation-structuredefinition-questionnaire.html" target="_blank" title="https://www.hl7.org/fhir/operation-structuredefinition-questionnaire.html">https://www.hl7.org/fhir/operation-structuredefinition-questionnaire.html</a>) Would you have to make a profile with elements iterating every possible path into the resource that goes through a complex type?</p>
<p>How would you write a Questionnaire that just has three questions: first name, last name, birthdate, that get extracted to Patient.name.given, Patient.name.family, and Patient.birthdate, with given and family on the same HumanName object in the <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a> list?</p>
<p>I think the context of the element definition does matter for extraction. If you create a Questionnaire, ignore its tree structure, and get a response with two HumanName.given items and two HumanName.family items, where would you put them? All four on the same HumanName object in <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a>? Each on its own HumanName object in <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a>? (how would you even know that <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a> is the right place, as opposed to a contained Patient resource?) I think the questionnaire should be able to express this in itself without needing to reference a profile (some sort of path context to an element in a resource, and some way to group nested elements onto particular containing elements).</p>
<p>Also it is my impression that population is based entirely on fhirpath initialExpression extensions, and the definitions are only used for extraction.</p>



<a name="188172262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188172262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188172262">(Feb 14 2020 at 02:05)</a>:</h4>
<blockquote>
<p>if you want to refer specifically to Patient.name.given  you'd have to define a specific profile that exposed that</p>
</blockquote>
<p>Yes, pretty much,  because referring to Patient.name.given as an inferred idea doesn't say what you mean</p>



<a name="188172304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188172304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188172304">(Feb 14 2020 at 02:06)</a>:</h4>
<blockquote>
<p>Is it generally intended that a Profile should be created to be able to use a Questionnaire</p>
</blockquote>
<p>No. you can always have a questionnaire without a profile. But is intended that you can delegate the semantics of the questions to re-useable element definitions in StructureDefinitions</p>



<a name="188172317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188172317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188172317">(Feb 14 2020 at 02:07)</a>:</h4>
<blockquote>
<p>that get extracted to </p>
</blockquote>
<p>Extracted is not the same is is-defined-by</p>



<a name="188172364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188172364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188172364">(Feb 14 2020 at 02:08)</a>:</h4>
<p>at least, i think that's the core question</p>



<a name="188173604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188173604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188173604">(Feb 14 2020 at 02:43)</a>:</h4>
<p>Isn't the issue here that we're referring to a potential id value that is in no snapshot, but that it could be.<br>
Just as in the <code>Patient.name.given</code> example.<br>
As the snapshot doesn't have to walk into every property of every element (otherwise types like identifier would explode)</p>



<a name="188173661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188173661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188173661">(Feb 14 2020 at 02:44)</a>:</h4>
<p>And from my understanding, the definition property was prefixed with the profile canonical URL to start from, then a <code>#</code> then the element ID that could be walked to in that profile (even if it walks into the datatype that isn't fully expanded in the snapshot)</p>



<a name="188173669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188173669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188173669">(Feb 14 2020 at 02:45)</a>:</h4>
<p>(At least that's how I've implemented it at present)</p>



<a name="188175872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188175872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188175872">(Feb 14 2020 at 03:47)</a>:</h4>
<p>but what's the point? it's not a meaningful definition</p>



<a name="188179986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188179986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Miriam <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188179986">(Feb 14 2020 at 05:42)</a>:</h4>
<p>The definition itself is not meaningful, but I guess it is the structure implied by the path (<code>Patient.name.given</code>) that is meaningful for extraction. Although, you can derive same meaning from the group hierarchy, which I think is what <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> is getting at? Ex:</p>
<div class="codehilite"><pre><span></span>  <span class="s2">&quot;item&quot;</span><span class="err">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;linkId&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/StructureDefinition/Person#Person.name&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;group&quot;</span><span class="p">,</span>
      <span class="nt">&quot;repeats&quot;</span><span class="p">:</span> <span class="kc">true</span>
      <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;linkId&quot;</span><span class="p">:</span> <span class="s2">&quot;name-given&quot;</span><span class="p">,</span>
          <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/StructureDefinition/HumanName#HumanName.given&quot;</span><span class="p">,</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
          <span class="nt">&quot;repeats&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;linkId&quot;</span><span class="p">:</span> <span class="s2">&quot;name-family&quot;</span><span class="p">,</span>
          <span class="nt">&quot;definition&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/StructureDefinition/HumanName#HumanName.family&quot;</span><span class="p">,</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>


<p>^this approach makes sense to me. It's the same example Gabriela provided on the thread <a href="#narrow/stream/179166-implementers/topic/Representing.20Complex.20DataTypes.20in.20defintion-based.20extraction/near/181574410" title="#narrow/stream/179166-implementers/topic/Representing.20Complex.20DataTypes.20in.20defintion-based.20extraction/near/181574410">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Representing.20Complex.20DataTypes.20in.20defintion-based.20extraction/near/181574410</a> but I don't think there was a consensus there on how it should look.</p>



<a name="188180228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188180228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188180228">(Feb 14 2020 at 05:49)</a>:</h4>
<p>My example was very simple, but more likely will have a profiled name element in the profile, and then just walk the 1 step further into the family element.</p>



<a name="188180368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188180368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188180368">(Feb 14 2020 at 05:52)</a>:</h4>
<p>2 examples I did for a practitioner qualifications form....<br>
<a href="https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/prac-demo" target="_blank" title="https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/prac-demo">https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/prac-demo</a><br>
This second one includes definitions through extensions and slices (defined in a profile)<br>
<a href="https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/prac-ext-demo" target="_blank" title="https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/prac-ext-demo">https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/prac-ext-demo</a><br>
(referenced profile is here <a href="https://sqlonfhir-r4.azurewebsites.net/fhir/StructureDefinition/hcxdir-practitioner" target="_blank" title="https://sqlonfhir-r4.azurewebsites.net/fhir/StructureDefinition/hcxdir-practitioner">https://sqlonfhir-r4.azurewebsites.net/fhir/StructureDefinition/hcxdir-practitioner</a>)</p>



<a name="188228828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Limitations%20of%20%27definition%27%20for%20population/extraction/near/188228828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Miriam <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Limitations.20of.20&#x27;definition&#x27;.20for.20population.2Fextraction.html#188228828">(Feb 14 2020 at 17:50)</a>:</h4>
<p>Thanks for sharing the examples <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>. Looking at the <code>Practitioner.name.text</code> item I guess you would have two options for extractability: (1) use definition <code>HumanName.text</code> but nest it in a <code>group</code> with definition <code>Practitioner.name</code>, (2) profile <code>Practitioner.name.text</code> and use that as the definition.</p>
<p>I think it's worth clarifying the Extraction Guide on this point, because it is only sort of implied: in order to perform Extraction without profiling, the structure of the Questionnaire must match exactly the structure of the Resource(s) to extract. It makes sense, but because <code>group</code>s are described as  meant to "organize content of the questionnaire into sections, sub-sections, etc." we're sort of stuck with visual groupings that match the FHIR resource shape exactly (e.g. I can't collect first name, last name, and birthDate in a single "section").</p>
<p>I don't have any other suggestion <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span> just want to clarify my understanding on this point. Seems like Profile is really the way to go for anything more complex.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
