---
layout: page
title: "FHIR Chat  · Guidance around dependencies on external sources · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Guidance.20around.20dependencies.20on.20external.20sources.html">Guidance around dependencies on external sources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="278240106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Guidance%20around%20dependencies%20on%20external%20sources/near/278240106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Guidance.20around.20dependencies.20on.20external.20sources.html#278240106">(Apr 07 2022 at 23:37)</a>:</h4>
<p>Questionnaires can depend on external value sets, the results of queries, passed in launch parameters, and resolving references.  Depending how they're used, the end result can be that someone looking at or validating the QuestionnaireResponse later may see different information or even have validation issues that the original author did not.</p>
<p><a href="http://jira.hl7.org/browse/FHIR-36338">FHIR#36338</a> proposes adding some guidance about strategies to minimize/reduce this issue, but it seems unlikely/impractical to eliminate it entirely.  It also raises the question of in what circumstances a calculatedValueExpression should actually be calculated.  Should it only happen if the QuestionnaireResponse is not yet completed?  What if it gets amended?  Are there situations where it's appropriate to adjust the display based on the 'current' context - e.g. showing duration based on the 'now' of the current viewer?</p>
<p>Perhaps it's an unreasonable expectation that a QuestionnaireResponse that was valid when transitioned to 'complete' will always remain valid (as expansions of valuesets, retrieved search results, referenced resources, and/or launch parameters change)?</p>
<p>This thread is for people to discuss their expectations around validity as well as when 'dynamic' elements in a form should cease being 'dynamic'.</p>



<a name="278242813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Guidance%20around%20dependencies%20on%20external%20sources/near/278242813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Guidance.20around.20dependencies.20on.20external.20sources.html#278242813">(Apr 08 2022 at 00:13)</a>:</h4>
<p>And another interesting result question would be if the result of the fhirpath expression <code>today()</code> should resolve to the value of the response... (meta.lastModified or <a href="http://QR.date">QR.date</a>) - it's fine when it was originally saved, but then on edits later on.<br>
(considering examples like an invariant where it checks that a review date is in the future, and you make an edit to the result later on)</p>



<a name="278251092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Guidance%20around%20dependencies%20on%20external%20sources/near/278251092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Guidance.20around.20dependencies.20on.20external.20sources.html#278251092">(Apr 08 2022 at 02:42)</a>:</h4>
<p>today() is always going to resolve to today.  That's not going to change.  If you need a snapshot of a 'specific' today(), you need to store it in the QR.</p>



<a name="278254496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Guidance%20around%20dependencies%20on%20external%20sources/near/278254496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Guidance.20around.20dependencies.20on.20external.20sources.html#278254496">(Apr 08 2022 at 04:00)</a>:</h4>
<p>That's going to be fun...</p>



<a name="278254611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Guidance%20around%20dependencies%20on%20external%20sources/near/278254611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Guidance.20around.20dependencies.20on.20external.20sources.html#278254611">(Apr 08 2022 at 04:02)</a>:</h4>
<p>A better thing would be a way to check the date in the QR.<br>
I guess can try this out.</p>



<a name="278255065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Guidance%20around%20dependencies%20on%20external%20sources/near/278255065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Guidance.20around.20dependencies.20on.20external.20sources.html#278255065">(Apr 08 2022 at 04:10)</a>:</h4>
<p>I guess I could use this as the invariant/constraint expression <br>
<code>(%resource.authored | today()).take(1)</code></p>



<a name="278338982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Guidance%20around%20dependencies%20on%20external%20sources/near/278338982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Guidance.20around.20dependencies.20on.20external.20sources.html#278338982">(Apr 08 2022 at 17:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179255-questionnaire/topic/Guidance.20around.20dependencies.20on.20external.20sources/near/278240106">said</a>:</p>
<blockquote>
<p>Perhaps it's an unreasonable expectation that a QuestionnaireResponse that was valid when transitioned to 'complete' will always remain valid </p>
</blockquote>
<p>I think that given that external dependencies can change or disappear, we can only require a QuestionnaireResponse to be valid at the time it was marked complete.</p>



<a name="278339704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Guidance%20around%20dependencies%20on%20external%20sources/near/278339704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Guidance.20around.20dependencies.20on.20external.20sources.html#278339704">(Apr 08 2022 at 17:52)</a>:</h4>
<p>Even that scenario could cause issues if a user filling out a form takes several days to do so, and something changes so that an answer picked from a list a few days earlier is no longer valid.  I guess is such situations the application might allow the user to "finish" the Questionnaire without it being marked completed.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
