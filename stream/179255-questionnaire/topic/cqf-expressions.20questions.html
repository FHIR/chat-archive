---
layout: page
title: "FHIR Chat  · cqf-expressions questions · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html">cqf-expressions questions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="205949329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/205949329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Dingwell <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#205949329">(Aug 04 2020 at 19:26)</a>:</h4>
<p>Sorry if this has been discussed before but I couldn't find anything in relation to some of these questions.  </p>
<p>From what I've seen the cqf-expressions extension is always at the item level.  At first blush this seems like a natural place for it to be but looking at it a bit further it also seems odd.   cqf-expression defines itself as providing the value for the element on which it appears but in this case it seems like it is being used to define the value for an element on a separate resource, QuestionnaireResponse.   Curious as to why the cqf-expression would not be used on  Questionnaire.item.initialValue  and Questionnaire.item.answerOption? </p>
<p>Is there somewhere that defines the use and expectations of cqf-expression on Questionnaire.item?  Is the expression only used to gather to answer(s) to the item?  If it's the item is of type choice or open choice is the expression also considered to be the answerOption[x] list?  Is the expression expected to be the value for initalValue[x]. </p>
<p>If the expression is not expected to represent the answerOption[x] list for choice and open-choice questions then I see the issue where someone accidentally removes a CQL derived value in a Questionnaire without a means to add it back in.</p>



<a name="205957127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/205957127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#205957127">(Aug 04 2020 at 20:35)</a>:</h4>
<p>cqf-expression is probably not what you want - take a look at the structured data capture IG (<a href="http://build.fhir.org/ig/HL7/sdc/">http://build.fhir.org/ig/HL7/sdc/</a>) and look at the section on 'population'.  There are a number of Questionnaire-specific extensions that handle the semantic of 'appearing on Questionnaire, but intended to define values for use in the resulting QuestionnaireResponse'.</p>



<a name="205958551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/205958551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Dingwell <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#205958551">(Aug 04 2020 at 20:47)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  At the risk of making work for the DaVinci project,  all of their examples, as far as I can tell, use cqf-expression. I take it that those examples would more appropriately use the extensions defined under SDC.  <span class="user-mention" data-user-id="191506">@Yunwei Wang</span> is there any intent on moving to the SDC extensions as they seem more appropriate.</p>



<a name="206010897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206010897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Dingwell <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206010897">(Aug 05 2020 at 11:28)</a>:</h4>
<p>Nevermind, I see DaVinci is using the guidance from here <a href="http://hl7.org/fhir/R4/clinicalreasoning-knowledge-artifact-representation.html#documentation-template">http://hl7.org/fhir/R4/clinicalreasoning-knowledge-artifact-representation.html#documentation-template</a> </p>
<p>I also see that SDC is a viable alternative defined within the DaVinci documentation.</p>
<p>I suppose that begs the initial questions I had regarding the use of cqf-expression in the manner described in the clinical reasoning module.</p>



<a name="206021304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206021304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206021304">(Aug 05 2020 at 13:25)</a>:</h4>
<p>The Clinical Reasoning documentation template approach uses cqf-expression because that was the intended extension to support that sort of capability, but the SDC approach is much more mature, and the cqf-questionnaire profile has been deprecated. The cqf-expression extension is still used to provide "the value of the element on which it appears", in particular we use that for describing dynamic test data (<a href="https://github.com/cqframework/opioid-cds-r4/blob/master/input/examples/encounter-example-rec-07-end-of-life-exclusion-prefetch.xml#L13">example</a>).</p>



<a name="206022087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206022087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206022087">(Aug 05 2020 at 13:32)</a>:</h4>
<p>Also, SDC uses cqf-expression for a few things, per this tracker item: <a href="https://jira.hl7.org/browse/FHIR-25960">https://jira.hl7.org/browse/FHIR-25960</a></p>



<a name="206024247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206024247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Dingwell <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206024247">(Aug 05 2020 at 13:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  thanks, that makes sense, but I am not seeing the cqf-questionnaire profile as being labeled as deprecated.  In the latest R5 build it is still listed for 'Trial Use'.  Is it supposed to be labeled as deprecated?</p>



<a name="206024270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206024270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206024270">(Aug 05 2020 at 13:52)</a>:</h4>
<p>"cqf-questionnaire profile has been deprecated" Really? Wow. What is replacement for that profile?</p>



<a name="206030370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206030370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206030370">(Aug 05 2020 at 14:43)</a>:</h4>
<p><span class="user-mention" data-user-id="214452">@Rob Dingwell</span> After brief reading, I think answerExpression extension mentioned in <a href="https://jira.hl7.org/browse/FHIR-25960">https://jira.hl7.org/browse/FHIR-25960</a> could be a direction to go. Or the combination of questionnaire-initialExpression, sdc-questionnaire-candidateExpression, and sdc-questionnaire-contextExpression could also be a good replacement.</p>



<a name="206030754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206030754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206030754">(Aug 05 2020 at 14:46)</a>:</h4>
<p>A question about questionnaire-initialExpression. <a href="http://build.fhir.org/ig/HL7/sdc/populate.html#expression-based-population">Expression-based Population</a> states that "This should always be a FHIRPath that resolves to an item of the appropriate type unless the element has a type of Reference, in which case the expression can be a FHIR query". Why is CQL expression excluded here?</p>



<a name="206032639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206032639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Dingwell <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206032639">(Aug 05 2020 at 15:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> I think that CQL was inadvertently left out of that portion of the documentation.  If you look here you will see that CQL is listed as well .  <a href="http://build.fhir.org/ig/HL7/sdc/expressions.html">http://build.fhir.org/ig/HL7/sdc/expressions.html</a></p>



<a name="206037236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206037236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206037236">(Aug 05 2020 at 15:32)</a>:</h4>
<p>In general. yes. That is why I am confused by the wording "should always be a FHIRPath". Maybe there is a specific reason to exclude CQL. If so, I would like that to be clarified.</p>



<a name="206056144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206056144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206056144">(Aug 05 2020 at 17:55)</a>:</h4>
<p><a href="https://jira.hl7.org/browse/FHIR-28211">https://jira.hl7.org/browse/FHIR-28211</a></p>



<a name="206084912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206084912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206084912">(Aug 05 2020 at 22:18)</a>:</h4>
<p>There was a change request for us to allow CQL in places that had previously only allowed FHIRPath.  It's possible that either hasn't been applied yet or this spot might have been missed.  <span class="user-mention" data-user-id="217312">@Joee Garcia</span> ?</p>



<a name="206125416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/cqf-expressions%20questions/near/206125416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joee Garcia <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/cqf-expressions.20questions.html#206125416">(Aug 06 2020 at 10:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191506">@Yunwei Wang</span>  Yes,  this same spot in the documentation has been raised and resolved  in <a href="https://jira.hl7.org/browse/FHIR-21391">https://jira.hl7.org/browse/FHIR-21391</a> , but it has not been applied yet.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
