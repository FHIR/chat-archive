---
layout: page
title: "FHIR Chat  · Problem with resolution of FHIR- · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html">Problem with resolution of FHIR-</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="263778459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263778459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263778459">(Dec 05 2021 at 17:12)</a>:</h4>
<p>I'm reading through the resolution to <a href="http://jira.hl7.org/browse/FHIR-27937">FHIR#27937</a> and am struggling to understand what we were thinking.  Changing 'Questionnaire' to 'QuestionnaireResponse' makes no sense - as this is a reference in a Questionnaire to a different Questionnaire that can be used to create the desired resource on the fly.  </p>
<p>However, on looking at the extension in detail, there are other things that don't make sense:</p>
<ul>
<li>the type is 'uri'.  However, if we're wanting to point to a Questionnaire, the type should be 'canonical'</li>
<li>the description of the extension says that the reference can be "indirect via mapping if the Reference is to some other sort of resource", but I have no clue what that means.  It would make no sense for a Questionnaire to point to a specific AllergyIntolerance or Procedure or something.  The best I can presume is that the intention is to point to a profile and then somehow have the system generate a form based on the profile and populate the resulting response into an instance of the profiled resource.  However, there's really no need to list the profile to use because we already have an extension on Questionnaire.item for questions of type Reference that indicates the desired resource type and possibly profile the referenced resource should comply with - so pointing to a profile with this extension would be redundant.</li>
</ul>
<p>My proposal: re-open the current tracker item and reject it; create and approve a new tracker item to change the type to "canonical&lt;Questionnaire&gt;" and remove the language about indirect.  Thoughts?</p>



<a name="263800284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263800284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263800284">(Dec 06 2021 at 01:24)</a>:</h4>
<p>I think uri to canonical&lt;Questionnaire&gt; is correct.<br>
However I do get what the rest of the text is expecting.</p>



<a name="263800414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263800414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263800414">(Dec 06 2021 at 01:27)</a>:</h4>
<p>The Reference type being identified here is the one that the Quesitonnaire item (or element) contains.<br>
The indirect part is if the resource type referenced by the item is not a QuestionnaireResponse, but an Observation reference, which then needs to be extracted to reference (from the Q that was linked)</p>



<a name="263800454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263800454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263800454">(Dec 06 2021 at 01:28)</a>:</h4>
<p>I think this is intended to cover use cases where you have a questionnaire to capture some other data, and can be turned into the target type, then linked (if they didn't already find one)</p>



<a name="263804331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263804331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263804331">(Dec 06 2021 at 03:06)</a>:</h4>
<p>I'm not following.  If you're going to extract, the details of the extraction will be in the Questionnaire.  And if you're going to extract, you MUST point to the Questionnaire - or there'll be no QuestionnaireResponse to extract from.  I was fully expecting extraction to be necessary in all cases...</p>



<a name="263804357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263804357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263804357">(Dec 06 2021 at 03:07)</a>:</h4>
<p>Maybe examples will help.</p>



<a name="263805321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263805321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263805321">(Dec 06 2021 at 03:31)</a>:</h4>
<p>Was that an offer to share some? :)</p>



<a name="263805393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263805393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263805393">(Dec 06 2021 at 03:32)</a>:</h4>
<p>Yes. Just putting it together</p>



<a name="263805545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263805545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263805545">(Dec 06 2021 at 03:37)</a>:</h4>
<p>This is one with the 2 types of usage...</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code><span class="nt">&lt;Questionnaire</span> <span class="na">xmlns=</span><span class="s">"http://hl7.org/fhir"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">"res-ref"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">"http://fhir.telstrahealth.com/demos/Questionnaire/res-ref"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;version</span> <span class="na">value=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;title</span> <span class="na">value=</span><span class="s">"Resource Reference demo"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">"draft"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;date</span> <span class="na">value=</span><span class="s">"2015-05-22"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;publisher</span> <span class="na">value=</span><span class="s">"Telstra Health"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;item&gt;</span>
    <span class="nt">&lt;linkId</span> <span class="na">value=</span><span class="s">"EOS_APS_V01_root"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">"Test some resource references"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">"group"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;extension</span> <span class="na">url=</span><span class="s">"http://hl7.org/fhir/StructureDefinition/questionnaire-referenceResource"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;valueCode</span> <span class="na">value=</span><span class="s">"Observation"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/extension&gt;</span>
      <span class="nt">&lt;extension</span> <span class="na">url=</span><span class="s">"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-lookupQuestionnaire"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;valueCanonical</span> <span class="na">value=</span><span class="s">"https://lforms-fhir.nlm.nih.gov/baseR4/Questionnaire/55418-8-x"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/extension&gt;</span>
      <span class="nt">&lt;linkId</span> <span class="na">value=</span><span class="s">"recentSpecificObservation"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">"Please select the most recent glucose observation"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">"reference"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;extension</span> <span class="na">url=</span><span class="s">"http://hl7.org/fhir/StructureDefinition/questionnaire-referenceResource"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;valueCode</span> <span class="na">value=</span><span class="s">"QuestionnaireResponse"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/extension&gt;</span>
      <span class="nt">&lt;extension</span> <span class="na">url=</span><span class="s">"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-lookupQuestionnaire"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;valueCanonical</span> <span class="na">value=</span><span class="s">"https://fhir.telstrahealth.com/fastforms/Questionnaire/hacc"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/extension&gt;</span>
      <span class="nt">&lt;linkId</span> <span class="na">value=</span><span class="s">"haccFunding"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">"Additional funding information"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">"reference"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
  <span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/Questionnaire&gt;</span>
</code></pre></div>



<a name="263805628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263805628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263805628">(Dec 06 2021 at 03:39)</a>:</h4>
<p>Note that the first item is after an Observation to reference, but the definition indicates that you can use the Questionniare to capture that data and extract to the obs...</p>



<a name="263805683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263805683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263805683">(Dec 06 2021 at 03:40)</a>:</h4>
<p>Also note that <a href="https://hl7.org/fhir/R4/extension-questionnaire-referencefilter.html">https://hl7.org/fhir/R4/extension-questionnaire-referencefilter.html</a> can be used to filter down, however I'm not sure that the definition of that filter is adequate - should create a jira tracker to clarify that? i.e. handlebars syntax and what real values should be there...</p>



<a name="263806849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263806849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263806849">(Dec 06 2021 at 04:05)</a>:</h4>
<p>Ok.  Then in all cases the reference is to a Questionnaire.  The only special note that would be required is saying that the result is generally extracted to create the target resource, the only exception being if the target resource is a QuestionnaireResponse.  (The existing wording definitely doesn't convey that, at least not to me...)</p>



<a name="263807078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263807078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263807078">(Dec 06 2021 at 04:10)</a>:</h4>
<p>The canonical is yes, but the text that was saying QuestionnaireResponse, was to the item.reference, not this extension - that's where the confusion slips in.</p>



<a name="263807091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263807091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263807091">(Dec 06 2021 at 04:11)</a>:</h4>
<p>And direct (being the type of the item.reference restiction is QuestionnaireResponse) and indirect (being that you need to convert from the QR to the target reference type)</p>



<a name="263807102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263807102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263807102">(Dec 06 2021 at 04:11)</a>:</h4>
<p>Does that sound like the intent of the tracker?</p>



<a name="263807304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263807304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263807304">(Dec 06 2021 at 04:17)</a>:</h4>
<p>Ok, I can work with that understanding.</p>



<a name="263807507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263807507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263807507">(Dec 06 2021 at 04:23)</a>:</h4>
<p>So still going to change from a uri/url extension to a canonical right?</p>



<a name="263807967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263807967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263807967">(Dec 06 2021 at 04:35)</a>:</h4>
<p>y</p>



<a name="263858289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263858289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263858289">(Dec 06 2021 at 14:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191367">Brian Postlethwaite</span> <a href="#narrow/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-/near/263805683">said</a>:</p>
<blockquote>
<p>Also note that <a href="https://hl7.org/fhir/R4/extension-questionnaire-referencefilter.html">https://hl7.org/fhir/R4/extension-questionnaire-referencefilter.html</a> can be used to filter down, however I'm not sure that the definition of that filter is adequate - should create a jira tracker to clarify that? i.e. handlebars syntax and what real values should be there...</p>
</blockquote>
<p>Please do.  It is not at all clear how to use that extension.</p>



<a name="263858793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263858793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263858793">(Dec 06 2021 at 14:40)</a>:</h4>
<p>So, if you have a item.reference to an Observation, and use the lookupQuestionnaire extension, is the assumption that the $extract on the Questionnaire would only result in a single Observation being extracted?</p>



<a name="263865377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263865377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263865377">(Dec 06 2021 at 15:23)</a>:</h4>
<p>That's certainly my assumption</p>



<a name="263865450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Problem%20with%20resolution%20of%20FHIR-/near/263865450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Problem.20with.20resolution.20of.20FHIR-.html#263865450">(Dec 06 2021 at 15:23)</a>:</h4>
<p>It's a Questionnaire specifically designed to result in an instance of the desired resource.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
