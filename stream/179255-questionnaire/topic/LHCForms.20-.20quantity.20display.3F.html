---
layout: page
title: "FHIR Chat  · LHCForms - quantity display? · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html">LHCForms - quantity display?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="270764462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270764462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270764462">(Feb 04 2022 at 19:53)</a>:</h4>
<p>Does LHCForms parse quantity type? I don't get it to display the value and units, only a string entry</p>



<a name="270772386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270772386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270772386">(Feb 04 2022 at 21:04)</a>:</h4>
<p><span class="user-mention" data-user-id="195344">@Paul Lynch</span> ?</p>



<a name="270776831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270776831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270776831">(Feb 04 2022 at 21:40)</a>:</h4>
<p>Yes, it does handle valueQuantity.  I will look for an example.</p>



<a name="270777274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270777274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270777274">(Feb 04 2022 at 21:45)</a>:</h4>
<p><a href="https://raw.githubusercontent.com/lhncbc/lforms-fhir-app/master/e2e-tests/data/R4/vital-sign-questionnaire.json">https://raw.githubusercontent.com/lhncbc/lforms-fhir-app/master/e2e-tests/data/R4/vital-sign-questionnaire.json</a></p>



<a name="270777369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270777369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270777369">(Feb 04 2022 at 21:46)</a>:</h4>
<p>If you upload that to <a href="https://lhcforms.nlm.nih.gov/lforms-fhir-app/?server=https%3A%2F%2Flforms-fhir.nlm.nih.gov%2FbaseR4">https://lhcforms.nlm.nih.gov/lforms-fhir-app/?server=https%3A%2F%2Flforms-fhir.nlm.nih.gov%2FbaseR4</a>, you can save a QR and load it back in.</p>



<a name="270875360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270875360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270875360">(Feb 06 2022 at 07:19)</a>:</h4>
<p>I see. It only shows up when there's a unitOption - shouldn't we be able to have questionnaire quantities without defining the unit valueset (i.e. leave it open?)</p>



<a name="270895847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270895847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270895847">(Feb 06 2022 at 15:42)</a>:</h4>
<p>And specify the unit as text?</p>



<a name="270905005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270905005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270905005">(Feb 06 2022 at 18:51)</a>:</h4>
<p>Yes</p>



<a name="270905010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270905010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270905010">(Feb 06 2022 at 18:51)</a>:</h4>
<p>Or open choice</p>



<a name="270912034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270912034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270912034">(Feb 06 2022 at 21:10)</a>:</h4>
<p>We ran across this issue as well.  We have study procedures that are done x times  per week,    y times per month, etc  and these fit nicely with the standardized unit valuesets.  But we have other study procedures that are done once per study phase  or two times per treatment cycle, where the length of the study phase or treatment cycle cannot be known ahead of time, because it might depend on how long it takes to recruit participants or how long it takes before there is any response to the treatment.   So, we thought that it would be useful for the use to be able to specify the units such as "study phase"  or "treatment cycle".     Another example might be a longitudinal study of women over 10 years, where they will be given a test once per pregnancy over a 10 year observation period, where the number and frequency of pregnancies is unknown up front and the unit should be "pregnancy".</p>



<a name="270914521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270914521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270914521">(Feb 06 2022 at 22:04)</a>:</h4>
<p>Those aren't units and can't go into Quantity.unit.  Units need to be countable, predictable things that can be added, multiplied and converted to other units.</p>



<a name="270917234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270917234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270917234">(Feb 06 2022 at 23:09)</a>:</h4>
<p>This is sounding more like multiple questions in the form, not use of a quantity.<br>
one for value, and another for coding (optional) and you get a similar outcome.</p>



<a name="270919656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270919656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270919656">(Feb 07 2022 at 00:09)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  for explaining how Quantity.unit   is intended to be used.</p>
<p>We have struggled with this one a bit, because the table of procedures for the research study is a repeating group (gtable) like this (including sample data).  The requirement is that it needs to be shown to the participant with all of the procedures listed by frequency, so that the participants know what they are signing themselves into.</p>
<div class="codehilite"><pre><span></span><code>procedure                     qty.        unit
___________________________________________________________
blood draws             6               year
biopsy                      2            year
vital signs check       4              month
CTScan                  1            study
MRI                 1               treatment cycle
xray                   1             replacement knee
</code></pre></div>
<p>Since not all of the units are standard (years, months, weeks, etc.),  we are currently just letting the users free-form type the frequency of the procedures such as "6 per year"   or "4/month"  or "1 xray after each replacement knee surgery") , knowing that the data will be messy.</p>
<p>However, I have just found this example using the already existing unitOpen extension:</p>
<p><a href="https://build.fhir.org/ig/HL7/sdc/examples.html#using-unitoption-unitopen-and-unitsupplementalsystem">https://build.fhir.org/ig/HL7/sdc/examples.html#using-unitoption-unitopen-and-unitsupplementalsystem</a></p>
<p>The extension is at <a href="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-unitOpen">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-unitOpen</a></p>
<p>So, I think that we could have the users pick from a list of standard measurements like in the example or pick the ...  for other   and then have them input a string like "treatment cycle"  for the unit.</p>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span>      what are you trying to do with your units?</p>



<a name="270920101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270920101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270920101">(Feb 07 2022 at 00:20)</a>:</h4>
<p>year and month are units.  study, treatment cycle and replacement knee are not.  You can't express those in Quantity.unit or Quantity.code.</p>



<a name="270928069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270928069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270928069">(Feb 07 2022 at 03:23)</a>:</h4>
<p>Yes.  You are right. It would be best to have the unit recorded as weeks, months, years or  "none"   and then capture study, treatment cycle or replacement knees  psuedo-unit in a different data field.</p>



<a name="270944416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270944416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270944416">(Feb 07 2022 at 08:10)</a>:</h4>
<p>My questionnaire item is "amount" and it can be 5 g, 4 spoons, 3 sips, 2 units...</p>



<a name="270987079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270987079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270987079">(Feb 07 2022 at 14:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F/near/270920101">said</a>:</p>
<blockquote>
<p>year and month are units.  study, treatment cycle and replacement knee are not.  You can't express those in Quantity.unit or Quantity.code.</p>
</blockquote>
<p>Could you explain why not?  Is there something in FHIR's definition of the term "unit" that prevents that?  Generally speaking, I think any noun could be unit.  You could write "5 knees/surgeon".</p>



<a name="270989047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270989047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270989047">(Feb 07 2022 at 14:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191832">Jose Costa Teixeira</span> <a href="#narrow/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F/near/270905010">said</a>:</p>
<blockquote>
<p>Or open choice</p>
</blockquote>
<p><a href="http://jira.hl7.org/browse/FHIR-20394">FHIR-20394</a> said there is no open choice for unit lists.  I don't remember the reasoning, and nor why I would have moved to approve it.  <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> ?</p>



<a name="270989347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270989347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270989347">(Feb 07 2022 at 14:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F/near/270895847">said</a>:</p>
<blockquote>
<p>And specify the unit as text?</p>
</blockquote>
<p>That much seems to be allowable if there are no units provided.  See <a href="#narrow/stream/179255-questionnaire/topic/type.3Dquantity.20without.20questionnaire-unit">https://chat.fhir.org/#narrow/stream/179255-questionnaire/topic/type.3Dquantity.20without.20questionnaire-unit</a> .   We would need to add that support to LHC-Forms.</p>



<a name="270993614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270993614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270993614">(Feb 07 2022 at 15:22)</a>:</h4>
<p>I may be letting some v3 rules seep in here, because you're right, Quantity isn't that tight.  I guess it's best to think of units as being on a scale - there are 'good' units, like 'cm' and 'tbsp' that are regular and safely interconvertable,   There are 'fuzzy' units like 'sip' and 'pea-sized blob' which don't have fixed dimensions but that can be evaluated and operated on mathematically without external context and certainly have an approximate equivalence across units.  And then there are things like "twice per study" which aren't really 'measurements' at all and which can be compared at all.  I.e. if there are two patients who have "twice per study", that could mean 2 months or 2 years.  Representing that last set as Quantity is extremely suspect.</p>



<a name="270993693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/LHCForms%20-%20quantity%20display%3F/near/270993693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/LHCForms.20-.20quantity.20display.3F.html#270993693">(Feb 07 2022 at 15:23)</a>:</h4>
<p>Re: <a href="http://jira.hl7.org/browse/FHIR-20394">FHIR-20394</a>, I think part of it is that we have no mechanism to distinguish whether open vs. closed is allowed.  The other aspect was limiting complexity.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
