---
layout: page
title: "FHIR Chat  · Extracted Observations and deleting a QuestionnaireRepsonse · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html">Extracted Observations and deleting a QuestionnaireRepsonse</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="166476139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/166476139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#166476139">(May 24 2019 at 18:06)</a>:</h4>
<p>If I save a QuestionnaireResponse and its extracted Observations, HAPI FHIR does not allow me to then delete the QuestionnaireResponse unless I also delete the Observations (which are associated with the response via the "derivedFrom" field).  Is that really the desired behavior?</p>



<a name="166476334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/166476334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#166476334">(May 24 2019 at 18:09)</a>:</h4>
<p>I don't think so...  <span class="user-mention" data-user-id="191319">@James Agnew</span> ?</p>



<a name="166477713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/166477713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#166477713">(May 24 2019 at 18:25)</a>:</h4>
<p>The public HAPI FHIR server does enforce referential integrity. This seems like good behaviour to me, why would you want to allow people to delete data that other data references?</p>
<p>There is a setting in HAPI FHIR to disable this on self hosted servers though. </p>
<p>I've been thinking it might be nice to have a "delete and cascade" function though to help with cleanup processes..</p>



<a name="166478975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/166478975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#166478975">(May 24 2019 at 18:39)</a>:</h4>
<p>In the case, the reason is that I used a Questionnaire for the purpose of creating Observations, and then I wanted to delete the QuesionnaireRepsonse so it didn't show up in the client application.  However, I wanted to leave the Observations around for pre-popluation.  I am not sure this counts as a real use-case though.</p>



<a name="166486286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/166486286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#166486286">(May 24 2019 at 20:12)</a>:</h4>
<p>If you're intending to delete the QRs, why are you creating other resources with links to it though..? Wouldn't it make more sense to not create those links? Or to use canonical references instead?</p>



<a name="166489084"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/166489084" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#166489084">(May 24 2019 at 20:50)</a>:</h4>
<p>The SDC spec (<a href="http://hl7.org/fhir/uv/sdc/2019May/extraction.html" target="_blank" title="http://hl7.org/fhir/uv/sdc/2019May/extraction.html">http://hl7.org/fhir/uv/sdc/2019May/extraction.html</a>) says "Observation.derivedFrom - set to a reference to the QuestionnaireResponse".   It looks like QuestionnaireResponses are not one of the resources that have canonical URLs (<a href="https://www.hl7.org/fhir/resource.html#canonical" target="_blank" title="https://www.hl7.org/fhir/resource.html#canonical">https://www.hl7.org/fhir/resource.html#canonical</a>).</p>



<a name="166489987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/166489987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#166489987">(May 24 2019 at 21:03)</a>:</h4>
<p>I do wonder what the value of having 'derivedFrom' is if you're going to delete the questionnaire response</p>



<a name="166492635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/166492635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#166492635">(May 24 2019 at 21:36)</a>:</h4>
<p>Well, I suppose it lets you know that a certain set of Observations were all generated from the same QuestionnaireResponse.</p>



<a name="166492648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/166492648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#166492648">(May 24 2019 at 21:36)</a>:</h4>
<p>why not keep the QR then?</p>



<a name="166492904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/166492904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#166492904">(May 24 2019 at 21:40)</a>:</h4>
<p>I was trying to get rid of clutter.  After a lot of testing, my client was showing a large number of QuestionnaireResponses, about half of which had Observations.  I wanted to keep the Observations around for pre-population (for further demos and testing).  Anyway, I have now changed my delete process to delete any associated Observations first.  I just have to be careful not to delete the last QR of its type.</p>



<a name="166493000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/166493000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#166493000">(May 24 2019 at 21:42)</a>:</h4>
<p>so it's a limitation in the resource model. I want you only to show QRs that haven't been post-processed.... but post-processing recording is not a feature of the QR. I guess that I would use tags (Resource.meta.tag) for this use case</p>



<a name="246302769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Extracted%20Observations%20and%20deleting%20a%20QuestionnaireRepsonse/near/246302769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Extracted.20Observations.20and.20deleting.20a.20QuestionnaireRepsonse.html#246302769">(Jul 17 2021 at 03:58)</a>:</h4>
<p>The other thing would be when you are Deleting that QR, scan for all those obs, then update them to remove the reference, or update it to derivedFrom.identifier (and maybe update display), rather than derivedFrom.reference.<br>
Then delete the QR, this would give you the best of both worlds, still having the Obs, the "logical link" to the non existing QR, and noQR baggage.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
