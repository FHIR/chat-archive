---
layout: page
title: "FHIR Chat  · Validation of Questionnaire resources · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Validation.20of.20Questionnaire.20resources.html">Validation of Questionnaire resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188047147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Validation%20of%20Questionnaire%20resources/near/188047147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Winters <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Validation.20of.20Questionnaire.20resources.html#188047147">(Feb 12 2020 at 19:50)</a>:</h4>
<p>Anyone actively using the <a href="https://wiki.hl7.org/Using_the_FHIR_Validator" target="_blank" title="https://wiki.hl7.org/Using_the_FHIR_Validator">FHIR Validator</a> on Questionnaire resources?  I've run into an issue where the validator chokes when multiple <code>enableWhen</code> elements are included in a single <code>item</code>.  The problem I'm seeing is probably best illustrated with an example.  If I take an <a href="http://hl7.org/fhir/R4/questionnaire-zika-virus-exposure-assessment.json.html" target="_blank" title="http://hl7.org/fhir/R4/questionnaire-zika-virus-exposure-assessment.json.html">example Questionnaire</a> and run the validator it passes with some expected (and some unexpected) warnings.  If I update the example JSON so that the <code>item</code> with <code>linkId=4</code> includes more than one <code>enableWhen</code>:</p>
<div class="codehilite"><pre><span></span>&quot;enableWhen&quot;: [
  {
    &quot;question&quot;: &quot;1&quot;,
    &quot;operator&quot;: &quot;=&quot;,
    &quot;answerBoolean&quot;: false
  },
  {
    &quot;question&quot;: &quot;2&quot;,
    &quot;operator&quot;: &quot;=&quot;,
    &quot;answerBoolean&quot;: false
  }
],
&quot;enableBehavior&quot;: &quot;all&quot;
</pre></div>


<p>I get the following error:</p>
<div class="codehilite"><pre><span></span>&gt;&gt; java -jar org.hl7.fhir.validator.jar example.json -version 4.0 -ig hl7.fhir.uv.sdc
FHIR Validation tool Version 4.1.61-SNAPSHOT (Git# b6ba504320f6). Built 2020-02-07T10:55:33.966+11:00 (5 days old)
  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1
  .. connect to tx server @ http://tx.fhir.org
    (v4.0.1)
+  .. load IG from hl7.fhir.uv.sdc
   ... Using version 2.7.0
  .. validate [example.json]
Exception in thread &quot;main&quot; java.lang.Error: Attempt to read a single element when there is more than one present (enableWhen)
</pre></div>


<p>Wondering if this is a bug in the validator or if I'm misunderstanding how to define multiple <code>enableWhen</code> conditions.</p>



<a name="188050715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Validation%20of%20Questionnaire%20resources/near/188050715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Validation.20of.20Questionnaire.20resources.html#188050715">(Feb 12 2020 at 20:32)</a>:</h4>
<p>That sounds like a validator bug.  enableWhen has been allowed to repeat since it was introduced in STU3.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="188051482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Validation%20of%20Questionnaire%20resources/near/188051482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Validation.20of.20Questionnaire.20resources.html#188051482">(Feb 12 2020 at 20:43)</a>:</h4>
<p>I've just stumbled into a pile of bugs here. So much for test cases</p>



<a name="188052140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Validation%20of%20Questionnaire%20resources/near/188052140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Winters <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Validation.20of.20Questionnaire.20resources.html#188052140">(Feb 12 2020 at 20:52)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> .  It's good to get confirmation that my thinking was not way out of line.  Let me know if you need any further information.</p>



<a name="188104911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Validation%20of%20Questionnaire%20resources/near/188104911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Winters <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Validation.20of.20Questionnaire.20resources.html#188104911">(Feb 13 2020 at 13:19)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , confirming this issue is fixed in the latest version of the validator (4.1.63).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
