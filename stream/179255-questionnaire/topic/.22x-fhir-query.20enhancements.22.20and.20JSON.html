---
layout: page
title: "FHIR Chat  · &quot;x-fhir-query enhancements&quot; and JSON · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.22x-fhir-query.20enhancements.22.20and.20JSON.html">&quot;x-fhir-query enhancements&quot; and JSON</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="214090053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%22x-fhir-query%20enhancements%22%20and%20JSON/near/214090053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.22x-fhir-query.20enhancements.22.20and.20JSON.html#214090053">(Oct 21 2020 at 17:59)</a>:</h4>
<p>The section on <a href="https://build.fhir.org/ig/HL7/sdc/expressions.html#x-fhir-query-enhancements">x-fhir-query enhancements</a> contains some rules I am not sure how to implement when processing JSON-formatted resources.  For instance, it says, "If the expression resolves to a complex element of type Coding, Identifier, or Reference, the element content will be substituted using the standard token format."</p>
<p>However, what fhirpath.js returns when processing a JSON resource is the data for the nodes picked out by the FHIRPath expression.  For example, an expression <code>Observation.code.coding</code> might return:</p>
<div class="codehilite"><pre><span></span><code>[
 {
  &quot;system&quot;: &quot;http://loinc.org&quot;,
  &quot;code&quot;: &quot;29463-7&quot;,
  &quot;display&quot;: &quot;Body Weight&quot;
 }
]
</code></pre></div>


<p>When the caller gets that back, there is nothing in the data to indicate that that is a Coding, except that one might guess it is a Coding based on the fields.</p>



<a name="214104093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%22x-fhir-query%20enhancements%22%20and%20JSON/near/214104093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.22x-fhir-query.20enhancements.22.20and.20JSON.html#214104093">(Oct 21 2020 at 19:42)</a>:</h4>
<p>Is that an x-fhir-query issue or a Javascript issue?</p>



<a name="214110555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%22x-fhir-query%20enhancements%22%20and%20JSON/near/214110555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.22x-fhir-query.20enhancements.22.20and.20JSON.html#214110555">(Oct 21 2020 at 20:30)</a>:</h4>
<p>I think it is problem that does not happen with the XML format, and that the JSON format as designed has a shortcoming.  On the other hand, I don't think there is anything in the FHIRPath specification about what a FHIRPath engine is supposed to return, so it could perhaps provide an option to mess with the JSON (after it finished running the expression), to convert the array elements into strings, or to inject type information into the structures.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
