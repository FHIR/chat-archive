---
layout: page
title: "FHIR Chat  · an item cannot have an answerExpression if answerValue... · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/an.20item.20cannot.20have.20an.20answerExpression.20if.20answerValue.2E.2E.2E.html">an item cannot have an answerExpression if answerValue...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="261883464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/an%20item%20cannot%20have%20an%20answerExpression%20if%20answerValue.../near/261883464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/an.20item.20cannot.20have.20an.20answerExpression.20if.20answerValue.2E.2E.2E.html#261883464">(Nov 18 2021 at 03:58)</a>:</h4>
<p><span class="user-mention" data-user-id="195344">@Paul Lynch</span>  asked me to bring up this topic for discussion. </p>
<p>For one section of our questionnaire, our intended design is to have the final question   auto-populated for the users (based on the answers to the previous questions and based on answers in items in the parent questionnaire) using an answerExpression.   However, there may be situations where the user didn't complete enough questions for the auto-populate to happen accurately. In that case, the users need to be able to answer manually, because the final question is mandatory (required).</p>
<p>In addition, we want to make sure that the users don't randomly enter things other than from a default drop-down list. So, I had added a answerOption.valueCoding  to the item  to allow for the manual selection in cases where auto-population doesn't occur.</p>
<p>Due to the constraint: "An item cannot have an answerExpression if answerOption or answerValueSet is already present",  the answerExpression and the answerOption are mutually exclusive so I can't have both the autopopulate and the ability to select from the drop-down on the same question.</p>
<p>Paul has provided a suggested workaround where I can use an included valueSet in the answerExpression to be shown if the auto-populate doesn't occur.</p>
<p>What is the intent of the constraint: "An item cannot have an answerExpression if answerOption or answerValueSet is already present"? Paul was also wondering why this constraint was created.</p>



<a name="261932001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/an%20item%20cannot%20have%20an%20answerExpression%20if%20answerValue.../near/261932001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/an.20item.20cannot.20have.20an.20answerExpression.20if.20answerValue.2E.2E.2E.html#261932001">(Nov 18 2021 at 14:13)</a>:</h4>
<p>Population is handled by <code>initialExpression</code>, not <code>answerExpression</code>.  <code>answerExpression</code> just allows the dropdown to be dynamic instead of fixed.</p>



<a name="261992051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/an%20item%20cannot%20have%20an%20answerExpression%20if%20answerValue.../near/261992051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/an.20item.20cannot.20have.20an.20answerExpression.20if.20answerValue.2E.2E.2E.html#261992051">(Nov 18 2021 at 21:17)</a>:</h4>
<p>So, I would place 2 extensions against the item?    The answerExpression  will  create the dynamic drop-down   and the initialExpression will populate the value from the parent questionnaire?</p>



<a name="261994947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/an%20item%20cannot%20have%20an%20answerExpression%20if%20answerValue.../near/261994947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/an.20item.20cannot.20have.20an.20answerExpression.20if.20answerValue.2E.2E.2E.html#261994947">(Nov 18 2021 at 21:40)</a>:</h4>
<p>Answer3xpression yes, for dropdown values. If intended to change answer dynically from other questions, that's calculatedExpression.</p>



<a name="261995016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/an%20item%20cannot%20have%20an%20answerExpression%20if%20answerValue.../near/261995016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/an.20item.20cannot.20have.20an.20answerExpression.20if.20answerValue.2E.2E.2E.html#261995016">(Nov 18 2021 at 21:41)</a>:</h4>
<p>InitialvalueExtension is just for setting the initial value prior to data entry, no expectation of change.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
