---
layout: page
title: "FHIR Chat  · Direct resolution of answerValueSet · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html">Direct resolution of answerValueSet</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="201921983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/201921983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#201921983">(Jun 25 2020 at 00:57)</a>:</h4>
<p>If the FHIR server cannot provide an expansion of an answerValueSet's URI, the section on type canonical says that one should "fall back to direct resolution using the URL as a literal reference".  Does this mean that the answerValueSet URI (as a URL) might be expected to return a ValueSet expansion or just a definition?  If the latter, how does one expand it?  By appending "/$expand"?</p>



<a name="201922791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/201922791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#201922791">(Jun 25 2020 at 01:12)</a>:</h4>
<p>That's what mine does, it appends the /$expand with filter=blah</p>



<a name="202016155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202016155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202016155">(Jun 25 2020 at 19:48)</a>:</h4>
<p>What if the URL has a #fragment part?  Would you then be expected not to $expand it, but to look inside the returned resource for .contained?</p>



<a name="202016319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202016319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202016319">(Jun 25 2020 at 19:50)</a>:</h4>
<p>It would be helpful if there were a list of steps for how to process answerValueSet.</p>



<a name="202022708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202022708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202022708">(Jun 25 2020 at 20:46)</a>:</h4>
<p>You can't have a #fragment when pointing to a value set?</p>



<a name="202029970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202029970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202029970">(Jun 25 2020 at 21:53)</a>:</h4>
<p>Do you mean as a contained reference?</p>



<a name="202030003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202030003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202030003">(Jun 25 2020 at 21:53)</a>:</h4>
<p>In my renderer if it's contained I currently expect that to be pre-expanded.</p>



<a name="202031603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202031603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202031603">(Jun 25 2020 at 22:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet/near/202022708">said</a>:</p>
<blockquote>
<p>You can't have a #fragment when pointing to a value set?</p>
</blockquote>
<p>It is just a more complicated thing at that point.  You have <a href="https://example.com/SomeResource/123#fragment">https://example.com/SomeResource/123#fragment</a> where "fragment" is now an ID of a ValueSet that is contained inside the SomeResource instance.  So, instead of appending /$expand in the URL in that case, you would need to fetch  <a href="https://example.com/SomeResource/123">https://example.com/SomeResource/123</a>, and look inside .contained for ValueSet "fragment", which <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> says we should expect to be already expanded.</p>



<a name="202031788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202031788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202031788">(Jun 25 2020 at 22:09)</a>:</h4>
<p>I don't handle the url#fragment format. I thought you meant a contained reference. If that was in my renderer, I'd just append $expand, which is likely wrong.</p>



<a name="202032446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202032446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202032446">(Jun 25 2020 at 22:17)</a>:</h4>
<p>Appending /$expand assumes that the answerValueSet URL is pointing to a server that not only can return the ValueSet, but can handle the /$expand operation.  (Reasonable; I just think this should be make explicit in the answerValueSet field documentation.)  The general page on canonical reference is helpful, but I think there needs to be something more specific on how to apply that when trying to get a ValueSet expansion for a Questionnaire.</p>



<a name="202032561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202032561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202032561">(Jun 25 2020 at 22:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - can you reference contained ids with a canonical URL with a fragment identifier?  It may be possible with Reference, but I'm not sure it's allowed with canonicals...</p>



<a name="202033078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202033078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202033078">(Jun 25 2020 at 22:24)</a>:</h4>
<p>I don't know that we've discussed it?</p>



<a name="202033092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202033092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202033092">(Jun 25 2020 at 22:25)</a>:</h4>
<p>From <a href="https://www.hl7.org/fhir/datatypes.html#canonical">https://www.hl7.org/fhir/datatypes.html#canonical</a>:  "Like other URIs, elements of type canonical may also have #fragment references"</p>



<a name="202033278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202033278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202033278">(Jun 25 2020 at 22:27)</a>:</h4>
<p>Ok, that's super clear :)</p>



<a name="202033324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202033324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202033324">(Jun 25 2020 at 22:27)</a>:</h4>
<p>I expect we havent talked about the effect on operations, or explicitly expansions though.</p>



<a name="202033650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202033650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202033650">(Jun 25 2020 at 22:30)</a>:</h4>
<p>Do we need to add anything explicit into the SDC spec around this?</p>



<a name="202033821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202033821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202033821">(Jun 25 2020 at 22:33)</a>:</h4>
<p>I think we should.</p>



<a name="202034153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202034153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202034153">(Jun 25 2020 at 22:37)</a>:</h4>
<p>The process for obtaining the answers from answerValueSet as I understand it is:<br>
1) if the answerValueSet URI is like "#fragment", look for the ValueSet inside the Questionnaire's .contained, and assume it is expanded.<br>
2) if the URI is like http://something#fragment, remove #fragment.<br>
     a) If a FHIR server is available, query that for <a href="http://something">http://something</a>;  Otherwise try to use the URI as a URL to get that resource <br>
     b) Obtain the ValueSet (assumed expanded) from the resource's .contained<br>
3) If the URI is like <a href="http://something">http://something</a>,  If there is a "preferredTerminologyServer" set, query that for expansion of the answerValueSet URI; otherwise if there is a FHIR server available, try there; otherwise append /$expand and try to use the resulting string as a URL to get the expansion.</p>
<p>I have not thought about to how handle versions in the URI.</p>
<p>Another good part to document  for answerValueSet would be to how get the expected size.</p>



<a name="202034622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202034622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202034622">(Jun 25 2020 at 22:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> Change request? :)</p>



<a name="202036210"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202036210" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202036210">(Jun 25 2020 at 23:08)</a>:</h4>
<p>Sure.</p>



<a name="202036294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202036294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202036294">(Jun 25 2020 at 23:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> interested in your thoughts on this too.</p>



<a name="202036362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202036362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202036362">(Jun 25 2020 at 23:09)</a>:</h4>
<p>As a separate request we need to consider those chained questions where and answer in one changes the results of another questions valueset. We spoke about it, and I've forgotten what we considered to experiment with.</p>



<a name="202036418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202036418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202036418">(Jun 25 2020 at 23:10)</a>:</h4>
<p>I think that terminology handling will be a heading in the guide somewhere...</p>



<a name="202037699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202037699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202037699">(Jun 25 2020 at 23:31)</a>:</h4>
<p>So my take would be slightly different I think.</p>
<ol>
<li>Is about resolving a relative URI/L, so first do that and hopefully then you have a local copy of an actual ValueSet.</li>
<li>You have an absolute URI, so that's good.<br>
Now, you either have an actual ValueSet or an Identifier for a ValueSet.  In the former case, POST it to <code>[base]/ValueSet/$expand</code>. In the latter case, do a GET on <code>[base]/ValueSet/$expand?url=[URI]</code>.<br>
This assumes you have a remote (<code>[base]</code>) terminology server or a local capability, in which case these calls would be just routed internally.</li>
</ol>
<p>Technically you're only meant to use a pre-expanded ValueSet if the expansion parameters match.  Also, if your ValueSet expansion is large, then you're going to want a search-style UI rather than check box / pick list and that means you'll want to be calling <code>$expand</code> with the <code>filter</code> parameter.</p>



<a name="202037982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202037982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202037982">(Jun 25 2020 at 23:35)</a>:</h4>
<p>I don't think you should be treating the URI as a URL and resolving it directly.  It _might_ work, but relying on that is not a good idea.</p>



<a name="202038585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202038585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202038585">(Jun 25 2020 at 23:45)</a>:</h4>
<p>That's my irritation with canonicals, as they can be either.</p>



<a name="202039176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202039176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202039176">(Jun 25 2020 at 23:56)</a>:</h4>
<p>Thanks Michael, I guess that is a second alternative for the contained valueset resource, if it is expanded then you can use it directly with radios/checkboxes or a combo, if it isn't you need to post to get it to resolve.<br>
That's correct <span class="user-mention" data-user-id="191343">@Michael Lawley</span> ?</p>



<a name="202039338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202039338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202039338">(Jun 25 2020 at 23:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191343">Michael Lawley</span> <a href="#narrow/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet/near/202037982">said</a>:</p>
<blockquote>
<p>I don't think you should be treating the URI as a URL and resolving it directly.  It _might_ work, but relying on that is not a good idea.</p>
</blockquote>
<p>The current <a href="https://www.hl7.org/fhir/references.html#canonical">guidance</a> for canonicals says we should do this as a fallback.   "Systems resolving references to canonical URLs SHOULD first try to resolve the reference using the canonical reference (e.g. search on a known registry of terminology, conformance, or knowledge resources as appropriate), and then fall back to direct resolution using the URL as a literal reference if a local version of the canonical resource cannot be found."</p>



<a name="202050396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202050396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202050396">(Jun 26 2020 at 03:56)</a>:</h4>
<p>Personally, I think that's a bad idea.  We don't do it on principle because a malicious canonical might be used to probe local resources.  eg file:///etc/passwd or <a href="http://localhost/">http://localhost/</a>..., <a href="https://intranet.acme.com/">https://intranet.acme.com/</a>... because the resolution is happening server-side, inside the firewall</p>



<a name="202061856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202061856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202061856">(Jun 26 2020 at 08:00)</a>:</h4>
<p>That is great feedback Michael, and we should explicitly include that in the notes.<br>
I may even reconsider my default implementation.</p>



<a name="202084856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202084856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202084856">(Jun 26 2020 at 12:48)</a>:</h4>
<p>In my case resolution (for answerValueSet) happens client-side, in the user's browser.  In the case of answerValueSet, where we are appending "/$expand", and expecting a ValueSet, I guess the security concern is limited to hitting some internal FHIR server (normally inaccessible) and loading a ValueSet from there into the Questionnaire.  A maliciously crafted Questionnaire might then be able to send that data somewhere else using some of the other SDC extensions, without the user even submitting the form.  I think maliciously crafted Questionnaires are already a potential problem, though.  The app needs to be able trust the source of the Questionnaire.</p>



<a name="202161441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202161441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202161441">(Jun 27 2020 at 01:43)</a>:</h4>
<p>In that case, similar security problems exist; a malicious Questionnaire could probe the user's systems either behind their home firewall/NAT router or behind their corporate firewall. Exfiltrating that data would require some scripting ability on behalf of the form runner - is this the "other SDC extensions" part?</p>



<a name="202161823"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202161823" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202161823">(Jun 27 2020 at 01:53)</a>:</h4>
<p>I don't really understand the threat.  When you resolve the canonical, the target has to be a FHIR resource.  If it's not, the system's not going to be able to parse it and expose it as a value set (or whatever it is you're referencing).  The best you could do is probe whether a file exists by looking at whether you get a "not found" or "bad content" error - but you couldn't actually get the content</p>



<a name="202163551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202163551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202163551">(Jun 27 2020 at 02:36)</a>:</h4>
<blockquote>
<p>the system's not going to be able to parse it</p>
</blockquote>
<p>this depends entirely on "the system", eg the form renderer.  It may be that the renderer is very permissive in what it accepts, or it may be that it exposes the retrieved resource or fragments of it in an error dialog.<br>
The exact risk depends on whether the fetch is happening server-side (so a hacker can use canonicals to probe behind the server's firewall, depending on how it manages and reports failures), or client-side (but this likely depends on the ability to inject active content into the questionnaire).</p>



<a name="202303765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202303765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202303765">(Jun 29 2020 at 12:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet/near/202161823">said</a>:</p>
<blockquote>
<p>I don't really understand the threat.  When you resolve the canonical, the target has to be a FHIR resource. </p>
</blockquote>
<p>Suppose the user's browser has access to an non-public FHIR server with private information, and an attacker knows this.  If the attacker can get the user to load a Questionnaire containing canonicals pointing to that non-public server, the data could be loaded into the form and then sent to to the attacker.</p>



<a name="202312158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202312158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202312158">(Jun 29 2020 at 13:57)</a>:</h4>
<p>Only if the data was in the form of a ValueSet...</p>



<a name="202312167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202312167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202312167">(Jun 29 2020 at 13:57)</a>:</h4>
<p>Only if the data was in the form of a ValueSet...</p>



<a name="202314641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/202314641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#202314641">(Jun 29 2020 at 14:14)</a>:</h4>
<p>In this case, yes, the canonical we are talking about is for answerValueSet, and so the expected data must be a ValueSet.  It does seem less likely that sensitive data would be in a ValueSet.  Perhaps there are other uses of canonical where resolving the URL directly might be more risky.  There is a similar issue with x-fhir-query Expressions, which can be a <a href="https://build.fhir.org/ig/HL7/sdc/expressions.html#x-fhir-query-enhancements">full URL</a>,  and can pull back any sort of resource.  I am not saying we shouldn't, but there are potential problems depending on the use case.</p>



<a name="223958419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/223958419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#223958419">(Jan 25 2021 at 20:54)</a>:</h4>
<p>I hope this is the right stream/topic:</p>



<a name="223958510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/223958510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#223958510">(Jan 25 2021 at 20:55)</a>:</h4>
<p>for the generation of a questionnaire form from a questionnaire resource, is there already a way to expand the answerValueSet at the time of IG publication?</p>



<a name="223958672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/223958672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#223958672">(Jan 25 2021 at 20:56)</a>:</h4>
<p>I think the only way to do that now is either to use $expand somewhere (after sushi? in sushi?) or to do it manually and use answerOption</p>



<a name="223985698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/223985698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#223985698">(Jan 26 2021 at 01:08)</a>:</h4>
<p>It sounds like you want to do that automatically as part  of the IG publication process (with which I am not familiar).  Why not just run $expand once, and include it in your Questionnaire as a contained ValueSet?  Then answerValueSet can point to the contained copy (if that is acceptable).</p>



<a name="223997237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/223997237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#223997237">(Jan 26 2021 at 04:50)</a>:</h4>
<p>Are you asking for expansion of contained value sets as part of the publication process?</p>



<a name="224008399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224008399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224008399">(Jan 26 2021 at 08:24)</a>:</h4>
<p>not only contained</p>



<a name="224008503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224008503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224008503">(Jan 26 2021 at 08:25)</a>:</h4>
<p>I'm asking if the VS in a questionnaire are being / can be expanded in a way it can be used by a form generation tool</p>



<a name="224008695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224008695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224008695">(Jan 26 2021 at 08:27)</a>:</h4>
<p>the expansion code is there, so I wonder if it's a good idea to preserve the expanded valueset for tooling.</p>



<a name="224048953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224048953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224048953">(Jan 26 2021 at 14:48)</a>:</h4>
<p>The publisher can and does expand value sets when rendering.  Whether it should store the expansion in the published value set is a question we can ask.  Keep in mind that the expansion at the time of publishing isn't necessarily what the expansion would be at the time the Questionnaire is used.</p>



<a name="224069171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224069171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224069171">(Jan 26 2021 at 16:59)</a>:</h4>
<p>The expansion is only rendered, not preserved as a resource. We have several options - one of them would be to generate a Questionnaire that contains the expanded valueSets (for tooling that would be great, not sure if it is overall a sensible idea)</p>



<a name="224076346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224076346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224076346">(Jan 26 2021 at 17:48)</a>:</h4>
<p>My point is - why preserve the expansion if it it might change?</p>



<a name="224079187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224079187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224079187">(Jan 26 2021 at 18:07)</a>:</h4>
<p>weak reason: tooling convenience.<br>
Stronger reason: because it might change. You may want to produce the valusets as they are at a given time and package that in a single zip.</p>



<a name="224079808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224079808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224079808">(Jan 26 2021 at 18:11)</a>:</h4>
<p>If it's "you might want to", then it should be a configuration option - perhaps on a per value set basis.</p>



<a name="224082012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224082012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224082012">(Jan 26 2021 at 18:28)</a>:</h4>
<p>yes, I was thinking it should not be default for every VS. Perhaps an extension on the VS that triggers that expansion?</p>



<a name="224085885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224085885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224085885">(Jan 26 2021 at 18:56)</a>:</h4>
<p>Submit a change request</p>



<a name="224097699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224097699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224097699">(Jan 26 2021 at 20:25)</a>:</h4>
<p>change request to SDC or to FHIR spec? <br>
If FHIR spec, a standard extension to VS?</p>



<a name="224100628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224100628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224100628">(Jan 26 2021 at 20:48)</a>:</h4>
<p>IG publisher, I think</p>



<a name="224100670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224100670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224100670">(Jan 26 2021 at 20:48)</a>:</h4>
<p>Would be relevant for value sets used in a variety of circumstances</p>



<a name="224103161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103161">(Jan 26 2021 at 21:06)</a>:</h4>
<p>standard extension expandWhenPublishing, coded.</p>



<a name="224103421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103421">(Jan 26 2021 at 21:08)</a>:</h4>
<p>codes = none | contained |  resource</p>
<ul>
<li>none is default, do not expand</li>
<li>contained creates the expanded valueset as a contained resource</li>
<li>resource creates the expanded valueset as an autonomous resource</li>
</ul>



<a name="224103428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103428">(Jan 26 2021 at 21:08)</a>:</h4>
<p>ok?</p>



<a name="224103488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103488">(Jan 26 2021 at 21:09)</a>:</h4>
<p>Don't understand why it's not a boolean.  The value sets might be contained or stand-alone.  The expansion will live inside the value set, wherever it is.</p>



<a name="224103508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103508">(Jan 26 2021 at 21:09)</a>:</h4>
<p>replacing the valueset?</p>



<a name="224103546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103546">(Jan 26 2021 at 21:09)</a>:</h4>
<p>you'd have something in input and something different in output?</p>



<a name="224103621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103621">(Jan 26 2021 at 21:10)</a>:</h4>
<p>could be - because we are actually telling the system to expand, so I guess that is ok.</p>



<a name="224103763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103763">(Jan 26 2021 at 21:11)</a>:</h4>
<p>boolean was my first choice, I just thought that it would be better to allow expansion AND preserving the input as it is. Which sounds a bit silly... if the editor asks this to be expanded, then it gets expanded.</p>



<a name="224103792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103792">(Jan 26 2021 at 21:12)</a>:</h4>
<p>You'd have an input with just compose and an output with compose + expansion</p>



<a name="224103850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103850">(Jan 26 2021 at 21:12)</a>:</h4>
<p>the only downside is that the published output should not be used as input in another IG...</p>



<a name="224103865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103865">(Jan 26 2021 at 21:12)</a>:</h4>
<p>Why?</p>



<a name="224103895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103895">(Jan 26 2021 at 21:13)</a>:</h4>
<p>If there was already an expansion and the extension was present, the expansion would get replaced</p>



<a name="224103896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103896">(Jan 26 2021 at 21:13)</a>:</h4>
<p>what woudl the publisher do? override the expansion ?</p>



<a name="224103928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224103928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224103928">(Jan 26 2021 at 21:13)</a>:</h4>
<p>ok. I just want to see that all corners are covered.</p>



<a name="224104267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224104267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224104267">(Jan 26 2021 at 21:14)</a>:</h4>
<p>ok, boolean and a warning in the extension definition that setting <em>expandWhenPublishing</em> to true WILL replace the existing expansion.</p>



<a name="224104604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224104604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224104604">(Jan 26 2021 at 21:15)</a>:</h4>
<p>I think that makes sense</p>



<a name="224104707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224104707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224104707">(Jan 26 2021 at 21:16)</a>:</h4>
<p>is <em>expandWhenPublishing</em>  a reasonable name?</p>



<a name="224106123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224106123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224106123">(Jan 26 2021 at 21:27)</a>:</h4>
<p>Works for me.</p>



<a name="224108194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224108194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224108194">(Jan 26 2021 at 21:43)</a>:</h4>
<p><a href="https://github.com/HL7/fhir-ig-publisher/issues/225">https://github.com/HL7/fhir-ig-publisher/issues/225</a></p>



<a name="224108296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224108296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224108296">(Jan 26 2021 at 21:44)</a>:</h4>
<p>Jira for standard extension as well?</p>



<a name="224109721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/224109721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#224109721">(Jan 26 2021 at 21:56)</a>:</h4>
<p>No need</p>



<a name="231311607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/231311607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#231311607">(Mar 22 2021 at 13:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> <span class="user-mention" data-user-id="340886">@Joe Amlung</span> <span class="user-mention" data-user-id="193544">@Jonathan Payne</span></p>



<a name="231574028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/231574028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#231574028">(Mar 24 2021 at 02:35)</a>:</h4>
<p>We've been working on a profile of Library called a "manifest" that would allow you to define expansion parameters for a set of related artifacts that all shared value set dependencies. That way you can say "I want this set of value sets expanded with these parameters and versions", and that statement can itself be a resource. We've developed it in the context of quality measures (and based on the notion of an expansion profile that the VSAC currently supports for this purpose), but the idea is generally applicable: <a href="http://build.fhir.org/ig/HL7/cqf-measures/measure-terminology-service.html">http://build.fhir.org/ig/HL7/cqf-measures/measure-terminology-service.html</a></p>



<a name="231574050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Direct%20resolution%20of%20answerValueSet/near/231574050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Direct.20resolution.20of.20answerValueSet.html#231574050">(Mar 24 2021 at 02:35)</a>:</h4>
<p>In particular, the $expand override and the $package operation.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
