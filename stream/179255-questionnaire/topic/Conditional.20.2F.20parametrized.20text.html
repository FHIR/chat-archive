---
layout: page
title: "FHIR Chat  · Conditional / parametrized text · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html">Conditional / parametrized text</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="253006057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/253006057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#253006057">(Sep 12 2021 at 19:16)</a>:</h4>
<p>Is there a best way to show a text depending on variables, or make it parametrized?<br>
I have a questionnaire that calculates a risk score. Now I want the questionnaire to display at the end:</p>
<ul>
<li>If score  &lt; X, display text " risk is <strong>low</strong>,  probability of <strong>1%</strong> of..."</li>
<li>If X &lt; score &lt; Y, display text "risk is <strong>moderate</strong>, probability of <strong>17%</strong> of..."</li>
<li>If  score &gt; Y, display text "risk is <strong>high</strong>, probability of <strong>25%</strong> of..."</li>
</ul>



<a name="253006097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/253006097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#253006097">(Sep 12 2021 at 19:17)</a>:</h4>
<p>I'm using different enableWhenExpressions to show the text. Is there a more compact way?</p>



<a name="253006295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/253006295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tilo Christ <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#253006295">(Sep 12 2021 at 19:20)</a>:</h4>
<p>I think what you are doing is the "official" way. Danish <a href="http://sundhet.dk">sundhet.dk</a> has defined a local extension  (<a href="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-questionnaire-feedback">http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-questionnaire-feedback</a>), but that doesn't make it much more compact either, I think enableWhenExpression simply didn't exist yet, when they defined it.</p>



<a name="265123130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265123130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265123130">(Dec 16 2021 at 08:15)</a>:</h4>
<p>back to this, I'm not happy with what I have so far:</p>



<a name="265123848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265123848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265123848">(Dec 16 2021 at 08:23)</a>:</h4>
<p>I have a questionnaire for risk score calculation.<br>
Depending on the answers, I will get a score, and an interpretation of that score. e.g. if score = 8, interpretation is "risk of 10-year diabetes is estimated at 1 in 25"</p>



<a name="265136958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265136958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tilo Christ <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265136958">(Dec 16 2021 at 10:39)</a>:</h4>
<p>So where is the unhappiness coming from? Isn't what you got now the thing that you asked for?</p>



<a name="265159019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265159019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265159019">(Dec 16 2021 at 13:58)</a>:</h4>
<p>(sorry, I was distracted).</p>



<a name="265159161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265159161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265159161">(Dec 16 2021 at 13:59)</a>:</h4>
<p>The issue I have is where to put the interpretation. If I have 5 possible interpretations, i have 5 questionnaire items (and I only show one of them)</p>



<a name="265159462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265159462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265159462">(Dec 16 2021 at 14:01)</a>:</h4>
<p>In terms of mapping, I have 5 items to map to 1, but I don't know which of these items. I cannot concatenate as I wanted, and I do not want to reproduce the calculation logic in the extraction...</p>



<a name="265246117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265246117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265246117">(Dec 17 2021 at 02:16)</a>:</h4>
<p>Here's an example of that type of scoring...<br>
<a href="https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/abbey-pain-scale/_history/5?_format=html">https://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/abbey-pain-scale/_history/5?_format=html</a></p>



<a name="265246148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265246148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265246148">(Dec 17 2021 at 02:17)</a>:</h4>
<p>First 5 radios get scores based on ordinal and then another field with the rating based on that score.<br>
Works with our renderer, must try it with the lhc forms.</p>



<a name="265446276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265446276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265446276">(Dec 18 2021 at 22:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> does this contain a single answer item where the text depends on the calculated score?</p>



<a name="265446463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265446463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265446463">(Dec 18 2021 at 22:10)</a>:</h4>
<p>If you mean you wanted to display a different text label (display item) you could have each of the options in there and enable them to display the appropriate one based on the score answer.</p>



<a name="265498341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265498341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265498341">(Dec 19 2021 at 20:25)</a>:</h4>
<p>Right, that is what I have but that is what I am not what I'm happy with</p>



<a name="265498345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265498345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265498345">(Dec 19 2021 at 20:25)</a>:</h4>
<p>(if I understand what you mean)</p>



<a name="265498358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265498358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265498358">(Dec 19 2021 at 20:25)</a>:</h4>
<p>oh wait, perhaps you mean having a rather long fhirpath expression that contains the different text values?</p>



<a name="265498512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265498512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265498512">(Dec 19 2021 at 20:29)</a>:</h4>
<p>if I have different questions each with one possible text and then do the enableWhen, it gets messy:<br>
<a href="/user_uploads/10155/syikUwmOfHL9Btxu502cWvEL/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/syikUwmOfHL9Btxu502cWvEL/image.png" title="image.png"><img src="/user_uploads/10155/syikUwmOfHL9Btxu502cWvEL/image.png"></a></div>



<a name="265498581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265498581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265498581">(Dec 19 2021 at 20:30)</a>:</h4>
<p>(i cannot do concatenate because all of the questions will have text. And to select only the right one, I'd have to replicate the logic in my mapping, while the logic is already in the questionnaire)</p>



<a name="265498761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265498761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265498761">(Dec 19 2021 at 20:35)</a>:</h4>
<p>I'm lost.<br>
If you only want 1 value for the interpretation, just have the 1 read only choice question, with the expression to process the score into the interpretation result, and that feeds nicely into your observation.</p>



<a name="265498820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265498820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265498820">(Dec 19 2021 at 20:36)</a>:</h4>
<p>(that's precisely what my example abbey pain scale score does)</p>



<a name="265499443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265499443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265499443">(Dec 19 2021 at 20:51)</a>:</h4>
<p>at this moment I have 5 items with enablewhen, each for a given range of the score. From what I'm reading, that's not what you are saying, right?</p>



<a name="265499568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265499568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265499568">(Dec 19 2021 at 20:54)</a>:</h4>
<p>Yup. Just 1 coded interpretation, and that's even more relevant given your diagram going to one obs as the interpretation field.</p>



<a name="265504237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265504237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265504237">(Dec 19 2021 at 22:39)</a>:</h4>
<p>But then the interpretation has to have all those <code>if</code>s, right? 'if score &lt; X, "this is one text" else if score &lt; y, "this is another risk"...'</p>



<a name="265504243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265504243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265504243">(Dec 19 2021 at 22:39)</a>:</h4>
<p>(if so, I'll figure out the syntax later)</p>



<a name="265510786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265510786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265510786">(Dec 20 2021 at 00:59)</a>:</h4>
<p>Syntax is in my example.</p>



<a name="265510795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265510795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265510795">(Dec 20 2021 at 00:59)</a>:</h4>
<p>Amn since you want it coded in the observation anyway.</p>



<a name="265557493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265557493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265557493">(Dec 20 2021 at 12:44)</a>:</h4>
<p>i don't see it. I see syntax for calculating the score as a string...<br>
what I need is an item that has the text - not "the pain is 5" nor "the pain is excruciating/mild/...", but <br>
"the pain is not bearable and the patient has to be on meds" vs "the patient does not need any further medication"</p>



<a name="265557533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265557533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265557533">(Dec 20 2021 at 12:44)</a>:</h4>
<p>I _could_ make a valueset for that...</p>



<a name="265576353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265576353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265576353">(Dec 20 2021 at 15:19)</a>:</h4>
<p>You can use expressions to set the text of the item or the answers, so presumably that should cover your use-case?</p>



<a name="265620322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265620322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265620322">(Dec 20 2021 at 22:00)</a>:</h4>
<p>I do think should be stored as an answer in the QR if you're planning to copy into observation.<br>
And if you just want the string, use a text item, and output the entire description rather than code.</p>



<a name="265654166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265654166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265654166">(Dec 21 2021 at 07:10)</a>:</h4>
<p>Right. The struggle is: How do I define the possible text values <em>outside</em> of the FHIRpath expression, and in the FHIRpath expression I would just use them?<br>
In other words, how can I avoid having a FHIRpath expression that contains things like iif((result&lt;X,"the pain is not bearable and the patient has to be on meds",iif(result&lt;Y,"the patient does not need any further medication"...)</p>



<a name="265682944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265682944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265682944">(Dec 21 2021 at 13:08)</a>:</h4>
<p>You could put the descriptions into variables...</p>



<a name="265683105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265683105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265683105">(Dec 21 2021 at 13:10)</a>:</h4>
<p>Possible places; variable, coded options, inline in the fhirpath expression. Or other display labels (though that doesn't help extraction - it's not in the saved data)</p>



<a name="265691049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265691049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265691049">(Dec 21 2021 at 14:32)</a>:</h4>
<p>If it's outside the FHIRPath expression, where do you want it to be?</p>



<a name="265704882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265704882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tilo Christ <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265704882">(Dec 21 2021 at 16:27)</a>:</h4>
<p>Would it maybe be an option to place them into display items and then use something along the lines of <code>%questionnaire.item.where(linkId='pain-level-1').text</code> to access their text description?</p>



<a name="265723660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265723660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Winters <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265723660">(Dec 21 2021 at 19:14)</a>:</h4>
<blockquote>
<p>Right. The struggle is: How do I define the possible text values outside of the FHIRpath expression, and in the FHIRpath expression I would just use them?<br>
In other words, how can I avoid having a FHIRpath expression that contains things like iif((result&lt;X,"the pain is not bearable and the patient has to be on meds",iif(result&lt;Y,"the patient does not need any further medication"...)</p>
</blockquote>
<p>Could also define this in a CQL library.</p>



<a name="265853533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265853533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265853533">(Dec 22 2021 at 21:13)</a>:</h4>
<p>The one I feel more comfortable with is a valueset. I think this means:</p>
<ol>
<li>Right after calculating the score, get a code (1-3 = "low", 4-5="med"...)</li>
<li>Use FHIRPath to get the display for that code ("low" : "the pain is low and the patient just needs to get some distraction"</li>
</ol>



<a name="265853538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265853538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265853538">(Dec 22 2021 at 21:13)</a>:</h4>
<p>How would I do this?</p>



<a name="265853625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265853625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265853625">(Dec 22 2021 at 21:14)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> your code is about populating the answer with the expression. Can I use FHIRPath to get the display for a code?</p>



<a name="265862896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265862896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265862896">(Dec 22 2021 at 22:44)</a>:</h4>
<p>at which point? During the extraction into the obs?<br>
just use the answer.coding.display</p>



<a name="265862958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/265862958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#265862958">(Dec 22 2021 at 22:45)</a>:</h4>
<p>For the answer that is the calculated risk choice field, just select the appropriate code (as in my demo above)</p>



<a name="268094769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/268094769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#268094769">(Jan 15 2022 at 01:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> I was struggling a bit with this as well but it was for a MeasureReport. As in the example I mentioned during the Hackathon (<a href="https://mayjuun.com/fhirfli/7-sdc-workflow-example/">https://mayjuun.com/fhirfli/7-sdc-workflow-example/</a>), I have multiple Questionnaires and I use a single Measure -&gt; MeasureReport to calculate all of the scores/subscores. This is at least partly because some of the scores involve questions from multiple questionnaires. Currently I'm representing the scores calculations as shown above, each with 3 pieces of information generated from the expression, a score, a code of low/medium/high (to represent risk), and then an annotation. For instance, I may have something like this unrealistic example:</p>
<div class="codehilite"><pre><span></span><code>0-5;low;No follow-up necessary
6-10;medium;Schedule a doctor appointment
11-15;high;Call 911 right now
</code></pre></div>
<p>Currently I have this built into the expression</p>
<div class="codehilite"><pre><span></span><code>.iif($this &gt; 10, $this.toString() + &#39;;high;Call 911 right now&#39;, iif($this &lt; 6, $this.toString() + &#39;;low;No follow-up necessary&#39;, $this.toString() + &#39;;medium;Schedule a doctor appointment&#39;)
// Or maybe using .select as recommended to Tilo by Bryn
.select(iif($this &gt; 10, $this.toString() + &#39;;high;Call 911 right now&#39;, iif($this &lt; 6, $this.toString() + &#39;;low;No follow-up necessary&#39;, $this.toString() + &#39;;medium;Schedule a doctor appointment&#39;))
</code></pre></div>
<p>But then I have to use some idiosyncratic code to tell it how to parse out the result of the expression, and I'd like to be able to define the entire thing within FHIR. Any suggestions for this? (I'm also happy to clarify if my explanation wasn't clear).</p>



<a name="268096827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Conditional%20/%20parametrized%20text/near/268096827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Conditional.20.2F.20parametrized.20text.html#268096827">(Jan 15 2022 at 01:46)</a>:</h4>
<p>Got the current definitions on a server somewhere I can look at?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
