---
layout: page
title: "FHIR Chat  · candidateExpression  extension and choiceColumn extension wi · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/candidateExpression.20.20extension.20and.20choiceColumn.20extension.20wi.html">candidateExpression  extension and choiceColumn extension wi</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="258746793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/candidateExpression%20%20extension%20and%20choiceColumn%20extension%20wi/near/258746793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/candidateExpression.20.20extension.20and.20choiceColumn.20extension.20wi.html#258746793">(Oct 22 2021 at 17:43)</a>:</h4>
<p>I am trying to adapt the example at  <a href="https://build.fhir.org/ig/HL7/sdc/examples.html#using-candidateexpression">https://build.fhir.org/ig/HL7/sdc/examples.html#using-candidateexpression</a>    to my questionnaire.</p>
<p>My data will be in repeating groups.</p>
<p>Link ID   5 Parent for the repeating group<br>
Link ID   5.1  Last Name     Smith <br>
Link ID   5.2  First Name    John<br>
Link ID   5.3  Clinic Name   City Hospital<br>
Link ID   5.4  Clinic City   Tampa<br>
Link ID   5.5  Clinic State  FL</p>
<p>Link ID   5   Parent for the repeating group<br>
Link ID   5.1  Last Name     Moseley<br>
Link ID   5.2  First Name    Henry<br>
Link ID   5.3  Clinic Name   City Hospital<br>
Link ID   5.4  Clinic City   Miami<br>
Link ID   5.5  Clinic State  FL</p>
<p>etc.</p>
<p>I will use fhirpath to put the entire set of repeating groups into a variable called sites</p>
<p>"extension": [<br>
            {        <br>
              "url": "<a href="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-candidateExpression">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-candidateExpression</a>",<br>
              "valueExpression": {<br>
                "description": "sites for the user to select from",<br>
                "language": "text/fhirpath",<br>
        "name": "sites",<br>
                "expression": "%QuestionnaireResponse.descendants().where(linkId = '5')"<br>
              }<br>
            },</p>
<p>I understand that I need one extension per column. So, my extension for the first column is:</p>
<div class="codehilite"><pre><span></span><code>   &quot;extension&quot;: [
            {
              &quot;url&quot;: &quot;path&quot;,
              &quot;valueString&quot;: &quot;%sites.where(linkId = &#39;5.1&#39;)&quot;
            },
            {
              &quot;url&quot;: &quot;label&quot;,
              &quot;valueString&quot;: &quot;LAST NAME&quot;
            },
            {
              &quot;url&quot;: &quot;width&quot;,
              &quot;valueQuantity&quot;: {
                &quot;value&quot;: 20,
                &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,
                &quot;code&quot;: &quot;%&quot;
              }
            },
            {
              &quot;url&quot;: &quot;forDisplay&quot;,
              &quot;valueBoolean&quot;: true
            }
          ],
          &quot;url&quot;: &quot;http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-choiceColumn&quot;
        },
</code></pre></div>

<ol>
<li>Am I supposed to put something different in the "url" element?   Or are "path", "forDisplay" and "label" the correct list of values?</li>
</ol>
<p>When I look at the definitions in the spec <a href="https://hl7.org/fhir/uv/sdc/2019may/extension-sdc-questionnaire-choiceColumn-definitions.html#Extension.extension:path">https://hl7.org/fhir/uv/sdc/2019may/extension-sdc-questionnaire-choiceColumn-definitions.html#Extension.extension:path</a>   for the choiceColumn extension,  under "url", I am not seeing options for values such as "path", "forDisplay" and "label".    </p>
<ol start="2">
<li>
<p>Do I also need a "path" element to show "The element to display within the column"   per the spec at <a href="https://hl7.org/fhir/uv/sdc/2019may/extension-sdc-questionnaire-choiceColumn-definitions.html#Extension.extension:path">https://hl7.org/fhir/uv/sdc/2019may/extension-sdc-questionnaire-choiceColumn-definitions.html#Extension.extension:path</a>?</p>
</li>
<li>
<p>For LHC Forms, what url do I use for the  candidateExpression  extension?   The example uses  "url": "<a href="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-candidateExpression">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-candidateExpression</a>"    but that leads to a broken link.   Is there a new URL that LHC Forms uses?</p>
</li>
<li>
<p>For LHC Forms, what url do I use for the choiceColumns extension?  The example uses   "url": "<a href="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-choiceColumn">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-choiceColumn</a>"   but that also leads to a broken link.  Is there a new URL that LHC Forms uses?</p>
</li>
<li>
<p>When the user selects a row, "what" do I get back in LHC Forms as the answer?  Will it be some sort of object like ["Smith", "John", "City Hospital", "Tampa", "FL"]   that I could access with a syntax like   ...answer.value[0]   for the last name?</p>
</li>
</ol>



<a name="258747747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/candidateExpression%20%20extension%20and%20choiceColumn%20extension%20wi/near/258747747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/candidateExpression.20.20extension.20and.20choiceColumn.20extension.20wi.html#258747747">(Oct 22 2021 at 17:50)</a>:</h4>
<p>LHC-Forms does not yet support either choiceColumn or candidateExpression.  choiceColumn is something important to us and would likely be something we would implement early next year, time permitting, but candidateExpression was pretty far down the list.   Recently I added some documentation for which parts of R4 and SDC have support in LHC-Forms.  See <a href="https://github.com/lhncbc/lforms/blob/master/r4-support.md">https://github.com/lhncbc/lforms/blob/master/r4-support.md</a> and <a href="https://github.com/lhncbc/lforms/blob/master/sdc-support.md">https://github.com/lhncbc/lforms/blob/master/sdc-support.md</a>.</p>



<a name="258754167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/candidateExpression%20%20extension%20and%20choiceColumn%20extension%20wi/near/258754167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diane <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/candidateExpression.20.20extension.20and.20choiceColumn.20extension.20wi.html#258754167">(Oct 22 2021 at 18:36)</a>:</h4>
<p>Thank you for the reply.   The documentation about what parts of R4 and SDC have support in LHC-Forms is really helpful.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
