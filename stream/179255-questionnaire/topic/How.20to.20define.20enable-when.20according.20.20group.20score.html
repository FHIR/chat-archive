---
layout: page
title: "FHIR Chat  · How to define enable-when according  group score · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html">How to define enable-when according  group score</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="254646608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/How%20to%20define%20enable-when%20according%20%20group%20score/near/254646608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> SAM TSAI <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html#254646608">(Sep 24 2021 at 03:54)</a>:</h4>
<p>How to define an enable-when for a group according another group's score  ?</p>
<p>For example, Group 1 and Group 2. </p>
<p>Group 2 only show when the score of Group 1 is more than 10.</p>



<a name="254713093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/How%20to%20define%20enable-when%20according%20%20group%20score/near/254713093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tilo Christ <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html#254713093">(Sep 24 2021 at 14:28)</a>:</h4>
<p>I think that might be a combination of calculatedExpression to score the groups, and enableWhenExpression to evaluate the score and show/hide  group 2 accordingly. If you don't care about the score for group 1 as an individual field/variable then you could potentially also bake the scoring into the enableWhenExpression.</p>



<a name="254714704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/How%20to%20define%20enable-when%20according%20%20group%20score/near/254714704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html#254714704">(Sep 24 2021 at 14:38)</a>:</h4>
<p>Typically if you have a score for group 1, you'll have a read-only (or maybe hidden) question that has the score as an answer.  However, you could just calculate it in a variable if you wished.  If it's a question, you can access it the same way you access any question answer.  If it's a variable, the variable needs to be defined on a common ancestor of group 1 and group 2 so that it's available in the context that group 2's enableWhen is evaluated in</p>



<a name="255127576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/How%20to%20define%20enable-when%20according%20%20group%20score/near/255127576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> SAM TSAI <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html#255127576">(Sep 27 2021 at 22:03)</a>:</h4>
<p><span class="user-mention" data-user-id="192169">@Tilo Christ</span> <br>
 Do you define a calculatedExpression under a group by adding "modifierExtension" with sdc-questionnaire-calculatedExpression ?<br>
Like this:<br>
{<br>
  "code": [<br>
    {<br>
      "code": "DemoGroup081721",<br>
      "display": "DemoGroup"<br>
    }<br>
  ],<br>
  "item": [<br>
    {<br>
      "key": 0,<br>
      "code": [<br>
        {<br>
          "code": "714DemoYesNo",<br>
          "display": "Are you taking prescription medications?"<br>
        }<br>
      ],<br>
      "text": "Are you taking prescription medications?",<br>
      "type": "boolean",<br>
      "linkId": "714DemoYesNo",<br>
      "required": false,<br>
      "extension": [<br>
        {<br>
          "url": "<a href="http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl">http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl</a>",<br>
          "valueCodeableConcept": {<br>
            "coding": [<br>
              {<br>
                "code": "radio-button",<br>
                "system": "<a href="http://hl7.org/fhir/questionnaire-item-control">http://hl7.org/fhir/questionnaire-item-control</a>",<br>
                "display": "Radio Button"<br>
              }<br>
            ]<br>
          }<br>
        }<br>
      ],<br>
      "answerOption": [<br>
        {<br>
          "extension": [<br>
            {<br>
              "url": "<a href="http://hl7.org/fhir/StructureDefinition/ordinalValue">http://hl7.org/fhir/StructureDefinition/ordinalValue</a>",<br>
              "valueDecimal": "1"<br>
            }<br>
          ],<br>
          "valueCoding": {<br>
            "code": "false",<br>
            "display": "No"<br>
          }<br>
        },<br>
        {<br>
          "extension": [<br>
            {<br>
              "url": "<a href="http://hl7.org/fhir/StructureDefinition/ordinalValue">http://hl7.org/fhir/StructureDefinition/ordinalValue</a>",<br>
              "valueDecimal": "2"<br>
            }<br>
          ],<br>
          "valueCoding": {<br>
            "code": "true",<br>
            "display": "Yes"<br>
          }<br>
        }<br>
      ],<br>
      "groupDisplay": true<br>
    }<br>
  ],<br>
  "text": "DemoGroup",<br>
  "type": "group",<br>
  "linkId": "DemoGroup081721",<br>
  "required": false,<br>
  "groupDisplay": true,<br>
  "modifierExtension": {<br>
    "url": "<a href="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression</a>",<br>
    "value": "??"<br>
  }<br>
}</p>



<a name="255128590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/How%20to%20define%20enable-when%20according%20%20group%20score/near/255128590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html#255128590">(Sep 27 2021 at 22:12)</a>:</h4>
<p>calculatedExpression is not a modifier extension.  It doesn't change the meaning of other elements</p>



<a name="255148855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/How%20to%20define%20enable-when%20according%20%20group%20score/near/255148855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> SAM TSAI <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html#255148855">(Sep 28 2021 at 01:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <br>
Is this correct ?</p>
<p>"text": "DemoGroup",<br>
  "type": "group",<br>
  "linkId": "DemoGroup081721",<br>
  "required": false,<br>
  "groupDisplay": true,<br>
  "extension": [<br>
    {<br>
      "url": "<a href="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression</a>",<br>
      "valueExpression": {<br>
        "language": "text/fhirpath",<br>
        "expression": "%resource.repeat(item).where(linkId='4.3.b').item.answer.oridinalValue().aggregate($this +$total,0)",<br>
        "description": "Total score"<br>
      }<br>
    }<br>
  ]</p>



<a name="255149850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/How%20to%20define%20enable-when%20according%20%20group%20score/near/255149850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html#255149850">(Sep 28 2021 at 02:03)</a>:</h4>
<p>What is 'groupDisplay'?  And you can't put a calculatedExpression on a 'group' item - it has to be a question item that can actually hold the value as an answer.</p>



<a name="255150606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/How%20to%20define%20enable-when%20according%20%20group%20score/near/255150606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> SAM TSAI <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html#255150606">(Sep 28 2021 at 02:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <br>
ok. got it. Thanks a lot!</p>



<a name="255150675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/How%20to%20define%20enable-when%20according%20%20group%20score/near/255150675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> SAM TSAI <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html#255150675">(Sep 28 2021 at 02:15)</a>:</h4>
<p><span class="user-mention" data-user-id="192169">@Tilo Christ</span> <br>
"If you don't care about the score for group 1 as an individual field/variable then you could potentially also bake the scoring into the enableWhenExpression." </p>
<p>Do you mean I can just reply on enableWhenExpression defined in group 2 to complete this whole functionality? <br>
Like this: </p>
<p>{<br>
  "code": [<br>
    {<br>
      "code": "G2",<br>
      "display": "Multiple Levels Branching Sample"<br>
    }<br>
  ],<br>
  "text": "Prescription drugs - ENABLE WHEN -New",<br>
  "type": "group",<br>
  "linkId": "G2",<br>
  "required": false,<br>
  "extension": [<br>
    {<br>
      "url": "<a href="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression</a>",<br>
      "valueExpression": {<br>
        "language": "text/fhirpath",<br>
        "expression": "%resource.repeat(item).where(linkId='G1').item.answer.oridinalValue().aggregate($this +$total,0) &gt; 10"<br>
      }<br>
    }<br>
  ]<br>
}</p>



<a name="255150818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/How%20to%20define%20enable-when%20according%20%20group%20score/near/255150818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html#255150818">(Sep 28 2021 at 02:17)</a>:</h4>
<p>Yup, that should work if you have no need to actually capture the score in the QuestionnaireResponse.</p>



<a name="255150946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/How%20to%20define%20enable-when%20according%20%20group%20score/near/255150946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> SAM TSAI <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/How.20to.20define.20enable-when.20according.20.20group.20score.html#255150946">(Sep 28 2021 at 02:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <br>
Thanks a lot!<br>
This is super helpful!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
