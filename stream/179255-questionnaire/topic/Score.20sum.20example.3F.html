---
layout: page
title: "FHIR Chat  · Score sum example? · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Score.20sum.20example.3F.html">Score sum example?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="166218497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Score%20sum%20example%3F/near/166218497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Score.20sum.20example.3F.html#166218497">(May 21 2019 at 22:20)</a>:</h4>
<p>Does anyone have an example of using FHIRPath to sum the scores (ordinalValue) for the answers of a QuestionnaireResponse?  I can write FHIRPath that finds individual scores and explicitly add each one, but I am having trouble coming up with an expression that would work with FHIRPath's aggregate function without making simplifying assumptions.</p>



<a name="166314294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Score%20sum%20example%3F/near/166314294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Score.20sum.20example.3F.html#166314294">(May 22 2019 at 22:11)</a>:</h4>
<p>Here is the FHIRPath I wrote to retrieve the score associated with just one of answers in a PHQ-9 form:</p>
<div class="codehilite"><pre><span></span>%questionnaire.item.where(linkId = &#39;/44260-8&#39;).answerOption.where(valueCoding.code=%resource.item.where(linkId = &#39;/44260-8&#39;).answer.valueCoding.code).extension.where(url=%scoreExt).valueDecimal
</pre></div>


<p>I had to write nine of those, and ended up putting them in variables, because sometimes the value was empty, and so I needed to wrap each value inside "iif" before adding them together.<br>
Is there a simpler approach?</p>



<a name="166318662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Score%20sum%20example%3F/near/166318662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Score.20sum.20example.3F.html#166318662">(May 22 2019 at 23:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="166410488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Score%20sum%20example%3F/near/166410488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Score.20sum.20example.3F.html#166410488">(May 23 2019 at 23:44)</a>:</h4>
<p>Got a reference to that whole form <span class="user-mention" data-user-id="195344">@Paul Lynch</span>?</p>



<a name="166418080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Score%20sum%20example%3F/near/166418080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Score.20sum.20example.3F.html#166418080">(May 24 2019 at 02:37)</a>:</h4>
<p><a href="https://raw.githubusercontent.com/lhncbc/lforms-fhir-app/observation-extract/e2e-tests/data/R4/phq9.json" target="_blank" title="https://raw.githubusercontent.com/lhncbc/lforms-fhir-app/observation-extract/e2e-tests/data/R4/phq9.json">https://raw.githubusercontent.com/lhncbc/lforms-fhir-app/observation-extract/e2e-tests/data/R4/phq9.json</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
