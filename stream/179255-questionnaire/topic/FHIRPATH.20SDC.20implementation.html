---
layout: page
title: "FHIR Chat  · FHIRPATH SDC implementation · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html">FHIRPATH SDC implementation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="257816428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/257816428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tilo Christ <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#257816428">(Oct 16 2021 at 09:10)</a>:</h4>
<p>Is there a FHIRPath implementation which has a known good reference-quality implementation of the SDC add-ons - <code>answers()</code> in particular? I am trying to see whether I am interpreting the specification correctly, but the fhirpath.js implementation doesn't have <code>answers()</code> implemented and also fails on the equivalent from the spec <code>descendants().where($this is QuestionnaireResponse.item.answer.value)</code>.</p>



<a name="257841222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/257841222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#257841222">(Oct 16 2021 at 15:55)</a>:</h4>
<p>Those functions were only exposed in the CI-build about a month ago, so quite possibly not.  <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="257855463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/257855463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#257855463">(Oct 16 2021 at 19:36)</a>:</h4>
<p>I haven't done it</p>



<a name="257862587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/257862587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#257862587">(Oct 16 2021 at 21:25)</a>:</h4>
<p>I don't remember the answers() function, but can take a look at it.<br>
What context are you running that expression?<br>
I've found the fhirpathjs one to be quite good.<br>
And the dotnet one is also very good (I'm using both of them, and have extended the dotnet one recently too)</p>



<a name="257865517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/257865517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tilo Christ <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#257865517">(Oct 16 2021 at 22:11)</a>:</h4>
<p>I am trying to get the PHQ9 scoring example to work: <a href="https://github.com/HL7/sdc/blob/master/input/examples/questionnaire-sdc-profile-example-PHQ9.json">https://github.com/HL7/sdc/blob/master/input/examples/questionnaire-sdc-profile-example-PHQ9.json</a> - the expression <code>%resource.answers().value.ordinal().sum()</code>. I'm trying to implement the answers() function in terms of the descendants() function which again is short-hand for repeat(children()). I'm seeing wildly different results for the same expressions in different FHIRPath implementations (repeat(children()) on the same QuestionnaireResponse resource returning 58, 75, and 78 items on three different implementations). Hence my hope for a reference implementation that I can reliably compare against.</p>



<a name="257873654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/257873654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#257873654">(Oct 17 2021 at 00:31)</a>:</h4>
<p>.sum()?</p>



<a name="257873669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/257873669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#257873669">(Oct 17 2021 at 00:31)</a>:</h4>
<p>I'm actually working in this specific implementation right now too.</p>



<a name="257873824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/257873824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#257873824">(Oct 17 2021 at 00:34)</a>:</h4>
<p>That query you're looking at I'd be more likely to do something like this<br>
<code>%resource.item.where(linkId='groupofqs').item.answer.value.aggregate($this+$total,0)</code></p>



<a name="257873887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/257873887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#257873887">(Oct 17 2021 at 00:35)</a>:</h4>
<p>At the moment my implementation will be specifying the link ids explicitly that it will be summing so that the change detection can be marked.</p>



<a name="257873975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/257873975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#257873975">(Oct 17 2021 at 00:37)</a>:</h4>
<p>Also, there isn't a great ordinal() implementation too, so instead I'm summing the extension in the coded answer.<br>
<code>answer.value.extension('...ordinal').value.aggregate</code></p>



<a name="257873991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/257873991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#257873991">(Oct 17 2021 at 00:37)</a>:</h4>
<p>(and put the full extension name in there)</p>



<a name="275235932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/275235932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raazia Tariq <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#275235932">(Mar 14 2022 at 13:35)</a>:</h4>
<p>I am trying to evaluate this expression  "patient.name.where(use='official').family()" using FhirPathEngine and I am getting the following error,<br>
 org.hl7.fhir.r4.utils.FHIRLexer$FHIRLexerException: Error in ?? at 1, 1: The name family is not a valid function name<br>
        at org.hl7.fhir.r4.utils.FHIRLexer.error(FHIRLexer.java:145)<br>
        at org.hl7.fhir.r4.utils.FHIRLexer.error(FHIRLexer.java:141)<br>
        at org.hl7.fhir.r4.utils.FHIRPathEngine.parseExpression(FHIRPathEngine.java:873)<br>
        at org.hl7.fhir.r4.utils.FHIRPathEngine.parseExpression(FHIRPathEngine.java:907)<br>
        at org.hl7.fhir.r4.utils.FHIRPathEngine.parseExpression(FHIRPathEngine.java:907)<br>
        at org.hl7.fhir.r4.utils.FHIRPathEngine.parseExpression(FHIRPathEngine.java:907)<br>
        at org.hl7.fhir.r4.utils.FHIRPathEngine.parse(FHIRPathEngine.java:338)<br>
        at org.hl7.fhir.r4.utils.FHIRPathEngine.parse(FHIRPathEngine.java:331)<br>
        at org.hl7.fhir.r4.utils.FHIRPathEngine.evaluate(FHIRPathEngine.java:520)<br>
It seems like FHIRLexer does not support 'where' and functions call.  Am I doing something wrong here or there's a missing support of mentioned operations.</p>



<a name="275236000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/275236000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#275236000">(Mar 14 2022 at 13:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="471025">Raazia Tariq</span> has marked this topic as resolved.</p>



<a name="275236007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/275236007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#275236007">(Mar 14 2022 at 13:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="471025">Raazia Tariq</span> has marked this topic as unresolved.</p>



<a name="275241514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/275241514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#275241514">(Mar 14 2022 at 14:16)</a>:</h4>
<p>I think it's complaining that family() is not a function.  Try removing the ().  Also, if the context you are running the expression against is a Patient resource, then "Patient" should be capitalized in the expression.</p>



<a name="275248248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/275248248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raazia Tariq <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#275248248">(Mar 14 2022 at 15:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="195344">Paul Lynch</span> <a href="#narrow/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation/near/275241514">said</a>:</p>
<blockquote>
<p>I think it's complaining that family() is not a function.  Try removing the ().  Also, if the context you are running the expression against is a Patient resource, then "Patient" should be capitalized in the expression.</p>
</blockquote>
<p>Thanks Paul, I did your suggested changes and it works fine now.</p>



<a name="276058530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276058530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shoaib Mushtaq <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276058530">(Mar 21 2022 at 14:30)</a>:</h4>
<p>I want to know about that either FHIRPath supports variables to evaluate an expression or not?</p>
<p>For example, we have a weight variable with the expression given below</p>
<div class="codehilite"><pre><span></span><code>{
      &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/variable&quot;,
      &quot;valueExpression&quot;: {
        &quot;name&quot;: &quot;weight&quot;,
        &quot;language&quot;: &quot;text/fhirpath&quot;,
        &quot;expression&quot;: &quot;%resource.repeat(item).where(linkId=&#39;3.3.1&#39;).item.answer.valueDecimal&quot;
      }
}
</code></pre></div>
<p>And first, we evaluate the value of this expression using the FHIRPath evaluate method, and then we want to use this variable value in the calculation of BMI given below,<br>
You can see that %weight is used as a variable, so do we have any such capability in FHIRPath to pass these variables(weight and height here) as input to evaluate this given expression <code>(%weight/(%height.power(2))).round(1)</code>?</p>
<div class="codehilite"><pre><span></span><code>{
              &quot;url&quot;: &quot;http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression&quot;,
              &quot;valueExpression&quot;: {
                &quot;description&quot;: &quot;BMI Calculation&quot;,
                &quot;language&quot;: &quot;text/fhirpath&quot;,
                &quot;expression&quot;: &quot;(%weight/(%height.power(2))).round(1)&quot;
              }
 }
</code></pre></div>



<a name="276069745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276069745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276069745">(Mar 21 2022 at 15:37)</a>:</h4>
<p>So long as the variables are declared on the root of the Questionnaire or on an item that's an ancestor of the item that uses the calculatedExpression, yes that should work.</p>



<a name="276098076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276098076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276098076">(Mar 21 2022 at 18:52)</a>:</h4>
<p>And several implementations support it, including the lhc forms</p>



<a name="276148456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276148456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shoaib Mushtaq <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276148456">(Mar 22 2022 at 06:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191367">Brian Postlethwaite</span> <a href="#narrow/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation/near/276098076">said</a>:</p>
<blockquote>
<p>And several implementations support it, including the lhc forms</p>
</blockquote>
<p>Thanks <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> for it. <br>
Can you please mention some other implementations as well that support this other than LHC forms? Thanks</p>



<a name="276148537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276148537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276148537">(Mar 22 2022 at 06:39)</a>:</h4>
<p>The 2 others I k ow of aren't open source at this stage.<br>
And there are a few out of Europe too, however not sure if they do expression.</p>



<a name="276519735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276519735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raazia Tariq <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276519735">(Mar 24 2022 at 18:21)</a>:</h4>
<p>public boolean evaluateToBoolean(Resource focusResource, Resource rootResource, Base base, String path) throws FHIRException {<br>
    return convertToBoolean(evaluate(null, focusResource, rootResource, base, path));<br>
  } <br>
Does anyone know what focusResource and rootResource are in this method? It is a FhirPathEngine method.<br>
Actually I want to use this method to evaluate enableWhenExpression (<a href="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression</a>).</p>



<a name="276527049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276527049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276527049">(Mar 24 2022 at 19:18)</a>:</h4>
<p>focusResource is the resource you're dealing with and rootResource is typically the same, though if you're dealing with stuff in Bundles or Parameters or other resources that can contain other resources, it'll be the outermost resource for the instance.  See here: <a href="https://hl7.org/fhir/fhirpath.html#variables">https://hl7.org/fhir/fhirpath.html#variables</a></p>



<a name="276538645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276538645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raazia Tariq <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276538645">(Mar 24 2022 at 20:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation/near/276527049">said</a>:</p>
<blockquote>
<p>focusResource is the resource you're dealing with and rootResource is typically the same, though if you're dealing with stuff in Bundles or Parameters or other resources that can contain other resources, it'll be the outermost resource for the instance.  See here: <a href="https://hl7.org/fhir/fhirpath.html#variables">https://hl7.org/fhir/fhirpath.html#variables</a></p>
</blockquote>
<p>Currently, I could have multiple resources or a single resource, so If I have a single resource I'll pass the same resource to all of the parameters. and if I have multiple resources I first need determine the context of each resource in the expression. Is this statement correct?</p>



<a name="276564417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276564417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276564417">(Mar 25 2022 at 02:21)</a>:</h4>
<p>Pretty much.  %rootResource isn't so much about "multiple resources" as specifically about resources that nest within other resources.</p>



<a name="276612072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276612072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Winters <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276612072">(Mar 25 2022 at 12:36)</a>:</h4>
<p><span class="user-mention" data-user-id="398650">@Shoaib Mushtaq</span> I have a library that can handle expressions written in CQL, which is similar to FHIRPath.</p>



<a name="276612365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276612365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Winters <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276612365">(Mar 25 2022 at 12:39)</a>:</h4>
<p>I don't think it would be too hard to add support for FHIRPath.</p>



<a name="276657318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/276657318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tilo Christ <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#276657318">(Mar 25 2022 at 18:00)</a>:</h4>
<p>My European implementation supports it. Although it has a Japanese name and a FHIRPath of American ancestry. <br>
<a href="https://legentix.com/faidashu/#/">https://legentix.com/faidashu/#/</a><br>
<a href="https://github.com/tiloc/faiadashu">https://github.com/tiloc/faiadashu</a></p>
<p><span class="user-mention silent" data-user-id="191367">Brian Postlethwaite</span> <a href="#narrow/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation/near/276148537">said</a>:</p>
<blockquote>
<p>The 2 others I k ow of aren't open source at this stage.<br>
And there are a few out of Europe too, however not sure if they do expression.</p>
</blockquote>



<a name="278052513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/278052513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shoaib Mushtaq <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#278052513">(Apr 06 2022 at 16:45)</a>:</h4>
<p>Is there a way to pass <a href="http://build.fhir.org/ig/HL7/sdc/expressions.html#variable">variable/list of variables</a> with its/their values to fhirPath evaluate method with the expression having variables in it?</p>
<p>For example, the expression is <code>"expression": "%X + 2",</code> in this <a href="https://github.com/lhncbc/lforms/blob/bec2dac9f5a930c546bf5050efe33aff1c35c4b2/src/test-data/e2e/R4/variable-scope-test.json">questionnaire</a>. So can we pass the value of %X variable as parameter to evaluate method? is it supported or any other way to cater it?<br>
P.S, I am using fhirPathEngine on Android to evaluate these expressions in the questionnaires.<br>
Thanks<br>
<span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>   cc: <span class="user-mention" data-user-id="366686">@Jing Tang</span></p>



<a name="278056842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/278056842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#278056842">(Apr 06 2022 at 17:17)</a>:</h4>
<p>Within a Questionnaire, there are several extensions that allow defining variables, including 'variable' and 'launchParameter'.  All the expression names that are 'in context' of another expression are available for reference.  Take a look at this page in SDC: <a href="http://build.fhir.org/ig/HL7/sdc/expressions.html">http://build.fhir.org/ig/HL7/sdc/expressions.html</a></p>



<a name="278078481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/278078481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#278078481">(Apr 06 2022 at 20:03)</a>:</h4>
<p>"in context" means the variable is on the item or a parent of the item that contains the expression referring to it.</p>



<a name="278082729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/278082729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#278082729">(Apr 06 2022 at 20:37)</a>:</h4>
<p>Technically 'ancestor' rather than 'parent'.  And if it's on the item, it needs to be earlier in the list than the extension doing the reference.</p>



<a name="278083253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/FHIRPATH%20SDC%20implementation/near/278083253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/FHIRPATH.20SDC.20implementation.html#278083253">(Apr 06 2022 at 20:42)</a>:</h4>
<p>This is an example of a BMI form that has some variables in it.<br>
<a href="http://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/55418-8-x/_history/13?_format=html">http://sqlonfhir-r4.azurewebsites.net/fhir/Questionnaire/55418-8-x/_history/13?_format=html</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
