---
layout: page
title: "FHIR Chat  · itemControl gtable · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html">itemControl gtable</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="185809992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185809992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185809992">(Jan 16 2020 at 12:28)</a>:</h4>
<p>Trying to reproduce this example using itemControl='gtable':<br>
<a href="/user_uploads/10155/5WOk1CyxJQQAUyCBchmYM_03/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/5WOk1CyxJQQAUyCBchmYM_03/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/5WOk1CyxJQQAUyCBchmYM_03/pasted_image.png"></a></div><hr>
<ul>
<li>Should each row (group) be marked with itemControl='gtable'? (see example 1)</li>
<li>Or should I create a top level group and mark that with itemControl='gtable' and add additional rows (groups) under the top level group? (see example 2)</li>
</ul>
<p>Example 1.</p>
<div class="codehilite"><pre><span></span>item.type=&#39;group&#39; text=&#39;Synsstyrke&#39;
    item.type=&#39;group&#39; itemControl=&#39;gtable&#39; text=&#39;Uten korreksjon&#39;
        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;
        item.type=&#39;string&#39; text=&#39;Venstre øye&#39;
        item.type=&#39;string&#39; text=&#39;Begge øyne&#39;
    item.type=&#39;group&#39; itemControl=&#39;gtable&#39; text=&#39;Med korreksjon&#39;
        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;
        item.type=&#39;string&#39; text=&#39;Venstre øye&#39;
        item.type=&#39;string&#39; text=&#39;Begge øyne&#39;
    item.type=&#39;group&#39; itemControl=&#39;gtable&#39; text=&#39;Korreksjonens styrke&#39;
        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;
        item.type=&#39;string&#39; text=&#39;Venstre øye
</pre></div>


<p>Example 2.</p>
<div class="codehilite"><pre><span></span>item.type=&#39;group&#39; text=&#39;Synsstyrke&#39; itemControl=&#39;gtable&#39;
    item.type=&#39;group&#39; text=&#39;Uten korreksjon&#39;
        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;
        item.type=&#39;string&#39; text=&#39;Venstre øye&#39;
        item.type=&#39;string&#39; text=&#39;Begge øyne&#39;
    item.type=&#39;group&#39; text=&#39;Med korreksjon&#39;
        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;
        item.type=&#39;string&#39; text=&#39;Venstre øye&#39;
        item.type=&#39;string&#39; text=&#39;Begge øyne&#39;
    item.type=&#39;group&#39; text=&#39;Korreksjonens styrke&#39;
        item.type=&#39;string&#39; text=&#39;Høyre øye&#39;
        item.type=&#39;string&#39; text=&#39;Venstre øye&#39;
</pre></div>



<a name="185822559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185822559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185822559">(Jan 16 2020 at 15:06)</a>:</h4>
<p>With help from Google translate, here is that table in English:<br>
<a href="/user_uploads/10155/cYctCH8yC0bmvtIBE1RiIHQd/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/cYctCH8yC0bmvtIBE1RiIHQd/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/cYctCH8yC0bmvtIBE1RiIHQd/pasted_image.png"></a></div>



<a name="185822566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185822566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185822566">(Jan 16 2020 at 15:06)</a>:</h4>
<p>That's something we absolutely need to clarify in the spec.  Could you submit a change request <span class="user-mention" data-user-id="192710">@Kenneth Myhra</span>?  If so, mention it here and we'll try to discuss it on our conference call tonight.</p>



<a name="185822817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185822817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185822817">(Jan 16 2020 at 15:08)</a>:</h4>
<p>Each cell in the table is actually a separate question.  I don't think the spec handles this case.</p>



<a name="185824314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185824314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185824314">(Jan 16 2020 at 15:24)</a>:</h4>
<p>You might be able to represent table as a gtable if the left column labels were inserted as prepopulated values (into a read-only field).  That seems messier than it should be, though.</p>



<a name="185826881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185826881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185826881">(Jan 16 2020 at 15:47)</a>:</h4>
<p><a href="https://jira.hl7.org/browse/FHIR-25478" target="_blank" title="https://jira.hl7.org/browse/FHIR-25478">FHIR-25478</a></p>



<a name="185829072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185829072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185829072">(Jan 16 2020 at 16:06)</a>:</h4>
<p>Paul, do you have a visual example of a gtable use case?</p>
<p>Btw I would have joined the conference call, but it's bit late up here in Scandinavia at that point</p>



<a name="185829751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185829751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185829751">(Jan 16 2020 at 16:12)</a>:</h4>
<p>We get dial-ins from the Netherlands :)  (The uncomfortable time is because we also get dial-ins from Australia.)</p>



<a name="185830359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185830359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185830359">(Jan 16 2020 at 16:17)</a>:</h4>
<p>For a visual example (not based on FHIR, but I think representative of the use case) see <a href="https://rxterms.nlm.nih.gov/" target="_blank" title="https://rxterms.nlm.nih.gov/">https://rxterms.nlm.nih.gov/</a>.  Our FHIR representation of that form uses gtable, and I would put that up, but it has a couple of issues (use of a custom extension for the drug name lookup, and the strength lists don't show up for some reason).</p>



<a name="185833647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185833647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185833647">(Jan 16 2020 at 16:46)</a>:</h4>
<p>Might be that my example needs to be restructured into something like this</p>
<p><a href="/user_uploads/10155/LsWKcX4uRCKeGjxwHfuiRXK5/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/LsWKcX4uRCKeGjxwHfuiRXK5/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/LsWKcX4uRCKeGjxwHfuiRXK5/pasted_image.png"></a></div>



<a name="185834205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185834205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185834205">(Jan 16 2020 at 16:51)</a>:</h4>
<p>You could still use groups (item.type="group") for things like "corrected", "not corrected", etc., so you would not have to repeat the strings, and so that the questions (left eye, right eye, both) would be visually grouped under each header.  That much should be supported by most FHIR Questionnaire clients today (I would guess).</p>
<p>I think your table is a good case though, and probably should be in the spec somewhere, so I am glad you filed the issue.</p>



<a name="185916270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185916270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185916270">(Jan 17 2020 at 13:40)</a>:</h4>
<p>Saw the resolution on the Jira case, thanks btw for resolving it so quickly!</p>
<p>Still a bit unsure how I would go about defining this in the questionnaire see the two examples below:</p>
<p>Example 1, using itemCode='grid' as an indicator for when a new row starts:</p>
<div class="codehilite"><pre><span></span>item.type=&#39;group&#39; itemCode=&#39;grid&#39;
    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Høyre øye&#39;
    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Venstre øye&#39;
    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Begge øyne&#39;
item.type=&#39;group&#39; itemCode=&#39;grid&#39;
    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Høyre øye&#39;
    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Venstre øye&#39;
    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Begge øyne&#39;
item.type=&#39;group&#39; itemCode=&#39;grid&#39;
    item.type=&#39;decimal&#39; text=&#39;Korreksjonens styrke|Høyre øye&#39;
    item.type=&#39;decimal&#39; text=&#39;Korreksjonens styrke|Venstre øye&#39;
</pre></div>


<p>Example 2, using the text on the left side of the vertical bar as a key for each row:</p>
<div class="codehilite"><pre><span></span>item.type=&#39;group&#39; itemCode=&#39;grid&#39;
    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Høyre øye&#39;
    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Venstre øye&#39;
    item.type=&#39;decimal&#39; text=&#39;Uten korreksjon|Begge øyne&#39;
    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Høyre øye&#39;
    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Venstre øye&#39;
    item.type=&#39;decimal&#39; text=&#39;Med korreksjon|Begge øyne&#39;
    item.type=&#39;decimal&#39; text=&#39;Korreksjonens styrke|Høyre øye&#39;
    item.type=&#39;decimal&#39; text=&#39;Korreksjonens styrke|Venstre øye&#39;
</pre></div>



<a name="185928075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/185928075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#185928075">(Jan 17 2020 at 15:55)</a>:</h4>
<p>Example 2.</p>



<a name="186384795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/186384795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#186384795">(Jan 23 2020 at 12:48)</a>:</h4>
<p>We have reviewed this in-house and we have a few comments.</p>
<ul>
<li>The grid construction as it stands does not work well with form fillers that do not support itemControl='grid' because of the vertical bar in the item.text</li>
<li>The previous itemControl codes 'atable', 'gtable' and 'table' works fairly well even if the form filler do not support those item codes</li>
</ul>
<p>So I'm suggesting an amendment which would also be compatible with form fillers that do not support itemCode='grid'.</p>
<p>A group section marked with itemControl='grid' indicates that child items of type='group' within the grid-section are rows, and questions beneath the row-groups are organized as columns in the grid. The grid might be fully populated, but could be sparse.  Questions may support different data types and/or different answer choices.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span>item.type=&#39;group&#39; text=&#39;Visual acuity&#39; itemControl=&#39;grid&#39;
    item.type=&#39;group&#39; text=&#39;Without correction&#39;
        item.type=&#39;decimal&#39; text=&#39;Right eye&#39;
        item.type=&#39;decimal&#39; text=&#39;Left eye&#39;
        item.type=&#39;decimal&#39; text=&#39;Both eyes&#39;
    item.type=&#39;group&#39; text=&#39;With correction&#39;
        item.type=&#39;decimal&#39; text=&#39;Right eye&#39;
        item.type=&#39;decimal&#39; text=&#39;Left eye&#39;
        item.type=&#39;decimal&#39; text=&#39;Both eyes&#39;
    item.type=&#39;group&#39; text=&#39;Strength of correction&#39;
        item.type=&#39;decimal&#39; text=&#39;Right eye&#39;
        item.type=&#39;decimal&#39; text=&#39;Left eye&#39;
</pre></div>



<a name="186408875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/186408875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#186408875">(Jan 23 2020 at 16:50)</a>:</h4>
<p><span class="user-mention" data-user-id="192710">@Kenneth Myhra</span> Can you submit a new change request pointing to the original?</p>



<a name="186418466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/itemControl%20gtable/near/186418466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/itemControl.20gtable.html#186418466">(Jan 23 2020 at 18:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <a href="https://jira.hl7.org/browse/FHIR-25599" target="_blank" title="https://jira.hl7.org/browse/FHIR-25599">J#25599</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
