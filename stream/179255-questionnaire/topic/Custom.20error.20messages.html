---
layout: page
title: "FHIR Chat  · Custom error messages · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html">Custom error messages</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="241384280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/241384280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fred Hersch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#241384280">(Jun 03 2021 at 12:38)</a>:</h4>
<p>When designing a Questionnaire that will be rendered in an app, we want to be able to return custom error messages (e.g. for specific items) in local language. Is there an extension for this? How is this currently handled? Thanks</p>
<p><span class="user-mention" data-user-id="366686">@Jing Tang</span> <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="241386154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/241386154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Winters <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#241386154">(Jun 03 2021 at 12:54)</a>:</h4>
<p>Where would the error message be displayed?  You could use <a href="https://hl7.org/fhir/R4/extension-cqf-calculatedvalue.html">cqf-calculatedValue</a> on the <code>text</code> element of an <code>item</code> in the Questionnaire.</p>



<a name="241392044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/241392044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fred Hersch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#241392044">(Jun 03 2021 at 13:42)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="195840">@David Winters</span> the messages would be displayed on the UI .. in this instance it's an android app so under the field</p>



<a name="241392256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/241392256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fred Hersch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#241392256">(Jun 03 2021 at 13:44)</a>:</h4>
<p>This would still need to map to some content string that could have different language options ...</p>
<p>One solution, would be to have these be specified within the client application itself ... and they can be tailored by the implementer .. not within the Questionnaire itself</p>



<a name="241394951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/241394951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#241394951">(Jun 03 2021 at 14:05)</a>:</h4>
<p>AFAIK, there is no extension for this. I think it's a reasonable ask</p>



<a name="241395002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/241395002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#241395002">(Jun 03 2021 at 14:05)</a>:</h4>
<p>IIRC, we're talking about a message like <code>Incorrect date format. Please use the format yyyy-mm-dd</code>. I think the client might have some generic capabilities, but this could be an interesting extension when the messages are specific for a question.</p>



<a name="241395569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/241395569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fred Hersch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#241395569">(Jun 03 2021 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> Yes, that is correct. Thanks for adding that context :)</p>



<a name="241397742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/241397742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#241397742">(Jun 03 2021 at 14:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="195344">@Paul Lynch</span>, others - is this the first time this request comes up?</p>



<a name="241400464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/241400464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#241400464">(Jun 03 2021 at 14:44)</a>:</h4>
<p>You can have enableWhen (and the enableWhenExpression extension) turned on for 'display' items the same as questions and groups.  And you can have translations for display items the same as you can have for other elements.  That's what you can do within the Questionnaire design itself.  If you're wanting to change the messages spit out by the data entry tool in response to regular rules (e.g. typing characters in a numeric or date field, specifying a non-existent month, going over length limits, etc.), that's a problem for the tool and not something that would show up in the resource.  (It would also be independent of what Questionnaire you were filling out.)</p>



<a name="241477593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/241477593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fred Hersch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#241477593">(Jun 04 2021 at 01:17)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> that makes sense. cc: <span class="user-mention" data-user-id="366686">@Jing Tang</span> <span class="user-mention" data-user-id="356307">@Kunjan Patel</span></p>



<a name="242583429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/242583429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jing Tang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#242583429">(Jun 14 2021 at 11:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> thanks for the reply. I agree that for the most part, the error message for validation is nothing to do with the questionnaire itself. but i think there still are cases where the error message might be more tailored to the clinical setting and therefore should be provided by the questionnaire. i agree that a hidden display field can be used, but it does appear a bit "hacky", and depending on the UI it might not actually make sense (for example, maybe the validation message is part of your text input box to give the user the idea that the message is for the input, rather than the error message appearing as a totally separate item following the question and answer). if we already have the validation extensions, it seems to make sense to have error messages attached.</p>



<a name="242600646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/242600646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#242600646">(Jun 14 2021 at 13:59)</a>:</h4>
<p>When does are reported by the validation engine, they include the location of the question /answer with the error, and that message is usually highlighted beside the field.<br>
When my server validates them, it includes the field text in the message too.</p>



<a name="242600880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/242600880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#242600880">(Jun 14 2021 at 14:01)</a>:</h4>
<p>E.g. Invalid date of birth value entered (17/17/2012)</p>



<a name="242601030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/242601030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#242601030">(Jun 14 2021 at 14:02)</a>:</h4>
<p>Or mandatory date of birth field missing</p>



<a name="242716935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/242716935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jing Tang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#242716935">(Jun 15 2021 at 10:59)</a>:</h4>
<p>yeah that makes perfect sense - but the error message isn't coming from the questionnaire right? i think what Lloyd proposed (using the hidden display item for custom error messages) would not be using the validation engine (or maybe you can have both, a validation engine that returns an validation error, and a custom message also displayed by showing an otherwise hidden field)</p>



<a name="243860826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/243860826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#243860826">(Jun 24 2021 at 23:49)</a>:</h4>
<p>I think those are your two options.  If you want complete control over what the message is, then use a 'display' item (possibly as a child of your Question) that conditionally appears based on rules you specify.  Otherwise, you can just specify the constraints and it'll be up to the rendering tool to decide how that gets displayed.  Good ones will highlight the relevant field(s) and provide user-friendly messages, but you can't necessarily count on consistency.</p>



<a name="243860917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/243860917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#243860917">(Jun 24 2021 at 23:50)</a>:</h4>
<p>Obviously if you're controlling the data entry client, you can control the messaging.  But I don't think we can reasonably try to allow 'standardized' customization of messaging from third-party rendering tools.</p>



<a name="243861255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/243861255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#243861255">(Jun 24 2021 at 23:53)</a>:</h4>
<p>I would fully recommend the fhirpath constraints from SDC if I wanted custom messages created, however incorporating entered data in those isn't described anywhere.</p>



<a name="243861356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/243861356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#243861356">(Jun 24 2021 at 23:54)</a>:</h4>
<p>And showing a display field conditionally as an error message feels very weird, and won't look like other errors handled by the renderer...<br>
Ours has multiple choices depending on host context - all done through information coming out as an OperationOutcome - even when internal in the browser.</p>



<a name="243862038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20error%20messages/near/243862038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20error.20messages.html#243862038">(Jun 25 2021 at 00:04)</a>:</h4>
<p>The item.text can use an extension for CQL to define its content.  We've got a pending approved change request to add that.  That would give you your context-specific message.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
