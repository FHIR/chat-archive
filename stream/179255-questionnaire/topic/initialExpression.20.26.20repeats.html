---
layout: page
title: "FHIR Chat  · initialExpression &amp; repeats · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html">initialExpression &amp; repeats</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="268865317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/268865317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#268865317">(Jan 21 2022 at 16:18)</a>:</h4>
<p>If initialExpression is set on a question with repeats=true, and the user adds a new instance, does it make sense to run the initialExpression on the new instance?  Presumably, that value was already in the first instance.</p>



<a name="268885302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/268885302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#268885302">(Jan 21 2022 at 18:41)</a>:</h4>
<p>I don't think so.</p>



<a name="268885370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/268885370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#268885370">(Jan 21 2022 at 18:41)</a>:</h4>
<p>As you say, if there were multiple values, they should already ha e been included.</p>



<a name="268899892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/268899892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#268899892">(Jan 21 2022 at 20:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191367">Brian Postlethwaite</span> <a href="#narrow/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats/near/268885370">said</a>:</p>
<blockquote>
<p>As you say, if there were multiple values, they should already ha e been included.</p>
</blockquote>
<p>I was actually thinking of a case where a single value was returned, but then the user adds another repetition of the question.</p>



<a name="268915578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/268915578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#268915578">(Jan 21 2022 at 23:06)</a>:</h4>
<p>I would expect the population process to add repetitions for all candidate answers found.   If the user adds another one, that wouldn't invalidate the previous population or create any need to re-run.</p>



<a name="268918863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/268918863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#268918863">(Jan 21 2022 at 23:41)</a>:</h4>
<p>If you had Candidate expressions to select extra content, and picked one of them I would expect it to do initial expressions on that (but nothing else)<br>
I haven't looked into it in any real detail yet.</p>



<a name="278375341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278375341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278375341">(Apr 08 2022 at 23:52)</a>:</h4>
<p>If repeats is false, and initialExpression returns more than one value, is that an error?</p>



<a name="278375900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278375900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278375900">(Apr 09 2022 at 00:01)</a>:</h4>
<p>My implementation(s) just take the first entry. My new one might include an information message, but I don't remember.</p>



<a name="278375979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278375979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278375979">(Apr 09 2022 at 00:02)</a>:</h4>
<p>I think LHC-Forms does that too.</p>



<a name="278378208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278378208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278378208">(Apr 09 2022 at 00:49)</a>:</h4>
<p>I think it should be an error</p>



<a name="278387033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278387033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278387033">(Apr 09 2022 at 04:25)</a>:</h4>
<p>I don't think an error in fill time for an issue from design time there.<br>
Maybe something I'll try a design time validation check.</p>



<a name="278414650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278414650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278414650">(Apr 09 2022 at 15:13)</a>:</h4>
<p>How do you safely choose 1 when there are many?  Yes, it's a design-time issue, but there are other design-time issues that can manifest at runtime.</p>



<a name="278495860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278495860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278495860">(Apr 10 2022 at 23:42)</a>:</h4>
<p>Would it be safer to not pre-fill anything? And make the user key in everything?<br>
The pre-pop routine may not have any ability to interact with the user (such as when done on a server side)<br>
But there could be a warning indicating that this occurred. But then how to return that, include it in the QR as contained?</p>



<a name="278501220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278501220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278501220">(Apr 11 2022 at 01:55)</a>:</h4>
<p>You could treat an initialExpression  that returns too many elements as a candidateExpression.  That might be the most useful thing to do.</p>



<a name="278502367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278502367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278502367">(Apr 11 2022 at 02:20)</a>:</h4>
<p>That would require the renderer to know that the populate failed and to do an in memory conversion.</p>



<a name="278502444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278502444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278502444">(Apr 11 2022 at 02:22)</a>:</h4>
<p>Correct</p>



<a name="278502463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278502463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278502463">(Apr 11 2022 at 02:23)</a>:</h4>
<p>More specifically, to know that the list of candidates for the populate was more than the max for the item</p>



<a name="278503035"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278503035" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278503035">(Apr 11 2022 at 02:36)</a>:</h4>
<p>Maybe we need to define how the populate operation can return warnings.</p>



<a name="278503050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278503050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278503050">(Apr 11 2022 at 02:37)</a>:</h4>
<p>Via a parameters object with both the outcome and result?<br>
Must check if that's what's already documented.</p>



<a name="278504411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278504411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278504411">(Apr 11 2022 at 03:08)</a>:</h4>
<p>Warnings wouldn't be helpful to the end user</p>



<a name="278506807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278506807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278506807">(Apr 11 2022 at 04:07)</a>:</h4>
<p>This one would...?</p>



<a name="278507977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278507977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278507977">(Apr 11 2022 at 04:36)</a>:</h4>
<p>How?  The user just needs to fill out the form.  "There's data, but it's too much, so I did nothing" isn't super useful...</p>



<a name="278509250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278509250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278509250">(Apr 11 2022 at 05:07)</a>:</h4>
<p>The message could be indicate that there were other responses for this question too (maybe even include a toString form of that) so that the user could then go checkout the clinical record to see which was more appropriate (and if the renderer knew what was going on, could convert it to the candidate expression like you suggested)</p>



<a name="278509257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278509257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278509257">(Apr 11 2022 at 05:07)</a>:</h4>
<p>(and the issue would be tagged to the specific question/answer so the context is clear)</p>



<a name="278509295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278509295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278509295">(Apr 11 2022 at 05:08)</a>:</h4>
<p>Not convinced this is the right thing to do here though.</p>



<a name="278510409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278510409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278510409">(Apr 11 2022 at 05:37)</a>:</h4>
<p>toString could be butt ugly, depending on the data type.  My leaning is to just either provide a candidateExpression or indicate that there was an issue with population with the form overall (i.e. there may be data that could have been populated but wasn't due to logic issues with the form) and let the user fill it in normally.</p>



<a name="278512315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278512315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278512315">(Apr 11 2022 at 06:19)</a>:</h4>
<p>A generic message that was just indicating that there were multiple entries for this answer, and it picked the first one would be ok as a minimum I think?<br>
CandidateExpression is a non starter for me as can't feedback that data from the $populate operation, unless we come-up with some way to do that.</p>



<a name="278567335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/initialExpression%20%26%20repeats/near/278567335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/initialExpression.20.26.20repeats.html#278567335">(Apr 11 2022 at 15:05)</a>:</h4>
<p>Knowing it picked the first one isn't great because "first" is random and you don't know if it got the right one or not.  I don't think "pick at random" is ever appropriate for populate.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
