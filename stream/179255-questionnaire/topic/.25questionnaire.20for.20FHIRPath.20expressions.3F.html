---
layout: page
title: "FHIR Chat  · %questionnaire for FHIRPath expressions? · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html">%questionnaire for FHIRPath expressions?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154015992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154015992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154015992">(Nov 06 2018 at 19:59)</a>:</h4>
<p>I was trying to write a questionnaire-initialExpression for an item of type "choice", and realized it would need to return a valueCoding which is defined in the Questionnaire resource and which can't be directly constructed in FHIRPath.  The "resolve" extension to FHIRPath could be used on the Questionnaire reference in the QR, but depending on the implementation (of which I currently have none) "resolve" could be an asynchronous fetch over the network (which I don't think would work well in FHIRPath) or a synchronous blocking call which cause the rendering/updating of the form to halt while the fetch was made.  A third option would be to have resolve() take a shortcut for the case of the Questionnaire reference; perhaps the renderer could have it on hand in cases some FHIRPath asked for it.</p>
<p>A much simpler approach would be to just make the Questionnaire available as an environment variable.  In this case, %questionnaire would refer to the "current" Questionnaire much like %patient can be made (via questionnaire-launchContext) to refer to the current patient.</p>



<a name="154016014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154016014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154016014">(Nov 06 2018 at 21:27)</a>:</h4>
<p>That sounds like one we could define without even relying on the context extension.</p>



<a name="154016022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154016022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154016022">(Nov 06 2018 at 21:51)</a>:</h4>
<p>Is that initial expression the fhirpath extract operation, I thought that was only for the populate operation.</p>



<a name="154016029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154016029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154016029">(Nov 06 2018 at 22:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> For population.</p>



<a name="154016061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154016061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154016061">(Nov 07 2018 at 00:45)</a>:</h4>
<p>What's the example expression?<br>
For things like a Coding, as long as your selector is locating a coding type, all good. But your right that you can't convert a string to a coding, or at least we haven't defined that.</p>



<a name="154016062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154016062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154016062">(Nov 07 2018 at 00:45)</a>:</h4>
<p>I may have implemented that though.</p>



<a name="154016202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154016202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154016202">(Nov 07 2018 at 15:42)</a>:</h4>
<p>Yes, if it returned the right Coding, it would be fine.  But, I am pulling Patient.gender, which uses AdministrativeGender, and I am trying to convert that Coding to a Coding for a different gender list in the questionnaire I'm populating.  There are just three entries, so I was going to just do that conversion in FHIRPath, using a couple of nested iif statements.</p>



<a name="154016472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154016472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154016472">(Nov 07 2018 at 23:13)</a>:</h4>
<p>That code you mean ;)<br>
My implementation does do some type tweaking in the populate code covering some stuff like this.<br>
But your exact example is an interesting one, as the type is a code with a fixed binding, so could be converted into a Coding quite easily.</p>



<a name="154016473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154016473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154016473">(Nov 07 2018 at 23:16)</a>:</h4>
<p>There is also details on terminologies here:<br>
<a href="http://build.fhir.org/fhirpath.html#txapi" target="_blank" title="http://build.fhir.org/fhirpath.html#txapi">http://build.fhir.org/fhirpath.html#txapi</a><br>
specifically <code>%terminologies.translate(conceptMap, code, params) : Parameters</code> that I thought you might use to convert from the patientGender to the system that you're looking for. (rather than an IIf statement)</p>



<a name="154016474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154016474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154016474">(Nov 07 2018 at 23:16)</a>:</h4>
<p>(Not that I've implemented that part - though should be pretty simple, have all the other parts for it)</p>



<a name="154016480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154016480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154016480">(Nov 07 2018 at 23:20)</a>:</h4>
<p>If it were a long list, I suppose I would have to do something like that.  But, the fewer HTTP calls the better.  (And, how would asynchronous calls to a terminology server work if they happened in the middle of a FHIRPath expression?  Do you pause the evaluation and resume when the HTTP call returns?)</p>



<a name="154016981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154016981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154016981">(Nov 09 2018 at 00:25)</a>:</h4>
<p>my FHIRPath implementation has a factory that can construct things like Coding, but we haven't made anything like that standard</p>



<a name="154018237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%25questionnaire%20for%20FHIRPath%20expressions%3F/near/154018237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.25questionnaire.20for.20FHIRPath.20expressions.3F.html#154018237">(Nov 13 2018 at 22:14)</a>:</h4>
<p>For reference, this issue is now <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19629&amp;start=0" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19629&amp;start=0">GF#19629</a>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
