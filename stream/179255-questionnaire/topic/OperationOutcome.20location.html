---
layout: page
title: "FHIR Chat  · OperationOutcome location · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html">OperationOutcome location</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="222258174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222258174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222258174">(Jan 11 2021 at 03:59)</a>:</h4>
<p>When validating a QuestionnaireResponse, what is the location that is to be used in the output?<br>
My engine has been using a location like <code>linkId="Q1"</code> but know this isn't really right, but since haven't been working with others not really an issue, and is quite easy to process, except where the question (or chain) has a repeating section in it.<br>
And now that there are more players, want to get the value of this field correct, so that all can do the same thing, and when their UI is displaying errors from my server, they will be attached to the correct control(s).<br>
Could this be to the answer, the question or the group, or any of these?<br>
<code>QuestionnaireResponse.item[0].item[0].answer[0].value</code>    // a specific value is wrong (e.g. date format etc)<br>
<code>QuestionnaireResponse.item[0].item[0].answer[0]</code>                // don't think this one can happen?<br>
<code>QuestionnaireResponse.item[0].item[0].answer</code>                     // should this be here if there is no answer, or should that be the one below?<br>
<code>QuestionnaireResponse.item[0].item[0]</code>                                     // required field has no answer? (what would happen if the required item wasn't in the response at all?)</p>
<p>e.g. </p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
  &quot;id&quot;: &quot;$validate&quot;,
  &quot;issue&quot;: [
    {
      &quot;severity&quot;: &quot;warning&quot;,
      &quot;code&quot;: &quot;invariant&quot;,
      &quot;details&quot;: {
        &quot;coding&quot;: [
          {
            &quot;code&quot;: &quot;inv3&quot;
          }
        ],
        &quot;text&quot;: &quot;Question 3 must be answered with a3&quot;
      },
      &quot;diagnostics&quot;: &quot;QuestionnaireResponse.item.item.where(linkId=&#39;Q3&#39;).answer.value = &#39;a3&#39;&quot;,
      &quot;location&quot;: [
        &quot;linkId=\&quot;Q3\&quot;&quot;,
        &quot;QuestionnaireResponse.item[0].item[2].answer[0].value&quot;
      ]
    },
    {
      &quot;severity&quot;: &quot;error&quot;,
      &quot;code&quot;: &quot;invariant&quot;,
      &quot;details&quot;: {
        &quot;coding&quot;: [
          {
            &quot;code&quot;: &quot;inv2&quot;
          }
        ],
        &quot;text&quot;: &quot;Question 2 must be answered with a2&quot;
      },
      &quot;diagnostics&quot;: &quot;QuestionnaireResponse.item.item.where(linkId=&#39;Q2&#39;).answer.value = &#39;a2&#39;&quot;,
      &quot;location&quot;: [
        &quot;linkId=\&quot;Q2\&quot;&quot;,
        &quot;QuestionnaireResponse.item[0].item[1].answer[0].value&quot;
      ]
    },
    {
      &quot;severity&quot;: &quot;error&quot;,
      &quot;code&quot;: &quot;invariant&quot;,
      &quot;details&quot;: {
        &quot;coding&quot;: [
          {
            &quot;code&quot;: &quot;inv1&quot;
          }
        ],
        &quot;text&quot;: &quot;Question 1 must be answered with a1&quot;
      },
      &quot;diagnostics&quot;: &quot;QuestionnaireResponse.item.item.where(linkId=&#39;Q1&#39;).answer.value = &#39;a1&#39;&quot;,
      &quot;location&quot;: [
        &quot;linkId=\&quot;Q1\&quot;&quot;,
        &quot;QuestionnaireResponse.item[0].item[0].answer[0].value&quot;
      ]
    }
  ]
}
</code></pre></div>



<a name="222258183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222258183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222258183">(Jan 11 2021 at 03:59)</a>:</h4>
<p><span class="user-mention" data-user-id="195344">@Paul Lynch</span> have you attempted this area at all yet?</p>



<a name="222258372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222258372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222258372">(Jan 11 2021 at 04:03)</a>:</h4>
<p>Also we need to clarify how the location field for <a href="http://hl7.org/fhir/R4/extension-questionnaire-constraint.html">http://hl7.org/fhir/R4/extension-questionnaire-constraint.html</a> is to be used (since I was using the linkID directly, wasn't an issue, but since this needs to be relative to the QR, then it kinda needs to be "re-evaluated" at some stage.</p>



<a name="222336164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222336164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222336164">(Jan 11 2021 at 18:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191367">Brian Postlethwaite</span> <a href="#narrow/stream/179255-questionnaire/topic/OperationOutcome.20location/near/222258183">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="195344">Paul Lynch</span> have you attempted this area at all yet?</p>
</blockquote>
<p>No, I haven't.  I was also having trouble finding documentation for that location field.  There is one example using it on <a href="https://www.hl7.org/fhir/resource-operation-validate.html">https://www.hl7.org/fhir/resource-operation-validate.html</a>, but that is all I could find.</p>



<a name="222411002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222411002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222411002">(Jan 12 2021 at 10:03)</a>:</h4>
<p>While I'm here, I've noticed that my paths there don't have answers at all the levels, should they? I don't recall.<br>
I know they are needed where a group repeats to hold the repitition, but otherwise?<br>
<span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="222460812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222460812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222460812">(Jan 12 2021 at 16:55)</a>:</h4>
<p>Not quite following the question...</p>



<a name="222508193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222508193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222508193">(Jan 12 2021 at 22:58)</a>:</h4>
<p>The relationship between Questionnaire and response and the item/answer pairs. (linkID in brackets to help illustration)<br>
Questionniare.item(G1).item(G1-1).item(Q1)<br>
=&gt; QuestionnaireResponse.item(G1).answer.item(G1-1).answer.item(Q1).answer</p>



<a name="222511073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222511073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222511073">(Jan 12 2021 at 23:29)</a>:</h4>
<p>The likes of this example show that it doesn't need to have the extra answers for all groups.<br>
<a href="http://hl7.org/fhir/questionnaireresponse-example-f201-lifelines.xml.html">http://hl7.org/fhir/questionnaireresponse-example-f201-lifelines.xml.html</a><br>
Should we imply that this is only required where a group is repeating?</p>



<a name="222511153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222511153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222511153">(Jan 12 2021 at 23:30)</a>:</h4>
<p>Or should we just repeat the group item again in the QR. in which case, groups don't have answers.</p>



<a name="222532607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222532607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222532607">(Jan 13 2021 at 04:36)</a>:</h4>
<p>Nested items within a question must appear inside an answer.  Nested items within a group appear inside the group</p>



<a name="222533589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222533589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222533589">(Jan 13 2021 at 04:53)</a>:</h4>
<p>So repeat the group item itself like this then <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> ?</p>
<div class="codehilite"><pre><span></span><code>QuestionnaireResponse
  .item(root)
    .item(G1-1)
      .item(Q1).answer: &#39;Brian&#39;
      .item(Q2).answer: &#39;10&#39;
    .item(G1-1)
      .item(Q1).answer: &#39;Lloyd&#39;
      .item(Q2).answer: &#39;9&#39;
</code></pre></div>
<p>Where the G1-1 group item is repeated for the 2 rows in the table.</p>



<a name="222533696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222533696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222533696">(Jan 13 2021 at 04:55)</a>:</h4>
<p>(If so, then this is what I've been doing, phew)</p>



<a name="222534008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222534008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222534008">(Jan 13 2021 at 05:00)</a>:</h4>
<p>y</p>



<a name="222534860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/OperationOutcome%20location/near/222534860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/OperationOutcome.20location.html#222534860">(Jan 13 2021 at 05:14)</a>:</h4>
<p>Thanks.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
