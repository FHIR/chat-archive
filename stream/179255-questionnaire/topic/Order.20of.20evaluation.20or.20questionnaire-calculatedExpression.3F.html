---
layout: page
title: "FHIR Chat  · Order of evaluation or questionnaire-calculatedExpression? · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Order.20of.20evaluation.20or.20questionnaire-calculatedExpression.3F.html">Order of evaluation or questionnaire-calculatedExpression?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154021901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Order%20of%20evaluation%20or%20questionnaire-calculatedExpression%3F/near/154021901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Order.20of.20evaluation.20or.20questionnaire-calculatedExpression.3F.html#154021901">(Nov 29 2018 at 22:42)</a>:</h4>
<p>Is there documentation somewhere about what order the expressions found in questionnaire-calculatedExpression for different items are to be run?  It is not hard to construct a set of expressions that produce different results depending on which order they are run.  I think I read somewhere that they should be run in order of their appearance on the form, but I can't find that statement on <a href="http://hl7.org/fhir/2018Sep/extension-questionnaire-calculatedexpression.html" target="_blank" title="http://hl7.org/fhir/2018Sep/extension-questionnaire-calculatedexpression.html">http://hl7.org/fhir/2018Sep/extension-questionnaire-calculatedexpression.html</a>.  I think the same concern applies to questionnaire-initialExpression.</p>



<a name="154024248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Order%20of%20evaluation%20or%20questionnaire-calculatedExpression%3F/near/154024248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Order.20of.20evaluation.20or.20questionnaire-calculatedExpression.3F.html#154024248">(Dec 10 2018 at 22:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> the same issue probably shows up in PlanDefinition.  Do you have a practice there?</p>



<a name="154024258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Order%20of%20evaluation%20or%20questionnaire-calculatedExpression%3F/near/154024258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Order.20of.20evaluation.20or.20questionnaire-calculatedExpression.3F.html#154024258">(Dec 10 2018 at 22:32)</a>:</h4>
<p>In realizing an ActivityDefinition, there is explicit reference to the order of evaluation for the "dynamicValue" elements: <a href="http://build.fhir.org/activitydefinition.html" target="_blank" title="http://build.fhir.org/activitydefinition.html">http://build.fhir.org/activitydefinition.html</a></p>



<a name="154024259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Order%20of%20evaluation%20or%20questionnaire-calculatedExpression%3F/near/154024259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Order.20of.20evaluation.20or.20questionnaire-calculatedExpression.3F.html#154024259">(Dec 10 2018 at 22:32)</a>:</h4>
<p>"in the order in which they appear in the ActivityDefinition"</p>



<a name="154024263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Order%20of%20evaluation%20or%20questionnaire-calculatedExpression%3F/near/154024263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Order.20of.20evaluation.20or.20questionnaire-calculatedExpression.3F.html#154024263">(Dec 10 2018 at 22:44)</a>:</h4>
<p>I guess you have the benefit of no user intervention.  In the case of Questionnaire, there isn't a guarantee tha questions will be completed in order.  For form fillers that use an event-based approach to propagating answers, order of appearance in the form is likely to be a pain.  But I'm not sure what else to do.  <span class="user-mention" data-user-id="195344">@Paul Lynch</span> Can you add a tracker for this and we can discuss on a call?  We might need to do some playing at a connectathon before we land how it should best work.</p>



<a name="154024272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Order%20of%20evaluation%20or%20questionnaire-calculatedExpression%3F/near/154024272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Order.20of.20evaluation.20or.20questionnaire-calculatedExpression.3F.html#154024272">(Dec 10 2018 at 22:57)</a>:</h4>
<p>But if every change to the inputs constitutes a recalculation, doesn't order of evaluation not matter? You'd have to track dependencies (and prevent recursion), but wouldn't that address the issue?</p>



<a name="154024273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Order%20of%20evaluation%20or%20questionnaire-calculatedExpression%3F/near/154024273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Order.20of.20evaluation.20or.20questionnaire-calculatedExpression.3F.html#154024273">(Dec 10 2018 at 22:57)</a>:</h4>
<p>I don't think the answer to this depends on the order which the user fills out the form.</p>



<a name="154024274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Order%20of%20evaluation%20or%20questionnaire-calculatedExpression%3F/near/154024274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Order.20of.20evaluation.20or.20questionnaire-calculatedExpression.3F.html#154024274">(Dec 10 2018 at 23:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  How would one track dependencies?  FHIRPath seems very opaque as what the source items are.</p>



<a name="154024277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Order%20of%20evaluation%20or%20questionnaire-calculatedExpression%3F/near/154024277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Order.20of.20evaluation.20or.20questionnaire-calculatedExpression.3F.html#154024277">(Dec 10 2018 at 23:07)</a>:</h4>
<p><a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19747" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19747">GF#19747</a></p>



<a name="154025423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Order%20of%20evaluation%20or%20questionnaire-calculatedExpression%3F/near/154025423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Order.20of.20evaluation.20or.20questionnaire-calculatedExpression.3F.html#154025423">(Dec 13 2018 at 19:53)</a>:</h4>
<p>Note that the presence of group-level variables (which can reference these fields, which can reference the variables) further complicates things.  I'm assuming we'll disallow cycles (in the spec, anyway) but trying to decide what needs to be run next is complicated.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
