---
layout: page
title: "FHIR Chat  · choice, open-choice, and string values? · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html">choice, open-choice, and string values?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="158398284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158398284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158398284">(Feb 12 2019 at 23:38)</a>:</h4>
<p>In the spec, "choice" and "open-choice" are limited to use for answers of type "Coding", but conceptually, they mirror CNE and CWE, which less about data type and more about whether the user is allowed to enter a value that is not on the list.  For reasons I don't quite understand, answerOption is allowed to take other data types other than Coding.  So, suppose one has a question with answerOptions containing valueString, instead.  Is the item.type then set to "string"?  How then does one indicate whether a value can be entered that is not on the list?</p>



<a name="158413644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158413644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158413644">(Feb 13 2019 at 05:13)</a>:</h4>
<p>CNE and CWE are definitely about coded data.  I don't think you can send dates or numbers in either.</p>
<p>AnswerOption was allowed to take other data types because use-cases were presented where, for certain questions, the answer might be a constrained list of times, dates or numbers.   If you'd like to propose we enforce a constraint that the option choices align with the item type, that's probably a good idea.  I don't think anyone's ever presented a use-case to support an "open" choice for anything other than codes.</p>



<a name="158455104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158455104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158455104">(Feb 13 2019 at 16:34)</a>:</h4>
<blockquote>
<p>AnswerOption was allowed to take other data types because use-cases were presented where, for certain questions, the answer might be a constrained list of times, dates or numbers.</p>
</blockquote>
<p>If someone has real-world examples of that that I could see, that would be helpful.  Strings and numbers, at least, could be handled with a Coding, since the codes are optional.</p>
<p>I see Questionnaire is still "Trial-Use".  Rather than having choice and open-choice in item.type, I think it would be better to allow item.type Coding, and then have "choice" and open-choice be set somewhere else.  That way item.type could define the data type, and the specification of whether off-list answers were allowed (whatever the type) would be independent.</p>
<blockquote>
<p>I don't think anyone's ever presented a use-case to support an "open" choice for anything other than codes.</p>
</blockquote>
<p>LHC-Forms defines an optional form header field called "where done" which is basically a free text field but has a list of suggested entries like "Home", "Lab", etc.  It is not a list for which codes are important, and the user can type whatever they want.  As I said above, this could be handled with Coding, but it might be more natural to use item type "string".  (I am not arguing for keeping these other non-Coding types of answerOption, but I am trying to make the point that if we have them, circumstances arise in which open-choice is a reasonable thing to want for those kinds of lists.)</p>



<a name="158455940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158455940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158455940">(Feb 13 2019 at 16:45)</a>:</h4>
<p>Picking a time-slot, Indicating a number of tickets where the number needs to be a number for math purposes but there are fixed quantity choices available.  The need was for the result to be captured in the appropriate data type, but the set of choices available was finite.  Agree it's not a common thing, but the use-cases seemed reasonable when presented and it was going to cause less grief to add them than to try to make it work with extensions.</p>



<a name="158520575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158520575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158520575">(Feb 14 2019 at 11:00)</a>:</h4>
<p>The open choice can have an answer of type string or coding. So it's not a selection of data type.</p>



<a name="158520605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158520605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158520605">(Feb 14 2019 at 11:01)</a>:</h4>
<p>Example: A set of predefined dates available to choose from (generated server side from key moments in an encounter)</p>



<a name="158574536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158574536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158574536">(Feb 14 2019 at 23:19)</a>:</h4>
<blockquote>
<p>The open choice can have an answer of type string or coding. So it's not a selection of data type.</p>
</blockquote>
<p>You are right, but it is not necessary to handle the free text entry as a string (though the spec might currently require that).  It could be stuffed into a Coding, since Coding.code is optional.</p>



<a name="158575977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158575977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158575977">(Feb 14 2019 at 23:42)</a>:</h4>
<p>That would be a misuse of the data type</p>



<a name="158619496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158619496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158619496">(Feb 15 2019 at 14:53)</a>:</h4>
<p>If a code is not requried, how could a Coding without a code be a misuse?</p>



<a name="158623283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158623283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158623283">(Feb 15 2019 at 15:42)</a>:</h4>
<p>Display without a code would be a misuse if it's not a proper display from the code system - it's not for capturing free text.</p>



<a name="158625854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158625854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158625854">(Feb 15 2019 at 16:13)</a>:</h4>
<p>Okay-- after reading <a href="https://www.hl7.org/fhir/datatypes.html#Coding" target="_blank" title="https://www.hl7.org/fhir/datatypes.html#Coding">https://www.hl7.org/fhir/datatypes.html#Coding</a>, I guess that is clear enough.</p>



<a name="158673483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158673483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158673483">(Feb 16 2019 at 03:35)</a>:</h4>
<p>Where just text is used elsewhere is with the CodeableConcept filling only text, and no coded values.</p>



<a name="158675970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158675970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158675970">(Feb 16 2019 at 04:40)</a>:</h4>
<p>That's not an option for QuestionnaireResponse</p>



<a name="158675978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/158675978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#158675978">(Feb 16 2019 at 04:40)</a>:</h4>
<p>In QuestionnaireResponse the solution is to use answerString</p>



<a name="159113768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/choice%2C%20open-choice%2C%20and%20string%20values%3F/near/159113768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/choice.2C.20open-choice.2C.20and.20string.20values.3F.html#159113768">(Feb 21 2019 at 23:12)</a>:</h4>
<blockquote>
<p>I see Questionnaire is still "Trial-Use".  Rather than having choice and open-choice in item.type, I think it would be better to allow item.type Coding, and then have "choice" and open-choice be set somewhere else.  That way item.type could define the data type, and the specification of whether off-list answers were allowed (whatever the type) would be independent.</p>
</blockquote>
<p>In case the above paragraph got lost in the surrounding discussion, I am re-posting.  Also, there is a <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20396" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20396">tracker item</a> I created for it which explains the idea in more detail.  In addition to feedback about the idea itself, I would like to hear how disruptive it would be to have a breaking change in Questionnaire (which is still "trial use").</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
