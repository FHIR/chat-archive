---
layout: page
title: "FHIR Chat  · Responses to nested questions · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Responses.20to.20nested.20questions.html">Responses to nested questions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="191634599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Responses%20to%20nested%20questions/near/191634599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Responses.20to.20nested.20questions.html#191634599">(Mar 24 2020 at 16:16)</a>:</h4>
<p>I'm just  starting to play around with Questionnaire/QuestionnaireResponse  (for STU3) and have a question regarding responses to questionnaires with nested questions.</p>
<p>I constructed the following Questionnaire with two questions, one nested within the other:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;Questionnaire&quot;</span><span class="p">,</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://example.com/Questionnaire/practice-questionnaire-test2&quot;</span><span class="p">,</span>
    <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;draft&quot;</span><span class="p">,</span>
    <span class="nt">&quot;item&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="nt">&quot;linkId&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span>
        <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Date of hospital visit&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span>
        <span class="nt">&quot;item&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="nt">&quot;linkId&quot;</span><span class="p">:</span> <span class="s2">&quot;rating&quot;</span><span class="p">,</span>
            <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;What general score would you give the hospital on a scale from 1 to 10?&quot;</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span>
        <span class="p">}]</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>


<p>I expected the following to be a valid response:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;QuestionnaireResponse&quot;</span><span class="p">,</span>
    <span class="nt">&quot;questionnaire&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;reference&quot;</span><span class="p">:</span> <span class="s2">&quot;http://example.com/Questionnaire/practice-questionnaire-test2&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;completed&quot;</span><span class="p">,</span>
    <span class="nt">&quot;item&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="nt">&quot;linkId&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span>
        <span class="nt">&quot;answer&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="nt">&quot;valueDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2020-03-23&quot;</span><span class="p">,</span>
            <span class="nt">&quot;item&quot;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="nt">&quot;linkId&quot;</span><span class="p">:</span> <span class="s2">&quot;rating&quot;</span><span class="p">,</span>
                <span class="nt">&quot;answer&quot;</span><span class="p">:</span> <span class="p">[{</span>
                    <span class="nt">&quot;valueInteger&quot;</span><span class="p">:</span> <span class="mi">10</span>
                <span class="p">}]</span>
            <span class="p">}]</span>
        <span class="p">}]</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>


<p>But this gives an error upon validation (latest JAR) - the validator does not find the second answer:</p>
<div class="codehilite"><pre><span></span>java -jar org.hl7.fhir.validator.jar -version 3.0.2 -questionnaire required -ig practice-questionnaire-test2.json  practice-questionnaireresponse-test2.json
(...)
*FAILURE* validating practice-questionnaireresponse-test2.json:  error:1 warn:0 info:0
  Error @ QuestionnaireResponse.item[0] (line 7, col15) : No response found for required item with id = &#39;rating&#39;
</pre></div>


<p>I tried various other ways of structuring the response but did not find one that worked. Any ideas as to what I am doing wrong?</p>



<a name="191638112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Responses%20to%20nested%20questions/near/191638112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Responses.20to.20nested.20questions.html#191638112">(Mar 24 2020 at 16:37)</a>:</h4>
<p>It may be you're not doing anything wrong.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - I can't see anything wrong with these instances, do you??</p>



<a name="192202638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Responses%20to%20nested%20questions/near/192202638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Responses.20to.20nested.20questions.html#192202638">(Mar 30 2020 at 01:00)</a>:</h4>
<p>the problem here is the whole answer/question thing. The validator is validating the item.answer.item, but it's actually looking for item.item when it gives that error message</p>



<a name="192202653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Responses%20to%20nested%20questions/near/192202653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Responses.20to.20nested.20questions.html#192202653">(Mar 30 2020 at 01:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> the source questionnaire doesn't say anything item.item vs item.answer.item does it? they're both the same (this is in R3)</p>



<a name="192203575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Responses%20to%20nested%20questions/near/192203575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Responses.20to.20nested.20questions.html#192203575">(Mar 30 2020 at 01:24)</a>:</h4>
<p>item.item is used for children of groups, item.answer.item is used for children of questions.  We've approved a change request to make that more clear.</p>



<a name="192203957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Responses%20to%20nested%20questions/near/192203957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Responses.20to.20nested.20questions.html#192203957">(Mar 30 2020 at 01:36)</a>:</h4>
<p>does that apply retrospectively in R3 and R4?</p>



<a name="192203969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Responses%20to%20nested%20questions/near/192203969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Responses.20to.20nested.20questions.html#192203969">(Mar 30 2020 at 01:37)</a>:</h4>
<p>Yes.  It was always the intention, just not always well documented other than a few examples.</p>



<a name="192205908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Responses%20to%20nested%20questions/near/192205908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Responses.20to.20nested.20questions.html#192205908">(Mar 30 2020 at 02:34)</a>:</h4>
<p>ok fixed next release</p>



<a name="192223519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Responses%20to%20nested%20questions/near/192223519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Responses.20to.20nested.20questions.html#192223519">(Mar 30 2020 at 08:11)</a>:</h4>
<p>Great, thanks! <span aria-label="confetti" class="emoji emoji-1f38a" role="img" title="confetti">:confetti:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
