---
layout: page
title: "FHIR Chat  · Search for QuestionnaireResponse from Questionnaire · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html">Search for QuestionnaireResponse from Questionnaire</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="262277976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/262277976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#262277976">(Nov 22 2021 at 04:14)</a>:</h4>
<p>I'm trying to search for any QuestionnaireResponses to a certain Questionnaire. This search works:</p>
<div class="codehilite"><pre><span></span><code>QuestionnaireResponse?_lastUpdated=gt$2020-01-01&amp;subject=Patient/1234567890
</code></pre></div>
<p>But none of these do.</p>
<div class="codehilite"><pre><span></span><code>QuestionnaireResponse?questionnaire=d79017af-3a87-4ca1-aa6d-400f66d037b9&amp;_lastUpdated=gt$2020-01-01&amp;subject=Patient/1234567890
QuestionnaireResponse?questionnaire=d79017af-3a87-4ca1-aa6d-400f66d037b9
QuestionnaireResponse?questionnaire=Questionnaire/d79017af-3a87-4ca1-aa6d-400f66d037b9
</code></pre></div>
<p>I've tried this on both HAPI and GCP. I assume I'm just formatting it incorrectly, but I've tried the permutations above plus a number of others, and I can't seem to figure it out. What would be the correct format for this?</p>



<a name="262324164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/262324164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#262324164">(Nov 22 2021 at 14:18)</a>:</h4>
<p>QuestionnaireResponse.questionnaire has a type of 'canonical'.  That means it must refer to Questionnaire.url, which in turn must be a full URL.  (Relative URLs aren't allowed.)</p>



<a name="262324344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/262324344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#262324344">(Nov 22 2021 at 14:20)</a>:</h4>
<p>So try <code>questionnaire=http://somewhere.org/fhir/Questionnaire/d79017af-...</code> assuming that's the 'url' of your Questionnaire.  There are variants where you can also specify the Questionnaire.version.  Don't forget to escape the URL when it appears as a parameter in your search.</p>



<a name="262335031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/262335031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#262335031">(Nov 22 2021 at 15:36)</a>:</h4>
<p>Aha, that's my problem. Thanks Lloyd!</p>



<a name="262356351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/262356351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#262356351">(Nov 22 2021 at 18:07)</a>:</h4>
<p>Or not. I'm apparently still missing something. On Hapi, there's this questionnaire:</p>
<div class="codehilite"><pre><span></span><code>http://hapi.fhir.org/baseR4/Questionnaire/1634062
</code></pre></div>
<p>Along with this QuestionnaireResponse:</p>
<div class="codehilite"><pre><span></span><code>http://hapi.fhir.org/baseR4/QuestionnaireResponse/1672619
</code></pre></div>
<p>But then when I try this:</p>
<div class="codehilite"><pre><span></span><code>http://hapi.fhir.org/baseR4/QuestionnaireResponse?questionnaire=http%3A%2F%2Fhapi.fhir.org%2FbaseR4%2FQuestionnaire%2F1634062&amp;_pretty=true
</code></pre></div>
<p>I get an error. Any thoughts on what I'm doing wrong?</p>



<a name="262356536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/262356536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#262356536">(Nov 22 2021 at 18:09)</a>:</h4>
<p>I don't see a 'url' element declared in that Questionnaire.</p>



<a name="262356553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/262356553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#262356553">(Nov 22 2021 at 18:09)</a>:</h4>
<p>If it doesn't have a 'url' defined, you can't reference it.</p>



<a name="262356932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/262356932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#262356932">(Nov 22 2021 at 18:12)</a>:</h4>
<p>Alright, how about now?</p>



<a name="262365115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/262365115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#262365115">(Nov 22 2021 at 19:17)</a>:</h4>
<p>That should work I believe.  If it's not, best to raise on <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a></p>



<a name="262376377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/262376377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#262376377">(Nov 22 2021 at 20:55)</a>:</h4>
<p>Will do, just wanted to make sure it was formatted properly, thanks!</p>



<a name="262378915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/262378915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#262378915">(Nov 22 2021 at 21:18)</a>:</h4>
<p>As far as I could tell :)</p>



<a name="263159070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/263159070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#263159070">(Nov 30 2021 at 15:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire/near/262324164">said</a>:</p>
<blockquote>
<p>QuestionnaireResponse.questionnaire has a type of 'canonical'.  That means it must refer to Questionnaire.url, which in turn must be a full URL.  (Relative URLs aren't allowed.)</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Is a canonical like "#q" (as used in <a href="https://build.fhir.org/ig/HL7/sdc/adaptive.html">https://build.fhir.org/ig/HL7/sdc/adaptive.html</a>) considered to be a "full" URL?</p>



<a name="263164913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/263164913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#263164913">(Nov 30 2021 at 15:57)</a>:</h4>
<p>Yes.  If you're pointing to a contained Questionnaire, then you can get away with just the #[id].  (And no need for the contained Questionnaire to <em>have</em> a url.)</p>



<a name="264386377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/264386377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#264386377">(Dec 10 2021 at 00:12)</a>:</h4>
<p>OK, so I apparently still need some help, because I can't get this to work on HAPI or GCP. Here is my HAPI setup:</p>
<div class="codehilite"><pre><span></span><code>http://hapi.fhir.org/baseR4/Questionnaire/1634062
</code></pre></div>
<p>And then there's this response to it:</p>
<div class="codehilite"><pre><span></span><code>http://hapi.fhir.org/baseR4/QuestionnaireResponse/1672619
</code></pre></div>
<p>Note that the QuestionnaireResponse has </p>
<div class="codehilite"><pre><span></span><code>http://hapi.fhir.org/baseR4/Questionnaire/1634062
</code></pre></div>
<p>as the URL, and I can even search like this:</p>
<div class="codehilite"><pre><span></span><code>http://hapi.fhir.org/baseR4/Questionnaire?url=http%3A%2F%2Fhapi.fhir.org%2FbaseR4%2FQuestionnaire%2F1634062&amp;_pretty=true
</code></pre></div>
<p>And it will find the Questionnaire I'm looking for. However, when I perform this search:<br>
But then when I try to search for the second using the first as a parameter:</p>
<div class="codehilite"><pre><span></span><code>http://hapi.fhir.org/baseR4/QuestionnaireResponse?questionnaire=http%3A%2F%2Fhapi.fhir.org%2FbaseR4%2FQuestionnaire%2F1634062&amp;_pretty=true
</code></pre></div>
<p>I get an error. </p>
<p>Another example on GCP (this request requires authentication, but I get the same result):</p>
<div class="codehilite"><pre><span></span><code>https://healthcare.googleapis.com/v1/projects/zanenet-njinck/locations/us-central1/datasets/dev-zanenet-njinck/fhirStores/stage-zanenet-njinck-datastore/fhir/Questionnaire/5b267df7-b195-4a75-8848-50c8a01dc85b
</code></pre></div>
<p>Or I can search for the questionnaire:</p>
<div class="codehilite"><pre><span></span><code>https://healthcare.googleapis.com/v1/projects/zanenet-njinck/locations/us-central1/datasets/dev-zanenet-njinck/fhirStores/stage-zanenet-njinck-datastore/fhir/Questionnaire?url=https%3A%2F%2Fhealthcare.googleapis.com%2Fv1%2Fprojects%2Fzanenet-njinck%2Flocations%2Fus-central1%2Fdatasets%2Fdev-zanenet-njinck%2FfhirStores%2Fstage-zanenet-njinck-datastore%2Ffhir%2FQuestionnaire%2F5b267df7-b195-4a75-8848-50c8a01dc85b
</code></pre></div>
<p>So it recognizes the url properly. Then this is an example for a QuestionnaireResponse to the Questionnaire:</p>
<div class="codehilite"><pre><span></span><code>https://healthcare.googleapis.com/v1/projects/zanenet-njinck/locations/us-central1/datasets/dev-zanenet-njinck/fhirStores/stage-zanenet-njinck-datastore/fhir/Questionnaire/a210d717-8c68-449d-8668-41fcb9391f7e
</code></pre></div>
<p>And I note that the questionnaire field for this QuestionniareResponse is:</p>
<div class="codehilite"><pre><span></span><code>https://healthcare.googleapis.com/v1/projects/zanenet-njinck/locations/us-central1/datasets/dev-zanenet-njinck/fhirStores/stage-zanenet-njinck-datastore/fhir/Questionnaire/5b267df7-b195-4a75-8848-50c8a01dc85b
</code></pre></div>
<p>And yet, when I try this:</p>
<div class="codehilite"><pre><span></span><code>https://healthcare.googleapis.com/v1/projects/zanenet-njinck/locations/us-central1/datasets/dev-zanenet-njinck/fhirStores/stage-zanenet-njinck-datastore/fhir/QuestionnaireResponse?questionnaire=https://healthcare.googleapis.com/v1/projects/zanenet-njinck/locations/us-central1/datasets/dev-zanenet-njinck/fhirStores/stage-zanenet-njinck-datastore/fhir/Questionnaire/5b267df7-b195-4a75-8848-50c8a01dc85b
</code></pre></div>
<p>Or this:</p>
<div class="codehilite"><pre><span></span><code>https://healthcare.googleapis.com/v1/projects/zanenet-njinck/locations/us-central1/datasets/dev-zanenet-njinck/fhirStores/stage-zanenet-njinck-datastore/fhir/QuestionnaireResponse?questionnaire=https%3A%2F%2Fhealthcare.googleapis.com%2Fv1%2Fprojects%2Fzanenet-njinck%2Flocations%2Fus-central1%2Fdatasets%2Fdev-zanenet-njinck%2FfhirStores%2Fstage-zanenet-njinck-datastore%2Ffhir%2FQuestionnaire%2F5b267df7-b195-4a75-8848-50c8a01dc85b
</code></pre></div>
<p>It returns an empty bundle.<br>
Could anyone help point out what I'm doing wrong?</p>



<a name="264402223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/264402223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#264402223">(Dec 10 2021 at 04:34)</a>:</h4>
<p>That indeed looks like a HAPI bug to me.</p>



<a name="264406230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/264406230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#264406230">(Dec 10 2021 at 05:55)</a>:</h4>
<p>Suggest asking on <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a></p>



<a name="264461546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/264461546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#264461546">(Dec 10 2021 at 15:19)</a>:</h4>
<p>The thing that bothered me was that I got an error on the GCP platform as well (and they use their own implementation). So I was trying to make sure I wasn't missing something. I had asked this on the HAPI channel but hadn't gotten a response yet.</p>



<a name="264465819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Search%20for%20QuestionnaireResponse%20from%20Questionnaire/near/264465819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Search.20for.20QuestionnaireResponse.20from.20Questionnaire.html#264465819">(Dec 10 2021 at 15:50)</a>:</h4>
<p>The questionnaire parameter works in HAPI 5.3: <a href="https://lforms-fhir.nlm.nih.gov/baseR4/QuestionnaireResponse?questionnaire=https://lforms-fhir.nlm.nih.gov/baseR4/Questionnaire/74728-7-modified-x">https://lforms-fhir.nlm.nih.gov/baseR4/QuestionnaireResponse?questionnaire=https://lforms-fhir.nlm.nih.gov/baseR4/Questionnaire/74728-7-modified-x</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
