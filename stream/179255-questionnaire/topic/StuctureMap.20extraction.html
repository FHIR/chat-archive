---
layout: page
title: "FHIR Chat  · StuctureMap extraction · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/StuctureMap.20extraction.html">StuctureMap extraction</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="237390894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/StuctureMap%20extraction/near/237390894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Corey Wen <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/StuctureMap.20extraction.html#237390894">(May 04 2021 at 20:14)</a>:</h4>
<p>From what I understand, if I wanted to extract data from a questionnaire and transform it into a FHIR resource such as Patient or AllergenIntolerance, StructureMap based extraction is the most useful for this situation.<br>
Where can I find any examples that demonstrate this functionality?</p>



<a name="237396188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/StuctureMap%20extraction/near/237396188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/StuctureMap.20extraction.html#237396188">(May 04 2021 at 20:55)</a>:</h4>
<p><span class="user-mention" data-user-id="217312">@Joee Garcia</span></p>



<a name="237447053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/StuctureMap%20extraction/near/237447053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/StuctureMap.20extraction.html#237447053">(May 05 2021 at 06:31)</a>:</h4>
<p><span class="user-mention" data-user-id="408951">@Corey Wen</span> you can find an example here which extracts a QuestionnaireResponse to a FHIR Document:</p>
<ol>
<li><a href="https://test.ahdis.ch/r4/Questionnaire/QuestionnaireRadiologyOrder?_format=json">Questionnaire</a> which is refererring to a StructureMap for extraction (<a href="http://build.fhir.org/ig/hl7ch/ch-rad-order/questionnaire.html">Questionnaire in IG</a>)</li>
</ol>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="nt">"extension"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
    <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-targetStructureMap"</span><span class="p">,</span>
    <span class="nt">"valueCanonical"</span><span class="p">:</span> <span class="s2">"http://fhir.ch/ig/ch-rad-order/StructureMap/RadOrderQrToBundle"</span>
  <span class="p">}</span> <span class="p">]</span>
</code></pre></div>
<ol start="2">
<li>
<p><a href="https://test.ahdis.ch/r4/StructureMap/RadOrderQrToBundle?_format=json">StructureMap</a>, <a href="http://build.fhir.org/ig/hl7ch/ch-rad-order/StructureMap-RadOrderQrToBundle.html">IG</a>, depends on <a href="http://build.fhir.org/ig/hl7ch/ch-orf/StructureMap-OrfQrToBundle.html">base orf map</a></p>
</li>
<li>
<p>Sample <a href="http://build.fhir.org/ig/hl7ch/ch-rad-order/QuestionnaireResponse-QuestionnaireResponseRadiologyOrder.xml.html">QuestionnarieResponse</a></p>
</li>
<li>
<p>Extracted Questionnaire to Bundle is  <a href="http://build.fhir.org/ig/hl7ch/ch-rad-order/Bundle-bundle-radorder-mapped.xml.html">here</a></p>
</li>
</ol>
<p>You can do the transform yourself with VSCode, RESTClient <a href="https://github.com/hl7ch/ch-rad-order/blob/master/maps/transforms.http">http</a>:</p>
<div class="codehilite"><pre><span></span><code>@host = https://test.ahdis.ch/r4
POST {{host}}/QuestionnaireResponse/$extract
Content-Type: application/fhir+json

&lt; ./fsh-generated/resources/QuestionnaireResponse-QuestionnaireResponseRadiologyOrder.json
</code></pre></div>
<p>We are preparing this testcase (we still struggle with $populate operation) for the upcoming connectathon and will be participating at the <a href="https://confluence.hl7.org/display/FHIR/2021-05+Questionnaire"> FHIR connectathon questionnaire track</a> ...</p>



<a name="237708117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/StuctureMap%20extraction/near/237708117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joee Garcia <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/StuctureMap.20extraction.html#237708117">(May 06 2021 at 18:36)</a>:</h4>
<p><span class="user-mention" data-user-id="408951">@Corey Wen</span> There's another example in the <a href="http://hl7.org/fhir/us/sdoh-clinicalcare/2021Jan/index.html">SDOH Clinical Care IG</a> that extracts Observation and Conditions from a QuestionnaireResponse using a StructureMap.  You can look for examples in the Artifact Index related to the Hunger Vital Signs (HVS) Questionnaire and it also has the <a href="http://hl7.org/fhir/us/sdoh-clinicalcare/2021Jan/mapping_instructions.html">mapping file</a> used to create the StructureMap.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
