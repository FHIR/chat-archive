---
layout: page
title: "FHIR Chat  · Custom Business Rules · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20Business.20Rules.html">Custom Business Rules</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="222756040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20Business%20Rules/near/222756040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rajesh B <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20Business.20Rules.html#222756040">(Jan 14 2021 at 17:57)</a>:</h4>
<p>I would like to see if there is any standard defined to include multiple custom business rules and apply on item level and at <strong>Questionnaire</strong> level .<br>
Example: 1. If <strong>Patient</strong> is living in NewYork then I need to show or hide the item. (The patient living location is not available in <strong>Questionnaire</strong>)</p>
<ol start="2">
<li>I need to show set of items related to pregnancy if <strong>Patient</strong> Gender is Female and age is greater than 18. Both Gender and Age won't be available inside <strong>Questionnaire</strong>, how ever the data is available in the respective application when the <strong>QuestionnaireResponse</strong> is collected.</li>
</ol>
<p>Please note that, I have explored <strong>EnableWhen</strong> and <strong>EnableWhenExpression</strong> extensions, both of them works based on FHIR Path expressions, and the expression will be evaluated as and when we are filling out Questionnaire based on  answers selected. In our case, we would like to define some rules at Questionnaire, item level and they should be evaluated at runtime(NOT based on the answers selected from Questionnaire).</p>



<a name="222757064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20Business%20Rules/near/222757064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20Business.20Rules.html#222757064">(Jan 14 2021 at 18:03)</a>:</h4>
<p>The EnableWhenExpression is what you're looking for, which are evaluated at runtime, not sure what you mean in the last sentance.<br>
The expression can refer to anything, not just results to questions.</p>



<a name="222757543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20Business%20Rules/near/222757543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20Business.20Rules.html#222757543">(Jan 14 2021 at 18:06)</a>:</h4>
<p>To do that you would need to include the pre-population context information to be provided into the rendering so that the information was made available to the form as  a context variable, which is then available to the fhirpath engine.</p>



<a name="222764630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20Business%20Rules/near/222764630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20Business.20Rules.html#222764630">(Jan 14 2021 at 18:54)</a>:</h4>
<p>Note that enableWhen is driven only by questions answered in the context of this Questionnaire.  If you're wanting to display information conditionally based on data elsewhere in the patient's record, you could have auto-populated hidden questions.  You could also use the enableWhenExpression extension to make things conditional on a direct query, but the challenge there is that the validity of the questionnaire response could change over time.  E.g. a QuestionnaireResponse filled out a year ago might now say it's invalid because the patient no longer resides in New York, even though they might have at the time the response was completed.</p>



<a name="222779047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20Business%20Rules/near/222779047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rajesh B <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20Business.20Rules.html#222779047">(Jan 14 2021 at 20:27)</a>:</h4>
<p>Hi Lloyd and Brian,</p>
<p>Thanks for your response.<br>
Can you please share any references/examples based on your response.</p>



<a name="222799927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20Business%20Rules/near/222799927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20Business.20Rules.html#222799927">(Jan 14 2021 at 23:22)</a>:</h4>
<p>For those specific examples, you might use launchContext to get a "patient" variable loaded with the Patient resource, and then use that variable in an expression (variable and/or enableWhenExpression) to get the address, gender, or birthDate.   An example of that is <a href="https://lforms-smart-fhir.nlm.nih.gov/v/r4/fhir/Questionnaire/54127-6-x">https://lforms-smart-fhir.nlm.nih.gov/v/r4/fhir/Questionnaire/54127-6-x</a></p>



<a name="223264783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20Business%20Rules/near/223264783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sravanti Cherukuri <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20Business.20Rules.html#223264783">(Jan 19 2021 at 17:50)</a>:</h4>
<p>Hi Paul,<br>
      LaunchContext only supports 4 resources like Patient,encounter,location and user.If we prefer to go with custom resources.How can we implement.Will there be any other approach alternative to launchcontext</p>



<a name="223315157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/Custom%20Business%20Rules/near/223315157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/Custom.20Business.20Rules.html#223315157">(Jan 20 2021 at 00:12)</a>:</h4>
<p><span class="user-mention" data-user-id="381581">@Sravanti Cherukuri</span> Please see the resolution of <a href="https://jira.hl7.org/browse/FHIR-29664">https://jira.hl7.org/browse/FHIR-29664</a>, which is approved but not yet applied, and which changed launchContext a bit.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
