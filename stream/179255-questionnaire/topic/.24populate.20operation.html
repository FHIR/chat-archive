---
layout: page
title: "FHIR Chat  · $populate operation · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html">$populate operation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="207470488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207470488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207470488">(Aug 19 2020 at 22:49)</a>:</h4>
<p><a href="http://build.fhir.org/ig/HL7/sdc/OperationDefinition-Questionnaire-populate.html">http://build.fhir.org/ig/HL7/sdc/OperationDefinition-Questionnaire-populate.html</a> indicate that input parameter content is "Resource containing information to be used to help populate the QuestionnaireResponse" and the type is Reference. While using with SMART and CDS Hooks, the client is authorized to access FHIR resources from EHR server. Questionnaires are served by different server. Client cannot share its authorization with Questionnaire server. In such case, when client calls $populate on Questionnaire server with list of Reference, the Questionnaire server could not retrieve those referenced resourced. Client should be allowed to send a Bundle of related resources as an input parameter with $populate operation.</p>



<a name="207516248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207516248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207516248">(Aug 20 2020 at 12:28)</a>:</h4>
<p>If the Questionnaire server isn't authorized to access the EHR server, is it okay to send it resources from the EHR server which might contain PHI data?</p>



<a name="207521253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207521253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207521253">(Aug 20 2020 at 13:23)</a>:</h4>
<p>Authorization is given to the user who is using the client. My understanding the user has privilege to decide what to do with the data he/she received.</p>



<a name="207521994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207521994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207521994">(Aug 20 2020 at 13:29)</a>:</h4>
<p>Okay.  I think your argument above about $populate needing to take a bundle as input makes sense, but I am curious about what others who have implemented $populate think.   <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> ?</p>



<a name="207523420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207523420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Dingwell <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207523420">(Aug 20 2020 at 13:44)</a>:</h4>
<p>I'm not certain the blanket statement that the user can do what they want with the data is true.  In the use case that I imagine <span class="user-mention" data-user-id="191506">@Yunwei Wang</span> is talking about , DaVinici,  the use case and the use of the data by the application is known and more than likely agreed upon in advance, so sending the data over may be permissible in that sense.  But, DaVinici is not currently sending over full resources, but rather a QuestionnairreResponse that contains derived data that may have a lower degree of PHI than sending entire resources over.   Long winded way of saying I think it depends on the use case  and agreements in place as too if it is permissible or not. </p>
<p>That being said I think the idea of the operation being able to take a bundle of data makes sense.  I also think that having an inverse operation on Patient that takes a Questionnaire and populates it makes sense as well.  That way the whole patient record isn't sent to an external server.  Though the use case and agreements in place would still dictate what is able to be done with that QuestionnaireResponse once it is filled out.</p>



<a name="207525635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207525635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207525635">(Aug 20 2020 at 14:05)</a>:</h4>
<p>I thought about the adding $populate function to EHR itself. That removes the authorization hurdle. In my understanding, Questionnaires handling itself is a complicated system. It is similar to terminology handling. EHR server doesn't have to host all questionnaires, CQLs, and operations. Using DaVinci as an example. Provider's EHR hosts clinical data, Payer's Questionnaire service hosts questionnaire, libraries, and SDC operations. Client is smart app registered with EHR auth server and connect to questionnaire service provided by Payer's server. In such design, I am wondering either SMART client share its authorization (token) with the Payer's backend service or share data it receives with the Payer's service.</p>



<a name="207528224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207528224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207528224">(Aug 20 2020 at 14:29)</a>:</h4>
<p>The way I've done it is through adding other resource properties through in the parameters, context variables pass in the context object, then also support using context query too.<br>
Have a working demo to share of all that. <br>
<a href="http://smartqedit4.azurewebsites.net/Questionnaire/Populate">http://smartqedit4.azurewebsites.net/Questionnaire/Populate</a></p>



<a name="207528337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207528337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207528337">(Aug 20 2020 at 14:30)</a>:</h4>
<p>It separates form server, data server and populate servers.</p>



<a name="207529910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207529910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207529910">(Aug 20 2020 at 14:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> How do you deal with the authorization between data server and populate server?</p>



<a name="207538091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207538091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Dingwell <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207538091">(Aug 20 2020 at 15:47)</a>:</h4>
<p>I could be wrong but it looks like what is being sent to the $populate operation is outside of the data the $populate operation defines.  Things like LaunchPatient, LaunchProvider and PreQuery are not defined in that operation so it's a deviation.   The same issues apply in whether or not a user is allowed to send data to a remote server.</p>



<a name="207606334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207606334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207606334">(Aug 21 2020 at 07:24)</a>:</h4>
<p>The context parameters may not have been applied to the latest version of the spec, but it is intended to be supported - slightly different to this, but the same way.</p>



<a name="207606439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/207606439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#207606439">(Aug 21 2020 at 07:26)</a>:</h4>
<p>The approach I've done means that the data server and the populate server don't need to talk, as the client retrieves the data from the data server (that was defined in the form definition) and then passes that to the populate server.<br>
So it nicely doesn't require that permission to be granted.<br>
Just as with the LHC approach where the browser does all the work...</p>



<a name="208130672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/208130672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#208130672">(Aug 26 2020 at 18:37)</a>:</h4>
<p>This page <a href="http://build.fhir.org/ig/HL7/sdc/populate.html">http://build.fhir.org/ig/HL7/sdc/populate.html</a> states that using questionnaire-launchContext for FHIRPath approach. If I need to specify CQL library used for populate, is that <a href="http://hl7.org/fhir/StructureDefinition/cqf-library">http://hl7.org/fhir/StructureDefinition/cqf-library</a> extension?</p>



<a name="208136344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/208136344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#208136344">(Aug 26 2020 at 19:24)</a>:</h4>
<p>Another question about candidateExpression. $populate operation returns QuestionnaireResponse. The result for initialExpression will be added to the QuestionnaireResponse. CandidateExpression "resolves to a list of candidate answers for the question item". How should these "list of candidate answers" return in QuestionnaireResponse by $populate?</p>



<a name="208165673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/208165673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#208165673">(Aug 27 2020 at 00:17)</a>:</h4>
<p>I would expect that they wouldn't be, I think that would be for runtime experience, not pre-populate</p>



<a name="208241749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/208241749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#208241749">(Aug 27 2020 at 16:28)</a>:</h4>
<p>how about my first question? <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="208259283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/208259283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#208259283">(Aug 27 2020 at 18:46)</a>:</h4>
<p>You could still use launchContext with CQL I think...</p>



<a name="208338785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/208338785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#208338785">(Aug 28 2020 at 13:00)</a>:</h4>
<p>launchContext extension does not provide information for library canonical url</p>



<a name="208347440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/%24populate%20operation/near/208347440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/.24populate.20operation.html#208347440">(Aug 28 2020 at 14:10)</a>:</h4>
<p>I wouldn't have expected it to?  Launch context provides information that could be used by a library.  The library would need to be referenced by other extensions.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
