---
layout: page
title: "FHIR Chat  · answerOption extensions in contained ValueSets? · questionnaire"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/index.html">questionnaire</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html">answerOption extensions in contained ValueSets?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="168405146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168405146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168405146">(Jun 18 2019 at 14:18)</a>:</h4>
<p>If you have an answer list that is used multiple times (e.g. PHQ-9), it is nice to define that as a contained ValueSet and reference it to avoid duplication.  However, we just noticed that some extensions (like <a href="https://www.hl7.org/fhir/extension-questionnaire-optionprefix.html" target="_blank" title="https://www.hl7.org/fhir/extension-questionnaire-optionprefix.html">optionPrefix</a>) do not say in their "context of use" that they can be used on a ValueSet.expansion.contains item.  Can they?  If not, it greatly limits the usefulness of contained ValueSets.  I think this is related to the issue <span class="user-mention" data-user-id="196149">@Astrid Corinna Wolff</span> <a href="#narrow/stream/179255-questionnaire/topic/Questionnaire.3A.20Extension.20questionnaire-optionExclusive" title="#narrow/stream/179255-questionnaire/topic/Questionnaire.3A.20Extension.20questionnaire-optionExclusive">raised</a>, but I didn't see a mention of a tracker item.</p>



<a name="168417786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168417786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168417786">(Jun 18 2019 at 16:31)</a>:</h4>
<p>here is an example of PHQ-9 doing just what Paul describes:  <a href="http://sqlonfhir-stu3.azurewebsites.net/fhir/Questionnaire/questionnaire-example-phq9" target="_blank" title="http://sqlonfhir-stu3.azurewebsites.net/fhir/Questionnaire/questionnaire-example-phq9">http://sqlonfhir-stu3.azurewebsites.net/fhir/Questionnaire/questionnaire-example-phq9</a></p>



<a name="168419019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168419019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168419019">(Jun 18 2019 at 16:45)</a>:</h4>
<p>That's on the Questionnaire side.  I think the issue was on the QuestionnaireResponse side.</p>



<a name="168420905"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168420905" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168420905">(Jun 18 2019 at 17:06)</a>:</h4>
<p>oops</p>



<a name="168443115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168443115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168443115">(Jun 18 2019 at 18:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> The issue I am raising here is on the Questionnaire.</p>



<a name="168444392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168444392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168444392">(Jun 18 2019 at 18:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span>  I see you are using valueset-ordinalValue, which in R4 became ordinalValue, and also dropped the context of ValueSet.expansion.contains (though I think that was accidental, if I remember correctly from some other post).</p>



<a name="168446672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168446672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168446672">(Jun 18 2019 at 19:20)</a>:</h4>
<p>this is a STU3 example.   and yes probably is an older example</p>



<a name="168446728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168446728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168446728">(Jun 18 2019 at 19:21)</a>:</h4>
<p>How important are these context of use statements on the extension pages?  If a context isn't listed, does that mean we can't use it there?</p>



<a name="168447190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168447190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168447190">(Jun 18 2019 at 19:27)</a>:</h4>
<p>OK I see what you are saying .  I extended the context of use in this example and in the ig.   I think I mention that in the IG, but I have am guilty of doing  this elsewhere too  instead of redefining the extension I just stated that I am extending  the context.</p>



<a name="168448960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168448960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168448960">(Jun 18 2019 at 19:48)</a>:</h4>
<p>I think extending the context of use is better than redefining an extension (creating another version of it?) but I am wondering it if will cause problems for the contexts not to be all listed on the extension pages.</p>



<a name="168449846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168449846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168449846">(Jun 18 2019 at 19:58)</a>:</h4>
<p>I chose to do it and ask forgiveness later</p>



<a name="168449902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168449902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168449902">(Jun 18 2019 at 19:59)</a>:</h4>
<p>the validator will notice.... but you should still use the existing extension, and create a task</p>



<a name="168460203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168460203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168460203">(Jun 18 2019 at 22:14)</a>:</h4>
<p>I believe I have</p>



<a name="168508807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179255-questionnaire/topic/answerOption%20extensions%20in%20contained%20ValueSets%3F/near/168508807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179255-questionnaire/topic/answerOption.20extensions.20in.20contained.20ValueSets.3F.html#168508807">(Jun 19 2019 at 13:57)</a>:</h4>
<p>I didn't see a tracker item for optionPrefix, so I added one:  <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22715" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22715">GF#22715</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
