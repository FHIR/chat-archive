---
layout: page
title: "FHIR Chat  · Constraints based on other profiles · netherlands"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/index.html">netherlands</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Constraints.20based.20on.20other.20profiles.html">Constraints based on other profiles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="250894663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Constraints%20based%20on%20other%20profiles/near/250894663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Kijlstra <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Constraints.20based.20on.20other.20profiles.html#250894663">(Aug 27 2021 at 07:35)</a>:</h4>
<p>Hi all, </p>
<p>My question is whether it's possible to constrain (elements in) a profile based on another profile rather than based on an element within the same profile?</p>
<p>We are building a FHIR bundle for the DICA DHFA quality registry. In the DHFA registry, certain variables are only required when certain conditions are met. For example, the variable for complication only needs to be answered when the therapy variable has been answered as operative instead of conservative treatment. The therapy variable has been modelled in a Procedure profile derived from the zib-Procedure profile. The complication variable has been modelled in a Condition profile derived from the zib-Problem profile. </p>
<p>I would now like to constrain whether the complication profile is provided based on the data provided within the procedure profile. How would I go about doing this? The documentation on FHIR Path (<a href="http://hl7.org/fhirpath/">http://hl7.org/fhirpath/</a>) seems to only describe referencing elements within the same profile to build constraints.</p>
<p>Best,<br>
David</p>



<a name="251533629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Constraints%20based%20on%20other%20profiles/near/251533629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Constraints.20based.20on.20other.20profiles.html#251533629">(Sep 01 2021 at 10:02)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="433986">@David Kijlstra</span> ,<br>
I think you will need to have some kind of resource/profile above these profiles that bundles and describes how to exchange the required information , for example a Bundle, List,  Composition, Questionnaire/QuestionnarieResponse or any other relevant resource that will reference both the Procedure and Condition profiles. In this profile, you can use the profile itself and FHIRPath to describe your business rules.</p>
<p>Another option could be to describe it in plain old text in an implementation guide.  </p>
<p>Does this help?</p>



<a name="251533924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Constraints%20based%20on%20other%20profiles/near/251533924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Constraints.20based.20on.20other.20profiles.html#251533924">(Sep 01 2021 at 10:04)</a>:</h4>
<p>Ah, I now read that you are doing this based on a Bundle! Very good. Let me try to give an example for how to use FHIRPath. You can use the resolve() function for references, but Bundle.entry.resource is not a reference :) but a resource straight away.</p>
<p>The resolve() function is described by the FHIR spec itself: <a href="https://hl7.org/fhir/fhirpath.html#functions">https://hl7.org/fhir/fhirpath.html#functions</a></p>



<a name="251534736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Constraints%20based%20on%20other%20profiles/near/251534736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Constraints.20based.20on.20other.20profiles.html#251534736">(Sep 01 2021 at 10:12)</a>:</h4>
<p>Here is an example on how to navigate into a specific resource in a Bundle, mind the where() and is() function. You can use the <a href="http://hl7.org/fhirpath/#types">http://hl7.org/fhirpath/#types</a> functions to specify the resource type.</p>
<blockquote>
<p>Bundle.entry.resource.where(is(Binary).not()).where(meta.profile.empty()).empty()</p>
</blockquote>



<a name="251535038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Constraints%20based%20on%20other%20profiles/near/251535038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Constraints.20based.20on.20other.20profiles.html#251535038">(Sep 01 2021 at 10:15)</a>:</h4>
<p>If you are crafting FHIRPath statements, I recommend using a FHIRPath tester :D (<a href="https://www.microsoft.com/en-us/p/fhirpath-tester/9nxv8qdq154v#activetab=pivot:overviewtab">https://www.microsoft.com/en-us/p/fhirpath-tester/9nxv8qdq154v#activetab=pivot:overviewtab</a>)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
