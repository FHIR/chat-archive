---
layout: page
title: "FHIR Chat  · Validate MedMij BgZ resources e.g. NL Patient · netherlands"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/index.html">netherlands</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html">Validate MedMij BgZ resources e.g. NL Patient</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="186192825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Validate%20MedMij%20BgZ%20resources%20e.g.%20NL%20Patient/near/186192825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Vinke <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html#186192825">(Jan 21 2020 at 15:19)</a>:</h4>
<p>I'm pretty new to the MedMij, Nictiz and FHIR standards and I'm trying to be able to get a grasp on coding systems, value sets and validating resources.</p>
<p>Consider I have a FHIR STU3 <code>Patient.json</code>(example "Irma Jongeneel-de Haas" from <a href="https://simplifier.net/nictizstu3-zib2017/patient-example-duplicate-12" target="_blank" title="https://simplifier.net/nictizstu3-zib2017/patient-example-duplicate-12">https://simplifier.net/nictizstu3-zib2017/patient-example-duplicate-12</a>) which, after reading <a href="https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator" target="_blank" title="https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator">https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator</a>, am able to validate like this:</p>
<p><span aria-label="boom" class="emoji emoji-1f4a5" role="img" title="boom">:boom:</span> Default FHIR STU3 validation fails:</p>
<div class="codehilite"><pre><span></span>tvinke@localhost ~/projects/medmij (master) $ java -jar org.hl7.fhir.validator.jar Patient.json -version 3.0
FHIR Validation tool Version 4.1.21-SNAPSHOT (Git# 89592da490df). Built 2019-12-09T17:47:19.708+11:00 (43 days old)
Detected Java version: 1.8.0_121 from /Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home/jre on x86_64 (64bit). 3641MB available
Arguments: Patient.json -version 3.0
Directories: Current = /Users/tvinke/projects/medmij, Package Cache = /Users/tvinke/.fhir/packages
  .. FHIR Version 3.0, definitions from hl7.fhir.r3.core#3.0.2
  .. connect to tx server @ http://tx.fhir.org
    (v3.0.2)
  .. validate [Patient.json]
Success...validating Patient.json:  error:0 warn:3 info:1
  Information @ Patient.address[0].extension[0] (line 91, col18) : Unknown extension http://fhir.nl/fhir/StructureDefinition/nl-core-address-official
  Warning @ Patient.contact[0].relationship[0] (line 138, col18) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/v2-0131 (http://hl7.org/fhir/ValueSet/v2-0131, and a code should come from this value set unless it has no suitable code) (codes = urn:oid:2.16.840.1.113883.2.4.3.11.22.472#1)
  Warning @ Patient.contact[0].relationship[1] (line 147, col18) : None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/v2-0131 (http://hl7.org/fhir/ValueSet/v2-0131, and a code should come from this value set unless it has no suitable code) (codes = http://hl7.org/fhir/v3/RoleCode#HUSB)
  Warning @ Patient.meta.profile[0] (line 1, col2) : StructureDefinition reference &quot;http://fhir.nl/fhir/StructureDefinition/nl-core-patient&quot; could not be resolved
</pre></div>


<p>Assumption: I've probably got all these errors because the JSON contains all Dutch-specific extensions right?</p>
<p>Since it's not just an international FHIR patient, I would like to validate it as valid "MedMij" patient. <br>
Is a valid "MedMij" patient the same as a valid Nictiz <a href="https://simplifier.net/nictizstu3-zib2017/nl-core-patient" target="_blank" title="https://simplifier.net/nictizstu3-zib2017/nl-core-patient">https://simplifier.net/nictizstu3-zib2017/nl-core-patient</a> ?</p>
<p>If so, how would I go about validating it according to nl-core-patient? I saw that the validator could be pointed to a <strong>profile</strong>. Unfortunately, the following fails.</p>
<p><span aria-label="boom" class="emoji emoji-1f4a5" role="img" title="boom">:boom:</span> Validating with <code>-profile http://fhir.nl/fhir/StructureDefinition/nl-core-patient</code> parameter fails:</p>
<div class="codehilite"><pre><span></span>tvinke@localhost ~/projects/medmij (master) $ java -jar org.hl7.fhir.validator.jar Patient.json -version 3.0 -profile http://fhir.nl/fhir/StructureDefinition/nl-core-patient
FHIR Validation tool Version 4.1.21-SNAPSHOT (Git# 89592da490df). Built 2019-12-09T17:47:19.708+11:00 (43 days old)
Detected Java version: 1.8.0_121 from /Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home/jre on x86_64 (64bit). 3641MB available
Arguments: Patient.json -version 3.0 -profile http://fhir.nl/fhir/StructureDefinition/nl-core-patient
Directories: Current = /Users/tvinke/projects/medmij, Package Cache = /Users/tvinke/.fhir/packages
  .. FHIR Version 3.0, definitions from hl7.fhir.r3.core#3.0.2
  .. connect to tx server @ http://tx.fhir.org
    (v3.0.2)
Fetch Profile from http://fhir.nl/fhir/StructureDefinition/nl-core-patient
Exception in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: unable to determine format
    at org.hl7.fhir.r5.formats.FormatUtilities.determineFormat(FormatUtilities.java:143)
    at org.hl7.fhir.r5.formats.FormatUtilities.determineFormat(FormatUtilities.java:131)
    at org.hl7.fhir.r5.validation.ValidationEngine.loadProfile(ValidationEngine.java:779)
    at org.hl7.fhir.r5.validation.Validator.main(Validator.java:630)
</pre></div>


<p>Ok, the validation wiki page talks about also specifying an "loading an implementation guide".  Luckily I saw a "package" <strong>nictiz.fhir.nl.stu3.zib2017</strong> is available on <a href="https://simplifier.net/packages/nictiz.fhir.nl.stu3.zib2017/1.3.3" target="_blank" title="https://simplifier.net/packages/nictiz.fhir.nl.stu3.zib2017/1.3.3">https://simplifier.net/packages/nictiz.fhir.nl.stu3.zib2017/1.3.3</a> so I tried additionally specifying that name with the <code>-ig</code> parameter -- but it fails:</p>
<p><span aria-label="boom" class="emoji emoji-1f4a5" role="img" title="boom">:boom:</span> Validating with <code>-ig nictiz.fhir.nl.stu3.zib2017 -profile http://fhir.nl/fhir/StructureDefinition/nl-core-patient</code> parameter fails:</p>
<div class="codehilite"><pre><span></span>tvinke@localhost ~/projects/medmij (master) $ java -jar org.hl7.fhir.validator.jar Patient.json -version 3.0 -ig nictiz.fhir.nl.stu3.zib2017 -profile http://fhir.nl/fhir/StructureDefinition/nl-core-patient
FHIR Validation tool Version 4.1.21-SNAPSHOT (Git# 89592da490df). Built 2019-12-09T17:47:19.708+11:00 (43 days old)
Detected Java version: 1.8.0_121 from /Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home/jre on x86_64 (64bit). 3641MB available
Arguments: Patient.json -version 3.0 -ig nictiz.fhir.nl.stu3.zib2017 -profile http://fhir.nl/fhir/StructureDefinition/nl-core-patient
Directories: Current = /Users/tvinke/projects/medmij, Package Cache = /Users/tvinke/.fhir/packages
  .. FHIR Version 3.0, definitions from hl7.fhir.r3.core#3.0.2
  .. connect to tx server @ http://tx.fhir.org
    (v3.0.2)
+  .. load IG from nictiz.fhir.nl.stu3.zib2017
Exception in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: Unable to resolve the package &#39;nictiz.fhir.nl.stu3.zib2017&#39;
    at org.hl7.fhir.utilities.cache.PackageCacheManager.loadPackage(PackageCacheManager.java:605)
    at org.hl7.fhir.r5.validation.ValidationEngine.resolvePackage(ValidationEngine.java:694)
    at org.hl7.fhir.r5.validation.ValidationEngine.fetchByPackage(ValidationEngine.java:683)
    at org.hl7.fhir.r5.validation.ValidationEngine.loadIgSource(ValidationEngine.java:522)
    at org.hl7.fhir.r5.validation.ValidationEngine.loadIg(ValidationEngine.java:786)
    at org.hl7.fhir.r5.validation.Validator.main(Validator.java:567)
</pre></div>


<p>3rd strike. I saw on the validator page that the <code>-ig</code> parameter could also point to a directory!</p>
<p>Downloading profiles &amp; value sets manually (as Henk-Jan Meijer did in <a href="#narrow/stream/179181-netherlands/topic/Validation.20of.20MedMij.20example" title="#narrow/stream/179181-netherlands/topic/Validation.20of.20MedMij.20example">"Validation of MedMij example"</a>) seems error-prone, so tried to download the entire package <strong>nictiz.fhir.nl.stu3.zib2017</strong> with the instructions using NPM:</p>
<div class="codehilite"><pre><span></span>tvinke@localhost ~/projects/medmij (master) $ npm --registry https://packages.simplifier.net install nictiz.fhir.nl.stu3.zib2017@1.3.3
npm WARN saveError ENOENT: no such file or directory, open &#39;/Users/tvinke/projects/medmij/package.json&#39;
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN enoent ENOENT: no such file or directory, open &#39;/Users/tvinke/projects/medmij/package.json&#39;
npm WARN medmij No description
npm WARN medmij No repository field.
npm WARN medmij No README data
npm WARN medmij No license field.

+ nictiz.fhir.nl.stu3.zib2017@1.3.3
added 1 package from 1 contributor in 0.84s
</pre></div>


<p>(It's just that I happened to have NPM already on my Macbook, instead of this Torinox.)</p>
<p>Result, a directory in a <code>node_modules</code> with 500+ JSON files:</p>
<div class="codehilite"><pre><span></span>tvinke@localhost ~/projects/medmij (master) $ tree node_modules/
node_modules/
└── nictiz.fhir.nl.stu3.zib2017
    ├── AanvullendeGebruiksinstructie-2.16.840.1.113883.2.4.3.11.60.20.77.11.9--20160407000000.json
    ├── AanvullendeWensenCodelijst-2.16.840.1.113883.2.4.3.11.60.40.2.9.10.1--20171231000000.json
    ...
    ├── zib-Vaccination.json
    ├── zib-VaccinationRecommendation-OrderStatus.json
    └── zib-VaccinationRecommendation.json

1 directory, 548 files
</pre></div>


<p><span aria-label="boom" class="emoji emoji-1f4a5" role="img" title="boom">:boom:</span> Using the <code>-ig node_modules/nictiz.fhir.nl.stu3.zib2017 -profile http://fhir.nl/fhir/StructureDefinition/nl-core-patient</code> parameter pointing to the directory does seem to process its files ( <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> ) but all kinds of errors about the files themselves it seems:</p>
<div class="codehilite"><pre><span></span>...
* load file: example-zib-NursingIntervention.json - ignored due to error: Unknown resource Procedure
* load file: medmij-bgz-fhir3-0-1-coverage-ts-02.json - ignored due to error: Unknown resource Coverage
  .. validate [Patient.json] against [http://fhir.nl/fhir/StructureDefinition/nl-core-patient]
Unable to generate snapshot for http://nictiz.nl/fhir/StructureDefinition/zib-InstructionsForUse: Error at path Dosage.dose[x]: Slice name must be &#39;doseQuantity&#39; but is &#39;DoseQuantity&#39;
Unable to generate snapshot for zib-AdministrationAgreement from MedicationDispense because Error at path Dosage.dose[x]: Slice name must be &#39;doseQuantity&#39; but is &#39;DoseQuantity&#39;
org.hl7.fhir.exceptions.FHIRException: Error at path Dosage.dose[x]: Slice name must be &#39;doseQuantity&#39; but is &#39;DoseQuantity&#39;
    at org.hl7.fhir.r5.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:867)
    at org.hl7.fhir.r5.conformance.ProfileUtilities.generateSnapshot(ProfileUtilities.java:472)
    at org.hl7.fhir.r5.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:700)
    at org.hl7.fhir.r5.conformance.ProfileUtilities.generateSnapshot(ProfileUtilities.java:472)
    at org.hl7.fhir.r5.context.SimpleWorkerContext.generateSnapshot(SimpleWorkerContext.java:616)
    at org.hl7.fhir.r5.context.SimpleWorkerContext.allStructures(SimpleWorkerContext.java:479)
    at org.hl7.fhir.r5.validation.ValidationEngine.prepare(ValidationEngine.java:1326)
    at org.hl7.fhir.r5.validation.Validator.main(Validator.java:652)
mismatch in paths: Observa...
...etc
</pre></div>


<p>So I gave up :-) <br>
<strong>What would be the correct way to validate a Dutch patient from the command-line?</strong></p>



<a name="186307980"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Validate%20MedMij%20BgZ%20resources%20e.g.%20NL%20Patient/near/186307980" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html#186307980">(Jan 22 2020 at 17:10)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="259573">@Ted Vinke</span>, I've tried validating with our Torinox command line tool - see <a href="https://simplifier.net/downloads/torinox" target="_blank" title="https://simplifier.net/downloads/torinox">https://simplifier.net/downloads/torinox</a>, and get a succes.  Torinox is a dotnet core tool, which makes it run cross platform. It uses the validator of the official .NET API for HL7 FHIR. After you have installed the tool, and assuming you have the patient data in a file called patient.json, these are the steps to take:</p>
<div class="codehilite"><pre><span></span>$ fhir install nictiz.fhir.nl.stu3.zib2017
$ fhir push patient.json
$ fhir validate
</pre></div>



<a name="186369100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Validate%20MedMij%20BgZ%20resources%20e.g.%20NL%20Patient/near/186369100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ted Vinke <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html#186369100">(Jan 23 2020 at 08:58)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191347">@Mirjam Baltus</span>, thank you!</p>
<p>I sure hope some user of the Java validator will still be able to give some feedback on its usage. Seems more light-weight and more easy to run validation on any of our development systems since Java has been installed everywhere by default. <span aria-label="blush" class="emoji emoji-1f60a" role="img" title="blush">:blush:</span> but I will give Torinox definitely a try. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>
<p>Do you perhaps know who created the Java validator so I can get in touch with the author?</p>



<a name="186381725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Validate%20MedMij%20BgZ%20resources%20e.g.%20NL%20Patient/near/186381725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html#186381725">(Jan 23 2020 at 12:07)</a>:</h4>
<p>I think Grahame and/or on of the HAPI guys.<br>
Anyhow. I noticed that passing the validation doesnot garantee a valid FHIR json. Especially with the StructureDefinitions and Extensions. I have not gotten my head around it yet.</p>



<a name="186467178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Validate%20MedMij%20BgZ%20resources%20e.g.%20NL%20Patient/near/186467178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html#186467178">(Jan 24 2020 at 06:37)</a>:</h4>
<p>I'm still reconciling with the dutch medmij definitions. There's some underlying issues that we haven't sorted yet. If you think that validator isn't checking something, please tell me about it</p>



<a name="186472264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Validate%20MedMij%20BgZ%20resources%20e.g.%20NL%20Patient/near/186472264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html#186472264">(Jan 24 2020 at 08:34)</a>:</h4>
<p>I will let you know the things I have found.</p>



<a name="186532042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Validate%20MedMij%20BgZ%20resources%20e.g.%20NL%20Patient/near/186532042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html#186532042">(Jan 24 2020 at 20:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191375">@Alexander Henket</span> I had a spare hour, so I looked at this again. The profile <a href="http://nictiz.nl/fhir/StructureDefinition/zib-BodyHeight" target="_blank" title="http://nictiz.nl/fhir/StructureDefinition/zib-BodyHeight">http://nictiz.nl/fhir/StructureDefinition/zib-BodyHeight</a> allows Group in it's target list, but it's a constraint on <a href="http://nictiz.nl/fhir/StructureDefinition/zib-VitalSigns" target="_blank" title="http://nictiz.nl/fhir/StructureDefinition/zib-VitalSigns">http://nictiz.nl/fhir/StructureDefinition/zib-VitalSigns</a> (via an intermediate step) which constrains observation.subject to <a href="http://fhir.nl/fhir/StructureDefinition/nl-core-patient" target="_blank" title="http://fhir.nl/fhir/StructureDefinition/nl-core-patient">http://fhir.nl/fhir/StructureDefinition/nl-core-patient</a>. This error happens quite a bit</p>



<a name="186661131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Validate%20MedMij%20BgZ%20resources%20e.g.%20NL%20Patient/near/186661131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html#186661131">(Jan 27 2020 at 08:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Interesting you should call this an error. I thought that it was still under debate how you would interpret that in a multi-type, only one of them is named in a differential with a targetProfile.</p>
<ul>
<li>You can use only this type with this targetProfile (or derived profile thereof). Other types are excluded</li>
<li>You must use this this type with this targetProfile (or derived profile thereof). Other types are not constrained.</li>
</ul>
<p>Is the word out that the former is the correct interpretation? It means you will always need to leave all types in the differential if you want to apply a targetProfile to one of them.</p>
<p>I've filed the issue here: <a href="https://bits.nictiz.nl/browse/MM-894" target="_blank" title="https://bits.nictiz.nl/browse/MM-894">https://bits.nictiz.nl/browse/MM-894</a> - we are releasing updates on a monthly basis as long as they are backward compatible.</p>



<a name="186662340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Validate%20MedMij%20BgZ%20resources%20e.g.%20NL%20Patient/near/186662340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html#186662340">(Jan 27 2020 at 08:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Side note: running the java validator on the command line still yields String index out of range: -1</p>
<div class="codehilite"><pre><span></span>$ java -jar org.hl7.fhir.validator.jar -ig &quot;../GitHub/Nictiz/Nictiz-STU3-Zib2017/Profiles - ZIB 2017&quot; -version 3.0 -recurse -debug STU3-Java/instances/medmij-bgz-fhir3-0-1-labresult-ts-01.xml

FHIR Validation tool Version 4.1.53-SNAPSHOT (Git# ee6e0d90de9b). Built 2020-01-24T17:20:43.54+11:00 (3 days old)
Detected Java version: 1.8.0_121 from /Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home/jre on x86_64 (64bit). 3641MB available
Arguments: -ig &quot;../GitHub/Nictiz/Nictiz-STU3-Zib2017/Profiles - ZIB 2017&quot; -version 3.0 -recurse -debug STU3-Java/instances/medmij-bgz-fhir3-0-1-labresult-ts-01.xml
Directories: Current = /Users/ahenket/Development/FHIR, Package Cache = /Users/ahenket/.fhir/packages
  .. FHIR Version 3.0, definitions from hl7.fhir.r3.core#3.0.2
  .. connect to tx server @ http://tx.fhir.org
    (v3.0.2)
+  .. load IG from ../GitHub/Nictiz/Nictiz-STU3-Zib2017/Profiles - ZIB 2017
Exception in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.String.substring(String.java:1967)
    at org.hl7.fhir.utilities.Utilities.path(Utilities.java:584)
    at org.hl7.fhir.r5.validation.ValidationEngine.loadIgSource(ValidationEngine.java:504)
    at org.hl7.fhir.r5.validation.ValidationEngine.loadIg(ValidationEngine.java:789)
    at org.hl7.fhir.r5.validation.Validator.main(Validator.java:572)
</pre></div>


<p>While running it in Eclipse yields results albeit that I don't understand them. Why does the latest generator give me 50-60 errors like this:</p>
<div class="codehilite"><pre><span></span>Unable to generate snapshot for zib-MedicationAgreement from MedicationRequest because Profile Zib MedicationAgreement (http://nictiz.nl/fhir/StructureDefinition/zib-MedicationAgreement). Error generating snapshot: Duplicate Element id MedicationRequest.extension:additionalInformation.value[x]:valueCodeableConcept
org.hl7.fhir.exceptions.DefinitionException: Profile Zib MedicationAgreement (http://nictiz.nl/fhir/StructureDefinition/zib-MedicationAgreement). Error generating snapshot: Duplicate Element id MedicationRequest.extension:additionalInformation.value[x]:valueCodeableConcept
    at org.hl7.fhir.r5.context.SimpleWorkerContext.generateSnapshot(SimpleWorkerContext.java:619)
    at org.hl7.fhir.r5.context.SimpleWorkerContext.allStructures(SimpleWorkerContext.java:479)
    at org.hl7.fhir.r5.validation.ValidationEngine.prepare(ValidationEngine.java:1326)
    at org.hl7.fhir.r5.validation.Validator.main(Validator.java:652)
</pre></div>


<p>This one above appears to concern a quite common thing we do which is to apply a binding to an extension in the calling profile instead of the extension itself.</p>



<a name="186664729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Validate%20MedMij%20BgZ%20resources%20e.g.%20NL%20Patient/near/186664729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html#186664729">(Jan 27 2020 at 09:22)</a>:</h4>
<p>I'm still working through the errors as I have time. I don't know what's going on with that one yet.</p>



<a name="186664802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179181-netherlands/topic/Validate%20MedMij%20BgZ%20resources%20e.g.%20NL%20Patient/near/186664802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179181-netherlands/topic/Validate.20MedMij.20BgZ.20resources.20e.2Eg.2E.20NL.20Patient.html#186664802">(Jan 27 2020 at 09:23)</a>:</h4>
<p>The definition for targetProfile says: </p>
<blockquote>
<p>If any profiles are specified, then the content must conform to at least one of them</p>
</blockquote>
<p>which means that this interpretation applies:</p>
<blockquote>
<p>You can use only this type with this targetProfile (or derived profile thereof). Other types are excluded</p>
</blockquote>
<p>And it must, really, else you can't exclude the other types</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
