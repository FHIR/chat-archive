---
layout: page
title: "FHIR Chat  · hexadecimal data · V2"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/229447-V2/index.html">V2</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/hexadecimal.20data.html">hexadecimal data</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="228294938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/229447-V2/topic/hexadecimal%20data/near/228294938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Aitchison <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/hexadecimal.20data.html#228294938">(Mar 01 2021 at 19:51)</a>:</h4>
<p>depending on where one looks escaping of 2 specific hexadecimal characters is done differently.<br>
the 2 I am referring to are line feeds <code>\n</code> or <code>\X0A\</code> or <code>\X00A\</code> in hexadecimal and carriage return <code>\r</code> or <code>\X0D\</code> or <code>\X00D\</code> or <code>\X000d\</code>.<br>
what is the correct way to decode/encode these characters?<br>
<a href="https://github.com/Efferent-Health/HL7-dotnetcore/blob/9ca6f4b907960e062f35163283708ff2b6ceb1a7/src/Encoding.cs#L94">https://github.com/Efferent-Health/HL7-dotnetcore/blob/9ca6f4b907960e062f35163283708ff2b6ceb1a7/src/Encoding.cs#L94</a> uses <code>\X00D\</code> but  <a href="https://github.com/hapifhir/hapi-hl7v2/blob/efca803e58aea1705ba6b28390ad24c4c3b1d3cb/hapi-base/src/main/java/ca/uhn/hl7v2/parser/DefaultEscaping.java#L286">https://github.com/hapifhir/hapi-hl7v2/blob/efca803e58aea1705ba6b28390ad24c4c3b1d3cb/hapi-base/src/main/java/ca/uhn/hl7v2/parser/DefaultEscaping.java#L286</a> uses <code>\X000d\</code> and InterSystems (who make the ensemble integration engine) recommend <code>\X0D\</code> <a href="https://docs.intersystems.com/latest/csp/docbook/Doc.View.cls?KEY=EHL72_escape_sequences">https://docs.intersystems.com/latest/csp/docbook/Doc.View.cls?KEY=EHL72_escape_sequences</a>.</p>



<a name="228312349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/229447-V2/topic/hexadecimal%20data/near/228312349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Newman <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/hexadecimal.20data.html#228312349">(Mar 01 2021 at 21:50)</a>:</h4>
<p>Per <span class="user-mention" data-user-id="191749">@Anthony(Tony) Julian</span> from the InM Work Group:<br>
When exploring the escape sequences it is best to go to the source:  Chapter 2.  </p>
<p>2.7.6   Hexadecimal<br>
When the hexadecimal escape sequence (\Xdddd...\) is used the X SHALL be followed by 1 or more pairs of hexadecimal digits (0, 1,  . . . , 9, A,  . . . , F). Consecutive pairs of the hexadecimal digits represent 8-bit binary values. The interpretation of the data is entirely left to an agreement between the sending and receiving applications that is beyond the scope of this Standard.</p>
<p>\Xdddd\  the X shall be followed by 1 or more pairs of hexadecimal digits.  Which means \X0a\ is legal, as is \X000a\.  The last sentence is there because the implementation changes based on the character set(s) used as well as the contract between the trading partners.</p>



<a name="228353591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/229447-V2/topic/hexadecimal%20data/near/228353591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/hexadecimal.20data.html#228353591">(Mar 02 2021 at 04:55)</a>:</h4>
<p>The quote from chapter 2 is</p>
<blockquote>
<p>When the hexadecimal escape sequence (\Xdddd...\) is used the X SHALL be followed by 1 or more<br>
pairs of hexadecimal digits (0, 1, . . . , 9, A, . . . , F). Consecutive pairs of the hexadecimal digits<br>
represent 8-bit binary values. The interpretation of the data is entirely left to an agreement between the<br>
sending and receiving applications that is beyond the scope of this Standard.</p>
</blockquote>
<p>This means that the sequence \X000A\ is valid, but that represents a sequence of two bytes (aka octets). Unless there is a predefined agreement for the use of UTF-16 as the character encoding, line feed and carriage return are single byte values, and \X0A\ and \X0D\ are the hexadecimal representations of these characters. </p>
<p>Note that HL7 V2 has only described the use of  UTF-8 Unicode encodings, so a theoretical use of UTF-16 or UTF-32 is probably non-compliant. See the definition of MSH-18 (section 2.14.9.18) and table 0211.</p>



<a name="228355314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/229447-V2/topic/hexadecimal%20data/near/228355314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/hexadecimal.20data.html#228355314">(Mar 02 2021 at 05:19)</a>:</h4>
<p>I'm not sure that this is correct. I think that defaulting to UTF-8 is a reasonable, but there's lots of messages out there that don't use UTF-8 - they are using some kind of old OEM character set when using \X</p>



<a name="228358712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/229447-V2/topic/hexadecimal%20data/near/228358712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Oemig <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/hexadecimal.20data.html#228358712">(Mar 02 2021 at 06:07)</a>:</h4>
<p>Originally we have had 7bit Ascii only. But a lot used 8bit or iso8859.<br>
We examined the use of Unicode which is also ok, but only as UTF-8 because it is sufficient and compatible. It is documented in the old wiki I believe to remember.</p>



<a name="228365660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/229447-V2/topic/hexadecimal%20data/near/228365660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Aitchison <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/hexadecimal.20data.html#228365660">(Mar 02 2021 at 07:30)</a>:</h4>
<p>Thanks so much guys for these replies, so would you recommend <code>\X0D\</code> and <code>\X0A\</code> respectively?</p>



<a name="228403896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/229447-V2/topic/hexadecimal%20data/near/228403896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/hexadecimal.20data.html#228403896">(Mar 02 2021 at 12:50)</a>:</h4>
<p>I was making the distinction between UTF-8 and other Unicode encodings. Other non-Unicode encodings are allowed, as per table 0211, but for all of them, as far as I can tell, \n and \r are single byte values, and their hexadecimal representations are \X0A\ and \X0D\</p>



<a name="228469072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/229447-V2/topic/hexadecimal%20data/near/228469072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/hexadecimal.20data.html#228469072">(Mar 02 2021 at 19:21)</a>:</h4>
<p>By the way, if the field is formatted text (FT, which I suspect it is, if you are encoding line breaks in it) you may be able to avoid any encoding of newline or return, by using the <code>\.br\</code> formatting command.</p>



<a name="228481740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/229447-V2/topic/hexadecimal%20data/near/228481740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Oemig <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/hexadecimal.20data.html#228481740">(Mar 02 2021 at 20:40)</a>:</h4>
<p><span class="user-mention" data-user-id="192685">@Vassil Peytchev</span> : AFAIR, UTF-16 and UTF-32 is not allowed, because you cannot parse the MSH segment. And since they are equivalent it is not necessary to use those.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
