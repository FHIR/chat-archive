---
layout: page
title: "FHIR Chat  · HAPI Default Validator · V2"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/229447-V2/index.html">V2</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/HAPI.20Default.20Validator.html">HAPI Default Validator</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="193054251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/229447-V2/topic/HAPI%20Default%20Validator/near/193054251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya Joshi <a href="https://fhir.github.io/chat-archive/stream/229447-V2/topic/HAPI.20Default.20Validator.html#193054251">(Apr 06 2020 at 14:57)</a>:</h4>
<p>HAPI V2 Default validator question. Hi <span class="user-mention" data-user-id="191319">@James Agnew</span>  Any help would be great. thanks. <br>
one quick question regarding capability of HAPI V2 Default validator.  In below code, there are many errors in message but default validator is not picking up anyone of them. <br>
What all we can validate with default validator?<br>
The below code is picked up from- <a href="https://hapifhir.github.io/hapi-hl7v2/xref/ca/uhn/hl7v2/examples/MessageValidation.html" title="https://hapifhir.github.io/hapi-hl7v2/xref/ca/uhn/hl7v2/examples/MessageValidation.html">https://hapifhir.github.io/hapi-hl7v2/xref/ca/uhn/hl7v2/examples/MessageValidation.html</a><br>
just added my own message.</p>
<p>import ca.uhn.hl7v2.DefaultHapiContext;<br>
import ca.uhn.hl7v2.HL7Exception;<br>
import ca.uhn.hl7v2.HapiContext;<br>
import ca.uhn.hl7v2.parser.PipeParser;<br>
import ca.uhn.hl7v2.validation.impl.ValidationContextFactory;</p>
<p>public class MessageValidation {</p>
<div class="codehilite"><pre><span></span>/**
 * @param args
 * @throws HL7Exception
 * @throws              ca.uhn.hl7v2.parser.EncodingNotSupportedException
 */
public static void main(String[] args) throws HL7Exception {


    HapiContext context = new DefaultHapiContext();

    /*
     * The default validation includes a number of sensible defaults including maximum lengths
     * on string types, formats for telephone numbers and timestamps, etc.
     */
    context.setValidationContext(ValidationContextFactory.defaultValidation());

    PipeParser parser = context.getPipeParser();

    /*
     * Errors in below invalidMessage1:
     * a. PID-3 is required but missing
     * b. ORC-1 field must have max two characters code and that too coming from HL7 table 0119. it must not have any components
     * c. OBR-4 is required but missing
     * d. OBX-2 having NM^ST as value. The data type of this field is ID and not allow to have components
     * With all above issues, validator is still parsing the message successfully.
     */

    String invalidMessage= &quot;MSH|^~\\&amp;|Echosens.GateWay||||202002061359||ORU^R01|1234|D|2.3\r\n&quot;
    +&quot;PID|1|CPHC0011||789987|Deo^Sachin||20150319|male||\r\n&quot;
    +&quot;ORC|XYZ^abc|||||||||||||||||||\r\n&quot;
    +&quot;OBR|||||||202002061359|||||||||||||||202002061359|||||\r\n&quot;
    +&quot;OBX||NM^ST|81894-8^CAP||180|dB/m|100-260|||N|F|||20200206185936|BN\r\n&quot;
    +&quot;OBX||NM|77615-3^E||5.4|kPa|||||F|||20200206185936|BN\r\n&quot;;

    // Let&#39;s try parsing the invalid message:
    try {
        parser.parse(invalidMessage);
        System.out.println(&quot;Successfully parsed valid message&quot;);
    } catch (HL7Exception e) {
        // This time, we are expecting an exception, because the message
        // should fail validation.
        System.out.println(&quot;As expected, the message did not validate: &quot; + e.getMessage());

    }
}
</pre></div>


<p>}</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
