---
layout: page
title: "FHIR Chat  · Instant ohne Zeitzone · german (d-a-ch)"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/index.html">german (d-a-ch)</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html">Instant ohne Zeitzone</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="158116110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158116110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Markus Danz <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158116110">(Feb 12 2019 at 13:14)</a>:</h4>
<p>Laut STU3 datatypes ist ein <code>Instant</code> eine vollständige Datumsangabe inklusive Zeit und Zeitzone.</p>
<div class="codehilite"><pre><span></span>An instant in time - known at least to the second and always includes a time zone. Note: This is intended for precisely observed times (typically system logs etc.), and not human-reported times - for them, use date and dateTime. instant is a more constrained dateTime
</pre></div>


<p>Wenn ich jetzt z.B. eine DocumentReference, wo das Element "indexed" vom Typ "Instant" ist, gegen das HL7 Basisprofil "DocumentReference" mit Hilfe von FHIR.NET einlese und validiere, dann werden fehlende Zeitzonen durch die local timezone ersetzt, z.B. "+01:00". Dadurch ist es unmöglich, eine fehlende Zeitzone zu erkennen und entsprechend zu reagieren.</p>
<p>Im sorce code sieht man, dass FHIR.NET in der Datei ".Hl7.Fhir.Core\Model\Instant.cs" die .NET Methoden <code>DateTimeOffset.TryParse()</code> und <code>DateTimeOffset.Now</code>verwendet. Das ist nicht restriktiv genug, um der FHIR Spezifikation zu genügen.</p>
<p>Lustigerweise macht simplifier etwas ähnliches. Wenn die Zeitzone fehlt, dann wird einfach +00:00 als Zeitzone angenommen und der String verändert. Hier ein Beispiel: <a href="https://simplifier.net/justforfun/documentreference-example" target="_blank" title="https://simplifier.net/justforfun/documentreference-example">https://simplifier.net/justforfun/documentreference-example</a><br>
Hochgeladen wurde der String "2005-12-24T09:43:41" und nach dem hochladen steht "2005-12-24T09:43:41+00:00" drin.</p>
<p>Frage: Darf für invalide Zeit-Strings für den Typ Instant die Zeitzone einfach generiert werden? Das erscheint uns falsch.</p>



<a name="158374730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158374730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158374730">(Feb 12 2019 at 18:23)</a>:</h4>
<p>Es ist zumindest ein pragmatischer Ansatz, aber meines Wissens so nicht in der FHIR-Spec. zu finden und sicher diskussionswürdig.<br>
Dass Simplifier sich ähnlich verhält, ist klar - Simplifier benutzt die Dotnet-Library.</p>
<p>Wäre sicher ein Thema für den implementers-Stream.<br>
Evtl. weiß auch <span class="user-mention" data-user-id="193430">@Alexander Zautke</span> mehr?</p>



<a name="158375742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158375742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158375742">(Feb 12 2019 at 18:35)</a>:</h4>
<p>Das “gewünschte” Result wäre dann, dass die Resource nicht akzeptiert wird und der Parser einen Fehler schmeißt, verstehe ich das so richtig?</p>



<a name="158379562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158379562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158379562">(Feb 12 2019 at 19:23)</a>:</h4>
<p>Nicht der Parser - der validator. Oder? Keine Ahnung, wie das die angesprochene Library hält, aber im allgemeinen gibt es validierende und nicht-validierende Parser (option "strict", oder sowas ähnliches meistens).</p>



<a name="158379948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158379948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158379948">(Feb 12 2019 at 19:28)</a>:</h4>
<p>Netter topic zu ähnlichen Fragen: <a href="#narrow/stream/179166-implementers/topic/Client.20Timezone" title="#narrow/stream/179166-implementers/topic/Client.20Timezone">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Client.20Timezone</a></p>
<ul>
<li>mit der interessanten Idee, dass der Client dem Server seinen Zeit-Offset im HTTP header mitteilt. Der "nicht-validierende" Parser dürfte das u.U. verwenden - der "validierende" jedoch nicht, IMHO. Siehe hier: <a href="https://tools.ietf.org/html/draft-sharhalakis-httptz-05" target="_blank" title="https://tools.ietf.org/html/draft-sharhalakis-httptz-05">https://tools.ietf.org/html/draft-sharhalakis-httptz-05</a></li>
</ul>



<a name="158425040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158425040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158425040">(Feb 13 2019 at 09:24)</a>:</h4>
<p>Habe das Thema intern an das API Team weitergegeben, wir schauen uns den Fall an. Sobald ich eine Ticket Nummer dazu hab, reiche ich diese nach. Ich denke der Validator sollte es klar zurückweisen. Unschlüssig bin ich beim Parser. Ich stimme Christof zu, dass sein Setting in diesem Fall hilfreich wäre.</p>



<a name="158425050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158425050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158425050">(Feb 13 2019 at 09:25)</a>:</h4>
<p>Danke fürs Melden :)</p>



<a name="158430526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158430526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158430526">(Feb 13 2019 at 10:50)</a>:</h4>
<p>Ich denke, per Default sollte der Parser sich standardkonform verhalten. Dass es dann einen "lazy"- oder "non-strict"-Parameter gibt, mit dem man solche Heuristiken einschalten kann, mag wie gesagt sicher in bestimmten Use Cases pragmatisch sein.</p>



<a name="158433158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158433158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158433158">(Feb 13 2019 at 11:40)</a>:</h4>
<p>Validation Bug: <a href="https://github.com/ewoutkramer/fhir-net-api/issues/865" target="_blank" title="https://github.com/ewoutkramer/fhir-net-api/issues/865">https://github.com/ewoutkramer/fhir-net-api/issues/865</a></p>



<a name="158433462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158433462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158433462">(Feb 13 2019 at 11:44)</a>:</h4>
<p>Für den Parser wird es kein Setting geben, da wir auf dieser Ebene keine genaueren Typinformationen haben (instance vs. dateTime vs. date). Per default wird der String zu einem DateTimeOffset umgewandelt und UTC wird angenommen.</p>



<a name="158433493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158433493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158433493">(Feb 13 2019 at 11:45)</a>:</h4>
<p>Diese Regel gilt für alle DateTimeOffset Datentypen.</p>



<a name="158460979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158460979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Markus Danz <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158460979">(Feb 13 2019 at 17:45)</a>:</h4>
<p>Uns als Konsument der FHIR.NET Library ist es egal, ob der Parser oder der Validator den Fehler ekennt. Wichtig ist, dass wir irgendeine Möglichkeit haben, eine fehlende Zeitzone beim Datentyp Instant zu erkennen, wenn die FHIR.NET zum Einlesen einer Resource verwendet wird.</p>



<a name="158463224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158463224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158463224">(Feb 13 2019 at 18:13)</a>:</h4>
<p>schematron validation filter?</p>



<a name="158736568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158736568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158736568">(Feb 17 2019 at 09:43)</a>:</h4>
<p>Das könnte Zusammenhängen mit einem Fehler im RegEx Pattern für dateTime in STU3. In R4 wurde das korrigiert. In STU3 wird die Korrektur mit den Technical Corrections publiziert.</p>



<a name="158743463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158743463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158743463">(Feb 17 2019 at 13:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191450">@Simone Heckmann</span> Meinst du damit, dass in STU3 instant überhaupt keinen Regex zum Validieren besitzt? Hat jemand das schon vorgeschlagen für ein Backport?</p>



<a name="158743516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158743516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158743516">(Feb 17 2019 at 13:23)</a>:</h4>
<p>Schau mal im implementers Stream, da gibt aktuell eine Diskussion zum dateTime pattern. Ich kann’s leider nicht verlinken, da ich die mobile App benutze...</p>



<a name="158744298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158744298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158744298">(Feb 17 2019 at 13:48)</a>:</h4>
<p>Ah, ok. Vielen Dank. Das löst aber nicht das Problem hier. Weiß jemand gegen was HAPI in diesem Fall bei einem Instant Type validiert? <span class="user-mention" data-user-id="191451">@Patrick Werner</span></p>



<a name="158748571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158748571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158748571">(Feb 17 2019 at 16:03)</a>:</h4>
<p>Hapi hat im Dstu3 Instant Validator die Regex von R4 verwendet, wurde hier also anscheinend schon gebackportet</p>



<a name="158748630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/158748630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#158748630">(Feb 17 2019 at 16:05)</a>:</h4>
<p>was mich irritiert: hapi beginnt die Regex mit "-?" ansonsten alles gleich. Wie sollte eine Instant mit "-" beginnen? Übersehe ich da nun was?<br>
(edit:) nein, ist wohl falsch und kommt aus den Referenz Klassen.</p>



<a name="169896083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/Instant%20ohne%20Zeitzone/near/169896083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/Instant.20ohne.20Zeitzone.html#169896083">(Jul 08 2019 at 19:09)</a>:</h4>
<p>Es ist zwar schon eine kleine Weile her, aber die C# API hat nun auch den R4 Regex implementiert. Gforge Ticket für den Backport in STU3 inklusive.<br>
Siehe <a href="https://github.com/FirelyTeam/fhir-net-api/pull/1028" target="_blank" title="https://github.com/FirelyTeam/fhir-net-api/pull/1028">https://github.com/FirelyTeam/fhir-net-api/pull/1028</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
