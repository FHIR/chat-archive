---
layout: page
title: "FHIR Chat  · [Questionnaire] AnswerValueSet wird nicht erkannt. · german (d-a-ch)"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/index.html">german (d-a-ch)</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/.5BQuestionnaire.5D.20AnswerValueSet.20wird.20nicht.20erkannt.2E.html">[Questionnaire] AnswerValueSet wird nicht erkannt.</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="225302942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/%5BQuestionnaire%5D%20AnswerValueSet%20wird%20nicht%20erkannt./near/225302942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Nau <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/.5BQuestionnaire.5D.20AnswerValueSet.20wird.20nicht.20erkannt.2E.html#225302942">(Feb 05 2021 at 14:14)</a>:</h4>
<p>Hallo,<br>
ich habe ein Questionnaire mit einem <code>choice </code> Feld. Außerdem habe ich ein <code>answerValueSet</code> angegeben welches die URL eines selbst definierten Value-Sets enthält.<br>
Bei der <code>QuestioinnaireResponse</code> gebe ich für das Feld als <code>answer</code> ein <code>valueCoding</code> an.<br>
Als <code>system</code> habe ich die URL des benutzerdefinierten Code-Systems hinterlegt, welches als Basis für das Value-Set dient.</p>
<p>Beim validieren der QuestionnaireResponse erhalte ich jedoch den <code>error</code> "The value provided (<a href="https://my.custom.url/CodeSystem/aaa::CODE1">https://my.custom.url/CodeSystem/aaa::CODE1</a>) is not in the options value set in the questionnaire."</p>
<p>Woran könnte das liegen?<br>
VG, Christian</p>



<a name="225322640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/%5BQuestionnaire%5D%20AnswerValueSet%20wird%20nicht%20erkannt./near/225322640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/.5BQuestionnaire.5D.20AnswerValueSet.20wird.20nicht.20erkannt.2E.html#225322640">(Feb 05 2021 at 16:38)</a>:</h4>
<p>Kannst du mal den Snippet aus deinem Q /QR posten? Hast du die ValueSet Ressource erstellt und hat dein Validator Zugriff darauf? Ist die VS-Ressource valide?</p>



<a name="225462751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/%5BQuestionnaire%5D%20AnswerValueSet%20wird%20nicht%20erkannt./near/225462751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/.5BQuestionnaire.5D.20AnswerValueSet.20wird.20nicht.20erkannt.2E.html#225462751">(Feb 07 2021 at 12:51)</a>:</h4>
<p>Ich vermute auch ein fehlendes VS im Validator.</p>



<a name="226021413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/%5BQuestionnaire%5D%20AnswerValueSet%20wird%20nicht%20erkannt./near/226021413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/.5BQuestionnaire.5D.20AnswerValueSet.20wird.20nicht.20erkannt.2E.html#226021413">(Feb 11 2021 at 16:51)</a>:</h4>
<p>Ich habe seit langem immer wieder dieses Problem (oder was ähnliches) gehabt und habe jetzt ein Minimalbeispiel gemacht (Dateien sind angehängt). Es scheint, dass man diesen Fehler hervorrufen kann, in dem man</p>
<ol>
<li>eine eigene VS benutzt</li>
<li>diese VS an mehrere Fragen als Antwort-VS bindet, und</li>
<li>eine QuestionnaireResponse validiert, in der <em>mehrere verschiedene Codes</em> vom VS als Antwort vorkommt (!)</li>
</ol>
<p>Im Beispiel unten gibt es zwei Fragen, beiden mit der gleichen Antwort- VS (zwei LOINC-Codes). Wenn ich das QuestionnaireResponse  mit dem neusten Validator dagegen R4-validiere (mit der VS in den gleichen Ordner wie das Questionnaire), kriege ich diesen (falschen) Fehler:</p>
<div class="codehilite"><pre><span></span><code>*FAILURE*: 1 errors, 0 warnings, 0 notes
  Error @ QuestionnaireResponse.item[0].answer[0] (line 10, col68) : The value provided (http://loinc.org::LA32-8) is not in the options value set in the questionnaire
</code></pre></div>
<p>Wenn ich die QuestionnaireResponse so ändere, dass der <em>gleiche</em> Code (egal welcher) zweimal als Antwort vorkommt, kommt keinen Fehler. Wäre ein recht komischer Bug, also Frage ich mich, ob ich was offensichtliches übersehe...?</p>
<ul>
<li><a href="/user_uploads/10155/16kcGI4O2P-9bfTbz7w07LXO/qr.questionnaireresponse.json">qr.questionnaireresponse.json</a></li>
<li><a href="/user_uploads/10155/KADmBOYBTuEYjQt4z0SCoSoH/yesno.ValueSet.json">yesno.ValueSet.json</a> </li>
<li><a href="/user_uploads/10155/B_8xPzr9E3_2cfqDnGKEA5XQ/q.questionnaire.json">q.questionnaire.json</a></li>
</ul>



<a name="226361206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/%5BQuestionnaire%5D%20AnswerValueSet%20wird%20nicht%20erkannt./near/226361206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Nau <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/.5BQuestionnaire.5D.20AnswerValueSet.20wird.20nicht.20erkannt.2E.html#226361206">(Feb 15 2021 at 09:32)</a>:</h4>
<p>Hm! Das würde erklären, warum in seltenen Fällen die Validierung bei mir funktioniert hat, nämlich genau dann, wenn die Antworten zufällig alle den gleichen Code hatten.</p>
<p>Allerdings erhalte ich den Fehler auch bei Questionnaires mit nur einer coded Frage.</p>



<a name="226361794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/%5BQuestionnaire%5D%20AnswerValueSet%20wird%20nicht%20erkannt./near/226361794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Nau <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/.5BQuestionnaire.5D.20AnswerValueSet.20wird.20nicht.20erkannt.2E.html#226361794">(Feb 15 2021 at 09:38)</a>:</h4>
<p>Was vielleicht noch relevant ist: Mein selbst erstelltes ValueSet zeigt auf eine ebenfalls selbst erstelltes Code-System.</p>



<a name="226369113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/%5BQuestionnaire%5D%20AnswerValueSet%20wird%20nicht%20erkannt./near/226369113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/.5BQuestionnaire.5D.20AnswerValueSet.20wird.20nicht.20erkannt.2E.html#226369113">(Feb 15 2021 at 10:52)</a>:</h4>
<blockquote>
<p>Allerdings erhalte ich den Fehler auch bei Questionnaires mit nur einer coded Frage.</p>
</blockquote>
<p>Hm, interessant! - ich konnte es leider nicht auf die Schnelle mit meinem Minimalbeispiel reproduzieren. Ich denke, ich werde das Problem &amp; mein Beispiel in <a class="stream" data-stream-id="179239" href="/#narrow/stream/179239-tooling">#tooling</a> in die internationale Runde werfen und hier verlinken, vielleicht koenntest Du da Deine Variante schildern?</p>



<a name="226369532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/%5BQuestionnaire%5D%20AnswerValueSet%20wird%20nicht%20erkannt./near/226369532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Nau <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/.5BQuestionnaire.5D.20AnswerValueSet.20wird.20nicht.20erkannt.2E.html#226369532">(Feb 15 2021 at 10:56)</a>:</h4>
<p>Klar!</p>



<a name="226372061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179183-german%20%28d-a-ch%29/topic/%5BQuestionnaire%5D%20AnswerValueSet%20wird%20nicht%20erkannt./near/226372061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179183-german-(d-a-ch)/topic/.5BQuestionnaire.5D.20AnswerValueSet.20wird.20nicht.20erkannt.2E.html#226372061">(Feb 15 2021 at 11:27)</a>:</h4>
<p><a class="stream" data-stream-id="179239" href="/#narrow/stream/179239-tooling">#tooling</a> - thread : <a href="#narrow/stream/179239-tooling/topic/False.20JAR.20validator.20errors.20for.20certain.20questionnaire.20answers/near/226372015">https://chat.fhir.org/#narrow/stream/179239-tooling/topic/False.20JAR.20validator.20errors.20for.20certain.20questionnaire.20answers/near/226372015</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
