---
layout: page
title: "FHIR Chat  · Create Order on FHIR server - ResourceReference · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Create.20Order.20on.20FHIR.20server.20-.20ResourceReference.html">Create Order on FHIR server - ResourceReference</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153903440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Create%20Order%20on%20FHIR%20server%20-%20ResourceReference/near/153903440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santosh Jami <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Create.20Order.20on.20FHIR.20server.20-.20ResourceReference.html#153903440">(Aug 24 2017 at 00:32)</a>:</h4>
<p>Hi guys,</p>
<p>I am trying to place an Order into the Spark FHIR Server.<br>
My input is OrderDTO which has a structure like this:<br>
{<br>
     "PatientID" : "WD046960A",<br>
     "LabDetailsDTO" : {<br>
        "LabToken" : "Quest",<br>
        "LabFacility" : "MET"<br>
     },</p>
<div class="codehilite"><pre><span></span>&quot;OrderingProvider&quot; : {
   &quot;NPI&quot; : &quot;2341345025&quot;,
   &quot;FirstName&quot; : &quot;OPFirstName&quot;,
   &quot;LastName&quot; : &quot;OPLastName&quot;,
   &quot;Address&quot; : null,
   &quot;HomePhoneNoDelimiters&quot; : &quot;435-342-1543&quot;
},

&quot;LabOrders&quot; : [
   &quot;HEPC&quot;,
   &quot;HIV&quot;
]
</pre></div>


<p>}</p>
<p>I see the Order Subject / Source / Target  - all of them are ResourceReference data types.<br>
I have the patients in DB, so I am able to form the ResourceReference for the Patient.<br>
I don't have the Ordering Provider in the DB, how should I handle adding the Ordering Provider to the Order object?</p>
<p>var fhirOrder = new Order();<br>
 //get the patient resource from DB<br>
 var q = new SearchParams().Add("identifier", orderDTO.SafeEMRId).OrderBy("_lastUpdated", SortOrder.Descending);<br>
 var patientSearchEntry = fhirClient.Search&lt;Patient&gt;(q).Entry.Single();<br>
 fhirOrder.Subject = new ResourceReference { Reference = string.Format("Patient/{0}", patientSearchEntry.Resource.Id) };<br>
 fhirOrder.Source = new ResourceReference { }; //??How to add the Ordering provider?</p>
<p>return fhirOrder;</p>
<p>Should I create an entry of Ordering Provider in DB and add a reference to it as I did for the subject?<br>
Any help is greatly appreciated.</p>
<p>Thanks<br>
Santosh Jami</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
