---
layout: page
title: "FHIR Chat  · RegEx URLs · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/RegEx.20URLs.html">RegEx URLs</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153973809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/RegEx%20URLs/near/153973809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Lloyd <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/RegEx.20URLs.html#153973809">(Jul 05 2018 at 16:35)</a>:</h4>
<p>Hi,</p>
<p>Looking at the RESTURI_PATTERN in the following file I'm wondering if it is correct as there seems to be a space after the http (&amp; before the https) and the http:// - / chars are not escaped \/.</p>
<p><a href="https://github.com/ewoutkramer/fhir-net-api/blob/9c5f262cbab8200f0e82fffe3f0949a6e7120bc8/src/Hl7.Fhir.Core/Rest/HttpUtil.cs" target="_blank" title="https://github.com/ewoutkramer/fhir-net-api/blob/9c5f262cbab8200f0e82fffe3f0949a6e7120bc8/src/Hl7.Fhir.Core/Rest/HttpUtil.cs">https://github.com/ewoutkramer/fhir-net-api/blob/9c5f262cbab8200f0e82fffe3f0949a6e7120bc8/src/Hl7.Fhir.Core/Rest/HttpUtil.cs</a></p>
<p>As I was trying to use the WebResolver I think it is failing at the URL IsRestResourceIdentity conformance check. I've checked this by playing around with the generated regex value in an online tester and noticed those errors. Does this look correct?</p>
<p>Thanks,<br>
Stephen</p>



<a name="153973972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/RegEx%20URLs/near/153973972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/RegEx.20URLs.html#153973972">(Jul 06 2018 at 07:48)</a>:</h4>
<p>I use the WebResolver against <a href="https://fhir.nhs.uk/" target="_blank" title="https://fhir.nhs.uk/">https://fhir.nhs.uk/</a> and <a href="https://fhir.hl7.org.uk/" target="_blank" title="https://fhir.hl7.org.uk/">https://fhir.hl7.org.uk/</a> and it works OK for me. What is the URL that you are attempting to use?</p>



<a name="153973975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/RegEx%20URLs/near/153973975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Lloyd <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/RegEx.20URLs.html#153973975">(Jul 06 2018 at 08:52)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191362">@Richard Kavanagh</span> <br>
I'm trying to use <a href="http://purl.org/elab/StructureDefinition/ProjectIdentifer" target="_blank" title="http://purl.org/elab/StructureDefinition/ProjectIdentifer">http://purl.org/elab/StructureDefinition/ProjectIdentifer</a> as an extension on our endpoint (local install of Vonk atm), the client connects but the use of a webresolver always returns nothing. Even if I use <br>
  resolver.AddSource(new WebResolver(id =&gt; new Hl7.Fhir.Rest.FhirClient("<a href="http://localhost:4080/administration" target="_blank" title="http://localhost:4080/administration">http://localhost:4080/administration</a>")));<br>
   var temp = resolver.ResolveByUri("<a href="http://purl.org/elab/StructureDefinition/ProjectIdentifer" target="_blank" title="http://purl.org/elab/StructureDefinition/ProjectIdentifer">http://purl.org/elab/StructureDefinition/ProjectIdentifer</a>");<br>
it returns null (even ResolveByCanonicalUrl) when using either baseUrl or the admin  endpoints in Vonk. When checking through the code in github I did notice the regex check and thought I'd manually test it to see if that was what was stopping resolution of the extension.</p>



<a name="153973994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/RegEx%20URLs/near/153973994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Lloyd <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/RegEx.20URLs.html#153973994">(Jul 06 2018 at 10:37)</a>:</h4>
<p>It does look like it works if I use a standard WebResolver and not one with a supplied FhirClient at the moment. Using the NHS profile to test </p>
<div class="codehilite"><pre><span></span>  WebResolver resolver = new WebResolver(/*id =&gt; new Hl7.Fhir.Rest.FhirClient(&quot;https://fhir.nhs.uk/&quot;)*/);
   var temp = resolver.ResolveByUri(&quot;https://fhir.nhs.uk/STU3/StructureDefinition/Extension-CareConnect-GPC-AllergyIntoleranceEnd-1&quot;);
</pre></div>


<p>it works, but if I specify the FhirClient it does not.</p>



<a name="153974327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/RegEx%20URLs/near/153974327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Lloyd <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/RegEx.20URLs.html#153974327">(Jul 09 2018 at 14:56)</a>:</h4>
<p>If I supply:<br>
FhirClient client = new FhirClient("<a href="http://localhost:4080/administration/" target="_blank" title="http://localhost:4080/administration/">http://localhost:4080/administration/</a>");<br>
WebResolver webResolver = new WebResolver(id =&gt; client);<br>
..and try to search for<br>
var yyy = webResolver.ResolveByUri("<a href="http://purl.org/StructureDefinition/Author" target="_blank" title="http://purl.org/StructureDefinition/Author">http://purl.org/StructureDefinition/Author</a>");</p>
<p>This gets generated in the FhirClient.cs ReadAsync(~~)</p>
<p>&lt;Bundle xmlns=\"<a href="http://hl7.org/fhir\" target="_blank" title="http://hl7.org/fhir\">http://hl7.org/fhir\</a>"&gt;<br>
    &lt;type value=\"batch\" /&gt;<br>
    &lt;entry&gt;<br>
        &lt;request&gt;<br>
            &lt;method value=\"GET\" /&gt;<br>
            &lt;url value=\"<a href="http://localhost:4080/administration/StructureDefinition/Author\" target="_blank" title="http://localhost:4080/administration/StructureDefinition/Author\">http://localhost:4080/administration/StructureDefinition/Author\</a>" /&gt;<br>
        &lt;/request&gt;<br>
    &lt;/entry&gt;<br>
&lt;/Bundle&gt;</p>
<p>It looks like it might be changing the domain to match the client (but I need to double-check this) and I get no body in the response. If I try to perform the same request on the public Firely server (manually using Postman) with either URL I get:</p>
<p>"system": "<a href="http://hl7.org/fhir/dotnet-api-operation-outcome" target="_blank" title="http://hl7.org/fhir/dotnet-api-operation-outcome">http://hl7.org/fhir/dotnet-api-operation-outcome</a>",<br>
                                    "code": "5005"<br>
                                }<br>
                            ],<br>
                            "text": "Interaction GET <a href="http://purl.org/StructureDefinition/Author" target="_blank" title="http://purl.org/StructureDefinition/Author">http://purl.org/StructureDefinition/Author</a> in entry  is not implemented."</p>
<p>Although in the Firely server test I have not uploaded the extension first.</p>



<a name="153974335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/RegEx%20URLs/near/153974335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Lloyd <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/RegEx.20URLs.html#153974335">(Jul 09 2018 at 15:51)</a>:</h4>
<p>This however works with the public Vonk server (even though supplying the full URL doesn't)<br>
&lt;Bundle xmlns="<a href="http://hl7.org/fhir" target="_blank" title="http://hl7.org/fhir">http://hl7.org/fhir</a>"&gt;<br>
    &lt;type value="batch" /&gt;<br>
&lt;entry&gt;<br>
&lt;request&gt;<br>
            &lt;method value="GET" /&gt;<br>
            &lt;url value="/StructureDefinition?url=http://purl.org/StructureDefinition/Author" /&gt;<br>
        &lt;/request&gt;<br>
    &lt;/entry&gt;<br>
&lt;/Bundle&gt;</p>



<a name="153974660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/RegEx%20URLs/near/153974660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/RegEx.20URLs.html#153974660">(Jul 11 2018 at 14:37)</a>:</h4>
<p>In the last request you query by the <em>canonical url</em> of the StructureDefinition (indexed with the search parameter 'url').<br>
You can have the WebResolver do the same with the method ResolveByCanonicalUrl.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
