---
layout: page
title: "FHIR Chat  · Validation code issue · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Validation.20code.20issue.html">Validation code issue</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="225699335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Validation%20code%20issue/near/225699335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Validation.20code.20issue.html#225699335">(Feb 09 2021 at 14:43)</a>:</h4>
<p>Hi, I am trying to validate a bundle resource against profiles defined in an implementation guide with dependencies. I have  created the following code (takes file name of the resource and a list of zip file names for the definitions, but it cannot resolve the valuesets  given in the definitions (no fhir server is involved for now).</p>
<p>Does someone have a hint what I might be missing?</p>
<div class="codehilite"><pre><span></span><code>        using (var streamReader = new StreamReader(fileName))
        {
            var jsonReader = new JsonTextReader(streamReader);
            var jsonParser = new FhirJsonParser();
            try
            {
                var content = jsonParser.Parse(jsonReader);
                var resolvers = new List&lt;IAsyncResourceResolver&gt;();
                resolvers.Add(new CachedResolver(ZipSource.CreateValidationSource()));
                foreach (var zipFile in profileZipFiles)
                    resolvers.Add(new CachedResolver(new ZipSource(zipFile)));

                var settings = ValidationSettings.CreateDefault();
                var multiResolver = new MultiResolver(resolvers);

                settings.ResourceResolver = multiResolver;
                settings.GenerateSnapshot = true;


                var validator = new Hl7.Fhir.Validation.Validator(settings);
                var outcome = validator.Validate(content);
                if (outcome.Success)
                    Console.WriteLine(&quot;File successfully validated&quot;);
                else
                {
                    Console.WriteLine(outcome.ToString());
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }
</code></pre></div>



<a name="226105350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Validation%20code%20issue/near/226105350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Validation.20code.20issue.html#226105350">(Feb 12 2021 at 07:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240678">Torben M. Hagensen</span> <a href="#narrow/stream/179171-dotnet/topic/Validation.20code.20issue/near/225699335">said</a>:</p>
<blockquote>
<p>Does someone have a hint what I might be missing?</p>
</blockquote>
<p><span class="user-mention" data-user-id="191347">@Mirjam Baltus</span> - Is it not possible to resolve valuesets provided in a zipfile using the API?</p>



<a name="226505279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Validation%20code%20issue/near/226505279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Validation.20code.20issue.html#226505279">(Feb 16 2021 at 12:08)</a>:</h4>
<p>One missing feature in our Local terminology service and resolvers is that they won't be able to find ValueSets that are defined implicitly by a CodeSystem.  See <a href="https://github.com/FirelyTeam/firely-net-sdk/issues/1570">https://github.com/FirelyTeam/firely-net-sdk/issues/1570</a>.</p>
<p>Maybe this is the case?</p>



<a name="226928497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Validation%20code%20issue/near/226928497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torben M. Hagensen <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Validation.20code.20issue.html#226928497">(Feb 19 2021 at 07:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191328">Ewout Kramer</span> <a href="#narrow/stream/179171-dotnet/topic/Validation.20code.20issue/near/226505279">said</a>:</p>
<blockquote>
<p>One missing feature in our Local terminology service and resolvers is that they won't be able to find ValueSets that are defined implicitly by a CodeSystem.  See <a href="https://github.com/FirelyTeam/firely-net-sdk/issues/1570">https://github.com/FirelyTeam/firely-net-sdk/issues/1570</a>.</p>
<p>Maybe this is the case?</p>
</blockquote>
<p>Yes, that is probably the case. I guess I will have to establish a server with the valuesets to make it work.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
