---
layout: page
title: "FHIR Chat  · Vonk R4 Sql Server · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html">Vonk R4 Sql Server</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="209610498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/209610498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nilesh Pagare <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#209610498">(Sep 10 2020 at 08:47)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191328">@Ewout Kramer</span>  and vonk team,<br>
I am trying to run vonk server inside  docker for windows using &gt; docker-compose -f docker-compose.mssqlserver_host.yml up -d.   My preference is to have the docker-compose to create vonk databases in sql server. </p>
<p>I am getting following error at the start up -  Unable to auto update database "VonkR4": "Globalization Invariant Mode is not supported." <br>
Startup failed: Globalization Invariant Mode is not supported.</p>
<p>The sql server user has been granted dbcreator, public and sysadmin roles.  (created in the security panel not via scripts).   </p>
<p>What am I missing ?</p>
<p>Thank you</p>



<a name="209625343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/209625343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#209625343">(Sep 10 2020 at 11:32)</a>:</h4>
<p>I'll page <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>  or <span class="user-mention" data-user-id="193551">@Marco Visser</span> for you!</p>



<a name="209645119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/209645119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#209645119">(Sep 10 2020 at 13:58)</a>:</h4>
<p>Hello Nilesh, Thanks for calling out! <br>
That has been reported before, we are looking into it. I probably has to do with the very much trimmed down base Alpine image that we introduced with version 3.7.0. Because of the FHIR Connectathon that we obviously actively participate in, we may need until next week to get to an answer.</p>



<a name="209649381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/209649381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nilesh Pagare <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#209649381">(Sep 10 2020 at 14:13)</a>:</h4>
<p>Hello <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> , that's great. In the meantime, I am trying Vonk v3.6.1 ? Is there any DB upgrade between 3.6.1 and 3.8 ?</p>



<a name="209669087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/209669087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nilesh Pagare <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#209669087">(Sep 10 2020 at 16:02)</a>:</h4>
<p>(deleted)</p>



<a name="209747217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/209747217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#209747217">(Sep 11 2020 at 07:07)</a>:</h4>
<p>Hi Nilesh, yes there is DB upgrade in v3.7.0 for SQL Server. See <a href="https://docs.fire.ly/vonk/releasenotes/releasenotes.html#release-3-7-0">here</a> for the release notes.</p>



<a name="209769408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/209769408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nilesh Pagare <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#209769408">(Sep 11 2020 at 11:37)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193551">@Marco Visser</span> , greetings ! how are you  ? <br>
Thank you for that pointer. So far, I have set up my 3.6.1 eval server pointing to SQL Server 2019.<br>
Will be using VonkLoader to load FHIR population in the database. </p>
<ul>
<li>Will VonkLoader work for only for VonkServer or any other FHIR server ?<br>
Thank you.</li>
</ul>



<a name="209961415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/209961415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nilesh Pagare <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#209961415">(Sep 14 2020 at 03:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191757">Christiaan Knaap</span> <a href="#narrow/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server/near/209645119">said</a>:</p>
<blockquote>
<p>Hello Nilesh, Thanks for calling out! <br>
That has been reported before, we are looking into it. I probably has to do with the very much trimmed down base Alpine image that we introduced with version 3.7.0. Because of the FHIR Connectathon that we obviously actively participate in, we may need until next week to get to an answer.</p>
</blockquote>
<p>HI <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> ,  I have tried to use v3.6.1 but have run into multiple issues from setting up the Administration APIs to successfully loading Synthea generated population using VonkLoader. Not sure if it is worthwhile to get the 3.8.0 fixed against the issue I reported and then I try uploading the data.<br>
Is there a github repo that you can recommend for me to file these issues ? Thank you.</p>



<a name="209990626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/209990626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#209990626">(Sep 14 2020 at 11:12)</a>:</h4>
<p>Hi Nilesh,<br>
VonkLoader generates transaction bundles that should be processable by other FHIR servers as well. (Probably not just any FHIR server - transactions are not always supported).<br>
A new version of VonkLoader is coming up that also supports FHIR R4 and adds some other features.<br>
We have a ticketing system in Jira for licensed users, but you can still report issues in the vonk inbox (<a href="mailto:vonk@fire.ly">vonk@fire.ly</a>). We look forward to solving them, but we cannot guarantee the response time of course.</p>



<a name="209997428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/209997428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nilesh Pagare <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#209997428">(Sep 14 2020 at 12:33)</a>:</h4>
<p>Hi Christiaan, thank you for your response. </p>
<ol>
<li>can you please confirm if 3.6.1 supports R4 ?</li>
<li>Any fix for the issue I reported against vonk server 3.8.0 ?</li>
<li>what's the ETA for VonkLoader that will support R4 ? </li>
<li>It will be great if I and the community could post issues against VonkLoader in a github repo.  Any thoughts on making this open source as it is available free? In the meantime, I will communicate via email.<br>
Thanks.</li>
</ol>



<a name="210001016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/210001016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#210001016">(Sep 14 2020 at 13:04)</a>:</h4>
<p>Hi Nilesh,<br>
Vonk supports both R3 and R4 as of Vonk version 3.0. Please be aware that you have to change the "InformationModel.Default" setting of the Vonk configuration to "Fhir4.0" if you want the default FHIR version used by Vonk to be R4. If you do not want to run R3 and R4 both, you can change your "PipelineOptions" configuration to only include the version you want. See <a href="https://docs.fire.ly/vonk/configuration/appsettings.html">https://docs.fire.ly/vonk/configuration/appsettings.html</a> for more information about all the configuration options.</p>



<a name="210011416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/210011416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nilesh Pagare <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#210011416">(Sep 14 2020 at 14:19)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191347">@Mirjam Baltus</span> , thank you. Your help will be appreciated.</p>
<ol>
<li>Here are my settings - <div class="codehilite"><pre><span></span><code>- VONK_InformationModel=Fhir4.0
- VONK_InformationModel:Default=Fhir4.0
</code></pre></div>


</li>
</ol>
<p>Even then I see lots of errors in the console where Vonk Server fails to load conformance resources.</p>
<ol start="2">
<li>
<p>When I tried validating Administration URL - <a href="http://localhost:8086/administration">http://localhost:8086/administration</a> , I get two errors in the response body -<br>
{<br>
    "resourceType": "OperationOutcome",<br>
    "id": "751f7bb1-260b-4852-80de-d048b91e10ee",<br>
    "meta": {<br>
        "versionId": "80d77ea9-3639-4514-a5b1-f89675ea353b",<br>
        "lastUpdated": "2020-09-14T14:16:39.600+00:00"<br>
    },<br>
    "issue": [<br>
        {<br>
            "severity": "warning",<br>
            "code": "not-supported",<br>
            "details": {<br>
                "coding": [<br>
                    {<br>
                        "system": "<a href="http://hl7.org/fhir/dotnet-api-operation-outcome">http://hl7.org/fhir/dotnet-api-operation-outcome</a>",<br>
                        "code": "5003"<br>
                    }<br>
                ],<br>
                "text": "Argument is not supported"<br>
            },<br>
            "diagnostics": "_count=10"<br>
        },<br>
        {<br>
            "severity": "warning",<br>
            "code": "not-supported",<br>
            "details": {<br>
                "coding": [<br>
                    {<br>
                        "system": "<a href="http://hl7.org/fhir/dotnet-api-operation-outcome">http://hl7.org/fhir/dotnet-api-operation-outcome</a>",<br>
                        "code": "5003"<br>
                    }<br>
                ],<br>
                "text": "Argument is not supported"<br>
            },<br>
            "diagnostics": "_sort=-_lastUpdated"<br>
        }<br>
    ]<br>
}</p>
</li>
<li>
<p>When tried to reset the database via <a href="http://localhost:8086/administration/reset">http://localhost:8086/administration/reset</a> , I get either 403 or 501<br>
{<br>
    "resourceType": "OperationOutcome",<br>
    "id": "0ba4d217-6a27-4153-ac0e-423d17d59c25",<br>
    "meta": {<br>
        "versionId": "d3b3088b-73be-4ddd-9154-f2174bd18efa",<br>
        "lastUpdated": "2020-09-14T14:18:30.592+00:00"<br>
    },<br>
    "issue": [<br>
        {<br>
            "severity": "error",<br>
            "code": "security",<br>
            "details": {<br>
                "coding": [<br>
                    {<br>
                        "system": "<a href="http://hl7.org/fhir/dotnet-api-operation-outcome">http://hl7.org/fhir/dotnet-api-operation-outcome</a>",<br>
                        "code": "5013"<br>
                    }<br>
                ],<br>
                "text": "No access to this operation"<br>
            }<br>
        }<br>
    ]<br>
}</p>
</li>
</ol>



<a name="210040689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/210040689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nilesh Pagare <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#210040689">(Sep 14 2020 at 17:55)</a>:</h4>
<p>here are  some sample errors - <br>
2020-09-14 14:32:06.143 +00:00   [Information] [ReqId: ] StartupRunner started for Fhir4.0.<br>
2020-09-14 14:32:06.144 +00:00   [Information] [ReqId: ] Loading conformance resources at startup for Fhir4.0.<br>
2020-09-14 14:32:06.144 +00:00   [Information] [ReqId: ] Loading conformance resources ...<br>
2020-09-14 14:32:06.187 +00:00   [Information] [ReqId: ] Reading conformance resources from "/app/specification_Fhir4_0.zip".<br>
2020-09-14 14:32:06.187 +00:00   [Information] [ReqId: ] This could take a few minutes.<br>
2020-09-14 14:32:07.500 +00:00   [Information] [ReqId: ] This import source returned (new) results. All subsequent sources will be (re-)read.<br>
2020-09-14 14:32:18.918 +00:00   [Error] [ReqId: ] Artifact /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml could not be imported. Error message: Found multiple conflicting resources with the same resource uri identifier.</p>
<p>Url: <a href="http://hl7.org/fhir/StructureDefinition/de-Quantity.value">http://hl7.org/fhir/StructureDefinition/de-Quantity.value</a><br>
   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml<br>
   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml<br>
   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml</p>
<p>2020-09-14 14:32:18.918 +00:00   [Error] [ReqId: ] Artifact /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml could not be imported. Error message: Found multiple conflicting resources with the same resource uri identifier.</p>
<p>Url: <a href="http://hl7.org/fhir/StructureDefinition/de-Quantity.comparator">http://hl7.org/fhir/StructureDefinition/de-Quantity.comparator</a><br>
   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml<br>
   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml<br>
   File: /tmp/FhirArtifactCache-1.6.0-Hl7.Fhir.R4.Specification/specification_Fhir4_0/dataelements.xml<br>
.<br>
.<br>
.<br>
.<br>
2020-09-14 14:34:43.905 +00:00   [Information] [ReqId: ] Reading conformance resources from "/app/specification_Fhir4_0.zip" - done.<br>
2020-09-14 14:34:43.911 +00:00   [Information] [ReqId: ] Reading conformance resources from "/app/errataFhir4.0.zip".<br>
2020-09-14 14:34:43.920 +00:00   [Information] [ReqId: ] Reading conformance resources from "/app/errataFhir4.0.zip" - done.<br>
2020-09-14 14:34:43.921 +00:00   [Information] [ReqId: ] Directory "/app/vonk-import.R4" contains no zip files to read from.<br>
2020-09-14 14:34:43.921 +00:00   [Information] [ReqId: ] Directory "/app/vonk-import.R4" does not contain any individual files to read.<br>
2020-09-14 14:34:43.921 +00:00   [Information] [ReqId: ] No Simplifier projects specified to import conformance resources from.<br>
2020-09-14 14:36:50.720 +00:00   [Error] [ReqId: ] Error on updating resource with id "SearchParameter/RequestGroup-instantiates-canonical-Fhir4.0": "SearchParameter of type Reference should contain a target element."<br>
2020-09-14 14:40:01.897 +00:00   [Error] [ReqId: ] Error on updating resource with id "CodeSystem/v2-2.7-0360-Fhir4.0": "An existing resource with id CodeSystem/v2-2.3.1-0360-Fhir4.0 has the same canonical url <a href="http://terminology.hl7.org/CodeSystem/v2-0360|2.7">http://terminology.hl7.org/CodeSystem/v2-0360|2.7</a>."<br>
2020-09-14 14:40:02.281 +00:00   [Error] [ReqId: ] Error on updating resource with id "CodeSystem/v2-2.4-0391-Fhir4.0": "An existing resource with id CodeSystem/v2-2.6-0391-Fhir4.0 has the same canonical url <a href="http://terminology.hl7.org/CodeSystem/v2-0391|2.4">http://terminology.hl7.org/CodeSystem/v2-0391|2.4</a>."<br>
2020-09-14 14:40:02.434 +00:00   [Error] [ReqId: ] Error on updating resource with id "CodeSystem/v2-2.4-0006-Fhir4.0": "An existing resource with id CodeSystem/v2-2.1-0006-Fhir4.0 has the same canonical url <a href="http://terminology.hl7.org/CodeSystem/v2-0006|2.4">http://terminology.hl7.org/CodeSystem/v2-0006|2.4</a>."<br>
2020-09-14 14:40:44.332 +00:00   [Information] [ReqId: ] Loading conformance resources - done<br>
2020-09-14 14:40:44.332 +00:00   [Information] [ReqId: ] Loading conformance resources at startup - done.</p>



<a name="210124856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/210124856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#210124856">(Sep 15 2020 at 12:57)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="196824">@Nilesh Pagare</span>,<br>
The errors you see on the log output when loading R4 conformance resources result from errors in the specification files, that contain resources with duplicate canonical URLs. This is a known error, and we have created a ticket to improve the specification See <a href="https://docs.fire.ly/vonk/faq.html">https://docs.fire.ly/vonk/faq.html</a>.</p>
<p>The second error you mention is when you try to access the /administration endpoint without specifying a resource type or operation. Vonk does not have a homepage on that endpoint as we have on the regular server. If you would request <a href="http://localhost:8086/administration/StructureDefinition">http://localhost:8086/administration/StructureDefinition</a> for example, you should get a normal response. We will work on improving the message, so it will be more clear that there's nothing to see on /administration directly.</p>
<p>Your third issue will take a bit more investigation into your configuration. The error states 'no access to this operation'. In the "Administration.Security.AllowedNetworks" setting you can specify the networks that are allowed to access the protected operations on /administration, that are listed in the "Administration.Security.OperationsToBeSecured" setting. Apparently you try to perform the reset operation from a netword that is not listed.</p>



<a name="210125768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/210125768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nilesh Pagare <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#210125768">(Sep 15 2020 at 13:04)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191347">@Mirjam Baltus</span> , thank you for your response. </p>
<ol>
<li>Any fix for the issue I reported against vonk server 3.8.0 ?</li>
<li>what's the ETA for VonkLoader that will support R4 ? </li>
<li>It will be great if I and the community could post issues against VonkLoader in a github repo.  Any thoughts on making this open source as it is available free? <br>
Thanks.</li>
</ol>



<a name="210423270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Vonk%20R4%20Sql%20Server/near/210423270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nilesh Pagare <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Vonk.20R4.20Sql.20Server.html#210423270">(Sep 17 2020 at 17:34)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191347">@Mirjam Baltus</span> , any input on my request ? <br>
Thank you for your help.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
