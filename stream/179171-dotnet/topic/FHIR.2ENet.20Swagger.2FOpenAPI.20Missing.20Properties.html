---
layout: page
title: "FHIR Chat  · FHIR.Net Swagger/OpenAPI Missing Properties · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html">FHIR.Net Swagger/OpenAPI Missing Properties</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="259197846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259197846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lars Ewert <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259197846">(Oct 27 2021 at 06:30)</a>:</h4>
<p>Hey guys,</p>
<p>im using Swagger for my endpoint tests and figured out, that some objects from the Fhir Models lost some properties.<br>
<a href="/user_uploads/10155/BCDEaEJ0aSRHg5323_X-Ac_4/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/BCDEaEJ0aSRHg5323_X-Ac_4/image.png" title="image.png"><img src="/user_uploads/10155/BCDEaEJ0aSRHg5323_X-Ac_4/image.png"></a></div><p>inside the Fhir.Model in my Backend i can clearly see the family (string) and given (string array) property<br>
is it intended to be hidden from the OpenApi Definition?</p>



<a name="259308063"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259308063" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259308063">(Oct 27 2021 at 21:18)</a>:</h4>
<p>I don't think that swagger would be able to interpret the fhir object models from the c# classes. As there are some subtle differences between the json and xml formats.<br>
Or do you mean that you're using the fhir swagger definition from the spec ?</p>



<a name="259344922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259344922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Donn Relacion <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259344922">(Oct 28 2021 at 06:20)</a>:</h4>
<p>The json schema generated by swashbuckle/MS OpenApi library for the FHIR C# types are not valid FHIR json. You would need to write code to build the OpenApiSchema based on those types. The default OpenApiSchema generator builds it based on the public properties of the type, which in the C# library contains the backing Element properties.</p>



<a name="259360270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259360270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259360270">(Oct 28 2021 at 09:13)</a>:</h4>
<p>The core fhir spec also has a pre generated open api definition, but many tools can't handle its scale and self referencing objects.</p>



<a name="259442478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259442478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lars Ewert <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259442478">(Oct 28 2021 at 19:49)</a>:</h4>
<p>Well in general Swagger can interpret the Fhir models. But heres exactly what i mean:<br>
<a href="/user_uploads/10155/FTZ_8M9qCvoEHhrcFqM40wX-/image.png">image.png</a><br>
inside the Fhir.Model HumanName exists a "public string Family" aswell as the "public FhirString FamilyElement" but inside Swagger (the screenshot from 1st post) i can only see the "FamilyElement" of type FhirString with its Properties inside. As you can see a simple string is not covered here.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/FTZ_8M9qCvoEHhrcFqM40wX-/image.png" title="image.png"><img src="/user_uploads/10155/FTZ_8M9qCvoEHhrcFqM40wX-/image.png"></a></div><p>I hope its more exactly what the my problem is.</p>



<a name="259477917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259477917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Donn Relacion <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259477917">(Oct 29 2021 at 03:06)</a>:</h4>
<p>I'm able to generate the swagger below by adding a custom swashbuckle IDocumentFilter that modifies the generated schemas. If the property type inherits from Hl7.Fhir.Mode.PrimitiveType, I rewrite the property to use the matching json type instead of the Fhir model type (e.g. FhirString is updated to string, Integer to integer, etc.). I also remove any properties that do not contain a FhirElementAttribute, and I use the name in this attribute.</p>
<p>I don't think it's a fool-proof solution, but it was good enough for our use case. I think using the pregenerated openapi definition should be the way to go, but then you'd have to embed these, and it wont work for custom resources.</p>
<p><a href="/user_uploads/10155/zHLuf5Gs1d4u5Yem4rYT2Lgo/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/zHLuf5Gs1d4u5Yem4rYT2Lgo/image.png" title="image.png"><img src="/user_uploads/10155/zHLuf5Gs1d4u5Yem4rYT2Lgo/image.png"></a></div>



<a name="259696953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259696953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259696953">(Oct 29 2021 at 23:35)</a>:</h4>
<p>I'm also curious what benefit you're getting for these?<br>
You're not going to be generating code from them, the documentation isn't that great, and the objects are really too complicated to be doing much more than simple gets, and for that of you put a HTML formatter in the pipeline, you can do that direct.</p>



<a name="259697014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259697014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259697014">(Oct 29 2021 at 23:36)</a>:</h4>
<p>Fully understand for custom, as that's not fhir anyway. And no open tools/packages work with them.</p>



<a name="259697165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259697165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259697165">(Oct 29 2021 at 23:38)</a>:</h4>
<p>Looking at that schema you have there, makes the extensibility harder to see (can't see it at all here) and most uses of fhir use that quite a bit.<br>
Just looking at patient, us core has many on there, as do most countries for their local properties.</p>



<a name="259723234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259723234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lars Ewert <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259723234">(Oct 30 2021 at 10:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> i am generating Code from that documentation. I am using NSwag to generate my Frontend services with the respective Models. So if the generated models are wrong. My Frontend doesnt have the information and i have to manualy update these Models.</p>
<p>Meanwhile i am using the npm package @types/fhir which have more complete models to use. </p>
<p>But for fhir-extension i have to extend these models in my Frontend for sure.</p>



<a name="259724699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259724699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259724699">(Oct 30 2021 at 11:03)</a>:</h4>
<p>Yup, the @types/fhir is the good stuff all right. That gives you all the models.<br>
There aren't any good generators for the extensions at present for typescript. <span class="user-mention" data-user-id="222054">@Gino Canessa</span> is that something you know of some work?</p>



<a name="259724854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259724854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259724854">(Oct 30 2021 at 11:06)</a>:</h4>
<p>Those typescript classes are generated from the same source that generates the fhir net api models.<br>
If you're buding a server I've done a facade layer if you wanted a kick start.</p>



<a name="259877920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/FHIR.Net%20Swagger/OpenAPI%20Missing%20Properties/near/259877920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/FHIR.2ENet.20Swagger.2FOpenAPI.20Missing.20Properties.html#259877920">(Nov 01 2021 at 15:28)</a>:</h4>
<p>If you want the 'serializable' definitions for C#, the <code>CSharpBasic_R*.cs</code> files should work from <a href="https://github.com/microsoft/fhir-codegen/tree/main/generated">https://github.com/microsoft/fhir-codegen/tree/main/generated</a> .  It looks like I haven't generated all the 'newer' versions (as in the <a href="https://github.com/microsoft/fhir-codegen/tree/main/generated/CSBasic2_R4">CSBasic2_R4</a> folder), but the R4 ones are there in that style.</p>
<p>The actual project in that repo can also output experimental OpenAPI definitions, but I haven't had much bandwidth to work on them recently.  They should work for documentation, but I do not like the OpenAPI -&gt; Code/Classes story at all.  My biggest issue is that since OpenAPI doesn't know about the SDKs, the generated code that can't be used with them and thus isn't very useful.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
