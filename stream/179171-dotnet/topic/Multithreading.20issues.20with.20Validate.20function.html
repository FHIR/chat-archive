---
layout: page
title: "FHIR Chat  · Multithreading issues with Validate function · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Multithreading.20issues.20with.20Validate.20function.html">Multithreading issues with Validate function</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="192672435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Multithreading%20issues%20with%20Validate%20function/near/192672435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Multithreading.20issues.20with.20Validate.20function.html#192672435">(Apr 02 2020 at 14:26)</a>:</h4>
<p>We seem to be experiencing issues with the validate function within the API. <br>
When we run validations in a serial fashion we get different results to when we run the same content through validations happening in parallel. Has anyone experienced any multithreading issues with the validate function within the API?</p>



<a name="192687240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Multithreading%20issues%20with%20Validate%20function/near/192687240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Multithreading.20issues.20with.20Validate.20function.html#192687240">(Apr 02 2020 at 15:56)</a>:</h4>
<p>The Validator in fhir-net-api is not thread safe. So I can imagine that running it in parallel will cause some errors, or at least some anomalies.</p>



<a name="192691229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Multithreading%20issues%20with%20Validate%20function/near/192691229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Multithreading.20issues.20with.20Validate.20function.html#192691229">(Apr 02 2020 at 16:21)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="193551">@Marco Visser</span>  -  that confirms what we have observed. I think we are going to have to have a bit of a rethink on our approach in this area...</p>



<a name="192747735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Multithreading%20issues%20with%20Validate%20function/near/192747735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Multithreading.20issues.20with.20Validate.20function.html#192747735">(Apr 03 2020 at 01:03)</a>:</h4>
<p>You should be able to run multiple instances of the validator in parallel though...<br>
One issue in older versions we had was a race condition from the Source resolver.</p>



<a name="192747755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Multithreading%20issues%20with%20Validate%20function/near/192747755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Multithreading.20issues.20with.20Validate.20function.html#192747755">(Apr 03 2020 at 01:03)</a>:</h4>
<p>(we fixed it in our fork, and I believe is in the latest versions, don't recall how far back, but likely post 1.4)</p>



<a name="192764109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Multithreading%20issues%20with%20Validate%20function/near/192764109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Multithreading.20issues.20with.20Validate.20function.html#192764109">(Apr 03 2020 at 06:58)</a>:</h4>
<p>Could it be this issue <a href="https://github.com/FirelyTeam/fhir-net-api/issues/556" title="https://github.com/FirelyTeam/fhir-net-api/issues/556">556</a> Brian?  If yes, then is has been solved indeed in the past.</p>



<a name="192777461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Multithreading%20issues%20with%20Validate%20function/near/192777461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Multithreading.20issues.20with.20Validate.20function.html#192777461">(Apr 03 2020 at 09:22)</a>:</h4>
<p>It was a different issue, searching for ele-1 would probably find it. I'm sure it was in the latest version, just now sure how far back.<br>
It was the locking on SetAnnotation that resolved the one I found.</p>



<a name="192778056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Multithreading%20issues%20with%20Validate%20function/near/192778056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Multithreading.20issues.20with.20Validate.20function.html#192778056">(Apr 03 2020 at 09:27)</a>:</h4>
<p>Ah ok. That was this issue <a href="https://github.com/FirelyTeam/fhir-net-api/issues/1065" title="https://github.com/FirelyTeam/fhir-net-api/issues/1065">1065</a>, which was resolved in latest version (1.6.0).</p>
<p>See also the <a href="https://github.com/FirelyTeam/fhir-net-api/releases/tag/v1.6.0-stu3" title="https://github.com/FirelyTeam/fhir-net-api/releases/tag/v1.6.0-stu3">release notes</a></p>



<a name="192934263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Multithreading%20issues%20with%20Validate%20function/near/192934263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Multithreading.20issues.20with.20Validate.20function.html#192934263">(Apr 05 2020 at 00:42)</a>:</h4>
<p>Yup, that's right.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
