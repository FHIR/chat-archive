---
layout: page
title: "FHIR Chat  · R4 FhirPath Expressions · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/R4.20FhirPath.20Expressions.html">R4 FhirPath Expressions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154017078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/R4%20FhirPath%20Expressions/near/154017078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/R4.20FhirPath.20Expressions.html#154017078">(Nov 09 2018 at 09:09)</a>:</h4>
<p>Has anyone else run into this problem with quite a few R4 search FHIRPath expressions throwing this type of error when using the .NET FhirPath implementation.<br>
`Invocation of 'binary.|' failed: Invocation of '<a href="http://binary.as" target="_blank" title="http://binary.as">binary.as</a>' failed: Cannot cast from 'collection' to 'any single value'</p>
<p>An example of this is the Observation search Parameter name: combo-value-concept which has the expression of: </p>
<p>`(Observation.value as CodeableConcept) | (Observation.component.value as CodeableConcept)'</p>
<p>It is actually the second part of the 'Or' that makes it fail, this part 'Observation.component.value as CodeableConcept' and <br>
I think it is because 'Observation.component.value' returns many and many cannot be cast to 'CodeableConcept'.</p>
<p>A test case that shows this failing is to load this example resource from the spec into a server <a href="http://hl7.org/fhir/2018Sep/observation-example-1minute-apgar-score.xml.html" target="_blank" title="http://hl7.org/fhir/2018Sep/observation-example-1minute-apgar-score.xml.html">http://hl7.org/fhir/2018Sep/observation-example-1minute-apgar-score.xml.html</a> as that example has many Observation components. <br>
I tried loading that resource into Graham's Server <a href="http://test.fhir.org/r4" target="_blank" title="http://test.fhir.org/r4">http://test.fhir.org/r4</a>, at first I got errors about extensions so I removed all of the extensions found in that resource, then I got a horrible exception. I can only assume due to the same problem I have, maybe.</p>
<p>What I am struggling with is what is the root problem, I feel like it is the expression its self, not the FHIRPath implementation.</p>
<p>Has anyone else seen commentary on this problem?</p>



<a name="154019590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/R4%20FhirPath%20Expressions/near/154019590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/R4.20FhirPath.20Expressions.html#154019590">(Nov 19 2018 at 15:42)</a>:</h4>
<p>Hi Angus - the .NET FhirPath library has not yet been updated to R4. However <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> has helped me out and will send me a PR for this soon.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
