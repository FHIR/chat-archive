---
layout: page
title: "FHIR Chat  · Observation Values · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html">Observation Values</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="269717571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Observation%20Values/near/269717571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lars Ewert <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html#269717571">(Jan 28 2022 at 10:54)</a>:</h4>
<p>Hey i got the problem, that Observations can have different values, which the Frontend cant parse.<br>
Im using the <strong>.Net SDK from firely</strong> and they provide this implementation:<br>
<a href="/user_uploads/10155/QHbQtmb0gt0MjzKZUV3lGs--/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/QHbQtmb0gt0MjzKZUV3lGs--/image.png" title="image.png"><img src="/user_uploads/10155/QHbQtmb0gt0MjzKZUV3lGs--/image.png"></a></div><p>When i get my Resources from the hl7 server this is my output before sending it to the frontend<br>
<a href="/user_uploads/10155/erI2xWWqfdLwKV8DCdkmKON9/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/erI2xWWqfdLwKV8DCdkmKON9/image.png" title="image.png"><img src="/user_uploads/10155/erI2xWWqfdLwKV8DCdkmKON9/image.png"></a></div><p>So far so good, but as we can see, there is just a Property called Value, but the Frontend npm package <strong>@types/fhir</strong> provides different property names for the different values that could appear.<br>
<a href="/user_uploads/10155/WHaArXwRQAIl02uCDgMXhKbw/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/WHaArXwRQAIl02uCDgMXhKbw/image.png" title="image.png"><img src="/user_uploads/10155/WHaArXwRQAIl02uCDgMXhKbw/image.png"></a></div><p>Is there a way to map these properties correctly, before the information is lost? Or is there another npm package, that covers this automaticaly?<br>
This is my incoming Object at the Frontend:<br>
<a href="/user_uploads/10155/zqFWwxUymCQtJbL3IDBEaBjJ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/zqFWwxUymCQtJbL3IDBEaBjJ/image.png" title="image.png"><img src="/user_uploads/10155/zqFWwxUymCQtJbL3IDBEaBjJ/image.png"></a></div><p>I thought about sending to the frontend as Object, since i have the "typeName" of the value i could parse it to the corresponding Object, but that looks unusual to me.</p>
<p>Im happy for any advice ;-)<br>
Greetings Lars</p>



<a name="269765967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Observation%20Values/near/269765967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html#269765967">(Jan 28 2022 at 16:55)</a>:</h4>
<p>Hi Lars, oddly enough, both are correct.</p>
<p>When serializing choice elements, the type is appended to the element name.  A good example is the <code>deceased[x]</code> element on the <a href="https://www.hl7.org/fhir/patient.html">Patient</a> resource.  The element itself is actually defined as <code>Patient.deceased</code>, with a choice of boolean or date-time data types.  When processed, the tooling appends the <code>[x]</code> to signify it is a choice type, and in serialization you may have either <code>Patient.deceasedBoolean</code> or <code>Patient.deceasedDateTime</code> present.  What is important to note is that these are two different data types in the <em>same element</em>.  So, it not allowed to have both of them present.</p>
<p>In your case, the C# SDK is providing convenience access by representing <code>Value</code> as a single property which may have multiple types.  In the TypeScript types it is showing the raw models that match the JSON serialization format*.</p>
<p>*There are a few of us that are looking into making a TS/JS 'SDK' that uses classes and has a cleaner interface... it is a lot of work with a long-term commitment though, so it may be a while yet.</p>



<a name="269774412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Observation%20Values/near/269774412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lars Ewert <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html#269774412">(Jan 28 2022 at 17:49)</a>:</h4>
<p>Hi Gino,</p>
<p>thank you for the Answer. Well since it is also in my interest, to make use of an compatible SDK, i would like to help you too. But only,  if you're searching more Developers for that.</p>
<p>In the meantime, i will go around that problem and parse these values separatly.</p>



<a name="269782577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Observation%20Values/near/269782577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html#269782577">(Jan 28 2022 at 18:40)</a>:</h4>
<p>No problem!  The <a class="stream" data-stream-id="179169" href="/#narrow/stream/179169-javascript">#javascript</a> stream is where all the TS-related conversations happen, feel free to jump in at any time.</p>



<a name="269792064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Observation%20Values/near/269792064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html#269792064">(Jan 28 2022 at 19:49)</a>:</h4>
<p>Note that the C# library there serialises with the valueString or whichever route you have in the object model. That's how they are both compatible with each other, and the fhir spec.</p>



<a name="269892841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Observation%20Values/near/269892841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Brox <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html#269892841">(Jan 29 2022 at 22:26)</a>:</h4>
<p>Is there an example of an SDK blood pressure observation somewhere.  I assume the 2 values go into a codeableconcept but the data types are driving me crazy.  Thanks.</p>



<a name="269964806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Observation%20Values/near/269964806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Brox <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html#269964806">(Jan 30 2022 at 23:32)</a>:</h4>
<p>I figured out how to create blood pressure observations but, moving on, I use getproperties() to find all the properties in a class.  Working on a fhir class like Person though, I get a lot of things that SDK  adds by itself or are inherited.  Is there a way to select from the properties list only those declared in the fhir documentation for that resource?</p>



<a name="269994910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Observation%20Values/near/269994910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html#269994910">(Jan 31 2022 at 08:30)</a>:</h4>
<p>When you are working with Pocos, which you do I think, you can enumerate through all elements of a resource with the property <code>NamedChildren</code> or the property <code>Children</code>. See here an example:</p>
<div class="codehilite"><pre><span></span><code>            var resource = new Patient();
            foreach (var child in resource.NamedChildren)
            {
                Console.WriteLine($&quot;property: { child.ElementName} with value {child.Value}&quot;);
            }
</code></pre></div>
<p>The property <code>Children</code> of a resource gives you the values of all child elements of a resource.</p>



<a name="270017691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Observation%20Values/near/270017691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html#270017691">(Jan 31 2022 at 11:40)</a>:</h4>
<p>What are you trying to do with enumerating the properties?</p>



<a name="271676870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Observation%20Values/near/271676870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Brox <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html#271676870">(Feb 12 2022 at 08:11)</a>:</h4>
<p>In the user interface I want to bring up the properties in the resource that they can change and, based on their type, allow editing them in a C# form.</p>



<a name="271680346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Observation%20Values/near/271680346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Observation.20Values.html#271680346">(Feb 12 2022 at 09:40)</a>:</h4>
<p>Check the Firely docs for the classmapping and property mapping classes, they would let you do that quite generically.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
