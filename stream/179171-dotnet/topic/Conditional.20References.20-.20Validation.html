---
layout: page
title: "FHIR Chat  · Conditional References - Validation · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Conditional.20References.20-.20Validation.html">Conditional References - Validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153967113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Conditional%20References%20-%20Validation/near/153967113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Lloyd <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Conditional.20References.20-.20Validation.html#153967113">(Jun 05 2018 at 16:07)</a>:</h4>
<p>Hi,<br>
I'm just wondering if a)I've misunderstood something or b) there's something amiss with the validator output? I have a conditional reference to a resource that exists (and is searchable using these values) but I get an error from the validator when try to validate the transaction bundle with only this entry in it:</p>
<p>&lt;AllergyIntolerance&gt;<br>
    &lt;clinicalStatus value="resolved" /&gt;<br>
    &lt;verificationStatus value="confirmed" /&gt;<br>
    &lt;type value="allergy" /&gt;<br>
    &lt;category value="food" /&gt;<br>
    &lt;patient&gt;<br>
            &lt;reference value="Patient?identifier=https://project/patientIDs|4" /&gt;<br>
    &lt;/patient&gt;<br>
    &lt;assertedDate value="2017-10-25T23:00:00Z" /&gt;   <br>
&lt;/AllergyIntolerance&gt;</p>
<p>response is Error - Invalid with the following reason:<br>
 "text": "Encountered an unparseable reference (Patient?identifier=https://project/patientIDs|4)"</p>
<p>This however seems to have worked fine (existing resource referenced correctly) in the Vonk test server, is there a parsing error that anyone happens to know about in the validator is is my understanding at fault?</p>
<p>Thanks,<br>
Stephen</p>



<a name="153967115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Conditional%20References%20-%20Validation/near/153967115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Lloyd <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Conditional.20References.20-.20Validation.html#153967115">(Jun 05 2018 at 16:18)</a>:</h4>
<p>This seems to validate if I URL encode the | character but that fails at the Bundle upload stage with "The search criteria matched no entries"</p>



<a name="153967386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Conditional%20References%20-%20Validation/near/153967386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Conditional.20References.20-.20Validation.html#153967386">(Jun 06 2018 at 15:15)</a>:</h4>
<p>Hi Stephen, I think this is a bug in the validator - I can fully imagine I have not considered that I could encounter these conditional references in the wild.  Can you please file a bug report here: <a href="https://github.com/ewoutkramer/fhir-net-api/issues" target="_blank" title="https://github.com/ewoutkramer/fhir-net-api/issues">https://github.com/ewoutkramer/fhir-net-api/issues</a> ?</p>



<a name="153967449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Conditional%20References%20-%20Validation/near/153967449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Lloyd <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Conditional.20References.20-.20Validation.html#153967449">(Jun 06 2018 at 15:38)</a>:</h4>
<p>Hi Ewout, <br>
Thanks for the response and I will do as requested.<br>
Regards Stephen</p>



<a name="153968602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Conditional%20References%20-%20Validation/near/153968602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Conditional.20References.20-.20Validation.html#153968602">(Jun 12 2018 at 04:35)</a>:</h4>
<p>Happy to see Vonk sorted this out. <br>
For anyone trying this on a local instance of Vonk, a little warning: Vonk also has an option to validate every resource that is created or updated (Validation.ValidateIncomingResources in the appsettings). If this is set to true, this case will be rejected by the Vonk as well, since it uses the same validator. <br>
On the public <a href="http://vonk.fire.ly" target="_blank" title="http://vonk.fire.ly">vonk.fire.ly</a>, this setting is set to false, hence everything is fine.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
