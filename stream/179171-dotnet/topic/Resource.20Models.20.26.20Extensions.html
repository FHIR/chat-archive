---
layout: page
title: "FHIR Chat  · Resource Models &amp; Extensions · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html">Resource Models &amp; Extensions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="217715810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/217715810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JA <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#217715810">(Nov 24 2020 at 05:21)</a>:</h4>
<p>My organization is unclear on how to properly create a "CoveragePlan" resource.<br>
For reference, the documentation is here: <a href="http://hl7.org/fhir/us/Davinci-drug-formulary/StructureDefinition-usdf-CoveragePlan.html">http://hl7.org/fhir/us/Davinci-drug-formulary/StructureDefinition-usdf-CoveragePlan.html</a></p>
<p>A couple questions we have are:<br>
1) This resource has a number of required "extensions".  What exactly does this look like in .NET? Something like the following?</p>
<p>List list = new Hl7.Fhir.Model.List();<br>
  list.addExtension(&lt;extension-uri&gt;, &lt;some-value&gt;);</p>
<p>2) How closely should the JSON of our CoveragePlan resource (which is a HL7.Fhir.Model.List) match the the example JSON provided on <a href="http://hl7.org">hl7.org</a>?  I ask this because the <strong>HL7.Fhir.Model.List </strong> model, when serialized, does not seem to match up with the example provided here: <a href="http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html">http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html</a></p>
<p>Any insight into these questions is very much appreciated.</p>



<a name="217725058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/217725058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#217725058">(Nov 24 2020 at 08:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="365024">JA</span> <a href="#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/217715810">said</a>:</p>
<blockquote>
<p>1) This resource has a number of required "extensions".  What exactly does this look like in .NET? Something like the following?</p>
</blockquote>
<p>The code you mention is correct for adding a simple extension. The CoveragePlan also uses a complex/nested extension, and you will need to build this structure first, before adding it to the List resource:</p>
<div class="codehilite" data-code-language="C#"><pre><span></span><code>            <span class="kt">var</span> <span class="n">x</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Extension</span><span class="p">();</span>
            <span class="c1">// fill it with the main canonical URL of the definition</span>
            <span class="n">x</span><span class="p">.</span><span class="n">Url</span> <span class="p">=</span> <span class="s">"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension"</span><span class="p">;</span>
            <span class="c1">// add the first sub-extension</span>
            <span class="n">x</span><span class="p">.</span><span class="n">AddExtension</span><span class="p">(</span><span class="s">"drugTierID"</span><span class="p">,</span> <span class="k">new</span> <span class="n">CodeableConcept</span><span class="p">(&lt;</span><span class="n">system</span><span class="p">&gt;,&lt;</span><span class="k">value</span><span class="p">&gt;));</span>
            <span class="c1">// etc</span>
            <span class="n">list</span><span class="p">.</span><span class="n">Extension</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>2) How closely should the JSON of our CoveragePlan resource (which is a HL7.Fhir.Model.List) match the the example JSON provided on <a href="http://hl7.org">hl7.org</a>?  I ask this because the <strong>HL7.Fhir.Model.List </strong> model, when serialized, does not seem to match up with the example provided here: <a href="http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html">http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html</a></p>
</blockquote>
<p>It should at least resemble the example json, and I hope it does after you have constructed the complex extension correctly. If not, please give us some more details on the differences between your json and the example.</p>



<a name="217959102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/217959102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#217959102">(Nov 26 2020 at 02:04)</a>:</h4>
<p>And by using the fhir NuGet packages, you don't need to worry about the json or xml formatting, as those libs handle all that properly.</p>



<a name="219634057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/219634057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ger Vang <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#219634057">(Dec 11 2020 at 17:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191347">Mirjam Baltus</span> <a href="#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/217725058">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="365024">JA</span> <a href="#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/217715810">said</a>:</p>
<blockquote>
<p>1) This resource has a number of required "extensions".  What exactly does this look like in .NET? Something like the following?</p>
</blockquote>
<p>The code you mention is correct for adding a simple extension. The CoveragePlan also uses a complex/nested extension, and you will need to build this structure first, before adding it to the List resource:</p>
<div class="codehilite" data-code-language="C#"><pre><span></span><code>            <span class="kt">var</span> <span class="n">x</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Extension</span><span class="p">();</span>
            <span class="c1">// fill it with the main canonical URL of the definition</span>
            <span class="n">x</span><span class="p">.</span><span class="n">Url</span> <span class="p">=</span> <span class="s">"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension"</span><span class="p">;</span>
            <span class="c1">// add the first sub-extension</span>
            <span class="n">x</span><span class="p">.</span><span class="n">AddExtension</span><span class="p">(</span><span class="s">"drugTierID"</span><span class="p">,</span> <span class="k">new</span> <span class="n">CodeableConcept</span><span class="p">(&lt;</span><span class="n">system</span><span class="p">&gt;,&lt;</span><span class="k">value</span><span class="p">&gt;));</span>
            <span class="c1">// etc</span>
            <span class="n">list</span><span class="p">.</span><span class="n">Extension</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>2) How closely should the JSON of our CoveragePlan resource (which is a HL7.Fhir.Model.List) match the the example JSON provided on <a href="http://hl7.org">hl7.org</a>?  I ask this because the <strong>HL7.Fhir.Model.List </strong> model, when serialized, does not seem to match up with the example provided here: <a href="http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html">http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html</a></p>
</blockquote>
<p>It should at least resemble the example json, and I hope it does after you have constructed the complex extension correctly. If not, please give us some more details on the differences between your json and the example.</p>
</blockquote>
<p>As JA mentioned, our Extension model when serialized doesn't match up with the example from <a href="http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html">http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html</a>. Could it be because we're using Hl7.Fhir.R4 package version 1.9.0 and the example is using STU 1?</p>
<p>Here is an example code extension in a List:</p>
<div class="codehilite" data-code-language="C#"><pre><span></span><code><span class="n">List</span> <span class="n">l</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">();</span>
<span class="n">l</span><span class="p">.</span><span class="n">Status</span> <span class="p">=</span> <span class="n">List</span><span class="p">.</span><span class="n">ListStatus</span><span class="p">.</span><span class="n">Current</span><span class="p">;</span>
<span class="n">l</span><span class="p">.</span><span class="n">Mode</span> <span class="p">=</span> <span class="n">ListMode</span><span class="p">.</span><span class="n">Snapshot</span><span class="p">;</span>
<span class="n">l</span><span class="p">.</span><span class="n">Title</span> <span class="p">=</span> <span class="s">"All Coverage Plans"</span><span class="p">;</span>
<span class="n">l</span><span class="p">.</span><span class="n">Meta</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Meta</span><span class="p">()</span> <span class="p">{</span> <span class="n">Profile</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">string</span><span class="p">[]</span> <span class="p">{</span> <span class="s">"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-CoveragePlan"</span> <span class="p">}</span> <span class="p">};</span>
<span class="n">l</span><span class="p">.</span><span class="n">Id</span> <span class="p">=</span> <span class="s">"CoveragePlans"</span><span class="p">;</span>
<span class="n">l</span><span class="p">.</span><span class="n">Entry</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">List</span><span class="p">.</span><span class="n">EntryComponent</span><span class="p">&gt;();</span>

<span class="n">l</span><span class="p">.</span><span class="n">AddExtension</span><span class="p">(</span><span class="s">"DrugTierDefinition"</span><span class="p">,</span> <span class="k">new</span> <span class="n">CodeableConcept</span><span class="p">(</span><span class="s">"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension"</span><span class="p">,</span> <span class="s">"code"</span><span class="p">));</span>
</code></pre></div>
<p>Our extension output (Hl7.Fhir.R4 (1.9.0)):</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="s2">"extension"</span><span class="err">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"DrugTierDefinition"</span><span class="p">,</span>
            <span class="nt">"value"</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="nt">"systemElement"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension"</span><span class="p">,</span>
                    <span class="nt">"elementId"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
                    <span class="nt">"extension"</span><span class="p">:</span> <span class="p">[]</span>
                  <span class="p">},</span>
                  <span class="nt">"versionElement"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
                  <span class="nt">"codeElement"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"code"</span><span class="p">,</span>
                    <span class="nt">"elementId"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
                    <span class="nt">"extension"</span><span class="p">:</span> <span class="p">[]</span>
                  <span class="p">},</span>
                  <span class="nt">"displayElement"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
                  <span class="nt">"userSelectedElement"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
                  <span class="nt">"elementId"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
                  <span class="nt">"extension"</span><span class="p">:</span> <span class="p">[]</span>
                <span class="p">}</span>
              <span class="p">],</span>
              <span class="nt">"textElement"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
              <span class="nt">"elementId"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
              <span class="nt">"extension"</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">},</span>
            <span class="nt">"elementId"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nt">"extension"</span><span class="p">:</span> <span class="p">[]</span>
          <span class="p">}</span>
        <span class="p">]</span>
</code></pre></div>
<p>Sample from <a href="http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html">http://hl7.org/fhir/us/Davinci-drug-formulary/List-CoveragePlanV3004t.json.html</a>:<br>
<a href="/user_uploads/10155/fDBZRG4LY76asrW16739NUu0/fhir_stu_extension.png">fhir_stu_extension.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/fDBZRG4LY76asrW16739NUu0/fhir_stu_extension.png" title="fhir_stu_extension.png"><img src="/user_uploads/10155/fDBZRG4LY76asrW16739NUu0/fhir_stu_extension.png"></a></div>



<a name="219646204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/219646204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#219646204">(Dec 11 2020 at 18:53)</a>:</h4>
<p>The STU1 mentioned in the Implementation Guide is just the version of the IG, not the FHIR version. The IG is based on FHIR R4, so if you use the Hl7.Fhir.R4 library, that should give the correct result.<br>
However, I see in your example output that there are many fields that do not resemble correct FHIR data - it even has empty fields which FHIR does not allow. Question: do you use the Hl7.Fhir.Serialization library and the FhirJsonSerializer? If not, you will not likely end up with correct FHIR json.</p>



<a name="219654115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/219654115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ger Vang <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#219654115">(Dec 11 2020 at 19:56)</a>:</h4>
<p>We are not using Hl7.Fhir.Serialization and FhirJsonSerializer.  I will install the package and use FhirJsonSerializer to see if we can get it similar to the sample.</p>
<p>Also, thank you for clarifying the STU1.</p>



<a name="219656708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/219656708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#219656708">(Dec 11 2020 at 20:18)</a>:</h4>
<p>The serializer should actually already be in the R4 library, just add a using statement with Hl7.Fhir.Serialization to the code and you should be able to find the serializer plus methods.<br>
And I'm happy to help, those versionings have tripped me up multiple times as well!</p>



<a name="219661673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/219661673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ger Vang <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#219661673">(Dec 11 2020 at 21:01)</a>:</h4>
<p>I actually had to install Hl7.Fhir.Serialization separately and upgrade Hl7.Fhir.R4 1.9.0 to 2.0.1 otherwise there will be runtime error since Hl7.Fhir.Serialization is on 2.0.1.  The format looks good now.</p>
<p><a href="/user_uploads/10155/a-hIYMnzMCANN6b3xDrLrRca/fhir_npm.png">fhir_npm.png</a></p>
<p>I'm trying to add these extensions from <a href="http://hl7.org/fhir/us/Davinci-drug-formulary/StructureDefinition-usdf-CoveragePlan.html">http://hl7.org/fhir/us/Davinci-drug-formulary/StructureDefinition-usdf-CoveragePlan.html</a> but I'm unable to find "url, system, code and display".</p>
<p><a href="http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension">http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension</a><br>
<a href="http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-Network-extension">http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-Network-extension</a><br>
<a href="http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-SummaryURL-extension">http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-SummaryURL-extension</a><br>
<a href="http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-PlanIDType-extension">http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-PlanIDType-extension</a></p>



<a name="219667781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/219667781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#219667781">(Dec 11 2020 at 21:59)</a>:</h4>
<p>Looking at that profile it has some simple and complex extensions.<br>
I'm assuming that you've got the simple ones working fine with<br>
<code>list.AddExtension(urlX, new FhirString("stuff"));</code></p>
<p>Complex extensions are made by adding extensions like the above to an extension, and then adding the comolex extension itself in place of the new fhir strng.</p>



<a name="219857969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/219857969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ger Vang <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#219857969">(Dec 14 2020 at 15:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191367">Brian Postlethwaite</span> <a href="#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/219667781">said</a>:</p>
<blockquote>
<p>Looking at that profile it has some simple and complex extensions.<br>
I'm assuming that you've got the simple ones working fine with<br>
<code>list.AddExtension(urlX, new FhirString("stuff"));</code></p>
<p>Complex extensions are made by adding extensions like the above to an extension, and then adding the comolex extension itself in place of the new fhir strng.</p>
</blockquote>
<p>Are there any examples of how to do a complex extension?</p>



<a name="219909761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/219909761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ger Vang <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#219909761">(Dec 14 2020 at 22:13)</a>:</h4>
<p>We ended up doing something like this.  The serialized data looks similar to the sample output but I do have a few more questions.</p>
<p>What is the identifier value?<br>
What is the Entry Item ResourceReference value?</p>
<div class="codehilite" data-code-language="C#"><pre><span></span><code>            <span class="n">List</span> <span class="n">l</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">();</span>
            <span class="n">l</span><span class="p">.</span><span class="n">Identifier</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Identifier</span><span class="p">&gt;()</span> <span class="p">{</span> <span class="k">new</span> <span class="n">Identifier</span><span class="p">()</span> <span class="p">{</span> <span class="n">Value</span> <span class="p">=</span> <span class="s">""</span> <span class="p">}</span> <span class="p">};</span> <span class="c1">// what is this value?</span>
            <span class="n">l</span><span class="p">.</span><span class="n">Entry</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">List</span><span class="p">.</span><span class="n">EntryComponent</span><span class="p">()</span> <span class="p">{</span> <span class="n">Item</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ResourceReference</span><span class="p">(</span><span class="s">""</span><span class="p">)</span> <span class="p">});</span> <span class="c1">// what is this value?</span>

            <span class="n">Extension</span> <span class="n">drugTier</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Extension</span><span class="p">();</span>
            <span class="n">drugTier</span><span class="p">.</span><span class="n">Url</span> <span class="p">=</span> <span class="s">"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension"</span><span class="p">;</span>

            <span class="n">drugTier</span><span class="p">.</span><span class="n">Extension</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">Extension</span><span class="p">(</span><span class="s">"drugTierID"</span><span class="p">,</span> <span class="k">new</span> <span class="n">CodeableConcept</span><span class="p">(</span><span class="s">"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierCS"</span><span class="p">,</span> <span class="s">"generic"</span><span class="p">,</span> <span class="s">"Generic"</span><span class="p">)));</span>
            <span class="n">drugTier</span><span class="p">.</span><span class="n">Extension</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">Extension</span><span class="p">(</span><span class="s">"mailOrder"</span><span class="p">,</span> <span class="k">new</span> <span class="n">FhirBoolean</span><span class="p">(</span><span class="k">true</span><span class="p">)));</span>
            <span class="n">l</span><span class="p">.</span><span class="n">Extension</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">drugTier</span><span class="p">);</span>

            <span class="n">l</span><span class="p">.</span><span class="n">Extension</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">Extension</span><span class="p">(</span><span class="s">"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-Network-extension"</span><span class="p">,</span> <span class="k">new</span> <span class="n">FhirString</span><span class="p">(</span><span class="s">"PREFERRED"</span><span class="p">)));</span>
            <span class="n">l</span><span class="p">.</span><span class="n">Extension</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">Extension</span><span class="p">(</span><span class="s">"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-SummaryURL-extension"</span><span class="p">,</span> <span class="k">new</span> <span class="n">FhirString</span><span class="p">(</span><span class="s">"http://url/to/formulary/information"</span><span class="p">)));</span>
            <span class="n">l</span><span class="p">.</span><span class="n">Extension</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">Extension</span><span class="p">(</span><span class="s">"http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-PlanIDType-extension"</span><span class="p">,</span> <span class="k">new</span> <span class="n">FhirString</span><span class="p">(</span><span class="s">"HIOS-PLAN-ID"</span><span class="p">)));</span>
</code></pre></div>



<a name="220030984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/220030984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#220030984">(Dec 15 2020 at 19:38)</a>:</h4>
<p>The identifier will be your identifier for your CoveragePlan. There does not seem to be an agreed upon system to use for it, so any value you want the plan to be identified by would be good.<br>
The value of the entry should be a reference to a FormularyDrug, which is a profile on the MedicationKnowledge resource.<br>
Check the diagram on the homepage of the IG (<a href="http://hl7.org/fhir/us/Davinci-drug-formulary/index.html">http://hl7.org/fhir/us/Davinci-drug-formulary/index.html</a>) for the concepts involved and their links.</p>



<a name="220407454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/220407454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JA <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#220407454">(Dec 18 2020 at 18:00)</a>:</h4>
<p>Hey Mirjam, I have many questions and appreciate your continued support.</p>
<p><span class="user-mention silent" data-user-id="191347">Mirjam Baltus</span> <a href="#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/220030984">said</a>:</p>
<blockquote>
<p>The identifier will be your identifier for your CoveragePlan.<br>
The value of the entry should be a reference to a FormularyDrug, which is a profile on the MedicationKnowledge resource.</p>
</blockquote>
<p>The JSON examples for a CoveragePlan seem to have <strong>exactly </strong> 1 identifier, and 1 entry.. My organization has many (2,000+) CoveragePlans.  How does this look in our case?  Should we be returning ALL of them as identifiers?  Also, will there be an equal number of "entries"? <br>
I assume there would be many entries (FormularyDrugs/MedicationKnowledges) per identifier..  Any insight is very much appreciated.</p>



<a name="220561448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Resource%20Models%20%26%20Extensions/near/220561448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions.html#220561448">(Dec 21 2020 at 08:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="365024">JA</span> <a href="#narrow/stream/179171-dotnet/topic/Resource.20Models.20.26.20Extensions/near/220407454">said</a>:</p>
<blockquote>
<p>The JSON examples for a CoveragePlan seem to have <strong>exactly </strong> 1 identifier, and 1 entry.. My organization has many (2,000+) CoveragePlans.  How does this look in our case?  Should we be returning ALL of them as identifiers?</p>
</blockquote>
<p>I would indeed think that for each CoveragePlan you have in your system, you would have at least one identifier per plan. Depending on what the FHIR request is, you might have 1 or more CoveragePlans in your response.</p>
<blockquote>
<p>Also, will there be an equal number of "entries"? <br>
I assume there would be many entries (FormularyDrugs/MedicationKnowledges) per identifier..  Any insight is very much appreciated.</p>
</blockquote>
<p>I would assume as well, but I have no knowledge of DaVinci Pdex. These kind of questions are best posed in the DaVinci streams, like <a class="stream" data-stream-id="197730" href="/#narrow/stream/197730-Da-Vinci-PDex-Drug-Formulary">#Da Vinci PDex Drug Formulary</a>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
