---
layout: page
title: "FHIR Chat  · [ERROR] Profile xyz does not include a snapshot. · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/.5BERROR.5D.20Profile.20xyz.20does.20not.20include.20a.20snapshot.2E.html">[ERROR] Profile xyz does not include a snapshot.</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153897051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/%5BERROR%5D%20Profile%20xyz%20does%20not%20include%20a%20snapshot./near/153897051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theo Stolker <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/.5BERROR.5D.20Profile.20xyz.20does.20not.20include.20a.20snapshot.2E.html#153897051">(Jul 17 2017 at 11:26)</a>:</h4>
<p>Hi all,</p>
<p>Using the .NET Validator I now get the message: </p>
<div class="codehilite"><pre><span></span>    [ERROR] Profile xyz does not include a snapshot.
</pre></div>


<p>I have tried teh following Validationsettings:</p>
<div class="codehilite"><pre><span></span>            ValidationSettings ctx = new ValidationSettings()
            {
                ResourceResolver = sResourceresolver,
                GenerateSnapshot = true,
                EnableXsdValidation = true,
                Trace = false,
                ResolveExteralReferences = true,
            };
</pre></div>


<p>Also with  the additional </p>
<div class="codehilite"><pre><span></span>   GenerateSnapshotSettings = new Hl7.Fhir.Specification.Snapshot.SnapshotGeneratorSettings() { 
    GenerateSnapshotForExternalProfiles = true }
</pre></div>


<p>the error persists.</p>
<p>So is the rule that each profile always includes the snapshot, or is there a way to make the Validator generate the Snapshots itself?</p>



<a name="153897053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/%5BERROR%5D%20Profile%20xyz%20does%20not%20include%20a%20snapshot./near/153897053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/.5BERROR.5D.20Profile.20xyz.20does.20not.20include.20a.20snapshot.2E.html#153897053">(Jul 17 2017 at 11:36)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192814">@Theo Stolker</span>, please make sure that you are using a <em>CachedResourceResolver</em>, so  the generated snapshots are actually persisted.</p>



<a name="153897055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/%5BERROR%5D%20Profile%20xyz%20does%20not%20include%20a%20snapshot./near/153897055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/.5BERROR.5D.20Profile.20xyz.20does.20not.20include.20a.20snapshot.2E.html#153897055">(Jul 17 2017 at 11:38)</a>:</h4>
<p>By default, the resolvers create and return a new object instance on each request. Use a wrapping CachedResourceResolver in order to persist all resolved resources in memory.</p>



<a name="153897056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/%5BERROR%5D%20Profile%20xyz%20does%20not%20include%20a%20snapshot./near/153897056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theo Stolker <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/.5BERROR.5D.20Profile.20xyz.20does.20not.20include.20a.20snapshot.2E.html#153897056">(Jul 17 2017 at 11:40)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="191336">@Michel Rutten</span> , I am using that:</p>
<div class="codehilite"><pre><span></span>            sResourceresolver = new CachedResolver(
                new MultiResolver(
                    new DirectorySource(@&quot;...\specification&quot;),
                    new DirectorySource(@&quot;...\StructureDefinition&quot;, true)
                    )
                );
</pre></div>


<p>Should that work as well, having the Multiresolver output cached?</p>
<p>The StructureDefinition it complains about is in the second directory.</p>



<a name="153897057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/%5BERROR%5D%20Profile%20xyz%20does%20not%20include%20a%20snapshot./near/153897057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/.5BERROR.5D.20Profile.20xyz.20does.20not.20include.20a.20snapshot.2E.html#153897057">(Jul 17 2017 at 11:42)</a>:</h4>
<p>That should work...?</p>



<a name="153897058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/%5BERROR%5D%20Profile%20xyz%20does%20not%20include%20a%20snapshot./near/153897058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theo Stolker <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/.5BERROR.5D.20Profile.20xyz.20does.20not.20include.20a.20snapshot.2E.html#153897058">(Jul 17 2017 at 11:52)</a>:</h4>
<p>I guess I know what's the problem, there is a missing part it needs for generating the snapshot. Let me first fix that one.</p>



<a name="153897192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/%5BERROR%5D%20Profile%20xyz%20does%20not%20include%20a%20snapshot./near/153897192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theo Stolker <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/.5BERROR.5D.20Profile.20xyz.20does.20not.20include.20a.20snapshot.2E.html#153897192">(Jul 18 2017 at 09:13)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191336">@Michel Rutten</span> , that indeed solved the problem!</p>
<p>A related question is: Can I Enumerate over all resources that I have found using a CachedResolver? I would like to offer a dropdown in the UI, e.g. for all available StructureDefinitions or OperationDefinitions when editing a CapabilityStatement. I do not see an enumeration interface on the Resolvers...</p>



<a name="153897193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/%5BERROR%5D%20Profile%20xyz%20does%20not%20include%20a%20snapshot./near/153897193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/.5BERROR.5D.20Profile.20xyz.20does.20not.20include.20a.20snapshot.2E.html#153897193">(Jul 18 2017 at 09:36)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192814">@Theo Stolker</span>, the API provides a separate IConformanceSource interface that allows enumeration. The DirectorySource class implements this interface. So you can enumerate the wrapped DirectorySource itself, but not the CachedResolver wrapper.</p>



<a name="153897194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/%5BERROR%5D%20Profile%20xyz%20does%20not%20include%20a%20snapshot./near/153897194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/.5BERROR.5D.20Profile.20xyz.20does.20not.20include.20a.20snapshot.2E.html#153897194">(Jul 18 2017 at 09:37)</a>:</h4>
<p>(motivation: you can also wrap a CachedResolver around a source that is not enumerable, e.g. an online source).</p>



<a name="153897195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/%5BERROR%5D%20Profile%20xyz%20does%20not%20include%20a%20snapshot./near/153897195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theo Stolker <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/.5BERROR.5D.20Profile.20xyz.20does.20not.20include.20a.20snapshot.2E.html#153897195">(Jul 18 2017 at 09:38)</a>:</h4>
<p>Great, thanks!!!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
