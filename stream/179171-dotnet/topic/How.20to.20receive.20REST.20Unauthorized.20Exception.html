---
layout: page
title: "FHIR Chat  · How to receive REST Unauthorized Exception · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20receive.20REST.20Unauthorized.20Exception.html">How to receive REST Unauthorized Exception</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="248734492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/How%20to%20receive%20REST%20Unauthorized%20Exception/near/248734492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Miller <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20receive.20REST.20Unauthorized.20Exception.html#248734492">(Aug 07 2021 at 20:38)</a>:</h4>
<p>I've noticed that when I use an expired token with the SDK (v4, latest version), on a search or read operation, what gets thrown is an ArgumentNullException with message "Value cannot be null. (Parameter 'key')" instead of the expected authorization exception. Looking at the stack trace, the exception originates in the parsing subroutines. This is surprising, since the REST operation would have failed with a 401 error (which I've confirmed with Postman), so I don't know why the result is sent through for parsing. Is it possible that my FhirClient settings, which are permissive, are leading to this behavior? Obviously, I'd prefer to get the proper Authorization exception so I can provide the appropriate error message to the user and launch the process of getting a new token.</p>



<a name="248811932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/How%20to%20receive%20REST%20Unauthorized%20Exception/near/248811932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20receive.20REST.20Unauthorized.20Exception.html#248811932">(Aug 09 2021 at 06:58)</a>:</h4>
<p>The SDK will parse any non-null body. When it cannot not parsed, this will be caught and handled gracefully to return the raw contents  - as a FhirOperationException.  The fact that this is raises an ArgumentNullException means that you've found a bug in the handling here - something is happening that we are not expecting to happen, so we'd need to debug this.   Can you file an issue here: <a href="https://github.com/FirelyTeam/firely-net-sdk/issues">https://github.com/FirelyTeam/firely-net-sdk/issues</a> with as much information as you can so we can try to reproduce it?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
