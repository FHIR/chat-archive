---
layout: page
title: "FHIR Chat  · How to get all the resources where one resource is referred? · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20get.20all.20the.20resources.20where.20one.20resource.20is.20referred.3F.html">How to get all the resources where one resource is referred?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="161835282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/How%20to%20get%20all%20the%20resources%20where%20one%20resource%20is%20referred%3F/near/161835282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20get.20all.20the.20resources.20where.20one.20resource.20is.20referred.3F.html#161835282">(Mar 27 2019 at 07:27)</a>:</h4>
<p>How to get all the resources where one resource is referred, using FHIR Net Api? let's say get all the resources where Patient resource exist as the subject for example Observation and Condition?</p>
<p>Is there anything in FHIR Net Api to address this? like we have all the search parameters in modelinfo</p>
<p>if not, then anyone has done any workaround to achieve this kindly share then.</p>



<a name="161855540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/How%20to%20get%20all%20the%20resources%20where%20one%20resource%20is%20referred%3F/near/161855540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20get.20all.20the.20resources.20where.20one.20resource.20is.20referred.3F.html#161855540">(Mar 27 2019 at 12:51)</a>:</h4>
<p>You have to search each resource: .eg ../Observation?patient=xxx gives you all the observation referencing that patient and so on</p>



<a name="161855583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/How%20to%20get%20all%20the%20resources%20where%20one%20resource%20is%20referred%3F/near/161855583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20get.20all.20the.20resources.20where.20one.20resource.20is.20referred.3F.html#161855583">(Mar 27 2019 at 12:51)</a>:</h4>
<p>In the specific case of patients there is the $everything operation that does that in one go</p>



<a name="161929942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/How%20to%20get%20all%20the%20resources%20where%20one%20resource%20is%20referred%3F/near/161929942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20get.20all.20the.20resources.20where.20one.20resource.20is.20referred.3F.html#161929942">(Mar 28 2019 at 07:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191912">@Michele Mottini</span> No no, I am asking in the context of C# code, the FHIR Net API. Not in the context of FHIR search.</p>



<a name="162233224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/How%20to%20get%20all%20the%20resources%20where%20one%20resource%20is%20referred%3F/near/162233224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20get.20all.20the.20resources.20where.20one.20resource.20is.20referred.3F.html#162233224">(Apr 01 2019 at 12:24)</a>:</h4>
<blockquote>
<p>How to get all the resources where one resource is referred, using FHIR Net Api? let's say get all the resources where Patient resource exist as the subject for example Observation and Condition?</p>
<p>Is there anything in FHIR Net Api to address this? like we have all the search parameters in modelinfo</p>
<p>if not, then anyone has done any workaround to achieve this kindly share then.</p>
</blockquote>
<p>Easiest is to load the structuredefinition of the standard, that contain all the data about the models.   Then go over all the elements in the StructureDefinitions and filter where the typeref.code is "Reference".   All structuredefinitions are shipped with the .NET   Hl7.Fhir.Specification library, so you could load them from there:</p>
<div class="codehilite"><pre><span></span><span class="na">  [TestMethod]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">bla</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="c1">// src gives access to all definitions in the specification.zip</span>
            <span class="kt">var</span> <span class="n">src</span> <span class="p">=</span> <span class="n">ZipSource</span><span class="p">.</span><span class="n">CreateValidationSource</span><span class="p">();</span>

            <span class="c1">// Retrieve all canonical ids for the structure definitions</span>
            <span class="kt">var</span> <span class="n">allCanonicals</span> <span class="p">=</span> <span class="n">src</span><span class="p">.</span><span class="n">ListResourceUris</span><span class="p">(</span><span class="n">Model</span><span class="p">.</span><span class="n">ResourceType</span><span class="p">.</span><span class="n">StructureDefinition</span><span class="p">);</span>

            <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">ElementDefinition</span><span class="p">&gt;();</span>
            <span class="c1">// For each structuredefinition, find the relevant elements</span>
            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">canonical</span> <span class="k">in</span> <span class="n">allCanonicals</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">var</span> <span class="n">sd</span> <span class="p">=</span> <span class="p">(</span><span class="n">StructureDefinition</span><span class="p">)</span><span class="n">src</span><span class="p">.</span><span class="n">ResolveByUri</span><span class="p">(</span><span class="n">canonical</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(!</span><span class="n">sd</span><span class="p">.</span><span class="n">HasSnapshot</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">NotSupportedException</span><span class="p">(</span><span class="s">&quot;Oops, really need snapshots&quot;</span><span class="p">);</span>

                <span class="kt">var</span> <span class="n">elems</span> <span class="p">=</span> <span class="n">sd</span><span class="p">.</span><span class="n">Snapshot</span><span class="p">.</span><span class="n">Element</span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">e</span> <span class="p">=&gt;</span> <span class="n">e</span><span class="p">.</span><span class="n">Type</span><span class="p">.</span><span class="n">Any</span><span class="p">(</span><span class="n">t</span><span class="p">=&gt;</span> <span class="n">t</span><span class="p">.</span><span class="n">Code</span> <span class="p">==</span> <span class="s">&quot;Reference&quot;</span><span class="p">));</span>
                <span class="n">result</span><span class="p">.</span><span class="n">AddRange</span><span class="p">(</span><span class="n">elems</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">el</span> <span class="k">in</span> <span class="n">result</span><span class="p">)</span>
                <span class="n">Debug</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="err">$</span><span class="s">&quot;{el.Path}&quot;</span><span class="p">);</span>

        <span class="p">}</span>
</pre></div>



<a name="164072645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/How%20to%20get%20all%20the%20resources%20where%20one%20resource%20is%20referred%3F/near/164072645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20get.20all.20the.20resources.20where.20one.20resource.20is.20referred.3F.html#164072645">(Apr 24 2019 at 11:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> Thank you so much. I'll surely look into this.</p>



<a name="181297491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/How%20to%20get%20all%20the%20resources%20where%20one%20resource%20is%20referred%3F/near/181297491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20get.20all.20the.20resources.20where.20one.20resource.20is.20referred.3F.html#181297491">(Nov 21 2019 at 12:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span>  Can I also get the maturity level of a resource from the specification file?</p>



<a name="181591818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/How%20to%20get%20all%20the%20resources%20where%20one%20resource%20is%20referred%3F/near/181591818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20get.20all.20the.20resources.20where.20one.20resource.20is.20referred.3F.html#181591818">(Nov 21 2019 at 22:38)</a>:</h4>
<p>There is an extension in the SD, don't recall if we strip it out.</p>



<a name="181911407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/How%20to%20get%20all%20the%20resources%20where%20one%20resource%20is%20referred%3F/near/181911407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/How.20to.20get.20all.20the.20resources.20where.20one.20resource.20is.20referred.3F.html#181911407">(Nov 26 2019 at 11:17)</a>:</h4>
<p>It is not stripped out, and it is in the root extension element, the extension with url '<a href="http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm" target="_blank" title="http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm">http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm</a>'.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
