---
layout: page
title: "FHIR Chat  · Using two custom Basic resources · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html">Using two custom Basic resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="216892482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216892482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216892482">(Nov 16 2020 at 16:10)</a>:</h4>
<p>We have two custom resources that both inherits from the Basic resource. But how do we call these resources using the dotnet client? I tried to set up our server (Hapi) with two resource providers listening on /MyResource1 and /MyResource2, which works good.<br>
The dotnet client app has a custom class inheriting from Basic that I intended to use. But that did not work since the parser in the dotnet library could not find a correct ClassMapper.<br>
Has anyone had this problem and can share some tips?</p>



<a name="216895051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216895051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216895051">(Nov 16 2020 at 16:26)</a>:</h4>
<p>Basic is not a derivation for customization, it's always that class and you add extensions to it.<br>
<a href="https://brianpos.com/2018/05/03/code-generation-fhir-custom-resources/">https://brianpos.com/2018/05/03/code-generation-fhir-custom-resources/</a><br>
/MyResource1 and /MyResource2 are not fhir standard resources,  however /Basic is a standard FHIR resource, and the code property is how you split between multiple different "types" of basic resource, but they are all at the same .Basic endpoint</p>



<a name="216972049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216972049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216972049">(Nov 17 2020 at 07:11)</a>:</h4>
<p>Ah, didn't know that 'code' is what you should use for that.  Great :).<br>
 Thanks Brian!</p>



<a name="216973662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216973662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216973662">(Nov 17 2020 at 07:43)</a>:</h4>
<p>Hmmm... a question... how do you do a read on those particular resourses then? /Basic/&lt;id&gt; could be either  MyResource1 or MyResource2.</p>



<a name="216975285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216975285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216975285">(Nov 17 2020 at 08:10)</a>:</h4>
<p>'code' is a search parameter, so that's one option if you're not sure about the &lt;id&gt;. If you already have the &lt;id&gt; then a GET /Basic/&lt;id&gt; will return your resource, regardless of the value of its code data element</p>



<a name="216976450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216976450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216976450">(Nov 17 2020 at 08:26)</a>:</h4>
<p>If the server receives an &lt;Id&gt; in this case, then it wont know if it's the &lt;Id&gt; of the underlying resources 'MyResource1' or 'MyResource2'. <br>
What is best practise in this scenario? To use a custom request header specifying what resource intended? Or using the endpoint as this: /Basic/&lt;Id&gt;/MyResource1.</p>



<a name="216983284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216983284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216983284">(Nov 17 2020 at 09:51)</a>:</h4>
<p>The fhir seriizer can always handle the Basic resource, as all the extras are there through the standard extensibility.</p>



<a name="216983317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216983317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216983317">(Nov 17 2020 at 09:51)</a>:</h4>
<p>No need for a special handler.</p>



<a name="216985401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216985401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lindstrom <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216985401">(Nov 17 2020 at 10:15)</a>:</h4>
<p>But if you have a Read operation, and a number of different resources encapsulated in  Basic (different profiles/underlying resources), is there any mechanism to tell which profile to read?</p>



<a name="216987799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216987799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216987799">(Nov 17 2020 at 10:44)</a>:</h4>
<p>If you do a Read of a Basic resource, after getting the response your code path can split on the Basic.code field.</p>



<a name="216988625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216988625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lindstrom <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216988625">(Nov 17 2020 at 10:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191347">Mirjam Baltus</span> <a href="#narrow/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resou/near/216987799">said</a>:</p>
<blockquote>
<p>If you do a Read of a Basic resource, after getting the response your code path can split on the Basic.code field.</p>
</blockquote>
<p>Hi Mirjam</p>
<p>Thanks for your response. </p>
<p>My problem is that the project I am working on is not a pure FHIR-project, rather it is to add a FHIR layer as external access technology for an old, existing system. And that system  makes it difficult to read the different underlying resources . I nstead we must  know what to read and map so to speak. </p>
<p>There's  some ideas how to get around that problem that does not involve creating new endpoints, but I thought to explore if there was some existing support for this. So I guess a custom solution that does not violates the standard is what we'll have tp implement. :)</p>



<a name="216989285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216989285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216989285">(Nov 17 2020 at 11:03)</a>:</h4>
<p><span class="user-mention" data-user-id="241617">@Stefan Lindstrom</span> Thanks for the explanation. I was thinking client side, not server side. :) In order to stay FHIR compliant, you could perhaps choose not to support Read interactions on Basic, but only searches that search on code field/id combination. Or you could keep a list of id/profile server side, so you can use that to reach out to the correct part of the existing system.</p>



<a name="216989739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216989739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lindstrom <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216989739">(Nov 17 2020 at 11:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191347">Mirjam Baltus</span> <a href="#narrow/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resou/near/216989285">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="241617">Stefan Lindstrom</span> Thanks for the explanation. I was thinking client side, not server side. :) In order to stay FHIR compliant, you could perhaps choose not to support Read interactions on Basic, but only searches that search on code field/id combination. Or you could keep a list of id/profile server side, so you can use that to reach out to the correct part of the existing system.</p>
</blockquote>
<p>Yes, it's something along those lines we've been thinking (and some others). Thanks for the replies and ideas.</p>



<a name="216994976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216994976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216994976">(Nov 17 2020 at 12:14)</a>:</h4>
<p>I think we might reach out to the hapi stream, to see if anyone has any tips on this scenario, since the question might be more server-related than client related. For info, we did try calling our custom /MyResource endpoint with the hapi client and that actually worked. But it didn't work using the .net library unfortunately.</p>



<a name="216995991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/216995991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#216995991">(Nov 17 2020 at 12:27)</a>:</h4>
<p>You might also choose to have your id's (since they sound like they will be facaded too) have a prefix in them, eg id="R1-1234" and "R2-1234" and the ID contains the non fhir resource type.<br>
But you'd still need to do what Mirjam suggests in terms of  search, requiring the code to be there too.<br>
Do note that you only have limitted char count (64) available in the id property.</p>



<a name="217001604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/217001604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#217001604">(Nov 17 2020 at 13:27)</a>:</h4>
<p>Unfortunately the Id's are UUID's and not facaded. So we have no power over them.<br>
One solution, even though it might be a little bit special, would be to disallow READ and use SEARCH on the /Basic endpoint instead. In that case the server can receive an Id _and_ a code (or type).  The client must then be made aware of this, and expect a Bundle as output.</p>



<a name="217007549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/217007549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#217007549">(Nov 17 2020 at 14:19)</a>:</h4>
<blockquote>
<p>Unfortunately the Id's are UUID's and not facaded.</p>
</blockquote>
<p>This sound strange to me, they are resources you implemented, surely you should be able to control how their ids are generated and used (?)</p>



<a name="217018155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/217018155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#217018155">(Nov 17 2020 at 15:34)</a>:</h4>
<p>Sorry to say that we don't. Our layer (the fhir server layer) is just one of many consumers of the  internal services (new and old).</p>



<a name="217028064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/217028064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#217028064">(Nov 17 2020 at 16:39)</a>:</h4>
<p>So the FHIR server layer receives <code>GET [base]/Basic/R1-[guid]</code>, sees the R1 prefix, strips it and go get the data for the <code>[guid]</code> resource 1 from the internal services, and when creating the FHIR resource appends the <code>R1-</code> prefix to the internal GUID to create the FHIR id  ?</p>



<a name="217032452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/217032452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#217032452">(Nov 17 2020 at 17:10)</a>:</h4>
<p>This is exactly what I've done on 2 projects.<br>
One of them was splitting Observations types from different sql tables.</p>



<a name="217122012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Using%20two%20custom%20Basic%20resources/near/217122012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Using.20two.20custom.20Basic.20resources.html#217122012">(Nov 18 2020 at 11:20)</a>:</h4>
<p>It could be a valid solution.... Hmmm...<br>
We have other consumers (for example a web app), besides our fhir server, that are using the underlying resources and their Id's. If the Id's get exposed to the end client from the other consumers, we would then be in a position where we would expose the same resource but with different Id's depending on which application you are using.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
