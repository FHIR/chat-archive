---
layout: page
title: "FHIR Chat  · Performing a batch request · dotnet"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/index.html">dotnet</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html">Performing a batch request</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153923928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923928">(Dec 09 2017 at 19:17)</a>:</h4>
<p>Hello,<br>
How is it possible for me to build a batch request in the .NET  FHIR API?</p>



<a name="153923934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923934">(Dec 09 2017 at 20:00)</a>:</h4>
<p>var bundle = new Bundle() { Type = Bundle.BundleType.Batch };</p>



<a name="153923937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923937">(Dec 09 2017 at 20:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span>  Thank you, can the TransactionBuilder be used as well in that case or?</p>



<a name="153923938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923938">(Dec 09 2017 at 20:16)</a>:</h4>
<p>A Bundle can be either batch or transaction. If you need transaction, use TransactionBuider.</p>



<a name="153923940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923940">(Dec 09 2017 at 20:21)</a>:</h4>
<p>Then why is there a parameter in transaction builder that accepts the type of bundle to be returned: <br>
<a href="/user_uploads/10155/JkEdz5Lwye3kPicauCGsTBNN/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/JkEdz5Lwye3kPicauCGsTBNN/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/JkEdz5Lwye3kPicauCGsTBNN/pasted_image.png"></a></div>



<a name="153923941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923941">(Dec 09 2017 at 20:25)</a>:</h4>
<p>Interesting. That means TransactionBuilder can be used to build batch bundle. I always use Bundle itself for batch request. Anyway, now I think the difference is like String vs StringBuilder. Just pick one you are comfortable with.</p>



<a name="153923945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923945">(Dec 09 2017 at 20:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span>  Alright, thank you for the clarification, I will consider your aproach aswell, it's good to know that both work. You are right, it's very similar to the StringBuilder.</p>



<a name="153923974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923974">(Dec 10 2017 at 00:23)</a>:</h4>
<p>I am facing one problem however, whenever I build all of my get request, with the TransactionBuilder and execute the transaction of batches, it doesn't do the GET requests, when I tried the URLs they work just fine, am I doing something wrong or?</p>



<a name="153923976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923976">(Dec 10 2017 at 00:49)</a>:</h4>
<p>code snippit would be useful.<br>
When I'm developing I often run fiddler in the background so that I can examine and understand what is going over the wire.<br>
With a Batch operation, there is only a single call, which is the POST of the bundle to the endpoint. All of the interactions inside the bundle are executed on the server, and the results are found in the returned bundle.<br>
Hope that helps.</p>



<a name="153923977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923977">(Dec 10 2017 at 01:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>  Basically, what I am doing, is the following, I add string GET requests, to a list. After I add them to the list, I build a transaction, based on each GET request, which was built using those strings, the following way:<br>
<a href="/user_uploads/10155/S1VAyuRfvtDM6d0isUI-e6ox/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a><br>
 And after that is done, I execute a transaction, which is supposed to post that batch, with the get requests.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/S1VAyuRfvtDM6d0isUI-e6ox/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/S1VAyuRfvtDM6d0isUI-e6ox/pasted_image.png"></a></div>



<a name="153923978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923978">(Dec 10 2017 at 01:15)</a>:</h4>
<p><a href="/user_uploads/10155/AD8ywpiYzIOL3WKuaz7LVUo6/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a><br>
Those are the get requests<br>
I get a 404 Error Unknown resource type 'http:'</p>
<div class="message_inline_image"><a href="/user_uploads/10155/AD8ywpiYzIOL3WKuaz7LVUo6/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/AD8ywpiYzIOL3WKuaz7LVUo6/pasted_image.png"></a></div>



<a name="153923982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923982">(Dec 10 2017 at 01:37)</a>:</h4>
<p>That does look strange, not sure what {lastN} is, it looks like its going to mess with the Resource name, should that be on the left of the "?"</p>



<a name="153923983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923983">(Dec 10 2017 at 01:46)</a>:</h4>
<p>In my case lastn is empty string, because hapi server, doesn't support the lastn operation <a href="http://hl7.org/fhir/STU3/observation-operations.html#lastn" target="_blank" title="http://hl7.org/fhir/STU3/observation-operations.html#lastn">http://hl7.org/fhir/STU3/observation-operations.html#lastn</a><br>
<a href="/user_uploads/10155/Qtukdpc4h7yMGs1BwtpQPPeJ/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/Qtukdpc4h7yMGs1BwtpQPPeJ/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/Qtukdpc4h7yMGs1BwtpQPPeJ/pasted_image.png"></a></div>



<a name="153923989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153923989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153923989">(Dec 10 2017 at 03:00)</a>:</h4>
<p>You have uri.Unescape, I think you meant to have Uri.EscapeString</p>



<a name="153924034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153924034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153924034">(Dec 10 2017 at 13:07)</a>:</h4>
<p>(deleted)</p>



<a name="153924035"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153924035" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153924035">(Dec 10 2017 at 13:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>  it's very strange, because when I look into the transaction builder, where the for one of the element URl is, for example "<a href="http://fhirtest.uhn.ca/baseDstu3/Observation?patient=Patient/330828&amp;code=http://loinc.org|8302-2,http://loinc.org|8306-3,http://loinc.org|8308-9&amp;date=ge2013-11-12T00:00:00" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation?patient=Patient/330828&amp;code=http://loinc.org|8302-2,http://loinc.org|8306-3,http://loinc.org|8308-9&amp;date=ge2013-11-12T00:00:00">http://fhirtest.uhn.ca/baseDstu3/Observation?patient=Patient/330828&amp;code=http://loinc.org|8302-2,http://loinc.org|8306-3,http://loinc.org|8308-9&amp;date=ge2013-11-12T00:00:00</a>", executes just fine in postman, however it gives that error when its sent as a transaction.</p>



<a name="153924038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153924038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153924038">(Dec 10 2017 at 13:37)</a>:</h4>
<p>(deleted)</p>



<a name="153924044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153924044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153924044">(Dec 10 2017 at 14:19)</a>:</h4>
<p>Ok I found out what he problem is, basically in the request URL of each entry in the Bundle, it starts with the Server URI, which was the parameter of the transaction bundle, and whenever I would execute the Transaction, it would execute the get Request like so: [baseUrl]/[baseUrl]/Observation?patient=Patient etc..</p>



<a name="153924045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179171-dotnet/topic/Performing%20a%20batch%20request/near/153924045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dimitar <a href="https://fhir.github.io/chat-archive/stream/179171-dotnet/topic/Performing.20a.20batch.20request.html#153924045">(Dec 10 2017 at 14:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> So Yunwei, I think your approach is the way to go :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
