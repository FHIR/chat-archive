---
layout: page
title: "FHIR Chat  · FHIR EXTENSIONS · CCDA / FHIR mapping stream"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/index.html">CCDA / FHIR mapping stream</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html">FHIR EXTENSIONS</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="170553845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/170553845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roney A <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#170553845">(Jul 10 2019 at 16:02)</a>:</h4>
<p>Hi Lloyd–not clear on how to create an extension?  </p>
<p>Q1. Do we need to PUBLISH it? Where we need to publish it? <br>
Q2. Do we create a profile? <br>
Q3. Do we state in the capability statement?</p>
<p><a href="https://fhirblog.com/2017/04/12/so-you-want-to-create-a-fhir-extension/" target="_blank" title="https://fhirblog.com/2017/04/12/so-you-want-to-create-a-fhir-extension/">https://fhirblog.com/2017/04/12/so-you-want-to-create-a-fhir-extension/</a></p>
<p>Could you please give an example, for creating an Extension for any ONE of the following  ATTRIBUTION column? Assuming we can associate it with one of  the FHIR resources, for example patient.</p>
<p>1. Column name: snp_member; Description: Specialneedplans (for a member)<br>
&lt;patient.<br>
 &lt;extension&gt;<br>
    &lt;url value="http://hl7.org/fhir/StructureDefinition/special-needplans-Member"/&gt;<br>
    &lt;valueString value="plan0001"/&gt;<br>
&lt;/extension&gt;<br>
&lt;/patient&gt;</p>
<p>2. Column name: li_subsidy; Description: Low income subsidy (provided to medicare enrolled low income)<br>
3. Column name: ym_attribution; Description: Year and month of attribution<br>
4. Column name: att_method; Description: Attribution method<br>
5. Column name: qtr_active; Description: Quarter in which patient is active</p>



<a name="170577375"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/170577375" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#170577375">(Jul 10 2019 at 20:34)</a>:</h4>
<p>1. Yes.  Ina registry of your choice.  Simplified or <a href="http://registry.fhir.org" target="_blank" title="http://registry.fhir.org">registry.fhir.org</a> are options <br>
2. Yes.  Extension definitions are profiles on the Extension data type <br>
3. No need<br>
Not at my computer.  Take a look at the numerous extension definitions in the core spec to use as examples.</p>



<a name="170595801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/170595801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roney A <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#170595801">(Jul 11 2019 at 02:00)</a>:</h4>
<blockquote>
<p>1. Yes.  Ina registry of your choice.  Simplified or <a href="http://registry.fhir.org" target="_blank" title="http://registry.fhir.org">registry.fhir.org</a> are options <br>
2. Yes.  Extension definitions are profiles on the Extension data type <br>
3. No need<br>
Not at my computer.  Take a look at the numerous extension definitions in the core spec to use as examples.</p>
</blockquote>
<p>Thank you Lloyd.</p>



<a name="171121544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171121544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roney A <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171121544">(Jul 17 2019 at 22:05)</a>:</h4>
<p>Hi Lloyd, could you please confirm if this is the correct approach to create an extension for social history element “OnsetYear”. Is the resource type correct? Or the resource type should be “patient”?</p>
<p>Please let me know.</p>
<hr>
<p>{<br>
  "resourceType": "StructureDefinition",<br>
  "extension": [<br>
    {<br>
      "url": "http:/test.com/fhir/StructureDefinition/cfAuthor",<br>
      "valueBoolean": true<br>
    },<br>
    {<br>
      "url": "<a href="http://clinfhir.com/StructureDefinition/userEmail" target="_blank" title="http://clinfhir.com/StructureDefinition/userEmail">http://clinfhir.com/StructureDefinition/userEmail</a>",<br>
      "valueString": “Roney@mymail.com”<br>
    }<br>
  ],<br>
  "id": "socialhistoryOnsetYear",<br>
  "url": "<a href="http://fhirtest.uhn.ca/baseDstu3/StructureDefinition/socialhistoryOnsetYear" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/StructureDefinition/socialhistoryOnsetYear">http://fhirtest.uhn.ca/baseDstu3/StructureDefinition/socialhistoryOnsetYear</a>",<br>
  "name": "socialhistoryOnsetYear",<br>
  "status": "draft",<br>
  "abstract": false,<br>
  "publisher": “Roney”,<br>
  "contextType": "resource",<br>
  "description": " This column will capture the year which was specified by the patient.",<br>
  "context": [<br>
    "<a href="http://StructureDefinition.name" target="_blank" title="http://StructureDefinition.name">StructureDefinition.name</a>"<br>
  ],<br>
  "kind": "complex-type",<br>
  "type": "Extension",<br>
  "baseDefinition": "<a href="http://hl7.org/fhir/StructureDefinition/Extension" target="_blank" title="http://hl7.org/fhir/StructureDefinition/Extension">http://hl7.org/fhir/StructureDefinition/Extension</a>",<br>
  "derivation": "constraint",<br>
  "snapshot": {<br>
    "element": [<br>
      {<br>
        "path": "Extension",<br>
        "label": "date0",<br>
        "min": 0,<br>
        "max": "1",<br>
        "definition": "No Description",<br>
        "base": {<br>
          "path": "Extension",<br>
          "min": 0,<br>
          "max": "1"<br>
        },<br>
        "id": "Extension0"<br>
      },<br>
      {<br>
        "path": "Extension.url",<br>
        "label": "date0",<br>
        "representation": [<br>
          "xmlAttr"<br>
        ],<br>
        "definition": "No Description",<br>
        "min": 1,<br>
        "max": "1",<br>
        "type": [<br>
          {<br>
            "code": "uri"<br>
          }<br>
        ],<br>
        "fixedUri": "date0",<br>
        "base": {<br>
          "path": "Extension.url",<br>
          "min": 1,<br>
          "max": "1"<br>
        },<br>
        "id": "Extension.url0"<br>
      },<br>
      {<br>
        "path": "Extension.valueDate",<br>
        "label": "date0",<br>
        "definition": "No Description",<br>
        "min": 0,<br>
        "max": "1",<br>
        "type": [<br>
          {<br>
            "code": "date"<br>
          }<br>
        ],<br>
        "base": {<br>
"path": "Extension.valueDate",<br>
          "min": 0,<br>
          "max": "1"<br>
        },<br>
        "id": "Extension.value[x]0"<br>
      }<br>
    ]<br>
  }<br>
}</p>



<a name="171123498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171123498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171123498">(Jul 17 2019 at 22:40)</a>:</h4>
<p>The fixedUri can't be date0 - it needs to be the canonical URL for the extension.  You need to assert that Extension.value[x] is mandatory and can only be a date (and that Extension.extension is prohibited).  Finally, why are you communicating your email as an extension instead of in StructureDefinition.contact - which is intended for that purpose?</p>



<a name="171128580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171128580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roney A <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171128580">(Jul 18 2019 at 00:21)</a>:</h4>
<blockquote>
<p>The fixedUri can't be date0 - it needs to be the canonical URL for the extension.  You need to assert that Extension.value[x] is mandatory and can only be a date (and that Extension.extension is prohibited).  Finally, why are you communicating your email as an extension instead of in StructureDefinition.contact - which is intended for that purpose?</p>
</blockquote>
<p>Thank you Lloyd.  Agree on the contact and others.  ALL was generated by default using <a href="http://clinfhir.com/EDBuilder.html" target="_blank" title="http://clinfhir.com/EDBuilder.html">http://clinfhir.com/EDBuilder.html</a>.</p>
<p>Please see responses below:</p>
<p>Not clear on #2: Hi Lloyd, could you please provide an example: Extension.value[x] is mandatory and can only be a date (and that Extension.extension is prohibited)</p>
<p>Question 1: Where do we see Extension.extension? Sorry, if I missed that.<br>
Question 2: Could you please give an example of creating Extension.value[x] is mandatory and can only be a date<br>
Question 3: Although the following URL refers to "Extension.extension"</p>
<p><a href="https://fhir-ru.github.io/extension-rendered-value.json.html" target="_blank" title="https://fhir-ru.github.io/extension-rendered-value.json.html">https://fhir-ru.github.io/extension-rendered-value.json.html</a><br>
{<br>
      "id" : "Extension.extension",<br>
      "path" : "Extension.extension",<br>
      "slicing" : {<br>
        "discriminator" : [{<br>
          "type" : "value",<br>
          "path" : "url"<br>
        }</p>
<p>Correction 1: &lt;fixedUri value="http://example.org/fhir/StructureDefinition/socialhistoryOnsetYear"/&gt;</p>
<p>Correction 3:  StructureDefinition.contact</p>
<p>Definition  Contact details to assist a user in finding and communicating with the publisher.</p>
<p>Control 0..*<br>
Type    ContactDetail<br>
Summary true<br>
Comments     May be a web site, an email address, a telephone number, etc.</p>



<a name="171130496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171130496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171130496">(Jul 18 2019 at 01:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191321">@David Hay</span> Some feedback :)</p>



<a name="171130560"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171130560" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171130560">(Jul 18 2019 at 01:08)</a>:</h4>
<p>1. I don't see Extension.extension - but I should<br>
2. There should be two elements.  The first should say Extension.value[x] and declare a type of 'date'.  The second should reflect the constraints on Extension.valueDate<br>
3. Not understanding the question</p>



<a name="171130797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171130797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171130797">(Jul 18 2019 at 01:14)</a>:</h4>
<p>oops - been a while since I looked at that app! I'll take a look :) (thanks for the feedback)...</p>



<a name="171133991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171133991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roney A <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171133991">(Jul 18 2019 at 02:51)</a>:</h4>
<blockquote>
<p>1. I don't see Extension.extension - but I should<br>
2. There should be two elements.  The first should say Extension.value[x] and declare a type of 'date'.  The second should reflect the constraints on Extension.valueDate<br>
3. Not understanding the question</p>
</blockquote>
<p>Thank you Lloyd for the clarification. On #3, not clear what does it mean by "Extension.extension is prohibited"?</p>



<a name="171134121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171134121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roney A <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171134121">(Jul 18 2019 at 02:55)</a>:</h4>
<blockquote>
<p>oops - been a while since I looked at that app! I'll take a look :) (thanks for the feedback)...</p>
</blockquote>
<p>Thank you Dave for your prompt clarification. As you mentioned, people tend to use "Forge" for these things. Could you please provide a link for Forge? Also is that a free open source tool?  Would I be able to create extensions and profiles. I would appreciate if you can provide a valid link for "Forge".   Regards, Roney</p>



<a name="171134898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171134898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171134898">(Jul 18 2019 at 03:18)</a>:</h4>
<p>Extension.extension should be listed - and should have max=0</p>



<a name="171134906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171134906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171134906">(Jul 18 2019 at 03:19)</a>:</h4>
<p>If you have a value, you can't have child extensions (and vice versa)</p>



<a name="171136808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171136808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roney A <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171136808">(Jul 18 2019 at 04:13)</a>:</h4>
<blockquote>
<p>Extension.extension should be listed - and should have max=0</p>
</blockquote>
<p>Thank you Lloyd. Appreciate that.</p>



<a name="171136874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171136874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roney A <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171136874">(Jul 18 2019 at 04:15)</a>:</h4>
<blockquote>
<blockquote>
<p>oops - been a while since I looked at that app! I'll take a look :) (thanks for the feedback)...</p>
</blockquote>
<p>Thank you Dave for your prompt clarification. As you mentioned, people tend to use "Forge" for these things. Could you please provide a link for Forge? Also is that a free open source tool?  Would I be able to create extensions and profiles. I would appreciate if you can provide a valid link for "Forge".   Regards, Roney</p>
</blockquote>
<p>Thank you David. Please ignore the request. Sincerely, Roney</p>



<a name="171187903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171187903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roney A <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171187903">(Jul 18 2019 at 16:45)</a>:</h4>
<blockquote>
<p>Extension.extension should be listed - and should have max=0</p>
</blockquote>
<p>Hi Lloyd, looking at the Extension example at FHIR site: <a href="http://hl7.org/fhir/stu3/extensibility-examples.html" target="_blank" title="http://hl7.org/fhir/stu3/extensibility-examples.html">http://hl7.org/fhir/stu3/extensibility-examples.html</a>, following are my questions on section 2.5.2.1.5 Using it in a Patient Profile.</p>
<p>1. Once an extension is created, for example: "socialhistoryOnsetYear"<br>
2. Do we have to create a "new profile" for patient using StructureDefinition on the patient resource to use this new extension?<br>
3. Is there a "MASTER" profile for all the FHIR resources?  For example  Medication, Patient. <br>
Looking at the current FHIR R4 Profiles, for example, for Patient, I see there is a Patient HL7 Extensions (<a href="http://hl7.org/fhir/patient-extensions.html" target="_blank" title="http://hl7.org/fhir/patient-extensions.html">http://hl7.org/fhir/patient-extensions.html</a>).  For Medication there is NONE. Assuming, that the "Profile" in FHIR exists only if there is an Extension created. Is that the correct understanding?</p>



<a name="171190580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171190580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171190580">(Jul 18 2019 at 17:18)</a>:</h4>
<p>2. No need to have a profile unless you want to enforce something around the use of the extension<br>
3. There's a structure definition that defines each resource, but that wouldn't list all of the possible extensions (as those are continuously being created and could be created by anyone; also there are no constraints the base resource would want/need to assert about the use of any particular extensions)</p>



<a name="171200990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179273-CCDA%20/%20FHIR%20mapping%20stream/topic/FHIR%20EXTENSIONS/near/171200990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roney A <a href="https://fhir.github.io/chat-archive/stream/179273-CCDA-/-FHIR-mapping-stream/topic/FHIR.20EXTENSIONS.html#171200990">(Jul 18 2019 at 19:20)</a>:</h4>
<blockquote>
<p>2. No need to have a profile unless you want to enforce something around the use of the extension<br>
3. There's a structure definition that defines each resource, but that wouldn't list all of the possible extensions (as those are continuously being created and could be created by anyone; also there are no constraints the base resource would want/need to assert about the use of any particular extensions)</p>
</blockquote>
<p>Thank you Lloyd. It makes sense.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
