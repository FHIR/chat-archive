---
layout: page
title: "FHIR Chat  · FHIR Validator bug for capability statements · fhir/infrastructure-wg"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/index.html">fhir/infrastructure-wg</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/FHIR.20Validator.20bug.20for.20capability.20statements.html">FHIR Validator bug for capability statements</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="262466380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/FHIR%20Validator%20bug%20for%20capability%20statements/near/262466380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Malhotra <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/FHIR.20Validator.20bug.20for.20capability.20statements.html#262466380">(Nov 23 2021 at 14:56)</a>:</h4>
<p>I think there may be an issue with the invariants for capability statements which is causing the FHIR validator to give errors as mentioned below</p>
<p><span class="user-mention silent" data-user-id="433872">Sahil Malhotra</span> <a href="#narrow/stream/179239-tooling/topic/FHIR.20Validator.20bug.20for.20capability.20statements/near/262369820">said</a>:</p>
<blockquote>
<p>I'm having some issues with the validator relating to capability statements. The capability statement that is returned is of kind "instance" and has both the software and implementation fields set, however despite that I see the below errors complaining about the kind field. The validator is being used in a JAVA springboot server and is loaded from import ca.uhn.fhir.validation.FhirValidator. I didn't use to have this issue before, it just started popping up and is now causing my test cases to fail. Any thoughts or advice on how to fix this?</p>
<div class="codehilite"><pre><span></span><code>[SingleValidationMessage[col=-1,row=-1,locationString=CapabilityStatement,message=[error] in /*:CapabilityStatement[namespace-uri()=&#39;http://hl7.org/fhir&#39;][1] @ CapabilityStatement cpb-16: If kind = requirements, implementation and software must be absent Test=not(f:kind/@value=&#39;instance&#39;) or (not(exists(f:implementation)) and not(exists(f:software))),severity=error]
</code></pre></div>
<div class="codehilite"><pre><span></span><code>SingleValidationMessage[col=-1,row=-1,locationString=CapabilityStatement,message=[error] in /*:CapabilityStatement[namespace-uri()=&#39;http://hl7.org/fhir&#39;][1] @ CapabilityStatement cpb-15: If kind = capability, implementation must be absent, software must be present Test=not(f:kind/@value=&#39;instance&#39;) or (not(exists(f:implementation)) and exists(f:software)),severity=error]]
</code></pre></div>
<p>Edit: I think the tests being run for the validation and need to be changes as follows</p>
<div class="codehilite"><pre><span></span><code>Test=not(f:kind/@value=&#39;instance&#39;) or (not(exists(f:implementation)) and not(exists(f:software)))  ---&gt;  Test=(f:kind/@value=&#39;requirements&#39;) and (not(exists(f:implementation)) and not(exists(f:software)))
</code></pre></div>
<p><div class="codehilite"><pre><span></span><code>Test=not(f:kind/@value=&#39;instance&#39;) or (not(exists(f:implementation)) and exists(f:software))  ---&gt;  Test=(f:kind/@value=&#39;capability&#39;) and (not(exists(f:implementation)) and exists(f:software))
</code></pre></div><br>
</p>
</blockquote>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
