---
layout: page
title: "FHIR Chat  · Requested change for Range Constraint rng-2 · fhir/infrastructure-wg"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/index.html">fhir/infrastructure-wg</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/Requested.20change.20for.20Range.20Constraint.20rng-2.html">Requested change for Range Constraint rng-2</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="186496898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/Requested%20change%20for%20Range%20Constraint%20rng-2/near/186496898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/Requested.20change.20for.20Range.20Constraint.20rng-2.html#186496898">(Jan 24 2020 at 14:35)</a>:</h4>
<p>I am seeing an issue with the Range constraint rng-2 when I use a range or quantity as a pattern and don't set the range value.<br>
i.e. I am constraining the system and code, but not  the value.</p>
<p>"patternRange": {<br>
    "low": {<br>
    "system": "<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
    "code": "tot"<br>
  },<br>
  "high": {<br>
    "system": "<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
    "code": "tot"<br>
  }</p>
<p>When I run the IG publisher, I get an error from Range constraint rng-2</p>
<p>StructureDefinition/AbnormalityCyst: StructureDefinition.snapshot.element[75].pattern.ofType(Range) error rng-2: If present, low SHALL have a lower value than high [low.empty() or high.empty() or (low &lt;= high)] <br>
StructureDefinition/AbnormalityCyst:  tructureDefinition.snapshot.element[113].pattern.ofType(Range) error rng-2: If present, low SHALL have a lower value than high [low.empty() or high.empty() or (low &lt;= high)]</p>
<p>Obviously the Range constraint rng-2 is that the low value should be greater than the high value and since neither are set that is not true, (though it is also not false (kinda a quantum mechanics kind of thing :-))).</p>
<p>Should the rule be changed to ignore unset values in patterns?</p>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  had the following comment about this in the original thread.<br>
There could be situations where the low or high value are expressed with an extension (e.g. because it's a formula rather than a fixed value), so this would be a problem there too. I'd be in favor of revising the invariant to say low.value.empty() or high.value.empty() instead, which would address this issue.</p>



<a name="186529080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/Requested%20change%20for%20Range%20Constraint%20rng-2/near/186529080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/Requested.20change.20for.20Range.20Constraint.20rng-2.html#186529080">(Jan 24 2020 at 20:06)</a>:</h4>
<p>yew please create a task</p>



<a name="186996997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/Requested%20change%20for%20Range%20Constraint%20rng-2/near/186996997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kurt Allen <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/Requested.20change.20for.20Range.20Constraint.20rng-2.html#186996997">(Jan 30 2020 at 15:23)</a>:</h4>
<p>thx...<br>
<a href="https://jira.hl7.org/browse/FHIR-25736" target="_blank" title="https://jira.hl7.org/browse/FHIR-25736">https://jira.hl7.org/browse/FHIR-25736</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
