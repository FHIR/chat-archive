---
layout: page
title: "FHIR Chat  · integer64 · fhir/infrastructure-wg"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/index.html">fhir/infrastructure-wg</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html">integer64</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="182723160"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182723160" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182723160">(Dec 06 2019 at 02:00)</a>:</h4>
<p>I'm going through adding the integer64 type. I'm going to use it for Attachment.size....</p>



<a name="182725862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182725862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182725862">(Dec 06 2019 at 03:04)</a>:</h4>
<p>Well that's future proof :)</p>



<a name="182726804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182726804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182726804">(Dec 06 2019 at 03:23)</a>:</h4>
<p>Yeah, didn't realize we effectively had a 2Gb limit</p>



<a name="182728517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182728517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182728517">(Dec 06 2019 at 04:04)</a>:</h4>
<p>Is that something that can be done without breaking our backward compatibility rules?</p>



<a name="182728998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182728998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182728998">(Dec 06 2019 at 04:15)</a>:</h4>
<p>Bundle.total for use in searchset? I guess that one is already normative though.</p>



<a name="182729136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182729136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182729136">(Dec 06 2019 at 04:18)</a>:</h4>
<p>Bundle.total &gt; 2billion? really?</p>



<a name="182729147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182729147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182729147">(Dec 06 2019 at 04:19)</a>:</h4>
<blockquote>
<p>Is that something that can be done without breaking our backward compatibility rules?</p>
</blockquote>
<p>how would it break them?</p>



<a name="182731173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182731173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182731173">(Dec 06 2019 at 05:13)</a>:</h4>
<p>New systems could send values that would blow up old systems</p>



<a name="182731476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182731476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182731476">(Dec 06 2019 at 05:21)</a>:</h4>
<p>yep. If we're going to make a rule that that's not an allowed change, we can shut up shop once we go normative</p>



<a name="182733049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182733049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182733049">(Dec 06 2019 at 06:04)</a>:</h4>
<p>In fact every value from the new system would be a string in JSON, which would break every old system... This seems like something pretty highly undesirable for a normative resource.</p>



<a name="182733062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182733062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182733062">(Dec 06 2019 at 06:04)</a>:</h4>
<p>There wouldn't be a bundle with 2^31 entries (I hope), but you could have a search matching over 2^31 resources. Large numbers have come up in cases where a client wanted to do a search with _summary=count to get some broad statistics.</p>



<a name="182734366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182734366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182734366">(Dec 06 2019 at 06:41)</a>:</h4>
<p>carumba. that's still a very big number.</p>



<a name="182778156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/182778156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#182778156">(Dec 06 2019 at 16:35)</a>:</h4>
<p>The normative spec needs to be stable for a long time though - 10 years from now it might not sound so large.</p>



<a name="183008098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/183008098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#183008098">(Dec 09 2019 at 22:43)</a>:</h4>
<p>Just add a BigInteger. Which in java is equivalent to -2^Integer.MAX_VALUE to 2^Integer.MAX_VALUE.... which is very very big.</p>



<a name="185819699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/185819699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#185819699">(Jan 16 2020 at 14:37)</a>:</h4>
<p>I see in the json examples (examples-json.zip) that the integer64 values are serialized as strings. For example the <code>size</code> attribute of <code>contentAttachment</code> in the file <code>communication-example-fm-attachment.json</code>:</p>
<div class="codehilite"><pre><span></span>  <span class="s2">&quot;payload&quot;</span><span class="err">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;contentAttachment&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;contentType&quot;</span><span class="p">:</span> <span class="s2">&quot;application/pdf&quot;</span><span class="p">,</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;SGVsbG8\u003d&quot;</span><span class="p">,</span>
        <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;accident notes 20100201.pdf&quot;</span><span class="p">,</span>
        <span class="nt">&quot;creation&quot;</span><span class="p">:</span> <span class="s2">&quot;2010-02-01T11:50:23-05:00&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;contentAttachment&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;contentType&quot;</span><span class="p">:</span> <span class="s2">&quot;application/pdf&quot;</span><span class="p">,</span>
        <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://example.org/docs/AB12345&quot;</span><span class="p">,</span>
        <span class="nt">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;104274&quot;</span><span class="p">,</span>
        <span class="nt">&quot;hash&quot;</span><span class="p">:</span> <span class="s2">&quot;SGVsbG8gdGhlcmU\u003d&quot;</span><span class="p">,</span>
        <span class="nt">&quot;creation&quot;</span><span class="p">:</span> <span class="s2">&quot;2010-02-01T10:57:34+01:00&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>


<p>Should that not be like this:</p>
<div class="codehilite"><pre><span></span>        &quot;size&quot;: 104274,
</pre></div>


<p>?</p>



<a name="185822682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/185822682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#185822682">(Jan 16 2020 at 15:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="185832403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/185832403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#185832403">(Jan 16 2020 at 16:35)</a>:</h4>
<p>If you don't serialize as strings in JSON, the JavaScript parser stores as <code>number</code> and you lose precision.  The 64-bit libs for JavaScript serialize to/from string to get around it.<br>
We had a discussion when we were proposing adding the type.</p>



<a name="185867418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/185867418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#185867418">(Jan 16 2020 at 22:12)</a>:</h4>
<p>And it is documented on the json page in the spec too that in json it is serializer as a string.</p>



<a name="185867435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/185867435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#185867435">(Jan 16 2020 at 22:12)</a>:</h4>
<p>(I had to go look when I saw it)</p>



<a name="185876425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/185876425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#185876425">(Jan 17 2020 at 00:20)</a>:</h4>
<p>yep. we hate JSON numbers ;-)</p>



<a name="186084985"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179280-fhir/infrastructure-wg/topic/integer64/near/186084985" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179280-fhir/infrastructure-wg/topic/integer64.html#186084985">(Jan 20 2020 at 09:22)</a>:</h4>
<p>Haha ok. then I hate them too. I will serialize them as strings then. Thanks for the feedback!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
