---
layout: page
title: "FHIR Chat  · ValueSet compose for a Coding-typed property · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20compose.20for.20a.20Coding-typed.20property.html">ValueSet compose for a Coding-typed property</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="272221436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20compose%20for%20a%20Coding-typed%20property/near/272221436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20compose.20for.20a.20Coding-typed.20property.html#272221436">(Feb 17 2022 at 07:13)</a>:</h4>
<p>I have a CodeSystem with codes that have a property of type Coding (because the value may be from one of several other CodeSystems).<br>
I now want to define a ValueSet that filters on these properties.  The type of <code>compose.include.filter.value</code> is <code>string</code>, but the spec only mentions its use for codes, booleans, or regex (dependent on the filter operator).</p>
<p>What syntax should I use here for Coding?  I was thinking token syntax (<code>&lt;system&gt;|&lt;code&gt;</code>) and its variants.<br>
For  the EQUALS operator:</p>
<ul>
<li><code>&lt;system&gt;|&lt;code&gt;</code> exact match</li>
<li><code>&lt;code&gt;</code> match code, any system</li>
<li><code>|&lt;code&gt;</code> match code, NO system</li>
</ul>
<p>but I can see value in wanting to filter on all property values from a single CodeSystem, which would naturally lead to</p>
<ul>
<li><code>&lt;system&gt;|</code> match system, any code</li>
</ul>
<p>However this conflicts with Search semantics which would require NO code.</p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191364">@Peter Jordan</span> <span class="user-mention" data-user-id="191405">@Rob Hausam</span></p>



<a name="272224943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20compose%20for%20a%20Coding-typed%20property/near/272224943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20compose.20for.20a.20Coding-typed.20property.html#272224943">(Feb 17 2022 at 08:05)</a>:</h4>
<p>I don't think we've described this, but my inclination would have been to use &lt;system&gt;#&lt;code&gt;. And for what you're doing, I would expect {property} in {valueset-ref} to avoid the syntax issues altogether</p>



<a name="272226571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20compose%20for%20a%20Coding-typed%20property/near/272226571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20compose.20for.20a.20Coding-typed.20property.html#272226571">(Feb 17 2022 at 08:24)</a>:</h4>
<p>But that's not how <code>in</code> works; it takes a comma-separated list of codes (except for SNOMED)</p>



<a name="272231035"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20compose%20for%20a%20Coding-typed%20property/near/272231035" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20compose.20for.20a.20Coding-typed.20property.html#272231035">(Feb 17 2022 at 09:04)</a>:</h4>
<p>oh? I'm sure we agreed that there was a way to do that somehow - to say that the filter was based on a property in a value set? I think that I do that internally: if there's no commas,and it's a uri, then it's a value set reference</p>



<a name="272252667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20compose%20for%20a%20Coding-typed%20property/near/272252667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20compose.20for.20a.20Coding-typed.20property.html#272252667">(Feb 17 2022 at 12:38)</a>:</h4>
<p>Interesting.  I could be forgetting, but I don't think that's in the spec (or even "hidden" anywhere that I know of).  But maybe it should be.</p>



<a name="272320861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20compose%20for%20a%20Coding-typed%20property/near/272320861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20compose.20for.20a.20Coding-typed.20property.html#272320861">(Feb 17 2022 at 20:52)</a>:</h4>
<p>Re syntax above, I've just been back to double-check <a href="https://www.hl7.org/fhir/search.html#token">https://www.hl7.org/fhir/search.html#token</a> and discovered that I remembered the search semantics incorrectly and each form matches exactly what I'm after.</p>
<p>So, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> the | based syntax has a lot going for it - where does the # syntax come from (FSH?)</p>



<a name="272618180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20compose%20for%20a%20Coding-typed%20property/near/272618180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20compose.20for.20a.20Coding-typed.20property.html#272618180">(Feb 20 2022 at 21:37)</a>:</h4>
<p>The | in canonicals is used to add on the version number.<br>
system|version#code when used in a canonical value...</p>



<a name="272618459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20compose%20for%20a%20Coding-typed%20property/near/272618459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20compose.20for.20a.20Coding-typed.20property.html#272618459">(Feb 20 2022 at 21:42)</a>:</h4>
<p>Where do "canonical values" show up?<br>
| is used in token syntax which only allows for system and code (not version)</p>



<a name="272621928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20compose%20for%20a%20Coding-typed%20property/near/272621928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20compose.20for.20a.20Coding-typed.20property.html#272621928">(Feb 20 2022 at 22:47)</a>:</h4>
<p>I think that | is ambiguous - are you referring to version or code? But also you’re referring to a search term, and you’re not doing a search. I think that system|version#code is a more reliable approach</p>



<a name="272623409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20compose%20for%20a%20Coding-typed%20property/near/272623409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20compose.20for.20a.20Coding-typed.20property.html#272623409">(Feb 20 2022 at 23:12)</a>:</h4>
<p>Ok, so what variations should be supported?</p>
<ul>
<li><code>system|version#code</code>  - exact match on all</li>
<li><code>code</code>  - code, any system</li>
<li><code>system|</code>   - system match, any code</li>
<li><code>system|version</code>  - system &amp; version match, any code</li>
<li><code>#code</code>  - code, no system</li>
<li><code>system#code</code>  - system and code match, any version</li>
</ul>
<p>others?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
