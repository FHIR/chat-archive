---
layout: page
title: "FHIR Chat  · Qeuestion about filter in $expand · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html">Qeuestion about filter in $expand</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153923942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153923942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153923942">(Dec 09 2017 at 20:27)</a>:</h4>
<p>According to the standard, filter in expansion is "A text filter that is applied to restrict the codes that are returned (this is useful in a UI context). The interpretation of this is delegated to the server in order to allow to determine the most optimal search approach for the context".</p>



<a name="153923943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153923943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153923943">(Dec 09 2017 at 20:31)</a>:</h4>
<p>So the server can design some customized expression in filters to support special expansion request. For example,  I can design my server to support "filter=http://snomed.info/sct" for expansion on SCT code only.</p>



<a name="153923944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153923944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153923944">(Dec 09 2017 at 20:32)</a>:</h4>
<p>Is my understanding correct?</p>



<a name="153923946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153923946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153923946">(Dec 09 2017 at 20:50)</a>:</h4>
<p>As a text filter on the $expand operation is performed on a Value Set, that usage would only make sense if a Value Set contains concepts from more than one code system. A more typical usage of that filter, particularly when related to UI interactions, is to return concepts based on matching descriptions.</p>



<a name="153923951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153923951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153923951">(Dec 09 2017 at 20:59)</a>:</h4>
<p>Definitely. I am just wondering if a server developer can push the usage of filter beyond description matching. The target value set has codes from multiple code system. I used to use includedCodeSystem in ExpansionFilter to expand on certain code system. Since that property is removed, I have to find some other ways to do the same. Other than introduce an extension, I think I can (and I should) use filter parameter since this is a server interpretation of optimal search approach.</p>



<a name="153923985"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153923985" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153923985">(Dec 10 2017 at 02:06)</a>:</h4>
<p>As an alternative, you might design your server to use the context input parameter (uri) for this use case. Not it's stated purpose in the spec, but possibly a better fit than the text filter property?</p>



<a name="153923986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153923986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153923986">(Dec 10 2017 at 02:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span>: " I used to use includedCodeSystem in ExpansionFilter to expand on certain code system" -  why not us the value set machinery, since that's what it's supposed to do</p>



<a name="153923992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153923992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153923992">(Dec 10 2017 at 03:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> what is "value set machinery"?</p>



<a name="153924002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153924002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153924002">(Dec 10 2017 at 06:14)</a>:</h4>
<p>define a value set on the code system, then expand it... what do you need profile for?</p>



<a name="153924092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153924092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153924092">(Dec 10 2017 at 18:52)</a>:</h4>
<p>I have a value set definition which need to expand to two different code systems. Each expansion contains codes from one code system. In another works there are two different expansions from the same definition. Is this one value set or two value sets?</p>



<a name="153924093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153924093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153924093">(Dec 10 2017 at 18:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191364">@Peter Jordan</span> I think context is a better choice than filter</p>



<a name="153924115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153924115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153924115">(Dec 10 2017 at 19:34)</a>:</h4>
<p>I don't understand ' value set definition which need to expand to two different code systems' - what's the definition?</p>



<a name="153924122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153924122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153924122">(Dec 10 2017 at 20:22)</a>:</h4>
<p>I think the way you would do this is using ExpansionProfile.excludedSystem.  Maybe what you are wanting is more like "includedSystem", which we don't have, but in any reasonable real-world case I expect that excludedSystem should be workable for what you need.  The alternative, which I think Grahame is suggesting, and you may have alluded to, would be to create separate value sets that are defined specifically to include the codes from the particular code system that you need in each case.</p>



<a name="153924400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Qeuestion%20about%20filter%20in%20%24expand/near/153924400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Qeuestion.20about.20filter.20in.20.24expand.html#153924400">(Dec 12 2017 at 02:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> are you able to share the value set definition?  I think it would help us to provide better guidance.<br>
Using the filter parameter the way you're describing seems unnecessary</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
