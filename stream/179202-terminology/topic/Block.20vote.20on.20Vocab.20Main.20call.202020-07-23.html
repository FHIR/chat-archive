---
layout: page
title: "FHIR Chat  · Block vote on Vocab Main call 2020-07-23 · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html">Block vote on Vocab Main call 2020-07-23</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="204267328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204267328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204267328">(Jul 17 2020 at 22:35)</a>:</h4>
<p>On the FHIR Tracker Issues call yesterday we reviewed a set of 11 issues that have been marked as ready-for-vote.  We finalized the dispositions and have prepared a block vote, and we're proposing to vote on the block during the Main Vocab call next Thursday (7/24).  Here is a link to the Confluence <a href="https://confluence.hl7.org/display/VOC/FHIR+block+vote+for+Main+Vocab+WG+conference+call+2020-07-23">page</a> with the list of the trackers to be voted on in the block.</p>
<p>Please let me know if you have any questions or if there are any issues that you would like to have pulled from the block.  And please join the conference <a href="http://www.hl7.org/concalls/CallDetails.aspx?concall=49826">call</a> next Thursday at 3:30 Eastern for the vote.  Thanks!</p>



<a name="204276210"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204276210" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204276210">(Jul 18 2020 at 01:10)</a>:</h4>
<p>FHIR-23785 (<a href="http://jira.hl7.org/browse/FHIR-23785">J#23785</a>) still seems problematic - the proposed text change does not clarify whether the URL is intended to be that of a FHIR Tx endpoint (and thus used for <code>base</code> in <code>[base]/ValueSet/$expand?url=[valueSetUri]</code> to obtain the trusted expansion, or directly resolved and thus a <code>GET</code> on the url would retrieve the trusted expansion.</p>



<a name="204302146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204302146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204302146">(Jul 18 2020 at 14:14)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="191343">@Michael Lawley</span>.  Do you want to pull the issue from the block to discuss separately (and potentially revise the resolution) on the call?</p>



<a name="204324383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204324383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204324383">(Jul 19 2020 at 00:30)</a>:</h4>
<p>As the revised text doesn't resolve or address the ambiguity, yes I think it needs to be pulled.<br>
Due to timezones (3:30 Eastern), it would be great if we could discuss here or on the ticket itself.</p>



<a name="204324468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204324468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204324468">(Jul 19 2020 at 00:33)</a>:</h4>
<p><span class="user-mention" data-user-id="192130">@Carmela Couderc</span> are you able to provide insight as to whether this URL is meant to be of an (authoritative) expanded ValueSet or an (authoritative) FHIR endpoint from which to obtain an expansion?</p>



<a name="204421232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204421232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204421232">(Jul 20 2020 at 13:23)</a>:</h4>
<p>Yes, if we can agree on an updated resolution (here or in Jira) within the next 24 hours or so then we may be able to revise the tracker and keep it in the block.  <span class="user-mention" data-user-id="191503">@Robert McClure</span>- your thoughts?</p>



<a name="204440353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204440353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204440353">(Jul 20 2020 at 15:55)</a>:</h4>
<p>Good question <span class="user-mention" data-user-id="191343">@Michael Lawley</span> . My opinion on this is that it would be an authoritative expansion resource. I do not think we should expect the ability to respond to an $Expand. But I'd like to hear what people think is most useful, doable. I'm assuming that this will not be something that most value sets will have so perhaps we say it has to support $expand?</p>



<a name="204495678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204495678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204495678">(Jul 20 2020 at 23:12)</a>:</h4>
<p>Thanks Rob, I would also expect it to be to a pre-expanded ValueSet and not a FHIR endpoint.</p>
<p>Michael</p>
<p>Sent from my iPhone</p>



<a name="204542824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204542824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204542824">(Jul 21 2020 at 12:51)</a>:</h4>
<p>I think there is (at least implicit) agreement that this needs to return a ValueSet resource with an authoritative expansion (that's what this is all about).   But is that a single, static item, apparently based on an assumed fixed set of the expansion parameters?  If not, then it seems that you would need it to be a FHIR endpoint, so that it can return the authoritative expansion for any combination of the $expand operation parameters.</p>



<a name="204594823"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204594823" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204594823">(Jul 21 2020 at 19:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> Can you say what parameters you think should be considered? My assumption is "current code system version and nothing filtered out." I think we'd want to say in the comment that best practice would be that the source for this is committing to keep the expansion UTD based on the most recent code system version. We should also say that users that access the expansion should confirm that the expansion is based on the code system version they expected. Perhaps we also should note that the expansion should include the parameters used to generate the expansion. FWIW, I'd also like to say (someday) that the expansion resource SHALL conform to the following profiles <a href="https://build.fhir.org/ig/HL7/cqf-recommendations/branches/master/StructureDefinition-cpg-executablevalueset.html">cpg-executablevalueset</a>, <a href="https://build.fhir.org/ig/HL7/cqf-recommendations/branches/master/StructureDefinition-cpg-computablevalueset.html">cpg-computablevalueset</a>, and <a href="https://build.fhir.org/ig/HL7/cqf-recommendations/branches/master/StructureDefinition-cpg-publishablevalueset.html">cpg-publishablevalueset</a>.</p>



<a name="204624106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204624106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204624106">(Jul 22 2020 at 02:12)</a>:</h4>
<p>I think <em>all</em> expansions MUST contain the parameters that were used to derive the expansion (such as code system version).<br>
I would also expect that any use of a "authoritative expansion" should also check that the parameters are compatible with the context of use.<br>
Naturally then there may be many "authoritative" expansions, each with different expansion parameters.</p>



<a name="204636098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204636098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204636098">(Jul 22 2020 at 07:09)</a>:</h4>
<p>Agree with Michael.  I could probably go with "current code system version and nothing filtered out", as long as that is explicit.  But anything else ('activeOnly, excludeNested, system-version or force-system-version, etc.) requires a FHIR endpoint and the $expand operation (which might be a reasonable approach to it?).</p>



<a name="204796545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204796545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204796545">(Jul 23 2020 at 13:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> Would you have any time to suggest a revised proposed resolution for FHIR-23785 (<a href="http://jira.hl7.org/browse/FHIR-23785">J#23785</a>) that would meet your needs and expectations that we can discuss on the call today?  It looks like we will pull this from the block and discuss it separately.  if you are able to join at some point (maybe during the latter part of the call?) that would be great (but not necessarily expected).  One thing I think we should consider is if whatever solution we decide on is required or suggested (i.e. best practice) behavior for servers that implement it.</p>



<a name="204875812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/204875812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#204875812">(Jul 24 2020 at 03:20)</a>:</h4>
<p>Thanks Rob, I've added suggested text to the ticket, but it has raised further (similar) questions about the associated valueset-authoritativeSource extension.</p>



<a name="205535181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205535181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205535181">(Jul 30 2020 at 21:32)</a>:</h4>
<p>FHIR-<a href="https://jira.hl7.org/browse/FHIR-23785">23785</a> was discussed on the Vocab FHIR tracker call today. I would like to propose the following solution but we want input from zulip:<br>
I propose that <a href="http://build.fhir.org/extension-valueset-trusted-expansion.html">valueset-trusted-expansion</a> should be defined to contain a URL of a FHIR server where an authoritative value set expansion may be obtained that conforms to the requirements that are consistent with those specified by the following two profiles:</p>
<ul>
<li><a href="https://build.fhir.org/ig/HL7/cqf-recommendations/branches/master/StructureDefinition-cpg-executablevalueset.html">cpg-executablevalueset</a></li>
<li><a href="https://build.fhir.org/ig/HL7/cqf-recommendations/branches/master/StructureDefinition-cpg-computablevalueset.html">cpg-computablevalueset</a></li>
</ul>
<p>I think that the <a href="http://build.fhir.org/extension-valueset-authoritativesource.html">valueset-authoritativeSource</a> extension should be defined as the url of a FHIR terminology service endpoint that is capable of generating an authoritative valid FHIR expansion for the value set.</p>
<p>I think these two extensions should not be co-dependent. They may be the same server (likely will be when authoritative source is populated.) I also understand that we need to provide "best practice" guidance as to the parameters that should be used to generate the trusted expansion, which other than those needed to support the profiles, should be to use the most recent code systems and to not evoke any other restrictive parameters. </p>
<p>I also encourage <span class="user-mention" data-user-id="191364">@Peter Jordan</span> to comment on the potential to have a terminology service to choose (as should be noted in the capability statement) that they populate the trusted expansion with a url that holds a persisted expansion resource for the returned expansion. This would allow requesters the ability to get the expansion without performing another $expand. This is something Peter suggested and while it's not directly aligned and may have some difficult implications, it's an interesting use.</p>



<a name="205543043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205543043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205543043">(Jul 30 2020 at 23:10)</a>:</h4>
<blockquote>
<p>This would allow requesters the ability to get the expansion without performing another $expand</p>
</blockquote>
<p>Don't understand why this is useful.</p>



<a name="205543227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205543227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205543227">(Jul 30 2020 at 23:13)</a>:</h4>
<blockquote>
<p>cpg-computablevalueset</p>
</blockquote>
<p>Don't understand why this profile is part of the discussion. nor do I understand why it exists, actually</p>



<a name="205543323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205543323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205543323">(Jul 30 2020 at 23:14)</a>:</h4>
<p>Thanks for the summary <span class="user-mention" data-user-id="191503">@Robert McClure</span> , unfortunately I was on another call at the same time.<br>
Can you provide explicit examples of values for these extensions?</p>



<a name="205543525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205543525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205543525">(Jul 30 2020 at 23:16)</a>:</h4>
<p>There's also <a href="http://hl7.org/fhir/R4/extension-valueset-expression.html">http://hl7.org/fhir/R4/extension-valueset-expression.html</a> which worries me - fine for documentation purposes, but I can see it being used as a proprietary crutch that blocks interoperability.</p>



<a name="205609276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205609276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205609276">(Jul 31 2020 at 16:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> The <a href="http://hl7.org/fhir/R4/extension-valueset-expression.html">valueset-expression extension</a> was originally created to meet the need of computably defining a value set content logical definition in the FHIR space that <em>does not use</em> the standard FHIR compose structure. I'm surprised you think this is "a crutch that blocks interoperability" when it is defined to be computable and requires the identification of the computable syntax used. FHIR's compose sytax is pretty thin and other terminology query systems exist (eg: TQL) or SQL queries against standard table structures (eg: RxNorm, UMLS, etc.) so providing a way to include those actually improves interoperability. Not everyone uses SNOMED CT that supports intra-FHIR compose approach that can utilize ECL.</p>



<a name="205610108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205610108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205610108">(Jul 31 2020 at 16:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> and others: <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  and I are working on improving the demonstrably incomplete documentation on the <a href="https://build.fhir.org/ig/HL7/cqf-recommendations/branches/master/documentation-terminology.html">cpg value set profiles</a>. I'll note that these are still in flux and include elements and MustSupport that I do not think belong in a general core profile, hence my statement above that trusted expansion should be consistent with (but note specifically use) the cpg profiles. We plan to improve upon the material at the <a href="https://build.fhir.org/ig/HL7/cqf-recommendations/branches/master/index.html">FHIR Clinical Guidelines IG</a> and will launch a zulip thread to open discussion on these ValueSet profiles once the documentation is up to snuff.</p>



<a name="205636264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205636264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205636264">(Jul 31 2020 at 20:08)</a>:</h4>
<p>perhaps better documentation will help me understand the purpose</p>



<a name="205660173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205660173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205660173">(Aug 01 2020 at 02:45)</a>:</h4>
<p>By blocking interoperability, I mean that this extension imposes a requirement (or demand) on terminology servers to 1. use or re-implement SQL / TQL / other query language, and 2. use "standard table structures".<br>
The alternative is to expose the required (by the SQL / etc) information in the CodeSystem itself, and to express the SQL etc using the compose syntax, which is actually pretty expressive.  It would seem not unreasonable to attempt to do a standard mapping from RxNorm and UMLS file formats into FHIR CodeSystem so that all terminology servers can provide a consistent support at some established minimal level.</p>



<a name="205660241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205660241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205660241">(Aug 01 2020 at 02:47)</a>:</h4>
<p>Looking at the ValueSets in the IG linked above, I see nothing that requires the valueset-expression extension -- I'd be interested to see some examples that involve queries that can't be expressed as a ValueSet.compose</p>



<a name="205664963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205664963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205664963">(Aug 01 2020 at 05:06)</a>:</h4>
<p>Looking at the expressiveness of the ValueSet compose syntax, I note that multiple filters within a single compose.include are resolved using conjunction. However, I can't see any rules for how to handle multiple compose.include elements that each contain filters; although it might make sense to use disjunction?</p>



<a name="205745196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205745196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205745196">(Aug 02 2020 at 21:37)</a>:</h4>
<p>is this what you are asking about?</p>
<blockquote>
<p>Multiple include statements are cumulative - e.g. the value set contains the union of all the includes<br>
Within an include, all the criterion apply -e.g. the value set contains the intersection of the criterion</p>
</blockquote>



<a name="205745197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205745197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205745197">(Aug 02 2020 at 21:37)</a>:</h4>
<p>?</p>



<a name="205746025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205746025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205746025">(Aug 02 2020 at 22:04)</a>:</h4>
<p>Yes, thanks. Not quite sure how I missed those Composition Rules!</p>



<a name="205818206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205818206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205818206">(Aug 03 2020 at 16:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> So your answer to this is to force everyone to use FHIR compose or not use FHIR, right? I don't support such a hard-line take my ball and leave approach. I think allowing users to express how they actually created a member set using non-FHIR terminology server capabilities is actually useful and you might be surprised to discover that there are more people using SQL to create what we call value sets, then are using a FHIR terminology service. </p>
<p>As for examples, I have some Apelon TQL I can send but you are missing the point. I don't agree with your demand that everyone must use FHIR compose or they don't get to use FHIR.</p>



<a name="205825853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205825853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205825853">(Aug 03 2020 at 17:57)</a>:</h4>
<p>TQL is probably a reasonable ask.  SQL is absolutely not.  There's nothing interoperable about SQL because don't expect (or <em>want</em>) database designs to be consistent, and furthermore, allowing execution of arbitrary SQL on a server is something no sane DBA would ever allow.  I do agree that using something like TQL for an expression that could be done using ValueSet.compose is an anti-pattern and should be strongly discouraged.  However, allowing for it in an extension to support communication with systems that can't convert is reasonable (at least in some spaces), just as we allow folks to transmit CDA documents embedded in DocumentReference.  You can't, however, expect that most terminology servers are going to pay attention to such extensions or do anything useful with them.  For many, an extension with TQL will be no more computable than a value set defined in narrative.</p>



<a name="205870780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205870780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205870780">(Aug 04 2020 at 03:42)</a>:</h4>
<p>I would argue that if all you are doing is wrapping a proprietary query in a FHIR ValueSet skin, then you are not "using FHIR".  In my book, FHIR is about interop, so this approach is not in the right spirit.  It's not that "you don't get to use FHIR" if you don't use compose, it's that there is limited _value_ to using FHIR if you don't use compose.</p>
<p>But, by all means, include the TQL as documentation; that is really valuable, and also useful to some if it's machine readable (not just replicated in the narrative, but at least include the pre-expanded ValueSet or an extensional definition.</p>
<p>One concern I have about TQL (based on things I seen in the context of LOINC), is that it still queries a proprietary data model, not something sanctioned by the code system publisher.  The strength of the FHIR CodeSystem is that it provides a mechanism for having a consistent and agreed on API (table design) to the code system content.</p>
<p>My second concern is that I cannot find any documentation for it online. </p>
<p>However, if a language such as TQL is widely used, then it might make sense to make it a first-class citizen in the FHIR Terminology ecosystem, just like ECL is for SNOMED.</p>



<a name="205897284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205897284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205897284">(Aug 04 2020 at 11:54)</a>:</h4>
<p>you could use TQL in a filter just like ECL, but I'm not sure that it's standardised enough?</p>



<a name="205897308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205897308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205897308">(Aug 04 2020 at 11:55)</a>:</h4>
<p>but also, that's not what Rob's trying to do, from what he says. Obviously clearer documentation would help</p>



<a name="205897337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/205897337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#205897337">(Aug 04 2020 at 11:55)</a>:</h4>
<p>but <span class="user-mention" data-user-id="191503">@Robert McClure</span> the expression extension seems far removed from the start of this conversation about trusted source</p>



<a name="206210585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206210585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206210585">(Aug 06 2020 at 23:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23/near/205543043">said</a>:</p>
<blockquote>
<blockquote>
<p>This would allow requesters the ability to get the expansion without performing another $expand</p>
</blockquote>
<p>Don't understand why this is useful.</p>
</blockquote>
<p>Distributing expansions for IGs and Profiles?</p>



<a name="206211393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206211393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206211393">(Aug 06 2020 at 23:57)</a>:</h4>
<p>that's a provisioning question. Does it make any difference to the client?</p>



<a name="206216934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206216934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206216934">(Aug 07 2020 at 01:44)</a>:</h4>
<p>It might make a difference to the application developers using an IG to have a consistent rendering of a complex ValueSet expansion.</p>



<a name="206368638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206368638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206368638">(Aug 08 2020 at 23:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191343">@Michael Lawley</span> The issue with TQL vs ECL is that ECL can declare all operators <em>within a single code system</em> because that is all it's good for and it fits with the <em>everything must be code system specific</em> mindset of FHIR. TQL is code system agnostic and is not declared within a code system. I might not understand how FHIR works now, but I was under the impression that concept filters had to be declared within a code system. Not true?</p>



<a name="206409344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206409344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206409344">(Aug 09 2020 at 19:55)</a>:</h4>
<p>not quite true, no. A code system can define filters for use with the code system, but it's also possible for us to define filters that can be used against all code systems. And so we could choose to define a TQL query, if there was a standard to refer to. Or we could do it less formally if there was a less formal to base it on</p>



<a name="206416230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206416230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206416230">(Aug 09 2020 at 23:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="195036">@Carol Macumber</span> I've asked to find an accessible TQL reference. So I take from your comment, there is no way to use TQL or any other general terminology query syntax other than FHIR compose but FHIR-I and Vocab are open to making some changes to the Filter element (specifically filter.property and  filter.op) to support a more complex compose that matches what TQL would create? We need to add support what in SQL would be inner joins at least. I'd have to spend more time with this to be more clear but it would be a lot simpler to acknowledge that there are existing users that are interested in exchanging operable TQL even if others can't use it. The community certainly has no problem promoting ECL when very few can use that. I really don't see why there is such pushback on making value sets understandable and useful for users that can not get what they want using compose. If you refuse to accept an expression extensions, just assume it's rules-text. The only other outcome is all the logic used to craft an expansion is hidden in user files and they have to continue to make brittle enumerated compose.include when that brittleness is not clearly communicated.</p>



<a name="206419465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206419465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206419465">(Aug 10 2020 at 00:57)</a>:</h4>
<blockquote>
<p>there is no way to use TQL or any other general terminology query syntax other than FHIR compose</p>
</blockquote>
<p>I didn't say that. Nor did the committee. Michael pushed back on it, if people use a TQL expression in place of what can be said in a compose. Which I think is reasonable. But I think it's reasonable to allow people to exchange additional metadata about how they defined the value set, while not encouraging them to avoid actually defining them properly.  From that regard, the definition of the extension and it's examples clearly need additional work.</p>
<p>But I think it's reasonable also to define how TQL could be used in a compose, which would have a different purpose and different ramifications. (Though I don't see how that relates to inner joins)</p>
<p>So: I don't think there's underlying disagreement here - we just need clarity in both the source definitions and this discussion</p>



<a name="206522806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206522806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206522806">(Aug 10 2020 at 22:55)</a>:</h4>
<blockquote>
<p>Michael pushed back on it, if people use a TQL expression in place of what can be said in a compose. Which I think is reasonable.</p>
</blockquote>
<p>Exactly.  I also asked for examples of things that can be said in TQL that could not be expressed (or are difficult to express) in a <code>ValueSet.compose</code>.  It sounds like inner joins might be related to this?</p>



<a name="206581578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206581578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carol Macumber <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206581578">(Aug 11 2020 at 14:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> , <span class="user-mention" data-user-id="196635">@Jessica Snell</span>  (Apelon), is going to post how to access the TQL Documentation and provide some examples</p>



<a name="206585312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206585312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jessica Bota <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206585312">(Aug 11 2020 at 14:56)</a>:</h4>
<p>The Apelon TQL Documentation is available on the Documentation Downloads page at <a href="http://www.apelondts.org/Downloads/Documentation/tabid/137/Default.aspx">http://www.apelondts.org/Downloads/Documentation/tabid/137/Default.aspx</a>. Access does require creating a free login to <a href="http://apelondts.org">apelondts.org</a>. I am working with our developer to get a list of TQL functionality that cannot be represented in FHIR and will be in touch.</p>



<a name="206623566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206623566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206623566">(Aug 11 2020 at 19:58)</a>:</h4>
<p>Thanks Jessica - not sure how I missed this</p>



<a name="206624961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206624961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jessica Bota <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206624961">(Aug 11 2020 at 20:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191343">Michael Lawley</span> <a href="#narrow/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23/near/206623566">said</a>:</p>
<blockquote>
<p>Thanks Jessica - not sure how I missed this</p>
</blockquote>
<p>It was posted in there this morning, so you didn't miss it! Let me know if you have any questions, happy to help.</p>



<a name="206769521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206769521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206769521">(Aug 13 2020 at 00:25)</a>:</h4>
<p>So, I see from the documentation that TQL is a lot more than a query language -- it includes DML-like statements, IO statements etc.<br>
Would it be reasonable to assume that <strong>only</strong> <code>collection-statement</code>s are used for ValueSet definition?  (and that such <code>collection-statement</code>s do not themselves contain statements?<br>
i.e., the grammar is effectively limited to:</p>
<div class="codehilite"><pre><span></span><code>collection-statement := FROM [ collection-mods ] collection “;”
</code></pre></div>



<a name="206874124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Block%20vote%20on%20Vocab%20Main%20call%202020-07-23/near/206874124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Block.20vote.20on.20Vocab.20Main.20call.202020-07-23.html#206874124">(Aug 13 2020 at 21:28)</a>:</h4>
<p>This topic has moved on somewhat to the valueset-expression extension and TQL, but I'll move us back (at least for the moment) to the discussion of the proposed resolution text for <a href="http://jira.hl7.org/browse/FHIR-23785">J#23785</a>.  We looked at this again on the first 30 min. of the FHIR Tracker call today (ended early for the co-chair webinar) and came up with this update.  We tried to take into account the most recent comments.  This doesn't specify conformance to the cpg-executablevalueset and cpg-computablevalueset profiles, but I'm not sure that's a requirement (and if it is, it can be added)?  It would be great to be able to get this issue resolved with a vote on the Vocab Main call next week.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
