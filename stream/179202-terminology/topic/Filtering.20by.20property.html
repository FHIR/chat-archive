---
layout: page
title: "FHIR Chat  · Filtering by property · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Filtering.20by.20property.html">Filtering by property</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="276556642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Filtering%20by%20property/near/276556642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Filtering.20by.20property.html#276556642">(Mar 25 2022 at 00:18)</a>:</h4>
<p>A code system can define filters as well as properties; a value set can apparently reference both of these through <code>ValueSet.compose.include.filter</code>, which can "Select codes/concepts by their properties (including relationships)"</p>
<ol>
<li>
<p>Does this imply that it's invalid to define a filter and a property with the same name? Otherwise how do you resolve the difference in case of conflict? Should there be a constraint to this effect?</p>
</li>
<li>
<p>When filtering in a ValueSet based on a CodeSystem property... those <a href="http://build.fhir.org/codesystem-definitions.html#CodeSystem.concept.property.value_x_">property values can be codings, booleans, date times, strings, integers, decimals, etc</a>. What syntax is used to query for boolean properties or or codings or for dates? Is the syntax based on FHIR search parameters? Are prefixes like <code>gt</code> allowed? I am having trouble finding details on this.</p>
</li>
</ol>



<a name="276558229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Filtering%20by%20property/near/276558229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Filtering.20by.20property.html#276558229">(Mar 25 2022 at 00:39)</a>:</h4>
<ol>
<li>No.  If you only declare a property, then there's a (limited) default set of filters for that property.  If you additionally declare a filter then that specifies what's available.</li>
<li>Most are straightforward - boolean is true / false, integers are sequences of digits, optional sign, etc Mostly we rely on HAPI's default behaviour for a String passed to the single-argument constructor of the primitive type class: e.g., <code>new DateTimeType(propValue)</code><br>
For Coding we opted for system|code as the syntax.  I recall discussing it here somewhere, but I don't believe it's in the spec itself.</li>
</ol>



<a name="276558799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Filtering%20by%20property/near/276558799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Filtering.20by.20property.html#276558799">(Mar 25 2022 at 00:48)</a>:</h4>
<p>Thanks! and for date times, are they iso8601 strings? Is matching based on timespan containment?</p>



<a name="276559799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Filtering%20by%20property/near/276559799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Filtering.20by.20property.html#276559799">(Mar 25 2022 at 01:04)</a>:</h4>
<p>It ultimately uses <code>BaseDateTimeType.parse()</code> which accepts a range of formats (not documented except by code).<br>
Our matching is just based on the string representation.  However, having just looked a little more closely, I see that the only impact of the parsing is to "validate" the string's format and that our matching is exactly against the original string value in the CodeSystem.</p>



<a name="276559913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Filtering%20by%20property/near/276559913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Filtering.20by.20property.html#276559913">(Mar 25 2022 at 01:05)</a>:</h4>
<p>Also, there's no range/less/greater querying available via filters</p>



<a name="276560110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Filtering%20by%20property/near/276560110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Filtering.20by.20property.html#276560110">(Mar 25 2022 at 01:09)</a>:</h4>
<p>Interesting -- thanks again for the details here!</p>



<a name="276560114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Filtering%20by%20property/near/276560114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Filtering.20by.20property.html#276560114">(Mar 25 2022 at 01:09)</a>:</h4>
<p>I think the reasoning is that DateTimes in terminology are controlled and, within a single code system, have consistent format, precision and interpretation, so more sophisticated handling is not really needed.<br>
However, SNOMED has a dateTime property (<code>effectiveTime</code>) which we handle specially because of ECL where you can do before/after queries, but the timezone is fixed (Zulu/UTC).</p>



<a name="276563948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Filtering%20by%20property/near/276563948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Filtering.20by.20property.html#276563948">(Mar 25 2022 at 02:12)</a>:</h4>
<p>Thanks! I'm a bit uneasy in my understanding of what gets modeled by filters and what gets modeled by properties. It seems like there is gray area -- like, a filter asking about "code: is-a, op: =, value: 123" vs asking about "code: concept, op: is-a, value: 123". (I'm trying to imagine that every concept has a fixed list of attributes and relationships -- together, "properties" -- and ideally filters could be expressed as queries against that list.)</p>
<p>Am I right in thinking that not every property is currently addressable through the filters mechanism? Like, should a server explicitly list properties in the filters array of a CodeSystem if it plans to allow filtering by them?</p>



<a name="276656799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Filtering%20by%20property/near/276656799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Filtering.20by.20property.html#276656799">(Mar 25 2022 at 17:57)</a>:</h4>
<p>Gino recently pointed me at <a href="https://build.fhir.org/codesystem.html#filters">https://build.fhir.org/codesystem.html#filters</a> which partially addresses the question. I submitted  <a href="http://jira.hl7.org/browse/FHIR-36643">FHIR-36643</a> to request that "exists" and "regex" should have standard filter semantics for all properties, in addition to the currently defined "=" and "in".</p>
<p>It would also be good to standardize a "concept" filter supporting "child-of", "is-a", "descendant-of" and "generalizes", similar to what is described at <a href="https://build.fhir.org/snomedct.html#filters">https://build.fhir.org/snomedct.html#filters</a> but applying to any CodeSystem with hierarchical concepts.</p>



<a name="276658054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Filtering%20by%20property/near/276658054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Filtering.20by.20property.html#276658054">(Mar 25 2022 at 18:06)</a>:</h4>
<p>To this end I've also submitted <a href="http://jira.hl7.org/browse/FHIR-36644">FHIR-36644</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
