---
layout: page
title: "FHIR Chat  · Code System Operations · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html">Code System Operations</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153868417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153868417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Russ Hamm <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153868417">(Jan 19 2017 at 17:44)</a>:</h4>
<p>Seeking clarification on the Code System Resource.</p>
<p>The FHIR CodeSystem Resource specifies three operations ($lookup, $subsumes, $compose), but there is currently no way to validate that a concept code is a valid code in the code system (similar to the $validate-code operation on the ValueSet Resource).</p>
<p>How would one go about validating that a concept code is valid in a given code system?</p>
<p>One way would be to do a $lookup and looking for null result, but I don't see this specified anywhere in the specification.</p>
<p>Another option would be to use the implicit value set for all codes in the code system and do a Value Set $validate-code.</p>
<p>Have either of the above options been considered and recommended, or is a new Code System Resource Operation in order here?</p>



<a name="153868428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153868428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153868428">(Jan 19 2017 at 19:02)</a>:</h4>
<p>Thus far, I've used the $validate-code operation on the implicit value set for the all of the codes in the larger code systems on my terminology server (e.g. SCT &amp; LOINC).</p>



<a name="153868463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153868463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153868463">(Jan 19 2017 at 22:07)</a>:</h4>
<p>I mentioned $validate-code on the implicit value set for "all codes" for the code system  to Russ as the most likely option currently.  But we might want to have a more explicit (and obvious) mechanism for this?  Probably $validate-code also on CodeSystem - so that you could validate on either the value set or the code system explicitly?</p>



<a name="153868467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153868467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153868467">(Jan 19 2017 at 22:23)</a>:</h4>
<p>I think the $validate-code option is reasonable, but also that $lookup is the more direct option.  I'd prefer to avoid a proliferation of operations and instead document this use-case in the spec.  The gotcha here is clearly articulating appropriate behaviour of $lookup for a composite code where the code system supports composition.  E.g., language codes, UCUM, and SNOMED CT</p>



<a name="153868469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153868469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Russ Hamm <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153868469">(Jan 19 2017 at 22:27)</a>:</h4>
<p>A $validate-code operation at the Code System resource level seems to align with the CTS2 "exists" or "existsInCodeSystem" operations on the Entity Description Service which is used to determine if the specified Entity exists in the specified code system version.</p>
<p>In this context an Entity is analogous to a concept.</p>



<a name="153868512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153868512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153868512">(Jan 20 2017 at 02:44)</a>:</h4>
<p>I guess that it boils down to the use case; does a user wish to validate that a code is a valid member of a value set, or a code system? If it's the later then, as Michael says, $lookup may be the more direct option.</p>



<a name="153868553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153868553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153868553">(Jan 20 2017 at 10:19)</a>:</h4>
<p>it would be good anyway to clarify what lookup does when there's no such code. The answer should be an OperationOutcome... so it serves to validate</p>



<a name="153868566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153868566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153868566">(Jan 20 2017 at 12:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Yes, it should be an OperationPutcome.  And if we clarify that behavior, then I think using $lookup would work. </p>



<a name="153868669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153868669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153868669">(Jan 20 2017 at 18:20)</a>:</h4>
<p>Looking at the spec, the ValueSet <code>$validate-code</code> operation returns a Parameters Resource with result=false if the validation fails so, unless that is incorrect, perhaps the CodeSystem <code>$lookup</code> operation should behave in the same way?  Maybe for R4 as there is no R3 $lookup out parameter that indicates failure?</p>



<a name="153868832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153868832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Russ Hamm <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153868832">(Jan 23 2017 at 20:28)</a>:</h4>
<p>Since Code Systems and Value Sets are distinct animals I see both use cases being of value. <br>
For example:.</p>
<p>1. Is '22298006'  a valid concept identifier in SNOMED?<br>
2. Is '22298006' a valid concept identifier in the Ischemic Heart Disease Value Set?</p>
<p>Is it reasonable to assume that receiving a null result from a $lookup operation on a Code System implies that the conce does not exist in the code system?  I would prefer to submit a $validate operation for a given code on a Code System, and if it retunres "true", then proceed with a $lookup to obtain whatever metadata I may be interested in.</p>



<a name="153868833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153868833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Russ Hamm <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153868833">(Jan 23 2017 at 20:33)</a>:</h4>
<p>I like that.</p>



<a name="153869146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153869146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153869146">(Jan 25 2017 at 18:53)</a>:</h4>
<p>We can do this sufficiently in ValueSet $validate-code, I think - <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12700" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12700">GF#12700</a>.  We may still want to enhance the behavior of the $lookup response when presented with an invalid code, as well.</p>



<a name="153870120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153870120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153870120">(Feb 06 2017 at 02:47)</a>:</h4>
<p>valid = false is different from validate failed with operation outcome </p>



<a name="153870121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153870121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153870121">(Feb 06 2017 at 02:48)</a>:</h4>
<p>$lookup should return an operation outcome - at least for DSTU3. Is there a task to make this explicit?</p>



<a name="153870130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Code%20System%20Operations/near/153870130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Code.20System.20Operations.html#153870130">(Feb 06 2017 at 02:55)</a>:</h4>
<p>We voted on <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12700" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12700">GF#12700</a> on Thursday, to add $validate-code also to CodeSystem, but it didn't address the operation outcome - so we don't currently have a task for that.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
