---
layout: page
title: "FHIR Chat  · ConceptMap/$translate · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html">ConceptMap/$translate</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154013617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154013617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154013617">(Oct 30 2018 at 14:07)</a>:</h4>
<p>Hi,<br>
I've got this ConceptMap right here (-&gt; <a href="http://test.fhir.org/r3/ConceptMap/104" target="_blank" title="http://test.fhir.org/r3/ConceptMap/104">http://test.fhir.org/r3/ConceptMap/104</a>), which has a mapping for </p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;group&gt;</span>
    <span class="nt">&lt;source</span> <span class="na">value=</span><span class="s">&quot;http://dmi.de/fhir/CodeSystem/kdl&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;target</span> <span class="na">value=</span><span class="s">&quot;urn:oid:1.3.6.1.4.1.19376.3.276.1.5.9&quot;</span><span class="nt">/&gt;</span>
     [...]
    <span class="nt">&lt;element&gt;</span>
      <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;AM010102&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">&quot;G-AEP Kriterien&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;target&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;AUFN&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">&quot;Einweisungs- und Aufnahmedokumente&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;equivalence</span> <span class="na">value=</span><span class="s">&quot;wider&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/target&gt;</span>
    <span class="nt">&lt;/element&gt;</span>
  <span class="nt">&lt;/group&gt;</span>
</pre></div>


<p>however, the Operation <a href="http://test.fhir.org/r3/ConceptMap/104/$translate?code=AM010102&amp;system=http://dmi.de/fhir/CodeSystem/kdl" target="_blank" title="http://test.fhir.org/r3/ConceptMap/104/$translate?code=AM010102&amp;system=http://dmi.de/fhir/CodeSystem/kdl">http://test.fhir.org/r3/ConceptMap/104/$translate?code=AM010102&amp;system=http://dmi.de/fhir/CodeSystem/kdl</a><br>
returns:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;Parameters</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;parameter&gt;</span>
    <span class="nt">&lt;name</span> <span class="na">value=</span><span class="s">&quot;result&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;valueBoolean</span> <span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/parameter&gt;</span>
  <span class="nt">&lt;parameter&gt;</span>
    <span class="nt">&lt;name</span> <span class="na">value=</span><span class="s">&quot;message&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;valueString</span> <span class="na">value=</span><span class="s">&quot;Code AM010102 in system http://dmi.de/fhir/CodeSystem/kdl not recognized&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/parameter&gt;</span>
<span class="nt">&lt;/Parameters&gt;</span>
</pre></div>


<p>I would argue, that the given the ConceptMap, the server has everything it needs to answer the request...<br>
But apparently, it's running additional checks like validating the Code against the source ValueSet or against the CodeSystem? Which additional Resources do I need?</p>



<a name="154013633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154013633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154013633">(Oct 30 2018 at 14:58)</a>:</h4>
<p>Well, the server isn't recognizing the source value set or the group source code system, so I expect you need to add something for those:<br>
<code>http://test.fhir.org/r3/ValueSet?url=http%3A//dmi.de/fhir/ValueSet/kdl</code><br>
<code>http://test.fhir.org/r3/CodeSystem?url=http%3A//dmi.de/fhir/CodeSystem/kdl</code></p>



<a name="154013645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154013645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154013645">(Oct 30 2018 at 15:15)</a>:</h4>
<p>I added the CodeSystem, now I get</p>
<div class="codehilite"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Parameters xmlns=&quot;http://hl7.org/fhir&quot;&gt;
    &lt;parameter&gt;
        &lt;name value=&quot;result&quot;/&gt;
        &lt;valueBoolean value=&quot;false&quot;/&gt;
    &lt;/parameter&gt;
    &lt;parameter&gt;
        &lt;name value=&quot;message&quot;/&gt;
        &lt;valueString value=&quot;Invalid class typecast&quot;/&gt;
    &lt;/parameter&gt;
&lt;/Parameters&gt;
</pre></div>



<a name="154013647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154013647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154013647">(Oct 30 2018 at 15:16)</a>:</h4>
<p>Same after adding the ValueSet...</p>



<a name="154013649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154013649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154013649">(Oct 30 2018 at 15:17)</a>:</h4>
<p>Both URLs you suggested resolve to the corresponding Ressources now...</p>



<a name="154013653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154013653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154013653">(Oct 30 2018 at 15:19)</a>:</h4>
<p>"Invalid class typecast" sounds like a server bug to me, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>?</p>



<a name="154013881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154013881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154013881">(Oct 30 2018 at 22:18)</a>:</h4>
<p>yes, and I think I've fixed that</p>



<a name="154013884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154013884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154013884">(Oct 30 2018 at 22:18)</a>:</h4>
<p>I'll upgrade the server</p>



<a name="154015856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154015856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154015856">(Nov 06 2018 at 08:54)</a>:</h4>
<p>BTW, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> : <a href="http://tx.fhir.org" target="_blank" title="http://tx.fhir.org">tx.fhir.org</a> doesn't allow the uploading of ConceptMaps. Is that on purpose?</p>



<a name="154015862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154015862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154015862">(Nov 06 2018 at 09:54)</a>:</h4>
<p>yes because lots of processes depend on it being correct. I can upload, but others can't</p>



<a name="154016178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154016178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154016178">(Nov 07 2018 at 13:59)</a>:</h4>
<p>Ok, but the behaviour of $translate should be the same on <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a>, right?</p>



<a name="154016344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154016344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154016344">(Nov 07 2018 at 19:35)</a>:</h4>
<p>yes same serfver</p>



<a name="154016345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/154016345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#154016345">(Nov 07 2018 at 19:35)</a>:</h4>
<p>though I think <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> is an upgrade behind, which I'll be fixing in a few hours</p>



<a name="174681303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/174681303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#174681303">(Sep 01 2019 at 23:29)</a>:</h4>
<p>The operation definition for <code>$translate</code> says very little about how to deal with various error cases - eg translating an unknown code in a known code system, or translating an unknown code system.<br>
In particular, should the operation return a 200 or a 4xx (400, 404, 4??) status code</p>



<a name="174681360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/174681360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#174681360">(Sep 01 2019 at 23:31)</a>:</h4>
<p>my take: <br>
- if the inputs are not understood, return 400<br>
- if the inputs are understood, but there is no translation, then 200 OK with result = false<br>
- there are always cases where the server can't be sure that the client asked the wrong question, so it's impossible to nail down 4xx vs 5xx</p>
<p>it would be good to have a task to clarify this</p>



<a name="174681453"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/174681453" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#174681453">(Sep 01 2019 at 23:35)</a>:</h4>
<p>5xx means error internal to server ; 4xx is "error" in the request itself (where this may include not supported by this server; 501 might be okay for this, by my preference would be for a 422)</p>



<a name="174681474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/174681474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#174681474">(Sep 01 2019 at 23:35)</a>:</h4>
<p>sure. we can certainly recommend 4xx or even 422 but I don't think it's good to make it a SHALL</p>



<a name="174681531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/174681531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#174681531">(Sep 01 2019 at 23:37)</a>:</h4>
<p>Can you clarify what "inputs are (not) understood" means?  I don't think of this as a known/unknown issue</p>



<a name="174681700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/174681700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#174681700">(Sep 01 2019 at 23:42)</a>:</h4>
<p>either inputs are missing, or the values are not considered to be valid.</p>



<a name="174980448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/174980448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#174980448">(Sep 05 2019 at 14:42)</a>:</h4>
<p>So here's an example call <code>[base]/ConceptMap/$translate?system=http://hl7.org/fhir/address-use&amp;code=xxx&amp;source=http://hl7.org/fhir/ValueSet/address-use&amp;target=http://terminology.hl7.org/ValueSet/v3-AddressUse</code> where the code being translated, <code>xxx</code> is not in the code system <code>http://hl7.org/fhir/address-use</code></p>
<p>Our server "understands" the inputs - a code &amp; a system URI, but there is no translation because the code is not valid.  We return a 200 and a result = false.  Should we instead return a 400?  This would align with <code>$lookup</code>, but does require more processing</p>



<a name="175011142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate/near/175011142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.html#175011142">(Sep 05 2019 at 20:20)</a>:</h4>
<p>I agree that 200 is right in this case, and we should document that</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
