---
layout: page
title: "FHIR Chat  · Local CodeSystem declaration · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html">Local CodeSystem declaration</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="207966471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/207966471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#207966471">(Aug 25 2020 at 14:02)</a>:</h4>
<p>After examining complaints from the IG Publisher about unknown code systems I decided to have a look at our CodeSystem situation. We have 93 distinct local code systems to deal with. Some identified with a URI and most based on urn:oid:.</p>
<p>Because this is STU3 there is also the odd system that got a URI assigned in R4. This concerns 1.3.160 or GTIN.</p>
<p>I would like to help implementers by supplying more formal information on these codesystems than we currently do, and hopefully satisfy the IG Publisher in the process.</p>
<p>I can think of two ways, or both:</p>
<ul>
<li>Add CodeSystem resources for each, outlining copyrights, where to get them (we seldom own them) etc. and use CodeSystem.content = not-present<ul>
<li>Big note: the CodeSystem.url will be urn:oid:... for these systems where applicable</li>
</ul>
</li>
<li>Add NamingSystem that does that same thing except that it does not have the burden of content and concentrates on meta only.</li>
</ul>
<p>Any advice to share which is preferred?</p>



<a name="207970683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/207970683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#207970683">(Aug 25 2020 at 14:35)</a>:</h4>
<p>I've done #1 for my Da Vinci guide where I have X12 code systems.  I call them "stub" code systems as they aren't code systems that you can use (since the content isn't present) but it gives the URL (or OID in your case), some definitions, and potentially some copyright information.</p>



<a name="207986106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/207986106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#207986106">(Aug 25 2020 at 16:33)</a>:</h4>
<p>The decision at least partly comes down to who is in control of the code system and how much and what types of metadata are available for it.  The CodeSystem resource should represent the point of view and the content determined by the code system owner/publisher (although someone else, such as yourself, might actually create the resource instance).  If the metadata includes the copyright and many of the additional items (including properties, filters, etc.), then CodeSystem is the only way that we have to represent that.  If you have multiple identifiers of one or more identifier types (e.g. an oid and a url, or multiples of those) and need or want to declare or obtain the preferred identifier for a type, then obviously NamingSystem is needed for that.  So in some cases you may need both.</p>



<a name="208026563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/208026563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#208026563">(Aug 25 2020 at 21:31)</a>:</h4>
<p>I didn't write the terminology sub-system used in the validator and the publisher to deal with the situation where a package declares a code system stub for a code system that <a href="http://tx.fhir.org">tx.fhir.org</a> handles. By default, the stub hides the <a href="http://tx.fhir.org">tx.fhir.org</a> server's support for the code system. But stubs like this are appearing in multiple places, especially UTG, and so I am hunting down all these places and trying to figure out whether the stub should be referenced or not. </p>
<p>This is to say: if you declare those as code system stubs, you may get unexpected side effects. We can discuss/debug</p>



<a name="208080468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/208080468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#208080468">(Aug 26 2020 at 11:42)</a>:</h4>
<p>My intention after reading all this, is to create both CodeSystems and NamingSystems for each of the 93 systems. From there I intend take the discussion to the IG creation stream if unexpected things turn up there.</p>



<a name="208086355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/208086355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#208086355">(Aug 26 2020 at 12:48)</a>:</h4>
<p>Of course it would be good to also bring relevant issues/questions back to this stream, as well (in addition to IG Creation).</p>



<a name="208664771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/208664771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#208664771">(Sep 01 2020 at 09:38)</a>:</h4>
<p>Sure. If I run into issues creating the shell CodeSystems I'll check in here. Maybe one thing:</p>
<ul>
<li>FHIR juggled URIs from STU3 to R4 for all HL7 systems</li>
<li>Every once in a while a new URI gets added e.g. for GTIN in R4, where we use the OID in STU3</li>
</ul>
<p>This means that for us in STU3 we stick with what was known in STU3, and expect to move to R4 system identification when we move to R4. We cannot convert while in production with STU3.</p>
<p>The value proposition of ever changing identifiers is not very good. We had stable OIDs for 15-20 years, and now FHIR changes identifiers from OIDs to URIs and then from URIs to different URIs. All without helping patients. I've expressed this before.</p>
<p>My main question is really about what the experience with this is so far. Do people check NamingSystems? Does an STU3 NamingSystem have a different preferred identifier for the same system than R4? That would be my expectation. Would it be correct to even list the R4 GTIN URI in an STU3 NamingSystem? How does all this interrelate with CodeSystem.url? STU3 GTIN CodeSystem and R4 GTIN CodeSystem would be virtually different systems based on their canonical.</p>



<a name="208665267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/208665267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#208665267">(Sep 01 2020 at 09:43)</a>:</h4>
<p>In general, we should not be changing code system URIs once they are defined. The change to <a href="http://terminology.hl7.org">terminology.hl7.org</a> was very much a once off.</p>



<a name="208826089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/208826089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#208826089">(Sep 02 2020 at 13:49)</a>:</h4>
<p>I was counting on that. But given the life span of STU3 implementations it does raise long term questions.</p>



<a name="208882716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/208882716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#208882716">(Sep 02 2020 at 20:27)</a>:</h4>
<p>yes i hear you. It's painful but it's also definitely in the trial-use space, and the committee decided to make the change based on the outcome of the trial use</p>



<a name="208889980"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/208889980" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#208889980">(Sep 02 2020 at 21:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191375">Alexander Henket</span> <a href="#narrow/stream/179202-terminology/topic/Local.20CodeSystem.20declaration/near/208664771">said</a>:</p>
<blockquote>
<p>My main question is really about what the experience with this is so far. Do people check NamingSystems? Does an STU3 NamingSystem have a different preferred identifier for the same system than R4? That would be my expectation. Would it be correct to even list the R4 GTIN URI in an STU3 NamingSystem? How does all this interrelate with CodeSystem.url? STU3 GTIN CodeSystem and R4 GTIN CodeSystem would be virtually different systems based on their canonical.</p>
</blockquote>
<p>It's certainly possible to use the NamingSystem resource for identifier translation. There isn't currently an operation to do this, although one has been proposed for R5 <a href="https://jira.hl7.org/browse/FHIR-26837">JIRA 26837</a>. I've created a custom operation to do this on my R4 Server as, in addition to OID to URI changes as we move from CDA to FHIR,  an NZ government dept has already changed a group of identifiers used in production FHIR R4 systems.</p>



<a name="208921552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/208921552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#208921552">(Sep 03 2020 at 05:08)</a>:</h4>
<p>It is also arguable (intended) that when a terminology server resolves a CodeSystem URI it should look at its NamingSystems as part of the process.<br>
Ontoserver doesn't do this (yet).  I don't know what other systems do - <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191364">@Peter Jordan</span> <span class="user-mention" data-user-id="191405">@Rob Hausam</span> ?</p>



<a name="208931959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/208931959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#208931959">(Sep 03 2020 at 07:55)</a>:</h4>
<p>I'm not sure that my server does yet. The mini-terminology server in the validator does</p>



<a name="208948153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Local%20CodeSystem%20declaration/near/208948153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Local.20CodeSystem.20declaration.html#208948153">(Sep 03 2020 at 10:41)</a>:</h4>
<p>Terminz uses Naming System resources for converting the Code System OIDs in CDA documents to FHIR CodeSystem URIs, but I need to extend this for resolving URIs where CodeSystem URIs have (already!) been changed by their owner.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
