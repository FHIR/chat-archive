---
layout: page
title: "FHIR Chat  · filters · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/filters.html">filters</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="210853227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/filters/near/210853227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirstine Rosenbeck Gøeg <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/filters.html#210853227">(Sep 22 2020 at 10:43)</a>:</h4>
<p>I am looking for a FHIR terminology server that can expand a Value Set based on a filter (descendants of a concept). The Code system is not SNOMED or LOINC, but a complete FHIR CodeSystem. I realize that "filters" are server specific, but I wonder if anyone have implemented this? or plan to do so? It would decrease the maintenance burden significantly, because additions to the CodeSystem in most cases, would not require a manual update of the related ValueSets.</p>
<p>Suggestions for alternative implementations are also welcome :-)</p>
<p>I have tried using a hapi fhir server. I can implement the CodeSystem and ValueSet, but not use the expand operator (naturally), since the server does not implement the filter.</p>
<p>(If you have seen this post before, it is because I have also posted it in the Implementers-stream. They suggested that I posted it here instead :-))</p>



<a name="210855275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/filters/near/210855275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/filters.html#210855275">(Sep 22 2020 at 11:07)</a>:</h4>
<p>I think the server running at <a href="http://tx.fhir.org">tx.fhir.org</a> does, but if HAPI does not, you can make a PR to it so that it does</p>



<a name="210903809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/filters/near/210903809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/filters.html#210903809">(Sep 22 2020 at 17:25)</a>:</h4>
<p><span class="user-mention" data-user-id="194347">@Kirstine Rosenbeck Gøeg</span> Which version(s) of HAPI have you tried?  I believe at least the latest versions (e.g. 5.1.0) should be able to do this.  If you can share an example, that could help.</p>



<a name="210933699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/filters/near/210933699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/filters.html#210933699">(Sep 22 2020 at 21:30)</a>:</h4>
<p>Ontoserver does this.  In fact it supports use of a ValueSet of any filter defined in the FHIR CodeSystem.  <a href="https://ontoserver.csiro.au">https://ontoserver.csiro.au</a></p>



<a name="210969071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/filters/near/210969071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirstine Rosenbeck Gøeg <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/filters.html#210969071">(Sep 23 2020 at 07:51)</a>:</h4>
<p>Thanks for the suggestion <span class="user-mention" data-user-id="191405">@Rob Hausam</span> </p>
<p>The hapi server version is 5.0.0. Here is an example of my ValueSet expansion that fails:</p>
<p>{<br>
  "resourceType": "ValueSet",<br>
  "status": "active",<br>
  "compose": {<br>
    "include": [ {<br>
      "system": "<a href="http://kl.dk/fhir/common/caresocial/CodeSystem/KLCommonCareSocialCodes">http://kl.dk/fhir/common/caresocial/CodeSystem/KLCommonCareSocialCodes</a>",<br>
      "filter": [ {<br>
        "property": "descendants",<br>
        "op": "descendent-of",<br>
        "value": "940f37e6-8a3d-483b-adac-be8af3268a5b"<br>
      } ]<br>
    } ]<br>
  },<br>
  "expansion": {<br>
    "identifier": "61bfd0bc-dd62-45e2-8964-0564fda8ada1",<br>
    "timestamp": "2020-09-23T07:42:44+00:00",<br>
    "total": 0<br>
  }<br>
}</p>
<p>Which uses the CodeSystem that you can see here: <a href="http://build.fhir.org/ig/Kirstinerosenbeck/FKInfo/branches/master/CodeSystem-KLCommomCareSocialCodes.html">http://build.fhir.org/ig/Kirstinerosenbeck/FKInfo/branches/master/CodeSystem-KLCommomCareSocialCodes.html</a></p>
<p>It is not a referencing problem. The CodeSystem is also on the hapi server, and everything works as it should for explicitly defined ValueSets.</p>



<a name="210973882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/filters/near/210973882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirstine Rosenbeck Gøeg <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/filters.html#210973882">(Sep 23 2020 at 08:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> That is great. To be honest, I have already looked in the Ontoserver documentation. I could only find descriptions of the use of filters for LOINC and SNOMED CT - not FHIR CodeSystem, and that is the reason I didn't explored this option further at first. Is it described in the documentation?</p>



<a name="211096691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/filters/near/211096691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/filters.html#211096691">(Sep 24 2020 at 07:20)</a>:</h4>
<p>It probably isn't. The intention is to follow <a href="http://hl7.org/fhir/codesystem.html#properties">http://hl7.org/fhir/codesystem.html#properties</a>, but it does differ somewhat (the Ontoserver implementation predates that section). The built-in filters we support for any FHIR CodeSystem that you upload (whether or not you declare them) are:</p>
<ul>
<li><code>concept</code>(with operators =, in, not-in, isa, is-not-a, regex, generalizes and descendent-of)</li>
<li><code>parent</code> and <code>child</code> (=, in, not-in, exists)</li>
<li><code>inactive</code> and <code>definition</code> (=, exists)<br>
Also, you can declare a CodeSystem filter with the same name as a property, and the server will evaluate those as well. The set of filter operators that will be accepted is dependent on the type of the property (e.g. is-a or generalizes are only available for code- or coding-typed properties)</li>
</ul>



<a name="211098770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/filters/near/211098770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/filters.html#211098770">(Sep 24 2020 at 07:49)</a>:</h4>
<p>Additionally, any declared property implicitly defines a filter of the same name with operators <code>=</code> and <code>in</code> as per <a href="http://hl7.org/fhir/codesystem.html#filters">http://hl7.org/fhir/codesystem.html#filters</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
