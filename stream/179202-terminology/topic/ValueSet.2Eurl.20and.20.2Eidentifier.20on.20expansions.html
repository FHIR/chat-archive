---
layout: page
title: "FHIR Chat  · ValueSet.url and .identifier on expansions · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html">ValueSet.url and .identifier on expansions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153839671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839671">(Jul 19 2016 at 15:58)</a>:</h4>
<p>Hi. Continuing a conversation I had with Grahame where we reached a number of conclusions and left 2 items open on the topic of ValueSet expansion and the expectation on certain properties.</p>
<p>Here's the conclusion so far. On a ValueSet expansion:<br>
- <a href="http://ValueSet.id" target="_blank" title="http://ValueSet.id">ValueSet.id</a> -- leave empty unless one can retrieve the exact same expansion under that id<br>
- ValueSet.identifier -- SHALL be that of the master ValueSet, usually the definitional ValueSet, but in rare cases it could be that the definition is not available in the FHIR realm and so only an expansion is available<br>
- ValueSet.url -- SHALL be that of the master ValueSet, usually the definitional ValueSet, but in rare cases it could be that the definition is not available in the FHIR realm and so only an expansion is available<br>
- ValueSet.expansion.identifier -- SHOULD be a uuid to allow receivers to track a particular expansion (I would prefer SHALL here)</p>



<a name="153839672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839672">(Jul 19 2016 at 16:02)</a>:</h4>
<p>So here's the thing where we did not reach agreement yet. On any resource we have, that carry .url and .identifier, they point to the object they are on. However when we talk about ValueSet expansions they point to the master ValueSet that the expansion was generated from.</p>
<p>Grahames argueing that the master ValueSet holds the idea behind the expansion and .url and .identifier always point to the underlying idea so there is no inconsistency.</p>
<p>I'm having trouble agreeing with that so I would like to poll for opinions here. Maybe I'm wrong, maybe I'm not. Please share.</p>



<a name="153839725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839725">(Jul 19 2016 at 17:38)</a>:</h4>
<p>Questions about ValueSet.expansion.identifier. Is it unique per $expand operation? In order to do that, the server need to track/save all $expand operations. But for how long? For example, if the client submit a operation ValueSet/23/$expand?filter="abc" today and then the client submit the same operation one week later, should the server return the same expasion.identifier? </p>



<a name="153839735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839735">(Jul 19 2016 at 18:32)</a>:</h4>
<p>There is no guidance on that here: <a href="http://hl7-fhir.github.io/valueset-operations.html#expand" target="_blank" title="http://hl7-fhir.github.io/valueset-operations.html#expand">http://hl7-fhir.github.io/valueset-operations.html#expand</a>. There is exactly 1 sentence that could lead you to believe that in most cases every expansion is unique: "The value set expansion returned by this query should be treated as a transient result that will change over time (whether it does or not depends on how the value set is specified), so applications should repeat the operation each time the value set is used."</p>
<p>The other notion is that expansion.identifier is likely a uuid, so that sort of resolves the issue of uniqueness</p>



<a name="153839737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839737">(Jul 19 2016 at 18:33)</a>:</h4>
<p>In OID terms you could just keep numbering under a branch. Whether you have one branch for all expansions or a branch per ValueSet is server discretion</p>



<a name="153839738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839738">(Jul 19 2016 at 18:35)</a>:</h4>
<p>You could file a tracker item for guidance. You could also see if a ConformanceProfile would be a suitable place for clients to find out server behavior for expansions. Or maybe ExpansionProfiles are a better place but I've not yet read what they do</p>



<a name="153839739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839739">(Jul 19 2016 at 18:42)</a>:</h4>
<p>I think that if I were building a server I would keep static expansions handy for extensional and occasional expansional ValueSets and update them as I update the master ValueSet. For intentional ValueSets I would probably decide on a case by case basis.</p>



<a name="153839746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839746">(Jul 19 2016 at 19:10)</a>:</h4>
<p>my server - and others - cache the results of $expand pretty aggresively. If you ask for the same expansion again, you'll get the same expansion. with the same <a href="http://expansion.id" target="_blank" title="http://expansion.id">expansion.id</a>. </p>



<a name="153839747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839747">(Jul 19 2016 at 19:11)</a>:</h4>
<p>the rule is simple: <br>
- if the <a href="http://expansion.id" target="_blank" title="http://expansion.id">expansion.id</a> is the same, the content of the expansion in the resource must be a perfect match. <br>
- if the <a href="http://expansion.id" target="_blank" title="http://expansion.id">expansion.id</a> is different, the content of the expansion may or may not be the same as any other expansion</p>



<a name="153839748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839748">(Jul 19 2016 at 19:12)</a>:</h4>
<p>I think that answers Yunwei's queation, and I'd be happy to make more clarity on that </p>



<a name="153839749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839749">(Jul 19 2016 at 19:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191375">@Alexander Henket</span> : you keep using this phrase: "On any resource we have, that carry .url and .identifier, they point to the object they are on"</p>



<a name="153839750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839750">(Jul 19 2016 at 19:14)</a>:</h4>
<p>but this is not true. Take Patient, for instance; there can be multiple different patient resources, from diffrerent servers, with very different details , but they all have the same identifier, because they all describe the *same underlying idea*. </p>



<a name="153839751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839751">(Jul 19 2016 at 19:15)</a>:</h4>
<p><a href="http://reosurce.id" target="_blank" title="http://reosurce.id">reosurce.id</a> is the thing that points to the object</p>



<a name="153839759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839759">(Jul 19 2016 at 19:23)</a>:</h4>
<p>I think I can finally follow that for .identifier. A person under SSN 12345 may have records in many EHRs. I'm not there yet for canonical URL, but if .url like you said is about that same "idea" then the same logic would apply</p>



<a name="153839827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839827">(Jul 19 2016 at 22:04)</a>:</h4>
<p>Both URL and identifier are version-independent identifiers.  It's quite possible for there to be multiple instances on a server that share the same URL and business identifier for most/all conformance resources - that's why we have a business "version" element.  The tricky part here is that for an expansion, you might be talking about the same business version too - and we haven't talked about what happens if you find multiple instances on the same server that share both business identifier/canonical URL *and* business version.  So I think it makes sense for the value set resource to talk about that piece.</p>



<a name="153839845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839845">(Jul 19 2016 at 22:32)</a>:</h4>
<p>I agree with <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> approach. I'm not following <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> situation...</p>



<a name="153839883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839883">(Jul 19 2016 at 22:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191503">@Robert McClure</span> I was just saying that having multiple instances on a server that share the same business identifier and canonical URL will be common (so that's not an issue), but having multiple instances that also share the same ".version" value will be uncommon, so having some extra documentation on the ValueSet resource that discusses that (and points you to look at .expansion.id to disambiguate) would be useful.</p>



<a name="153839884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153839884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153839884">(Jul 19 2016 at 23:01)</a>:</h4>
<p>that's logically part of the documentation around persisting expansions</p>



<a name="153840036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153840036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153840036">(Jul 20 2016 at 19:37)</a>:</h4>
<p>Since we seem to be reaching more and more conclusions and since my holiday starts a day from today: what to do with the tracker item that is in desparate need of more targeted text? <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> are you taking on to update that with what we came up here, or shall I? <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10375" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10375">GF#10375</a></p>



<a name="153840080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153840080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153840080">(Jul 20 2016 at 21:48)</a>:</h4>
<p>well, let's just a dd areference to this topic to the task</p>



<a name="153840208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153840208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153840208">(Jul 21 2016 at 05:41)</a>:</h4>
<p>Done</p>



<a name="153840209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153840209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153840209">(Jul 21 2016 at 05:44)</a>:</h4>
<p>thx</p>



<a name="153841376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet.url%20and%20.identifier%20on%20expansions/near/153841376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.2Eurl.20and.20.2Eidentifier.20on.20expansions.html#153841376">(Jul 27 2016 at 23:11)</a>:</h4>
<p>*.url is badly named (IMO) - it is not a Location, it is an Identifier - as I understand things, the "URLness" is actually a statement about its type</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
