---
layout: page
title: "FHIR Chat  · ValueSet Invariants · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Invariants.html">ValueSet Invariants</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="216536761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Invariants/near/216536761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Invariants.html#216536761">(Nov 12 2020 at 22:12)</a>:</h4>
<p>Looking at the ValueSet resource (R4) I can see that invariant "vsd-3" precludes a "compose" having both a "filter" and "concept" definition.</p>
<p>I'm unclear as to the role ValueSet.compose.include.valueSet plays.</p>
<ul>
<li>Is it possible to populate this if either ValueSet.compose.include.concept or ValueSet.compose.include.filter is present ?</li>
<li>Also is ValueSet.compose.include.valueSet is populated, would this potentially not conflict with ValueSet.compose.include.system &amp; ValueSet.compose.include.version</li>
</ul>



<a name="216536903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Invariants/near/216536903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Invariants.html#216536903">(Nov 12 2020 at 22:13)</a>:</h4>
<p>yes, you can have both (valueSet and concept or filter) and it does an intersection</p>



<a name="216536979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Invariants/near/216536979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Invariants.html#216536979">(Nov 12 2020 at 22:14)</a>:</h4>
<p>if the systems don't match, the result will be empty</p>



<a name="216538080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Invariants/near/216538080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Invariants.html#216538080">(Nov 12 2020 at 22:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> thanks, still not sure I totally understand.</p>
<p>So, for example, </p>
<ul>
<li>if there is a filter and no valueSet, then the filter works on the codeSystem specified in include.system</li>
<li>if there is a filter and a valueSet, the the filter just works on the codes defined by that valueSet</li>
</ul>
<p>is that it?</p>



<a name="216539592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Invariants/near/216539592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Invariants.html#216539592">(Nov 12 2020 at 22:37)</a>:</h4>
<p>No, the filter works on the CodeSystem but the results are intersected with the expansion of the valueset.<br>
Eg imagine you have a valueset for drugs prescribable in some context and then your filter matches drugs containing some specific ingredient.  The result will be prescribable drugs containing that ingredient</p>



<a name="216540216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Invariants/near/216540216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Invariants.html#216540216">(Nov 12 2020 at 22:42)</a>:</h4>
<p>Thanks again - I think your example is what I was trying to describe above. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
