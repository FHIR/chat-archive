---
layout: page
title: "FHIR Chat  · OMOP Vocab Concept Persistence · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html">OMOP Vocab Concept Persistence</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="276058476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/276058476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davera Gabriel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#276058476">(Mar 21 2022 at 14:30)</a>:</h4>
<p>Hello <span class="user-mention" data-user-id="191343">@Michael Lawley</span>   <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> indicated in a meeting last week you have discovered instances where the OMOP Vocabulary content did not seem to adhere to concept persistence.  It is intended to. Could you please share an example or 2 (which hopefully also indicates how you discovered this?)  There is an OHDSI Vocabulary WG meeting tomorrow 3/22 noon EASTERN &amp; this may be a good topic for that agenda, if its not too full. <span class="user-mention" data-user-id="409404">@Christian Reich</span>  Thanks in advance for your help!</p>



<a name="276140371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/276140371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#276140371">(Mar 22 2022 at 03:38)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="340004">@Davera Gabriel</span> I think this might be a reference to my reading of the code indicating that the assignment of OMOP concept ids to codes is done in a sequential manner as the codes are imported.  This means that 1. this assignment is dependent on the order that the vocabulary sets are imported, and 2. even if the order is preserved, if one set changes in size (eg a new version), then all subsequent ids will change.</p>
<p>Now, if there's a single instance of Athena being used (such as <a href="https://athena.ohdsi.org">https://athena.ohdsi.org</a>), and it's never reset, but only ever added to, then the ids will be stable for all users of that instance, but if anyone is running their own version then they're likely to get different ids.</p>
<p>Section 2.3 of this report <a href="https://aehrc.csiro.au/wp-content/uploads/2021/11/CSIRO-FHIR-OMOP-Terminology-Report.pdf">https://aehrc.csiro.au/wp-content/uploads/2021/11/CSIRO-FHIR-OMOP-Terminology-Report.pdf</a> indicates several options for rectifying this issue.</p>



<a name="276805190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/276805190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davera Gabriel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#276805190">(Mar 27 2022 at 20:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191343">Michael Lawley</span> <a href="#narrow/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence/near/276140371">said</a>:</p>
<blockquote>
<p>Hi <span class="user-mention silent" data-user-id="340004">Davera Gabriel</span> I think this might be a reference to my reading of the code indicating that the assignment of OMOP concept ids to codes is done in a sequential manner as the codes are imported.  This means that 1. this assignment is dependent on the order that the vocabulary sets are imported, and 2. even if the order is preserved, if one set changes in size (eg a new version), then all subsequent ids will change.</p>
<p>Now, if there's a single instance of Athena being used (such as <a href="https://athena.ohdsi.org">https://athena.ohdsi.org</a>), and it's never reset, but only ever added to, then the ids will be stable for all users of that instance, but if anyone is running their own version then they're likely to get different ids.</p>
<p>Section 2.3 of this report <a href="https://aehrc.csiro.au/wp-content/uploads/2021/11/CSIRO-FHIR-OMOP-Terminology-Report.pdf">https://aehrc.csiro.au/wp-content/uploads/2021/11/CSIRO-FHIR-OMOP-Terminology-Report.pdf</a> indicates several options for rectifying this issue.</p>
</blockquote>
<p>Hello <span class="user-mention" data-user-id="191343">@Michael Lawley</span> The Athena content is refreshed and not just added to: so you are correct about those mechanics, but they do adhere to concept persistence as a principle.  We've been working with the OHDSI vocab group to obtain older versions to do some mapping validation.  Re: you observation - thank you for the explanation. The OHDSI community implementations are quite diverse and I am doubtful they synchronize their vocab updates universally, so if the concept IDS do change then they would not be able to exchange data: a primary driver for the growth of network.  I will follow-up with the OHDSI CDM Vocab WG: meeting 2nd &amp; 4th Tuesdays at noon EASTERN <a href="https://nam02.safelinks.protection.outlook.com/ap/t-59584e83/?url=https%3A%2F%2Fteams.microsoft.com%2Fl%2Fmeetup-join%2F19%253a31208179438d45749ff484124e7b1e5e%2540thread.tacv2%2F1643021879761%3Fcontext%3D%257b%2522Tid%2522%253a%2522a30f0094-9120-4aab-ba4c-e5509023b2d5%2522%252c%2522Oid%2522%253a%252273ace293-2e0d-4ee0-bcce-3c6001dc347c%2522%257d&amp;data=04%7C01%7Cdgabrie4%40jhmi.edu%7C289ca41cb5bc41bbd4d808d9df286927%7C9fa4f438b1e6473b803f86f8aedf0dec%7C0%7C0%7C637786187052085772%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&amp;sdata=1eODVyj6huDyuCVoECzBngvsWMsQUrntsoIQimdEqjA%3D&amp;reserved=0">here</a><br>
Thanks again!<br>
D</p>



<a name="276891169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/276891169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#276891169">(Mar 28 2022 at 15:34)</a>:</h4>
<p>Semi-related. We had a case where we were adding other vocabularies into the OMOP/Athena schema. <br>
To deal with the changing sequences we used a negative integer sequence for data we inserted to logically separate it from OMOP-"curated" data. This gave us a path to refresh the Athena data at a later point while preserving our data. It's a tad hacky but it worked.</p>



<a name="276933622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/276933622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#276933622">(Mar 28 2022 at 21:26)</a>:</h4>
<p>A hash of system + code (and + version for those terminologies that don't support concept permanence; ICD I'm looking at you) would be a simple mechanism to fix this (short of actually using the native code-system and code pairs instead of a proxy id).</p>



<a name="277980603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/277980603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Kallfelz <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#277980603">(Apr 06 2022 at 06:34)</a>:</h4>
<p>The OMOP standardized vocabularies intentionally reserved a number range of 2 billion for local concept IDs. It is the convention to create your own concepts for local vocabularies in this number range. There can only be one Athena (and one vocabulary development server generating the IDs at this time) so concept IDs are stable. There have been early instances of reuse of concept IDs after the original ones were completely deleted as they were created in error, but other than that, concepts are not deleted but become invalid and stay in the vocabulary keeping their concept ID.</p>



<a name="278132221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/278132221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#278132221">(Apr 07 2022 at 08:32)</a>:</h4>
<p><span class="user-mention" data-user-id="427037">@Michael Kallfelz</span> what do you mean by "there can only be one Athena"?</p>



<a name="278148076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/278148076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Kallfelz <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#278148076">(Apr 07 2022 at 11:19)</a>:</h4>
<p>this means, while there is a github repository for Athena (or even two: backend &amp; frontend) it does not really make a lot of sense to stand up your own instance locally. There aren't a lot of use cases I could think of for doing this... But please, let me know about use cases that you would see here. Athena at <a href="http://athena.ohdsi.org">athena.ohdsi.org</a> is the one stop place for your OHDSI standardized vocabulary needs. Regarding the concept IDs (and their persistence) it is maybe even more important to understand that the currently supported setup is also one vocabulary server that feeds the refreshed vocabularies to Athena. Yes, there is the argument of a single point of failure. But there is also the argument of controlled and curated maintenance of the vocabularies whereas a federated approach with multiple servers would require considerable overhead for negotiating updates...  Does that make sense?</p>



<a name="278172019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/278172019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davera Gabriel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#278172019">(Apr 07 2022 at 14:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> are you possibly seeing this phenomenon on a separate instance of Athena?</p>



<a name="278172798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/278172798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#278172798">(Apr 07 2022 at 14:34)</a>:</h4>
<p>I think Michael was pointing out a general property of the current Athena design rather than any specific observed phenomenon. I don't think there's any debate about <em>whether</em> the design works this way; rather, there's discussion about whether this Is the optimal point in trade-off space between centralized control and the ability for external subcommunities to augment their data sets in consistent ways.</p>



<a name="278174506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/278174506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davera Gabriel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#278174506">(Apr 07 2022 at 14:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> <a href="#narrow/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence/near/278172798">said</a>:</p>
<blockquote>
<p>I think Michael was pointing out a general property of the current Athena design rather than any specific observed phenomenon. I don't think there's any debate about <em>whether</em> the design works this way; rather, there's discussion about whether this Is the optimal point in trade-off space between centralized control and the ability for external subcommunities to augment their data sets in consistent ways.</p>
</blockquote>
<p>FYI <span class="user-mention" data-user-id="427037">@Michael Kallfelz</span> aka: "Mik" leads the OHDSI CDM Vocab WG and is a principal PoC (in addition to <span class="user-mention" data-user-id="409404">@Christian Reich</span> ) for all things OMOP Vocab.  I have found these fellows to be great collaborators and quite attentive to The Community's needs  - which now includes all of you (HL7 membership at-large) :)</p>



<a name="278175054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/278175054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#278175054">(Apr 07 2022 at 14:49)</a>:</h4>
<blockquote>
<p>The Community's needs  - which now includes all of you (HL7 membership at-large) :)</p>
</blockquote>
<p>Just so! I wasn't trying to describe the HL7FHIR community at large as an "external subcommunity" here -- rather I'm talking about inherent design properties that allow anyone off the street to pick up a technology and start extending in their own ways.</p>



<a name="278195526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/278195526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Davera Gabriel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#278195526">(Apr 07 2022 at 17:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> <a href="#narrow/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence/near/278175054">said</a>:</p>
<blockquote>
<blockquote>
<p>The Community's needs  - which now includes all of you (HL7 membership at-large) :)</p>
</blockquote>
<p>Just so! I wasn't trying to describe the HL7FHIR community at large as an "external subcommunity" here -- rather I'm talking about inherent design properties that allow anyone off the street to pick up a technology and start extending in their own ways.</p>
</blockquote>
<p>Of course <span class="user-mention" data-user-id="191315">@Josh Mandel</span> ! ! That comment was aimed to provide context &amp; endorsement of the individuals mentioned more than any technology approaches.  The OHDSI community embraces open-source, -science principles.  I think they will be quite receptive to suggestions as to how they might further these commitments. Please do carry on with these kinds of observations :)</p>



<a name="278220680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/OMOP%20Vocab%20Concept%20Persistence/near/278220680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/OMOP.20Vocab.20Concept.20Persistence.html#278220680">(Apr 07 2022 at 20:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> is correct - I was talking about properties of the current design.  I believe it's very likely that others "off the street" will have, as Josh says, picked it up and deployed their own.<br>
As to why <span class="user-mention" data-user-id="427037">@Michael Kallfelz</span> , I could see wanting to use SNOMED CT-AU which contains AMT as one reason.  Another might be needing to work with proprietary codes that can't be exposed in a public server (I am guessing here, please correct me if I'm off-base and there are solutions to these issues).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
