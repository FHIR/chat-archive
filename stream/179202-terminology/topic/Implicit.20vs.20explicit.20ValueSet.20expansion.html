---
layout: page
title: "FHIR Chat  · Implicit vs explicit ValueSet expansion · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html">Implicit vs explicit ValueSet expansion</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153938832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Grimes <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938832">(Feb 20 2018 at 06:33)</a>:</h4>
<p>What is the expected behaviour if you:</p>
<ul>
<li>have a CodeSystem and a ValueSet with the same value in their <code>CodeSystem.valueSet</code> and <code>ValueSet.url</code> elements</li>
<li>call the <code>ValueSet$expand</code> operation, passing in this value in the <code>url</code> parameter?</li>
</ul>



<a name="153938842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938842">(Feb 20 2018 at 07:18)</a>:</h4>
<p>if you have a CodeSystem and a ValueSet with the same value in their CodeSystem.valueSet and ValueSet.url elements, then it is expect that the compose of the value set simply includes the entire code system</p>



<a name="153938843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938843">(Feb 20 2018 at 07:18)</a>:</h4>
<p>and $expand will return the expansion which is the whole code system</p>



<a name="153938844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938844">(Feb 20 2018 at 07:18)</a>:</h4>
<p>according to the compose</p>



<a name="153938845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938845">(Feb 20 2018 at 07:21)</a>:</h4>
<p>...but what if the ValueSet contains concepts from more than one Code System - or there are additional constraining parameters, e.g. a text filter?</p>



<a name="153938849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Grimes <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938849">(Feb 20 2018 at 07:23)</a>:</h4>
<p>I guess what I am asking is would you expect the server to give preference to the CodeSystem or the ValueSet - in terms of selecting a definition on which to base the calculation of the expansion?</p>



<a name="153938852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938852">(Feb 20 2018 at 07:27)</a>:</h4>
<p>Well, one could argue that implicit value sets are really <em>just</em> runtime artefacts, therefore the ValueSet definition is going to be contained in the related CodeSystem resource (plus, possibly in R4, a TerminologyCapabilities resource).</p>



<a name="153938856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938856">(Feb 20 2018 at 07:46)</a>:</h4>
<p>it's an error if the value set contains anything other than 'all the code system' - that's why the code system claims that it's the value set that contains all (and only) the code system</p>



<a name="153938858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938858">(Feb 20 2018 at 07:47)</a>:</h4>
<p>the server ignores the codesystem - the fact that CodeSystem.valueSet has a value or not is only useful in the case that someone has the code system, and wonders what the value set that is 'all the code system' is. Otherwise it's meaningless</p>



<a name="153938864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938864">(Feb 20 2018 at 07:53)</a>:</h4>
<p>Presumably you're talking about the implicit ValueSet 'definition' here, rather than the expansion of an implicit value set? In practical terms, my server creates implicit Value Set and Code System resources for major Code Systems, such as SNOMED CT, from a single class.</p>



<a name="153938865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938865">(Feb 20 2018 at 07:54)</a>:</h4>
<p>it doens't matter whether the value set is implicit or explicit</p>



<a name="153938867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938867">(Feb 20 2018 at 08:00)</a>:</h4>
<p>In my implementation, I store the definitions of extensional and intensional value sets (e.g. the test artefacts used by Touchstone) in separate classes, so from that perspective I handle implicit and explicit value sets differently. The data extraction layer is the same for intensional and implicit value sets - i.e. those based on a query rather than a pre-determined enumerated list.</p>



<a name="153938868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938868">(Feb 20 2018 at 08:10)</a>:</h4>
<p>I feel as though you confused the definition of implicit vs explicit and intensional vs extensional there.</p>



<a name="153938869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938869">(Feb 20 2018 at 08:11)</a>:</h4>
<p>but it doesn't really matter here - a valueset nominated in CodeSystem.valueSet will (once made explicit, if necessary) have neither concept list or filter - just a statement to include the whole code system</p>



<a name="153938875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938875">(Feb 20 2018 at 08:23)</a>:</h4>
<p>Possibly :)  My definitions are rather more practical than theoretical and I'll never expand Value Sets based on large code systems, e.g. SNOMED CT, without any additional filters (for the 'fun' exception see the VS expansion value set comparison tool at <a href="http://ontoserver.csiro.au/vstool/" target="_blank" title="http://ontoserver.csiro.au/vstool/">http://ontoserver.csiro.au/vstool/</a> - Health Intersections gives quite an 'upright' response.)</p>



<a name="153938899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Grimes <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938899">(Feb 20 2018 at 09:51)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <br>
I've spent a bit of time searching for where it says this in the spec (STU3), the part about it being an error if the explicit ValueSet does not contain all the codes. Would you be able to point me in the right direction?<br>
The behaviour in Ontoserver is to ignore the explicit ValueSet and favour the expansion of the implicit ValueSet within the CodeSystem.</p>



<a name="153938900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938900">(Feb 20 2018 at 09:55)</a>:</h4>
<p>it's from the definition: Canonical URL of value set that contains the entire code system.<br>
Comments:  The definition of the value set SHALL include all codes from this code system, and it SHALL be immutable.</p>



<a name="153938901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938901">(Feb 20 2018 at 09:56)</a>:</h4>
<p>not sure what explicit or implicit value sets have to do with this</p>



<a name="153938924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938924">(Feb 20 2018 at 12:24)</a>:</h4>
<p>Should we change it to say something like: "The definition of the value set SHALL include all codes from this code system and only codes from this code system, and it SHALL be immutable."?</p>



<a name="153938926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938926">(Feb 20 2018 at 12:25)</a>:</h4>
<p>sure. want to create a task for that?</p>



<a name="153938937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Implicit%20vs%20explicit%20ValueSet%20expansion/near/153938937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Implicit.20vs.20explicit.20ValueSet.20expansion.html#153938937">(Feb 20 2018 at 13:34)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=15587" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=15587">GF#15587</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
