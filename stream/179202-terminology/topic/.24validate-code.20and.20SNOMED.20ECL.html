---
layout: page
title: "FHIR Chat  · $validate-code and SNOMED ECL · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html">$validate-code and SNOMED ECL</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="180976298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/180976298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#180976298">(Nov 17 2019 at 22:50)</a>:</h4>
<p>If I have a SNOMED description identifier, how can I test that the concept it relates to is within the result of an ECL expression?</p>
<p>Do I need to get the concept id first? If so how would I do that?</p>
<p>So the following does not work as it used a description id:<br>
<a href="https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=250299011&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo" target="_blank" title="https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=250299011&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo">https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=250299011&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo</a></p>
<p>but using the concept id for that description id it does:<br>
<a href="https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=160567004&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo" target="_blank" title="https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=160567004&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo">https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=160567004&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo</a></p>



<a name="180978732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/180978732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#180978732">(Nov 18 2019 at 00:08)</a>:</h4>
<p>Yes, you need the Concept id.</p>
<p>Ontoserver will allow you to search for a descriptionId <a href="https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs" target="_blank" title="https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs">https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs</a> but note that this may return multiple matches (the search is prefix-based &amp; prefixes are not unique)<br>
But, while descriptionIds are SCTIDs (<strong>component</strong> identifiers), they are not SNOMED concepts so not members of <a href="http://snomed.info/sct?fhir_vs" target="_blank" title="http://snomed.info/sct?fhir_vs">http://snomed.info/sct?fhir_vs</a></p>



<a name="180978893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/180978893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#180978893">(Nov 18 2019 at 00:13)</a>:</h4>
<p>I want to say that the "correct" solution <span aria-label="police" class="emoji emoji-1f46e" role="img" title="police">:police:</span> is to tell the system that's giving you description ids to stop it and give you concept ids instead :sigh:</p>



<a name="180992853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/180992853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#180992853">(Nov 18 2019 at 07:09)</a>:</h4>
<p>That made me laugh. It's not just systems, I've lied about our decriptionid support because if we said we did support, it would have supported it becoming a MUST in profiles.</p>



<a name="180995715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/180995715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#180995715">(Nov 18 2019 at 08:22)</a>:</h4>
<blockquote>
<p>I want to say that the "correct" solution <span aria-label="police" class="emoji emoji-1f46e" role="img" title="police">:police:</span> is to tell the system that's giving you description ids to stop it and give you concept ids instead :sigh:</p>
</blockquote>
<p>Unfortunately, these are sourced externally and I suspect there is little chance of getting it changed.</p>



<a name="180995790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/180995790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#180995790">(Nov 18 2019 at 08:24)</a>:</h4>
<blockquote>
<p>Yes, you need the Concept id.</p>
<p>Ontoserver will allow you to search for a descriptionId <a href="https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs" target="_blank" title="https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs">https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs</a> but note that this may return multiple matches (the search is prefix-based &amp; prefixes are not unique)<br>
But, while descriptionIds are SCTIDs (<strong>component</strong> identifiers), they are not SNOMED concepts so not members of <a href="http://snomed.info/sct?fhir_vs" target="_blank" title="http://snomed.info/sct?fhir_vs">http://snomed.info/sct?fhir_vs</a></p>
</blockquote>
<p>Thanks <span class="user-mention" data-user-id="191343">@Michael Lawley</span> - it's never easy :-)</p>



<a name="181000003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/181000003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#181000003">(Nov 18 2019 at 09:41)</a>:</h4>
<p>I <em>think</em> the conformant way to handle this is to pass a <code>Coding</code> to <code>$validate-code</code> with <code>system=http://snomed.info/sct</code> and <code>code</code> blank and use the extension <a href="http://hl7.org/fhir/extension-coding-sctdescid.html" target="_blank" title="http://hl7.org/fhir/extension-coding-sctdescid.html">http://hl7.org/fhir/extension-coding-sctdescid.html</a> for the descriptionId.<br>
I don't know if <em>any</em> Tx implementations support this however.</p>



<a name="181000117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/181000117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#181000117">(Nov 18 2019 at 09:43)</a>:</h4>
<p>Another reason why <code>$validate-code</code> should return the code that was validated</p>



<a name="181095465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/181095465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#181095465">(Nov 19 2019 at 09:43)</a>:</h4>
<blockquote>
<p>That made me laugh. It's not just systems, I've lied about our decriptionid support because if we said we did support, it would have supported it becoming a MUST in profiles.</p>
</blockquote>
<p>Hmm,  the more I dig the more I see people are not always using SNOMED correctly. Pushing problems down the line does not help in the long run. The lack of clarity in the UK products also does not help but that's a different issue.</p>



<a name="181100907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/181100907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#181100907">(Nov 19 2019 at 11:02)</a>:</h4>
<p>Yes, it's also confusing. A balance? Need to push SNOMED into 80% use and not let the 20%'s block that.</p>



<a name="181152163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/181152163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#181152163">(Nov 19 2019 at 20:45)</a>:</h4>
<p>Agreed <span class="user-mention" data-user-id="191362">@Richard Kavanagh</span> kicking the can down the road, not pushing back on external data sources, is making things worse</p>



<a name="181152232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/181152232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#181152232">(Nov 19 2019 at 20:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191687">@Kevin Mayfield</span> can you say more about your descriptionId support?</p>



<a name="181152880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/181152880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#181152880">(Nov 19 2019 at 20:53)</a>:</h4>
<p>We used them during the snomed load process for our reference implementation (which was based on hapi - for coding).<br>
It was another project that was keen on decriptionid</p>



<a name="181152986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/181152986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#181152986">(Nov 19 2019 at 20:54)</a>:</h4>
<p>So not exposed through the FHIR API then?</p>



<a name="181153251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/181153251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#181153251">(Nov 19 2019 at 20:57)</a>:</h4>
<p>No, had no requirement in the profiles.</p>



<a name="182103640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/182103640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Flinton <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#182103640">(Nov 28 2019 at 12:12)</a>:</h4>
<p>"But, while descriptionIds are SCTIDs (component identifiers), they are not SNOMED concepts " ... I thought in Snomed everything was a concept ? :-) &lt;/GD&amp;RVF&gt;</p>



<a name="182212243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/182212243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#182212243">(Nov 30 2019 at 00:02)</a>:</h4>
<p>Components: <a href="https://confluence.ihtsdotools.org/display/DOCTIG/3.1.+Components" target="_blank" title="https://confluence.ihtsdotools.org/display/DOCTIG/3.1.+Components">https://confluence.ihtsdotools.org/display/DOCTIG/3.1.+Components</a></p>
<p>Concepts: <a href="https://confluence.ihtsdotools.org/display/DOCTIG/3.1.1.+Concepts" target="_blank" title="https://confluence.ihtsdotools.org/display/DOCTIG/3.1.1.+Concepts">https://confluence.ihtsdotools.org/display/DOCTIG/3.1.1.+Concepts</a></p>
<p>GD&amp;RVF is not in SNOMED</p>



<a name="182305489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/182305489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#182305489">(Dec 01 2019 at 23:40)</a>:</h4>
<blockquote>
<p>Yes, you need the Concept id.</p>
<p>Ontoserver will allow you to search for a descriptionId <a href="https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs" target="_blank" title="https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs">https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs</a> but note that this may return multiple matches (the search is prefix-based &amp; prefixes are not unique)<br>
But, while descriptionIds are SCTIDs (<strong>component</strong> identifiers), they are not SNOMED concepts so not members of <a href="http://snomed.info/sct?fhir_vs" target="_blank" title="http://snomed.info/sct?fhir_vs">http://snomed.info/sct?fhir_vs</a></p>
</blockquote>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span>  Can you give examples of scenarios where there may be multiple matches - trying to understand how I might mitigate this. - Thanks</p>



<a name="182306181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/182306181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#182306181">(Dec 02 2019 at 00:00)</a>:</h4>
<p>Here's a few:<br>
101013    101013017<br>
102018    102018012<br>
110017    110017019</p>



<a name="182306934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/182306934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#182306934">(Dec 02 2019 at 00:24)</a>:</h4>
<blockquote>
<p>Here's a few:<br>
101013    101013017<br>
102018    102018012<br>
110017    110017019<br>
```Ah I see now - looks like we are going to have solve this one away from the terminology server..</p>
</blockquote>



<a name="182322502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/182322502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Flinton <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#182322502">(Dec 02 2019 at 07:55)</a>:</h4>
<p>Yeah but given it's a self hosted graph... a description is a sort of concept... as is a relationship....  i.e. the stuff hanging from 900000000000441003  .<br>
As ever I suppose it's a matter of definition. i.e. the core metadata are themselves concepts.</p>



<a name="182396599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/182396599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#182396599">(Dec 02 2019 at 22:24)</a>:</h4>
<p>descriptionIds (and relationshipIds) are really private keys; they should never be appearing in patient data</p>



<a name="182422860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24validate-code%20and%20SNOMED%20ECL/near/182422860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Flinton <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24validate-code.20and.20SNOMED.20ECL.html#182422860">(Dec 03 2019 at 07:32)</a>:</h4>
<p>yup with you on that. for one thing how would you know which end of a relationship e.g. cat hair or asthma</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
