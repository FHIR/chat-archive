---
layout: page
title: "FHIR Chat  · Mapping of 1 OPS to several SNOMED CT within FHIR · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html">Mapping of 1 OPS to several SNOMED CT within FHIR</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="207534294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207534294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrea Riedel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207534294">(Aug 20 2020 at 15:17)</a>:</h4>
<p>Dear FHIR community,<br>
I am a newbie here and read an interesting study about „aligning an administrative procedure coding system with SNOMED CT“ (<a href="http://ceur-ws.org/Vol-2518/paper-ODLS8.pdf">http://ceur-ws.org/Vol-2518/paper-ODLS8.pdf</a>). Now I am uncertain how I can map different SNOMED CT codes, which stand for 1 OPS procedure, within one ConceptMap. Moreover, the paper differentiates between the logical connections AND, OR, and ADD.<br>
I was thinking about to use the postcoordinated expressions (<a href="https://confluence.ihtsdotools.org/display/DOCSTART/7.+SNOMED+CT+Expressions">https://confluence.ihtsdotools.org/display/DOCSTART/7.+SNOMED+CT+Expressions</a>). <br>
I am really looking forward to hear about your experiences. Maybe you can give me a solution for these two examples of the pages 9/10:</p>
<p>OPS:                                  1-430.1 Endoscopic biopsy of respiratory organs: bronchus<br>
SNOMED CT 1:              312849006312849006 Biopsy of bronchus<br>
SNOMED CT 2:              10847001 Bronchoscopy<br>
logical connection:    ADD</p>
<p>OPS:                            1-490.6 Biopsy without incision on skin and subcutaneous tissue: lower leg<br>
SNOMED CT 1:              287538006 Non-surgical skin biopsy<br>
SNOMED CT 2:              118714000 Procedure on lower leg<br>
logical connection:     AND</p>



<a name="207785360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207785360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207785360">(Aug 23 2020 at 18:29)</a>:</h4>
<p>I'm not familiar with any mechanism in ConceptMap to map to a 'combination' of concepts.  If you can't define your concept in SNOMED CT using post-coordination, then I think you'd be looking at introducing a modifier extension to ConceptMap to do what you're looking for.  <span class="user-mention" data-user-id="191405">@Rob Hausam</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="207791479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207791479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207791479">(Aug 23 2020 at 21:08)</a>:</h4>
<blockquote>
<p>map to a 'combination' of concepts</p>
</blockquote>
<p>that's what ConceptMap.group.element.target.dependsOn and ConceptMap.group.element.target.product are for. They don't work that well, but it's a tough problem</p>



<a name="207793335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207793335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207793335">(Aug 23 2020 at 22:01)</a>:</h4>
<p>Your second example is a straight forward post coordination with + I.e., 287548006+118714000<br>
The first example is more complex since it's a composite procedure -- you'd need to ensure the expression was subsumed by 55198006 | Bronchoscopy with biopsy|</p>



<a name="207793449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207793449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207793449">(Aug 23 2020 at 22:04)</a>:</h4>
<p>The Schulz, et. al. paper is actually describing a mapping from OPS to SNOMED CT using a non-standard compositional syntax that is a simpler alternative to the official SNOMED CT compositional grammar.  The definition of Coding.code states that it is "A symbol in syntax defined by the system".  The definition of ConceptMap.group.element.target.code is "Identity (code or path) or the element/item that the map refers to", which is different.  But in combination with ConceptMap.group.target I think it would be considered equivalent to Coding.system and Coding.code.  So using the Shulz, et. al syntax (e.g. something like "312849006 |Biopsy of bronchus (procedure)| ADD 10847001 |Bronchoscopy (procedure)|") would be non-standard.  But, with that said, if the syntax being used is declared and documented (as in the paper), then it seems that it would make sense for it to be allowed?  I'm not sure that we have an explicit way to do that (unless I'm forgetting), but an extension with the Expression data type likely could do it, as Expression.language specifies the specific syntax used (with the limitation that it should be included, or at least should be includable, in BCP13).</p>



<a name="207793458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207793458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207793458">(Aug 23 2020 at 22:05)</a>:</h4>
<p>The problem with product and dependsOn is that they don't involve the code system's semantics and thus you cannot clearly express your AND and ADD semantics.  OR is tricky too - you need two maps and a target more specific relationship</p>



<a name="207793518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207793518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207793518">(Aug 23 2020 at 22:07)</a>:</h4>
<p>if we wanted to support that directly, it would be a different code system that defined a grammar that included snomed ct concept its</p>



<a name="207794322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207794322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207794322">(Aug 23 2020 at 22:31)</a>:</h4>
<p>I suppose it could be a code system supplement that would do that.  We can declare in the CodeSystem resource that it is 'compositional', but it seems that we still don't have a way (extension or otherwise) to declare the particular compositional syntax.</p>



<a name="207794366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207794366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207794366">(Aug 23 2020 at 22:32)</a>:</h4>
<p>the new syntax is what makes it a new code system. That the syntax uses SNOMED codes internally is specific to the syntax</p>



<a name="207794709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207794709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207794709">(Aug 23 2020 at 22:42)</a>:</h4>
<p>Yeah, I get that.  But it seems like you would need a way to describe the syntax within the CodeSystem resource that defines it (for FHIR).  I guess you would do that in CodeSystem.description (likely including, in this case, a reference to the Schulz paper as well as some further description).</p>



<a name="207794852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207794852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207794852">(Aug 23 2020 at 22:47)</a>:</h4>
<p>yep, we've not tried to do anything other than narrative for syntax. Even if there's a formal grammar, it's not going to make sense or be usable without extensive human documentation</p>



<a name="207797247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/207797247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#207797247">(Aug 23 2020 at 23:51)</a>:</h4>
<p>Upon a bit of further reflection, it seems to me that creating the new code system as a supplement to SNOMED CT probably isn't going to work (with the current specification), as defining a new compositional expression syntax will be adding "new codes" to the code system.  It will define a new set of values that (if allowed) would be specified in CodeSystem.concept.code (or Coding.code) - which violates the rule:</p>
<blockquote>
<p>A codesystem supplement cannot define any new CodeSystem.concept.code. i.e.: all CodeSystem.concept.code in the supplement must be a code from the "supplemented" code system</p>
</blockquote>



<a name="210273219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/210273219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#210273219">(Sep 16 2020 at 14:51)</a>:</h4>
<p>Thanks for your input! Based on it, my colleague <span class="user-mention" data-user-id="331216">@Andrea Riedel</span> and our team arrived at the following solution that only uses SNOMED CT expressions and the basic ConceptMap without extensions:</p>
<ul>
<li>OR-joined Codes: easy, one element with two targets</li>
<li>AND-joined codes: Use SCT postcoordination syntax to build one single "FHIR-code" as target</li>
<li>ADD-joined codes: use target.product with some "property" value specific to ADD</li>
<li>more complex expressions: transform into "Disjunctive normal form" like expression ((OR-less individual expressions seperated by OR). Use multiple element.targets and transform individual expressions as described above.<br>
-Additional Material mapping: Use target.product with property specific to "material" (on all target elements of the mapping). In cases of only material mapping, leave target.code empty and use "relatedTo" Equivalence.</li>
</ul>
<p>However, I do not yet quite understand what values to use for product.property, since the grammar is not in any formal CodeSystem / ADD and "Material" concepts are not in some formal information model. Can we just invent some Magic URI? E.g. with NamingSystems, there is a Resource with additional Information at the URL target. Is there any FHIR-way to provide people that might stumble upon this property with an explanation?</p>



<a name="210293196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/210293196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#210293196">(Sep 16 2020 at 17:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span></p>



<a name="210484550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/210484550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#210484550">(Sep 18 2020 at 06:58)</a>:</h4>
<p>I _think_ the promoted approach to deal with composite (ADD) things in SNOMED is via the Situation hierarchy.<br>
However, it's not a part of the semantics / editorial guidance I'm familiar with, and I generally shun use of that hierarchy anyway since it is tainted with a semantically broken approach to negation.<br>
The place to start would be here <a href="https://confluence.ihtsdotools.org/display/DOCEG/Situation+with+Explicit+Context">https://confluence.ihtsdotools.org/display/DOCEG/Situation+with+Explicit+Context</a></p>



<a name="210485749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Mapping%20of%201%20OPS%20to%20several%20SNOMED%20CT%20within%20FHIR/near/210485749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Mapping.20of.201.20OPS.20to.20several.20SNOMED.20CT.20within.20FHIR.html#210485749">(Sep 18 2020 at 07:17)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191343">@Michael Lawley</span> , we will look into this. (For material, we're planning to use the material (attribute) SNOMED concept now, unfortunately, ADD is much less straightforward.)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
