---
layout: page
title: "FHIR Chat  · $expand context and contextDirection · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html">$expand context and contextDirection</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153999736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/153999736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Marquard <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#153999736">(Sep 25 2018 at 13:01)</a>:</h4>
<p>Howdy, Has anyone implemented $expand with support for context and contextDirection? I have been playing with a few open servers and am not sure my request is properly formatted, or servers aren't supporting these parameters! Here is what I have tried:<br>
-[base]/ValueSet/$expand?context=http://hl7.org/fhir/StructureDefinition/DiagnosticReport#DiagnosticReport.category<br>
-[base]/ValueSet/$expand?context=DiagnosticReport.category</p>
<p>...once I got context working, then I figured i would move onto contextDirection. <a href="http://build.fhir.org/valueset-operation-expand.html" target="_blank" title="http://build.fhir.org/valueset-operation-expand.html">$expand definition</a></p>



<a name="153999752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/153999752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#153999752">(Sep 25 2018 at 14:45)</a>:</h4>
<p>I'm guessing that this isn't well supported (if at all).  I haven't actually tried to test it myself.  It probably would make sense to add some tests for this to the Terminology Services Connectathon track test suite (and there are other parameters that could use additional tests, too).  I can look further at what we might be able to do between now and Saturday.</p>



<a name="153999872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/153999872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#153999872">(Sep 26 2018 at 04:56)</a>:</h4>
<p>I believe that this is implemented on <a href="http://tx.fhir.org" target="_blank" title="http://tx.fhir.org">tx.fhir.org</a> but that will probably be the only place</p>



<a name="153999877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/153999877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#153999877">(Sep 26 2018 at 05:54)</a>:</h4>
<p>What's the relationship, if any, between these context parameters and the ValueSet.useContext element?</p>



<a name="153999880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/153999880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#153999880">(Sep 26 2018 at 06:46)</a>:</h4>
<p>non</p>



<a name="153999881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/153999881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#153999881">(Sep 26 2018 at 06:46)</a>:</h4>
<p>none</p>



<a name="154000243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/154000243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Marquard <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#154000243">(Sep 27 2018 at 12:30)</a>:</h4>
<p>Grahame and I exchanged several chats on the side and like the wizard he is implemented these on his server:<br>
- <a href="http://test.fhir.org/r3/ValueSet/$expand?context=DiagnosticReport.category" target="_blank" title="http://test.fhir.org/r3/ValueSet/$expand?context=DiagnosticReport.category">http://test.fhir.org/r3/ValueSet/$expand?context=DiagnosticReport.category</a><br>
- <a href="http://test.fhir.org/r3/ValueSet/$expand?context=http://hl7.org/fhir/StructureDefinition/DiagnosticReport%23DiagnosticReport.category" target="_blank" title="http://test.fhir.org/r3/ValueSet/$expand?context=http://hl7.org/fhir/StructureDefinition/DiagnosticReport%23DiagnosticReport.category">http://test.fhir.org/r3/ValueSet/$expand?context=http://hl7.org/fhir/StructureDefinition/DiagnosticReport%23DiagnosticReport.category</a></p>



<a name="154000250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/154000250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#154000250">(Sep 27 2018 at 13:05)</a>:</h4>
<p>I'm nervous about the first variant. It's definitely simpler, but I suspect that it falls on the side of too simple</p>



<a name="154000922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/154000922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#154000922">(Sep 28 2018 at 04:41)</a>:</h4>
<p>Is the idea that with the 2nd syntax, you could also request profile-specific element expansions?</p>



<a name="154000924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/154000924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#154000924">(Sep 28 2018 at 04:43)</a>:</h4>
<p>well, using context instead of specifying a value set directly allows you to ask the system to sort out which value set applies in this context. So the delicate part is specifying the context correctly. just 'DiagnosticReport.category' is ambiguous if there's more than one possible answer</p>



<a name="154000925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/154000925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#154000925">(Sep 28 2018 at 04:43)</a>:</h4>
<p>and asserting that there's only one possible answer is something that could subsequently become false.</p>



<a name="154000935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/154000935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#154000935">(Sep 28 2018 at 04:55)</a>:</h4>
<p>I think I'm missing something pretty straightforward here -- I'm assuming the 2nd syntax is important because the 1st is... ambiguous in some way? So for <code>context=DiagnosticReport.category</code>, there might be multiple possible interpretations, like <code>context=http://hl7.org/fhir/StructureDefinition/DiagnosticReport%23DiagnosticReport.category</code> and... some other thing? What kind of other thing?</p>



<a name="154000936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/154000936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#154000936">(Sep 28 2018 at 05:11)</a>:</h4>
<p><a href="http://acme.org/fhir/StructureDefinition/dr1#DiagnosticReport.category" target="_blank" title="http://acme.org/fhir/StructureDefinition/dr1#DiagnosticReport.category">http://acme.org/fhir/StructureDefinition/dr1#DiagnosticReport.category</a> and <br>
<a href="http://acme.org/fhir/StructureDefinition/dr2#DiagnosticReport.category" target="_blank" title="http://acme.org/fhir/StructureDefinition/dr2#DiagnosticReport.category">http://acme.org/fhir/StructureDefinition/dr2#DiagnosticReport.category</a></p>



<a name="154000937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/154000937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#154000937">(Sep 28 2018 at 05:11)</a>:</h4>
<p>if the system is using diagnostic report diferently in different contexts</p>



<a name="154000938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/154000938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#154000938">(Sep 28 2018 at 05:12)</a>:</h4>
<p>e.g. one for lab which lists about 6 different categories for the different labs services, and one for vitals that lists only vitals</p>



<a name="154008667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/154008667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#154008667">(Oct 12 2018 at 23:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191410">@Brett Marquard</span>  Ontoserver now supports the <code>context</code> parameter for <code>$expand</code> and <code>$validate-code</code> (StructureDefinition, CodeSystem &amp; ValueSet must all be explicitly available in Ontoserver).<br>
No support for <code>contextDirection</code> though - R4 is still a work-in-progress</p>



<a name="277105922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/277105922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> coder <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#277105922">(Mar 30 2022 at 07:51)</a>:</h4>
<p>Newbie here and also to FHIR.. while I theoretically understood the reasoning behind <code>contextDirection</code> for <code>$expand</code> operation, I still haven't figured out the place where this could be captured/defined in <code>ValueSet</code> or  <code>CodeSystem</code>.. or somewhere else. Could someone help me understand.. </p>
<ul>
<li>how to include the <code>contextDirection</code> info in the code/value/elsewhere definition so that this can be implement as a search parameter?</li>
<li>how come the direction is not important if there's no context and there's no separate direction search attribute?</li>
<li>does it mean that <code>direction</code> is not captured in valueset/codesystem, but in context.. and if yes, how to map this to the valueset list items?</li>
</ul>



<a name="277113596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/277113596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#277113596">(Mar 30 2022 at 09:00)</a>:</h4>
<p>it's done in the bindings - StructureDefinition and CapabilityStatement</p>



<a name="277138692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20context%20and%20contextDirection/near/277138692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> coder <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection.html#277138692">(Mar 30 2022 at 12:50)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  I kind of got a rough idea.<br>
Is there such an example binding I could look at?</p>
<p>Because when I look here <a href="https://build.fhir.org/valueset.html">https://build.fhir.org/valueset.html</a> i only see <code>ValueSet.useContext</code> element... and nothing like <code>direction</code>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
