---
layout: page
title: "FHIR Chat  · Custom properties for a CodeSystem · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html">Custom properties for a CodeSystem</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154018217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018217">(Nov 13 2018 at 21:46)</a>:</h4>
<p>If wanted to add additional properties to a known code system (for example <a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>), because the additional properties are useful for my application, would I just create my own local CodeSystem resource, basing it on the standard one, and reference that custom one in my ValueSet definitions?  In the expansion, I would still want the canonical URL (<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>) in the contains.system.</p>



<a name="154018283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018283">(Nov 14 2018 at 02:42)</a>:</h4>
<p>you're describing a supplement- read what the <a href="http://build.fhir.org/codesystem.html" target="_blank" title="http://build.fhir.org/codesystem.html">build.fhir.org/codesystem.html</a> has to say abotu that</p>



<a name="154018877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018877">(Nov 15 2018 at 16:07)</a>:</h4>
<p>Is a supplement CodeSystem obligated to support all of the properties and filters of the original CodeSystem?</p>



<a name="154018878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018878">(Nov 15 2018 at 16:14)</a>:</h4>
<p>There'd be no point to supporting any of them - they're already defined for all the codes by the base code system.  The wole point of the supplement is to define new properties and filters for the existing codes.  (Remember, supplements can't define any new codes or concepts.)</p>



<a name="154018881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018881">(Nov 15 2018 at 16:19)</a>:</h4>
<p>But, if none are supported, then someone doing a $lookup on a code to get additional properties would need to do two lookups (probably at different servers), first to get the standard properties, and then to get the supplemental ones.</p>



<a name="154018951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018951">(Nov 15 2018 at 20:54)</a>:</h4>
<p>Yup</p>



<a name="154018952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018952">(Nov 15 2018 at 20:56)</a>:</h4>
<p>They're separate objects.  If you query the supplement, you'll only see the codes that are supplemented and only see the supplementary properties and designations.  You have to have a copy of the original code system to know what's in the original code system.  In some cases, the supplement won't even have permission from the original system to publish its information.</p>



<a name="154018953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018953">(Nov 15 2018 at 21:20)</a>:</h4>
<p>For our <a href="https://clinicaltables.nlm.nih.gov" target="_blank" title="https://clinicaltables.nlm.nih.gov">Clinical Table Search Service</a> we have a number of standard code systems to which we have (in some cases) added additional fields.  This is an autocompletion service; we do not make users first hit us for the extra fields and then go away somewhere else to get the standard fields.  We have the standard fields indexed together with our extra ones.  What I'm trying to understand with these questions is what type of ValueSet and CodeSystem resources we'll need to serve in order to make this usable via FHIR.</p>
<p>I was assuming the supplement type of CodeSystem would not only allow us to provide additional fields, but also the standard ones.  Is that not the case?</p>



<a name="154018954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018954">(Nov 15 2018 at 21:24)</a>:</h4>
<p>A CodeSystem supplement <em>should</em> only expose the additions.  There's no way in the resource to distinguish what's yours vs. what comes from the original code system, so if you declare everything, it looks like the supplement is defining all of those things.  In practice, only terminology services would ever need to query code system supplements - and they'll always query both the supplement and the code system.  Clinical systems will generally not care about code systems or supplements.  They'll just care about the value set expansions provided by the terminology service - which will include information from both the code system and the supplement(s).</p>



<a name="154018955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018955">(Nov 15 2018 at 21:26)</a>:</h4>
<p>If a clinical system cares about the extra properties defined in a code system, doesn't it need to do a lookup on the CodeSystem currently?</p>



<a name="154018966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018966">(Nov 15 2018 at 21:41)</a>:</h4>
<p>We should probably make the $lookup operation code system supplement aware...</p>



<a name="154018975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018975">(Nov 15 2018 at 21:59)</a>:</h4>
<p>I think what you're suggesting is that $lookup on a supplement could include properties from the original code system, and not just the supplement.  Correct?</p>



<a name="154018976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154018976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154018976">(Nov 15 2018 at 22:08)</a>:</h4>
<p>More that when you invoke lookup on a code, you can include a valueset or list of supplements so the terminology server knows what code system supplements to incorporate when determining the properties</p>



<a name="154019000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019000">(Nov 15 2018 at 22:41)</a>:</h4>
<p>What would the ValueSet be for, and what would be in it?</p>



<a name="154019012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019012">(Nov 15 2018 at 22:59)</a>:</h4>
<p>The ValueSet would be the ValueSet associated with the element that the code was found in - and it would indicate the supplements that were relevant for doing an expansion.</p>



<a name="154019017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019017">(Nov 15 2018 at 23:17)</a>:</h4>
<p>Since $expand operates on a value set I'm not sure if anything further is needed there, but we may want to be able to control whether information from code supplements in included in the output for both $lookup and $expand.</p>



<a name="154019041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019041">(Nov 16 2018 at 06:56)</a>:</h4>
<blockquote>
<p>$lookup on a code to get additional properties would need to do two lookups (probably at different servers), first to get the standard properties, and then to get the supplemental ones.</p>
</blockquote>
<p>I don't agree that this is true</p>



<a name="154019131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019131">(Nov 16 2018 at 12:18)</a>:</h4>
<p>Neither do I.</p>



<a name="154019165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xiaocheng Luan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019165">(Nov 16 2018 at 14:25)</a>:</h4>
<p>Hi everyone, I work in Paul's team, new to FHIR. Guess my main confusion is what exactly a supplement is. I could imagine two extreme views:<br>
(1) A supplement is a "patch" to the code system it references, it's not a code system by itself (and thus can't be used in a Coding). A supplement-aware terminology server considers it to be part of the code system it "supplements".<br>
(2) A supplement is a code system of its own right, it "inherits" the definitions from the code system it references and adds extra, much like a subclass in  the context of object oriented modeling. It thus has its own code system URL (e.g., loinc.org-ext1) and can be used in "Coding".</p>
<p>For the "patch" view in (1), there could be issues of local vs. global/standard, and consistency issues across terminology servers on specific code systems (with/without different supplements defined).<br>
For the "subclass" view,  it may obligate terminology servers hosting such "supplement/subclass" code systems to be fully aware of/support the filters, properties, etc., defined in the original (parent) code system?<br>
This "subclass" view was what I thought it should roughly be but it does not appear to be the case based on the conversations in this thread?</p>



<a name="154019174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019174">(Nov 16 2018 at 15:27)</a>:</h4>
<p>A code system supplement is absolutely constrained to be #1.  It <em>cannot</em> define new codes, nor can it define new meanings for codes.  However, it can define new properties, new display values and/or new relationships for codes defined in another code system.</p>



<a name="154019175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019175">(Nov 16 2018 at 15:28)</a>:</h4>
<p>If you have something that defines new codes, it's a code system.</p>



<a name="154019176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019176">(Nov 16 2018 at 15:28)</a>:</h4>
<p>(not a supplement)</p>



<a name="154019231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xiaocheng Luan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019231">(Nov 16 2018 at 18:45)</a>:</h4>
<p>Thanks for the clarification, Lloyd.</p>



<a name="154019242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019242">(Nov 16 2018 at 19:11)</a>:</h4>
<p>Just to clarify-- no one is takling about adding codes.  The "extra' Xiaocheng mentioned was a reference to extra properties.</p>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> So, if I understand you correctly, for the form field autocompletion scenario, with each keystroke, the clinical system would first send an $expand request on the ValueSet, and then for each returned code (but together as a batch) there would be a $lookup request, with every lookup request also sending the VallueSet and a list of code supplements?  That seems a lot to ask to be sent for each keystroke in a field.</p>



<a name="154019253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019253">(Nov 16 2018 at 19:41)</a>:</h4>
<p>If you need the properties to be displayed instead of just the display names and you need properties provided by supplements, there isn't much choice unless we revise $expand to be able to include properties</p>



<a name="154019315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019315">(Nov 16 2018 at 23:19)</a>:</h4>
<p>although you might not want to do it as a batch because that require POST and POST cannot be cached (at the HTTP layer)</p>



<a name="154019319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019319">(Nov 17 2018 at 02:28)</a>:</h4>
<p>I’ve given this a lot of thought and tried various complicated ways to pipe expand and lookup together. The simplest way to solve this is to add the property parameters from $lookup to $expand, and then say that properties you ask for come back as extensions (for now)</p>



<a name="154019369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Custom%20properties%20for%20a%20CodeSystem/near/154019369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Custom.20properties.20for.20a.20CodeSystem.html#154019369">(Nov 17 2018 at 12:31)</a>:</h4>
<p>Agree.  This makes sense.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
