---
layout: page
title: "FHIR Chat  · $expand in ValueSet with multiple includes · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html">$expand in ValueSet with multiple includes</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153973421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973421">(Jul 04 2018 at 19:27)</a>:</h4>
<p>What should the server behaviour be when expanding a ValueSet that has multiple imports, but the server doesn't have access to all the code systems? The issue arose with the Argonaut procedure code ValueSet (<a href="http://hl7.org/fhir/us/core/ValueSet/us-core-procedure-code" target="_blank" title="http://hl7.org/fhir/us/core/ValueSet/us-core-procedure-code">http://hl7.org/fhir/us/core/ValueSet/us-core-procedure-code</a>) which has both SNOMED &amp; CPT codes. If the Terminology sever cannot expand CPT, but can expand SNOMED, then currently the whole expansion fails . (with Ontoserver at least)</p>



<a name="153973426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973426">(Jul 04 2018 at 19:44)</a>:</h4>
<p>I think that behavior is correct.</p>



<a name="153973427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973427">(Jul 04 2018 at 19:50)</a>:</h4>
<p>Yes, that would be right.  From $expand documentation (4.8.1.1):</p>
<blockquote>
<p>When a server cannot correctly expand a value set because it does not fully understand the code systems (e.g. it has the wrong version, or incomplete definitions) then it SHALL return an error. If the value set itself is unbounded due to the inclusion of post-coordinated value sets (e.g. SNOMED CT, UCUM), then the extension <a href="http://hl7.org/fhir/StructureDefinition/valueset-unclosed" target="_blank" title="http://hl7.org/fhir/StructureDefinition/valueset-unclosed">http://hl7.org/fhir/StructureDefinition/valueset-unclosed</a> can be used to indicate that the expansion is incomplete</p>
</blockquote>



<a name="153973434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973434">(Jul 04 2018 at 20:00)</a>:</h4>
<p>it's on my task list to add CPT support. I've resolved the licensing issues (thanks AMA) but haven't done the work yet</p>



<a name="153973437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973437">(Jul 04 2018 at 20:02)</a>:</h4>
<p>I had wondered whether the client supplying <code>limitedExpansion=true</code> would allow the server to omit code systems it couldn't process, but 4.8.1.1 seems pretty clear that it can't</p>



<a name="153973440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973440">(Jul 04 2018 at 20:04)</a>:</h4>
<p>and limitedExpansion will be removed.</p>



<a name="153973442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973442">(Jul 04 2018 at 20:05)</a>:</h4>
<blockquote>
<p>limitedExpansion will be removed</p>
</blockquote>



<a name="153973443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973443">(Jul 04 2018 at 20:05)</a>:</h4>
<p>uh, why?</p>



<a name="153973445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973445">(Jul 04 2018 at 20:06)</a>:</h4>
<p><a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16449&amp;start=0" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16449&amp;start=0">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16449&amp;start=0</a></p>



<a name="153973446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973446">(Jul 04 2018 at 20:09)</a>:</h4>
<p>ah yes thx</p>



<a name="153973461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973461">(Jul 04 2018 at 21:13)</a>:</h4>
<p>So does that mean that other server (like Ontoserver) will be able to expand CPT?</p>



<a name="153973462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973462">(Jul 04 2018 at 21:18)</a>:</h4>
<p>I believe that depends on whether the license terms are amenable generally and <span class="user-mention" data-user-id="191343">@Michael Lawley</span>  chooses to implement it?</p>



<a name="153973463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/%24expand%20in%20ValueSet%20with%20multiple%20includes/near/153973463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/.24expand.20in.20ValueSet.20with.20multiple.20includes.html#153973463">(Jul 04 2018 at 21:19)</a>:</h4>
<p>well, the license terms partly depend on what you're going do with it</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
