---
layout: page
title: "FHIR Chat  · Must CodeSystem.uri and ValueSet.uri be disjoint? · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html">Must CodeSystem.uri and ValueSet.uri be disjoint?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153966016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966016">(May 31 2018 at 04:10)</a>:</h4>
<p>Is it a requirement that a <code>ValueSet.uri</code> must be different from every <code>CodeSystem.uri</code>?</p>



<a name="153966032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966032">(May 31 2018 at 07:52)</a>:</h4>
<p>yes</p>



<a name="153966212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966212">(May 31 2018 at 23:52)</a>:</h4>
<p>Is that documented anywhere?</p>



<a name="153966214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966214">(May 31 2018 at 23:56)</a>:</h4>
<p>no. I don't think so. how can be the same?</p>



<a name="153966215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966215">(May 31 2018 at 23:57)</a>:</h4>
<p>if you put the same string in one ValueSet's url field, and in one CodeSystem's url field?</p>



<a name="153966220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966220">(Jun 01 2018 at 00:32)</a>:</h4>
<p>well, then, they won't be unique will tehy?</p>



<a name="153966221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966221">(Jun 01 2018 at 00:33)</a>:</h4>
<p>No. But the question is, does that matter?</p>



<a name="153966222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966222">(Jun 01 2018 at 00:34)</a>:</h4>
<p>yes</p>



<a name="153966223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966223">(Jun 01 2018 at 00:35)</a>:</h4>
<p>The url... "SHOULD be globally unique"</p>



<a name="153966226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966226">(Jun 01 2018 at 00:41)</a>:</h4>
<p>SHOULD != MUST -- we're seeing some validation rules that enforce MUST</p>



<a name="153966238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966238">(Jun 01 2018 at 00:53)</a>:</h4>
<p>well, we wanted to make that a SHALL but there's all sorts of weird edge cases that mean it can't be. but it would absolutely be WRONG for 2 resources to have the same canonical URL in scope</p>



<a name="153966242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966242">(Jun 01 2018 at 00:57)</a>:</h4>
<p>maybe I'm missing something - if it "would absolutely be WRONG" then why can't we make it SHALL?</p>



<a name="153966243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966243">(Jun 01 2018 at 01:02)</a>:</h4>
<p>well, from memory...  how do you construct a really unique identifier... what if domain names are reassigned? who do you know if someone else has created an resource that they shouldn't have? What would we say about versions an uniqueness?</p>



<a name="153966244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966244">(Jun 01 2018 at 01:03)</a>:</h4>
<p>For one thing it would prevent having more than one version or edition of snomed in the system</p>



<a name="153966245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966245">(Jun 01 2018 at 01:03)</a>:</h4>
<p>or any other code system</p>



<a name="153966246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966246">(Jun 01 2018 at 01:04)</a>:</h4>
<p>no it wouldn't. but the detailed rules around that would have be elucidated completely if we made it a SHALL</p>



<a name="153966247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966247">(Jun 01 2018 at 01:05)</a>:</h4>
<p>Its still not clear to me why it matters</p>



<a name="153966249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966249">(Jun 01 2018 at 01:06)</a>:</h4>
<p>why what matters?</p>



<a name="153966250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966250">(Jun 01 2018 at 01:06)</a>:</h4>
<p>Why having ValueSet and CodeSystem resources with the same uri is a problem</p>



<a name="153966252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966252">(Jun 01 2018 at 01:07)</a>:</h4>
<p>well, because they can't resolve correctly. But more, it's expected that you can have a  single dictionary of metadata resources by their url</p>



<a name="153966253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966253">(Jun 01 2018 at 01:08)</a>:</h4>
<p>and some of my tools do tht</p>



<a name="153966254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966254">(Jun 01 2018 at 01:09)</a>:</h4>
<p>They're URIs, not URLs. Its not necessary that the resolve, let alone resolve correctly</p>



<a name="153966260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966260">(Jun 01 2018 at 01:22)</a>:</h4>
<p>If we're talking about _resolve_ in the URL sense, then presumably you should end up at some kind of disambiguation page. But within a server you should always have context about the resource-type for the "URI" you are resolving - at least, we always do within Ontoserver.</p>



<a name="153966264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966264">(Jun 01 2018 at 01:28)</a>:</h4>
<p>that assumes that the source location differentiates explicitly between the two kinds of resources. That's not true in the wider context of FHIR, where we sometimes refer to 'conformance resources' as a group - publishing contexts, for instance</p>



<a name="153966265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966265">(Jun 01 2018 at 01:33)</a>:</h4>
<p>but ultimately, the answer to my question is SHOULD, not SHALL, regardless of what technical difficulties this might impose</p>



<a name="153966266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966266">(Jun 01 2018 at 01:39)</a>:</h4>
<p>I guess so.</p>



<a name="153966267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966267">(Jun 01 2018 at 01:40)</a>:</h4>
<p>but it's very much a case of nearly nearly SHALL. I tried to thnk of various alternative phrasing... URLs SHALL not be used for more than one type of resource.</p>



<a name="153966268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966268">(Jun 01 2018 at 01:40)</a>:</h4>
<p>but all come back to have the same problems.</p>



<a name="153966269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966269">(Jun 01 2018 at 01:41)</a>:</h4>
<p>but we should make constraints: <br>
CodeSystem.url != CodeSystem.valueSet<br>
ValueSet.url != ValueSet.compose.include.system</p>



<a name="153966270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966270">(Jun 01 2018 at 01:43)</a>:</h4>
<p>How about adding language that says "Tooling is likely to rely upon uniqueness of URLs."</p>



<a name="153966271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966271">(Jun 01 2018 at 01:44)</a>:</h4>
<p>That at least explains to people that there are ramifications to not adhering to the SHOULD - and that they have no right to complain if they don't adhere to the guidance and their stuff doesn't work.</p>



<a name="153966273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966273">(Jun 01 2018 at 01:45)</a>:</h4>
<p>well, it's slightly stronger than that - we can say that in some contexts, resources are referred to solely by their URL, and different resources that have the same URL are indistinguishable</p>



<a name="153966274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966274">(Jun 01 2018 at 01:46)</a>:</h4>
<p>and the intent is that they are all different; the only reason that the rule is not SHALL is because of practical difficulties in edge cases</p>



<a name="153966275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966275">(Jun 01 2018 at 01:47)</a>:</h4>
<p>Well, the source of my question is that a <code>Library</code> we (want to) rely on (the<code>org.hl7.fhir.r4.validation.InstanceValidator</code>) enforces this rule - SHALL semantics</p>



<a name="153966276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966276">(Jun 01 2018 at 01:48)</a>:</h4>
<p>where? let me check, but that's certainly by design. There's no place where you can detect non-uniqueness that it's ok</p>



<a name="153966278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966278">(Jun 01 2018 at 01:48)</a>:</h4>
<p>It's in <code>checkCoding()</code></p>



<a name="153966280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966280">(Jun 01 2018 at 01:49)</a>:</h4>
<p>this:       rule(errors, IssueType.CODEINVALID, element.line(), element.col(), path, !isValueSet(system), "The Coding references a value set, not a code system (\""+system+"\")");</p>



<a name="153966281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966281">(Jun 01 2018 at 01:49)</a>:</h4>
<p>?</p>



<a name="153966282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966282">(Jun 01 2018 at 01:49)</a>:</h4>
<p>Yep</p>



<a name="153966283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966283">(Jun 01 2018 at 01:49)</a>:</h4>
<p>well, i stand by that rule, and we need to say whatever we can say in the standard to make that OK</p>



<a name="153966284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966284">(Jun 01 2018 at 01:49)</a>:</h4>
<p>code is</p>
<div class="codehilite"><pre><span></span>        <span class="n">rule</span><span class="o">(</span><span class="n">errors</span><span class="o">,</span> <span class="n">IssueType</span><span class="o">.</span><span class="na">CODEINVALID</span><span class="o">,</span> <span class="n">element</span><span class="o">.</span><span class="na">line</span><span class="o">(),</span> <span class="n">element</span><span class="o">.</span><span class="na">col</span><span class="o">(),</span> <span class="n">path</span><span class="o">,</span> <span class="o">!</span><span class="n">isValueSet</span><span class="o">(</span><span class="n">system</span><span class="o">),</span> <span class="s">&quot;The Coding references a value set, not a code system (\&quot;&quot;</span><span class="o">+</span><span class="n">system</span><span class="o">+</span><span class="s">&quot;\&quot;)&quot;</span><span class="o">);</span>
</pre></div>


<p>I want to have:</p>
<div class="codehilite"><pre><span></span>      <span class="k">if</span> <span class="o">(!</span><span class="n">isCodeSystem</span><span class="o">(</span><span class="n">system</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">rule</span><span class="o">(</span><span class="n">errors</span><span class="o">,</span> <span class="n">IssueType</span><span class="o">.</span><span class="na">CODEINVALID</span><span class="o">,</span> <span class="n">element</span><span class="o">.</span><span class="na">line</span><span class="o">(),</span> <span class="n">element</span><span class="o">.</span><span class="na">col</span><span class="o">(),</span> <span class="n">path</span><span class="o">,</span> <span class="o">!</span><span class="n">isValueSet</span><span class="o">(</span><span class="n">system</span><span class="o">),</span> <span class="s">&quot;The Coding references a value set, not a code system (\&quot;&quot;</span><span class="o">+</span><span class="n">system</span><span class="o">+</span><span class="s">&quot;\&quot;)&quot;</span><span class="o">);</span>
      <span class="o">}</span>
</pre></div>



<a name="153966285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966285">(Jun 01 2018 at 01:49)</a>:</h4>
<p>It doesn't check for the non-existence of a CodeSystem with that URL</p>



<a name="153966286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966286">(Jun 01 2018 at 01:50)</a>:</h4>
<p>I don't follow</p>



<a name="153966287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966287">(Jun 01 2018 at 01:51)</a>:</h4>
<p>or</p>
<div class="codehilite"><pre><span></span>      <span class="n">rule</span><span class="o">(</span><span class="n">errors</span><span class="o">,</span> <span class="n">IssueType</span><span class="o">.</span><span class="na">CODEINVALID</span><span class="o">,</span> <span class="n">element</span><span class="o">.</span><span class="na">line</span><span class="o">(),</span> <span class="n">element</span><span class="o">.</span><span class="na">col</span><span class="o">(),</span> <span class="n">path</span><span class="o">,</span> <span class="n">isCodeSystem</span><span class="o">(</span><span class="n">system</span><span class="o">)</span> <span class="o">||</span> <span class="o">!</span><span class="n">isValueSet</span><span class="o">(</span><span class="n">system</span><span class="o">),</span> <span class="s">&quot;The Coding references a value set, rather than a code system (\&quot;&quot;</span><span class="o">+</span><span class="n">system</span><span class="o">+</span><span class="s">&quot;\&quot;)&quot;</span><span class="o">);</span>
</pre></div>



<a name="153966288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966288">(Jun 01 2018 at 01:51)</a>:</h4>
<p>I still don't follow.</p>



<a name="153966290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966290">(Jun 01 2018 at 01:52)</a>:</h4>
<p>If the <code>system</code> is a valid CodeSystem URI, then you don't care that it might also be a valid ValueSet URI</p>



<a name="153966291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966291">(Jun 01 2018 at 01:52)</a>:</h4>
<p>I guess what you are saying is that you want to reuse ids and that it should be ok because the specification only says that you SHOULD not</p>



<a name="153966292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966292">(Jun 01 2018 at 01:52)</a>:</h4>
<p>not Ids, URIs</p>



<a name="153966293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966293">(Jun 01 2018 at 01:52)</a>:</h4>
<p>y uris. sorry</p>



<a name="153966294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966294">(Jun 01 2018 at 01:52)</a>:</h4>
<p>I do care.</p>



<a name="153966295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966295">(Jun 01 2018 at 01:53)</a>:</h4>
<p>The current code disables validation in this case, even though the presence of multiple resources needn't actually directly prevent it</p>



<a name="153966296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966296">(Jun 01 2018 at 01:53)</a>:</h4>
<p>Seems overly dogmatic</p>



<a name="153966297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966297">(Jun 01 2018 at 01:54)</a>:</h4>
<p>and we don't <em>want</em> to, we just stumbled across this and it seemed "what <span class="user-mention" data-user-id="191376">@Jim Steel</span> said" :-)</p>



<a name="153966298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966298">(Jun 01 2018 at 01:54)</a>:</h4>
<p>I think it's good as it is. I agree it's a side issue, but one of the biggest problems we have is people confusing value sets and code systems and so I don't want to back it off</p>



<a name="153966300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966300">(Jun 01 2018 at 02:06)</a>:</h4>
<p>is it a practical problem or a theoretical concern?</p>



<a name="153966307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966307">(Jun 01 2018 at 02:15)</a>:</h4>
<p>We're debugging now to determine that</p>



<a name="153966314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reuben Daniels <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966314">(Jun 01 2018 at 02:22)</a>:</h4>
<p>I agree with Grahame's comment about people confusing value sets and code systems. So I agree using the same value in both should be discouraged.</p>



<a name="153966316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966316">(Jun 01 2018 at 02:41)</a>:</h4>
<p>It shouldn't just be discouraged - it's reasonable to treat it as an outright error.</p>



<a name="153966345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966345">(Jun 01 2018 at 05:22)</a>:</h4>
<p>I think I'm ready to say this is a concern of pedantry, not a blocker.<br>
However, there's another <em>real</em> bug in code nearby:</p>
<div class="codehilite"><pre><span></span>              <span class="k">if</span> <span class="o">(</span><span class="n">binding</span><span class="o">.</span><span class="na">hasValueSet</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">binding</span><span class="o">.</span><span class="na">getValueSet</span><span class="o">()</span> <span class="k">instanceof</span> <span class="n">Reference</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">ValueSet</span> <span class="n">valueset</span> <span class="o">=</span> <span class="n">resolveBindingReference</span><span class="o">(</span><span class="n">profile</span><span class="o">,</span> <span class="n">binding</span><span class="o">.</span><span class="na">getValueSet</span><span class="o">(),</span> <span class="n">profile</span><span class="o">.</span><span class="na">getUrl</span><span class="o">());</span>
</pre></div>


<p><code>resolveBindingReference</code> can handle either a <code>Reference</code> or a <code>UriType</code>, but the code here never gives it a chance, so bindings to implicit (UriType) valuesets are ignored</p>



<a name="153966347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966347">(Jun 01 2018 at 05:34)</a>:</h4>
<p>so...</p>



<a name="153966348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966348">(Jun 01 2018 at 05:34)</a>:</h4>
<p>there's a reason for that.</p>



<a name="153966349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966349">(Jun 01 2018 at 05:35)</a>:</h4>
<p>value sets bound to a url are outside the scope of the validator.</p>



<a name="153966351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966351">(Jun 01 2018 at 05:53)</a>:</h4>
<p>Why is it up to  the <code>IValidationSupport</code> concrete implementation to determine that?</p>



<a name="153966352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966352">(Jun 01 2018 at 05:59)</a>:</h4>
<p>umm?</p>



<a name="153966353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966353">(Jun 01 2018 at 05:59)</a>:</h4>
<p>where is this code?</p>



<a name="153966355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966355">(Jun 01 2018 at 06:05)</a>:</h4>
<p>Sorry, that should have read why is it <strong>not</strong></p>



<a name="153966357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966357">(Jun 01 2018 at 06:20)</a>:</h4>
<p>because that definition comes from the spec, so why would it be up to an implementation?</p>



<a name="153966474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966474">(Jun 01 2018 at 15:56)</a>:</h4>
<p>I'm really confused as why this discussion is focused on the technical requirements. The defining identifier for a value set can not be the same as a code system. And visa-versa. They are different things. I've not seen in this any example of something that <strong><em>MUST</em></strong> break that rule to work. So it's a SHALL.</p>



<a name="153966490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966490">(Jun 01 2018 at 19:25)</a>:</h4>
<p>So, (playing devil's advocate here) exactly what is going to happen if someone goes ahead and blatantly disregards the SHALL (assuming we would decide to make it that) and for some reason gives a code system and a value set the exact <strong>same</strong> url?  When you use the url in an element binding in a resource or profile you will be referring to the value set.  When you use the url in Coding.system you will be referring to the code system.  And in ValueSet.compose, when it's used in include.system it will refer to the code system and in include.valueSet it will refer to the value set (and the same for exclude).  In ConceptMap source and target it might not be clear which one you are referring to, but it also might not matter in most of the cases where anyone would ever do this.  Maybe I've missed something, but I think this covers most of the uses.  I agree that these are different things, and we should continue to tell people to make their identifying urls unique, but it doesn't seem that it's likely to be especially catastrophic if someone doesn't listen to that and goes ahead and in a few cases makes them the same anyway.</p>



<a name="153966503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966503">(Jun 01 2018 at 20:08)</a>:</h4>
<p>it is because your situation only works in the terminology stack itself, where you know by context what type of thing you are referring to. In the publishing stack, we assume that the URLs are distinct and don't know what type of thing something is when resolving the URLs. Having two distinct artefacts with the same URL is fatal in publishing</p>



<a name="153966504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966504">(Jun 01 2018 at 20:09)</a>:</h4>
<p>it would be good to add Rob's clearer statement - one not restricted by corner cases around global uniqueness - to the terminology pages.</p>



<a name="153966506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966506">(Jun 01 2018 at 20:10)</a>:</h4>
<p>Agree about the publishing stack generally.</p>



<a name="153966507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966507">(Jun 01 2018 at 20:11)</a>:</h4>
<p>Which is Rob's clearer statement?</p>



<a name="153966513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966513">(Jun 01 2018 at 20:15)</a>:</h4>
<blockquote>
<p>"The defining identifier for a value set can not be the same as a code system"</p>
</blockquote>



<a name="153966560"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966560" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966560">(Jun 02 2018 at 07:57)</a>:</h4>
<p>To answer <span class="user-mention" data-user-id="191405">@Rob Hausam</span> 's question, it is the rule in the validation engine that would report a problem</p>



<a name="153966561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966561">(Jun 02 2018 at 08:01)</a>:</h4>
<p>actually, the validation engine should report the problem first. that is, the loader I use should report the problem (HAPI loader might not)</p>



<a name="153966562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966562">(Jun 02 2018 at 09:22)</a>:</h4>
<p>ah, so the profile should fail to validate, not the instance</p>



<a name="153966563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/153966563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#153966563">(Jun 02 2018 at 12:12)</a>:</h4>
<p>I think it makes sense to have the statement and the rule in validation (at least for the profile).</p>



<a name="175217159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Must%20CodeSystem.uri%20and%20ValueSet.uri%20be%20disjoint%3F/near/175217159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Must.20CodeSystem.2Euri.20and.20ValueSet.2Euri.20be.20disjoint.3F.html#175217159">(Sep 09 2019 at 06:06)</a>:</h4>
<p>Okay, I'm going to re-open this discussion as it's just been brought to my attention that <a href="https://www.hl7.org/fhir/terminology-service.html#validation" target="_blank" title="https://www.hl7.org/fhir/terminology-service.html#validation">https://www.hl7.org/fhir/terminology-service.html#validation</a> explicitly requires that a code system's URI can be used as a proxy for the "all codes defined in the code system" value set.</p>
<blockquote>
<p>Every code system has an implicit value set that is "all the concepts defined in the code system" (CodeSystem.valueSet). For some code systems, these value set URIs are defined in advance (e.g. for LOINC, it is <a href="http://loinc.org/vs" target="_blank" title="http://loinc.org/vs">http://loinc.org/vs</a>). However, for some code systems, they are not known. Clients can refer to these implicit value sets by providing the URI for the code system itself.</p>
</blockquote>
<p>Now, I think the referenced use-case at the end is covered by <code>CodeSystem/$validate-code</code> so, in theory, this paragraph could be amended to suggest that operation is used instead</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
