---
layout: page
title: "FHIR Chat  · Using resources for list items · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html">Using resources for list items</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153968727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153968727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153968727">(Jun 12 2018 at 15:59)</a>:</h4>
<p>One of the ideas discussed on last night’s vocab call was using specialized resources (e.g. Medication) to describe lists of things (rather than ValueSet) if there are additional properties beyond “code” and “display”.  I am curious about the implications of this, and have some concerns.  For one thing, there is an advantage to having a generic structure so that a form rendering widget (like our LHC-Forms) does not need to know about individual resources when rendering a Questionnaire or handling keystrokes in a field with a list.</p>
<p>Also, our Clinical Table Search Service (<a href="https://clinicaltables.nlm.nih.gov/" target="_blank" title="https://clinicaltables.nlm.nih.gov/">https://clinicaltables.nlm.nih.gov/</a>) has 22 different tables, which have a uniform URL-based query format and a uniform output form.  In order to serve these to FHIR-based apps (e.g. for Questionnaires), would this service need to be returning 22 different FHIR resource types?</p>



<a name="153968734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153968734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153968734">(Jun 12 2018 at 16:23)</a>:</h4>
<p>Terminologies generally provide flat collections of properties and the properties are unordered.  They can't have hierarchy to the organization of the properties.  So if you want to convey that Medication X contains 10mg of ingredient 1 (active ingredient) and 5mg of active ingredient 2 and also contains non-active ingredient 3, that's hard/impossible to do using properties.</p>



<a name="153968735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153968735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153968735">(Jun 12 2018 at 16:24)</a>:</h4>
<p>Also, we prefer to not have two ways to share the same information.  The Medication, Location, ObservationDefinition and other resources exist for the purpose of sharing such definitional information whether associated with a terminology or not.</p>



<a name="153968742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153968742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153968742">(Jun 12 2018 at 17:02)</a>:</h4>
<p>A flat collection of properties does not necessarily mean the properties themselves are flat-- speaking generally, though maybe FHIR has that restriction.  For instance, on the Clinical Table Search Service, if you request the "STRENGTHS_AND_FORMS" property for the "Propranolol XR (Oral Pill)" record (<a href="https://clinicaltables.nlm.nih.gov/api/rxterms/v3/search?ef=STRENGTHS_AND_FORMS&amp;terms=Propranolol+XR" target="_blank" title="https://clinicaltables.nlm.nih.gov/api/rxterms/v3/search?ef=STRENGTHS_AND_FORMS&amp;terms=Propranolol+XR">https://clinicaltables.nlm.nih.gov/api/rxterms/v3/search?ef=STRENGTHS_AND_FORMS&amp;terms=Propranolol+XR</a>) you get back an array like [" 60 mg 24 HR XR Cap"," 80 mg 24 HR XR Cap","120 mg 24 HR XR Cap","160 mg 24 HR XR Cap"]. </p>
<p>I do get the motivation for wanting to use the resources for (what seems to me to be) a handful of cases that are covered by those existing resources, to avoid defining things in two places.  However, given that the number of types of database-backed lists someone might want in a Questionnaire, or might want to make available for Questionnaires,  has no limit,  I would think a more general solution needs to exist.  Does it make sense to define a new resource each time there is a new list, or a new source for an existing list that offers some additional properties?</p>



<a name="153968751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153968751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153968751">(Jun 12 2018 at 19:02)</a>:</h4>
<p>We define the resources when there's a need to create/read/update/maintain/share definitional information.  In your example, 60, mg, 24 Hr XR Cap are all separate data elements.  You're combining them together for convenience in a particular questionnaire lookup, but you can't calculate dosage or do other knowledge-base things with the data in that form.</p>



<a name="153968775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153968775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153968775">(Jun 12 2018 at 21:05)</a>:</h4>
<p>True.  The purpose of that API for RxTerms is to provide web applications with a way to create an autocompleting drug name lookup that also allows the user to pick from a strength/form list in a second input field (as in <a href="https://rxterms.nlm.nih.gov/" target="_blank" title="https://rxterms.nlm.nih.gov/">https://rxterms.nlm.nih.gov/</a>).  There are many other purposes for which its form of output would not be suitable.  Nonetheless, for its specific use-case, it does serve its purpose, and it gets used.  But, I think you are helping to make my case, in that here is an example of a useful lookup list for which it would not make sense to create a separate FHIR resource.  I would still like to be able to use it in a Questionnaire, though.</p>



<a name="153968777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153968777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153968777">(Jun 12 2018 at 21:36)</a>:</h4>
<p>The look-up list is really a specialized query against the overall set of information that exists in the resource.  We can't practically maintain the full set of medication definition information inside CodeSystem - at least not without significantly expanding its capabilities.  How much redundancy do we add the simple code system that is a list of drug codes and names to provide look-up lists for different purposes?</p>



<a name="153968780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153968780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153968780">(Jun 12 2018 at 22:07)</a>:</h4>
<p>I am not suggesting that CodeSystem know about medication definitions.  My goal is make the APIs at <a href="https://clinicaltables.nlm.nih.gov/" target="_blank" title="https://clinicaltables.nlm.nih.gov/">https://clinicaltables.nlm.nih.gov/</a> accessible to Questionnaires, and I am prepared to make new versions of those APIs that speak FHIR.  I think it is a general problem that people will have, that they have a data table somewhere, and would like to be able to autocomplete in a Questionnaire's form field to select a record.  I don't think FHIR can or should try to create resources for every possible data table.  Possibly the people serving up those data tables could create specialized resources, but in any event how it is done is less important (though not unimportant) to me than that there be some way to do it.</p>
<p>In LHC-Forms, the burden of selecting which fields are retrieved via the <a href="https://clinicaltables.nlm.nih.gov" target="_blank" title="https://clinicaltables.nlm.nih.gov">https://clinicaltables.nlm.nih.gov</a> APIs the and what those fields mean (i.e., which fields receive that data after the record is selected) is placed in the form definition.  It is up to the form designer to know that a certain API has a a certain field/property that is a drug strength list, and that after a selection there will be an RxCUI available that can be displayed.  The API returns a generic structure with the requested field data.  There is no need for a hand crafted resource for each kind of data the API serves.</p>



<a name="153968801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153968801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153968801">(Jun 12 2018 at 23:35)</a>:</h4>
<p>at heart, this is a question about levels of abstraction. The rule of thumb is that you're not very interested in the details, you'll prefer abstractions, while if you are in interested in the details, abstractions will be painful.</p>



<a name="153968802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153968802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153968802">(Jun 12 2018 at 23:40)</a>:</h4>
<p>For the record, SNOMED CT (at least the Australian extension) includes codes for branded medications fully modelled with the pack sizes, strengths of ingredients etc, and this information is accessible via several paths - the <code>normalForm</code> property which gives the corresponding SNOMED post coordinated expression, and the SNOMED Expression Constraint Language (ECL).  The latter allows for quite sophisticated ValueSets to be defined (on the fly, with implicit ValueSet URIs).<br>
For example, this demo UI (<a href="https://plnkr.co/bpXxat?p=info" target="_blank" title="https://plnkr.co/bpXxat?p=info">https://plnkr.co/bpXxat?p=info</a>) allows you to search and select a specific medication then see all the alternate brands, purely based on the modelled ingredients &amp; their strengths.  It is done only by building ECL expressions on the fly and issuing <code>$expand</code> <code>GET</code> requests.<br>
For other kinds of CodeSystems that publish codes with properties you can do similar things by constructing "real" <code>ValueSet</code> resources with appropriate filter constraints and issuing <code>POST</code> requests.</p>



<a name="153970990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153970990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153970990">(Jun 21 2018 at 15:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> That sounds interesting.  I was out for a few days, and when I tried to click on the link you shared (<a href="https://plnkr.co/bpXxat?p=info" target="_blank" title="https://plnkr.co/bpXxat?p=info">https://plnkr.co/bpXxat?p=info</a>) I got a "not found" page.  Could you make that link work again, or provide a new one?</p>



<a name="153971003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153971003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153971003">(Jun 21 2018 at 17:30)</a>:</h4>
<p>I got Michael's link to (<a href="https://plnkr.co/bpXxat?p=info" target="_blank" title="https://plnkr.co/bpXxat?p=info">https://plnkr.co/bpXxat?p=info</a>)    to work.  (I was being redirected to "<a href="http://next.plunkr.co" target="_blank" title="http://next.plunkr.co">next.plunkr.co</a>", where the link didn't work, but when I clicked "go back to the old version", then it worked.)</p>
<p>In the demo, I saw two different expansions happening.  The first is when the user is typing into the field (autocompletion), and the ValueSet's URL is "<a href="http://snomed.info/sct?fhir_vs=isa/30537011000036101" target="_blank" title="http://snomed.info/sct?fhir_vs=isa/30537011000036101">http://snomed.info/sct?fhir_vs=isa/30537011000036101</a>", and the entries in expansion.contains each contain a single code and display string without any additional properties.</p>
<p>The second expansion I saw was more interesting.  Although the returned entries under expansion.contains still only had "code" and "display" without additional properties, the ValueSet  URL was much more complicated:     http://snomed.info/sct?fhir_vs=ecl/(&lt; ((&gt; 68893011000036106 AND ^ 929360081000036101|Medicinal product pack reference set|) MINUS &gt;(&gt; 68893011000036106 AND ^ 929360081000036101|Medicinal product pack reference set|)) : [0..0] 30409011000036107 |hasTPUU| = ( * : 700000081000036101|has ingredient| != (68893011000036106. 30409011000036107 |hasTPUU| . 700000081000036101|has ingredient|) )) . 700000101000036108 |hasTP|</p>
<p>The ValueSet spec for the its "url" property says, "A canonical url for a value set."  That URL (above) probably does not meet the definition of canonical.  However, with that kind of freedom, we could specify which properties get searched (and perhaps that is part of what that expression is doing).  So, if that were allowed, that would solve half the problem I  am facing.  I still don't see a way of retrieving additional properties though (for display in the list the user sees as they type).</p>



<a name="153971341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153971341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153971341">(Jun 23 2018 at 00:52)</a>:</h4>
<p>The URI here pretty much corresponds to this implicit ValueSet URI pattern <code>?fhir_vs=ecl/[ecl]</code> documented here: <a href="http://build.fhir.org/snomedct.html#4.2.1.0.7.4" target="_blank" title="http://build.fhir.org/snomedct.html#4.2.1.0.7.4">http://build.fhir.org/snomedct.html#4.2.1.0.7.4</a> (strictly speaking, all the text between | symbols and extraneous whitespace should be removed, but Ontoserver is accommodating)<br>
If you need designations, you can add <code>&amp;includeDesignations=true</code> to the <code>$expand</code> call.<br>
If you <em>really</em> need the codes' properties, then currently you need to do additional <code>$lookup</code> calls per-code (this is how we do it with our code-system browser, Shrimp: <a href="https://ontoserver.csiro.au/shrimp" target="_blank" title="https://ontoserver.csiro.au/shrimp">https://ontoserver.csiro.au/shrimp</a></p>



<a name="153971343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Using%20resources%20for%20list%20items/near/153971343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Using.20resources.20for.20list.20items.html#153971343">(Jun 23 2018 at 04:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> is working on a strategy and syntax for "chaining" the output of the $expand and $lookup operations, which should (when available in the spec and implemented) be able to do what <span class="user-mention" data-user-id="195344">@Paul Lynch</span> is asking for.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
