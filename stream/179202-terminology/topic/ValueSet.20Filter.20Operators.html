---
layout: page
title: "FHIR Chat  · ValueSet Filter Operators · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html">ValueSet Filter Operators</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="174101469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174101469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174101469">(Aug 25 2019 at 21:53)</a>:</h4>
<p>Looking at the table of filter operators here...http://hl7.org/fhir/valueset-filter-operator.html... <br>
 I'm wondering if something like  <br>
<code>ValueSet.FilterComponent { Property = "display", Op = FilterOperator.In, Value = "term1,term2,term3" }</code><br>
 could be used to perform text matching on concept descriptions, or whether one has to use  <code>FilterOperation.regex </code> to do this in Intensional ValueSet definitions?</p>



<a name="174102253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174102253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174102253">(Aug 25 2019 at 22:18)</a>:</h4>
<p>could be used.</p>



<a name="174110183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174110183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174110183">(Aug 26 2019 at 02:29)</a>:</h4>
<p>I think this would be a much better approach.  Having to support regex for this is not great, not to mention there's no specific regex flavour that's called out</p>



<a name="174125404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174125404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174125404">(Aug 26 2019 at 09:02)</a>:</h4>
<p>Can a "," be in a code value?</p>



<a name="174127714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174127714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174127714">(Aug 26 2019 at 09:45)</a>:</h4>
<p>ValueSet.compose.filter.value is a string that, if the operator = In, can hold a comma separated list of codes or concepts.</p>



<a name="174138101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174138101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174138101">(Aug 26 2019 at 12:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> raises an important consideration because "," absolutely is in concept description values. How do we manage that?</p>



<a name="174139593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174139593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174139593">(Aug 26 2019 at 13:12)</a>:</h4>
<p>We need to clarify how to do this when concept descriptions include commas: For example, the code system that started all this that I'm trying to work with - US NUCC Provider Taxonomy - is already a bit of a mess with no officially designated fully published description. It is made up of a hierarchically crafted meaning. NUCC had indicated that we could concatenate the hierarchy pieces together using ";" and "," but even that is incomplete because the hierarchical phrases <em>also include commas.</em> VSAC has followed the suggested approach and also variably surrounded parts that have embedded commas with quotes. So for example  364SX0204X has the description Physician Assistants &amp; Advanced Practice Nursing Providers; Clinical Nurse Specialist, "Oncology, Pediatrics"</p>



<a name="174139933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174139933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174139933">(Aug 26 2019 at 13:16)</a>:</h4>
<p>have you looked at this, which is what the tools are currently using: <a href="https://github.com/FHIR/packages/blob/master/fhir.tx.support/fhir.tx.support.r4/package/CodeSystem-nucc-provider-taxonomy.json" target="_blank" title="https://github.com/FHIR/packages/blob/master/fhir.tx.support/fhir.tx.support.r4/package/CodeSystem-nucc-provider-taxonomy.json">https://github.com/FHIR/packages/blob/master/fhir.tx.support/fhir.tx.support.r4/package/CodeSystem-nucc-provider-taxonomy.json</a></p>



<a name="174140130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174140130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174140130">(Aug 26 2019 at 13:18)</a>:</h4>
<p>commas have no meaning in regex... could differentiate one whether they are escaped or not but that's <em>ugly</em></p>



<a name="174144608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174144608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174144608">(Aug 26 2019 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> No, I had not looked at it but based on the approach I just noted, that representation is not displaying the correct description for the code. Here is the way we've decided (based on a conversation with NUCC that I'll be honest, needs to be re-affirmed, but it's what VSAC is doing) to create a description for each code: It is a concatenation of each of the following to the level that is populated: the Grouping phrase followed by “; ”, then the Classification phrase. If there is a Specialization, concatenate “, ” and the Specialization phrase. For any phrase that includes a comma, wrap the phrase with standard double quotes: "</p>
<p>Honestly, I'd also like the code system representation to include properties for each of Grouping, Classification, and Specialization. Eventually they will hopefully create codes for the Grouping concepts, but that is not true yet. They also need to capture the hierarchy within the code system. These last two additions are interesting examples of something we could add as a code system supplement if they will not do it themselves.</p>
<p><span class="user-mention" data-user-id="191364">@Peter Jordan</span> has crafted a first pass at the code system but I missed telling him about the need for quotes, so it needs to be updated.</p>



<a name="174167786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174167786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174167786">(Aug 26 2019 at 19:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191364">@Peter Jordan</span> can you make a PR against that one then?</p>



<a name="174174685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20Filter%20Operators/near/174174685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20Filter.20Operators.html#174174685">(Aug 26 2019 at 20:34)</a>:</h4>
<p>I don't believe that the double-quotes are actually part of these concept descriptions - just the standard way of handling text strings that contain commas within a comma-delimited text file. Attempting to use an <code>in</code> filter to perform text matching on display values that contain commas and wishing to use a comma in the filter value (other than as a separator)...hmm, anyone who really needs to do that might require a regex operator?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
