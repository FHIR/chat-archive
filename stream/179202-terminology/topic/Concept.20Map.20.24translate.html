---
layout: page
title: "FHIR Chat  · Concept Map $translate · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Concept.20Map.20.24translate.html">Concept Map $translate</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="249012337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Concept%20Map%20%24translate/near/249012337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Pankratova <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Concept.20Map.20.24translate.html#249012337">(Aug 10 2021 at 17:49)</a>:</h4>
<p>Hi everyone!</p>
<p>I am currently implementing the POST-$translate method for a ConceptMap resource. </p>
<p>I ran into a problem that in the current version of FHIR R4 only coding can be passed to the <strong>dependency.concept</strong> parameter.<br>
In one of the discussions here, I found out that in R5 it is proposed to replace <strong>dependency.concept</strong> with <strong>dependency.value</strong>, where it would be possible to write not only CodeableConcept, but all other types as well.</p>
<p>The problem is that it's not enough for me to pass only the value, for example:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="err"> </span><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Parameters"</span><span class="p">,</span>
  <span class="nt">"parameter"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"code"</span><span class="p">,</span>
      <span class="nt">"valueCode"</span><span class="p">:</span> <span class="s2">"10001005"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"dependency"</span><span class="p">,</span>
      <span class="nt">"part"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"value"</span><span class="p">,</span>
          <span class="nt">"valueQuantity"</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">"value"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">"unit"</span><span class="p">:</span> <span class="s2">"year"</span><span class="p">,</span>
            <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://unitsofmeasure.org"</span><span class="p">,</span>
            <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"a"</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>But I need to identify it with <strong>concept</strong>. So it's not just some <strong>value</strong>, but it's the value within a code system, for example:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="err"> </span><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Parameters"</span><span class="p">,</span>
  <span class="nt">"parameter"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"code"</span><span class="p">,</span>
      <span class="nt">"valueCode"</span><span class="p">:</span> <span class="s2">"10001005"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"dependency"</span><span class="p">,</span>
      <span class="nt">"part"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"value"</span><span class="p">,</span>
          <span class="nt">"valueQuantity"</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">"value"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">"unit"</span><span class="p">:</span> <span class="s2">"year"</span><span class="p">,</span>
            <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://unitsofmeasure.org"</span><span class="p">,</span>
            <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"a"</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"concept"</span><span class="p">,</span>
          <span class="nt">"valueCoding"</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://smomed.info/sct"</span><span class="p">,</span>
            <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"445518008"</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Is it okay to do something like that?</p>



<a name="249034546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Concept%20Map%20%24translate/near/249034546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Concept.20Map.20.24translate.html#249034546">(Aug 10 2021 at 20:39)</a>:</h4>
<p>If I'm following, "age at onset" identifies the property that the mapping depends on? In which case, the type of the <code>dependency.concept</code> parameter should be <code>CodeableConcept</code></p>
<p>Alternatively, you have two dependsOn values, one of type Quantity and one of type Coding.</p>
<p>Ultimately it depends on how your ConceptMap is representing this mapping information.</p>



<a name="249073505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Concept%20Map%20%24translate/near/249073505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Pankratova <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Concept.20Map.20.24translate.html#249073505">(Aug 11 2021 at 06:44)</a>:</h4>
<blockquote>
<p>If I'm following, "age at onset" identifies the property that the mapping depends on? In which case, the type of the dependency.concept parameter should be CodeableConcept</p>
</blockquote>
<p>Yes, it does.<br>
And it should be CodeableConcept when there's that kind of rule: <code>IFA 11850561000119105 / Contusion of right chest wall /</code>. So the mapping depends on not value property  but code property.</p>
<p>It will look like that (if I've got it right):</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Parameters"</span><span class="p">,</span>
  <span class="nt">"parameter"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"code"</span><span class="p">,</span>
      <span class="nt">"valueCode"</span><span class="p">:</span> <span class="s2">"10001005"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"dependency"</span><span class="p">,</span>
      <span class="nt">"part"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"concept"</span><span class="p">,</span>
          <span class="nt">"valueCodeableConcept"</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://smomed.info/sct"</span><span class="p">,</span>
                <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"11850561000119105"</span><span class="p">,</span>
                <span class="nt">"display"</span><span class="p">:</span> <span class="s2">"Contusion of right chest wall"</span>
              <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">"text"</span><span class="p">:</span> <span class="s2">"Contusion of right chest wall"</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>But I don't understand how to deal with it if I want to pass not <code>codeableConcept</code> but some value, so I can use it in the process of mapping. And I also need to link the value with its code. It means that I need to specify that the current <code>valueQuantity</code> (age in this example) belongs to SNOMED's <code>445518008</code> property (like in the example below) (+ for example, if I apply $translate to another ConceptMap, I could say that this <code>valueQuantity</code> belongs to LOINC code system).</p>
<p>I can't do that - just pass "age on set" as <code>CodeableConcept</code>  for $translate because it doesn't contain any value for this:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Parameters"</span><span class="p">,</span>
  <span class="nt">"parameter"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"code"</span><span class="p">,</span>
      <span class="nt">"valueCode"</span><span class="p">:</span> <span class="s2">"10001005"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"dependency"</span><span class="p">,</span>
      <span class="nt">"part"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"concept"</span><span class="p">,</span>
          <span class="nt">"valueCodeableConcept"</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://smomed.info/sct"</span><span class="p">,</span>
                <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"445518008"</span><span class="p">,</span>
                <span class="nt">"display"</span><span class="p">:</span> <span class="s2">"Age at onset of clinical finding (observable entity)"</span>
              <span class="p">}</span>
            <span class="p">],</span>
            <span class="nt">"text"</span><span class="p">:</span> <span class="s2">"Age at onset of clinical finding (observable entity)"</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>That's why I want to use R5 because <strong>dependency.concept</strong> is replaced with <strong>dependency.value</strong>, so I can start passing value properties, but it doesn't support  <strong>dependency.concept</strong> anymore (according to the proposal file, and it's not described in specification yet) which I need to link these two properties.</p>
<p>So, I imagine it to be like that that every part of <strong>dependency</strong> parameter has:</p>
<ul>
<li>concept (dependency.concept | coding) - 0..1</li>
<li>value (dependency.value[x] |  [x] - every type) - 0..1</li>
</ul>
<p>It means If I have value property I specify both <strong>concept</strong> and <strong>value</strong>, and if I have only code property, I specify only <strong>concept</strong>.</p>
<blockquote>
<p>Alternatively, you have two dependsOn values, one of type Quantity and one of type Coding.</p>
</blockquote>
<p>If I understand your comment right, it's not like I want to have two not linked together values, I need to have two values (both Quantity and and its defining Coding) combined together.</p>



<a name="249295768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Concept%20Map%20%24translate/near/249295768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Concept.20Map.20.24translate.html#249295768">(Aug 12 2021 at 21:29)</a>:</h4>
<p>The R5 equivalent of <code>dependency.concept</code> is <code>dependency.valueCoding</code></p>
<p>However, it sounds like what you're want to express is that the <code>dependency.valueQuantity</code> is the value of an <code>age at onset</code> field, with that field being identified by a SNOMED code.  In this case, the <code>dependency.element</code> value could be set to <code>http://snomed.info/id/445518008</code>  (which would correspond to <code>group.element.target.dependsOn.property</code> in the ConceptMap).</p>



<a name="249296017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Concept%20Map%20%24translate/near/249296017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Concept.20Map.20.24translate.html#249296017">(Aug 12 2021 at 21:31)</a>:</h4>
<p>It is analogous to the example here <a href="https://build.fhir.org/conceptmap-example-specimen-type.html">https://build.fhir.org/conceptmap-example-specimen-type.html</a> (which is using product rather than dependsOn, but the essential idea is the same)</p>



<a name="249306304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Concept%20Map%20%24translate/near/249306304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Concept.20Map.20.24translate.html#249306304">(Aug 12 2021 at 23:32)</a>:</h4>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="err"> </span><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Parameters"</span><span class="p">,</span>
  <span class="nt">"parameter"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"code"</span><span class="p">,</span>
      <span class="nt">"valueCode"</span><span class="p">:</span> <span class="s2">"10001005"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"dependency"</span><span class="p">,</span>
      <span class="nt">"part"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"element"</span><span class="p">,</span>
          <span class="nt">"valueUri"</span><span class="p">:</span> <span class="s2">"http://snomed.info/id/445518008"</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"value"</span><span class="p">,</span>
          <span class="nt">"valueQuantity"</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">"value"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">"unit"</span><span class="p">:</span> <span class="s2">"year"</span><span class="p">,</span>
            <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://unitsofmeasure.org"</span><span class="p">,</span>
            <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"a"</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>



<a name="250452939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Concept%20Map%20%24translate/near/250452939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Pankratova <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Concept.20Map.20.24translate.html#250452939">(Aug 24 2021 at 07:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191343">Michael Lawley</span> <a href="#narrow/stream/179202-terminology/topic/Concept.20Map.20.24translate/near/249295768">said</a>:</p>
<blockquote>
<p>The R5 equivalent of <code>dependency.concept</code> is <code>dependency.valueCoding</code></p>
<p>However, it sounds like what you're want to express is that the <code>dependency.valueQuantity</code> is the value of an <code>age at onset</code> field, with that field being identified by a SNOMED code.  In this case, the <code>dependency.element</code> value could be set to <code>http://snomed.info/id/445518008</code>  (which would correspond to <code>group.element.target.dependsOn.property</code> in the ConceptMap).</p>
</blockquote>
<p>Yes, that's what I want. I've got it! Thanks a lot.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
