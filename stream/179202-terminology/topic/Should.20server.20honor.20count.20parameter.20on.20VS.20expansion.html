---
layout: page
title: "FHIR Chat  · Should server honor count parameter on VS expansion · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Should.20server.20honor.20count.20parameter.20on.20VS.20expansion.html">Should server honor count parameter on VS expansion</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="187003656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Should%20server%20honor%20count%20parameter%20on%20VS%20expansion/near/187003656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Should.20server.20honor.20count.20parameter.20on.20VS.20expansion.html#187003656">(Jan 30 2020 at 16:26)</a>:</h4>
<p>I used to think that server could apply its own (page) count if the count parameter from client request is "unreasonable". For example, if server has its default page count 500 and client requests $expand with count=5000, server could just return 500 per page. I re-read the $expand operation again and I don't find anywhere says that server could apply its own page count or could NOT apply its own page count. So what is the expectation?</p>



<a name="187060035"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Should%20server%20honor%20count%20parameter%20on%20VS%20expansion/near/187060035" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Should.20server.20honor.20count.20parameter.20on.20VS.20expansion.html#187060035">(Jan 31 2020 at 06:25)</a>:</h4>
<p>I was pretty sure the count parameter was advisory, but this is the most relevant  text I found (at the bottom of <a href="https://www.hl7.org/fhir/operation-valueset-expand.html" target="_blank" title="https://www.hl7.org/fhir/operation-valueset-expand.html">https://www.hl7.org/fhir/operation-valueset-expand.html</a>):</p>
<blockquote>
<p>Servers are not obliged to support paging, but if they do, SHALL support both the offset and count parameters.</p>
</blockquote>
<p>One way to read this is that a server that behaves as you describe is perfectly ok, but PERHAPS cannot be described as "supporting paging" :-)</p>
<p>On a practical level, if a client assumes that a result of &lt; the count parameter implies the last page, then you'll not have a good experience.  We have a default page size for Ontoserver and a max page size.  If a client asks for more than the max page size then an error is returned.  If they ask for more (or less) than the default, then we honor their request.</p>



<a name="187060154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Should%20server%20honor%20count%20parameter%20on%20VS%20expansion/near/187060154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Should.20server.20honor.20count.20parameter.20on.20VS.20expansion.html#187060154">(Jan 31 2020 at 06:28)</a>:</h4>
<p>server has a right to protect itself against requests that ask too much</p>



<a name="187140026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Should%20server%20honor%20count%20parameter%20on%20VS%20expansion/near/187140026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Should.20server.20honor.20count.20parameter.20on.20VS.20expansion.html#187140026">(Feb 01 2020 at 01:15)</a>:</h4>
<p>Sure, but as a client, if I ask for count = n in the expansion and I get k items where k is less than n, is that okay (when offset + k &lt; total), or must a server protect itself by returning an error (eg too costly).</p>



<a name="187356951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Should%20server%20honor%20count%20parameter%20on%20VS%20expansion/near/187356951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Should.20server.20honor.20count.20parameter.20on.20VS.20expansion.html#187356951">(Feb 04 2020 at 13:15)</a>:</h4>
<p>I don't think you need the error (see attached) <a href="user_uploads/10155/JaOT88-W7QRgdtCqOAp4YfVY/pasted_image.png" target="_blank" title="user_uploads/10155/JaOT88-W7QRgdtCqOAp4YfVY/pasted_image.png">pasted image</a> text in yellow. Not sure the text in blue is safe, but that's a different issue.</p>
<div class="message_inline_image"><a href="user_uploads/10155/JaOT88-W7QRgdtCqOAp4YfVY/pasted_image.png" target="_blank" title="pasted image"><img src="user_uploads/10155/JaOT88-W7QRgdtCqOAp4YfVY/pasted_image.png"></a></div>



<a name="187405289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Should%20server%20honor%20count%20parameter%20on%20VS%20expansion/near/187405289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Should.20server.20honor.20count.20parameter.20on.20VS.20expansion.html#187405289">(Feb 04 2020 at 22:01)</a>:</h4>
<p>This is text for the <code>_count</code> parameter and paging in Bundles representing Search results.  This is not the same as the <code>count</code> parameter for <code>ValueSet/$expand</code>, although it's arguable that the semantics / behaviour should be aligned, especially if this change proposal to support a "next" link gains traction <a href="https://jira.hl7.org/browse/FHIR-25786" target="_blank" title="https://jira.hl7.org/browse/FHIR-25786">https://jira.hl7.org/browse/FHIR-25786</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
