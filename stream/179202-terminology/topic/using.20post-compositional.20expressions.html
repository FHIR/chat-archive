---
layout: page
title: "FHIR Chat  · using post-compositional expressions · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html">using post-compositional expressions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153910851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153910851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153910851">(Sep 27 2017 at 02:10)</a>:</h4>
<p>The CodeSystem.compositional element indicates whether the CodeSystem defines a post-composition grammar.  (The HL7 version 3 core principles document seemingly uses the term post-coordination rather than post-composition for this.)</p>
<p>The FHIR documentation on <em>Using Codes in Resources</em> currently doesn't discuss usage of a post-composition grammar.<br>
<a href="http://build.fhir.org/terminologies.html" target="_blank" title="http://build.fhir.org/terminologies.html">http://build.fhir.org/terminologies.html</a></p>
<p>Some questions about usage of post-compositional expressions in FHIR ...</p>
<p>1. May post-compositional expressions be used in places where FHIR requires a coded value (code)?  If so, what binding strength should be used in cases where post-compositional expressions are allowed (required, extensible, etc.)?</p>
<p>2. Is there a standard terminology service operation for validating post-compositional expressions?  If not, should there be one?</p>
<p>3. Is it possible to use a post-composition grammar with a ValueSet that contains concepts from multiple code systems?</p>



<a name="153910858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153910858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153910858">(Sep 27 2017 at 03:36)</a>:</h4>
<p>Binding strength won't influence post-coordination support.  The value set will decide whether (and which) post-coordinated expressions are allowed.  To my knowledge, we don't have any "core" mechanisms to control that.  If you define a value set that says "all SNOMED CT procedure codes with a body site of lung", by default that means every pre-coordinated and every possible post-coordinated code that fits those criteria.  We probably should have extensions that provide more control.  There is an ability to have control over post-coordination when you generate an expansion using the ExpansionProfile resource, though there it's a "include/exclude post-coordinated concepts" - there's no fine-grained control that would support some types of post-coordination and not others.</p>



<a name="153910902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153910902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153910902">(Sep 27 2017 at 06:51)</a>:</h4>
<p>it's a filter property for snomed - one property, on or off, because mostly that's how servers work - they either support it or dont</p>



<a name="153911001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911001">(Sep 27 2017 at 14:28)</a>:</h4>
<p>Ok, post-coordinated expressions are allowed in coded values.</p>
<p>Can the validity of a post-coordinated expression be verified using the ValueSet/$validate-code operation?</p>



<a name="153911010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911010">(Sep 27 2017 at 14:54)</a>:</h4>
<p>Another way to phrase that is, would it be non-conformant if I implemented a ValueSet/$validate-code operation capable of validating a post-coordinated expression?</p>



<a name="153911076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911076">(Sep 27 2017 at 21:09)</a>:</h4>
<p>if a code system defines a post-coordinated grammar, then the terminology servers should fully support that grammar if they claim to support the code system, and that would include properly understanding it in $validate-code.</p>



<a name="153911078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911078">(Sep 27 2017 at 21:10)</a>:</h4>
<p>We're working on a new resource that allows a terminology server to declare it's capabilities, and that is expected to allow a server to declare that it supports a code system without implementing the grammar</p>



<a name="153911088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911088">(Sep 27 2017 at 21:45)</a>:</h4>
<p>I don't think "post-composition" is the intended term (or even valid).  The phrase should be either "compositional grammar" or "post-coordination grammar", I believe, and we should fix the definition of CodeSystem.compositional to reflect that and avoid confusion.  If there is general agreement on that I can create a tracker.</p>



<a name="153911095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911095">(Sep 27 2017 at 21:56)</a>:</h4>
<p>I agree with that</p>



<a name="153911129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911129">(Sep 28 2017 at 00:25)</a>:</h4>
<blockquote>
<p>We're working on a new resource that allows a terminology server to declare it's capabilities, and that is expected to allow a server to declare that it supports a code system without implementing the grammar</p>
</blockquote>
<p>It will be interesting to see what might be required to implement SCT Grammar.  At present, it's possible to place expression constraints as filters in ValueSet composition statements, display normalForm expressions as $lookup properties and validate post-coordinated expressions in codes...but I'm not sure what else?  I guess that it's possible to place expression constrains in the filter parameter that's passed to $expansion operation requests, but I'm not certain if that's good practice and/or we're still waiting for the SCT Query Language to be published (2018) before adding a dedicated parameter for requests based on that dialect.</p>



<a name="153911135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911135">(Sep 28 2017 at 04:19)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> for the explanation of grammar support in $validate-code.</p>



<a name="153911136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911136">(Sep 28 2017 at 04:21)</a>:</h4>
<p>My last question on this may be unusual ...</p>
<p>Suppose I have 2 CodeSystem resources, both of which utilize the same post-coordinated grammar, and a ValueSet composed of codes from both of them.   Would it be valid to construct a post-coordinated expression composed of codes from both systems?  Would it be reasonable to expect the ValueSet/$validate-code operation to handle such an expression?  Would this only make sense under special circumstances (e.g. as a $validate-code "extension")?</p>



<a name="153911139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911139">(Sep 28 2017 at 04:45)</a>:</h4>
<p>You could only mix and match across the code systems if the grammar of one or both code systems allowed that.  An example of where this occurs is the IETF language codes whose post-coordinated syntax includes codes from the ISO country code table.</p>



<a name="153911241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911241">(Sep 28 2017 at 14:15)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>, that's good to know.</p>



<a name="153911999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/using%20post-compositional%20expressions/near/153911999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/using.20post-compositional.20expressions.html#153911999">(Oct 03 2017 at 05:46)</a>:</h4>
<p>and if they did define that, you'd be expected to support it if you supported the grammar</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
