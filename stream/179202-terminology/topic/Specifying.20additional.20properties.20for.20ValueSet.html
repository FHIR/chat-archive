---
layout: page
title: "FHIR Chat  · Specifying additional properties for ValueSet · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html">Specifying additional properties for ValueSet</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153971334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153971334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153971334">(Jun 22 2018 at 22:56)</a>:</h4>
<p>Here is one possible solution for how ValueSet might be modified to handle additional properties that would meet the need I have for selecting additional properties to be returned and to be searched (when filtering):</p>
<p>On ValueSet, under "contains" add a new "properties" key:</p>
<div class="codehilite"><pre><span></span>contains:
   properties:    0..*
     name:  string
     value[x]:  *
</pre></div>


<p>Then,  to request that these properties be retrieved or searched, use two new optional parameters for ValueSet $expand:</p>
<ul>
<li>"properties":  list,of,additonal,properties   -- returned with above "properties" section</li>
<li>"filterProperties": list,of,properties filtered by "filter"</li>
</ul>
<p>If the properties are not specified, the server would just use a default value.</p>



<a name="153971372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153971372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153971372">(Jun 24 2018 at 16:21)</a>:</h4>
<p>I am intrigued by this possibility now that we have decided to do away with expansion profile. I do think it would be useful to be able to identify specific code system concept attributes within the compose that would then end up as included in the <code>$expand</code>. We'd also want a default.</p>



<a name="153971379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153971379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153971379">(Jun 24 2018 at 21:58)</a>:</h4>
<p>There is work in progress to allow the output of <code>$expand</code> to be passed into <code>$lookup</code> (and <code>$translate</code>) which will resolve this issue.<br>
It also leaves it to the client to decide what the desired properties are, which is where the decision should lie.</p>



<a name="153973641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973641">(Jul 05 2018 at 07:18)</a>:</h4>
<p>so. I've been thinking about this and playing around with approaches. There's not really any generic way to pipe operations to each other.... but there's a way to resolve this.</p>



<a name="153973642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973642">(Jul 05 2018 at 07:19)</a>:</h4>
<p>at present, the lookup operation takes a code + system to look up. We could add another option, to pass a value set. if you do this, the server expands the value set, and then returns the result of lookup for all the members of the value set</p>



<a name="153973643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973643">(Jul 05 2018 at 07:22)</a>:</h4>
<div class="codehilite"><pre><span></span>GET [base]/CodeSystem/$lookup?valueset=http://hl7.org/fhir/ValueSet/doc-classcodes&amp;property=definition
</pre></div>



<a name="153973644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973644">(Jul 05 2018 at 07:22)</a>:</h4>
<p>this same approach works for translation:</p>



<a name="153973645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973645">(Jul 05 2018 at 07:23)</a>:</h4>
<div class="codehilite"><pre><span></span>GET [base]/ConceptMap/$translate?valueSet=http://hl7.org/fhir/ValueSet/composition-status
  &amp;source=http://hl7.org/fhir/ValueSet/composition-status
  &amp;target=http://hl7.org/fhir/ValueSet/v3-ActStatus
</pre></div>



<a name="153973646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973646">(Jul 05 2018 at 07:24)</a>:</h4>
<p>So another use case came up today which was chaining $translate eg to do AMT -&gt; SCT -&gt; RxNorm</p>



<a name="153973647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973647">(Jul 05 2018 at 07:24)</a>:</h4>
<p>in both cases, you get back a Parameters with a series of parameters, each of which contains a set of parts that is the normal set of output parameters for the operation, one for each code in the expansion</p>



<a name="153973648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973648">(Jul 05 2018 at 07:25)</a>:</h4>
<p>that's one way to do this ... it probably works well for translate, but maybe not so much for lookup</p>



<a name="153973650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973650">(Jul 05 2018 at 07:27)</a>:</h4>
<p>an alternative approach which is more value set centric - and probably better for getting properties, is to add to value set (probably extensions for now) a column : string 0..* for each contains, and a column: {name, uri, type} to the expansion that defines the columns. and some kind of column= parameter in the $expand</p>



<a name="153973651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973651">(Jul 05 2018 at 07:27)</a>:</h4>
<p>I can prototype either of these, but I thought I'd see what people said</p>



<a name="153973652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973652">(Jul 05 2018 at 07:28)</a>:</h4>
<p>the 3rd option I spent the most time pursuing is the most complicated... extending batch to allow feeding outputs from one batch entry into a subsequent batch entry</p>



<a name="153973653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973653">(Jul 05 2018 at 07:28)</a>:</h4>
<p>that is powerful, but rapidly gets really messy....</p>



<a name="153973704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973704">(Jul 05 2018 at 13:56)</a>:</h4>
<p>the first option looks pretty good to me - if the "not so much for lookup" isn't too big an issue<br>
can you elaborate on that?</p>



<a name="153973794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973794">(Jul 05 2018 at 15:25)</a>:</h4>
<p>In the first option, would it be possible to specify a "filter" parameter to control what parts of the ValueSet are returned  by the $lookup?  My use case for this is matching against what the user is typing in a field.</p>



<a name="153973849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973849">(Jul 05 2018 at 19:04)</a>:</h4>
<p>well, all the parameters for expand would become relevant</p>



<a name="153973850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973850">(Jul 05 2018 at 19:05)</a>:</h4>
<p>$lookup on an expand would obscure the value set expansion itself</p>



<a name="153973891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973891">(Jul 05 2018 at 19:56)</a>:</h4>
<p>I'm not entirely sure what you mean by "obscure the ...expansion", but I like the idea that the $expand parameters would be available.  I took a quick look at the $expand and $lookup parameter lists, and it looks like the only overlap is displayLanguage, which I don't think would be an issue.</p>
<p>So, this idea would allow extra properties to be specified and retrieved, but still leaves it up to the server to decide which properties should be searched.  I really think that should be a client-side decision, but as I recall from a previous phone call, reaching a consensus on how to do that was difficult for some reason.  Anyway, I am happy to have half the problem solved, and if the other half (specifying which properties should be searched) needs to be considered separately or put off for now, that is fine.</p>



<a name="153973904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973904">(Jul 05 2018 at 20:36)</a>:</h4>
<p>My preference would be to create a new $lookup operation for the ValueSet resource, rather than pass ValueSet resources to the $lookup operation on the CodeSystem resource.</p>



<a name="153973927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153973927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153973927">(Jul 05 2018 at 22:10)</a>:</h4>
<p>I see two different use cases here:<br>
  1. perform an <code>$expand</code> but allow specified properties to be returned in the expansion rather than than just the <code>code</code>/<code>designations</code>, and<br>
  2. perform a <code>$lookup</code> on a set of codes in a single request - a <code>ValueSet</code> might be the way to specify that set of codes.<br>
Then there is the extension of this idea to other operations, e.g., <code>$translate</code>:<br>
  3. perform a <code>$translate</code> on a set of codes in a single request - again, a <code>ValueSet</code> might be the way to specify that set of codes, and<br>
  4. link a series of <code>$translate</code> calls where the initial input is either a single code, or a set of codes (3)</p>
<p>Note:</p>
<ul>
<li>the key difference between 1 &amp; 2 is that 1 still returns an expansion where as 2 does not (or probably does not), and 1 really just needs an upgrade to <code>$expand</code> and <code>ValueSet.expansion</code> to allow for request and return of properties.</li>
<li>neither <code>$lookup</code> nor <code>$translate</code> current tell you what the input code was so they will both need some mechanism to indicate this when used in a "multi-input" context</li>
</ul>
<p>An approach to 2&amp;3 I have been toying with involves extending <code>$lookup</code> and <code>$translate</code> to allow a <code>ValueSet</code> (with expansion) as an input parameter and to extend <code>$expand</code> with a new parameter <code>chain</code> (or <code>pipe</code> or...?) that takes a URL as a value.  That URL would be either <code>/CodeSystem/[id/]$lookup?...</code> or <code>/ValueSet/[id/]$translate?...</code> without the <code>code</code>, <code>system</code> input parameter values.</p>
<p>What I don't like about this approach is that it expand-based which suggest the result should be a ValueSet with expansion.  The alternative would be to extend each of <code>$lookup</code> and <code>$translate</code> with a new parameter <code>input</code> (or <code>from</code> or ...?) that takes an <code>$expand</code> URL as a value - <code>/ValueSet/[id/]$expand?...</code> - instead of the <code>code</code>, <code>system</code> input parameter values.</p>



<a name="153975240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153975240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153975240">(Jul 14 2018 at 09:24)</a>:</h4>
<p>No feedback? <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191364">@Peter Jordan</span></p>



<a name="153975312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153975312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153975312">(Jul 16 2018 at 00:16)</a>:</h4>
<p>I don't know - I'm hoping to get back to this later this week</p>



<a name="153985207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153985207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153985207">(Aug 11 2018 at 04:27)</a>:</h4>
<p>Was there a tracker for this functionality going through, I can see that the ValueSet expansion doesn't have the properties of the codes in it.</p>



<a name="153985215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153985215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153985215">(Aug 11 2018 at 04:49)</a>:</h4>
<p>no this was always going to miss the boat but I will get back to it... there's just too much to do right now</p>



<a name="153991351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/153991351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#153991351">(Aug 28 2018 at 19:25)</a>:</h4>
<p>The tracker I had submitted was <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17324&amp;start=0" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17324&amp;start=0">#GF17324</a>.  (I just noticed that this conversation had updates.)</p>



<a name="154015265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/154015265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#154015265">(Nov 02 2018 at 19:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Is it still on your list to propose something further on this?</p>



<a name="154015288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/Specifying%20additional%20properties%20for%20ValueSet/near/154015288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/Specifying.20additional.20properties.20for.20ValueSet.html#154015288">(Nov 02 2018 at 21:13)</a>:</h4>
<p>yes still on my list</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
