---
layout: page
title: "FHIR Chat  · ConceptMap/$translate with product · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.20with.20product.html">ConceptMap/$translate with product</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="223331787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate%20with%20product/near/223331787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.20with.20product.html#223331787">(Jan 20 2021 at 04:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> while exploring expected behaviour for $translate with a ConceptMap including <code>.product</code> entries I found this:</p>
<div class="codehilite"><pre><span></span><code>curl &#39;http://tx.fhir.org/r4/ConceptMap/102/$translate?system=http://terminology.hl7.org/CodeSystem/v2-0487&amp;code=URINN&amp;_format=json&#39;
</code></pre></div>
<p>which should exercise this part of the map:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"URINN"</span><span class="p">,</span>
  <span class="nt">"target"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"446277003"</span><span class="p">,</span>
      <span class="nt">"equivalence"</span><span class="p">:</span> <span class="s2">"equivalent"</span><span class="p">,</span>
      <span class="nt">"product"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">"property"</span><span class="p">:</span> <span class="s2">"http://snomed.info/id/246380002"</span><span class="p">,</span>
          <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
          <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"225109005"</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">"property"</span><span class="p">:</span> <span class="s2">"http://snomed.info/id/3006873018"</span><span class="p">,</span>
          <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
          <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"25990002"</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">},</span>
</code></pre></div>
<p>But it returns:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Parameters"</span><span class="p">,</span>
  <span class="nt">"parameter"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"result"</span><span class="p">,</span>
      <span class="nt">"valueBoolean"</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"match"</span><span class="p">,</span>
      <span class="nt">"part"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"match"</span><span class="p">,</span>
          <span class="nt">"valueCoding"</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://snomed.info/sct"</span><span class="p">,</span>
            <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"446277003"</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"equivalence"</span><span class="p">,</span>
          <span class="nt">"valueCode"</span><span class="p">:</span> <span class="s2">"Equivalent"</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"result"</span><span class="p">,</span>
      <span class="nt">"valueBoolean"</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"message"</span><span class="p">,</span>
      <span class="nt">"valueString"</span><span class="p">:</span> <span class="s2">"no match found"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Note:</p>
<ol>
<li>two (different) values for <code>result</code></li>
<li><code>message</code> of <code>"no match found"</code></li>
<li>neither of the <code>.product</code> values returned.</li>
</ol>



<a name="223331867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate%20with%20product/near/223331867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.20with.20product.html#223331867">(Jan 20 2021 at 04:42)</a>:</h4>
<p>The other concern is that <code>.product.value</code> is <code>string</code>-typed (to accommodate path, valueSet, text, etc) but the corresponding OUT field for <code>$translate</code> is <code>Coding</code>.</p>
<p>I have use-cases where I need to produce <code>string</code> and <code>integer</code> typed products.</p>



<a name="223450162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate%20with%20product/near/223450162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.20with.20product.html#223450162">(Jan 20 2021 at 23:08)</a>:</h4>
<blockquote>
<p>two (different) values for result<br>
message of "no match found"<br>
neither of the .product values returned.</p>
</blockquote>
<p>Fixed next update - thanks</p>



<a name="223450225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate%20with%20product/near/223450225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.20with.20product.html#223450225">(Jan 20 2021 at 23:09)</a>:</h4>
<blockquote>
<p>The other concern</p>
</blockquote>
<p>has to be discussion in committee. Make a task with your use cases. And use extensions for now</p>



<a name="223485978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate%20with%20product/near/223485978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.20with.20product.html#223485978">(Jan 21 2021 at 09:36)</a>:</h4>
<p>Will do.<br>
There are other issues as well -- there's no way to cater for <code>$translate</code> calls that don't include sufficient/any <code>dependency</code> parameters by, for example, echoing the <code>.depend</code> fields in the result.<br>
I'll create a task for this as well.</p>



<a name="223603733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate%20with%20product/near/223603733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.20with.20product.html#223603733">(Jan 22 2021 at 04:50)</a>:</h4>
<p>See (existing ticket) <a href="http://jira.hl7.org/browse/FHIR-28284">FHIR-28284</a> for the <code>.product</code> output issue (updated with additional detail and a simple use-case)</p>



<a name="223604244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate%20with%20product/near/223604244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.20with.20product.html#223604244">(Jan 22 2021 at 05:03)</a>:</h4>
<p>See <a href="http://jira.hl7.org/browse/FHIR-30515">FHIR-30515</a> for the issue relating to <code>.dependsOn</code> (and <code>.comment</code>)</p>



<a name="223604333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate%20with%20product/near/223604333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.20with.20product.html#223604333">(Jan 22 2021 at 05:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> given that the main issue here is to do with the OUT Parameters, is it required to use an extension, or is it permissible (preferable?) to just include additional parts?</p>



<a name="225220859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ConceptMap/%24translate%20with%20product/near/225220859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ConceptMap.2F.24translate.20with.20product.html#225220859">(Feb 04 2021 at 20:53)</a>:</h4>
<p>you can just create new named parameters <span class="user-mention" data-user-id="191343">@Michael Lawley</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
