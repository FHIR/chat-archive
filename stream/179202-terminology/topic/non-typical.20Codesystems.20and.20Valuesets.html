---
layout: page
title: "FHIR Chat  · non-typical Codesystems and Valuesets · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html">non-typical Codesystems and Valuesets</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="196201699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196201699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196201699">(May 04 2020 at 16:01)</a>:</h4>
<p>I started <a href="#narrow/stream/215610-shorthand/topic/Codesystems.20and.20Valuesets" title="#narrow/stream/215610-shorthand/topic/Codesystems.20and.20Valuesets">this thread in the shorthand stream</a> about valuesets and codesystems that are often used in genomics.<br>
<span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  commented:</p>
<blockquote>
<p>looking back at what Bob is doing...</p>
<ul>
<li>sounds like it should be discussed on the terminology track to see what should be done. Typically, these gene terminologies are very large, and you can't simply define them</li>
<li>more likely, I'll need to do implementation work on <a href="http://tx.fhir.org" title="http://tx.fhir.org">tx.fhir.org</a> to support these kinds of terminologies</li>
</ul>
</blockquote>
<p>In addition to gene terminologies defining <a href="http://www.genenames.org" title="http://www.genenames.org">gene names</a>, some of these systems are only grammars (<a href="https://varnomen.hgvs.org/" title="https://varnomen.hgvs.org/">HGVS</a> or <a href="http://glstring.org" title="http://glstring.org">GLStrings</a>) that we need to bind to.</p>
<p>So, I'm bringing it up here in this track for to see what should be done.</p>



<a name="196251679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196251679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196251679">(May 04 2020 at 23:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191345">@Alejandro Metke</span> has done a bunch of work in the genomic terminologies space.<br>
There's also work out of Nebraska in the pathology space where I believe they've mostly used string-typed concrete domains to build SNOMED extensions where the HGVS string, for example, is referenced as a property of SNOMED code for a test.</p>



<a name="196252879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196252879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alejandro Metke <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196252879">(May 04 2020 at 23:39)</a>:</h4>
<p>The main work we've done is around transforming OWL ontologies to FHIR code systems (it is an open source project available here: <a href="https://github.com/aehrc/fhir-owl" title="https://github.com/aehrc/fhir-owl">https://github.com/aehrc/fhir-owl</a>). I know the Clinical Genomics working group has been using this for some of the ontologies that are used in genomics because a few are available in OWL format. The only issue here is to standardise the systems' urls.</p>
<p>I think the difficult part is dealing with grammar-like terminologies. FHIR already uses UCUM, which has similar characteristics, but I think it would be good to have more clarity around 1) if terminology servers should support this kind of terminology 2) if yes, what is the expected behaviour (which operations make sense). In my view the answer to 1) is yes and 2) some operations could be clearly supported, such as $validate-code, but some others are not as clear, for example, $expand.</p>



<a name="196256002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256002">(May 05 2020 at 00:23)</a>:</h4>
<p>you could make a task if you think we should be clearer, but I thought we already were - a terminology server that implements a code system with a grammar should have the following behavior: </p>
<ul>
<li>it should be clear whether the grammar is supported or not (e.g. snomed). (terminology capabilities) </li>
<li>we could say for some of them in their definition that it servers are required to implement the grammar (e.g. media type, language) but we don't. UCUM would be a candidate to for being required but I'm not sure</li>
</ul>
<p>For servers that  do support the grammar:</p>
<ul>
<li>$validate-code should understand the grammar correctly and validate the semantics of the grammar as completely as possible</li>
<li>$expand is more complicated:<ul>
<li>if the server is expanding an enumerated value set, it should only add valid expressions to the expansion</li>
<li>for some code systems that have a grammar, we have a filter to exclude the grammar (pre-coordinated terms only). For others that's not appropriate</li>
<li>servers should be able to do expansions without grammar if the filter says so</li>
<li>servers can't expand a value set that allows for post-coordinated terms, but it may choose to return a subset (including post-coordinated terms or not) and mark it as indicative since the full expansion cannot be generated</li>
</ul>
</li>
</ul>



<a name="196256016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256016">(May 05 2020 at 00:23)</a>:</h4>
<p>I'd love to have FHIR binding support something that is in essence a syntax check, ie: is the code defined one that is in the code system space based on conforming to syntax rules. This would be used for bindings where the code system is a grammar and the element intends to allow any valid code. This actually turns out to be very common for grammar code system bindings (UCUM, BCP47) and the alternative of creating some subset invariably results in a missed code that is valid and needed. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  <span class="user-mention" data-user-id="191405">@Rob Hausam</span>  - thoughts?</p>



<a name="196256086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256086">(May 05 2020 at 00:24)</a>:</h4>
<p>that's what we already have</p>



<a name="196256240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256240">(May 05 2020 at 00:26)</a>:</h4>
<p>We don't have a binding that special for this. Are you saying you implement that way in your server?</p>



<a name="196256256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256256">(May 05 2020 at 00:26)</a>:</h4>
<p>that's what it means to support those code systems. There's nothing special about that</p>



<a name="196256308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256308">(May 05 2020 at 00:28)</a>:</h4>
<p><code>/CodeSystem/$validate-code</code> should check grammar (as Grahame said above)</p>



<a name="196256358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256358">(May 05 2020 at 00:28)</a>:</h4>
<p>I'm not following what you mean by "that is what it means to support those code systems." The resource for this code system can not look like a SCT resource</p>



<a name="196256378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256378">(May 05 2020 at 00:28)</a>:</h4>
<p>validate, yes. "support" no</p>



<a name="196256392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256392">(May 05 2020 at 00:29)</a>:</h4>
<p>if you mean, you cannot express any of this in a code system resource, then sure, you're right. If you mean something else, I don't know what you do</p>



<a name="196256534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256534">(May 05 2020 at 00:31)</a>:</h4>
<p>Seems you must be doing something special to treat the two different types of code systems "the same" with validation when the base resources I'd assume they operate on are completely different. Hence not easy or understandable for normal folks</p>



<a name="196256569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256569">(May 05 2020 at 00:32)</a>:</h4>
<p>I don't understand this response at all. What base resources do they operate on?</p>



<a name="196256637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256637">(May 05 2020 at 00:33)</a>:</h4>
<p>If a grammar were simple, for example characterised by a regex, then the CodeSystem could include this (in an extension element) and the terminology server would be able to provide some support generically.<br>
Challenges arise when there's a normalisation step required (eg order of terms in a grammar is not important), or the grammar is complex, requiring ANTLR, ABNF, etc to express.</p>



<a name="196256668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256668">(May 05 2020 at 00:33)</a>:</h4>
<p>right. we never tried to make the code system resource express any of those things. It only expresses simple non-grammar code systems</p>



<a name="196256672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256672">(May 05 2020 at 00:33)</a>:</h4>
<p>I'm sure I'm the one confused. Does BCP47 and UCUM have a code system resource with concepts in it? I'd assume not. Yet for all the other code system resources, they do. I'd have assumed you need a code system resource to do validation operations on the code system. Not true?</p>



<a name="196256761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256761">(May 05 2020 at 00:35)</a>:</h4>
<p>SO you are saying that validate-code is special sauce done independent of the code system resource</p>



<a name="196256795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256795">(May 05 2020 at 00:35)</a>:</h4>
<p>and seems is completely up to the TS creator to figure out?</p>



<a name="196256850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256850">(May 05 2020 at 00:36)</a>:</h4>
<p>that does not sound very easy for others to implement</p>



<a name="196256871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256871">(May 05 2020 at 00:36)</a>:</h4>
<p>Well, the idea is that complexity is offloaded to the TS implementer</p>



<a name="196256887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256887">(May 05 2020 at 00:37)</a>:</h4>
<p>The expectation is that the number of code systems with grammars etc is small</p>



<a name="196256941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256941">(May 05 2020 at 00:38)</a>:</h4>
<p>and the number of TS devs is also small</p>



<a name="196256950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256950">(May 05 2020 at 00:38)</a>:</h4>
<p>and will forever be small ;-)</p>



<a name="196256966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196256966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196256966">(May 05 2020 at 00:38)</a>:</h4>
<p>given that UCUM, BCP47 are <em>everywhere</em></p>



<a name="196257048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196257048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196257048">(May 05 2020 at 00:40)</a>:</h4>
<p>we have not tried to make a CodeSystem resource for BCP47, or UCUM etc. My server supports many code systems that I have not tried to make CodeSystem resources for.</p>
<blockquote>
<p>I'd have assumed you need a code system resource to do validation operations on the code system</p>
</blockquote>
<p>No. All the working terminology servers have some internal API that implements the code systems, and one internal implementation of the API takes a code system resource</p>
<blockquote>
<p>validate-code is special sauce done independent of the code system resource</p>
</blockquote>
<p>Not  dependent on having one, no</p>
<blockquote>
<p>that does not sound very easy for others to implement</p>
</blockquote>
<p>no, but the question isn't 'how can it be easy to support such terminologies' since there'll never be an easy way. The question was, 'what's the least worst way to do it'. And having worked with some of our early attempts to define a uber-grammar that supports all the things people want to do, and looking ahead at the genomics ones, I knew that I wasn't going to even try for an uber-grammer in FHIR. Instead what we did was simple: define the CodeSystem resource to make sure the long tail is easily supported, and ensure that the terminology service API can handle the requirements of the complicated grammars, and then let servers decide which of those they were going to support</p>



<a name="196257098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196257098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196257098">(May 05 2020 at 00:41)</a>:</h4>
<p>the internal mini-terminology server in the validater/publisher looks to see if there's a CodeSystem resource. If there is, it uses it's internal implementation for $expand/$validate-code. Otherwise it hands it over to the terminology server</p>



<a name="196257135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196257135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196257135">(May 05 2020 at 00:42)</a>:</h4>
<p>My point is, perhaps we make it easy to bind to a known implementation of a validator service, versus hope there is a accessible TS that does it for you. I get the long-tail piece and that is exactly my point. Allow the binding to find a validator versus hope there is one inside your system.</p>



<a name="196257149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196257149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196257149">(May 05 2020 at 00:42)</a>:</h4>
<p>no I have no idea what you are talking about. What's the difference between a validator service and an accessible TS?</p>



<a name="196257254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196257254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196257254">(May 05 2020 at 00:44)</a>:</h4>
<p>Perhaps the missing piece is TS federation?</p>



<a name="196257257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196257257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196257257">(May 05 2020 at 00:44)</a>:</h4>
<p>most implementations will use internal FHIR services. ON occasion they will need this sort of external help. How do they link to the TS when needed? - I may call you</p>



<a name="196257457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196257457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196257457">(May 05 2020 at 00:47)</a>:</h4>
<p>This is essentially what the idea of terminology services is all about.  The complexity is handled by the "specialist software", making it much easier for applications generally to make use of terminology and do that correctly.</p>



<a name="196258282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196258282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196258282">(May 05 2020 at 01:02)</a>:</h4>
<p>What <span class="user-mention" data-user-id="191503">@Robert McClure</span> is looking for is to use <a href="http://hl7.org/fhir/StructureDefinition/valueset-trusted-expansion" title="http://hl7.org/fhir/StructureDefinition/valueset-trusted-expansion">http://hl7.org/fhir/StructureDefinition/valueset-trusted-expansion</a> on the binding, instead of just being allowed to do so on the value set. (we just talked). He's going to:</p>
<ul>
<li>make some test cases for the validator to get the ever-so tardy author of the validator to actually implement these things</li>
<li>make a jira task to extend the extension to us on bindings as well as in value sets</li>
</ul>



<a name="196258771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196258771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196258771">(May 05 2020 at 01:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> the problem with federated terminology for me is that the engine (+ internal API) running <a href="http://tx.fhir.org" title="http://tx.fhir.org">tx.fhir.org</a> was never defined with federation in mind. The architecture assumes extremely low latency (e.g. direct code bindings) between the different code system providers. That's probably not a capability that we actually exercise, but I'd either have to  rewrite my internal API, or somehow turn the internal highly granular API back to something coarse. </p>
<p>E.g. the internal expansion approach is something like </p>
<ul>
<li>'here's a filter - can you handle that?'</li>
<li>ok set up to be able to filter with this code/op/value</li>
<li>then a voting protocol for which filter is going to drive the iteration and which other ones are just going to veto the iteration steps (iterate on the smallest overall set)</li>
<li>then iterating, letting each filter remove things that don't meet the filter</li>
<li>then assemble the expansion, hierarchically if possible (the iteration keeps track of this)</li>
</ul>
<p>I can't federate that</p>



<a name="196258817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196258817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196258817">(May 05 2020 at 01:13)</a>:</h4>
<p>I do have experience with federating tx services, because I already do - I maintain the mini-terminology server inside the validator. And I know just where it's broken, and the edge cases that no one else has found yet. One day I'll have to figure out how to resolve those edge cases</p>



<a name="196258991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196258991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196258991">(May 05 2020 at 01:16)</a>:</h4>
<p>That seems pretty low level to want to federate?  Why not at the $expand / $validate-code level?<br>
I'm thinking something like a fail-over approach (try internal and on "unsupported", try next federated server), and/or allow specified CS/VS to be routed directly to a federated TS</p>



<a name="196259092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196259092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196259092">(May 05 2020 at 01:19)</a>:</h4>
<p>well, the second is the trusted expansion source. The first... doesn't really federate Tx services - it just provides some fall back functionality</p>



<a name="196262182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196262182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196262182">(May 05 2020 at 02:31)</a>:</h4>
<p>So, trusted-expansion points at a FHIR TS endpoint?  eg <a href="https://genomics.ontoserver.csiro.au/fhir" title="https://genomics.ontoserver.csiro.au/fhir">https://genomics.ontoserver.csiro.au/fhir</a> ?</p>



<a name="196262657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196262657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196262657">(May 05 2020 at 02:42)</a>:</h4>
<p>y</p>



<a name="196264355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/non-typical%20Codesystems%20and%20Valuesets/near/196264355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets.html#196264355">(May 05 2020 at 03:28)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-27028" title="http://jira.hl7.org/browse/FHIR-27028">FHIR#27028</a> ticket to clarify this in the spec</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
