---
layout: page
title: "FHIR Chat  · ValueSet with SNOMED CT Reference Set · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html">ValueSet with SNOMED CT Reference Set</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="210819033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/210819033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#210819033">(Sep 22 2020 at 01:04)</a>:</h4>
<p>Just checking: What would a SNOMED CT reference set reference in a FHIR ValueSet look like? Suppose:</p>
<p><code>SNOMED CT: ^42931000146101| Dutch non-drug allergen simple reference set (foundation metadata concept)|</code></p>
<p>Would that look like this?</p>
<div class="codehilite"><pre><span></span><code>    <span class="nt">&lt;compose&gt;</span>
        <span class="nt">&lt;include&gt;</span>
            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://snomed.info/sct&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;filter&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">value=</span><span class="s">&quot;concept&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;op</span> <span class="na">value=</span><span class="s">&quot;in&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">&quot;42931000146101&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/filter&gt;</span>
        <span class="nt">&lt;/include&gt;</span>
    <span class="nt">&lt;/compose&gt;</span>
</code></pre></div>



<a name="210819613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/210819613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Liam Barnes <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#210819613">(Sep 22 2020 at 01:15)</a>:</h4>
<p>That looks good to me. Alternatively you could also do </p>
<div class="codehilite"><pre><span></span><code>   <span class="nt">&lt;compose&gt;</span>
        <span class="nt">&lt;include&gt;</span>
            <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://snomed.info/sct&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;filter&gt;</span>
                <span class="nt">&lt;property</span> <span class="na">value=</span><span class="s">&quot;constraint&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;op</span> <span class="na">value=</span><span class="s">&quot;=&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">&quot;^42931000146101| Dutch non-drug allergen simple reference set (foundation metadata concept)|&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/filter&gt;</span>
        <span class="nt">&lt;/include&gt;</span>
    <span class="nt">&lt;/compose&gt;</span>
</code></pre></div>



<a name="210822939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/210822939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#210822939">(Sep 22 2020 at 02:32)</a>:</h4>
<p>Thanks! The alternative looks too SNOMED-dy to me. Harder to parse for multi purpose parsers</p>



<a name="210933526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/210933526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#210933526">(Sep 22 2020 at 21:28)</a>:</h4>
<p>Beware - the <code>in</code> operator for CodeSystems other than SNOMED treats the value as a comma-separated list of codes, so the semantics is different.  Either way you need a SNOMED-aware Terminology Server</p>



<a name="211061303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211061303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211061303">(Sep 23 2020 at 20:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191375">@Alexander Henket</span>,  <span class="user-mention" data-user-id="191343">@Michael Lawley</span>'s concerns are actually understated if my understanding is correct. The REQUIRED binding in compose to the <a href="http://build.fhir.org/valueset-filter-operator.html">FilterOperator</a> value set means that <a href="http://build.fhir.org/codesystem-filter-operator.html#filter-operator-in">in</a> is "In set" meaning The specified property of the code is in the set of codes or concepts specified in the provided value (comma separated list). So a comma separated list is expected. I think SNOMED has bent that if it uses "in" to mean something different, like "there are a set of codes in a refset identified by this ID." I suggest we make it more clear that whatever operator is best, it is clearly only understood in the context of SNOMED CT. Perhaps a better approach would be to reference the refset as a value set to be used as the source membership of the new value set. We'd do that by using the refset id in a url that identifies the refset directly. I'd assume there is already a standard SNOMED-defined way that constructs a refset url?</p>



<a name="211068054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211068054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211068054">(Sep 23 2020 at 22:06)</a>:</h4>
<p>I really want one syntax to rule them all if possible so no syntax switching based on target codesystem. You are right that the use of "in" for SNOMED seems different than for other systems. That could/should be addressed. Preferably in a way that does not require supporting ECL or similar</p>



<a name="211077056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211077056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211077056">(Sep 24 2020 at 00:14)</a>:</h4>
<p>yes, well, the fault here is mine. The canonical definition of how to do this in Snomed CT is on this page: <a href="http://hl7.org/fhir/snomedct.html#implicit">http://hl7.org/fhir/snomedct.html#implicit</a>, and it is:</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code><span class="nt">&lt;ValueSet</span> <span class="na">xmlns=</span><span class="s">"http://hl7.org/fhir"</span><span class="nt">&gt;</span>
  ...
  <span class="nt">&lt;compose&gt;</span>
    <span class="nt">&lt;include&gt;</span>
      <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://snomed.info/sct"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">value=</span><span class="s">"concept"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;op</span> <span class="na">value=</span><span class="s">"in"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"[sctid]"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/filter&gt;</span>
    <span class="nt">&lt;/include&gt;</span>
  <span class="nt">&lt;/compose&gt;</span>
<span class="nt">&lt;/ValueSet&gt;</span>
</code></pre></div>



<a name="211077230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211077230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211077230">(Sep 24 2020 at 00:17)</a>:</h4>
<p>However as <span class="user-mention" data-user-id="191503">@Robert McClure</span> right points out, that you can do this isn't clear from the definition of <code>in</code>:</p>
<blockquote>
<p>The specified property of the code is in the set of codes or concepts specified in the provided value (comma separated list).</p>
</blockquote>
<p>What's not clear - but I certainly always intended to mean - is that 'in' is semantic, not syntactical. So a concept is "in" a the property if the property value is a reference to a reference set. </p>
<p>This is not SNOMED CT specific - at least the definition is not. The instantiation of it in SCT is SCT specific</p>



<a name="211077333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211077333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211077333">(Sep 24 2020 at 00:19)</a>:</h4>
<p>So is this just about wordsmithing something, or is there more to it?</p>



<a name="211077370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211077370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211077370">(Sep 24 2020 at 00:19)</a>:</h4>
<p>I think it's about word smithing.</p>



<a name="211077443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211077443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211077443">(Sep 24 2020 at 00:20)</a>:</h4>
<p>(good) ... I thought it was a nice and concise expression as it was. With a little word smithing it could be even better</p>



<a name="211077478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211077478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211077478">(Sep 24 2020 at 00:21)</a>:</h4>
<p>Need a ticket? I'll create one after some sleep tomorrow if needed</p>



<a name="211080066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211080066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211080066">(Sep 24 2020 at 01:06)</a>:</h4>
<p>So, it's really about how you interpret the provided value, and that is CodeSystem-specific?<br>
I don't think this helps <span class="user-mention" data-user-id="191375">@Alexander Henket</span> desire for a common semantic across code systems (if I'm understanding correctly)</p>



<a name="211080197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211080197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211080197">(Sep 24 2020 at 01:09)</a>:</h4>
<p>Following <span class="user-mention" data-user-id="191503">@Robert McClure</span> 's idea, there is a ValueSet URI for every Reference Set, so you could do <code>compose.include.valueSet=[URI]</code> where the URI is <code>http://snomed.info/sct?fhir_vs=refset/42931000146101</code></p>



<a name="211112115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211112115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211112115">(Sep 24 2020 at 10:19)</a>:</h4>
<p>Does that work for extension ref sets? We have a growing number of those in NL. Are those hosted centrally too?</p>



<a name="211112537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211112537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211112537">(Sep 24 2020 at 10:25)</a>:</h4>
<blockquote>
<p>So, it's really about how you interpret the provided value, and that is CodeSystem-specific?</p>
</blockquote>
<p>Yes that remains unless the word smithing leads to a consistent picture again. For SNOMED the conceptId is a refset/valueset, for other systems it is just a code.</p>
<p>Why do you even need "in [code, code, code]" for anything when you could just include the codes separately? is</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code>  <span class="nt">&lt;compose&gt;</span>
    <span class="nt">&lt;include&gt;</span>
      <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://example.org"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">value=</span><span class="s">"concept"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;op</span> <span class="na">value=</span><span class="s">"in"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"1234,5678"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/filter&gt;</span>
    <span class="nt">&lt;/include&gt;</span>
  <span class="nt">&lt;/compose&gt;</span>
</code></pre></div>

<p>Not equivalent to:</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code>  <span class="nt">&lt;compose&gt;</span>
    <span class="nt">&lt;include&gt;</span>
      <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://example.org"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;concept&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"1234"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"display"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/concept&gt;</span>
      <span class="nt">&lt;concept&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">"5678"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;display</span> <span class="na">value=</span><span class="s">"display"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/concept&gt;</span>
    <span class="nt">&lt;/include&gt;</span>
  <span class="nt">&lt;/compose&gt;</span>
</code></pre></div>



<a name="211141535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211141535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211141535">(Sep 24 2020 at 14:45)</a>:</h4>
<blockquote>
<p>for other systems it is just a code</p>
</blockquote>
<p>That's not what I said</p>



<a name="211141705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211141705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211141705">(Sep 24 2020 at 14:46)</a>:</h4>
<p>yes, you could do in by repeating equals. sure. And when you have 2-3 codes, neither here nor there. It starts to be different on bulk</p>



<a name="211141825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211141825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211141825">(Sep 24 2020 at 14:47)</a>:</h4>
<p>btw, LOINC, "in" when pointing to a code in the multi-axial heirarchy has the same meaning as snomed</p>



<a name="211154333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211154333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211154333">(Sep 24 2020 at 16:14)</a>:</h4>
<p>Happy to file the ticket still, but although I think we agreed that word smithing could be in order, I'm a little unsure of what to ask for exactly.</p>



<a name="211154469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211154469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211154469">(Sep 24 2020 at 16:15)</a>:</h4>
<p>ask for the wording to be improved  and reference this thread in Zulip</p>



<a name="211156163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211156163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211156163">(Sep 24 2020 at 16:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191375">@Alexander Henket</span> </p>
<blockquote>
<p>Does that work for extension ref sets? We have a growing number of those in NL. Are those hosted centrally too?</p>
</blockquote>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> Should answer that one too but I'd assume it does as long as you specify the correct version (the edition with the extension I'd assume) in the version element for that compose (or specific part of the compose.) Do others agree?</p>



<a name="211156260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211156260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211156260">(Sep 24 2020 at 16:29)</a>:</h4>
<p>yes. it works for extension refsets (though the server needs to know them)</p>



<a name="211157072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211157072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211157072">(Sep 24 2020 at 16:35)</a>:</h4>
<p>Maybe my assumption was wrong: you don't actually go to <a href="http://snomed.info/sct?fhir_vs=refset/42931000146101">http://snomed.info/sct?fhir_vs=refset/42931000146101</a>, but rather disect that and lookup the refset in whatever way was implemented at that server?</p>



<a name="211157116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211157116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211157116">(Sep 24 2020 at 16:35)</a>:</h4>
<p>In any case: <a href="http://snomed.info/sct?fhir_vs=refset/42931000146101">http://snomed.info/sct?fhir_vs=refset/42931000146101</a> does not lead to anything by itself</p>



<a name="211157684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211157684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211157684">(Sep 24 2020 at 16:40)</a>:</h4>
<p>it's a canonical URL, not a literal web reference. All the value set URIs work like that</p>



<a name="211159799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211159799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211159799">(Sep 24 2020 at 16:56)</a>:</h4>
<p>Right my mistake. It looked so very much like something that resolves... wishful thinking on my behalf.</p>
<p>In any case, <a href="https://www.hl7.org/fhir/snomedct.html#implicit">looking at the spec</a> it seems there almost always multiple of ways to do the same thing basically. Implicit value set versus filter on is-a is one of those too.</p>
<p>Were those specification alternatives born out of necessity?</p>



<a name="211160883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211160883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211160883">(Sep 24 2020 at 17:05)</a>:</h4>
<p>implicit value sets are extremely useful. Very very useful indeed.</p>



<a name="211160975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211160975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211160975">(Sep 24 2020 at 17:06)</a>:</h4>
<p>but they're not a different way to do the same thing - they are explicitly built on the same approach</p>



<a name="211339395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211339395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211339395">(Sep 26 2020 at 03:21)</a>:</h4>
<p>In all cases, the <code>url</code> parameter to <code>$expand</code> is a URI (Identifier) and not an URL (Location) -- you do not resolve it as a URL to find a ValueSet definition.<br>
For resolving SNOMED reference sets, it is of course up to the terminology server to support.  Without an explicit reference to a version of SNOMED, servers will use a default version (often in combination with a default Edition, commonly the International Edition, but alternatively the local Edition - eg AU or NL or ...).<br>
It is also valid to include the Edition or Version in the implicit ValueSet URI -- <a href="http://snomed.info/sct/11000146104?fhir_vs=refset/42931000146101">http://snomed.info/sct/11000146104?fhir_vs=refset/42931000146101</a> or <a href="http://snomed.info/sct/11000146104/version/20200331?fhir_vs=refset/42931000146101">http://snomed.info/sct/11000146104/version/20200331?fhir_vs=refset/42931000146101</a> for example</p>



<a name="211339549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211339549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211339549">(Sep 26 2020 at 03:24)</a>:</h4>
<p>Implicit ValueSets have a number of core benefits:</p>
<ul>
<li>you don't need to pre-define a ValueSet to use it</li>
<li>the URI is a very compact representation and you can easily generate the URIs dynamically</li>
<li>you can use GET requests for the $expand, which are cacheable (the alternative of POSTing a dynamically generated explicit ValueSet is not)</li>
</ul>



<a name="211339782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211339782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211339782">(Sep 26 2020 at 03:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> can you elaborate on the meaning of</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code>  <span class="nt">&lt;compose&gt;</span>
    <span class="nt">&lt;include&gt;</span>
      <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">"http://loinc.org"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">value=</span><span class="s">"concept"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;op</span> <span class="na">value=</span><span class="s">"in"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"[partcode]"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/filter&gt;</span>
    <span class="nt">&lt;/include&gt;</span>
  <span class="nt">&lt;/compose&gt;</span>
</code></pre></div>

<p>My reading of <a href="http://build.fhir.org/loinc.html#4.3.3.9.3">http://build.fhir.org/loinc.html#4.3.3.9.3</a> (even though it references only <code>parent</code> and <code>ancestor</code>) suggests that <code>in</code> should be used only when multiple comma-separated codes are provided and the semantics is "equals any".  This seems far removed from the SNOMED reference set semantics where the semantics is (roughly) 'belongs to any of the indirectly referenced code sets identified by the supplied code'.</p>



<a name="211559191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/211559191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#211559191">(Sep 28 2020 at 22:35)</a>:</h4>
<blockquote>
<p>My reading of <a href="http://build.fhir.org/loinc.html#4.3.3.9.3">http://build.fhir.org/loinc.html#4.3.3.9.3</a> (even though it references only parent and ancestor) suggests that in should be used only when multiple comma-separated codes are provided</p>
</blockquote>
<p>I think you're reading it wrong. comma separated <em>part codes</em>. not comma separated codes.</p>



<a name="212260508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/ValueSet%20with%20SNOMED%20CT%20Reference%20Set/near/212260508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/ValueSet.20with.20SNOMED.20CT.20Reference.20Set.html#212260508">(Oct 05 2020 at 05:34)</a>:</h4>
<p>Sure, part codes, but you haven't explained the meaning of the compose fragment above, and what I'm trying to establish is that for a filter like:</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code><span class="nt">&lt;filter&gt;</span>
        <span class="nt">&lt;property</span> <span class="na">value=</span><span class="s">"concept"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;op</span> <span class="na">value=</span><span class="s">"in"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">"[code]"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/filter&gt;</span>
</code></pre></div>

<p>has different interpretations depending on whether the <code>system</code> is <code>http://snomed.info/sct</code> or not</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
