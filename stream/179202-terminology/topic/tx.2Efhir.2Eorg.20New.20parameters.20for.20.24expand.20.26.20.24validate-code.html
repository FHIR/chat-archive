---
layout: page
title: "FHIR Chat  · tx.fhir.org New parameters for $expand &amp; $validate-code · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html">tx.fhir.org New parameters for $expand &amp; $validate-code</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="206876379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206876379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206876379">(Aug 13 2020 at 21:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> and other terminology server authors</p>
<p>I'm just finishing adding a new feature to <a href="http://tx.fhir.org">tx.fhir.org</a> $expand and $validate operations. The feature is driven by errors and performance challenges producing implementation guides. I'm adding 2 new parameters to both operations:</p>
<ul>
<li><strong>tx-resource</strong>: This is a parameter in a POSTed Parameters resource that carries additional resources that will be needed by the server to perform the expansion or code validation. A typical use of this is when the client has a value set that it is passing by value (e.g. the whole value set) and that value set imports another valueset that the client has (and it is not confident that the server, or has the correct version). The server needs to include these resources in it's resolution space for the passed value set. tx resources can also include code systems that are known to the client. (Note that the server can choose to ignore these and return errors anyway)</li>
</ul>
<p>The upshot of adding this is to fix various corner case problems to IG publisher expansion and code validation. But also, to increase the size of the calls to the terminology server. In one case I found, the call to the $validate-code operation was passing about 5MB of value set resources (long enumerations) and making about 1000 calls of the duration of the IG publication, and getting about 800b back each time. And it was about 60b that was different in each call</p>
<p>So this leads to the second parameter:</p>
<ul>
<li><strong>cache-id</strong>: the client passes this parameter with a unique value (I'm using a UUID) for the run. The client only needs to pass resources in tx-resource, a value set inline by value, once during a session for the cache-id. The server remembers previously passed resources, and automatically brings them into scope when new calls are made for the same cache-id. Clients keep track of what they have sent to server previously, and only refer to the content by canonical URL (either {url}. {url} and {version} or {url|version}.  The server retains the cache for x mins after last use (30 mins on <a href="http://tx.fhir.org">tx.fhir.org</a> ). Once they are out of scope, clients will start getting errors as if they hadn't passed the content. </li>
</ul>
<p>The FHIR validator and the IG publisher both now use this technique, but only if they find the cache-id parameter declared in <a href="http://TerminologyCapabilities.expansion.parameter.name">TerminologyCapabilities.expansion.parameter.name</a> (or for R2|3, an "expansion.parameter' parameter in the parameters resource returned from the terminology metadata query response from the server)</p>



<a name="206877053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206877053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206877053">(Aug 13 2020 at 22:01)</a>:</h4>
<p>Yes, this sounds good to me.  It may be pretty specific to the IG publication process and other servers may not need it (unless they are functioning as alternate build servers)?  Not sure what your thought is on that.</p>



<a name="206877147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206877147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206877147">(Aug 13 2020 at 22:02)</a>:</h4>
<p>I think that both issues are not specific to IGs, they are generic to using a terminology server, though they may not arise in many contexts</p>



<a name="206877173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206877173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206877173">(Aug 13 2020 at 22:02)</a>:</h4>
<p>Yes, I would agree with that.</p>



<a name="206877191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206877191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206877191">(Aug 13 2020 at 22:03)</a>:</h4>
<p>We need to update the spec for this?</p>



<a name="206877208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206877208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206877208">(Aug 13 2020 at 22:03)</a>:</h4>
<p>I think in time, yes</p>



<a name="206877235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206877235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206877235">(Aug 13 2020 at 22:03)</a>:</h4>
<p>in time = R5, presumably?</p>



<a name="206877296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206877296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206877296">(Aug 13 2020 at 22:04)</a>:</h4>
<p>yes in that time, but I think we want to get experience with this before updating the spec</p>



<a name="206877661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206877661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206877661">(Aug 13 2020 at 22:08)</a>:</h4>
<p>btw, the other change I've made is that the IG publisher is making heavy use of batch validation now - using the batch API).</p>



<a name="206880789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206880789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206880789">(Aug 13 2020 at 22:50)</a>:</h4>
<p>It's going to take me some time to digest the above proposal.  But, it has always struck me as unusual that <code>$validate-code</code> does not support taking multiple Codings / CodeableConcepts as input.</p>



<a name="206880841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206880841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206880841">(Aug 13 2020 at 22:51)</a>:</h4>
<p>I'm amenable to thinking about that. Would reduce the importance of these other changes but not remove the need for them</p>



<a name="206882461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206882461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206882461">(Aug 13 2020 at 23:10)</a>:</h4>
<p>btw, <a href="http://tx.fhir.org">tx.fhir.org</a> is averaging 5 requests/sec at the moment</p>



<a name="206884696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206884696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206884696">(Aug 13 2020 at 23:45)</a>:</h4>
<p>Doesn't sound too bad?</p>



<a name="206884854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206884854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206884854">(Aug 13 2020 at 23:47)</a>:</h4>
<p>no. it's creeping up. And there's bursts of 10-15/sec when multiple test runs are happening during the validator build process</p>



<a name="206884906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206884906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206884906">(Aug 13 2020 at 23:48)</a>:</h4>
<p>I may have to upgrade the server soon</p>



<a name="206885156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206885156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206885156">(Aug 13 2020 at 23:52)</a>:</h4>
<p>Are these mostly $validate-code calls?</p>



<a name="206885783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206885783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206885783">(Aug 14 2020 at 00:00)</a>:</h4>
<p>yes.</p>



<a name="206885831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206885831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206885831">(Aug 14 2020 at 00:01)</a>:</h4>
<p>though the unit testing / ig publish has focus on expand so that might be higher than normal usage</p>



<a name="206886400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206886400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206886400">(Aug 14 2020 at 00:10)</a>:</h4>
<p>Our r4 server was seeing 300-700 calls / minute overnight (which would be ~5-10/sec).<br>
Sadly most were fails -- $validate-code without a system parameter (which I understand to be an issue with HAPI)</p>



<a name="206888367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206888367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206888367">(Aug 14 2020 at 00:49)</a>:</h4>
<p>If the FHIR Validator and the IG Publisher now use the TerminologyCapabilities Resource, shouldn't the FMM Level of that Resource be raised from 0 to at least 1?</p>



<a name="206888427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206888427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206888427">(Aug 14 2020 at 00:50)</a>:</h4>
<p>yes it should be.</p>



<a name="206888431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206888431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206888431">(Aug 14 2020 at 00:50)</a>:</h4>
<p>but it's not new; I've been using it since it was first defined</p>



<a name="206888442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206888442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206888442">(Aug 14 2020 at 00:51)</a>:</h4>
<p>though my use is pretty selective in terms of elements right now</p>



<a name="206888633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206888633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206888633">(Aug 14 2020 at 00:54)</a>:</h4>
<p>I've also implemented it since it was first defined and I believe that Michael also has a test implementation.</p>



<a name="206896064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206896064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206896064">(Aug 14 2020 at 03:52)</a>:</h4>
<p>Based on my implementation &amp; Grahame's, I'm not sure the breadth of our use is very significant.<br>
Also, I would suggest that merely publishing instances of a Resource doesn't really constitute "use" -- you need clients to be consuming the Resource, and the only one I know of is the IG Publisher</p>



<a name="206896517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206896517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206896517">(Aug 14 2020 at 04:06)</a>:</h4>
<p>and the validator. And that's enough evidence to go from 0 to 1</p>



<a name="206896520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206896520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206896520">(Aug 14 2020 at 04:06)</a>:</h4>
<p>though no further</p>



<a name="206923801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/206923801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#206923801">(Aug 14 2020 at 12:27)</a>:</h4>
<p>I can update it along with some of the other changes that need to be applied.</p>



<a name="208023878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/208023878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#208023878">(Aug 25 2020 at 21:09)</a>:</h4>
<p>Been giving this a little thought.  Is there a reason why you couldn't batch up all the calls into a single request.  Then you could POST a Bundle with the requisite tx-resources as simple contained resources, and all of the $expand / $validate operations go in the batch Bundle which itself encapsulates the "lifespan" of the tx resources.</p>



<a name="208025701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/208025701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#208025701">(Aug 25 2020 at 21:24)</a>:</h4>
<p>yes lots of reasons</p>



<a name="208026157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/208026157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#208026157">(Aug 25 2020 at 21:27)</a>:</h4>
<ul>
<li>I'm validating multiple different resources - sometimes hundreds / thousands, which may contain that amount of codes (or more). I don't want to validate all that in a single hit (especially since the conditions of validation differ between resources e.g. language)</li>
<li>Enough of the validation logic depends on the outcome of code validation (particularly slices) that I can't defer the validation logic into a batch. It's on my todo list to lazy validate anything that can deferred until I hit something I need to wait for but that's a signficant step up in complexity right now, so it hasn't happened yet (particularly because it actually makes the validator slower for any of the validation handled by the internal mini-terminology server)</li>
<li>I am already batching what I can</li>
</ul>



<a name="208032732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/208032732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#208032732">(Aug 25 2020 at 22:35)</a>:</h4>
<p>I wondered about the validation logic...that did seem to be a possible key issue.<br>
Another alternative is to just PUT/POST the resources to the server at the beginning and then clean them up at the end.</p>



<a name="208040215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/208040215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#208040215">(Aug 26 2020 at 00:16)</a>:</h4>
<p>I might be building different versions simultaineously</p>



<a name="208044023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/208044023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#208044023">(Aug 26 2020 at 01:24)</a>:</h4>
<p>So you need some kind of scoping mechanism... (if the Tx resources have business versions, then that could help).<br>
Or...generalise to the idea of creating a (transient) Scope that can be explicitly disposed or garbage collected.  [thinking aloud here]</p>



<a name="208049836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/208049836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#208049836">(Aug 26 2020 at 03:32)</a>:</h4>
<p>that's what this is - a transient scope</p>



<a name="208380799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/208380799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carmela Couderc <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#208380799">(Aug 28 2020 at 18:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> Please enter a JIRA to track the maturity level change - this Zulip thread might not be remembered in the future. Thanks.</p>



<a name="208381699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/208381699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#208381699">(Aug 28 2020 at 18:53)</a>:</h4>
<p><span class="user-mention" data-user-id="192130">@Carmela Couderc</span> I did that when I made the updates for the Connectathon build - <a href="http://jira.hl7.org/browse/FHIR-28296">J#28296</a>.</p>



<a name="209598805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/209598805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#209598805">(Sep 10 2020 at 06:01)</a>:</h4>
<p>Does it then make sense to generalise this notion of a named transient scope across all $operations and not just $expand and $validate-code?<br>
Perhaps <code>$begin-scope</code> and <code>$end-scope</code> operations, where <code>$begin-scope</code> takes a <code>Bundle</code> and returns a scope-id?  Then pass an <code>_scope=[scope-id]</code> parameter to other operations?</p>



<a name="209600809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/209600809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#209600809">(Sep 10 2020 at 06:41)</a>:</h4>
<p>.. I don't know</p>



<a name="209607616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/tx.fhir.org%20New%20parameters%20for%20%24expand%20%26%20%24validate-code/near/209607616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> François Macary <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/tx.2Efhir.2Eorg.20New.20parameters.20for.20.24expand.20.26.20.24validate-code.html#209607616">(Sep 10 2020 at 08:14)</a>:</h4>
<p>FYI: Phast's terminology server has also implemented TerminologyCapabilities.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
