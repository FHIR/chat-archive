---
layout: page
title: "FHIR Chat  · CodeSystem filter with &gt; 1 parameter · terminology"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/index.html">terminology</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html">CodeSystem filter with &gt; 1 parameter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153937504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153937504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153937504">(Feb 14 2018 at 23:35)</a>:</h4>
<p>We have a CodeSystem filter that we want to support but it takes 2 parameters (actually, the second is optional).  They are both of the same type (URI), but both CodeSystem and ValueSet only allow a single parameter value for a filter.  Any suggestions on how to handle this?</p>



<a name="153937505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153937505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153937505">(Feb 14 2018 at 23:41)</a>:</h4>
<p>can you provide a concrete example?</p>



<a name="153937506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153937506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153937506">(Feb 14 2018 at 23:57)</a>:</h4>
<p>The actual filter is complex to describe, so as an example, let's consider a filter called <code>difference(ValueSetA, ValueSetB)</code> (in this case the 2nd parameter is not optional, but order is important).<br>
The I want to be able to define a ValueSet with <code>difference("http://example.com/myvaluesetA", "http://example.com/myvaluesetB")</code>:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="err">//</span> <span class="err">...</span>
  <span class="nt">&quot;compose&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;include&quot;</span><span class="p">:</span> <span class="p">[{</span>
      <span class="nt">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;http://snomed.info/sct&quot;</span><span class="p">,</span>
      <span class="nt">&quot;filter&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="nt">&quot;property&quot;</span><span class="p">:</span> <span class="s2">&quot;difference&quot;</span><span class="p">,</span>
        <span class="nt">&quot;op&quot;</span><span class="p">:</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span>
        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;http://example.com/myvaluesetA&quot;</span><span class="p">,</span>
        <span class="err">//</span> <span class="err">HELP!</span>
      <span class="p">}]</span>
    <span class="p">}]</span>
  <span class="p">}</span>
  <span class="err">//</span> <span class="err">...</span>
<span class="p">}</span>
</pre></div>


<p>As an aside, I've just noticed that the type of <code>filter.value</code> is <code>code</code> which seems "wrong" given that it is documented as being a code, a string, or a boolean, and should really be at least that set of valid things for a CodeSystem property (code | Coding | string | integer | boolean | dateTime and soon decimal).</p>



<a name="153937518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153937518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153937518">(Feb 15 2018 at 01:02)</a>:</h4>
<p>should be simply string, I think. In this particular case</p>



<a name="153937520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153937520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153937520">(Feb 15 2018 at 01:03)</a>:</h4>
<p>is this snomed specific thing? not done using snomed expression language?</p>



<a name="153937623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153937623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153937623">(Feb 15 2018 at 06:14)</a>:</h4>
<p>It's not snomed specific, no.  The problem is I need to provide two input values</p>



<a name="153937626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153937626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153937626">(Feb 15 2018 at 06:31)</a>:</h4>
<p>I think you'll need an extension</p>



<a name="153937628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153937628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153937628">(Feb 15 2018 at 06:35)</a>:</h4>
<p>I was thinking more of adopting a convention where I have one property name called "foo" and the other (optional one) called "foo.bar".  It will be an error to provide "foo.bar" without also providing "foo"</p>



<a name="153937629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153937629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153937629">(Feb 15 2018 at 06:36)</a>:</h4>
<p>I'm not sure what you mean</p>



<a name="153937871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153937871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153937871">(Feb 15 2018 at 19:22)</a>:</h4>
<p>I think I get what Michael means.  You create two separate filters, but internally there is a dependency between them which will result in an error unless you satisfy it (i.e. you can't have 'foo.bar' unless you also have 'foo').  In the 'include' in the value set definition you would specify both filters, and both properties and values would be used together in determining the expansion.  But in looking at Michael's example, I believe you could obtain the same result for "difference" by using an 'include' for myvaluesetA and an 'exclude' for myvaluesetB?</p>



<a name="153937873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153937873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153937873">(Feb 15 2018 at 19:35)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=15557" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=15557">GF#15557</a> for changing the data type to string</p>



<a name="153938327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179202-terminology/topic/CodeSystem%20filter%20with%20%3E%201%20parameter/near/153938327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179202-terminology/topic/CodeSystem.20filter.20with.20.3E.201.20parameter.html#153938327">(Feb 17 2018 at 07:19)</a>:</h4>
<p>That's exactly right <span class="user-mention" data-user-id="191405">@Rob Hausam</span> .  I was only using "difference" as an example because the the actual filter we have is as-yet un-named (we have an interim name for it, but it is not accurate)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
