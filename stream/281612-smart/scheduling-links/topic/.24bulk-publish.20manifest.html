---
layout: page
title: "FHIR Chat  · $bulk-publish manifest · smart/scheduling-links"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/index.html">smart/scheduling-links</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html">$bulk-publish manifest</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="232486325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/232486325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#232486325">(Mar 30 2021 at 19:49)</a>:</h4>
<p><span class="user-mention" data-user-id="218703">@Nick Robison</span> thanks for this demo! Re: URLs. I think we've assumed full URLs rather than relative for the <code>output.url</code> links.</p>



<a name="232488475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/232488475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Robison <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#232488475">(Mar 30 2021 at 20:03)</a>:</h4>
<p>Definitely! I just cheated so I didn't have to add a config parameter.</p>



<a name="233263947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/233263947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#233263947">(Apr 06 2021 at 04:05)</a>:</h4>
<p>FWIW our bulk data client assumes absolute urls in the manifest, so we had to do a little workaround here for <span class="user-mention" data-user-id="218703">@Nick Robison</span>'s publisher service in <a href="https://github.com/nickrobison-usds/vaccine-scheduler">nickrobison-usds/vaccine-scheduler</a> (assuming that's what you are referring to).  Can we get that requirement added to the bulk spec if that is the intent (I can't seem to find it)?  Or should we make our client more flexible?</p>



<a name="233264205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/233264205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#233264205">(Apr 06 2021 at 04:09)</a>:</h4>
<p>Only other issue we have had so far was that service rejects requests with the "Accept: application/fhir+ndjson" header.</p>



<a name="233306697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/233306697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Robison <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#233306697">(Apr 06 2021 at 12:06)</a>:</h4>
<p>Yikes! That’s not good. The publisher is mostly there for testing, but I can push up a couple of quick fixes. The relative URLs was a hack, I have a ticket to make them full URLs.</p>



<a name="233342173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/233342173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Robison <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#233342173">(Apr 06 2021 at 15:38)</a>:</h4>
<p><span class="user-mention" data-user-id="192576">@Robert Scanlon</span> Both issues have been 'fixed' and the changes merged into mainline, let me know if you run into any other issues.</p>



<a name="233372092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/233372092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#233372092">(Apr 06 2021 at 19:07)</a>:</h4>
<p>When running using docker-compose and accessed via <a href="http://localhost:9090/$bulk-publish">http://localhost:9090/$bulk-publish</a>, I'm getting URLs pointing to a hostname only accessible by other containers in that docker-compose group (<a href="http://publisher:9090/data/test-slot.ndjson">http://publisher:9090/data/test-slot.ndjson</a>).  So unfortunately your fix doesn't seem to work in that environment (unless there is something I'm missing).</p>



<a name="233372442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/233372442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#233372442">(Apr 06 2021 at 19:09)</a>:</h4>
<p>We generally have our apps be able to accept a host name as a config variable (through the environment often), to work around this issue using docker-compose. Though perhaps there is a more elegant solution.</p>



<a name="233374971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/233374971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#233374971">(Apr 06 2021 at 19:29)</a>:</h4>
<p>(I generallly do the same <span class="user-mention" data-user-id="192576">@Robert Scanlon</span>; if anybody has a better pattern I'd be keen to know it.)</p>



<a name="233377328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/233377328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#233377328">(Apr 06 2021 at 19:46)</a>:</h4>
<p>We use that pattern too, both for SMART Scheduling links and the normal REST API (due to fullUrl in searchset bundles).  We have a config for the publicly facing absolute base path.  You probably want more than hostname so you can handle reverse proxies which usually have a path component.</p>



<a name="233379060"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/233379060" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#233379060">(Apr 06 2021 at 19:57)</a>:</h4>
<p>+5 on including path info if you want others to be able to reuse :)</p>



<a name="233380269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/%24bulk-publish%20manifest/near/233380269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Robison <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/.24bulk-publish.20manifest.html#233380269">(Apr 06 2021 at 20:05)</a>:</h4>
<p>Fortunately, the config does exist, it's just not documented <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span>.</p>
<p>When docker compose runs, it starts the services with the <code>dockerized</code> profile, which means you can modify the <code>publisher.base-url</code> property in the <code>application-dockerized.yml</code> file.</p>
<p>Link here: <a href="https://github.com/nickrobison-usds/vaccine-scheduler/blob/main/publisher-application/src/main/resources/application-dockerized.yml">https://github.com/nickrobison-usds/vaccine-scheduler/blob/main/publisher-application/src/main/resources/application-dockerized.yml</a></p>
<p>I need to update the README to include some additional runtime configuration.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
