---
layout: page
title: "FHIR Chat  · Consumer: USDS · smart/scheduling-links"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/index.html">smart/scheduling-links</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html">Consumer: USDS</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="234178817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234178817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234178817">(Apr 12 2021 at 15:22)</a>:</h4>
<p><span class="user-mention" data-user-id="218703">@Nick Robison</span> I added a blank row for you in the <a href="https://docs.google.com/spreadsheets/d/1Fh0zwCjKYh4D-Mp1k5uxzINh6GG0yI1ezko49VaJV2c/edit#gid=0">sign-up spreadsheet</a> -- can you add some details for the tools you're building, and goals for this event?</p>



<a name="234377937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234377937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234377937">(Apr 13 2021 at 18:31)</a>:</h4>
<p><span class="user-mention" data-user-id="218703">@Nick Robison</span> as you are working on aggregation tools I wanted to bring up the technique from <a href="https://github.com/smart-on-fhir/smart-scheduling-links/issues/16#issuecomment-800283765">https://github.com/smart-on-fhir/smart-scheduling-links/issues/16#issuecomment-800283765</a> -- I think it would be good to include this kind of extension in any aggregated resources you are creating, so clients can tell how fresh or stale they might be. (This would effectively be a passthrough from the transaction time of the manifest files you consume, injected into each of the resources you create in your own server from those manifests.)</p>



<a name="234380522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234380522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Robison <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234380522">(Apr 13 2021 at 18:50)</a>:</h4>
<p>Great point! I've defined a custom extension for retaining the original resource ID, I can add one to stash the update times as well.</p>



<a name="234411587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234411587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Brackett <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234411587">(Apr 13 2021 at 22:27)</a>:</h4>
<p><span class="user-mention" data-user-id="218703">@Nick Robison</span> can you point to where you implemented that? Curious how you implemented the extension (e.g. what URL and value type) so I can do the same in APIs where I’m aggregating providers.</p>



<a name="234411640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234411640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Brackett <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234411640">(Apr 13 2021 at 22:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> any sense of whether there’s a good way to push along <a href="https://jira.hl7.org/plugins/servlet/mobile#issue/FHIR-31567">https://jira.hl7.org/plugins/servlet/mobile#issue/FHIR-31567</a></p>



<a name="234412815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234412815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234412815">(Apr 13 2021 at 22:39)</a>:</h4>
<p>You can do <code>FHIR-31567</code> from mobile BTW and get a better link (<a href="http://jira.hl7.org/browse/FHIR-31567">FHIR-31567</a>)</p>



<a name="234412845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234412845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234412845">(Apr 13 2021 at 22:39)</a>:</h4>
<p>I'll ask FHIR-I to take this up on our next call (<a class="stream" data-stream-id="179280" href="/#narrow/stream/179280-fhir.2Finfrastructure-wg">#fhir/infrastructure-wg</a>)</p>



<a name="234413037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234413037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Brackett <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234413037">(Apr 13 2021 at 22:41)</a>:</h4>
<p>Thanks!</p>



<a name="234670705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234670705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Robison <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234670705">(Apr 15 2021 at 13:04)</a>:</h4>
<p>Good morning folks! Apologies for the delayed response to this.</p>
<p><span class="user-mention" data-user-id="398591">@Rob Brackett</span> The code for handling upstream IDs is here: <a href="https://github.com/nickrobison-usds/vaccine-scheduler/blob/d1cb938f665949c6a6c93c5bc7c08f9e09c60751/api-application/src/main/java/gov/usds/vaccineschedule/api/db/models/LocationEntity.java#L201">https://github.com/nickrobison-usds/vaccine-scheduler/blob/d1cb938f665949c6a6c93c5bc7c08f9e09c60751/api-application/src/main/java/gov/usds/vaccineschedule/api/db/models/LocationEntity.java#L201</a></p>
<p>I've updated the code's handling of dates to match the discussion you and Josh have been having. Some details here: <a href="https://github.com/nickrobison-usds/vaccine-scheduler#resource-ids-and-timestamps">https://github.com/nickrobison-usds/vaccine-scheduler#resource-ids-and-timestamps</a></p>
<p>Basically, we're always using the <code>lastUpdated</code> value provided by the upstream (if one exists). We're also populating an additional extension <code>http://usds.gov/vaccine/currentAsOf</code> In the Meta component which indicates when the data was last refreshed on our end.</p>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> Happy to move the custom systems into a different namespace. E.g. does it make sense to have an original ID system in the SMART namespace, since it's applicable to pretty much all bulk FHIR implementations?</p>



<a name="234674776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234674776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234674776">(Apr 15 2021 at 13:30)</a>:</h4>
<p>That's awesome! Regarding the extension namespaces, I'd like to take these into fhir infrastructure workgroup Monday and see if we can get them standardized as core extensions.</p>



<a name="234774944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234774944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henry Wei <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234774944">(Apr 16 2021 at 00:14)</a>:</h4>
<p>USDS team: are you able to check / ask in-government if any of the FEMA Federally-Supported Community Vaccination Center providers may be showing up to the Connectathon (or their IT system providers)?  More detail here: <a href="https://www.fema.gov/disasters/coronavirus/vaccine-support/vaccine-center">https://www.fema.gov/disasters/coronavirus/vaccine-support/vaccine-center</a></p>
<p>Thank you!</p>



<a name="234869002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234869002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Brackett <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234869002">(Apr 16 2021 at 15:03)</a>:</h4>
<p><span class="user-mention" data-user-id="218703">@Nick Robison</span> thanks! (My turn for a slow reply.) I followed your lead on <code>currentAsOf</code> and used the same URL/system where we apply it on slots.</p>
<p>I’m doing upstream IDs a little different in our system, since we often wind up having many for a single location (e.g. vtrcks, NJ’s IIS, Walgreens Store #, external scraper like <a href="http://VaccineSpotter.org">VaccineSpotter.org</a>). For now I just set <code>https://fhir.usdigitalresponse.org/identifiers/&lt;SOURCE_NAME&gt;</code>, but wondering if there’s a better general rule we should use here.</p>
<p>On a related note, do you know if there are requirements around whether the <code>system</code> URL/URI needs to resolve (and to what)?</p>



<a name="234870355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234870355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234870355">(Apr 16 2021 at 15:09)</a>:</h4>
<p>There is no requirement for extension URLs to resolve, though it's definitely a good practice!</p>



<a name="234870392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234870392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234870392">(Apr 16 2021 at 15:09)</a>:</h4>
<p>(A good practice we're not adhering to in <a href="http://fhir-registry.smarthealthit.org">fhir-registry.smarthealthit.org</a> ;-))</p>



<a name="234870781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/234870781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#234870781">(Apr 16 2021 at 15:10)</a>:</h4>
<p>Incidentally even for a non-aggregation scenario I'm experimenting with extensions on the manifest file; not proposing anything at this stage, but just playing a bit. See <a href="https://raw.githubusercontent.com/jmandel/wba-appointment-fetch/gh-pages/$bulk-publish">https://raw.githubusercontent.com/jmandel/wba-appointment-fetch/gh-pages/$bulk-publish</a> where some files might be  older than others, based on underlying rate limiting</p>



<a name="235234812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/235234812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#235234812">(Apr 19 2021 at 19:24)</a>:</h4>
<p>OK, FHIR Infrastructure approved a <code>lastSourceSync</code> extension on Meta (though for some super obscure reasons, we can't technically vote on anything until next month).</p>



<a name="235235124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/235235124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#235235124">(Apr 19 2021 at 19:27)</a>:</h4>
<p><code>http://hl7.org/fhir/StructureDefinition/lastSourceSync</code></p>
<p>for use on Resource.meta.extension, with a <code>valueDateTime</code>. Example:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Slot"</span><span class="p">,</span>
  <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"123"</span><span class="p">,</span>
  <span class="nt">"meta"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"extension"</span><span class="p">:</span> <span class="p">[{</span>
      <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"http://hl7.org/fhir/StructureDefinition/lastSourceSync"</span><span class="p">,</span>
      <span class="nt">"valueDateTime"</span><span class="p">:</span> <span class="s2">"2021-04-19T20:35:05.000Z"</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<a name="235239175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/235239175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Brackett <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#235239175">(Apr 19 2021 at 19:58)</a>:</h4>
<p>Whoops, I didn’t see this before I went and commented on the <code>currentAsOf</code> thread, sorry! This is great! <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="235416658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/235416658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Brackett <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#235416658">(Apr 20 2021 at 21:08)</a>:</h4>
<p>(deleted)</p>



<a name="235418294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/281612-smart/scheduling-links/topic/Consumer%3A%20USDS/near/235418294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Brackett <a href="https://fhir.github.io/chat-archive/stream/281612-smart/scheduling-links/topic/Consumer.3A.20USDS.html#235418294">(Apr 20 2021 at 21:17)</a>:</h4>
<p>That was supposed to be in "Data Quality"</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
