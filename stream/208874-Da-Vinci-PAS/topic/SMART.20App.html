---
layout: page
title: "FHIR Chat  · SMART App · Da Vinci PAS"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/index.html">Da Vinci PAS</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html">SMART App</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="183190273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183190273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183190273">(Dec 11 2019 at 19:13)</a>:</h4>
<p>For questions/info on SMART App initiation, API access, related CDS Hooks, and what to receive back when authorized.</p>



<a name="183190423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183190423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183190423">(Dec 11 2019 at 19:14)</a>:</h4>
<p>When the SMART App receives the authorization token/number from the payer, the suggestion is to use DocumentReference for now to document that in the EHR.  We're looking whether there is a better alternative for HIMSS.</p>



<a name="183192316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183192316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Radov <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183192316">(Dec 11 2019 at 19:30)</a>:</h4>
<p>I missed some of that discussion so I'm not sure I understand. Are you saying the SMART App would perform a REST create interaction to write a new DocumentReference in the EHR? Is that functionality widely supported by other EHRs? Would we actually store the token as an element in the DocumentReference, or would it merely serve as a record that the token had been received?</p>



<a name="183192515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183192515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183192515">(Dec 11 2019 at 19:32)</a>:</h4>
<p>So far the suggestion is to provide the actual authorization token/number in DocumentReference.</p>



<a name="183192965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183192965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Radov <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183192965">(Dec 11 2019 at 19:36)</a>:</h4>
<blockquote>
<p>So far the suggestion is to provide the actual authorization token/number in DocumentReference.</p>
</blockquote>
<p>Would that token go in securityLabel, content, or some other element?</p>



<a name="183195307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183195307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183195307">(Dec 11 2019 at 19:59)</a>:</h4>
<p><span class="user-mention" data-user-id="220686">@Nick Radov</span> : content.  Some are talking about a form that includes it.</p>



<a name="183195415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183195415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183195415">(Dec 11 2019 at 20:00)</a>:</h4>
<p>This sounds quite contrived...</p>



<a name="183197376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183197376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183197376">(Dec 11 2019 at 20:18)</a>:</h4>
<p>not just 'quite contrived', but certainly NOT secure</p>



<a name="183204786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183204786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183204786">(Dec 11 2019 at 21:40)</a>:</h4>
<p>Alternative suggestion?  I can come up with some, but this is in context of HIMSS.</p>



<a name="183279618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183279618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183279618">(Dec 12 2019 at 17:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> : Can you clarify the security concern with DocRef using XHTML?<br>
<span class="user-mention" data-user-id="192685">@Vassil Peytchev</span> : ClaimResponse.preAuthRef with ClaimResponse.use=preauthorization and associated item(s) is appropriate, but not quite supported yet for HIMSS.</p>



<a name="183279994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183279994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183279994">(Dec 12 2019 at 17:09)</a>:</h4>
<p>I was referring to the point about putting a security token into a DocumentReference</p>



<a name="183280079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183280079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183280079">(Dec 12 2019 at 17:10)</a>:</h4>
<p>Placing a security token into any FHIR resource is a bad idea</p>



<a name="183280219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183280219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Radov <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183280219">(Dec 12 2019 at 17:12)</a>:</h4>
<blockquote>
<p>Placing a security token into any FHIR resource is a bad idea</p>
</blockquote>
<p>Could you expand on this? What type of potential vulnerabilities could it cause?</p>



<a name="183281145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183281145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183281145">(Dec 12 2019 at 17:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> : We were actually talking about the prior-authorization reference number/token, definitely NOT a security token....:)</p>



<a name="183281277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183281277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183281277">(Dec 12 2019 at 17:25)</a>:</h4>
<p>AH, well then please don't use "authorization token". I know that might be the way that it is refereed to, but that phrase is far more broadly (whole of IT Security across the globe and all verticals) as security token.</p>



<a name="183282920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/183282920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Buitendijk <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#183282920">(Dec 12 2019 at 17:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> I had used "authorization token/number".....:)</p>



<a name="245747695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245747695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gunjit Chhatwal <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245747695">(Jul 12 2021 at 20:58)</a>:</h4>
<p>PAS IG says "This will require that the provider system authenticates to the payer system or an intermediary. The specifics of how this authentication are covered is handled within the Da Vinci HRex Implementation guide". I am assuming this will not be launched in a patient context but will be a system-system kind of interaction. What type of grant type will be used for this exchange?</p>



<a name="245754232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245754232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245754232">(Jul 12 2021 at 21:42)</a>:</h4>
<p>I'd expect a system/system interaction would use <a href="https://hl7.org/fhir/uv/bulkdata/authorization/index.html">https://hl7.org/fhir/uv/bulkdata/authorization/index.html</a></p>



<a name="245771032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245771032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gunjit Chhatwal <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245771032">(Jul 13 2021 at 01:50)</a>:</h4>
<p>right. would that be true for autheticating systems launching SMART on FHIR apps from CRD cards as those are not member/patient initiated?</p>



<a name="245771116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245771116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245771116">(Jul 13 2021 at 01:52)</a>:</h4>
<p>If you are launching a user-facing app from a CDS Hooks card, that would typically use the SMART App Launch</p>



<a name="245772056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245772056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gunjit Chhatwal <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245772056">(Jul 13 2021 at 02:10)</a>:</h4>
<p>since the user in this scenario is a provider, would the payer system then authenticate the system as a whole (SMART backend services) or just the user initiating the request. I believe latter would not be possible as the payers wont have provider's user credentials.</p>



<a name="245772478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245772478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245772478">(Jul 13 2021 at 02:19)</a>:</h4>
<p>For the CDS Hooks API call, authentication would occur according to the CDS Hooks specification. This is essentially system level authentication where the client is the EHR and the server is the CDs provider. </p>
<p>For the app that gets launched from a CDS Hooks card, this would follow the SMART App Launch, where the EHR is the SMART server and the payer app is the client</p>



<a name="245774891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245774891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gunjit Chhatwal <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245774891">(Jul 13 2021 at 03:11)</a>:</h4>
<p>I understand that the CDS hook API call would use JWT as per the CDS hooks specification. However, i did not understand the second point where EHR is the smart server and payer app is the client. So, the provider user would be authenticated again the EHR server? How would the payer app know that the it is being launched securely?</p>



<a name="245775093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245775093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245775093">(Jul 13 2021 at 03:14)</a>:</h4>
<p>In SMART App Launch, the (payer) app connects directly to an SMART (EHR) server; at the first step of the process it learns the FHIR endpoint passed to the app via <code>iss</code> (generally the app maintains a list of configured FHIR endpoints where it's registered, and can check to make sure that the incoming value is on the list)</p>



<a name="245775510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245775510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gunjit Chhatwal <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245775510">(Jul 13 2021 at 03:24)</a>:</h4>
<p>Understood. so the onus of authenticating the provider using the payer app (shared via card) is on the EHR launching the app and not on the payer. payer just needs to ensure that the system launching the app is one that it recognizes. Thanks, again.</p>



<a name="245775718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245775718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245775718">(Jul 13 2021 at 03:29)</a>:</h4>
<p>Sure. And if the app wanted to authenticate the end user, it can lean on the EHR for this (by requesting <code>openid fhirUser</code> scopes).</p>



<a name="245776372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245776372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gunjit Chhatwal <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245776372">(Jul 13 2021 at 03:45)</a>:</h4>
<p>Although I dont see the need to genrate a token using SMART on FHIR launch flow since the EHR is already sharing the token that can be used by the payer app to retrieve required details (per CDS specifications).</p>



<a name="245825768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/208874-Da%20Vinci%20PAS/topic/SMART%20App/near/245825768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/208874-Da-Vinci-PAS/topic/SMART.20App.html#245825768">(Jul 13 2021 at 13:39)</a>:</h4>
<p>If the CDS token you're getting lasts long enough and you don't require a user authentication and you don't need any additional scopes, then you don't need to do a smart app launch. You can just link to an outside web page via CDS card. But using the smart app launch provides a consistent approach, making it less likely that you will inadvertently introduce mistakes into the flow --and allows you to take advantage of additional apis like smart web messaging for deeper interaction with the ehr.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
