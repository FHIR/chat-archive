---
layout: page
title: "FHIR Chat  · Multiple FHIR versions support on same datasource · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html">Multiple FHIR versions support on same datasource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="204083350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204083350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204083350">(Jul 16 2020 at 13:31)</a>:</h4>
<p>Hi, we are planning to setup STU3 and R4 FHIR versions on top of a single datasource? is that possible? Do we have to run two HAPI FHIR server instances for each version?</p>



<a name="204164460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204164460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204164460">(Jul 17 2020 at 02:05)</a>:</h4>
<p>Can someone guide me here? Can elastic search can be used as database for storing FHIR resources? We are looking for several options for implementing. I would like to understand the views from the community. Please help with your knowledge</p>



<a name="204174211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204174211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204174211">(Jul 17 2020 at 06:24)</a>:</h4>
<p><span class="user-mention" data-user-id="248168">@Keerthivasan Ramanathan</span> One suggestion is to understand the HAPI DB config. Try replicating the same.</p>



<a name="204197879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204197879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204197879">(Jul 17 2020 at 12:07)</a>:</h4>
<p>Hi Vibin, I just saw the db schema in the HAPI fhir documentation. I could understand that they store all the resources in a single table.</p>



<a name="204197962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204197962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204197962">(Jul 17 2020 at 12:08)</a>:</h4>
<p>Can a single HAPI FHIR server support multiple FHIR versions?</p>



<a name="204197992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204197992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204197992">(Jul 17 2020 at 12:08)</a>:</h4>
<p>Thanks Vibin for your response</p>



<a name="204637429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204637429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204637429">(Jul 22 2020 at 07:33)</a>:</h4>
<p>I understood that we have to stand up a separate hapi fhir jpa server for each version of FHIR. I have to support both STU3 and R4. What is the recommended approach? we cannot store in two different databases. I think running two instance of HAPI FHIR server on top of same data source should help. I would like to hear from the others.</p>



<a name="204640046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204640046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204640046">(Jul 22 2020 at 08:15)</a>:</h4>
<p>ping <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191319">@James Agnew</span> Sorry to pull you in. Please provide your recommendations.</p>



<a name="204643477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204643477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204643477">(Jul 22 2020 at 08:57)</a>:</h4>
<p>The architecture of HAPI currently does not support concurrent versions out of the box. It utterly depends on what you are trying to achieve</p>



<a name="204646649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204646649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Umberto Cappellini <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204646649">(Jul 22 2020 at 09:40)</a>:</h4>
<p>There's a Converter interceptor to convert between FHIR versions on the fly: VersionedApiConverterInterceptor.<br>
Here's the related docs: <a href="https://hapifhir.io/hapi-fhir/docs/model/converter.html">https://hapifhir.io/hapi-fhir/docs/model/converter.html</a><br>
Not sure how good it is (configuration and performance-wise), though.</p>



<a name="204646775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204646775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204646775">(Jul 22 2020 at 09:42)</a>:</h4>
<p>Yeah, I completely understand it. Can we run two hapi fhir server to support two different versions (STU3 and R4) on top of a single database? Is there any problems with that? we don't want to keep the huge data replicated. Hope it makes sense now</p>



<a name="204646806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204646806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204646806">(Jul 22 2020 at 09:43)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="191427">@Jens Villadsen</span></p>



<a name="204646828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/204646828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#204646828">(Jul 22 2020 at 09:43)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="197408">@Umberto Cappellini</span> , this is amazing to know about it. I will check it out</p>



<a name="205722696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/205722696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#205722696">(Aug 02 2020 at 11:00)</a>:</h4>
<p><span class="user-mention" data-user-id="197408">@Umberto Cappellini</span>  Is there any example usage for VersionedApiConverterInterceptor? I just read the java docs. Do we have to extend this class and override the method? May i ask for some reference examples? It will be helpful to understand it well.</p>



<a name="205807556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/205807556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Umberto Cappellini <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#205807556">(Aug 03 2020 at 15:23)</a>:</h4>
<p><span class="user-mention" data-user-id="326090">@Keerthivasan Ramanathan</span> </p>
<p>Looking at the code of the interceptor: <br>
<a href="https://github.com/jamesagnew/hapi-fhir/blob/60f16dd91d757131dbdef83359e0b8f02c323248/hapi-fhir-converter/src/main/java/ca/uhn/hapi/converters/server/VersionedApiConverterInterceptor.java">https://github.com/jamesagnew/hapi-fhir/blob/60f16dd91d757131dbdef83359e0b8f02c323248/hapi-fhir-converter/src/main/java/ca/uhn/hapi/converters/server/VersionedApiConverterInterceptor.java</a></p>
<p>the client specifies the desired FHIR version in the "accept" header as follows: Accept: application/fhir+json; fhirVersion=4.0</p>
<p>The interceptor converts all the resources contained in the ResponseDetails to the desired FHIR version. You configure the interceptor as you do for all other interceptors in the initialize method of the server.</p>
<p>Didn't use it myself though, not sure how good the conversions are.</p>



<a name="205807750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/205807750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#205807750">(Aug 03 2020 at 15:25)</a>:</h4>
<p>Wow, that's amazing <span aria-label="sunglasses" class="emoji emoji-1f60e" role="img" title="sunglasses">:sunglasses:</span></p>



<a name="205807784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Multiple%20FHIR%20versions%20support%20on%20same%20datasource/near/205807784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Multiple.20FHIR.20versions.20support.20on.20same.20datasource.html#205807784">(Aug 03 2020 at 15:25)</a>:</h4>
<p>I'll check that and give an update. Thank you so much</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
