---
layout: page
title: "FHIR Chat  · PATCH a List · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/PATCH.20a.20List.html">PATCH a List</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="230744406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/PATCH%20a%20List/near/230744406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Sauer <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/PATCH.20a.20List.html#230744406">(Mar 17 2021 at 18:37)</a>:</h4>
<p>I like to manage a List of Patients in a List-Ressource.</p>
<p>To add a Patient I use:</p>
<div class="codehilite"><pre><span></span><code>[
   { &quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/entry/0&quot;, &quot;value&quot;:
      {
         &quot;item&quot;:
         {
            &quot;reference&quot;: &quot;Patient?identifier=urn:oid:1.2.276.0.76.3.1.139.100.2|40137998&quot;
         }
      }
    }
]
</code></pre></div>
<p>That works fine. The operation add an entry like the following to the list:</p>
<div class="codehilite"><pre><span></span><code>       {
            &quot;item&quot;: {
                &quot;reference&quot;: &quot;Patient/24d7329b-67a9-4855-965d-dd8a849b9f30&quot;
            }
        }
</code></pre></div>
<p>Now I want to remove this entry, and thought that this should work:</p>
<div class="codehilite"><pre><span></span><code>[{ &quot;op&quot;: &quot;remove&quot;, &quot;path&quot;: &quot;/entry/&quot;, &quot;value&quot;:{&quot;item&quot;:{&quot;reference&quot;: &quot;Patient?identifier=urn:oid:1.2.276.0.76.3.1.139.100.2|40137998&quot;}}}]
</code></pre></div>
<p>or maybe:</p>
<div class="codehilite"><pre><span></span><code>[{ &quot;op&quot;: &quot;remove&quot;, &quot;path&quot;: &quot;/entry/&quot;, &quot;value&quot;:{&quot;item&quot;:{&quot;reference&quot;: &quot;Patient/24d7329b-67a9-4855-965d-dd8a849b9f30&quot;}}}]
</code></pre></div>
<p>But I got this error using SMILE CDR:</p>
<div class="codehilite"><pre><span></span><code>{
    &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
    &quot;issue&quot;: [
        {
            &quot;severity&quot;: &quot;error&quot;,
            &quot;code&quot;: &quot;processing&quot;,
            &quot;diagnostics&quot;: &quot;no such path in target JSON document&quot;
        }
    ]
}
</code></pre></div>
<p>Any idea, what I can do to remove an entry from the list? <br>
Thank's for helping!</p>
<p>Michael</p>



<a name="230820039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/PATCH%20a%20List/near/230820039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dexter <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/PATCH.20a.20List.html#230820039">(Mar 18 2021 at 06:47)</a>:</h4>
<p>I think it should be <code>"path": "/entry/0"</code> when removing the item, and you don't need the <code>value</code> key. </p>
<p>It should just be, </p>
<div class="codehilite"><pre><span></span><code>[
    {
        &quot;op&quot;: &quot;remove&quot;,
        &quot;path&quot;: &quot;/entry/0&quot;
    }
]
</code></pre></div>
<p>Here's the <a href="https://tools.ietf.org/html/rfc6902#section-3">JSON Patch RFC</a> with the relevant examples</p>



<a name="230820851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/PATCH%20a%20List/near/230820851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dexter <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/PATCH.20a.20List.html#230820851">(Mar 18 2021 at 07:01)</a>:</h4>
<p>Hi, just saw your message in the other thread. Are you trying to check the element before removing it?</p>



<a name="230984013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/PATCH%20a%20List/near/230984013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Sauer <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/PATCH.20a.20List.html#230984013">(Mar 19 2021 at 07:11)</a>:</h4>
<p>I know which patient I want to remove, but I don‘t know the index. The list can be very long - so I don‘t want to transfer the complete list to the client.   I thought that I can use the reference value to find the entry and remove it.</p>



<a name="230984269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/PATCH%20a%20List/near/230984269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Sauer <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/PATCH.20a.20List.html#230984269">(Mar 19 2021 at 07:15)</a>:</h4>
<p>Do you think it is possible to do this using FHIR-Patch?</p>



<a name="231009197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/PATCH%20a%20List/near/231009197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dexter <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/PATCH.20a.20List.html#231009197">(Mar 19 2021 at 11:33)</a>:</h4>
<p>I'm not sure, but what I've resorted to doing is make a GET, then modify the payload as you see fit, and PATCH with a test and replace to ensure I'm PATCHing the same data that I have</p>
<p>Something like this</p>
<div class="codehilite"><pre><span></span><code>[
    {
        &quot;op&quot;: &quot;test&quot;,
        &quot;path&quot;: &quot;/meta/VersionId&quot;,
        &quot;value&quot;: &quot;1&quot;
    },
    {
        &quot;op&quot;: &quot;replace&quot;,
        &quot;path&quot;: &quot;path-to-data&quot;,
        &quot;value&quot;: { ... }
    },
    {
        &quot;op&quot;: &quot;replace&quot;,
        &quot;path&quot;: &quot;&quot;,
        &quot;value&quot;: { this replaces the whole object from the root }
    },
    // more things
]
</code></pre></div>



<a name="231009730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/PATCH%20a%20List/near/231009730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dexter <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/PATCH.20a.20List.html#231009730">(Mar 19 2021 at 11:38)</a>:</h4>
<p>In your case, it'd be </p>
<div class="codehilite"><pre><span></span><code>// Get the data, get the version,
// check the list and find the index of the element to delete
[
    {
        &quot;op&quot;: &quot;test&quot;,
        &quot;path&quot;: &quot;/meta/VersionId&quot;,
        &quot;value&quot;: &quot;version-you-got-above&quot;
    },
    {
        &quot;op&quot;: &quot;delete&quot;,
        &quot;path&quot;: &quot;path-to-data/index&quot;,
    },
]
</code></pre></div>
<p>On a sidenote, I think we both asked the question in the wrong stream. Not sure, maybe someone can let us know</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
