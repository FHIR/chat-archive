---
layout: page
title: "FHIR Chat  · Composition creation in a document bundle · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Composition.20creation.20in.20a.20document.20bundle.html">Composition creation in a document bundle</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="176544027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Composition%20creation%20in%20a%20document%20bundle/near/176544027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edouard Gence <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Composition.20creation.20in.20a.20document.20bundle.html#176544027">(Sep 25 2019 at 08:32)</a>:</h4>
<p>Hi all! We are trying to create a composition using a bundle in order to simultaneously create a composition and conditions. We managed to validate our bundle with the .NET validator. Now we are trying to populate the database with the multiple entries of the bundle (1 composition and 2 conditions). When we do so on the hapi server we get the following error:</p>
<p>Operation was unsuccessful because of a client error (BadRequest). OperationOutcome: &lt;div xmlns="http://www.w3.org/1999/xhtml"&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border="0"&gt;&lt;tr&gt;&lt;td style="font-weight: bold;"&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Unable to process transaction where incoming Bundle.type = document&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;.</p>
<p>Here is our bundle example: <a href="user_uploads/10155/dJDmrlJtIJlWP3unEuOcE60y/Untitled-1" target="_blank" title="user_uploads/10155/dJDmrlJtIJlWP3unEuOcE60y/Untitled-1">https://chat.fhir.org/user_uploads/10155/dJDmrlJtIJlWP3unEuOcE60y/Untitled-1</a></p>
<p>Any ideas??</p>



<a name="176547022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Composition%20creation%20in%20a%20document%20bundle/near/176547022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edouard Gence <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Composition.20creation.20in.20a.20document.20bundle.html#176547022">(Sep 25 2019 at 09:17)</a>:</h4>
<p>So we managed to make it work. We changed Bundle.type="document" to Bundle.type="transaction". Moreover since the type transaction implies a request element in the bundle, we added the following:<br>
&lt;request&gt;<br>
    &lt;method value="POST" /&gt;<br>
    &lt;url value="Composition" /&gt;<br>
&lt;/request&gt;<br>
This populated the entries correctly even though it is specifically said on the composition resource that it should be "document". If anyone knows why "document" didn't work and why "transaction" did please tell us. For now we will stick to transaction.</p>



<a name="176987022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Composition%20creation%20in%20a%20document%20bundle/near/176987022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Composition.20creation.20in.20a.20document.20bundle.html#176987022">(Oct 01 2019 at 00:24)</a>:</h4>
<p>What was the URL you were posting this to?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
