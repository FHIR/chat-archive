---
layout: page
title: "FHIR Chat  · Java reference code for current build · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html">Java reference code for current build</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="174871629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174871629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174871629">(Sep 04 2019 at 11:17)</a>:</h4>
<p>When I build <a href="https://github.com/hapifhir/org.hl7.fhir.core" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core">https://github.com/hapifhir/org.hl7.fhir.core</a> it is generates stuff for R5 in src\main\java\org\hl7\fhir\r5\model. But it seems the same as the R4 classes in src\main\java\org\hl7\fhir\r4\model. <br>
Is there a way to generate the java reference code for what is in the current build?</p>



<a name="174876578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174876578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174876578">(Sep 04 2019 at 12:33)</a>:</h4>
<p>Yes, that is very similar to the situation and question that I have right now.  I'm updating ConceptMap in the current build and I need to be able to generate r5.model classes that correspond to that - without it the build will fail.  Grahame said that it is about time and he would generate the updates for org.hl7.fhir.core for the current build (as it is now).  But that alone won't solve my issue, as I need to be able to update org.hl7.fhir.core locally first to match my local build changes (in the resource spreadsheets, etc.) so that I can get a successful local build and then create pull requests for both repos so that the changes to the build can be made in sync. <span class="user-mention" data-user-id="191319">@James Agnew</span>?</p>



<a name="174916977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174916977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174916977">(Sep 04 2019 at 19:57)</a>:</h4>
<p>The model classes get built in the FHIR spec build- Once in a while Grahame syncs them into org.hl7.fhir.core. I believe the current R5 models are from December so they're not far off from the R4 ones.</p>
<p>The challenge is that when they get moved into org.hl7.fhir.core, various other things will often break (converters, validator, fhirpath) as a result of changes to the model so Grahame resolves those things too. I suspect that task is an arduous one, which is why it doesn't happen super frequently.</p>
<p>Technically anyone could probably replace the contents of the <code>src\main\java\org\hl7\fhir\r5\model</code> package with the new contents from the spec build, and submit it in a PR along with fixes to anything that breaks. No idea if this would be easy to do, or easy to review...</p>



<a name="174917923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174917923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174917923">(Sep 04 2019 at 20:08)</a>:</h4>
<p>The problem is that there's a few resources where changes to the resources requires changes to the core package. Successfully committing them is an arduous process that requires full access to the various packages so you can manage commit dependencies and PRs</p>



<a name="174918717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174918717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174918717">(Sep 04 2019 at 20:16)</a>:</h4>
<p>Yes, that's exactly the case.  I'm near to the end of this for the agreed changes to ConceptMap, but I need to figure out how to (most expeditiously) get it to the final endpoint with the spec updated and building correctly.</p>



<a name="174918890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174918890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174918890">(Sep 04 2019 at 20:18)</a>:</h4>
<p>I'm not quite sure if "replace the contents of the src\main\java\org\hl7\fhir\r5\model package with the new contents from the spec build" actually works, because (at least what I've experienced with what I'm doing) you can't get a successful fhir spec build without first updating the src\main\java\org\hl7\fhir\r5\model package - a chicken and egg problem, it seems.</p>



<a name="174919094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174919094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174919094">(Sep 04 2019 at 20:20)</a>:</h4>
<p>Any further thoughts/corrections/suggestions on it, <span class="user-mention" data-user-id="191319">@James Agnew</span>?</p>



<a name="174919728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174919728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174919728">(Sep 04 2019 at 20:28)</a>:</h4>
<p>I need to do the merge. No one else can do it</p>



<a name="174919765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174919765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174919765">(Sep 04 2019 at 20:28)</a>:</h4>
<p>so you can't get a build that works?</p>



<a name="174919809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174919809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174919809">(Sep 04 2019 at 20:28)</a>:</h4>
<p>I think the only way is for you to send me a diff so that I can do it.</p>



<a name="174921181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174921181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174921181">(Sep 04 2019 at 20:43)</a>:</h4>
<p>Hmm, that seems like a potentially major bottleneck and rather unfortunate (especially for you).  If the model code is generated (which I thought you said before?), it seems that possibly others could do that?  I don't really have a diff available to send.  What I have now is the updated ConceptMap spreadsheet (which is creating the need for most of the other updates) and quite a bit of hand-edited code reflecting most of the other required changes, which I was hoping to get to the point of being able to generate pull request(s) from (I don't think I'm too far off at this point from being able to that, actually).  And you're right that I can't get a build that works unless first I have a working updated r5 model.</p>



<a name="174921883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174921883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174921883">(Sep 04 2019 at 20:52)</a>:</h4>
<p>breaking changes to the following resources create this issue: CapabilityStatement, ValueSet, CodeSystem, StructureDefinition, ConceptMap</p>



<a name="174921906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174921906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174921906">(Sep 04 2019 at 20:52)</a>:</h4>
<p>all but 1 of them are normative. So ConceptMap is the only one that has this problem</p>



<a name="174922549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174922549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174922549">(Sep 04 2019 at 21:01)</a>:</h4>
<p>Yes, that does make sense.  So how best to proceed in this case?  I kind of don't want to throw away the work that I've done and dump it all back in your lap to do over - unless it's actually <strong>easy</strong> for you to do that.  But it's your call for what will work best.</p>



<a name="174922855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174922855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174922855">(Sep 04 2019 at 21:05)</a>:</h4>
<p>send me 2 patches for core and main spec</p>
<p>For patches, see 2nd answer here: <a href="https://stackoverflow.com/questions/5159185/create-a-git-patch-from-the-changes-in-the-current-working-directory" target="_blank" title="https://stackoverflow.com/questions/5159185/create-a-git-patch-from-the-changes-in-the-current-working-directory">https://stackoverflow.com/questions/5159185/create-a-git-patch-from-the-changes-in-the-current-working-directory</a></p>



<a name="174926261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Java%20reference%20code%20for%20current%20build/near/174926261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Java.20reference.20code.20for.20current.20build.html#174926261">(Sep 04 2019 at 21:48)</a>:</h4>
<p>ok - I'll do that</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
