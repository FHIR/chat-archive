---
layout: page
title: "FHIR Chat  · Wrong ValueSet URL? · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Wrong.20ValueSet.20URL.3F.html">Wrong ValueSet URL?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="168721745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Wrong%20ValueSet%20URL%3F/near/168721745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Wrong.20ValueSet.20URL.3F.html#168721745">(Jun 21 2019 at 22:26)</a>:</h4>
<p><a href="http://hapi.fhir.org/baseR4/ValueSet/medication-status/$expand" target="_blank" title="http://hapi.fhir.org/baseR4/ValueSet/medication-status/$expand">http://hapi.fhir.org/baseR4/ValueSet/medication-status/$expand</a> reports the system URI as "<a href="http://hl7.org/fhir/medication-status" target="_blank" title="http://hl7.org/fhir/medication-status">http://hl7.org/fhir/medication-status</a>", but per <a href="https://www.hl7.org/fhir/STU3/valueset-medication-status.html" target="_blank" title="https://www.hl7.org/fhir/STU3/valueset-medication-status.html">https://www.hl7.org/fhir/STU3/valueset-medication-status.html</a>, it should be <a href="http://hl7.org/fhir/ValueSet/medication-status" target="_blank" title="http://hl7.org/fhir/ValueSet/medication-status">http://hl7.org/fhir/ValueSet/medication-status</a>.  Also <a href="http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/ValueSet/medication-status" target="_blank" title="http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/ValueSet/medication-status">http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/ValueSet/medication-status</a> returns a null pointer exception, and <a href="http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/medication-status" target="_blank" title="http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/medication-status">http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/medication-status</a> does not find anything.  (Is this the best place to report these issues?)</p>



<a name="168728817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Wrong%20ValueSet%20URL%3F/near/168728817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Wrong.20ValueSet.20URL.3F.html#168728817">(Jun 22 2019 at 00:50)</a>:</h4>
<p><span class="user-mention" data-user-id="195344">@Paul Lynch</span><br>
The HAPI server is mostly (but not entirely) behaving correctly:<br>
(1) <a href="http://hapi.fhir.org/baseR4/ValueSet/medication-status/$expand" target="_blank" title="http://hapi.fhir.org/baseR4/ValueSet/medication-status/$expand">http://hapi.fhir.org/baseR4/ValueSet/medication-status/$expand</a> reports the system URI as "<a href="http://hl7.org/fhir/medication-status" target="_blank" title="http://hl7.org/fhir/medication-status">http://hl7.org/fhir/medication-status</a>", but per <a href="https://www.hl7.org/fhir/STU3/valueset-medication-status.html" target="_blank" title="https://www.hl7.org/fhir/STU3/valueset-medication-status.html">https://www.hl7.org/fhir/STU3/valueset-medication-status.html</a>, it should be <a href="http://hl7.org/fhir/ValueSet/medication-status" target="_blank" title="http://hl7.org/fhir/ValueSet/medication-status">http://hl7.org/fhir/ValueSet/medication-status</a>. <br>
No, the way that HAPI displays this is correct.  The 'system' URL is always the URL for the code system (<a href="http://hl7.org/fhir/medication-status" target="_blank" title="http://hl7.org/fhir/medication-status">http://hl7.org/fhir/medication-status</a>), not the URL for the value set - just as HAPI is displaying it.<br>
(2) Also <a href="http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/ValueSet/medication-status" target="_blank" title="http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/ValueSet/medication-status">http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/ValueSet/medication-status</a> returns a null pointer exception,<br>
This one is an issue and should be reported, as this should be expanding correctly, not giving a NPE.  The instance invocation for the same value set does work: <a href="http://hapi.fhir.org/baseR4/ValueSet/medication-status/$expand" target="_blank" title="http://hapi.fhir.org/baseR4/ValueSet/medication-status/$expand">http://hapi.fhir.org/baseR4/ValueSet/medication-status/$expand</a> <br>
(3) and <a href="http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/medication-status" target="_blank" title="http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/medication-status">http://hapi.fhir.org/baseR4/ValueSet/$expand?url=http://hl7.org/fhir/medication-status</a> does not find anything. <br>
This behavior is  also correct, because the URL that you provided is for the code system, not for the value set - so there is no value set being specified for the operation to expand.</p>
<p>Probably the best place to report issues with the HAPI server is in the HAPI FHIR Google group at:<br>
<a href="https://groups.google.com/forum/#!forum/hapi-fhir" target="_blank" title="https://groups.google.com/forum/#!forum/hapi-fhir">https://groups.google.com/forum/#!forum/hapi-fhir</a><br>
I think for that purpose it is likely monitored more closely and probably will be responded to more quickly.</p>



<a name="168947297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Wrong%20ValueSet%20URL%3F/near/168947297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Wrong.20ValueSet.20URL.3F.html#168947297">(Jun 25 2019 at 15:09)</a>:</h4>
<p>It looks like in R4 the code system URI has changed to <a href="http://hl7.org/fhir/CodeSystem/medication-status" target="_blank" title="http://hl7.org/fhir/CodeSystem/medication-status">http://hl7.org/fhir/CodeSystem/medication-status</a>, yet HAPI is reporting <a href="http://hl7.org/fhir/medication-status" target="_blank" title="http://hl7.org/fhir/medication-status">http://hl7.org/fhir/medication-status</a>.</p>



<a name="177304537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Wrong%20ValueSet%20URL%3F/near/177304537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Wrong.20ValueSet.20URL.3F.html#177304537">(Oct 04 2019 at 01:56)</a>:</h4>
<p>So... a bit late, but (2) is fixed now :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
