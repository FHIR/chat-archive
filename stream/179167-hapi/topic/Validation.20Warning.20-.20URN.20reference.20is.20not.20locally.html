---
layout: page
title: "FHIR Chat  · Validation Warning - URN reference is not locally · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20Warning.20-.20URN.20reference.20is.20not.20locally.html">Validation Warning - URN reference is not locally</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="260521540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20Warning%20-%20URN%20reference%20is%20not%20locally/near/260521540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20Warning.20-.20URN.20reference.20is.20not.20locally.html#260521540">(Nov 06 2021 at 16:07)</a>:</h4>
<p>In HAPI Validation this is returned as a warning. <br>
However for FHIR Messages I think this should be an error (the message should be self contained).</p>
<p>Is this correct?</p>
<p>Is it possible to upgrade these referencing warnings to errors via a setting?</p>



<a name="260593439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20Warning%20-%20URN%20reference%20is%20not%20locally/near/260593439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20Warning.20-.20URN.20reference.20is.20not.20locally.html#260593439">(Nov 07 2021 at 20:16)</a>:</h4>
<p>it's not stated as true in the specification - that messages should be entirely self contained. All that the spec says is that MessageHeader.focus SHALL be in the message. let me know if that's not being enforced. Otherwise, you can make a profile to say that where you want to say it (see ElementDefinition.type.aggregation)</p>



<a name="260626405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20Warning%20-%20URN%20reference%20is%20not%20locally/near/260626405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20Warning.20-.20URN.20reference.20is.20not.20locally.html#260626405">(Nov 08 2021 at 08:30)</a>:</h4>
<p>Let me test that. <br>
I've a feeling when our resource A is in a REST interaction, its referenced and when in a message interaction it's bundled.</p>



<a name="260633843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20Warning%20-%20URN%20reference%20is%20not%20locally/near/260633843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20Warning.20-.20URN.20reference.20is.20not.20locally.html#260633843">(Nov 08 2021 at 09:42)</a>:</h4>
<p>bw, this code is org.hl7.fhir.validation.instance.type.BundleValidator.validateMessage</p>



<a name="260636930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20Warning%20-%20URN%20reference%20is%20not%20locally/near/260636930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20Warning.20-.20URN.20reference.20is.20not.20locally.html#260636930">(Nov 08 2021 at 10:10)</a>:</h4>
<p>It works. <br>
Looking at <a href="https://www.hl7.org/fhir/valueset-resource-aggregation-mode.html">https://www.hl7.org/fhir/valueset-resource-aggregation-mode.html</a><br>
What I'm after is just slightly different to:<br>
<strong>The resource the reference points to will be found in the same bundle as the resource that includes the reference.</strong><br>
Something like <br>
if Bundle.type = message then apply rule else ignore</p>
<p>I'll get some other internal views</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
