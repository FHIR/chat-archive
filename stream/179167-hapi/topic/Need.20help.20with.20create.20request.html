---
layout: page
title: "FHIR Chat  · Need help with create request · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Need.20help.20with.20create.20request.html">Need help with create request</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="221527176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Need%20help%20with%20create%20request/near/221527176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Olivia Bellamou-Huet <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Need.20help.20with.20create.20request.html#221527176">(Jan 04 2021 at 14:15)</a>:</h4>
<p>Hi,<br>
I created my first client and my first server running locally. The server can correctly process the requests sent from Postman for creating and searching patients. The client can create a new patient in the server <a href="http://hapi.fhir.org/baseR4">http://hapi.fhir.org/baseR4</a>. But when I try to have my client create a new patient in my server (<a href="http://localhost:9999">http://localhost:9999</a>) I get the following error message:</p>
<blockquote>
<p>Invalid request: The FHIR endpoint on this server does not know how to handle GET operation[Patient/metadata] with parameters [[]].</p>
</blockquote>
<p>What I do in the client:</p>
<div class="codehilite" data-code-language="Java"><pre><span></span><code><span class="n">FhirContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">FhirContext</span><span class="p">.</span><span class="na">forR4</span><span class="p">();</span>
<span class="n">IGenericClient</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">.</span><span class="na">newRestfulGenericClient</span><span class="p">(</span><span class="s">"http://localhost:9999/Patient"</span><span class="p">);</span>

<span class="n">Patient</span> <span class="n">newPatient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Patient</span><span class="p">();</span>
<span class="n">newPatient</span><span class="p">.</span><span class="na">addName</span><span class="p">().</span><span class="na">setFamily</span><span class="p">(</span><span class="s">"Green"</span><span class="p">).</span><span class="na">addGiven</span><span class="p">(</span><span class="s">"Marc"</span><span class="p">);</span>
<span class="n">newPatient</span><span class="p">.</span><span class="na">addIdentifier</span><span class="p">().</span><span class="na">setSystem</span><span class="p">(</span><span class="s">"http://acme.org/mrns"</span><span class="p">).</span><span class="na">setValue</span><span class="p">(</span><span class="s">"456456"</span><span class="p">);</span>
<span class="n">newPatient</span><span class="p">.</span><span class="na">setGender</span><span class="p">(</span><span class="n">Enumerations</span><span class="p">.</span><span class="na">AdministrativeGender</span><span class="p">.</span><span class="na">MALE</span><span class="p">);</span>

<span class="n">MethodOutcome</span> <span class="n">outcome</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="na">create</span><span class="p">().</span><span class="na">resource</span><span class="p">(</span><span class="n">newPatient</span><span class="p">).</span><span class="na">prettyPrint</span><span class="p">().</span><span class="na">encodedXml</span><span class="p">().</span><span class="na">execute</span><span class="p">();</span>
</code></pre></div>
<p>And in the server:</p>
<div class="codehilite" data-code-language="Java"><pre><span></span><code><span class="nd">@Create</span><span class="p">()</span>
<span class="kd">public</span> <span class="n">MethodOutcome</span> <span class="nf">createPatient</span><span class="p">(</span><span class="nd">@ResourceParam</span> <span class="n">Patient</span> <span class="n">thePatient</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">FhirContext</span> <span class="n">ctxV4</span> <span class="o">=</span> <span class="n">FhirContext</span><span class="p">.</span><span class="na">forR4</span><span class="p">();</span>
    <span class="n">ctxV4</span><span class="p">.</span><span class="na">getRestfulClientFactory</span><span class="p">().</span><span class="na">setServerValidationMode</span><span class="p">(</span><span class="n">ServerValidationModeEnum</span><span class="p">.</span><span class="na">NEVER</span><span class="p">);</span>
    <span class="n">IGenericClient</span> <span class="n">clientHAPI</span> <span class="o">=</span> <span class="n">ctxV4</span><span class="p">.</span><span class="na">newRestfulGenericClient</span><span class="p">(</span><span class="s">"http://hapi.fhir.org/baseR4"</span><span class="p">);</span>
    <span class="n">MethodOutcome</span> <span class="n">outcome</span> <span class="o">=</span> <span class="n">clientHAPI</span><span class="p">.</span><span class="na">create</span><span class="p">().</span><span class="na">resource</span><span class="p">(</span><span class="n">thePatient</span><span class="p">).</span><span class="na">execute</span><span class="p">();</span>
    <span class="k">return</span> <span class="n">outcome</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Do you know what I am doing wrong or missing?</p>
<p>Thanks a lot!</p>



<a name="221530632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Need%20help%20with%20create%20request/near/221530632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Need.20help.20with.20create.20request.html#221530632">(Jan 04 2021 at 14:43)</a>:</h4>
<p>for the client you need to provide the FHIR endpoint, I assume your server is running on <a href="http://localhost:9999">http://localhost:9999</a>? then you need to add  ctx.newRestfulGenericClient("<a href="http://localhost:9999">http://localhost:9999</a>"); I guess.</p>



<a name="221532216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Need%20help%20with%20create%20request/near/221532216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Olivia Bellamou-Huet <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Need.20help.20with.20create.20request.html#221532216">(Jan 04 2021 at 14:55)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191478">@Oliver Egger</span> .  Yes the server is running on this port. Do you mean in addition to the line: </p>
<div class="codehilite" data-code-language="Java"><pre><span></span><code><span class="n">IGenericClient</span> <span class="n">client</span> <span class="o">=</span> <span class="n">ctx</span><span class="p">.</span><span class="na">newRestfulGenericClient</span><span class="p">(</span><span class="s">"http://localhost:9999/Patient"</span><span class="p">);</span>
</code></pre></div>
<p>?</p>



<a name="221533545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Need%20help%20with%20create%20request/near/221533545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Need.20help.20with.20create.20request.html#221533545">(Jan 04 2021 at 15:05)</a>:</h4>
<p>not in addition, you need to replace in the client ctx.newRestfulGenericClient("<a href="http://localhost:9999/Patient">http://localhost:9999/Patient</a>") with ctx.newRestfulGenericClient("<a href="http://localhost:9999">http://localhost:9999</a>")</p>



<a name="221535573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Need%20help%20with%20create%20request/near/221535573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Olivia Bellamou-Huet <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Need.20help.20with.20create.20request.html#221535573">(Jan 04 2021 at 15:19)</a>:</h4>
<p>Thank you very much, that solved the problem indeed!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
