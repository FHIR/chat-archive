---
layout: page
title: "FHIR Chat  · Validation with Multiple IG Versions · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20with.20Multiple.20IG.20Versions.html">Validation with Multiple IG Versions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="255206572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20with%20Multiple%20IG%20Versions/near/255206572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20with.20Multiple.20IG.20Versions.html#255206572">(Sep 28 2021 at 12:19)</a>:</h4>
<p>Two part question:</p>
<ul>
<li>Is it possible to load multiple versions of an IG into the validator?</li>
<li>Then is it possible to ensure that particular resources are validated against a particular IG version?</li>
</ul>
<p>I've been looking through the validation code and I don't see an obvious way to do this. My impression is that IGs are tied to the context, so I would need to create a separate context for each IG version, and then select the appropriate context to use in validation. My understanding is that contexts are pretty heavy, so I'm hoping there's a better way.</p>



<a name="255210258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20with%20Multiple%20IG%20Versions/near/255210258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20with.20Multiple.20IG.20Versions.html#255210258">(Sep 28 2021 at 12:49)</a>:</h4>
<p>you should be able to load multiple versions of an IG into the same context</p>



<a name="255210285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20with%20Multiple%20IG%20Versions/near/255210285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20with.20Multiple.20IG.20Versions.html#255210285">(Sep 28 2021 at 12:49)</a>:</h4>
<p>then nominate the profile version you wish to validate against</p>



<a name="255210362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20with%20Multiple%20IG%20Versions/near/255210362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20with.20Multiple.20IG.20Versions.html#255210362">(Sep 28 2021 at 12:50)</a>:</h4>
<p>but I don't think we have test cases that exercise this scenario, so no guarantee it will work</p>



<a name="255216259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20with%20Multiple%20IG%20Versions/near/255216259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20with.20Multiple.20IG.20Versions.html#255216259">(Sep 28 2021 at 13:30)</a>:</h4>
<p>I'm concerned that specifying a profile version may not be sufficient because profiles and resource instances don't generally use versioned extension and value set urls.</p>



<a name="255287926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20with%20Multiple%20IG%20Versions/near/255287926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20with.20Multiple.20IG.20Versions.html#255287926">(Sep 28 2021 at 19:56)</a>:</h4>
<p>the context should track the versioning from the packages implicitly. It would be great if you made up a test case to check</p>



<a name="255391944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20with%20Multiple%20IG%20Versions/near/255391944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20with.20Multiple.20IG.20Versions.html#255391944">(Sep 29 2021 at 12:46)</a>:</h4>
<p>I'll work on making one.</p>



<a name="255737486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20with%20Multiple%20IG%20Versions/near/255737486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20with.20Multiple.20IG.20Versions.html#255737486">(Oct 01 2021 at 12:46)</a>:</h4>
<p>OK, I've created a minimal test case, with two IG versions (<code>0.1.0</code> and <code>0.2.0</code>), but I haven't figured out how to make the validator validate against a specific profile version. I've loaded both IG versions, but this validates against <code>0.2.0</code>:</p>
<div class="codehilite"><pre><span></span><code>List&lt;String&gt; profiles = new ArrayList&lt;&gt;();
profiles.add(&quot;http://example.org/validator-versions-test/StructureDefinition/multi-version-test-patient|0.1.0&quot;);
OperationOutcome op = ve.validate(FhirFormat.JSON, resource, profiles);
</code></pre></div>



<a name="255796139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20with%20Multiple%20IG%20Versions/near/255796139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20with.20Multiple.20IG.20Versions.html#255796139">(Oct 01 2021 at 19:32)</a>:</h4>
<p>then that's a bug outright. and the test case is a success at least</p>



<a name="256073479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20with%20Multiple%20IG%20Versions/near/256073479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20with.20Multiple.20IG.20Versions.html#256073479">(Oct 04 2021 at 15:02)</a>:</h4>
<p>It looks like they were validating against the correct profile version, but not the correct extension version. I opened a PR with unit tests and more details: <a href="https://github.com/hapifhir/org.hl7.fhir.core/pull/614">https://github.com/hapifhir/org.hl7.fhir.core/pull/614</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
