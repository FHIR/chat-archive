---
layout: page
title: "FHIR Chat  · @ResourceDef vs profile vs StructureDefinition · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html">@ResourceDef vs profile vs StructureDefinition</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="208206080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208206080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristof Taveirne <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208206080">(Aug 27 2020 at 11:50)</a>:</h4>
<p>Hi, </p>
<p>I'm a bit confused how to deal with these different aspects.<br>
I'm pretty new to profiling to forgive me if I ask stupid questions.</p>
<p>We're working on FHIR Questionnaire solution. The end-goal is that we have an implementation of SDC. Until we get there we want to extend that profile so that the profile reflects what our application supports at the current moment in time. So profile versioning will go along with application versioning.</p>
<p>We're using HAPI to manage the Questionnaires and I'm currently working on the $validate operator.<br>
This is where my confusion starts.</p>
<ul>
<li>Should I create a Profile in for example Forge, so that the DefaultProfileValidator picks this up and validates against our profile?</li>
<li>Should I create a @ResourceDef that extends Questionnaire to define the extensions and add constraints to properties? (doesn't look like there is a validator that can validate a resource against a @ResourceDef class).</li>
<li>Should I create a StructureDefinition resource first so that the validator can resolve this and perform validation?</li>
</ul>
<p>Can the @ResourceDef class not automatically map onto a StructureDefinition / profile for this purpose? </p>
<p>Thanks in advance for any guidance you can give me!</p>
<p>Kind regards,<br>
Kristof.</p>



<a name="208280504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208280504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208280504">(Aug 27 2020 at 21:45)</a>:</h4>
<p><span class="user-mention" data-user-id="218552">@Kristof Taveirne</span> you don't need to do any of those things in principle; you just (a) ensure that the SDC package is available in your HAPI install and (b) ask the validate to validate against the canonical e.g. <code>http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire</code>. All the other details are already sorted.</p>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> I'm not sure exactly how this gets integrated - I don't know what Kristof actually needs to do</p>



<a name="208551462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208551462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristof Taveirne <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208551462">(Aug 31 2020 at 12:45)</a>:</h4>
<p>Hi Graham,</p>
<p>What I did until now <br>
I implemented IValidationSupport to return a StructureDefinition.<br>
That StructureDefinition has "<a href="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire</a>" as a base and a differential.</p>
<p>When I register that in my validationChain and add a snapshot generator it looks like I'm one step closer.</p>
<p>Now I get the following:<br>
Unknown base definition: <a href="http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire">http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire</a></p>
<p>Which kinda makes sense since I didn't register the base in the IValidationSupport implementation.</p>
<p>So, I'm very much interested how I can add the SDC package to my HAPI install like you mentioned. <br>
Is there a maven package I can install where I can get the StructureDefinition for SDC from? </p>
<p>Thanks again!</p>
<p>Kristof.</p>



<a name="208551737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208551737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208551737">(Aug 31 2020 at 12:48)</a>:</h4>
<p>well, it's an NPM package that you need. You'll have to consult to the HAPI documentation for the version you have to see how to load NPM packages into scope</p>



<a name="208573165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208573165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208573165">(Aug 31 2020 at 15:30)</a>:</h4>
<p><span class="user-mention" data-user-id="218552">@Kristof Taveirne</span>  hapi has the capability to load an ig since 5.1.0, see release notes <a href="https://hapifhir.io/hapi-fhir/blog/20200813_hapi_fhir_5_1_0">here</a>, <span class="user-mention" data-user-id="191427">@Jens Villadsen</span> has provided a pr <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/127">here</a> how to use it with the jpa-server-starter project. The myNpmJpaValidationSupport is then directly integrated into the JpaValidationSupportChain.</p>



<a name="208576357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208576357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208576357">(Aug 31 2020 at 15:53)</a>:</h4>
<p>Yep - that works</p>



<a name="208576515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208576515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208576515">(Aug 31 2020 at 15:54)</a>:</h4>
<p>You might wanna nudge <span class="user-mention" data-user-id="191319">@James Agnew</span> to accept the PR</p>



<a name="208576706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208576706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208576706">(Aug 31 2020 at 15:55)</a>:</h4>
<p>Or <span class="user-mention" data-user-id="191505">@Sean McIlvenna</span></p>



<a name="208578364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208578364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208578364">(Aug 31 2020 at 16:05)</a>:</h4>
<p>Looking...</p>



<a name="208579107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208579107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208579107">(Aug 31 2020 at 16:09)</a>:</h4>
<p>Responded with some questions</p>



<a name="208581897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208581897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208581897">(Aug 31 2020 at 16:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191505">Sean McIlvenna</span> <a href="#narrow/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition/near/208579107">said</a>:</p>
<blockquote>
<p>Responded with some questions</p>
</blockquote>
<p>Responded with some responses ;)</p>



<a name="208586745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208586745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kristof Taveirne <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208586745">(Aug 31 2020 at 17:01)</a>:</h4>
<p>This is great!</p>
<p>I see this is JPA server only right now, but release notes say plain server support will be added soon. <br>
I'm using a plain server right now so I'll keep following what's going on on the topic. In the mean time, I have some studying to do :)<br>
Love your work guys! Thank you</p>



<a name="208600826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%40ResourceDef%20vs%20profile%20vs%20StructureDefinition/near/208600826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.40ResourceDef.20vs.20profile.20vs.20StructureDefinition.html#208600826">(Aug 31 2020 at 18:57)</a>:</h4>
<p><span class="user-mention" data-user-id="218552">@Kristof Taveirne</span> fyi a sample for a $validate operation with a plain server and ig support is <a href="https://github.com/ahdis/matchbox/blob/master/src/main/java/ch/ahdis/matchbox/">here</a>, however it has not yet added the ig loading from 5.1.0</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
