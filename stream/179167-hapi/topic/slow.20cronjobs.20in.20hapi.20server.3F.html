---
layout: page
title: "FHIR Chat  · slow cronjobs in hapi server? · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/slow.20cronjobs.20in.20hapi.20server.3F.html">slow cronjobs in hapi server?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="211176140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/slow%20cronjobs%20in%20hapi%20server%3F/near/211176140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carl Anderson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/slow.20cronjobs.20in.20hapi.20server.3F.html#211176140">(Sep 24 2020 at 19:08)</a>:</h4>
<p>I've noticed something odd with my server and I'm looking to know if this is expected behavior, or if there's a configuration parameter I can modify to adjust this effect I've noticed.</p>
<p>So, I've been experimenting with loading tagged <code>Group</code> data into a locally-running, dockerized, hapi server (v5.0.0).</p>
<p>In my test case I POST a transaction bundle which creates ~5 <code>Group</code> resources, each tagged with <code>http://hl7.org/Connectathon|2020-Sep</code>.  The server accepts the transaction just fine.</p>
<p>However, when I attempt to view the Groups in the server browser - I often see an empty bundle.  It eventually appears if I refresh repeatedly.  In fact, after my system clock reaches 35 seconds into the minute (which I discovered through trial and error), the bundle <em>always</em> appears.</p>
<p>To me, this looks like a cron (or quartz, or whatever) scheduled job, which is fine if it is.</p>
<p>The problem, though, is that when I try to run my script again - my logic first attempts to query the server to delete any <code>Group</code> resources tagged with that value.  Until the 52nd second of the minute has passed (another number discovered through trial and error), this query returns zero matching resources and nothing is deleted.</p>
<p>Could this behavior be explained by the presence of a cron-scheduled task to refresh a tag-based index (or something)?  Or maybe I'm doing something wrong...</p>
<p>In any case, I'd like more fidelity from my server, if that's possible.  Any ideas?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
