---
layout: page
title: "FHIR Chat  · Fetching Bundles · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html">Fetching Bundles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="180738011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/180738011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Mate <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#180738011">(Nov 14 2019 at 14:58)</a>:</h4>
<p>Hi all!</p>
<p>I'm looking for a way to basically fetch <em>all</em> data from an HAPI FHIR server. This is what I've tried, but it does not work:</p>
<div class="codehilite"><pre><span></span><span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">search</span><span class="o">().</span><span class="na">forAllResources</span><span class="o">().</span><span class="na">returnBundle</span><span class="o">(</span><span class="n">Bundle</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">execute</span><span class="o">();</span>
</pre></div>


<p>It  tells me: "HTTP 400 Bad Request: This is the base URL of FHIR server. Unable to handle this request, as it does not contain a resource type or operation name." The server base is currently set to "<a href="http://localhost:8082/fhir" target="_blank" title="http://localhost:8082/fhir">http://localhost:8082/fhir</a>".</p>
<p>This, however, works:</p>
<div class="codehilite"><pre><span></span><span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">search</span><span class="o">().</span><span class="na">forResource</span><span class="o">(</span><span class="n">Observation</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">returnBundle</span><span class="o">(</span><span class="n">Bundle</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">execute</span><span class="o">();</span>
</pre></div>


<p>Is there any way of getting the first example to work?</p>
<p>Thanks, Sebastian</p>



<a name="180762854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/180762854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#180762854">(Nov 14 2019 at 19:08)</a>:</h4>
<p>it's not in the spec. you can do it by patient, but not by server</p>



<a name="180815558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/180815558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#180815558">(Nov 15 2019 at 09:33)</a>:</h4>
<p>hapi now supports bulk export: <a href="https://hl7.org/Fhir/uv/bulkdata/export/index.html" target="_blank" title="https://hl7.org/Fhir/uv/bulkdata/export/index.html">https://hl7.org/Fhir/uv/bulkdata/export/index.html</a><br>
<span class="user-mention" data-user-id="221445">@Sebastian Mate</span></p>



<a name="180825343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/180825343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Mate <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#180825343">(Nov 15 2019 at 12:02)</a>:</h4>
<p>Great! Thanks for the info, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  and <span class="user-mention" data-user-id="191451">@Patrick Werner</span> !</p>



<a name="182772867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/182772867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Mate <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#182772867">(Dec 06 2019 at 15:42)</a>:</h4>
<p>OK, now I ran into an new problem. I'm trying to fetch fetch the resources of specified type (e.g., Observation.class) for a given patient. How can I do this via the api?</p>



<a name="182772901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/182772901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Mate <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#182772901">(Dec 06 2019 at 15:43)</a>:</h4>
<p>This does not work:<br>
Bundle bundle = (Bundle) client.search().forResource(Observation.class).where(Patient.IDENTIFIER.equals("10")).returnBundle(Bundle.class).execute();</p>



<a name="182772923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/182772923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Mate <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#182772923">(Dec 06 2019 at 15:43)</a>:</h4>
<p>It tells me: The method where(ICriterion&lt;?&gt;) in the type IQuery&lt;IBaseBundle&gt; is not applicable for the arguments (boolean)</p>



<a name="182772942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/182772942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Mate <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#182772942">(Dec 06 2019 at 15:43)</a>:</h4>
<p>Any help is highly appreciated! ;-)</p>



<a name="182792441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/182792441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#182792441">(Dec 06 2019 at 19:03)</a>:</h4>
<p>you have to return an Icriterion in your where</p>



<a name="182792446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/182792446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#182792446">(Dec 06 2019 at 19:03)</a>:</h4>
<p>like this</p>



<a name="182792447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/182792447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#182792447">(Dec 06 2019 at 19:03)</a>:</h4>
<p>where(Patient.IDENTIFIER.exactly().systemAndIdentifier("system", "00001"))</p>



<a name="182935388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Fetching%20Bundles/near/182935388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sebastian Mate <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Fetching.20Bundles.html#182935388">(Dec 09 2019 at 08:59)</a>:</h4>
<p>Patrick, got working thanks to your help. The correct syntax (in my case) was:<br>
bundle = (Bundle) client.search().forResource(Observation.class).where(Observation.PATIENT.hasId(patientFHIR)).returnBundle(Bundle.class).execute();<br>
where patientFHIR is a String that contains the patient ID.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
