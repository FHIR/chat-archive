---
layout: page
title: "FHIR Chat  · Logical reference search · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Logical.20reference.20search.html">Logical reference search</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="194896942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Logical%20reference%20search/near/194896942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reto Wettstein <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Logical.20reference.20search.html#194896942">(Apr 22 2020 at 07:38)</a>:</h4>
<p>Hi everyone, </p>
<p>I am trying to execute a logical reference search on the Device resource for the field Device.patient. This is the request: </p>
<p><code>GET [base]/Device?patient:identifier=http://test.com/NamingSystem/patient-identifier|123456 </code></p>
<p>Search results are always 0. Is there an error in my search and is HAPI supporting search for logical references?</p>



<a name="194918343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Logical%20reference%20search/near/194918343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Logical.20reference.20search.html#194918343">(Apr 22 2020 at 11:48)</a>:</h4>
<p>This style of search is not yet supported in HAPI FHIR - Hopefully coming soon.</p>



<a name="194918635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Logical%20reference%20search/near/194918635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Logical.20reference.20search.html#194918635">(Apr 22 2020 at 11:52)</a>:</h4>
<p>enabling this would also mean 'include' would work with logical references, right?</p>



<a name="194923459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Logical%20reference%20search/near/194923459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Logical.20reference.20search.html#194923459">(Apr 22 2020 at 12:40)</a>:</h4>
<p>I wouldn't expect that to be the case by default- That would involve adding a resolve step that looked for other resources with the same identifier, either at write time or at search time, both of which would add nontrivial overhead. It could be made to work though...</p>
<p>Technically you can kind of do this already by using HAPI's nonstandard "embedded lookup criteria". I.e. you can write your device with:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;subject&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;reference&quot;</span><span class="p">:</span> <span class="s2">&quot;Patient?identifier=http://foo|bar&quot;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>..and HAPI will resolve that before writing the resource, but this is not FHIR standard behaviour and is disabled by default.</p>



<a name="194923988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Logical%20reference%20search/near/194923988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Logical.20reference.20search.html#194923988">(Apr 22 2020 at 12:45)</a>:</h4>
<blockquote>
<p>Technically you can kind of do this already by using HAPI's nonstandard "embedded lookup criteria". </p>
</blockquote>
<p>nice!</p>



<a name="195326108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Logical%20reference%20search/near/195326108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Logical.20reference.20search.html#195326108">(Apr 26 2020 at 09:24)</a>:</h4>
<p>Wouldn't that be simple parameter chaining, GET [base]/Device?patient.identifier=http://test.com/NamingSystem/patient-identifier|123456 (note the "."-character instead of the : before identifier). This style of searching (generally speaking) is supported by HAPI.</p>



<a name="196309055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Logical%20reference%20search/near/196309055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Logical.20reference.20search.html#196309055">(May 05 2020 at 13:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191451">Patrick Werner</span> <a href="#narrow/stream/179167-hapi/topic/Logical.20reference.20search/near/194918635" title="#narrow/stream/179167-hapi/topic/Logical.20reference.20search/near/194918635">said</a>:</p>
<blockquote>
<p>enabling this would also mean 'include' would work with logical references, right?</p>
</blockquote>
<p>Spec says:</p>
<blockquote>
<p>Chaining is not supported when using the :identifier modifier, nor are chaining, includes or reverse includes supported for reference elements that do not have a reference element.</p>
</blockquote>
<p><a href="http://hl7.org/fhir/search.html#reference" title="http://hl7.org/fhir/search.html#reference">http://hl7.org/fhir/search.html#reference</a></p>
<p>But I was really just here to say that I'd love to see the :identifier-modifier implemented in HAPI <span aria-label="smile" class="emoji emoji-263a" role="img" title="smile">:smile:</span></p>



<a name="196311874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Logical%20reference%20search/near/196311874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Logical.20reference.20search.html#196311874">(May 05 2020 at 14:06)</a>:</h4>
<p>ah right the spec <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="196837202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Logical%20reference%20search/near/196837202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Logical.20reference.20search.html#196837202">(May 07 2020 at 22:15)</a>:</h4>
<p>Would I be right in guessing that <code>:identifier</code> has some use in a German profile? I feel like there are a lot of Germans asking me about this lately... :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
