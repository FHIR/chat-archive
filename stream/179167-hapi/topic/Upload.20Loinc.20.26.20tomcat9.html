---
layout: page
title: "FHIR Chat  · Upload Loinc &amp; tomcat9 · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20Loinc.20.26.20tomcat9.html">Upload Loinc &amp; tomcat9</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="198751370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20Loinc%20%26%20tomcat9/near/198751370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20Loinc.20.26.20tomcat9.html#198751370">(May 26 2020 at 12:00)</a>:</h4>
<p>While trying to upload LOINC as an exernal CS the following exception is thrown:</p>
<div class="codehilite"><pre><span></span><code>May 26 13:53:15 vitu-data tomcat9[2264]: 2020-05-26 13:53:15.006 [http-nio-8080-exec-5] INFO  fhirtest.access [LoggingInterceptor.java:175] Path[/fhir] Source[] Operation[metadata  ] UA[HAPI-FHIR/5.0.0 (FHIR Client; FHIR 4.0.1/R4; apache)] Params[] ResponseEncoding[JSON]
May 26 13:53:21 vitu-data tomcat9[2264]: 2020-05-26 13:53:15.199 [http-nio-8080-exec-6] INFO  c.u.f.j.p.TerminologyUploaderProvider [TerminologyUploaderProvider.java:337] Reading in local file: /tmp/hapi-fhir-cli4151838015365947647.zip
May 26 13:53:21 vitu-data tomcat9[2264]: 2020-05-26 13:53:15.199 [http-nio-8080-exec-6] WARN  c.u.f.r.s.i.ExceptionHandlingInterceptor [ExceptionHandlingInterceptor.java:147] Failure during REST processing: ca.uhn.fhir.rest.server.exceptions.InvalidRequestException: Unknown file: hapi-fhir-cli4151838015365947647.zip
May 26 13:53:21 vitu-data tomcat9[2264]: 2020-05-26 13:53:15.199 [http-nio-8080-exec-6] INFO  fhirtest.access [LoggingInterceptor.java:160] ERROR - POST http://localhost:8080/fhir/CodeSystem/$upload-external-code-system
</code></pre></div>


<p><code>Unknown file: hapi-fhir-cli4151838015365947647.zip</code>points to a zip which should be in tmp, but isn't</p>



<a name="198751482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20Loinc%20%26%20tomcat9/near/198751482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20Loinc.20.26.20tomcat9.html#198751482">(May 26 2020 at 12:01)</a>:</h4>
<p>This worked in 4.2.0</p>



<a name="198755600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20Loinc%20%26%20tomcat9/near/198755600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20Loinc.20.26.20tomcat9.html#198755600">(May 26 2020 at 12:43)</a>:</h4>
<p>Ok isn't working in tomcat9 with hapi 4.2.0. Probably a Tomcat9/Ubuntu Sandbox issue.</p>



<a name="198757304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20Loinc%20%26%20tomcat9/near/198757304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20Loinc.20.26.20tomcat9.html#198757304">(May 26 2020 at 12:57)</a>:</h4>
<p>i now added a watcher on /tmp. The file is there, but removed after failing</p>



<a name="198757483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20Loinc%20%26%20tomcat9/near/198757483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20Loinc.20.26.20tomcat9.html#198757483">(May 26 2020 at 12:58)</a>:</h4>
<p>also added:</p>
<div class="codehilite"><pre><span></span><code>[Service]
ReadWritePaths=/tmp /opt/hapi/hapi_luceneindex
</code></pre></div>


<p>to /etc/systemd/system/tomcat9.service.d/override.conf<br>
To prevent sandbox issues.</p>



<a name="198757597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20Loinc%20%26%20tomcat9/near/198757597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20Loinc.20.26.20tomcat9.html#198757597">(May 26 2020 at 12:59)</a>:</h4>
<p>Did anyone experience similar issues before? (Ubuntu 18.04, Tomcat9)</p>



<a name="198757671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20Loinc%20%26%20tomcat9/near/198757671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20Loinc.20.26.20tomcat9.html#198757671">(May 26 2020 at 13:00)</a>:</h4>
<p>tested with hapi 5 and 4.2. Same errors</p>



<a name="198758891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20Loinc%20%26%20tomcat9/near/198758891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20Loinc.20.26.20tomcat9.html#198758891">(May 26 2020 at 13:09)</a>:</h4>
<p>Tested with tomcat8: works. <br>
Anyone experienced with tomcat9, sandbox and why <code>ReadWritePaths=/tmp /opt/hapi/hapi_luceneindex</code> doesn't work?</p>



<a name="198823543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20Loinc%20%26%20tomcat9/near/198823543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20Loinc.20.26.20tomcat9.html#198823543">(May 26 2020 at 21:24)</a>:</h4>
<p>if you can show that it is a problem in alpine in docker, I'll have a look</p>



<a name="198852016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20Loinc%20%26%20tomcat9/near/198852016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20Loinc.20.26.20tomcat9.html#198852016">(May 27 2020 at 05:58)</a>:</h4>
<p>will provide an example later this week</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
