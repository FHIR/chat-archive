---
layout: page
title: "FHIR Chat  · querying copied profile · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/querying.20copied.20profile.html">querying copied profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154023689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/querying%20copied%20profile/near/154023689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/querying.20copied.20profile.html#154023689">(Dec 07 2018 at 08:47)</a>:</h4>
<p>I copied  the class Patient in the dst3 model package to a new class named Patient2. I renamed all mentions of "Patient" in that class to "Patient2". I added the new profile to the list of profiles in the resource "fhirversion.properties". I compiled everything and started a cli-server. I can now store a Patient2 in the server and retrieve all stored Patient2s with "client.search().forResource(Patient2.class).execute();". When I contrain the search with a where, however, I do not get any results. There seems to be a detail which I missed, to be able to search for new profile classes. Could somebody give me a hint ?</p>



<a name="154023722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/querying%20copied%20profile/near/154023722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/querying.20copied.20profile.html#154023722">(Dec 07 2018 at 13:20)</a>:</h4>
<p>Hi Georg, i tried to reproduce your issue and didn't had one.</p>



<a name="154023723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/querying%20copied%20profile/near/154023723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/querying.20copied.20profile.html#154023723">(Dec 07 2018 at 13:22)</a>:</h4>
<p>How i did it:<br>
- created Patient2 <br>
- added Patient2 to: Fhirversion.properties<br>
- extended enum ResourceType by Patient2</p>



<a name="154023724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/querying%20copied%20profile/near/154023724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/querying.20copied.20profile.html#154023724">(Dec 07 2018 at 13:25)</a>:</h4>
<p>on the client side:</p>
<div class="codehilite"><pre><span></span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">FhirContext</span><span class="o">.</span><span class="na">forDstu3</span><span class="o">();</span>
        <span class="n">String</span> <span class="n">serverBase</span> <span class="o">=</span> <span class="s">&quot;http://localhost:8080/baseDstu3&quot;</span><span class="o">;</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">newRestfulGenericClient</span><span class="o">(</span><span class="n">serverBase</span><span class="o">);</span>
        <span class="n">ctx</span><span class="o">.</span><span class="na">registerCustomType</span><span class="o">(</span><span class="n">Patient2</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="n">Bundle</span> <span class="n">results</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">search</span><span class="o">().</span><span class="na">forResource</span><span class="o">(</span><span class="n">Patient2</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">where</span><span class="o">(</span><span class="n">Patient2</span><span class="o">.</span><span class="na">NAME</span><span class="o">.</span><span class="na">matches</span><span class="o">().</span><span class="na">value</span><span class="o">(</span><span class="s">&quot;Chalmers&quot;</span><span class="o">))</span>
                <span class="o">.</span><span class="na">returnBundle</span><span class="o">(</span><span class="n">Bundle</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">execute</span><span class="o">();</span>
</pre></div>



<a name="154023764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/querying%20copied%20profile/near/154023764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/querying.20copied.20profile.html#154023764">(Dec 07 2018 at 19:17)</a>:</h4>
<p>ah, thank you. You hinted me to the first mistake I made:<br>
I forgot to extend the enum ResourceType and so the Patient2 still returned ResourceType.Patient<br>
The seconds mistake I made was that I forgot the method fhirType(). Without this method the parts of the resource are not indexed in the tables "hfj_spidx_token" and "hfj_spidx_string" in the database. <br>
Now everything works like a charm.<br>
Thanks a lot</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
