---
layout: page
title: "FHIR Chat  · Parsing and traversing of FHIR query parameters · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Parsing.20and.20traversing.20of.20FHIR.20query.20parameters.html">Parsing and traversing of FHIR query parameters</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153985745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Parsing%20and%20traversing%20of%20FHIR%20query%20parameters/near/153985745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Parsing.20and.20traversing.20of.20FHIR.20query.20parameters.html#153985745">(Aug 13 2018 at 11:50)</a>:</h4>
<p>Hi, I would like to make experiments with the query API of the HAPI server. Could somebody who has some experience with the technical internals point me to some of the classes that are responsible for the parsing and traversing of the _query parameters, so I could reuse those parts ?<br>
Greetings</p>



<a name="153985879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Parsing%20and%20traversing%20of%20FHIR%20query%20parameters/near/153985879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Parsing.20and.20traversing.20of.20FHIR.20query.20parameters.html#153985879">(Aug 13 2018 at 19:21)</a>:</h4>
<p>Assuming you mean the JPA server, you're probably looking for the class <code>SearchBuilder</code>.</p>



<a name="153986272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Parsing%20and%20traversing%20of%20FHIR%20query%20parameters/near/153986272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Parsing.20and.20traversing.20of.20FHIR.20query.20parameters.html#153986272">(Aug 14 2018 at 10:59)</a>:</h4>
<p>Thank you. It could be that I mean this class, but I first have to dig a bit through the code from there.<br>
I would like to write an alternative query engine, so the JPA server could be the right place, although I would have thought to find the hook I am looking for some layers towards the abstract side because the thing I want to write isn't exactly a JPA server. I would like to find the place were the HAPI server takes the query request and gives it to the the arbitrary persistence layer where the query engine is also located.</p>
<p>Is the complete query represented by the SearchParameterMap which is passed in createQuery ? In createQuery the parameters for the AND and OR are explicitly processed. Are concepts like chained parameters, reverse chaining, composite search parameters and filter contained in the elements of the SearchParameterMap ?</p>



<a name="153986273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Parsing%20and%20traversing%20of%20FHIR%20query%20parameters/near/153986273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Parsing.20and.20traversing.20of.20FHIR.20query.20parameters.html#153986273">(Aug 14 2018 at 11:06)</a>:</h4>
<p>Is this useful? <a href="https://nhsconnect.github.io/CareConnectAPI/build_patient_server.html" target="_blank" title="https://nhsconnect.github.io/CareConnectAPI/build_patient_server.html">https://nhsconnect.github.io/CareConnectAPI/build_patient_server.html</a> We use this RESTful server as is but then implement our own query engine.</p>



<a name="153986281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Parsing%20and%20traversing%20of%20FHIR%20query%20parameters/near/153986281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Parsing.20and.20traversing.20of.20FHIR.20query.20parameters.html#153986281">(Aug 14 2018 at 11:53)</a>:</h4>
<p>Ah, thanks. I did not know the CareConnectAPI yet. Interesting. Is the CareConnectAPI (besides the API parts for non-FHIR parts like security) something like a facade for FHIR that can be used to capsule APIs like that of the HAPI server ?  It looks like a big REST-API-adapter that combines a lot of APIs, but does it also have a processing logic in itself or does it only serve as a bundle of APIs ?</p>
<p>Is the CCRI an alternative to HAPI ?</p>
<p>What software part represents the REST-API-part of the CareConnectAPI that I could use to use it as my facade for the FHIR query ? I found a gibthub repository (<a href="https://github.com/nhsconnect/CareConnectAPI" target="_blank" title="https://github.com/nhsconnect/CareConnectAPI">https://github.com/nhsconnect/CareConnectAPI</a>). Would I still use HAPI (or CCRI) as a processing server and replace parts in those FHIR servers to fulfill my needs, or would I directly implement something that gets attached to the CareConnectAPI ?</p>



<a name="153986346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Parsing%20and%20traversing%20of%20FHIR%20query%20parameters/near/153986346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Parsing.20and.20traversing.20of.20FHIR.20query.20parameters.html#153986346">(Aug 14 2018 at 14:56)</a>:</h4>
<p>CCRI is UK equivalent of USA's HSPC (Argonaut) Reference Implementation. HSPC used HAPI JPA server but we wanted to show you could use HAPI to create a FHIR server with an existing SQL server.<br>
HAPI does most of the REST and FHIR object work. We added the SQL to HAPI translations using JPA/Hibernate.</p>



<a name="153986347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Parsing%20and%20traversing%20of%20FHIR%20query%20parameters/near/153986347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Parsing.20and.20traversing.20of.20FHIR.20query.20parameters.html#153986347">(Aug 14 2018 at 14:58)</a>:</h4>
<p>It's still a HAPI FHIR Server but the internals are different.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
