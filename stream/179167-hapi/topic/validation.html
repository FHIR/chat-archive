---
layout: page
title: "FHIR Chat  · validation · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.html">validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153844306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/validation/near/153844306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.html#153844306">(Aug 18 2016 at 14:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> Reading <a href="http://hapifhir.io/doc_validation.html" target="_blank" title="http://hapifhir.io/doc_validation.html">http://hapifhir.io/doc_validation.html</a> I don't see any mention of using the <code>$validate</code> operation. Is it the case that users can POST a StructureDefinition to a HAPI server and then <code>$validate</code> new content against it? Is there a write-up anywhere of how this should work?</p>



<a name="153845233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/validation/near/153845233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.html#153845233">(Aug 26 2016 at 11:31)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191315">@Josh Mandel</span> ,</p>
<p>Yeah, really nothing about the public server is documented very well at this point.</p>
<p>What you're describing should work though. Basically when validating a resource, if the validator needs any profile resources (StructureDefinitions, ValueSets, etc.) it will look for them first in the ones that are bundled with HAPI (basically all of the ones that also come in the validator pack from the spec) and then looks in the local database.</p>



<a name="153846056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/validation/near/153846056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.html#153846056">(Sep 01 2016 at 08:40)</a>:</h4>
<p>James, did you know that we have used HAPI as an example validator behind Simplifier at the moment?</p>



<a name="153846094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/validation/near/153846094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.html#153846094">(Sep 01 2016 at 16:33)</a>:</h4>
<p>Sure did! I've had some conversations about Peter Hendricks about it... Although I haven't seen it in action yet :)</p>



<a name="153847489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/validation/near/153847489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.html#153847489">(Sep 16 2016 at 18:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> when I try to validate <a href="https://gist.github.com/anonymous/2949b5068cc03bf729cdaa26ca6ac1af" target="_blank" title="https://gist.github.com/anonymous/2949b5068cc03bf729cdaa26ca6ac1af">this document</a> (and, well, any document-type bundle I can come up with) in the validator at <a href="https://fhirtest.uhn.ca/validate" target="_blank" title="https://fhirtest.uhn.ca/validate">https://fhirtest.uhn.ca/validate</a>, I get </p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
  &quot;text&quot;: {
    &quot;status&quot;: &quot;generated&quot;,
    &quot;div&quot;: &quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\&quot;0\&quot;&gt;&lt;tr&gt;&lt;td style=\&quot;font-weight: bold;\&quot;&gt;error&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Unexpected failure while validating resource&lt;/pre&gt;&lt;/td&gt;\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t&lt;/tr&gt;\n\t\t&lt;/table&gt;\n\t&lt;/div&gt;&quot;
  },
  &quot;issue&quot;: [
    {
      &quot;severity&quot;: &quot;error&quot;,
      &quot;code&quot;: &quot;processing&quot;,
      &quot;diagnostics&quot;: &quot;Unexpected failure while validating resource&quot;
    }
  ]
}
</pre></div>


<p>Is this a known issue?</p>



<a name="153850947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/validation/near/153850947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.html#153850947">(Sep 27 2016 at 21:43)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191315">@Josh Mandel</span> just catching up on Zulip. Yup, this was a bug in the validator. Looks like it's fixed already in RI SVN, so I'm copying that fix over now.</p>
<p>Validating it now gives lots of other interesting errors, but they all appear to be legitimate, at least at a quick glance.</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;OperationOutcome&quot;</span><span class="p">,</span>
  <span class="nt">&quot;issue&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;processing&quot;</span><span class="p">,</span>
      <span class="nt">&quot;diagnostics&quot;</span><span class="p">:</span> <span class="s2">&quot;Unable to resolve the target of the reference in the bundle (Composition Subject)&quot;</span><span class="p">,</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;Bundle.entry[0].resource.resource.subject.reference&quot;</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;processing&quot;</span><span class="p">,</span>
      <span class="nt">&quot;diagnostics&quot;</span><span class="p">:</span> <span class="s2">&quot;Relative Reference appears inside Bundle whose entry is missing a fullUrl&quot;</span><span class="p">,</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;Bundle.entry:0&quot;</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;processing&quot;</span><span class="p">,</span>
      <span class="nt">&quot;diagnostics&quot;</span><span class="p">:</span> <span class="s2">&quot;The fullUrl element must be present when a resource is present, and not present otherwise [fullUrl.empty() xor resource.exists()]&quot;</span><span class="p">,</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;Bundle.entry&quot;</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;processing&quot;</span><span class="p">,</span>
      <span class="nt">&quot;diagnostics&quot;</span><span class="p">:</span> <span class="s2">&quot;Resource requires an id, but none is present&quot;</span><span class="p">,</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;Bundle.entry.resource&quot;</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;warning&quot;</span><span class="p">,</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;processing&quot;</span><span class="p">,</span>
      <span class="nt">&quot;diagnostics&quot;</span><span class="p">:</span> <span class="s2">&quot;Error unable to find code system http://loinc.org validating CodeableConcept&quot;</span><span class="p">,</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;Bundle.entry.resource.type&quot;</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;processing&quot;</span><span class="p">,</span>
      <span class="nt">&quot;diagnostics&quot;</span><span class="p">:</span> <span class="s2">&quot;Bundle entry missing fullUrl&quot;</span><span class="p">,</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;Bundle.entry&quot;</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;processing&quot;</span><span class="p">,</span>
      <span class="nt">&quot;diagnostics&quot;</span><span class="p">:</span> <span class="s2">&quot;Relative Reference appears inside Bundle whose entry is missing a fullUrl&quot;</span><span class="p">,</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;Bundle.entry.resource.subject&quot;</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;processing&quot;</span><span class="p">,</span>
      <span class="nt">&quot;diagnostics&quot;</span><span class="p">:</span> <span class="s2">&quot;Bundle entry missing fullUrl&quot;</span><span class="p">,</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;Bundle.entry&quot;</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;processing&quot;</span><span class="p">,</span>
      <span class="nt">&quot;diagnostics&quot;</span><span class="p">:</span> <span class="s2">&quot;Relative Reference appears inside Bundle whose entry is missing a fullUrl&quot;</span><span class="p">,</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;Bundle.entry.resource.subject&quot;</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span><span class="err">```</span>
</pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
