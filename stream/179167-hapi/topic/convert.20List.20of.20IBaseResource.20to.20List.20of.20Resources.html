---
layout: page
title: "FHIR Chat  · convert List of IBaseResource to List of Resources · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/convert.20List.20of.20IBaseResource.20to.20List.20of.20Resources.html">convert List of IBaseResource to List of Resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="186196471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/convert%20List%20of%20IBaseResource%20to%20List%20of%20Resources/near/186196471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luca Toldo <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/convert.20List.20of.20IBaseResource.20to.20List.20of.20Resources.html#186196471">(Jan 21 2020 at 15:56)</a>:</h4>
<p>Dear HAPIsts,<br>
I need to generate a List of Resource, from a List of IBaseResource.</p>
<div class="codehilite"><pre><span></span>(List&lt;Resource&gt;) BundleUtil.toListOfResources(myBundle);
</pre></div>


<p>I was expecting it to be compatible with a simple cast  since Resource implements IBaseResource ...</p>
<p>Any advice ?</p>



<a name="186198968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/convert%20List%20of%20IBaseResource%20to%20List%20of%20Resources/near/186198968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian Bacher <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/convert.20List.20of.20IBaseResource.20to.20List.20of.20Resources.html#186198968">(Jan 21 2020 at 16:20)</a>:</h4>
<p>Type erasure basically means that <code>List&lt;Resource&gt;</code> is not an instance of <code>List&lt;IBaseResource&gt;</code>, but even if that weren't the case, what you're trying to do would be unsafe as all <code>Resource</code>s implement <code>IBaseResource</code> but <code>IBaseResource</code>s are not necessarily assignable to the <code>Resource</code> type.</p>
<p>However, I think you can do what you want in a type-safe manner like so (assuming you're using Java 8 or newer):</p>
<div class="codehilite"><pre><span></span><span class="n">BundleUtil</span><span class="p">.</span><span class="na">toListOfResources</span><span class="p">(</span><span class="n">myBundle</span><span class="p">).</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">Resource</span><span class="p">.</span><span class="na">class</span><span class="p">::</span><span class="n">isInstance</span><span class="p">).</span><span class="na">map</span><span class="p">(</span><span class="n">Resource</span><span class="p">.</span><span class="na">class</span><span class="p">::</span><span class="n">cast</span><span class="p">).</span><span class="na">collect</span><span class="p">(</span>
                <span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
</pre></div>



<a name="186199468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/convert%20List%20of%20IBaseResource%20to%20List%20of%20Resources/near/186199468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luca Toldo <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/convert.20List.20of.20IBaseResource.20to.20List.20of.20Resources.html#186199468">(Jan 21 2020 at 16:24)</a>:</h4>
<p><span class="user-mention" data-user-id="259065">@Ian Bacher</span> thankyou  however now I get another error ...</p>
<p>BaseRuntimeElementDefinition cannot be cast to BaseRuntimeElementCompositeDefinition</p>



<a name="186398663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/convert%20List%20of%20IBaseResource%20to%20List%20of%20Resources/near/186398663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian Bacher <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/convert.20List.20of.20IBaseResource.20to.20List.20of.20Resources.html#186398663">(Jan 23 2020 at 15:20)</a>:</h4>
<blockquote>
<p>BaseRuntimeElementDefinition cannot be cast to BaseRuntimeElementCompositeDefinition</p>
</blockquote>
<p>Can you provide an example of what you're trying to do when you get this error?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
