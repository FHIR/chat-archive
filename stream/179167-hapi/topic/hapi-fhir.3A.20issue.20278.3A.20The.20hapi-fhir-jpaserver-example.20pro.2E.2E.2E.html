---
layout: page
title: "FHIR Chat  · hapi-fhir: issue 278: The hapi-fhir-jpaserver-example pro... · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-fhir.3A.20issue.20278.3A.20The.20hapi-fhir-jpaserver-example.20pro.2E.2E.2E.html">hapi-fhir: issue 278: The hapi-fhir-jpaserver-example pro...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153811893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-fhir%3A%20issue%20278%3A%20The%20hapi-fhir-jpaserver-example%20pro.../near/153811893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zulip HAPI Bot <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-fhir.3A.20issue.20278.3A.20The.20hapi-fhir-jpaserver-example.20pro.2E.2E.2E.html#153811893">(Jan 07 2016 at 14:59)</a>:</h4>
<p>karlmdavis opened <a href="https://github.com/jamesagnew/hapi-fhir/issues/278" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/issues/278">issue 278</a></p>
<blockquote>
<p>This class has a number of <code>if ... else</code> blocks that cope with the differences between DSTU1 and DSTU2, but does not yet include any logic for DSTU2.1.</p>
<p>Not a big deal, but would be nice.</p>
</blockquote>



<a name="153811895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-fhir%3A%20issue%20278%3A%20The%20hapi-fhir-jpaserver-example%20pro.../near/153811895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zulip HAPI Bot <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-fhir.3A.20issue.20278.3A.20The.20hapi-fhir-jpaserver-example.20pro.2E.2E.2E.html#153811895">(Jan 07 2016 at 15:11)</a>:</h4>
<p>karlmdavis <a href="https://github.com/jamesagnew/hapi-fhir/issues/278#issuecomment-169689785" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/issues/278#issuecomment-169689785">commented</a> on <a href="https://github.com/jamesagnew/hapi-fhir/issues/278" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/issues/278">issue 278</a></p>
<blockquote>
<p>I've created Pull Request #279 to address the <code>JpaServerDemo</code> changes needed. In addition, the following patch can be applied manually to address the other files that need to be updated to switch things to DSTU2.1:</p>
<div class="codehilite"><pre>diff --git a/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/FhirServerConfig.java b/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/FhirServerConfig.java
index 9186ebd..4f6e6b1 100644
--- a/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/FhirServerConfig.java
+++ b/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/FhirServerConfig.java
@@ -15,16 +15,16 @@
 import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;
 import org.springframework.transaction.annotation.EnableTransactionManagement;

-import ca.uhn.fhir.jpa.config.BaseJavaConfigDstu2;
+import ca.uhn.fhir.jpa.config.BaseJavaConfigDstu21;
 import ca.uhn.fhir.jpa.dao.DaoConfig;
-import ca.uhn.fhir.jpa.util.SubscriptionsRequireManualActivationInterceptorDstu2;
+import ca.uhn.fhir.jpa.util.SubscriptionsRequireManualActivationInterceptorDstu21;
 import ca.uhn.fhir.rest.server.interceptor.IServerInterceptor;
 import ca.uhn.fhir.rest.server.interceptor.LoggingInterceptor;
 import ca.uhn.fhir.rest.server.interceptor.ResponseHighlighterInterceptor;

 @Configuration
 @EnableTransactionManagement()
-public class FhirServerConfig extends BaseJavaConfigDstu2 {
+public class FhirServerConfig extends BaseJavaConfigDstu21 {

    /**
     * Configure FHIR properties around the the JPA server via this bean
@@ -108,7 +108,7 @@

    @Bean(autowire = Autowire.BY_TYPE)
    public IServerInterceptor subscriptionSecurityInterceptor() {
-       SubscriptionsRequireManualActivationInterceptorDstu2 retVal = new SubscriptionsRequireManualActivationInterceptorDstu2();
+       SubscriptionsRequireManualActivationInterceptorDstu21 retVal = new SubscriptionsRequireManualActivationInterceptorDstu21();
        return retVal;
    }

diff --git a/hapi-fhir-jpaserver-example/src/main/webapp/WEB-INF/web.xml b/hapi-fhir-jpaserver-example/src/main/webapp/WEB-INF/web.xml
index c81a6f6..ad7ebb5 100644
--- a/hapi-fhir-jpaserver-example/src/main/webapp/WEB-INF/web.xml
+++ b/hapi-fhir-jpaserver-example/src/main/webapp/WEB-INF/web.xml
@@ -42,7 +42,7 @@
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;FhirVersion&lt;/param-name&gt;
-           &lt;param-value&gt;DSTU2&lt;/param-value&gt;
+           &lt;param-value&gt;DSTU2_1&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;
diff --git a/hapi-fhir-jpaserver-example/src/test/java/ca/uhn/fhir/jpa/demo/ExampleServerIT.java b/hapi-fhir-jpaserver-example/src/test/java/ca/uhn/fhir/jpa/demo/ExampleServerIT.java
index f4efde6..13463e4 100644
--- a/hapi-fhir-jpaserver-example/src/test/java/ca/uhn/fhir/jpa/demo/ExampleServerIT.java
+++ b/hapi-fhir-jpaserver-example/src/test/java/ca/uhn/fhir/jpa/demo/ExampleServerIT.java
@@ -7,13 +7,13 @@

 import org.eclipse.jetty.server.Server;
 import org.eclipse.jetty.webapp.WebAppContext;
+import org.hl7.fhir.dstu21.model.Patient;
 import org.hl7.fhir.instance.model.api.IIdType;
 import org.junit.AfterClass;
 import org.junit.BeforeClass;
 import org.junit.Test;

 import ca.uhn.fhir.context.FhirContext;
-import ca.uhn.fhir.model.dstu2.resource.Patient;
 import ca.uhn.fhir.rest.client.IGenericClient;
 import ca.uhn.fhir.rest.client.ServerValidationModeEnum;
 import ca.uhn.fhir.rest.client.interceptor.LoggingInterceptor;
</pre></div>


</blockquote>



<a name="153811911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-fhir%3A%20issue%20278%3A%20The%20hapi-fhir-jpaserver-example%20pro.../near/153811911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zulip HAPI Bot <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-fhir.3A.20issue.20278.3A.20The.20hapi-fhir-jpaserver-example.20pro.2E.2E.2E.html#153811911">(Jan 08 2016 at 02:25)</a>:</h4>
<p>jamesagnew closed <a href="https://github.com/jamesagnew/hapi-fhir/issues/278" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/issues/278">issue 278</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
