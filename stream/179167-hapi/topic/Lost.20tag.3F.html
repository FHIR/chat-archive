---
layout: page
title: "FHIR Chat  · Lost tag? · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Lost.20tag.3F.html">Lost tag?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="191169439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Lost%20tag%3F/near/191169439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Lost.20tag.3F.html#191169439">(Mar 19 2020 at 20:16)</a>:</h4>
<p>When I POST an Observation with a tag to <a href="http://hapi.fhir.org/baseR4/Observation" target="_blank" title="http://hapi.fhir.org/baseR4/Observation">http://hapi.fhir.org/baseR4/Observation</a>, the creation succeeds, but the tag is dropped.  Are there some rules around what tags HAPI FHIR accepts?  The WildFHIR server keeps the tag when I post it there.  Here's an Observation for my test case:</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;Observation&quot;,
  &quot;status&quot;: &quot;final&quot;,
  &quot;code&quot;: {
    &quot;coding&quot;: [
      {
        &quot;system&quot;: &quot;http://loinc.org&quot;,
        &quot;code&quot;: &quot;29463-7&quot;,
        &quot;display&quot;: &quot;Weight&quot;
      }
    ],
    &quot;text&quot;: &quot;Weight&quot;
  },
  &quot;meta&quot;: {
    &quot;tag&quot;: [
      {
        &quot;display&quot;: &quot;lformsVersion: 22.0.0&quot;
      }
    ]
  },
  &quot;valueQuantity&quot;: {
    &quot;value&quot;: &quot;42&quot;,
    &quot;code&quot;: &quot;kg&quot;,
    &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;
  },
  &quot;effectiveDateTime&quot;: &quot;2020-03-19T15:12:25.585Z&quot;,
  &quot;issued&quot;: &quot;2020-03-19T15:12:25.585Z&quot;
}
</pre></div>



<a name="191170384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Lost%20tag%3F/near/191170384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Lost.20tag.3F.html#191170384">(Mar 19 2020 at 20:25)</a>:</h4>
<p>HAPI requires tags to have at least a system or a value, so it ignores tags that are only a display name</p>



<a name="191173463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Lost%20tag%3F/near/191173463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Lost.20tag.3F.html#191173463">(Mar 19 2020 at 20:50)</a>:</h4>
<p>Is that correct behavior?  In a coding, "code" is not required, and I think the only use of coding without a code would be to have an uncoded "display".</p>



<a name="191177170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Lost%20tag%3F/near/191177170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Lost.20tag.3F.html#191177170">(Mar 19 2020 at 21:22)</a>:</h4>
<p>It's definitely not behaviour that is mandated by the spec or anything like that.. but it is definitely how the current design works. Kind of like HAPI's requirement out of the box that client-assigned IDs be non-numbers</p>



<a name="191239542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Lost%20tag%3F/near/191239542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Lost.20tag.3F.html#191239542">(Mar 20 2020 at 13:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> I am not sure if you are saying that this is a known issue with HAPI which, time permitting, will eventually be addressed (very understandable) or that you think it is okay for a server to place additional restrictions on resources beyond what FHIR specifies.  The latter, unless done through profiling, causes problems for interoperability, doesn't it?   (This is more of a theoretical question; it is not hard for me to add a code to my tag.)</p>



<a name="191241813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Lost%20tag%3F/near/191241813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Lost.20tag.3F.html#191241813">(Mar 20 2020 at 13:26)</a>:</h4>
<p>I guess I'm characterizing it as "sub-optimal behaviour that will hopefully either be fixed completely or be made configurable in the future, but that isn't currently being worked on". I am sure that every FHIR server out there has a few gremlins like this one that are based on their particular design. :)</p>
<p>A bigger priority for me is that HAPI's tagging system does have some concurrency issues- creating a brand new (never before used) tag on two resources at the exact same time can lead to an optimistic lock failure, and this seems to burn a surprising number of people... Perhaps this issue would get fixed as a part of the fix for that one.</p>



<a name="191242091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Lost%20tag%3F/near/191242091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Lost.20tag.3F.html#191242091">(Mar 20 2020 at 13:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191319">James Agnew</span> <a href="#narrow/stream/179167-hapi/topic/Lost.20tag.3F/near/191241813" title="#narrow/stream/179167-hapi/topic/Lost.20tag.3F/near/191241813">said</a>:</p>
<blockquote>
<p>I am sure that every FHIR server out there has a few gremlins like this one that are based on their particular design. :)</p>
</blockquote>
<p>And the clients, too.  <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
