---
layout: page
title: "FHIR Chat  · Overriding providers in the JPA server · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html">Overriding providers in the JPA server</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153855692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855692">(Nov 07 2016 at 02:18)</a>:</h4>
<p>I'm looking to override a Resource Provider in a HAPI JPA server (customising search, but leaving the JPA/DAO storage backing intact). Is this possible/how do I do this? I've tried defining a new ResourceProvider that delegates to the original tinder-generated DAO-backed provider, but I end up with NPEs because of non-existent DAOs</p>



<a name="153855695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855695">(Nov 07 2016 at 02:59)</a>:</h4>
<p>We've done this a fair bit internally actually.. Easiest way is to subclass the tinder-generated RP and add your own stuff to it.</p>
<p>One way or the other, it should work though. What kind of NPEs are you getting? Are you still using Spring to create the instance of your new RP?</p>



<a name="153855697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855697">(Nov 07 2016 at 03:12)</a>:</h4>
<p>Initially I tried that, but I had problems with it "No qualifying bean of type [ca.uhn.fhir.jpa.demo.provider.MedicationResourceProvider] is defined"</p>



<a name="153855698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855698">(Nov 07 2016 at 03:12)</a>:</h4>
<p>so I had reverted to just instantiating it (which could be causing more problems that it solves)</p>



<a name="153855701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855701">(Nov 07 2016 at 03:26)</a>:</h4>
<p>Now that think about it, it's the DAOs that are more important to create with Spring. The RPs only have one dependency: the corresponding DAO.</p>
<p>Were you actually passing a reference to the DAO to your manually created RP? If so, what is the stacktrace of the error?</p>



<a name="153855702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855702">(Nov 07 2016 at 03:27)</a>:</h4>
<p>No.</p>



<a name="153855704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855704">(Nov 07 2016 at 03:28)</a>:</h4>
<p>Oh yeah it definitely won't work without that.. Just grab it from the spring context and pass it in</p>



<a name="153855705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855705">(Nov 07 2016 at 03:28)</a>:</h4>
<p>I tried 2 things. 1: MyRP extends BaseRP, overrides search and delegates to the BaseRP.search<br>
2: MyRP autowires BaseRP, implements search and delegates to the autowired baseRP</p>



<a name="153855706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855706">(Nov 07 2016 at 03:29)</a>:</h4>
<p>Not surprising that the first doesn't work, now I think about it</p>



<a name="153855707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855707">(Nov 07 2016 at 03:29)</a>:</h4>
<p>#1 sounds like the approach we've used..</p>



<a name="153855708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855708">(Nov 07 2016 at 03:29)</a>:</h4>
<p>but it 100% won't work if you don't give it a dao since that's where basically every method goes</p>



<a name="153855710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855710">(Nov 07 2016 at 04:58)</a>:</h4>
<p>Hmm, still struggling to find how to do that.</p>



<a name="153855711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855711">(Nov 07 2016 at 05:30)</a>:</h4>
<p>Do I need to register my provider with the web.xml or something?</p>



<a name="153855733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Overriding%20providers%20in%20the%20JPA%20server/near/153855733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Overriding.20providers.20in.20the.20JPA.20server.html#153855733">(Nov 07 2016 at 11:39)</a>:</h4>
<p>Assuming you're basing your work on the <code>hapi-fhir-jpaserver-example</code> project, one way would be to do it in the RestulServer class in the initialize method, i.e. <a href="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/JpaServerDemo.java#L42" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/JpaServerDemo.java#L42">here</a></p>
<p>In there you could do a call like:</p>
<div class="codehilite"><pre>dao = myAppCtx.getBean(&quot;myPatientDaoDstu3&quot;, IFhirResourceDao.class);
</pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
