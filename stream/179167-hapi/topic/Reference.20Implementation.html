---
layout: page
title: "FHIR Chat  · Reference Implementation · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html">Reference Implementation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153832266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832266">(Jun 10 2016 at 04:37)</a>:</h4>
<p>I'm writing a tool that takes mappings I put in the the mapping column for a profile, and turns the resulting profile into a transformer that generates a FHIR Resource from the mapped source material.  One of the challenges I'm having is all the vagaries of how the RI works.</p>



<a name="153832267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832267">(Jun 10 2016 at 04:40)</a>:</h4>
<p>When a field is polymorphic in the RI, it has a setFieldname() signature.  When a field is typed, there is a setFieldnameType() signature.  I would expect for polymorphic fields to see setFieldname(Type x) to work as specified, and setFieldnameSpecifictype(SpecificType x) to also exist.  It's frustrating that it doesn't because it means I have to put conditions in to check for polymorphism IN the base class, which model I really didn't want to have to read if I could skip it.</p>



<a name="153832268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832268">(Jun 10 2016 at 04:40)</a>:</h4>
<p>Oh, I'm working with DSTU2 BTW, not DSTU3.</p>



<a name="153832269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832269">(Jun 10 2016 at 04:54)</a>:</h4>
<p>Another challenge is dealing with the enumeration types when the base type is code.  I understand why this was done, but the problem is that I have no consistent way to figure out whether the enumeration is defined WITHIN the resource or separately (e.g., compare AdministrativeGender with ObservationStatus, nor when I have to be sure that the enumeration is used rather than the codeType.  What I really want is a setXElement(CodeType t) method for these fields that is permitted to thrown an exception is CodeType is not a legal value.</p>



<a name="153832270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832270">(Jun 10 2016 at 05:42)</a>:</h4>
<p>there's no need to clutter up the interface with setFooType methods, since they all do the same thing</p>



<a name="153832271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832271">(Jun 10 2016 at 05:43)</a>:</h4>
<p>and clutter is the relevant word</p>



<a name="153832272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832272">(Jun 10 2016 at 05:43)</a>:</h4>
<p>you can easily check the polymorphism by looking at the base path</p>



<a name="153832273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832273">(Jun 10 2016 at 05:43)</a>:</h4>
<p>I know that's not as easy as ignoring it, but it shouldn't be hard</p>



<a name="153832274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832274">(Jun 10 2016 at 05:47)</a>:</h4>
<p>I could live with that one by simply extending the types and adding the polymorphic methods myself too, so I can live with that either way.</p>



<a name="153832275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832275">(Jun 10 2016 at 05:48)</a>:</h4>
<p>However, the problem with code is truly challenging.  How in the heck do I figure out where the enumeration is defined or if it is even used.  The RI apparently has some rules about when those are used and when they are not, but I cannot figure them out.  </p>



<a name="153832276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832276">(Jun 10 2016 at 05:50)</a>:</h4>
<p>well, if the code has a required value set binding, then it will get an enumeration </p>



<a name="153832277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832277">(Jun 10 2016 at 05:50)</a>:</h4>
<p>Nope.</p>



<a name="153832278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832278">(Jun 10 2016 at 05:50)</a>:</h4>
<p>if the required value set binding is shared across more than one place, it will be in Enumerations, else it will be in the resource</p>



<a name="153832279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832279">(Jun 10 2016 at 05:50)</a>:</h4>
<p>I thought that was the case, but apparently it is not as far as I can tell.</p>



<a name="153832280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832280">(Jun 10 2016 at 05:51)</a>:</h4>
<p>it should be the case</p>



<a name="153832281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832281">(Jun 10 2016 at 05:51)</a>:</h4>
<p>I'll dig up my example for that one.</p>



<a name="153832282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832282">(Jun 10 2016 at 05:51)</a>:</h4>
<p>On the Enumerations case, the information about whether the value-set is used in more than one place is NOT included in the structure definition for the value set.  I have to read the whole freakin FHIR model to figure that out.</p>



<a name="153832283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832283">(Jun 10 2016 at 05:52)</a>:</h4>
<p>yes, that's not very friendly. I'm thinking about that</p>



<a name="153832284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832284">(Jun 10 2016 at 05:52)</a>:</h4>
<p>I could maybe parse the HTML page but that's a hack.  I might have to resort to it.</p>



<a name="153832285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832285">(Jun 10 2016 at 05:52)</a>:</h4>
<p>in other languages, I can alias these things, but it's not so easy in java</p>



<a name="153832286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832286">(Jun 10 2016 at 05:52)</a>:</h4>
<p>parse html? why do that? </p>



<a name="153832287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832287">(Jun 10 2016 at 05:55)</a>:</h4>
<p>To get to the "is it used in more than one place" data.</p>



<a name="153832288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832288">(Jun 10 2016 at 05:55)</a>:</h4>
<p>Only place I see it in the output.</p>



<a name="153832289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832289">(Jun 10 2016 at 05:55)</a>:</h4>
<p>Althought arguably, the build could add that data to the .json and .xml defs as an extension.</p>



<a name="153832290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832290">(Jun 10 2016 at 05:56)</a>:</h4>
<p>I could. no one has asked for it before </p>



<a name="153832291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832291">(Jun 10 2016 at 05:57)</a>:</h4>
<p>it sounds more like something that belongs in the java space though, since it's specific to the Java RI</p>



<a name="153832292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832292">(Jun 10 2016 at 05:57)</a>:</h4>
<p>On the aliasing, you COULD provide Patient.AdministrativeGender class that supported the fromCode() method.</p>



<a name="153832293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832293">(Jun 10 2016 at 05:57)</a>:</h4>
<p>Not really.  </p>



<a name="153832294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832294">(Jun 10 2016 at 05:58)</a>:</h4>
<p>if I provide a Patient.AdministrativeGender, I'd break lots of code because I'm not providing a common class for the common usages </p>



<a name="153832295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832295">(Jun 10 2016 at 05:58)</a>:</h4>
<p>I'm reading the .json to generate Java code.  I DON'T want to have to read the Java RI model.  I want some simple rules to go from the structureDef's to the Java.  Or I want the rules that do exist to be documented somewhere.</p>



<a name="153832296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832296">(Jun 10 2016 at 05:58)</a>:</h4>
<p>Huh?</p>



<a name="153832297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832297">(Jun 10 2016 at 05:59)</a>:</h4>
<p>that doesn't change the fact that this is specific to the Java RI</p>



<a name="153832298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832298">(Jun 10 2016 at 05:59)</a>:</h4>
<p>there is a solution, actually, which is to generate getFooCode / setFooCode for enumerations, as well as the 2 existing pairs of accessors </p>



<a name="153832299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832299">(Jun 10 2016 at 06:01)</a>:</h4>
<p>Yes, which was what I asked for above, but called it setFooElement instead.  That would work.</p>



<a name="153832300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832300">(Jun 10 2016 at 06:02)</a>:</h4>
<p>but that already exists</p>



<a name="153832301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832301">(Jun 10 2016 at 06:02)</a>:</h4>
<p>ah but not with the type you want </p>



<a name="153832302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832302">(Jun 10 2016 at 06:03)</a>:</h4>
<p>Right.</p>



<a name="153832303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832303">(Jun 10 2016 at 06:03)</a>:</h4>
<p>I'd be fine with setFooCode, because the name difference also deals with the behavioral difference.  One throws an exception, the other does not.</p>



<a name="153832304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832304">(Jun 10 2016 at 06:04)</a>:</h4>
<p>Do other RI's locally define the enumeration unless it is shared?</p>



<a name="153832305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832305">(Jun 10 2016 at 06:05)</a>:</h4>
<p>I'll start by putting it in the DSTU3 version for non-repeating enumerations. </p>



<a name="153832306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832306">(Jun 10 2016 at 06:05)</a>:</h4>
<p>other RIs work very differently depending on the language</p>



<a name="153832307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832307">(Jun 10 2016 at 06:07)</a>:</h4>
<p>The dotnet client implementation also generates the enumerations using the same rules.<br>
And yes, I do parse the entire XML (profile-datatypes and profile-resource) to determine if it is used elsehwere (simple XSLT usage) to work out where to put the enumeration class.</p>



<a name="153832308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832308">(Jun 10 2016 at 06:10)</a>:</h4>
<p>Immunization.setStatus(String), Immunization.setStatusElement(CodeType)</p>



<a name="153832309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832309">(Jun 10 2016 at 06:10)</a>:</h4>
<p>doesn't follow the "required" rule.</p>



<a name="153832310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832310">(Jun 10 2016 at 06:12)</a>:</h4>
<p>Brian, I'm parsing 2-3 files now.  I don't really want to have to parse everything.  It's already taking me an hour just to build my profiles.  If I had to read everything to understand the RI model, it would be a lot more complicated.</p>



<a name="153832311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832311">(Jun 10 2016 at 06:13)</a>:</h4>
<p>Brian is referring to building the RI</p>



<a name="153832312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832312">(Jun 10 2016 at 06:15)</a>:</h4>
<p>Given that valueset-*.html has the data about where a value set is used, it's pretty clear that valueset-*.json could have an extension that said "used in multiple places".</p>



<a name="153832313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832313">(Jun 10 2016 at 06:15)</a>:</h4>
<p>(yes, for the dotnet RI)</p>



<a name="153832315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832315">(Jun 10 2016 at 06:18)</a>:</h4>
<p>FYI, the dotnet RI is completely generated from 4 files (profiles-resources.xml, profiles-types.xml, search-parameters.xml and expansions.xml)</p>



<a name="153832316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832316">(Jun 10 2016 at 06:19)</a>:</h4>
<p>but you don't need that if I generate the setFooCoode methods...?</p>



<a name="153832351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832351">(Jun 10 2016 at 10:13)</a>:</h4>
<p>I'm not getting how these <code>getFooCode()</code> methods would help. The existing methods follow the same pattern as all the other primitive fields:</p>
<ul>
<li><code>getFoo()</code> returns the native type (an Enum, a Date, a String, etc..)</li>
<li><code>getFooElement()</code> returns the FHIR type (Enumeration, DateType, etc)</li>
</ul>
<p>On the DSTU2 structures there is the matter of the signatures being a bit less predictable with when they throw exceptions, as Kieth points out, but that's already resolved in the DSTU3 ones. Is this just a DSTU2 issue?</p>



<a name="153832352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832352">(Jun 10 2016 at 10:13)</a>:</h4>
<p>Of course I'm using <code>Patient.gender</code> as my reference point. Is there another field where the problem is more apparent?</p>



<a name="153832353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832353">(Jun 10 2016 at 10:15)</a>:</h4>
<p>the AsCode() methods always return a string. The existing native codes return either a code or an enumeration, and the namespece of the enumeration is uncertain. </p>



<a name="153832354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832354">(Jun 10 2016 at 10:15)</a>:</h4>
<p>exposing the string code directly makes sense to me</p>



<a name="153832355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832355">(Jun 10 2016 at 10:16)</a>:</h4>
<p>So the issue is wanting a predictable way of getting the string value of the code?</p>
<p>Wouldn't <code>getFooElement().getValueAsString()</code> accomplish this?</p>



<a name="153832356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832356">(Jun 10 2016 at 10:17)</a>:</h4>
<p>what does it return if there's no foo? </p>



<a name="153832357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832357">(Jun 10 2016 at 10:17)</a>:</h4>
<p>null</p>



<a name="153832358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832358">(Jun 10 2016 at 10:17)</a>:</h4>
<p>(Not a NPE though, just returns null)</p>



<a name="153832359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832359">(Jun 10 2016 at 10:17)</a>:</h4>
<p>and how does the set work? set null to make foo go away? </p>



<a name="153832360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832360">(Jun 10 2016 at 10:18)</a>:</h4>
<p><code>getFooElement().setValueAsString(null);</code> would accomplish that</p>



<a name="153832361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832361">(Jun 10 2016 at 10:18)</a>:</h4>
<p>so........ I think that works for Keith. I should have thought of that</p>



<a name="153832398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832398">(Jun 10 2016 at 19:09)</a>:</h4>
<p>Right, but that's only going to work for DSTU3... and I have DSTU2 to consider as well.</p>



<a name="153832399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832399">(Jun 10 2016 at 19:15)</a>:</h4>
<p>Hunh, that looks look it might work.</p>



<a name="153832412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Reference%20Implementation/near/153832412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Reference.20Implementation.html#153832412">(Jun 10 2016 at 20:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> Thanks!  That solved it for me.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
