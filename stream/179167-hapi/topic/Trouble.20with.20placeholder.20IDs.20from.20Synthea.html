---
layout: page
title: "FHIR Chat  · Trouble with placeholder IDs from Synthea · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html">Trouble with placeholder IDs from Synthea</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="221256616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/221256616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Vreeman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#221256616">(Dec 30 2020 at 23:49)</a>:</h4>
<p>I'm trying to load some synthetic data generated by Synthea . Organizations load fine, but the Practitioner bundle  fails with  messages like:</p>
<p>"Unable to satisfy placeholder ID urn:uuid:d6c9c111-f4ed-3768-b6f0-e9983b6fa865 found in element named 'practitioner' within resource of type: PractitionerRole" </p>
<p>This happens on both the Logica Sandbox and our SmileCDR instance (which is configured with server IDs to be created with UUIDs). Any thoughts? <span class="user-mention" data-user-id="191319">@James Agnew</span> <span class="user-mention" data-user-id="191381">@Jason Walonoski</span> </p>
<p>Thanks!</p>



<a name="221586538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/221586538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#221586538">(Jan 04 2021 at 21:57)</a>:</h4>
<p>For those reading, the practitioner bundle should contain only Practitioner and PractitionerRole resources. Reviewing some freshly generated bundles... and nothing seems out of the ordinary as far as I can tell. Do any patient bundles load?</p>



<a name="221586584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/221586584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#221586584">(Jan 04 2021 at 21:57)</a>:</h4>
<p>Is the given identifier <code>urn:uuid:d6c9c111-f4ed-3768-b6f0-e9983b6fa865</code> actually in your bundle?</p>



<a name="221959990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/221959990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Vreeman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#221959990">(Jan 07 2021 at 16:02)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191381">@Jason Walonoski</span> .  Yes, the Practitioner bundles created have only Practitioner and PractitionerRole resources. In the example above, the Practitioner resource with that uuid is in the bundle (just before the PractitionerRole that references it).  </p>
<p>On SmileCDR, I was able to get the Patient bundles to load (without doing the Practitioner bundle) by enabling "Allow Inline Match URL References Enabled" (in addition to "Auto-Create Placeholder Reference Targets" which I had on previously). <a href="https://smilecdr.com/docs/configuration_categories/fhir_configuration.html">https://smilecdr.com/docs/configuration_categories/fhir_configuration.html</a> </p>
<p>For my main project needs, I'm good now b/c I'm focused on the patient data.</p>
<p>However, others may be looking to do this with Logica. In my Logica R4 sandbox,  when I post the Practitioner bundle, all of the Practitioner resources are successfully created, but all the PractitionerRole resources from that bundle fail (400) with a message as above. Attempting a Patient Bundle resource load  then also fails with the message:  "Invalid match URL "Practitioner?identifier=https://github.com/synthetichealth/synthea|d6c9c111-f4ed-3768-b6f0-e9983b6fa865" - No resources match this search.</p>
<p>Makes sense because the Practitioner resources that do load have not not retained the uuid as an identifier, e.g.:</p>
<p><a href="https://api.logicahealth.org/SDCTest/open/Practitioner/16173">https://api.logicahealth.org/SDCTest/open/Practitioner/16173</a></p>



<a name="221988481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/221988481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#221988481">(Jan 07 2021 at 19:25)</a>:</h4>
<p>A possibly similar case for hapi r4 (v5.1.0):  I had to use the identifier value  only without the system uri in the request.ifNoneExists to do the matching within the transaction bundle.</p>



<a name="222012606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/222012606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#222012606">(Jan 07 2021 at 22:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191978">Daniel Vreeman</span> <a href="#narrow/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea/near/221959990">said</a>:</p>
<blockquote>
<p>However, others may be looking to do this with Logica. In my Logica R4 sandbox,  when I post the Practitioner bundle, all of the Practitioner resources are successfully created, but all the PractitionerRole resources from that bundle fail (400) with a message as above. Attempting a Patient Bundle resource load  then also fails with the message:  "Invalid match URL "Practitioner?identifier=https://github.com/synthetichealth/synthea|d6c9c111-f4ed-3768-b6f0-e9983b6fa865" - No resources match this search.</p>
<p>Makes sense because the Practitioner resources that do load have not not retained the uuid as an identifier</p>
</blockquote>
<p>Ah, yes. I see. <span class="user-mention" data-user-id="191438">@Marc Hadley</span> We may need to relook at the identifiers across transaction bundles with the practitioner bundle in particular.</p>



<a name="222130743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/222130743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#222130743">(Jan 08 2021 at 21:49)</a>:</h4>
<p>This is tricky. The practitioner bundle is a <code>batch</code> since we are trying to avoid creating duplicate practitioners via <code>ifNoneExists</code>. If we used a <code>transaction</code> then all of the practitioners would fail to load if only one of them already exists. But, it sounds like these servers are replacing the resource ids on each <code>Practitioner</code> prior to processing the corresponding <code>PractitionerRole</code> so the reference from the latter to the former is failing. You can only use search references (e.g. <code>Practitioner?identifier=http://hl7.org/fhir/sid/us-npi|9999999559</code>) within transactions so we can't switch to using those in the practitioner bundle for the reason described earlier.</p>



<a name="222131094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/222131094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#222131094">(Jan 08 2021 at 21:52)</a>:</h4>
<p>I do see a bug in the patient bundle we generate where some of the query references to practitioners (from EOB and Coverage) are using the practitioner UUID instead of the NPI - I can fix those.</p>



<a name="222131449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/222131449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#222131449">(Jan 08 2021 at 21:56)</a>:</h4>
<p>One possible approach would be to create a transaction bundle for each pair of <code>Practitioner</code> and <code>PractitionerRole</code>, that would allow the references to work correctly and keep practitioners separate so we don't fail to load them all if only one (or more) already exist.</p>



<a name="222653585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/222653585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#222653585">(Jan 13 2021 at 22:13)</a>:</h4>
<p><strong>Proposal</strong>: change the references from <code>PractitionerRole</code> to <code>Practitioner</code>, <code>Location</code> and <code>Organization</code> to be logical references (<code>Reference.identifier</code>) instead of literal (<code>Reference.reference</code>). This would match the reference in the hospital bundle from <code>Location</code> to <code>Organization</code>.</p>



<a name="222653600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/222653600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#222653600">(Jan 13 2021 at 22:13)</a>:</h4>
<p>(deleted)</p>



<a name="222655963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/222655963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#222655963">(Jan 13 2021 at 22:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191978">@Daniel Vreeman</span> <span class="user-mention" data-user-id="192103">@Lin Zhang</span> Thoughts?</p>



<a name="222662277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/222662277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#222662277">(Jan 13 2021 at 23:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191438">@Marc Hadley</span> Thanks.  I have no experience with Synthea although it's already downloaded. And I'm interested to use it.</p>



<a name="222762059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/222762059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Vreeman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#222762059">(Jan 14 2021 at 18:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191438">@Marc Hadley</span>  I think that should work. I manually mocked up an example using the Reference.identifier approach and the bundles loaded in Logica successfully, but will admit that I'm not an expert on the tradeoffs of logical vs literal references.</p>



<a name="234218691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/234218691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#234218691">(Apr 12 2021 at 19:46)</a>:</h4>
<p>Hello! <br>
First, thanks for everyone who works on the synthea tool, I hadn't delved into it much before, but it's amazingly useful.<br>
Second, I was wondering if there were any suggestions for an issue I've run into. I'm trying to upload synthea data to google cloud. It generally goes ok, except to references for Practitioners and Organizations. So my first step was to upload these first, so that way I would know that they were on the server. </p>
<p>But it still gives me a parsing error: "an error occurred while reading the record starting at byte 0: error in parsing references Practitioner?identifier=http://hl7.org/fhir/sid/us-npi|9999907989"</p>
<p>Has anyone else run into this issue? Is it a problem with how google has implemented their FHIR server?</p>



<a name="234393287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/234393287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#234393287">(Apr 13 2021 at 20:15)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="235060">@Grey Faulkenberry</span>  Synthea only creates bundles of type transaction. So I think that everything must be resolved for the transaction to be successful or it fails. I got past this by POSTing the hospital file, then practitioner after that. Do you have a hospitals/primary care locations file?</p>



<a name="234393782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/234393782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#234393782">(Apr 13 2021 at 20:19)</a>:</h4>
<p>I do. I run synthea with the bulk option on, and I have a hospitalInformation.json file and a practitionerInformation.json file. I can upload those as bundles, and that works properly. But then I have Patient.ndjson, Medication.ndjson, Provenenance.ndjson, etc.</p>



<a name="234393812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/234393812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#234393812">(Apr 13 2021 at 20:19)</a>:</h4>
<p>The Patient.ndjson loads fine, but any of the ones that reference a Provider fail</p>



<a name="234394505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/234394505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#234394505">(Apr 13 2021 at 20:24)</a>:</h4>
<p>Hmm. That sounds frustrating. Does your use case require bulk or can you use the default (patient bundles) to get around this issue?</p>



<a name="234396062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/234396062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#234396062">(Apr 13 2021 at 20:35)</a>:</h4>
<p>Haha, actually, you may have just given me the answer. I assigned: "exporter.fhir.transaction_bundle = false", which causes it to create as a collection bundle, which seems to let me upload.</p>



<a name="234397985"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/234397985" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Stanley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#234397985">(Apr 13 2021 at 20:48)</a>:</h4>
<p>Interesting. I'm not familiar with that option. So, with 'true' it works? Or the other way around?</p>



<a name="234398804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trouble%20with%20placeholder%20IDs%20from%20Synthea/near/234398804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trouble.20with.20placeholder.20IDs.20from.20Synthea.html#234398804">(Apr 13 2021 at 20:54)</a>:</h4>
<p>No with false it works. With true, all of the bundles were transaction bundles, and it apparently didn't like something about the cross references. With collection, it doesn't put the same constraints on the data uploaded. In the long run probably not how I should do it, but I'm still learning the platform, so I was really just trying to get the data uploaded.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
