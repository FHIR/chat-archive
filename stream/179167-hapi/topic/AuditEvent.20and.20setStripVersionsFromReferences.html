---
layout: page
title: "FHIR Chat  · AuditEvent and setStripVersionsFromReferences · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.20and.20setStripVersionsFromReferences.html">AuditEvent and setStripVersionsFromReferences</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="259159759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent%20and%20setStripVersionsFromReferences/near/259159759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.20and.20setStripVersionsFromReferences.html#259159759">(Oct 26 2021 at 20:56)</a>:</h4>
<p>In an AuditEvent, it is important that References to resources are versioned. However, the default behaviour of HAPI's serialisation is to strip version references and thus the values of <code>AuditEvent.entity.what</code> are serialised without the version component of the reference.<br>
From inspection of <code>streamResponseAsResource</code>, it appears that even with the use of interceptors (<span class="user-mention" data-user-id="191319">@James Agnew</span>  ;-), there is no simple way to tell HAPI to retain the version references?</p>



<a name="259184118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent%20and%20setStripVersionsFromReferences/near/259184118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.20and.20setStripVersionsFromReferences.html#259184118">(Oct 27 2021 at 01:43)</a>:</h4>
<p>You should be able to call <code>setDontStripVersionsFromReferencesAtPaths</code> on either the parser (if you're serializing manually) or on the <code>FhirContext#getParserOptions()</code> object (if you want it to apply globally)</p>



<a name="259296041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent%20and%20setStripVersionsFromReferences/near/259296041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.20and.20setStripVersionsFromReferences.html#259296041">(Oct 27 2021 at 19:45)</a>:</h4>
<p>The challenge I have is that I only want it set when returning the AuditEvent, and I can't get to the parser that's created by streamResponseAsResource to call it there and I really don't want to have to replicate all the other logic going on in there.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
