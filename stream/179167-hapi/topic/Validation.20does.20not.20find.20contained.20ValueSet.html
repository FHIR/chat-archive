---
layout: page
title: "FHIR Chat  · Validation does not find contained ValueSet · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20does.20not.20find.20contained.20ValueSet.html">Validation does not find contained ValueSet</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="218831883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20does%20not%20find%20contained%20ValueSet/near/218831883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20does.20not.20find.20contained.20ValueSet.html#218831883">(Dec 04 2020 at 13:27)</a>:</h4>
<p>We're using HAPI to validate QuestionnaireResponse instances against their matching questionnaires. To do that, we wrote out own validation support that feeds in the questionnaire and overrides <code>fetchResource</code> to return them. We chain it with a PrePopulatedValidationSupport and when we feed the answer value sets used by the questionnaires into the latter, everything works great. However, if the answer value sets are contained in the Questionnaire itself, the validator does not find it - it does not validate the code and emits the warning: "ValueSet #valset not found by validator". Here is an example of a valid Questionnaire provoking this: <a href="/user_uploads/10155/P2zfJGw4DHfTE_Nw2kwxzYTl/test.json">test.json</a> </p>
<p>Is that a known limitation or is there a way to get it to work?</p>



<a name="218887131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20does%20not%20find%20contained%20ValueSet/near/218887131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20does.20not.20find.20contained.20ValueSet.html#218887131">(Dec 04 2020 at 20:27)</a>:</h4>
<p>is this something that works in the standalone validator?</p>



<a name="219048657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20does%20not%20find%20contained%20ValueSet/near/219048657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20does.20not.20find.20contained.20ValueSet.html#219048657">(Dec 07 2020 at 07:31)</a>:</h4>
<p>Yes, it does. I just checked with the newest validator and <a href="/user_uploads/10155/fMJxrY5S-w67NRVgH6ZuynWn/test-response.json">this QuestionnairesResponsetest-response example</a>  and it correctly gives the error that the code is not in the options value set. </p>
<p>For validation, 'm chaining in DefaultProfileValidationSupport, InMemoryTerminologyServerValidationSupport, CommonCodeSystemsTerminologyService, and PrePopulatedValidationSupport, in addition to my custom Questionnaire validation support. I'm using HAPI 5.2.</p>



<a name="236347093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20does%20not%20find%20contained%20ValueSet/near/236347093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Nau <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20does.20not.20find.20contained.20ValueSet.html#236347093">(Apr 27 2021 at 14:31)</a>:</h4>
<p>I would be interested in a solution for this as well :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
