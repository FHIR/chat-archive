---
layout: page
title: "FHIR Chat  · FHIR resource validation using response interceptor in HAPI · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/FHIR.20resource.20validation.20using.20response.20interceptor.20in.20HAPI.html">FHIR resource validation using response interceptor in HAPI</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="164640301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/FHIR%20resource%20validation%20using%20response%20interceptor%20in%20HAPI/near/164640301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/FHIR.20resource.20validation.20using.20response.20interceptor.20in.20HAPI.html#164640301">(May 01 2019 at 17:30)</a>:</h4>
<p>I have a code as shown in example where I am purposely not setting "status" which is required in Observation resource  when http request is made to my server <a href="http://localhost:8080/context/fhir/resource/Observation?category=vital-signs&amp;patient=abcdefgh" target="_blank" title="http://localhost:8080/context/fhir/resource/Observation?category=vital-signs&amp;patient=abcdefgh">http://localhost:8080/context/fhir/resource/Observation?category=vital-signs&amp;patient=abcdefgh</a> </p>
<div class="codehilite"><pre><span></span>Observation obs = new Observation();
obs.getCode().addCoding().setSystem(&quot;http://loinc.org&quot;).setCode(&quot;12345-6&quot;);
obs.setValue(new StringType(&quot;This is a value&quot;));
</pre></div>


<p>Then I have following code in the service which extends RestfulServer : </p>
<div class="codehilite"><pre><span></span>public void initialize() {

          //some code ...
          ResponseValidatingInterceptor responseInterceptor = new ResponseValidatingInterceptor();
      responseInterceptor.addValidatorModule(new FhirInstanceValidator());
      responseInterceptor.setFailOnSeverity(ResultSeverityEnum.ERROR);
      responseInterceptor.setAddResponseHeaderOnSeverity(ResultSeverityEnum.INFORMATION);
      responseInterceptor.setResponseHeaderValue(&quot;Validation on ${line}: ${message} ${severity}&quot;);
      responseInterceptor.setResponseHeaderValueNoIssues(&quot;No issues detected&quot;);
}
</pre></div>


<p>Now at the output, I am getting "No issues detected" when ideally I should get validation error in header since observation has no status.<br>
Thats my problem</p>
<p>My outgoing response in bundle through :</p>
<div class="codehilite"><pre><span></span>{
    &quot;resourceType&quot;: &quot;Bundle&quot;,
    &quot;id&quot;: &quot;uiehfkdhsfn-sdfjs-sdff-sdfs-yugrhfjbsdf&quot;,
    &quot;meta&quot;: {
        &quot;lastUpdated&quot;: &quot;2019-05-01T14:11:26.390-04:00&quot;
      },
    &quot;language&quot;: &quot;ENG&quot;,
    &quot;type&quot;: &quot;searchset&quot;,
    &quot;total&quot;: 4,
    &quot;link&quot;: [
        {
            &quot;relation&quot;: &quot;self&quot;,
            &quot;url&quot;: &quot;http://localhost:8080/context/fhir/resource/Observation?category=vital-signs&amp;amp;patient=abcdefgh&quot;
        }
    ],
    &quot;entry&quot;: [
        {
            &quot;resource&quot;: {
                &quot;resourceType&quot;: &quot;Observation&quot;,
                &quot;id&quot;: &quot;adasdasdadasdasd.asdasdasdasdasdasd&quot;,
                &quot;text&quot;: {
                    &quot;status&quot;: &quot;generated&quot;,
                    &quot;div&quot;: &quot;&amp;lt;table xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&amp;gt;&amp;lt;thead&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;th&amp;gt;Vital&amp;lt;/th&amp;gt;&amp;lt;th&amp;gt;Patient Control     No&amp;lt;/th&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/thead&amp;gt;&amp;lt;tbody&amp;gt;&amp;lt;tr&amp;gt;&amp;lt;td&amp;gt;Blood Pressure Systolic:117 mm Hg&amp;lt;/td&amp;gt;&amp;lt;td&amp;gt;9294&amp;lt;/td&amp;gt;&amp;lt;/tr&amp;gt;&amp;lt;/tbody&amp;gt;&amp;lt;/table&amp;gt;&quot;
                },
                &quot;category&quot;: [
                    {
                        &quot;coding&quot;: [
                            {
                                &quot;system&quot;: &quot;http://hl7.org/fhir/observation-category&quot;,
                                &quot;code&quot;: &quot;vital-signs&quot;,
                                &quot;display&quot;: &quot;Vital Signs&quot;
                            }
                        ],
                        &quot;text&quot;: &quot;vital-signs&quot;
                    }
                ],
                &quot;code&quot;: {
                    &quot;coding&quot;: [
                        {
                            &quot;system&quot;: &quot;http://loinc.org&quot;,
                            &quot;code&quot;: &quot;8480-6&quot;,
                            &quot;display&quot;: &quot;blood pressure systolic&quot;
                        }
                    ],
                    &quot;text&quot;: &quot;Blood Pressure Systolic&quot;
                },
                &quot;subject&quot;: {
                    &quot;reference&quot;: &quot;Patient/abcdefgh&quot;
                },
                &quot;effectiveDateTime&quot;: &quot;2019-04-17&quot;,
                &quot;valueQuantity&quot;: {
                    &quot;value&quot;: 117,
                    &quot;unit&quot;: &quot;mm[Hg]&quot;,
                    &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,
                    &quot;code&quot;: &quot;mm[Hg]&quot;
                }
            }
        }
    ]
}
</pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
