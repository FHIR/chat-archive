---
layout: page
title: "FHIR Chat  · why can this ValueSet not be validated against? · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/why.20can.20this.20ValueSet.20not.20be.20validated.20against.3F.html">why can this ValueSet not be validated against?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="202323782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/why%20can%20this%20ValueSet%20not%20be%20validated%20against%3F/near/202323782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Job Schipper <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/why.20can.20this.20ValueSet.20not.20be.20validated.20against.3F.html#202323782">(Jun 29 2020 at 15:09)</a>:</h4>
<p>Hi,<br>
When validating the following test patient against a profile I get the following validation warning:</p>
<p><strong>GET</strong> <a href="http://hapi.fhir.org/baseDstu3/Patient/2725779/$validate">http://hapi.fhir.org/baseDstu3/Patient/2725779/$validate</a></p>
<div class="codehilite"><pre><span></span><code>...
        {
            &quot;severity&quot;: &quot;warning&quot;,
            &quot;code&quot;: &quot;processing&quot;,
            &quot;diagnostics&quot;: &quot;Could not confirm that the codes provided are in the value set http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.20.5.2--20171231000000, and a code should come from this value set unless it has no suitable code&quot;,
            &quot;location&quot;: [
                &quot;Patient.address[0].country.extension[0].value.ofType(CodeableConcept).coding[0]&quot;,
                &quot;Line 1, Col 511&quot;
            ]
        }
...
</code></pre></div>


<p>The valueset itself includes country codes from the codesystem urn:iso:std:iso:3166 which is part of STU3 according to <a href="https://www.hl7.org/fhir/stu3/terminologies-systems.html">https://www.hl7.org/fhir/stu3/terminologies-systems.html</a></p>
<p><strong>GET</strong> <a href="http://hapi.fhir.org/baseDstu3/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.20.5.2--20171231000000">http://hapi.fhir.org/baseDstu3/ValueSet/2.16.840.1.113883.2.4.3.11.60.40.2.20.5.2--20171231000000</a></p>
<div class="codehilite"><pre><span></span><code>    &quot;compose&quot;: {
        &quot;include&quot;: [
            {
                &quot;system&quot;: &quot;urn:iso:std:iso:3166&quot;
            }
        ]
    }
</code></pre></div>


<p>I have seen ValueSet validation work in HAPI before, so I'm wondering why it is unable to do so in this case. Does the ValueSet validation not support the "include" mechanisms for codesystems?<br>
As always, all help is very much appreciated!</p>



<a name="202358002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/why%20can%20this%20ValueSet%20not%20be%20validated%20against%3F/near/202358002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/why.20can.20this.20ValueSet.20not.20be.20validated.20against.3F.html#202358002">(Jun 29 2020 at 19:35)</a>:</h4>
<p>what is your nominated terminology server?</p>



<a name="202419480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/why%20can%20this%20ValueSet%20not%20be%20validated%20against%3F/near/202419480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Job Schipper <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/why.20can.20this.20ValueSet.20not.20be.20validated.20against.3F.html#202419480">(Jun 30 2020 at 10:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  I have no idea to be honest. How can i find out?</p>



<a name="202497564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/why%20can%20this%20ValueSet%20not%20be%20validated%20against%3F/near/202497564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/why.20can.20this.20ValueSet.20not.20be.20validated.20against.3F.html#202497564">(Jun 30 2020 at 21:29)</a>:</h4>
<p>well, it'll be the way you set HAPI up. Unless you are using the CLI directly</p>



<a name="202697707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/why%20can%20this%20ValueSet%20not%20be%20validated%20against%3F/near/202697707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Job Schipper <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/why.20can.20this.20ValueSet.20not.20be.20validated.20against.3F.html#202697707">(Jul 02 2020 at 14:43)</a>:</h4>
<p>in my case i am using the public test server @ <a href="http://hapi.fhir.org/baseDstu3/">http://hapi.fhir.org/baseDstu3/</a>  (which happens to be down right now).<br>
Is there a way to retrieve what terminology server it is using from the API?</p>
<p>Also we are  in the process of setting up our own HAPI JPA server, so I am interestig to learn more about setting this up. Is there any documentation you can recommend on this subject? I've been looking at <a href="https://hapifhir.io/hapi-fhir/docs/server_jpa/introduction.html">https://hapifhir.io/hapi-fhir/docs/server_jpa/introduction.html</a> but i haven't seen anything on configuring a terminology server.</p>



<a name="203116530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/why%20can%20this%20ValueSet%20not%20be%20validated%20against%3F/near/203116530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/why.20can.20this.20ValueSet.20not.20be.20validated.20against.3F.html#203116530">(Jul 07 2020 at 15:19)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="294094">@Job Schipper</span> - FYI this looks to be a bug in HAPI's term service, I was able to reproduce the results you're seeing locally. We do support ISO3166 validation but it doesn't look like it's working for pre-expanded ValueSets. I'm still investigating why.</p>



<a name="203687491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/why%20can%20this%20ValueSet%20not%20be%20validated%20against%3F/near/203687491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Job Schipper <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/why.20can.20this.20ValueSet.20not.20be.20validated.20against.3F.html#203687491">(Jul 13 2020 at 08:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> interesting, did you find out more?</p>



<a name="203696104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/why%20can%20this%20ValueSet%20not%20be%20validated%20against%3F/near/203696104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/why.20can.20this.20ValueSet.20not.20be.20validated.20against.3F.html#203696104">(Jul 13 2020 at 09:53)</a>:</h4>
<p>Yup, this has been fixed on current master. The validation you linked above now works correctly.</p>



<a name="204068759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/why%20can%20this%20ValueSet%20not%20be%20validated%20against%3F/near/204068759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Job Schipper <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/why.20can.20this.20ValueSet.20not.20be.20validated.20against.3F.html#204068759">(Jul 16 2020 at 10:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> Great, thanks a lot!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
