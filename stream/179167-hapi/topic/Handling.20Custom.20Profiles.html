---
layout: page
title: "FHIR Chat  · Handling Custom Profiles · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Handling.20Custom.20Profiles.html">Handling Custom Profiles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154018842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Handling%20Custom%20Profiles/near/154018842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Handling.20Custom.20Profiles.html#154018842">(Nov 15 2018 at 13:53)</a>:</h4>
<p>Hi,<br>
I would like to make some experiments like in the Yosemite Project by parsing FHIR profiles and transform them into graph structures.<br>
To achieve that, I am looking for a method to take a FHIR profile definition String (e.g. the XML resource content from <a href="http://www.hl7.org/fhir/observation.html#tabs-xml" target="_blank" title="http://www.hl7.org/fhir/observation.html#tabs-xml">http://www.hl7.org/fhir/observation.html#tabs-xml</a>) and parse it to receive  a Java runtime object.<br>
I hoped that in the HAPI Java structure package (hapi-fhir-structures-dstu3-3.6.0.jar) I could find a parser that I could use to accomplish this task.<br>
However in some threads in the last two years there have been discussions that HAPI is not capable of handling custom profile definitions because it rather uses concrete classes for each profile.<br>
Is this true, so it is of no use to search the HAPI code base for a component that I could use ? If this were true, is there an alternative that could be used to parse custom profiles ?<br>
Greetings<br>
Georg</p>



<a name="154019104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Handling%20Custom%20Profiles/near/154019104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Handling.20Custom.20Profiles.html#154019104">(Nov 16 2018 at 09:33)</a>:</h4>
<p>If you have a XML representation of a FHIR resource you can parse it using HAPI with no extra effort like this:</p>
<div class="codehilite"><pre><span></span> <span class="n">FhirContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">FhirContext</span><span class="o">.</span><span class="na">forDstu3</span><span class="o">();</span>
<span class="n">Observation</span> <span class="n">obs</span> <span class="o">=</span> <span class="o">(</span><span class="n">Observation</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">newXmlParser</span><span class="o">().</span><span class="na">parseResource</span><span class="o">(</span><span class="n">resourceString</span><span class="o">);</span>
</pre></div>


<p>The profile this instance is claiming to be compliant to doesn't matter as every profiled resource is still a resource, in your example still an observation.<br>
<span class="user-mention" data-user-id="196537">@Georg Fette</span></p>



<a name="154020420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Handling%20Custom%20Profiles/near/154020420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Handling.20Custom.20Profiles.html#154020420">(Nov 22 2018 at 10:17)</a>:</h4>
<p>Ah, thank you. That worked well. I now managed to store the StructureDefinitions of a set of handcrafted profiles in a HAPI server.<br>
Would it now also be possible to store instances/resources of these custom profiles in the same HAPI server ?</p>



<a name="154020425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Handling%20Custom%20Profiles/near/154020425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Handling.20Custom.20Profiles.html#154020425">(Nov 22 2018 at 10:50)</a>:</h4>
<p>sure. Profiles are always based on the base resources. <a href="http://fhir.de/StructureDefinition/patient-de-basis-0.2" target="_blank" title="http://fhir.de/StructureDefinition/patient-de-basis-0.2">http://fhir.de/StructureDefinition/patient-de-basis-0.2</a> for example is based on patient. You can store the profile as a StructureDefinition on a HAPI Server.<br>
Patient instances claiming their compliance to a profile through the meta tag, stating "i am conforming to profile XY".</p>



<a name="154020426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Handling%20Custom%20Profiles/near/154020426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Handling.20Custom.20Profiles.html#154020426">(Nov 22 2018 at 10:52)</a>:</h4>
<p>If you want to have an instance of patient-de-basis, then you create a patient conforming to the profile, include the profile(s) url(s) in meta and of course you then can persist it to a FHIR Server like HAPI.</p>



<a name="154020427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Handling%20Custom%20Profiles/near/154020427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Handling.20Custom.20Profiles.html#154020427">(Nov 22 2018 at 10:53)</a>:</h4>
<p>To check if the instance is conform to the profile you then can use the $validate operation on the instance.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
