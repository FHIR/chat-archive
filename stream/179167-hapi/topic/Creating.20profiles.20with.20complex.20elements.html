---
layout: page
title: "FHIR Chat  · Creating profiles with complex elements · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html">Creating profiles with complex elements</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153892672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Creating%20profiles%20with%20complex%20elements/near/153892672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Broadbent <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html#153892672">(Jun 07 2017 at 14:50)</a>:</h4>
<p>Hi all, I'm currently trying to create a profile which contains zero or more complex types (each element has a name, a date, and a boolean).  How do I model this?</p>
<p>I think I'm supposed to create an extension to represent the complex type, then have a reference to that from the profile, however I cannot find an example of this; the only examples are profiles which have an element linking to any extension (which I don't want, I need to limit it to my type).  The only other thing I can find similar to this is the backbone element.  All profiles I've seen on simplifier use backbone elements, but I'm not sure if these are something that I actually define myself.</p>
<p>Could someone point me in the right direction as to how I'm supposed to model this?</p>



<a name="153892699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Creating%20profiles%20with%20complex%20elements/near/153892699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html#153892699">(Jun 07 2017 at 19:05)</a>:</h4>
<p>could you be more specific..."I'm currently trying to create a profile which contains zero or more complex types"   complex types of what?  extensions?  <a href="http://build.fhir.org/ig/Healthedata1/IG-Template/StructureDefinition-template-basic.html#profile" target="_blank" title="http://build.fhir.org/ig/Healthedata1/IG-Template/StructureDefinition-template-basic.html#profile">here is an example of this</a> </p>



<a name="153893094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Creating%20profiles%20with%20complex%20elements/near/153893094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Broadbent <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html#153893094">(Jun 09 2017 at 09:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> Ok to be more specific; I'm writing a system which turns tabular data into fhir profiles.  To do this, users create a sort of proto resource, which is essentially a resource, but it can also link to column data in a table.  I have a program which evaluates this resources for every row, and fills in the blanks from the rows.  So for example I could have a table of patients, I create a proto resource which sets all the constant information, like what hospital they belong to, etc, and then I supply the variable data from a table.</p>
<p>To cut a long story short, I'm trying to keep as much of the metadata about this process in fhir as well, the reason for doing this is that we also have an indexing system, and users will want to view groups of resources based on which proto resource created them.  I'm trying to create a profile which represents the class of proto resource, and the list of complex types I want contains information about how to map from a table to a resource.  It would contain something like that column name, the xpath into the target resource, and a few other conversion factors.</p>
<p>The problem I'm having is; I could create a profile which says it has to have a list of extensions, what I can't find is an example of a profile which says it must have a list of specific extensions.  For example, I would create an extension for my complex type (lets call it MappingInfo), I wouldn't want users to assign any old extension to that field.</p>
<p>The way this works with resource types (as far as I can tell), is they have a backbone element which contains the items my extension would.</p>



<a name="153893155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Creating%20profiles%20with%20complex%20elements/near/153893155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html#153893155">(Jun 09 2017 at 21:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> - this is a pattern we've discussed before - can you quickly describe your current take on this?</p>



<a name="153893157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Creating%20profiles%20with%20complex%20elements/near/153893157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html#153893157">(Jun 09 2017 at 21:44)</a>:</h4>
<p>Yeah, we did this with the CQF resources as a profile on basic, but I'm not sure I understand what the problem is? Specifically, I don't understand this: "I wouldn't want users to assign any old extension to that field", why does it matter?</p>



<a name="153893158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Creating%20profiles%20with%20complex%20elements/near/153893158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html#153893158">(Jun 09 2017 at 21:45)</a>:</h4>
<p>note: I don't do this with a resource. I do this with some scripting language. Here's 2 examples:</p>



<a name="153893159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Creating%20profiles%20with%20complex%20elements/near/153893159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html#153893159">(Jun 09 2017 at 21:46)</a>:</h4>
<div class="codehilite"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Bundle xmlns=&quot;http://hl7.org/fhir&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://hl7.org/fhir ../../schema/bundle.xsd&quot;&gt;
  &lt;id value=&quot;b0a5e4277-83c4-4adb-87e2-e3efe3369b6f&quot;/&gt;
  &lt;meta&gt;
    &lt;lastUpdated value=&quot;2012-05-29T23:45:32Z&quot;/&gt; 
  &lt;/meta&gt; 
  &lt;type value=&quot;collection&quot;/&gt; [%loop count=70%]
  &lt;entry&gt;
    &lt;fullUrl value=&quot;http://hl7.org/fhir/Patient/[%count%]&quot;/&gt;
    &lt;resource&gt;
      &lt;Patient&gt;
        &lt;id value=&quot;[%count%]&quot;/&gt;
        &lt;meta&gt;
          &lt;lastUpdated value=&quot;2012-06-03T23:45:32Z&quot;/&gt;
        &lt;/meta&gt;
        &lt;text&gt;
          &lt;status value=&quot;generated&quot;/&gt;
          &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;[%last name%], [%first name%]. MRN:
          [%patient_id%]&lt;/div&gt;
        &lt;/text&gt;
        &lt;identifier&gt;
          &lt;type&gt;
            &lt;coding&gt;
              &lt;system value=&quot;http://hl7.org/fhir/v2/0203&quot;/&gt;
              &lt;code value=&quot;SS&quot;/&gt;
            &lt;/coding&gt;
          &lt;/type&gt;
          &lt;system value=&quot;https://github.com/projectcypress/cypress/patient&quot;/&gt;
          &lt;value value=&quot;[%patient_id%]&quot;/&gt;
        &lt;/identifier&gt;
        &lt;active value=&quot;true&quot;/&gt;
        &lt;name&gt;
          &lt;use value=&quot;official&quot;/&gt;
          &lt;family value=&quot;[%last name%]&quot;/&gt;
          &lt;given value=&quot;[%first name%]&quot;/&gt;
        &lt;/name&gt;
        &lt;gender value=&quot;[%gender%]&quot; /&gt;
        &lt;birthDate value=&quot;[%birthdate%]&quot;/&gt;
        &lt;managingOrganization&gt;
          &lt;reference value=&quot;Organization/[%organization%]&quot;/&gt;
        &lt;/managingOrganization&gt;
      &lt;/Patient&gt;
    &lt;/resource&gt;
  &lt;/entry&gt; [%endloop%] 
&lt;/Bundle&gt;
</pre></div>



<a name="153893160"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Creating%20profiles%20with%20complex%20elements/near/153893160" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html#153893160">(Jun 09 2017 at 21:46)</a>:</h4>
<p>and</p>



<a name="153893161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Creating%20profiles%20with%20complex%20elements/near/153893161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html#153893161">(Jun 09 2017 at 21:49)</a>:</h4>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot; : &quot;PractitionerRole&quot;,
  &quot;identifier&quot; : [
    {
      &quot;system&quot; : &quot;xx&quot;,
      &quot;value&quot; : &quot;{provider no}&quot;
    }
  ],
  &quot;active&quot; : {current},
  &quot;specialty&quot; : [
    {
      &quot;text&quot; : &quot;{speciality}&quot;
    }
  ],
  &quot;telecom&quot; : [
    {
      &quot;system&quot; : &quot;phone&quot;,
      &quot;value&quot; : &quot;{Phone}&quot;,
      &quot;use&quot; : &quot;work&quot;
    },
    {
      &quot;system&quot; : &quot;fax&quot;,
      &quot;value&quot; : &quot;{Fax}&quot;,
      &quot;use&quot; : &quot;work&quot;
    },
    {
      &quot;system&quot; : &quot;phone&quot;,
      &quot;value&quot; : &quot;{Mobile}&quot;,
      &quot;use&quot; : &quot;mobile&quot;
    },
    {
      &quot;system&quot; : &quot;email&quot;,
      &quot;value&quot; : &quot;{Email}&quot;,
      &quot;use&quot; : &quot;work&quot;
    }
  ]
}
</pre></div>



<a name="153893180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Creating%20profiles%20with%20complex%20elements/near/153893180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html#153893180">(Jun 10 2017 at 02:00)</a>:</h4>
<p>I'm curious - What happens if the field is blank? </p>



<a name="153893183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Creating%20profiles%20with%20complex%20elements/near/153893183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Creating.20profiles.20with.20complex.20elements.html#153893183">(Jun 10 2017 at 02:01)</a>:</h4>
<p>can't be in those cases. </p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
