---
layout: page
title: "FHIR Chat  · JPA Server - Cascade Delete with Expunge · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/JPA.20Server.20-.20Cascade.20Delete.20with.20Expunge.html">JPA Server - Cascade Delete with Expunge</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="230875113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/JPA%20Server%20-%20Cascade%20Delete%20with%20Expunge/near/230875113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johannes Oehm <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/JPA.20Server.20-.20Cascade.20Delete.20with.20Expunge.html#230875113">(Mar 18 2021 at 14:44)</a>:</h4>
<p>Hello everyone,</p>
<p>I'm trying to delete all resources like Encounters, Observations,... associated with a specific patient on my HAPI JPA server. <br>
In theory, simply calling <code>DELETE Patient/IMI-12345678?_cascade=delete&amp;_expunge=true</code>should do the job (expunge and cascading deletes are enabled, I also increased the MaximumDeleteConflictQueryCount of the DaoConfig to 500). </p>
<p>The operation takes some time and the OperationOutcome reports success, however, when I invoke <code>GET Patient/IMI-12345678/_history</code>the patient still appears. The same applies for all resources that should have been deleted. </p>
<p>Is there anything else I have to enable? Or are the <code>_cascade</code> and <code>_expunge</code> parameters not meant to be used together?</p>
<p>I would be glad to get some advice! Thanks in advance!</p>



<a name="231781828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/JPA%20Server%20-%20Cascade%20Delete%20with%20Expunge/near/231781828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/JPA.20Server.20-.20Cascade.20Delete.20with.20Expunge.html#231781828">(Mar 25 2021 at 11:10)</a>:</h4>
<p>I think this is a bug, i couldn't get cascade delete to work in the current version. Created a Issue linked here: <a href="#narrow/stream/179167-hapi/topic/_cascade.3Ddelete.20isn't.20working">https://chat.fhir.org/#narrow/stream/179167-hapi/topic/_cascade.3Ddelete.20isn't.20working</a></p>



<a name="233976153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/JPA%20Server%20-%20Cascade%20Delete%20with%20Expunge/near/233976153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jame Dang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/JPA.20Server.20-.20Cascade.20Delete.20with.20Expunge.html#233976153">(Apr 10 2021 at 18:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> : I asked you for the search parameter but now I can handle my problem now (sorry for your inconvenience )</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
