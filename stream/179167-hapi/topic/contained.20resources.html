---
layout: page
title: "FHIR Chat  · contained resources · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html">contained resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153899130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sufyan Patel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899130">(Jul 28 2017 at 12:05)</a>:</h4>
<p>Hi, Has anyone got an example of how they used the HAPI API to create contained resources? <br>
I have tied the following ways:</p>
<p>Location loc = new Location();<br>
        loc.setAddress(new Address().setCity("Some City").setCountry("UK").setPostalCode("PO57 CDE"));<br>
        List&lt;Resource&gt; res = new ArrayList&lt;Resource&gt;();<br>
        res.add(loc);<br>
        hcs.setContained(res);</p>
<p>and also this way:</p>
<p>Location loc = new Location();<br>
        loc.setAddress(new Address().setCity("Some City").setCountry("UK").setPostalCode("PO57 CDE"));<br>
        hcs.addContained(loc);</p>
<p>But when I parse out the object, it does not have the contained resource. <br>
Any help is much appreciated.</p>



<a name="153899150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899150">(Jul 28 2017 at 12:28)</a>:</h4>
<p>What you appear to be doing is adding an address to a location. Your're not adding a contained resource.</p>



<a name="153899151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899151">(Jul 28 2017 at 12:29)</a>:</h4>
<p>You could add a contained resource where a reference is required. Either the reference points to an external resource or the contained resource.</p>



<a name="153899158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899158">(Jul 28 2017 at 12:35)</a>:</h4>
<p>So your last example using Organisation as the contained resource : </p>
<p>See lines 100-118 in the link below</p>



<a name="153899179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899179">(Jul 28 2017 at 12:52)</a>:</h4>
<p>Or a more worked example</p>



<a name="153899180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899180">(Jul 28 2017 at 12:52)</a>:</h4>
<p>See <a href="https://github.com/nhsconnect/careconnect-java-examples/blob/master/ImplementationGuideExplore/src/main/java/uk/nhs/careconnect/examples/App/IGExplore.java" target="_blank" title="https://github.com/nhsconnect/careconnect-java-examples/blob/master/ImplementationGuideExplore/src/main/java/uk/nhs/careconnect/examples/App/IGExplore.java">https://github.com/nhsconnect/careconnect-java-examples/blob/master/ImplementationGuideExplore/src/main/java/uk/nhs/careconnect/examples/App/IGExplore.java</a></p>



<a name="153899203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sufyan Patel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899203">(Jul 28 2017 at 13:29)</a>:</h4>
<p>Thanks Kevin, I didn't give a complete example earlier. <br>
I am trying to add a contained resource (Location) to the HealthcareService resource. The hcs in the above code was the HealthcareService object. </p>
<p>P.S. I'm doing this in STU3 therefore for setLocation(...), it is expecting List &lt;Resource&gt;.</p>



<a name="153899205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899205">(Jul 28 2017 at 13:33)</a>:</h4>
<p>try adding an id to the loc Location e.g. <strong> loc.setId("#loc"); </strong></p>



<a name="153899206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899206">(Jul 28 2017 at 13:35)</a>:</h4>
<p>I think hapi doesn't know how to link the resources together.</p>



<a name="153899207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899207">(Jul 28 2017 at 13:36)</a>:</h4>
<p>On your second example... That looks like how I would have done on the STU3 version.</p>



<a name="153899209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899209">(Jul 28 2017 at 13:43)</a>:</h4>
<div class="codehilite"><pre><span></span>    HealthcareService hcs = new HealthcareService();
    loc.setId(&quot;#loc&quot;);
    hcs.setLocation(new Reference(loc.getId())); // this bit will be different on STU3
    hcs.addContained(loc);
</pre></div>



<a name="153899220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/153899220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sufyan Patel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#153899220">(Jul 28 2017 at 14:27)</a>:</h4>
<p>Got it to work with something like this<br>
<code>Location loc = new Location();
        loc.setAddress(new Address().setCity("Some City").setCountry("UK").setPostalCode("PO57 CDE"));
        loc.setId(new IdType().setValue("#9"));
        List&lt;Reference&gt; res = new ArrayList&lt;Reference&gt;();
        res.add(new Reference(loc.getId()));
        hcs.addContained(loc);
        hcs.setLocation(res);
        return hcs;</code><br>
Thanks for your help</p>



<a name="203386150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/203386150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruwen Böhm <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#203386150">(Jul 09 2020 at 13:41)</a>:</h4>
<p>Dear all, I'm trying to feed HAPI with a MedicationStatement containing a Medication resource. However, the contained resource is discarded, e.g.</p>
<p>&lt;MedicationStatement xmlns="<a href="http://hl7.org/fhir">http://hl7.org/fhir</a>"&gt;<br>
&lt;contained&gt; <br>
    &lt;Medication&gt; <br>
        &lt;code&gt; <br>
            &lt;coding&gt; <br>
                &lt;system value="http://fhir.de/CodeSystem/dimdi/atc"/&gt; <br>
                &lt;code value="j01ma02"/&gt; <br>
                &lt;display value="Ciprofloxacin"/&gt; <br>
            &lt;/coding&gt; <br>
        &lt;/code&gt;<br>
    &lt;/Medication&gt; <br>
&lt;/contained&gt;<br>
&lt;status value="active"/&gt; <br>
&lt;subject&gt; <br>
    &lt;reference value....</p>
<p>Help is highly appreciated.</p>



<a name="203393386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/203393386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#203393386">(Jul 09 2020 at 14:37)</a>:</h4>
<p>Can't see your reference properly, but contained resources need to be referenced by the containing resource (or possibly the other way around). Could that be it?</p>



<a name="203433483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/203433483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#203433483">(Jul 09 2020 at 20:07)</a>:</h4>
<p>indeed - your contained resource does not have an ID, i would start there.</p>



<a name="203549975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/203549975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruwen Böhm <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#203549975">(Jul 10 2020 at 19:40)</a>:</h4>
<p>Thank you for pointing this out!  I'll try. Additional question: HAPI FHIR can be run without storage: <a href="https://hapifhir.io/hapi-fhir/docs/server_plain/introduction.html">https://hapifhir.io/hapi-fhir/docs/server_plain/introduction.html</a> and resources can be created by calling Constructors in Java using the class IResourceProvider, probably thus avoiding all the errors in otherwise created FHIR resources. Is there a tool to construct FHIR without the HAPI server (i.e., write it directly to a file)?</p>



<a name="239290940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/239290940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lisa Nelson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#239290940">(May 18 2021 at 17:14)</a>:</h4>
<p>Here is what we are seeing:</p>
<p>We are doing a conditional create of the Patient Resource inside a transaction bundle that also subsequently posts a Communication Resource which references that Patient as the subject and sender.  The Transaction completes successfully but when I retrieve the Communication that was created, it has a "contained" Patient resource and the subject and sender are referencing the local contained Patient resource.  This is not the behavior I was expecting to see. Do you  know why this transaction is causing the Patient to be carried as a Contained Resource?</p>



<a name="239291555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/239291555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cheng Liu <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#239291555">(May 18 2021 at 17:17)</a>:</h4>
<p>Here is the follow up for Lisa's question. Please check the attachment for the transaction bundle we post to the hapi FHIR server.<br>
<a href="/user_uploads/10155/7oUhtEkJpJFovyKAjDN_9ezJ/TransactionBundle.json">TransactionBundle.json</a></p>



<a name="239298850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/239298850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#239298850">(May 18 2021 at 18:04)</a>:</h4>
<p>Just confirmed I see the same behaviour... Just trying to figure out why</p>



<a name="239303799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/239303799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lisa Nelson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#239303799">(May 18 2021 at 18:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span>  Glad you can reproduce it.</p>



<a name="239427712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/239427712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#239427712">(May 19 2021 at 13:53)</a>:</h4>
<p>FYI this has been fixed. Thanks for supplying the test case, that was helpful.</p>



<a name="239815680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/239815680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Gulden <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#239815680">(May 21 2021 at 21:33)</a>:</h4>
<p>I'm still seeing this issue with <code>Device</code> and possibly other resource types as well on HAPI FHIR 5.4.0. But it occurs only after sending the same transaction twice, here's an example test case:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Bundle"</span><span class="p">,</span>
  <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"transaction"</span><span class="p">,</span>
  <span class="nt">"entry"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"fullUrl"</span><span class="p">:</span> <span class="s2">"urn:uuid:4ec7879f-13da-4a24-a77a-6ea35d4d5a5a"</span><span class="p">,</span>
      <span class="nt">"resource"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Patient"</span><span class="p">,</span>
        <span class="nt">"identifier"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"type"</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">"coding"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"http://terminology.hl7.org/CodeSystem/v2-0203"</span><span class="p">,</span>
                  <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"MR"</span>
                <span class="p">}</span>
              <span class="p">]</span>
            <span class="p">},</span>
            <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://fhir.example.org/identifiers/patient-id"</span><span class="p">,</span>
            <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"123"</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">"gender"</span><span class="p">:</span> <span class="s2">"female"</span><span class="p">,</span>
        <span class="nt">"birthDate"</span><span class="p">:</span> <span class="s2">"1900-01-01"</span>
      <span class="p">},</span>
      <span class="nt">"request"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"method"</span><span class="p">:</span> <span class="s2">"PUT"</span><span class="p">,</span>
        <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"Patient?identifier=https://fhir.example.org/identifiers/patient-id|123"</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"fullUrl"</span><span class="p">:</span> <span class="s2">"urn:uuid:b01d2e99-ec2b-475e-a69e-6e303e24edbc"</span><span class="p">,</span>
      <span class="nt">"resource"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Device"</span><span class="p">,</span>
        <span class="nt">"identifier"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://fhir.example.org/identifiers/device-id"</span><span class="p">,</span>
            <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"device-1"</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">"status"</span><span class="p">:</span> <span class="s2">"active"</span><span class="p">,</span>
        <span class="nt">"deviceName"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"test"</span><span class="p">,</span>
            <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"manufacturer-name"</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">"version"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"1.0.0"</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="nt">"request"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"method"</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
        <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"Device"</span><span class="p">,</span>
        <span class="nt">"ifNoneExist"</span><span class="p">:</span> <span class="s2">"identifier=https://fhir.example.org/identifiers/device-id|device-1"</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"fullUrl"</span><span class="p">:</span> <span class="s2">"urn:uuid:e08c6c9e-ca18-4524-bdfc-d5f8827e1acd"</span><span class="p">,</span>
      <span class="nt">"resource"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"List"</span><span class="p">,</span>
        <span class="nt">"identifier"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://fhir.example.org/identifiers/list-id"</span><span class="p">,</span>
            <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"list-1"</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">"status"</span><span class="p">:</span> <span class="s2">"current"</span><span class="p">,</span>
        <span class="nt">"mode"</span><span class="p">:</span> <span class="s2">"working"</span><span class="p">,</span>
        <span class="nt">"source"</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"urn:uuid:b01d2e99-ec2b-475e-a69e-6e303e24edbc"</span>
        <span class="p">},</span>
        <span class="nt">"entry"</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">"item"</span><span class="p">:</span> <span class="p">{</span>
              <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"urn:uuid:4ec7879f-13da-4a24-a77a-6ea35d4d5a5a"</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">},</span>
      <span class="nt">"request"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"method"</span><span class="p">:</span> <span class="s2">"PUT"</span><span class="p">,</span>
        <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"List?identifier=https://fhir.example.org/identifiers/list-id|list-1"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Turns into:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
      <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"List"</span><span class="p">,</span>
      <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"3"</span><span class="p">,</span>
      <span class="nt">"meta"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"versionId"</span><span class="p">:</span> <span class="s2">"2"</span><span class="p">,</span>
        <span class="nt">"lastUpdated"</span><span class="p">:</span> <span class="s2">"2021-05-21T21:23:15.142+00:00"</span><span class="p">,</span>
        <span class="nt">"source"</span><span class="p">:</span> <span class="s2">"#9NZJXYPb8Fz8jCBo"</span>
      <span class="p">},</span>
      <span class="nt">"contained"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
        <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Device"</span><span class="p">,</span>
        <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
        <span class="nt">"identifier"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
          <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://fhir.example.org/identifiers/device-id"</span><span class="p">,</span>
          <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"device-1"</span>
        <span class="p">}</span> <span class="p">],</span>
        <span class="nt">"status"</span><span class="p">:</span> <span class="s2">"active"</span><span class="p">,</span>
        <span class="nt">"deviceName"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
          <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"test"</span><span class="p">,</span>
          <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"manufacturer-name"</span>
        <span class="p">}</span> <span class="p">],</span>
        <span class="nt">"version"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
          <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"1.0.0"</span>
        <span class="p">}</span> <span class="p">]</span>
      <span class="p">}</span> <span class="p">],</span>
      <span class="nt">"identifier"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
        <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://fhir.example.org/identifiers/list-id"</span><span class="p">,</span>
        <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"list-1"</span>
      <span class="p">}</span> <span class="p">],</span>
      <span class="nt">"status"</span><span class="p">:</span> <span class="s2">"current"</span><span class="p">,</span>
      <span class="nt">"mode"</span><span class="p">:</span> <span class="s2">"working"</span><span class="p">,</span>
      <span class="nt">"source"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"#1"</span>
      <span class="p">},</span>
      <span class="nt">"entry"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
        <span class="nt">"item"</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"Patient/2"</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="p">]</span>
    <span class="p">}</span>
</code></pre></div>
<p>While version 1 looks like the expected outcome:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"List"</span><span class="p">,</span>
  <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"3"</span><span class="p">,</span>
  <span class="nt">"meta"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"versionId"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">,</span>
    <span class="nt">"lastUpdated"</span><span class="p">:</span> <span class="s2">"2021-05-21T21:22:33.048+00:00"</span><span class="p">,</span>
    <span class="nt">"source"</span><span class="p">:</span> <span class="s2">"#bfQutYlHbeMLoJaG"</span>
  <span class="p">},</span>
  <span class="nt">"identifier"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://fhir.example.org/identifiers/list-id"</span><span class="p">,</span>
      <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"list-1"</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">"status"</span><span class="p">:</span> <span class="s2">"current"</span><span class="p">,</span>
  <span class="nt">"mode"</span><span class="p">:</span> <span class="s2">"working"</span><span class="p">,</span>
  <span class="nt">"source"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"Device/1"</span>
  <span class="p">},</span>
  <span class="nt">"entry"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"item"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"Patient/2"</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>



<a name="239978049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/239978049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#239978049">(May 23 2021 at 21:05)</a>:</h4>
<p><span class="user-mention" data-user-id="254858">@Christian Gulden</span>  Unfortunately the fix for this issue didn't make the code freeze date for 5.4.0. It is fixed in the current 5.5.0 snapshot builds, if you're able to test with that?</p>
<p>We're going to do a mid-cycle release this time around in about a month, so it'll be included in that.</p>



<a name="240184437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/contained%20resources/near/240184437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christian Gulden <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/contained.20resources.html#240184437">(May 25 2021 at 13:10)</a>:</h4>
<p>Works perfectly using <code>5.5.0-PRE1-SNAPSHOT</code>. Thank you for your work!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
