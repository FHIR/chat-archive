---
layout: page
title: "FHIR Chat  · registerInterceptor to GenericClient · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/registerInterceptor.20to.20GenericClient.html">registerInterceptor to GenericClient</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="191618771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/registerInterceptor%20to%20GenericClient/near/191618771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Romina Blasini <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/registerInterceptor.20to.20GenericClient.html#191618771">(Mar 24 2020 at 14:41)</a>:</h4>
<p>Hello, <br>
i'm currently working on an fhir client, which sould send json-data to a hapi-fhir server. <br>
I have the following code:</p>
<div class="codehilite"><pre><span></span>...
IGenericClient client = FhirContext.forR4().newRestfulGenericClient(this.url);
client.registerInterceptor(new BasicAuthInterceptor(this.username, this.password));
...
</pre></div>


<p>This worked perfectly fine, until i updated the hapi version. I could see, that somehow by updating between 3.7.0 and 3.8.0 the code isn't working anymore and i get the following Exception:</p>
<div class="codehilite"><pre><span></span>Caused by: java.lang.NoSuchMethodError: org.apache.commons.lang3.reflect.MethodUtils.getAnnotation(Ljava/lang/reflect/Method;Ljava/lang/Class;ZZ)Ljava/lang/annotation/Annotation;
    at ca.uhn.fhir.interceptor.executor.InterceptorService.findAnnotation(InterceptorService.java:573)
    at ca.uhn.fhir.interceptor.executor.InterceptorService.scanInterceptorForHookMethods(InterceptorService.java:554)
    at ca.uhn.fhir.interceptor.executor.InterceptorService.scanInterceptorAndAddToInvokerMultimap(InterceptorService.java:522)
    at ca.uhn.fhir.interceptor.executor.InterceptorService.registerInterceptor(InterceptorService.java:187)
    at ca.uhn.fhir.rest.client.impl.BaseClient.registerInterceptor(BaseClient.java:473)
    at org.miracum.sodareg.rest.FhirExporter.initializeClient(FhirExporter.java:85)
...
</pre></div>


<p>It's not only like that with the BasicAuthInterceptor, but with every other Interceptor I try to register.<br>
Has anyone an idea why I get this Exception or where I can find further explanation?<br>
Thanks!</p>



<a name="191623504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/registerInterceptor%20to%20GenericClient/near/191623504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/registerInterceptor.20to.20GenericClient.html#191623504">(Mar 24 2020 at 15:08)</a>:</h4>
<p>That looks like you have an old version of commons-lang3 on your classpath. Make sure to do a clean-build, and check that you're not hardcoding an old version in your pom</p>



<a name="191626472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/registerInterceptor%20to%20GenericClient/near/191626472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Romina Blasini <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/registerInterceptor.20to.20GenericClient.html#191626472">(Mar 24 2020 at 15:25)</a>:</h4>
<p>Thank you so much. That worked! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
