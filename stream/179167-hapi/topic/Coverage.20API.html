---
layout: page
title: "FHIR Chat  · Coverage API · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Coverage.20API.html">Coverage API</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="215808784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Coverage%20API/near/215808784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shiva Kumar Konduru <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Coverage.20API.html#215808784">(Nov 06 2020 at 05:52)</a>:</h4>
<p>Hi everyone ....we are using hapifhir to call an FHIR compliant API...........as part of this...we need to search for <strong>Coverage</strong> resource.....need guidance in preparing the request params for the same...</p>
<p><strong>Code to search the Coverage Resource -</strong></p>
<div class="codehilite"><pre><span></span><code>Bundle bundle2 = client
    .search()
    .forResource(Coverage.class)
    .where(Coverage.BENEFICIARY.hasChainedProperty(Patient.FAMILY.matches().value(&quot;UONOMI&quot;))).
        and(Coverage.BENEFICIARY.hasChainedProperty(Patient.GIVEN.matches().value(&quot;TYREEK&quot;))).
        and(Coverage.BENEFICIARY.hasChainedProperty(Patient.BIRTHDATE.beforeOrEquals().day(&quot;1926-12-29&quot;))).
        where(new TokenClientParam(&quot;Coverage.period.end&quot;).exactly().code(&quot;2020-11-05&quot;))
    .where(new TokenClientParam(&quot;Coverage.period.start&quot;).exactly().code(&quot;2020-11-05&quot;)).
        and(Coverage.BENEFICIARY.hasChainedProperty(
            Patient.IDENTIFIER.hasSystemWithAnyCode((&quot;http://terminology.hl7.org/CodeSystem/v2-0203|MB|101210097&quot;)))).
        include(Coverage.INCLUDE_BENEFICIARY)
    .returnBundle(Bundle.class)
    .withAdditionalHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;).withAdditionalHeader(&quot;x-subject-id&quot;, &quot;1&quot;)
    .execute();
</code></pre></div>

<p><strong>Error:</strong></p>
<p>2020-11-05 21:27:43.968 TRACE 13960 --- [nio-8080-exec-3] ca.uhn.fhir.rest.client.impl.BaseClient  : FHIR response:<br>
ca.uhn.fhir.rest.client.apache.ApacheHttpResponse@37fecfeb<br>
{"issue":[{"severity":"error","diagnostics":"","code":"invalid","expression":"Bundle","details":{"text":"object instance has properties which are not allowed by the schema: ['beneficiary.identifier','beneficiary.identifier..code','beneficiary.identifier..system','beneficiary.identifier..value']"}}],"resourceType":"OperationOutcome"}<br>
ca.uhn.fhir.rest.server.exceptions.InvalidRequestException: HTTP 400 Bad Request<br>
    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)<br>
    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)<br>
    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)</p>



<a name="216072912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Coverage%20API/near/216072912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Coverage.20API.html#216072912">(Nov 09 2020 at 11:42)</a>:</h4>
<p>I do have one question on the coverage API. My app has a list of insurance plan names that it can accept. Anything that does not belong to the list should not go to HAPI server</p>



<a name="216073018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Coverage%20API/near/216073018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Coverage.20API.html#216073018">(Nov 09 2020 at 11:43)</a>:</h4>
<p>Any idea if it is possible to restrict it in HAPI. Meaning, making HAPI to reject the coverage resource if it does not have the plan name preloaded in hapi</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
