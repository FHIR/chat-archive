---
layout: page
title: "FHIR Chat  · ✔ _has · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20_has.html">✔ _has</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="270540934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%E2%9C%94%20_has/near/270540934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohsen Jafari <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20_has.html#270540934">(Feb 03 2022 at 12:35)</a>:</h4>
<p>I'm looking for patients who have at least one observation and at least one procedure in the HAPI FHIR public test server using this request: <a href="https://hapi.fhir.org/baseR4/Patient?_has:Observation:patient&amp;_has:Procedure:patient">https://hapi.fhir.org/baseR4/Patient?_has:Observation:patient&amp;_has:Procedure:patient</a>. What I receive from the server is the following which is not as I expect in this case.</p>
<p>{<br>
  "resourceType": "OperationOutcome",<br>
  "text": {<br>
    "status": "generated",<br>
    "div": "&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\"0\"&gt;&lt;tr&gt;&lt;td style=\"font-weight: bold;\"&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Invalid _has parameter syntax: :Observation:patient&lt;/pre&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t&lt;/table&gt;\n\t&lt;/div&gt;"<br>
  },<br>
  "issue": [ {<br>
    "severity": "error",<br>
    "code": "processing",<br>
    "diagnostics": "Invalid _has parameter syntax: :Observation:patient"<br>
  } ]<br>
}</p>



<a name="270582931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%E2%9C%94%20_has/near/270582931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20_has.html#270582931">(Feb 03 2022 at 17:07)</a>:</h4>
<p>I think you're missing a 3rd part there, which would be a constraint for the Observation.  </p>
<p>The specification example is: <br>
GET [base]/Patient?_has:Observation:patient<strong>:code=1234-5</strong></p>
<p>I tried to trick it with something like this, but it failed: <br>
<a href="https://hapi.fhir.org/baseR4/Patient?_has:Observation:patient:_id:missing=false">https://hapi.fhir.org/baseR4/Patient?_has:Observation:patient:_id:missing=false</a></p>
<p>As an aside, the types of queries you are attempting, while perhaps allowed by the spec, can be difficult to implement due to the nature of FHIR resources and how most systems index them. FHIR does not lend itself well to complex ad-hoc queries across records, IMO. There are just too many relationships, complex types, backbone elements, etc. so the models become too deep and complex to represent in a traditional relational structure where such queries are "easy". Not to mention difficulty in paging the results.<br>
Anyway, just be aware that you will likely find variability in support, behavior, and performance across implementations when you start trying to do some of the more complex things allowed in the spec - if portability is important to you.</p>



<a name="270677515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%E2%9C%94%20_has/near/270677515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20_has.html#270677515">(Feb 04 2022 at 07:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="410473">Mohsen Jafari</span> has marked this topic as resolved.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
