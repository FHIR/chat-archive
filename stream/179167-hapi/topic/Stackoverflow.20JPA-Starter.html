---
layout: page
title: "FHIR Chat  · Stackoverflow JPA-Starter · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Stackoverflow.20JPA-Starter.html">Stackoverflow JPA-Starter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="271800490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Stackoverflow%20JPA-Starter/near/271800490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Meyers <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Stackoverflow.20JPA-Starter.html#271800490">(Feb 14 2022 at 09:14)</a>:</h4>
<p>Hello all,</p>
<p>I am reliably getting stackoverflow errors (see log) on a transaction import of just under 7000 resources using the HAPI-FHIR-JPA starter 5.5 and a mysql database. Batch imports are no problem. But what surprises me is that the overflow error occurs <strong>directly after a few seconds</strong> and not as expected after some time, once the server is at the limit. <br>
Any idea how I can fix this?</p>
<p>The server on which the HAPI is running has only 8 GB Ram, in addition the mentioned Mysql-Db is running there.<br>
I already tried to increase the Java heapsize with:</p>
<div class="codehilite"><pre><span></span><code>export MAVEN_OPTS=&quot;-Xmx4096m -Xms1024m&quot; &amp;&amp; mvn jetty:run
</code></pre></div>
<p>but without noticeable success. </p>
<p>Here is the top of my stacktrace:</p>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<p>2022-02-14 10:13:18.346 [qtp37590923-18] ERROR c.u.f.r.s.i.ExceptionHandlingInterceptor [ExceptionHandlingInterceptor.java:140] Failure during REST processing<br>
ca.uhn.fhir.rest.server.exceptions.InternalErrorException: Failed to call access method: java.lang.StackOverflowError<br>
        at ca.uhn.fhir.rest.server.method.BaseMethodBinding.invokeServerMethod(BaseMethodBinding.java:272)<br>
        at ca.uhn.fhir.rest.server.method.TransactionMethodBinding.invokeServer(TransactionMethodBinding.java:116)<br>
        at ca.uhn.fhir.rest.server.method.BaseResourceReturningMethodBinding.doInvokeServer(BaseResourceReturningMethodBinding.java:326)<br>
        at ca.uhn.fhir.rest.server.method.BaseResourceReturningMethodBinding.invokeServer(BaseResourceReturningMethodBinding.java:434)<br>
        at ca.uhn.fhir.rest.server.RestfulServer.handleRequest(RestfulServer.java:1152)<br>
        at ca.uhn.fhir.rest.server.RestfulServer.doPost(RestfulServer.java:423)<br>
        at ca.uhn.fhir.rest.server.RestfulServer.service(RestfulServer.java:1861)<br>
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)<br>
        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:799)<br>
        at org.eclipse.jetty.servlet.ServletHandler$ChainEnd.doFilter(ServletHandler.java:1626)<br>
        at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:228)<br>
        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)<br>
        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)<br>
        at org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:126)<br>
        at org.springframework.boot.web.servlet.support.ErrorPageFilter.access$000(ErrorPageFilter.java:64)<br>
        at org.springframework.boot.web.servlet.support.ErrorPageFilter$1.doFilterInternal(ErrorPageFilter.java:101)<br>
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)<br>
        at org.springframework.boot.web.servlet.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:119)<br>
        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)<br>
        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)<br>
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)<br>
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)<br>
        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:193)<br>
        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1601)<br>
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:548)<br>
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)<br>
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:602)<br>
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)<br>
        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:235)<br>
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1624)<br>
        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:233)<br>
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1434)<br>
        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:188)<br>
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:501)<br>
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1594)<br>
        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:186)<br>
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1349)<br>
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)<br>
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:191)<br>
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:146)<br>
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:127)<br>
        at org.eclipse.jetty.server.Server.handle(Server.java:516)<br>
        at org.eclipse.jetty.server.HttpChannel.lambda$handle$1(HttpChannel.java:388)<br>
        at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:633)<br>
        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:380)<br>
        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:277)<br>
        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:311)<br>
        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:105)<br>
        at org.eclipse.jetty.io.ChannelEndPoint$1.run(ChannelEndPoint.java:104)<br>
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:883)<br>
        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1034)<br>
        at java.base/java.lang.Thread.run(Thread.java:829)<br>
Caused by: java.lang.reflect.InvocationTargetException: null<br>
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)<br>
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)<br>
        at ca.uhn.fhir.rest.server.method.BaseMethodBinding.invokeServerMethod(BaseMethodBinding.java:264)<br>
        ... 51 common frames omitted<br>
Caused by: java.lang.StackOverflowError: null<br>
        at java.base/java.lang.Class.newInstance(Class.java:576)<br>
        at org.hibernate.hql.internal.ast.SqlASTFactory.create(SqlASTFactory.java:249)<br>
        at antlr.ASTFactory.create(ASTFactory.java:153)<br>
        at antlr.ASTFactory.create(ASTFactory.java:186)</p>
</div></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
