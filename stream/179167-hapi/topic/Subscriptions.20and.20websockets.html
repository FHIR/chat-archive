---
layout: page
title: "FHIR Chat  · Subscriptions and websockets · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscriptions.20and.20websockets.html">Subscriptions and websockets</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="235651032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscriptions%20and%20websockets/near/235651032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscriptions.20and.20websockets.html#235651032">(Apr 22 2021 at 10:08)</a>:</h4>
<p>I am trying to use subscriptions on the public HAPI FHIR R4 server <a href="http://hapi.fhir.org/baseR4">http://hapi.fhir.org/baseR4</a>.<br>
The CapabilityStatement says they are supported and the websocket extension gives</p>
<div class="codehilite"><pre><span></span><code>            &quot;extension&quot;: [
                {
                    &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/capabilitystatement-websocket&quot;,
                    &quot;valueUri&quot;: &quot;/websocketR4&quot;
                }
            ]
</code></pre></div>
<p>When I create a Subscription it is not rejected but when I try and connect with the websocket I get</p>
<div class="codehilite"><pre><span></span><code>ws://hapi.fhir.org/baseR4/websocketR4; Code: 1002 Invalid status code received: 404 Status line: HTTP/1.1 404 Not Found
</code></pre></div>
<p>and if I try a somewhat different base Url  I get</p>
<div class="codehilite"><pre><span></span><code>ws://hapi.fhir.org/websocketR4; Code: 1002 Invalid status code received: 404 Status line: HTTP/1.1 404 Not Found
</code></pre></div>
<p>What am I doing wrong?</p>
<p>I have been able to use subscriptions on R4 HAPI FHIR servers (not the public one they were disabled at the time) but at that time there was no websocket extension so you just had to know it. I wanted to take advantage of the new extension and the fact Subscriptions now return a logical id and not just a 'ping'. But I have to connect first!!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
