---
layout: page
title: "FHIR Chat  · Upload of IG · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html">Upload of IG</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="192524450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/192524450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#192524450">(Apr 01 2020 at 13:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> it looks like the <code>upload-igpack</code> (<a href="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-cli/hapi-fhir-cli-api/src/main/java/ca/uhn/fhir/cli/IgPackUploader.java" title="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-cli/hapi-fhir-cli-api/src/main/java/ca/uhn/fhir/cli/IgPackUploader.java">https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-cli/hapi-fhir-cli-api/src/main/java/ca/uhn/fhir/cli/IgPackUploader.java</a>) could use some TLC, and I have some hours to spend on it to do so. Before I do it, I would like to hear if it was more or less deliberately abandoned in its current state?</p>



<a name="192529774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/192529774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#192529774">(Apr 01 2020 at 13:48)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191427">@Jens Villadsen</span>  - We certainly would gladly accept any improvements to it, but I also consider it mostly abandoned at this point.</p>
<p>NPM is now the "right way" to solve the artifact packaging problem in FHIR, so what we really need to do is get support for that implemented. All of the recent validation API changes were geared towards getting that effort started. If by chance you (or anyone) is interested, Grahame has already written lots of code to parse NPMs. The next task is to create an implementation of IValidationSupport (against current HAPI FHIR Master since that interface is fairly different now) that can open and supply artifacts from an NPM module.</p>
<p>I'm planning on doing this soon, probably next month, but if someone beats me to it I certainly won't complain. :)</p>



<a name="192531233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/192531233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#192531233">(Apr 01 2020 at 13:56)</a>:</h4>
<p>On another project we already do the NPM package parsing and load it into HAPI (with added bonus features of whitelisting according to specific capability statements - and we do it on servlet load directly on the resource providers instead of using an HTTP client but that is easily changed) -  basically boot strapping a HAPI FHIR instance with the contents of an IG, so the effort is very little for me to add this into the cli.</p>



<a name="192531463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/192531463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#192531463">(Apr 01 2020 at 13:58)</a>:</h4>
<p>My deadline for having this is the 14th of april - so may I suggest that you wait until that date and see what I end up with in a PR ;)</p>



<a name="192531874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/192531874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#192531874">(Apr 01 2020 at 14:00)</a>:</h4>
<p>Btw - end goal for me is to easily be able to instantiate a FHIR server with the 'rule set' of an IG - meaning that the FHIR server must have the IG loaded. All wrapped in docker compose (content is probably going to be postgres, HAPI FHIR JPA, cli client with IG url parameter and an elasticsearch instance)</p>



<a name="192539638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/192539638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#192539638">(Apr 01 2020 at 14:51)</a>:</h4>
<p>Great development! Love to see hapi npm support!<br>
<span class="user-mention" data-user-id="191427">@Jens Villadsen</span> could this be implemented that we could specify the needed npm IG packages in the jpastarter project as well? <br>
The hapi jpaserver would then load these packages from the package repos directly.</p>



<a name="192539773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/192539773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#192539773">(Apr 01 2020 at 14:52)</a>:</h4>
<p>As not all IGs are published in the registry, an alternative config method in which you point to local IG npm packages on the filesystem would also useful.</p>



<a name="192540256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/192540256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#192540256">(Apr 01 2020 at 14:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> I'll see what I can do;)</p>



<a name="192541195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/192541195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#192541195">(Apr 01 2020 at 15:00)</a>:</h4>
<p>FYI - credits goes to MedCom (danish Non-profit org represented by <span class="user-mention" data-user-id="194815">@Irene Zuschlag</span>  &amp; <span class="user-mention" data-user-id="195814">@Ole Vilstrup</span> here ) for funding my hours adding this functionality once they have received my proposal ;)</p>



<a name="192541245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/192541245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#192541245">(Apr 01 2020 at 15:00)</a>:</h4>
<p>thanks sooo much. If you need a helping hand, i can invest some time as well.</p>



<a name="192652789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/192652789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#192652789">(Apr 02 2020 at 11:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span>  - I'll let you know when we begin</p>



<a name="193376186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376186">(Apr 08 2020 at 20:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> <span class="user-mention" data-user-id="191451">@Patrick Werner</span> initially (and as a safeguard) is it then safe to say that only instances of valuesets, codesystems and structuredefinitions should be considered?</p>



<a name="193376209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376209">(Apr 08 2020 at 20:44)</a>:</h4>
<p>concept maps</p>



<a name="193376231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376231">(Apr 08 2020 at 20:45)</a>:</h4>
<p>right</p>



<a name="193376257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376257">(Apr 08 2020 at 20:45)</a>:</h4>
<p>NamingSystems ?</p>



<a name="193376272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376272">(Apr 08 2020 at 20:45)</a>:</h4>
<p>hmmm ... sure, ok</p>



<a name="193376278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376278">(Apr 08 2020 at 20:45)</a>:</h4>
<p>y for sure</p>



<a name="193376292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376292">(Apr 08 2020 at 20:46)</a>:</h4>
<p>longer term, GraphDefinition, StructureMap, but those are very use case dependent</p>



<a name="193376350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376350">(Apr 08 2020 at 20:46)</a>:</h4>
<p>I see no reason to add examples from the NPM package ... unless explicitly stated so</p>



<a name="193376471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376471">(Apr 08 2020 at 20:47)</a>:</h4>
<p>and since you are listening <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  - you might wanna get a hold on the people behind <a href="http://build.fhir.org/ig/hl7au/au-fhir-base/downloads.html" title="http://build.fhir.org/ig/hl7au/au-fhir-base/downloads.html">http://build.fhir.org/ig/hl7au/au-fhir-base/downloads.html</a></p>



<a name="193376485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376485">(Apr 08 2020 at 20:47)</a>:</h4>
<p>what do you think about SearchParameter?</p>



<a name="193376486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376486">(Apr 08 2020 at 20:47)</a>:</h4>
<p>they link to the validator.pack file</p>



<a name="193376502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376502">(Apr 08 2020 at 20:48)</a>:</h4>
<p>SearchParameter .... well ...</p>



<a name="193376564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376564">(Apr 08 2020 at 20:48)</a>:</h4>
<p>it depends ...</p>



<a name="193376627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376627">(Apr 08 2020 at 20:49)</a>:</h4>
<p>examples not by default. Could imagine having this optionally or as a seperate paramter could alos be nice to prime servers for connectathons.</p>



<a name="193376641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376641">(Apr 08 2020 at 20:49)</a>:</h4>
<p>yep</p>



<a name="193376747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376747">(Apr 08 2020 at 20:50)</a>:</h4>
<p>I would have thought SearchParameter for sure.. those are pretty commonly included in IGs no?</p>



<a name="193376766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376766">(Apr 08 2020 at 20:50)</a>:</h4>
<p>Thats why i was asking about SearchParameter. I personally would include it</p>



<a name="193376772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376772">(Apr 08 2020 at 20:50)</a>:</h4>
<p>ok</p>



<a name="193376860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376860">(Apr 08 2020 at 20:51)</a>:</h4>
<p>why are we loading things?</p>
<ul>
<li>because loading them changes internal server functionality (e.g. validator...)</li>
<li>because we want them available on the FHIR API<br>
?</li>
</ul>



<a name="193376875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193376875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193376875">(Apr 08 2020 at 20:51)</a>:</h4>
<p>FYI: that also includes the use of <a href="https://smilecdr.com/docs/fhir_repository/search_parameters.html#unique-composite-search-parameters" title="https://smilecdr.com/docs/fhir_repository/search_parameters.html#unique-composite-search-parameters">https://smilecdr.com/docs/fhir_repository/search_parameters.html#unique-composite-search-parameters</a></p>



<a name="193377089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193377089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193377089">(Apr 08 2020 at 20:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> at this point by default those two things are one and the same in HAPI FHIR JPA server</p>
<p>I.e. if you load in a bunch of StructureDefinitions, they become available to the validator for validating other resource types, but they are also regular resources available via the REST endpoint</p>
<p>Another enhancement I definitely want to make is to allow people to separate those functions (which is how Vonk does it).. but that's not yet done</p>



<a name="193377094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193377094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193377094">(Apr 08 2020 at 20:53)</a>:</h4>
<p>SearchParameters that overload existing searchparameters in order to create indexes might not be a part of an IG</p>



<a name="193377229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193377229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193377229">(Apr 08 2020 at 20:54)</a>:</h4>
<blockquote>
<p>I.e. if you load in a bunch of StructureDefinitions</p>
</blockquote>
<p>indeed. But loading a bunch of new patients doesn't change internal functionality</p>



<a name="193377257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193377257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193377257">(Apr 08 2020 at 20:54)</a>:</h4>
<p>is there a list of which resources currently have internal meaning?</p>



<a name="193377427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193377427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193377427">(Apr 08 2020 at 20:56)</a>:</h4>
<p>gotta go - will follow up tomorrow ;)</p>



<a name="193377984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193377984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193377984">(Apr 08 2020 at 21:00)</a>:</h4>
<p>Presently in HAPI it would be: <code>StructureDefinition</code>, <code>CodeSystem</code>, <code>ValueSet</code>, <code>ConceptMap</code>, <code>SearchParameter</code>. Possibly <code>NamingSystem</code> will get added to that list too at some point soon-ish.</p>
<p>I do really want to get that separated behaviour coded before too long though... truthfully to me it seems like weird behaviour to load in an NPM module and then have those resources show up through the rest endpoint. I think there should be a way perhaps through the RSET endpoint to interact with the NPM packages themselves at the package level (maybe a FHIR operation or two to manage them) but they shouldn't get exploded int your database eventually</p>



<a name="193378079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193378079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193378079">(Apr 08 2020 at 21:01)</a>:</h4>
<p>i like the idea of the npm rest endpoint!</p>



<a name="193378204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193378204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193378204">(Apr 08 2020 at 21:02)</a>:</h4>
<p>could even only provide the npm package name and start from there</p>



<a name="193378251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193378251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193378251">(Apr 08 2020 at 21:02)</a>:</h4>
<p>otoh it does make sense to be able to load the NpmPackage into the rest api if that's what you want</p>



<a name="193378384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193378384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193378384">(Apr 08 2020 at 21:03)</a>:</h4>
<blockquote>
<p>Possibly NamingSystem will get added to that list too at some point soon-ish.</p>
</blockquote>
<p>yeah because we'll be making changes for supporting v2 / CDA that make NamingSystem required inside the terminology system operations</p>



<a name="193381464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193381464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193381464">(Apr 08 2020 at 21:35)</a>:</h4>
<p>I guess Subscription should be added to this list too. I haven't yet seen someone including a Subscription in an IG, but I bet it's a matter of time...</p>



<a name="193381545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193381545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193381545">(Apr 08 2020 at 21:36)</a>:</h4>
<p>I have seen them, but only as examples</p>



<a name="193411741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193411741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193411741">(Apr 09 2020 at 06:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193378251" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193378251">said</a>:</p>
<blockquote>
<p>otoh it does make sense to be able to load the NpmPackage into the rest api if that's what you want</p>
</blockquote>
<p>I'll have that need</p>



<a name="193411790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193411790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193411790">(Apr 09 2020 at 06:36)</a>:</h4>
<p>I my environment the Terminology Server is more often updated than the IG</p>



<a name="193411835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193411835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193411835">(Apr 09 2020 at 06:37)</a>:</h4>
<p>and those updates are shipped as events other an MQ</p>



<a name="193730387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193730387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193730387">(Apr 12 2020 at 21:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> If you would like the IG  to end up in some special NPM address, how is it supposed to work from HAPI CLI? A custom operation where an URL is passed to the system provider that then fetches the content at the specified URL?</p>



<a name="193730439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193730439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193730439">(Apr 12 2020 at 21:14)</a>:</h4>
<blockquote>
<p>If you would like the IG to end up in some special NPM address</p>
</blockquote>
<p>I don't understand this.</p>



<a name="193730450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193730450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193730450">(Apr 12 2020 at 21:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191319">James Agnew</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193377984" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193377984">said</a>:</p>
<blockquote>
<p>Presently in HAPI it would be: <code>StructureDefinition</code>, <code>CodeSystem</code>, <code>ValueSet</code>, <code>ConceptMap</code>, <code>SearchParameter</code>. Possibly <code>NamingSystem</code> will get added to that list too at some point soon-ish.</p>
<p>I do really want to get that separated behaviour coded before too long though... truthfully to me it seems like weird behaviour to load in an NPM module and then have those resources show up through the rest endpoint. I think there should be a way perhaps through the RSET endpoint to interact with the NPM packages themselves at the package level (maybe a FHIR operation or two to manage them) but they shouldn't get exploded int your database eventually</p>
</blockquote>



<a name="193730502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193730502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193730502">(Apr 12 2020 at 21:16)</a>:</h4>
<p>To me it sounds like that the content of the NPM package should be accessible through a REST interface that is decoupled from the regular FHIR REST interface</p>



<a name="193730510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193730510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193730510">(Apr 12 2020 at 21:17)</a>:</h4>
<p>eg. /IG/[packageName]/CodeSystem</p>



<a name="193735338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193735338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193735338">(Apr 12 2020 at 23:33)</a>:</h4>
<p>TBH, not yet sure... Need to spend some time thinking about how storage will work in the JPA server before figuring out how the API works.</p>
<p>For now I definitely think it's fine to break the package apart and upload the individual components.</p>



<a name="193737495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/193737495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#193737495">(Apr 13 2020 at 00:44)</a>:</h4>
<p>Ok</p>



<a name="194483627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194483627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194483627">(Apr 17 2020 at 18:44)</a>:</h4>
<p>We have order to go. Commence of development is monday :)</p>



<a name="194488840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194488840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194488840">(Apr 17 2020 at 19:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191427">Jens Villadsen</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/192531463" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/192531463">said</a>:</p>
<blockquote>
<p>My deadline for having this is the 14th of april - so may I suggest that you wait until that date and see what I end up with in a PR ;)</p>
</blockquote>
<p>I meant 14th of May ;)</p>



<a name="194650235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194650235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194650235">(Apr 20 2020 at 09:16)</a>:</h4>
<p><span class="user-mention" data-user-id="294872">@Martin Zacho Grønhøj</span> is on the assignment now ;)</p>



<a name="194652214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194652214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194652214">(Apr 20 2020 at 09:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> (<span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191451">@Patrick Werner</span> ) We intend to do the following:<br>
1) Extend the the DSTU3 and R4 systemproviders with a operation that takes a parameter containing an URL. When invoking that FHIR operation, the server downloads the content (package.tgz) from that given URL. The server then unzips the content and installs it into the database<br>
2) Extend the hapi-fhir-starter project by adding a property in the properties file that contains a list of URLs to package.tgz files. On startup, the HAPI FHIR starter server fetches the files and proceeds as in 1)<br>
3) Extend the HAPI FHIR CLI tool to support either using the operation from 1) or locally unzip a package.tgz file and upload the resources either one by one or in a single transaction</p>
<p>Please comment on our intended approach and feel free to point out any missing items.</p>



<a name="194663494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194663494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194663494">(Apr 20 2020 at 11:47)</a>:</h4>
<blockquote>
<p>that takes a parameter containing an URL. When invoking that FHIR operation, the server downloads the content (package.tgz) from that given URL. The server then unzips the content and installs it into the database</p>
</blockquote>
<p>from my point of view it would be more natural to just provide the package id, and then ask the PackageCacheManager to resolve it. No new download if already in the cache, and you need not be concerned about where it actually is - it will all auto-resolve if it's in the package system</p>



<a name="194664869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194664869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194664869">(Apr 20 2020 at 12:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194663494" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194663494">said</a>:</p>
<blockquote>
<blockquote>
<p>that takes a parameter containing an URL. When invoking that FHIR operation, the server downloads the content (package.tgz) from that given URL. The server then unzips the content and installs it into the database</p>
</blockquote>
<p>from my point of view it would be more natural to just provide the package id, and then ask the PackageCacheManager to resolve it. No new download if already in the cache, and you need not be concerned about where it actually is - it will all auto-resolve if it's in the package system</p>
</blockquote>
<p>Don't you then assume that the package is installed at <a href="http://packages.fhir.org" title="http://packages.fhir.org">http://packages.fhir.org</a> ?</p>



<a name="194664941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194664941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194664941">(Apr 20 2020 at 12:02)</a>:</h4>
<p>which might not be the case during development</p>



<a name="194665139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194665139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194665139">(Apr 20 2020 at 12:04)</a>:</h4>
<p>A way to support that could be with a custom url scheme if you are really keen on that repo - eg. fhir-ig://packageId</p>



<a name="194665320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194665320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194665320">(Apr 20 2020 at 12:06)</a>:</h4>
<p>indeed it might not be the case then. In which case a URL - or a file - would be good. but I expected that the majority use would be a published package</p>



<a name="194672225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194672225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194672225">(Apr 20 2020 at 13:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> I'd rather have the server not need to fetch external content if we can avoid it, since that's a pretty big security risk.</p>
<p>Couldn't the CLI tool read in the package and handle the "explosion" itself?</p>



<a name="194676601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194676601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194676601">(Apr 20 2020 at 13:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span>  The primary idea was that one could start a docker image with a parameter stating an IG url which then would be loaded into the HAPI FHIR instance at startup time.</p>



<a name="194676792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194676792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194676792">(Apr 20 2020 at 13:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> 2 out of three IG's I work on are not listed there - I can't see why such a strict binding (to the package repo) should be necessary?</p>



<a name="194677025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194677025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194677025">(Apr 20 2020 at 13:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> It could indeed be solved with the CLI tool. The idea however was to stay independent of any other tools</p>



<a name="194677099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194677099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194677099">(Apr 20 2020 at 13:49)</a>:</h4>
<p>Ideally all that a user should use was a docker image and an URL</p>



<a name="194677528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194677528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194677528">(Apr 20 2020 at 13:52)</a>:</h4>
<p>But I guess the explosion could be encapsulated in the client. From your comments it becomes clear that we have different needs. <span class="user-mention" data-user-id="191319">@James Agnew</span> does that mean that you won't accept the current design encapsulated in a SystemProvider in PR due to security risks?</p>



<a name="194681647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194681647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194681647">(Apr 20 2020 at 14:24)</a>:</h4>
<p>Hmm, I see.</p>
<p>If you need this to be inside the server, let's at least put it in its own dedicated service and make the URL(s) be something that are pulled from configuration as opposed to being something that comes from user input (I guess DaoConfig is probably the right spot for it). That would mitigate the security concern mostly.</p>



<a name="194684044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194684044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194684044">(Apr 20 2020 at 14:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> <span class="user-mention" data-user-id="191319">@James Agnew</span> <br>
I like and need both approaches. A new FHIR package service endpoint (turned off by default in the jpastarter) and a cli exploding packages and manually uploading them to a REST endpoint.<br>
For the latter a colleague of mine already started a small project, will be glad to add this to hapi-cli</p>



<a name="194685881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194685881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194685881">(Apr 20 2020 at 14:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> please let your colleague reach out to my colleague <span class="user-mention" data-user-id="294872">@Martin Zacho Grønhøj</span> who will also be looking at the CLI</p>



<a name="194685987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194685987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194685987">(Apr 20 2020 at 14:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> daoconfig seems like a reasonable tradeoff</p>



<a name="194685990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194685990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194685990">(Apr 20 2020 at 14:53)</a>:</h4>
<p>I've done something like this but I loaded in the packages during the JPAServer initialisation. <br>
My aim was to set a validation package in HAPI and had another IG to control server (CapabilityStatement) behaviour.</p>



<a name="194686211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194686211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194686211">(Apr 20 2020 at 14:55)</a>:</h4>
<p><span class="user-mention" data-user-id="194909">@Kevin Mayfield</span> we also currently load it during servlet init for validation later on</p>



<a name="194686370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194686370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194686370">(Apr 20 2020 at 14:56)</a>:</h4>
<p>Im sure <span class="user-mention" data-user-id="294872">@Martin Zacho Grønhøj</span> will add the fork url soon that will be the base for our PR</p>



<a name="194740767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194740767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194740767">(Apr 20 2020 at 22:21)</a>:</h4>
<blockquote>
<p>2 out of three IG's I work on are not listed there</p>
</blockquote>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> I cannot get simplifier to connect up to the wider eco-system, so I'm running a back up package server at <a href="http://test.fhir.org/packages" title="http://test.fhir.org/packages">http://test.fhir.org/packages</a> that has all the other packages</p>



<a name="194740830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194740830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194740830">(Apr 20 2020 at 22:22)</a>:</h4>
<p>the PackageCacheManager sorts this stuff automatically</p>



<a name="194768783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194768783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194768783">(Apr 21 2020 at 07:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> I'm hoping I can get some resources to support this.  Maybe be concentrating on simplifier to HL7 IG conversion first but our aim (developers anyway) is to support validation.</p>



<a name="194770938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194770938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194770938">(Apr 21 2020 at 08:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I still think using a local version of a package should be possible</p>



<a name="194771171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194771171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194771171">(Apr 21 2020 at 08:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191687">@Kevin Mayfield</span> validation is supported by HAPI FHIR out of the box once an IG is loaded into it</p>



<a name="194771184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194771184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194771184">(Apr 21 2020 at 08:02)</a>:</h4>
<p>as far as I remember</p>



<a name="194779929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194779929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194779929">(Apr 21 2020 at 09:40)</a>:</h4>
<blockquote>
<p>using a local version of a package should be possible</p>
</blockquote>
<p>yes I think that makes sense too</p>



<a name="194783334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194783334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194783334">(Apr 21 2020 at 10:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> where does <a href="http://test.fhir.org/packages" title="http://test.fhir.org/packages">http://test.fhir.org/packages</a> look for packages when it scans?</p>



<a name="194783481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194783481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194783481">(Apr 21 2020 at 10:22)</a>:</h4>
<p>the list is here:</p>



<a name="194783519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194783519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194783519">(Apr 21 2020 at 10:23)</a>:</h4>
<p><a href="https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json" title="https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json">https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json</a></p>



<a name="194783671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194783671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194783671">(Apr 21 2020 at 10:24)</a>:</h4>
<p>if thats the case where is my package then downloaded from? <a href="https://build.fhir.org/ig/hl7dk/dk-medcom/branches/master/failure/build.log" title="https://build.fhir.org/ig/hl7dk/dk-medcom/branches/master/failure/build.log">https://build.fhir.org/ig/hl7dk/dk-medcom/branches/master/failure/build.log</a></p>



<a name="194783698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194783698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194783698">(Apr 21 2020 at 10:25)</a>:</h4>
<p><a href="http://packages.fhir.org/" title="http://packages.fhir.org/">http://packages.fhir.org/</a> ?</p>



<a name="194783808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194783808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194783808">(Apr 21 2020 at 10:26)</a>:</h4>
<p>dk.fhir.ig.dk-medcom-core#current would be downloaded on the fly from the current build.</p>



<a name="194783831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194783831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194783831">(Apr 21 2020 at 10:26)</a>:</h4>
<p>based on the last successful master build</p>



<a name="194783842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194783842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194783842">(Apr 21 2020 at 10:26)</a>:</h4>
<p>I see it says 0.8.0 in the package itself, but that only resolves if you publish it</p>



<a name="194783866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194783866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194783866">(Apr 21 2020 at 10:27)</a>:</h4>
<p>e.g. you register it in a package feed the server follows, or you push it to the server directly</p>



<a name="194786695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194786695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Zacho Grønhøj <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194786695">(Apr 21 2020 at 11:01)</a>:</h4>
<p>Hi everyone, happy to join the heat ;-)</p>
<p><span class="user-mention silent" data-user-id="191319">James Agnew</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194681647" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194681647">said</a>:</p>
<blockquote>
<p>If you need this to be inside the server, let's at least put it in its own dedicated service and make the URL(s) be something that are pulled from configuration as opposed to being something that comes from user input (I guess DaoConfig is probably the right spot for it). That would mitigate the security concern mostly.</p>
</blockquote>
<p>I've created af fork for development of this feature: <a href="https://github.com/mzgtrifork/hapi-fhir/tree/install-external-ig-package-at-startup" title="https://github.com/mzgtrifork/hapi-fhir/tree/install-external-ig-package-at-startup">https://github.com/mzgtrifork/hapi-fhir/tree/install-external-ig-package-at-startup</a><br>
edit: renamed branch</p>
<p><span class="user-mention silent" data-user-id="191451">Patrick Werner</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194684044" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194684044">said</a>:</p>
<blockquote>
<p>For the latter a colleague of mine already started a small project, will be glad to add this to hapi-cli</p>
</blockquote>
<p>Is the project accessible somewhere?</p>



<a name="194787925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194787925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194787925">(Apr 21 2020 at 11:17)</a>:</h4>
<p>not yet. Will talk to my student today</p>



<a name="194788012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194788012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194788012">(Apr 21 2020 at 11:18)</a>:</h4>
<p>But this fork is for adding a backend to hapi, not for extending the cli to open a package and upload it via rest?</p>



<a name="194788794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194788794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194788794">(Apr 21 2020 at 11:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> aint the cli part of the repo at <a href="https://github.com/jamesagnew/hapi-fhir/tree/master/hapi-fhir-cli" title="https://github.com/jamesagnew/hapi-fhir/tree/master/hapi-fhir-cli">https://github.com/jamesagnew/hapi-fhir/tree/master/hapi-fhir-cli</a> ?</p>



<a name="194790816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194790816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Zacho Grønhøj <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194790816">(Apr 21 2020 at 11:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191451">Patrick Werner</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194788012" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194788012">said</a>:</p>
<blockquote>
<p>But this fork is for adding a backend to hapi, not for extending the cli to open a package and upload it via rest?</p>
</blockquote>
<p>Maybe both, but on separate branches. I'm starting development of the backend on the branch install-external-ig-package-at-startup.</p>



<a name="194796659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194796659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194796659">(Apr 21 2020 at 12:51)</a>:</h4>
<p>ok my colleague was more focused on the uploading of conformance resources of a package via REST</p>



<a name="194796921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194796921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194796921">(Apr 21 2020 at 12:53)</a>:</h4>
<p>because some servers will check if the referenced CS of a VS is present i suggest to have a order in which conformance resources should be upped:</p>



<a name="194797061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194797061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194797061">(Apr 21 2020 at 12:54)</a>:</h4>
<p>NamingSystem, CodeSystem, ValueSet, StructureDefinition, ConceptMap, SearchParameter, Subscription</p>



<a name="194797163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194797163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194797163">(Apr 21 2020 at 12:55)</a>:</h4>
<p>Also for upping the StrucDefs i would try to resolve the dependencies of contained profiles and start with the "root" profile</p>



<a name="194797341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194797341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194797341">(Apr 21 2020 at 12:56)</a>:</h4>
<p>So the snapshots of the uploaded profiles can be built properly on the server side (if needed and implemented)</p>



<a name="194798738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194798738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194798738">(Apr 21 2020 at 13:07)</a>:</h4>
<p>I agree - that is the same order we already use</p>



<a name="194798822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194798822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194798822">(Apr 21 2020 at 13:08)</a>:</h4>
<p>Building the hierachy can be a bit cumbersome</p>



<a name="194798943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194798943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194798943">(Apr 21 2020 at 13:09)</a>:</h4>
<p>And we haven't touched on the issue of IG dependencies and hierachies</p>



<a name="194852867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194852867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194852867">(Apr 21 2020 at 19:53)</a>:</h4>
<blockquote>
<p>Building the hierachy can be a bit cumbersome</p>
</blockquote>
<p>especially since there are circular dependencies. (not in the heirarchy, but in the profile references). So don't worry about that, and have a load all before you generate snapshots</p>



<a name="194908797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194908797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194908797">(Apr 22 2020 at 09:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> aren't snapshots on the profiles generated by the IG Publisher?</p>



<a name="194912018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194912018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194912018">(Apr 22 2020 at 10:22)</a>:</h4>
<p>Yes the IG publisher does and any packages from it will have snapshots, but other sources don’t necessarily produce snapshots</p>



<a name="194912058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194912058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194912058">(Apr 22 2020 at 10:23)</a>:</h4>
<p>which sources are we talking about?</p>



<a name="194921481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194921481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194921481">(Apr 22 2020 at 12:20)</a>:</h4>
<p>I believe that (some?) simplifier packages don't include snapshots. Or is it forge? And FSH doesn't produce snapshots</p>



<a name="194921962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194921962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194921962">(Apr 22 2020 at 12:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194852867" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194852867">said</a>:</p>
<blockquote>
<blockquote>
<p>Building the hierachy can be a bit cumbersome</p>
</blockquote>
<p>especially since there are circular dependencies. (not in the heirarchy, but in the profile references). So don't worry about that, and have a load all before you generate snapshots</p>
</blockquote>
<p>I tried to understand how profiles could have circular references and can't come up with an example. Could someone push me in the right direction please?</p>



<a name="194922228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194922228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194922228">(Apr 22 2020 at 12:28)</a>:</h4>
<p>the validator tests cases are derived from the real world case - two patients cross-linked, with a profile on primary and a profile on the secondary</p>



<a name="194923890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194923890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194923890">(Apr 22 2020 at 12:44)</a>:</h4>
<p>ah ok. Thats ok. Was thinking about profiles deriving from another in a circle <span aria-label="octopus" class="emoji emoji-1f419" role="img" title="octopus">:octopus:</span></p>



<a name="194928103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/194928103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#194928103">(Apr 22 2020 at 13:15)</a>:</h4>
<p>OK - producing snapshots shouldn't be much of an issue when using HAPI FHIR and its dependencies (the core lib)</p>



<a name="195047030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195047030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Zacho Grønhøj <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195047030">(Apr 23 2020 at 11:28)</a>:</h4>
<p>I've forked <a href="https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/install-external-ig-package-at-startup" title="https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/install-external-ig-package-at-startup">hapi-fhir-jpaserver-starter</a>, and planning to begin a top-down approach:</p>
<ul>
<li>Adding configuration fields "igResourcesURL" in HapiProperties of jpaserver-starter and DaoConfig of jpaserver-api</li>
<li>Adding a service "igResourcesInstaller" in jpaserver-base (under ca.uhn.fhir.jpa.dao or maybe a dedicated namespace?), which</li>
</ul>
<ol>
<li>Downloads the IG package and dependent packages/ loads them from disk (possibly using <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/210cc0affcf16b55dafc522b22c3dbadbe883923/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/NpmPackage.java" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/210cc0affcf16b55dafc522b22c3dbadbe883923/org.hl7.fhir.utilities/src/main/java/org/hl7/fhir/utilities/cache/NpmPackage.java">Grahams NpmPackage abstraction</a>), if the URL is set.</li>
<li>Generates snapshots of StructureDefinitions if necessary.</li>
<li>Saves all resources of type NamingSystem, CodeSystem, ValueSet, StructureDefinition (snapshots), ConceptMap, SearchParameter and Subscription to the database.</li>
</ol>
<p>I intend to invoke the service when the ApplicationReadyEvent is broadcastet.</p>
<p>Comments?</p>



<a name="195057335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195057335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195057335">(Apr 23 2020 at 13:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> Cool stuff <span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span> I assume you've found the package server documentation? <a href="https://simplifier.net/docs/package-server" title="https://simplifier.net/docs/package-server">https://simplifier.net/docs/package-server</a>. You will indeed encounter packages with dependencies, which you should also be able to find on <a href="http://packages.fhir.org" title="http://packages.fhir.org">packages.fhir.org</a>.<br>
Indeed, having the options to point to packages which are not (yet) in the FHIR package server makes a lot of sense.</p>



<a name="195063683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195063683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195063683">(Apr 23 2020 at 13:53)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> will there be a joined package server at some point?<br>
I think the success of npm/maven is due to a central repository.</p>



<a name="195064037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195064037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195064037">(Apr 23 2020 at 13:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> <a href="http://packages.fhir.org" title="http://packages.fhir.org">packages.fhir.org</a> IS the central repository! <span aria-label="open mouth" class="emoji emoji-1f62e" role="img" title="open mouth">:open_mouth:</span> It brings together the packages from Simplifier, HL7, FHIR Foundation and all the feeds in the feeds object of <a href="https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json" title="https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json">https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json</a>.</p>



<a name="195064288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195064288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195064288">(Apr 23 2020 at 13:58)</a>:</h4>
<p>That doesn't mean the infrastructure is all perfect yet. We're still running the import from the other feeds by hand because we keep running into issues with the feeds and need a good way to automate the reporting and handling of them.</p>



<a name="195064328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195064328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195064328">(Apr 23 2020 at 13:58)</a>:</h4>
<p>ah good to know! Thanks Ward.</p>



<a name="195064603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195064603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195064603">(Apr 23 2020 at 14:00)</a>:</h4>
<p>It also focuses on stable packages so far. There's no central solution for the #dev, #current and x.x.x-alphabeta versions yet.</p>



<a name="195064766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195064766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195064766">(Apr 23 2020 at 14:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194740767" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/194740767">said</a>:</p>
<blockquote>
<blockquote>
<p>2 out of three IG's I work on are not listed there</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="191427">Jens Villadsen</span> I cannot get simplifier to connect up to the wider eco-system, so I'm running a back up package server at <a href="http://test.fhir.org/packages" title="http://test.fhir.org/packages">http://test.fhir.org/packages</a> that has all the other packages</p>
</blockquote>
<p>was asking because of this statement <span class="user-mention" data-user-id="203235">@Ward Weistra</span></p>



<a name="195065843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195065843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195065843">(Apr 23 2020 at 14:09)</a>:</h4>
<p>Yeah, I assume Grahame is referring to the package server infrastructure not yet in automated fashion picking up new feeds in the feeds object or scheduled importing of the packages? Which are both things we are working towards. We just ran the importer manually again, on all feeds in there now.</p>



<a name="195068665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195068665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195068665">(Apr 23 2020 at 14:28)</a>:</h4>
<p>sounds great. Thanks for the explanation</p>



<a name="195075141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195075141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195075141">(Apr 23 2020 at 15:09)</a>:</h4>
<p>What is behind <a href="http://packages.fhir.org" title="http://packages.fhir.org">http://packages.fhir.org</a>? A regular Nexus instance?</p>



<a name="195083337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195083337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195083337">(Apr 23 2020 at 16:05)</a>:</h4>
<p>Since it is an npm repo, why not use a regular Nexus for it?</p>



<a name="195083446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195083446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195083446">(Apr 23 2020 at 16:06)</a>:</h4>
<p>Or am i a total ignorant?</p>



<a name="195088724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195088724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195088724">(Apr 23 2020 at 16:47)</a>:</h4>
<blockquote>
<p>possibly using Grahams NpmPackage abstraction</p>
</blockquote>
<p>We should defintely be using that... Dependency management is complex, no sense reinventing the wheel</p>



<a name="195090087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195090087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195090087">(Apr 23 2020 at 16:57)</a>:</h4>
<p>Speaking of ... <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> did you have a look at how sonatype handles npm? (<a href="https://github.com/sonatype/nexus-public/tree/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal" title="https://github.com/sonatype/nexus-public/tree/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal">https://github.com/sonatype/nexus-public/tree/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal</a>)</p>



<a name="195117215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195117215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195117215">(Apr 23 2020 at 20:45)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> thanks for finally uploading from the package feeds. How often will this run now?</p>



<a name="195117877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195117877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195117877">(Apr 23 2020 at 20:51)</a>:</h4>
<p>cURL'ing <a href="https://packages.fhir.org/" title="https://packages.fhir.org/">https://packages.fhir.org/</a> leads to HTTP 404</p>



<a name="195118031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195118031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195118031">(Apr 23 2020 at 20:52)</a>:</h4>
<p>anyways - is it a regular npm repo running behind the curtains? <span class="user-mention" data-user-id="203235">@Ward Weistra</span></p>



<a name="195118079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195118079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195118079">(Apr 23 2020 at 20:52)</a>:</h4>
<p>I'm getting that too with POSTMan - GET <a href="http://packages.fhir.org/catalog?fhirversion=STU3" title="http://packages.fhir.org/catalog?fhirversion=STU3">http://packages.fhir.org/catalog?fhirversion=STU3</a> with Accept: application/json, but just <a href="http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false" title="http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false">http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false</a> works in a browser</p>



<a name="195118226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195118226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195118226">(Apr 23 2020 at 20:54)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> this is the list of packages I get for STU3 with prerelease = false:</p>
<div class="codehilite"><pre><span></span>SliceBugTest
Furoretestproject
Simplifier.Core.Stu3.DataTypes
Simplifier.Core.STU3.ValueSets
Simplifier.Core.STU3.CodeSystems
Simplifier.Core.STU3.Extensions
Simplifier.Core.STU3
Demo.National.PatientCare
Demo.Regional.PatientCare
gefyra.sandbox
ufp.core
dummy.first
MySimplifierProject.core
MySimplifier.Project
ProvincialClientRegi.core
PGO.02
irrs.pkg
cihi.irrs.pkg
cihi.irrs
private.package.test
test.my.first.package
TestProjekt2.test
Simplifier.Others.Stu3
nictiz.fhir.nl.stu3.zib2017
Simplifier.Core.STU3.Resources
Simplifier.Core.STU3.ProfilesOthers
HL7Norway.STU3.no.basis
kbv.fhir.vos
testontwikkel.package
testontwikkelz.package
dvmd.kdl.stu3.2019
PCR.Core.STU3
MyDemoProject.core
auw.dummy
MyDemo.core
UKKoeln.nNGM.RegistrationForm.IG
aws.dummy
dev.cihub.ClinicalSite.org
dev.cihub.CancerCareRecord
TestMenno.project
Testproject.test
TestProjectArnim.test
Mirjamstestproject.test
acme.base
hl7.fhir.r2b.core
hl7.fhir.r2b.corexml
hl7.fhir.r2b.examples
hl7.fhir.r2b.expansions
hl7.fhir.r3.core
hl7.fhir.r3.corexml
</pre></div>



<a name="195118244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195118244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195118244">(Apr 23 2020 at 20:54)</a>:</h4>
<div class="codehilite"><pre><span></span>jvi@Jenss-MBP-2 ~ % curl &#39;http://packages.fhir.org/catalog?fhirversion=STU3&#39;
[{&quot;Name&quot;:&quot;SliceBugTest&quot;,&quot;Description&quot;:null,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Furoretestproject&quot;,&quot;Description&quot;:null,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.Stu3.DataTypes&quot;,&quot;Description&quot;:&quot;These are the FHIR Core STU3 Data types. This is a temporary package until the offical HL7 FHIR Core Packages are released and published on Simplifier.&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3.ValueSets&quot;,&quot;Description&quot;:&quot;These are the FHIR Core STU3 ValueSets. This is a temporary package until the offical HL7 FHIR Core Packages are released and published on Simplifier.&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3.CodeSystems&quot;,&quot;Description&quot;:&quot;These are the FHIR Core STU3 Code Systems. This is a temporary package until the offical HL7 FHIR Core Packages are released and published on Simplifier.&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3.Extensions&quot;,&quot;Description&quot;:&quot;These are the FHIR Core STU3 Extensions. This is a temporary package until the offical HL7 FHIR Core Packages are released and published on Simplifier.&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3&quot;,&quot;Description&quot;:&quot;This is a meta package that contains the FHIR Core STU3 Specification. It does not contain resources, but it has dependencies to all packages needed to get the full specification. &quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Demo.National.PatientCare&quot;,&quot;Description&quot;:&quot;Demo project to show the use of packages&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Demo.Regional.PatientCare&quot;,&quot;Description&quot;:&quot;Demo project to show the use of packages &quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;gefyra.sandbox&quot;,&quot;Description&quot;:&quot;Release version&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;ufp.core&quot;,&quot;Description&quot;:&quot;The United Federation of Planet (UFP) FHIR Implementation Guide of intergalactic scope&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;dummy.first&quot;,&quot;Description&quot;:&quot;Dummy package testing version 2&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;MySimplifierProject.core&quot;,&quot;Description&quot;:&quot;My Simplifier Project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;MySimplifier.Project&quot;,&quot;Description&quot;:&quot;My Simplifier Project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;ProvincialClientRegi.core&quot;,&quot;Description&quot;:&quot;FHIR based Implementation Guide for provincial CR system&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;PGO.02&quot;,&quot;Description&quot;:&quot;WEM ZWConnect&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;irrs.pkg&quot;,&quot;Description&quot;:&quot;IRRS Project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;cihi.irrs.pkg&quot;,&quot;Description&quot;:&quot;IRRS Project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;cihi.irrs&quot;,&quot;Description&quot;:&quot;IRRS Project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;private.package.test&quot;,&quot;Description&quot;:&quot;Testing private packages&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;test.my.first.package&quot;,&quot;Description&quot;:&quot;This is my test description, see if it gets in the package.manifest&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;TestProjekt2.test&quot;,&quot;Description&quot;:&quot;Test Projekt&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Others.Stu3&quot;,&quot;Description&quot;:&quot;Profiles that are part of the core specification but are not base profiles&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;nictiz.fhir.nl.stu3.zib2017&quot;,&quot;Description&quot;:&quot;Nictiz NL package of FHIR STU3 conformance resources for HCIM Release 2017. Includes MedMij and HL7 NL.\r\n\r\nHCIMs: https://zibs.nl/wiki/HCIM_Release_2017(EN)&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3.Resources&quot;,&quot;Description&quot;:&quot;These are the STU3 Core Profile StructureDefinitions describing resources.\r\n\r\n&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;Simplifier.Core.STU3.ProfilesOthers&quot;,&quot;Description&quot;:&quot;Profiles that are part of the core specification but are not base profiles&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;HL7Norway.STU3.no.basis&quot;,&quot;Description&quot;:&quot;Basis profiles developed by HL7 Norway.&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;kbv.fhir.vos&quot;,&quot;Description&quot;:&quot;Beispielprojekt Version 1.1&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;testontwikkel.package&quot;,&quot;Description&quot;:&quot;Mijn eigen test en ontwikkelproject&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;testontwikkelz.package&quot;,&quot;Description&quot;:&quot;Mijn eigen test en ontwikkelproject&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;dvmd.kdl.stu3.2019&quot;,&quot;Description&quot;:&quot;Publikation der Terminologie-Ressourcen für die Nutzung der Klinische Dokumentenklassen-Liste (KDL) des DVMD&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;PCR.Core.STU3&quot;,&quot;Description&quot;:&quot;ehealth Ontario&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;MyDemoProject.core&quot;,&quot;Description&quot;:&quot;My demo project&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;auw.dummy&quot;,&quot;Description&quot;:&quot;Dummy-Projekt zur Erstellung des AuW Packages&quot;,&quot;FhirVersion&quot;:&quot;STU3&quot;},{&quot;Name&quot;:&quot;MyDemo.core&quot;,&quot;Descrip
</pre></div>



<a name="195118258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195118258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195118258">(Apr 23 2020 at 20:54)</a>:</h4>
<p>how do we clean this up? we don't want to see non real packages..</p>



<a name="195119217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195119217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195119217">(Apr 23 2020 at 21:02)</a>:</h4>
<p>I didn't look at nexus. should I? What would I look for?</p>



<a name="195119350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195119350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195119350">(Apr 23 2020 at 21:03)</a>:</h4>
<p>parsing for starters: <a href="https://github.com/sonatype/nexus-public/blob/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal/NpmPackageParser.java" title="https://github.com/sonatype/nexus-public/blob/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal/NpmPackageParser.java">https://github.com/sonatype/nexus-public/blob/master/plugins/nexus-repository-npm/src/main/java/org/sonatype/nexus/repository/npm/internal/NpmPackageParser.java</a></p>



<a name="195119541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195119541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195119541">(Apr 23 2020 at 21:05)</a>:</h4>
<p>resolving would be next</p>



<a name="195119681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195119681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195119681">(Apr 23 2020 at 21:06)</a>:</h4>
<p>since its an open source repo that handles (among others) npm packages I would think that they have all the logic needed</p>



<a name="195119909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195119909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195119909">(Apr 23 2020 at 21:08)</a>:</h4>
<p>that might have helped when I was starting, but not so much now</p>



<a name="195120005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120005">(Apr 23 2020 at 21:09)</a>:</h4>
<p>actually - the whole resolving thing - shouldn't that have been carried out by npm repo?</p>



<a name="195120070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120070">(Apr 23 2020 at 21:10)</a>:</h4>
<p>what resolving thing?</p>



<a name="195120118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120118">(Apr 23 2020 at 21:10)</a>:</h4>
<p>when you fetch a leaf IG, you traverse one node up the tree right?</p>



<a name="195120208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120208">(Apr 23 2020 at 21:11)</a>:</h4>
<p>a leaf IG?</p>



<a name="195120271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120271">(Apr 23 2020 at 21:12)</a>:</h4>
<p>the most outer IG in a tree of IG's</p>



<a name="195120327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120327">(Apr 23 2020 at 21:13)</a>:</h4>
<p>so you mean, based on dependencies?</p>



<a name="195120349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120349">(Apr 23 2020 at 21:13)</a>:</h4>
<p>yes</p>



<a name="195120447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120447">(Apr 23 2020 at 21:14)</a>:</h4>
<p>so I fetch just the package asked for in the package manager when the package is loaded. The IG loader will walk the dependencies loading the packages, which will be fetched if they are needed</p>



<a name="195120491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120491">(Apr 23 2020 at 21:14)</a>:</h4>
<p>yeah ok .... well ... nevermind ... hope you didn't spend too much time on that part</p>



<a name="195120544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120544">(Apr 23 2020 at 21:15)</a>:</h4>
<p>I still would like to know though, if there's a regular npm repo behind <a href="https://packages.fhir.org/" title="https://packages.fhir.org/">https://packages.fhir.org/</a></p>



<a name="195120573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120573">(Apr 23 2020 at 21:15)</a>:</h4>
<p>some time. Initially, we talked about just asking the repository for the package and all it's dependencies, but the message I have been getting is that download time matters, and why fetch what you already have?</p>



<a name="195120822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120822">(Apr 23 2020 at 21:18)</a>:</h4>
<p>sure ... there's no reason to do that</p>



<a name="195120842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120842">(Apr 23 2020 at 21:18)</a>:</h4>
<p>but that could also be solved ... like npm and maven does it</p>



<a name="195120881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120881">(Apr 23 2020 at 21:18)</a>:</h4>
<p>maven checks can check on SHA's if I remember correct</p>



<a name="195120915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120915">(Apr 23 2020 at 21:19)</a>:</h4>
<p>npm probably does the same of some sort</p>



<a name="195120969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195120969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195120969">(Apr 23 2020 at 21:19)</a>:</h4>
<p>so the repo gives you back a list of resolved dependencies with links, versions and SHA's ...</p>



<a name="195121046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195121046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195121046">(Apr 23 2020 at 21:20)</a>:</h4>
<p>then you can decide for yourself about your caching strategy</p>



<a name="195121147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195121147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195121147">(Apr 23 2020 at 21:21)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> an observation - when going to <a href="http://packages.fhir.org" title="http://packages.fhir.org">http://packages.fhir.org</a> then you are redirected to <a href="https://simplifier.net/packages" title="https://simplifier.net/packages">https://simplifier.net/packages</a> - but you need to be logged in, in order to download .... that seems fishy</p>



<a name="195121264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195121264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195121264">(Apr 23 2020 at 21:22)</a>:</h4>
<p>you don't need to be logged to download from <a href="http://packages.fhir.org" title="http://packages.fhir.org">packages.fhir.org</a></p>



<a name="195121316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195121316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195121316">(Apr 23 2020 at 21:23)</a>:</h4>
<p><a href="/user_uploads/10155/QfAZrnFWTlUIUU10U7aDBFOg/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/QfAZrnFWTlUIUU10U7aDBFOg/image.png" title="image.png"><img src="/user_uploads/10155/QfAZrnFWTlUIUU10U7aDBFOg/image.png"></a></div>



<a name="195121402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195121402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195121402">(Apr 23 2020 at 21:24)</a>:</h4>
<p>then why does it say "Login to download" <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="195121728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195121728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195121728">(Apr 23 2020 at 21:27)</a>:</h4>
<p>because you're not using the API. But <span class="user-mention" data-user-id="203235">@Ward Weistra</span> people shouldn't have to login to use the web site either, for the package registry</p>



<a name="195121806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195121806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195121806">(Apr 23 2020 at 21:28)</a>:</h4>
<p>I cant use an API if curl tells me 404</p>



<a name="195121849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195121849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195121849">(Apr 23 2020 at 21:29)</a>:</h4>
<p>the circle is closed. If regular tools are not usable and the UI locks me out it doesn't work</p>



<a name="195122052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195122052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195122052">(Apr 23 2020 at 21:31)</a>:</h4>
<p>If I had got a 302 in cURL it would have been sufficient to me</p>



<a name="195150911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195150911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195150911">(Apr 24 2020 at 06:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span>  the api doc is here: <a href="https://simplifier.net/docs/package-server/Search" title="https://simplifier.net/docs/package-server/Search">https://simplifier.net/docs/package-server/Search</a></p>



<a name="195150955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195150955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195150955">(Apr 24 2020 at 06:34)</a>:</h4>
<blockquote>
<p>Because we want to make package search as useful as possible for the FHIR usecase, we are not following the NPM standard, but we implement a lean endpoint that can be used for intellisense (dropdown) and a search that can deal with the most important FHIR relevant search queries: canonicals and FHIR versions.</p>
</blockquote>



<a name="195150967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195150967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195150967">(Apr 24 2020 at 06:34)</a>:</h4>
<p>Is this a defined interface for fhir packages?</p>



<a name="195151022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195151022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195151022">(Apr 24 2020 at 06:35)</a>:</h4>
<p><a href="http://docs.simplifier.net/simplifier/simplifierPackages.html" title="http://docs.simplifier.net/simplifier/simplifierPackages.html">http://docs.simplifier.net/simplifier/simplifierPackages.html</a></p>



<a name="195157199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195157199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195157199">(Apr 24 2020 at 08:10)</a>:</h4>
<p>Good morning!</p>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> While the package spec is NPM inspired, it isn't fully compatible (no single root folder, lower case package names, not handling dependencies the same way). Also, from what I hear, NPM is not a nicely defined standard, but more a bag of conventions that you have to reengineer, making it harder. There's been an earlier conversation on this, without concrete decisions afaik: <a href="#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/NPM.20Package.20Spec/near/181766179" title="#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/NPM.20Package.20Spec/near/181766179">https://chat.fhir.org/#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/NPM.20Package.20Spec/near/181766179</a></p>
<p>I would welcome FHIR-I proposals on what aligning fully would mean, while maintaining any FHIR-needed extras like defining and searching on FHIR version. I do see the benefit in people being able to reuse NPM servers. Do keep in there are already a large number of packages, so we will need package-spec versioning too (personally I would think this spec should someday be tied to the rest of the FHIR spec versioning, so e.g. have the proposals for FHIR spec alignment with NPM work for FHIR package spec in R5).<br>
The Simplifier package infrastructure (from which the <a href="http://FHIR.org" title="http://FHIR.org">FHIR.org</a> package server benefits) doesn't use an existing NPM server behind it. We do have some instructions on installing with NPM, but I've been told dependencies are not coming along (as discussed above) and NPM search is not implemented.</p>
<p>Simplifier's priority has been on making sure the FHIR packages endpoint does what it needs for the FHIR community. This has been documented on <a href="https://simplifier.net/docs/package-server" title="https://simplifier.net/docs/package-server">https://simplifier.net/docs/package-server</a> and is fully open, just curl <code>https://packages.fhir.org/catalog</code> instead (see Search) to get the packages, query <code>https://packages.fhir.org/&lt;package-name&gt;</code> for the versions and query <code>https://packages.fhir.org/&lt;package-name&gt;/&lt;package-version&gt;</code> to download. The find the dependencies in <code>package.json</code> and download those with their URLs. Or use Torinox to download them all.<br>
If you're visiting <a href="https://packages.fhir.org" title="https://packages.fhir.org">https://packages.fhir.org</a> (or <a href="https://packages.simplifier.net" title="https://packages.simplifier.net">https://packages.simplifier.net</a>) in the browser we redirect to the Simplifier UI for searching packages. This is a better experience than a 404 for someone looking for a package, right?</p>



<a name="195158769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195158769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195158769">(Apr 24 2020 at 08:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> We've discussed the topic of <code>prerelease</code> before <a href="#narrow/stream/179239-tooling/topic/NPM.20package.20system/near/188932240" title="#narrow/stream/179239-tooling/topic/NPM.20package.20system/near/188932240">here</a>.</p>
<ul>
<li><a href="http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false" title="http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false">http://packages.fhir.org/catalog?fhirversion=STU3&amp;prerelease=false</a> will only show you packages that have a version that is not a prerelease. According to semver versioning <code>0.0.1-anything</code> is a pre-release package, <code>0.0.1</code> is not. That seems to work correctly, unless you find packages in that list that ONLY have prerelease version.</li>
<li>Secondly, people could of course be marking things 'ready for release' which, let's say, are not of the level of quality of hl7.fhir.us.core. But in that sense Simplifier is the Youtube of FHIR data models (user-generated content) compared to the more tv-station approach (vetted content) of the HL7/FHIR Foundation feeds. There are two likely improvements to this: Allow the user to say (in package server and also the FHIR registry on top) from which channel they want the content to come (e.g only from 'FHIR Foundation Guides' feed or not from 'FHIR Foundation Support Packages' feed. And ranking the best packages (e.g. most referred to) higher to filter out the weeds.</li>
</ul>



<a name="195160507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195160507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195160507">(Apr 24 2020 at 08:47)</a>:</h4>
<p>(Side note: we will very soon unlist all the <code>Simplifier.Core.*</code> packages now the real deal <code>hl7.fhir.*.core</code> is there <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span>)</p>



<a name="195167445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195167445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195167445">(Apr 24 2020 at 09:59)</a>:</h4>
<blockquote>
<p>I would welcome FHIR-I proposals on what aligning fully would mean, while maintaining any FHIR-needed extras like defining and searching on FHIR version. I do see the benefit in people being able to reuse NPM servers. Do keep in there are already a large number of packages, so we will need package-spec versioning too (personally I would think this spec should someday be tied to the rest of the FHIR spec versioning, so e.g. have the proposals for FHIR spec alignment with NPM work for FHIR package spec in R5).</p>
</blockquote>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span>  sounds like we are aligned ;)</p>



<a name="195167975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195167975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195167975">(Apr 24 2020 at 10:04)</a>:</h4>
<p>I'm no npm master ninja - I would just like to not add frustration for people used to be using npm packages and repos. That would be my 5 cents.</p>



<a name="195187294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195187294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195187294">(Apr 24 2020 at 13:27)</a>:</h4>
<blockquote>
<p>According to semver versioning 0.0.1-anything is a pre-release package, 0.0.1 is not</p>
</blockquote>
<p>One of the trends I hate right now in the Java ecosystem is that many big libraries have decided to deviate from this. Spring labels its releases <code>1.2.3.FINAL</code>, hibernate uses <code>1.2.3.RELEASE</code>, etc.</p>



<a name="195187549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195187549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Zacho Grønhøj <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195187549">(Apr 24 2020 at 13:29)</a>:</h4>
<p>Hi guys, a couple of questions:</p>
<p>1) When installing an IG which was loaded from a file on the disk, how should its dependencies be resolved?</p>
<p>Use the PackageCacheManager to fetch the dependencies from the global cache, or the repository at <a href="http://packages.fhir.org" title="http://packages.fhir.org">packages.fhir.org</a> if a dependency is not in cache?</p>
<p>2) What should the behavior be, if an IG or (any of) its dependencies cannot be resolved? A graceful shutdown or startup without installed packages?</p>
<p>3) When generating snapshots of IGs with dependencies, I assume that any StructureDefinitions in any of the dependencies, that does not already contain a snapshot, should also have its snapshot generated.</p>
<p>Should this happen in a specific order, eg. snapshots of dependencies should be generated before snapshots of the dependent package?</p>



<a name="195247105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195247105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195247105">(Apr 24 2020 at 21:32)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> :</p>
<blockquote>
<p>While the package spec is NPM inspired, it isn't fully compatible</p>
</blockquote>
<p>I don't believe that this is true</p>
<blockquote>
<p>no single root folder</p>
</blockquote>
<p>I reworked all the packages to only have a single root folder, and we wrote this into the rules</p>
<blockquote>
<p>lower case package names</p>
</blockquote>
<p>That is a convention that we made, though I see it's not a convention that Simplifier follows. None of my package infrastructure depends on following it, though all the HL7 authoring rules enforce it</p>
<blockquote>
<p>not handling dependencies the same way</p>
</blockquote>
<p>Other than restricting the possible values for version, I thought it was the same</p>



<a name="195247318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195247318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195247318">(Apr 24 2020 at 21:35)</a>:</h4>
<blockquote>
<p>people could of course be marking things 'ready for release' which, let's say, are not of the level of quality of hl7.fhir.us.core.</p>
</blockquote>
<p>Well, there's levels in between. the package server should publish packages when people are ready to publish them, irrespective of the workflow of quality. But  I think that simplifier projects should not be allowed to publish packages like <code>dummy.first</code> - they should be at least forced to namespace. And projects like that should be removed from being published.</p>



<a name="195247354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195247354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195247354">(Apr 24 2020 at 21:35)</a>:</h4>
<p>but whatever, we have to figure out how to tidy this up ASAP</p>



<a name="195247634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195247634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195247634">(Apr 24 2020 at 21:38)</a>:</h4>
<p><span class="user-mention" data-user-id="294872">@Martin Zacho Grønhøj</span> </p>
<p>1 - I'm not sure what difference you intend there - my answer is yes to both unless I misunderstand what you mean by global cache</p>
<ol start="2">
<li>
<p>that's an application specific question. Are you asking about HAPI installation? I would expect that in that context, you'd ask the user</p>
</li>
<li>
<p>yes and yes. Though how I manage this in the core tools is :</p>
</li>
</ol>
<ul>
<li>Load all profiles</li>
<li>iterate them all generating the snapshots</li>
<li>generate any missing snapshots in dependencies recursively</li>
<li>keep a watch on the stack to guard against stack crash (and produce a better error message)</li>
</ul>



<a name="195259604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195259604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Zacho Grønhøj <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195259604">(Apr 25 2020 at 00:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634">said</a>:</p>
<blockquote>
<p>1 - I'm not sure what difference you intend there - my answer is yes to both unless I misunderstand what you mean by global cache</p>
</blockquote>
<p>Global cache meaning the <a href="https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache" title="https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache">local cache on the machine</a>.</p>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634">said</a>:</p>
<blockquote>
<ol start="2">
<li>that's an application specific question. Are you asking about HAPI installation? I would expect that in that context, you'd ask the user</li>
</ol>
</blockquote>
<p>Yes, in hapi-fhir-jpaserver-starter for instance. IMO it's sensible to have the default behavior be a shutdown, to inform the user of the error, but also allow a flag to be set, if the user wants to run the application anyways. So I guess my question is: Does it make sense to run a server with a package that's missing its dependencies?</p>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195247634">said</a>:</p>
<blockquote>
<ol start="3">
<li>yes and yes. Though how I manage this in the core tools is :</li>
</ol>
</blockquote>
<p>Could you provide me with a link to the source code of this? I can't seem to find it.</p>



<a name="195381622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195381622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Zacho Grønhøj <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195381622">(Apr 27 2020 at 07:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="294872">Martin Zacho Grønhøj</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195259604" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195259604">said</a>:</p>
<blockquote>
<p>Could you provide me with a link to the source code of this? I can't seem to find it.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="195393350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195393350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195393350">(Apr 27 2020 at 09:36)</a>:</h4>
<p>well, it's spread across the core code, but most of it's in org.hl7.fhir.r5.context.BaseWorkerContext</p>



<a name="195393844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195393844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195393844">(Apr 27 2020 at 09:42)</a>:</h4>
<p>aint much of it wrapped in <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/4316c81f7ef578510c0b255663dd06ff64b9b56e/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/conformance/ProfileUtilities.java#L463" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/4316c81f7ef578510c0b255663dd06ff64b9b56e/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/conformance/ProfileUtilities.java#L463">https://github.com/hapifhir/org.hl7.fhir.core/blob/4316c81f7ef578510c0b255663dd06ff64b9b56e/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/conformance/ProfileUtilities.java#L463</a> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="195394222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195394222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195394222">(Apr 27 2020 at 09:46)</a>:</h4>
<p>that's the logic for generating snapshots. the logic for managing the generation is in the BaseContext</p>



<a name="195557549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195557549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Zacho Grønhøj <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195557549">(Apr 28 2020 at 12:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191319">James Agnew</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193381464" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/193381464">said</a>:</p>
<blockquote>
<p>I guess Subscription should be added to this list too. I haven't yet seen someone including a Subscription in an IG, but I bet it's a matter of time...</p>
</blockquote>
<p>In our current way of uploading the resources from the IG to our server, for each resource R1 we do the following:</p>
<ul>
<li>search for any resource R2 with the same URL (profile?)</li>
<li>if found, assign <a href="http://R2.id" title="http://R2.id">R2.id</a> to R1 and update R1</li>
<li>otherwise, create R1</li>
</ul>
<p>The other resource types (NamingSystem, CodeSystem, ValueSet, StructureDefinition, ConceptMap and SearchParameter) all extend MetadataResource and thus have a searchable URL, whereas Subscription does not, since it only extends DomainResource.</p>
<p>What parameter should be used for searching for existing subscriptions, when uploading subscriptions from an IG? I guess the ID could be used, but since it's not globally unique like the MetadataResource URL, then the IG upload could introduce duplicate data.</p>



<a name="195569648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195569648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195569648">(Apr 28 2020 at 14:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="294872">Martin Zacho Grønhøj</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195557549" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195557549">said</a>:</p>
<blockquote>
<p>The other resource types (NamingSystem, CodeSystem, ValueSet, StructureDefinition, ConceptMap and SearchParameter) all extend MetadataResource and thus have a searchable URL, whereas Subscription does not, since it only extends DomainResource.</p>
<p>What parameter should be used for searching for existing subscriptions, when uploading subscriptions from an IG? I guess the ID could be used, but since it's not globally unique like the MetadataResource URL, then the IG upload could introduce duplicate data.</p>
</blockquote>
<p>Subscriptions should be unique by their Identifier, right? <span class="user-mention" data-user-id="191319">@James Agnew</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="195570504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195570504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195570504">(Apr 28 2020 at 14:19)</a>:</h4>
<p>Subscriptions don't have an identifier, so I think you'd have to use the ID. It's not ideal, but there isn't really a better way I can see..</p>



<a name="195595706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195595706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195595706">(Apr 28 2020 at 17:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> what is <a href="http://build.fhir.org/subscription-definitions.html#Subscription.identifier" title="http://build.fhir.org/subscription-definitions.html#Subscription.identifier">http://build.fhir.org/subscription-definitions.html#Subscription.identifier</a> that then?</p>



<a name="195595804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195595804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195595804">(Apr 28 2020 at 17:09)</a>:</h4>
<p>oh.... that is only on bleeding edge ...</p>



<a name="195595835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195595835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195595835">(Apr 28 2020 at 17:09)</a>:</h4>
<p><span aria-label="drooling" class="emoji emoji-1f924" role="img" title="drooling">:drooling:</span></p>



<a name="195596353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195596353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195596353">(Apr 28 2020 at 17:12)</a>:</h4>
<p>Ah, so it is.</p>



<a name="195812594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195812594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195812594">(Apr 30 2020 at 08:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="294872">Martin Zacho Grønhøj</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195047030" title="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/195047030">said</a>:</p>
<blockquote>
<p>I've forked <a href="https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/install-external-ig-package-at-startup" title="https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/install-external-ig-package-at-startup">hapi-fhir-jpaserver-starter</a></p>
</blockquote>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> FYI</p>



<a name="195812877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195812877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195812877">(Apr 30 2020 at 08:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> - Can you be persuaded to have a look at the upcoming PR that <span class="user-mention" data-user-id="294872">@Martin Zacho Grønhøj</span> hopefully will make in the near future in order to get this into 5.0.0? or has that deadline already passed?</p>



<a name="195812939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195812939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195812939">(Apr 30 2020 at 08:55)</a>:</h4>
<p>hopefully not - I have a breaking change to commit for R5 that I haven't got around to yet</p>



<a name="195813217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195813217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195813217">(Apr 30 2020 at 08:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> is that a commit to something in <a href="https://github.com/hapifhir/org.hl7.fhir.core" title="https://github.com/hapifhir/org.hl7.fhir.core">https://github.com/hapifhir/org.hl7.fhir.core</a> ? AFAIK, <span class="user-mention" data-user-id="294872">@Martin Zacho Grønhøj</span>'s work will concern loading of Igs in versions DSTU3 and R4 based on the transitive dependency that HAPI FHIR runs on</p>



<a name="195813332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195813332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195813332">(Apr 30 2020 at 09:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> so (how) will your commit be able to break that?</p>



<a name="195815695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195815695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Zacho Grønhøj <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195815695">(Apr 30 2020 at 09:29)</a>:</h4>
<p>PR to hapi-fhir should be ready in a few days. It uses the npm utilities from org.hl7.fhir.utilities.cache and models from org.hl7.fhir.&lt;version&gt;.model.</p>



<a name="195822482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195822482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195822482">(Apr 30 2020 at 10:46)</a>:</h4>
<p>I'm fixing some property accessors in the generated model classes</p>



<a name="195886310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195886310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195886310">(Apr 30 2020 at 19:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> whats your ETA for completion of that fixing?</p>



<a name="195903288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195903288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195903288">(Apr 30 2020 at 21:21)</a>:</h4>
<p>I don't know. soon, but people keep dropping other urgent stuff on me</p>



<a name="195903481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195903481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195903481">(Apr 30 2020 at 21:23)</a>:</h4>
<p><a href="/user_uploads/10155/31RALkyJK9BIBF5WX8BvvWZ5/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/31RALkyJK9BIBF5WX8BvvWZ5/image.png" title="image.png"><img src="/user_uploads/10155/31RALkyJK9BIBF5WX8BvvWZ5/image.png"></a></div>



<a name="195903599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195903599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195903599">(Apr 30 2020 at 21:24)</a>:</h4>
<p>yeah well that's pretty topical these days</p>



<a name="195903752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195903752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195903752">(Apr 30 2020 at 21:25)</a>:</h4>
<p><a href="/user_uploads/10155/mOqVJZJkh6obgeCatCB7nZLT/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/mOqVJZJkh6obgeCatCB7nZLT/image.png" title="image.png"><img src="/user_uploads/10155/mOqVJZJkh6obgeCatCB7nZLT/image.png"></a></div>



<a name="195994148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/195994148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Zacho Grønhøj <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#195994148">(May 01 2020 at 18:38)</a>:</h4>
<p>PR for hapi-fhir is ready: <a href="https://github.com/jamesagnew/hapi-fhir/pull/1826" title="https://github.com/jamesagnew/hapi-fhir/pull/1826">https://github.com/jamesagnew/hapi-fhir/pull/1826</a></p>
<p>Let me know what you think/ improvements etc.</p>



<a name="196000327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196000327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196000327">(May 01 2020 at 19:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span></p>



<a name="196826058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196826058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Zacho Grønhøj <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196826058">(May 07 2020 at 20:28)</a>:</h4>
<p>I've implemented a quick reference implementation of how to use the new IgInstallerSvc in my <a href="https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/ig_upload_reference_implementation" title="https://github.com/mzgtrifork/hapi-fhir-jpaserver-starter/tree/ig_upload_reference_implementation">hapi-fhir-jpaserver-starter fork</a> using a local built of the <a href="https://github.com/mzgtrifork/hapi-fhir/tree/install-external-ig-package-at-startup" title="https://github.com/mzgtrifork/hapi-fhir/tree/install-external-ig-package-at-startup">branch from my PR</a>. It is still under review.</p>
<p>I've build a docker-image, so you can try running an instance of hapi-fhir-starter with an uploaded IG of your choice:</p>
<div class="codehilite"><pre><span></span><code>docker pull mzgtrifork/hapi-fhir-jpaserver-starter:0.0.1
</code></pre></div>


<p>install an implementation guide using a URL:</p>
<div class="codehilite"><pre><span></span><code>docker run \
       --name=hapi-fhir \
       --rm \
       -p 8080:8080 \
       -e HAPI_IMPLEMENTATION_GUIDE_URL=https://build.fhir.org/ig/hl7dk/dk-medcom/package.tgz \
       mzgtrifork/hapi-fhir-jpaserver-starter:0.0.1
</code></pre></div>


<p>or to fetch a package, say NHSD.Assets.STU3#1.0.0, from <a href="http://packages.fhir.org" title="http://packages.fhir.org">packages.fhir.org</a> and install at startup:</p>
<div class="codehilite"><pre><span></span><code>docker run \
       --name=hapi-fhir \
       --rm \
       -p 8080:8080 \
       -e HAPI_FHIR_VERSION=DSTU3 \
       -e HAPI_IMPLEMENTATION_GUIDE_ID=NHSD.Assets.STU3 \
       -e HAPI_IMPLEMENTATION_GUIDE_VERSION=1.0.0 \
       mzgtrifork/hapi-fhir-jpaserver-starter:0.0.1
</code></pre></div>


<p>So far so good - a lot of packages on <a href="http://packages.fhir.org" title="http://packages.fhir.org">packages.fhir.org</a> causes various errors. It seems like Simplifier doesn't validate packages according to <a href="https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-Versions" title="https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-Versions">the spec</a>? <span class="user-mention" data-user-id="191319">@James Agnew</span> <span class="user-mention" data-user-id="203235">@Ward Weistra</span></p>



<a name="196831048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196831048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196831048">(May 07 2020 at 21:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191451">@Patrick Werner</span> have a look at the docker image and let us know what you think</p>



<a name="196831205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196831205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196831205">(May 07 2020 at 21:15)</a>:</h4>
<p>which packages cause errors? We're still working on the packages ...</p>



<a name="196833582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196833582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196833582">(May 07 2020 at 21:38)</a>:</h4>
<p><a href="https://simplifier.net/packages/de.medizininformatikinitiative.kerndatensatz.person/0.9.1" title="https://simplifier.net/packages/de.medizininformatikinitiative.kerndatensatz.person/0.9.1">https://simplifier.net/packages/de.medizininformatikinitiative.kerndatensatz.person/0.9.1</a> seems to be broken</p>



<a name="196833618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196833618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196833618">(May 07 2020 at 21:39)</a>:</h4>
<p><a href="https://simplifier.net/packages/ehelse.fhir.no.grunndata/2.2.4" title="https://simplifier.net/packages/ehelse.fhir.no.grunndata/2.2.4">https://simplifier.net/packages/ehelse.fhir.no.grunndata/2.2.4</a> seems to be broken</p>



<a name="196834065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196834065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196834065">(May 07 2020 at 21:43)</a>:</h4>
<p>the packages sourced from Simplifier... yes... lots of problems in those</p>



<a name="196834179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196834179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196834179">(May 07 2020 at 21:44)</a>:</h4>
<p>well ... how should one be able to tell where they come from?</p>



<a name="196834197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196834197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196834197">(May 07 2020 at 21:44)</a>:</h4>
<p><a href="https://simplifier.net/packages/hl7.fhir.uv.ips/0.3.0" title="https://simplifier.net/packages/hl7.fhir.uv.ips/0.3.0">https://simplifier.net/packages/hl7.fhir.uv.ips/0.3.0</a> is broken</p>



<a name="196834250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196834250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196834250">(May 07 2020 at 21:45)</a>:</h4>
<p>oh why?</p>



<a name="196834268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196834268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196834268">(May 07 2020 at 21:45)</a>:</h4>
<p>FHIR versions mismatch (expected &lt;=4.0.1, package uses 3.2.0)</p>



<a name="196834597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196834597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196834597">(May 07 2020 at 21:48)</a>:</h4>
<p>wait ...</p>



<a name="196834825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196834825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196834825">(May 07 2020 at 21:50)</a>:</h4>
<p>no ... ips is fine</p>



<a name="196835191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196835191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196835191">(May 07 2020 at 21:54)</a>:</h4>
<p>us core (3.1.0) however is broken: ConceptMap[url='<a href="http://hl7.org/fhir/us/core/ConceptMap/ndc-cvx']" title="http://hl7.org/fhir/us/core/ConceptMap/ndc-cvx']">http://hl7.org/fhir/us/core/ConceptMap/ndc-cvx']</a> contains at least one group without a value in ConceptMap.group.source</p>



<a name="196835295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196835295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196835295">(May 07 2020 at 21:55)</a>:</h4>
<p>why would you call that broken?</p>



<a name="196835400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196835400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196835400">(May 07 2020 at 21:56)</a>:</h4>
<p>because it means that the concept map cannot be stored</p>



<a name="196835432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196835432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196835432">(May 07 2020 at 21:56)</a>:</h4>
<p>i don't follow that. The specification doesn't require it, and the author didn't provide it, so why is it the package that is broken?</p>



<a name="196835604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196835604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196835604">(May 07 2020 at 21:58)</a>:</h4>
<p>let me rephrase: the implementation guide contains resources that cannot be stored using the java reference implementation. whether its a bug in the reference implementation or in the IG, i cannot say for now</p>



<a name="196835653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196835653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196835653">(May 07 2020 at 21:59)</a>:</h4>
<p>since the package was built using the reference implementation, I think that you should look elsewhere for the source of the issue</p>



<a name="196835807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196835807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196835807">(May 07 2020 at 22:00)</a>:</h4>
<p>by reference implementation I mean the java reference implementation (HAPI) - not the ig tooling</p>



<a name="196835903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196835903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196835903">(May 07 2020 at 22:02)</a>:</h4>
<p>HAPI is not the reference implementation. The reference implementation is the HAPI FHIR Core. So no doubt the problem is some business rule in HAPI somewhere, which I think it erroneous. but in this case it's not the package that is broken</p>



<a name="196835971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196835971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196835971">(May 07 2020 at 22:02)</a>:</h4>
<p>right - the loading of it is</p>



<a name="196836090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196836090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196836090">(May 07 2020 at 22:03)</a>:</h4>
<p>That is a rule in the current HAPI FHIR JPA server - There's a not-null on a table that means we can't store ConceptMap groups without a source</p>
<p>I think Diederik assumed that was a safe rule to have when he coded it but sounds like it isn't</p>



<a name="196836205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196836205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196836205">(May 07 2020 at 22:04)</a>:</h4>
<p>the documentation says about ConceptMap.group.source: </p>
<blockquote>
<p>This is not needed if the source value set is specified and it contains concepts from only a single system</p>
</blockquote>



<a name="196836234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196836234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196836234">(May 07 2020 at 22:04)</a>:</h4>
<p>run </p>
<div class="codehilite"><pre><span></span><code>docker run \
       --name=hapi-fhir \
       --rm \
       -p 8080:8080 \
       -e HAPI_FHIR_VERSION=R4 \
       -e HAPI_IMPLEMENTATION_GUIDE_ID=hl7.fhir.us.core \
       -e HAPI_IMPLEMENTATION_GUIDE_VERSION=3.1.0 \
       mzgtrifork/hapi-fhir-jpaserver-starter:0.0.1
</code></pre></div>


<p>and you can see for yourself</p>



<a name="196836449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196836449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196836449">(May 07 2020 at 22:06)</a>:</h4>
<blockquote>
<p>This is not needed if the source value set is specified and it contains concepts from only a single system</p>
</blockquote>
<p>Heh, that feels like a weird bit of context conduction to me, but if it's allowed I'll ticket it.</p>



<a name="196870678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/196870678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#196870678">(May 08 2020 at 08:43)</a>:</h4>
<p><span class="user-mention" data-user-id="294872">@Martin Zacho Grønhøj</span> <span class="user-mention" data-user-id="191427">@Jens Villadsen</span> Thanks for calling out issues. I see the two packages Jens mentions are part of a group of packages having duplicate files in there, which we are working to resolve.<br>
Any other specific issues you are finding so I can prevent them from happening?</p>



<a name="197411637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/197411637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Zacho Grønhøj <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#197411637">(May 13 2020 at 13:24)</a>:</h4>
<p>The bug <a href="https://github.com/hapifhir/org.hl7.fhir.core/issues/188#issuecomment-622565654">I've reported here</a> is pretty common and occurs for instance in acme.base#0.0.5 and de.medizininformatikinitiative.kerndatensatz.fall#0.9.0, but it's supposedly been fixed.</p>
<p>The package hl7.fhir.au.rcpa#0.1.0 throws a parsing error:</p>
<div class="codehilite"><pre><span></span><code><span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">parser</span><span class="p">.</span><span class="nx">DataFormatException</span><span class="o">:</span> <span class="nx">Unknown</span> <span class="nx">element</span> <span class="s1">&#39;comments&#39;</span> <span class="nx">found</span> <span class="nx">during</span> <span class="nx">parse</span>
</code></pre></div>


<p>Don't know if its an error in the parser or the package data (probably the former).</p>
<p>The package nictiz.fhir.nl.stu3.questionnaires#1.0.0 uses <a href="https://github.com/npm/node-semver#advanced-range-syntax">X-Range NPM semantic versioning</a> for the dependency nictiz.fhir.nl.stu3.zib2017#1.3.x which cannot be resolved using the PackageCacheManager#loadPackage:</p>
<div class="codehilite"><pre><span></span><code><span class="nx">org</span><span class="p">.</span><span class="nx">hl7</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">exceptions</span><span class="p">.</span><span class="nx">FHIRException</span><span class="o">:</span> <span class="nx">Unable</span> <span class="nx">to</span> <span class="nx">resolve</span> <span class="kr">package</span> <span class="nx">id</span> <span class="nx">nictiz</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">nl</span><span class="p">.</span><span class="nx">stu3</span><span class="p">.</span><span class="nx">zib2017</span>

    <span class="nx">at</span> <span class="nx">org</span><span class="p">.</span><span class="nx">hl7</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">utilities</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">PackageCacheManager</span><span class="p">.</span><span class="nx">fetchTheOldWay</span><span class="p">(</span><span class="nx">PackageCacheManager</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">772</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">org</span><span class="p">.</span><span class="nx">hl7</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">utilities</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">PackageCacheManager</span><span class="p">.</span><span class="nx">loadFromPackageServer</span><span class="p">(</span><span class="nx">PackageCacheManager</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">335</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">org</span><span class="p">.</span><span class="nx">hl7</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">utilities</span><span class="p">.</span><span class="nx">cache</span><span class="p">.</span><span class="nx">PackageCacheManager</span><span class="p">.</span><span class="nx">loadPackage</span><span class="p">(</span><span class="nx">PackageCacheManager</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">601</span><span class="p">)</span>
</code></pre></div>


<p>The <a href="https://confluence.hl7.org/display/FHIR/NPM+Package+Specification#NPMPackageSpecification-Versions">fhir package spec</a> says it's allowed, and the package ID nictiz.fhir.nl.stu3.zib2017#1.3.9 has no problems resolving using the cache manager, so I guess it's a bug in the cache manager.</p>
<p>The package hl7.fhir.au.pd#2.0.1 has a SearchParameter, which causes the following error:</p>
<div class="codehilite"><pre><span></span><code><span class="nx">Caused</span> <span class="nx">by</span><span class="o">:</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">rest</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">exceptions</span><span class="p">.</span><span class="nx">UnprocessableEntityException</span><span class="o">:</span> <span class="nx">Invalid</span> <span class="nx">SearchParameter</span><span class="p">.</span><span class="nx">expression</span> <span class="nx">value</span> <span class="s2">&quot;extension(‘http://hl7.org.au/fhir/StructureDefinition/au-receivingfacility’).extension(‘namespace-id’).value&quot;</span><span class="o">:</span> <span class="nb">Error</span> <span class="k">in</span> <span class="o">??</span> <span class="nx">at</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span> <span class="nx">Found</span> <span class="err">‘</span> <span class="nx">expecting</span> <span class="nx">a</span> <span class="nx">token</span> <span class="nx">name</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">r4</span><span class="p">.</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">validateSearchParam</span><span class="p">(</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">147</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">r4</span><span class="p">.</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">validateResourceForStorage</span><span class="p">(</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">88</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">r4</span><span class="p">.</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">validateResourceForStorage</span><span class="p">(</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">47</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">BaseHapiFhirDao</span><span class="p">.</span><span class="nx">updateEntity</span><span class="p">(</span><span class="nx">BaseHapiFhirDao</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">997</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">doCreate</span><span class="p">(</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">515</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">221</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">185</span><span class="p">)</span>
</code></pre></div>


<p>To me this looks like 1) an error in the package or 2) some kind of character encoding error in the json parser, used to parse the contents of the package, or in the dao, but I'm not sure, haven't looked into it.</p>
<p>These are the errors I encountered in todays testing of the IG installer <span class="user-mention" data-user-id="203235">@Ward Weistra</span> :)</p>



<a name="197432358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/197432358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#197432358">(May 13 2020 at 15:46)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="294872">@Martin Zacho Grønhøj</span>. Indeed, the Simplifier packages issue of not filling the fhirVersion  has been resolved today for new newly created packages. And apparently Grahame has also updated his tooling to handle them for the few that don't <span aria-label="clap" class="emoji emoji-1f44f" role="img" title="clap">:clap:</span> </p>
<p>The .NET tool stack supports the limited wildcard semantic versioning that the package spec allows and resolves this dependency correctly: <a href="https://simplifier.net/packages/nictiz.fhir.nl.stu3.questionnaires/1.0.0">https://simplifier.net/packages/nictiz.fhir.nl.stu3.questionnaires/1.0.0</a></p>
<p>Perhaps <span class="user-mention" data-user-id="191368">@Brett Esler</span> can help us debug the issues with the two <code>hl7.fhir.au</code> packages, which I assume come from <a href="https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json">his feed</a>.</p>



<a name="197629078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/197629078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Esler <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#197629078">(May 14 2020 at 22:59)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="203235">@Ward Weistra</span>  what is up with <a href="http://hl7.fhir.au">hl7.fhir.au</a> packages?</p>



<a name="197682897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/197682897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#197682897">(May 15 2020 at 12:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191368">@Brett Esler</span>: <span class="user-mention silent" data-user-id="294872">Martin Zacho Grønhøj</span> <a href="#narrow/stream/179167-hapi/topic/Upload.20of.20IG/near/197411637">saw</a> the following two errors when importing them into HAPI:</p>
<blockquote>
<p>The package hl7.fhir.au.rcpa#0.1.0 throws a parsing error:</p>
<div class="codehilite"><pre><span></span><code><span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">parser</span><span class="p">.</span><span class="nx">DataFormatException</span><span class="o">:</span> <span class="nx">Unknown</span> <span class="nx">element</span> <span class="s1">&#39;comments&#39;</span> <span class="nx">found</span> <span class="nx">during</span> <span class="nx">parse</span>
</code></pre></div>


<p>Don't know if its an error in the parser or the package data (probably the former).</p>
</blockquote>
<p>Simplifier also has trouble parsing the package (<a href="https://simplifier.net/packages/hl7.fhir.au.rcpa/0.1.0">no files shown</a>) and looking at what's in the package folder there is no dot between the filename base and extension: eg <code>Bundle-Colorectal-genexample-1-mapjson</code></p>
<blockquote>
<p>The package hl7.fhir.au.pd#2.0.1 has a SearchParameter, which causes the following error:</p>
<div class="codehilite"><pre><span></span><code><span class="nx">Caused</span> <span class="nx">by</span><span class="o">:</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">rest</span><span class="p">.</span><span class="nx">server</span><span class="p">.</span><span class="nx">exceptions</span><span class="p">.</span><span class="nx">UnprocessableEntityException</span><span class="o">:</span> <span class="nx">Invalid</span> <span class="nx">SearchParameter</span><span class="p">.</span><span class="nx">expression</span> <span class="nx">value</span> <span class="s2">&quot;extension(‘http://hl7.org.au/fhir/StructureDefinition/au-receivingfacility’).extension(‘namespace-id’).value&quot;</span><span class="o">:</span> <span class="nb">Error</span> <span class="k">in</span> <span class="o">??</span> <span class="nx">at</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span> <span class="nx">Found</span> <span class="err">‘</span> <span class="nx">expecting</span> <span class="nx">a</span> <span class="nx">token</span> <span class="nx">name</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">r4</span><span class="p">.</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">validateSearchParam</span><span class="p">(</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">147</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">r4</span><span class="p">.</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">validateResourceForStorage</span><span class="p">(</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">88</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">r4</span><span class="p">.</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">validateResourceForStorage</span><span class="p">(</span><span class="nx">FhirResourceDaoSearchParameterR4</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">47</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">BaseHapiFhirDao</span><span class="p">.</span><span class="nx">updateEntity</span><span class="p">(</span><span class="nx">BaseHapiFhirDao</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">997</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">doCreate</span><span class="p">(</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">515</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">221</span><span class="p">)</span>
    <span class="nx">at</span> <span class="nx">ca</span><span class="p">.</span><span class="nx">uhn</span><span class="p">.</span><span class="nx">fhir</span><span class="p">.</span><span class="nx">jpa</span><span class="p">.</span><span class="nx">dao</span><span class="p">.</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">BaseHapiFhirResourceDao</span><span class="p">.</span><span class="nx">java</span><span class="o">:</span><span class="mi">185</span><span class="p">)</span>
</code></pre></div>


<p>To me this looks like 1) an error in the package or 2) some kind of character encoding error in the json parser, used to parse the contents of the package, or in the dao, but I'm not sure, haven't looked into it.</p>
</blockquote>
<p>It seems to complain about the curly quotes (<code>‘</code> and <code>’</code>) being used in the expression of the three SearchParameters in there.</p>
<p>Keep in mind that published packages can't be changed, so if you want to bring out fixed versions of these you will have to publish new versions (higher version number) for them to be picked up from the feed. And then the older versions of the package can be unlisted (not sure if there's a way to indicate that in the feed yet).</p>



<a name="207184668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upload%20of%20IG/near/207184668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upload.20of.20IG.html#207184668">(Aug 17 2020 at 19:08)</a>:</h4>
<p>PR is now available on HAPI 5.1.0: <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/126">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/126</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
