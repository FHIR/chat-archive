---
layout: page
title: "FHIR Chat  · index out of bounds exception with transaction bundle POST · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/index.20out.20of.20bounds.20exception.20with.20transaction.20bundle.20POST.html">index out of bounds exception with transaction bundle POST</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="239287383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/index%20out%20of%20bounds%20exception%20with%20transaction%20bundle%20POST/near/239287383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/index.20out.20of.20bounds.20exception.20with.20transaction.20bundle.20POST.html#239287383">(May 18 2021 at 16:50)</a>:</h4>
<p>Does anyone know what might the cause for this error when I'm POSTing a transaction Bundle to the base server url?:</p>
<div class="codehilite"><pre><span></span><code>{
    &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
    &quot;text&quot;: {
        &quot;status&quot;: &quot;generated&quot;,
        &quot;div&quot;: &quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\&quot;0\&quot;&gt;&lt;tr&gt;&lt;td style=\&quot;font-weight: bold;\&quot;&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Failed to call access method: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0&lt;/pre&gt;&lt;/td&gt;\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t&lt;/tr&gt;\n\t\t&lt;/table&gt;\n\t&lt;/div&gt;&quot;
    },
    &quot;issue&quot;: [
        {
            &quot;severity&quot;: &quot;error&quot;,
            &quot;code&quot;: &quot;processing&quot;,
            &quot;diagnostics&quot;: &quot;Failed to call access method: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0&quot;
        }
    ]
}
</code></pre></div>
<p>The error message itself isn't super helpful in figuring it out.  And I'm not immediately seeing anything obviously wrong with the Bundle or what I'm trying to do.  POSTing transaction bundles worked on my server before, but it's been quite a while since I've tested that (it's now at 5.4.0-PRE2-SNAPSHOT).</p>



<a name="239287526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/index%20out%20of%20bounds%20exception%20with%20transaction%20bundle%20POST/near/239287526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/index.20out.20of.20bounds.20exception.20with.20transaction.20bundle.20POST.html#239287526">(May 18 2021 at 16:52)</a>:</h4>
<p>which server</p>



<a name="239287614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/index%20out%20of%20bounds%20exception%20with%20transaction%20bundle%20POST/near/239287614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/index.20out.20of.20bounds.20exception.20with.20transaction.20bundle.20POST.html#239287614">(May 18 2021 at 16:52)</a>:</h4>
<p><a href="https://fhir.hausamconsulting.com/r4">https://fhir.hausamconsulting.com/r4</a></p>



<a name="239287673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/index%20out%20of%20bounds%20exception%20with%20transaction%20bundle%20POST/near/239287673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/index.20out.20of.20bounds.20exception.20with.20transaction.20bundle.20POST.html#239287673">(May 18 2021 at 16:52)</a>:</h4>
<p>oh we're in the hapi stream. duh!</p>



<a name="239287693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/index%20out%20of%20bounds%20exception%20with%20transaction%20bundle%20POST/near/239287693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/index.20out.20of.20bounds.20exception.20with.20transaction.20bundle.20POST.html#239287693">(May 18 2021 at 16:53)</a>:</h4>
<p>yep!</p>



<a name="239335661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/index%20out%20of%20bounds%20exception%20with%20transaction%20bundle%20POST/near/239335661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/index.20out.20of.20bounds.20exception.20with.20transaction.20bundle.20POST.html#239335661">(May 18 2021 at 22:28)</a>:</h4>
<p>It looks like I now have the source of this error.  HAPI doesn't seem to be properly handling a CodeableConcept data type with 'text'only (no Codings).  I am not able to PUT (or POST) an Observation resource (and very likely any other resource, although I haven't tested that) with a CodeableConcept instance like:</p>
<div class="codehilite"><pre><span></span><code>    &quot;code&quot;: {
        &quot;text&quot;: &quot;Blood typing&quot;
    },
</code></pre></div>
<p>That results in the <code>Failed to call access method: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0</code> error, even though it's perfectly valid in the base FHIR spec and the IPS IG and it validates with Java validator just fine. If I add a 'coding' to the datatype then the resource is created without a problem.Here's the related <a href="#narrow/stream/207835-IPS/topic/.24document">discussion</a> in the IPS stream.<br>
<span class="user-mention" data-user-id="191319">@James Agnew</span>?</p>



<a name="239604433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/index%20out%20of%20bounds%20exception%20with%20transaction%20bundle%20POST/near/239604433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/index.20out.20of.20bounds.20exception.20with.20transaction.20bundle.20POST.html#239604433">(May 20 2021 at 14:48)</a>:</h4>
<p>Has anyone else seen this?  Or have you been able to successfully create an instance on the server with a CodeableConcept containing only <code>text</code>?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
