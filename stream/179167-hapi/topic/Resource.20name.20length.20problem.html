---
layout: page
title: "FHIR Chat  · Resource name length problem · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html">Resource name length problem</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="176485300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176485300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176485300">(Sep 24 2019 at 17:19)</a>:</h4>
<p>I can't POST data for the MedicinalProductContraindication resource, because HAPI doesn't like names over 30 chars. </p>
<p>I know there is name limit but this resource name is ok in the R4 build. </p>
<p>On console I get "A truncation error was encountered trying to shrink VARCHAR 'MedicinalProductContraindication' to length 30.</p>



<a name="176497559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176497559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176497559">(Sep 24 2019 at 19:31)</a>:</h4>
<p>Yeah, this bug just got fixed in 4.1.0-SNAPSHOT.. Never expected a resource name &gt; 30 chars, but that was a bad assumption. The limit has been bumped up to 100 chars</p>
<p>Feel free to manually increase the length of that column on an existing DB, even without upgrading your HAPI library. It won't cause any issues.</p>



<a name="176510625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176510625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176510625">(Sep 24 2019 at 21:58)</a>:</h4>
<p>I wonder if we should discuss this and find some limit - there's a couple of places where the length can be a problem</p>



<a name="176511717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176511717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176511717">(Sep 24 2019 at 22:12)</a>:</h4>
<p>Presuming it should be representable by a <code>string</code>, there is a handy limit of  1024*1024 characters already built in.  Seems reasonable to me  <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="176514391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176514391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176514391">(Sep 24 2019 at 22:47)</a>:</h4>
<p>tgz package file format starts to have issues when the length gets over 23.</p>



<a name="176545336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176545336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176545336">(Sep 25 2019 at 08:53)</a>:</h4>
<p>There is a limit in the build already. I have hit it in the past and had to shorten the name. Can't recall the number but it's more than 30.</p>



<a name="176547325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176547325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176547325">(Sep 25 2019 at 09:22)</a>:</h4>
<p>on the new version of HAPI I get a different error "Value too long for column "RES_TYPE" VARCHAR(30)"" - which makes sense. But how can I access my jetty db to increase that? The jetty database is created on the fly I think, so is it possible for me to change the column width?</p>



<a name="176549336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176549336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176549336">(Sep 25 2019 at 09:51)</a>:</h4>
<p>Ah that's harder... How are you running the server? With the HAPI FHIR CLI? Or the jpaserver starter?</p>



<a name="176586964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176586964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176586964">(Sep 25 2019 at 17:24)</a>:</h4>
<p>it's jpaserver starter</p>



<a name="176594290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176594290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176594290">(Sep 25 2019 at 18:44)</a>:</h4>
<p>in that case- easiest thing is to build from the <code>rel_4_1_0</code> branch of that project. That will have the fix already included.</p>



<a name="176598832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176598832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176598832">(Sep 25 2019 at 19:40)</a>:</h4>
<p>thanks James. When I look here <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/branches" target="_blank" title="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/branches">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/branches</a> I see 4 branches but no rel_4_1_0. Where should I be looking please?</p>



<a name="176694623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176694623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176694623">(Sep 26 2019 at 20:30)</a>:</h4>
<p>Whoops... that branch was not yet pushed. Can you try again?</p>



<a name="176727333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176727333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176727333">(Sep 27 2019 at 08:23)</a>:</h4>
<p>thanks. Have tried that build but it seems the same ("Value too long"). When I look here <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/commits/rel_4_1_0" target="_blank" title="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/commits/rel_4_1_0">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/commits/rel_4_1_0</a>, I see no commits since August 14. Am I in the right place?</p>



<a name="176965667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/176965667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#176965667">(Sep 30 2019 at 19:33)</a>:</h4>
<p>Can you do a pull on that branch and try again? (Note that you'll need to start fresh with no database directory in place too.. such are the joys of using an embedded database)</p>



<a name="177135995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/177135995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#177135995">(Oct 02 2019 at 09:56)</a>:</h4>
<p>thanks James. I've pulled that branch into a clean folder and done mvn jetty:run. I still get the same error inserting that resource. I assumed that within this folder it is using a brand new jetty database, but is it finding the old one outside of the local folder? That would explain it but I don't know how to refresh my database. I have not altered hapi.properties.</p>



<a name="177136871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/177136871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#177136871">(Oct 02 2019 at 10:12)</a>:</h4>
<p>Hmm, very weird.. I'm assuming you had done a <code>mvn clean</code> first?</p>



<a name="177137775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/177137775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#177137775">(Oct 02 2019 at 10:27)</a>:</h4>
<p>no. It was a brand new folder so I didnt think to clean it...</p>



<a name="177137943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/177137943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#177137943">(Oct 02 2019 at 10:30)</a>:</h4>
<p>now tried mvn clean and then mvn jetty:run again, same issue, hasn't expanded the column</p>



<a name="177138282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/177138282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#177138282">(Oct 02 2019 at 10:36)</a>:</h4>
<p>ok- one last ditch effort, can you try running it with:</p>
<p><code>mvn -U clean jetty:run</code></p>
<p>If that doesn't fix it, clearly this is a different issue than I thought it was... in that case can you share the resource you're trying to upload and I'll see if I can replicate?</p>



<a name="177139202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/177139202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#177139202">(Oct 02 2019 at 10:54)</a>:</h4>
<p>same issue after that. This is enough to trigger it:<br>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>
&lt;MedicinalProductContraindication xmlns="<a href="http://hl7.org/fhir" target="_blank" title="http://hl7.org/fhir">http://hl7.org/fhir</a>"&gt;<br>
&lt;/MedicinalProductContraindication&gt;</p>



<a name="177152519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/177152519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#177152519">(Oct 02 2019 at 14:01)</a>:</h4>
<p>Ok, I see it too. Pushing a fix now...</p>



<a name="177155021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/177155021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#177155021">(Oct 02 2019 at 14:28)</a>:</h4>
<p>That's pushed. If you could try again with <code>mvn -U clean jetty:run</code> I sure hope this will be fixed now. :)</p>



<a name="177162670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/177162670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#177162670">(Oct 02 2019 at 15:43)</a>:</h4>
<p>is it pushed yet? last commit shows as 2 days ago</p>



<a name="177163952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Resource%20name%20length%20problem/near/177163952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Resource.20name.20length.20problem.html#177163952">(Oct 02 2019 at 15:57)</a>:</h4>
<p>It's a fix to the main hapi library, so the <code>-U</code> should pull in the latest snapshot</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
