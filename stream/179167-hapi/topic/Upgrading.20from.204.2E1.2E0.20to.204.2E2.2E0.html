---
layout: page
title: "FHIR Chat  · Upgrading from 4.1.0 to 4.2.0 · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.2E0.20to.204.2E2.2E0.html">Upgrading from 4.1.0 to 4.2.0</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="189162857"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1.0%20to%204.2.0/near/189162857" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hershil Patel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.2E0.20to.204.2E2.2E0.html#189162857">(Feb 26 2020 at 21:44)</a>:</h4>
<p>I am trying to update to HAPI 4.2.0 from HAPI 4.1.0 .  Currently I have the example from the documentation in my test case:</p>
<div class="codehilite"><pre><span></span>    Bundle results = ourClient
              .search()
              .forResource(Patient.class)
              .where(Patient.FAMILY.matches().value(&quot;duck&quot;))
              .returnBundle(Bundle.class)
              .execute();
</pre></div>


<p>My client search tests work in 4.1.0 but fail in 4.2.0 with a "HTTP 500 Server Error: Column 'SEARCH_LAST_RETURNED'  cannot accept a NULL value.".  </p>
<p>Is there anything I am doing wrong?</p>
<p>Here is the stack trace:</p>
<p>ca.uhn.fhir.rest.server.exceptions.InternalErrorException: HTTP 500 Server Error: Column 'SEARCH_LAST_RETURNED'  cannot accept a NULL value.<br>
    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)<br>
    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)<br>
    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)<br>
    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)<br>
    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)<br>
    at ca.uhn.fhir.rest.server.exceptions.BaseServerResponseException.newInstance(BaseServerResponseException.java:302)<br>
    at ca.uhn.fhir.rest.client.impl.BaseClient.invokeClient(BaseClient.java:349)<br>
    at ca.uhn.fhir.rest.client.impl.GenericClient$BaseClientExecutable.invoke(GenericClient.java:434)<br>
    at ca.uhn.fhir.rest.client.impl.GenericClient$SearchInternal.execute(GenericClient.java:1838)...</p>



<a name="189203259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1.0%20to%204.2.0/near/189203259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.2E0.20to.204.2E2.2E0.html#189203259">(Feb 27 2020 at 10:51)</a>:</h4>
<p>Hi Hershil,</p>
<p>Can you try running the migrator tool? <a href="https://hapifhir.io/hapi-fhir/docs/server_jpa/upgrading.html" target="_blank" title="https://hapifhir.io/hapi-fhir/docs/server_jpa/upgrading.html">https://hapifhir.io/hapi-fhir/docs/server_jpa/upgrading.html</a> What does the output look like?</p>



<a name="189330916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1.0%20to%204.2.0/near/189330916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hershil Patel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.2E0.20to.204.2E2.2E0.html#189330916">(Feb 28 2020 at 17:27)</a>:</h4>
<p>I am using derby, but I ended up deleting and recreating the database and that fixed it! Thanks for your help</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
