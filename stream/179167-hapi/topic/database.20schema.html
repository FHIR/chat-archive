---
layout: page
title: "FHIR Chat  · database schema · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/database.20schema.html">database schema</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="166853109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/database%20schema/near/166853109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/database.20schema.html#166853109">(May 29 2019 at 20:19)</a>:</h4>
<p>Hey HAPI guys - I'm working on a presentation on DevDays about FHIR storage implementations - is there some good top-level overview for HAPI - how data are stored in the database and how search works. As I understand from a codebase you have a resource table for all resources and tables for each search parameter type - is it most popular configuration?</p>



<a name="166981936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/database%20schema/near/166981936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/database.20schema.html#166981936">(May 31 2019 at 09:29)</a>:</h4>
<p>I don't know that there are any good online explanations of it unfortunately- But I'd say your understanding is correct FWIW.</p>



<a name="166985335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/database%20schema/near/166985335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/database.20schema.html#166985335">(May 31 2019 at 10:27)</a>:</h4>
<p>Thank you,  <span class="user-mention" data-user-id="191319">@James Agnew</span> !</p>



<a name="265097811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/database%20schema/near/265097811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Y.T.Dai <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/database.20schema.html#265097811">(Dec 16 2021 at 00:37)</a>:</h4>
<p>Hello, I'm now useing hapi server, I found that the Schema from hapi docunment is not yet comprehensive.<br>
There is a sample data from <a href="https://www.hl7.org/fhir/observation-example-sample-data.json.html">https://www.hl7.org/fhir/observation-example-sample-data.json.html</a> <br>
"valueSampledData": {<br>
        "origin": {<br>
          "value": 2048<br>
        },<br>
        "period": 10,<br>
        "factor": 1.612,<br>
        "lowerLimit": -3300,<br>
        "upperLimit": 3300,<br>
        "dimensions": 1,<br>
        "data": "2041 2043 2037 2047 2060 2062 2051 2023 2014 2027 2034 2033 2040 2047 2047 2053"<br>
}<br>
The question is, where can I found "valueSampledData" in Hapi PostgreSQL database? I search for several tabels in database, but still can not find the resoult. Thanks!</p>



<a name="265160658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/database%20schema/near/265160658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/database.20schema.html#265160658">(Dec 16 2021 at 14:09)</a>:</h4>
<p>Assuming you haven't added any search parameter indexes on that field (which I wouldn't recommend for a SampledData), you'll find this in the table <code>HFJ_RES_VER</code> in the column <code>RES_TEXT</code>. Note that in default config, this column has gzipped contents so you'll need to un-gzip the contents.</p>



<a name="265164098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/database%20schema/near/265164098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/database.20schema.html#265164098">(Dec 16 2021 at 14:34)</a>:</h4>
<p>For PG, the gzipped json is actually stored in the PG's system table something like "large_object..." that I don't remember its exact name. And hfj_res_ver.res_text just holds the OID for the gzipped data.  Right?</p>



<a name="265214294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/database%20schema/near/265214294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/database.20schema.html#265214294">(Dec 16 2021 at 20:23)</a>:</h4>
<p>Correct.</p>



<a name="265239474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/database%20schema/near/265239474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Y.T.Dai <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/database.20schema.html#265239474">(Dec 17 2021 at 00:26)</a>:</h4>
<p>I will check for the information, thanks a lot!</p>



<a name="265257614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/database%20schema/near/265257614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/database.20schema.html#265257614">(Dec 17 2021 at 06:07)</a>:</h4>
<p>path: yourhapi_dbname.pg_catalog.pg_largeobject</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
