---
layout: page
title: "FHIR Chat  · revinclude asRecursive · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/revinclude.20asRecursive.html">revinclude asRecursive</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153869588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/revinclude%20asRecursive/near/153869588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenny Meinsma <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/revinclude.20asRecursive.html#153869588">(Jan 31 2017 at 14:02)</a>:</h4>
<p>I am trying to "translate" the following query to hapi:</p>
<div class="codehilite"><pre>/EpisodeOfCare?patient=someId&amp;_revinclude=Encounter:episodeofcare&amp;_revinclude:recurse=Observation:encounter
</pre></div>


<p>I would expect it to be </p>
<div class="codehilite"><pre>client.search()
      .forResource(classOf[EpisodeOfCare])
      .where(EpisodeOfCare.PATIENT.hasId(patientId))
      .revInclude(Encounter.INCLUDE_EPISODEOFCARE)
      .revInclude(Observation.INCLUDE_ENCOUNTER.asRecursive())
</pre></div>


<p>Unfortunately the <code>asRecursive</code> does not seem to do anything, it doesn't add ":recurse" to the query string. Is there something I am missing?</p>



<a name="153870418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/revinclude%20asRecursive/near/153870418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/revinclude.20asRecursive.html#153870418">(Feb 07 2017 at 03:08)</a>:</h4>
<p><span class="user-mention" data-user-id="192540">@Jenny Meinsma</span> Hmm, it appears you're right, HAPI isn't properly including the <code>:recurse</code> qualifier for revincludes.</p>
<p>I'm going to check in a fix shortly.</p>
<p>That said, I'm not sure what recurse would mean in the context of your example.. Observation.encounter doesn't point to EpisodeOfCare, so you couldn't do a revinclude like that AFAIK.</p>



<a name="153870493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/revinclude%20asRecursive/near/153870493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenny Meinsma <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/revinclude.20asRecursive.html#153870493">(Feb 07 2017 at 11:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> , thank you.<br>
We want to search for EpisodeOfCare for a patient and maybe include encounters and observations. Because an observation has encounters and an encounter has episodeofcares we can search those at once with reverse include. For this search we have tested the query-url above which seems to work.  </p>



<a name="153870501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/revinclude%20asRecursive/near/153870501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/revinclude.20asRecursive.html#153870501">(Feb 07 2017 at 11:37)</a>:</h4>
<p><span class="user-mention" data-user-id="192540">@Jenny Meinsma</span> Interesting... I don't suppose you have a sample link against one of the public servers that shows this type of search working? I don't think this would work on HAPI's server, I'd like to try and replicate it.</p>



<a name="153870549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/revinclude%20asRecursive/near/153870549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenny Meinsma <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/revinclude.20asRecursive.html#153870549">(Feb 07 2017 at 12:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> <br>
<a href="http://fhirtest.uhn.ca/baseDstu3//EpisodeOfCare?patient=zd8&amp;_revinclude=Encounter:episodeofcare&amp;_revinclude:recurse=Observation:encounter" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3//EpisodeOfCare?patient=zd8&amp;_revinclude=Encounter:episodeofcare&amp;_revinclude:recurse=Observation:encounter">http://fhirtest.uhn.ca/baseDstu3//EpisodeOfCare?patient=zd8&amp;_revinclude=Encounter:episodeofcare&amp;_revinclude:recurse=Observation:encounter</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
