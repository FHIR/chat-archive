---
layout: page
title: "FHIR Chat  · Collection Bundle resource POST and GET · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Collection.20Bundle.20resource.20POST.20and.20GET.html">Collection Bundle resource POST and GET</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="165786374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Collection%20Bundle%20resource%20POST%20and%20GET/near/165786374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lauri Karppinen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Collection.20Bundle.20resource.20POST.20and.20GET.html#165786374">(May 16 2019 at 07:27)</a>:</h4>
<p>Hi! I hope this is right stream to ask this. I made a short example to present my problem. I've been testing POSTing collection bundle to FHIR test server (<a href="http://hapi.fhir.org/baseDstu3" target="_blank" title="http://hapi.fhir.org/baseDstu3">http://hapi.fhir.org/baseDstu3</a>). I am able to POST/PUT my example containing Patient, Practitioner and Observation. I can GET the same bundle with id back as a bundle. I have been assuming that each resource are created to server as separated resources as well? Now if I would like to get only the patient separately from bundle it would be possible? What I have tried to do is:<br>
1. PUT <a href="http://hapi.fhir.org/baseDstu3/Bundle/93a1e2ba-0c87-1000-b622-915900009d40" target="_blank" title="http://hapi.fhir.org/baseDstu3/Bundle/93a1e2ba-0c87-1000-b622-915900009d40">http://hapi.fhir.org/baseDstu3/Bundle/93a1e2ba-0c87-1000-b622-915900009d40</a>, (where id = id in bundle resource) This works (201 Created)<br>
2. GET <a href="http://hapi.fhir.org/baseDstu3/Bundle/93a1e2ba-0c87-1000-b622-915900009d40" target="_blank" title="http://hapi.fhir.org/baseDstu3/Bundle/93a1e2ba-0c87-1000-b622-915900009d40">http://hapi.fhir.org/baseDstu3/Bundle/93a1e2ba-0c87-1000-b622-915900009d40</a>, This works (200 OK)<br>
3. GET <a href="http://hapi.fhir.org/baseDstu3/Patient/93a14fea-0c87-1000-b132-4d4c00009619" target="_blank" title="http://hapi.fhir.org/baseDstu3/Patient/93a14fea-0c87-1000-b132-4d4c00009619">http://hapi.fhir.org/baseDstu3/Patient/93a14fea-0c87-1000-b132-4d4c00009619</a><br>
4. GET <a href="http://hapi.fhir.org/baseDstu3/Practitioner/c04d8694-0c17-435c-ab0c-28dce1c9832c" target="_blank" title="http://hapi.fhir.org/baseDstu3/Practitioner/c04d8694-0c17-435c-ab0c-28dce1c9832c">http://hapi.fhir.org/baseDstu3/Practitioner/c04d8694-0c17-435c-ab0c-28dce1c9832c</a><br>
5. GET <a href="http://hapi.fhir.org/baseDstu3/Observation/93a1e2ae-0c87-1000-b3a6-db1200003c15" target="_blank" title="http://hapi.fhir.org/baseDstu3/Observation/93a1e2ae-0c87-1000-b3a6-db1200003c15">http://hapi.fhir.org/baseDstu3/Observation/93a1e2ae-0c87-1000-b3a6-db1200003c15</a><br>
What I need to add to bundle to actually create all the resources separately in the server? </p>
<p>Example:<br>
`<br>
{<br>
    "entry": [<br>
        {<br>
            "resource":         <br>
            {<br>
                "birthDate": "2005-01-02",<br>
                "gender": "female",<br>
                "id": "93a14fea-0c87-1000-b132-4d4c00009619",<br>
                "name": [<br>
                    {<br>
                        "family": "BundleTest",<br>
                        "given": [<br>
                            "BundleDude",<br>
                            "Seppo"<br>
                        ]<br>
                    }<br>
                ],<br>
                "resourceType": "Patient",<br>
                "text": {<br>
                    "div": "&lt;div xmlns='<a href="http://www.w3.org/1999/xhtml'&gt;Patient&lt;a" target="_blank" title="http://www.w3.org/1999/xhtml'&gt;Patient&lt;a">http://www.w3.org/1999/xhtml'&gt;Patient&lt;a</a> name='mm'/&gt;&lt;/div&gt;",<br>
                    "status": "generated"<br>
                }<br>
            }       </p>
<div class="codehilite"><pre><span></span>    },
    {
        &quot;resource&quot;: {
            &quot;id&quot;: &quot;c04d8694-0c17-435c-ab0c-28dce1c9832c&quot;,
            &quot;name&quot;: [
                {
                    &quot;family&quot;: &quot;Testinen&quot;,
                    &quot;given&quot;: [
                        &quot;Hoitaja&quot;,
                        &quot;Hanna&quot;
                    ]
                }
            ],
            &quot;resourceType&quot;: &quot;Practitioner&quot;,
            &quot;text&quot;: {
                &quot;div&quot;: &quot;&amp;lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&amp;gt;Practitioner&amp;lt;a name=&#39;mm&#39;/&amp;gt;&amp;lt;/div&amp;gt;&quot;,
                &quot;status&quot;: &quot;generated&quot;
            }
        }
    },
    {
        &quot;resource&quot;: {
            &quot;category&quot;: [
                {
                    &quot;coding&quot;: [
                        {
                            &quot;code&quot;: &quot;vital-signs&quot;,
                            &quot;system&quot;: &quot;http://hl7.org/fhir/observation-category&quot;
                        }
                    ]
                }
            ],
            &quot;code&quot;: {
                &quot;coding&quot;: [
                    {
                        &quot;code&quot;: &quot;8302-2&quot;,
                        &quot;display&quot;: &quot;Body height&quot;,
                        &quot;system&quot;: &quot;http://loinc.org&quot;
                    }
                ]
            },
            &quot;effectiveDateTime&quot;: &quot;2019-05-06T12:02:34Z&quot;,
            &quot;id&quot;: &quot;93a1e2ae-0c87-1000-b3a6-db1200003c15&quot;,
            &quot;issued&quot;: &quot;2019-05-06T12:02:58Z&quot;,
            &quot;language&quot;: &quot;en&quot;,
            &quot;meta&quot;: {
                &quot;profile&quot;: [
                    &quot;http://phr.kanta.fi/StructureDefinition/fiphr-bodyheight-stu3&quot;
                ]
            },
            &quot;performer&quot;: [
                {
                    &quot;reference&quot;: &quot;Practitioner/c04d8694-0c17-435c-ab0c-28dce1c9832c&quot;
                }
            ],
            &quot;resourceType&quot;: &quot;Observation&quot;,
            &quot;status&quot;: &quot;final&quot;,
            &quot;subject&quot;: {
                &quot;reference&quot;: &quot;Patient/93a14fea-0c87-1000-b132-4d4c00009619&quot;
            },
            &quot;text&quot;: {
                &quot;div&quot;: &quot;&amp;lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&amp;gt;Height&amp;lt;a name=&#39;mm&#39;/&amp;gt;&amp;lt;/div&amp;gt;&quot;,
                &quot;status&quot;: &quot;generated&quot;
            },
            &quot;valueQuantity&quot;: {
                &quot;code&quot;: &quot;cm&quot;,
                &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,
                &quot;unit&quot;: &quot;cm&quot;,
                &quot;value&quot;: 155
            }
        }
    }

],
&quot;id&quot;: &quot;93a1e2ba-0c87-1000-b622-915900009d40&quot;,
&quot;resourceType&quot;: &quot;Bundle&quot;,
&quot;type&quot;: &quot;collection&quot;
</pre></div>


<p>}<br>
`</p>



<a name="165787670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Collection%20Bundle%20resource%20POST%20and%20GET/near/165787670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Collection.20Bundle.20resource.20POST.20and.20GET.html#165787670">(May 16 2019 at 07:51)</a>:</h4>
<p>This sounds to me like you're looking for the FHIR transaction operation. There are example Bundles here: <a href="http://hl7.org/fhir/http.html#transaction" target="_blank" title="http://hl7.org/fhir/http.html#transaction">http://hl7.org/fhir/http.html#transaction</a></p>
<p>You need to POST this to the root of the server and not the Bundle endpoint, e.g. <code>http://hapi.fhir.org/baseDstu3</code></p>



<a name="165794903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Collection%20Bundle%20resource%20POST%20and%20GET/near/165794903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lauri Karppinen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Collection.20Bundle.20resource.20POST.20and.20GET.html#165794903">(May 16 2019 at 09:51)</a>:</h4>
<p>I added request elements like this in each resource and changed type to transaction.<br>
<code>               "request": {
                    "method": "PUT",
                    "url": "Patient/93a14fea-0c87-1000-b132-4d4c00009619"
                  }</code><br>
and tried to POST it to <a href="http://hapi.fhir.org/baseDstu3" target="_blank" title="http://hapi.fhir.org/baseDstu3">http://hapi.fhir.org/baseDstu3</a> (deleted /Bundle)</p>
<p>Now I get error: "Transaction bundle entry has missing or invalid HTTP Verb specified in Bundle.entry(0).request.method. Found value: \"null\""</p>



<a name="165795895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Collection%20Bundle%20resource%20POST%20and%20GET/near/165795895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Collection.20Bundle.20resource.20POST.20and.20GET.html#165795895">(May 16 2019 at 10:07)</a>:</h4>
<p>That error looks like you might be missing the Bundle.entry.request.method field on one of your entries. Can you confirm that you have it for all entries in the bundle?</p>
<p>It might be worth stripping your bundle down to 1 entry and then expanding from there if you get it working with 1...</p>



<a name="165796423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Collection%20Bundle%20resource%20POST%20and%20GET/near/165796423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lauri Karppinen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Collection.20Bundle.20resource.20POST.20and.20GET.html#165796423">(May 16 2019 at 10:16)</a>:</h4>
<div class="codehilite"><pre><span></span>{
    &quot;entry&quot;: [
        {
            &quot;resource&quot;:
            {
                &quot;birthDate&quot;: &quot;2005-01-02&quot;,
                &quot;gender&quot;: &quot;female&quot;,
                &quot;id&quot;: &quot;93a14fea-0c87-1000-b132-4d4c00009619&quot;,
                &quot;name&quot;: [
                    {
                        &quot;family&quot;: &quot;BundleTest&quot;,
                        &quot;given&quot;: [
                            &quot;BundleDude&quot;,
                            &quot;Seppo&quot;
                        ]
                    }
                ],
                &quot;resourceType&quot;: &quot;Patient&quot;,
                &quot;text&quot;: {
                    &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;Patient&lt;a name=&#39;mm&#39;/&gt;&lt;/div&gt;&quot;,
                    &quot;status&quot;: &quot;generated&quot;
                },
                &quot;request&quot;: {
                    &quot;method&quot;: &quot;PUT&quot;,
                    &quot;url&quot;: &quot;Patient/93a14fea-0c87-1000-b132-4d4c00009619&quot;
                  }
            }

        }

    ],
    &quot;id&quot;: &quot;93a1e2ba-0c87-1000-b622-915900009d40&quot;,
    &quot;request&quot;: {
        &quot;method&quot;: &quot;POST&quot;,
        &quot;url&quot;: &quot;Bundle&quot;
      },
    &quot;resourceType&quot;: &quot;Bundle&quot;,
    &quot;type&quot;: &quot;transaction&quot;
}
</pre></div>


<p>This should work? Does bundle resource itself has to have method. POSTing this to <a href="http://hapi.fhir.org/baseDstu3" target="_blank" title="http://hapi.fhir.org/baseDstu3">http://hapi.fhir.org/baseDstu3</a> , still gives me the same error</p>



<a name="165801698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Collection%20Bundle%20resource%20POST%20and%20GET/near/165801698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Collection.20Bundle.20resource.20POST.20and.20GET.html#165801698">(May 16 2019 at 11:45)</a>:</h4>
<p>I'm having trouble reading that because of the way it's formatted (you can put three ` characters around it to fix that) but it looks to me like you have two "request" blocks but one is at the root of the bundle, and one is at the root of the resource, and neither of those are valid spots for that.</p>
<p>The <code>request</code> element needs to be at the <code>entry</code> level.</p>



<a name="165801989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Collection%20Bundle%20resource%20POST%20and%20GET/near/165801989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lauri Karppinen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Collection.20Bundle.20resource.20POST.20and.20GET.html#165801989">(May 16 2019 at 11:48)</a>:</h4>
<p>Thanks a lot for the help <span class="user-mention" data-user-id="191319">@James Agnew</span> . I just noticed my mistake! Got the test working now. For some reason only the part of the JSON goes inside <code>code</code> when I post my questions. Got the another advice as well. ``` Thanks <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="165802590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Collection%20Bundle%20resource%20POST%20and%20GET/near/165802590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Collection.20Bundle.20resource.20POST.20and.20GET.html#165802590">(May 16 2019 at 11:57)</a>:</h4>
<p>woohoo!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
