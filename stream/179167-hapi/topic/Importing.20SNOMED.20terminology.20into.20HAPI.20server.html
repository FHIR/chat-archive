---
layout: page
title: "FHIR Chat  · Importing SNOMED terminology into HAPI server · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html">Importing SNOMED terminology into HAPI server</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="196374704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196374704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Cagigal <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196374704">(May 05 2020 at 22:08)</a>:</h4>
<p>I have created a HAPI FHIR Server running in tomcat with a mySQL database.  I am trying to import the SNOMED dataset into it.   </p>
<p>While executing this command on the web server, it generates the following error:<br>
java  -jar hapi-fhir-cli.jar upload-terminology -d data/SnomedCT_USEditionRF2_PRODUCTION_20200301T120000Z.zip -v r4 -t <a href="http://localhost:8080/hapi-fhir-jpaserver/fhir/" title="http://localhost:8080/hapi-fhir-jpaserver/fhir/">http://localhost:8080/hapi-fhir-jpaserver/fhir/</a> -u <a href="http://snomed.info/sct" title="http://snomed.info/sct">http://snomed.info/sct</a> -l</p>
<p>Server:<br>
 "resourceType": "CapabilityStatement",<br>
  "status": "active",<br>
  "date": "2020-05-05T22:24:18+00:00",<br>
  "publisher": "Not provided",<br>
  "kind": "instance",<br>
  "software": {<br>
    "name": "HAPI FHIR Server",<br>
    "version": "4.2.0"<br>
  },<br>
  "implementation": {<br>
    "description": "HAPI FHIR R4 Server",<br>
    "url": "<a href="http://localhost:8080/hapi-fhir-jpaserver/fhir/" title="http://localhost:8080/hapi-fhir-jpaserver/fhir/">http://localhost:8080/hapi-fhir-jpaserver/fhir/</a>"<br>
  },<br>
  "fhirVersion": "4.0.1",<br>
  "format": [<br>
    "application/fhir+xml",<br>
    "application/fhir+json"<br>
  ]</p>
<p>C:\data\4.2&gt;java -Xms2048m -Xmx4092m -jar hapi-fhir-cli.jar upload-terminology -d C:\data\4.2\data\SnomedCT_USEditionRF2_PRODUCTION_20200301T120000Z.zip -v r4 -t <a href="http://localhost:8080/hapi-fhir-jpaserver/fhir" title="http://localhost:8080/hapi-fhir-jpaserver/fhir">http://localhost:8080/hapi-fhir-jpaserver/fhir</a> -u <a href="http://snomed.info/sct" title="http://snomed.info/sct">http://snomed.info/sct</a> -l</p>
<hr>
<p>?  HAPI FHIR 4.2.0 - Command Line Tool</p>
<hr>
<p>Process ID                      : 5304@h365hapi-web<br>
Max configured JVM memory (Xmx) : 3.6GB<br>
Detected Java version           : 1.8.0_221</p>
<hr>
<p>2020-05-05 22:39:58.925 [main] INFO  c.u.f.c.UploadTerminologyCommand Adding ZIP file: C:\data\4.2\data\SnomedCT_USEditionRF2_PRODUCTION_20200301T120000Z.zip<br>
2020-05-05 22:40:00.191 [main] INFO  c.u.f.c.UploadTerminologyCommand File size is greater than 10 MB - Going to use a local file reference instead of a direct HTTP transfer. Note that this will only work when executing this command on the same server as the FHIR server itself.<br>
2020-05-05 22:40:19.167 [main] INFO  c.u.f.c.UploadTerminologyCommand Beginning upload - This may take a while...<br>
2020-05-05 22:40:58.945 [main] ERROR ca.uhn.fhir.cli.App Error during execution:<br>
ca.uhn.fhir.rest.client.exceptions.FhirClientConnectionException: Failed to parse response from server when performing POST to URL <a href="http://localhost:8080/hapi-fhir-jpaserver/fhir/CodeSystem/$upload-external-code-system" title="http://localhost:8080/hapi-fhir-jpaserver/fhir/CodeSystem/$upload-external-code-system">http://localhost:8080/hapi-fhir-jpaserver/fhir/CodeSystem/$upload-external-code-system</a> - org.apache.http.NoHttpResponseException: localhost:8080 failed to respond<br>
        at ca.uhn.fhir.rest.client.impl.BaseClient.invokeClient(BaseClient.java:398)<br>
        at ca.uhn.fhir.rest.client.impl.GenericClient$BaseClientExecutable.invoke(GenericClient.java:434)<br>
        at ca.uhn.fhir.rest.client.impl.GenericClient$OperationInternal.execute(GenericClient.java:1173)<br>
        at ca.uhn.fhir.cli.UploadTerminologyCommand.invokeOperation(UploadTerminologyCommand.java:204)<br>
        at ca.uhn.fhir.cli.UploadTerminologyCommand.run(UploadTerminologyCommand.java:113)<br>
        at ca.uhn.fhir.cli.BaseApp.run(BaseApp.java:251)<br>
        at ca.uhn.fhir.cli.App.main(App.java:43)</p>
<p>Thanks!</p>



<a name="196607737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196607737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196607737">(May 06 2020 at 09:21)</a>:</h4>
<p>Have you had a look into snowstorm <a href="https://github.com/IHTSDO/snowstorm" title="https://github.com/IHTSDO/snowstorm">https://github.com/IHTSDO/snowstorm</a> ?</p>



<a name="196635237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196635237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Cagigal <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196635237">(May 06 2020 at 13:37)</a>:</h4>
<p>I have not looked into snowstorm.   Do you recommend keeping the terminology separate from the FHIR server itself?</p>



<a name="196635560"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196635560" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196635560">(May 06 2020 at 13:39)</a>:</h4>
<p>I would say that depends on your needs. If using all or a lot of SNOMED is core business I would probably go for loading it into the FHIR server itself. If not, I would consider keeping it separate and cache the stuff you need eg. like <a href="https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#recipe-using-a-remote-terminology-server" title="https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#recipe-using-a-remote-terminology-server">https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#recipe-using-a-remote-terminology-server</a></p>



<a name="196635626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196635626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196635626">(May 06 2020 at 13:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> might be able to assist you further on that part</p>



<a name="196636568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196636568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196636568">(May 06 2020 at 13:47)</a>:</h4>
<p>Never tried snowstorm before, but looks promising.</p>



<a name="196636664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196636664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196636664">(May 06 2020 at 13:47)</a>:</h4>
<p>For such huge CodeSystems i would go with a remote terminology server, but cache the results.</p>



<a name="196636930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196636930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196636930">(May 06 2020 at 13:49)</a>:</h4>
<p>In general i keep Terminology items (VS, small CS) on the server itself. LOINC, SnomedCT, HGNC i keep on a dedicated server.</p>



<a name="196642471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196642471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196642471">(May 06 2020 at 14:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> - would you have a validation chain open sourced somewhere that sort of does that? I mean filtering out what should be looked up locally and what code systems that should be looked up externally - being a hybrid between the strategies on <a href="https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules" title="https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules">https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules</a></p>



<a name="196798773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196798773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Cagigal <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196798773">(May 07 2020 at 16:50)</a>:</h4>
<p>Thanks for the snowstorm suggestion!   I was able to get that up &amp; running and successfully imported the dataset.   I am not sure that it will be a long term solution, but at least I have a terminology server ready for use.</p>



<a name="196803672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196803672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196803672">(May 07 2020 at 17:27)</a>:</h4>
<p>Credits for inspiration goes to <span class="user-mention" data-user-id="192681">@Espen Stranger Seland</span> ;)</p>



<a name="196803698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196803698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196803698">(May 07 2020 at 17:27)</a>:</h4>
<p>And <span class="user-mention" data-user-id="192654">@Øyvind Aassve</span></p>



<a name="196865613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/196865613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#196865613">(May 08 2020 at 07:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191427">Jens Villadsen</span> <a href="#narrow/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server/near/196642471" title="#narrow/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server/near/196642471">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191451">Patrick Werner</span> - would you have a validation chain open sourced somewhere that sort of does that? I mean filtering out what should be looked up locally and what code systems that should be looked up externally - being a hybrid between the strategies on <a href="https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules" title="https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules">https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#validation-support-modules</a></p>
</blockquote>
<p>Still have some open questions on the new hapi5 Validation architecture and experimenting. Planning to extend the hapi doc on this.</p>



<a name="205558848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Importing%20SNOMED%20terminology%20into%20HAPI%20server/near/205558848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Importing.20SNOMED.20terminology.20into.20HAPI.20server.html#205558848">(Jul 31 2020 at 05:25)</a>:</h4>
<p>We have a huge use of LOINC and SNOMEDs as we are implementing for a HIE. What is your recommendation? Do we load the LOINC and SNOMED into FHIR server itself? Is there any docs on how to upload the definitions into FHIR server? Please provide references, repo or examples. </p>
<p>Addition to that, how does the validation of code systems and valuesets happen if we store internally? Do we make use of <code>PrePopulatedValidationSupport</code>? Is that right?</p>
<p>Thanks for your guidance and support.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
