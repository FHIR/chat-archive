---
layout: page
title: "FHIR Chat  · Subscription channel type &#x27;message&#x27; · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20channel.20type.20&#x27;message&#x27;.html">Subscription channel type &#x27;message&#x27;</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="227959646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20channel%20type%20%27message%27/near/227959646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ron Shapiro <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20channel.20type.20&#x27;message&#x27;.html#227959646">(Feb 26 2021 at 17:16)</a>:</h4>
<p>I am attempting to create a Subscription on <a href="http://hapi.fhir.org/baseR4/">http://hapi.fhir.org/baseR4/</a> with a channel type 'message'.</p>
<p>However, the following error is returned:</p>
<div class="codehilite"><pre><span></span><code>Only &#39;channel&#39; protocol is supported for Subscriptions with channel type &#39;message&#39;
</code></pre></div>



<a name="227960050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20channel%20type%20%27message%27/near/227960050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ron Shapiro <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20channel.20type.20&#x27;message&#x27;.html#227960050">(Feb 26 2021 at 17:19)</a>:</h4>
<p>The HAPI source code has the following:</p>
<div class="codehilite"><pre><span></span><code>try {
        URI uri = new URI(theEndpointUrl);
        if (!&quot;channel&quot;.equals(uri.getScheme())) {
                throw new UnprocessableEntityException(&quot;Only &#39;channel&#39; protocol is supported for Subscriptions with channel type &#39;message&#39;&quot;);
        }
        String channelName = uri.getSchemeSpecificPart();
        if (isBlank(channelName)) {
                throw new UnprocessableEntityException(&quot;A channel name must appear after channel: in a message Subscription endpoint&quot;);
        }
} catch (URISyntaxException e) {
        throw new UnprocessableEntityException(&quot;Invalid subscription endpoint uri &quot; + theEndpointUrl, e);
}
</code></pre></div>
<p>So what is a "channel" scheme?  I am attempting to provide an http endpoint.</p>



<a name="228654302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20channel%20type%20%27message%27/near/228654302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ron Shapiro <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20channel.20type.20&#x27;message&#x27;.html#228654302">(Mar 03 2021 at 19:40)</a>:</h4>
<p><span class="user-mention" data-user-id="357282">@Gary Graham</span>  github shows that you may have added the above code... can you shed any light on what a "channel" URI scheme is?</p>



<a name="228655871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20channel%20type%20%27message%27/near/228655871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> G G <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20channel.20type.20&#x27;message&#x27;.html#228655871">(Mar 03 2021 at 19:50)</a>:</h4>
<p>Heya, this is not my code, but I can answer this: <br>
You are probably looking for a subscription of type <code>rest-hook</code>. Message type expects a jms channel scheme of the form "channel:my-queue-name". You can see examples here: <a href="https://smilecdr.com/docs/subscription/channels.html">https://smilecdr.com/docs/subscription/channels.html</a></p>



<a name="233396311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20channel%20type%20%27message%27/near/233396311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20channel.20type.20&#x27;message&#x27;.html#233396311">(Apr 06 2021 at 21:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="195874">G G</span> <a href="#narrow/stream/179167-hapi/topic/Subscription.20channel.20type.20'message'/near/228655871">said</a>:</p>
<blockquote>
<p>Heya, this is not my code, but I can answer this: <br>
You are probably looking for a subscription of type <code>rest-hook</code>. Message type expects a jms channel scheme of the form "channel:my-queue-name". You can see examples here: <a href="https://smilecdr.com/docs/subscription/channels.html">https://smilecdr.com/docs/subscription/channels.html</a></p>
</blockquote>
<p>Does this also work with open source HAPI? Also is the backing JMS queue persisted in database or is it all in memory? If in memory then how do you make it persistent?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
