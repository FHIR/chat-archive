---
layout: page
title: "FHIR Chat  · NPM Support in HAPI FHIR · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/NPM.20Support.20in.20HAPI.20FHIR.html">NPM Support in HAPI FHIR</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="199387455"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/NPM%20Support%20in%20HAPI%20FHIR/near/199387455" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/NPM.20Support.20in.20HAPI.20FHIR.html#199387455">(Jun 01 2020 at 16:04)</a>:</h4>
<p>Hi All- I'm working now on beefing up package support to HAPI FHIR. (A bunch of the initial legwork was done by <span class="user-mention" data-user-id="294872">@Martin Zacho Grønhøj</span> . Big shoutout for the fine work!)</p>
<p>I'd like to validate the approach we're taking to make sure this will be useful to people who are working with NPM packages. Essentially we're thinking the following:</p>
<ul>
<li>A new "package installation spec" will be present in the JPA server. It is defined by configuration, and is read only on server startup.</li>
<li>In this spec you can define IG packages by any of the following:<ul>
<li>ID/version (meaning it will be fetched automatically from the FHIR package server at <a href="http://packages.fhir.org">packages.fhir.org</a>)</li>
<li>URL to direct download</li>
<li>Local file path</li>
</ul>
</li>
<li>The system will import the IG and optionally any dependency IGs. Importing happens into a set of dedicated database tables in order to provide permanent storage. The actual IG binary is stored in a Binary resource, and the individual conformance resources within it also get extracted into Binary resources (in order to allow people who are using externalized binary storage to take advantage).</li>
<li>Once an IG is imported, it becomes available to the validator via a newly IValidationSupport module. We don't load the whole IG into memory in order to save space, but the usual caching tier in front of the validation support module will cache these resources too and performance seems pretty good in my tests so far.</li>
<li>Optionally, the conformance resources can also be loaded into the repository as resources (i.e. if the IG contained a StructureDefinition, that SD will actually be saved in the repo as a SD so it can be found using searches/reads/etc.). This step is optional since the validator can get at these resources without them being saved as resources in the DB.</li>
<li>This same mechanism will also be usable for people who need to "pre seed" resources of other types into their repository. E.g. if you need a set of patients and observations automatically imported into every environment you build or something like that.</li>
</ul>
<p>Would like to hear feedback from anyone who is developing against IG packages right now- would this meet your needs? Do you have other needs?</p>
<p>I'm hoping this will be merged in the next few days, would really love some early testing so we can get this feature right by the time august rolls around..</p>



<a name="199422394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/NPM%20Support%20in%20HAPI%20FHIR/near/199422394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/NPM.20Support.20in.20HAPI.20FHIR.html#199422394">(Jun 01 2020 at 20:59)</a>:</h4>
<p>there's some test data available via packages - fhir.test.data.r[v]. There's also an additional package that contains a bunch of terminology resources that we can't put in the base FHIR spec: fhir.tx.support</p>



<a name="199422630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/NPM%20Support%20in%20HAPI%20FHIR/near/199422630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/NPM.20Support.20in.20HAPI.20FHIR.html#199422630">(Jun 01 2020 at 21:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> note that it would be good to define a way to get the latest published version of a package without nominating a specific version. It might also be good to allow <code>current</code> as a version as well</p>



<a name="199423772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/NPM%20Support%20in%20HAPI%20FHIR/near/199423772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/NPM.20Support.20in.20HAPI.20FHIR.html#199423772">(Jun 01 2020 at 21:08)</a>:</h4>
<p>yep - support for WIP packages is highly needed</p>



<a name="199424056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/NPM%20Support%20in%20HAPI%20FHIR/near/199424056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/NPM.20Support.20in.20HAPI.20FHIR.html#199424056">(Jun 01 2020 at 21:10)</a>:</h4>
<p>What about the example resources that are part of IG? Where are they placed? Are they what you call "pre seed" <span class="user-mention" data-user-id="191319">@James Agnew</span> ?</p>



<a name="199463285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/NPM%20Support%20in%20HAPI%20FHIR/near/199463285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/NPM.20Support.20in.20HAPI.20FHIR.html#199463285">(Jun 02 2020 at 08:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> the npm support sounds awesome! we are using npm packages for StructureMap/StructureDefinition/ValueSet  for the $transform operation where we don't need JPA at all but would be happy to migrate to the setup you describe. As far as I can see your description fits our needs.</p>



<a name="199463676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/NPM%20Support%20in%20HAPI%20FHIR/near/199463676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/NPM.20Support.20in.20HAPI.20FHIR.html#199463676">(Jun 02 2020 at 08:42)</a>:</h4>
<p>Would "pre seed" be anything that isn't Conformance/Terminology resources, with the subscription resource being an exception to that?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
