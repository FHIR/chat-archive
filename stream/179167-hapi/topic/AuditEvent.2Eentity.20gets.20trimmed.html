---
layout: page
title: "FHIR Chat  · AuditEvent.entity gets trimmed · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html">AuditEvent.entity gets trimmed</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="237605433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237605433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237605433">(May 06 2021 at 04:53)</a>:</h4>
<p>Trying to create an AuditEvent with more than one element in the <code>entity</code> array, this array seems to get trimmed to 1 element in the created resource --without any errors.</p>
<p>Here is an example to re-recreate this on the public test server:<br>
request body:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;AuditEvent&quot;,
  &quot;type&quot;: {
    &quot;system&quot;: &quot;http://hl7.org/fhir/ValueSet/audit-event-type&quot;,
    &quot;code&quot;: &quot;110112&quot;,
    &quot;display&quot;: &quot;Query&quot;
  },
  &quot;action&quot;: &quot;E&quot;,
  &quot;outcome&quot;: &quot;0&quot;,
  &quot;outcomeDesc&quot;: &quot;CONSENT_PERMIT&quot;,
  &quot;agent&quot;: [
    {
      &quot;who&quot;: {
        &quot;identifier&quot;: {
          &quot;system&quot;: &quot;urn:ietf:rfc:3986&quot;,
          &quot;value&quot;: &quot;urn:oid:1.1&quot;
        }
      }
    }
  ],
  &quot;source&quot;: {
    &quot;observer&quot;: {
      &quot;display&quot;: &quot;LEAP Consent Decision Service&quot;
    },
    &quot;type&quot;: [
      {
        &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/security-source-type&quot;,
        &quot;code&quot;: &quot;4&quot;,
        &quot;display&quot;: &quot;Application Server&quot;
      }
    ]
  },
  &quot;entity&quot;: [
    {
      &quot;what&quot;: {
        &quot;reference&quot;: &quot;Consent/2045174&quot;,
        &quot;type&quot;: {
          &quot;system&quot;: &quot;http://hl7.org/fhir/resource-types&quot;,
          &quot;code&quot;: &quot;Consent&quot;
        }
      }
    },
    {
      &quot;what&quot;: {
        &quot;reference&quot;: {
          &quot;reference&quot;: &quot;Patient/1731610&quot;,
          &quot;display&quot;: &quot;Younger,Gallow&quot;
        },
        &quot;type&quot;: {
          &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/audit-entity-type&quot;,
          &quot;code&quot;: &quot;1&quot;,
          &quot;display&quot;: &quot;Person&quot;
        }
      }
    }
  ]
}
</code></pre></div>
<p>Response: <code>201 created</code><br>
Response body:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;AuditEvent&quot;,
  &quot;id&quot;: &quot;2082005&quot;,
  &quot;meta&quot;: {
    &quot;versionId&quot;: &quot;1&quot;,
    &quot;lastUpdated&quot;: &quot;2021-05-06T04:43:15.586+00:00&quot;
  },
  &quot;type&quot;: {
    &quot;system&quot;: &quot;http://hl7.org/fhir/ValueSet/audit-event-type&quot;,
    &quot;code&quot;: &quot;110112&quot;,
    &quot;display&quot;: &quot;Query&quot;
  },
  &quot;action&quot;: &quot;E&quot;,
  &quot;outcome&quot;: &quot;0&quot;,
  &quot;outcomeDesc&quot;: &quot;CONSENT_PERMIT&quot;,
  &quot;agent&quot;: [ {
    &quot;who&quot;: {
      &quot;identifier&quot;: {
        &quot;system&quot;: &quot;urn:ietf:rfc:3986&quot;,
        &quot;value&quot;: &quot;urn:oid:1.1&quot;
      }
    }
  } ],
  &quot;source&quot;: {
    &quot;observer&quot;: {
      &quot;display&quot;: &quot;LEAP Consent Decision Service&quot;
    },
    &quot;type&quot;: [ {
      &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/security-source-type&quot;,
      &quot;code&quot;: &quot;4&quot;,
      &quot;display&quot;: &quot;Application Server&quot;
    } ]
  },
  &quot;entity&quot;: [ {
    &quot;what&quot;: {
      &quot;reference&quot;: &quot;Consent/2045174&quot;
    }
  } ]
}
</code></pre></div>



<a name="237652596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237652596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237652596">(May 06 2021 at 12:54)</a>:</h4>
<p>so this is a problem with the server you are using? Or do you think it is hapi api toolkit? Have you tried using a different kind of server? like Grahame's?</p>



<a name="237652643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237652643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237652643">(May 06 2021 at 12:55)</a>:</h4>
<p><span class="user-mention" data-user-id="407607">@Daryl Moehrke</span> can your test app reproduce this?</p>



<a name="237688459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237688459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237688459">(May 06 2021 at 16:27)</a>:</h4>
<p>Grahame's server seems to be down. I'm suspecting that this is a HAPI bug <span class="user-mention" data-user-id="191319">@James Agnew</span>.</p>



<a name="237693084"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237693084" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237693084">(May 06 2021 at 16:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191920">@Mohammad Jafari</span> which Grahame server did you try? <span class="user-mention" data-user-id="248736">@Mark Iantorno</span> might be able to reset it</p>



<a name="237693365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237693365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237693365">(May 06 2021 at 17:00)</a>:</h4>
<p>Grahame has many servers</p>



<a name="237693381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237693381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237693381">(May 06 2021 at 17:00)</a>:</h4>
<p>What is the address</p>



<a name="237693423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237693423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237693423">(May 06 2021 at 17:00)</a>:</h4>
<p>or name</p>



<a name="237693572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237693572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237693572">(May 06 2021 at 17:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191920">@Mohammad Jafari</span></p>



<a name="237694844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237694844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237694844">(May 06 2021 at 17:09)</a>:</h4>
<p>I usually go to <a href="https://test.fhir.org/r4">https://test.fhir.org/r4</a></p>



<a name="237699359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237699359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237699359">(May 06 2021 at 17:40)</a>:</h4>
<p>seems still dead. <span class="user-mention" data-user-id="248736">@Mark Iantorno</span> can you reset this server?</p>



<a name="237706536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237706536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237706536">(May 06 2021 at 18:27)</a>:</h4>
<p>That resource produces quite a few validation errors. That may well be related:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"OperationOutcome"</span><span class="p">,</span>
  <span class="nt">"text"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"status"</span><span class="p">:</span> <span class="s2">"generated"</span><span class="p">,</span>
    <span class="nt">"div"</span><span class="p">:</span> <span class="s2">"&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\"0\"&gt;&lt;tr&gt;&lt;td style=\"font-weight: bold;\"&gt;ERROR&lt;/td&gt;&lt;td&gt;[AuditEvent.entity[0].what.type, Line 38, Col 58]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;This property must be an simple value, not an object (type at AuditEvent.entity[0].what.type)&lt;/pre&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td style=\"font-weight: bold;\"&gt;ERROR&lt;/td&gt;\n\t\t\t\t&lt;td&gt;[AuditEvent.entity[1].what.reference, Line 46, Col 42]&lt;/td&gt;\n\t\t\t\t&lt;td&gt;&lt;pre&gt;This property must be an simple value, not an object (reference at AuditEvent.entity[1].what.reference)&lt;/pre&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td style=\"font-weight: bold;\"&gt;ERROR&lt;/td&gt;\n\t\t\t\t&lt;td&gt;[AuditEvent.entity[1].what.type, Line 50, Col 79]&lt;/td&gt;\n\t\t\t\t&lt;td&gt;&lt;pre&gt;This property must be an simple value, not an object (type at AuditEvent.entity[1].what.type)&lt;/pre&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td style=\"font-weight: bold;\"&gt;WARNING&lt;/td&gt;\n\t\t\t\t&lt;td&gt;[AuditEvent, Line 1, Col 2]&lt;/td&gt;\n\t\t\t\t&lt;td&gt;&lt;pre&gt;dom-6: 'A resource should have narrative for robust management' failed&lt;/pre&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td style=\"font-weight: bold;\"&gt;ERROR&lt;/td&gt;\n\t\t\t\t&lt;td&gt;[AuditEvent, Line 1, Col 2]&lt;/td&gt;\n\t\t\t\t&lt;td&gt;&lt;pre&gt;AuditEvent.recorded: minimum required = 1, but only found 0 (from http://hl7.org/fhir/StructureDefinition/AuditEvent)&lt;/pre&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td style=\"font-weight: bold;\"&gt;ERROR&lt;/td&gt;\n\t\t\t\t&lt;td&gt;[AuditEvent.type, Line 4, Col 63]&lt;/td&gt;\n\t\t\t\t&lt;td&gt;&lt;pre&gt;The Coding references a value set, not a code system ('http://hl7.org/fhir/ValueSet/audit-event-type')&lt;/pre&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td style=\"font-weight: bold;\"&gt;ERROR&lt;/td&gt;\n\t\t\t\t&lt;td&gt;[AuditEvent.type, Line 4, Col 63]&lt;/td&gt;\n\t\t\t\t&lt;td&gt;&lt;pre&gt;Unknown Code System 'http://hl7.org/fhir/ValueSet/audit-event-type'&lt;/pre&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td style=\"font-weight: bold;\"&gt;ERROR&lt;/td&gt;\n\t\t\t\t&lt;td&gt;[AuditEvent.agent[0], Line 12, Col 6]&lt;/td&gt;\n\t\t\t\t&lt;td&gt;&lt;pre&gt;AuditEvent.agent.requestor: minimum required = 1, but only found 0 (from http://hl7.org/fhir/StructureDefinition/AuditEvent)&lt;/pre&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td style=\"font-weight: bold;\"&gt;WARNING&lt;/td&gt;\n\t\t\t\t&lt;td&gt;[AuditEvent.entity[1].what, Line 49, Col 18]&lt;/td&gt;\n\t\t\t\t&lt;td&gt;&lt;pre&gt;A Reference without an actual reference or identifier should have a display&lt;/pre&gt;&lt;/td&gt;\n\t\t\t&lt;/tr&gt;\n\t\t&lt;/table&gt;\n\t&lt;/div&gt;"</span>
  <span class="p">},</span>
  <span class="nt">"issue"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"severity"</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"processing"</span><span class="p">,</span>
      <span class="nt">"diagnostics"</span><span class="p">:</span> <span class="s2">"This property must be an simple value, not an object (type at AuditEvent.entity[0].what.type)"</span><span class="p">,</span>
      <span class="nt">"location"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"AuditEvent.entity[0].what.type"</span><span class="p">,</span>
        <span class="s2">"Line 38, Col 58"</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"severity"</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"processing"</span><span class="p">,</span>
      <span class="nt">"diagnostics"</span><span class="p">:</span> <span class="s2">"This property must be an simple value, not an object (reference at AuditEvent.entity[1].what.reference)"</span><span class="p">,</span>
      <span class="nt">"location"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"AuditEvent.entity[1].what.reference"</span><span class="p">,</span>
        <span class="s2">"Line 46, Col 42"</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"severity"</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"processing"</span><span class="p">,</span>
      <span class="nt">"diagnostics"</span><span class="p">:</span> <span class="s2">"This property must be an simple value, not an object (type at AuditEvent.entity[1].what.type)"</span><span class="p">,</span>
      <span class="nt">"location"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"AuditEvent.entity[1].what.type"</span><span class="p">,</span>
        <span class="s2">"Line 50, Col 79"</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"severity"</span><span class="p">:</span> <span class="s2">"warning"</span><span class="p">,</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"processing"</span><span class="p">,</span>
      <span class="nt">"diagnostics"</span><span class="p">:</span> <span class="s2">"dom-6: 'A resource should have narrative for robust management' failed"</span><span class="p">,</span>
      <span class="nt">"location"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"AuditEvent"</span><span class="p">,</span>
        <span class="s2">"Line 1, Col 2"</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"severity"</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"processing"</span><span class="p">,</span>
      <span class="nt">"diagnostics"</span><span class="p">:</span> <span class="s2">"AuditEvent.recorded: minimum required = 1, but only found 0 (from http://hl7.org/fhir/StructureDefinition/AuditEvent)"</span><span class="p">,</span>
      <span class="nt">"location"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"AuditEvent"</span><span class="p">,</span>
        <span class="s2">"Line 1, Col 2"</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"severity"</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"processing"</span><span class="p">,</span>
      <span class="nt">"diagnostics"</span><span class="p">:</span> <span class="s2">"The Coding references a value set, not a code system ('http://hl7.org/fhir/ValueSet/audit-event-type')"</span><span class="p">,</span>
      <span class="nt">"location"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"AuditEvent.type"</span><span class="p">,</span>
        <span class="s2">"Line 4, Col 63"</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"severity"</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"processing"</span><span class="p">,</span>
      <span class="nt">"diagnostics"</span><span class="p">:</span> <span class="s2">"Unknown Code System 'http://hl7.org/fhir/ValueSet/audit-event-type'"</span><span class="p">,</span>
      <span class="nt">"location"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"AuditEvent.type"</span><span class="p">,</span>
        <span class="s2">"Line 4, Col 63"</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"severity"</span><span class="p">:</span> <span class="s2">"error"</span><span class="p">,</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"processing"</span><span class="p">,</span>
      <span class="nt">"diagnostics"</span><span class="p">:</span> <span class="s2">"AuditEvent.agent.requestor: minimum required = 1, but only found 0 (from http://hl7.org/fhir/StructureDefinition/AuditEvent)"</span><span class="p">,</span>
      <span class="nt">"location"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"AuditEvent.agent[0]"</span><span class="p">,</span>
        <span class="s2">"Line 12, Col 6"</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"severity"</span><span class="p">:</span> <span class="s2">"warning"</span><span class="p">,</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"processing"</span><span class="p">,</span>
      <span class="nt">"diagnostics"</span><span class="p">:</span> <span class="s2">"A Reference without an actual reference or identifier should have a display"</span><span class="p">,</span>
      <span class="nt">"location"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"AuditEvent.entity[1].what"</span><span class="p">,</span>
        <span class="s2">"Line 49, Col 18"</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>



<a name="237714370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237714370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237714370">(May 06 2021 at 19:19)</a>:</h4>
<p>I think this set of .entity are indeed wrongly assembled</p>



<a name="237714425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237714425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237714425">(May 06 2021 at 19:19)</a>:</h4>
<p>"entity": [<br>
    {<br>
      "what": {<br>
        "reference": "Consent/2045174",<br>
        "type": {<br>
          "system": "<a href="http://hl7.org/fhir/resource-types">http://hl7.org/fhir/resource-types</a>",<br>
          "code": "Consent"<br>
        }<br>
      }<br>
    },<br>
    {<br>
      "what": {<br>
        "reference": {<br>
          "reference": "Patient/1731610",<br>
          "display": "Younger,Gallow"<br>
        },<br>
        "type": {<br>
          "system": "<a href="http://terminology.hl7.org/CodeSystem/audit-entity-type">http://terminology.hl7.org/CodeSystem/audit-entity-type</a>",<br>
          "code": "1",<br>
          "display": "Person"<br>
        }<br>
      }</p>



<a name="237714646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237714646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237714646">(May 06 2021 at 19:21)</a>:</h4>
<p>the 'what' references should not need to have a reference.type. I think the type is intended to be the entity[0].type</p>



<a name="237714864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237714864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237714864">(May 06 2021 at 19:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191920">@Mohammad Jafari</span> are you just wanting to say that the consent resource and the patient were involved?</p>



<a name="237714995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237714995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237714995">(May 06 2021 at 19:23)</a>:</h4>
<p>see my IG on this topic <a href="http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/index.html">http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/index.html</a></p>



<a name="237715195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237715195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237715195">(May 06 2021 at 19:25)</a>:</h4>
<p>I realize you are doing an audit of an access control "decision", but the entity section should look similar to my examples</p>



<a name="237715380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237715380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237715380">(May 06 2021 at 19:26)</a>:</h4>
<p>see this one for a simple RESTful Create <a href="http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/AuditEvent-ex-auditBasicCreate1.json.html">http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/AuditEvent-ex-auditBasicCreate1.json.html</a></p>



<a name="237715629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237715629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237715629">(May 06 2021 at 19:28)</a>:</h4>
<p>change your entity section like this<br>
  "entity" : [<br>
    {<br>
      "what" : {<br>
        "reference" : "Patient/1731610"<br>
      },<br>
      "type" : {<br>
        "system" : "<a href="http://terminology.hl7.org/CodeSystem/audit-entity-type">http://terminology.hl7.org/CodeSystem/audit-entity-type</a>",<br>
        "code" : "1",<br>
        "display" : "Person"<br>
      },<br>
      "role" : {<br>
        "system" : "<a href="http://terminology.hl7.org/CodeSystem/object-role">http://terminology.hl7.org/CodeSystem/object-role</a>",<br>
        "code" : "1",<br>
        "display" : "Patient"<br>
      }<br>
    },<br>
    {<br>
      "what" : {<br>
        "reference" : "Consent/2045174"<br>
      },<br>
      "type" : {<br>
        "system" : "<a href="http://terminology.hl7.org/CodeSystem/audit-entity-type">http://terminology.hl7.org/CodeSystem/audit-entity-type</a>",<br>
        "code" : "2",<br>
        "display" : "System Object"<br>
      },<br>
      "role" : {<br>
        "system" : "<a href="http://terminology.hl7.org/CodeSystem/object-role">http://terminology.hl7.org/CodeSystem/object-role</a>",<br>
        "code" : "4",<br>
        "display" : "Domain Resource"<br>
      }<br>
    }<br>
  ]</p>



<a name="237715682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237715682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237715682">(May 06 2021 at 19:29)</a>:</h4>
<p>i have not thought of what the entity.type or entity.role values would be for the consent... let me think...</p>



<a name="237715918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237715918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237715918">(May 06 2021 at 19:30)</a>:</h4>
<p>I guess type might be okay to be Consent... it is that kind of an object...</p>



<a name="237715960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237715960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237715960">(May 06 2021 at 19:31)</a>:</h4>
<p>role seems best to be a "13" Security Resource</p>



<a name="237717736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237717736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237717736">(May 06 2021 at 19:44)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191319">@James Agnew</span> . The server accepted the resource with no errors, so that's why I didn't think to check the validity.</p>



<a name="237722970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237722970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237722970">(May 06 2021 at 20:26)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191404">@John Moehrke</span> for pointing out the IG. I made adjustments to comply with this IG.</p>



<a name="237723073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/AuditEvent.entity%20gets%20trimmed/near/237723073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/AuditEvent.2Eentity.20gets.20trimmed.html#237723073">(May 06 2021 at 20:27)</a>:</h4>
<p>well... it is not a formal IG... yet.... but It does all validate and It is my thinking of how this  would work.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
