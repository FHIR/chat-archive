---
layout: page
title: "FHIR Chat  · HAPI FHIR custom profile validation issue · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20custom.20profile.20validation.20issue.html">HAPI FHIR custom profile validation issue</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="164982663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20custom%20profile%20validation%20issue/near/164982663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20custom.20profile.20validation.20issue.html#164982663">(May 06 2019 at 13:47)</a>:</h4>
<p>I have custom profile for AllergyIntolerance that forge generated as below :</p>
<p><a href="user_uploads/10155/ImqPTLou5XBAzzGD7CAB7gJ8/custom.xml" target="_blank" title="user_uploads/10155/ImqPTLou5XBAzzGD7CAB7gJ8/custom.xml">custom.xml</a></p>
<p>I have validation code as below :</p>
<div class="codehilite"><pre><span></span>List&amp;lt;StructureDefinition&amp;gt; definitions = new ArrayList&amp;lt;&amp;gt;();
/*
 *  code extracts definitions from custom.xml file attaches and loads into &quot;definitions&quot; list
 */
IValidationSupport valSupport = new MyValidationSupport(definitions);
ValidationSupportChain support = new ValidationSupportChain(valSupport);
FhirValidator validator = ctx.newValidator();
FhirInstanceValidator instanceValidator = new FhirInstanceValidator();
instanceValidator.setValidationSupport(support);
validator.registerValidatorModule(instanceValidator);
</pre></div>


<p>The AllergyIntolerance  input supplied to be validated is as below :<br>
<a href="user_uploads/10155/8ifx5CQCb0fIv0ogNnTWHeoV/AllergyIntolerance.txt" target="_blank" title="user_uploads/10155/8ifx5CQCb0fIv0ogNnTWHeoV/AllergyIntolerance.txt">AllergyIntolerance.txt</a></p>
<p>The output is as below :</p>
<div class="codehilite"><pre><span></span>{
    &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
    &quot;issue&quot;: [
        {
            &quot;severity&quot;: &quot;information&quot;,
            &quot;code&quot;: &quot;informational&quot;,
            &quot;diagnostics&quot;: &quot;No issues detected during validation&quot;
        }
    ]
}
</pre></div>


<p>If you see thee input, verificationStatus is missing and the custom profile lists it as mandatory :</p>
<div class="codehilite"><pre><span></span>element id=&quot;AllergyIntolerance.verificationStatus&quot;
      path value=&quot;AllergyIntolerance.verificationStatus&quot; 
      mustSupport value=&quot;true&quot; 
      isModifier value=&quot;false&quot; 
      mapping
        identity value=&quot;argonaut-dq-dstu2&quot; 
        map value=&quot;AllergyIntolerance.status&quot; 
      mapping
    element
</pre></div>


<p>So I need to figure out why is the validation succeeding even if verificationStatus is missing in i/p and is required in forge generated custom profile.</p>
<p>Am I missing something here ?</p>



<a name="165014234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20custom%20profile%20validation%20issue/near/165014234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20custom.20profile.20validation.20issue.html#165014234">(May 06 2019 at 20:05)</a>:</h4>
<blockquote>
<p>I have custom profile for AllergyIntolerance that forge generated as below :</p>
<p><a href="/user_uploads/10155/ImqPTLou5XBAzzGD7CAB7gJ8/custom.xml" target="_blank" title="custom.xml">custom.xml</a></p>
<p>I have validation code as below :</p>
<div class="codehilite"><pre><span></span>List&amp;lt;StructureDefinition&amp;gt; definitions = new ArrayList&amp;lt;&amp;gt;();
/*
 *  code extracts definitions from custom.xml file attaches and loads into &quot;definitions&quot; list
 */
IValidationSupport valSupport = new MyValidationSupport(definitions);
ValidationSupportChain support = new ValidationSupportChain(valSupport);
FhirValidator validator = ctx.newValidator();
FhirInstanceValidator instanceValidator = new FhirInstanceValidator();
instanceValidator.setValidationSupport(support);
validator.registerValidatorModule(instanceValidator);
</pre></div>


<p>The AllergyIntolerance  input supplied to be validated is as below :<br>
<a href="/user_uploads/10155/8ifx5CQCb0fIv0ogNnTWHeoV/AllergyIntolerance.txt" target="_blank" title="AllergyIntolerance.txt">AllergyIntolerance.txt</a></p>
<p>The output is as below :</p>
<div class="codehilite"><pre><span></span>{
    &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
    &quot;issue&quot;: [
        {
            &quot;severity&quot;: &quot;information&quot;,
            &quot;code&quot;: &quot;informational&quot;,
            &quot;diagnostics&quot;: &quot;No issues detected during validation&quot;
        }
    ]
}
</pre></div>


<p>If you see thee input, verificationStatus is missing and the custom profile lists it as mandatory :</p>
<div class="codehilite"><pre><span></span>element id=&quot;AllergyIntolerance.verificationStatus&quot;
      path value=&quot;AllergyIntolerance.verificationStatus&quot; 
      mustSupport value=&quot;true&quot; 
      isModifier value=&quot;false&quot; 
      mapping
        identity value=&quot;argonaut-dq-dstu2&quot; 
        map value=&quot;AllergyIntolerance.status&quot; 
      mapping
    element
</pre></div>


<p>So I need to figure out why is the validation succeeding even if verificationStatus is missing in i/p and is required in forge generated custom profile.</p>
<p>Am I missing something here ?</p>
</blockquote>
<p>I found out that Forge generates some &lt;text&gt;&lt;/text&gt; field at start which needs to be removed</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
