---
layout: page
title: "FHIR Chat  · simple authentication with docker · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/simple.20authentication.20with.20docker.html">simple authentication with docker</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="274669993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/simple%20authentication%20with%20docker/near/274669993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/simple.20authentication.20with.20docker.html#274669993">(Mar 09 2022 at 10:46)</a>:</h4>
<p>Dear community,</p>
<p>I am currently setting up a hapi-server for a feasibility study. <br>
Therefore we want to limit access by setting a simple user login.<br>
Is it possible to set a user name and a password when running a hapi server with docker?</p>
<p>Thanks in advance for your answers.</p>



<a name="274672624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/simple%20authentication%20with%20docker/near/274672624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/simple.20authentication.20with.20docker.html#274672624">(Mar 09 2022 at 11:10)</a>:</h4>
<p>Not included in the docker image. You could:</p>
<ul>
<li>modify JPAstarter and add a BasicAuth Interceptor</li>
<li>put an apache/nginx reverse proxy in front of hapi and do auth in the apache (no need to modifiy the docker image)</li>
</ul>



<a name="274673433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/simple%20authentication%20with%20docker/near/274673433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/simple.20authentication.20with.20docker.html#274673433">(Mar 09 2022 at 11:18)</a>:</h4>
<p>Thanks, Patrick, for your reply. I will try and report on my experiances.</p>



<a name="275372736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/simple%20authentication%20with%20docker/near/275372736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/simple.20authentication.20with.20docker.html#275372736">(Mar 15 2022 at 13:30)</a>:</h4>
<p>Hi there. Due to our requirements I think only the first is possible.<br>
Now I am facing the next problem:<br>
I wrote a BasicSecurityInterceptor like proposed <a href="https://hapifhir.io/hapi-fhir/docs/security/introduction.html">here</a> - though changing the verification part - and added the interceptor in BaseJpaRestfulServer with <code>registerInterceptor(new BasicSecurityInterceptor());</code>. When I then build the docker image and run this image, I get the following BeanDefinitionOverrideException:</p>
<div class="codehilite"><pre><span></span><code>Caused by: org.springframework.beans.factory.support.BeanDefinitionOverrideException:
Invalid bean definition with name &#39;mdmRuleValidator&#39; defined in class path resource
[ca/uhn/fhir/jpa/starter/mdm/MdmConfig.class]:
Cannot register bean definition [Root bean: class [null]; scope=; abstract=false; lazyInit=null;
autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false;
factoryBeanName=mdmConfig; factoryMethodName=mdmRuleValidator; initMethodName=null;
destroyMethodName=(inferred);
defined in class path resource [ca/uhn/fhir/jpa/starter/mdm/MdmConfig.class]]
for bean &#39;mdmRuleValidator&#39;:
There is already [Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3;
dependencyCheck=0; autowireCandidate=true; primary=false;
factoryBeanName=ca.uhn.fhir.jpa.mdm.config.MdmCommonConfig;
factoryMethodName=mdmRuleValidator; initMethodName=null; destroyMethodName=(inferred);
defined in class path resource [ca/uhn/fhir/jpa/mdm/config/MdmCommonConfig.class]]
bound.
</code></pre></div>
<p>Does anyone have an idea on how to cope with this problem?</p>



<a name="275379061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/simple%20authentication%20with%20docker/near/275379061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/simple.20authentication.20with.20docker.html#275379061">(Mar 15 2022 at 14:21)</a>:</h4>
<p>your error points to the mdm part of hapi. Did you change sth. for the MDM Config?</p>



<a name="275381025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/simple%20authentication%20with%20docker/near/275381025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/simple.20authentication.20with.20docker.html#275381025">(Mar 15 2022 at 14:36)</a>:</h4>
<p>not that I were aware of, but I'll check it.</p>



<a name="275381219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/simple%20authentication%20with%20docker/near/275381219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/simple.20authentication.20with.20docker.html#275381219">(Mar 15 2022 at 14:37)</a>:</h4>
<p>either enable <a href="https://github.com/trifork/hapi-fhir-jpaserver-starter/blob/929a3535fa93d33b24cef06ed4158ae2fcb9f6a2/src/main/resources/application.yaml#L4">https://github.com/trifork/hapi-fhir-jpaserver-starter/blob/929a3535fa93d33b24cef06ed4158ae2fcb9f6a2/src/main/resources/application.yaml#L4</a> or disable <a href="https://github.com/trifork/hapi-fhir-jpaserver-starter/blob/929a3535fa93d33b24cef06ed4158ae2fcb9f6a2/src/main/resources/application.yaml#L103">https://github.com/trifork/hapi-fhir-jpaserver-starter/blob/929a3535fa93d33b24cef06ed4158ae2fcb9f6a2/src/main/resources/application.yaml#L103</a></p>



<a name="275382400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/simple%20authentication%20with%20docker/near/275382400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/simple.20authentication.20with.20docker.html#275382400">(Mar 15 2022 at 14:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> : I copied the files from jpa-starter =&gt; same error. That's not the problem.<br>
<span class="user-mention" data-user-id="191427">@Jens Villadsen</span>: I enabled the first, now there is no more error. Thank you so much.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
