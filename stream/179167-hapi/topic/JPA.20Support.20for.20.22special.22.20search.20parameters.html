---
layout: page
title: "FHIR Chat  · JPA Support for &quot;special&quot; search parameters · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/JPA.20Support.20for.20.22special.22.20search.20parameters.html">JPA Support for &quot;special&quot; search parameters</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="176200205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/JPA%20Support%20for%20%22special%22%20search%20parameters/near/176200205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/JPA.20Support.20for.20.22special.22.20search.20parameters.html#176200205">(Sep 20 2019 at 14:59)</a>:</h4>
<p>Based on my investigations, it appears that the HAPI JPA server doesn't currently support search params of type <code>special</code>, is this correct? My use case involves some latitude/longitude based searches (such as the <code>near</code> parameter for Location).</p>
<p>I am guessing that <a href="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-jpaserver-searchparam/src/main/java/ca/uhn/fhir/jpa/searchparam/extractor/SearchParamExtractorR4.java#L172" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-jpaserver-searchparam/src/main/java/ca/uhn/fhir/jpa/searchparam/extractor/SearchParamExtractorR4.java#L172">this TODO</a> refers to the <code>near</code>  search.</p>
<p>Also, the JPA server currently serves an invalid CapabilityStatement related to <code>special</code> search parameters as described in <a href="https://github.com/jamesagnew/hapi-fhir/issues/1167" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/issues/1167">this github issue</a>.</p>



<a name="176207450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/JPA%20Support%20for%20%22special%22%20search%20parameters/near/176207450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/JPA.20Support.20for.20.22special.22.20search.20parameters.html#176207450">(Sep 20 2019 at 16:23)</a>:</h4>
<p>Yup, <code>special</code> search parameters are not yet implemented.</p>



<a name="176215715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/JPA%20Support%20for%20%22special%22%20search%20parameters/near/176215715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/JPA.20Support.20for.20.22special.22.20search.20parameters.html#176215715">(Sep 20 2019 at 17:52)</a>:</h4>
<p>Is adding support for <code>special</code> parameters something that could be done without losing all of the nice search features that come with the base JPA server (supporting multiple parameters, includes, etc.)? My impression from looking at <a href="http://hapifhir.io/xref-jpaserver/ca/uhn/fhir/jpa/rp/r4/LocationResourceProvider.html" target="_blank" title="http://hapifhir.io/xref-jpaserver/ca/uhn/fhir/jpa/rp/r4/LocationResourceProvider.html">the generated Location provider</a> is that this is not something that could be done with something simple like an Interceptor, but would instead require messing around in the guts of HAPI.</p>



<a name="177529877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/JPA%20Support%20for%20%22special%22%20search%20parameters/near/177529877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake O&#x27;Donnell <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/JPA.20Support.20for.20.22special.22.20search.20parameters.html#177529877">(Oct 07 2019 at 15:23)</a>:</h4>
<p>Are there any potential workarounds for my HAPI JPA server to implement something that acts similarly to the special <code>near</code> search param (seeing as <code>near</code> is not supported)? I've been looking at trying to use a custom <a href="http://www.hl7.org/fhir/operations.html" target="_blank" title="http://www.hl7.org/fhir/operations.html">operation</a>, would this be reasonable or discouraged?</p>



<a name="177536362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/JPA%20Support%20for%20%22special%22%20search%20parameters/near/177536362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/JPA.20Support.20for.20.22special.22.20search.20parameters.html#177536362">(Oct 07 2019 at 16:31)</a>:</h4>
<p>That would absolutely be a reasonable thing to do as a workaround to <code>near</code> not being implemented.</p>
<p>What I really want to get done at some point soon is to take advantage of the spatial features in ElasticSearch to implement this one. Most of the precursor work is actually done now so it seems reasonable that we could do this.. Not yet sure about timing though.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
