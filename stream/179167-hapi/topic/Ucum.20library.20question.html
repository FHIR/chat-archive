---
layout: page
title: "FHIR Chat  · Ucum library question · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html">Ucum library question</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153973510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973510">(Jul 04 2018 at 22:21)</a>:</h4>
<p>see <a href="https://github.com/FHIR/Ucum-java/issues/7" target="_blank" title="https://github.com/FHIR/Ucum-java/issues/7">https://github.com/FHIR/Ucum-java/issues/7</a> : which classes should I add equals etc to, and what's the grounds for equality? </p>
<p>My working answer for the first question is Decimal and Pair. <br>
My working answer for the second question is, 'by decimal representation' but that's not fully correct in the corner cases - but where it's not correct, I don't know what would be.</p>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> <span class="user-mention" data-user-id="191319">@James Agnew</span> <span class="user-mention" data-user-id="191451">@Patrick Werner</span></p>



<a name="153973533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973533">(Jul 04 2018 at 22:32)</a>:</h4>
<p>Consider Unit as well?</p>



<a name="153973535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973535">(Jul 04 2018 at 22:33)</a>:</h4>
<p>As far as the grounds for equal, that they are the same value at the maximum precision of either input?</p>



<a name="153973539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973539">(Jul 04 2018 at 22:36)</a>:</h4>
<p>it should be the minimum precision if we're going to think like that</p>



<a name="153973541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973541">(Jul 04 2018 at 22:36)</a>:</h4>
<p>But then 1 would equal 1.1, we don't want that, right?</p>



<a name="153973542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973542">(Jul 04 2018 at 22:36)</a>:</h4>
<p>but the real question for me is: are we trying to object equals,or concept equals?</p>



<a name="153973544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973544">(Jul 04 2018 at 22:37)</a>:</h4>
<p>we might well want 1 to equal 1.1, though we wouldn't want 1.0 to equal 1.1</p>



<a name="153973546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973546">(Jul 04 2018 at 22:37)</a>:</h4>
<p>Depends how it's being used in the code, the bug report indicates it's being used as concept equals, but is implemented as object equals.</p>



<a name="153973549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973549">(Jul 04 2018 at 22:38)</a>:</h4>
<p>It's hard to imagine how it would be useful as an object equals.</p>



<a name="153973551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973551">(Jul 04 2018 at 22:39)</a>:</h4>
<p>hmm that's not quite what I mean. lt's be more specific:<br>
is 1.0000e2 = 10.000e1?</p>



<a name="153973552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973552">(Jul 04 2018 at 22:39)</a>:</h4>
<p>do we want to know whether they are the same representation or have the same meaning?</p>



<a name="153973553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973553">(Jul 04 2018 at 22:40)</a>:</h4>
<p>I would say yes, but that's because I'm assuming that this is being used in the context of determining whether or not two quantities are the same, and I wouldn't want different representations of the same value to cause that to be false.</p>



<a name="153973555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973555">(Jul 04 2018 at 22:41)</a>:</h4>
<p>well, let's see what Patrick as to say...</p>



<a name="153973556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973556">(Jul 04 2018 at 22:41)</a>:</h4>
<p>In Java would generally adopt the pattern of <code>equals</code> being object equals and have a separate method for concept equals (if required)</p>



<a name="153973557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973557">(Jul 04 2018 at 22:41)</a>:</h4>
<p>because usually questions about equals are actually questions about lists and maps</p>



<a name="153973558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973558">(Jul 04 2018 at 22:42)</a>:</h4>
<p>yes I have this:<br>
    public boolean equals(Decimal value, Decimal maxDifference) {<br>
      Decimal diff = this.subtract(value).absolute();<br>
      return diff.comparesTo(maxDifference) &lt;= 0;<br>
  }</p>



<a name="153973909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973909">(Jul 05 2018 at 20:58)</a>:</h4>
<blockquote>
<p>I would say yes, but that's because I'm assuming that this is being used in the context of determining whether or not two quantities are the same, and I wouldn't want different representations of the same value to cause that to be false.</p>
</blockquote>
<p>i totally agree. Different representations of the same value should equal. I personally would ignore precision for equals(),  as considering it will make it complicated. </p>
<p>1 precision 1 should equal 1 precision 2</p>



<a name="153973910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973910">(Jul 05 2018 at 20:59)</a>:</h4>
<p>so basically i'm thinking about object equals ignoring precision.</p>



<a name="153973911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973911">(Jul 05 2018 at 21:10)</a>:</h4>
<p>you can never ignore precision. Does 1.01 equal 1?</p>



<a name="153973915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973915">(Jul 05 2018 at 21:28)</a>:</h4>
<p>no, but 1 to 1.0 or 1.00</p>



<a name="153973917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973917">(Jul 05 2018 at 21:37)</a>:</h4>
<p>well, you are ignoring precision selectively.</p>



<a name="153973918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973918">(Jul 05 2018 at 21:37)</a>:</h4>
<p>because 1 = 1.01 in most scientific frameworks</p>



<a name="153973919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153973919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153973919">(Jul 05 2018 at 21:37)</a>:</h4>
<p>where as 1.00 != 1.01</p>



<a name="153974451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153974451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153974451">(Jul 10 2018 at 12:16)</a>:</h4>
<p>after further reflection i agree with <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> equals() should be about object equality, comparing actual values should be handled by concept equals methods</p>



<a name="153974452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Ucum%20library%20question/near/153974452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Ucum.20library.20question.html#153974452">(Jul 10 2018 at 12:24)</a>:</h4>
<p>i added generated equals and hashCode for Decimal and Pair to my pull request</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
