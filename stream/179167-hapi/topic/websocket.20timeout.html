---
layout: page
title: "FHIR Chat  · websocket timeout · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/websocket.20timeout.html">websocket timeout</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="213809110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/websocket%20timeout/near/213809110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/websocket.20timeout.html#213809110">(Oct 19 2020 at 16:12)</a>:</h4>
<p>i'm currently playing around with hapis subscriptions (websocket).<br>
I couldn't find any ping/pong or heartbeat function in hapi, so idle websockets will timeout.</p>



<a name="213809166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/websocket%20timeout/near/213809166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/websocket.20timeout.html#213809166">(Oct 19 2020 at 16:13)</a>:</h4>
<p>I want to prevent the timeout via ping/pong</p>



<a name="213809213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/websocket%20timeout/near/213809213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/websocket.20timeout.html#213809213">(Oct 19 2020 at 16:13)</a>:</h4>
<p>Did i miss something? Would you accept a PR adding this <span class="user-mention" data-user-id="191319">@James Agnew</span> ?</p>



<a name="213929697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/websocket%20timeout/near/213929697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/websocket.20timeout.html#213929697">(Oct 20 2020 at 14:45)</a>:</h4>
<p>I found the  ca.uhn.fhir.jpa.subscription.SocketImplementation class in the hapi tests, which just sends "keep alive" as a text message.</p>



<a name="213929921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/websocket%20timeout/near/213929921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/websocket.20timeout.html#213929921">(Oct 20 2020 at 14:47)</a>:</h4>
<p>Checked the Implementation of the WS in hapi, there are no ping frames sent out.</p>



<a name="213930041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/websocket%20timeout/near/213930041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/websocket.20timeout.html#213930041">(Oct 20 2020 at 14:48)</a>:</h4>
<p>Question to me is: what would be better: adding "keep alive" or sending out ping frames?</p>



<a name="213930207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/websocket%20timeout/near/213930207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/websocket.20timeout.html#213930207">(Oct 20 2020 at 14:49)</a>:</h4>
<p>I also like the idea of the client being able to check the connection with Ping/Pong</p>



<a name="213932467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/websocket%20timeout/near/213932467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/websocket.20timeout.html#213932467">(Oct 20 2020 at 15:05)</a>:</h4>
<p>to me this would lead to two aspects to implement:</p>
<ul>
<li>an (optional) Ping from Server -&gt; Client, (Pong response by the client optional)</li>
<li>hapi websocket backend responds with PONG to a PING frame</li>
</ul>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
