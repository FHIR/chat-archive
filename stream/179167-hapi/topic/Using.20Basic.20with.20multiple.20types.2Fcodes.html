---
layout: page
title: "FHIR Chat  · Using Basic with multiple types/codes · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html">Using Basic with multiple types/codes</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="217003174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/217003174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#217003174">(Nov 17 2020 at 13:41)</a>:</h4>
<p>Was wondering if anyone has any good advice/best practise of how to handle multiple types (resources) using the /Basic endpoint?<br>
Our scenario is that we have two custom underlying resources with UUID as it's ID and we want to expose them through the /Basic endpoint. The problem that we have is that we can't do a READ on /Basic, since we dont know which underlying resource was intended.<br>
One solution might be to disallow READ and only use SEARCH when getting resources, including the code parameter to distinguish between the two.<br>
Any tips or thoughts are appreciated :)</p>



<a name="217009649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/217009649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#217009649">(Nov 17 2020 at 14:34)</a>:</h4>
<p>they aren't differentiated by id? why not?</p>



<a name="217018845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/217018845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#217018845">(Nov 17 2020 at 15:39)</a>:</h4>
<p>O yes, they have their own ID's of course. But we don't know which underlying resource the belong to on a READ action. Hope I understood your question correct.</p>



<a name="217023255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/217023255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#217023255">(Nov 17 2020 at 16:09)</a>:</h4>
<p>but you could represent that in the id. i would, at least</p>



<a name="217122167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/217122167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#217122167">(Nov 18 2020 at 11:22)</a>:</h4>
<p>You mean by prefixing the Id, as an example?<br>
I started asking this question in the dotnet stream and they had the same solution :)<br>
But as I wrote in that topic:</p>
<p>We have other consumers (for example a web app), besides our fhir server, that are using the underlying resources and their Id's. If the Id's get exposed to the end client from the other consumers, we would then be in a position where we would expose the same resource but with different Id's depending on which application you are using.</p>



<a name="217136195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/217136195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#217136195">(Nov 18 2020 at 13:50)</a>:</h4>
<p>You have some of the same folks in both places too <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="217139998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/217139998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#217139998">(Nov 18 2020 at 14:22)</a>:</h4>
<p>I don't follow how that is related to the question at hand. Perhaps you can explain more clearly... why wouldn't you use the same algorithm?</p>



<a name="219858374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/219858374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#219858374">(Dec 14 2020 at 15:39)</a>:</h4>
<p>Hello again! We solved the problem with the Id's by extending the underlying api with a method where we could ask what resource type a specific Id belonged to. </p>
<p>But now I have another problem which I can't solve.<br>
Our "custom" Basic resource has an extension with the type UUIDType, but the hapi parser throws an error when I do a POST request to our /Basic endpoint : Unknown element 'valueUuid' found during parse.<br>
I have tried to debug to find out why this happens, and all I can see is that when parsing a Basic resource, it doesnt know what a UUIDType (valueUuid) is.</p>
<p>Does anyone have any idea what could be wrong ? Because surely I'm able to use an UUIDType on Basic resource ? :)<br>
Using the hapi server version 5.1</p>
<p>Thanks!</p>



<a name="219909967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/219909967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#219909967">(Dec 14 2020 at 22:14)</a>:</h4>
<p>would you like to post an example of your resource?</p>



<a name="219943396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/219943396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#219943396">(Dec 15 2020 at 07:05)</a>:</h4>
<p>Here's an example in json format which doesn't parse:<br>
{<br>
  "resourceType": "Basic",<br>
  "meta": {<br>
    "profile": [ "<a href="http://mycustom.url">http://mycustom.url</a>" ]<br>
  },<br>
  "extension": [ {<br>
    "url": "<a href="http://myValue.url">http://myValue.url</a>",<br>
    "valueUuid": "ae644c07-1d4b-4ca4-bbf3-bd2023e294e5"<br>
  } ]<br>
}</p>



<a name="219943465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/219943465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#219943465">(Dec 15 2020 at 07:07)</a>:</h4>
<p>And here's the java class:<br>
@ResourceDef(name = "Basic", profile = PROFILE)<br>
public class MyCustom extends Basic {<br>
    public static final String PROFILE = "<a href="http://mycustom.url">http://mycustom.url</a>";</p>
<div class="codehilite"><pre><span></span><code>@Child(name = &quot;myValue&quot;)
@Extension(url = &quot;http://myValue.url&quot;, definedLocally = false, isModifier = false)
@Description(shortDefinition = &quot;&quot;)
private UuidType myValue;
</code></pre></div>

<p>}</p>



<a name="220213429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/220213429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#220213429">(Dec 17 2020 at 07:21)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>,  did you have time to look into our problem?</p>



<a name="220323580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/220323580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#220323580">(Dec 18 2020 at 00:39)</a>:</h4>
<p>what version of FHIR is this for?</p>



<a name="220343388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/220343388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#220343388">(Dec 18 2020 at 07:32)</a>:</h4>
<p>We're using R4.<br>
I do hope it's just me, having made some mistake...</p>



<a name="220361430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/220361430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#220361430">(Dec 18 2020 at 11:31)</a>:</h4>
<p>ok. anyway, <span class="user-mention" data-user-id="191319">@James Agnew</span> I think this is an issue in the HAPI serialiser, not the object models themselves</p>



<a name="220371466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/220371466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#220371466">(Dec 18 2020 at 13:27)</a>:</h4>
<p>Interesting... Let me see if I can reproduce this.</p>



<a name="220373678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/220373678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#220373678">(Dec 18 2020 at 13:50)</a>:</h4>
<p><span class="user-mention" data-user-id="251867">@Johan Nicklasson</span> I've just whipped up a test with your examples, and it passes. Can you please examine for what is different about the test scenario from your scenario, and update the test so that it demonstrates your issue?</p>
<p><a href="https://github.com/hapifhir/hapi-fhir/commit/5dc12b87876845e7f6f095c4f4f6cd8cbc218d2c#diff-6becf79d21ddbac4d4a25766de087756af0fe334016437d5215943f6a300597fR624">https://github.com/hapifhir/hapi-fhir/commit/5dc12b87876845e7f6f095c4f4f6cd8cbc218d2c#diff-6becf79d21ddbac4d4a25766de087756af0fe334016437d5215943f6a300597fR624</a></p>



<a name="220374626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/220374626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#220374626">(Dec 18 2020 at 14:00)</a>:</h4>
<p>Thanks for helping out <span class="user-mention" data-user-id="191319">@James Agnew</span> . If you change the parseResource()-method to using the Basic.Class instead of MyCustom.Class it won't work. And I guess that is what being used at runtime?</p>



<a name="220376725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/220376725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#220376725">(Dec 18 2020 at 14:20)</a>:</h4>
<p>Ok yeah, I see that. Working on a fix.</p>



<a name="220377388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/220377388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Johan Nicklasson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#220377388">(Dec 18 2020 at 14:26)</a>:</h4>
<p>Great! Looks like Santa's coming early this year :)</p>



<a name="220377426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20Basic%20with%20multiple%20types/codes/near/220377426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20Basic.20with.20multiple.20types.2Fcodes.html#220377426">(Dec 18 2020 at 14:26)</a>:</h4>
<p>Looks like the UUID datatype somehow didn't end up in our property file that enumerates the data model types. A fix has been submitted: <a href="https://github.com/hapifhir/hapi-fhir/pull/2258">https://github.com/hapifhir/hapi-fhir/pull/2258</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
