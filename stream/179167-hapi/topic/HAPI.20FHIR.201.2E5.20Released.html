---
layout: page
title: "FHIR Chat  · HAPI FHIR 1.5 Released · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html">HAPI FHIR 1.5 Released</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153822730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822730">(Apr 21 2016 at 13:34)</a>:</h4>
<p><strong>April 20, 2016 - HAPI FHIR 1.5 Released</strong> - The next release of HAPI has now been uploaded to the Maven repos and GitHub's releases section. This release corrects a security vulnerability as described below. All users are recommended to upgrade.</p>
<p>This release brings a number of bugfixes and a few bigger things. As always, the <a href="http://jamesagnew.github.io/hapi-fhir/changes-report.html" target="_blank" title="http://jamesagnew.github.io/hapi-fhir/changes-report.html">changelog</a> has the full list of changes in this version. Some changes of note include:</p>
<ul>
<li>This release fixes a security vulnerability in the XML parser. See GitHub <a href="https://github.com/jamesagnew/hapi-fhir/issues/339" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/issues/339">Issue #339</a> for information.</li>
<li>This release adds support for the current draft STU3 structure definitions, known as FHIR 1.4.0 (or the Montreal Connectathon Snapshot). See the <a href="http://jamesagnew.github.io/hapi-fhir/downloads.html" target="_blank" title="http://jamesagnew.github.io/hapi-fhir/downloads.html">downloads page</a> for information on the various versions of FHIR supported by HAPI FHIR.</li>
<li>A new <a href="http://jamesagnew.github.io/hapi-fhir/doc_rest_client_alternate_provider.html" target="_blank" title="http://jamesagnew.github.io/hapi-fhir/doc_rest_client_alternate_provider.html">JAX-RS based client</a> has been added.</li>
<li>A <a href="http://jamesagnew.github.io/hapi-fhir/doc_rest_server_security.html" target="_blank" title="http://jamesagnew.github.io/hapi-fhir/doc_rest_server_security.html">Server Security Interceptor</a> has been added.</li>
<li>The JPA server has been enhanced so that search results are now paged into the database instead of simply to memory. This makes the server much more scalable to supporting larger result sets, larger volumes of queries, and operation across multiple nodes in a cluster.</li>
</ul>



<a name="153822743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822743">(Apr 21 2016 at 14:10)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191319">@James Agnew</span> ! Quick question about "support for the current draft STU3 structure definitions" — is this instead of the DSTU2 resources? For example with the CLI, does a user choose between them? Or get separate API endpoints for DSTU2 vs FHIR 1.4?</p>



<a name="153822761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822761">(Apr 21 2016 at 17:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> This doesn't replace the DSTU2 resources. We basically ship 3 "structure" libraries with the core library (DSTU1, DSTU2, DSTU3) and applications can use any or all of them with the app. The matrix of supported versions of FHIR by various versions of HAPI is a bit painful to look at, but it's <a href="http://jamesagnew.github.io/hapi-fhir/download.html" target="_blank" title="http://jamesagnew.github.io/hapi-fhir/download.html">on this page</a></p>



<a name="153822762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822762">(Apr 21 2016 at 17:55)</a>:</h4>
<p>Also, sadly the library is already called "DSTU3" at this point. I feel like we are going to be a source of confusion re. the "DSTU" vs "STU" thing</p>



<a name="153822764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822764">(Apr 21 2016 at 19:50)</a>:</h4>
<p>we can rename the library. I haven't got around to considering whether we should or not</p>



<a name="153822765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822765">(Apr 21 2016 at 19:56)</a>:</h4>
<p>imo proably not worth it. it'll be a small source of confusion, but less confusion than renaming the library and codebase would be at this point.</p>



<a name="153822774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822774">(Apr 21 2016 at 20:16)</a>:</h4>
<p>Thanks -- the compatibility table helps, but I'm still not clear on which of these three structure libraries the CLI tool uses, for example (or is it all of them? Or is it configurable?) <a href="http://jamesagnew.github.io/hapi-fhir/doc_cli.html" target="_blank" title="http://jamesagnew.github.io/hapi-fhir/doc_cli.html">http://jamesagnew.github.io/hapi-fhir/doc_cli.html</a> suggests just DSTU2 in the CLI.</p>



<a name="153822775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822775">(Apr 21 2016 at 20:20)</a>:</h4>
<p>Oh yeah, I need to update the CLI documentation. When we added the STU3 structures, we added a command line parameter so you can pick either STU2 or 3 (but not 1).</p>
<p>That's an example of an app that embeds multiple structures libraries, as it happens.</p>



<a name="153822783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822783">(Apr 21 2016 at 21:01)</a>:</h4>
<p>@James, is there documentation on how to update the jpaserver-example base to DSTU3 (and future versions)?  We've talked about that before, including exposing multiple endpoints - but it would be good to have documentation to refer to if that's available (and the source code may be sufficient for that). </p>



<a name="153822817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822817">(Apr 22 2016 at 03:04)</a>:</h4>
<p>I should probably update the docs for that, yeah... There is an example config file in there for STU3, so if you know how to change the config file in web.xml you can do it, but new folks may not know how to do that.</p>



<a name="153822821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822821">(Apr 22 2016 at 05:10)</a>:</h4>
<p>I saw the config file for STU3.  And I think I know how to edit web.xml - presumably change the config file reference inside the context-param/param-value tags and then update the other references as appropriate for STU3?  I haven't tried it yet, though.</p>



<a name="153822829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822829">(Apr 22 2016 at 10:38)</a>:</h4>
<p>Yup, that'd be it exactly. It should be that simple to get the endpoint running STU3.</p>
<p>You might also need to modify <a href="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/FhirTesterConfig.java" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-jpaserver-example/src/main/java/ca/uhn/fhir/jpa/demo/FhirTesterConfig.java">FhirTesterConfig.java</a> to get the tester UI to point to the new endpoint</p>



<a name="153822991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822991">(Apr 25 2016 at 19:10)</a>:</h4>
<p>James - a question for you</p>



<a name="153822992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822992">(Apr 25 2016 at 19:11)</a>:</h4>
<p>I'm tightening up on the tests in the Reference implementation </p>



<a name="153822993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822993">(Apr 25 2016 at 19:12)</a>:</h4>
<p>one standing problem is that almost all the tests use some files in the build somewhere</p>



<a name="153822994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822994">(Apr 25 2016 at 19:12)</a>:</h4>
<p>how should we set up the directory that they need? </p>



<a name="153822995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153822995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153822995">(Apr 25 2016 at 19:12)</a>:</h4>
<p>I can hard code it, or use a environment variable, but both are quite unsatisfactory</p>



<a name="153823022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153823022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153823022">(Apr 26 2016 at 01:01)</a>:</h4>
<p>Is the idea that these tests live in the spec build but you want to get them into the HAPI one too so you need a way of making the path to these files a bit more abstract?</p>



<a name="153823027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153823027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153823027">(Apr 26 2016 at 01:32)</a>:</h4>
<p>well, it would be good if you could include the JUnit tests in the HAPI build too </p>



<a name="153823028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153823028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153823028">(Apr 26 2016 at 01:32)</a>:</h4>
<p>but right now, I just run them directly from in eclipse</p>



<a name="153823029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153823029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153823029">(Apr 26 2016 at 01:32)</a>:</h4>
<p>so where does the path to all the content come from? </p>



<a name="153823032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153823032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153823032">(Apr 26 2016 at 01:35)</a>:</h4>
<p>What type of content are we talking? I guess the main problem is that HAPI's build doesn't have access to the spec directories when it's running in travis. All of the profile structures (StructureDefinition, ValueSet, CodeSystem) are on the classpath, but other stuff isn't so I'd have to do something to make it available</p>



<a name="153823043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153823043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153823043">(Apr 26 2016 at 01:57)</a>:</h4>
<p>well, I use two parts during testing: <br>
build\tests<br>
build\publish</p>



<a name="153823044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153823044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153823044">(Apr 26 2016 at 01:58)</a>:</h4>
<p>so yes, if you wanted to include them, that content would have to be present, or fetched from somewhere. </p>



<a name="153823045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153823045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153823045">(Apr 26 2016 at 01:58)</a>:</h4>
<p>but even if you don't want to include them in HAPI, how do I do it in the build alone? </p>



<a name="153825387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825387">(May 07 2016 at 21:29)</a>:</h4>
<p>HAPI doesn't like %-encoded operations - eg touchstone invokes /CodeSystem/%24lookup<br>
This results in the message: Invalid request: The FHIR endpoint on this server does not know how to handle GET operation[CodeSystem/%24lookup] with parameters [[system, code]]</p>



<a name="153825388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825388">(May 07 2016 at 21:30)</a>:</h4>
<p>Ah interesting, thanks for the heads up, I'll have a look</p>



<a name="153825396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825396">(May 07 2016 at 21:42)</a>:</h4>
<p>I'm getting this error from the HAPI server through the client: ca.uhn.fhir.rest.server.exceptions.UnprocessableEntityException: HTTP 422 Unprocessable Entity: Resource requires an id, but none is present</p>



<a name="153825397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825397">(May 07 2016 at 21:42)</a>:</h4>
<p>Even though when I run that same POST through Postman it works fine.</p>



<a name="153825398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825398">(May 07 2016 at 21:42)</a>:</h4>
<p>Any thoughts?</p>



<a name="153825408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825408">(May 07 2016 at 22:52)</a>:</h4>
<p>Fascinating.... What is the method chain you're calling with the client, and does the resource object actually have an ID? I'll try and reproduce..</p>



<a name="153825412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825412">(May 08 2016 at 00:49)</a>:</h4>
<p>ca.uhn.fhir.rest.server.exceptions.UnprocessableEntityException: HTTP 422 Unprocessable Entity: Resource requires an id, but none is present</p>
<div class="codehilite"><pre>at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:422)
at ca.uhn.fhir.rest.server.exceptions.BaseServerResponseException.newInstance(BaseServerResponseException.java:272)
at ca.uhn.fhir.rest.client.BaseClient.invokeClient(BaseClient.java:290)
at ca.uhn.fhir.rest.client.GenericClient$BaseClientExecutable.invoke(GenericClient.java:680)
at ca.uhn.fhir.rest.client.GenericClient$CreateInternal.execute(GenericClient.java:794)
at ca.uhn.fhir.rest.client.GenericClient$CreateInternal.execute(GenericClient.java:738)
at org.cqframework.cql.data.fhir.FhirMeasureEvaluator.evaluate(FhirMeasureEvaluator.java:51)
at org.cqframework.cql.data.fhir.TestFhirMeasureEvaluator.TestCBP(TestFhirMeasureEvaluator.java:48)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:497)
at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:84)
at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
at org.testng.TestRunner.privateRun(TestRunner.java:767)
at org.testng.TestRunner.run(TestRunner.java:617)
at org.testng.SuiteRunner.runTest(SuiteRunner.java:348)
at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:343)
at org.testng.SuiteRunner.privateRun(SuiteRunner.java:305)
at org.testng.SuiteRunner.run(SuiteRunner.java:254)
</pre></div>



<a name="153825413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825413">(May 08 2016 at 00:50)</a>:</h4>
<p>And no, the resource doesn't have an Id, but isn't that the requirement on a post? Interestingly, the same code worked when I didn't have any entities in the bundle. It started failing when I added resources to the bundle.</p>



<a name="153825448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825448">(May 08 2016 at 13:02)</a>:</h4>
<p>Yeah, that sounds right, I'm sure this is some quirk on the server that needs fixing. :)</p>
<p>Hmm.. Can you share the client method chain you're using to call it, just so I can have a go at reproducing in a unit test? e.g. <code>client.create().resource(foo).execute();</code>And details about what you're passing in would be useful too (e.g. bundle wth 2 patients, both have no id)</p>



<a name="153825486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825486">(May 08 2016 at 13:30)</a>:</h4>
<p>Here's the method chain:</p>



<a name="153825487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825487">(May 08 2016 at 13:30)</a>:</h4>
<p>fhirClient.create().resource(evaluatedResources).execute();</p>



<a name="153825488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825488">(May 08 2016 at 13:32)</a>:</h4>
<p>And here's the bundle in that evaluatedResources variable:</p>



<a name="153825489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825489">(May 08 2016 at 13:32)</a>:</h4>
<p>{<br>
   "resourceType":"Bundle",<br>
   "type":"collection",<br>
   "entry":[<br>
      {<br>
         "fullUrl":"<a href="http://fhirtest.uhn.ca/baseDstu3/Observation/res0016/_history/1" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation/res0016/_history/1">http://fhirtest.uhn.ca/baseDstu3/Observation/res0016/_history/1</a>",<br>
         "resource":{<br>
            "resourceType":"Observation",<br>
            "id":"res0016",<br>
            "meta":{<br>
               "versionId":"1",<br>
               "lastUpdated":"2016-05-05T03:16:52.296-04:00"<br>
            },<br>
            "status":"final",<br>
            "code":{<br>
               "coding":[<br>
                  {<br>
                     "system":"<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
                     "code":"8480-6",<br>
                     "display":"Systolic blood pressure"<br>
                  }<br>
               ]<br>
            },<br>
            "subject":{<br>
               "reference":"Patient/pat004",<br>
               "display":"Fred"<br>
            },<br>
            "effectiveDateTime":"2015-06-11",<br>
            "valueQuantity":{<br>
               "value":133,<br>
               "unit":"3092008",<br>
               "system":"<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
               "code":"mm[Hg]"<br>
            }<br>
         }<br>
      },<br>
      {<br>
         "fullUrl":"<a href="http://fhirtest.uhn.ca/baseDstu3/Observation/res0018/_history/1" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation/res0018/_history/1">http://fhirtest.uhn.ca/baseDstu3/Observation/res0018/_history/1</a>",<br>
         "resource":{<br>
            "resourceType":"Observation",<br>
            "id":"res0018",<br>
            "meta":{<br>
               "versionId":"1",<br>
               "lastUpdated":"2016-05-05T03:16:52.922-04:00"<br>
            },<br>
            "status":"final",<br>
            "code":{<br>
               "coding":[<br>
                  {<br>
                     "system":"<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
                     "code":"8480-6",<br>
                     "display":"Systolic blood pressure"<br>
                  }<br>
               ]<br>
            },<br>
            "subject":{<br>
               "reference":"Patient/pat004",<br>
               "display":"Fred"<br>
            },<br>
            "effectiveDateTime":"2015-11-11",<br>
            "valueQuantity":{<br>
               "value":141,<br>
               "unit":"3092008",<br>
               "system":"<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
               "code":"mm[Hg]"<br>
            }<br>
         }<br>
      },<br>
      {<br>
         "fullUrl":"<a href="http://fhirtest.uhn.ca/baseDstu3/Observation/res0001/_history/2" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation/res0001/_history/2">http://fhirtest.uhn.ca/baseDstu3/Observation/res0001/_history/2</a>",<br>
         "resource":{<br>
            "resourceType":"Observation",<br>
            "id":"res0001",<br>
            "meta":{<br>
               "versionId":"2",<br>
               "lastUpdated":"2016-05-05T03:16:47.800-04:00"<br>
            },<br>
            "status":"final",<br>
            "code":{<br>
               "coding":[<br>
                  {<br>
                     "system":"<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
                     "code":"8480-6",<br>
                     "display":"Systolic blood pressure"<br>
                  }<br>
               ]<br>
            },<br>
            "subject":{<br>
               "reference":"Patient/pat001",<br>
               "display":"Jim"<br>
            },<br>
            "effectiveDateTime":"2015-09-10",<br>
            "valueQuantity":{<br>
               "value":155,<br>
               "unit":"mmHg",<br>
               "system":"<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
               "code":"mm[Hg]"<br>
            }<br>
         }<br>
      },<br>
      {<br>
         "fullUrl":"<a href="http://fhirtest.uhn.ca/baseDstu3/Observation/res0021/_history/1" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation/res0021/_history/1">http://fhirtest.uhn.ca/baseDstu3/Observation/res0021/_history/1</a>",<br>
         "resource":{<br>
            "resourceType":"Observation",<br>
            "id":"res0021",<br>
            "meta":{<br>
               "versionId":"1",<br>
               "lastUpdated":"2016-05-05T03:16:53.928-04:00"<br>
            },<br>
            "status":"final",<br>
            "code":{<br>
               "coding":[<br>
                  {<br>
                     "system":"<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
                     "code":"8480-6",<br>
                     "display":"Systolic blood pressure"<br>
                  }<br>
               ]<br>
            },<br>
            "subject":{<br>
               "reference":"Patient/pat005",<br>
               "display":"Ada"<br>
            },<br>
            "effectiveDateTime":"2016-02-11",<br>
            "valueQuantity":{<br>
               "value":148,<br>
               "unit":"3092008",<br>
               "system":"<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
               "code":"mm[Hg]"<br>
            }<br>
         }<br>
      },<br>
      {<br>
         "fullUrl":"<a href="http://fhirtest.uhn.ca/baseDstu3/Observation/res0003/_history/1" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation/res0003/_history/1">http://fhirtest.uhn.ca/baseDstu3/Observation/res0003/_history/1</a>",<br>
         "resource":{<br>
            "resourceType":"Observation",<br>
            "id":"res0003",<br>
            "meta":{<br>
               "versionId":"1",<br>
               "lastUpdated":"2016-05-05T03:16:48.457-04:00"<br>
            },<br>
            "status":"final",<br>
            "code":{<br>
               "coding":[<br>
                  {<br>
                     "system":"<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
                     "code":"8480-6",<br>
                     "display":"Systolic blood pressure"<br>
                  }<br>
               ]<br>
            },<br>
            "subject":{<br>
               "reference":"Patient/pat001",<br>
               "display":"Jim"<br>
            },<br>
            "effectiveDateTime":"2016-01-10",<br>
            "valueQuantity":{<br>
               "value":138,<br>
               "unit":"3092008",<br>
               "system":"<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
               "code":"mm[Hg]"<br>
            }<br>
         }<br>
      },<br>
      {<br>
         "fullUrl":"<a href="http://fhirtest.uhn.ca/baseDstu3/Observation/res0023/_history/1" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation/res0023/_history/1">http://fhirtest.uhn.ca/baseDstu3/Observation/res0023/_history/1</a>",<br>
         "resource":{<br>
            "resourceType":"Observation",<br>
            "id":"res0023",<br>
            "meta":{<br>
               "versionId":"1",<br>
               "lastUpdated":"2016-05-05T03:16:55.084-04:00"<br>
            },<br>
            "status":"final",<br>
            "code":{<br>
               "coding":[<br>
                  {<br>
                     "system":"<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
                     "code":"8480-6",<br>
                     "display":"Systolic blood pressure"<br>
                  }<br>
               ]<br>
            },<br>
            "subject":{<br>
               "reference":"Patient/pat005",<br>
               "display":"Ada"<br>
            },<br>
            "effectiveDateTime":"2015-12-11",<br>
            "valueQuantity":{<br>
               "value":140,<br>
               "unit":"3092008",<br>
               "system":"<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
               "code":"mm[Hg]"<br>
            }<br>
         }<br>
      },<br>
      {<br>
         "fullUrl":"<a href="http://fhirtest.uhn.ca/baseDstu3/Observation/res0006/_history/1" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation/res0006/_history/1">http://fhirtest.uhn.ca/baseDstu3/Observation/res0006/_history/1</a>",<br>
         "resource":{<br>
            "resourceType":"Observation",<br>
            "id":"res0006",<br>
            "meta":{<br>
               "versionId":"1",<br>
               "lastUpdated":"2016-05-05T03:16:49.312-04:00"<br>
            },<br>
            "status":"final",<br>
            "code":{<br>
               "coding":[<br>
                  {<br>
                     "system":"<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
                     "code":"8480-6",<br>
                     "display":"Systolic blood pressure"<br>
                  }<br>
               ]<br>
            },<br>
            "subject":{<br>
               "reference":"Patient/pat002",<br>
               "display":"Chewie"<br>
            },<br>
            "effectiveDateTime":"2016-04-10",<br>
            "valueQuantity":{<br>
               "value":141,<br>
               "unit":"3092008",<br>
               "system":"<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
               "code":"mm[Hg]"<br>
            }<br>
         }<br>
      },<br>
      {<br>
         "fullUrl":"<a href="http://fhirtest.uhn.ca/baseDstu3/Observation/res0008/_history/1" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation/res0008/_history/1">http://fhirtest.uhn.ca/baseDstu3/Observation/res0008/_history/1</a>",<br>
         "resource":{<br>
            "resourceType":"Observation",<br>
            "id":"res0008",<br>
            "meta":{<br>
               "versionId":"1",<br>
               "lastUpdated":"2016-05-05T03:16:49.886-04:00"<br>
            },<br>
            "status":"final",<br>
            "code":{<br>
               "coding":[<br>
                  {<br>
                     "system":"<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
                     "code":"8480-6",<br>
                     "display":"Systolic blood pressure"<br>
                  }<br>
               ]<br>
            },<br>
            "subject":{<br>
               "reference":"Patient/pat002",<br>
               "display":"Chewie"<br>
            },<br>
            "effectiveDateTime":"2015-08-10",<br>
            "valueQuantity":{<br>
               "value":140,<br>
               "unit":"3092008",<br>
               "system":"<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
               "code":"mm[Hg]"<br>
            }<br>
         }<br>
      },<br>
      {<br>
         "fullUrl":"<a href="http://fhirtest.uhn.ca/baseDstu3/Observation/res0011/_history/1" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation/res0011/_history/1">http://fhirtest.uhn.ca/baseDstu3/Observation/res0011/_history/1</a>",<br>
         "resource":{<br>
            "resourceType":"Observation",<br>
            "id":"res0011",<br>
            "meta":{<br>
               "versionId":"1",<br>
               "lastUpdated":"2016-05-05T03:16:50.746-04:00"<br>
            },<br>
            "status":"final",<br>
            "code":{<br>
               "coding":[<br>
                  {<br>
                     "system":"<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
                     "code":"8480-6",<br>
                     "display":"Systolic blood pressure"<br>
                  }<br>
               ]<br>
            },<br>
            "subject":{<br>
               "reference":"Patient/pat003",<br>
               "display":"Esther"<br>
            },<br>
            "effectiveDateTime":"2015-12-10",<br>
            "valueQuantity":{<br>
               "value":144,<br>
               "unit":"3092008",<br>
               "system":"<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
               "code":"mm[Hg]"<br>
            }<br>
         }<br>
      },<br>
      {<br>
         "fullUrl":"<a href="http://fhirtest.uhn.ca/baseDstu3/Observation/res0013/_history/1" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation/res0013/_history/1">http://fhirtest.uhn.ca/baseDstu3/Observation/res0013/_history/1</a>",<br>
         "resource":{<br>
            "resourceType":"Observation",<br>
            "id":"res0013",<br>
            "meta":{<br>
               "versionId":"1",<br>
               "lastUpdated":"2016-05-05T03:16:51.339-04:00"<br>
            },<br>
            "status":"final",<br>
            "code":{<br>
               "coding":[<br>
                  {<br>
                     "system":"<a href="http://loinc.org" target="_blank" title="http://loinc.org">http://loinc.org</a>",<br>
                     "code":"8480-6",<br>
                     "display":"Systolic blood pressure"<br>
                  }<br>
               ]<br>
            },<br>
            "subject":{<br>
               "reference":"Patient/pat003",<br>
               "display":"Esther"<br>
            },<br>
            "effectiveDateTime":"2016-02-10",<br>
            "valueQuantity":{<br>
               "value":170,<br>
               "unit":"3092008",<br>
               "system":"<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
               "code":"mm[Hg]"<br>
            }<br>
         }<br>
      },<br>
      {<br>
         "fullUrl":"<a href="http://fhirtest.uhn.ca/baseDstu3/Observation/res0017/_history/1" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation/res0017/_history/1">http://fhirtest.uhn.ca/baseDstu3/Observation/res0017/_history/1</a>",<br>
         "resource":{<br>
            "res</p>



<a name="153825615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825615">(May 08 2016 at 15:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> Zulip helpfully cut off your resource. Could you email me the text at <a href="mailto:jamesagnew@gmail.com" title="mailto:jamesagnew@gmail.com">jamesagnew@gmail.com</a> ?</p>



<a name="153825639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825639">(May 08 2016 at 15:50)</a>:</h4>
<p>What about a Postman collection?</p>



<a name="153825640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%201.5%20Released/near/153825640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.201.2E5.20Released.html#153825640">(May 08 2016 at 15:51)</a>:</h4>
<p><a href="https://www.getpostman.com/collections/dc41e10601d01b7b6354" target="_blank" title="https://www.getpostman.com/collections/dc41e10601d01b7b6354">https://www.getpostman.com/collections/dc41e10601d01b7b6354</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
