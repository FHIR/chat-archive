---
layout: page
title: "FHIR Chat  · Getting MetaUtil.setSource() not supported error in DSTU2 · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Getting.20MetaUtil.2EsetSource().20not.20supported.20error.20in.20DSTU2.html">Getting MetaUtil.setSource() not supported error in DSTU2</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="204212626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Getting%20MetaUtil.setSource%28%29%20not%20supported%20error%20in%20DSTU2/near/204212626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Getting.20MetaUtil.2EsetSource().20not.20supported.20error.20in.20DSTU2.html#204212626">(Jul 17 2020 at 14:31)</a>:</h4>
<p>We are getting the following error when trying to retrieve objects from our HAPI DSTU2 vanilla server:<br>
2020-07-17 12:39:26.205 [http-nio-8080-exec-7] ERROR ca.uhn.fhir.util.MetaUtil [MetaUtil.java:99] MetaUtil.setSource() not supported on FHIR Version DSTU2<br>
2020-07-17 12:39:26.256 [http-nio-8080-exec-7] INFO  fhirtest.access [LoggingInterceptor.java:175] Path[/fhir] Source[] Operation[read  Observation/118202] UA[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36 Edg/83.0.478.64] Params[] ResponseEncoding[XML]</p>
<p>Our Observation instances that we are creating don't have meta.source:</p>
<p>{<br>
    "resourceType": "Observation",<br>
        "meta": {<br>
        "tag": [<br>
            {<br>
                "system": "<a href="http://www.medstarhealth.org">http://www.medstarhealth.org</a>",<br>
                "code": "deidentified_transfusion",<br>
                "display": "deidentified_transfusion"<br>
            }<br>
        ]<br>
    },<br>
    "category": {<br>
        "coding": [<br>
            {<br>
                "system": "<a href="http://terminology.hl7.org/CodeSystem/observation-category">http://terminology.hl7.org/CodeSystem/observation-category</a>",<br>
                "code": "vital-signs",<br>
                "display": "Vital Signs"<br>
            }<br>
        ],<br>
        "text": "Vital Signs"<br>
    },<br>
    "code": {<br>
        "coding": [<br>
            {<br>
                "system": "<a href="http://loinc.org">http://loinc.org</a>",<br>
                "code": "59408-5",<br>
                "display": "Oxygen saturation in Arterial blood by Pulse oximetry"<br>
            }<br>
        ],<br>
        "text": "oxygen_saturation"<br>
    },<br>
    "subject": {<br>
        "reference": "Patient/Pat11630204"<br>
    },<br>
    "encounter": {<br>
        "reference": "Encounter/Enc156258930"<br>
    },<br>
    "effectiveDateTime": "2019-01-03T07:10:00",<br>
    "issued": "2019-01-03T07:10:00",<br>
    "valueQuantity" : {<br>
    "value" : 99.0,<br>
    "unit" : "%O2",<br>
    "system" : "<a href="http://unitsofmeasure.org">http://unitsofmeasure.org</a>",<br>
    "code" : "%"<br>
  }<br>
}</p>
<p>So this seems to be a bug in HAPI?  I did a code search and the only thing I could find is line 964 in ca.uhn.fhir.jpa.dao.BaseHapiFhirDao.java makes that call in the public &lt;R extends IBaseResource&gt; R toResource(Class&lt;R&gt; theResourceType, IBaseResourceEntity theEntity, Collection&lt;ResourceTag&gt; theTagList, boolean theForHistoryOperation) method.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
