---
layout: page
title: "FHIR Chat  · Version 3.0 to 5.0 conversion issue · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html">Version 3.0 to 5.0 conversion issue</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="187899095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Version%203.0%20to%205.0%20conversion%20issue/near/187899095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html#187899095">(Feb 11 2020 at 10:20)</a>:</h4>
<p>I ran the source in Eclipse just now and got this new error that does not appear to be mine, but from the converting the core Appointment resource. Even after removing any hint of Appointment in my set this error stayed on. </p>
<p>Know issue?</p>
<div class="codehilite"><pre><span></span>Error loading StructureDefinition-Appointment.json: org.hl7.fhir.r5.model.UriType cannot be cast to org.hl7.fhir.r5.model.CanonicalType
Exception in thread <span class="s2">&quot;main&quot;</span> org.hl7.fhir.exceptions.FHIRException: Error loading StructureDefinition-Appointment.json: org.hl7.fhir.r5.model.UriType cannot be cast to org.hl7.fhir.r5.model.CanonicalType
    at org.hl7.fhir.r5.context.SimpleWorkerContext.fromDefinitions<span class="o">(</span>SimpleWorkerContext.java:223<span class="o">)</span>
    at org.hl7.fhir.r5.validation.ValidationEngine.loadDefinitions<span class="o">(</span>ValidationEngine.java:341<span class="o">)</span>
    at org.hl7.fhir.r5.validation.ValidationEngine.loadInitialDefinitions<span class="o">(</span>ValidationEngine.java:288<span class="o">)</span>
    at org.hl7.fhir.r5.validation.ValidationEngine.&lt;init&gt;<span class="o">(</span>ValidationEngine.java:320<span class="o">)</span>
    at org.hl7.fhir.r5.validation.Validator.main<span class="o">(</span>Validator.java:570<span class="o">)</span>
Caused by: java.lang.ClassCastException: org.hl7.fhir.r5.model.UriType cannot be cast to org.hl7.fhir.r5.model.CanonicalType
    at org.hl7.fhir.convertors.conv30_50.StructureDefinition30_50.convertStructureDefinition<span class="o">(</span>StructureDefinition30_50.java:109<span class="o">)</span>
    at org.hl7.fhir.convertors.VersionConvertor_30_50.convertResource<span class="o">(</span>VersionConvertor_30_50.java:4653<span class="o">)</span>
    at org.hl7.fhir.convertors.R3ToR5Loader.loadBundle<span class="o">(</span>R3ToR5Loader.java:65<span class="o">)</span>
    at org.hl7.fhir.r5.context.SimpleWorkerContext.loadFromFileJson<span class="o">(</span>SimpleWorkerContext.java:295<span class="o">)</span>
    at org.hl7.fhir.r5.context.SimpleWorkerContext.loadDefinitionItem<span class="o">(</span>SimpleWorkerContext.java:233<span class="o">)</span>
    at org.hl7.fhir.r5.context.SimpleWorkerContext.fromDefinitions<span class="o">(</span>SimpleWorkerContext.java:220<span class="o">)</span>
    ... <span class="m">4</span> more
</pre></div>



<a name="187899109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Version%203.0%20to%205.0%20conversion%20issue/near/187899109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html#187899109">(Feb 11 2020 at 10:20)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span> making sure you know about this (this is work in progress)</p>



<a name="187979236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Version%203.0%20to%205.0%20conversion%20issue/near/187979236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html#187979236">(Feb 12 2020 at 03:42)</a>:</h4>
<p>I see one version of the class cast problem is fixed. Thanks! I got this one in return though:</p>
<div class="codehilite"><pre><span></span>* load file: eAfspraak-OperationDefinition-appointment-cancel.xml - ignored due to error: org.hl7.fhir.r5.model.StringType cannot be cast to org.hl7.fhir.r5.model.MarkdownType
* load file: eAfspraak-OperationDefinition-slot-find.xml - ignored due to error: org.hl7.fhir.r5.model.StringType cannot be cast to org.hl7.fhir.r5.model.MarkdownType
* load file: eAfspraak-OperationDefinition-appointment-book.xml - ignored due to error: org.hl7.fhir.r5.model.StringType cannot be cast to org.hl7.fhir.r5.model.MarkdownType
* load file: OperationDefinition-medication-overview.xml - ignored due to error: org.hl7.fhir.r5.model.StringType cannot be cast to org.hl7.fhir.r5.model.MarkdownType
</pre></div>



<a name="187979365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Version%203.0%20to%205.0%20conversion%20issue/near/187979365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html#187979365">(Feb 12 2020 at 03:45)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span> I'm getting a few of these too. I'll hunt them down at some stage. In the meantime, <span class="user-mention" data-user-id="191375">@Alexander Henket</span>, can you provide source?</p>



<a name="187979500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Version%203.0%20to%205.0%20conversion%20issue/near/187979500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html#187979500">(Feb 12 2020 at 03:48)</a>:</h4>
<p>next release will stack dump in this circumstance so we get good information</p>



<a name="187983652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Version%203.0%20to%205.0%20conversion%20issue/near/187983652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html#187983652">(Feb 12 2020 at 05:51)</a>:</h4>
<p><a href="/user_uploads/10155/bNKI4qZuNC5Ta4u1SUfndfJg/OperationDefinition-medication-overview.xml" target="_blank" title="OperationDefinition-medication-overview.xml">OperationDefinition-medication-overview.xml</a></p>



<a name="187983659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Version%203.0%20to%205.0%20conversion%20issue/near/187983659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html#187983659">(Feb 12 2020 at 05:51)</a>:</h4>
<p><a href="/user_uploads/10155/vOSFfqLIA3OBmLQVbytGBmn8/eAfspraak-OperationDefinition-appointment-book.xml" target="_blank" title="eAfspraak-OperationDefinition-appointment-book.xml">eAfspraak-OperationDefinition-appointment-book.xml</a> <a href="/user_uploads/10155/8u-Gp2GMGV-Nu9YW_9jgInYM/eAfspraak-OperationDefinition-appointment-cancel.xml" target="_blank" title="eAfspraak-OperationDefinition-appointment-cancel.xml">eAfspraak-OperationDefinition-appointment-cancel.xml</a> <a href="/user_uploads/10155/25bTPxYAHmpofV0rvodu8qvh/eAfspraak-OperationDefinition-slot-find.xml" target="_blank" title="eAfspraak-OperationDefinition-slot-find.xml">eAfspraak-OperationDefinition-slot-find.xml</a></p>



<a name="187983793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Version%203.0%20to%205.0%20conversion%20issue/near/187983793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html#187983793">(Feb 12 2020 at 05:54)</a>:</h4>
<p>What I liked about these messages was that they are very clear as to what file is the problem. What's not so clear is the path it is on at that point. Maybe that is worth including too</p>



<a name="187984237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Version%203.0%20to%205.0%20conversion%20issue/near/187984237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html#187984237">(Feb 12 2020 at 06:06)</a>:</h4>
<p>that's what my change does</p>



<a name="188013860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Version%203.0%20to%205.0%20conversion%20issue/near/188013860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html#188013860">(Feb 12 2020 at 14:25)</a>:</h4>
<p>I will look into these today. With the sheer scope of the changes to the codebase I made in refactoring, I think I missed some conversion casting.</p>



<a name="188202810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Version%203.0%20to%205.0%20conversion%20issue/near/188202810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Version.203.2E0.20to.205.2E0.20conversion.20issue.html#188202810">(Feb 14 2020 at 12:48)</a>:</h4>
<p>Thanks. All seems well now in the latest build</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
