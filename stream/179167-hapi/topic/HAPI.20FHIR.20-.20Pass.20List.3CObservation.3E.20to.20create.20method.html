---
layout: page
title: "FHIR Chat  · HAPI FHIR - Pass List&lt;Observation&gt; to create method · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html">HAPI FHIR - Pass List&lt;Observation&gt; to create method</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="157280670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157280670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Valeriy Shtanko <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157280670">(Jan 31 2019 at 15:42)</a>:</h4>
<p>Hi!<br>
I am new with HAPI FHIR and asking for help with my task.</p>
<p>I want to pass a list of Observation to the method in my Observation resource provider.<br>
When I try to do</p>
<p>@Create<br>
public MethodOutcome createObservationResult(@ResourceParam List&lt;Observation&gt; results) {<br>
...<br>
}</p>
<p>I face a multiple issues such as incorrect resource type, wrong json.<br>
Could you advise me a correct approach for that task?</p>



<a name="157337766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157337766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lars Rückert <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157337766">(Feb 01 2019 at 08:30)</a>:</h4>
<p>Hi Valeriy.</p>
<p>I think for the <code>@Create</code> method of the Observation provider he expects the <code>@ResourceParam</code> to be a plain Observation, not a list of observations. Not sure if that can be changed, but what you could do is either use a <code>transaction</code> bundle to post multiple observations at once, or you implement a custom operation on your provider, which can then probably can take a list of observations.</p>
<p>Hope this helps somewhat.<br>
Best regards,<br>
Lars</p>



<a name="157344734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157344734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Valeriy Shtanko <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157344734">(Feb 01 2019 at 10:52)</a>:</h4>
<p>Hi Lars,<br>
Thank you for your answer.</p>
<p>I have googled for information about HAPI custom operation, but didn't find useful information(only about standard REST operations).<br>
May be you can point me on place in HAPI documentation or another place about custom operation in HAPI?<br>
Thanks.</p>



<a name="157346504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157346504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lars Rückert <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157346504">(Feb 01 2019 at 11:28)</a>:</h4>
<p>I think custom operation is a wrong term. I think you can find the basic information in the RestfulOperation Docu:<br>
<a href="http://hapifhir.io/doc_rest_operations.html#_toc_extended_operations" target="_blank" title="http://hapifhir.io/doc_rest_operations.html#_toc_extended_operations">http://hapifhir.io/doc_rest_operations.html#_toc_extended_operations</a></p>



<a name="157349106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157349106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157349106">(Feb 01 2019 at 12:24)</a>:</h4>
<p>the best way to learn how to implement custom operations in hapi is to look at existing operations. I implemented $document recently and had a look on Patient$everything and other implemented operations to get a feeling for it.</p>



<a name="157350388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157350388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Valeriy Shtanko <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157350388">(Feb 01 2019 at 12:47)</a>:</h4>
<p>Thank you for the link, it helps a lot.</p>
<p>But as I can see in documentation for extended operations "FHIR allows operation parameters to be of a Search parameter type (e.g. token) instead of a FHIR datatype (e.g. Coding)."</p>
<p>Looks like I am not able to pass List&lt;Observation&gt; to extended operation<br>
:-(</p>



<a name="157350558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157350558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lars Rückert <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157350558">(Feb 01 2019 at 12:50)</a>:</h4>
<p>You can give a resource though, so you could just send a Bundle of Observations. Then your  operation can work through the bundle entries, just like it would work through a list.</p>



<a name="157352194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157352194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Valeriy Shtanko <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157352194">(Feb 01 2019 at 13:21)</a>:</h4>
<p>Is this correct bundle to send?</p>
<p>{<br>
    "resourceType": "Bundle",<br>
    "id": "cf288d1c-6828-4a63-a3c1-3d503a1e7759",<br>
    "meta": {<br>
        "lastUpdated": "2019-01-31T14:53:33.392+02:00"<br>
    },<br>
    "type": "message",<br>
    "total": 3,<br>
    "link": [<br>
        {<br>
            "relation": "self",<br>
            "url": "<a href="http://localhost:8089/fhir/Observation" target="_blank" title="http://localhost:8089/fhir/Observation">http://localhost:8089/fhir/Observation</a>"<br>
        }<br>
    ],<br>
    "entry": [<br>
        {<br>
            "fullUrl": "<a href="http://localhost:8089/fhir/Observation/333" target="_blank" title="http://localhost:8089/fhir/Observation/333">http://localhost:8089/fhir/Observation/333</a>",<br>
            "resource": {<br>
                "resourceType": "Observation",<br>
                "id": "333",<br>
                "basedOn": [<br>
                    {<br>
                        "reference": "referral-id"<br>
                    }<br>
                ],<br>
                "performer": [<br>
                    {<br>
                        "reference": "referral-id"<br>
                    }<br>
                ],<br>
                "component": [<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "name-of-analysis"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "aaa"<br>
                    },<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "result-of-analysis"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "bbb"<br>
                    },<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "unit-of-measurement"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "ccc"<br>
                    },<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "reference-interval"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "ddd"<br>
                    }<br>
                ]<br>
            }<br>
        },<br>
        {<br>
            "fullUrl": "<a href="http://localhost:8089/fhir/Observation/333" target="_blank" title="http://localhost:8089/fhir/Observation/333">http://localhost:8089/fhir/Observation/333</a>",<br>
            "resource": {<br>
                "resourceType": "Observation",<br>
                "id": "333",<br>
                "basedOn": [<br>
                    {<br>
                        "reference": "referral-id"<br>
                    }<br>
                ],<br>
                "performer": [<br>
                    {<br>
                        "reference": "referral-id"<br>
                    }<br>
                ],<br>
                "component": [<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "name-of-analysis"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "aaa"<br>
                    },<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "result-of-analysis"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "bbb"<br>
                    },<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "unit-of-measurement"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "ccc"<br>
                    },<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "reference-interval"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "ddd"<br>
                    }<br>
                ]<br>
            }<br>
        },<br>
        {<br>
            "fullUrl": "<a href="http://localhost:8089/fhir/Observation/333" target="_blank" title="http://localhost:8089/fhir/Observation/333">http://localhost:8089/fhir/Observation/333</a>",<br>
            "resource": {<br>
                "resourceType": "Observation",<br>
                "id": "333",<br>
                "basedOn": [<br>
                    {<br>
                        "reference": "referral-id"<br>
                    }<br>
                ],<br>
                "performer": [<br>
                    {<br>
                        "reference": "referral-id"<br>
                    }<br>
                ],<br>
                "component": [<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "name-of-analysis"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "aaa"<br>
                    },<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "result-of-analysis"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "bbb"<br>
                    },<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "unit-of-measurement"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "ccc"<br>
                    },<br>
                    {<br>
                        "code": {<br>
                            "coding": [<br>
                                {<br>
                                    "code": "reference-interval"<br>
                                }<br>
                            ]<br>
                        },<br>
                        "valueString": "ddd"<br>
                    }<br>
                ]<br>
            }<br>
        }<br>
    ]<br>
}</p>



<a name="157352485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157352485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157352485">(Feb 01 2019 at 13:27)</a>:</h4>
<p>Your reference to referral-id is not valid, should be Referralrequest/referral-id or an absolute URL. You can validate your Bundle yourself against public FHIR servers using the $validate operation, there are more errors in this bundle.</p>



<a name="157352604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157352604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157352604">(Feb 01 2019 at 13:29)</a>:</h4>
<p>You also chose Message as Bundle Type, which would need a MessageHeader as the First Resource of the bundle. I would go for batch if you want to send this to your custom Operation</p>



<a name="157353750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157353750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157353750">(Feb 01 2019 at 13:48)</a>:</h4>
<p>just read your question in the implementers stream, your custom operation has to be on the Bundle Endpoint, not on Observation.</p>



<a name="157353752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157353752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Valeriy Shtanko <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157353752">(Feb 01 2019 at 13:48)</a>:</h4>
<p>Thank you a lot!!!<br>
I am fixing my bundle json.</p>
<p>I implement the follows operation method inside Observation provider (&lt;base&gt;/Observation)</p>
<div class="codehilite"><pre><span></span>@Operation(name=&quot;$OP_SAVE_OBSERVATION_RESULTS&quot;)
public MethodOutcome saveObservationResult(
        @OperationParam(name=&quot;Observation.class&quot;) List&amp;lt;Observation&amp;gt; theObservation)
</pre></div>


<p>{<br>
        return new MethodOutcome();<br>
    }</p>
<p>When I send my bundle json inside method I have a list with one Observation which has all values null.</p>
<p>Is it because of incorrect json or I am doing something wrong?</p>



<a name="157366940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157366940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Valeriy Shtanko <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157366940">(Feb 01 2019 at 16:56)</a>:</h4>
<p>Very strange situation.<br>
I don't understand what happened, but now expected list of observations always comes as null.<br>
:-(</p>



<a name="157514277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20FHIR%20-%20Pass%20List%3CObservation%3E%20to%20create%20method/near/157514277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Valeriy Shtanko <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20FHIR.20-.20Pass.20List.3CObservation.3E.20to.20create.20method.html#157514277">(Feb 04 2019 at 10:48)</a>:</h4>
<p>Guys, I am lost. <br>
Is it possible at all to implement and use the follows method to pass list of Observations into Observation resource provider :</p>
<div class="codehilite"><pre><span></span>@Operation(name=&quot;$saveObservationResults&quot;)
public MethodOutcome saveObservationResults(
        @OperationParam(name=&quot;Observation.class&quot;) List&amp;lt;Observation&amp;gt; observations) { ... }
</pre></div>


<p>I send to that method bundle of Observations generated by FHIR sample server but whithout success.<br>
Whatever I send I always get null as input.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
