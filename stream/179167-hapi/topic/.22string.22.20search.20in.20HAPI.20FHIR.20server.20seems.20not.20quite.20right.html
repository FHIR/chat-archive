---
layout: page
title: "FHIR Chat  · &quot;string&quot; search in HAPI FHIR server seems not quite right · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.22string.22.20search.20in.20HAPI.20FHIR.20server.20seems.20not.20quite.20right.html">&quot;string&quot; search in HAPI FHIR server seems not quite right</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="176780719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%22string%22%20search%20in%20HAPI%20FHIR%20server%20seems%20not%20quite%20right/near/176780719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.22string.22.20search.20in.20HAPI.20FHIR.20server.20seems.20not.20quite.20right.html#176780719">(Sep 27 2019 at 19:55)</a>:</h4>
<p>At the moment, <a href="http://hapi.fhir.org" target="_blank" title="http://hapi.fhir.org">hapi.fhir.org</a> contains Questionnaires with the names:<br>
1) "Vital signs, weight, height, head circumference, oximetry, BMI, &amp; BSA panel"<br>
2) "Vital signs with method details panel"<br>
If I do search using the name parameter for the first one, I <a href="http://hapi.fhir.org/baseDstu3/Questionnaire?name=Vital%20signs%2C%20weight%2C%20height%2C%20head%20circumference%2C%20oximetry%2C%20BMI%2C%20%26%20BSA%20panel" target="_blank" title="http://hapi.fhir.org/baseDstu3/Questionnaire?name=Vital%20signs%2C%20weight%2C%20height%2C%20head%20circumference%2C%20oximetry%2C%20BMI%2C%20%26%20BSA%20panel">get back both panels</a>.</p>
<p>The <a href="https://www.hl7.org/fhir/questionnaire.html#search" target="_blank" title="https://www.hl7.org/fhir/questionnaire.html#search">spec</a> says that the "name" parameter is of type <a href="https://www.hl7.org/fhir/search.html#string" target="_blank" title="https://www.hl7.org/fhir/search.html#string">string</a>, which works as follows" By default, a field matches a string query if the value of the field equals or starts with the supplied parameter value".  So it should only return the first one, shouldn't it?</p>



<a name="176964167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%22string%22%20search%20in%20HAPI%20FHIR%20server%20seems%20not%20quite%20right/near/176964167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.22string.22.20search.20in.20HAPI.20FHIR.20server.20seems.20not.20quite.20right.html#176964167">(Sep 30 2019 at 19:16)</a>:</h4>
<p>Heh, this is fun. In FHIR's search API a comma is an OR separator, so you're actually getting back a list of any Questionnaires that have a name starting with "Vital signs", or "weight", or "height", etc...</p>
<p>You need to escape it like so:</p>
<p><a href="http://hapi.fhir.org/baseDstu3/Questionnaire?name=Vital%20signs\%2C%20weight\%2C%20height\%2C%20head%20circumference\%2C%20oximetry\%2C%20BMI\%2C%20%26%20BSA%20panel" target="_blank" title="http://hapi.fhir.org/baseDstu3/Questionnaire?name=Vital%20signs\%2C%20weight\%2C%20height\%2C%20head%20circumference\%2C%20oximetry\%2C%20BMI\%2C%20%26%20BSA%20panel">http://hapi.fhir.org/baseDstu3/Questionnaire?name=Vital%20signs\%2C%20weight\%2C%20height\%2C%20head%20circumference\%2C%20oximetry\%2C%20BMI\%2C%20%26%20BSA%20panel</a></p>



<a name="176964188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%22string%22%20search%20in%20HAPI%20FHIR%20server%20seems%20not%20quite%20right/near/176964188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.22string.22.20search.20in.20HAPI.20FHIR.20server.20seems.20not.20quite.20right.html#176964188">(Sep 30 2019 at 19:16)</a>:</h4>
<p><span class="user-mention" data-user-id="195344">@Paul Lynch</span></p>



<a name="176965990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%22string%22%20search%20in%20HAPI%20FHIR%20server%20seems%20not%20quite%20right/near/176965990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.22string.22.20search.20in.20HAPI.20FHIR.20server.20seems.20not.20quite.20right.html#176965990">(Sep 30 2019 at 19:36)</a>:</h4>
<p>Thanks!  That makes sense. I guess I will need to write a "fhir escape" function for search parameters. :-)</p>



<a name="176966208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%22string%22%20search%20in%20HAPI%20FHIR%20server%20seems%20not%20quite%20right/near/176966208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.22string.22.20search.20in.20HAPI.20FHIR.20server.20seems.20not.20quite.20right.html#176966208">(Sep 30 2019 at 19:39)</a>:</h4>
<p>If it helps, you'll want to escape <code>,|$\</code> by prefixing any of those with <code>\</code></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
