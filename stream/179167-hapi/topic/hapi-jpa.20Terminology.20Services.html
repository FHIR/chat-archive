---
layout: page
title: "FHIR Chat  · hapi-jpa Terminology Services · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html">hapi-jpa Terminology Services</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153834875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153834875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153834875">(Jun 24 2016 at 21:38)</a>:</h4>
<p>Hi All,</p>
<p>Just a heads-up that the upcoming release of HAPI adds a terminology server which supports a bunch of funky new stuff including ValueSet expansion with filtering and text search, and searches like <code>Observation?code:in=foo</code> and <code>Observation?code:below=foo</code>.</p>
<p>If anyone wants to test this, that would be greatly appreciated.  Our public server has been loaded with SNOMED CT (international edition) and LOINC.. hopefully more to come. Endpoint is here: <a href="http://fhirtest.uhn.ca/baseDstu3" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3">http://fhirtest.uhn.ca/baseDstu3</a></p>



<a name="153834876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153834876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153834876">(Jun 24 2016 at 22:05)</a>:</h4>
<p>That's fabulous! Do you include load scripts for SNOMED and LOINC? </p>



<a name="153834877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153834877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153834877">(Jun 24 2016 at 22:12)</a>:</h4>
<p>Yup. The CLI will have the ability to load either of those CS's from their respective distribution zips.</p>
<p>It's a bit of a painful process, the SCT import takes about an hour on my high-powered laptop but it's pretty zippy once it's loaded.</p>



<a name="153835069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153835069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Naminder Soorma <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153835069">(Jun 27 2016 at 12:00)</a>:</h4>
<p>Before I go testing, does it support the $expand option on multiple filters?</p>



<a name="153835091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153835091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153835091">(Jun 27 2016 at 14:50)</a>:</h4>
<p>Yup, It should support this. FYI David Hay gave it a whirl on Friday and promptly discovered that it wasn't properly expanding codes that have multiple parents. That's now fixed.</p>
<p>If you find anything else you think should work but doesn't, awesome.</p>



<a name="153835108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153835108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153835108">(Jun 27 2016 at 15:26)</a>:</h4>
<p>Incidentally, here's a sample David provided: <a href="http://fhirtest.uhn.ca/baseDstu3/ValueSet/condition-code/$expand?filter=ankylosing" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/ValueSet/condition-code/$expand?filter=ankylosing">http://fhirtest.uhn.ca/baseDstu3/ValueSet/condition-code/$expand?filter=ankylosing</a></p>



<a name="153835248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153835248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153835248">(Jun 27 2016 at 23:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span>  When I run David's sample, the output  parameter  is not a valid ValueSet resource.   There are missing elements between  the meta and expansion elements. </p>



<a name="153835456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153835456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153835456">(Jun 28 2016 at 13:53)</a>:</h4>
<p>Oops, that was missing. Fixed.</p>
<p>This brings me to a different question though.. Should/can the output ValueSet of the expansion contain the <code>ValueSet.compose</code> element that caused the expansion? The invariants allow this, the description is silent, and the examples don't have this.</p>



<a name="153835516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153835516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153835516">(Jun 28 2016 at 19:49)</a>:</h4>
<p>James - so you haven't noticed ExpansionProfile? See ExpansionProfile.includeDefinition</p>



<a name="153835518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153835518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153835518">(Jun 28 2016 at 19:50)</a>:</h4>
<p>whoa! no, i didn't know about that.... </p>
<p>FHIR terminology services are really elegantly designed, I like it.</p>



<a name="153835551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153835551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153835551">(Jun 28 2016 at 23:10)</a>:</h4>
<p>Mostly elegant, but not ExpansionProfile IMO - being full of binary flags leads to combinatorial explosion of instances &amp; not a good experience for client or server programmer</p>



<a name="153835864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-jpa%20Terminology%20Services/near/153835864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-jpa.20Terminology.20Services.html#153835864">(Jun 30 2016 at 12:19)</a>:</h4>
<p>That's excellent, James.  I'll start testing it - both on your public server and on mine.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
