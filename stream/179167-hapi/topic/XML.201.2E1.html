---
layout: page
title: "FHIR Chat  · XML 1.1 · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/XML.201.2E1.html">XML 1.1</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="190782073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/XML%201.1/near/190782073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/XML.201.2E1.html#190782073">(Mar 16 2020 at 21:25)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191319">@James Agnew</span> , I see you're doing a bunch of work on the validator code at the moment.  I've just run into an issue where the character  &#x1D;  turns up in a CodeSystem.  This is illegal in XML 1.0 but ok in XML 1.1.  Unfortunately, <code>FhirValidator.validateWithResult</code> (HAPI 4.2.0) uses XML 1.0 when it serialises to XML (<code>XmlParser.doEncodeResourceToWriter</code>) which then fails.</p>



<a name="190857048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/XML%201.1/near/190857048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/XML.201.2E1.html#190857048">(Mar 17 2020 at 14:43)</a>:</h4>
<p>Hmm.. <span class="user-mention" data-user-id="191343">@Michael Lawley</span> any idea how I could replicate this problem?</p>



<a name="190858189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/XML%201.1/near/190858189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/XML.201.2E1.html#190858189">(Mar 17 2020 at 14:50)</a>:</h4>
<p>If you parse the following and pass it to <code>FhirValidator.validateWithResult</code> with just the Schema validator enabled, then that should trigger it.</p>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="nt">&lt;Parameters</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;parameter&gt;</span>
    <span class="nt">&lt;name</span> <span class="na">value=</span><span class="s">&quot;bug&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;valueString</span> <span class="na">value=</span><span class="s">&quot;Example,&amp;#x1D; problem character.&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/parameter&gt;</span>
<span class="nt">&lt;/Parameters&gt;</span>
</pre></div>



<a name="190893016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/XML%201.1/near/190893016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/XML.201.2E1.html#190893016">(Mar 17 2020 at 18:39)</a>:</h4>
<p>it should be &#x001D;</p>



<a name="190906821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/XML%201.1/near/190906821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/XML.201.2E1.html#190906821">(Mar 17 2020 at 20:30)</a>:</h4>
<p>oh interesting.... do people still use the schema validator much? i assumed not.. i've been vaguely pondering whether to deprecate it in HAPI, given how much better the instance validator is</p>



<a name="190906843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/XML%201.1/near/190906843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/XML.201.2E1.html#190906843">(Mar 17 2020 at 20:30)</a>:</h4>
<p>(not that i disagree with fixing this.. just wondering)</p>



<a name="190908422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/XML%201.1/near/190908422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/XML.201.2E1.html#190908422">(Mar 17 2020 at 20:45)</a>:</h4>
<p>I'm not sure that the schema validator picks this up. the instance validator will from now on</p>



<a name="190983762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/XML%201.1/near/190983762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/XML.201.2E1.html#190983762">(Mar 18 2020 at 14:03)</a>:</h4>
<p>We have two paths for validation.  "Full" validation and "fast" validation.  I've been working on the, unmeasured but observed, notion that schema validation is much faster and "good enough" to ensure that egregious errors will be handled before we start attempting to handle $expand semantics etc.</p>
<p>It's been on my list to circle back and validate (rimshot) this assumption, but I've been delaying as I'm aware there are changes coming down the pipeline (and <strong>now</strong> I've just read your HAPI 5 post, so I'm super super excited)</p>



<a name="191033480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/XML%201.1/near/191033480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/XML.201.2E1.html#191033480">(Mar 18 2020 at 19:54)</a>:</h4>
<p>I'm interested in metrics. making the validator faster is of interest</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
