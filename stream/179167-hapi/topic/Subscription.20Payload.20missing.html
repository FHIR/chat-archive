---
layout: page
title: "FHIR Chat  · Subscription Payload missing · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20Payload.20missing.html">Subscription Payload missing</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="237031175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20Payload%20missing/near/237031175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20Payload.20missing.html#237031175">(May 02 2021 at 06:25)</a>:</h4>
<p>I am using HAPI 5.3 and  the subscription resource below never sends the payload, it only sends notification with resource ID </p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;Subscription&quot;,
  &quot;id&quot;: &quot;810395062&quot;,
  &quot;meta&quot;: {
    &quot;versionId&quot;: &quot;1&quot;,
    &quot;lastUpdated&quot;: &quot;2021-05-01T14:03:48.135+00:00&quot;,
    &quot;source&quot;: &quot;#oRbG9W73IDtbQi7G&quot;,
    &quot;tag&quot;: [ {
      &quot;system&quot;: &quot;http://hapifhir.io/fhir/StructureDefinition/subscription-matching-strategy&quot;,
      &quot;code&quot;: &quot;DATABASE&quot;,
      &quot;display&quot;: &quot;Database&quot;
    } ]
  },
  &quot;status&quot;: &quot;active&quot;,
  &quot;reason&quot;: &quot;CareTeam assignment to be handled directly by app&quot;,
  &quot;criteria&quot;: &quot;CareTeam?identifier:not=MCH@&quot;,
  &quot;channel&quot;: {
    &quot;type&quot;: &quot;rest-hook&quot;,
    &quot;endpoint&quot;: &quot;https://xxxxxx.loca.lt/&quot;,
    &quot;payload&quot;: &quot;application/fhir+json&quot;,
    &quot;header&quot;: [ &quot;Authorization: Bearer xxxxxxxxxx&quot; ]
  }
}
</code></pre></div>
<p>I have tried various combination and various settings in <code>application.yml</code> to absolutely no avail. I even tried the same Subscription on <a href="http://hapi.fhir.org/baseR4">hapi.fhir.org/baseR4</a> but even then I received only notification. </p>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191319">@James Agnew</span>   Any idea on what can I do to make HAPI send payload along on Subscription notification.</p>



<a name="237033371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20Payload%20missing/near/237033371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20Payload.20missing.html#237033371">(May 02 2021 at 07:06)</a>:</h4>
<p>this seems like a new feature. I see this been reported by many. But not sure how it will help if it only sends notification with resource ID</p>



<a name="237078711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20Payload%20missing/near/237078711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20Payload.20missing.html#237078711">(May 02 2021 at 20:11)</a>:</h4>
<p>Seems like a PR was submitted to fix this issue  <a href="https://github.com/hapifhir/hapi-fhir/pull/1357/files">https://github.com/hapifhir/hapi-fhir/pull/1357/files</a> and it was even merged but later the code was removed <span class="user-mention" data-user-id="191319">@James Agnew</span> please comment on what's the possible path forward</p>



<a name="237085484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20Payload%20missing/near/237085484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20Payload.20missing.html#237085484">(May 02 2021 at 21:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> any insights on Subscription payload problem ? ^^</p>



<a name="237202370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20Payload%20missing/near/237202370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20Payload.20missing.html#237202370">(May 03 2021 at 18:00)</a>:</h4>
<p>That subscription looks right to me. You could try putting a breakpoint in <code>SubscriptionDeliveringRestHookSubscriber</code> to see if you can figure out why it's not doing what you expect</p>



<a name="237203507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20Payload%20missing/near/237203507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20Payload.20missing.html#237203507">(May 03 2021 at 18:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> seems like PR had caused bunch of downstream regressions and was yanked ... it seems from your comment here <a href="https://github.com/hapifhir/hapi-fhir/pull/1357#issuecomment-521616804">https://github.com/hapifhir/hapi-fhir/pull/1357#issuecomment-521616804</a></p>



<a name="237204052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20Payload%20missing/near/237204052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20Payload.20missing.html#237204052">(May 03 2021 at 18:10)</a>:</h4>
<p>plus I am not a Java guy and won't even know how to run HAPI in debug mode to find problem with <code>SubscriptionDeliveringRestHookSubscriber</code> any instructions ? or can u call some resources to look into this as this is  becoming a show stopper for us and we are implementing a workaround using Mirth --&gt; CDR --&gt; Mirth to relay CDR's response to POST/PUT/DELETE of some resources to --&gt; AWS SNS/SQS --&gt; Our App</p>



<a name="237204563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20Payload%20missing/near/237204563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20Payload.20missing.html#237204563">(May 03 2021 at 18:14)</a>:</h4>
<p>that does look like quite a painful way to avoid what seems like a  bug in <code>SubscriptionDeliveringRestHookSubscriber</code> <span class="user-mention" data-user-id="191319">@James Agnew</span></p>



<a name="237210643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20Payload%20missing/near/237210643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20Payload.20missing.html#237210643">(May 03 2021 at 18:54)</a>:</h4>
<p>If you don't have anyone available who can work with the codebase, certainly another option would be to sign up for a support contract and someone from our team could work with your team on troubleshooting.</p>



<a name="237210992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscription%20Payload%20missing/near/237210992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscription.20Payload.20missing.html#237210992">(May 03 2021 at 18:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> my apologies for the confusion I just found the payload was being sent on all POST/PUT  </p>
<div class="codehilite" data-code-language="Ruby"><pre><span></span><code><span class="n">request</span><span class="o">.</span><span class="n">raw_post</span>
</code></pre></div>
<p>(RubyOnRails) ^</p>
<p>obviously it cannot be sent on DELETE for which we probably need some kind of interceptor</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
