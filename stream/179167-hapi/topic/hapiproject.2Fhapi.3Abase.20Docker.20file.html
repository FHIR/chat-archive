---
layout: page
title: "FHIR Chat  · hapiproject/hapi:base Docker file · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html">hapiproject/hapi:base Docker file</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="206687934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206687934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206687934">(Aug 12 2020 at 12:37)</a>:</h4>
<p>Hi, May i know where can i get the Dockerfile for hapiproject/hapi:base?</p>



<a name="206689999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206689999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206689999">(Aug 12 2020 at 13:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> Can you help with this?</p>



<a name="206691454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206691454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206691454">(Aug 12 2020 at 13:14)</a>:</h4>
<p><a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/Dockerfile">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/Dockerfile</a></p>



<a name="206783471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206783471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206783471">(Aug 13 2020 at 06:09)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191319">@James Agnew</span> I have this one. It pulls another image, the base : FROM hapiproject/hapi:base as build-hapi<br>
Do we have access to that base image's docker file?</p>



<a name="206815909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206815909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206815909">(Aug 13 2020 at 13:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> this is above my pay grade.. :) do you know?</p>



<a name="206826459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206826459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206826459">(Aug 13 2020 at 15:05)</a>:</h4>
<p>yes, I do</p>



<a name="206826470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206826470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206826470">(Aug 13 2020 at 15:05)</a>:</h4>
<p>lemme dig it up</p>



<a name="206826566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206826566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206826566">(Aug 13 2020 at 15:06)</a>:</h4>
<p><a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/Dockerfile.base">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/Dockerfile.base</a></p>



<a name="206826617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206826617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206826617">(Aug 13 2020 at 15:06)</a>:</h4>
<p><span class="user-mention" data-user-id="326090">@Keerthivasan Ramanathan</span></p>



<a name="206827170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206827170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206827170">(Aug 13 2020 at 15:10)</a>:</h4>
<p>Wow.. thank you! <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="206829594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206829594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206829594">(Aug 13 2020 at 15:27)</a>:</h4>
<p>NP</p>



<a name="206906864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206906864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206906864">(Aug 14 2020 at 08:00)</a>:</h4>
<p>May I suggest that you convert those docker images into multistage build in a single Dockerfile ... <span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> - the current design of having ":base" separate makes it quite hard to bump the version of ":base"</p>



<a name="206915397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206915397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206915397">(Aug 14 2020 at 10:20)</a>:</h4>
<p>eg. something like this:</p>
<div class="codehilite"><pre><span></span><code>FROM ubuntu as build-hapi

ENV PATH=&quot;/tmp/apache-maven-3.6.0/bin:${PATH}&quot;

ENV TZ=Etc/UTC
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone

WORKDIR /tmp
RUN apt-get update &amp;&amp; \
    apt-get install git -y &amp;&amp; \
    apt-get install sed -y &amp;&amp; \
    apt-get install wget -y &amp;&amp; \
    apt-get install openjdk-11-jdk -y

RUN wget https://downloads.apache.org/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz &amp;&amp; tar xzf apache-maven-3.6.3-bin.tar.gz
RUN export PATH=/tmp/apache-maven-3.6.3/bin:${PATH}

WORKDIR /tmp/hapi-fhir-jpaserver-starter

COPY . .

RUN /tmp/apache-maven-3.6.3/bin/mvn clean install -DskipTests

FROM tomcat:9-jre11

RUN mkdir -p /data/hapi/lucenefiles &amp;&amp; chmod 775 /data/hapi/lucenefiles
COPY --from=build-hapi /tmp/hapi-fhir-jpaserver-starter/target/*.war /usr/local/tomcat/webapps/

EXPOSE 8080

CMD [&quot;catalina.sh&quot;, &quot;run&quot;]
</code></pre></div>



<a name="206916082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206916082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206916082">(Aug 14 2020 at 10:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> that simplifies the setup and keeps it in a single file</p>



<a name="206930778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206930778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Oemig <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206930778">(Aug 14 2020 at 13:48)</a>:</h4>
<p>Is there a way to separate download and compilation from creating docker images? In the end only the war files afe needed...</p>



<a name="206935115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206935115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206935115">(Aug 14 2020 at 14:32)</a>:</h4>
<p>That is possible, yes</p>



<a name="206939307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206939307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206939307">(Aug 14 2020 at 15:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> why do you need to bump the version of base? I use :base because those dependencies never really change, and it adds extra time to the build process for the hapi image.</p>



<a name="206939494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206939494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206939494">(Aug 14 2020 at 15:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191549">@Frank Oemig</span> anyone can run <code>mvn install</code> at any time to compile it on their own, without using Docker...</p>



<a name="206939817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206939817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Oemig <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206939817">(Aug 14 2020 at 15:14)</a>:</h4>
<p>Yes, thx, I know, this is what I am doing and running. Just thinking about dockerization from that point onwards. Is a Dockerfile somewhere available?</p>



<a name="206939845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206939845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206939845">(Aug 14 2020 at 15:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> Docker caches those layers - as you mention they rarely change. And if they actually do, you would have a problem as your version is called 'base', hence it is VERY hard to know whether your cache is stale or not. Combining it to a multistage build takes advantages of the docker caching layer at keeps the file to a single version</p>



<a name="206939899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206939899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206939899">(Aug 14 2020 at 15:15)</a>:</h4>
<p>docker's caching layer doesn't really apply in a CI build</p>



<a name="206939933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206939933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206939933">(Aug 14 2020 at 15:15)</a>:</h4>
<p>but, I don't have a strong preference either way</p>



<a name="206939989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206939989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206939989">(Aug 14 2020 at 15:16)</a>:</h4>
<p>docker caching does apply to CI</p>



<a name="206939996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206939996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206939996">(Aug 14 2020 at 15:16)</a>:</h4>
<p>so, I'll make the change you requested, and update each of the tagged versions</p>



<a name="206940008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206940008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206940008">(Aug 14 2020 at 15:16)</a>:</h4>
<p>that depends on your CI setup</p>



<a name="206940039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206940039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206940039">(Aug 14 2020 at 15:16)</a>:</h4>
<p>every docker CI I've seen <em>doesn't</em> use cache</p>



<a name="206940055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206940055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206940055">(Aug 14 2020 at 15:17)</a>:</h4>
<p>granted... that's not <em>many</em></p>



<a name="206940074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206940074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206940074">(Aug 14 2020 at 15:17)</a>:</h4>
<p>azure and docker hub</p>



<a name="206940093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206940093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206940093">(Aug 14 2020 at 15:17)</a>:</h4>
<p>they all spawn a fresh vm to build the images</p>



<a name="206940099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206940099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206940099">(Aug 14 2020 at 15:17)</a>:</h4>
<p>which don't have any caching history</p>



<a name="206940111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206940111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206940111">(Aug 14 2020 at 15:17)</a>:</h4>
<p>you can bootstrap your vm with a cache</p>



<a name="206940427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206940427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206940427">(Aug 14 2020 at 15:20)</a>:</h4>
<p>quick google search: <a href="https://dev.to/pst418/speed-up-multi-stage-docker-builds-in-ci-cd-with-buildkit-s-registry-cache-11gi">https://dev.to/pst418/speed-up-multi-stage-docker-builds-in-ci-cd-with-buildkit-s-registry-cache-11gi</a></p>



<a name="206940482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206940482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206940482">(Aug 14 2020 at 15:21)</a>:</h4>
<p>but I'll look into it <span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> and check with my CI goto-guys monday</p>



<a name="206940881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206940881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206940881">(Aug 14 2020 at 15:24)</a>:</h4>
<p>np. we <em>were</em> using the docker hub's CI, but I stopped <em>yesterday</em> because docker hub seems to freeze whenever building hapi</p>



<a name="206940890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206940890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206940890">(Aug 14 2020 at 15:24)</a>:</h4>
<p>so, I'm forced to use a manual process as of recent anyways</p>



<a name="206960001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206960001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206960001">(Aug 14 2020 at 18:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> base image is removed and all tags in docker hub have been updated to use your suggested Dockerfile</p>



<a name="206964828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206964828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206964828">(Aug 14 2020 at 18:59)</a>:</h4>
<p>Fyi: the base image "froze" during build because the jdk requires a timezone set. Thats the reason for <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/af6bd69db027c6632283d03947a1b3ac4eeac4d7/Dockerfile#L6">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/af6bd69db027c6632283d03947a1b3ac4eeac4d7/Dockerfile#L6</a></p>



<a name="206987511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206987511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206987511">(Aug 14 2020 at 22:09)</a>:</h4>
<p>I'll re-enable the CI build in docker hub and see what happens</p>



<a name="206989211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/206989211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#206989211">(Aug 14 2020 at 22:27)</a>:</h4>
<p>hmmm, still seems to be freezing on docker hub builds</p>



<a name="207007408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/207007408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#207007408">(Aug 15 2020 at 05:55)</a>:</h4>
<p>Where does it happen?</p>



<a name="207038971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapiproject/hapi%3Abase%20Docker%20file/near/207038971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file.html#207038971">(Aug 15 2020 at 20:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191549">Frank Oemig</span> <a href="#narrow/stream/179167-hapi/topic/hapiproject.2Fhapi.3Abase.20Docker.20file/near/206930778">said</a>:</p>
<blockquote>
<p>Is there a way to separate download and compilation from creating docker images? In the end only the war files afe needed...</p>
</blockquote>
<p>With <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/124">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/124</a> - the entire fetchning of maven dependencies is cached as long as you don't change the pom. Change the rest of the sources all you want and the build will still be way more speedy ;)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
