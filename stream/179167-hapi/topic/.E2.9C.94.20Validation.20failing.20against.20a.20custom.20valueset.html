---
layout: page
title: "FHIR Chat  · ✔ Validation failing against a custom valueset · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20Validation.20failing.20against.20a.20custom.20valueset.html">✔ Validation failing against a custom valueset</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="269591295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%E2%9C%94%20Validation%20failing%20against%20a%20custom%20valueset/near/269591295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Bennett <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20Validation.20failing.20against.20a.20custom.20valueset.html#269591295">(Jan 27 2022 at 15:45)</a>:</h4>
<p>Hello! </p>
<p>I am newer to the HAPI world and am having some issues with the JPA-starter server(HAPI 5.6.0) validating codes against a custom created valueset. The valueset and codesystem are inside a package I have stored on Github and loaded in the application.yaml. For reference the valueset/codesystem can be found here: <a href="https://github.com/kind-lab/fhir-packages/tree/mimic-package-0.1.0/terminology">https://github.com/kind-lab/fhir-packages/tree/mimic-package-0.1.0/terminology</a></p>
<p>I am getting the following error when validating my Encounter profile:</p>
<p>"The code provided (<a href="http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT">http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT</a>) is not in the value set <a href="http://mimic.fhir.mit.edu/ValueSet/admission-class">http://mimic.fhir.mit.edu/ValueSet/admission-class</a>, and a code from this value set is required: Unable to validate code <a href="http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT-">http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT-</a> Unknown code <a href="http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT">http://fhir.mimic.mit.edu/CodeSystem/admission-class#URGENT</a>. Code validation occurred using a ValueSet expansion that was pre-calculated at 2022-01-26T10:22:22.613-05:00 (00:02:14 ago)"</p>
<p>I’ve tried a couple things to troubleshoot</p>
<ul>
<li>Ran <code>$validate-code</code> against the codesystem and that worked fine</li>
<li>Ran <code>$validate-code</code> against the valueset and it tossed an error:<ul>
<li>"The FHIR endpoint on this server does not know how to handle GET<br>
operation[ValueSet/admission-class/$validate-code] with parameters [[code]]"</li>
</ul>
</li>
</ul>
<p>Any ideas why the validation isn’t working with the custom ValueSet?</p>



<a name="269622094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%E2%9C%94%20Validation%20failing%20against%20a%20custom%20valueset/near/269622094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20Validation.20failing.20against.20a.20custom.20valueset.html#269622094">(Jan 27 2022 at 19:08)</a>:</h4>
<p>does the standalone validator validate it successfully?</p>



<a name="269643362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%E2%9C%94%20Validation%20failing%20against%20a%20custom%20valueset/near/269643362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Bennett <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20Validation.20failing.20against.20a.20custom.20valueset.html#269643362">(Jan 27 2022 at 21:47)</a>:</h4>
<p>Just tested and it does not. Looks like it cannot find/understand the URI. The error message was:</p>
<ul>
<li>Information @ Encounter.class (line 1, col323): Code System URI '<a href="http://fhir.mimic.mit.edu/CodeSystem/admission-class">http://fhir.mimic.mit.edu/CodeSystem/admission-class</a>' is unknown so the code cannot be validated</li>
</ul>
<p>I validated against the tarball file locally with the command: </p>
<ul>
<li>java -jar validator_cli.jar encounter.json -version 4.0 -ig mimic-0.1.2.tgz</li>
</ul>
<p>My canonical URL is set to <a href="http://fhir.mimic.mit.edu">http://fhir.mimic.mit.edu</a> and the CodeSystem is inside the package. Any ideas?</p>



<a name="269645932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%E2%9C%94%20Validation%20failing%20against%20a%20custom%20valueset/near/269645932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20Validation.20failing.20against.20a.20custom.20valueset.html#269645932">(Jan 27 2022 at 22:02)</a>:</h4>
<p>send me the package and instance and I'll have a look, I guess</p>



<a name="269745924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%E2%9C%94%20Validation%20failing%20against%20a%20custom%20valueset/near/269745924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Bennett <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20Validation.20failing.20against.20a.20custom.20valueset.html#269745924">(Jan 28 2022 at 14:42)</a>:</h4>
<p>Here are the instance and package. Thanks so much for the help!<br>
<a href="/user_uploads/10155/Ld7XmN2amKc_bLMVyo8U0eiN/encounter.json">encounter.json</a> <a href="/user_uploads/10155/hHP_zfNmiX6eP0kVZ0PrcBuf/mimic-0.1.2.tgz">mimic-0.1.2.tgz</a></p>



<a name="269783935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%E2%9C%94%20Validation%20failing%20against%20a%20custom%20valueset/near/269783935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20Validation.20failing.20against.20a.20custom.20valueset.html#269783935">(Jan 28 2022 at 18:50)</a>:</h4>
<p><a href="http://mimic.fhir.mit.edu/CodeSystem/admission-class">http://mimic.fhir.mit.edu/CodeSystem/admission-class</a> vs <a href="http://fhir.mimic.mit.edu/CodeSystem/admission-class">http://fhir.mimic.mit.edu/CodeSystem/admission-class</a></p>



<a name="269788357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%E2%9C%94%20Validation%20failing%20against%20a%20custom%20valueset/near/269788357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Bennett <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20Validation.20failing.20against.20a.20custom.20valueset.html#269788357">(Jan 28 2022 at 19:20)</a>:</h4>
<p>Yup that's it! I knew it was something simple. I appreciate you taking the time to find the typo.</p>



<a name="269789549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/%E2%9C%94%20Validation%20failing%20against%20a%20custom%20valueset/near/269789549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/.E2.9C.94.20Validation.20failing.20against.20a.20custom.20valueset.html#269789549">(Jan 28 2022 at 19:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="407800">Alex Bennett</span> has marked this topic as resolved.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
