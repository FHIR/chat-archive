---
layout: page
title: "FHIR Chat  · Validation of canonical + version · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html">Validation of canonical + version</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="200894671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/200894671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Signe Hejgaard Kristoffersen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#200894671">(Jun 15 2020 at 14:16)</a>:</h4>
<p>Hello, <br>
When validating a QuestionnaireResponse with a canonical reference to a version specific Questionnaire, the validation gives the following response: </p>
<div class="codehilite"><pre><span></span><code>{
    &quot;severity&quot;: &quot;warning&quot;,
    &quot;code&quot;: &quot;processing&quot;,
    &quot;diagnostics&quot;: &quot;The questionnaire \&quot;http://hl7.org/fhir/us/sirb/Questionnaire/sirb-recruitment-questionnaire|0.1.0\&quot; could not be resolved, so no validation can be performed against the base questionnaire&quot;,
    &quot;location&quot;: [ &quot;Parameters.parameter[0].resource.ofType(Parameters).parameter[0].resource.ofType(QuestionnaireResponse)&quot;, &quot;Line 16, Col 109&quot; ]
  }
</code></pre></div>


<p>The canonical reference looks like this: <br>
<code>"questionnaire": "http://hl7.org/fhir/us/sirb/Questionnaire/sirb-recruitment-questionnaire|0.1.0",</code></p>
<p>It seems to work just fine, if I remove the |{version}. Is this validation not supported in HAPI? From <a href="https://www.hl7.org/fhir/references.html#canonical">https://www.hl7.org/fhir/references.html#canonical</a> I assume that the canonical reference is stated correctly.</p>



<a name="200915495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/200915495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#200915495">(Jun 15 2020 at 16:49)</a>:</h4>
<p>should be. can you give me both questionnaire and questionnaireResponse  samples so i can test?</p>



<a name="200982313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/200982313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Signe Hejgaard Kristoffersen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#200982313">(Jun 16 2020 at 07:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  I have been using this (<a href="http://hapi.fhir.org/baseR4/Questionnaire/1167196/_history/1">http://hapi.fhir.org/baseR4/Questionnaire/1167196/_history/1</a>) as the Questionnaire, and this QuestionnaireResponse: </p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;QuestionnaireResponse&quot;,
  &quot;id&quot;: &quot;220293&quot;,
  &quot;meta&quot;: {
    &quot;versionId&quot;: &quot;1&quot;,
    &quot;lastUpdated&quot;: &quot;2019-12-05T10:40:10.257+00:00&quot;,
    &quot;source&quot;: &quot;#8VT59CPwUir1ahuR&quot;
  },
  &quot;text&quot;: {
    &quot;status&quot;: &quot;generated&quot;,
    &quot;div&quot;: &quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;\n      &lt;pre&gt;\n            Comorbidity? YES\n              Cardial Comorbidity? YES\n                Angina? YES\n                MI? NO\n              Vascular Comorbidity?\n                (no answers)\n              ...\n            Histopathology\n              Abdominal\n                pT category: 1a\n              ...\n          &lt;/pre&gt;\n    &lt;/div&gt;&quot;
  },
  &quot;identifier&quot;: {
    &quot;system&quot;: &quot;http://acme.com/lab/reports&quot;,
    &quot;value&quot;: &quot;5234342&quot;
  },
  &quot;basedOn&quot;: [ {
    &quot;reference&quot;: &quot;CarePlan/220209&quot;
  } ],
  &quot;partOf&quot;: [ {
    &quot;reference&quot;: &quot;Procedure/220213&quot;
  } ],
  &quot;questionnaire&quot;: &quot;http://hl7.org/fhir/us/sirb/Questionnaire/sirb-recruitment-questionnaire|0.1.0&quot;,
  &quot;status&quot;: &quot;entered-in-error&quot;,
  &quot;subject&quot;: {
    &quot;reference&quot;: &quot;Patient/220224&quot;,
    &quot;display&quot;: &quot;Peter James Chalmers&quot;
  },
  &quot;encounter&quot;: {
    &quot;reference&quot;: &quot;Encounter/220211&quot;
  },
  &quot;authored&quot;: &quot;2014-12-11T04:44:16Z&quot;,
  &quot;author&quot;: {
    &quot;reference&quot;: &quot;Patient/220224&quot;
  },
  &quot;source&quot;: {
    &quot;reference&quot;: &quot;Practitioner/220207&quot;
  },
  &quot;item&quot;: [ {
    &quot;linkId&quot;: &quot;1.1&quot;,
    &quot;answer&quot;: [ {
      &quot;valueCoding&quot;: {
        &quot;code&quot;: &quot;LA6560-2&quot;,
        &quot;display&quot;: &quot;Confused&quot;
      }
    } ]
  } ]
}
</code></pre></div>


<p>The same warning occurs if I try to do a canonical reference to a specific version of a ValueSet in Questionnaire.item.answerValueSet.</p>



<a name="201047895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/201047895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#201047895">(Jun 16 2020 at 17:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> / <span class="user-mention" data-user-id="248736">@Mark Iantorno</span>  this works fine in the validator itself, but apparently fails in HAPI - I presume this is because the HAPI context cannot resolve <a href="http://hl7.org/fhir/us/sirb/Questionnaire/sirb-recruitment-questionnaire|0.1.0">http://hl7.org/fhir/us/sirb/Questionnaire/sirb-recruitment-questionnaire|0.1.0</a> where as the validator's context does</p>



<a name="201048060"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/201048060" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#201048060">(Jun 16 2020 at 17:26)</a>:</h4>
<p>I'll take a look into it now</p>



<a name="201145475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/201145475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#201145475">(Jun 17 2020 at 14:07)</a>:</h4>
<p>Just as an update, I'm dedicating my morning to this. I am having build issues with HAPI though, that I am working to resolve</p>



<a name="201154839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/201154839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#201154839">(Jun 17 2020 at 15:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="256845">@Signe Hejgaard Kristoffersen</span> what -ig are you passing in to the validator when you run this?</p>



<a name="201247095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/201247095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Signe Hejgaard Kristoffersen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#201247095">(Jun 18 2020 at 09:45)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span> I get the warning when using the validator in the CRUD operations at <a href="http://hapi.fhir.org">hapi.fhir.org</a> with the QuestionnaireResponse I pasted above.</p>



<a name="201271863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/201271863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#201271863">(Jun 18 2020 at 14:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> What was the command you ran in the CLI to get this to work locally?</p>



<a name="201271891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/201271891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#201271891">(Jun 18 2020 at 14:03)</a>:</h4>
<p>You had to reference an IG, no?</p>



<a name="201274661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/201274661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#201274661">(Jun 18 2020 at 14:23)</a>:</h4>
<p>I just talked to James about this, and he let me know that versioned canonical references are not currently supported by HAPI, but it is on the development roadmap, and should be part of the August release.</p>



<a name="201296292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/201296292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#201296292">(Jun 18 2020 at 16:56)</a>:</h4>
<p>ok great thanks</p>



<a name="202800961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Validation%20of%20canonical%20%2B%20version/near/202800961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version.html#202800961">(Jul 03 2020 at 12:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="248736">Mark Iantorno</span> <a href="#narrow/stream/179167-hapi/topic/Validation.20of.20canonical.20.2B.20version/near/201274661">said</a>:</p>
<blockquote>
<p>I just talked to James about this, and he let me know that versioned canonical references are not currently supported by HAPI, but it is on the development roadmap, and should be part of the August release.</p>
</blockquote>
<p>great news! Thanks. Currently hapi can't validate the german base profiles because we are using versioned canonical links.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
