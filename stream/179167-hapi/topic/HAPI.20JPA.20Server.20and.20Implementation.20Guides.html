---
layout: page
title: "FHIR Chat  · HAPI JPA Server and Implementation Guides · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html">HAPI JPA Server and Implementation Guides</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="182442142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/182442142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#182442142">(Dec 03 2019 at 12:20)</a>:</h4>
<p>Is it possible to specify an ImplementationGuide that the HAPI JPA server will follow.<br>
I'm thinking of something like this:<br>
My server needs to conform to this IG <a href="https://hl7-uk.github.io/UK-STU3" target="_blank" title="https://hl7-uk.github.io/UK-STU3">https://hl7-uk.github.io/UK-STU3</a><br>
So it will only accept Patient resources that conform to (or validate as) <a href="https://hl7-uk.github.io/UK-STU3/CareConnect-Patient-1.html" target="_blank" title="https://hl7-uk.github.io/UK-STU3/CareConnect-Patient-1.html">https://hl7-uk.github.io/UK-STU3/CareConnect-Patient-1.html</a></p>



<a name="182442240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/182442240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#182442240">(Dec 03 2019 at 12:21)</a>:</h4>
<p>Probably driven by a CapabilityStatement in the IG</p>



<a name="182695350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/182695350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#182695350">(Dec 05 2019 at 19:40)</a>:</h4>
<p>I have forced profile validation server side specified in a custom interceptor explicitly to do so on a range of profile definitions. It is however not strictly linked to an IG</p>



<a name="182695425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/182695425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#182695425">(Dec 05 2019 at 19:40)</a>:</h4>
<p>It could might as well have been made to do so on the basis of an IG</p>



<a name="182767684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/182767684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#182767684">(Dec 06 2019 at 14:55)</a>:</h4>
<p>now it is ;)</p>



<a name="187879522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/187879522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sajith Jamal <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#187879522">(Feb 11 2020 at 03:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> could you elaborate a bit please?....I am trying to do the same but haven't gotton anywhere</p>



<a name="187901287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/187901287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#187901287">(Feb 11 2020 at 10:51)</a>:</h4>
<p>I've loaded the IG into the server and added an extended FhirInstanceValidator to the RequestValidatingInterceptor. The FhirInstanceValidator then intercepts the incoming resources and finds the SD that matches the profile stated in the resource and runs the validation</p>



<a name="187901388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/187901388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#187901388">(Feb 11 2020 at 10:52)</a>:</h4>
<blockquote>
<p>I've loaded the IG into the server</p>
</blockquote>
<p>manually, or did you create a FHIR package endpoint?</p>



<a name="187901553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/187901553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#187901553">(Feb 11 2020 at 10:55)</a>:</h4>
<p>I download the package.tgz from the IG compile time and then runtime add/update the FHIR server with the contents.</p>



<a name="187901571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/187901571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#187901571">(Feb 11 2020 at 10:55)</a>:</h4>
<p>automatically</p>



<a name="187901824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/187901824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#187901824">(Feb 11 2020 at 10:59)</a>:</h4>
<p>we are implementing IG validation in a similar way (Inteceptor, PrePopulatedValidatinSupport). Jsut thought for a second that hapi has package awareness now (which would be really nice to have)</p>



<a name="187901839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/187901839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#187901839">(Feb 11 2020 at 10:59)</a>:</h4>
<p>I'll gladly share the contents that does the loading</p>



<a name="187901994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/187901994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#187901994">(Feb 11 2020 at 11:01)</a>:</h4>
<p>if it has any interest</p>



<a name="187902133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/187902133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#187902133">(Feb 11 2020 at 11:03)</a>:</h4>
<p>I also do some filtering in regards to what profiles that are of interest. As our server is in a setup of a distributed setup, we 'only care' about the resources that our server 'own'. For that, we use the <a href="https://www.hl7.org/fhir/stu3/capabilitystatement-definitions.html#CapabilityStatement.profile" target="_blank" title="https://www.hl7.org/fhir/stu3/capabilitystatement-definitions.html#CapabilityStatement.profile">https://www.hl7.org/fhir/stu3/capabilitystatement-definitions.html#CapabilityStatement.profile</a> in the capabilitystatement</p>



<a name="187902193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/187902193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#187902193">(Feb 11 2020 at 11:04)</a>:</h4>
<p>eg. <a href="https://docs.ehealth.sundhed.dk/latest/ig/CapabilityStatement-patient.html" target="_blank" title="https://docs.ehealth.sundhed.dk/latest/ig/CapabilityStatement-patient.html">https://docs.ehealth.sundhed.dk/latest/ig/CapabilityStatement-patient.html</a></p>



<a name="225551097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/225551097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#225551097">(Feb 08 2021 at 14:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> / <span class="user-mention" data-user-id="191687">@Kevin Mayfield</span>   revisiting this: A client of mine would like to have this enabled <a href="https://hapifhir.io/hapi-fhir/docs/validation/repository_validating_interceptor.html#using-the-repository-validating-interceptor">https://hapifhir.io/hapi-fhir/docs/validation/repository_validating_interceptor.html#using-the-repository-validating-interceptor</a> - so I'll probably soon add this as an option for the HAPI fhir starter project</p>



<a name="225559995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/225559995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#225559995">(Feb 08 2021 at 15:27)</a>:</h4>
<p>sounds great</p>



<a name="225857172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/225857172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#225857172">(Feb 10 2021 at 15:58)</a>:</h4>
<p>done: <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/tree/interceptor-wiring-rework">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/tree/interceptor-wiring-rework</a></p>



<a name="225857325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/225857325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#225857325">(Feb 10 2021 at 15:59)</a>:</h4>
<p>ready for takeoff for testing. Will be merged to master once HAPI 5.3.0 is released</p>



<a name="225857385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/225857385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#225857385">(Feb 10 2021 at 15:59)</a>:</h4>
<p>PR is here: <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/210">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/pull/210</a></p>



<a name="225858007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/HAPI%20JPA%20Server%20and%20Implementation%20Guides/near/225858007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/HAPI.20JPA.20Server.20and.20Implementation.20Guides.html#225858007">(Feb 10 2021 at 16:01)</a>:</h4>
<p>When combining this <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/5aec4b7e18948b797d77f449793be53d083bc51f/src/main/java/ca/uhn/fhir/jpa/starter/RepositoryValidationInterceptorFactoryR4.java#L45">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/5aec4b7e18948b797d77f449793be53d083bc51f/src/main/java/ca/uhn/fhir/jpa/starter/RepositoryValidationInterceptorFactoryR4.java#L45</a> with the feature of installing IG's you'll have an out-of-the-box validation on anything stored in the HAPI FHIR starter service. Only requirement is a few lines of configuration - <span class="user-mention" data-user-id="191451">@Patrick Werner</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
