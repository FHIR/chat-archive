---
layout: page
title: "FHIR Chat  · ReferenceAndListParam · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/ReferenceAndListParam.html">ReferenceAndListParam</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153949504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/ReferenceAndListParam/near/153949504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/ReferenceAndListParam.html#153949504">(Mar 30 2018 at 21:14)</a>:</h4>
<p>I'm seeing some troublesome behavior in ReferenceAndListParam.parseValuesAsQueryTokens() when passed a value like encounter:AuditEvent=Encounter/1234567</p>
<p>Clearly this query won't match because the resource is an Encounter, but the query is looking for AuditEvent.  Ignore the use of AuditEvent, this was my test harness and I knew it was a good test case.  There are other cases where even though the query is obviously wrong, automated software might not get that.</p>
<p>So, what happens to this is that the parsed reference parameter uses the value of Encounter from the specified Reference, rather than the value associated with the qualifier.  While the query may be messed up, it seems also that the HAPI server behavior would also be not what is desired in this situation.  The query parameters might be set by one software component, the values by another (or perhaps even bad input from an unrelated component -- which is what my test was checking).  Thoughts? <span class="user-mention" data-user-id="191319">@James Agnew</span></p>



<a name="153952547"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/ReferenceAndListParam/near/153952547" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Łukasz Dywicki <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/ReferenceAndListParam.html#153952547">(Apr 16 2018 at 15:49)</a>:</h4>
<blockquote>
<p>I'm seeing some troublesome behavior in ReferenceAndListParam.parseValuesAsQueryTokens() when passed a value like encounter:AuditEvent=Encounter/1234567</p>
</blockquote>
<p>If I'm not mistaken in such case syntax is slightly different - ie. <code>encounter:AuditEvent.id=&lt;id-of-audit-id&gt;</code>. I was patching this part of <code>SearchMap</code> implementation for my own use because I had to rewrite search from hapi to format accepted by system I was interfacing with.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
