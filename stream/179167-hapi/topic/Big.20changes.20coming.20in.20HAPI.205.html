---
layout: page
title: "FHIR Chat  · Big changes coming in HAPI 5 · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Big.20changes.20coming.20in.20HAPI.205.html">Big changes coming in HAPI 5</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="190862704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Big%20changes%20coming%20in%20HAPI%205/near/190862704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Big.20changes.20coming.20in.20HAPI.205.html#190862704">(Mar 17 2020 at 15:18)</a>:</h4>
<p>Hi All,</p>
<p>A quick announcement that we have decided to do a major version bump for the upcoming (Labrador) release scheduled for May 2020.</p>
<p>There are currently 3 changes, all of which have potential implications for implementers:</p>
<ul>
<li>We are going to be switching from Gson to Jackson for JSON serialization in HAPI FHIR's JSON parser. This move brings 3 benefits:<ul>
<li>The Jackson-based FHIR parser is roughly 5% faster in parsing than the Gson one was (not a huge difference, but not nothing)</li>
<li>Jackson reports line numbers when it finds problems, and we will be surfacing those to end users</li>
<li>Jackson's pretty printing is way more compact and usable than Gson's (way fewer useless empty lines, trust me it's really nice)</li>
</ul>
</li>
<li>The Convertor library has been refactored so that conversion between versions lower than R5 have been broken out into separate classes. The actual conversion logic is unchanged, but we no longer rely on a massive monolith converter class that brings IDEs to its knees. Shoutout to <span class="user-mention" data-user-id="248736">@Mark Iantorno</span> for his work on this (Mark automated this task, so most of the work was actually building a java parser).</li>
<li>The IValidationSupport interface which is used to supply conformance artifacts and terminology services to the validation engine is being completely redesigned. This has honestly been a massively painful change to implement, but in doing so we are paving the way for integration with remote terminology servers (e.g. HAPI FHIR CDR that links to Ontoserver for validation anyone?) and NPM based FHIR package support. The new interface is available here if anyone wants to look into that particular crystal ball: <a href="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-base/src/main/java/ca/uhn/fhir/context/support/IValidationSupport.java" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-base/src/main/java/ca/uhn/fhir/context/support/IValidationSupport.java">https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-base/src/main/java/ca/uhn/fhir/context/support/IValidationSupport.java</a></li>
</ul>
<p>I mention this now because we're about to abandon the current 4.3.0-SNAPSHOT builds and bump to 5.0.0-SNAPSHOT, probably within the next 24 hours. </p>
<p>Ps- Hope everyone is safe and healthy. This is week 2 of work-from-home for my team and I think I'm finally learning to not completely hate it. :)</p>



<a name="190876587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Big%20changes%20coming%20in%20HAPI%205/near/190876587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Big.20changes.20coming.20in.20HAPI.205.html#190876587">(Mar 17 2020 at 16:42)</a>:</h4>
<p>Oh, one other benefit to the use of Jackson that I didn't mention- Jackson is a super extensible parser, with lots of plugins to things other than JSON. Technically this move should pave the way to an easier implementation of Bson support, Protobuf/Avro support, etc. No guarantees on these things of course since they haven't been investigated at all, but I think they are realistic at some point.</p>



<a name="190916574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Big%20changes%20coming%20in%20HAPI%205/near/190916574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Big.20changes.20coming.20in.20HAPI.205.html#190916574">(Mar 17 2020 at 22:01)</a>:</h4>
<p>And finally.. if anyone would like to see the new pretty printing in action: <a href="http://hapi.fhir.org/baseR4/Observation" target="_blank" title="http://hapi.fhir.org/baseR4/Observation">http://hapi.fhir.org/baseR4/Observation</a></p>
<p>(Feedback welcome, it's actually super-configurable in Jackson so we could make the indenting level, array-joining, and other stuff tunable if there was interest!)</p>



<a name="190973056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Big%20changes%20coming%20in%20HAPI%205/near/190973056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Collins <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Big.20changes.20coming.20in.20HAPI.205.html#190973056">(Mar 18 2020 at 12:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> Does it sound 'right' that jpaserver-starter would fail to startup when pointed to 5.0.0-snapshot due to 'No bean named 'myInstanceValidatorR4' available'?  I'm guessing that is just lagging behind the core changes?</p>



<a name="190979171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Big%20changes%20coming%20in%20HAPI%205/near/190979171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Big.20changes.20coming.20in.20HAPI.205.html#190979171">(Mar 18 2020 at 13:29)</a>:</h4>
<p>Definitely expected. If you want to check out the prerelease HAPI FHIR, there is a branch in the JPA starter project you can use: <code>rel_5_0_0</code></p>



<a name="192620857"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Big%20changes%20coming%20in%20HAPI%205/near/192620857" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roman Rodnin <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Big.20changes.20coming.20in.20HAPI.205.html#192620857">(Apr 02 2020 at 04:53)</a>:</h4>
<p>I've noticed that <em>DefaultProfileValidationSuupport</em> doesn't implement the <em>validateCodeInValueSet</em> method from <em>IValidationSupport</em> interface. Why so?</p>



<a name="192642909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Big%20changes%20coming%20in%20HAPI%205/near/192642909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Big.20changes.20coming.20in.20HAPI.205.html#192642909">(Apr 02 2020 at 09:53)</a>:</h4>
<p><span class="user-mention" data-user-id="253983">@Roman Rodnin</span> that method was moved to <code>InMemoryTerminologyServerValidationSupport</code>, so you need to include both of these classes in a chain now.</p>



<a name="194415180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Big%20changes%20coming%20in%20HAPI%205/near/194415180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Big.20changes.20coming.20in.20HAPI.205.html#194415180">(Apr 17 2020 at 09:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> iIs 5.0.0 still expected to be released around mid of May?</p>



<a name="194415887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Big%20changes%20coming%20in%20HAPI%205/near/194415887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Big.20changes.20coming.20in.20HAPI.205.html#194415887">(Apr 17 2020 at 09:35)</a>:</h4>
<p>Yup, we're still on track for the may release.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
