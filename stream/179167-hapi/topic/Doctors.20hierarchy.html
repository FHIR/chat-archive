---
layout: page
title: "FHIR Chat  · Doctors hierarchy · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Doctors.20hierarchy.html">Doctors hierarchy</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="229461426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Doctors%20hierarchy/near/229461426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dexter <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Doctors.20hierarchy.html#229461426">(Mar 09 2021 at 11:26)</a>:</h4>
<p>Is there a way in which I can store a hierarchy of doctors (independent of the patient)? There's CareTeam, but that's in context of a patient.</p>



<a name="229461813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Doctors%20hierarchy/near/229461813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pétur Valdimarsson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Doctors.20hierarchy.html#229461813">(Mar 09 2021 at 11:30)</a>:</h4>
<p>Do you need an actual hierarchy or a flat list? If it's a hierarchy, what should the relation be based on? Who answers to who?</p>



<a name="229462947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Doctors%20hierarchy/near/229462947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dexter <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Doctors.20hierarchy.html#229462947">(Mar 09 2021 at 11:40)</a>:</h4>
<p>Perhaps a tree-like one, each with n-nodes. Yeah who answers to who would be great to have!</p>



<a name="229463402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Doctors%20hierarchy/near/229463402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pétur Valdimarsson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Doctors.20hierarchy.html#229463402">(Mar 09 2021 at 11:44)</a>:</h4>
<p>I would probably go with a Group (or List) resource as container and add an extension to Practitioner to point out "superior". Then resolve the hierarchy on consumption of the resource.</p>



<a name="229463461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Doctors%20hierarchy/near/229463461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dexter <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Doctors.20hierarchy.html#229463461">(Mar 09 2021 at 11:45)</a>:</h4>
<p>I'll also probably need to search for people within hierarchies. Will that mean extension search support will need modifications to the server code?</p>



<a name="229464585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Doctors%20hierarchy/near/229464585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pétur Valdimarsson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Doctors.20hierarchy.html#229464585">(Mar 09 2021 at 11:56)</a>:</h4>
<p>Basically, in the case I described, you will always be searching among a flat Practitioner list. Each practitioner has an extension defining a superior.</p>
<p>From your last question, I'm guessing you are using the HAPI JPA Server? </p>
<p>In order to perform searches such as finding all "descendants" of a Practitioner, a series of reverse chaining searches would need to be performed, or some alterations of the server code. But since I haven't used the JPA server in quite some time, I'm a bit unsure what it supports "out of the box" when it comes to searching. </p>
<p>Someone else might be of more help there.</p>



<a name="229466068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Doctors%20hierarchy/near/229466068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pétur Valdimarsson <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Doctors.20hierarchy.html#229466068">(Mar 09 2021 at 12:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="359486">Dexter</span> <a href="#narrow/stream/179167-hapi/topic/Doctors.20hierarchy/near/229461426">said</a>:</p>
<blockquote>
<p>Is there a way in which I can store a hierarchy of doctors (independent of the patient)? There's CareTeam, but that's in context of a patient.</p>
</blockquote>
<p>I hope I'm not rambling. But another way of handling it is to use Groups containing Practitioners and Groups, skipping the extension part. It might become a bit tedious to maintain though.</p>



<a name="229466318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Doctors%20hierarchy/near/229466318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dexter <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Doctors.20hierarchy.html#229466318">(Mar 09 2021 at 12:11)</a>:</h4>
<blockquote>
<p>I'm guessing you are using the HAPI JPA Server</p>
</blockquote>
<p>Yeah </p>
<blockquote>
<p>I hope I'm not rambling</p>
</blockquote>
<p>No no you're not! Thanks for your pointers! I'm pretty new to HAPI and FHIR, so any help is really helpful! I'll try extensions, but I had issues previously defining a <code>SearchParameter</code> on it and getting it to work. I'll take a jab at it again and report back. I'll test out groups too! Thank you again!</p>



<a name="229647239"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Doctors%20hierarchy/near/229647239" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dexter <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Doctors.20hierarchy.html#229647239">(Mar 10 2021 at 12:21)</a>:</h4>
<p><code>Group</code> seems to fit me well for the usecase. But there's one issue I'm not sure how to tackle. Each doctor must manage only one group, and each member in a group cannot be a member of another group. While creating a new group, how do I enforce the above 2 conditions? </p>
<p>Condition 1 (no other group with this managing doctor is fairly straightforward) I must use <code>ifNoneExist: managing-entity=ID</code>.<br>
Condition 2 (member not in any other group) I must use <code>ifNoneExist: member=ID1, ID2, ID3, ...</code>. </p>
<p>Combining these both, my POST request would be something like this</p>
<div class="codehilite"><pre><span></span><code>{
    &quot;resourceType&quot;: &quot;Bundle&quot;,
    &quot;type&quot;: &quot;transaction&quot;,
    &quot;entry&quot;: [
        {
            &quot;resource&quot;: { /* Group Data */ },
            &quot;request&quot;: {
                &quot;method&quot;: &quot;POST&quot;,
                &quot;ifNoneExist&quot;: &quot;managing-entity=ID&amp;member=ID1, ID2, ID3&quot;
            }
        }
    ]
}
</code></pre></div>
<p>I was also asked to ensure that there's only one level of 'hierarchy' for now. Now, this means that given a member <code>A</code> of a group <code>G</code>, they cannot be the <code>managinEntity</code> of any other group B. I thought of putting this restriction as a comma-separated values for the <code>managing-entity</code>, but that doesn't seem to work, nor does repeating the item in the request. </p>
<p>Example, given <code>2</code> to be the <code>managing-entity</code> of a new group, and <code>4, 5, 6, 7</code> its members, I tried this <code>ifNoneExist</code>. </p>
<div class="codehilite"><pre><span></span><code>ifNoneExist: managing-entity=2,3 &amp; member=2, 4, 5, 6, 7
ifNoneExist: managing-entity=2 &amp; managing-entity=3 &amp; member=2, 4, 5, 6, 7
(spaces b/w &amp; for ease of reading)
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
