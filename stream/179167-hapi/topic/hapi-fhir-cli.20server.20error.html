---
layout: page
title: "FHIR Chat  Â· hapi-fhir-cli server error Â· hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-fhir-cli.20server.20error.html">hapi-fhir-cli server error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153836046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-fhir-cli%20server%20error/near/153836046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gaston Fiore <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-fhir-cli.20server.20error.html#153836046">(Jul 01 2016 at 12:39)</a>:</h4>
<p>I tried to start a FHIR server using the <strong>hapi-fhir-cli</strong> by running <code>java -jar hapi-fhir-cli.jar run-server</code> as stated in the <a href="http://hapifhir.io/doc_cli.html" target="_blank" title="http://hapifhir.io/doc_cli.html">documentation</a>. However, the process gets killed, without giving much information. The output by some strange reason has varied in different tries. The most informative output that I got is:</p>
<div class="codehilite"><pre>gaston@pgx-fhir:~/bin$ java -jar hapi-fhir-cli.jar run-server
------------------------------------------------------------
ðŸ”¥ HAPI FHIR 1.5 - Command Line Tool
------------------------------------------------------------
Max configured JVM memory (Xmx): 239.8MB
Detected Java version: 1.8.0_91
------------------------------------------------------------
12:12:54 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]
12:12:54 INFO  ca.uhn.fhir.cli.RunServerCommand - Preparing HAPI FHIR JPA server on port 8080
12:12:55 INFO  ca.uhn.fhir.cli.RunServerCommand - Starting HAPI FHIR JPA server in DSTU2 mode
12:13:26 WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata : Cannot create PoolableConnectionFactory (Failed to create database &#39;directory:target/jpaserver_derby_files&#39;, see the next exception for details.)
Killed
</pre></div>


<p>Does anyone have any pointers? The <code>derby.log</code> file is empty and I'm not sure where to look next. Thanks a lot!</p>



<a name="153836105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-fhir-cli%20server%20error/near/153836105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-fhir-cli.20server.20error.html#153836105">(Jul 01 2016 at 19:45)</a>:</h4>
<p>At one stage I used this: <strong>JAVA_HOME=<code>/usr/libexec/java_home</code> ./hapi-fhir-cli run-server </strong> - though it doesn't sound like finding java is your problem...</p>



<a name="153836106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-fhir-cli%20server%20error/near/153836106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gaston Fiore <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-fhir-cli.20server.20error.html#153836106">(Jul 01 2016 at 19:52)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191321">@David Hay</span> , indeed, I don't think that finding Java is the problem. I could finally start the server, but what's surprising is that I haven't changed anything. The output that I get changes from try to try by some strange reason. On most tries I got:</p>
<div class="codehilite"><pre><span></span>gaston@pgx-fhir:~/bin$ java -jar hapi-fhir-cli.jar run-server
------------------------------------------------------------
ðŸ”¥ HAPI FHIR 1.5 - Command Line Tool
------------------------------------------------------------
Max configured JVM memory (Xmx): 239.8MB
Detected Java version: 1.8.0_91
------------------------------------------------------------
12:01:54 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]
12:01:54 INFO  ca.uhn.fhir.cli.RunServerCommand - Preparing HAPI FHIR JPA server on port 8080
12:01:55 INFO  ca.uhn.fhir.cli.RunServerCommand - Starting HAPI FHIR JPA server in DSTU2 mode
Killed
</pre></div>


<p>One other time I got:</p>
<div class="codehilite"><pre><span></span>gaston@pgx-fhir:~/bin$ java -jar hapi-fhir-cli.jar run-server
------------------------------------------------------------
ðŸ”¥ HAPI FHIR 1.5 - Command Line Tool
------------------------------------------------------------
Max configured JVM memory (Xmx): 239.8MB
Detected Java version: 1.8.0_91
------------------------------------------------------------
12:12:54 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]
12:12:54 INFO  ca.uhn.fhir.cli.RunServerCommand - Preparing HAPI FHIR JPA server on port 8080
12:12:55 INFO  ca.uhn.fhir.cli.RunServerCommand - Starting HAPI FHIR JPA server in DSTU2 mode
12:13:26 WARN  o.h.e.j.e.i.JdbcEnvironmentInitiator - HHH000342: Could not obtain connection to query metadata : Cannot create PoolableConnectionFactory (Failed to create database &#39;directory:target/jpaserver_derby_files&#39;, see the next exception for details.)
Killed
</pre></div>


<p>And one time the server started:</p>
<div class="codehilite"><pre><span></span>gaston@pgx-fhir:~/bin/server$ java -jar ../hapi-fhir-cli.jar run-server
------------------------------------------------------------
ðŸ”¥ HAPI FHIR 1.5 - Command Line Tool
------------------------------------------------------------
Max configured JVM memory (Xmx): 239.8MB
Detected Java version: 1.8.0_91
------------------------------------------------------------
17:16:21 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]
17:16:22 INFO  ca.uhn.fhir.cli.RunServerCommand - Preparing HAPI FHIR JPA server on port 8080
17:16:22 INFO  ca.uhn.fhir.cli.RunServerCommand - Starting HAPI FHIR JPA server in DSTU2 mode
17:16:52 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]
17:16:55 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU1]
17:16:55 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2_HL7ORG]
17:16:56 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU3]
17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 10000, SQLState: 01J01
17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - Database &#39;directory:target/jpaserver_derby_files&#39; not created, connection made to existing database instead.
17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 10000, SQLState: 01J01
17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - Database &#39;directory:target/jpaserver_derby_files&#39; not created, connection made to existing database instead.
17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 10000, SQLState: 01J01
17:17:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - Database &#39;directory:target/jpaserver_derby_files&#39; not created, connection made to existing database instead.
17:17:09 INFO  ca.uhn.fhir.cli.RunServerCommand - Server started on port 8080
17:17:09 INFO  ca.uhn.fhir.cli.RunServerCommand - Web Testing UI : http://localhost:8080/
17:17:09 INFO  ca.uhn.fhir.cli.RunServerCommand - Server Base URL: http://localhost:8080/baseDstu2/
</pre></div>


<p>I never changed permissions or anything. <span class="user-mention" data-user-id="191319">@James Agnew</span> , do you have any ideas what could be going on? I don't know why I'm not getting a consistent behavior. Thanks a lot!</p>



<a name="153836112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-fhir-cli%20server%20error/near/153836112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gaston Fiore <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-fhir-cli.20server.20error.html#153836112">(Jul 01 2016 at 20:55)</a>:</h4>
<p>Now it did not start. Again, I have not changed anything:</p>
<div class="codehilite"><pre>gaston@pgx-fhir:~/bin/server$ java -jar ../hapi-fhir-cli.jar run-server
------------------------------------------------------------
ðŸ”¥ HAPI FHIR 1.5 - Command Line Tool
------------------------------------------------------------
Max configured JVM memory (Xmx): 239.8MB
Detected Java version: 1.8.0_91
------------------------------------------------------------
20:49:45 INFO  ca.uhn.fhir.context.FhirContext - Creating new FHIR context for FHIR version [DSTU2]
20:49:46 INFO  ca.uhn.fhir.cli.RunServerCommand - Preparing HAPI FHIR JPA server on port 8080
20:49:46 INFO  ca.uhn.fhir.cli.RunServerCommand - Starting HAPI FHIR JPA server in DSTU2 mode
Killed
</pre></div>



<a name="153836316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-fhir-cli%20server%20error/near/153836316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-fhir-cli.20server.20error.html#153836316">(Jul 04 2016 at 22:15)</a>:</h4>
<p>I wonder if it's possible it's running out of memory... Can you try it with a larger memory setting?</p>
<div class="codehilite"><pre>java -Xmx1024m -jar ../hapi-fhir-cli.jar run-server
</pre></div>



<a name="153836392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi-fhir-cli%20server%20error/near/153836392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gaston Fiore <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi-fhir-cli.20server.20error.html#153836392">(Jul 05 2016 at 12:22)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191319">@James Agnew</span> ! I'm also going to enable swap memory in the host to see if that helps.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
