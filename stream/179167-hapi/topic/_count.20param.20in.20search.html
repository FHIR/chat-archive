---
layout: page
title: "FHIR Chat  · _count param in search · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/_count.20param.20in.20search.html">_count param in search</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153827143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/_count%20param%20in%20search/near/153827143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/_count.20param.20in.20search.html#153827143">(May 12 2016 at 01:52)</a>:</h4>
<p>I'm working on a HAPI server and trying to add the _count parameter to a search endpoint. I can take it in as an input parameter, and handle it inside my code, but it isn't added back into the resultant searchset bundle when the result gets marshalled from the collection I return. Is there another way I should be trying to do this?</p>



<a name="153827277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/_count%20param%20in%20search/near/153827277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/_count.20param.20in.20search.html#153827277">(May 12 2016 at 14:01)</a>:</h4>
<p>Hi Jim- Where is is missing in the result? Do you mean like it's not showing up in the self link?</p>



<a name="153827615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/_count%20param%20in%20search/near/153827615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/_count.20param.20in.20search.html#153827615">(May 12 2016 at 22:43)</a>:</h4>
<p>the spec page is really vague, but says "The server should repeat the original _count parameter in its returned page links". I was kind of expecting to see it alongside "total" in the bundle that comes back. (Not sure if that's right)</p>



<a name="153827616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/_count%20param%20in%20search/near/153827616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/_count.20param.20in.20search.html#153827616">(May 12 2016 at 22:47)</a>:</h4>
<p>Well, the general idea here is that the server isn't required to include <code>_count</code> in the links, but one way or the other it should return pages that are the same size as the ones the client originally asked for.</p>
<p>I do see the count param coming back in the self/paging links though, which is how HAPI satisfies this requirement: <a href="http://fhirtest.uhn.ca/baseDstu2/_history?_count=5" target="_blank" title="http://fhirtest.uhn.ca/baseDstu2/_history?_count=5">http://fhirtest.uhn.ca/baseDstu2/_history?_count=5</a></p>



<a name="153827617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/_count%20param%20in%20search/near/153827617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/_count.20param.20in.20search.html#153827617">(May 12 2016 at 22:47)</a>:</h4>
<p>ah</p>



<a name="153827618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/_count%20param%20in%20search/near/153827618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/_count.20param.20in.20search.html#153827618">(May 12 2016 at 22:49)</a>:</h4>
<p>oh, i see</p>



<a name="153827619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/_count%20param%20in%20search/near/153827619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/_count.20param.20in.20search.html#153827619">(May 12 2016 at 22:50)</a>:</h4>
<p>thanks :)</p>



<a name="153827620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/_count%20param%20in%20search/near/153827620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/_count.20param.20in.20search.html#153827620">(May 12 2016 at 22:50)</a>:</h4>
<p>np! :)</p>



<a name="153827624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/_count%20param%20in%20search/near/153827624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/_count.20param.20in.20search.html#153827624">(May 12 2016 at 23:39)</a>:</h4>
<p>hmm, still not sure how to handle this. If I capture it as an @Count parameter in my provider, then I can use the value when I process the search, but then (a) the "total" value in the result is the total returned rather than the total matched, and (b) the _count parameter disappears from the self link</p>



<a name="153827864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/_count%20param%20in%20search/near/153827864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/_count.20param.20in.20search.html#153827864">(May 13 2016 at 23:14)</a>:</h4>
<p>Oh- you're right! It looks like if you have a parameter with <code>@Count</code> on it, the server ignores the URL parameter entirely. That is a bug for sure. I'm just testing a fix, will commit shortly.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
