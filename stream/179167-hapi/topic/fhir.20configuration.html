---
layout: page
title: "FHIR Chat  · fhir configuration · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html">fhir configuration</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="223752200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223752200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223752200">(Jan 23 2021 at 14:28)</a>:</h4>
<p>Hello, guys!<br>
I am going to <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter">contribute</a> a convenience docker-compose file which supports multistage build and contains some initial configuration via environment variables.<br>
For example I found this document that describes how to enable <a href="https://smilecdr.com/docs/configuration_categories/fhir_bulk_operations.html#property-fhir-bulk-export-enabled">FHIR Bulk export</a> but I need help on how to use the Example Property <code>module.[MODULE_ID].config.bulk_export.enabled = false</code> via environment variables.<br>
Also I don't understand how <code>applocation.yml file</code>'s  <code>hapi.fhir.bulk_export_enabled</code> property is related to the example mentioned above ( I mean <code>module.[MODULE_ID].config.bulk_export.enabled = false</code>)<br>
Thanks!</p>



<a name="223752225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223752225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223752225">(Jan 23 2021 at 14:29)</a>:</h4>
<p>PS: what is <code>[MODULE_ID]</code></p>



<a name="223752362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223752362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223752362">(Jan 23 2021 at 14:32)</a>:</h4>
<p>PS2: What PATH the application.yml file is located by default in the container</p>



<a name="223752850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223752850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223752850">(Jan 23 2021 at 14:44)</a>:</h4>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">version</span><span class="p">:</span> <span class="s">'3.7'</span>
<span class="nt">services</span><span class="p">:</span>
  <span class="nt">hapi-fhir-jpaserver-startv2</span><span class="p">:</span>
    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
    <span class="nt">restart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">on-failure</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">"8081:8080"</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">hapi-data:/data/hapi</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="nt">hapi.fhir.bulk_export_enabled</span><span class="p">:</span> <span class="s">"true"</span>
<span class="c1">#      SPRING_CONFIG_LOCATION: 'file:///data/hapi/application.yaml'</span>
<span class="nt">volumes</span><span class="p">:</span>
  <span class="nt">hapi-data</span><span class="p">:</span>
</code></pre></div>
<p><code>hapi.fhir.bulk_export_enabled: "true"</code> value successfully applied.</p>



<a name="223753045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223753045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223753045">(Jan 23 2021 at 14:48)</a>:</h4>
<p>So, the main question is how to understand <a href="https://smilecdr.com/docs/configuration_categories/fhir_bulk_operations.html#property-fhir-bulk-export-enabled">documentation</a> and its  example<code>module.[MODULE_ID].config.bulk_export.enabled = false</code></p>



<a name="223754949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223754949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223754949">(Jan 23 2021 at 15:30)</a>:</h4>
<p>In the container I've built, the yml is located at tomcat…webapps…ROOT…WEB-INF…classes</p>



<a name="223755375"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223755375" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223755375">(Jan 23 2021 at 15:39)</a>:</h4>
<p>Thanks! Found <code>/usr/local/tomcat/webapps/ROOT/WEB-INF/classes/application.yaml</code></p>



<a name="223757596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223757596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223757596">(Jan 23 2021 at 16:28)</a>:</h4>
<p>Do we need to rebuild the image if we decide to use MySQL instead of H2? or just change application.yml ?</p>



<a name="223790559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223790559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223790559">(Jan 24 2021 at 02:16)</a>:</h4>
<p>Need to create the db and its user/owner first?</p>



<a name="223799573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223799573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223799573">(Jan 24 2021 at 06:38)</a>:</h4>
<p>Mysql container is fine. I have checked it with adminer, the db and its user are created. But hapi container responds with 404 as soon as I switch to use mysql in the application.yaml according to the documentation on github</p>



<a name="223799643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223799643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223799643">(Jan 24 2021 at 06:41)</a>:</h4>
<p>I am using master branch, strictly following the README.md</p>



<a name="223800034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223800034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223800034">(Jan 24 2021 at 06:54)</a>:</h4>
<p>Does the db and app reside within the same network?</p>



<a name="223800138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223800138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223800138">(Jan 24 2021 at 06:58)</a>:</h4>
<p>Maybe docker-compose.yml need to be configured accordingly.</p>



<a name="223800467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223800467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223800467">(Jan 24 2021 at 07:09)</a>:</h4>
<p>Yes! They are in the same network. The docker-compose.yml looks correct.</p>



<a name="223800565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223800565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223800565">(Jan 24 2021 at 07:12)</a>:</h4>
<p>jpa:<br>
    properties:<br>
    hibernate.dialect: org.hibernate.dialect.MySQLDialect</p>



<a name="223800576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223800576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223800576">(Jan 24 2021 at 07:13)</a>:</h4>
<p>Yeah! Let me try it</p>



<a name="223800579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223800579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223800579">(Jan 24 2021 at 07:13)</a>:</h4>
<p>Did you set the dialect in the app...yml?</p>



<a name="223800623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223800623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223800623">(Jan 24 2021 at 07:14)</a>:</h4>
<p>I tried it yesterday with MySQL8Dialect</p>



<a name="223800690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223800690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223800690">(Jan 24 2021 at 07:17)</a>:</h4>
<p>No more hints here.  I'm not an IT guy, sorry.</p>



<a name="223801598"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223801598" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223801598">(Jan 24 2021 at 07:48)</a>:</h4>
<p>Is mysql in a container or separate. My gut feeling is the dB connection isn't working, either hapi user doesn't exist, wrong password, wrong/missing database or user has wrong permissions.</p>
<p>Hapi will normally generate table structures on start up.</p>



<a name="223802042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223802042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223802042">(Jan 24 2021 at 08:00)</a>:</h4>
<p>It's working now with the following config:</p>
<ol>
<li>docker-compose.yml</li>
</ol>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">version</span><span class="p">:</span> <span class="s">"3.7"</span>
<span class="nt">services</span><span class="p">:</span>
  <span class="nt">hapi-fhir-jpaserver-start</span><span class="p">:</span>
    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
    <span class="nt">restart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">on-failure</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">"8080:8080"</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./configs/application.yaml:/data/hapi/application.yaml</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="nt">SPRING_CONFIG_LOCATION</span><span class="p">:</span> <span class="s">'file:///data/hapi/application.yaml'</span>

  <span class="nt">hapi-fhir-mysql</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mysql:5</span>
    <span class="nt">container_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">hapi-fhir-mysql</span>
    <span class="nt">restart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="nt">MYSQL_DATABASE</span><span class="p">:</span> <span class="s">'hapi'</span>
      <span class="nt">MYSQL_USER</span><span class="p">:</span> <span class="s">'admin'</span>
      <span class="nt">MYSQL_PASSWORD</span><span class="p">:</span> <span class="s">'admin'</span>
      <span class="nt">MYSQL_ROOT_PASSWORD</span><span class="p">:</span> <span class="s">'admin'</span>
</code></pre></div>
<ol start="2">
<li>application.yml</li>
</ol>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span>
  <span class="nt">datasource</span><span class="p">:</span>
    <span class="nt">url</span><span class="p">:</span> <span class="s">'jdbc:mysql://hapi-fhir-mysql:3306/hapi'</span>
    <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
    <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
    <span class="nt">driverClassName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">com.mysql.jdbc.Driver</span>
  <span class="nt">jpa</span><span class="p">:</span>
    <span class="nt">properties</span><span class="p">:</span>
      <span class="nt">hibernate.dialect</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">org.hibernate.dialect.MySQLDialect</span>
</code></pre></div>



<a name="223802139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223802139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223802139">(Jan 24 2021 at 08:02)</a>:</h4>
<p>pay attention: <br>
1.<code>mysql:5</code> not <code>mysql:latest</code> in docker-compose yml</p>
<ol start="2">
<li><code>hibernate.dialect</code> needs to be set as <code>org.hibernate.dialect.MySQLDialect</code></li>
</ol>
<p>Thanks!</p>



<a name="223802223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223802223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223802223">(Jan 24 2021 at 08:05)</a>:</h4>
<p>I think its caused because the dialect gets never set because of this bug: <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/issues/199">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/issues/199</a></p>



<a name="223802235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223802235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223802235">(Jan 24 2021 at 08:05)</a>:</h4>
<p>Dirty workaround: change the default dialect in the java class</p>



<a name="223802828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223802828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223802828">(Jan 24 2021 at 08:20)</a>:</h4>
<p>Dialect is automatically deduced</p>



<a name="223802851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223802851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223802851">(Jan 24 2021 at 08:21)</a>:</h4>
<p>See <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/src/main/java/ca/uhn/fhir/jpa/starter/JpaHibernateDialectProvider.java">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/src/main/java/ca/uhn/fhir/jpa/starter/JpaHibernateDialectProvider.java</a></p>



<a name="223802899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223802899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223802899">(Jan 24 2021 at 08:22)</a>:</h4>
<p>Oh, right. Had a similar issue but the reason wasn‘t the dialect, but the lucene folder.</p>



<a name="223802908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223802908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223802908">(Jan 24 2021 at 08:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> yeah, you are right!</p>



<a name="223804888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223804888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223804888">(Jan 24 2021 at 09:22)</a>:</h4>
<p><span class="user-mention" data-user-id="376706">@Vasyl Herman</span> Congrats!</p>



<a name="223804899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223804899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223804899">(Jan 24 2021 at 09:22)</a>:</h4>
<p><span class="user-mention" data-user-id="192103">@Lin Zhang</span> Thank you !!!</p>



<a name="223804916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223804916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223804916">(Jan 24 2021 at 09:23)</a>:</h4>
<p>I am not sure why, it's working with <code>mysql:5</code></p>



<a name="223804957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223804957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223804957">(Jan 24 2021 at 09:24)</a>:</h4>
<p>no other options need to be changed</p>



<a name="223805019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223805019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223805019">(Jan 24 2021 at 09:26)</a>:</h4>
<p>The db init was configed/executed when using PostgreSQL.</p>



<a name="223805053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223805053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223805053">(Jan 24 2021 at 09:27)</a>:</h4>
<p>so, you think it's better to use PostgreSQL ?</p>



<a name="223805114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223805114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223805114">(Jan 24 2021 at 09:29)</a>:</h4>
<p>I mean it might also related to the issue.</p>



<a name="223805169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223805169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223805169">(Jan 24 2021 at 09:30)</a>:</h4>
<p><span class="user-mention" data-user-id="192103">@Lin Zhang</span> <br>
Also, do you think it's worth to change <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/docker-compose.yml">docker-compose.yml</a>? <code>image: mysql:latest</code> --&gt; <code>image: mysql:5</code> ?</p>



<a name="223805241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223805241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223805241">(Jan 24 2021 at 09:32)</a>:</h4>
<p>I haven't tried MySQL, i.e., no experience with MySQL.</p>



<a name="223805828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223805828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223805828">(Jan 24 2021 at 09:50)</a>:</h4>
<p><span class="user-mention" data-user-id="192103">@Lin Zhang</span> <br>
Also, let me ask you another question:<br>
I have <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/wiki/Let's-Build---DevDays-US-2020#seeding-some-data">seeded two patients</a> but when I refresh the page it doesn't show summary next to Patient resource as shown here on <a href="http://hapi.fhir.org/">global server</a><br>
<a href="/user_uploads/10155/75xuLidPByBjiKGPnj1Dv1rM/summary.png">summary.png</a><br>
Can you please help with that?</p>
<div class="message_inline_image"><a href="/user_uploads/10155/75xuLidPByBjiKGPnj1Dv1rM/summary.png" title="summary.png"><img src="/user_uploads/10155/75xuLidPByBjiKGPnj1Dv1rM/summary.png"></a></div>



<a name="223806083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223806083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223806083">(Jan 24 2021 at 09:58)</a>:</h4>
<p>It's a time lag I think. But it's also bothering to me.  Maybe it's related to indexing config such as frequency.</p>
<p>In the meantime, the count would include the (logically) deleted resources.</p>



<a name="223806447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223806447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223806447">(Jan 24 2021 at 10:08)</a>:</h4>
<p>Great, I have elasticsearch enabled, now summary is shown</p>



<a name="223806513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223806513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223806513">(Jan 24 2021 at 10:10)</a>:</h4>
<p>no, I might be wrong. I have disabled it now, summary is shown anyway</p>



<a name="223807031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223807031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223807031">(Jan 24 2021 at 10:26)</a>:</h4>
<p>Only I know it laggs.</p>



<a name="223809289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223809289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223809289">(Jan 24 2021 at 11:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192103">Lin Zhang</span> <a href="#narrow/stream/179167-hapi/topic/fhir.20configuration/near/223806083">said</a>:</p>
<blockquote>
<p>Maybe it's related to indexing config such as frequency.</p>
</blockquote>
<p>Can you please tell me where this config located? it's been more then an hour since I put a new Patient but the count hasn't been updated yet.</p>



<a name="223811282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/223811282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#223811282">(Jan 24 2021 at 12:18)</a>:</h4>
<p>Sorry, I don't know the config. But the Web UI might be related to:</p>
<p><a href="https://github.com/hapifhir/hapi-fhir/tree/master/hapi-fhir-testpage-overlay">https://github.com/hapifhir/hapi-fhir/tree/master/hapi-fhir-testpage-overlay</a></p>



<a name="234875326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/234875326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#234875326">(Apr 16 2021 at 15:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="376706">Vasil Herman</span> <a href="#narrow/stream/179167-hapi/topic/fhir.20configuration/near/223802042">said</a>:</p>
<blockquote>
<p>It's working now with the following config:</p>
<ol>
<li>docker-compose.yml</li>
</ol>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">version</span><span class="p">:</span> <span class="s">"3.7"</span>
<span class="nt">services</span><span class="p">:</span>
  <span class="nt">hapi-fhir-jpaserver-start</span><span class="p">:</span>
    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
    <span class="nt">restart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">on-failure</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="s">"8080:8080"</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./configs/application.yaml:/data/hapi/application.yaml</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="nt">SPRING_CONFIG_LOCATION</span><span class="p">:</span> <span class="s">'file:///data/hapi/application.yaml'</span>

  <span class="nt">hapi-fhir-mysql</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mysql:5</span>
    <span class="nt">container_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">hapi-fhir-mysql</span>
    <span class="nt">restart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">always</span>
    <span class="nt">environment</span><span class="p">:</span>
      <span class="nt">MYSQL_DATABASE</span><span class="p">:</span> <span class="s">'hapi'</span>
      <span class="nt">MYSQL_USER</span><span class="p">:</span> <span class="s">'admin'</span>
      <span class="nt">MYSQL_PASSWORD</span><span class="p">:</span> <span class="s">'admin'</span>
      <span class="nt">MYSQL_ROOT_PASSWORD</span><span class="p">:</span> <span class="s">'admin'</span>
</code></pre></div>
<ol start="2">
<li>application.yml</li>
</ol>
<p><div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span>
  <span class="nt">datasource</span><span class="p">:</span>
    <span class="nt">url</span><span class="p">:</span> <span class="s">'jdbc:mysql://hapi-fhir-mysql:3306/hapi'</span>
    <span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
    <span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">admin</span>
    <span class="nt">driverClassName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">com.mysql.jdbc.Driver</span>
  <span class="nt">jpa</span><span class="p">:</span>
    <span class="nt">properties</span><span class="p">:</span>
      <span class="nt">hibernate.dialect</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">org.hibernate.dialect.MySQLDialect</span>
</code></pre></div><br>
</p>
</blockquote>
<p><span class="user-mention" data-user-id="376706">@Vasil Herman</span> <span class="user-mention" data-user-id="191427">@Jens Villadsen</span> I am trying to run HAPI 5.3 in AWS Fargate (its like a Kubernetes blackbox)  is it possible to override <code>application.yml</code> settings using environment variables like MYSQL_PASS etc</p>



<a name="234897841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/234897841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vasyl Herman <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#234897841">(Apr 16 2021 at 18:09)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191783">@dsh</span> !<br>
I think so, It's possible. I didn't try.</p>



<a name="234913869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/234913869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#234913869">(Apr 16 2021 at 20:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> any idea ?</p>



<a name="235308632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/fhir%20configuration/near/235308632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jame Dang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/fhir.20configuration.html#235308632">(Apr 20 2021 at 08:43)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191783">@dsh</span> : I try to config Starter project with mysql but it always use H2. Do you have the same problem ? My config<br>
  datasource:<br>
    url: 'jdbc:mysql://localhost:3307/hapi_dstu4'<br>
    username: root<br>
    password: xxxxx<br>
    driverClassName: com.mysql.jdbc.Driver<br>
    max-active: 15</p>
<p>I found the problem, thanks</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
