---
layout: page
title: "FHIR Chat  · Bug: unexpected encoding behavior on UUID-Ids · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Bug.3A.20unexpected.20encoding.20behavior.20on.20UUID-Ids.html">Bug: unexpected encoding behavior on UUID-Ids</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="198584854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Bug%3A%20unexpected%20encoding%20behavior%20on%20UUID-Ids/near/198584854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Bug.3A.20unexpected.20encoding.20behavior.20on.20UUID-Ids.html#198584854">(May 24 2020 at 14:07)</a>:</h4>
<p>I experienced this issue some while ago:</p>
<div class="codehilite"><pre><span></span><code> <span class="n">Observation</span> <span class="n">o</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Observation</span><span class="p">();</span>
    <span class="n">o</span><span class="p">.</span><span class="na">setStatus</span><span class="p">(</span><span class="n">ObservationStatus</span><span class="p">.</span><span class="na">FINAL</span><span class="p">);</span>
    <span class="n">id</span> <span class="o">=</span> <span class="n">IdDt</span><span class="p">.</span><span class="na">newRandomUuid</span><span class="p">();</span>
    <span class="n">o</span><span class="p">.</span><span class="na">setId</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">parser</span><span class="p">.</span><span class="na">encodeResourceToString</span><span class="p">(</span><span class="n">o</span><span class="p">));</span>
</code></pre></div>


<p>Output:</p>
<div class="codehilite"><pre><span></span><code>urn:uuid:92ba7135-b731-430f-bdc0-87d6a78ef0f7
{
  &quot;resourceType&quot;: &quot;Observation&quot;,
  &quot;status&quot;: &quot;final&quot;
}
</code></pre></div>



<a name="198584896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Bug%3A%20unexpected%20encoding%20behavior%20on%20UUID-Ids/near/198584896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Bug.3A.20unexpected.20encoding.20behavior.20on.20UUID-Ids.html#198584896">(May 24 2020 at 14:08)</a>:</h4>
<p>the parser doesn't encode the id if it is an urn:uuid.</p>



<a name="198584900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Bug%3A%20unexpected%20encoding%20behavior%20on%20UUID-Ids/near/198584900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Bug.3A.20unexpected.20encoding.20behavior.20on.20UUID-Ids.html#198584900">(May 24 2020 at 14:08)</a>:</h4>
<p>I think this is wrong and should be fixed.</p>



<a name="198739639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Bug%3A%20unexpected%20encoding%20behavior%20on%20UUID-Ids/near/198739639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Bug.3A.20unexpected.20encoding.20behavior.20on.20UUID-Ids.html#198739639">(May 26 2020 at 09:43)</a>:</h4>
<p><a href="https://github.com/jamesagnew/hapi-fhir/issues/1868">https://github.com/jamesagnew/hapi-fhir/issues/1868</a></p>



<a name="199408224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Bug%3A%20unexpected%20encoding%20behavior%20on%20UUID-Ids/near/199408224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Sauer <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Bug.3A.20unexpected.20encoding.20behavior.20on.20UUID-Ids.html#199408224">(Jun 01 2020 at 18:55)</a>:</h4>
<p>I had the same problem. But the specification say:</p>
<p>Any combination of upper- or lower-case ASCII letters ('A'..'Z', and 'a'..'z', numerals ('0'..'9'), '-' and '.', with a length limit of 64 characters. (This might be an integer, an un-prefixed OID, UUID or any other identifier pattern that meets these constraints.)   xs:string   JSON string<br>
Regex: [A-Za-z0-9\-\.]{1,64}</p>
<p>So an id starting wirh urn:uuid isn‘t a valid id...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
