---
layout: page
title: "FHIR Chat  · Upgrading from 4.1 HAPI JPA  to 5.3 in Docker · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html">Upgrading from 4.1 HAPI JPA  to 5.3 in Docker</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="233372408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/233372408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#233372408">(Apr 06 2021 at 19:09)</a>:</h4>
<p>Hi we have HAPI v4.1 running in Docker on AWS Fargate (no shell access), so I am wondering what steps I need to take to upgrade to 5.3</p>



<a name="233372923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/233372923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#233372923">(Apr 06 2021 at 19:13)</a>:</h4>
<p>From the documentation  <a href="https://hapifhir.io/hapi-fhir/docs/server_jpa/upgrading.html">https://hapifhir.io/hapi-fhir/docs/server_jpa/upgrading.html</a> running the <code>hapi-fhir-cli</code>will not be possible (bcoz of Fargate) unless either I change the docker container start command or deploy the 5.x outside docker to access and run <code>hapi-fhir-cli</code>  for data migration and then deploy the 5.x version in docker/fargate</p>



<a name="233376712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/233376712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#233376712">(Apr 06 2021 at 19:41)</a>:</h4>
<p>any insight or verification of the steps will be mucho appreciated</p>



<a name="233376986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/233376986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#233376986">(Apr 06 2021 at 19:43)</a>:</h4>
<p>Our database is 190GB so I am assuming its going to take some time to migrate all of that, but any ball park idea on how much time??</p>



<a name="234231165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234231165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234231165">(Apr 12 2021 at 21:07)</a>:</h4>
<p>Where is docker image of <a href="https://hub.docker.com/r/hapiproject/hapi/tags?page=1&amp;ordering=last_updated">HAPI v5.3 on dockerhub</a>? I can see 5.4 release on docker but there is no corresponding <code>hapi-fhir-cli</code> for 5.4? So is <a href="https://hub.docker.com/r/hapiproject/hapi/tags?page=1&amp;ordering=last_updated">hapiproject/hapi:v5.4.0</a> tagged mistakenly?</p>
<p>If I use <code>hapi-fhir-cli</code> of 5.3 on 5.4 will it cause problems?</p>



<a name="234231914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234231914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234231914">(Apr 12 2021 at 21:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> any idea on the missing docker image for 5.3?</p>



<a name="234235174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234235174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234235174">(Apr 12 2021 at 21:37)</a>:</h4>
<p>Unfortunately I'm not sure - I didn't set up the dockerhub integration and TBH I don't really understand how it works.</p>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> <span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> any ideas?</p>



<a name="234236458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234236458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234236458">(Apr 12 2021 at 21:50)</a>:</h4>
<p>The CLI jar does not get bundle in the Docker image, so you will want to build a separate docker image with just the CLI put on it that you can run in interactive mode that has access to the database</p>



<a name="234236481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234236481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234236481">(Apr 12 2021 at 21:50)</a>:</h4>
<p>Really, the CLI's primary (sole?) purpose is to upgrade the database schema/data</p>



<a name="234236502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234236502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234236502">(Apr 12 2021 at 21:50)</a>:</h4>
<p>So, you could theoretically run the CLI on <em>any</em> VM or machine that has access to the database</p>



<a name="234236525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234236525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234236525">(Apr 12 2021 at 21:51)</a>:</h4>
<p>(it doesn't necessarily have to be run through docker)</p>



<a name="234236621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234236621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234236621">(Apr 12 2021 at 21:52)</a>:</h4>
<p>besides that, I don't think you would want to start the 5.2 docker service before upgrading the database schema with the CLI</p>



<a name="234236669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234236669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234236669">(Apr 12 2021 at 21:52)</a>:</h4>
<p>so, even if the CLI were packaged with the docker image that runs the HAPI service, you wouldn't want it to run right away...</p>



<a name="234236710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234236710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234236710">(Apr 12 2021 at 21:53)</a>:</h4>
<p>really, I think best to take down the docker stack, run the cli on a machine that has access to the database, and then start the new stack with 5.2</p>



<a name="234236717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234236717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234236717">(Apr 12 2021 at 21:53)</a>:</h4>
<p>hope that helps and makes sense</p>



<a name="234238695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234238695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234238695">(Apr 12 2021 at 22:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> thanks for the reply. So I am running cli from 5.3 right now, so I am assuming I will be on 5.3 database wise...but  I am not sure if I can run HAPI 5.4 against schema of 5.3</p>



<a name="234238783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234238783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234238783">(Apr 12 2021 at 22:14)</a>:</h4>
<p>on another note, the migrate I just started on a 2.7GB database has  been running for over 30 min now and I don't know how long will it run</p>



<a name="234238871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234238871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234238871">(Apr 12 2021 at 22:15)</a>:</h4>
<p>so based on 2.7GB migrate taking over 30 minutes I am assuming 190GB production database will take over 24 hours if not more <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span> <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>



<a name="234239193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234239193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234239193">(Apr 12 2021 at 22:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span>  <span class="user-mention" data-user-id="191427">@Jens Villadsen</span> where is the Dockerfile used to create the <a href="https://hub.docker.com/layers/hapiproject/hapi/v5.4.0/images/sha256-c1aeaef66181769e8962cfd5d756c04664b653c2d1fcbf427407823cc9291267?context=explore">5.4 image</a></p>
<p>perhaps I can use that to create an image for HAPI 5.3</p>



<a name="234239566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234239566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234239566">(Apr 12 2021 at 22:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191783">Daya Sharma</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20to.205.2Ex.20HAPI.20in.20Docker/near/234239193">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191505">Sean McIlvenna</span>  <span class="user-mention silent" data-user-id="191427">Jens Villadsen</span> where is the Dockerfile used to create the <a href="https://hub.docker.com/layers/hapiproject/hapi/v5.4.0/images/sha256-c1aeaef66181769e8962cfd5d756c04664b653c2d1fcbf427407823cc9291267?context=explore">5.4 image</a></p>
<p>perhaps I can use that to create an image for HAPI 5.3</p>
</blockquote>
<p>never mind I think I found it <a href="https://github.com/hms-dbmi/hapi-fhir-docker/blob/master/Dockerfile">https://github.com/hms-dbmi/hapi-fhir-docker/blob/master/Dockerfile</a></p>



<a name="234240954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234240954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234240954">(Apr 12 2021 at 22:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191783">Daya Sharma</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20to.205.2Ex.20HAPI.20in.20Docker/near/234238871">said</a>:</p>
<blockquote>
<p>so based on 2.7GB migrate taking over 30 minutes I am assuming 190GB production database will take over 24 hours if not more <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span> <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>
</blockquote>
<p>This is the slowest migration I have ever seen ... its updating 10K rows in 10 min<br>
<code>2021-04-12 22:23:33.924 [worker--2] INFO  c.u.f.j.m.t.BaseColumnCalculatorTask 5_0_0.20200501.3: Updated 10000 rows on HFJ_SPIDX_DATE in 00:10:22</code></p>



<a name="234241522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234241522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234241522">(Apr 12 2021 at 22:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191783">Daya Sharma</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20to.205.2Ex.20HAPI.20in.20Docker/near/234239566">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191783">Daya Sharma</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20to.205.2Ex.20HAPI.20in.20Docker/near/234239193">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191505">Sean McIlvenna</span>  <span class="user-mention silent" data-user-id="191427">Jens Villadsen</span> where is the Dockerfile used to create the <a href="https://hub.docker.com/layers/hapiproject/hapi/v5.4.0/images/sha256-c1aeaef66181769e8962cfd5d756c04664b653c2d1fcbf427407823cc9291267?context=explore">5.4 image</a></p>
<p>perhaps I can use that to create an image for HAPI 5.3</p>
</blockquote>
<p>never mind I think I found it <a href="https://github.com/hms-dbmi/hapi-fhir-docker/blob/master/Dockerfile">https://github.com/hms-dbmi/hapi-fhir-docker/blob/master/Dockerfile</a></p>
</blockquote>
<p>hmm I was mistaken that Dockerfile is not the right one. <span class="user-mention" data-user-id="191319">@James Agnew</span> could you please point me to someone who can share that Dockerfile source and someone who can comment on the slowness of the <code>./hapi-fhir-cli migrate-database</code> as mentioned above ^^</p>



<a name="234242180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234242180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234242180">(Apr 12 2021 at 22:52)</a>:</h4>
<p>Is this the one <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/Dockerfile">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/Dockerfile</a> ?</p>



<a name="234245526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234245526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234245526">(Apr 12 2021 at 23:27)</a>:</h4>
<p>its now 2 hours and counting for 3GB database migration <span aria-label="worried" class="emoji emoji-1f61f" role="img" title="worried">:worried:</span></p>



<a name="234246164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234246164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234246164">(Apr 12 2021 at 23:34)</a>:</h4>
<p>ok it finally finished in 2 hours and 14 min, the most time taken by was by task <code> c.u.f.j.m.t.BaseColumnCalculatorTask</code> approx  2 hours</p>



<a name="234247923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234247923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234247923">(Apr 12 2021 at 23:56)</a>:</h4>
<p>Further progress and hurdles...</p>
<p>Creating Docker image for 5.3 after unzipping source code from <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/releases/tag/v5.3.0">release tagged 5.3</a></p>
<div class="codehilite"><pre><span></span><code>[ec2-user@ip-xxxxxx hapi-fhir-jpaserver-starter-5.3.0]$ docker build -t hapi-fhir-jpaserver-start:5.3.0 .
Sending build context to Docker daemon  10.98MB
Step 1/11 : FROM maven:3.6.3-jdk-11-slim as build-hapi
 ---&gt; 0627c0e38d77
Step 2/11 : WORKDIR /tmp/hapi-fhir-jpaserver-starter
 ---&gt; Using cache
 ---&gt; f70b7367b352
Step 3/11 : COPY pom.xml .
 ---&gt; Using cache
 ---&gt; 433846491b8e
Step 4/11 : RUN mvn -e -ntp dependency:go-offline
 ---&gt; Running in cc1b3bd0e402
[INFO] Error stacktraces are turned on.
[INFO] Scanning for projects...
[WARNING] The project ca.uhn.hapi.fhir:hapi-fhir-jpaserver-starter:war:5.3.0 uses prerequisites which is only intended for maven-plugin projects but not for non maven-plugin projects. For such purposes you should use the maven-enforcer-plugin. See https://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html
[INFO]
[INFO] ------------&lt; ca.uhn.hapi.fhir:hapi-fhir-jpaserver-starter &gt;------------
[INFO] Building HAPI FHIR JPA Server - Starter Project 5.3.0
[INFO] --------------------------------[ war ]---------------------------------
[INFO]
[INFO] --- maven-dependency-plugin:3.1.2:go-offline (default-cli) @ hapi-fhir-jpaserver-starter ---
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  23.450 s
[INFO] Finished at: 2021-04-13T00:07:24Z
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:3.1.2:go-offline (default-cli) on project hapi-fhir-jpaserver-starter: org.eclipse.aether.resolution.DependencyResolutionException: Could not find artifact ca.uhn.hapi.fhir:hapi-fhir-testpage-overlay:jar:5.3.0 in oss-snapshots (https://oss.sonatype.org/content/repositories/snapshots/) -&gt; [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-dependency-plugin:3.1.2:go-offline (default-cli) on project hapi-fhir-jpaserver-starter: org.eclipse.aether.resolution.DependencyResolutionException: Could not find artifact ca.uhn.hapi.fhir:hapi-fhir-testpage-overlay:jar:5.3.0 in oss-snapshots (https://oss.sonatype.org/content/repositories/snapshots/)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:566)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)
Caused by: org.apache.maven.plugin.MojoExecutionException: org.eclipse.aether.resolution.DependencyResolutionException: Could not find artifact ca.uhn.hapi.fhir:hapi-fhir-testpage-overlay:jar:5.3.0 in oss-snapshots (https://oss.sonatype.org/content/repositories/snapshots/)
    at org.apache.maven.plugins.dependency.resolvers.GoOfflineMojo.doExecute (GoOfflineMojo.java:88)
    at org.apache.maven.plugins.dependency.AbstractDependencyMojo.execute (AbstractDependencyMojo.java:144)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:566)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)
Caused by: org.apache.maven.shared.transfer.dependencies.resolve.internal.Maven31DependencyResolverException: org.eclipse.aether.resolution.DependencyResolutionException: Could not find artifact ca.uhn.hapi.fhir:hapi-fhir-testpage-overlay:jar:5.3.0 in oss-snapshots (https://oss.sonatype.org/content/repositories/snapshots/)
    at org.apache.maven.shared.transfer.dependencies.resolve.internal.Maven31DependencyResolver.resolveDependencies (Maven31DependencyResolver.java:251)
    at org.apache.maven.shared.transfer.dependencies.resolve.internal.Maven31DependencyResolver.resolveDependencies (Maven31DependencyResolver.java:90)
    at org.apache.maven.shared.transfer.dependencies.resolve.internal.DefaultDependencyResolver.resolveDependencies (DefaultDependencyResolver.java:85)
    at org.apache.maven.plugins.dependency.resolvers.GoOfflineMojo.resolveDependableCoordinate (GoOfflineMojo.java:125)
    at org.apache.maven.plugins.dependency.resolvers.GoOfflineMojo.resolveDependencyArtifacts (GoOfflineMojo.java:112)
    at org.apache.maven.plugins.dependency.resolvers.GoOfflineMojo.doExecute (GoOfflineMojo.java:68)
    at org.apache.maven.plugins.dependency.AbstractDependencyMojo.execute (AbstractDependencyMojo.java:144)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:193)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:566)
</code></pre></div>
<p>Basically it boils down to **Could not find artifact ca.uhn.hapi.fhir:hapi-fhir-testpage-overlay:jar:5.3.0 in oss-snapshots (<a href="https://oss.sonatype.org/content/repositories/snapshots/">https://oss.sonatype.org/content/repositories/snapshots/</a>)<br>
**<br>
Complete logs <a href="https://gist.github.com/8b37418d9b3cd6fd4cead7249f646dc3">are here</a></p>
<p>Any idea what the problem might be? Is this the reason why 5.3 docker image was never released? If not then can someone <strong>please </strong> guide me how I can solve the above problem?</p>



<a name="234248061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234248061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234248061">(Apr 12 2021 at 23:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  any help here ^ is much appreciated</p>



<a name="234248073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234248073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234248073">(Apr 12 2021 at 23:58)</a>:</h4>
<p>as I am not a Java guy</p>



<a name="234249721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234249721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234249721">(Apr 13 2021 at 00:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> <span class="user-mention" data-user-id="191319">@James Agnew</span>   ^ any idea? seems this problem was also mentioned about 2 months ago <a href="https://groups.google.com/g/hapi-fhir/c/obU2xqJ4eBs">here</a></p>



<a name="234249917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234249917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234249917">(Apr 13 2021 at 00:19)</a>:</h4>
<p>on further digging I found this in Nexus <a href="https://i.imgur.com/VC5T2fm.png">https://i.imgur.com/VC5T2fm.png</a> not sure if that's the jar dependency not found by maven ?</p>
<div class="message_inline_image"><a href="https://i.imgur.com/VC5T2fm.png"><img src="https://i.imgur.com/VC5T2fm.png"></a></div>



<a name="234274277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234274277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234274277">(Apr 13 2021 at 06:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191783">@dsh</span> The <code>Dockerfile</code> for that project is here: <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/Dockerfile">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/Dockerfile</a></p>
<p>I have had similar problems building the 5.3 branch for a long time. I haven't tried in quite a while. I had hoped it would have been resolved by now, but it appears maybe not... Would have to lean on <span class="user-mention" data-user-id="191319">@James Agnew</span> to address why dependency resolution is failing for the testpgae-overlay:5.3</p>
<p>My main idea for why the CLI would be running slowly is related to the location of the CLI compared to the database server... Maybe try running the CLI from a machine that is sitting <em>very close</em> to the DB, if it's not already? Otherwise, again, would have to defer to James.</p>



<a name="234274938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234274938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234274938">(Apr 13 2021 at 06:32)</a>:</h4>
<p>With that said.. I don't see a <code>rel_5_3_0</code> branch, yet. But, <code>master</code> seems to indicate that it is 5.3.0. So I'm altering the CI build on Docker Hub to build the <code>master</code> branch as <code>latest</code>, which currently happens to be 5.3.0</p>



<a name="234275022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275022">(Apr 13 2021 at 06:32)</a>:</h4>
<p>Guessing James &amp; company are getting ready to release 5.3.0 of the <code>hapi-fhir-jpaserver-starter</code> project and haven't yet wrapped it all up? which would explain why <code>rel_5_3_0</code> doesn't exist yet?</p>



<a name="234275095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275095">(Apr 13 2021 at 06:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span>  I thought <code>master</code> branch was 5.4.0, no ?</p>



<a name="234275202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275202">(Apr 13 2021 at 06:34)</a>:</h4>
<p>Not according to <code>pom.xml</code> here: <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/pom.xml">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/pom.xml</a></p>



<a name="234275212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275212">(Apr 13 2021 at 06:34)</a>:</h4>
<div class="codehilite"><pre><span></span><code>    &lt;parent&gt;
        &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;
        &lt;artifactId&gt;hapi-fhir&lt;/artifactId&gt;
        &lt;!-- FIMXME KBD Change this to 5.3.0 BEFORE merging this code to master !  --&gt;
        &lt;version&gt;5.3.0&lt;/version&gt;
    &lt;/parent&gt;
</code></pre></div>



<a name="234275303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275303">(Apr 13 2021 at 06:35)</a>:</h4>
<p>so then the docker tagging is wrong?</p>



<a name="234275350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275350">(Apr 13 2021 at 06:36)</a>:</h4>
<p>Anyways... <code>:latest</code> is building now on docker hub. We'll see if it succeeds.<br>
<a href="https://hub.docker.com/repository/registry-1.docker.io/hapiproject/hapi/builds/2fef2357-efaf-4777-86a7-d9fcae294ed2">https://hub.docker.com/repository/registry-1.docker.io/hapiproject/hapi/builds/2fef2357-efaf-4777-86a7-d9fcae294ed2</a><br>
But, I gotta go to bed for now. I'll check in on it in the AM.</p>



<a name="234275393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275393">(Apr 13 2021 at 06:36)</a>:</h4>
<p>"the docker tag is wrong"...<br>
not sure which one you're referring to</p>



<a name="234275410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275410">(Apr 13 2021 at 06:37)</a>:</h4>
<p>I don't see 5.3.0 on <a href="https://hub.docker.com/repository/docker/hapiproject/hapi/tags?page=1&amp;ordering=last_updated">https://hub.docker.com/repository/docker/hapiproject/hapi/tags?page=1&amp;ordering=last_updated</a></p>



<a name="234275412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275412">(Apr 13 2021 at 06:37)</a>:</h4>
<p>this one <a href="https://hub.docker.com/layers/hapiproject/hapi/v5.4.0/images/sha256-c1aeaef66181769e8962cfd5d756c04664b653c2d1fcbf427407823cc9291267?context=explore">https://hub.docker.com/layers/hapiproject/hapi/v5.4.0/images/sha256-c1aeaef66181769e8962cfd5d756c04664b653c2d1fcbf427407823cc9291267?context=explore</a></p>



<a name="234275434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275434">(Apr 13 2021 at 06:37)</a>:</h4>
<p>there should not be 5.4.0 on docker hub</p>



<a name="234275448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275448">(Apr 13 2021 at 06:37)</a>:</h4>
<p>Oh, I see</p>



<a name="234275453"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275453" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275453">(Apr 13 2021 at 06:38)</a>:</h4>
<p>yah, I agree, it's weird</p>



<a name="234275489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275489">(Apr 13 2021 at 06:38)</a>:</h4>
<p>another <span class="user-mention" data-user-id="191319">@James Agnew</span>  question</p>



<a name="234275512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275512">(Apr 13 2021 at 06:38)</a>:</h4>
<p>I'm not sure why they created <code>rel_5_4_0</code> without there being a <code>rel_5_3_0</code></p>



<a name="234275514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275514">(Apr 13 2021 at 06:38)</a>:</h4>
<p>I suspect it may have been done in error</p>



<a name="234275542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275542">(Apr 13 2021 at 06:39)</a>:</h4>
<p>but, maybe not... the <code>pom.xml</code> in <code>rel_5_4_0</code> has:</p>
<div class="codehilite"><pre><span></span><code>    &lt;parent&gt;
        &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;
        &lt;artifactId&gt;hapi-fhir&lt;/artifactId&gt;
        &lt;!-- FIMXME KBD Change this to 5.3.0 BEFORE merging this code to master !  --&gt;
        &lt;version&gt;5.4.0-PRE2-SNAPSHOT&lt;/version&gt;
    &lt;/parent&gt;
</code></pre></div>



<a name="234275545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275545">(Apr 13 2021 at 06:39)</a>:</h4>
<p>So, that seems intentional</p>



<a name="234275569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275569">(Apr 13 2021 at 06:39)</a>:</h4>
<p>So, I guess I just can't explain why there is <code>rel_5_4_0</code> but no <code>rel_5_3_0</code></p>



<a name="234275592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275592">(Apr 13 2021 at 06:39)</a>:</h4>
<p>so it seems 5.3.0 was skipped and that bring me to the question that if I should be using 5.4.0 then where is the corresponding <code>hapi-fhir-cli</code> of 5.4.0</p>



<a name="234275597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275597">(Apr 13 2021 at 06:39)</a>:</h4>
<p>yes</p>



<a name="234275624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275624">(Apr 13 2021 at 06:40)</a>:</h4>
<p>agreed.. skipped, as far as I can tell</p>



<a name="234275657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275657">(Apr 13 2021 at 06:40)</a>:</h4>
<p>according to the pom.xml, 5.4.0 is still PRE2-SNAPSHOT</p>



<a name="234275666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275666">(Apr 13 2021 at 06:40)</a>:</h4>
<p>but 5.4.0 is not production ready yet, and there is no 5.3.0</p>



<a name="234275672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275672">(Apr 13 2021 at 06:40)</a>:</h4>
<p>yah</p>



<a name="234275686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275686">(Apr 13 2021 at 06:40)</a>:</h4>
<p>I think you need to get <span class="user-mention" data-user-id="191319">@James Agnew</span> to tell you what happened to <code>rel_5_3_0</code></p>



<a name="234275695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275695">(Apr 13 2021 at 06:40)</a>:</h4>
<p>as soon as it exists, the Docker Hub CI will build a tag for <code>:v5.3.0</code></p>



<a name="234275702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275702">(Apr 13 2021 at 06:41)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="191505">@Sean McIlvenna</span></p>



<a name="234275705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275705">(Apr 13 2021 at 06:41)</a>:</h4>
<p>np</p>



<a name="234275741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275741">(Apr 13 2021 at 06:41)</a>:</h4>
<p>FYI, <code>master</code> just finished building as <code>:latest</code></p>



<a name="234275767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275767">(Apr 13 2021 at 06:42)</a>:</h4>
<p>so, you could play around with using that until you get answers from James</p>



<a name="234275799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275799">(Apr 13 2021 at 06:42)</a>:</h4>
<p>if you wanted</p>



<a name="234275826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275826">(Apr 13 2021 at 06:42)</a>:</h4>
<p>thanks that helps</p>



<a name="234275841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275841">(Apr 13 2021 at 06:42)</a>:</h4>
<p>the answer may be to just create a tag/branch of <code>master</code> as <code>rel_5_3_0</code></p>



<a name="234275845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275845">(Apr 13 2021 at 06:42)</a>:</h4>
<p><em>shrug</em></p>



<a name="234275857"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275857" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275857">(Apr 13 2021 at 06:42)</a>:</h4>
<p>anyways... really gotta go to bed. :) g'nite!</p>



<a name="234275907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275907">(Apr 13 2021 at 06:43)</a>:</h4>
<p>On another note if I wanted to inject my own source for Spring integration in 5.3.0 then should I just start that docker image ? if not then I need to resolve teh above mentioned <code>maven</code> errors</p>



<a name="234275914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234275914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234275914">(Apr 13 2021 at 06:43)</a>:</h4>
<p>good night</p>



<a name="234286203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234286203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234286203">(Apr 13 2021 at 08:17)</a>:</h4>
<p>I have a hard time identifiying the problem here. Is there actually a problem?</p>



<a name="234286601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234286601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234286601">(Apr 13 2021 at 08:20)</a>:</h4>
<p>Yes there are multiple problems</p>
<p>5.3.0 docker image was missing, seems like it was skipped by mistake instead it was tagged 5.4.0 caused confusion since 5.4.0 is  not production ready.</p>



<a name="234286693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234286693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234286693">(Apr 13 2021 at 08:21)</a>:</h4>
<p>That indeed sounds like a problem, yes. Is that the only problem?</p>



<a name="234286695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234286695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234286695">(Apr 13 2021 at 08:21)</a>:</h4>
<p>plus there are bunch of maven problems trying to compile source tagged 5.3.0<br>
<span class="user-mention" data-user-id="191427">@Jens Villadsen</span>  ^</p>



<a name="234286859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234286859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234286859">(Apr 13 2021 at 08:23)</a>:</h4>
<p>But that maven resolution-thing was covered by <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/issues/214">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/issues/214</a></p>



<a name="234286940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234286940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234286940">(Apr 13 2021 at 08:23)</a>:</h4>
<p>seems like the fix was after  5.3.0 source tag was created</p>



<a name="234288335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234288335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234288335">(Apr 13 2021 at 08:35)</a>:</h4>
<p>well .. we can retag the 5.3.0 ... - thats an option</p>



<a name="234288373"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234288373" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234288373">(Apr 13 2021 at 08:35)</a>:</h4>
<p>its just a tag</p>



<a name="234288609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234288609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234288609">(Apr 13 2021 at 08:37)</a>:</h4>
<p>so u mean the current master is at 5.3.0 ? or you saying source tagged 5.3.0 will be built and docker image released</p>



<a name="234288660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234288660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234288660">(Apr 13 2021 at 08:38)</a>:</h4>
<p>that wasn't what I said. I said we can make a new git tag</p>



<a name="234288812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234288812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234288812">(Apr 13 2021 at 08:39)</a>:</h4>
<p>ok. what about the 5.3.0 docker image will that be recreated too from source tag 5.3.0 ? or from master ?</p>



<a name="234289005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234289005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234289005">(Apr 13 2021 at 08:40)</a>:</h4>
<p>can't say ... I don't currenlt have the time to go into it ... check with <span class="user-mention" data-user-id="191319">@James Agnew</span> or <span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> if they have the time to look into it.</p>



<a name="234290595"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234290595" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234290595">(Apr 13 2021 at 08:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> - I believe retagging 'authorization' would best be placed at you</p>



<a name="234368553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234368553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234368553">(Apr 13 2021 at 17:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191505">Sean McIlvenna</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20to.205.2Ex.20HAPI.20in.20Docker/near/234275350">said</a>:</p>
<blockquote>
<p>Anyways... <code>:latest</code> is building now on docker hub. We'll see if it succeeds.<br>
<a href="https://hub.docker.com/repository/registry-1.docker.io/hapiproject/hapi/builds/2fef2357-efaf-4777-86a7-d9fcae294ed2">https://hub.docker.com/repository/registry-1.docker.io/hapiproject/hapi/builds/2fef2357-efaf-4777-86a7-d9fcae294ed2</a><br>
But, I gotta go to bed for now. I'll check in on it in the AM.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> is the latest docker image built off of <a href="https://github.com/hapifhir/hapi-fhir/releases/tag/v5.3.0">https://github.com/hapifhir/hapi-fhir/releases/tag/v5.3.0</a> ?? or is it built off of master?</p>
<p>The reason I ask I am upgrading HAPI JPA Server Starter from 4.1 to 5.3 but when I run latest against DB migrated by 5.3.0 <code>hapi-fhir-cli</code> I get so many errors related DDL statements</p>
<div class="codehilite"><pre><span></span><code>2021-04-13 17:16:22.025 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl [ExceptionHandlerLoggedImpl.java:27] GenerationTarget encountered exception accepting command : Error executing DDL &quot;create sequence seq_blkexcol_pid start 1 increment 50&quot; via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create sequence seq_blkexcol_pid start 1 increment 50&quot; via JDBC Statement
</code></pre></div>



<a name="234369493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234369493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234369493">(Apr 13 2021 at 17:36)</a>:</h4>
<p><code>:latest</code> -&gt; <code>master</code></p>



<a name="234369733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234369733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234369733">(Apr 13 2021 at 17:38)</a>:</h4>
<p>I defer to James for guidance on upgrades. I've <em>never</em> successfully upgraded my MySQL schemas using the CLI. I get similar errors to you.<br>
One thought: you're jumping a number of versions/updates between 4.1 and 5.3... Consider running the CLI for 4.2, then 4.3, then 5.0, then 5.1, etc.</p>



<a name="234369781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234369781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234369781">(Apr 13 2021 at 17:38)</a>:</h4>
<p>until you get to the version you want</p>



<a name="234369834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234369834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234369834">(Apr 13 2021 at 17:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> would someone be able to do a docker release of 5.3.0 from <a href="https://github.com/hapifhir/hapi-fhir/releases/tag/v5.3.0">https://github.com/hapifhir/hapi-fhir/releases/tag/v5.3.0</a> ? just to avoid any problems</p>



<a name="234369867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234369867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234369867">(Apr 13 2021 at 17:38)</a>:</h4>
<p>sure I'll try to do that</p>



<a name="234369868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234369868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234369868">(Apr 13 2021 at 17:38)</a>:</h4>
<p>one sec</p>



<a name="234369919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234369919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234369919">(Apr 13 2021 at 17:39)</a>:</h4>
<p>I <em>had</em> been basing Docker tags on GitHub branches</p>



<a name="234369973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234369973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234369973">(Apr 13 2021 at 17:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191505">Sean McIlvenna</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker/near/234369733">said</a>:</p>
<blockquote>
<p>I defer to James for guidance on upgrades. I've <em>never</em> successfully upgraded my MySQL schemas using the CLI. I get similar errors to you.<br>
One thought: you're jumping a number of versions/updates between 4.1 and 5.3... Consider running the CLI for 4.2, then 4.3, then 5.0, then 5.1, etc.</p>
</blockquote>
<p>You are right that I am jumping the versions but in my findings so far the CLI was smart to upgrade database schema from 4.1-&gt;4.2.... to 5.3, so all I had to do was run it once</p>



<a name="234369975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234369975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234369975">(Apr 13 2021 at 17:39)</a>:</h4>
<p>because that's how James&amp;Company had been doing releases</p>



<a name="234370265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234370265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234370265">(Apr 13 2021 at 17:41)</a>:</h4>
<p><code>:v5.3.0</code> is building based on github tag <code>v5.3.0</code> now</p>



<a name="234370289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234370289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234370289">(Apr 13 2021 at 17:41)</a>:</h4>
<p><a href="https://hub.docker.com/repository/registry-1.docker.io/hapiproject/hapi/builds/f14236d8-9bca-47e1-b25a-3e3d980c6863">https://hub.docker.com/repository/registry-1.docker.io/hapiproject/hapi/builds/f14236d8-9bca-47e1-b25a-3e3d980c6863</a></p>



<a name="234370923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234370923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234370923">(Apr 13 2021 at 17:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191783">dsh</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker/near/234368553">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191505">Sean McIlvenna</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20to.205.2Ex.20HAPI.20in.20Docker/near/234275350">said</a>:</p>
<p>&gt; </p>
<p>2021-04-13 17:16:22.025 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl [ExceptionHandlerLoggedImpl.java:27] GenerationTarget encountered exception accepting command : Error executing DDL "create sequence seq_blkexcol_pid start 1 increment 50" via JDBC Statement<br>
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "create sequence seq_blkexcol_pid start 1 increment 50" via JDBC Statement</p>
<div class="codehilite"><pre><span></span><code>````
Now I am getting these error related to log stream
</code></pre></div>
<p>2021-04-13 17:45:12.629 [main] ERROR c.u.f.jpa.searchparam.retry.Retrier [Retrier.java:79] Retry failure 15/60: org.springframework.orm.jpa.JpaSystemException: Unable to access lob stream; nested exception is org.hibernate.HibernateException: Unable to access lob stream</p>
<p><div class="codehilite"><pre><span></span><code>Any ideas on how to fix them?
</code></pre></div><br>
</p>
</blockquote>



<a name="234378410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234378410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234378410">(Apr 13 2021 at 18:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191505">Sean McIlvenna</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker/near/234370289">said</a>:</p>
<blockquote>
<p><a href="https://hub.docker.com/repository/registry-1.docker.io/hapiproject/hapi/builds/f14236d8-9bca-47e1-b25a-3e3d980c6863">https://hub.docker.com/repository/registry-1.docker.io/hapiproject/hapi/builds/f14236d8-9bca-47e1-b25a-3e3d980c6863</a></p>
</blockquote>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> could you please check the status of that build as I don't see 5.3.0 in docker hub at all. I cannot access that build URL</p>



<a name="234381357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234381357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234381357">(Apr 13 2021 at 18:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> could you please confirm if using <a href="https://hub.docker.com/repository/registry-1.docker.io/hapiproject/hapi/builds/f14236d8-9bca-47e1-b25a-3e3d980c6863">docker latest</a> is the right way to run JPA Starter 5.3.0 ??</p>



<a name="234381739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234381739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234381739">(Apr 13 2021 at 18:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> ^ please let me know if I am on the right track?</p>



<a name="234384224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234384224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234384224">(Apr 13 2021 at 19:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> latest is now 5.3.0</p>



<a name="234384630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234384630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234384630">(Apr 13 2021 at 19:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191783">@dsh</span> next time the project is tagged, the GH action on <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/.github/workflows/build-images.yaml">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/.github/workflows/build-images.yaml</a> is automatically run</p>



<a name="234384716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234384716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234384716">(Apr 13 2021 at 19:17)</a>:</h4>
<p>Credit goes to <a href="https://github.com/chgl">https://github.com/chgl</a></p>



<a name="234384752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234384752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234384752">(Apr 13 2021 at 19:17)</a>:</h4>
<p>meaning that the push is done automatically</p>



<a name="234387687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234387687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234387687">(Apr 13 2021 at 19:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191783">@dsh</span> that's because the v5.3.0 tag failed to build on docker hub:<br>
<code>Could not find artifact ca.uhn.hapi.fhir:hapi-fhir-testpage-overlay:jar:5.3.0 in oss-snapshots</code><br>
Just the same as you and I both previously got</p>



<a name="234387750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234387750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234387750">(Apr 13 2021 at 19:38)</a>:</h4>
<p>Need <span class="user-mention" data-user-id="191319">@James Agnew</span> or someone to push <code>hapi-fhir-testpage-overlay:jar:5.3.0</code> to OSS</p>



<a name="234388846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234388846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234388846">(Apr 13 2021 at 19:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> Thanks.</p>
<p>Assuming <code>master</code> branch maps to <code>hapiproject/hapi:latest</code> I am unable to run JPA server on it <a href="#narrow/stream/179166-implementers/topic/HibernateException/near/234373419">I get this error </a> </p>
<div class="codehilite"><pre><span></span><code>2021-04-13 19:05:21.598 [main] ERROR c.u.f.jpa.searchparam.retry.Retrier [Retrier.java:79] Retry failure 5/60: org.springframework.orm.jpa.JpaSystemException: Unable to access lob stream; nested exception is org.hibernate.HibernateException: Unable to access lob stream
</code></pre></div>
<p>any idea if <code>master</code> branch for Docker is even usable at the moment?</p>



<a name="234388933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234388933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234388933">(Apr 13 2021 at 19:47)</a>:</h4>
<p>GIven that's an exception stemming from Hibernate, I suspect that has something to do with database connectivity?</p>



<a name="234388966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234388966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234388966">(Apr 13 2021 at 19:47)</a>:</h4>
<p>Just a guess, though</p>



<a name="234390141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234390141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234390141">(Apr 13 2021 at 19:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191505">Sean McIlvenna</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker/near/234387750">said</a>:</p>
<blockquote>
<p>Need <span class="user-mention silent" data-user-id="191319">James Agnew</span> or someone to push <code>hapi-fhir-testpage-overlay:jar:5.3.0</code> to OSS</p>
</blockquote>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> could you or someone please push <code>hapi-fhir-testpage-overlay:jar:5.3.0</code> to OSS <a href="https://i.imgur.com/VC5T2fm.png">https://i.imgur.com/VC5T2fm.png</a></p>
<div class="message_inline_image"><a href="https://i.imgur.com/VC5T2fm.png"><img src="https://i.imgur.com/VC5T2fm.png"></a></div>



<a name="234398249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234398249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234398249">(Apr 13 2021 at 20:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> <span class="user-mention" data-user-id="191319">@James Agnew</span> to circle back on this ^ issue I just found the workaround <a href="https://github.com/openmrs/openmrs-contrib-plm-fhir-server/commit/5cd3dfe1d281a058ab1af6b8db163cb9d3e776ca">https://github.com/openmrs/openmrs-contrib-plm-fhir-server/commit/5cd3dfe1d281a058ab1af6b8db163cb9d3e776ca</a></p>
<p>Any idea why that PR has not been merged in the main branch ?</p>
<p>BTW the workaround works!!! <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="234402529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234402529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234402529">(Apr 13 2021 at 21:10)</a>:</h4>
<p>Couldn't tell you, to be honest. I only occasionally contribute to this repository :) So, not sure what has or has not been approved from PRs.</p>



<a name="234402660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234402660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234402660">(Apr 13 2021 at 21:11)</a>:</h4>
<p>About all I can do right now is tell you how the docker builds work and modify the CI builds for Docker Hub :/</p>



<a name="234402910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234402910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234402910">(Apr 13 2021 at 21:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> I understand. And thanks for your help. Now that I am able to build the release for 5.3.0, could you  help me with this server start error</p>
<div class="codehilite"><pre><span></span><code>2021-04-13 21:10:56.691 [main] ERROR c.u.f.jpa.searchparam.retry.Retrier [Retrier.java:79] Retry failure 5/60: org.springframework.orm.jpa.JpaSystemException: Unable to access lob stream; nested exception is org.hibernate.HibernateException: Unable to access lob stream
</code></pre></div>
<p>or pls let me know who can best help here</p>



<a name="234455203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234455203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234455203">(Apr 14 2021 at 07:43)</a>:</h4>
<p>Finally I got past that error by running this PLSQL function on Large Objects in my Postgres 12.6 on AWS RDS</p>
<div class="codehilite"><pre><span></span><code>CREATE OR REPLACE FUNCTION public.grant_select_on_large_objects()
 RETURNS text
 LANGUAGE plpgsql
AS $function$

    DECLARE
        REC BIGINT;

    begin

        FOR REC in   SELECT OID FROM pg_catalog.pg_largeobject_metadata
        loop

            execute &#39;grant select on LARGE OBJECT &#39; || REC || &#39; to caringly_db_master&#39;;

--          select &#39;LOBID is &#39; || REC.oid;

        END LOOP;

        return &#39;DONE&#39;;
    END;
$function$
;
</code></pre></div>
<p>but now I am facing another issue ... details here <a href="https://gist.github.com/f0249e5ce6fb5c3e6c376e59454268a2">https://gist.github.com/f0249e5ce6fb5c3e6c376e59454268a2</a></p>
<p>in short <strong> org.springframework.batch.core.JobParametersInvalidException: There must be a valid number for readChunkSize, which is at least 1. You must include [resourceTypes] as a Job Parameter</strong></p>
<div class="codehilite"><pre><span></span><code>2021-04-14 07:28:34.139 [main] INFO  com.zaxxer.hikari.HikariDataSource [HikariDataSource.java:347] HikariPool-1 - Shutdown initiated...
2021-04-14 07:28:34.140 [main] INFO  com.zaxxer.hikari.pool.HikariPool [HikariPool.java:204] HikariPool-1 - Close initiated...
2021-04-14 07:28:34.159 [main] INFO  com.zaxxer.hikari.pool.HikariPool [HikariPool.java:238] HikariPool-1 - Closed.
2021-04-14 07:28:34.160 [main] INFO  com.zaxxer.hikari.HikariDataSource [HikariDataSource.java:349] HikariPool-1 - Shutdown completed.
14-Apr-2021 07:28:34.161 SEVERE [main] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [/usr/local/tomcat/webapps/ROOT.war]
    java.lang.IllegalStateException: Error starting child
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:720)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:690)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:706)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:978)
        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1848)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:473)
    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]
        at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:717)
        ... 37 more
    Caused by: java.lang.IllegalStateException: Failed to execute ApplicationRunner
        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:798)
        at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:785)
        at org.springframework.boot.SpringApplication.run(SpringApplication.java:333)
        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:173)
        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:153)
        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:95)
        at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletConta
inerInitializer.java:174)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5128)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
        ... 38 more
    Caused by: org.springframework.batch.core.JobParametersInvalidException: There must be a valid number for readChunkSize, which is at least 1. You must include [resourceTypes] as a Job Parameter
        at ca.uhn.fhir.jpa.bulk.job.BulkExportJobParameterValidator.validate(BulkExportJobParameterValidator.java:92)
        at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:129)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.base/java.lang.reflect.Method.invoke(Method.java:566)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:127)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)
        at com.sun.proxy.$Proxy214.run(Unknown Source)
        at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.execute(JobLauncherApplicationRunner.java:199)
        at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.executeLocalJobs(JobLauncherApplicationRunner.java:173)
        at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.launchJobFromProperties(JobLauncherApplicationRunner.java:160)
        at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:155)
        at org.springframework.boot.autoconfigure.batch.JobLauncherApplicationRunner.run(JobLauncherApplicationRunner.java:150)
        at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:795)
        ... 46 more
14-Apr-2021 07:28:34.167 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [/usr/local/tomcat/webapps/ROOT.war] has finished in [35,076] ms
14-Apr-2021 07:28:34.177 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler [&quot;http-nio-8080&quot;]
14-Apr-2021 07:28:34.202 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in [35209] milliseconds
</code></pre></div>



<a name="234460690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234460690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234460690">(Apr 14 2021 at 08:28)</a>:</h4>
<p>Finally got the JPA server running but I don't see any of my previous data at all ... even though the CLI reported success <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>
<p>I wonder if starting server with <code>hibernate.hbm2ddl.auto: create-drop</code> caused the data to be wiped out ?</p>



<a name="234518386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234518386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234518386">(Apr 14 2021 at 15:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span>  could you please help here ?</p>



<a name="234529530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234529530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234529530">(Apr 14 2021 at 16:20)</a>:</h4>
<p>If you set the DDL mode to <code>create-drop</code> that does drop the data when the system shuts down. These values are itemized here: <a href="https://stackoverflow.com/questions/438146/what-are-the-possible-values-of-the-hibernate-hbm2ddl-auto-configuration-and-wha">https://stackoverflow.com/questions/438146/what-are-the-possible-values-of-the-hibernate-hbm2ddl-auto-configuration-and-wha</a></p>



<a name="234544188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234544188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234544188">(Apr 14 2021 at 17:49)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191319">@James Agnew</span>  changing the value to <code>hibernate.hbm2ddl.auto: update</code> helped and I was start JPA normally and  see the data only if JDBC (postgresql) user is super user with DDL rights. <strong>However if the user is a regular user with DML rights then I get these kinds of errors</strong></p>
<div class="codehilite"><pre><span></span><code>Hibernate: create sequence SEQ_VALUESET_PID start 1 increment 50
2021-04-14 17:45:12.719 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl [ExceptionHandlerLoggedImpl.java:27] GenerationTarget encountered exception accepting command : Error executing DDL &quot;create sequence SEQ_VALUESET_PID start 1 increment 50&quot; via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create sequence SEQ_VALUESET_PID start 1 increment 50&quot; via JDBC Statement
</code></pre></div>
<div class="codehilite"><pre><span></span><code>Caused by: org.postgresql.util.PSQLException: ERROR: permission denied for table hfj_resource
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2505)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2241)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:310)
    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:447)
    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:368)
    at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:158)
    at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:108)
    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)
    ... 111 common frames omitted
2021-04-14 17:48:26.025 [main] ERROR c.u.f.jpa.searchparam.retry.Retrier [Retrier.java:79] Retry failure 10/60: ca.uhn.fhir.rest.server.exceptions.InternalErrorException: could not extract ResultSet
</code></pre></div>



<a name="234722884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234722884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234722884">(Apr 15 2021 at 17:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191505">Sean McIlvenna</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker/near/234402529">said</a>:</p>
<blockquote>
<p>Couldn't tell you, to be honest. I only occasionally contribute to this repository :) So, not sure what has or has not been approved from PRs.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> I got past the error related to <code>hapi-fhir-testpage-overlay:jar:5.3.0</code> not found by maven by including this in <code>pom.xml</code></p>
<div class="codehilite"><pre><span></span><code>       &lt;pluginManagement&gt;
          &lt;plugins&gt;
              &lt;!--
              There is a bug in 3.1.2 that prevents go-offline from working
              Reported here:
              https://issues.apache.org/jira/browse/MDEP-739
              --&gt;
              &lt;plugin&gt;
                  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                  &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;
                  &lt;version&gt;3.1.1&lt;/version&gt;
              &lt;/plugin&gt;
          &lt;/plugins&gt;
      &lt;/pluginManagement&gt;
</code></pre></div>
<p>So with the above change could you please do  5.3.0 docker release ?</p>



<a name="234725001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234725001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234725001">(Apr 15 2021 at 18:05)</a>:</h4>
<p>So, where is this change? I'm not seeing it in github anywhere...</p>



<a name="234725090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234725090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234725090">(Apr 15 2021 at 18:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191783">@dsh</span></p>



<a name="234742725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234742725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234742725">(Apr 15 2021 at 19:59)</a>:</h4>
<p>here <a href="https://github.com/openmrs/openmrs-contrib-plm-fhir-server/commit/5cd3dfe1d281a058ab1af6b8db163cb9d3e776ca">https://github.com/openmrs/openmrs-contrib-plm-fhir-server/commit/5cd3dfe1d281a058ab1af6b8db163cb9d3e776ca</a> referred in this issue <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/issues/214">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/issues/214</a></p>



<a name="234742735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234742735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234742735">(Apr 15 2021 at 19:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span></p>



<a name="234744765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234744765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234744765">(Apr 15 2021 at 20:12)</a>:</h4>
<p>so, that's in a different fork of hapi-fhir-jpaserer-starter</p>



<a name="234744800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234744800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234744800">(Apr 15 2021 at 20:12)</a>:</h4>
<p>docker hub is based on hapifhir/hapi-fhir-jpaserver-starter</p>



<a name="234744830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234744830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234744830">(Apr 15 2021 at 20:12)</a>:</h4>
<p>but the fix was referenced in the issue #214</p>



<a name="234744844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234744844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234744844">(Apr 15 2021 at 20:13)</a>:</h4>
<p>and the fix works</p>



<a name="234744888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234744888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234744888">(Apr 15 2021 at 20:13)</a>:</h4>
<p>it may be referenced in issue #214, but it's not incorporated in hapifhir/hapi-fhir-jpaserver-starter as far as I can tell</p>



<a name="234744891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234744891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234744891">(Apr 15 2021 at 20:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> ^</p>



<a name="234744930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234744930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234744930">(Apr 15 2021 at 20:13)</a>:</h4>
<p>we need a commit on <code>hapifhir/hapi-fhir-jpaserver-starter</code> that applies a similar fix</p>



<a name="234745059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745059">(Apr 15 2021 at 20:14)</a>:</h4>
<p>so if I do a pull request will you be able to merge it ?</p>



<a name="234745392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745392">(Apr 15 2021 at 20:16)</a>:</h4>
<p>I'm not sure where to merge it <em>to</em></p>



<a name="234745393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745393">(Apr 15 2021 at 20:16)</a>:</h4>
<p>master...</p>



<a name="234745397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745397">(Apr 15 2021 at 20:16)</a>:</h4>
<p>a new rel_5_3_0 branch?</p>



<a name="234745402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745402">(Apr 15 2021 at 20:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span> this was merged in master <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/commit/12c19eff576a8b93eb26f922d46d988377c22f80#diff-9c5fb3d1b7e3b0f54bc5c4182965c4fe1f9023d449017cece3005d3f90e8e4d8">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/commit/12c19eff576a8b93eb26f922d46d988377c22f80#diff-9c5fb3d1b7e3b0f54bc5c4182965c4fe1f9023d449017cece3005d3f90e8e4d8</a></p>



<a name="234745451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745451">(Apr 15 2021 at 20:17)</a>:</h4>
<p>ah!</p>



<a name="234745460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745460">(Apr 15 2021 at 20:17)</a>:</h4>
<p>ok... so, master = 5.3.0</p>



<a name="234745468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745468">(Apr 15 2021 at 20:17)</a>:</h4>
<p>and works</p>



<a name="234745469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745469">(Apr 15 2021 at 20:17)</a>:</h4>
<p>?</p>



<a name="234745477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745477">(Apr 15 2021 at 20:17)</a>:</h4>
<p>and I don't think <code>master</code> currently maps to <code>5.3.0</code></p>



<a name="234745511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745511">(Apr 15 2021 at 20:17)</a>:</h4>
<p>hm</p>



<a name="234745517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745517">(Apr 15 2021 at 20:17)</a>:</h4>
<p>since 5.3.0 tag doesn't contain that fix</p>



<a name="234745557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745557">(Apr 15 2021 at 20:18)</a>:</h4>
<p>I think probably need to remove the 5.3.0 tag and re-create it based on master now</p>



<a name="234745658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745658">(Apr 15 2021 at 20:18)</a>:</h4>
<p>I'm going to do that, since v5.3.0 tag doesn't currently build anyways</p>



<a name="234745664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745664">(Apr 15 2021 at 20:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> is it safe to recreate 5.3.0 tag ?</p>



<a name="234745685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745685">(Apr 15 2021 at 20:18)</a>:</h4>
<p>hopefully that is the right decision and <span class="user-mention" data-user-id="191319">@James Agnew</span> doesn't get mad at me</p>



<a name="234745687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745687">(Apr 15 2021 at 20:18)</a>:</h4>
<p>lol</p>



<a name="234745713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745713">(Apr 15 2021 at 20:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span>  I think master may be 5.4.0 snapshot</p>



<a name="234745775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745775">(Apr 15 2021 at 20:19)</a>:</h4>
<p>not according to pom.xml in master</p>



<a name="234745782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745782">(Apr 15 2021 at 20:19)</a>:</h4>
<p>pom.xml in master says 5.3.0</p>



<a name="234745806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745806">(Apr 15 2021 at 20:19)</a>:</h4>
<div class="codehilite"><pre><span></span><code>    &lt;parent&gt;
        &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;
        &lt;artifactId&gt;hapi-fhir&lt;/artifactId&gt;
        &lt;!-- FIMXME KBD Change this to 5.3.0 BEFORE merging this code to master !  --&gt;
        &lt;version&gt;5.3.0&lt;/version&gt;
    &lt;/parent&gt;
</code></pre></div>



<a name="234745908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745908">(Apr 15 2021 at 20:20)</a>:</h4>
<p><a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/pom.xml#L18">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/pom.xml#L18</a></p>



<a name="234745965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234745965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234745965">(Apr 15 2021 at 20:20)</a>:</h4>
<p>on another front could you please help me with this problem in upgrade <a href="#narrow/stream/179167-hapi/topic/Migrating.20existing.20resources.20to.20use.20Profiles/near/234743410">https://chat.fhir.org/#narrow/stream/179167-hapi/topic/Migrating.20existing.20resources.20to.20use.20Profiles/near/234743410</a></p>
<p>or point me to the right folks</p>



<a name="234746097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234746097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234746097">(Apr 15 2021 at 20:21)</a>:</h4>
<p>github tag v5.3.0 currently points to this commit: <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/commit/46e0f8f37de97ed8823c5f7190218a3b2e66f165">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/commit/46e0f8f37de97ed8823c5f7190218a3b2e66f165</a><br>
I'm removing that tag, and re-creating it from master right now, which currently builds OK, includes the fix mentioned above, and points to HAPI core libraries v5.3.0</p>



<a name="234746289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234746289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234746289">(Apr 15 2021 at 20:22)</a>:</h4>
<p>done</p>



<a name="234746313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234746313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234746313">(Apr 15 2021 at 20:23)</a>:</h4>
<p>docker hub detected the tag change, and is re-building the docker image</p>



<a name="234746495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234746495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234746495">(Apr 15 2021 at 20:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191783">dsh</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker/near/234745965">said</a>:</p>
<blockquote>
<p>on another front could you please help me with this problem in upgrade <a href="#narrow/stream/179167-hapi/topic/Migrating.20existing.20resources.20to.20use.20Profiles/near/234743410">https://chat.fhir.org/#narrow/stream/179167-hapi/topic/Migrating.20existing.20resources.20to.20use.20Profiles/near/234743410</a></p>
<p>or point me to the right folks</p>
</blockquote>
<p><span class="user-mention" data-user-id="191505">@Sean McIlvenna</span>  any idea on how I can move forward on this last step in the upgrade process</p>



<a name="234746531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234746531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian Bacher <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234746531">(Apr 15 2021 at 20:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191505">Sean McIlvenna</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker/near/234744930">said</a>:</p>
<blockquote>
<p>we need a commit on <code>hapifhir/hapi-fhir-jpaserver-starter</code> that applies a similar fix</p>
</blockquote>
<p>That's actually <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/commit/12c19eff576a8b93eb26f922d46d988377c22f80">this commit</a>, which should be present in 5.3.0 already.</p>



<a name="234746850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234746850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234746850">(Apr 15 2021 at 20:26)</a>:</h4>
<p><span class="user-mention" data-user-id="259065">@Ian Bacher</span> you are right... however, the tag for v5.3.0 was created before the commit</p>



<a name="234746884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234746884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234746884">(Apr 15 2021 at 20:26)</a>:</h4>
<p>so, building from the tag was still broken</p>



<a name="234746892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234746892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234746892">(Apr 15 2021 at 20:26)</a>:</h4>
<p>that's why I had to move the tag</p>



<a name="234747023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234747023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian Bacher <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234747023">(Apr 15 2021 at 20:27)</a>:</h4>
<p>Oh, I see! I'm the maintainer of the fork... we've really just made a very small number of changes and use an GitHub bot to keep up-to-date, so I was surprised by the implication that there was a commit in our repo that wasn't in master.</p>



<a name="234808792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234808792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jame Dang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234808792">(Apr 16 2021 at 07:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> : I use R4 of the 5.4.0 Pre5 and I cannot find the ReferralRequest class, I think it is replaced by another class or it is not support by current version of HAPI, if it is not support by current HAPI version could you give me an advice what class can be used for keep Transfer Patient Information (maybe ServiceRequest)? Thanks for your support</p>



<a name="234858990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234858990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ian Bacher <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234858990">(Apr 16 2021 at 14:07)</a>:</h4>
<p><span class="user-mention" data-user-id="399592">@Jame Dang</span> There's nothing HAPI-specific about it. In R4, ReferralRequest and ProcedureRequest were merged into ServiceRequest. Note that the usual way to store intra-facilitiy or intra-organisational transfers is to track it via the Encounter.</p>



<a name="234859299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234859299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jame Dang <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234859299">(Apr 16 2021 at 14:08)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="259065">@Ian Bacher</span> : I'm using ServiceRequest now, thank you for your confirmation</p>



<a name="234866893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234866893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234866893">(Apr 16 2021 at 14:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191783">dsh</span> <a href="#narrow/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker/near/234544188">said</a>:</p>
<blockquote>
<p>Thanks <span class="user-mention silent" data-user-id="191319">James Agnew</span>  changing the value to <code>hibernate.hbm2ddl.auto: update</code> helped and I was able to start JPA normally and  see the data only if JDBC (postgresql) user is super user with DDL rights. <strong>However if the user is a regular user with DML rights then I get these kinds of errors</strong></p>
<div class="codehilite"><pre><span></span><code>Hibernate: create sequence SEQ_VALUESET_PID start 1 increment 50
2021-04-14 17:45:12.719 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl [ExceptionHandlerLoggedImpl.java:27] GenerationTarget encountered exception accepting command : Error executing DDL &quot;create sequence SEQ_VALUESET_PID start 1 increment 50&quot; via JDBC Statement
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;create sequence SEQ_VALUESET_PID start 1 increment 50&quot; via JDBC Statement
</code></pre></div>
<p><div class="codehilite"><pre><span></span><code>Caused by: org.postgresql.util.PSQLException: ERROR: relation &quot;seq_spidx_quantity_nrml&quot; already exists
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2505)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2241)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:310)
    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:447)
    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:368)
    at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:309)
    at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:295)
    at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:272)
    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:267)
    at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:98)
    at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)```
````
@**James Agnew** or @**Ian Bacher**  any pointers here ^ ?
</code></pre></div><br>
</p>
</blockquote>



<a name="234875451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234875451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234875451">(Apr 16 2021 at 15:38)</a>:</h4>
<p>sounds like you need to give the user more privileges</p>



<a name="234877799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234877799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234877799">(Apr 16 2021 at 15:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> since the <code>"seq_spidx_quantity_nrml"</code> relation already exists any idea on why its need to be recreated? and the surprising thing is its no impacting any resource creation logic ... but may this will bite when <strong>write</strong> load is heavy</p>



<a name="234879513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Upgrading%20from%204.1%20HAPI%20JPA%20%20to%205.3%20in%20Docker/near/234879513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Upgrading.20from.204.2E1.20HAPI.20JPA.20.20to.205.2E3.20in.20Docker.html#234879513">(Apr 16 2021 at 16:02)</a>:</h4>
<p>For those facing the same problem I was able to cross this hurdle by executing the output of this statement in psql shell</p>
<div class="codehilite"><pre><span></span><code>select &#39;ALTER TABLE &#39; || sequence_name || &#39; OWNER TO hapi_user;&#39; from information_schema.sequences where sequence_schema = &#39;public&#39;;
</code></pre></div>
<p>change <strong>hapi_user</strong> to whatever your username is</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
