---
layout: page
title: "FHIR Chat  · How to Invoke Operation using HAPI Java Library · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/How.20to.20Invoke.20Operation.20using.20HAPI.20Java.20Library.html">How to Invoke Operation using HAPI Java Library</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="267602903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/How%20to%20Invoke%20Operation%20using%20HAPI%20Java%20Library/near/267602903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Zhou <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/How.20to.20Invoke.20Operation.20using.20HAPI.20Java.20Library.html#267602903">(Jan 11 2022 at 16:02)</a>:</h4>
<p>Hello,<br>
We're trying to use the Java HAPI FHIR Library for one of our projects and we're having some questions on how to create a request to an endpoint with an operation.<br>
The library we're using is hapi-fhir-base-4.2.0, and the IGenericClient.java class we're using is at package ca.uhn.fhir.rest.client.api<br>
The docs for using operations on this library is at: <a href="https://hapifhir.io/hapi-fhir/docs/client/generic_client.html#extended-operations">https://hapifhir.io/hapi-fhir/docs/client/generic_client.html#extended-operations</a>, but there are no examples of using this against a type instead of an instance<br>
Here is the code we have that's generating a 400 code<br>
<a href="/user_uploads/10155/rpKMHDVGLgacgTCCsV34DZl8/Screen-Shot-2022-01-06-at-10.43.41-AM.png">Screen-Shot-2022-01-06-at-10.43.41-AM.png</a> <br>
<a href="/user_uploads/10155/QE2GUvT6-RUU1oJg3lH4pkSG/Screen-Shot-2022-01-11-at-11.02.26-AM.png">Screen-Shot-2022-01-11-at-11.02.26-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/rpKMHDVGLgacgTCCsV34DZl8/Screen-Shot-2022-01-06-at-10.43.41-AM.png" title="Screen-Shot-2022-01-06-at-10.43.41-AM.png"><img src="/user_uploads/10155/rpKMHDVGLgacgTCCsV34DZl8/Screen-Shot-2022-01-06-at-10.43.41-AM.png"></a></div><div class="message_inline_image"><a href="/user_uploads/10155/QE2GUvT6-RUU1oJg3lH4pkSG/Screen-Shot-2022-01-11-at-11.02.26-AM.png" title="Screen-Shot-2022-01-11-at-11.02.26-AM.png"><img src="/user_uploads/10155/QE2GUvT6-RUU1oJg3lH4pkSG/Screen-Shot-2022-01-11-at-11.02.26-AM.png"></a></div>



<a name="267602994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/How%20to%20Invoke%20Operation%20using%20HAPI%20Java%20Library/near/267602994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Zhou <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/How.20to.20Invoke.20Operation.20using.20HAPI.20Java.20Library.html#267602994">(Jan 11 2022 at 16:03)</a>:</h4>
<p>We're using this code for the Patient Request for Correction track with <span class="user-mention" data-user-id="191531">@Virginia Lorenzi</span> and <span class="user-mention" data-user-id="191321">@David Hay</span></p>



<a name="267607443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/How%20to%20Invoke%20Operation%20using%20HAPI%20Java%20Library/near/267607443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Zhou <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/How.20to.20Invoke.20Operation.20using.20HAPI.20Java.20Library.html#267607443">(Jan 11 2022 at 16:31)</a>:</h4>
<p>Here is the latest code we have trying to send the request to the testing server:</p>
<div class="codehilite"><pre><span></span><code>        var inParams = new Parameters();
        inParams.addParameter()
                .setName(&quot;CorrectionRequest&quot;)
                .setResource(bundle);
</code></pre></div>

<p>var remoteClient = FhirR4Config.getFhirContext().newRestfulGenericClient(endpoint.getAddress());<br>
            var result = remoteClient<br>
                    .operation()<br>
                    .onType(Communication.class)<br>
                    .named("$correctionrequest")<br>
                    .withParameters(inParams)<br>
                    .execute();</p>



<a name="267640014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/How%20to%20Invoke%20Operation%20using%20HAPI%20Java%20Library/near/267640014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Zhou <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/How.20to.20Invoke.20Operation.20using.20HAPI.20Java.20Library.html#267640014">(Jan 11 2022 at 20:24)</a>:</h4>
<p>We were able to resolve the issue. I've attached the final code below. We discovered some detail about processing the Parameter on the server side</p>
<p>var inParams = new Parameters();<br>
            inParams.addParameter()<br>
                    .setName("CorrectionRequest")<br>
                    .setResource(bundle);</p>
<div class="codehilite"><pre><span></span><code>        var remoteClient = FhirR4Config.getFhirContext().newRestfulGenericClient(endpoint.getAddress());
        var result = remoteClient
                .operation()
                .onType(Communication.class)
                .named(&quot;$correctionrequest&quot;)
                .withParameters(inParams)
                .execute();
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
