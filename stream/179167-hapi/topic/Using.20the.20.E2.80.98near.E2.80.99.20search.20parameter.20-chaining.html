---
layout: page
title: "FHIR Chat  · Using the ‘near’ search parameter -chaining · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20the.20.E2.80.98near.E2.80.99.20search.20parameter.20-chaining.html">Using the ‘near’ search parameter -chaining</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="257628188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Using%20the%20%E2%80%98near%E2%80%99%20search%20parameter%20-chaining/near/257628188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tushar Nair <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Using.20the.20.E2.80.98near.E2.80.99.20search.20parameter.20-chaining.html#257628188">(Oct 15 2021 at 00:30)</a>:</h4>
<p>We are using HAPI FHIR Server version: 5.4.1.1 and fhirVersion:4.0.1<br>
I am trying to implement the ‘near’ search parameter for looking up Location resources.<br>
Currently, when I look up the Location directly, example: [base]/ Location?near=-77.043167|38.904011|3|mi , it returns the results accurately.<br>
But if I try to look up the same resource as a reference within ‘HealthcareService’ it doesn’t return the result. To be clear I have posted the ‘HealthcareService’ resource where the said ‘Location’ resource is referenced in HealthcareService.location.</p>
<p>The queries I used:<br>
[base]/Healthcare?location.near=-77.043167|38.904011|2.5|mi<br>
{<br>
"resourceType": "Bundle",<br>
"id": "e6f11de6-5687-44a4-b60e-ec292704551b",<br>
"meta": {<br>
"lastUpdated": "2021-10-14T17:06:39.596-07:00"<br>
},<br>
"type": "searchset",<br>
"total": 0,<br>
"link": [<br>
{<br>
"relation": "self",</p>
<p>[base]/HealthcareService?location:near=-77.043167|38.904011|2.5|mi<br>
{<br>
"resourceType": "Bundle",<br>
"id": "8385e848-52f4-4ecb-81f5-3980417187f3",<br>
"meta": {<br>
"lastUpdated": "2021-10-14T17:12:28.276-07:00"<br>
},<br>
"type": "searchset",<br>
"total": 0,<br>
"link": [<br>
{<br>
"relation": "self",</p>
<p>[base]/ Location?_has:HealthcareService:location:_has:near=38.904011|-77.043167|5|mi<br>
"resourceType": "OperationOutcome",<br>
"issue": [<br>
{<br>
"severity": "error",<br>
"code": "processing",<br>
"diagnostics": "Invalid _has parameter syntax: :near"<br>
}<br>
]<br>
}</p>
<p>Is it a HAPI FHIR Server limitation? Or is this a case of using poor syntax?<br>
Can you please shed light on this and suggest the right way to execute this query? <span class="user-mention" data-user-id="191319">@James Agnew</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
