---
layout: page
title: "FHIR Chat  · Subscriptions enabled in CLI Server? · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscriptions.20enabled.20in.20CLI.20Server.3F.html">Subscriptions enabled in CLI Server?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="213469446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscriptions%20enabled%20in%20CLI%20Server%3F/near/213469446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscriptions.20enabled.20in.20CLI.20Server.3F.html#213469446">(Oct 15 2020 at 18:40)</a>:</h4>
<p>Hi I try to use R4 Subscriptions with the CLI server. I have version 5.1.0 and use the following command to start it:</p>
<div class="codehilite"><pre><span></span><code>hapi-fhir-cli run-server -p 8082 -v r4 --allow-external-refs
</code></pre></div>


<p>I can't get subscriptions with a simple rest-hook working. I use the following Subscription resource:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"Subscription"</span><span class="p">,</span>
  <span class="nt">"status"</span><span class="p">:</span> <span class="s2">"requested"</span><span class="p">,</span>
  <span class="nt">"criteria"</span><span class="p">:</span> <span class="s2">"Task?status=requested"</span><span class="p">,</span>
  <span class="nt">"channel"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"rest-hook"</span><span class="p">,</span>
    <span class="nt">"endpoint"</span><span class="p">:</span> <span class="s2">"http://localhost:8080/fhir"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>After that I POST a transaction Bundle with a Task Resource. But I don't get a POST on my hook endpoint.</p>



<a name="213637745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Subscriptions%20enabled%20in%20CLI%20Server%3F/near/213637745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Subscriptions.20enabled.20in.20CLI.20Server.3F.html#213637745">(Oct 17 2020 at 06:14)</a>:</h4>
<p>One has to enable subscriptions. For me, it works best with the Docker image of the JPA Starter Server:</p>
<div class="codehilite"><pre><span></span><code>docker run -p 8080:8080 -e hapi.fhir.subscription.resthook_enabled=true hapiproject/hapi:latest
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
