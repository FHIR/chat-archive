---
layout: page
title: "FHIR Chat  · Loading Lists Times Out · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Loading.20Lists.20Times.20Out.html">Loading Lists Times Out</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="169044511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Loading%20Lists%20Times%20Out/near/169044511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Loading.20Lists.20Times.20Out.html#169044511">(Jun 26 2019 at 16:01)</a>:</h4>
<p>We are building a reference implementation for a Drug Formulary IG -- <a href="http://hl7.org/fhir/us/Davinci-drug-formulary/Jun2019/" target="_blank" title="http://hl7.org/fhir/us/Davinci-drug-formulary/Jun2019/">http://hl7.org/fhir/us/Davinci-drug-formulary/Jun2019/</a> using HAPI 3.8.<br>
The IG profiles MedicationKnowledge for the drugs in a formulary, and List for the CoveragePlan (metadata, drug tiers, cost sharing).  The actual list entries in the List are references to FormularyDrug (MedicationKnowledge) entries.</p>
<p>The sample formulary we are trying to load has 4135 drugs in each plan.<br>
Loading the LIst elements is touch and go, and often times out.    For example, <a href="/user_uploads/10155/7HzOQTZupH0Doo-HolDAZXXz/0d33e2.List.json" target="_blank" title="0d33e2.List.json">0d33e2.List.json</a>    try loading with:</p>
<p>PUT <a href="http://hapi.fhir.org/baseR4/List/0d33e2" target="_blank" title="http://hapi.fhir.org/baseR4/List/0d33e2">http://hapi.fhir.org/baseR4/List/0d33e2</a>  ... it times out for me.   All of the referenced MedicationKNowledge entries are loaded.</p>
<p>I did succeed in loading a list of similar size:   <a href="http://hapi.fhir.org/baseR4/List/6448eb" target="_blank" title="http://hapi.fhir.org/baseR4/List/6448eb">http://hapi.fhir.org/baseR4/List/6448eb</a></p>
<p>Questions:<br>
1) Do you consider this a HAPI issue, or is it bad form to have lists with 1000s of elements?<br>
2) Since we are not concerned about referential integrity of the List,  are there means to speed up the load so it doesn't timeout?</p>
<p>Thanks,<br>
Saul<br>
<span class="user-mention" data-user-id="225612">@Stephen MacVicar</span></p>



<a name="169066555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Loading%20Lists%20Times%20Out/near/169066555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Loading.20Lists.20Times.20Out.html#169066555">(Jun 26 2019 at 18:32)</a>:</h4>
<p>As a follow up, HAPI initially <a href="/user_uploads/10155/IHDlkbugfqvCfK8ga_C3hmvU/stack_trace_1.txt" target="_blank" title="stack_trace_1.txt">throws an error</a> during the upload.</p>
<p>The client receives no response when this error occurs and times out. Then a bit later, the database raises a duplicate key error which causes HAPI to raise <a href="/user_uploads/10155/HppYIdHiLbcFvvvwdF4mGkpe/stack_trace_2.txt" target="_blank" title="stack_trace_2.txt">some more errors</a>. A duplicate key error would seem to indicate that the resource was successfully persisted despite the errors, and performing a search/read confirms that the resource was persisted and is available on the server.</p>



<a name="169066784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Loading%20Lists%20Times%20Out/near/169066784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saul Kravitz <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Loading.20Lists.20Times.20Out.html#169066784">(Jun 26 2019 at 18:35)</a>:</h4>
<p>Indeed, <a href="http://hapi.fhir.org/baseR4/List/0d33e2" target="_blank" title="http://hapi.fhir.org/baseR4/List/0d33e2">http://hapi.fhir.org/baseR4/List/0d33e2</a> is alive and well despite the time out.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
