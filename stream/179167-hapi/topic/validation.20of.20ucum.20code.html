---
layout: page
title: "FHIR Chat  · validation of ucum code · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.20of.20ucum.20code.html">validation of ucum code</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="172042635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/validation%20of%20ucum%20code/near/172042635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik Nielsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.20of.20ucum.20code.html#172042635">(Jul 30 2019 at 14:26)</a>:</h4>
<p>Validation against ValueSet seems to be depending on the availability of the used CodeSystem.</p>
<p>For the ValueSet ucum-common listed in (and read from) hapi-fhir-validation-resources-dstu3/src/main/resources/org/hl7/fhir/dstu3/model/valueset/valuesets.xml, the validation-code request fails:<br>
<a href="http://hapi.fhir.org/baseDstu3/ValueSet/$validate-code?url=http://hl7.org/fhir/ValueSet/ucum-common&amp;system=http://unitsofmeasure.org&amp;code=percent&amp;display=percent" target="_blank" title="http://hapi.fhir.org/baseDstu3/ValueSet/$validate-code?url=http://hl7.org/fhir/ValueSet/ucum-common&amp;system=http://unitsofmeasure.org&amp;code=percent&amp;display=percent">http://hapi.fhir.org/baseDstu3/ValueSet/$validate-code?url=http://hl7.org/fhir/ValueSet/ucum-common&amp;system=http://unitsofmeasure.org&amp;code=percent&amp;display=percent</a><br>
results in error with diagnostics "unable to find code system <a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>".</p>
<p>Attempting a similar request for a ValueSet (also in valuesets.xml) where the CodeSystem is defined in v3-codesystems.xml succeeds:<br>
<a href="http://hapi.fhir.org/baseDstu3/ValueSet/$validate-code?url=http://hl7.org/fhir/ValueSet/probability-distribution-type&amp;system=http://hl7.org/fhir/v3/ProbabilityDistributionType&amp;code=B" target="_blank" title="http://hapi.fhir.org/baseDstu3/ValueSet/$validate-code?url=http://hl7.org/fhir/ValueSet/probability-distribution-type&amp;system=http://hl7.org/fhir/v3/ProbabilityDistributionType&amp;code=B">http://hapi.fhir.org/baseDstu3/ValueSet/$validate-code?url=http://hl7.org/fhir/ValueSet/probability-distribution-type&amp;system=http://hl7.org/fhir/v3/ProbabilityDistributionType&amp;code=B</a><br>
results in validation succeeded.</p>
<p>Should the request be constructed differently to make validation against ucum-common succeed?</p>



<a name="172276484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/validation%20of%20ucum%20code/near/172276484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.20of.20ucum.20code.html#172276484">(Aug 02 2019 at 01:39)</a>:</h4>
<p>getting back to this; this is tricky. The terminology service doesn't believe the value set that a code is valid; it goes and checks that the code is actually valid before accepting that the value set actually contains it (it's not unusual to find value sets containing unusable / invalid codes). In this case, it hasn't got UCUM. I don't know what the HAPI arrangements are for UCUM</p>



<a name="172295969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/validation%20of%20ucum%20code/near/172295969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik Nielsen <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.20of.20ucum.20code.html#172295969">(Aug 02 2019 at 09:40)</a>:</h4>
<p>that makes sense given the occurrence of unusable/invalid codes. The UCUM being a compositional code system, a corresponding CodeSystem would quickly explode in number of permutations (as would the ValueSet) if completeness was aspired. Is a select/pragmatic subset a common approach?</p>



<a name="172296443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/validation%20of%20ucum%20code/near/172296443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/validation.20of.20ucum.20code.html#172296443">(Aug 02 2019 at 09:48)</a>:</h4>
<p>well, my terminology server has an internal API to a code system, and an implementation of the API for UCUM so that it's fully supported</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
