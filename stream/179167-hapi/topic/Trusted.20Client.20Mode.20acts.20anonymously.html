---
layout: page
title: "FHIR Chat  · Trusted Client Mode acts anonymously · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trusted.20Client.20Mode.20acts.20anonymously.html">Trusted Client Mode acts anonymously</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="175290345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/Trusted%20Client%20Mode%20acts%20anonymously/near/175290345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Troy Bergstrand <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/Trusted.20Client.20Mode.20acts.20anonymously.html#175290345">(Sep 09 2019 at 22:43)</a>:</h4>
<p>In our workflow, a user will log into a mobile app receiving a JWT with which it will issue requests on a backend. The backend, in turn, will make queries on the FHIR server. </p>
<p>I turned on Trusted Client Mode so that audit and consent work against the authenticated end-user vs. the service account. I ran a test query using Postman, everything worked as expected.</p>
<p>Thus far, I had been using Basic authentication. But our app is JWT driven. Figuring that it might take awhile to configure the FHIR server to validate the JWTs, I decided to run an experience to prove that JWT validation wasn't yet configured. I generated a token, passed it via Postman as a bearer token, and lo and behold the request worked. I reverted to Basic authentication passing bogus credentials and it still worked. </p>
<p>It appears that once you turn on Trusted Client Mode, any client is trusted, i.e., any anonymous/unknown client is trusted. Is this expected? </p>
<p>I was expecting that the Authorization header would still be validated before accepting the CDR-TrustedClient-Username and CDR-TrustedClient-Permission headers so that only my known client (via the service account) would be permitted to use these headers.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
