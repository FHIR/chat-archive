---
layout: page
title: "FHIR Chat  · create new search parameter for HAPI · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html">create new search parameter for HAPI</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="197057149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197057149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197057149">(May 10 2020 at 14:04)</a>:</h4>
<p>Hi All,</p>
<p>This might sound as a dumb question. <br>
I need to add a incoming message's date as a Extension to all of my resources. If i've added the extension with the date value coming  in the incoming message, then How can I make this date as a new "date" search parameter?</p>



<a name="197057237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197057237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197057237">(May 10 2020 at 14:07)</a>:</h4>
<p>The ultimate aim of this question is, currently we are quering the HAPI repository using "_lastUpdatedDate" we want to get rid of querying the last updated date generated by the HAPI. And use the date of incoming message. But this date should be searchable in all the resources like _lastUpdatedDate</p>



<a name="197057553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197057553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197057553">(May 10 2020 at 14:15)</a>:</h4>
<p>Im asking this question based on the Stackoverflow  comment i saw</p>



<a name="197057554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197057554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197057554">(May 10 2020 at 14:15)</a>:</h4>
<p><a href="https://stackoverflow.com/questions/40679422/how-for-i-search-fhir-resources-based-on-extension-values/40679772#40679772" title="https://stackoverflow.com/questions/40679422/how-for-i-search-fhir-resources-based-on-extension-values/40679772#40679772">https://stackoverflow.com/questions/40679422/how-for-i-search-fhir-resources-based-on-extension-values/40679772#40679772</a></p>



<a name="197060865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197060865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197060865">(May 10 2020 at 15:19)</a>:</h4>
<p>An alternative may be to create Provenance resources, the 'date' thereof can be searched by default. Assuming that each message causes the creation of multiple FHIR resources, one could create one single Provenance resource and associate it with all of the newly created resources. When extracting data from messages the use of Provenance will be useful anyway for the tracking of when which things were imported/extracted. yes, a bit of overhead when compared to an extension on each and every resource, but flexibility has its price.</p>



<a name="197062359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197062359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197062359">(May 10 2020 at 15:42)</a>:</h4>
<p><span class="user-mention" data-user-id="202825">@Vibin_chander</span> If you do need this new extension and an ability to search by it, create and post a new SearchParameter (after posting this to your server, HAPI will take a few minutes to index the data before you can use this new search parameter). Have a look at the following example: <a href="https://www.hl7.org/fhir/searchparameter-example-extension.json.html" title="https://www.hl7.org/fhir/searchparameter-example-extension.json.html">https://www.hl7.org/fhir/searchparameter-example-extension.json.html</a></p>



<a name="197095786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197095786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197095786">(May 11 2020 at 03:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191372">@René Spronk</span>  and <span class="user-mention" data-user-id="191393">@Igor Sirkovich</span>  Thanks for you inputs. Let me try the Search Parameter once</p>



<a name="197101266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197101266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197101266">(May 11 2020 at 05:26)</a>:</h4>
<p>Im trying the Search Parameter but not sure how it  works.</p>
<p>I'm trying like this , in the search parameter resource I've made like this</p>
<p><code>"name": "newurl",
"type": "reference",
"expression": "Coverage.extension('http://myUrlName"),
  "xpath": "f:Coverage/f:extension[@url='http://myUrlName']",
"target": [
    "Coverage"
  ]</code></p>
<p>In the Coverage Resource Im defining my extension like this</p>
<div class="codehilite"><pre><span></span><code> &quot;extension&quot; : [
          {
            &quot;url&quot; : &quot;http://myUrlName&quot;,
            &quot;valueCodeableConcept&quot; : {
              &quot;coding&quot; : [
                {
                  &quot;system&quot; : &quot;http://myUrlName&quot;,
                  &quot;code&quot; : &quot;HL7V2-SOURCE-DATE&quot;,
                  &quot;display&quot; : &quot;2020-04-30T15:19:11&quot;
                }
              ]
            }
          }
        ]
</code></pre></div>


<p>Which means I can search the Coverage Resource by using "newurl" as search parameter right?<br>
But searching Coverage?newurl=http://myUrlName does not return anything. Let me know if y understanding  is wrong here</p>



<a name="197102754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197102754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197102754">(May 11 2020 at 05:50)</a>:</h4>
<p>Try adding "code": "myextension" in the SearchParameter and replacing "target" with "base". In the Coverage extension, "system" should point to the CodeSystem URL, e.g. "system": "<a href="http://www.test.com/MyCodeSystem" title="http://www.test.com/MyCodeSystem">http://www.test.com/MyCodeSystem</a>". Then you should be able to search Coverage?myextension=http://www.test.com/MyCodeSystem|HL7V2-SOURCE-DATE. Of course you can use your own values instead of "myextension" and "<a href="http://www.test.com/MyCodeSystem" title="http://www.test.com/MyCodeSystem">http://www.test.com/MyCodeSystem</a>".</p>



<a name="197102907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197102907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197102907">(May 11 2020 at 05:53)</a>:</h4>
<p>Also replace "type": "reference" with "type": "token" since your extension is of CodeableConcept type</p>



<a name="197103146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197103146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197103146">(May 11 2020 at 05:57)</a>:</h4>
<p>replacing "target" with "base" meaning both should be of same resource name? or only either of the one should exist?</p>



<a name="197103470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197103470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197103470">(May 11 2020 at 06:04)</a>:</h4>
<p>Im getting an error saying this <code>Unknown search parameter \"myextension\"</code></p>



<a name="197103755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197103755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197103755">(May 11 2020 at 06:11)</a>:</h4>
<p>Here is the whole JSON im using for search parameter</p>
<div class="codehilite"><pre><span></span><code>  &quot;resourceType&quot;: &quot;SearchParameter&quot;,
  &quot;id&quot;: &quot;example-extension&quot;,
  &quot;url&quot;: &quot;http://hl7.org/fhir/SearchParameter/example-extension&quot;,
  &quot;name&quot;: &quot;newurl&quot;,
  &quot;status&quot;: &quot;draft&quot;,
  &quot;experimental&quot;: true,
  &quot;publisher&quot;: &quot;Health Level Seven International (FHIR Infrastructure)&quot;,
  &quot;contact&quot;: [
    {
      &quot;telecom&quot;: [
        {
          &quot;system&quot;: &quot;url&quot;,
          &quot;value&quot;: &quot;http://hl7.org/fhir&quot;
        }
      ]
    }
  ],
  &quot;description&quot;: &quot;Search by patient for a MSH.7 agreement, which is stored in a any resource&quot;,
  &quot;code&quot;: &quot;myextension&quot;,
  &quot;base&quot;: [
    &quot;Coverage&quot;
  ],
  &quot;type&quot;: &quot;token&quot;,
  &quot;expression&quot;: &quot;Coverage.extension(&#39;http://www.caringly.net/incoming-message-date&#39;)&quot;,
  &quot;xpath&quot;: &quot;f:Coverage/f:extension[@url=&#39;http://www.caringly.net/incoming-message-date&#39;]&quot;,
  &quot;xpathUsage&quot;: &quot;normal&quot;,
  &quot;target&quot;: [
    &quot;Coverage&quot;
  ]
}```
</code></pre></div>



<a name="197103891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197103891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197103891">(May 11 2020 at 06:14)</a>:</h4>
<p>I was searching by <em>Coverage?myextension=http://www.caringly.net/incoming-message-date</em></p>



<a name="197104141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197104141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197104141">(May 11 2020 at 06:19)</a>:</h4>
<p>You don't need target (it's only needed for a SeacrhParameter of a reference type. Is <a href="http://www.caringly.net/incoming-message-date" title="http://www.caringly.net/incoming-message-date">http://www.caringly.net/incoming-message-date</a> the URL of your extension? Is this extension defined as a StructureDefinition on your HAPI server? What's the CodeSystem URL you use in the actual Coverage instance extension? In the search you need to us a token of CodeSystem and code separated by "|", e.g. Coverage?myextension=http://www.test.com/MyCodeSystem|HL7V2-SOURCE-DATE</p>



<a name="197104283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197104283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197104283">(May 11 2020 at 06:22)</a>:</h4>
<p>Im using that URL in the extension of the coverage resource</p>
<p><code> "extension" : [
          {
            "url" : "http://www.caringly.net/incoming-message-date",
            "valueCodeableConcept" : {
              "coding" : [
                {
                  "system" : "http://www.caringly.net/incoming-message-date",
                  "code" : "HL7V2-SOURCE-DATE",
                  "display" : "2020-04-30T15:19:11"
                }
              ]
            }
          }
        ]</code></p>
<p>I will remove the target and try once</p>



<a name="197104321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197104321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197104321">(May 11 2020 at 06:23)</a>:</h4>
<p>Is it Must to define the Extension in structure definition resource ?</p>



<a name="197104407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197104407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197104407">(May 11 2020 at 06:25)</a>:</h4>
<p>URL of the extension should be different from the CodeSystem URL. I would recommend to play with the public HAPI server: <a href="http://hapi.fhir.org" title="http://hapi.fhir.org">hapi.fhir.org</a>. Try to  create the SearchParameter resource, StructureDefinition resource for the extension and an instance of a Coverage resource using this extension. Then try searching for this Coverage resource using the new SearchParameter.</p>



<a name="197104469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197104469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197104469">(May 11 2020 at 06:26)</a>:</h4>
<p>ok sure</p>



<a name="197121190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197121190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197121190">(May 11 2020 at 09:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191393">@Igor Sirkovich</span> could you please share an example of creating StructureDefinition resource for Extension ?</p>



<a name="197153459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197153459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197153459">(May 11 2020 at 14:31)</a>:</h4>
<p>Have a look at <a href="https://www.hl7.org/fhir/extensibility-registry.html">https://www.hl7.org/fhir/extensibility-registry.html</a>. There are tons of extensions of various types.</p>



<a name="197180539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197180539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197180539">(May 11 2020 at 17:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191393">@Igor Sirkovich</span> thanks. That helped a lot. I do have a working SD, SP and search.</p>
<p>Now I am trying to create <code>SearchParameter</code> with <code>base</code> = <code>Resource</code> so that it is available on all resources. But when I do that <code>Patient</code> resource is no longer searchable by <code>SearchParameter</code></p>
<div class="codehilite"><pre><span></span><code>{
        &quot;resourceType&quot;: &quot;SearchParameter&quot;,
        &quot;id&quot;: &quot;10025450&quot;,
        &quot;meta&quot;: {
          &quot;versionId&quot;: &quot;1&quot;,
          &quot;lastUpdated&quot;: &quot;2020-05-11T16:48:00.413+00:00&quot;,
          &quot;source&quot;: &quot;#wWpWb92nquQITjqi&quot;
        },
        &quot;url&quot;: &quot;http://www.caringly.tech/fhir/SearchParameter/SearchByMsgDateParameter&quot;,
        &quot;version&quot;: &quot;1.0&quot;,
        &quot;name&quot;: &quot;SearchByMsgDateParameter&quot;,
        &quot;status&quot;: &quot;active&quot;,
        &quot;description&quot;: &quot;Search by patient for a MSH.7 agreement, which is stored in a any resource&quot;,
        &quot;code&quot;: &quot;SearchByMsgDate&quot;,
        &quot;base&quot;: [
          &quot;Resource&quot;
        ],
        &quot;type&quot;: &quot;date&quot;,
        &quot;expression&quot;: &quot;*.extension(&#39;http://www.caringly.tech/SearchByMsgDate&#39;)&quot;,
        &quot;xpathUsage&quot;: &quot;normal&quot;
      }
</code></pre></div>



<a name="197180589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197180589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197180589">(May 11 2020 at 17:45)</a>:</h4>
<p>any ideas ?</p>



<a name="197186855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197186855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197186855">(May 11 2020 at 18:40)</a>:</h4>
<p>I have even tried the following </p>
<div class="codehilite"><pre><span></span><code>{
        &quot;resourceType&quot;: &quot;SearchParameter&quot;,
        &quot;id&quot;: &quot;10025450&quot;,
        &quot;meta&quot;: {
          &quot;versionId&quot;: &quot;1&quot;,
          &quot;lastUpdated&quot;: &quot;2020-05-11T16:48:00.413+00:00&quot;,
          &quot;source&quot;: &quot;#wWpWb92nquQITjqi&quot;
        },
        &quot;url&quot;: &quot;http://www.caringly.tech/fhir/SearchParameter/SearchByMsgDateParameter&quot;,
        &quot;version&quot;: &quot;1.0&quot;,
        &quot;name&quot;: &quot;SearchByMsgDateParameter&quot;,
        &quot;status&quot;: &quot;active&quot;,
        &quot;description&quot;: &quot;Search by patient for a MSH.7 agreement, which is stored in a any resource&quot;,
        &quot;code&quot;: &quot;SearchByMsgDate&quot;,
        &quot;base&quot;: [
          &quot;Resource&quot;
        ],
        &quot;type&quot;: &quot;date&quot;,
        &quot;expression&quot;: &quot;extension(&#39;http://www.caringly.tech/SearchByMsgDate&#39;)&quot;,
        &quot;xpath&quot;: &quot;f:*/f:extension(&#39;http://www.caringly.tech/SearchByMsgDate&#39;)&quot;,
        &quot;xpathUsage&quot;: &quot;normal&quot;
      }
</code></pre></div>


<p>to no avail. What am I missing ?</p>



<a name="197198860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197198860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197198860">(May 11 2020 at 20:15)</a>:</h4>
<p>Did you create a StructureDefinition for the extension. Can you show this StructureDefinition?</p>



<a name="197198898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197198898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197198898">(May 11 2020 at 20:16)</a>:</h4>
<p>yes, just a sec</p>



<a name="197199127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197199127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197199127">(May 11 2020 at 20:17)</a>:</h4>
<p>here it is <a href="https://gist.github.com/a9e98fc8b64e0fff3c1a93d46b342345">https://gist.github.com/a9e98fc8b64e0fff3c1a93d46b342345</a> <span class="user-mention" data-user-id="191393">@Igor Sirkovich</span></p>



<a name="197199638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197199638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197199638">(May 11 2020 at 20:21)</a>:</h4>
<p>I have tried this SearchParameter def</p>
<div class="codehilite"><pre><span></span><code>{
        &quot;resourceType&quot;: &quot;SearchParameter&quot;,
        &quot;id&quot;: &quot;10025450&quot;,
        &quot;meta&quot;: {
          &quot;versionId&quot;: &quot;1&quot;,
          &quot;lastUpdated&quot;: &quot;2020-05-11T16:48:00.413+00:00&quot;,
          &quot;source&quot;: &quot;#wWpWb92nquQITjqi&quot;
        },
        &quot;url&quot;: &quot;http://www.caringly.tech/fhir/SearchParameter/SearchByMsgDateParameter&quot;,
        &quot;version&quot;: &quot;1.0&quot;,
        &quot;name&quot;: &quot;SearchByMsgDateParameter&quot;,
        &quot;status&quot;: &quot;active&quot;,
        &quot;description&quot;: &quot;Search by patient for a MSH.7 agreement, which is stored in a any resource&quot;,
        &quot;code&quot;: &quot;SearchByMsgDate&quot;,
        &quot;base&quot;: [
          &quot;Resource&quot;
        ],
        &quot;type&quot;: &quot;date&quot;,
        &quot;expression&quot;: &quot;extension(&#39;http://www.caringly.tech/SearchByMsgDate&#39;)&quot;,
        &quot;xpath&quot;: &quot;f:*/f:extension(&#39;http://www.caringly.tech/SearchByMsgDate&#39;)&quot;,
        &quot;xpathUsage&quot;: &quot;normal&quot;,
        &quot;comparator&quot;: [&quot;eq&quot;, &quot;ge&quot;, &quot;le&quot;, &quot;gt&quot;, &quot;lt&quot;, &quot;ne&quot;]
      }
</code></pre></div>


<p>but when I query Patient I get </p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
  &quot;text&quot;: {
    &quot;status&quot;: &quot;generated&quot;,
    &quot;div&quot;: &quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\&quot;0\&quot;&gt;&lt;tr&gt;&lt;td style=\&quot;font-weight: bold;\&quot;&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Unknown search parameter &amp;quot;SearchByMsgDate&amp;quot;. Value search parameters for this search are: [_id, _language, active, address, address-city, address-country, address-postalcode, address-state, address-use, birthdate, death-date, deceased, email, family, gender, general-practitioner, given, identifier, language, link, name, organization, phone, phonetic, telecom]&lt;/pre&gt;&lt;/td&gt;\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t&lt;/tr&gt;\n\t\t&lt;/table&gt;\n\t&lt;/div&gt;&quot;
  },
  &quot;issue&quot;: [
    {
      &quot;severity&quot;: &quot;error&quot;,
      &quot;code&quot;: &quot;processing&quot;,
      &quot;diagnostics&quot;: &quot;Unknown search parameter \&quot;SearchByMsgDate\&quot;. Value search parameters for this search are: [_id, _language, active, address, address-city, address-country, address-postalcode, address-state, address-use, birthdate, death-date, deceased, email, family, gender, general-practitioner, given, identifier, language, link, name, organization, phone, phonetic, telecom]&quot;
    }
  ]
}
</code></pre></div>



<a name="197200177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197200177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197200177">(May 11 2020 at 20:25)</a>:</h4>
<p>Maybe we need to start over. What is the purpose of your extension and search by this extension? Do you want to store a message date/time from MSH.7 in each resource that was in the message and then search for resources of a specified type by this message date/time?</p>



<a name="197200258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197200258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197200258">(May 11 2020 at 20:26)</a>:</h4>
<p>yes that is the purpose</p>



<a name="197200288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197200288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197200288">(May 11 2020 at 20:26)</a>:</h4>
<p>so that if hl7 message needs to be reprocessed then I am not relying on <code>_lastUpdated</code> which will change on each update</p>



<a name="197200322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197200322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197200322">(May 11 2020 at 20:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191393">@Igor Sirkovich</span> <br>
as I said if I declare <code>base</code> as <code>[ "Patient" ]</code>and  <code>expression</code> as <code>Patient.extension('http://www.caringly.tech/SearchByMsgDate')</code> i.e.</p>
<div class="codehilite"><pre><span></span><code>{
        &quot;resourceType&quot;: &quot;SearchParameter&quot;,
        &quot;id&quot;: &quot;10025450&quot;,
        &quot;meta&quot;: {
          &quot;versionId&quot;: &quot;1&quot;,
          &quot;lastUpdated&quot;: &quot;2020-05-11T16:48:00.413+00:00&quot;,
          &quot;source&quot;: &quot;#wWpWb92nquQITjqi&quot;
        },
        &quot;url&quot;: &quot;http://www.caringly.tech/fhir/SearchParameter/SearchByMsgDateParameter&quot;,
        &quot;version&quot;: &quot;1.0&quot;,
        &quot;name&quot;: &quot;SearchByMsgDateParameter&quot;,
        &quot;status&quot;: &quot;active&quot;,
        &quot;description&quot;: &quot;Search by patient for a MSH.7 agreement, which is stored in a any resource&quot;,
        &quot;code&quot;: &quot;SearchByMsgDate&quot;,
        &quot;base&quot;: [
          &quot;Patient&quot;,
          &quot;Coverage&quot;
        ],
        &quot;type&quot;: &quot;date&quot;,
        &quot;expression&quot;: &quot;Patient.extension(&#39;http://www.caringly.tech/SearchByMsgDate&#39;)&quot;,
        &quot;xpathUsage&quot;: &quot;normal&quot;
      }
</code></pre></div>


<p>then <code>SearchByMsgDate</code> on <code>Patient</code> resource only works fine but does not work on <code>Coverage</code>, so I need something universal like on <code>Resource</code></p>



<a name="197200338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197200338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197200338">(May 11 2020 at 20:27)</a>:</h4>
<p>Did you consider using Provenance (<a href="https://www.hl7.org/fhir/provenance.html">https://www.hl7.org/fhir/provenance.html</a>) instead?</p>



<a name="197200493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197200493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197200493">(May 11 2020 at 20:28)</a>:</h4>
<p>So your expression only looks at a Patient resource: "Patient.extension('<a href="http://www.caringly.tech/SearchByMsgDate">http://www.caringly.tech/SearchByMsgDate</a>')"</p>



<a name="197200574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197200574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197200574">(May 11 2020 at 20:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191393">@Igor Sirkovich</span> to be fair <code>Provenance</code> seemed like an overkill .... when only one cross cutting attribute needs to be added to get the work done. But to be honest I don't know much about Provenance so I may be wrong in my analysis.</p>



<a name="197200725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197200725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197200725">(May 11 2020 at 20:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191393">Igor Sirkovich</span> <a href="#narrow/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI/near/197200338">said</a>:</p>
<blockquote>
<p>So your expression only looks at a Patient resource: "Patient.extension('<a href="http://www.caringly.tech/SearchByMsgDate">http://www.caringly.tech/SearchByMsgDate</a>')"</p>
</blockquote>
<p>Yes it does so I changed it to <code>*.extension('http://www.caringly.tech/SearchByMsgDate')</code> or <code>extension('http://www.caringly.tech/SearchByMsgDate')</code> and <code>base</code> to <code>Resource</code> but it does not help</p>



<a name="197200970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197200970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197200970">(May 11 2020 at 20:32)</a>:</h4>
<p>I believe that "base": [ "Resource" ] and "expression": "extension('<a href="http://www.caringly.tech/SearchByMsgDate">http://www.caringly.tech/SearchByMsgDate</a>')" is supposed to work</p>



<a name="197201175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197201175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197201175">(May 11 2020 at 20:34)</a>:</h4>
<p>that's what I thought too but not, let me try and remove <code>xpath</code> just in case :(</p>



<a name="197201282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197201282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197201282">(May 11 2020 at 20:35)</a>:</h4>
<p>no luck <span aria-label="unamused" class="emoji emoji-1f612" role="img" title="unamused">:unamused:</span></p>



<a name="197201396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197201396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197201396">(May 11 2020 at 20:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191393">Igor Sirkovich</span> <a href="#narrow/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI/near/197200970">said</a>:</p>
<blockquote>
<p>I believe that "base": [ "Resource" ] and "expression": "extension('<a href="http://www.caringly.tech/SearchByMsgDate">http://www.caringly.tech/SearchByMsgDate</a>')" is supposed to work</p>
</blockquote>
<p>that's what I thought</p>



<a name="197201473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197201473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197201473">(May 11 2020 at 20:36)</a>:</h4>
<p>Also ensure you don't have 2 SearchParameter resources with the same "code".</p>



<a name="197201641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197201641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197201641">(May 11 2020 at 20:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191393">@Igor Sirkovich</span>  there is only one <a href="https://gist.github.com/651444647118b68cb9768acc0d335cd4">https://gist.github.com/651444647118b68cb9768acc0d335cd4</a></p>



<a name="197201950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197201950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197201950">(May 11 2020 at 20:41)</a>:</h4>
<p>I wonder looking at this <a href="http://hapi.fhir.org/baseR4/SearchParameter?code=_id">http://hapi.fhir.org/baseR4/SearchParameter?code=_id</a> if SP on Resource is supposed to work only on simple dataTypes</p>



<a name="197201985"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197201985" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197201985">(May 11 2020 at 20:41)</a>:</h4>
<p>Try to add "xpath": "f:*/f:extension[@url='<a href="http://www.caringly.tech/SearchByMsgDate'']">http://www.caringly.tech/SearchByMsgDate'']</a>",</p>



<a name="197201997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197201997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197201997">(May 11 2020 at 20:41)</a>:</h4>
<p>ok</p>



<a name="197202153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197202153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197202153">(May 11 2020 at 20:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191783">Daya Sharma</span> <a href="#narrow/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI/near/197201950">said</a>:</p>
<blockquote>
<p>I wonder looking at this <a href="http://hapi.fhir.org/baseR4/SearchParameter?code=_id">http://hapi.fhir.org/baseR4/SearchParameter?code=_id</a> if SP on Resource is supposed to work only on simple dataTypes</p>
</blockquote>
<p>No, it's supposed to work on all data types</p>



<a name="197202212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197202212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197202212">(May 11 2020 at 20:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191393">Igor Sirkovich</span> <a href="#narrow/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI/near/197201985">said</a>:</p>
<blockquote>
<p>Try to add "xpath": "f:*/f:extension[@url='<a href="http://www.caringly.tech/SearchByMsgDate'']">http://www.caringly.tech/SearchByMsgDate'']</a>",</p>
</blockquote>
<p>nope that did not help</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;SearchParameter&quot;,
  &quot;id&quot;: &quot;10025450&quot;,
  &quot;meta&quot;: {
    &quot;versionId&quot;: &quot;16&quot;,
    &quot;lastUpdated&quot;: &quot;2020-05-11T20:42:37.444+00:00&quot;,
    &quot;source&quot;: &quot;#wWpWb92nquQITjqi&quot;
  },
  &quot;url&quot;: &quot;http://www.caringly.tech/fhir/SearchParameter/SearchByMsgDateParameter&quot;,
  &quot;version&quot;: &quot;1.0&quot;,
  &quot;name&quot;: &quot;SearchByMsgDateParameter&quot;,
  &quot;status&quot;: &quot;active&quot;,
  &quot;description&quot;: &quot;Search by patient for a MSH.7 agreement, which is stored in a any resource&quot;,
  &quot;code&quot;: &quot;SearchByMsgDate&quot;,
  &quot;base&quot;: [
    &quot;Resource&quot;
  ],
  &quot;type&quot;: &quot;date&quot;,
  &quot;expression&quot;: &quot;extension(&#39;http://www.caringly.tech/SearchByMsgDate&#39;)&quot;,
  &quot;xpath&quot;: &quot;f:*/f:extension[@url=&#39;http://www.caringly.tech/SearchByMsgDate&#39;]&quot;,
  &quot;xpathUsage&quot;: &quot;normal&quot;,
  &quot;comparator&quot;: [
    &quot;eq&quot;,
    &quot;ge&quot;,
    &quot;le&quot;,
    &quot;gt&quot;,
    &quot;lt&quot;,
    &quot;ne&quot;
  ]
}
</code></pre></div>



<a name="197202467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197202467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197202467">(May 11 2020 at 20:45)</a>:</h4>
<p>I can only suggest to try this on <a href="http://hapi.fhir.org">hapi.fhir.org</a> to see this might be related to your local HAPI setup.</p>



<a name="197202664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197202664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197202664">(May 11 2020 at 20:47)</a>:</h4>
<p>great suggestion <span class="user-mention" data-user-id="191393">@Igor Sirkovich</span>  will try and keep you posted</p>



<a name="197202915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197202915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197202915">(May 11 2020 at 20:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span>, I just wanted to confirm with you whether HAPI supports searching by an Extension using a custom SearchParameter that is defined on a Resource, i.e. is supposed to work on all resources.</p>



<a name="197203273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197203273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197203273">(May 11 2020 at 20:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191783">@Daya Sharma</span>, you can also try "base": [ "Patient", "Coverage" ], while keeping the current expression and xpath. If this works, then probably the issue is with HAPI support for "base": [ "Resource" ], which would require indexing all FHIR resources on the server as opposed to indexing specific resources.</p>



<a name="197203325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197203325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197203325">(May 11 2020 at 20:53)</a>:</h4>
<p>ah that makes sense</p>



<a name="197203903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197203903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197203903">(May 11 2020 at 20:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191393">@Igor Sirkovich</span> it only works on Patient but not on Coverage , the resource that should be fetched is <a href="https://gist.github.com/5ca45a8f2b366cbb012559e08d0ac9c8">https://gist.github.com/5ca45a8f2b366cbb012559e08d0ac9c8</a> and the query is <code>Coverage?SearchByMsgDate=&gt;=2020-04-03</code>and SP is </p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;SearchParameter&quot;,
  &quot;id&quot;: &quot;10025450&quot;,
  &quot;meta&quot;: {
    &quot;versionId&quot;: &quot;17&quot;,
    &quot;lastUpdated&quot;: &quot;2020-05-11T20:54:06.085+00:00&quot;,
    &quot;source&quot;: &quot;#wWpWb92nquQITjqi&quot;
  },
  &quot;url&quot;: &quot;http://www.caringly.tech/fhir/SearchParameter/SearchByMsgDateParameter&quot;,
  &quot;version&quot;: &quot;1.0&quot;,
  &quot;name&quot;: &quot;SearchByMsgDateParameter&quot;,
  &quot;status&quot;: &quot;active&quot;,
  &quot;description&quot;: &quot;Search by patient for a MSH.7 agreement, which is stored in a any resource&quot;,
  &quot;code&quot;: &quot;SearchByMsgDate&quot;,
  &quot;base&quot;: [
    &quot;Patient&quot;,
    &quot;Coverage&quot;
  ],
  &quot;type&quot;: &quot;date&quot;,
  &quot;expression&quot;: &quot;extension(&#39;http://www.caringly.tech/SearchByMsgDate&#39;)&quot;,
  &quot;xpath&quot;: &quot;f:*/f:extension[@url=&#39;http://www.caringly.tech/SearchByMsgDate&#39;]&quot;,
  &quot;xpathUsage&quot;: &quot;normal&quot;,
  &quot;comparator&quot;: [
    &quot;eq&quot;,
    &quot;ge&quot;,
    &quot;le&quot;,
    &quot;gt&quot;,
    &quot;lt&quot;,
    &quot;ne&quot;
  ]
}
</code></pre></div>



<a name="197204830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197204830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197204830">(May 11 2020 at 21:06)</a>:</h4>
<p>It's funny. Maybe try searching again in a few minutes to see if HAPI is still indexing the resources. Otherwise, can you try adding another resource type, e.g. Organization with this extension, add "Organization" to the "base" of the SearchParameter and see if this would work? This would help understand if this issue is specific  to Coverage. Also, you might try to change the order of the resources in "base" to see if only the first one gets indexed.</p>



<a name="197205070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197205070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197205070">(May 11 2020 at 21:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191393">@Igor Sirkovich</span> I had the same thought, so I added SP extension to <code>Consent</code> and it does not fetch the result so possible an indexing problem, but the good thing is both Coverage and Consent now do not complain about unknown parameter <code>SearchByMsgDate</code></p>



<a name="197205284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197205284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197205284">(May 11 2020 at 21:10)</a>:</h4>
<p>this begs the question, how do I know if the indexing has finished .... obviously doing this on scale in production requires insight</p>



<a name="197206858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197206858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197206858">(May 11 2020 at 21:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> does HAPI support searching by an Extension using a custom <code>SearchParameter</code> that is defined on a <code>Resource</code> as opposed to individually listed resources. And is there a way to know if indexing is of those resources with that <code>SearchParameter</code> is finished or pending ?</p>



<a name="197222945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197222945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197222945">(May 12 2020 at 00:33)</a>:</h4>
<p>that's not my area of code - I don't know</p>



<a name="197232454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197232454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197232454">(May 12 2020 at 04:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> any insight into SearchParameter with <code>base</code> set to <code>Resource</code> why does it not work in above ^ case ?</p>



<a name="197245385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197245385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197245385">(May 12 2020 at 08:19)</a>:</h4>
<p>In this example it is mentioned  "Resource" as Base. Is it because _id is a common search parameter for all resources? <a href="https://www.hl7.org/fhir/searchparameter-example.json.html">https://www.hl7.org/fhir/searchparameter-example.json.html</a></p>



<a name="197245452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197245452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197245452">(May 12 2020 at 08:20)</a>:</h4>
<p>I'm  trying to make base["Resource"] in HAPI and my search is not getting recognized</p>



<a name="197245487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197245487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197245487">(May 12 2020 at 08:21)</a>:</h4>
<p>My parameter here is SearchByMsgDate</p>



<a name="197251963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197251963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197251963">(May 12 2020 at 09:34)</a>:</h4>
<p>I tried making the search parameter resource as bundle for each resource. Still only one resource Patient works and the search parameters for the other resources does not work</p>



<a name="197252194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197252194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197252194">(May 12 2020 at 09:36)</a>:</h4>
<p>Patient?SearchByMsgDate=&gt;=2020-04-22 This returns value and Coverage?SearchByMsgDate=&gt;=2020-04-22 does not. Which means even if the search parameter resource is sent as bundle with <code>expression:Patient.extension('http://www.caringly.tech/SearchByMsgDate')</code> in the base as "Patient" &amp; <code>expression:Coverage.extension('http://www.caringly.tech/SearchByMsgDate')</code> in the base as "Coverage" it takes only the Patient and not for the coverage resource</p>



<a name="197252826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197252826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197252826">(May 12 2020 at 09:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span>  I have same question as <span class="user-mention" data-user-id="191783">@Daya Sharma</span>  has. Is it possible to create search parameter for base ["Resource"] meaning that parameter will be applied for all the resources?. on HAPI</p>



<a name="197261971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197261971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197261971">(May 12 2020 at 11:31)</a>:</h4>
<p>Ok I can make it work with bundles</p>



<a name="197261989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197261989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197261989">(May 12 2020 at 11:31)</a>:</h4>
<p>it takes sometime and new message flow for the process to set in</p>



<a name="197263106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197263106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197263106">(May 12 2020 at 11:45)</a>:</h4>
<p>No, that is not possible currently. You need to explicitly specify the base resource(s) you want the SearchParameter to apply to.</p>



<a name="197263275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197263275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197263275">(May 12 2020 at 11:47)</a>:</h4>
<p>ok</p>



<a name="197263283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197263283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197263283">(May 12 2020 at 11:47)</a>:</h4>
<p>Im doing like that only</p>



<a name="197263300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197263300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197263300">(May 12 2020 at 11:47)</a>:</h4>
<p>Which means for each resource  i need to create a search parameter right?</p>



<a name="197263362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197263362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197263362">(May 12 2020 at 11:48)</a>:</h4>
<p>yup</p>
<p>hopefully will adress this in a future release</p>



<a name="197283575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197283575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197283575">(May 12 2020 at 14:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> Thanks for chiming in. FYI this</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;SearchParameter&quot;,
  &quot;id&quot;: &quot;10025450&quot;,
  &quot;meta&quot;: {
    &quot;versionId&quot;: &quot;17&quot;,
    &quot;lastUpdated&quot;: &quot;2020-05-11T20:54:06.085+00:00&quot;,
    &quot;source&quot;: &quot;#wWpWb92nquQITjqi&quot;
  },
  &quot;url&quot;: &quot;http://www.caringly.tech/fhir/SearchParameter/SearchByMsgDateParameter&quot;,
  &quot;version&quot;: &quot;1.0&quot;,
  &quot;name&quot;: &quot;SearchByMsgDateParameter&quot;,
  &quot;status&quot;: &quot;active&quot;,
  &quot;description&quot;: &quot;Search by patient for a MSH.7 agreement, which is stored in a any resource&quot;,
  &quot;code&quot;: &quot;SearchByMsgDate&quot;,
  &quot;base&quot;: [
    &quot;Patient&quot;,
    &quot;Coverage&quot;
  ],
  &quot;type&quot;: &quot;date&quot;,
  &quot;expression&quot;: &quot;extension(&#39;http://www.caringly.tech/SearchByMsgDate&#39;)&quot;,
  &quot;xpath&quot;: &quot;f:*/f:extension[@url=&#39;http://www.caringly.tech/SearchByMsgDate&#39;]&quot;,
  &quot;xpathUsage&quot;: &quot;normal&quot;,
  &quot;comparator&quot;: [
    &quot;eq&quot;,
    &quot;ge&quot;,
    &quot;le&quot;,
    &quot;gt&quot;,
    &quot;lt&quot;,
    &quot;ne&quot;
  ]
}
</code></pre></div>


<p>works for Patient not Coverage even though both are explicitly declared.</p>



<a name="197284375"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197284375" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197284375">(May 12 2020 at 14:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191393">@Igor Sirkovich</span> FYI, we ended up creating Bundle of SearchParameter <a href="https://gist.github.com/daya/80f7d8fbc516f2e6225a0aca82d2a831">https://gist.github.com/daya/80f7d8fbc516f2e6225a0aca82d2a831</a> where each SP is for one resource. This seems like a brute force but actually works while declaring multiple resources explicitly </p>
<div class="codehilite"><pre><span></span><code> &quot;base&quot;: [
    &quot;Patient&quot;,
    &quot;Coverage&quot;
  ],
</code></pre></div>


<p>does not work. To me that seems like a bug.</p>



<a name="197287162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197287162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197287162">(May 12 2020 at 14:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> could you please confirm if ^ seems like a bug to you?</p>



<a name="197289785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197289785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197289785">(May 12 2020 at 15:07)</a>:</h4>
<p>Yup, I'd call that a bug. Can you replicate the issue on <a href="http://hapi.fhir.org">hapi.fhir.org</a>?</p>



<a name="197289995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197289995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197289995">(May 12 2020 at 15:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> further it seems that <code>_id</code> works on <code>Resource</code> but not a custom SearchParamater that also seems like a bug. What do you think ?</p>



<a name="197290032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197290032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197290032">(May 12 2020 at 15:08)</a>:</h4>
<p>I will try and replicate it there</p>



<a name="197290170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197290170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197290170">(May 12 2020 at 15:09)</a>:</h4>
<p><code>_id</code> is a built-in search parameter (as are all the SPs that start with <code>_</code>), it doesn't rely on the definition at all</p>



<a name="197290353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197290353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197290353">(May 12 2020 at 15:10)</a>:</h4>
<p>ok than one cannot declare SP on <code>Resource</code> is that a short coming or part of the spec ?</p>



<a name="197290869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197290869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197290869">(May 12 2020 at 15:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> ^</p>



<a name="197290969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197290969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197290969">(May 12 2020 at 15:13)</a>:</h4>
<p>i know for sure that hapi doesn't support it, but i don't know if the spec allows it</p>



<a name="197291156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197291156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197291156">(May 12 2020 at 15:14)</a>:</h4>
<p>i guess one way of looking at it is that if someone subimtted a pull request that made base=Resource work, it would likely be accepted</p>



<a name="197291266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197291266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197291266">(May 12 2020 at 15:15)</a>:</h4>
<p>ok thanks for confirming. I will let you know what <a href="http://hapi.fhir.org">hapi.fhir.org</a> replication of this bug reveals</p>



<a name="197327196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197327196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dsh <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197327196">(May 12 2020 at 19:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191319">James Agnew</span> <a href="#narrow/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI/near/197289785">said</a>:</p>
<blockquote>
<p>Yup, I'd call that a bug. Can you replicate the issue on <a href="http://hapi.fhir.org">hapi.fhir.org</a>?</p>
</blockquote>
<p>We are using 4.1 and <a href="http://hapi.fhir.org">hapi.fhir.org</a> is on 5.0 snapshot, and I don't see this bug in 5.0 snapshot. But <code>Resource</code> still cannot be used as <code>base</code> I will see about submitting a PR</p>



<a name="197599977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197599977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197599977">(May 14 2020 at 18:42)</a>:</h4>
<p>Im trying to understand the duplicate error we are getting in few resources<br>
"diagnostics": "Failed to UPDATE resource with match URL \"RelatedPerson?identifier=ouridentifier" because this search matched 2 resources"</p>



<a name="197600057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/197600057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vibin_chander <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#197600057">(May 14 2020 at 18:43)</a>:</h4>
<p>Any idea why this would happen. Our understanding is that, we are using the conditional PUT, meaning if the same data with the same identifier exist already it should simply update.If not it has to create one new</p>



<a name="268282993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/create%20new%20search%20parameter%20for%20HAPI/near/268282993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Meyers <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/create.20new.20search.20parameter.20for.20HAPI.html#268282993">(Jan 17 2022 at 15:13)</a>:</h4>
<p>Hey FYI: We are facing the same issue with hapi 5.5 and a postgresql database. Theres a high likelihood that this is the result of multithreading importing. <br>
Update: Same issue with mysql db</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
