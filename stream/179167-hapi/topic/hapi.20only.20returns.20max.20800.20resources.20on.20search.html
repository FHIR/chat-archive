---
layout: page
title: "FHIR Chat  · hapi only returns max 800 resources on search · hapi"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/index.html">hapi</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi.20only.20returns.20max.20800.20resources.20on.20search.html">hapi only returns max 800 resources on search</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="278128304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi%20only%20returns%20max%20800%20resources%20on%20search/near/278128304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi.20only.20returns.20max.20800.20resources.20on.20search.html#278128304">(Apr 07 2022 at 07:51)</a>:</h4>
<p>I'm facing an issue with hapi 5.7.0 on the amount of returned Patient resources (max 800).<br>
This server was initially setup without lucene indexing, then Lucene was enabled and $reindex triggert.</p>
<p>For the search Patient?gender=female now only returns 800 results in <a href="http://Bundle.total">Bundle.total</a> (correct would be ~6000'), if i traverse through the search pagination i get back all Patients, also male and unknown.</p>
<p>The only way hapi 5.7.0 returns correct search results is with a _count &gt; number of patients returned by the search. I also observed pagination issues with SMILE, so i assume smth. in the pagination code causes this problem.</p>



<a name="278524082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi%20only%20returns%20max%20800%20resources%20on%20search/near/278524082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi.20only.20returns.20max.20800.20resources.20on.20search.html#278524082">(Apr 11 2022 at 08:49)</a>:</h4>
<p>Update:<br>
Digged deeper into the Problem: for <code>Patient?gender=female</code>this hapi 5.7.1 instance returns all Patients instead of only female ones. If i search with _total=accurate i always get max 800 as the total.<br>
Will try to recreate the issue on a test environment.</p>



<a name="278589151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi%20only%20returns%20max%20800%20resources%20on%20search/near/278589151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi.20only.20returns.20max.20800.20resources.20on.20search.html#278589151">(Apr 11 2022 at 17:34)</a>:</h4>
<p>I started a fresh instance of the jpastarter 5.7.1, POSTed 2000 patients with 1000 patients male, 1000 female.<br>
<a href="http://localhost:8081/fhir/Patient?gender=male&amp;_total=accurate">http://localhost:8081/fhir/Patient?gender=male&amp;_total=accurate</a> still returns only 800, i think there is a bug in 5.7.x hapi (jpastarter)?</p>



<a name="278589586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi%20only%20returns%20max%20800%20resources%20on%20search/near/278589586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi.20only.20returns.20max.20800.20resources.20on.20search.html#278589586">(Apr 11 2022 at 17:38)</a>:</h4>
<p>using postgres (with hibernate.dialect: ca.uhn.fhir.jpa.model.dialect.HapiFhirPostgres94Dialect setting), with a lucene index.</p>



<a name="278655291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179167-hapi/topic/hapi%20only%20returns%20max%20800%20resources%20on%20search/near/278655291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179167-hapi/topic/hapi.20only.20returns.20max.20800.20resources.20on.20search.html#278655291">(Apr 12 2022 at 07:05)</a>:</h4>
<p>Update:<br>
I don't get this issue on a vanilla jpa-starter outside docker. Will investigate..</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
