---
layout: page
title: "FHIR Chat  · HAPI&#x27;s QuestionnaireResponse `questionnaire` query param? · Argo Patient Lists"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/index.html">Argo Patient Lists</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html">HAPI&#x27;s QuestionnaireResponse `questionnaire` query param?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="208397411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208397411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208397411">(Aug 28 2020 at 21:33)</a>:</h4>
<p>Hey Guys, Playing around with Hapi's Questionnaire/Response. <a href="https://confluence.hl7.org/pages/viewpage.action?pageId=86977234#id-202009ArgonautPatientLists-3.3-PatientLists-ExtraDetailsviaQuestionnaire">Eric pointed out</a> that <code>questionnaire</code> is a <a href="https://www.hl7.org/fhir/questionnaireresponse.html#search">standard search param</a> on the QuestionnaireResponse resource ... and therefore we could eliminate the proposed second extension in Group.member.entity.extension which concretely defines a QuestionnaireResponse for each patient in the group.</p>



<a name="208397510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208397510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208397510">(Aug 28 2020 at 21:34)</a>:</h4>
<p>Instead issuing a series of searches?</p>



<a name="208397533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208397533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208397533">(Aug 28 2020 at 21:35)</a>:</h4>
<p>Can you provide an example of what this would look like?</p>



<a name="208397639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208397639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208397639">(Aug 28 2020 at 21:36)</a>:</h4>
<p>So, I created a <a href="http://hapi.fhir.org/baseR4/Questionnaire/1169270">Questionnaire</a> and a <a href="http://hapi.fhir.org/baseR4/QuestionnaireResponse/1169472">QuestionnaireResponse</a> in HAPI, but the <a href="http://hapi.fhir.org/baseR4/QuestionnaireResponse?questionnaire=1169270">?questionnaire query param doesn't work</a>. I strongly suspect that the problem is user error, but I'm not sure what it is. </p>
<p>Any suggestions?</p>



<a name="208397694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208397694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208397694">(Aug 28 2020 at 21:37)</a>:</h4>
<p>Hey Josh! Happy Friday! I do have <a href="https://hackmd.io/AfJ9YNb6TNGeDSuAaHIn1g?view#Patients-with-column-data">examples of the two extensions</a> in which Group.member.entity.extension concretely associates a QR with a Patient. The alternative would be a Group like this:</p>



<a name="208397793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208397793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208397793">(Aug 28 2020 at 21:38)</a>:</h4>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;Group&quot;,
  &quot;extension&quot;: [
    {
      &quot;url&quot;: &quot;http://registry.fhir.org/argonaut/patientlistsquestionnairev1&quot;,
      &quot;valueReference&quot;: &quot;http://hapi.fhir.org/baseR4/Questionnaire/1169270&quot;
    }
  ],
  &quot;identifier&quot;: [
    {
      &quot;system&quot;: &quot;http://example.org&quot;,
      &quot;value&quot;: &quot;dba0a9f9-82cb-4d42-ad92-3250756a9420&quot;
    }
  ],
  &quot;active&quot;: true,
  &quot;type&quot;: &quot;person&quot;,
  &quot;actual&quot;: true,
  &quot;name&quot;: &quot;ICU List&quot;,
  &quot;managingEntity&quot;: {
    &quot;reference&quot;: &quot;Organization/example-organization-2&quot;,
    &quot;display&quot;: &quot;Dairyland Hospital&quot;
  },
  &quot;member&quot;: [
    {
      &quot;entity&quot;: {
        &quot;identifier&quot;: {
          &quot;system&quot;: &quot;http://example.org&quot;,
          &quot;value&quot;: &quot;456&quot;
        },
        &quot;display&quot;: &quot;Name = Daniel Crimson (MRN = 456)&quot;,
      },
      &quot;inactive&quot;: false
    },
    {
      &quot;entity&quot;: {
</code></pre></div>



<a name="208397864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208397864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208397864">(Aug 28 2020 at 21:39)</a>:</h4>
<p>and a follow-up query like:</p>
<div class="codehilite"><pre><span></span><code>QuestionairreResponse?questionnaire=1169270
</code></pre></div>


<p>which, per FHIR should return all of the QuestionnaireResponses for that Questionnaire (but which HAPI is not).</p>



<a name="208398641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208398641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208398641">(Aug 28 2020 at 21:49)</a>:</h4>
<p>Are you saying the API guarantee would be that this questionnaire is only ever used  with this specific list? So if I had three lists of patients and I wanted to fill in the same information about all of them I would define three different questionnaires with identical content? I can see how one might thread this needle but it is a little bit surprising and fragile, since normally we think about a questionnaire as being reusable.</p>



<a name="208398750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208398750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208398750">(Aug 28 2020 at 21:51)</a>:</h4>
<p>Yeah.</p>



<a name="208461856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208461856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208461856">(Aug 30 2020 at 00:55)</a>:</h4>
<p>@Josh this measns the url is unique for each group.   We can define the Q as being derivedfrom a standard Q.  Let me review how we did this for adaptive Questionnaires.  I personally think this simplication is worth it .  Just fetch the whole gaggle of QAs.  Why is it fragile? The server needs to do all the work on the back end in either case.</p>



<a name="208462056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208462056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208462056">(Aug 30 2020 at 01:01)</a>:</h4>
<p>Fragile in the sense that many servers can't enforce an invariant like "never allow Questionnaire 123 to be answered except for patients currently in Group 456".</p>



<a name="208462103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208462103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208462103">(Aug 30 2020 at 01:03)</a>:</h4>
<p>Like, there's no good way to enforce this (in sync, consistently) as groups and memberships change.</p>



<a name="208462162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208462162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208462162">(Aug 30 2020 at 01:05)</a>:</h4>
<p>(re: tracking the relationship among multiple questionnaires derived from the same core content, yes <a href="http://build.fhir.org/questionnaire-definitions.html#Questionnaire.derivedFrom">http://build.fhir.org/questionnaire-definitions.html#Questionnaire.derivedFrom</a> can capture this.)</p>



<a name="208462988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208462988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208462988">(Aug 30 2020 at 01:32)</a>:</h4>
<p>I'm trying to find a way to avoid two extensions.  All you need is a Q and a patient id. . Why do we need a QR ref?  I doubt very much the QR is made ahead of time and stored for later use/fetching. Assuming the server create the QRs on the fly, the server needs to index the patients to Q somehow anyway.</p>



<a name="208463079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208463079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208463079">(Aug 30 2020 at 01:36)</a>:</h4>
<p>sooooo. why not fetch QR based on URL and Patient ?</p>



<a name="208463239"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208463239" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208463239">(Aug 30 2020 at 01:41)</a>:</h4>
<p>Questionnaire Url <em>and</em> patient? That sounds fine -- I thought the proposal was to omit patient from the query.</p>



<a name="208463244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208463244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208463244">(Aug 30 2020 at 01:41)</a>:</h4>
<p>although answering my own questions.  The QR ids are basically a way to index this and expose to client.   So I guess is "moving the deck chairs"</p>



<a name="208463366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208463366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208463366">(Aug 30 2020 at 01:44)</a>:</h4>
<p>Well my initial thought was to do that, but if as you suggest syncing this is problematic then can do the Patient + Q url.  query.    I  guess will find out whether 2 extensions or 1   is more palatable for servers.</p>



<a name="208756289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208756289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208756289">(Sep 01 2020 at 22:19)</a>:</h4>
<p>The reason to not fetch QR with both questionnaire and patient id is performance. I want/need to be able to query for many QR at once. I agree that the certainty provided by the second extension in the Group (pointing to a QR per patient) makes an integration less brittle. That's what we're prototyping out.</p>



<a name="208757235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208757235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208757235">(Sep 01 2020 at 22:30)</a>:</h4>
<p>We could also supply a list of patient IDs in the query.</p>



<a name="208757275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208757275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208757275">(Sep 01 2020 at 22:30)</a>:</h4>
<p>Or a batch of queries.</p>



<a name="208761557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/227046-Argo%20Patient%20Lists/topic/HAPI%27s%20QuestionnaireResponse%20%60questionnaire%60%20query%20param%3F/near/208761557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/227046-Argo-Patient-Lists/topic/HAPI&#x27;s.20QuestionnaireResponse.20.60questionnaire.60.20query.20param.3F.html#208761557">(Sep 01 2020 at 23:23)</a>:</h4>
<p>I've come full circle and see the utility of exposing the QR for each patient.   I have a basic client  that doew a the simple stuff - trying to  get it deployed and hope to dig into the Q an QR stuff soon.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
