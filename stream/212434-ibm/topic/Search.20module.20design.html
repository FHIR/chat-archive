---
layout: page
title: "FHIR Chat  · Search module design · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html">Search module design</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="186920765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/186920765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#186920765">(Jan 29 2020 at 19:38)</a>:</h4>
<p>Currently, to extend the server with custom search parameters, we support the reading of a per-tenant Bundle of SearchParameters from the tenant config folder.  We have a guide that outlines how this works at <a href="https://ibm.github.io/FHIR/guides/FHIRSearchConfiguration" target="_blank" title="https://ibm.github.io/FHIR/guides/FHIRSearchConfiguration">https://ibm.github.io/FHIR/guides/FHIRSearchConfiguration</a></p>



<a name="186920881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/186920881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#186920881">(Jan 29 2020 at 19:39)</a>:</h4>
<p>However, starting in version 4.0.0 we have a new <code>fhir-registry</code> component and this is how you extend the server with IG-specific artifacts like StructureDefinitions and ValueSets.  The guide for that is at <a href="https://ibm.github.io/FHIR/guides/FHIRValidationGuide" target="_blank" title="https://ibm.github.io/FHIR/guides/FHIRValidationGuide">https://ibm.github.io/FHIR/guides/FHIRValidationGuide</a></p>



<a name="186921012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/186921012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#186921012">(Jan 29 2020 at 19:40)</a>:</h4>
<p>Many IGs (like us-core) also define their own search parameters, and it seems like we should support those from fhir-search as well.  Question:  what would it take to deprecate our config-driven mechanism in favor of a new <code>fhir-registry</code>-based approach?</p>



<a name="186921196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/186921196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#186921196">(Jan 29 2020 at 19:42)</a>:</h4>
<p>One challenge would be "how to keep our dynamic config behavior" where we have a cached version of the config resource available which will reload the resource if it changes on disk.  <span class="user-mention" data-user-id="192334">@John Timm</span> does the registry support (or at least enable) similar behavior yet?</p>



<a name="186921602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/186921602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#186921602">(Jan 29 2020 at 19:46)</a>:</h4>
<p>Another challenge would be building/maintaining the <code>SearchParameter.code</code> -&gt; <code>SearchParameter</code> map.   Instead of lazy-loading the SearchParameter resources by uri, I think we'd want to ask the fhir-registry to give us ALL the SearchParameters up front, so that we could build the map.</p>



<a name="187006421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/187006421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#187006421">(Jan 30 2020 at 16:55)</a>:</h4>
<blockquote>
<p>One challenge would be "how to keep our dynamic config behavior" where we have a cached version of the config resource available which will reload the resource if it changes on disk.  <span class="user-mention silent" data-user-id="192334">John Timm</span> does the registry support (or at least enable) similar behavior yet?</p>
</blockquote>
<p><span class="user-mention" data-user-id="191676">@Lee Surprenant</span> We do not support this behavior in the FHIRRegistry</p>



<a name="187013500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/187013500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#187013500">(Jan 30 2020 at 18:08)</a>:</h4>
<p>How about the "ask the fhir-registry to give us ALL the SearchParameters" behavior?</p>



<a name="187013505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/187013505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#187013505">(Jan 30 2020 at 18:08)</a>:</h4>
<p>is it only retrieve by uri ?</p>



<a name="187047920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/187047920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#187047920">(Jan 31 2020 at 00:53)</a>:</h4>
<p>is the FHIR Registry multitenant?</p>



<a name="187047940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/187047940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#187047940">(Jan 31 2020 at 00:53)</a>:</h4>
<p>or relies on the consumer to have specific profile urls?</p>



<a name="190332624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/190332624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#190332624">(Mar 11 2020 at 21:17)</a>:</h4>
<p><span class="user-mention" data-user-id="192632">@Paul Bastide</span> The FHIR registry component does not currently support multi-tenancy</p>



<a name="190332950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/190332950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#190332950">(Mar 11 2020 at 21:20)</a>:</h4>
<p>the registry is currently populated using the ServiceLoader</p>



<a name="190382896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/190382896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#190382896">(Mar 12 2020 at 12:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192334">John Timm</span> <a href="#narrow/stream/212434-ibm/topic/Search.20module.20design/near/190332950" title="#narrow/stream/212434-ibm/topic/Search.20module.20design/near/190332950">said</a>:</p>
<blockquote>
<p>the registry is currently populated using the ServiceLoader</p>
</blockquote>
<p>I think we covered this on another thread - not sure. thanks for the followup</p>



<a name="190384216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Search%20module%20design/near/190384216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Search.20module.20design.html#190384216">(Mar 12 2020 at 12:39)</a>:</h4>
<p>I think it means we'd have our work cut out for us to shift the existing search support over to using the registry</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
