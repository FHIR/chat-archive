---
layout: page
title: "FHIR Chat  · Revoked tokens still allows patient access in FHIR server · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Revoked.20tokens.20still.20allows.20patient.20access.20in.20FHIR.20server.html">Revoked tokens still allows patient access in FHIR server</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="276964297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Revoked%20tokens%20still%20allows%20patient%20access%20in%20FHIR%20server/near/276964297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sagar Sarvankar <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Revoked.20tokens.20still.20allows.20patient.20access.20in.20FHIR.20server.html#276964297">(Mar 29 2022 at 06:50)</a>:</h4>
<p>Hello <span class="user-mention" data-user-id="191676">@Lee Surprenant</span> ,</p>
<p>We have a situation, where we issue a token from oauth server. Using this token, we can then access FHIR patient resource.<br>
After we revoke this token from our auth server, it is expected that this token is no more valid since it is not available on the oauth server.</p>
<p>Now, when we access FHIR patient resource with this revoked token, the IBM FHIR server response with 200 and the requested patient resource. It should have denied access and returned a 400, since the token that is used here is revoked.</p>
<p>This is one of the test cases that is tested by Inferno.</p>
<p>Please let me know your thoughts.</p>
<p>Thank you,<br>
Sagar</p>



<a name="276989189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Revoked%20tokens%20still%20allows%20patient%20access%20in%20FHIR%20server/near/276989189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Revoked.20tokens.20still.20allows.20patient.20access.20in.20FHIR.20server.html#276989189">(Mar 29 2022 at 11:15)</a>:</h4>
<p>the access tokens should have a short lifespan and the client will be unable to get a new one.  is it truly necessary?</p>



<a name="277005871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Revoked%20tokens%20still%20allows%20patient%20access%20in%20FHIR%20server/near/277005871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sagar Sarvankar <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Revoked.20tokens.20still.20allows.20patient.20access.20in.20FHIR.20server.html#277005871">(Mar 29 2022 at 13:40)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191676">@Lee Surprenant</span>  for your response.</p>
<p>Let me see if by shortening the lifespan of the token will give us the desired behavior.<br>
Is there a way where the IBM FHIR server can check if the token is revoked or not, by using the oauth servers's introspect URL before providing access to any of its resources?</p>
<p>Regards,<br>
Sagar</p>



<a name="277008415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Revoked%20tokens%20still%20allows%20patient%20access%20in%20FHIR%20server/near/277008415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Revoked.20tokens.20still.20allows.20patient.20access.20in.20FHIR.20server.html#277008415">(Mar 29 2022 at 13:58)</a>:</h4>
<p>We're just using OpenLiberty's support for this.  Specifically they have a couple different features that are relevant:</p>
<ol>
<li>mpJwt:  <a href="https://www.openliberty.io/docs/21.0.0.3/reference/config/mpJwt.html">https://www.openliberty.io/docs/21.0.0.3/reference/config/mpJwt.html</a></li>
<li>openidConnectClient:  <a href="https://www.openliberty.io/docs/21.0.0.3/reference/config/openidConnectClient.html">https://www.openliberty.io/docs/21.0.0.3/reference/config/openidConnectClient.html</a></li>
</ol>



<a name="277008483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Revoked%20tokens%20still%20allows%20patient%20access%20in%20FHIR%20server/near/277008483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Revoked.20tokens.20still.20allows.20patient.20access.20in.20FHIR.20server.html#277008483">(Mar 29 2022 at 13:59)</a>:</h4>
<p>originally I was working with openidConnectClient which supports token introspection</p>



<a name="277008513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Revoked%20tokens%20still%20allows%20patient%20access%20in%20FHIR%20server/near/277008513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Revoked.20tokens.20still.20allows.20patient.20access.20in.20FHIR.20server.html#277008513">(Mar 29 2022 at 13:59)</a>:</h4>
<p>but over time I moved to mpJwt (which does not)</p>



<a name="277008779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Revoked%20tokens%20still%20allows%20patient%20access%20in%20FHIR%20server/near/277008779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Revoked.20tokens.20still.20allows.20patient.20access.20in.20FHIR.20server.html#277008779">(Mar 29 2022 at 14:01)</a>:</h4>
<p><a href="https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#53-openid-connect-and-oauth-20">https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#53-openid-connect-and-oauth-20</a> mentions the OpenID Connect Client option, we don't have any doc for that...you'd need to configure it yourself based on the Liberty docs</p>



<a name="277021165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Revoked%20tokens%20still%20allows%20patient%20access%20in%20FHIR%20server/near/277021165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sagar Sarvankar <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Revoked.20tokens.20still.20allows.20patient.20access.20in.20FHIR.20server.html#277021165">(Mar 29 2022 at 15:21)</a>:</h4>
<p>Ok <span class="user-mention" data-user-id="191676">@Lee Surprenant</span> , I will go through the links that you have shared here.</p>
<p>Thank you,<br>
Sagar</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
