---
layout: page
title: "FHIR Chat  · Custom Sort Parameters · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html">Custom Sort Parameters</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="275791233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275791233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Batuhan Bulut <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275791233">(Mar 18 2022 at 11:46)</a>:</h4>
<p>Hello  <span class="user-mention" data-user-id="191676">@Lee Surprenant</span> ,</p>
<p>I have a custom resource created by extending Basic resource. I want to sort them by datetime, decreasing. There is no default fields that holds datetime data in Basic resource, only date, which is not enough. This is why i use an extension to implement createdAt field of type "instant". I have created a search parameter config and it's code is "created-at". I'm trying to sort by adding "_sort=-created-at" query but this leads error. The log output says this: "<strong>Undefined sort parameter. resourceType=[Resource] sortParmCode=[created-at]</strong>". Looks like it is not enough to define search parameter and I couldn't find any document about defining a new sort parameter. Is there a way to achieve my goal?</p>
<p>Thanks in advance.</p>



<a name="275796658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275796658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275796658">(Mar 18 2022 at 12:44)</a>:</h4>
<p>Hi Batuhan, <code>resourceType=[Resource]</code> looks a bit suspicious... are you trying a whole-system search or are you searching Basic resources?</p>



<a name="275796719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275796719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275796719">(Mar 18 2022 at 12:44)</a>:</h4>
<p>It looks like you are doing <code>GET [base]?_sort=created-at</code></p>



<a name="275796747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275796747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275796747">(Mar 18 2022 at 12:45)</a>:</h4>
<p>but your search param is only defined for Basic</p>



<a name="275796779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275796779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275796779">(Mar 18 2022 at 12:45)</a>:</h4>
<p>so it should be <code>GET [base]/Basic?_sort=created-at</code></p>



<a name="275796816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275796816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275796816">(Mar 18 2022 at 12:45)</a>:</h4>
<p>or if you want it scoped to just your custom resource type, add a <code>&amp;code=your-code</code> in there</p>



<a name="275796998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275796998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275796998">(Mar 18 2022 at 12:47)</a>:</h4>
<p>finally, what are the semantics of <code>created-at</code>?  if its just when the resource was created, then you should be using <code>_lastUpdated</code>.  if its some other instant (like when some real-world entity was created) then your approach seems right</p>



<a name="275802777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275802777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Batuhan Bulut <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275802777">(Mar 18 2022 at 13:35)</a>:</h4>
<p>Actually I'm searching on Basic resources but like this: <code>GET [base]/?_type=Basic&amp;_profile=${this.PROFILE}&amp;to=${id}&amp;_count=${count}&amp;_page=${page}&amp;_sort=-created-at</code>. Probably this is why it cannot resolve resourceType as Basic while logging. <code>to</code> here is another search parameter and it works fine.</p>
<p>Let me show you some of my search attempts.<br>
<code>GET [base]/Basic</code><br>
Response:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e2a9bbbf-08af-47cb-9730-584ffd0447c5"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"searchset"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"link"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"relation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"self"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://localhost:9443/fhir-server/api/v4/Basic?_count=10&amp;_page=1"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><code>GET [base]/Basic?_profile=https://mydomain.com/fhir/R4/StructureDefinition/UserNotification&amp;_sort=created-at</code><br>
Response:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bd76b098-8ef6-430d-984f-47e4fb6a4ce5"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"searchset"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"link"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"relation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"self"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://localhost:9443/fhir-server/api/v4/Basic?_count=10&amp;_profile=https://mydomain.com/fhir/R4/StructureDefinition/UserNotification&amp;_sort=created-at&amp;_page=1"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><code>GET [base]/?_type=Basic&amp;_profile=https://mydomain.com/fhir/R4/StructureDefinition/UserNotification&amp;_sort=created-at</code><br>
Response:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OperationOutcome"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ac-12-0-3-b8e26aae-37cb-44b7-a0b9-3c820b1c9214"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"issue"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"severity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fatal"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Undefined sort parameter. resourceType=[Resource] sortParmCode=[created-at]"</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="nt">"expression"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="s2">"&lt;empty&gt;"</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><code>GET [base]/?_type=Basic&amp;_profile=https://mydomain.com/fhir/R4/StructureDefinition/UserNotification</code><br>
Response:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bundle"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"99cca769-e38e-41e2-adfd-3a989c61955d"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"searchset"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"link"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"relation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"self"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://localhost:9443/fhir-server/api/v4/?_count=10&amp;_profile=https://mydomain.com/fhir/R4/StructureDefinition/UserNotification&amp;_type=Basic&amp;_page=1"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
<span class="w">    </span><span class="nt">"entry"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://localhost:9443/fhir-server/api/v4//Basic/notification-id-1"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Basic"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notification-id-1"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="nt">"versionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">"lastUpdated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-18T10:54:13.833583Z"</span><span class="p">,</span><span class="w"></span>
<span class="w">                    </span><span class="nt">"profile"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                        </span><span class="s2">"https://mydomain.com/fhir/R4/StructureDefinition/UserNotification"</span><span class="w"></span>
<span class="w">                    </span><span class="p">]</span><span class="w"></span>
<span class="w">                </span><span class="p">},</span><span class="w"></span>
<span class="w">                </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="w">                        </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">                            </span><span class="p">{</span><span class="w"></span>
<span class="w">                                </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"createdAt"</span><span class="p">,</span><span class="w"></span>
<span class="w">                                </span><span class="nt">"valueInstant"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-18T10:54:07.156Z"</span><span class="w"></span>
<span class="w">                            </span><span class="p">},</span><span class="w"></span>
<span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="w">                </span><span class="p">],</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="nt">"search"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"match"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"score"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>I have clipped some of the data from last response to make it smaller.</p>



<a name="275803258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275803258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Batuhan Bulut <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275803258">(Mar 18 2022 at 13:39)</a>:</h4>
<p>And here is my search parameter definition:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"fullUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mydomain.com/fhir/R4/SearchParameter/UserNotification-createdAt"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SearchParameter"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UserNotification-createdAt"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mydomain.com/fhir/R4/SearchParameter/UserNotification-createdAt"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.0.0"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"createdAt"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"draft"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"experimental"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-15T22:37:54+11:00"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UserNotification's createdAt field"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created-at"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"base"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="s2">"Basic"</span><span class="w"></span>
<span class="w">        </span><span class="p">],</span><span class="w"></span>
<span class="w">        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"xpathUsage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"normal"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"xpath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f:Basic/f:extension[@url='https://mydomain.com/fhir/R4/StructureDefinition/UserNotificationExtension']/f:extension[@url='createdAt']/f:valueInstant"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"expression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Basic.extension.where(url='https://mydomain.com/fhir/R4/StructureDefinition/UserNotificationExtension').extension.where(url='createdAt').value"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"multipleOr"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"multipleAnd"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"modifier"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="275804700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275804700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Batuhan Bulut <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275804700">(Mar 18 2022 at 13:49)</a>:</h4>
<p>I didn't use <code>lastUpdated</code> field because hl7 documentation says it shall be updated with current time when the resource updated. I want a datetime field that prone to updates.</p>



<a name="275813474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275813474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Batuhan Bulut <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275813474">(Mar 18 2022 at 14:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191676">Lee Surprenant</span> <a href="#narrow/stream/212434-ibm/topic/Custom.20Sort.20Parameters/near/275796658">said</a>:</p>
<blockquote>
<p>Hi Batuhan, <code>resourceType=[Resource]</code> looks a bit suspicious... are you trying a whole-system search or are you searching Basic resources?</p>
</blockquote>
<p>Since it's not giving me error but zero results when I do <code>GET [base]/Basic?_sort=created-at</code>, the problem is different then.</p>
<p>When i directly search on Basic resource, none of my resources found, zero result. But I can access individual resources with <code>GET [base]/Basic/[id]</code>. When i do whole-system search by restricting the types, <code>GET [base]/?_type=Basic</code>, it just finds my resources (total 21 entries). Isn't it inconsistent? Does it have anything to do with SMART on FHIR?</p>



<a name="275922257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275922257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275922257">(Mar 19 2022 at 18:15)</a>:</h4>
<blockquote>
<p>Does it have anything to do with SMART on FHIR?</p>
</blockquote>
<p>do you have <code>fhir-smart</code> in your userlib?<br>
if so, that could definitely contribute to this... the "Basic" resource can be in the patient compartment and so the fhir-smart interceptor <em>would</em> change a search like <code>GET [base]/Basic</code> into a compartment search like <code>GET [base]/Patient/[context-id]/Basic</code>.<br>
but that doesn't really explain why you wouldn't be able to sort on your custom search parameter</p>



<a name="275922498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275922498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275922498">(Mar 19 2022 at 18:20)</a>:</h4>
<p>for that one, its probably just a limitation of our whole-system search implementation.  whole-system search with a <code>_type</code> parameter that has a single value is a bit wonky... we allow you to use search parameters that apply to just that resource type but (as you found) apparently we don't allow sort parameters that apply to just that resource type in this case.  personally, I think that seems like a reasonable limitation, but feel free to open an enhancement request.</p>



<a name="275922595"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275922595" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275922595">(Mar 19 2022 at 18:23)</a>:</h4>
<p>i think these would be my general recommendations:</p>
<ol>
<li>use the Basic endpoint instead of whole-system search</li>
<li>if using SMART App Launch, use the <code>user/Basic.read</code> scope instead of <code>patient/Basic.read</code></li>
</ol>
<p>but, with that said, I still don't think our current fhir-smart implementation would support this because it doesn't know that your special Basic resource should be searchable to all users (i.e. is not bound to any patient compartment). therefor, I'm thinking your best bet would be to also do this:</p>
<ol start="3">
<li>create your own persistence interceptor (probably starting with fhir-smart as your base) and make it do what you want</li>
</ol>
<p>if you do number 3 and it feels generally applicable, feel free to open an issue to discuss your proposed changes</p>



<a name="275923674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/275923674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#275923674">(Mar 19 2022 at 18:46)</a>:</h4>
<p>for example, I could imagine modifying <code>fhir-smart</code> so that it does a normal search (instead of scoping the search to the compartment) when <code>user/</code> scopes have been granted.  or possibly make that configurable or something</p>



<a name="276185803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Custom%20Sort%20Parameters/near/276185803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Custom.20Sort.20Parameters.html#276185803">(Mar 22 2022 at 13:11)</a>:</h4>
<p><a href="https://github.com/IBM/FHIR/issues/3495">https://github.com/IBM/FHIR/issues/3495</a> &lt;- <span class="user-mention" data-user-id="463702">@Batuhan Bulut</span>  interested for your feedback on this</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
