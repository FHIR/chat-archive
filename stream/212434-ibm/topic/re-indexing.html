---
layout: page
title: "FHIR Chat  · re-indexing · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html">re-indexing</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="216835950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/216835950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#216835950">(Nov 16 2020 at 06:13)</a>:</h4>
<p>where can i find the bucket jar file fhir-bucket-4.5.0-cli.jar for re-indexing the existing resources</p>



<a name="216892055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/216892055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#216892055">(Nov 16 2020 at 16:07)</a>:</h4>
<p>hi Sridhar, <code>fhir-bucket</code> is pretty new and so we didn't have it in our release steps to copy the built artifact to the GitHub release yet</p>



<a name="216892073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/216892073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#216892073">(Nov 16 2020 at 16:07)</a>:</h4>
<p>can you access it from <a href="https://bintray.com/ibm-watson-health/ibm-fhir-server-releases/fhir-bucket#files/com/ibm/fhir/fhir-bucket/4.5.0">https://bintray.com/ibm-watson-health/ibm-fhir-server-releases/fhir-bucket#files/com/ibm/fhir/fhir-bucket/4.5.0</a> ?</p>



<a name="216892211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/216892211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#216892211">(Nov 16 2020 at 16:08)</a>:</h4>
<p>I'll go ahead and copy that into our github release too...thanks for pointing it out</p>



<a name="216892439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/216892439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#216892439">(Nov 16 2020 at 16:10)</a>:</h4>
<p>done...you'll now find it under "Assets" at <a href="https://github.com/IBM/FHIR/releases/tag/4.5.0">https://github.com/IBM/FHIR/releases/tag/4.5.0</a></p>



<a name="217418528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217418528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217418528">(Nov 20 2020 at 15:52)</a>:</h4>
<p>I am facing some issue while Reindex resources</p>
<p>Exception in thread "main" com.ibm.fhir.database.utils.api.UndefinedNameException: org.postgresql.util.PSQLException: ERROR: relation "resource_types" does not exist<br>
  Position: 45<br>
    at com.ibm.fhir.database.utils.postgresql.PostgreSqlTranslator.translate(PostgreSqlTranslator.java:100)<br>
    at com.ibm.fhir.bucket.persistence.ResourceTypesReader.run(ResourceTypesReader.java:50)<br>
    at com.ibm.fhir.bucket.persistence.ResourceTypesReader.run(ResourceTypesReader.java:25)<br>
    at com.ibm.fhir.database.utils.common.CommonDatabaseAdapter.runStatement(CommonDatabaseAdapter.java:475)<br>
    at com.ibm.fhir.bucket.scanner.DataAccess.init(DataAccess.java:98)<br>
    at com.ibm.fhir.bucket.app.Main.scanAndLoad(Main.java:765)<br>
    at com.ibm.fhir.bucket.app.Main.process(Main.java:749)<br>
    at com.ibm.fhir.bucket.app.Main.main(Main.java:834)<br>
Caused by: org.postgresql.util.PSQLException: ERROR: relation "resource_types" does not exist<br>
  Position: 45<br>
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2533)<br>
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2268)<br>
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:313)<br>
    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:448)<br>
    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:369)<br>
    at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:159)<br>
    at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:109)<br>
    at com.ibm.fhir.bucket.persistence.ResourceTypesReader.run(ResourceTypesReader.java:41)<br>
    ... 6 more<br>
Exception in thread "Thread-4" java.lang.NullPointerException<br>
    at com.ibm.fhir.bucket.app.Main.shutdown(Main.java:699)<br>
    at com.ibm.fhir.bucket.app.Main.lambda$scanAndLoad$1(Main.java:759)<br>
    at com.ibm.fhir.bucket.app.Main$$Lambda$1/000000000831B060.run(Unknown Source)<br>
    at java.lang.Thread.run(Thread.java:823)</p>



<a name="217418596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217418596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217418596">(Nov 20 2020 at 15:53)</a>:</h4>
<p>can anyone help with this</p>



<a name="217418663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217418663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217418663">(Nov 20 2020 at 15:53)</a>:</h4>
<p>java -Djava.util.logging.config.file=logging.properties -jar fhir-bucket-4.5.0-cli.jar --fhir-properties <a href="http://fhir.properties">fhir.properties</a> --tenant-name demo1 --max-concurrent-fhir-requests 200 --no-scan --reindex-tstamp 2020-11-20 --reindex-resource-count 10 --reindex-concurrent-requests 20 --db-type postgresql --db-properties <a href="http://postgresql.properties">postgresql.properties</a> --cos-properties <a href="http://cos.properties">cos.properties</a></p>



<a name="217419679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217419679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217419679">(Nov 20 2020 at 16:00)</a>:</h4>
<p><span class="user-mention" data-user-id="304455">@Robin Arnold</span> have you seen anything like this? <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span></p>



<a name="217421126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217421126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Arnold <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217421126">(Nov 20 2020 at 16:09)</a>:</h4>
<p>This comes from the schema used internally by fhir-bucket. This schema is used when fhir-bucket is used to load data from object storage - it shouldn't be needed if all you are doing is reindexing, but it must be still looking for it. I'll take a look at the code-path. If it's needed, the simplest thing would be to run the create schema step. Let me get back to you.</p>



<a name="217422858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217422858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Arnold <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217422858">(Nov 20 2020 at 16:20)</a>:</h4>
<p>Unfortunately with this version you'll need run the above fhir-bucket command once with the <code>--create-schema</code>option. Make sure that your <a href="http://postgresql.properties">postgresql.properties</a> file is pointing to the database you want to use. This doesn't have to the same database as the FHIR server, but it certainly can be. Make sure you have currentSchema=FHIRBUCKET in that properties file too to direct the code to create the tables in the FHIRBUCKET schema. </p>
<p>Sorry about this - the intention was that the schema wouldn't be required for the reindexing function. We have an open issue to tidy up the CLI, so I'll make a note about this.</p>



<a name="217425175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217425175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217425175">(Nov 20 2020 at 16:35)</a>:</h4>
<p>After following the step even though the column "resource_type_id" is not null i am getting this error</p>



<a name="217425194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217425194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217425194">(Nov 20 2020 at 16:35)</a>:</h4>
<p>Exception in thread "main" com.ibm.fhir.database.utils.api.DataAccessException: org.postgresql.util.PSQLException: ERROR: null value in column "resource_type_id" violates not-null constraint<br>
  Detail: Failing row contains (null, Appointment).<br>
    at com.ibm.fhir.database.utils.postgresql.PostgreSqlTranslator.translate(PostgreSqlTranslator.java:104)<br>
    at com.ibm.fhir.bucket.persistence.MergeResourceTypesPostgres.run(MergeResourceTypesPostgres.java:59)<br>
    at com.ibm.fhir.database.utils.common.CommonDatabaseAdapter.runStatement(CommonDatabaseAdapter.java:459)<br>
    at com.ibm.fhir.database.utils.postgresql.PostgreSqlAdapter.runStatement(PostgreSqlAdapter.java:266)<br>
    at com.ibm.fhir.bucket.app.Main.bootstrapDb(Main.java:653)<br>
    at com.ibm.fhir.bucket.app.Main.process(Main.java:747)<br>
    at com.ibm.fhir.bucket.app.Main.main(Main.java:834)<br>
Caused by: org.postgresql.util.PSQLException: ERROR: null value in column "resource_type_id" violates not-null constraint<br>
  Detail: Failing row contains (null, Appointment).<br>
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2533)<br>
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2268)<br>
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:313)<br>
    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:448)<br>
    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:369)<br>
    at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:159)<br>
    at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:125)<br>
    at com.ibm.fhir.bucket.persistence.MergeResourceTypesPostgres.run(MergeResourceTypesPostgres.java:54)<br>
    ... 5 more</p>



<a name="217425260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217425260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217425260">(Nov 20 2020 at 16:35)</a>:</h4>
<p><a href="/user_uploads/10155/402ekuKEc0hHcdVn2LOcrAXo/Screenshot-2020-11-20-at-22.03.30.png">Screenshot-2020-11-20-at-22.03.30.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/402ekuKEc0hHcdVn2LOcrAXo/Screenshot-2020-11-20-at-22.03.30.png" title="Screenshot-2020-11-20-at-22.03.30.png"><img src="/user_uploads/10155/402ekuKEc0hHcdVn2LOcrAXo/Screenshot-2020-11-20-at-22.03.30.png"></a></div>



<a name="217426285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217426285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Arnold <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217426285">(Nov 20 2020 at 16:41)</a>:</h4>
<p>I'll have to check where this is coming from. It looks like a regression. But if the schema was generated (fhir_bucket.resource_types exists), then you should now be able to run the reindex operation.</p>



<a name="217427135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217427135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Arnold <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217427135">(Nov 20 2020 at 16:46)</a>:</h4>
<p>What is your currentSchema set to in your <a href="http://postgresql.properties">postgresql.properties</a> file? You must not use the FHIRDATA schema here - it has to be a different schema name for example FHIRBUCKET.</p>



<a name="217477189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217477189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217477189">(Nov 21 2020 at 01:05)</a>:</h4>
<p>(deleted)</p>



<a name="217483940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217483940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217483940">(Nov 21 2020 at 04:22)</a>:</h4>
<p>yes after changing currentSchema=FHIRBUCKET the above issue got resolved thank you</p>



<a name="217483948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217483948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217483948">(Nov 21 2020 at 04:23)</a>:</h4>
<p>can someone share a default <a href="http://fhir.properties">fhir.properties</a></p>



<a name="217652963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217652963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217652963">(Nov 23 2020 at 16:50)</a>:</h4>
<p>(deleted)</p>



<a name="217745929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217745929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217745929">(Nov 24 2020 at 12:25)</a>:</h4>
<p>2020-11-24 09:07:13.133 00000025    INFO .reindex.DriveReindexOperation Reindex - all done<br>
After i got the message that reindex is all done the process is still been running for hours is it right behaviour or am i missing something</p>



<a name="217745936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/217745936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar S <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#217745936">(Nov 24 2020 at 12:25)</a>:</h4>
<p>2020-11-24 12:23:47.560 00000024    INFO .fhir.bucket.scanner.COSReader allocateJobs[NDJSON]: free = 1<br>
2020-11-24 12:23:47.561 00000024    INFO .fhir.bucket.scanner.COSReader Allocated job count[NDJSON]: 0<br>
2020-11-24 12:23:47.561 00000024    INFO .fhir.bucket.scanner.COSReader Jobs inflight[NDJSON] 0, just allocated: 0<br>
2020-11-24 12:23:57.561 00000024    INFO .fhir.bucket.scanner.COSReader allocateJobs[NDJSON]: free = 1<br>
2020-11-24 12:23:57.562 00000024    INFO .fhir.bucket.scanner.COSReader Allocated job count[NDJSON]: 0<br>
2020-11-24 12:23:57.562 00000024    INFO .fhir.bucket.scanner.COSReader Jobs inflight[NDJSON] 0, just allocated: 0<br>
2020-11-24 12:24:07.562 00000024    INFO .fhir.bucket.scanner.COSReader allocateJobs[NDJSON]: free = 1<br>
2020-11-24 12:24:07.563 00000024    INFO .fhir.bucket.scanner.COSReader Allocated job count[NDJSON]: 0<br>
2020-11-24 12:24:07.563 00000024    INFO .fhir.bucket.scanner.COSReader Jobs inflight[NDJSON] 0, just allocated: 0<br>
2020-11-24 12:24:17.563 00000024    INFO .fhir.bucket.scanner.COSReader allocateJobs[NDJSON]: free = 1<br>
2020-11-24 12:24:17.564 00000024    INFO .fhir.bucket.scanner.COSReader Allocated job count[NDJSON]: 0<br>
2020-11-24 12:24:17.565 00000024    INFO .fhir.bucket.scanner.COSReader Jobs inflight[NDJSON] 0, just allocated: 0<br>
2020-11-24 12:24:27.565 00000024    INFO .fhir.bucket.scanner.COSReader allocateJobs[NDJSON]: free = 1<br>
2020-11-24 12:24:27.566 00000024    INFO .fhir.bucket.scanner.COSReader Allocated job count[NDJSON]: 0<br>
2020-11-24 12:24:27.566 00000024    INFO .fhir.bucket.scanner.COSReader Jobs inflight[NDJSON] 0, just allocated: 0</p>



<a name="218027698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/218027698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> guokun zhang <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#218027698">(Nov 26 2020 at 18:11)</a>:</h4>
<p>Dear IBM team, </p>
<p>we are also trying to update our local ibm fhir server from version 4.4.2 to version 4.5.0.</p>
<p>As suggested from here (<a href="https://github.com/IBM/FHIR/releases">https://github.com/IBM/FHIR/releases</a>) and also from here (<a href="https://github.com/IBM/FHIR/tree/master/fhir-bucket">https://github.com/IBM/FHIR/tree/master/fhir-bucket</a>), we need to do "Database Migration" which includes "Schema Migration" and "Reindex resources". We have done "Schema Migration" but are stuck with "Reindex resources". Would you please help us with the following questions:</p>
<ol>
<li>
<p>Is this "Reindex resources" definitely necessary for the  updates from 4.4.2 to 4.5.0 with existing fhir resources? Without doing this the existing resources will not be searched correctly?</p>
</li>
<li>
<p>The command includes "--fhir-properties <a href="http://fhir.properties">fhir.properties</a>", it is the connection properties file for the FHIR server. But how exact it should be? Is there a template available?</p>
</li>
<li>
<p>The command includes "--cos-properties <a href="http://cos.properties">cos.properties</a>", it is the connection properties file for COS. Is it only optional? I am asking because we are not using IBM COS bucket and don't understand why we need this for reindex. But running withou this returned:<br>
<code>
Exception in thread "main" java.lang.IllegalArgumentException: No COS properties
        at com.ibm.fhir.bucket.app.Main.checkConfig(Main.java:473)
        at com.ibm.fhir.bucket.app.Main.main(Main.java:832)
</code><br>
Many thanks!</p>
</li>
</ol>



<a name="218087599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/218087599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#218087599">(Nov 27 2020 at 12:43)</a>:</h4>
<blockquote>
<p>Is this "Reindex resources" definitely necessary for the updates from 4.4.2 to 4.5.0 with existing fhir resources? </p>
</blockquote>
<p>yes</p>
<blockquote>
<p>Without doing this the existing resources will not be searched correctly?</p>
</blockquote>
<p>correct</p>



<a name="218087688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/218087688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#218087688">(Nov 27 2020 at 12:44)</a>:</h4>
<p>however, <code>fhir-bucket</code> is not required for invoking the <code>$reindex</code> operation...it was just for convenience</p>



<a name="218087875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/218087875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#218087875">(Nov 27 2020 at 12:47)</a>:</h4>
<p>I recently drafted <a href="https://github.com/IBM/FHIR/pull/1730">https://github.com/IBM/FHIR/pull/1730</a> to explain the operation a little bit better.  Basically you just need to repeatedly POST to this endpoint with a <code>tstamp</code> parameter that is later than the time in which the db schema migration was applied.</p>



<a name="218091326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/218091326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#218091326">(Nov 27 2020 at 13:23)</a>:</h4>
<p>If you do decide to use the <code>fhir-bucket</code> utility, the best documentation for that is in the README for that module:  <a href="https://github.com/IBM/FHIR/tree/master/fhir-bucket#configuration">https://github.com/IBM/FHIR/tree/master/fhir-bucket#configuration</a></p>



<a name="218091351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/218091351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#218091351">(Nov 27 2020 at 13:23)</a>:</h4>
<p>there you will find templates for both <a href="http://fhir.properties">fhir.properties</a> and <a href="http://cos.properties">cos.properties</a></p>



<a name="218091579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/218091579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#218091579">(Nov 27 2020 at 13:25)</a>:</h4>
<p>however, one thing we recently found is that there is a bad bug in the 4.5.0 reindex implementation which is preventing it from properly re-indexing certain search parameters.  That issue is <a href="https://github.com/IBM/FHIR/issues/1742">https://github.com/IBM/FHIR/issues/1742</a> and we'll be rolling a 4.5.1 ASAP to get that addressed (hopefully monday)</p>



<a name="219322056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/re-indexing/near/219322056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> guokun zhang <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/re-indexing.html#219322056">(Dec 09 2020 at 11:04)</a>:</h4>
<p>(deleted)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
