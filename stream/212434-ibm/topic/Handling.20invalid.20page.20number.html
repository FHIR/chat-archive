---
layout: page
title: "FHIR Chat  · Handling invalid page number · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html">Handling invalid page number</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="179348128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348128">(Oct 29 2019 at 16:43)</a>:</h4>
<p>I recently added PersistenceLayer (PL) test cases for handling invalid page numbers (AbstractPagingTest.testInvalidPage0 and AbstractPagingTest.testInvalidPage4)</p>



<a name="179348259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348259">(Oct 29 2019 at 16:45)</a>:</h4>
<p><a href="https://github.com/IBM/FHIR/pull/330" target="_blank" title="https://github.com/IBM/FHIR/pull/330">https://github.com/IBM/FHIR/pull/330</a> updates the JDBC impl so that it doesn't throw when we get an invalid page number</p>



<a name="179348277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348277">(Oct 29 2019 at 16:45)</a>:</h4>
<p>but its causing the test to fail because its expecting an exception</p>



<a name="179348360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348360">(Oct 29 2019 at 16:46)</a>:</h4>
<p>what is the proper behavior for a Persistence implementation when we receive a search with an invalid page number?</p>



<a name="179348394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348394">(Oct 29 2019 at 16:46)</a>:</h4>
<p>what type of invalid number?</p>



<a name="179348398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348398">(Oct 29 2019 at 16:46)</a>:</h4>
<p>two examples</p>



<a name="179348400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348400">(Oct 29 2019 at 16:46)</a>:</h4>
<p>negative, zero... <br>
postivie?</p>



<a name="179348446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348446">(Oct 29 2019 at 16:47)</a>:</h4>
<p>negative / zero is one<br>
more than the number of pages is the other</p>



<a name="179348467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348467">(Oct 29 2019 at 16:47)</a>:</h4>
<p>so lets call them 0, and 4  (the test expects 3)</p>



<a name="179348481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348481">(Oct 29 2019 at 16:47)</a>:</h4>
<p>more than ... empty page</p>



<a name="179348488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348488">(Oct 29 2019 at 16:47)</a>:</h4>
<p>in both cases, it is a client error</p>



<a name="179348509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348509">(Oct 29 2019 at 16:47)</a>:</h4>
<p>less than it should throw some loose exception / outcome or return the first page</p>



<a name="179348566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348566">(Oct 29 2019 at 16:48)</a>:</h4>
<p>once again.... my 1000 cents</p>



<a name="179348636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348636">(Oct 29 2019 at 16:48)</a>:</h4>
<p>in <a href="https://github.com/IBM/FHIR/issues/194" target="_blank" title="https://github.com/IBM/FHIR/issues/194">https://github.com/IBM/FHIR/issues/194</a> we define a rule-of-thumb...that PL shouldn't throw for client errors</p>



<a name="179348670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348670">(Oct 29 2019 at 16:49)</a>:</h4>
<p>...but one that our impl doesn't actually follow</p>



<a name="179348695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348695">(Oct 29 2019 at 16:49)</a>:</h4>
<p>so this is an interesting test for that...</p>



<a name="179348841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348841">(Oct 29 2019 at 16:50)</a>:</h4>
<p>what if we have the PL return an empty result along with an OperationOutcome with a warning that the page number was invalid?</p>



<a name="179348883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348883">(Oct 29 2019 at 16:51)</a>:</h4>
<p>then, for the server, the REST layer can decide what to do with that (based on the passed Prefer "return" preference or the server config)</p>



<a name="179348925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179348925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179348925">(Oct 29 2019 at 16:51)</a>:</h4>
<p>and for the test, we could verify that:</p>
<ol>
<li>no results came back; and</li>
<li>the response contains the warning</li>
</ol>



<a name="179349171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179349171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179349171">(Oct 29 2019 at 16:53)</a>:</h4>
<p><span class="user-mention" data-user-id="192632">@Paul Bastide</span> thoughts on this proposal?  or you still prefer throwing in the page 0 case?</p>



<a name="179349260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179349260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179349260">(Oct 29 2019 at 16:54)</a>:</h4>
<p>I like the idea.  I think that makes sense</p>



<a name="179349275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179349275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179349275">(Oct 29 2019 at 16:54)</a>:</h4>
<p>it's a parseable result</p>



<a name="179349296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179349296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179349296">(Oct 29 2019 at 16:54)</a>:</h4>
<p><span class="user-mention" data-user-id="246296">@Albert(Xu) Wang</span> <span class="user-mention" data-user-id="192334">@John Timm</span> ? ^</p>



<a name="179349410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179349410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179349410">(Oct 29 2019 at 16:55)</a>:</h4>
<p>i also kind of like paul's idea of returning page 1 if they ask for a negative or 0 page.  any objections to this?</p>



<a name="179349516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179349516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179349516">(Oct 29 2019 at 16:56)</a>:</h4>
<p>something totally unexpected, but potentially handy, would be to interpret negative pages as index number from the back (like negative python array indices) :-)</p>



<a name="179353609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179353609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179353609">(Oct 29 2019 at 17:36)</a>:</h4>
<p>I support the option of using 1 if the page number is negative or zero</p>



<a name="179353986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179353986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179353986">(Oct 29 2019 at 17:41)</a>:</h4>
<p>and in the case of page number &gt; last page, we just return 0 results?</p>



<a name="179354260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179354260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179354260">(Oct 29 2019 at 17:43)</a>:</h4>
<p>The reason why we no longer see an exception is because pagination happens on a List of resource ids, previously, we had a problem where when the list was empty, it was generating invalid SQL and ultimately throwing a FHIRPersistenceException. Now an empty list is returned if there are no resource ids for a given page (i.e. an invalid offset).</p>



<a name="179354331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179354331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179354331">(Oct 29 2019 at 17:44)</a>:</h4>
<p>should we have logic like this:<br>
if (page &lt; min) page = min<br>
if (page &gt; max) page = max<br>
?</p>



<a name="179354645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179354645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179354645">(Oct 29 2019 at 17:47)</a>:</h4>
<p>i like the page&lt;min check</p>



<a name="179354664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179354664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179354664">(Oct 29 2019 at 17:47)</a>:</h4>
<p>i think we're in a greement there</p>



<a name="179354725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179354725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179354725">(Oct 29 2019 at 17:48)</a>:</h4>
<p>for page &gt; max, I think we're better off returning empty</p>



<a name="179354733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179354733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179354733">(Oct 29 2019 at 17:48)</a>:</h4>
<p>but i don't feel that strongly</p>



<a name="179354741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179354741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179354741">(Oct 29 2019 at 17:48)</a>:</h4>
<p>That's fair</p>



<a name="179354766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179354766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179354766">(Oct 29 2019 at 17:49)</a>:</h4>
<p>it would enable lazy folks to just keep incrementing page number til they don't get anything</p>



<a name="179354795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179354795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179354795">(Oct 29 2019 at 17:49)</a>:</h4>
<p>(as opposed to checking either the total or the lastpage like they should)</p>



<a name="179354804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179354804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179354804">(Oct 29 2019 at 17:49)</a>:</h4>
<p>Have we decided the best place to put the logic? I can add the change to my PR. Also, we will need to tweak the unit tests accordingly.</p>



<a name="179354848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179354848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179354848">(Oct 29 2019 at 17:49)</a>:</h4>
<p>no, we havn't determined where yet.  yes, if you can add to your PR that would be ideal</p>



<a name="179355012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355012">(Oct 29 2019 at 17:51)</a>:</h4>
<p>sure, i'll dig in and figure out where to put it</p>



<a name="179355160"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355160" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355160">(Oct 29 2019 at 17:52)</a>:</h4>
<p>so then on the search result bundle what do we put for prev / next if page &gt; max = no results</p>



<a name="179355175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355175">(Oct 29 2019 at 17:52)</a>:</h4>
<p>will we just keep reporting imaginary pages?</p>



<a name="179355253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355253">(Oct 29 2019 at 17:53)</a>:</h4>
<p>I guess it would keep things consistent</p>



<a name="179355289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355289">(Oct 29 2019 at 17:53)</a>:</h4>
<p>but it seems a bit odd to have self = 5000, pref = 4999 and next = 5001 when we are already way out of range of the actually paged data</p>



<a name="179355412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355412">(Oct 29 2019 at 17:54)</a>:</h4>
<p>good question.  i was mostly focused on whats the proper response from the Persistence Layer's perspective</p>



<a name="179355469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355469">(Oct 29 2019 at 17:55)</a>:</h4>
<p>if we want, we return success=false</p>



<a name="179355511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355511">(Oct 29 2019 at 17:55)</a>:</h4>
<p>and REST layer could map the OperationOutcome to a 400 error</p>



<a name="179355651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355651">(Oct 29 2019 at 17:56)</a>:</h4>
<p>I'd be tempted to do that for all invalid page numbers... negative, zero, &gt; max, etc.</p>



<a name="179355680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355680">(Oct 29 2019 at 17:57)</a>:</h4>
<p>I'm just trying to make sure things are (mostly) consistent across the board</p>



<a name="179355717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355717">(Oct 29 2019 at 17:57)</a>:</h4>
<p>yeah</p>



<a name="179355801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179355801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179355801">(Oct 29 2019 at 17:58)</a>:</h4>
<p>does spec define behavior for invalid page numbers?</p>



<a name="179356032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179356032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179356032">(Oct 29 2019 at 18:00)</a>:</h4>
<p><a href="https://www.hl7.org/fhir/http.html#paging" target="_blank" title="https://www.hl7.org/fhir/http.html#paging">https://www.hl7.org/fhir/http.html#paging</a></p>



<a name="179356295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179356295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179356295">(Oct 29 2019 at 18:02)</a>:</h4>
<p>doesn't really help</p>



<a name="179356307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179356307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179356307">(Oct 29 2019 at 18:02)</a>:</h4>
<p>there is no official <code>_page</code> parameter</p>



<a name="179356319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179356319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179356319">(Oct 29 2019 at 18:02)</a>:</h4>
<p>only <code>_count</code></p>



<a name="179356371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179356371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179356371">(Oct 29 2019 at 18:03)</a>:</h4>
<p>and if <code>_count=0</code> then it should be interpreted as <code>_summary=count</code></p>



<a name="179356562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179356562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179356562">(Oct 29 2019 at 18:04)</a>:</h4>
<p>yeah, i guess the _page parameter was our invention</p>



<a name="179356577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179356577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179356577">(Oct 29 2019 at 18:04)</a>:</h4>
<p>and what matters is the links in the response</p>



<a name="179356604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179356604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179356604">(Oct 29 2019 at 18:05)</a>:</h4>
<p>anyway, i think the cop-out on this issue is <a href="https://github.com/IBM/FHIR/issues/254" target="_blank" title="https://github.com/IBM/FHIR/issues/254">https://github.com/IBM/FHIR/issues/254</a> :-)</p>



<a name="179356702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179356702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179356702">(Oct 29 2019 at 18:06)</a>:</h4>
<p>lenient:  <code>&lt; 1</code> -&gt; 1; <code>&gt; last</code> -&gt; last<br>
strict:  <code>&lt; 1 or &gt; last</code> -&gt; 400 error</p>



<a name="179356889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179356889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179356889">(Oct 29 2019 at 18:07)</a>:</h4>
<p>we already hide <code>prev</code> and <code>next</code> links for the first/last entry.  so on that front we could just exclude them both if we have an invalid page number</p>



<a name="179357085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179357085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179357085">(Oct 29 2019 at 18:08)</a>:</h4>
<p>we need the lenient/strict behavior for invalid count as well</p>



<a name="179357103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179357103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179357103">(Oct 29 2019 at 18:09)</a>:</h4>
<p>and also we need _count=0 to invoke _summary=count</p>



<a name="179357187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179357187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179357187">(Oct 29 2019 at 18:09)</a>:</h4>
<p>I think 254 can cover _count validation, but wanna open new related issue for handling _count=0 ?</p>



<a name="179357405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179357405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Timm <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179357405">(Oct 29 2019 at 18:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191676">@Lee Surprenant</span><br>
254 can cover page and new issue for count or vice versa?</p>



<a name="179362930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179362930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179362930">(Oct 29 2019 at 19:02)</a>:</h4>
<p>sorry, i just meant 254 can cover the "validation" (and use of handling pref) for all parameters  (_count, _page, and all others)</p>



<a name="179363005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Handling%20invalid%20page%20number/near/179363005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Handling.20invalid.20page.20number.html#179363005">(Oct 29 2019 at 19:03)</a>:</h4>
<p>so open a new issue for handling _count=0</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
