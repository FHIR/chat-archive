---
layout: page
title: "FHIR Chat  · MedicationStatement Not a valid resource · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/MedicationStatement.20Not.20a.20valid.20resource.html">MedicationStatement Not a valid resource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="239410909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/MedicationStatement%20Not%20a%20valid%20resource/near/239410909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dorian Quell <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/MedicationStatement.20Not.20a.20valid.20resource.html#239410909">(May 19 2021 at 12:06)</a>:</h4>
<p>Hey all, we just updated to version 4.7.0 (from version 4.5.0)<br>
When I tried to load a MedicationStatement resource into the FHIR Server I got the following error:</p>
<p>400 Bad Request: [{<br>
    "resourceType": "OperationOutcome",<br>
    "id": "c0-a8-a0-3-8f3064f7-1cff-4ff5-becc-a6060d92c971",<br>
    "issue": [ {<br>
            "severity": "error",<br>
            "code": "not-found",<br>
            "details": {<br>
                "text": "The requested resource type 'MedicationStatement' is not found"<br>
            }}]}]</p>
<p>Is there something I need to add to the standard installation of the fhir server to use the MedicationStatement resource? Seems odd that it is not able to find the resource type anymore.</p>



<a name="239447218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/MedicationStatement%20Not%20a%20valid%20resource/near/239447218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/MedicationStatement.20Not.20a.20valid.20resource.html#239447218">(May 19 2021 at 15:38)</a>:</h4>
<p>Hi Dorian.  I'd be surprised if there was something special about MedicationStatement here.  Do other resource types work?  I assume not and I'd suggest having a quick look at the server logs.  Are you using the docker image or did you install yourself?</p>



<a name="239447394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/MedicationStatement%20Not%20a%20valid%20resource/near/239447394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/MedicationStatement.20Not.20a.20valid.20resource.html#239447394">(May 19 2021 at 15:39)</a>:</h4>
<p>quite a bit has changed since 4.5.0, so I'd highly suggest going through the migration consideration sections of the release notes.  especially for 4.6.0 and 4.7.0</p>



<a name="239569988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/MedicationStatement%20Not%20a%20valid%20resource/near/239569988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dorian Quell <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/MedicationStatement.20Not.20a.20valid.20resource.html#239569988">(May 20 2021 at 10:53)</a>:</h4>
<p>Hey, I tried out some other resources.<br>
Conditon, Observation, Procedure, Patient, and Immunization worked without problems.<br>
MedicationStatement and Consent were not recognized.<br>
We running the server in a docker container, but because of the large jump between the versions, we didn't migrate the data, but created new resources and posted them to the server again. So the server is a clean install and had no data before.</p>
<p>The Docker container also says unhealthy, but we cannot find any problem that would cause this</p>
<p>The server logs only say "Error while processing request bundle."</p>
<p>[5/20/21, 6:34:04:348 UTC] 0000031c FHIRRestServl I   Received request: tenantId:[default] dsId:[default] user:[fhiruser] method:[POST] uri:[<strong>*</strong>***/fhir-server/api/v4]<br>
[5/20/21, 6:34:04:354 UTC] 0000031c CacheTransact I   Transaction failed - afterCompletion(status = 4)<br>
[5/20/21, 6:34:04:354 UTC] 0000031c FHIRResource  I   Error while processing request bundle.<br>
[5/20/21, 6:34:04:355 UTC] 0000031c FHIRRestServl I   Completed request[0.007 secs]: tenantId:[default] dsId:[default] user:[fhiruser] method:[POST] uri:[<strong>*</strong>****/fhir-server/api/v4] status:[400]</p>



<a name="239582546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/MedicationStatement%20Not%20a%20valid%20resource/near/239582546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dorian Quell <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/MedicationStatement.20Not.20a.20valid.20resource.html#239582546">(May 20 2021 at 12:33)</a>:</h4>
<p>Here is also the docker-compose we used:</p>
<p>version: '3.7'<br>
services:<br>
  postgres:<br>
    build:<br>
      context: postgres<br>
      dockerfile: Dockerfile<br>
    shm_size: 256MB<br>
    tty: true<br>
    stdin_open: true<br>
    hostname: postgres-db<br>
    volumes:</p>
<div class="codehilite"><pre><span></span><code>  - type: bind
    source: ./postgres/db
    target: /db
# Stop Grace Period - 30 seconds
stop_grace_period: 30s
sysctls:
  net.core.somaxconn: 256
  net.ipv4.tcp_syncookies: 0
  # To use all of 2 gigabytes
  kernel.shmmax: 1055092736
  kernel.shmall: 257591
privileged: true
command: tail -f /dev/null
environment:
  PG_TRUST_LOCALNET: &#39;true&#39;
healthcheck:
  start_period: 21s
  test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -d fhirdb -U fhiradmin&quot;]
  interval: 10s
  timeout: 5s
  retries: 3
networks:

  - fhir
</code></pre></div>

<h1>ports:</h1>
<h1>- 5432:5432</h1>
<p>fhir-server:<br>
    image: ibmcom/ibm-fhir-server:4.7.1<br>
    hostname: fhir<br>
    volumes:</p>
<div class="codehilite"><pre><span></span><code>  - type: bind
    source: ./fhir/config
    target: /opt/ol/wlp/usr/servers/defaultServer/config
    read_only: true

  - type: bind
    source: ./fhir/configDropins/overrides
    target: /opt/ol/wlp/usr/servers/defaultServer/configDropins/overrides
    read_only: true

  - type: bind
    source: ./fhir/userlib
    target: /opt/ol/wlp/usr/servers/defaultServer/userlib
    read_only: true

  - type: bind
    source: ./fhir/openapi.json
    target: /opt/ol/wlp/usr/servers/defaultServer/apps/expanded/fhir-openapi.war/META-INF/openapi.json
    read_only: true

  - type: bind
    source: ./fhir/server.xml
    target: /opt/ol/wlp/usr/servers/defaultServer/server.xml
    read_only: true

  - type: bind
    source: ./certs
    target: /opt/ol/wlp/usr/servers/defaultServer/resources/security
    read_only: true
command: bash -c &quot;
  java -jar /opt/ibm-fhir-server/tools/fhir-persistence-schema-*-cli.jar
    --db-type postgresql --prop db.host=postgres --prop db.port=5432 --prop db.database=fhirdb --prop user=fhiradmin --prop password=change-password
    --prop resourceTypes=AllergyIntolerance,CarePlan,CareTeam,CodeSystem,Condition,Coverage,Device,DiagnosticReport,DocumentReference,Encounter,ExplanationOfBenefit,Goal,Group,Immunization,List,Location,Medication,MedicationAdministration,MedicationDispense,MedicationRequest,Observation,Organization,Patient,Practitioner,PractitionerRole,Procedure,Provenance,StructureDefinition,ValueSet
    --update-schema --grant-to fhirserver &amp;&amp;
  /opt/ol/wlp/bin/server run&quot;
healthcheck:
  start_period: 32s
  interval: 30s
  timeout: 5s
  retries: 3
  # https://docs.docker.com/compose/compose-file/#variable-substitution
  test: curl -k -u &#39;fhiruser:change-password&#39; &#39;https://localhost/fhir-server/api/v4/$$healthcheck&#39;
ports:
</code></pre></div>

<h1>- 9080:9080</h1>
<div class="codehilite"><pre><span></span><code>  - 443:9443
depends_on:
  postgres:
    condition: service_healthy
networks:

  - fhir
</code></pre></div>

<p>networks:<br>
  fhir:<br>
    driver: bridge</p>
<p>The only things we adjusted was to change the port from 9443 to 443 and add the binds for the certificates.</p>



<a name="239589891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/MedicationStatement%20Not%20a%20valid%20resource/near/239589891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/MedicationStatement.20Not.20a.20valid.20resource.html#239589891">(May 20 2021 at 13:22)</a>:</h4>
<p>Thanks for the added detail, that helps a lot.  It looks like you based this docker-compose on the one in our demo folder at <a href="https://github.com/IBM/FHIR/tree/main/demo">https://github.com/IBM/FHIR/tree/main/demo</a> ...thats great!</p>
<p>This docker-compose uses a somewhat-experimental feature (read: not well documented) for creating tables for only a subset of the resource types in the specification.  The list is documented at <a href="https://github.com/IBM/FHIR/tree/main/demo#limitations">https://github.com/IBM/FHIR/tree/main/demo#limitations</a> along with steps on how to add new ones.</p>



<a name="239590111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/MedicationStatement%20Not%20a%20valid%20resource/near/239590111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/MedicationStatement.20Not.20a.20valid.20resource.html#239590111">(May 20 2021 at 13:23)</a>:</h4>
<p>Note that we also just landed a quick update to explain how to modify the docker-compose.yml and fhir-server-config.json files to support additional resource types.</p>



<a name="239602702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/MedicationStatement%20Not%20a%20valid%20resource/near/239602702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dorian Quell <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/MedicationStatement.20Not.20a.20valid.20resource.html#239602702">(May 20 2021 at 14:38)</a>:</h4>
<p>Thank you, that fixed the problem.</p>



<a name="239602805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/MedicationStatement%20Not%20a%20valid%20resource/near/239602805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/MedicationStatement.20Not.20a.20valid.20resource.html#239602805">(May 20 2021 at 14:39)</a>:</h4>
<p>great.  i've also opened a pull request to add those 2 resource types to the demo env by default:  <a href="https://github.com/IBM/FHIR/pull/2397">https://github.com/IBM/FHIR/pull/2397</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
