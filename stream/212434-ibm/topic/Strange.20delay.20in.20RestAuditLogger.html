---
layout: page
title: "FHIR Chat  · Strange delay in RestAuditLogger · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html">Strange delay in RestAuditLogger</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="179059794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179059794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179059794">(Oct 25 2019 at 15:24)</a>:</h4>
<p>I'm seeing some odd behavior in my local server; once in a while I'm seeing simple search requests take 5 seconds instead of the normal fast response:</p>
<div class="codehilite"><pre><span></span>[10/25/19, 11:22:47:865 EDT] 000005c7 com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Received request: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient
[10/25/19, 11:22:52:884 EDT] 000005c7 com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Completed request[5.019 secs]: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient status:[200]
[10/25/19, 11:22:54:188 EDT] 0000021b com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Received request: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient
[10/25/19, 11:22:54:203 EDT] 0000021b com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Completed request[0.015 secs]: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient status:[200]
[10/25/19, 11:22:55:081 EDT] 00000818 com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Received request: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient
[10/25/19, 11:22:55:094 EDT] 00000818 com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Completed request[0.013 secs]: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient status:[200]
[10/25/19, 11:22:56:006 EDT] 0000052f com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Received request: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient
[10/25/19, 11:22:56:022 EDT] 0000052f com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Completed request[0.016 secs]: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient status:[200]
[10/25/19, 11:22:56:723 EDT] 00000818 com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Received request: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient
[10/25/19, 11:22:56:737 EDT] 00000818 com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Completed request[0.014 secs]: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient status:[200]
[10/25/19, 11:22:57:421 EDT] 000004dc com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Received request: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient
[10/25/19, 11:22:57:437 EDT] 000004dc com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Completed request[0.016 secs]: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient status:[200]
[10/25/19, 11:22:57:995 EDT] 000005d7 com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Received request: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient
[10/25/19, 11:23:03:012 EDT] 000005d7 com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Completed request[5.017 secs]: tenantId:[default] dsId:[default] user:[fhiruser] method:[GET] uri:[https://localhost:9443/fhir-server/api/v4/Patient status:[200]
</pre></div>



<a name="179059850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179059850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179059850">(Oct 25 2019 at 15:24)</a>:</h4>
<p>Have we changed anything in that code?</p>



<a name="179059851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179059851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179059851">(Oct 25 2019 at 15:24)</a>:</h4>
<p>my config definitely is set to the DisabledAuditLogService:</p>
<div class="codehilite"><pre><span></span>&quot;audit&quot;: {
            &quot;serviceClassName&quot; : &quot;com.ibm.fhir.audit.logging.impl.DisabledAuditLogService&quot;,
            &quot;serviceProperties&quot; : {
            }
        },
</pre></div>



<a name="179059901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179059901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179059901">(Oct 25 2019 at 15:25)</a>:</h4>
<p>when i check the trace its happening here:</p>
<div class="codehilite"><pre><span></span>[10/25/19, 11:19:51:650 EDT] 000001fe RestAuditLogg &gt; com.ibm.fhir.server.util.RestAuditLogger initLogEntry ENTRY
[10/25/19, 11:19:56:655 EDT] 000001fe RestAuditLogg &lt; com.ibm.fhir.server.util.RestAuditLogger initLogEntry RETURN
</pre></div>



<a name="179059911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179059911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179059911">(Oct 25 2019 at 15:25)</a>:</h4>
<p>i don't think this stuff has changed recently...</p>



<a name="179060437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179060437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179060437">(Oct 25 2019 at 15:30)</a>:</h4>
<p>I commented these lines and now its fast again:<br>
<a href="/user_uploads/10155/hLYWSrQQ28hS-dtMBgNKeocA/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/hLYWSrQQ28hS-dtMBgNKeocA/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/hLYWSrQQ28hS-dtMBgNKeocA/pasted_image.png"></a></div>



<a name="179060448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179060448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179060448">(Oct 25 2019 at 15:30)</a>:</h4>
<p><a href="https://stackoverflow.com/questions/33289695/inetaddress-getlocalhost-slow-to-run-30-seconds" target="_blank" title="https://stackoverflow.com/questions/33289695/inetaddress-getlocalhost-slow-to-run-30-seconds">https://stackoverflow.com/questions/33289695/inetaddress-getlocalhost-slow-to-run-30-seconds</a>  :hmm:</p>



<a name="179060458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179060458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179060458">(Oct 25 2019 at 15:30)</a>:</h4>
<p>oh</p>



<a name="179060461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179060461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179060461">(Oct 25 2019 at 15:30)</a>:</h4>
<p>I have seen that before</p>



<a name="179060473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179060473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179060473">(Oct 25 2019 at 15:30)</a>:</h4>
<p>it's generally when I'm on the train and I have low internet connectivity</p>



<a name="179060479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179060479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179060479">(Oct 25 2019 at 15:30)</a>:</h4>
<p>or the connectivity is dropping</p>



<a name="179060569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179060569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179060569">(Oct 25 2019 at 15:31)</a>:</h4>
<p>the IP address should be returned only one time</p>



<a name="179060638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179060638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179060638">(Oct 25 2019 at 15:32)</a>:</h4>
<p>maybe shove it into a static one time... I don't think it needs to be synchronized</p>



<a name="179062357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179062357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179062357">(Oct 25 2019 at 15:48)</a>:</h4>
<p>actually the workaround documented at <a href="https://stackoverflow.com/a/41847289/161022" target="_blank" title="https://stackoverflow.com/a/41847289/161022">https://stackoverflow.com/a/41847289/161022</a> fixed me</p>



<a name="179062369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179062369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179062369">(Oct 25 2019 at 15:48)</a>:</h4>
<p>its kind of a rediculous mac issue</p>



<a name="179062399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Strange%20delay%20in%20RestAuditLogger/near/179062399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Strange.20delay.20in.20RestAuditLogger.html#179062399">(Oct 25 2019 at 15:48)</a>:</h4>
<p>this happened while running with OpenJDK 11.0.5 (OpenJ9)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
