---
layout: page
title: "FHIR Chat  · Number and Quantity Search · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Number.20and.20Quantity.20Search.html">Number and Quantity Search</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188659374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Number%20and%20Quantity%20Search/near/188659374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Number.20and.20Quantity.20Search.html#188659374">(Feb 20 2020 at 17:38)</a>:</h4>
<p>I've always been confused about whether decimals (and quantities) should be handled as a ranges for purposes of search.  IMHO the spec is clear about handling the "search value" as a range, but not nearly as clear about the target value.</p>



<a name="188659450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Number%20and%20Quantity%20Search/near/188659450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Number.20and.20Quantity.20Search.html#188659450">(Feb 20 2020 at 17:39)</a>:</h4>
<p>Currently, we only save the actual numeric value and not its implicit range (except for Range data types which have an explicit range), and in fact our Number Values tables don't even have columns for the range</p>



<a name="188659472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Number%20and%20Quantity%20Search/near/188659472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Number.20and.20Quantity.20Search.html#188659472">(Feb 20 2020 at 17:40)</a>:</h4>
<p>Recently, Graham chimed in with this answer and it matches my own opinion on what the specs wants from us:  <a href="#narrow/stream/179166-implementers/topic/Search.20for.20Decimals.20respecting.20Ranges/near/188599623" title="#narrow/stream/179166-implementers/topic/Search.20for.20Decimals.20respecting.20Ranges/near/188599623">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Search.20for.20Decimals.20respecting.20Ranges/near/188599623</a></p>



<a name="188659606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Number%20and%20Quantity%20Search/near/188659606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Number.20and.20Quantity.20Search.html#188659606">(Feb 20 2020 at 17:41)</a>:</h4>
<p>Although I don't think there is consensus among implementers, I think we should update our schema and start capturing the implicit range of numbers and quantities going forward, and so I opened the following PR:  <a href="https://github.com/IBM/FHIR/pull/710" target="_blank" title="https://github.com/IBM/FHIR/pull/710">https://github.com/IBM/FHIR/pull/710</a></p>



<a name="189136673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Number%20and%20Quantity%20Search/near/189136673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Number.20and.20Quantity.20Search.html#189136673">(Feb 26 2020 at 17:31)</a>:</h4>
<p>After reviewing this with the team, we decided to merge it.  We still need to decide whether/how to do the schema migration.  The current thought is that we will leave the existing numeric values in the X_NUMBER_VALUE and X_QUANTITY_VALUE columns and we will NOT populate the LOW and HIGH columns for these historic values.  this should be ok because the queries were updated to use both the numeric value in the _VALUE column AND the _VALUE_LOW and _VALUE_HIGH columns (and the two subqueries are ORed together)</p>



<a name="189136702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Number%20and%20Quantity%20Search/near/189136702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Number.20and.20Quantity.20Search.html#189136702">(Feb 26 2020 at 17:31)</a>:</h4>
<p>If you are using our 4.0.0 or 4.0.1 releases and this is not suitable for you, please let us know</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
