---
layout: page
title: "FHIR Chat  · issue #1517 - env vars in fhir-server-config · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/issue.20.231517.20-.20env.20vars.20in.20fhir-server-config.html">issue #1517 - env vars in fhir-server-config</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="212319736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/issue%20%231517%20-%20env%20vars%20in%20fhir-server-config/near/212319736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/issue.20.231517.20-.20env.20vars.20in.20fhir-server-config.html#212319736">(Oct 05 2020 at 15:57)</a>:</h4>
<p>We got a really nice external contribution for adding this feature that will improve deployment automation for fhir-server in a modern architecture:  <a href="https://github.com/IBM/FHIR/pull/1552">https://github.com/IBM/FHIR/pull/1552</a></p>
<p>Basically the PR implements an approach that I had outlined where we us Apache StringSubstitutor to replace values in the config file with values from environment variables.</p>
<p>I think there is only one outstanding discussion on this PR and we wanted to call attention to it / open it up to the wider team:  <a href="https://github.com/IBM/FHIR/pull/1552#discussion_r498413614">https://github.com/IBM/FHIR/pull/1552#discussion_r498413614</a></p>



<a name="212359083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/issue%20%231517%20-%20env%20vars%20in%20fhir-server-config/near/212359083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/issue.20.231517.20-.20env.20vars.20in.20fhir-server-config.html#212359083">(Oct 05 2020 at 21:27)</a>:</h4>
<p><span class="user-mention" data-user-id="192632">@Paul Bastide</span>  I've read and thought your arguments on this one but I'm leaning towards NOT forcing the prefix/pattern for env var substitutions.  The main thing swaying me is that neither Liberty (server.xml), Docker, nor Kubernetes seem to impose any such pattern/limitation on environment variables that can be set / configured.<br>
Do you have any pointers to common / adopted systems that do enforce such a pattern?<br>
How strong do you feel about the security benefits of forcing the prefix?</p>



<a name="212359272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/issue%20%231517%20-%20env%20vars%20in%20fhir-server-config/near/212359272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/issue.20.231517.20-.20env.20vars.20in.20fhir-server-config.html#212359272">(Oct 05 2020 at 21:29)</a>:</h4>
<p>the other thing swaying me is that the external contributor seemed to feel strongly enough to argue about not forcing the prefix.  i realize this isn't a great reason, but I really want to encourage external contributors like this person and, if the security impact is negligable, I'd give the "benefit of the doubt" to how it was coded up in the PR</p>



<a name="212369906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/issue%20%231517%20-%20env%20vars%20in%20fhir-server-config/near/212369906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/issue.20.231517.20-.20env.20vars.20in.20fhir-server-config.html#212369906">(Oct 05 2020 at 23:40)</a>:</h4>
<p>I'm personally against it.  I think it's a bad pattern that pollutes the entire namespace. leading to side-effects, for instance  look at so many antipatterns with namespaces and the concepts of isolating concerns.  Also, take a peek at environment variables themselves in Java.  I defer to you and John. to break the tie.  I don't think this is a good pattern and makes it near impossible to consistently isolate concerns.  These are my ten cents and more.</p>



<a name="212447203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/issue%20%231517%20-%20env%20vars%20in%20fhir-server-config/near/212447203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/issue.20.231517.20-.20env.20vars.20in.20fhir-server-config.html#212447203">(Oct 06 2020 at 15:47)</a>:</h4>
<p>Looks like John added his 2 cents on the PR as well.  Having noted the dissenting opinion, I think we're set on this one.  Ready to merge?</p>



<a name="212587437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/issue%20%231517%20-%20env%20vars%20in%20fhir-server-config/near/212587437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/issue.20.231517.20-.20env.20vars.20in.20fhir-server-config.html#212587437">(Oct 07 2020 at 16:53)</a>:</h4>
<p>definitely</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
