---
layout: page
title: "FHIR Chat  · R4 POST /MedicationStatement 415 Response · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html">R4 POST /MedicationStatement 415 Response</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="178999412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/178999412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Carrier <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#178999412">(Oct 24 2019 at 21:25)</a>:</h4>
<p>Transitioning from DSTU2 to R4 and I'm getting a 415 response w/out a response body to the following pseudo request :</p>
<div class="codehilite"><pre><span></span>curl -X POST .../api/v4/MedicationStatement \
  -H &#39;Accept: */*&#39; \
  -H &#39;Content-Type: application/json+fhir&#39; \
  -d &#39;&lt;MedicationStatement JSON&gt;&#39;
</pre></div>


<p>This worked w/ DSTU2, but not R4. What content type should I be using in R4?<br>
Thanks in advance</p>



<a name="179001879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179001879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179001879">(Oct 24 2019 at 21:58)</a>:</h4>
<p>Hi Scott, thanks for the question.  the Media type for FHIR JSON changed from <code>application/json+fhir</code> to <code>application/fhir+json</code> after DSTU2.</p>



<a name="179001990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179001990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179001990">(Oct 24 2019 at 22:00)</a>:</h4>
<p>However, I do have a related question for the rest of the team:  what is the expected action if the client leaves off the Content-Type header?  Is that header strictly required or can we default to application/fhir+json somehow?   I guess we're sort of limited by JAX-RS?</p>



<a name="179008562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179008562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179008562">(Oct 24 2019 at 23:34)</a>:</h4>
<p>It should map to application/json+fhir</p>



<a name="179008615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179008615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179008615">(Oct 24 2019 at 23:34)</a>:</h4>
<p>It's in the code, that it maps in FHIRHttpRequestWrapper</p>



<a name="179009428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179009428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179009428">(Oct 24 2019 at 23:49)</a>:</h4>
<p>Just double checked, we do this:</p>



<a name="179009431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179009431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179009431">(Oct 24 2019 at 23:49)</a>:</h4>
<p>default:<br>
                    httpResponse.setContentType(com.ibm.fhir.core.FHIRMediaType.APPLICATION_FHIR_JSON);<br>
                    break;<br>
                }</p>



<a name="179009439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179009439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179009439">(Oct 24 2019 at 23:49)</a>:</h4>
<p>when we don't find a matching contentType, we set it.</p>



<a name="179009726"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179009726" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179009726">(Oct 24 2019 at 23:54)</a>:</h4>
<p>interesting.  when i tried from curl without the Content-Type header, I got back a 415.  maybe curl is doing something "interesting" under the covers.  will check server logs to see whats going on when i get a chance...definitely not too important though</p>



<a name="179009920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179009920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179009920">(Oct 24 2019 at 23:58)</a>:</h4>
<p>what shows up when you add -v?</p>



<a name="179009959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179009959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179009959">(Oct 24 2019 at 23:58)</a>:</h4>
<blockquote>
<p>GET / HTTP/2<br>
Host: <a href="http://google.com" target="_blank" title="http://google.com">google.com</a><br>
User-Agent: curl/7.54.0<br>
Accept: <em>/</em></p>
</blockquote>



<a name="179009961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179009961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179009961">(Oct 24 2019 at 23:58)</a>:</h4>
<p>I get that</p>



<a name="179009985"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179009985" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179009985">(Oct 24 2019 at 23:59)</a>:</h4>
<p>so I doubt it is Curl, sometimes when you go through an intermediate proxy, it'll rewrite the request.   I have a doubt on that, but worth putting in the back of our minds</p>



<a name="179010015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179010015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179010015">(Oct 25 2019 at 00:00)</a>:</h4>
<p>Oh... I see why</p>



<a name="179010047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179010047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179010047">(Oct 25 2019 at 00:00)</a>:</h4>
<p>that's ONLY in the exception case</p>



<a name="179010061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179010061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179010061">(Oct 25 2019 at 00:00)</a>:</h4>
<p><code>        } catch (FHIRException e) {</code></p>



<a name="179010070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/R4%20POST%20/MedicationStatement%20415%20Response/near/179010070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Bastide <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/R4.20POST.20.2FMedicationStatement.20415.20Response.html#179010070">(Oct 25 2019 at 00:00)</a>:</h4>
<p>on line 127</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
