---
layout: page
title: "FHIR Chat  · Module versioning · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Module.20versioning.html">Module versioning</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="185701579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Module%20versioning/near/185701579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Module.20versioning.html#185701579">(Jan 15 2020 at 14:22)</a>:</h4>
<p>I just opened <a href="https://github.com/IBM/FHIR/pull/592" target="_blank" title="https://github.com/IBM/FHIR/pull/592">https://github.com/IBM/FHIR/pull/592</a> to update all of our modules from version <code>4.0.0</code> to <code>4.0.1</code>.<br>
This includes both the modules that have changed since 4.0.0 (irregardless of the scope of change) and modules that have not changed at all.<br>
We've also had a few discussions on how to manage module versioning going forward and we'd like to open that to the broader community.</p>



<a name="185709675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Module%20versioning/near/185709675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Module.20versioning.html#185709675">(Jan 15 2020 at 15:42)</a>:</h4>
<p>In the past (for our internal-only DSTU2 server), we used the following strategy:</p>
<ol>
<li>All modules in the master branch have a version of 99-SNAPSHOT</li>
<li>
<p>At "DCUT":  <br>
i. Decide what version number to use for the new release (say 4.0.1)<br>
ii. cut a release branch which has a name that matches the desired version<br>
iii. update all the modules to be a snapshot of this version (4.0.1-SNAPSHOT)</p>
</li>
<li>
<p>Finally, at release time, we'd overwrite the version as part of the build and end up with 4.0.1-DATETIME</p>
</li>
</ol>



<a name="185710251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Module%20versioning/near/185710251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Module.20versioning.html#185710251">(Jan 15 2020 at 15:48)</a>:</h4>
<p>A few things we didn't like about this for the open source project:</p>
<ul>
<li>the release branches seems unnecessary and potentially even harmful because we don't want to maintain a bunch of different versions of the project.  we'd like to move to more of a tag-based release process thats always moving forward along master</li>
<li>the definition of "DCUT" is not as well-defined for an open source project...the notion of when a given version is ready is a bit looser and less formal</li>
<li>it forces all modules to be updated and released in lock-step.  like if want to release an important fix for just one module, we end up bumping the version number of each and every module in the release.  that could be a pain for anyone using just the <code>fhir-model</code> or fhir-validation` modules outside of the full server</li>
<li>it leads to "sentimental versioning", where we decide "how big is the scope of all changes" wholistically, which might lead to only a patch level increase when in fact we've changed an entire module's API around.  And that could get us in big trouble with users that are expecting a patch level bump not to break them</li>
</ul>



<a name="185710862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Module%20versioning/near/185710862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Module.20versioning.html#185710862">(Jan 15 2020 at 15:54)</a>:</h4>
<p>For 4.0.0 we decided that we'd bump all the module versions to 4.0.0 and so everything became 4.0.0-SNAPSHOT in master.<br>
For 4.0.1 we wanted to get it out immenently, so we've decided just to bump everything to 4.0.1-SNAPSHOT.<br>
For post-4.0.1 I'd really like to explore independently versioning the modules; potentially even attempting semantic versioning at a per-module level.</p>



<a name="185710903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Module%20versioning/near/185710903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Module.20versioning.html#185710903">(Jan 15 2020 at 15:54)</a>:</h4>
<p>One barrier toward doing that is having a well-defined external contract for each module: <a href="https://github.com/IBM/FHIRa/issues/567" target="_blank" title="https://github.com/IBM/FHIRa/issues/567">https://github.com/IBM/FHIRa/issues/567</a><br>
We definitely don't have that today, which means that we'd need to handle any externally-visible changes as a major version bump which I think would lead to a whole lot of major version revs.</p>



<a name="185711031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Module%20versioning/near/185711031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Module.20versioning.html#185711031">(Jan 15 2020 at 15:56)</a>:</h4>
<p>In the meantime, I've added an <code>API-stable</code> flag for each module in the repo and listed those at <a href="https://github.com/IBM/FHIR#ibm-fhir-server-module-catalog" target="_blank" title="https://github.com/IBM/FHIR#ibm-fhir-server-module-catalog">https://github.com/IBM/FHIR#ibm-fhir-server-module-catalog</a>.  Initially, the only module i've marked as stable is <code>fhir-model</code>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
