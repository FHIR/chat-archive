---
layout: page
title: "FHIR Chat  · Downloading bulk files · ibm"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/index.html">ibm</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Downloading.20bulk.20files.html">Downloading bulk files</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="248145683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Downloading%20bulk%20files/near/248145683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Murali M <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Downloading.20bulk.20files.html#248145683">(Aug 02 2021 at 23:23)</a>:</h4>
<p>Exporting bulk data with storage provider configured as "file". Files are successfully exported. However file paths included in response are relative paths. Is there a way those files can be exposed as fully qualified URLs and that can be downloaded by client applications? I do see S3 option as well that expose full URL of corresponding S3 objects (+ optionally presigned URLs). Thank you.</p>



<a name="248179327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Downloading%20bulk%20files/near/248179327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Downloading.20bulk.20files.html#248179327">(Aug 03 2021 at 03:44)</a>:</h4>
<blockquote>
<p>However file paths included in response are relative paths. Is there a way those files can be exposed as fully qualified URLs and that can be downloaded by client applications?</p>
</blockquote>
<p>Not at the moment.  Our assumption with the file-based export is that the export location is known to the caller and they have some other way to access the files.  I think it would be possible to statically host the target directory using Liberty or even just an Apache HTTP Server (or similar)...the tricky part is getting the access control and expiry right.</p>
<blockquote>
<p>I do see S3 option as well that expose full URL of corresponding S3 objects (+ optionally presigned URLs).</p>
</blockquote>
<p>Correct.  Thats the way I would go to support the official bulk data spec.  It also works with MinIO and other S3-compatible providers.</p>



<a name="248291115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Downloading%20bulk%20files/near/248291115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Murali M <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Downloading.20bulk.20files.html#248291115">(Aug 03 2021 at 22:58)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191676">@Lee Surprenant</span> . We have some limitations with respect to using hmac with S3, so had to rely on file system instead. Will review further and update with a PR once finalized.</p>



<a name="248347226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Downloading%20bulk%20files/near/248347226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Downloading.20bulk.20files.html#248347226">(Aug 04 2021 at 13:10)</a>:</h4>
<blockquote>
<p>limitations with respect to using hmac with S3</p>
</blockquote>
<p>I'd love to hear more.  We used to generate our own long random (high-entropy) URLs, make the objects public, and set the ACL to expire after a few hours.  But we felt the presigned URL approach was much better.</p>



<a name="248416543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/212434-ibm/topic/Downloading%20bulk%20files/near/248416543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Murali M <a href="https://fhir.github.io/chat-archive/stream/212434-ibm/topic/Downloading.20bulk.20files.html#248416543">(Aug 04 2021 at 22:21)</a>:</h4>
<p>Pre-signed URLs are definitely better choice and we use in other use cases. This hmac limitation is with respect to security policy that blocks us from creating long lived access keys. Other option is to create pre-signed URLs with role that can be assumed by the container runtime instead. We are also evaluating this as an option.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
