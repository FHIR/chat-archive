---
layout: page
title: "FHIR Chat  · Local Deployment · crucible"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/index.html">crucible</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html">Local Deployment</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="219092641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179204-crucible/topic/Local%20Deployment/near/219092641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shreshta Balachandar <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html#219092641">(Dec 07 2020 at 15:20)</a>:</h4>
<p>Hey everyone <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> ! I'm new to FHIR and just got started with exploring Crucible. </p>
<p>When doing a local deployment on Docker (on WSL), I keep getting the error "Task runner waiting for crucible web app to load on port 3000". I don't have any other local applications running on Port 3000. Has anyone else seen this issue and had luck resolving it?</p>
<p>I also noticed that the package was last updated in July 2019 and there were a number of deprecation warnings when I installed. Could this also be why?</p>
<p>Thanks,<br>
Shreshta</p>



<a name="219399591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179204-crucible/topic/Local%20Deployment/near/219399591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html#219399591">(Dec 09 2020 at 21:20)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="351108">@Shreshta Balachandar</span>  -- thanks for letting us know.  I am getting what looks to be the same error on my machine, which is using Docker on a Mac.  If you run the following command: <code>docker-compose up mongo</code> are you getting something that looks like the following?</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>mongo_1  <span class="p">|</span> mongod --help <span class="k">for</span> <span class="nb">help</span> and startup options
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.672+0000 <span class="o">[</span>initandlisten<span class="o">]</span> MongoDB starting : <span class="nv">pid</span><span class="o">=</span><span class="m">1</span> <span class="nv">port</span><span class="o">=</span><span class="m">27017</span> <span class="nv">dbpath</span><span class="o">=</span>/data/db <span class="m">64</span>-bit <span class="nv">host</span><span class="o">=</span>4c61d4f2b0fb
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.672+0000 <span class="o">[</span>initandlisten<span class="o">]</span> db version v2.6.12
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.672+0000 <span class="o">[</span>initandlisten<span class="o">]</span> git version: d73c92b1c85703828b55c2916a5dd4ad46535f6a
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.672+0000 <span class="o">[</span>initandlisten<span class="o">]</span> build info: Linux build5.ny.cbi.10gen.cc <span class="m">2</span>.6.32-431.3.1.el6.x86_64 <span class="c1">#1 SMP Fri Jan 3 21:39:27 UTC 2014 x86_64 BOOST_LIB_VERSION=1_49</span>
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.672+0000 <span class="o">[</span>initandlisten<span class="o">]</span> allocator: tcmalloc
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.672+0000 <span class="o">[</span>initandlisten<span class="o">]</span> options: <span class="o">{}</span>
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> journal <span class="nv">dir</span><span class="o">=</span>/data/db/journal
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> recover : no journal files present, no recovery needed
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span>
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> ERROR: Insufficient free space <span class="k">for</span> journal files
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> Please make at least 3379MB available in /data/db/journal or use --smallfiles
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span>
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> exception in initAndListen: <span class="m">15926</span> Insufficient free space <span class="k">for</span> journals, terminating
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> dbexit:
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> shutdown: going to close listening sockets...
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> shutdown: going to flush diaglog...
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> shutdown: going to close sockets...
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> shutdown: waiting <span class="k">for</span> fs preallocator...
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> shutdown: lock <span class="k">for</span> final commit...
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> shutdown: final commit...
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> shutdown: closing all files...
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> closeAllFiles<span class="o">()</span> finished
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> journalCleanup...
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.673+0000 <span class="o">[</span>initandlisten<span class="o">]</span> removeJournalFiles
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.674+0000 <span class="o">[</span>initandlisten<span class="o">]</span> shutdown: removing fs lock...
mongo_1  <span class="p">|</span> <span class="m">2020</span>-12-09T21:17:58.675+0000 <span class="o">[</span>initandlisten<span class="o">]</span> dbexit: really exiting now
</code></pre></div>



<a name="219399749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179204-crucible/topic/Local%20Deployment/near/219399749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html#219399749">(Dec 09 2020 at 21:21)</a>:</h4>
<p>Also, are you using WSL2 (I assume if you are using Docker?)</p>



<a name="219401677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179204-crucible/topic/Local%20Deployment/near/219401677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shreshta Balachandar <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html#219401677">(Dec 09 2020 at 21:35)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192576">@Robert Scanlon</span> - Yes I am on WSL2.</p>
<p>I followed the instructions found on GitHub here: <a href="https://github.com/fhir-crucible/crucible#docker-installation">https://github.com/fhir-crucible/crucible#docker-installation</a>.</p>
<p>I ran the commands in the following order:<br>
<code>docker-compose build</code><br>
<code>docker-compose up</code> (Getting the error:  "Task runner waiting for crucible web app to load on port 3000")</p>
<p>and then again in this order:<br>
<code>docker-compose build</code><br>
<code>docker-compose up mongo</code> (this exited with code 139 quickly)<br>
<code>docker-compose up</code> (Getting the error:  "Task runner waiting for crucible web app to load on port 3000", and the mongo instance also shut down immediately here)</p>
<p>I did not see the same error that you showed above.</p>
<p>However a new error I noticed this time said: "Could not connect to a primary node for replica set" with an error marked ConnectionFailure. Is this because the Mongo instance isn't staying attached?</p>



<a name="219402138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179204-crucible/topic/Local%20Deployment/near/219402138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html#219402138">(Dec 09 2020 at 21:38)</a>:</h4>
<p>It is likely an issue with the Mongo container, since that is what is happening on my machine, but I just wanted to verify that.  Could you provide the last 25 lines or so of <code>docker-compose logs mongo</code>?</p>



<a name="219406964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179204-crucible/topic/Local%20Deployment/near/219406964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shreshta Balachandar <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html#219406964">(Dec 09 2020 at 22:15)</a>:</h4>
<p>Tried the command and the only thing I see is: "Attaching to crucible_mongo_1"</p>



<a name="220050570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179204-crucible/topic/Local%20Deployment/near/220050570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html#220050570">(Dec 15 2020 at 22:14)</a>:</h4>
<p>I took a look and it seems that the mongo container we are referencing is hopelessly old and shouldn't be used.  If you update <code>docker-compose.yml</code> and change the line that says "mongo:2.6" to "mongo:3.6", that seemed to work on my WSL2 machine (then <code>docker-compose up</code> again). The only thing that appears to not work for the 3.6 version of mongo is some roll-up stats on the main page, which  doesn't affect its ability to run or display test results.</p>



<a name="220050581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179204-crucible/topic/Local%20Deployment/near/220050581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html#220050581">(Dec 15 2020 at 22:14)</a>:</h4>
<p>Could you give that a shot?</p>



<a name="221708741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179204-crucible/topic/Local%20Deployment/near/221708741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html#221708741">(Jan 05 2021 at 22:11)</a>:</h4>
<p>I assume this isn't on the docker hub registry?</p>



<a name="221777100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179204-crucible/topic/Local%20Deployment/near/221777100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html#221777100">(Jan 06 2021 at 15:05)</a>:</h4>
<p>Crucible itself?  It wasn't, but in case it is useful I just linked it up so that it is published here: <a href="https://hub.docker.com/repository/docker/projectcrucible/crucible">https://hub.docker.com/repository/docker/projectcrucible/crucible</a></p>



<a name="222424264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179204-crucible/topic/Local%20Deployment/near/222424264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shreshta Balachandar <a href="https://fhir.github.io/chat-archive/stream/179204-crucible/topic/Local.20Deployment.html#222424264">(Jan 12 2021 at 12:38)</a>:</h4>
<p>Hey Robert, thanks for your note! Apologies for the delay. I have tested it out against a sample server and everything works well. Really appreciate it!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
