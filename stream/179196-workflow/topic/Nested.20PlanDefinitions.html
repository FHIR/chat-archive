---
layout: page
title: "FHIR Chat  · Nested PlanDefinitions · workflow"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/index.html">workflow</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Nested.20PlanDefinitions.html">Nested PlanDefinitions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="256985345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Nested%20PlanDefinitions/near/256985345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Nested.20PlanDefinitions.html#256985345">(Oct 10 2021 at 21:18)</a>:</h4>
<p>I was wondering if it would be reasonable to nest series of PlanDefinitions inside a single PlanDefinition to define which one to use by age categories. </p>
<p>For instance, I have a series of pediatric questionnaires by age group. </p>
<ol>
<li>I create a ServiceRequest for a child that instantiates a PlanDefinition</li>
<li>That PlanDefinition has a list of PlanDefinitions (in definitionCanonical)</li>
<li>Each of those PlanDefinitions has a timingAge that specifies what age the child should be for that PlanDefinition to apply</li>
<li>Then I have a service that polls for new ServiceRequests (eventually will be pub-sub, I hope)</li>
<li>When it finds a ServiceRequest, it gets the Patient &amp; the overall PlanDefinition, it checks the patients age against the timeAges for the PlanDefinitions</li>
<li>It finds the correct PlanDefinition for the age, and then looks in that PlanDefinition</li>
<li>That PlanDefinition has a list of Questionnaires that we want the parent to fill out for the child</li>
</ol>
<p>Does this seem like a reasonable approach or is there a better one someone could recommend?</p>



<a name="256993498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Nested%20PlanDefinitions/near/256993498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Nested.20PlanDefinitions.html#256993498">(Oct 10 2021 at 23:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>



<a name="257374026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Nested%20PlanDefinitions/near/257374026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Nested.20PlanDefinitions.html#257374026">(Oct 13 2021 at 14:24)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="235060">@Grey Faulkenberry</span> , yes the PlanDefinition structure allows for nesting for these types of use cases. Using the timingElement is reasonable, but for that type of application, I've used an applicability condition that tests the patient's age against the range using a FHIRPath or CQL expression in the "condition" element.</p>



<a name="257386040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Nested%20PlanDefinitions/near/257386040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Nested.20PlanDefinitions.html#257386040">(Oct 13 2021 at 15:32)</a>:</h4>
<p>That makes more sense.</p>



<a name="257386079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Nested%20PlanDefinitions/near/257386079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grey Faulkenberry <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Nested.20PlanDefinitions.html#257386079">(Oct 13 2021 at 15:33)</a>:</h4>
<p>Thanks as always for the insights!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
