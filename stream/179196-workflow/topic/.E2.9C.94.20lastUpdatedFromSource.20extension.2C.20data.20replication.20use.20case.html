---
layout: page
title: "FHIR Chat  · ✔ lastUpdatedFromSource extension, data replication use case · workflow"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/index.html">workflow</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/.E2.9C.94.20lastUpdatedFromSource.20extension.2C.20data.20replication.20use.20case.html">✔ lastUpdatedFromSource extension, data replication use case</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="205481402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/%E2%9C%94%20lastUpdatedFromSource%20extension%2C%20data%20replication%20use%20case/near/205481402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/.E2.9C.94.20lastUpdatedFromSource.20extension.2C.20data.20replication.20use.20case.html#205481402">(Jul 30 2020 at 13:58)</a>:</h4>
<p>This is a story about a simple data replication use case.</p>
<div class="codehilite"><pre><span></span><code>+------------+            +------------+            +------------+
|  Server A  |  Client A  |  Server B  |  Client B  |  System C  |
| (“Source”) | ---------&gt; |            | ---------&gt; |            |
+------------+            +------------+            +------------+
</code></pre></div>


<ol>
<li>Data originates on Server A, a.k.a. the “source” system.</li>
<li>Client A replicates FHIR resources from Server A onto Server B (with some redaction).</li>
<li>Client B periodically polls Server B for new and updated FHIR resources, and sends any new data to Server C.</li>
</ol>
<p>Problem:</p>
<p>Client B uses a search based on meta.lastUpdated to retrieve all new and updated FHIR resources from Server B.  The intention is to propagate meaningful data changes originating from Server A to System C.  However, Client A is not the only agent which may cause the meta.lastUpdated value of FHIR resources on Server B to be updated.  Other modifications to Server B data, such as reference rewriting and adding new resource identifiers, may affect large numbers of resources in ways not pertinent to Client B, generating potentially large amounts of unwanted traffic.</p>
<p>Proposed solution:</p>
<p>The addition of a lastUpdatedFromSource extension to replicated resources on Server B would enable searches for only those resources containing new data originating from the “source” system.  As with meta.lastUpdated, the lastUpdatedFromSource extension would contain a value of type instant (FHIR data type).  This value would be populated by Client A when it replicates resources from Server A to Server B.</p>
<p>Questions:</p>
<ol>
<li>Is there a wider interest in creation of a lastUpdatedFromSource extension (beyond our implementation)?</li>
<li>
<p>Does something like the lastUpdatedFromSource extension already exist?<br>
2.1 If not, might it be useful to incorporate the lastUpdatedFromSource extension into some existing IG, or even as a standard FHIR extension?</p>
</li>
<li>
<p>Could the lastUpdatedFromSource extension also be useful for subscription-based data replication (in addition to the polling-based replication outlined above)?</p>
</li>
</ol>



<a name="205482631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/%E2%9C%94%20lastUpdatedFromSource%20extension%2C%20data%20replication%20use%20case/near/205482631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/.E2.9C.94.20lastUpdatedFromSource.20extension.2C.20data.20replication.20use.20case.html#205482631">(Jul 30 2020 at 14:08)</a>:</h4>
<p>Seems Provenance would be the more formal mechanic. Not saying that you couldn't use extension of your own design.</p>



<a name="205484140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/%E2%9C%94%20lastUpdatedFromSource%20extension%2C%20data%20replication%20use%20case/near/205484140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/.E2.9C.94.20lastUpdatedFromSource.20extension.2C.20data.20replication.20use.20case.html#205484140">(Jul 30 2020 at 14:20)</a>:</h4>
<p>That's an interesting thought, using Provenance.</p>



<a name="205485491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/%E2%9C%94%20lastUpdatedFromSource%20extension%2C%20data%20replication%20use%20case/near/205485491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/.E2.9C.94.20lastUpdatedFromSource.20extension.2C.20data.20replication.20use.20case.html#205485491">(Jul 30 2020 at 14:31)</a>:</h4>
<p>well it is my resource... so I tend to think of it in my dreams...</p>



<a name="205487849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/%E2%9C%94%20lastUpdatedFromSource%20extension%2C%20data%20replication%20use%20case/near/205487849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/.E2.9C.94.20lastUpdatedFromSource.20extension.2C.20data.20replication.20use.20case.html#205487849">(Jul 30 2020 at 14:48)</a>:</h4>
<p>Provenance is likely a better bet than a single extension unless lastUpdatedFromSource was a tuple - it would need to capture both who and when - so that if Client A updated record 1 and Client X then updated record 1 before data was pushed, System B would still know that record 1 had been changed by a 'relevant' source.  An alternative would be a simple flag (or better yet, tag) that said 'relevant to push to C' that could be set when an update was deemed relevant.  However, those would all be solution-specific.  You couldn't count on anyone else setting them.  With Provenance, you'd know what event occurred, when and who originated it.  If your query used _has to filter on Provenance, that should give you the data you want in a 'standard' way.</p>



<a name="205531058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/%E2%9C%94%20lastUpdatedFromSource%20extension%2C%20data%20replication%20use%20case/near/205531058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/.E2.9C.94.20lastUpdatedFromSource.20extension.2C.20data.20replication.20use.20case.html#205531058">(Jul 30 2020 at 20:53)</a>:</h4>
<p>I'd favor provenance. It's what it's supposed to do, and it's a standard resource.<br>
 ' + what John and Lloyd sayd</p>



<a name="205873127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/%E2%9C%94%20lastUpdatedFromSource%20extension%2C%20data%20replication%20use%20case/near/205873127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/.E2.9C.94.20lastUpdatedFromSource.20extension.2C.20data.20replication.20use.20case.html#205873127">(Aug 04 2020 at 04:47)</a>:</h4>
<p>Agreed, Provenance looks like the best answer for this.</p>



<a name="246369977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/%E2%9C%94%20lastUpdatedFromSource%20extension%2C%20data%20replication%20use%20case/near/246369977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/.E2.9C.94.20lastUpdatedFromSource.20extension.2C.20data.20replication.20use.20case.html#246369977">(Jul 18 2021 at 10:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191926">Joel Schneider</span> has marked this topic as resolved.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
