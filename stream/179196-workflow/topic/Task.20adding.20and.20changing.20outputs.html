---
layout: page
title: "FHIR Chat  · Task adding and changing outputs · workflow"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/index.html">workflow</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html">Task adding and changing outputs</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="223795701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/223795701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Virginia Lorenzi <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#223795701">(Jan 24 2021 at 04:44)</a>:</h4>
<p>In a similar way, as a task progresses, it could produce outputs.  Maybe it produced a preliminary output that is later replaced with a more final output.  Maybe it produces different outputs at different times that are all useful information.  There is no way to sequence outputs or to timestamp them.   Also, to someone queries the Task over a period of time, if they see Task.outputs have A on first query A, B on second query, C, B on third, and D on fourth, would that mean all outputs A, B, C, D are valid or only D is?  Or only D is at the end but A, B, and C were all valid at an earlier point but now aren't?  Or D is replacing A, B, and C?  I am guessing you will say - that is up to the IG.  It seems having ability to tie inputs and outputs to status, business status, and/or to have a timestamp on each one might help.  Task.inputs and Task.outputs remind me of the V2 snapshot update mode problem.</p>



<a name="223796546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/223796546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#223796546">(Jan 24 2021 at 05:08)</a>:</h4>
<p>Any time you allow write access to a client, you can have problems. What you are describing are fundamental issues of concurrent programming, and they have solutions.</p>
<p>FHIR distinguishes between update and patch, and has strong recommendations for update. These recommendations can become requirements in an Implementation guide.</p>
<p>A single Task instance doesn't have to contain all the pieces of the request for corrections - for example, the request to notify other participants of an accepted correction can be another Task...</p>



<a name="223834646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/223834646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#223834646">(Jan 24 2021 at 20:45)</a>:</h4>
<p>Can you give a concrete example of when you'd have multiple outputs and would care what order they'd been added?  (With history, you could find that out, but I really can't think of a situation where it would matter.)</p>



<a name="224141897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224141897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Virginia Lorenzi <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224141897">(Jan 27 2021 at 05:25)</a>:</h4>
<p>Order matters if we are trying to use inputs and outputs to represent a conversation.  But forgetting that, I still think you have the repeating segment update problem with Task.inputs and Task.outputs that we had in V2 because in essence they are the same as V2 repeating segments.</p>
<p>There is no way to signal the delete of a specific input, addition of a specific input, or replace of a specific input (in V2 this would be done with action code and unique key) <span class="user-mention" data-user-id="191430">@Paul Knapp</span>  <span class="user-mention" data-user-id="225094">@Debi Willis</span> </p>
<p>V2 had two solutions:</p>
<p>Snapshot mode - sender must send all, receiver must assume that senders list is the current list and delete whatever it has.</p>
<p>or </p>
<p>Action Code/Unique Key - each segment (in this case each input and each output) would include an action code (add/delete/replace) and a unique key.    The sender would mark each segment with the appropriate action code.  The receiver would find the right piece of data using the unique key and then carry out the action specified by the action code on that piece of data.  Any data items not specified by the receiver would be ignored.</p>
<p>Here is an example, suppose I have a Task to concoct a compound medication and the inputs are ingredients.  On an update I would want to be clear which inputs are being changed and how (add/update/delete) or I could end up with the wrong compound.</p>
<p>Inputs and outputs do not have actioncodes and unique keys, so only snapshot mode is possible.  In my V2 experience, we still rarely ever deleted the stuff on the receiver side because we just did not feel safe that the sender knew what they were doing.  An important example of this was  an update message with a list of allergies.</p>



<a name="224151631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224151631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224151631">(Jan 27 2021 at 08:25)</a>:</h4>
<p>Given that the references are from the Task to 'various inputs', it is indeed snapshot mode (to use a v2 term). The ordering party is assumed to know whet they're doing, so if a an 'input' no longer appears when the Task is updated, then apparently there's a reason for it no longer being there. If you want a server to have control over this, you could define an operation which performs some additional server-side processing on any task updates.</p>



<a name="224192818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224192818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224192818">(Jan 27 2021 at 14:59)</a>:</h4>
<p>inputs and outputs <em>should not</em> be used to represent a conversation.  Task.input indicates information that is necessary to allow fulfillment of the Task and Task.output represents the result of the Task.</p>



<a name="224192989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224192989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224192989">(Jan 27 2021 at 15:00)</a>:</h4>
<p>In most situations, all inputs should be present at the time the Task is submitted and outputs don't show up until completed.  If outputs show up sooner, they represent work in progress or work done to-date.</p>



<a name="224197520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224197520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Debi Willis <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224197520">(Jan 27 2021 at 15:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs/near/224192818">said</a>:</p>
<blockquote>
<p>inputs and outputs <em>should not</em> be used to represent a conversation.  Task.input indicates information that is necessary to allow fulfillment of the Task and Task.output represents the result of the Task.</p>
</blockquote>
<p>I think this comment and the statement that notes is for internal comments made about that task pretty much pushes conversations to be captured via communication.</p>



<a name="224234889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224234889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224234889">(Jan 27 2021 at 19:27)</a>:</h4>
<blockquote>
<p>the statement that notes is for internal comments made about that task</p>
</blockquote>
<p>What statement is that?</p>



<a name="224235166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224235166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Virginia Lorenzi <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224235166">(Jan 27 2021 at 19:29)</a>:</h4>
<p>A process can''t have an output from a particular state in the process (like accepted)?  We had a case for that.  Having outputs at the end only would make it easier.  Not allowing inputs to change would also be helpful</p>



<a name="224261022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224261022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Virginia Lorenzi <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224261022">(Jan 27 2021 at 22:58)</a>:</h4>
<p>Lloyd said that.  </p>
<p>Five formal communications:<br>
We have the patient requesting a correction<br>
We have the patient expressing their disagreement to a denial.<br>
We have the denial explanation and patient recourse explanation<br>
We have the correction being accepted with proof of correction<br>
We have the provider side rebuttal.</p>
<p>And less formal communications but still important:<br>
We need to extend an additional 30 days.<br>
Can you explain this part of your request?<br>
What is the contact information for the provider you listed?<br>
Here is explanation blah blah.<br>
Her address is blah blah blah.</p>
<p>My understanding of notes would be stuff like this (which I don't think is as useful for the patient as the other two)</p>
<ul>
<li>lisa assigned</li>
<li>Reached out to Dr. Smith </li>
<li>Dr. Smith is no longer with practice - reached out to Dr. Allen</li>
<li>need input from patient.  Called and left message</li>
<li>Need additional time -  invoking 30 day extension</li>
</ul>
<p>But maybe we just didn't really fully understand.  Task is a meaty resource.</p>



<a name="224263154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224263154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Virginia Lorenzi <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224263154">(Jan 27 2021 at 23:18)</a>:</h4>
<p><span class="user-mention" data-user-id="192825">@Jeffrey Danford</span> also has expressed concerns about using Task.note to contain the conversation between patient and provider, but I am not sure what his concerns are.  </p>
<p>I would think that I would need very well-behaved clients and servers such that the only part of Task changed is the addition of new notes that are clearly from the patient.  Perhaps use PATCH or put careful logic behind the PUT.  Need to be able to tell its a new note entry authored by the patient.<br>
I can understanding having high standards for the server but how will I know every client will do the right thing?</p>
<p>Contrasting that to the post of a communication resource which seems to make ownership of fields more clear.  (the communication resource the requester posts originated from them.</p>



<a name="224266559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224266559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224266559">(Jan 27 2021 at 23:56)</a>:</h4>
<p>My recommendation would be that "requesting a correction" and "requesting notice of agreement" being separate tasks - they are separate requests and will have separate statuses.  The output from a request for a correction will either be a rejection or an indication that the change(s) have been made.  If we allow a request to cover multiple changes, it might also be a mixture - i.e. change A and C done, change B won't be done, here's why.  The output from a request for notice of disagreement would be "disagreement published (and possibly 'with this rebuttal')".  Extension to timeline would be captured as business status and/or notes.  </p>
<p>All of the back and forth <em>can</em> be captured as 'notes'.  There's no guidance on Task.notes that says that it's for "internal comments only" (and I don't really understand what that would mean).  The whole point of notes is to allow anyone involved with the Task to capture comments related to it.  Those can be questions, answers, plans, status updates or other things.  It would not provide a targeted back and forth, but given that there will typically only be two parties involved with the Task, it should be fine.  And if you end up with multiple parties (patient, patient rep(s), provider(s), medical records staff), they probably all need to be looped in on the information being shared, so putting stuff in notes may actually be better than targeted back and forth messages.  Yes, you'd have intermingling of "request/response" notes and "workflow" notes, but it's not clear that'd be problematic.</p>
<p>I'm not saying that we can't pursue a generic "email over FHIR" mechanism, but I don't think we need to get that in place in order to have a "good enough" solution that uses Task and Task alone.</p>



<a name="224306442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224306442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Virginia Lorenzi <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224306442">(Jan 28 2021 at 10:11)</a>:</h4>
<p>Disagreement was always a separate task.</p>



<a name="224306625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224306625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Virginia Lorenzi <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224306625">(Jan 28 2021 at 10:13)</a>:</h4>
<p>I am not thinking granular at all.  I think it should be Request blob.  Provider comes back with outcome which could be accepted and corrected, denied, or a mix.  if its either of the last two patient could do a disagreement</p>



<a name="224389197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224389197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Debi Willis <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224389197">(Jan 28 2021 at 20:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192685">Vassil Peytchev</span> <a href="#narrow/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs/near/224234889">said</a>:</p>
<blockquote>
<blockquote>
<p>the statement that notes is for internal comments made about that task</p>
</blockquote>
<p>What statement is that?</p>
</blockquote>
<p>When we were designing the IG, we were told that notes were used by staff to document comments about the task. It could contain "Sent to Dr. Smith for review", "With legal", "Patient very angry. Said they are calling their lawyer." They might not be something that is meant to be shared with the patient. It is the only place the staff has to share comments about what they are doing on the task. <span class="user-mention" data-user-id="192825">@Jeffrey Danford</span>  also commented during the connectathon that notes was for internal use and not a good place to put the conversation with the patient.</p>



<a name="224395242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224395242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224395242">(Jan 28 2021 at 21:29)</a>:</h4>
<p>The notion of notes being 'internal' vs. 'shared' is an interesting one.  I think that's going to be a fun issue everywhere notes can appear.  We might actually want to look at adding an additional element (or at least a standard extension) to the Annotation type to capture 'audience' or 'restriction' or something - because notes on procedures, observations, etc. might well contain things that are deemed 'sensitive' (don't tell patient) and other things that the patient absolutely ought to see.  (We'll leave aside, for a moment, when/if it's a appropriate to put stuff in the patient record that the patient can't actually see.)</p>



<a name="224395524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179196-workflow/topic/Task%20adding%20and%20changing%20outputs/near/224395524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179196-workflow/topic/Task.20adding.20and.20changing.20outputs.html#224395524">(Jan 28 2021 at 21:32)</a>:</h4>
<p>I think the notion that <em>none</em> of the notes on Task would ever be visible to the Patient is problematic.  If we resolve that issue, that may make the desire to use a separate mechanism for patient discussion less necessary.  (I'm not totally opposed to having separate Communication instances for conversation, but think that added complexity should be avoided if we can find a way to make Task work alone.)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
