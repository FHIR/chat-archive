---
layout: page
title: "FHIR Chat  · Identity mappings · mapping-framework"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/index.html">mapping-framework</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Identity.20mappings.html">Identity mappings</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="190240511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Identity%20mappings/near/190240511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Identity.20mappings.html#190240511">(Mar 11 2020 at 00:33)</a>:</h4>
<p>A while back I had proposed a simpler syntax to deal with identity transformations in the mapping language that would point out those things that hadn't changed.  It read something like this:</p>
<p>group AuditEvent(source src : AuditEventR3, target tgt : AuditEvent) extends DomainResource &lt;&lt;type+&gt;&gt;<br>
{<br>
  src as s -&gt; tgt as t then Identity(s, t, [type, subtype, action, recorded, outcome, outcomeDesc, purposeOfEvent]) <br>
  src.agent as s -&gt; tgt.agent as t then AuditEventAgent(s, t);<br>
  src.source as s -&gt; tgt.source as t then AuditEventSource(s, t);<br>
  src.entity as s -&gt; tgt.entity as t then AuditEventEntity(s, t);<br>
}<br>
group AuditEventAgent(source src, target tgt) extends BackboneElement<br>
{<br>
   src as s -&gt; tgt as t then Identity(s, t, [role, altId, name, requestor, location, policy, mediat, network, purposeofUse]);<br>
   src.reference as vs0 -&gt; tgt.who as vt0 then Reference(vs0, vt0);<br>
  src.userId as vs0 -&gt; tgt.who as vt0 then Identifier2Reference(vs0, vt0);<br>
}<br>
group AuditEventSource(source src, target tgt) extends BackboneElement<br>
{<br>
   src as s -&gt; tgt as t then Identity(s, t, [site, type]);<br>
   src.identifier as vs0 -&gt; tgt.observer as vt0 then Identifier2Reference(vs0, vt0);<br>
}<br>
group AuditEventEntity(source src, target tgt) extends BackboneElement<br>
{  src as s -&gt; tgt as t then Identity(s, t, [type, role, lifecycle, securityLabel, name, description, query]); <br>
   src.identifier as vs0 -&gt; tgt.what as vt0 then Identifier2Reference(vs0, vt0);<br>
   src.reference as vs0 -&gt; tgt.what as vt0 then Reference(vs0, vt0);<br>
   src.detail as s -&gt; tgt.detail as t then AuditEventEntityDetail(s, t);<br>
}<br>
group AuditEventEntityDetail(source src, target tgt) extends BackboneElement<br>
{<br>
   src.type -&gt; tgt.type;<br>
   src.value as vs0 -&gt; tgt.value = create('base64Binary') as vt0 then base64Binary(vs0, vt0);<br>
}</p>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> had another proposal, I'll leave it to him to clean up what was transferred from GForge to JIRA</p>
<p>What I most like about the syntax I proposed is that is says:<br>
For AuditEvent, this set of fields in the third argument DIDN'T change between releases: <br>
 Identity(s, t, [type, subtype, action, recorded, outcome, outcomeDesc, purposeOfEvent]) </p>
<p>The Identity function performs the following:<br>
  for each fieldname in the set of fields named in the third argument, copy it from s (the first argument) to t (the second argument).</p>
<p>It quickly tells you what stayed the same.  Everything after it is what changed.</p>
<p>Anyhow, see <a href="https://jira.hl7.org/browse/FHIR-22710" target="_blank" title="https://jira.hl7.org/browse/FHIR-22710">https://jira.hl7.org/browse/FHIR-22710</a> for the transferred tracker.</p>



<a name="190241041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Identity%20mappings/near/190241041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Identity.20mappings.html#190241041">(Mar 11 2020 at 00:42)</a>:</h4>
<p>have you looked at the comments on that task?</p>



<a name="190532290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Identity%20mappings/near/190532290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Identity.20mappings.html#190532290">(Mar 13 2020 at 17:32)</a>:</h4>
<p>Yes, which is WHY I wrote something here.  I even took my original proposal and cleaned up the mess that got made of it transferring to JIRA.</p>



<a name="195938049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Identity%20mappings/near/195938049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Identity.20mappings.html#195938049">(May 01 2020 at 07:28)</a>:</h4>
<p>And still this topic seems to have gone nowhere.  I bring it up only because I'm now getting a weekly Jira reminder about it (still with incorrect dates last time I paid any attention to it).</p>



<a name="195947976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Identity%20mappings/near/195947976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Identity.20mappings.html#195947976">(May 01 2020 at 10:23)</a>:</h4>
<p>it's on my todo list but my todo list seems to gorw every week</p>



<a name="196046750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Identity%20mappings/near/196046750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Identity.20mappings.html#196046750">(May 02 2020 at 11:09)</a>:</h4>
<p>If it's on your todo list, can you move it to the next stage in Jira so it stops telling me it's waiting for my response ... I'm happy to hear it's on your list, even if you won't get to it until things cool down a lot more.</p>



<a name="196054893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Identity%20mappings/near/196054893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Identity.20mappings.html#196054893">(May 02 2020 at 14:47)</a>:</h4>
<p>Actually Keith, I think you can move it along yourself.  There is a "Provide Requested Info" button at the top that you can hit and just say to see the comments.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
