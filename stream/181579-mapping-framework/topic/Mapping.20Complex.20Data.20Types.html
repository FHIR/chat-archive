---
layout: page
title: "FHIR Chat  · Mapping Complex Data Types · mapping-framework"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/index.html">mapping-framework</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Mapping.20Complex.20Data.20Types.html">Mapping Complex Data Types</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="155351398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Mapping%20Complex%20Data%20Types/near/155351398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robinette Renner <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Mapping.20Complex.20Data.20Types.html#155351398">(Jan 17 2019 at 17:06)</a>:</h4>
<p>I am struggling to use the FHIR mapping language to map complex data types such as quantity.  I found a Zulip thread from 30 May 2017 that recommended the following approach:</p>
<p>rule_value : for src.value as v make create("Quantity") as q, tgt.value = q, q.value = v</p>
<p>Based on that, I used the following snippet to map a questionnaire response to an observation quantity.  This snippet represents only my attempt to populate the value.  Once I get this to work, I will then populate the unit of measure.</p>
<p>"Questionnaire.value": for answerQuantity.value as answerValue make create("Quantity") as quantity, observation.value = quantity, quantity.value = answerValue</p>
<p>Unfortunately, I get the following error message:</p>
<p>“Failure: Unable to convert a org.hl7.fhir.r4.elementmodel.Element to a Decimal"</p>
<p>I have not yet converted my code to the new syntax. Is my problem related to the syntax changes to the FHIR mapping language? Any advice on how to fix this issue is greatly appreciated.</p>



<a name="155354706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Mapping%20Complex%20Data%20Types/near/155354706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Mapping.20Complex.20Data.20Types.html#155354706">(Jan 17 2019 at 17:53)</a>:</h4>
<p>that's a problem with the engine. I'll fix it up. how are you running the engine?</p>



<a name="155355690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Mapping%20Complex%20Data%20Types/near/155355690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robinette Renner <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Mapping.20Complex.20Data.20Types.html#155355690">(Jan 17 2019 at 18:08)</a>:</h4>
<p>I am running it using the Terminal application in Mac OS.</p>



<a name="155356463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Mapping%20Complex%20Data%20Types/near/155356463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Mapping.20Complex.20Data.20Types.html#155356463">(Jan 17 2019 at 18:20)</a>:</h4>
<p>but what are you running?</p>



<a name="156329966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Mapping%20Complex%20Data%20Types/near/156329966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robinette Renner <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Mapping.20Complex.20Data.20Types.html#156329966">(Jan 17 2019 at 23:45)</a>:</h4>
<p>I am running the FHIR validator to do the transform.</p>



<a name="156330201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Mapping%20Complex%20Data%20Types/near/156330201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robinette Renner <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Mapping.20Complex.20Data.20Types.html#156330201">(Jan 17 2019 at 23:49)</a>:</h4>
<p>Not sure if I am answering your question.  I am using the FHIR validator to transform QuestionnaireResponse to a bundle of Observation resources.  Is there additional information that you need?</p>



<a name="156330893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Mapping%20Complex%20Data%20Types/near/156330893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Mapping.20Complex.20Data.20Types.html#156330893">(Jan 18 2019 at 00:01)</a>:</h4>
<blockquote>
<p>validator</p>
</blockquote>
<p>ok.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
