---
layout: page
title: "FHIR Chat  · where condition on target instance within source content · mapping-framework"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/index.html">mapping-framework</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/where.20condition.20on.20target.20instance.20within.20source.20content.html">where condition on target instance within source content</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="236210845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/where%20condition%20on%20target%20instance%20within%20source%20content/near/236210845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Dimitrov <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/where.20condition.20on.20target.20instance.20within.20source.20content.html#236210845">(Apr 26 2021 at 17:16)</a>:</h4>
<p>Hi! Is it possible to have a where condition on a target instance (in my example bundle) within the source content (part before the '-&gt;')?</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code>group GenerateMedicationStatement(source supply : ClinicalDocument, target tgt : MedicationStatement, target patientResource : Patient,  target bundle : Bundle) {
supply.author where(bundle.entry.resource.organization.exists()) -&gt; bundle.entry as entry,
                                                             ...... .......
}
</code></pre></div>
<p>If it is possible, how should I modify the where part from my example, so that the where condition works on the target instance within the source content?</p>
<p>Thanks in advance!</p>



<a name="236217033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/where%20condition%20on%20target%20instance%20within%20source%20content/near/236217033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/where.20condition.20on.20target.20instance.20within.20source.20content.html#236217033">(Apr 26 2021 at 17:57)</a>:</h4>
<p>i don't think this is or should be possible, the where applies to the source context.</p>



<a name="236221244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/where%20condition%20on%20target%20instance%20within%20source%20content/near/236221244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Dimitrov <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/where.20condition.20on.20target.20instance.20within.20source.20content.html#236221244">(Apr 26 2021 at 18:27)</a>:</h4>
<p>okay, thanks for the response! <br>
and is it allowed to do this within the target context (part after the '-&gt;')? in my tests it unfortunately didnt seem to work</p>
<p>I'm asking because I would want to use such a condition, so that for example the FHIR Mapping Language does not create new Organization resources, if there is already an existing one with the same identifier within my bundle of resources</p>



<a name="236224903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/where%20condition%20on%20target%20instance%20within%20source%20content/near/236224903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/where.20condition.20on.20target.20instance.20within.20source.20content.html#236224903">(Apr 26 2021 at 18:52)</a>:</h4>
<p>you don't have a where in the target transform <a href="https://www.hl7.org/fhir/mapping-language.html">https://www.hl7.org/fhir/mapping-language.html</a></p>



<a name="236227895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/where%20condition%20on%20target%20instance%20within%20source%20content/near/236227895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/where.20condition.20on.20target.20instance.20within.20source.20content.html#236227895">(Apr 26 2021 at 19:12)</a>:</h4>
<p>At least in the .NET implementation you can use “%tgt” as a variable in your source where statement. Not sure if this works in Java, too.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
