---
layout: page
title: "FHIR Chat  · Resource fields don&#x27;t show up after transforming · mapping-framework"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/index.html">mapping-framework</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Resource.20fields.20don&#x27;t.20show.20up.20after.20transforming.html">Resource fields don&#x27;t show up after transforming</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="239264690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Resource%20fields%20don%27t%20show%20up%20after%20transforming/near/239264690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Corey Wen <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Resource.20fields.20don&#x27;t.20show.20up.20after.20transforming.html#239264690">(May 18 2021 at 14:38)</a>:</h4>
<p>I am trying to transform a QuestionnaireResponse into a Patient resource and am using a very basic mapping file to convert the name inputs from the QuestionnaireResponse to the .name field for a Patient resource. The mapping file was converted to a StructureMap without any issues, but when using the StructureMap to transform the QuestionnaireResponse into a Patient resource the resulting resource does not have the .name field (it does have the .id and .active fields which were set using other rules in the map).<br>
What should I look into to fix this issue?<br>
For reference here are the rules used.</p>
<div class="codehilite"><pre><span></span><code>group MapPatientDemographicsPanelToPatient(source src: QuestionnaireResponse, target patient: Patient)
{
    src -&gt; patient.id = uuid();
    src -&gt; patient.active = true;

    src.item as answerItem where &quot;linkId = &#39;/45392-8&#39;&quot; -&gt;  patient.name = create(&#39;HumanName&#39;) as patientName then
      MapPatientFirstName(answerItem, patientName);

    src.item as answerItem where &quot;linkId = &#39;/45394-4&#39;&quot; -&gt;  patient.name as patientName then
        MapPatientLastName(answerItem, patientName);
}

group MapPatientFirstName(source answerItem, target patientName: HumanName) {
    answerItem.answer as answer -&gt; patientName.given as givenName then {
        answer.valueString as vs -&gt; patientName.given = vs;
    };
}

group MapPatientLastName(source answerItem, target patientName: HumanName) {
    answerItem.answer as answer -&gt; patientName.family as familyName then {
        answer.valueString as vs -&gt; patientName.family = vs;
    };
}
</code></pre></div>



<a name="239268970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Resource%20fields%20don%27t%20show%20up%20after%20transforming/near/239268970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Maximilian Ossana <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Resource.20fields.20don&#x27;t.20show.20up.20after.20transforming.html#239268970">(May 18 2021 at 15:03)</a>:</h4>
<p>I've encountered that issue several times myself as well - if a rule is not defined properly there is no error message and it seems to be ignored completely.<br>
What about simply trying "answerItem.answer as answer -&gt; patientName.given = answer" ?<br>
Or if that doesn't work, maybe "answerItem.value as vs -&gt; patientName.given = cast(vs,'string')", if the mapping server you're using supports casting?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
