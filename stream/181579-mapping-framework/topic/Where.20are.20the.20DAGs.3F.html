---
layout: page
title: "FHIR Chat  · Where are the DAGs? · mapping-framework"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/index.html">mapping-framework</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html">Where are the DAGs?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="171108490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171108490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171108490">(Jul 17 2019 at 19:08)</a>:</h4>
<p>Hi, I'm new here, but hoping I can just jump right in and ask a question!</p>
<p>The FHIR mapping spec says it "describes how one set of Directed Acyclic Graphs (an instance) is transformed to another set of directed acyclic graphs". What is this referring to? I thought that FHIR resources were tree-shaped, i.e. that an element of a resource always has exactly one parent element. Or if it's talking about fhir references, can't there be cycles in the references, thus making it not be a directed <em>acyclic</em> graph?</p>



<a name="171112372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171112372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171112372">(Jul 17 2019 at 20:00)</a>:</h4>
<p>Every tree is a DAG (we are talking about polytrees actually, which even with multiple parents they can be interpreted as DAGs)</p>



<a name="171113066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171113066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171113066">(Jul 17 2019 at 20:08)</a>:</h4>
<p>What's the edge relation for which FHIR trees are polytrees? If <code>(A, B)</code> is in the set of edges, I was expecting that to mean that <code>A</code> and <code>B</code> are elements of a resource, and <code>B</code> is nested under <code>A</code> in the structure diagram. (So, for example, <code>(name, given)</code> would be an edge in HumanName.) Is the edge relation something else?</p>



<a name="171145651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171145651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171145651">(Jul 18 2019 at 07:57)</a>:</h4>
<p>Each class/resource can be seen as a graph node (or tree node) and every attribute that relates classes/resources is a directed edge. The same applies for xml btw</p>



<a name="171171256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171171256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171171256">(Jul 18 2019 at 13:45)</a>:</h4>
<p>From the perspective of FHIR, I think the documentation could have been written with "trees" in place of "DAGs". Would that that have been clearer <span class="user-mention" data-user-id="231009">@Justin Pombrio</span> ? (And for others here: Would that description leave out important capabilities or goals of the language?)</p>



<a name="171178257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171178257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171178257">(Jul 18 2019 at 14:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191708">@Diego Bosca</span> Since references can <a href="https://www.hl7.org/fhir/references.html#circular" target="_blank" title="https://www.hl7.org/fhir/references.html#circular">contain cycles</a>, I'm guessing you don't mean to include them in "attributes that relate classes/resources"? Could you give an example of a resource that has two parents, by edges that aren't references? (Sorry if this is this is an easy thing I'm just missing because I don't know FHIR very well yet.)</p>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> My understanding was that each FHIR resource was a tree, and that resources related to one another primarily via references, which form a (possibly cyclic) graph. So I was expecting that sentence to say either "tree" or "graph", but not "DAG". (With "trees" being more appropriate since the mapping language is mostly dealing with transforming individual resources.) But if I'm wrong about that, it's important that the docs say the correct thing.</p>



<a name="171179052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171179052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171179052">(Jul 18 2019 at 15:05)</a>:</h4>
<p>yeah, but when you reference something you are not including the class, but a reference to a given object (it literally is a class of 'Reference' type). In a data instance, when you arrive to a reference you don't actually put it's contents there, so references are leaf nodes in your tree</p>



<a name="171180526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171180526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171180526">(Jul 18 2019 at 15:20)</a>:</h4>
<p>Yes, I understand. You said that FHIR resources form a polytree, via edges that are "attributes that relate classes/resources", right? If so, it's possible for a resource to have two parents. Can you give an example of a resource that has two parents?</p>



<a name="171182740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171182740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Bosca <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171182740">(Jul 18 2019 at 15:44)</a>:</h4>
<p>polytrees, which have less constraints than trees (e.g. can have multiple parents), are equivalent to DAGs. Trees in most standards (FHIR included) have more constraints (they only have one parent, etc.) so they are still equivalent to DAGs</p>



<a name="171184512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171184512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171184512">(Jul 18 2019 at 16:01)</a>:</h4>
<p>Ok, so "tree" would be the appropriate thing to say. (As Diego points out, every tree is a DAG. But developers need to know what they have to deal with in the worst case, and they don't have to deal with an element with two parents. And regardless, it's always better to use the more precise term.)</p>



<a name="171190786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171190786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171190786">(Jul 18 2019 at 17:20)</a>:</h4>
<p>I'm agreeing with you <span class="user-mention" data-user-id="231009">@Justin Pombrio</span> (and tried to express this above; apologies if I was unclear) -- as long as nobody else thinks the mapping language actually applies to non-tree DAGs, we should just be saying "tree".</p>



<a name="171726741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171726741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171726741">(Jul 25 2019 at 20:53)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191315">@Josh Mandel</span>. Yeah, you were clear :-). I think "tree" or "forest" would make sense; "DAG" just scared me because I thought I was missing something about how FHIR resources worked.</p>



<a name="171728147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728147">(Jul 25 2019 at 21:09)</a>:</h4>
<p>Great. I added <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23007" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23007">GF#23007</a> to capture this conversation.</p>



<a name="171728414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728414">(Jul 25 2019 at 21:12)</a>:</h4>
<p>(deleted)</p>



<a name="171728487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728487">(Jul 25 2019 at 21:14)</a>:</h4>
<p>hang on. catching up with this topic.... FHIR resources are trees, but the mapping language works on DAGs. That's a clear difference</p>



<a name="171728611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728611">(Jul 25 2019 at 21:16)</a>:</h4>
<p>Sorry, I accidentally started a new conversation and can't figure out how to delete it. Probably we should continue the other conversation to avoid confusion, though I don't know Zulip well yet.</p>



<a name="171728678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728678">(Jul 25 2019 at 21:18)</a>:</h4>
<p>fixed.</p>



<a name="171728679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728679">(Jul 25 2019 at 21:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> You say that the mapping language works on DAGs. What do you mean by that: what are the edges? If the edges are fhir references, then they can form cycles, and so it's a general graph, not a DAG.</p>



<a name="171728724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728724">(Jul 25 2019 at 21:18)</a>:</h4>
<p>references are not edges. But I don't understand your question</p>



<a name="171728739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728739">(Jul 25 2019 at 21:19)</a>:</h4>
<p>FHIR resources are trees, with a designated starting point, and a single heirarchy.</p>



<a name="171728749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728749">(Jul 25 2019 at 21:19)</a>:</h4>
<p>What are the edges of the DAGs that the language works on?</p>



<a name="171728752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728752">(Jul 25 2019 at 21:19)</a>:</h4>
<p>but the mapping language works with DAGs, and some of the other content that you map from/to are not trees, they are DAGS</p>



<a name="171728756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728756">(Jul 25 2019 at 21:19)</a>:</h4>
<p>I don't understand 'what are the edges'</p>



<a name="171728809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728809">(Jul 25 2019 at 21:20)</a>:</h4>
<p>What's an example of other content that's a DAG?</p>



<a name="171728867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728867">(Jul 25 2019 at 21:21)</a>:</h4>
<p>I worked with someone who was working with a custom XML format where id links were redirections that were followed internally.</p>



<a name="171728930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171728930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171728930">(Jul 25 2019 at 21:22)</a>:</h4>
<p>HL7 has never published a poly-heirarchy, nor has openEHR or IHE, to my knowledge, but I have seen them in private formats - programmers fall into them naturally and do not have the experience not to until too late</p>



<a name="171729004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171729004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171729004">(Jul 25 2019 at 21:23)</a>:</h4>
<p>But the format didn't allow cycles? I'm surprised because "the mapping language works on DAGs" suggests that if you give it a DAG, it can transform it into another DAG, but is not capable of accidentally transforming it into a graph, and I didn't think that was easy to achieve.</p>



<a name="171729168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171729168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171729168">(Jul 25 2019 at 21:26)</a>:</h4>
<p>The input format did not make use of cycles. I cannot say whether it allowed cycles or not at some level in the definition. In terms of output.... I guess the mapping language could produce a true graph, not a DAG, but I'm not sure exactly how that would work in practice. I'd have to investigate</p>



<a name="171729366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171729366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171729366">(Jul 25 2019 at 21:29)</a>:</h4>
<p>I don't mean to send you off on a whole investigation! The important thing, at least to me, is that the docs scared me into thinking that maybe fhir resources weren't trees. A parenthetical note saying that while the language is more general, it typically acts on fhir resources---which are trees---would clear up the confusion.</p>



<a name="171729466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171729466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171729466">(Jul 25 2019 at 21:31)</a>:</h4>
<p>I agree with that. I added a note to the task</p>



<a name="171729526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171729526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Justin Pombrio <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171729526">(Jul 25 2019 at 21:32)</a>:</h4>
<p>Thanks for diving so deep into one sentence with me.</p>



<a name="171729545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/Where%20are%20the%20DAGs%3F/near/171729545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/Where.20are.20the.20DAGs.3F.html#171729545">(Jul 25 2019 at 21:33)</a>:</h4>
<p>no problems</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
