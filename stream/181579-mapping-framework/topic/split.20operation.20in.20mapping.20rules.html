---
layout: page
title: "FHIR Chat  · split operation in mapping rules · mapping-framework"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/index.html">mapping-framework</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/split.20operation.20in.20mapping.20rules.html">split operation in mapping rules</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="246081717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/split%20operation%20in%20mapping%20rules/near/246081717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amit bodhwani <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/split.20operation.20in.20mapping.20rules.html#246081717">(Jul 15 2021 at 11:36)</a>:</h4>
<p>Hello all,</p>
<p>In am trying to create Immunization resource using mapping rules.<br>
In Immunization resource doseQuantity is of  data type  SimpleQuantity.<br>
In my input json i have a field called dose which has both value an unit separated by a space between.</p>
<p>For E.g. "dose" : "&lt;Some Value&gt;  &lt;Unit&gt; ", here before writing the mapping  rule,  I want to split the field "dose" from input json based on space and get the value and unit.</p>
<p>Is it possible to split any field based on a character/string  in mapping rules.</p>



<a name="246100957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/split%20operation%20in%20mapping%20rules/near/246100957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/split.20operation.20in.20mapping.20rules.html#246100957">(Jul 15 2021 at 14:21)</a>:</h4>
<p><span class="user-mention" data-user-id="217312">@Joee Garcia</span></p>



<a name="246101391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/split%20operation%20in%20mapping%20rules/near/246101391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/split.20operation.20in.20mapping.20rules.html#246101391">(Jul 15 2021 at 14:24)</a>:</h4>
<p>yes, but you would need to split it in the target, e.g. you can use the fhirPath functions substring and indexOf, see an example <a href="https://github.com/hl7ch/cda-fhir-maps/blob/1f68d51018c37c4a8f63eaf4b51f99274950bf14/input/maps/BundleToCdaCh.map#L62">here</a></p>



<a name="246188725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/split%20operation%20in%20mapping%20rules/near/246188725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amit bodhwani <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/split.20operation.20in.20mapping.20rules.html#246188725">(Jul 16 2021 at 06:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191478">Oliver Egger</span> <a href="#narrow/stream/181579-mapping-framework/topic/split.20operation.20in.20mapping.20rules/near/246101391">said</a>:</p>
<blockquote>
<p>yes, but you would need to split it in the target, e.g. you can use the fhirPath functions substring and indexOf, see an example <a href="https://github.com/hl7ch/cda-fhir-maps/blob/1f68d51018c37c4a8f63eaf4b51f99274950bf14/input/maps/BundleToCdaCh.map#L62">here</a></p>
</blockquote>
<p>Hello <span class="user-mention" data-user-id="191478">@Oliver Egger</span> ,<br>
Thank You for quick response , i tried this , but it is not working.</p>
<p>src-&gt;tgt.doseQuantity = create('SimpleQuantity') as doseQuantity then{</p>
<p>src.dose as dose-&gt;doseQuantity.value  = dose.substring(0,dose.indexOf(' ') -1) "value";<br>
src.dose as dose-&gt;doseQuantity.unit = dose.substring(dose.indexOf(' ')) "unit";</p>
<p>}"doseQuantity";</p>
<p>Input : "dose" : "0.5 ml"</p>



<a name="246195841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/split%20operation%20in%20mapping%20rules/near/246195841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/split.20operation.20in.20mapping.20rules.html#246195841">(Jul 16 2021 at 08:10)</a>:</h4>
<p><span class="user-mention" data-user-id="412080">@amit bodhwani</span>  try to use the evaluate() function or the shortcut () of it, e.g: doseQuantity.value = (%dose.substring(0,%dose.indexOf(' ') -1)) "value";</p>



<a name="246197285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/split%20operation%20in%20mapping%20rules/near/246197285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> amit bodhwani <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/split.20operation.20in.20mapping.20rules.html#246197285">(Jul 16 2021 at 08:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191478">Oliver Egger</span> <a href="#narrow/stream/181579-mapping-framework/topic/split.20operation.20in.20mapping.20rules/near/246195841">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="412080">amit bodhwani</span>  try to use the evaluate() function or the shortcut () of it, e.g: doseQuantity.value = (%dose.substring(0,%dose.indexOf(' ') -1)) "value";</p>
</blockquote>
<p>Thank you for quick response <span class="user-mention" data-user-id="191478">@Oliver Egger</span> , it works using shortcut operator.</p>



<a name="271282633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/split%20operation%20in%20mapping%20rules/near/271282633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Carl Leitner <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/split.20operation.20in.20mapping.20rules.html#271282633">(Feb 09 2022 at 14:08)</a>:</h4>
<p>on a slightly off topic/related question, is there any effort to pull together common FML helper functions (e.g. split() ) into a library?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
