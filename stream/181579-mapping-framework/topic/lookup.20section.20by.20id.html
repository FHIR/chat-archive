---
layout: page
title: "FHIR Chat  · lookup section by id · mapping-framework"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/index.html">mapping-framework</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/lookup.20section.20by.20id.html">lookup section by id</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="259525715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/lookup%20section%20by%20id/near/259525715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roeland Luykx <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/lookup.20section.20by.20id.html#259525715">(Oct 29 2021 at 13:43)</a>:</h4>
<p>Hi<br>
i have a bundle within a composition resource. in this composition with sections and subsections defined. now i need to add a reference to a specific subsection identified by its id somewhere in a rule in my mapper without to reference the specific section as param.<br>
i tried somthing like this:<br>
group MyRule(source item : BackboneElement, source section : Section, target bundle : Bundle ){<br>
  section.section as subsec where (id.value = 'subsection-id'), item as it -&gt; bundle.entry as e,<br>
            e.resource =  create('Observation') as observ,<br>
<a href="http://observ.id">observ.id</a> = uuid() as uuid,<br>
              observ.code as codeable, <br>
                codeable.coding as coding,<br>
                  coding.system = '<a href="http://mycodesysytem.com/cs">http://mycodesysytem.com/cs</a>',<br>
                  coding.code = 'question',<br>
            e.fullUrl = append('urn:uuid:', uuid),<br>
            subsec.entry = create('Reference') as reference,<br>
              reference.type = 'Observation',<br>
              reference.reference = append('urn:uuid:',uuid) then {<br>
                it.text as txt -&gt; observ.note as note, note.text = txt;<br>
                it.answer as answ then {<br>
                  answ.value as val -&gt; observ.value = val;<br>
                } "value";<br>
            } "reference";<br>
}<br>
the transformation to the StructureMap works wihout errors but the transformation gives me<br>
"Failed to call access method: org.hl7.fhir.exceptions.FHIRException: Rule \"reference\": not handled yet"</p>
<p>somebody an idea what to do? or is this not possible?</p>



<a name="259527320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/lookup%20section%20by%20id/near/259527320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/lookup.20section.20by.20id.html#259527320">(Oct 29 2021 at 13:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="259529983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/lookup%20section%20by%20id/near/259529983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roeland Luykx <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/lookup.20section.20by.20id.html#259529983">(Oct 29 2021 at 14:12)</a>:</h4>
<p>one of the problems is for sure the section is source and also target.....<br>
in principle i miss a target lookup</p>



<a name="259530427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/lookup%20section%20by%20id/near/259530427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/lookup.20section.20by.20id.html#259530427">(Oct 29 2021 at 14:15)</a>:</h4>
<p>on which rule is it failing within the rule "reference"?</p>



<a name="259530467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/181579-mapping-framework/topic/lookup%20section%20by%20id/near/259530467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/181579-mapping-framework/topic/lookup.20section.20by.20id.html#259530467">(Oct 29 2021 at 14:15)</a>:</h4>
<p>you cannot mix source and target ...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
