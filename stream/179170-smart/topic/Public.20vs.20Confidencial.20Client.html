---
layout: page
title: "FHIR Chat  · Public vs Confidencial Client · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client.html">Public vs Confidencial Client</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="225755779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Public%20vs%20Confidencial%20Client/near/225755779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Timothy Akampa <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client.html#225755779">(Feb 09 2021 at 20:54)</a>:</h4>
<p>Hi all,<br>
My team is building a SMART on FHIR  web app and we're leveraging the fhir-client.js library (<a href="https://github.com/smart-on-fhir/client-js">https://github.com/smart-on-fhir/client-js</a>). We understand the fhir-client does not support PKCE, and therefore we cannot securely authenticate and exchange tokens as a public client. My question is: How best can we use the FHIR client library to authenticate as a confidential client. Does that mean that all OAuth calls and FHIR resource calls will made in  backend? Is there away to do FHIR.oauth2.authorize() from the backend and let the fontend make fhir calls on FHIR.ready()</p>



<a name="225758030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Public%20vs%20Confidencial%20Client/near/225758030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client.html#225758030">(Feb 09 2021 at 21:11)</a>:</h4>
<blockquote>
<p>We understand the fhir-client does not support PKCE, and therefore we cannot securely authenticate and exchange tokens as a public client</p>
</blockquote>
<p>The current SMART specification does not require PKCE, so if you're talking to a SMARTv1 server, this statement shouldn't apply.</p>



<a name="225758157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Public%20vs%20Confidencial%20Client/near/225758157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client.html#225758157">(Feb 09 2021 at 21:12)</a>:</h4>
<p>(We have forward looking work on a SMARTv2 spec, but it'd be a year at minimum before that makes it through the HL7 and follow-on regulatory process.)</p>



<a name="225758260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Public%20vs%20Confidencial%20Client/near/225758260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client.html#225758260">(Feb 09 2021 at 21:13)</a>:</h4>
<p>At a higher level: If your app has a server-side component, we'd definitely recommend using that and building a confidential client. If your app doesn't have or need a server-side component, then I'd look at building a public client.</p>



<a name="225763245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Public%20vs%20Confidencial%20Client/near/225763245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Timothy Akampa <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client.html#225763245">(Feb 09 2021 at 21:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> <a href="#narrow/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client/near/225758260">said</a>:</p>
<blockquote>
<p>At a higher level: If your app has a server-side component, we'd definitely recommend using that and building a confidential client. If your app doesn't have or need a server-side component, then I'd look at building a public client.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> Thank you for your timely response. Right now the app does not have a server-side component, but talks to an OAuth authorization server that requires public clients to use PKCE. I would really appreciate it if you could share an open source reference implementation that  uses the fhir-client.js library and implements a confidential client flow.</p>



<a name="225763817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Public%20vs%20Confidencial%20Client/near/225763817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client.html#225763817">(Feb 09 2021 at 21:55)</a>:</h4>
<p>What you're describing is server behavior outside the SMART spec. So you may not find a SMART library that supports this. <span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span> nevertheless this would be a good feature;is there a reason you wouldn't want to include it?</p>



<a name="225772727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Public%20vs%20Confidencial%20Client/near/225772727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Timothy Akampa <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client.html#225772727">(Feb 09 2021 at 23:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> <a href="#narrow/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client/near/225763817">said</a>:</p>
<blockquote>
<p>What you're describing is server behavior outside the SMART spec. So you may not find a SMART library that supports this. <span class="user-mention silent" data-user-id="193731">Vladimir Ignatov</span> nevertheless this would be a good feature;is there a reason you wouldn't want to include it?</p>
</blockquote>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> <span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span> We would really appreciate it if you could add PKCE support to the fhir-client.js. This will secure our apps against Authorization Code Interception Attack. In the meantime does anyone have a sample code that uses the fhir-client.js library and implements a confidential client flow?</p>



<a name="225774707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Public%20vs%20Confidencial%20Client/near/225774707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client.html#225774707">(Feb 09 2021 at 23:43)</a>:</h4>
<p><a href="https://github.com/t-zhao/client-js">https://github.com/t-zhao/client-js</a> is a fork with PKCE support FWIW <span class="user-mention" data-user-id="380771">@Timothy Akampa</span></p>



<a name="225879234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Public%20vs%20Confidencial%20Client/near/225879234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Public.20vs.20Confidencial.20Client.html#225879234">(Feb 10 2021 at 17:50)</a>:</h4>
<p>Frankly, I didn't know that PKCE is coming to SMART so soon. In this case consider it being in my todo list.</p>
<p>There was this issue that I closed declining to add PKCE, but that was just temporary. The question was am I<br>
going to add it soon, or should they use their existing fork. Since the fork exists and I know won't be able to <br>
dedicate enough time in the next few moths, I had to let them know that they shouldn't rely on that just yet.</p>
<p>I just released new version (<a href="https://github.com/smart-on-fhir/client-js/releases/tag/v2.3.11">https://github.com/smart-on-fhir/client-js/releases/tag/v2.3.11</a>) and won't be able<br>
to spare much time to this project for a while, but once I get back to it I plan to give PKCE a try.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
