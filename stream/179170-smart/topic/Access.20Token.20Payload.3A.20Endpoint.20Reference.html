---
layout: page
title: "FHIR Chat  · Access Token Payload: Endpoint Reference · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html">Access Token Payload: Endpoint Reference</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="223981497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223981497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Lamb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223981497">(Jan 26 2021 at 00:15)</a>:</h4>
<p>Payers and providers may want to expose FHIR related portal functionality. Would the following scope be appropriate?:<br>
"portal_access":  "Request an access token that can be used to access a patient portal." </p>
<p>if the scope was fulfilled it would result in two new properties in the access token payload: <br>
"portal_token":"sometokenvalue"<br>
"portal_url":"<a href="https://www.something.com">https://www.something.com</a>"<br>
-or-<br>
"portal_token":"sometokenvalue"<br>
"portal_endpoint":"654987" (FHIR Id for an endpoint resource)</p>
<p>This would help consumer applications support B2B use cases.</p>



<a name="223981617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223981617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223981617">(Jan 26 2021 at 00:16)</a>:</h4>
<blockquote>
<p>can be used to access a patient portal</p>
</blockquote>
<p>What does it mean for an app to "access a patient portal"? A portal is a user-facing web site, right?</p>



<a name="223981667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223981667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Lamb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223981667">(Jan 26 2021 at 00:17)</a>:</h4>
<p>Yes, exactly. </p>
<p>The portal screen we provide in this endpoint would be for B2B configurations, views, and other FHIR settings.</p>



<a name="223981689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223981689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Lamb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223981689">(Jan 26 2021 at 00:17)</a>:</h4>
<p>so they would open up a website, nothing fancy.</p>



<a name="223981751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223981751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Lamb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223981751">(Jan 26 2021 at 00:18)</a>:</h4>
<p>or we push them to a "screen" in a payer/provider app...</p>



<a name="223981809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223981809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223981809">(Jan 26 2021 at 00:19)</a>:</h4>
<p>But what is an app doing with this token? How is it used and what does it accomplish?</p>



<a name="223981935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223981935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Lamb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223981935">(Jan 26 2021 at 00:20)</a>:</h4>
<p>Many people do not interact with the portals. They may begin to use an application first. If a patient downloads a consumer application first, they can still select a data source and activate their account. This would provide a consistent way for people who interact with their portals when using a consumer application as the point of entry.</p>



<a name="223981975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223981975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Lamb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223981975">(Jan 26 2021 at 00:21)</a>:</h4>
<p>Even if they get the consumer application second, it may be nice to have easy access to the relevant portal webpage.</p>



<a name="223982049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223982049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Lamb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223982049">(Jan 26 2021 at 00:22)</a>:</h4>
<p>A consumer applicatino will not be able to perform certain types of activities, like opt-in to share prior authorization status or to request that a diagnosis is shared with a physician.</p>



<a name="223982128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223982128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223982128">(Jan 26 2021 at 00:23)</a>:</h4>
<p>I think we're schedule for a 1:1 conversation soon -- would be good to talk through this, because I'm fundamentally not getting what you're saying. Patients need "portal" access in order to approve an app; that's where the approval happens.</p>



<a name="223982971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223982971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Lamb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223982971">(Jan 26 2021 at 00:32)</a>:</h4>
<p>Sounds good. We can go through it then. </p>
<p>One last attempt at clarity: Once a patient adds a data source (during the app login sequence), they will generally have portal access, but they did not necessarily interact with the portal in a meaningful way. </p>
<p>These patients may have only interacted with the IMS and Authorization screens. We would not want someone to have to go through the login sequence every time they wanted to change a setting on their portal. Because of this, payers and providers may eventually have dedicated screens to perform FHIR functionality, like prior auths, and to manage opt-ins (consumer devices cannot act as a HIPAA covered entity).</p>
<p>This link in the access token payload would provide easy access to the portal. The "portal_token" is used to enable the portal to open instantly without login.</p>



<a name="223983045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223983045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Lamb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223983045">(Jan 26 2021 at 00:33)</a>:</h4>
<p>Ideally, this would be a direct link to the FHIR. configurations</p>



<a name="223983175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223983175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223983175">(Jan 26 2021 at 00:35)</a>:</h4>
<p>I see. You are basically asking the app to hold on to an authentication cookie for the user. This seems like a dramatically painful real-world security and compliance challenge</p>



<a name="223983199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223983199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223983199">(Jan 26 2021 at 00:35)</a>:</h4>
<p>But I get it now!</p>



<a name="223983492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223983492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Lamb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223983492">(Jan 26 2021 at 00:40)</a>:</h4>
<p>The app already has a dangerous token, but i see your point. The security is not worth the minimal convenience. </p>
<p>They can log in again. I am okay with that. In most cases, the phone/internet browser saved the PW anyway.</p>



<a name="223983649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223983649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223983649">(Jan 26 2021 at 00:41)</a>:</h4>
<p>Yeah, I would focus on defining apis for the features you want, and if you want a little bit of flexibility you can define apis by which the app can discover URLs representing to-do items, and those URLs can come with authorization tokens built in specifically for completing one task like approving one prior authorization request.</p>



<a name="223983709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223983709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223983709">(Jan 26 2021 at 00:42)</a>:</h4>
<p>(and then it is up to the EHR to decide whether a specific prior auth link works on a simple click-through or whether requires a full sign-in event or something in between like a pin entry)</p>



<a name="223984884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Access%20Token%20Payload%3A%20Endpoint%20Reference/near/223984884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Lamb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Access.20Token.20Payload.3A.20Endpoint.20Reference.html#223984884">(Jan 26 2021 at 00:57)</a>:</h4>
<p>Some payers and providers may update their web portals to support new use cases like FHIR configurations. Creating new b2c APIs to support configurations changes is certainly an option. I see this as a different IG, perhaps under CARIN. Providing a link to a portal webpage that has the FHIR settings may be a good stopgap measure.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
