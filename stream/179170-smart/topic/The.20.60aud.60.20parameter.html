---
layout: page
title: "FHIR Chat  · The `aud` parameter · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/The.20.60aud.60.20parameter.html">The `aud` parameter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="242882963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/The%20%60aud%60%20parameter/near/242882963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/The.20.60aud.60.20parameter.html#242882963">(Jun 16 2021 at 13:50)</a>:</h4>
<p>One of the OAuth extensions defined in SMART App Launch is the <code>aud</code> parameter that clients are <em>required</em> to pass to the auth endpoint.<br>
This one has always bugged me because it is possibly the only thing that prevents someone from using a "standard" OAuth 2.0 / OIDC client.</p>
<p>For example, it means you can't use Postman's built-in OAuth 2.0 authorization support.</p>
<p>Question:  when this was originally discussed, did anyone consider following <a href="https://datatracker.ietf.org/doc/html/draft-tschofenig-oauth-audience-00">https://datatracker.ietf.org/doc/html/draft-tschofenig-oauth-audience-00</a> and making that audience request a parameter to the <em>token</em> endpoint as opposed to the auth endpoint?</p>



<a name="242886383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/The%20%60aud%60%20parameter/near/242886383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Hall <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/The.20.60aud.60.20parameter.html#242886383">(Jun 16 2021 at 14:12)</a>:</h4>
<p>You actually can do the Postman builtin support, you just have to add the aud to the Auth URL field like so,<br>
<code>{{AUTH_URL}}?aud={{AUD_URL}}</code></p>



<a name="242886485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/The%20%60aud%60%20parameter/near/242886485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Hall <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/The.20.60aud.60.20parameter.html#242886485">(Jun 16 2021 at 14:13)</a>:</h4>
<p>bugged me for awhile as well until i did that</p>



<a name="242889556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/The%20%60aud%60%20parameter/near/242889556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/The.20.60aud.60.20parameter.html#242889556">(Jun 16 2021 at 14:34)</a>:</h4>
<p>ah, that is a GREAT tip, thanks Nathan</p>



<a name="242889933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/The%20%60aud%60%20parameter/near/242889933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/The.20.60aud.60.20parameter.html#242889933">(Jun 16 2021 at 14:36)</a>:</h4>
<p>still curious on the question of whether that ietf draft was considered.  I found that Postman supports that one now through its <a href="/user_uploads/10155/pAuDxieMLzn8tIB7LAoh_tiw/image.png">Advanced Options tab</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/pAuDxieMLzn8tIB7LAoh_tiw/image.png" title="Advanced Options tab"><img src="/user_uploads/10155/pAuDxieMLzn8tIB7LAoh_tiw/image.png"></a></div>



<a name="242889992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/The%20%60aud%60%20parameter/near/242889992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/The.20.60aud.60.20parameter.html#242889992">(Jun 16 2021 at 14:37)</a>:</h4>
<p>and also found <a href="https://stackoverflow.com/questions/45876960/how-to-specify-audience-for-an-oauth2-access-token">https://stackoverflow.com/questions/45876960/how-to-specify-audience-for-an-oauth2-access-token</a> which claims at least Auth0 support this as well</p>



<a name="242890199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/The%20%60aud%60%20parameter/near/242890199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/The.20.60aud.60.20parameter.html#242890199">(Jun 16 2021 at 14:38)</a>:</h4>
<p>it also seems like it could help with the concerns raised under <a href="#narrow/stream/179170-smart/topic/Multiple.20Audiences">https://chat.fhir.org/#narrow/stream/179170-smart/topic/Multiple.20Audiences</a> ...or maybe not (was thinking you could authenticate once and then get tokens for different endpoints by calling token endpoint multiple times, but now I don't think it works like that)</p>



<a name="242890268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/The%20%60aud%60%20parameter/near/242890268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/The.20.60aud.60.20parameter.html#242890268">(Jun 16 2021 at 14:39)</a>:</h4>
<p>too late</p>



<a name="242941350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/The%20%60aud%60%20parameter/near/242941350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/The.20.60aud.60.20parameter.html#242941350">(Jun 16 2021 at 20:50)</a>:</h4>
<p>I don't think this ever came up in discussion. In practice, either approach requires adding an audience parameter to a step in the process (either the authorize step, or the token step). One advantage of attaching to the authorize step (as we do today in SMART) is that broken cases can fail fast, rather than <em>after</em> the user has completed an approval step</p>



<a name="242941433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/The%20%60aud%60%20parameter/near/242941433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/The.20.60aud.60.20parameter.html#242941433">(Jun 16 2021 at 20:51)</a>:</h4>
<p>(that draft from 2013 is also... very drafty... but I'm trying to fill in details generously.)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
