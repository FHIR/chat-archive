---
layout: page
title: "FHIR Chat  · US-Core profiles for validation · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html">US-Core profiles for validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188023070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188023070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Briand <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188023070">(Feb 12 2020 at 15:58)</a>:</h4>
<p>If I understand well the "core" concepts for SMART on FHIR, the data model is based on us-core profiles.<br>
Nevertheless, when I try to use <code>https://r3.smarthealthit.org/Patient/$validate</code> (or r4) with</p>
<div class="codehilite"><pre><span></span>    &quot;meta&quot;: {
        &quot;profile&quot;: [&quot;http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient&quot;]
    },
</pre></div>


<p>I receive <code>"StructureDefinition reference \"http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient\" could not be resolved"</code>.<br>
And indeed, searching in <code>/StructureDefinition</code> resources, I was not able to find any us-core StructureDefinition</p>
<p>Is it normal ? Is there something I don't understand ?</p>



<a name="188026011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188026011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188026011">(Feb 12 2020 at 16:22)</a>:</h4>
<p>What server were you searching on?  You can't necessarily expect most servers to have awareness of the US Core profiles - even if they support SMART on FHIR</p>



<a name="188026397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188026397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Briand <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188026397">(Feb 12 2020 at 16:26)</a>:</h4>
<p>It's <code>https://r3.smarthealthit.org</code>, the "SMART on FHIR" official test server, so ... I was expecting them to be aware of the us-core profiles ;)</p>



<a name="188026739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188026739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188026739">(Feb 12 2020 at 16:30)</a>:</h4>
<p>Not necessarily something you can expect.  The data might be expected to comply with the profiles - that doesn't mean the servers will have awareness of the profiles for validation purposes.  It may be they're not hosted for exactly that reason.  <span class="user-mention" data-user-id="191315">@Josh Mandel</span>, thoughts?</p>



<a name="188035586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188035586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188035586">(Feb 12 2020 at 17:55)</a>:</h4>
<p>The server as such is a generic FHIR server -- it can be used to store data that meet (or don't meet!) US Core profiles. When it comes to sample data, we try to generally align with these profiles (and most of the pre-loaded sample data just comes from Synthea at this stage).</p>



<a name="188084193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188084193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Briand <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188084193">(Feb 13 2020 at 07:32)</a>:</h4>
<p>Do you think I should make a PR on the Github repository, to add us-core profiles to pre-loaded sample data ?<br>
Not to make them mandatory, as I understand this is not the goal, but just to "have them available" :)</p>



<a name="188133809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188133809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188133809">(Feb 13 2020 at 18:15)</a>:</h4>
<p>BTW, Synthea can generate US Core data (with the profiles declared in meta), using the <code>--exporter.fhir.use_us_core_ig=true</code> command line switch.</p>



<a name="188138479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188138479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188138479">(Feb 13 2020 at 19:01)</a>:</h4>
<p>Wait, are you talking about adding profile tags <span class="user-mention" data-user-id="250480">@Florian Briand</span> , or about actually providing different data?</p>



<a name="188139397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188139397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188139397">(Feb 13 2020 at 19:10)</a>:</h4>
<p>I don't know exactly what he is talking about, but to be clear, when using that US Core switch synthea generates additional us core data (with some extra fields filled out and with some additional resources), in addition to declaring profile conformance in meta.</p>



<a name="188141395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188141395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Briand <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188141395">(Feb 13 2020 at 19:30)</a>:</h4>
<p>The idea is to be able to use <code>$validate?profile=...us-core-...</code> operation to check a resource against the us-core profiles.<br>
It's not to "always" do this validation, but allow people to do it.<br>
To do so, we have to add the appropriates StructureDefinition on the server, the ones registering the us-core profiles, to made them available with the $validate operation.</p>
<p>But in practice, maybe the synthea's param add automatically the profiles also, so thank you for the tip :)</p>



<a name="188142582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188142582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188142582">(Feb 13 2020 at 19:41)</a>:</h4>
<p><span class="user-mention" data-user-id="250480">@Florian Briand</span> I'm unclear on this point: if you're passing in <code>profile=</code> as an argument to the <code>$validate</code> operation, then it shouldn't be necessary for the data themselves to be tagged with anything specific in <code>meta.profile</code>. In other words, the validator shouldn't care about those tags; it's focused on content.</p>



<a name="188143659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188143659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Briand <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188143659">(Feb 13 2020 at 19:53)</a>:</h4>
<p>Yes, there is no need to tag the data</p>



<a name="188143926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188143926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Briand <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188143926">(Feb 13 2020 at 19:55)</a>:</h4>
<p>But to use validate, the profile have to exists, as a StructureDef on the server. The server seems not able to "fetch" the Profile using the provided URL</p>



<a name="188254910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188254910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188254910">(Feb 14 2020 at 22:51)</a>:</h4>
<p>Wait, you're saying that <em>every</em> data server would need to store definnitional artifacts in order for a 3rd party server to validate? That doesn't sound right (or realistic).</p>



<a name="188254995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188254995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188254995">(Feb 14 2020 at 22:52)</a>:</h4>
<p>The more likely scenario is: EHR server hosts data from its own internal database, using profiled FHIR. If a client wants to validate those data, the client is responsible for gathering up all the definitional artifacts required to perform validation (e.g., the client would obtain a validator and the US Core structure definitions).</p>



<a name="188255027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188255027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188255027">(Feb 14 2020 at 22:52)</a>:</h4>
<p>In this context, the SMART reference stack is playing the role of an EHR (and nothing extra).</p>



<a name="188318873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188318873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188318873">(Feb 16 2020 at 09:06)</a>:</h4>
<p>the way we've defined it, a server that hosts the $validate operation has to host / locate the profiles value sets etc. And if the server wants to validate anyway (which it can ... and sometimes should), and it wants to validate against the profiles, then it also needs to locate them for itself</p>



<a name="188318880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188318880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188318880">(Feb 16 2020 at 09:06)</a>:</h4>
<p>a typical data server doesn't do that - it doesn't provide a $validate operation, and it validates based on it's internal logic, which mostly wouldn't depend on profiles (though it could)</p>



<a name="188598290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/188598290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#188598290">(Feb 19 2020 at 23:53)</a>:</h4>
<p>To finalize this point then: hosting the <code>$validate</code> operation is not something that a SMART on FHIR server is expected to do.</p>



<a name="189042583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/189042583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Briand <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#189042583">(Feb 25 2020 at 17:48)</a>:</h4>
<p>A classic "SMART on FHIR" server, yes ; but the ones used for demo/testing/... like <a href="https://r4.smarthealthit.org/metadata" target="_blank" title="https://r4.smarthealthit.org/metadata">https://r4.smarthealthit.org/metadata</a> ? It could be a good idea, no ? ;)</p>
<p>Because everybody don't have a custom server in local, and it's quite painful to only have Grahame's ones to develop ;)</p>



<a name="189056467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/US-Core%20profiles%20for%20validation/near/189056467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/US-Core.20profiles.20for.20validation.html#189056467">(Feb 25 2020 at 20:13)</a>:</h4>
<p>I think sometimes it does a disservice to developers if the "reference" implementation is way out ahead of what real-world servers can do. It's a careful balance. On this specific issue, I'd say that data validation (as a service, on specific inputs) is not a SMART server concern, so clients that care about validation should be provisioning their own resources.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
