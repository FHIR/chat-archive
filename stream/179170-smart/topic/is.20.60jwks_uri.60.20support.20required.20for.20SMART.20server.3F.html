---
layout: page
title: "FHIR Chat  · is `jwks_uri` support required for SMART server? · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html">is `jwks_uri` support required for SMART server?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="201316863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/201316863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#201316863">(Jun 18 2020 at 19:47)</a>:</h4>
<p>I interpret <a href="https://hl7.org/fhir/uv/bulkdata/authorization/index.html#registering-a-smart-backend-service-communicating-public-keys">this section of the SMART Backend Services spec</a> to say that:</p>
<ul>
<li>SMART servers SHALL support the JWKS format for receiving an app's public key, </li>
<li>SHOULD support retrieving that key via a TLS-protected jwks_uri and </li>
<li>MAY only support receiving that key through an out-of-band mechanism. </li>
</ul>
<p>An alternative interpretation is that :</p>
<ul>
<li>SMART servers SHALL support retrieving the key through a jwks_url </li>
<li>SMART servers SHALL support receiving the key through an out-of-band mechanism and</li>
<li>apps SHOULD support jwks_url and MAY support communicating the key through an out-of-band mechanism</li>
</ul>
<p>Which of the above two interpretations is (1) intended? and (2) supported by your SMART server?</p>



<a name="201318705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/201318705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#201318705">(Jun 18 2020 at 20:00)</a>:</h4>
<p>(1) sounds like what we intended. But just to be sure I understand, the third bullet point you listed under your alternative interpretation seems to contradict the first bullet point, so I might be missing something.</p>



<a name="201318792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/201318792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#201318792">(Jun 18 2020 at 20:01)</a>:</h4>
<p>Also, looks like your link is wrong -- do you want to update it so we're reading the same text?</p>



<a name="201327441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/201327441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#201327441">(Jun 18 2020 at 21:18)</a>:</h4>
<p>Josh - link fixed. Thanks. </p>
<blockquote>
<p>the third bullet point you listed under your alternative interpretation seems to contradict the first bullet point, so I might be missing something.</p>
</blockquote>
<p>The alternate interpretation is that a SMART server must support both methods, and use whichever is supported by the app. This phrase could suggest that interpretation:</p>
<blockquote>
<p>If a client cannot host the JWK Set at a TLS-protected URL, it MAY supply the JWK Set directly to the FHIR server at registration time</p>
</blockquote>



<a name="201328402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/201328402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#201328402">(Jun 18 2020 at 21:30)</a>:</h4>
<p>Right, ok -- and reviewing now more carefully: the goal was to ensure that servers support both, and encourage clients to support jwks_uri based publication.</p>



<a name="201328465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/201328465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#201328465">(Jun 18 2020 at 21:30)</a>:</h4>
<p>(Goal was to support clients that aren't online / capable of hosting keys, but as a less-common special case.)</p>



<a name="201330020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/201330020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#201330020">(Jun 18 2020 at 21:49)</a>:</h4>
<p>Ergh. Yet, the spec never says:</p>
<blockquote>
<p>the FHIR server SHALL ... </p>
</blockquote>
<p>Also, what's the case in which an app can securely host a redirect_uri, and not a jwks_uri?</p>



<a name="201330760"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/201330760" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#201330760">(Jun 18 2020 at 21:59)</a>:</h4>
<p>There's no redirect_uri involved in Backend Services.</p>



<a name="201758866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/201758866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#201758866">(Jun 23 2020 at 17:49)</a>:</h4>
<p>That is also our interpretation that server SHALL support both and client SHOULD support jwks_url.</p>



<a name="201874673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/201874673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#201874673">(Jun 24 2020 at 17:00)</a>:</h4>
<p>thanks, Yunwei! Yet, that's explicitly not required by the spec. There is no requirement placed upon the FHIR server in this section. It's an assumption to turn this into a normative requirement.</p>



<a name="201902865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/201902865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#201902865">(Jun 24 2020 at 20:58)</a>:</h4>
<p>Yes. We had a discussion during the last Connectathon about those ambiguity in current Bulk Data IG for server requirement vs client requirement. I believe those will be addressed in Bulk Data 1.2 <span class="user-mention" data-user-id="191414">@Dan Gottlieb</span></p>



<a name="202121569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/202121569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#202121569">(Jun 26 2020 at 17:54)</a>:</h4>
<p>Thanks, Yunwei, Dan. Any idea yet of how this would be addressed? I'd like to understand the scenario in which a FHIR server should be disallowed from requiring an backend system to host a jwks_url, for example.</p>



<a name="202127244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/202127244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#202127244">(Jun 26 2020 at 18:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191864">@Isaac Vetter</span> <span class="user-mention" data-user-id="191506">@Yunwei Wang</span> the clarifications around server requirements we discussed at the connectathon were for the  export API kickoff request parameters, though that's not to say we shouldn't also consider updating the backend services spec if that's needed.</p>



<a name="202127274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/202127274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#202127274">(Jun 26 2020 at 18:47)</a>:</h4>
<p>My recollection matches that of <span class="user-mention" data-user-id="191315">@Josh Mandel</span> above - the intent was for servers to support both methods of registering public keys (jwks url and fixed jwks). While the first method is superior, I believe some clients devs were concerned about the need to maintain keys at an online location when the rest of the app is running behind a firewall and doesn't have any public facing elements.</p>



<a name="202706977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/is%20%60jwks_uri%60%20support%20required%20for%20SMART%20server%3F/near/202706977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/is.20.60jwks_uri.60.20support.20required.20for.20SMART.20server.3F.html#202706977">(Jul 02 2020 at 15:51)</a>:</h4>
<p>Follow-up with clarifications at <a href="https://github.com/HL7/bulk-data/pull/79">https://github.com/HL7/bulk-data/pull/79</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
