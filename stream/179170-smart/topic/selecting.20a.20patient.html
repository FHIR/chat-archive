---
layout: page
title: "FHIR Chat  · selecting a patient · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html">selecting a patient</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153814992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153814992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153814992">(Mar 10 2016 at 23:14)</a>:</h4>
<p>The SMART documentation defines the  <strong>launch/patient</strong> scope as    "When launching outside the EHR, ask for a patient to be selected at launch time".  Assuming the Authz server approves, is it the responsibility of the EHR to provide the patient selection, or can the client application make FHIR based Patient queries? (Or, is this implementation specific?)</p>



<a name="153814994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153814994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153814994">(Mar 10 2016 at 23:15)</a>:</h4>
<p>This scope, <code>launch/patient</code>, is the way for an app to say, "OK, EHR, I want you to handle patient selection for me".</p>



<a name="153814995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153814995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153814995">(Mar 10 2016 at 23:15)</a>:</h4>
<p>If the app wants to handle patient selection itself, it shouldn't ask for <code>launch/patient</code>, and it <strong>should</strong> ask for <code>user/Patient.read</code> (at least).</p>



<a name="153814999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153814999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153814999">(Mar 10 2016 at 23:21)</a>:</h4>
<p>thanks! (Have added it to the documentation sample for the next person!)</p>



<a name="153815001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815001">(Mar 10 2016 at 23:23)</a>:</h4>
<p>Just saw and commented on <a href="https://github.com/smart-on-fhir/smart-on-fhir.github.io/pull/114" target="_blank" title="https://github.com/smart-on-fhir/smart-on-fhir.github.io/pull/114">https://github.com/smart-on-fhir/smart-on-fhir.github.io/pull/114</a></p>



<a name="153815002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815002">(Mar 10 2016 at 23:24)</a>:</h4>
<p>I think this point is a good one, but we need to figure out where it lives. Maybe it's in tutorial, rather than the scope definitions page. Or maybe it's in a side note, or explanatory comment.  Hmm.</p>



<a name="153815003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815003">(Mar 10 2016 at 23:25)</a>:</h4>
<p>Oh, I take it back. You put it in exactly the right place.</p>



<a name="153815004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815004">(Mar 10 2016 at 23:25)</a>:</h4>
<p>Merged. Thanks <span class="user-mention" data-user-id="191321">@David Hay</span> </p>



<a name="153815017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815017">(Mar 10 2016 at 23:57)</a>:</h4>
<p>suppose I have an EHR launched app (with a patient in context), with a scope of user/Patient.read   Does this mean I'm asking to be able to select any patient - not just the one in scope?  and perhaps patient/*.read and patient/*.write, requesting to do anything with those patients (that the user is allowed to do - subject to any other EHR policies of course)?</p>



<a name="153815018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815018">(Mar 10 2016 at 23:58)</a>:</h4>
<p>yes you're asking that. You might not be granted that - it depends on the model. Some servers or users may only grant you rights to the see the patient in scope, and others may grant you the right to see other patients. </p>



<a name="153815020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815020">(Mar 11 2016 at 00:05)</a>:</h4>
<p>On <a href="http://docs.smarthealthit.org/authorization/" target="_blank" title="http://docs.smarthealthit.org/authorization/">http://docs.smarthealthit.org/authorization/</a> the launch parameter is defined as "Opaque identifier for this specific launch, and any EHR context associated with it". How does this EHR context get associated with the launch id?</p>



<a name="153815021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815021">(Mar 11 2016 at 00:10)</a>:</h4>
<p>afaik that's up to the implementation.  It needs to store it somewhere so it can be found post successful authentication...</p>



<a name="153815022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815022">(Mar 11 2016 at 00:13)</a>:</h4>
<p>Heath - the thing launching provides the parameter, and then it gets it back in the end</p>



<a name="153815023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815023">(Mar 11 2016 at 00:13)</a>:</h4>
<p>So the example access token response in section "SMART authorization sequence" that returns the patient ID is an example when the authorisation server has requested the patient ID as part of the "Authorize App" step?</p>



<a name="153815024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815024">(Mar 11 2016 at 00:14)</a>:</h4>
<p>a more useful question is how the client determines what it's context is</p>



<a name="153815026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815026">(Mar 11 2016 at 00:19)</a>:</h4>
<p>I read that to mean that if the app is launched from the EHR, and a patient is in context, THEN the 'patient' property is in the access token with the patient id as the value...</p>



<a name="153815027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815027">(Mar 11 2016 at 00:20)</a>:</h4>
<p>yes but the auth token is opaque to the client </p>



<a name="153815028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815028">(Mar 11 2016 at 00:30)</a>:</h4>
<p>sorry - I should have said 'access token' (not the auth code)<br>
(this stuff hurts your head)</p>



<a name="153815038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815038">(Mar 11 2016 at 00:51)</a>:</h4>
<p>My confusion is how the auth server knows the app's select patient?</p>



<a name="153815039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815039">(Mar 11 2016 at 00:51)</a>:</h4>
<p>for which workflow are you asking? </p>



<a name="153815041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815041">(Mar 11 2016 at 00:58)</a>:</h4>
<p>As I said, in the example access token response in section "SMART authorization sequence" that returns the patient ID. How did the Auth svr know about which patient is being launched?</p>



<a name="153815042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815042">(Mar 11 2016 at 00:59)</a>:</h4>
<p>If it's an EHR launch the Auth server is part of the EHR and there's a 'back channel' communication I guess</p>



<a name="153815043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815043">(Mar 11 2016 at 01:00)</a>:</h4>
<p>well, in the EHR initiated workflow, the EHR and the Auth server have a private agreement about how that's communicated, yes</p>



<a name="153815044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815044">(Mar 11 2016 at 01:00)</a>:</h4>
<p>OK, so the EHR registers some launch context against the launch ID and the Auth Svr retrieves this from the EHR?</p>



<a name="153815045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815045">(Mar 11 2016 at 01:00)</a>:</h4>
<p>or they might be the same</p>



<a name="153815046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815046">(Mar 11 2016 at 01:03)</a>:</h4>
<p>I was imagining that when the user clicks the 'go for it' link in the EHR,  then the EHR saves the context where the Authz server can find it, indexed with an opaque key (the launch token) which is sent to the client. The Authz server picks it up from the same location using the same launch token...</p>



<a name="153815047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815047">(Mar 11 2016 at 01:04)</a>:</h4>
<p>Here's what I wrote:</p>
<p>To support the ‘EHR launch’ (ie from within portal), there needs to be some way that the authorize endpoint knows the context of the caller. In the spec, this involves a token (the launch parameter) that acts as a key to this data. This implies that it is set when the app is loaded, so that it can retrieved by the authorize end point. So the starting sequence (after the user clicks the button will be something like:<br>
•   Save the current context (user and optionally patient) in some key/value store that is also accessible by the Authentication server. Need a strong key and likely a TTL.<br>
•   Include the value of the key as the launch parameter in the call to the client application.</p>



<a name="153815048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815048">(Mar 11 2016 at 01:04)</a>:</h4>
<p>hopefully it's correct!</p>



<a name="153815049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815049">(Mar 11 2016 at 01:07)</a>:</h4>
<p>For me this is a big piece of the puzzle missing from this Guide</p>



<a name="153815050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815050">(Mar 11 2016 at 01:07)</a>:</h4>
<p>The above text would help assuming this is what is intended</p>



<a name="153815051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815051">(Mar 11 2016 at 01:08)</a>:</h4>
<p>I'm actually writing a post as we speak - 'cause I had the same issues!</p>



<a name="153815052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815052">(Mar 11 2016 at 01:08)</a>:</h4>
<p>and that way, if I get it wrong, then the community can correct me...</p>



<a name="153815053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815053">(Mar 11 2016 at 01:08)</a>:</h4>
<p>I would suggest we want to go one step further and actually define what this would look like when the EHR and Auth Svr are different </p>



<a name="153815054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815054">(Mar 11 2016 at 01:10)</a>:</h4>
<p>OAuth 1.0 has an Initialise interaction which I have used for this in one of my implementations</p>



<a name="153815055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815055">(Mar 11 2016 at 01:10)</a>:</h4>
<p>Heath - for now. it's a private agreement. the UMA/Heart project want to standardlise this - we met with them last week - but that's way more complex than it sounds, so SMART is leaving that for the future </p>



<a name="153815056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815056">(Mar 11 2016 at 01:12)</a>:</h4>
<p>I can understand that, but I think we would want to get there at some stage so that we don't have too many variations of this.</p>



<a name="153815069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815069">(Mar 11 2016 at 02:44)</a>:</h4>
<p>To say it briefly: SMART's authorization spec aims to standardize the way an EHR talks to apps. We're not trying to standardize the way the internal EHR components (resource server, authz server) talk to each other.</p>



<a name="153815070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815070">(Mar 11 2016 at 02:46)</a>:</h4>
<p>There are, however, some common patterns for how your EHR's resource server and authz server might communicate context.</p>
<p>1. The "launch id" can actually contain the state (as long as it's encrypted for confidentiality and signed for integrity. For example the EHR can create a JWT that's created for the authz server to read, encoding the relevant context parameters.<br>
2. The "launch id" can be a URL or parameter that the authz server uses to look up the context via an internal API .<br>
3. The authz server might be the same thing as the resource server.</p>



<a name="153815074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815074">(Mar 11 2016 at 03:31)</a>:</h4>
<p>I think these patterns would be useful to include in the guide</p>



<a name="153815075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815075">(Mar 11 2016 at 03:31)</a>:</h4>
<p>otherwise it leave people wondering...</p>



<a name="153815083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815083">(Mar 11 2016 at 04:17)</a>:</h4>
<p>could help, yes </p>



<a name="153815089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815089">(Mar 11 2016 at 04:30)</a>:</h4>
<p>Could go in our "be at practices for EHRs" page - would that be helpful? Somewhere else you'd expect to see it? </p>



<a name="153815090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815090">(Mar 11 2016 at 04:34)</a>:</h4>
<p>Not sure why you wouldn't have something in the Authorisation Guide page, but perhaps it is just a reference and link to more details in the Backend service page?</p>



<a name="153815095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815095">(Mar 11 2016 at 05:10)</a>:</h4>
<p>It's not about "backend services" for sure, since those have no launch id or context. </p>



<a name="153815097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815097">(Mar 11 2016 at 05:12)</a>:</h4>
<p>As for the authorization guide, I don't think this kind of list of patterns is a good fit, since it's not part of the authorization protocol we specify. We do have a server tutorial where it could fit. Or those best practices... </p>



<a name="153815107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Heath Frankel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815107">(Mar 11 2016 at 06:15)</a>:</h4>
<p>OK, I see now that the backend services is a different profile for a different use case.</p>



<a name="153815238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/selecting%20a%20patient/near/153815238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/selecting.20a.20patient.html#153815238">(Mar 11 2016 at 18:00)</a>:</h4>
<p>Im with Josh that this backend magic should need to be exposed to the app writer... except that it does need to be informatively explained so that they have confidence. This is what we did in IHE-IUA, and even there it wasn't yet well enough explained. I do like the KISS focus.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
