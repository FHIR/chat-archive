---
layout: page
title: "FHIR Chat  · SMART Scopes to authorise a client, a user or both? · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Scopes.20to.20authorise.20a.20client.2C.20a.20user.20or.20both.3F.html">SMART Scopes to authorise a client, a user or both?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="168142849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Scopes%20to%20authorise%20a%20client%2C%20a%20user%20or%20both%3F/near/168142849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Hatherly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Scopes.20to.20authorise.20a.20client.2C.20a.20user.20or.20both.3F.html#168142849">(Jun 14 2019 at 15:05)</a>:</h4>
<p>Apologies if this is a daft question, but I'd always assumed that a SMART on FHIR OAuth2 authorisation request was essentially requesting authorisation for a client (system) to access data for a user (e.g. a healthcare professional), and that the OAuth2 server should take account of both the client (system) and the user (roles, etc) in deciding which scopes to authorise. I've come across other OAuth2 discussions which suggest it should only be used to authorise scopes for a client, and any user permissions should be handled in the API rather than the OAuth2 endpoint - e.g. this thread: <a href="https://stackoverflow.com/questions/50267663/how-to-return-different-scopes-for-different-roles-in-identityserver-4/50270143" target="_blank" title="https://stackoverflow.com/questions/50267663/how-to-return-different-scopes-for-different-roles-in-identityserver-4/50270143">https://stackoverflow.com/questions/50267663/how-to-return-different-scopes-for-different-roles-in-identityserver-4/50270143</a><br>
Do you have a view on this?</p>



<a name="168143945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Scopes%20to%20authorise%20a%20client%2C%20a%20user%20or%20both%3F/near/168143945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Scopes.20to.20authorise.20a.20client.2C.20a.20user.20or.20both.3F.html#168143945">(Jun 14 2019 at 15:18)</a>:</h4>
<p>could be either.. this level is a 'systems design' decision made between the team working on the authorization server and the resource server.  Typically the decision is the combined app rights and user rights. But there is no reason why it can't be only app rights. Note that there is a third vector of patient-consent which could also be included, or left to the resource server.  The more decisions one includes in OAuth, the better separation of duties (authZ vs Resource-Server); but the more decisions made the harder to encode the permissions and residual obligations in the token/scope. So it is ultimately a systems design complexity tradeoff.</p>



<a name="168144085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Scopes%20to%20authorise%20a%20client%2C%20a%20user%20or%20both%3F/near/168144085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Hatherly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Scopes.20to.20authorise.20a.20client.2C.20a.20user.20or.20both.3F.html#168144085">(Jun 14 2019 at 15:20)</a>:</h4>
<p>ok, that makes sense. To I think the blanket statement in that stackoverflow post that OAuth2 scopes are only for client AuthZ and should not be used for user rights is incorrect - which is what I thought!</p>



<a name="168172425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Scopes%20to%20authorise%20a%20client%2C%20a%20user%20or%20both%3F/near/168172425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Scopes.20to.20authorise.20a.20client.2C.20a.20user.20or.20both.3F.html#168172425">(Jun 14 2019 at 21:17)</a>:</h4>
<p>well, you might want to read this: <a href="http://www.healthintersections.com.au/?p=2967" target="_blank" title="http://www.healthintersections.com.au/?p=2967">http://www.healthintersections.com.au/?p=2967</a></p>
<p>I don't think you can't use them for user rights... in fact, I do, in <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a>. But I can only do that because my server is not a real clinical system</p>



<a name="168313591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Scopes%20to%20authorise%20a%20client%2C%20a%20user%20or%20both%3F/near/168313591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Scopes.20to.20authorise.20a.20client.2C.20a.20user.20or.20both.3F.html#168313591">(Jun 17 2019 at 14:12)</a>:</h4>
<p>I think the primary requirement is that, once the API is called, both the user and the app rights are enforced. The spec leaves it to the implementer to determine how that is done.</p>



<a name="168412044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Scopes%20to%20authorise%20a%20client%2C%20a%20user%20or%20both%3F/near/168412044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Hatherly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Scopes.20to.20authorise.20a.20client.2C.20a.20user.20or.20both.3F.html#168412044">(Jun 18 2019 at 15:27)</a>:</h4>
<p>Thanks all. I agree with the scope questions on the page you posted <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - they are things I've grappled with in the past also. I'll have a think and maybe make some suggestions on the scopes thread if I come up with any ideas.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
