---
layout: page
title: "FHIR Chat  · userinfo/fhirUser/profile · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/userinfo.2FfhirUser.2Fprofile.html">userinfo/fhirUser/profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="198832891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/userinfo/fhirUser/profile/near/198832891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/userinfo.2FfhirUser.2Fprofile.html#198832891">(May 26 2020 at 23:08)</a>:</h4>
<p>I'm using <a href="https://launch.smarthealthit.org/">https://launch.smarthealthit.org/</a> to test my smart-on-fhir (client) implementation. I'm requesting scopes for "launch,openid,profile" and successfully getting an access token... However, my access token does not include any claims related to the user's profile. I would expect that to be the case based on Smart's spec saying:<br>
<code>Claims: The EHR SHALL support the inclusion of SMART’s fhirUser claim within the id_token issued for any requests that grant the openid and fhirUser scopes. Some EHRs may use the profile claim as an alias for fhirUser, and to preserve compatibility, these EHRs should continue to support this claim during a deprecation phase.</code><br>
Any idea why the access token being returned does not include the claims related to the user's info like described above?<br>
In fact... I'm getting <em>very few</em> claims in the access token:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;need_patient_banner&quot;: false,
  &quot;smart_style_url&quot;: &quot;https://launch.smarthealthit.org/smart-style.json&quot;,
  &quot;token_type&quot;: &quot;bearer&quot;,
  &quot;scope&quot;: &quot;openid launch,openid,profile&quot;,
  &quot;client_id&quot;: &quot;&quot;,
  &quot;expires_in&quot;: 3600,
  &quot;iat&quot;: 1590534137,
  &quot;exp&quot;: 1590537737
}
</code></pre></div>



<a name="198834045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/userinfo/fhirUser/profile/near/198834045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/userinfo.2FfhirUser.2Fprofile.html#198834045">(May 26 2020 at 23:27)</a>:</h4>
<p>You should use spaces to separate scopes in your requests. Otherwise the server sees it  as one single scope "launch,openid,profile" and not three different ones. Since it is a demo server, it will grant you any scope you request. In other words, it doesn't know what "launch,openid,profile" is, but it assumes it is some unknown scope and you get it back as is.</p>



<a name="198834889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/userinfo/fhirUser/profile/near/198834889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/userinfo.2FfhirUser.2Fprofile.html#198834889">(May 26 2020 at 23:38)</a>:</h4>
<p><span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span> see my thread on "scope delimination"</p>



<a name="198834916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/userinfo/fhirUser/profile/near/198834916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/userinfo.2FfhirUser.2Fprofile.html#198834916">(May 26 2020 at 23:38)</a>:</h4>
<p>I agree with your assessment, generally.. but the behavior seems wrong when I ask for space-delimited scopes</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
