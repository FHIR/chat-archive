---
layout: page
title: "FHIR Chat  · Do you support PKCE in your OAuth2 server? · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html">Do you support PKCE in your OAuth2 server?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="214882736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/214882736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#214882736">(Oct 28 2020 at 18:58)</a>:</h4>
<p>Hey Guys -- <a href="https://github.com/HL7/smart-app-launch/pull/318">this PR</a> suggests adding support for PKCE in SMART. Would it be reasonable to require SMART servers to support PKCE?</p>



<a name="214900296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/214900296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#214900296">(Oct 28 2020 at 21:31)</a>:</h4>
<p>Our server supports PKCE, our client does not (secrets are handled server-side, never by the client app, so that seems OK)</p>



<a name="214902106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/214902106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#214902106">(Oct 28 2020 at 21:50)</a>:</h4>
<p>Thanks Michele. I was thinking of trying to tie a client requirement to it's use of redirect uri protocols other than http(s),  which I think is both reasonable and targeted. The big question is should all SMART servers be required to support PKCE ...</p>



<a name="214902564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/214902564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#214902564">(Oct 28 2020 at 21:55)</a>:</h4>
<blockquote>
<p>redirect uri protocols other than http(s),</p>
</blockquote>
<p>Apps can use universal links, resulting in http(s) redirect even if they go to an app and not a server</p>



<a name="214902658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/214902658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#214902658">(Oct 28 2020 at 21:56)</a>:</h4>
<p>Actually apps _have_ to use universal links because registrations with non-https redirect are rejected</p>



<a name="214902818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/214902818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#214902818">(Oct 28 2020 at 21:58)</a>:</h4>
<p>exactly. PKCE support allow secure non-https redirect urls and apps that are already making use of univeral/app/uri handlers don't need PKCE.</p>



<a name="214963840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/214963840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#214963840">(Oct 29 2020 at 13:12)</a>:</h4>
<p>PKCE was designed for apps, maybe it could be SHALL for them and SHOULD for EHR?</p>



<a name="214983449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/214983449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#214983449">(Oct 29 2020 at 15:31)</a>:</h4>
<p><span class="user-mention" data-user-id="192587">@David Pyke</span> An app can't use PKCE if the EHR doesn't support it. Are you saying EHRs would decide whether to support PKCE, and <em>if</em> a specific EHR supports it, then apps must use it?</p>



<a name="214983548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/214983548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#214983548">(Oct 29 2020 at 15:32)</a>:</h4>
<p>Yes, sorry.  I should have phrased that better</p>



<a name="214986489"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/214986489" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#214986489">(Oct 29 2020 at 15:50)</a>:</h4>
<blockquote>
<p>and if a specific EHR supports it, then apps must use it</p>
</blockquote>
<p>Please no</p>



<a name="214986948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/214986948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#214986948">(Oct 29 2020 at 15:53)</a>:</h4>
<p>:-) Yeah, I agree this would be problematic <span class="user-mention" data-user-id="191912">@Michele Mottini</span>. (At this stage, just trying to understand people's perspectives.)</p>



<a name="215003984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/215003984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#215003984">(Oct 29 2020 at 17:51)</a>:</h4>
<p>Agree PKCE is not necessary if universal links are used. Should we suggest tying a SHOULD for apps that use non-https redirects, if the EHR supports it?</p>



<a name="219229698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/219229698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#219229698">(Dec 08 2020 at 16:40)</a>:</h4>
<p>For tomorrow's Argonaut call <span class="user-mention" data-user-id="191864">@Isaac Vetter</span> please note that I've applied a few updates to your PKCE PR at <a href="https://github.com/HL7/smart-app-launch/pull/318/commits/7302a50ced30840749cdb4d15a7ebf8c40e00b87">https://github.com/HL7/smart-app-launch/pull/318/commits/7302a50ced30840749cdb4d15a7ebf8c40e00b87</a> -- this accounts for our discussion from last time. If you have a chance to review and share any notes ahead of time, that'd be great.</p>



<a name="219356031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/219356031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#219356031">(Dec 09 2020 at 15:58)</a>:</h4>
<p>Looks good to me!</p>



<a name="219380872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Do%20you%20support%20PKCE%20in%20your%20OAuth2%20server%3F/near/219380872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Do.20you.20support.20PKCE.20in.20your.20OAuth2.20server.3F.html#219380872">(Dec 09 2020 at 18:53)</a>:</h4>
<p>&lt;retracted&gt;</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
