---
layout: page
title: "FHIR Chat  · flat-file export format · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html">flat-file export format</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153902661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153902661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Teirney <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153902661">(Aug 16 2017 at 21:27)</a>:</h4>
<p>Is there more information about what the flat-file export format might be relevant to <a href="http://docs.smarthealthit.org/flat-fhir/" target="_blank" title="http://docs.smarthealthit.org/flat-fhir/">http://docs.smarthealthit.org/flat-fhir/</a>?</p>
<p>We've started using NDJSON formatted content for a number of our bulk export formats (<a href="http://ndjson.org/" target="_blank" title="http://ndjson.org/">http://ndjson.org/</a>), the same as what Elastic Search uses so we can actually stream out the data from the system without any significant memory burden on our servers.</p>
<p>Where would we comment on what the export format might end up being?</p>



<a name="153902694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153902694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153902694">(Aug 17 2017 at 13:13)</a>:</h4>
<p>I was initially thinking of FHIR bundles as the output format, but agree that newline delimited JSON seems like a better fit for large datasets. In general, we  should probably use github issues to manage changes to the spec, but since it's at such an early stage I went ahead and just updated the proposal.</p>



<a name="153902723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153902723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153902723">(Aug 17 2017 at 21:06)</a>:</h4>
<p>So right now, it's just a proposal (the export part I mean?) It's just that it's inclusion in an RFI would suggest that it's a bit more mature than that...</p>



<a name="153902761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153902761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153902761">(Aug 18 2017 at 13:11)</a>:</h4>
<p>Yup, just a proposal and not very mature. Also, to clarify, it's not in the published model RFP language, just in the optional add-on functionality section in the draft langauge we posted for comment as a possible method of specifying bulk data export. That said, any thoughts on the best way to make it more clear on the flat fhir page that it's still a very early stage proposal?</p>



<a name="153902822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153902822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153902822">(Aug 18 2017 at 23:25)</a>:</h4>
<p>using ndjson doesn't begin to cover the kind of use cases we have been talking about</p>



<a name="153902871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153902871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153902871">(Aug 19 2017 at 18:57)</a>:</h4>
<p>Interesting - what's an example of such a use case?</p>



<a name="153902942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153902942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153902942">(Aug 21 2017 at 06:43)</a>:</h4>
<p>see the analytics on FHIR stream, and look for mention of Parquet</p>



<a name="153903012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153903012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153903012">(Aug 21 2017 at 16:30)</a>:</h4>
<p>On flat file export: it might still be helpful to think about patient-oriented exports that leverage <code>$everything</code> (which could mean newline-delimited JSON where each line is a whole patient-specific $everything bundle)</p>



<a name="153903613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153903613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153903613">(Aug 24 2017 at 19:58)</a>:</h4>
<p>Thanks Grahame - so the use case is to have the data in a format that can be used natively in the Hadoop ecosystem? I don't have big data experience, so this may be a naive question, but how critical is this relative to exporting in ndjson and converting for use in Hadoop? It seems like going directly to a binary format like Parqet will complicate things on the FHIR server side (which can already serialize json), and preclude a bunch of other use cases (like easily loading a small or mid-sized dataset into mysql).</p>



<a name="153903614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153903614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153903614">(Aug 24 2017 at 20:03)</a>:</h4>
<p>That’s a good point Josh. One file per patient has the nice property of making it simple to filter patients and only ETL a subset, though it may result in a lot of files with just a few resources in each for a nightly update. As you pointed out, in either case, the ndjson format would work and has the nice property of being parallelizable in both the generation and ETL stages.</p>



<a name="153903624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153903624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153903624">(Aug 24 2017 at 21:10)</a>:</h4>
<p>that's not a definition of parallelizable I'm familiar with</p>



<a name="153903625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153903625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153903625">(Aug 24 2017 at 21:11)</a>:</h4>
<p>I don't think hadoop itself is a requirement, but the approach should be scalable.  to me, ndjson isn't really - you still need to parse json</p>



<a name="153903629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153903629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gottlieb <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153903629">(Aug 24 2017 at 21:43)</a>:</h4>
<p>Why isn't parsing json scalable? A binary format would be smaller and faster, but json has the benefit of simplicity. Is the performance penalty really too big to use it as an intermediate data format?</p>



<a name="153903630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/flat-file%20export%20format/near/153903630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/flat-file.20export.20format.html#153903630">(Aug 24 2017 at 21:45)</a>:</h4>
<p>it's certainly simpler. But there's no answer to the second question - the only way to find out is to try in a variety of contexts</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
