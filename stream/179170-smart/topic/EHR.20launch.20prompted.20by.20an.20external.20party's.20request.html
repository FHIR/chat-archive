---
layout: page
title: "FHIR Chat  · EHR launch prompted by an external party&#x27;s request · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/EHR.20launch.20prompted.20by.20an.20external.20party&#x27;s.20request.html">EHR launch prompted by an external party&#x27;s request</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="211534941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/EHR%20launch%20prompted%20by%20an%20external%20party%27s%20request/near/211534941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank McKinney <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/EHR.20launch.20prompted.20by.20an.20external.20party&#x27;s.20request.html#211534941">(Sep 28 2020 at 19:00)</a>:</h4>
<p>Hi. I’m looking for guidance on launching a SMART app from an EHR, prompted by a request communicated from an external system. This would happen after a patient encounter, maybe hours or days later. I spent some time googling IGs and searching <a href="http://chat.fhir.org">chat.fhir.org</a> and didn’t find models matching our use case, so I thought I’d reach out to folks for feedback on the approach below.</p>
<p>In our use case…</p>
<ul>
<li>a doctor sends a prescription from her EHR to a specialty pharmacy</li>
<li>the pharmacy gets the prescription and determines that it needs to ask the prescriber’s office a question (e.g., a clarification on an aspect of the prescription)</li>
<li>the pharmacy needs to notify clinic staff and ask them to answer the question</li>
<li>the clinic user gets notified, launches the pharmacy’s SMART app, get’s brought to the right question for the patient/prescription, and provides an answer </li>
</ul>
<p>My main question areas… </p>
<ul>
<li>best way to notify clinic staff to launch the SMART app from the EHR and answer the questions</li>
<li>best way to convey a unique identifier for the particular question(s) to be answered… to be used during SMART launch so the app can pull up the right questions. In the approach below, the pharmacy sends this identifier in the Task to the EHR, and it is then sent in the “intent” launch context parameter back to the app</li>
</ul>
<p>Strawman approach:</p>
<ul>
<li>while working the prescription, pharmacy staff captures their questions in the pharmacy’s SMART app. The app associates the questions with an “initiation id” that can be used later to pull them up</li>
<li>the pharmacy system exchanges a Task resource with the EHR, asking it to create a staff work queue item to launch the pharmacy’s app and answer the questions. Included in the Task are: identification of the SMART app, the patient ID and the “initiation ID” for pulling up the questions</li>
<li>when the clinic user takes action on the notification, the EHR…<ul>
<li>launches the SMART App</li>
<li>sets a session launch context using the patient ID it received in the Task</li>
<li>includes the “initiation ID” in the “intent” launch context parameter… which the SMART app will use to pull up the right patient/medication questions. (I'm proposing  the intent parameter here because I don't see another option...)</li>
</ul>
</li>
</ul>
<p>Is this a reasonable approach? Or is there an existing convention that folks could point me to that accomplishes the same thing but in a different way? I’d appreciate any input.<br>
Thanks! <br>
(sorry this got kind of long)</p>



<a name="211535873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/EHR%20launch%20prompted%20by%20an%20external%20party%27s%20request/near/211535873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/EHR.20launch.20prompted.20by.20an.20external.20party&#x27;s.20request.html#211535873">(Sep 28 2020 at 19:08)</a>:</h4>
<p>Frank, in truth, I'd say that these more complex workflows are still being figured out and there aren't yet strong patterns for them. A Task containing a link to a SMART app makes sense to me. CDS Hooks defines an <code>appContext</code> SMART launch parameter which is used in a similar way to your proposed use of intent, but it wouldn't make sense for the CPOE/EHR system to always ask the pharmacy if a prescription needs more information.</p>



<a name="211535937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/EHR%20launch%20prompted%20by%20an%20external%20party%27s%20request/near/211535937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/EHR.20launch.20prompted.20by.20an.20external.20party&#x27;s.20request.html#211535937">(Sep 28 2020 at 19:08)</a>:</h4>
<p>Personally, I think it's very reasonable for an IG to define it's own "SMART launch context parameters", with their own meaning.</p>



<a name="211650925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/EHR%20launch%20prompted%20by%20an%20external%20party%27s%20request/near/211650925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank McKinney <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/EHR.20launch.20prompted.20by.20an.20external.20party&#x27;s.20request.html#211650925">(Sep 29 2020 at 16:59)</a>:</h4>
<p>Thanks for your input, Isaac. Appreciate it<br>
We'll write up this approach with some more detail in the Specialty Rx IG... and will reach out for thoughts on the more concrete description.</p>



<a name="211785651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/EHR%20launch%20prompted%20by%20an%20external%20party%27s%20request/near/211785651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/EHR.20launch.20prompted.20by.20an.20external.20party&#x27;s.20request.html#211785651">(Sep 30 2020 at 16:23)</a>:</h4>
<p>agreed that IG-specific params are a good balance here. (They key aspect of <code>appContext</code> is that values are created and consume by the app, and are <em>opaque</em> to the EHR, which just manages the state of passing them around; it'd be good to avoid using <code>appContext</code> in a way that violated this basic premise.)</p>



<a name="213489664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/EHR%20launch%20prompted%20by%20an%20external%20party%27s%20request/near/213489664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank McKinney <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/EHR.20launch.20prompted.20by.20an.20external.20party&#x27;s.20request.html#213489664">(Oct 15 2020 at 21:22)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191864">@Isaac Vetter</span> , <span class="user-mention" data-user-id="191315">@Josh Mandel</span> . I drafted an approach for prompting the launch/use of a SMART app by submitting a Task to the EHR... like we discussed above. Based on your suggestion, the process passes a context value into the EHR in the Task that's then included in the SMART launch in the <code>appContext</code> parameter. <br>
If you'd have a chance to take a closer look at what I've put together, and let me know if I'm on the right track, that would be great. </p>
<ul>
<li><a href="http://build.fhir.org/ig/HL7/fhir-specialty-rx/branches/master/human-interaction.html">Here's a page</a> from the IG I'm working on that overviews the process and talks about the key Task content and how it's used in the app launch</li>
<li><a href="http://build.fhir.org/ig/HL7/fhir-specialty-rx/branches/master/StructureDefinition-specialty-rx-task-smart-launch.html">This is the Task profile</a></li>
<li>and <a href="http://build.fhir.org/ig/HL7/fhir-specialty-rx/branches/master/Task-specialty-rx-task-smart-launch-1.html">here's an example Task</a></li>
</ul>
<p>Any thoughts will be appreciated!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
