---
layout: page
title: "FHIR Chat  · should a launch fail if `launch/encounter` can&#x27;t be met? · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html">should a launch fail if `launch/encounter` can&#x27;t be met?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="210938525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/210938525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#210938525">(Sep 22 2020 at 22:19)</a>:</h4>
<p>For example, if a user declines to select an encounter during the authorization process, should the AS return an error to the app's redirect_uri? Or rather, should the AS treat the authorization as successful and return an access token without an encounter value?</p>



<a name="211002590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211002590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211002590">(Sep 23 2020 at 13:31)</a>:</h4>
<p>I don't know what the correct answer here is, but I was wondering if there is precedent in OpenID Connect if the user authorizes some things but not authentication information (the <code>openid</code> scope).  Consider the whole authorization request as an error or just don't return <code>id_token</code>?  It seems like a similar situation.</p>



<a name="211006334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211006334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211006334">(Sep 23 2020 at 13:56)</a>:</h4>
<p>Specifically for encounter: I think it makes sense to proceed, since none of our authorization logic is tied to the encounter. In other words, proceeding without selecting an encounter will not result in broader. So it seems reasonable to complete the process and allow the app to work with what it's got. (Note that for the patient launch context parameter, the situation could be different -- if the app is requesting <code>patient/</code> scopes, then it does not make sense to complete the launch if no patient context has been established.)</p>



<a name="211006720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211006720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211006720">(Sep 23 2020 at 13:59)</a>:</h4>
<p>The general principle here is to think about scopes as independent and allow a launch to succeed or fail on with any approved subset -- but we have a couple of places like {<code>launch/patient</code> context scope ::  <code>patient/Whatever.read</code> access scope} where the logical dependency prevents these things from being approved totally independently.</p>



<a name="211013735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211013735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211013735">(Sep 23 2020 at 14:46)</a>:</h4>
<p>I think we clarified this a bit on the recent PR into SMART... was going to look at the laanguage again</p>



<a name="211013790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211013790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211013790">(Sep 23 2020 at 14:47)</a>:</h4>
<p>sometimes "launch/encounter" is a "hint" and I would definitely not expect that to fail (during "launch from EHR")</p>



<a name="211014116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211014116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211014116">(Sep 23 2020 at 14:49)</a>:</h4>
<p>language <span class="user-mention" data-user-id="191864">@Isaac Vetter</span>  and let me know if we want to clarify more: "The application could choose to also provide <code>launch/patient</code> and/or <code>launch/encounter</code> as "hints" regarding which contexts the app would like the EHR to gather. The EHR MAY ignore these hints (for example, if the user is in a workflow where these contexts do not exist).</p>
<p>If an application requests a clinical scope which is restricted to a single patient (e.g. <code>patient/*.read</code>), and the authorization results in the EHR is granting that scope, the EHR SHALL establish a patient in context. The EHR MAY refuse authorization requests including <code>patient/</code> that do not also include a valid <code>launch</code>, or it MAY infer the <code>launch/patient</code> scope."</p>



<a name="211014152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211014152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211014152">(Sep 23 2020 at 14:49)</a>:</h4>
<p>I can infer what Josh recommended above from that text, but it doesn't flat out say it :)</p>



<a name="211033744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211033744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211033744">(Sep 23 2020 at 17:13)</a>:</h4>
<p>If you think what I wrote above provides additional clarity and is consistent with the current language, then it might be worth adding to our spec some excerpts from my post above. (I'm not sure if I'm in a good position to judge ;-))</p>



<a name="211153554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211153554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211153554">(Sep 24 2020 at 16:08)</a>:</h4>
<p>thanks, guys!</p>



<a name="211199771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211199771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211199771">(Sep 24 2020 at 22:56)</a>:</h4>
<p>I think adding it would be good.  Someone will have the question again in the future.</p>



<a name="211199846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211199846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211199846">(Sep 24 2020 at 22:57)</a>:</h4>
<p>And I like using Jenni's word "hint" for it.  Very intuitive.</p>



<a name="211204361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/should%20a%20launch%20fail%20if%20%60launch/encounter%60%20can%27t%20be%20met%3F/near/211204361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/should.20a.20launch.20fail.20if.20.60launch.2Fencounter.60.20can&#x27;t.20be.20met.3F.html#211204361">(Sep 24 2020 at 23:58)</a>:</h4>
<p>The "hint" language is already in there, from the most recent round!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
