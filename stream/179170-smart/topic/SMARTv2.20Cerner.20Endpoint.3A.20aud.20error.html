---
layout: page
title: "FHIR Chat  · SMARTv2 Cerner Endpoint: aud error · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html">SMARTv2 Cerner Endpoint: aud error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="222784160"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222784160" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222784160">(Jan 14 2021 at 21:07)</a>:</h4>
<p><span class="user-mention" data-user-id="195155">@Max Philips</span> when I try to authorize against the Cerner server I'm getting </p>
<blockquote>
<p>error_uri: <a href="https://authorization.cerner.com/errors/urn%3Acerner%3Aerror%3Aauthorization-server%3Asmart-v1%3Agrant%3Alaunch%3Aaudience-not-white-listed/instances/05d8b1bb-a7b4-44bf-a51f-db523d0aa55f?persona=patient&amp;client=aa95d23c-8a3c-4155-ac73-c5c4226f9ef2&amp;tenant=ec2458f2-1e24-41c8-b71b-0e701af7583d">https://authorization.cerner.com/errors/urn%3Acerner%3Aerror%3Aauthorization-server%3Asmart-v1%3Agrant%3Alaunch%3Aaudience-not-white-listed/instances/05d8b1bb-a7b4-44bf-a51f-db523d0aa55f?persona=patient&amp;client=aa95d23c-8a3c-4155-ac73-c5c4226f9ef2&amp;tenant=ec2458f2-1e24-41c8-b71b-0e701af7583d</a></p>
</blockquote>
<p>... but I'm passing along</p>
<div class="codehilite"><pre><span></span><code>aud=https%3A%2F%2Ffhir-myrecord.stagingcerner.com%2Fbeta%2Fec2458f2-1e24-41c8-b71b-0e701af7583d
</code></pre></div>



<a name="222784181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222784181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222784181">(Jan 14 2021 at 21:07)</a>:</h4>
<p>(I've also tried with a trailing <code>/</code> in my aud, same result.)</p>



<a name="222784188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222784188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222784188">(Jan 14 2021 at 21:07)</a>:</h4>
<p>Is this a known issue?</p>



<a name="222784591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222784591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222784591">(Jan 14 2021 at 21:10)</a>:</h4>
<p>this is not a known issue, let me check it out</p>



<a name="222786023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222786023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222786023">(Jan 14 2021 at 21:21)</a>:</h4>
<p>oopsie, looks like i didn't test this properly, that's the aud you'd expect to use. if you can customize that value an aud of https%3A%2F%2Ffhir-myrecord.cerner.com%2Fr4%2Fec2458f2-1e24-41c8-b71b-0e701af7583d should work at the moment but let me see if i can fix this up</p>



<a name="222786507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222786507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222786507">(Jan 14 2021 at 21:25)</a>:</h4>
<p>I see, one has <code>.stagingcerner.com</code> and the other has <code>cerner.com</code>. I can't easily decouple the FHIR server from the <code>aud</code> -- would be great if you can let me know when they're synced up.</p>



<a name="222786545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222786545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222786545">(Jan 14 2021 at 21:25)</a>:</h4>
<p>will do</p>



<a name="222786617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222786617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222786617">(Jan 14 2021 at 21:26)</a>:</h4>
<p>yeah and r4 vs beta - the aud that works now is Cerner's non-connectathon URL :)</p>



<a name="222788436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222788436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222788436">(Jan 14 2021 at 21:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> this should work now! no trailing slash is what i'm testing with</p>



<a name="222919148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222919148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222919148">(Jan 15 2021 at 20:17)</a>:</h4>
<p>I've made it as far as a login screen! I don't see the login details <a href="https://github.com/MaxPhilips/wgm_notes/blob/26/smart_v2/test_server_faq.md">in your GH doc</a> though <span class="user-mention" data-user-id="195155">@Max Philips</span> . How do I sign in?</p>



<a name="222920013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222920013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222920013">(Jan 15 2021 at 20:23)</a>:</h4>
<p>they should be in there - nancysmart / Cerner01</p>



<a name="222920590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222920590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222920590">(Jan 15 2021 at 20:27)</a>:</h4>
<p>Thanks! I missed these and searched for "user", "login", "password", etc and didn't find this :)</p>



<a name="222920713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222920713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222920713">(Jan 15 2021 at 20:28)</a>:</h4>
<p>i'll put some more conspicuous keywords near them :)</p>



<a name="222920775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222920775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222920775">(Jan 15 2021 at 20:29)</a>:</h4>
<p>Now I'm getting further, to <a href="/user_uploads/10155/ix0aZfFCN7SiW3JCbKF5JVpf/image.png">image.png</a>  but can't click "Allow Access"; cancel is my only option.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/ix0aZfFCN7SiW3JCbKF5JVpf/image.png" title="image.png"><img src="/user_uploads/10155/ix0aZfFCN7SiW3JCbKF5JVpf/image.png"></a></div>



<a name="222921112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222921112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222921112">(Jan 15 2021 at 20:31)</a>:</h4>
<p>Keith ran into this too - for Cerner's case we require that you request patient/Observation.read as well as the new scopes in order to give our non-connectathon auth server something to think about on that screen</p>



<a name="222921182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222921182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222921182">(Jan 15 2021 at 20:31)</a>:</h4>
<p>This was the case in sept too and I think Gino enhanced the <a href="http://smart.argo.run">smart.argo.run</a> client to allow other scopes to be requested</p>



<a name="222921228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222921228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222921228">(Jan 15 2021 at 20:31)</a>:</h4>
<p>Thanks!</p>



<a name="222921317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222921317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222921317">(Jan 15 2021 at 20:32)</a>:</h4>
<p>Yeah, I have extra checkboxes I can use (would be great if you can patch up this behavior at some point for consistency of testing)</p>



<a name="222921438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222921438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222921438">(Jan 15 2021 at 20:33)</a>:</h4>
<p>Looks like I can't do token introspection from the browser:</p>
<blockquote>
<p>Access to fetch at '<a href="https://authorization.cerner.com/tokeninfo">https://authorization.cerner.com/tokeninfo</a>' from origin '<a href="https://smart.argo.run">https://smart.argo.run</a>' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</p>
</blockquote>
<p>... is this intentional?</p>



<a name="222921539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222921539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222921539">(Jan 15 2021 at 20:34)</a>:</h4>
<p>huh, let me check that out</p>



<a name="222921703"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222921703" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222921703">(Jan 15 2021 at 20:35)</a>:</h4>
<p>And when I call token introspection outside the browser I get </p>
<div class="codehilite"><pre><span></span><code>{
  &quot;active&quot;: true,
  &quot;scope&quot;: &quot;openid profile patient/Observation.rs patient/Observation.read&quot;,
  &quot;client_id&quot;: &quot;aa95d23c-8a3c-4155-ac73-c5c4226f9ef2&quot;,
  &quot;tenant_id&quot;: &quot;ec2458f2-1e24-41c8-b71b-0e701af7583d&quot;
}
</code></pre></div>
<p>which is missing <code>patient</code> and <code>fhirUser</code>  and <code>sub</code> and <code>iss</code>.</p>



<a name="222922820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222922820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222922820">(Jan 15 2021 at 20:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span>  I had previously raised some concerns about fhiruser there as our auth system doesn't currently have that type of info available at that point</p>



<a name="222924449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222924449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222924449">(Jan 15 2021 at 20:59)</a>:</h4>
<p>OK; we tailored the language to reflect <code>SHALL</code> for <code>iss</code> and <code>sub</code>, and <code>SHOULD</code> for <code>fhirUser</code>. Are you still comfortable with those as the formal requirements?</p>



<a name="222928490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222928490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222928490">(Jan 15 2021 at 21:33)</a>:</h4>
<p>no luck on CORS for token introspection yet. can you link me to the documentation around those other claims?</p>



<a name="222930829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222930829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222930829">(Jan 15 2021 at 21:56)</a>:</h4>
<p>Docs at <a href="http://build.fhir.org/ig/HL7/smart-app-launch/token-introspection.html#conditional-fields-in-the-introspection-response">http://build.fhir.org/ig/HL7/smart-app-launch/token-introspection.html#conditional-fields-in-the-introspection-response</a></p>



<a name="222935893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/222935893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#222935893">(Jan 15 2021 at 22:38)</a>:</h4>
<p>I was having a lot of troubles getting past that first page but I see now you can go back up to the TOC</p>



<a name="223247750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223247750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223247750">(Jan 19 2021 at 16:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span>  What is the use case for a browser to call a token introspection endpoint? Usually the use case is for a server/service to make an access decision</p>



<a name="223257316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223257316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223257316">(Jan 19 2021 at 17:06)</a>:</h4>
<p>Agreed, re: the usual/most-important use case. For the connectathon the use case for a browser to call token introspection was just "we're writing a browser app to test a bunch of stuff".  Outside of testing, the main example I'd think about is explicit tracking of token expiration. You can always try using a token and see if it fails, but it's nice to have an explicit API to tell you whether it's valid, rather than needing to infer reasons for failure.</p>



<a name="223259786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223259786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223259786">(Jan 19 2021 at 17:21)</a>:</h4>
<p>I believe we tell users to use the OAuth 2 returned parameters for expiration and not to wait until failure</p>



<a name="223259861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223259861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223259861">(Jan 19 2021 at 17:21)</a>:</h4>
<p>We wouldn't recommend introspection for that (and there's nothing in the response that tells you it fails b/c it's expired)</p>



<a name="223259955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223259955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223259955">(Jan 19 2021 at 17:22)</a>:</h4>
<p>The url being used in the connectathon was our production endpoint - we wouldn't likely implement CORS there</p>



<a name="223260010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223260010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223260010">(Jan 19 2021 at 17:22)</a>:</h4>
<p>since it's not an endpoint we actually want browsers to call</p>



<a name="223260516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223260516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223260516">(Jan 19 2021 at 17:25)</a>:</h4>
<p>When you talk about using the return parameters you mean an expected duration? This is good but tokens can in general be expired sooner.</p>



<a name="223260615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223260615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223260615">(Jan 19 2021 at 17:26)</a>:</h4>
<p>in any case I don't think there's a deep need to have CORS support for this endpoint; just want to make sure this is a considered decision if you're going to omit it</p>



<a name="223260747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223260747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223260747">(Jan 19 2021 at 17:27)</a>:</h4>
<p>expires_in: <a href="https://tools.ietf.org/html/rfc6749#section-5.1">https://tools.ietf.org/html/rfc6749#section-5.1</a></p>



<a name="223260869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223260869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223260869">(Jan 19 2021 at 17:27)</a>:</h4>
<p>That is expected to be accurate</p>



<a name="223260878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223260878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223260878">(Jan 19 2021 at 17:27)</a>:</h4>
<p>if it's returned</p>



<a name="223260966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223260966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223260966">(Jan 19 2021 at 17:28)</a>:</h4>
<p>when you say they can "in general expire sooner" what do you mean?</p>



<a name="223260988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223260988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223260988">(Jan 19 2021 at 17:28)</a>:</h4>
<p>(and we're speaking access token, not refresh token)</p>



<a name="223261115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223261115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223261115">(Jan 19 2021 at 17:29)</a>:</h4>
<p>(and if it's not returned, servers are supposed to provide documentation or something else instead... but I'm curious what servers don't currently provide that today)</p>



<a name="223296579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223296579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223296579">(Jan 19 2021 at 21:21)</a>:</h4>
<blockquote>
<p>Jenni Syed: when you say they can "in general expire sooner" what do you mean?</p>
</blockquote>
<p>I just mean... a token I have that's intended to last 3600s might actually be invalidated by a server before 3600s is up.</p>



<a name="223304728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223304728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223304728">(Jan 19 2021 at 22:18)</a>:</h4>
<p>Ours doesn't work that way (our tokens are also much shorter lived). In systems that do longer lived tokens, usually tokens are invalidated not because they expire - ie, a refresh wouldn't fix it, it's because the auth itself was revoked either due to security or patient choice?</p>



<a name="223304751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223304751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223304751">(Jan 19 2021 at 22:18)</a>:</h4>
<p>IE: wouldn't the app need to go back through full auth again, not just a refresh?</p>



<a name="223305014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223305014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223305014">(Jan 19 2021 at 22:20)</a>:</h4>
<p>If we have someone asking for this use case, do we have something more concrete?</p>



<a name="223306600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223306600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223306600">(Jan 19 2021 at 22:34)</a>:</h4>
<p>As I said above, I don't think there's a deep need to have CORS support for the token introspection; I just wanted to make sure that this is a considered decision if you're omitting it.</p>



<a name="223306668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223306668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223306668">(Jan 19 2021 at 22:35)</a>:</h4>
<p>Yes, today I believe it's not a use case we would encourage nor expect based on current asks</p>



<a name="223306694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMARTv2%20Cerner%20Endpoint%3A%20aud%20error/near/223306694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMARTv2.20Cerner.20Endpoint.3A.20aud.20error.html#223306694">(Jan 19 2021 at 22:35)</a>:</h4>
<p>our introspection endpoint has been in prod for a while now :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
