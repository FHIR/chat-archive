---
layout: page
title: "FHIR Chat  · Expected Return is Scope violation · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Expected.20Return.20is.20Scope.20violation.html">Expected Return is Scope violation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153971075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Expected%20Return%20is%20Scope%20violation/near/153971075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Expected.20Return.20is.20Scope.20violation.html#153971075">(Jun 22 2018 at 10:19)</a>:</h4>
<p>If the request's scopes result in the request being denyed, what is the expected return? Is it a <code>403 Forbidden</code> and  should we return an OperationOutcome explaining why?</p>



<a name="153971076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Expected%20Return%20is%20Scope%20violation/near/153971076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Expected.20Return.20is.20Scope.20violation.html#153971076">(Jun 22 2018 at 10:34)</a>:</h4>
<p>Those options are not exclusive. You can include a response body with explanations but we did not mandate anything in that regard.</p>



<a name="153971206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Expected%20Return%20is%20Scope%20violation/near/153971206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Expected.20Return.20is.20Scope.20violation.html#153971206">(Jun 22 2018 at 15:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191391">@Angus Millar</span>  Is the denial happening in the authorization process?</p>



<a name="153971209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Expected%20Return%20is%20Scope%20violation/near/153971209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Expected.20Return.20is.20Scope.20violation.html#153971209">(Jun 22 2018 at 15:48)</a>:</h4>
<p>If so, it would follow OAuth 2 RFC: <a href="https://tools.ietf.org/html/rfc6749#section-4.1.2" target="_blank" title="https://tools.ietf.org/html/rfc6749#section-4.1.2">https://tools.ietf.org/html/rfc6749#section-4.1.2</a></p>



<a name="153971215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Expected%20Return%20is%20Scope%20violation/near/153971215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Expected.20Return.20is.20Scope.20violation.html#153971215">(Jun 22 2018 at 15:53)</a>:</h4>
<p>If it's the resource server, you could also return error codes in the header (As Josh mentions, this is optional, and not called out as required by SMART either): <a href="https://tools.ietf.org/html/rfc6750#section-3.1" target="_blank" title="https://tools.ietf.org/html/rfc6750#section-3.1">https://tools.ietf.org/html/rfc6750#section-3.1</a> (and you could include operationOutcomes in the body as well</p>



<a name="153971342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Expected%20Return%20is%20Scope%20violation/near/153971342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Expected.20Return.20is.20Scope.20violation.html#153971342">(Jun 23 2018 at 02:56)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="191391">@Angus Millar</span>  Is the denial happening in the authorization process?</p>
</blockquote>
<p>No happening at scope validation, Thanks for the succinct references Jenni. <br>
Looks like I need to add a Http header <code>WWW-Authenticate: Bearer realm="Access to the development area",  error="insufficient_scope"</code> and I will include an OperationOutcome in the body, by choice.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
