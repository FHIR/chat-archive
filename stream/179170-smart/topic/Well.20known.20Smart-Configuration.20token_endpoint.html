---
layout: page
title: "FHIR Chat  · Well known Smart-Configuration token_endpoint · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Well.20known.20Smart-Configuration.20token_endpoint.html">Well known Smart-Configuration token_endpoint</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="249650909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Well%20known%20Smart-Configuration%20token_endpoint/near/249650909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sagar Shah <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Well.20known.20Smart-Configuration.20token_endpoint.html#249650909">(Aug 16 2021 at 21:35)</a>:</h4>
<p>We plan to use Ory Hydra Open ID Connect, which has authorize and token endpoint as per OIDC specs. But it does not follow smart protocol and does not return patient context in the access token response. To handle this we have created a proxy component on top of the Open ID provider and we publish this proxy's auth and token endpoint on /.well-known/smart-configuration FHIR api. This solves the problem and this gives the token with patient context as well in the response ( as handled in proxy)</p>
<p>What we recently came across is the need of token url could be used for backend services as well using jwks client assertions. We see a challenge here that signed assertion with proxy's token endpoint will always be invalidated by the underlying OpenID provider as audience claim in client assertion is not matching the actual OAuth token endpoint. Did anyone face similar issue before? What are the suggested ways to overcome this? Is it mandatory to prpovide token endpoint information on /.well-known/smart-configuration or can it be documented as different endpoint for authorization flow vs backend services flow?<br>
Please advise.</p>
<p>Regards,<br>
Sagar</p>



<a name="249652981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Well%20known%20Smart-Configuration%20token_endpoint/near/249652981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Well.20known.20Smart-Configuration.20token_endpoint.html#249652981">(Aug 16 2021 at 21:52)</a>:</h4>
<blockquote>
<p>Is it mandatory to prpovide token endpoint information on /.well-known/smart-configuration</p>
</blockquote>
<p>This is mandatory, relative to the FHIR Server base URL. Keep in mind that this file doesn't necessarily need to be hosted on  the same domain as your authorization server; it's relative to your FHIR server.</p>



<a name="249654063"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Well%20known%20Smart-Configuration%20token_endpoint/near/249654063" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sagar Shah <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Well.20known.20Smart-Configuration.20token_endpoint.html#249654063">(Aug 16 2021 at 22:02)</a>:</h4>
<p>Thanks for clarying it quick!</p>



<a name="249654392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Well%20known%20Smart-Configuration%20token_endpoint/near/249654392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sagar Shah <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Well.20known.20Smart-Configuration.20token_endpoint.html#249654392">(Aug 16 2021 at 22:06)</a>:</h4>
<p>We have hosted that on FHIR Server itself. but only issue we are facing here is with proxy's token endpoint being put in that smart config token endpoint instead of actual Auth token endpoint, We went this route challenge to support  returning the patient context in the access token response. It seems we need an alternative way to keep single token endpoint in place</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
