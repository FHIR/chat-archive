---
layout: page
title: "FHIR Chat  · include fhir server address in id token claims? · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/include.20fhir.20server.20address.20in.20id.20token.20claims.3F.html">include fhir server address in id token claims?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="198954632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/include%20fhir%20server%20address%20in%20id%20token%20claims%3F/near/198954632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/include.20fhir.20server.20address.20in.20id.20token.20claims.3F.html#198954632">(May 27 2020 at 21:17)</a>:</h4>
<p>Is it possible to return the FHIR server base url as a claim in the id_token?</p>



<a name="198962138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/include%20fhir%20server%20address%20in%20id%20token%20claims%3F/near/198962138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/include.20fhir.20server.20address.20in.20id.20token.20claims.3F.html#198962138">(May 27 2020 at 22:33)</a>:</h4>
<p>That behavior is something you currently get if a server uses an absolute URI for a fire user, but I think you're asking for a reliable way for a client to get this :-)</p>



<a name="198962868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/include%20fhir%20server%20address%20in%20id%20token%20claims%3F/near/198962868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/include.20fhir.20server.20address.20in.20id.20token.20claims.3F.html#198962868">(May 27 2020 at 22:43)</a>:</h4>
<p>usually the FHIR server would be known <em>before</em> the id_token since apps start at the FHIR server to discover the auth endpoint. Are you wanting it in the id_token for "storage" or for that id_token to be passed around with context?</p>



<a name="198962885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/include%20fhir%20server%20address%20in%20id%20token%20claims%3F/near/198962885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/include.20fhir.20server.20address.20in.20id.20token.20claims.3F.html#198962885">(May 27 2020 at 22:43)</a>:</h4>
<p>technically the id_token isn't tied to a specific FHIR server endpoint... it's tied to a specific auth endpoint (or issuer in the openId world...)</p>



<a name="198973191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/include%20fhir%20server%20address%20in%20id%20token%20claims%3F/near/198973191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/include.20fhir.20server.20address.20in.20id.20token.20claims.3F.html#198973191">(May 28 2020 at 01:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191356">@Jenni Syed</span> trying to pass it around with context</p>



<a name="198973284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/include%20fhir%20server%20address%20in%20id%20token%20claims%3F/near/198973284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/include.20fhir.20server.20address.20in.20id.20token.20claims.3F.html#198973284">(May 28 2020 at 01:13)</a>:</h4>
<p>the approach I took was to store the fhir server "iss" passed from the initial launch as part of the state when authenticating, and then pass the fhir server to my application server from the state. was hoping to get it from claims in the id_token... but, thinking about it, your comment about the fhir server not being known to the auth server makes sense. the fhir server is aware of the auth server, but not the other way around??</p>



<a name="198974890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/include%20fhir%20server%20address%20in%20id%20token%20claims%3F/near/198974890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/include.20fhir.20server.20address.20in.20id.20token.20claims.3F.html#198974890">(May 28 2020 at 01:42)</a>:</h4>
<p>Each needs to be aware of the other. The authorization server needs to be aware of the FHIR server to be able to validate the AUD parameter passed into the authorize endpoint...</p>



<a name="199037373"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/include%20fhir%20server%20address%20in%20id%20token%20claims%3F/near/199037373" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/include.20fhir.20server.20address.20in.20id.20token.20claims.3F.html#199037373">(May 28 2020 at 15:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> agreed, but technically the id token is a representation of the <em>user</em> authenticated and not the app/where that was authenticated to. In our system, we have multiple FHIR servers that the id token could be valid for, though we choose one for the profile URL itself. EG: different FHIR version implementations</p>



<a name="199037470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/include%20fhir%20server%20address%20in%20id%20token%20claims%3F/near/199037470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/include.20fhir.20server.20address.20in.20id.20token.20claims.3F.html#199037470">(May 28 2020 at 15:22)</a>:</h4>
<p>We have apps today that run against both DSTU 2 and our R4 fhir instances</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
