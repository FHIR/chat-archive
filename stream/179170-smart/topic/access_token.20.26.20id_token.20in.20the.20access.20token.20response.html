---
layout: page
title: "FHIR Chat  · access_token &amp; id_token in the access token response · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/access_token.20.26.20id_token.20in.20the.20access.20token.20response.html">access_token &amp; id_token in the access token response</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="214490467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/access_token%20%26%20id_token%20in%20the%20access%20token%20response/near/214490467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sagar Shah <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/access_token.20.26.20id_token.20in.20the.20access.20token.20response.html#214490467">(Oct 25 2020 at 13:49)</a>:</h4>
<p><a href="/user_uploads/10155/wn4-fqIKgJWUumj2vUepHujP/image.png">image.png</a> <br>
Above image is from the SMART simulated app example, where when we decode access_token value from the access token response, we also find id_token within the access_token. Is that a requirement of OIDC or SMART on FHIR? OR is that not really required? In many of the OIDC implementations, I have seen that base64 decoded access_token value has a "sub" field that generally represents the user identifier.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/wn4-fqIKgJWUumj2vUepHujP/image.png" title="image.png"><img src="/user_uploads/10155/wn4-fqIKgJWUumj2vUepHujP/image.png"></a></div>



<a name="214506103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/access_token%20%26%20id_token%20in%20the%20access%20token%20response/near/214506103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/access_token.20.26.20id_token.20in.20the.20access.20token.20response.html#214506103">(Oct 25 2020 at 18:59)</a>:</h4>
<p>The access token format in smart is totally unspecified. Client applications should not rely on this as anything except an opaque value.</p>



<a name="214506187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/access_token%20%26%20id_token%20in%20the%20access%20token%20response/near/214506187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/access_token.20.26.20id_token.20in.20the.20access.20token.20response.html#214506187">(Oct 25 2020 at 19:00)</a>:</h4>
<p><a href="https://www.youtube.com/watch?v=X2lmbHAeOMg">https://www.youtube.com/watch?v=X2lmbHAeOMg</a> goes into some of the details here and talks a little bit about the design of our testing server, which stashes all kinds of information in the access token in order to remain stateless.</p>
<div class="youtube-video message_inline_image"><a data-id="X2lmbHAeOMg" href="https://www.youtube.com/watch?v=X2lmbHAeOMg"><img src="https://i.ytimg.com/vi/X2lmbHAeOMg/default.jpg"></a></div>



<a name="214516758"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/access_token%20%26%20id_token%20in%20the%20access%20token%20response/near/214516758" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sagar Shah <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/access_token.20.26.20id_token.20in.20the.20access.20token.20response.html#214516758">(Oct 25 2020 at 22:38)</a>:</h4>
<p>Thank you for clarifying. So considering that access token as an opaque value, client (3rd party App) is now able to hit API on behalf of patient or any provider user based on the scope available to the app, And all that access is made available or denied based on scope config and specific resource access. But where and how user permissions/access needs to be checked in this flow in an ideal scenario so that if the user himself does not have access to perform certain action, then the action gets denied</p>



<a name="214517880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/access_token%20%26%20id_token%20in%20the%20access%20token%20response/near/214517880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/access_token.20.26.20id_token.20in.20the.20access.20token.20response.html#214517880">(Oct 25 2020 at 23:04)</a>:</h4>
<p><em>that</em> is not something SMART tries to standardize, and indeed real-world policies can be incredibly complicated (e.g., to follow differing state regulations and so forth). SMART helps delegate a user's permissions to an app; but the user's permissions themselves must be defined and enforced by the system below this.</p>



<a name="214518472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/access_token%20%26%20id_token%20in%20the%20access%20token%20response/near/214518472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sagar Shah <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/access_token.20.26.20id_token.20in.20the.20access.20token.20response.html#214518472">(Oct 25 2020 at 23:18)</a>:</h4>
<p>Thanks for clarifications on this, <span class="user-mention" data-user-id="191315">@Josh Mandel</span> .</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
