---
layout: page
title: "FHIR Chat  · SMART Demo Apps - Bearer Token · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html">SMART Demo Apps - Bearer Token</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153862019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862019">(Dec 07 2016 at 22:18)</a>:</h4>
<p>So I've been monkeying around getting the SMART demo apps (Growth chart and BP Centiles) working against an OIC server and a FHIR server. </p>
<p>I've got the whole thing working well, with one exception: The apps do not send any <code>Authorization</code> header to the FHIR server when they make a request. They complete the OAuth2 code flow successfully and definitely receive a token, and they are definitely making approrpiate FHIR data requests, but with no auth header in them.</p>
<p>Are they able to send this header? Is there any config required to get them to do so?</p>



<a name="153862024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862024">(Dec 07 2016 at 22:22)</a>:</h4>
<p>The expectation is certainly that I can and should send  and authorization header containing a  OAuth Bearer token:-)</p>



<a name="153862025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862025">(Dec 07 2016 at 22:23)</a>:</h4>
<p>Does your fhir server have CORS  set to allow an authorization header?</p>



<a name="153862135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862135">(Dec 08 2016 at 03:13)</a>:</h4>
<p>It does.. But as far as I can see the app isn't actually requesting it in it's <code>Access-Control-Request-Headers</code> header.</p>
<p>Request</p>
<div class="codehilite"><pre>Accept:*/*
Access-Control-Request-Headers:content-type
Access-Control-Request-Method:GET
Connection:keep-alive
Host:cdr.simpatico.ai:8000
Origin:https://fhir-dstu2.smarthealthit.org
Referer:https://fhir-dstu2.smarthealthit.org/apps/growth-chart/
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.59 Safari/537.36
</pre></div>


<p>Response</p>
<div class="codehilite"><pre>Access-Control-Allow-Credentials:true
Access-Control-Allow-Headers:content-type
Access-Control-Allow-Methods:GET,POST,PUT,DELETE,HEAD,OPTIONS
Access-Control-Allow-Origin:https://fhir-dstu2.smarthealthit.org
Cache-Control:no-cache, no-store, max-age=0, must-revalidate
Content-Length:0
Date:Thu, 08 Dec 2016 03:10:20 GMT
Expires:0
Vary:Origin
</pre></div>



<a name="153862136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862136">(Dec 08 2016 at 03:16)</a>:</h4>
<p>Oh how strange. And it's successfully completing the OAuth process without any errors in the console? </p>



<a name="153862137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862137">(Dec 08 2016 at 03:17)</a>:</h4>
<p>I wonder whether <span class="user-mention" data-user-id="191496">@Nikolai Schwertner</span> has seen this behavior before (I can't say that I have). </p>



<a name="153862138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862138">(Dec 08 2016 at 03:18)</a>:</h4>
<p>Is it issuing an OPTIONS request first? </p>



<a name="153862142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862142">(Dec 08 2016 at 03:44)</a>:</h4>
<p>It is, yeah. Basically the same headers there too..</p>



<a name="153862145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862145">(Dec 08 2016 at 04:12)</a>:</h4>
<p>What exact headers does the OPTIONS request contain? </p>



<a name="153862258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862258">(Dec 08 2016 at 11:36)</a>:</h4>
<p><code>OPTIONS https://cdr.simpatico.ai:8000/Patient/118</code></p>
<p>Request headers:</p>
<div class="codehilite"><pre>Host: cdr.simpatico.ai:8000
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:50.0) Gecko/20100101 Firefox/50.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate, br
Access-Control-Request-Method: GET
Access-Control-Request-Headers: content-type
origin: https://fhir-dstu2.smarthealthit.org
Connection: keep-alive
</pre></div>


<p>Response headers:</p>
<div class="codehilite"><pre>Access-Control-Allow-Credentials: true
Access-Control-Allow-Headers: content-type
Access-Control-Allow-Methods: GET,POST,PUT,DELETE,HEAD,OPTIONS
Access-Control-Allow-Origin: https://fhir-dstu2.smarthealthit.org
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Content-Length: 0
Date: Thu, 08 Dec 2016 03:40:03 GMT
Expires: 0
Pragma: no-cache
Server: Jetty(9.3.10.v20160621)
Vary: Origin
X-Content-Type-Options: nosniff
X-Frame-Options: DENY
strict-transport-security: max-age=31536000 ; includeSubDomains
x-xss-protection: 1; mode=block
</pre></div>



<a name="153862279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862279">(Dec 08 2016 at 12:11)</a>:</h4>
<p>Fascinating. You should see:</p>
<p><strong>request</strong></p>
<div class="codehilite"><pre>Access-Control-Request-Headers: authorization, content-type
</pre></div>


<p><strong>response</strong></p>
<div class="codehilite"><pre>Access-Control-Allow-Headers: authorization, content-type
</pre></div>



<a name="153862286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862286">(Dec 08 2016 at 12:21)</a>:</h4>
<p>I'm wondering if you could share more details about how you're launching the app, and which params you're passing?</p>
<p>Following that, it might help to see the whole transcript (e.g. in Chrome Dev tools, via "Save HAR with Content")</p>



<a name="153862377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/SMART%20Demo%20Apps%20-%20Bearer%20Token/near/153862377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/SMART.20Demo.20Apps.20-.20Bearer.20Token.html#153862377">(Dec 08 2016 at 18:41)</a>:</h4>
<p>The Launch URL I've been using for testing is:<br>
<a href="https://fhir-dstu2.smarthealthit.org/apps/growth-chart/launch.html?iss=https://cdr.simpatico.ai:8000&amp;launch=wd9833&amp;patientId=118" target="_blank" title="https://fhir-dstu2.smarthealthit.org/apps/growth-chart/launch.html?iss=https://cdr.simpatico.ai:8000&amp;launch=wd9833&amp;patientId=118">https://fhir-dstu2.smarthealthit.org/apps/growth-chart/launch.html?iss=https://cdr.simpatico.ai:8000&amp;launch=wd9833&amp;patientId=118</a></p>
<p>Username/password "zulip" if you happen to want to try it. I'll grab a capture though.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
