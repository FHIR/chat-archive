---
layout: page
title: "FHIR Chat  · Dynamic Client Registration · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html">Dynamic Client Registration</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153909597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909597">(Sep 21 2017 at 04:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> I am getting around to looking at Dynamic Client Registration, which Smart App Launch and the back end services spec recommends that I use. It seems to me that there's a little more to say than 'just use it'. Specifically, what token_endpoint_auth_method values map to the 3 options made available by the Smart specs?</p>



<a name="153909781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909781">(Sep 21 2017 at 19:59)</a>:</h4>
<p>also, concerning 'iss', the backend services spec says "The service's issuer URI, as registered with the EHR's authorization server" - but dynamic client registration doesn't describe this, so we need a call out in the back end services spec to describe exactly how this works if we want it to work</p>



<a name="153909831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909831">(Sep 21 2017 at 22:58)</a>:</h4>
<p>I used "issuer" in the json for the registration request</p>



<a name="153909885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909885">(Sep 22 2017 at 11:43)</a>:</h4>
<p>so  I'm not sure about using Dynamic Auth. There's 3 different modes:</p>
<ul>
<li>Confidential Client</li>
<li>Public Client</li>
<li>Backend Services Client</li>
</ul>



<a name="153909886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909886">(Sep 22 2017 at 11:44)</a>:</h4>
<p>here's what I think the 3 registrations look like:</p>



<a name="153909887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909887">(Sep 22 2017 at 11:46)</a>:</h4>
<p>Confidential Client:</p>
<div class="codehilite"><pre><span></span>{
  &quot;client_name&quot; : &quot;{name}&quot;,
  &quot;redirect_uris&quot; : [&quot;{url}&quot;],
  &quot;client_secret_basic&quot; : &quot;client_secret_basic&quot;,
  &quot;grant_types&quot; : &quot;authorization_code&quot;,
  &quot;response_types&quot; : &quot;token&quot;
}
</pre></div>



<a name="153909888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909888">(Sep 22 2017 at 11:46)</a>:</h4>
<p>Public Client:</p>
<div class="codehilite"><pre><span></span>{
  &quot;client_name&quot; : &quot;{name}&quot;,
  &quot;redirect_uris&quot; : [&quot;{url}&quot;],
  &quot;client_secret_basic&quot; : &quot;client_secret_post&quot;,
  &quot;grant_types&quot; : &quot;authorization_code&quot;,
  &quot;response_types&quot; : &quot;token&quot;
}
</pre></div>



<a name="153909889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909889">(Sep 22 2017 at 11:47)</a>:</h4>
<p>Backend Services Client:</p>
<div class="codehilite"><pre><span></span>{
  &quot;client_name&quot; : &quot;{name}&quot;,
  &quot;issuer&quot; : &quot;{issuer}&quot;,
  &quot;jwks&quot; : {
    ...
  }
  &quot;client_secret_basic&quot; : &quot;client_secret_post&quot;,
  &quot;grant_types&quot; : &quot;client_credentials&quot;,
  &quot;response_types&quot; : &quot;token&quot;
}
</pre></div>



<a name="153909911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909911">(Sep 22 2017 at 13:36)</a>:</h4>
<blockquote>
<p>token_endpoint_auth_method</p>
</blockquote>
<ul>
<li>public clients: <code>none</code></li>
<li>confidential clients (symmetric secrets): <code>client_secret_basic</code></li>
<li>backend services asymmetric client: <code>private_key_jwt</code> (I suppose -- it seems to fit fine)</li>
</ul>



<a name="153909912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909912">(Sep 22 2017 at 13:38)</a>:</h4>
<p>Re: issuer, we could instead just have the client register a <code>jwks_uri</code> with the server (this <em>is</em> supported by dynreg), but it means that a server really doesn't have any use for the <code>issuer</code> property in the signed token.</p>



<a name="153909913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909913">(Sep 22 2017 at 13:39)</a>:</h4>
<blockquote>
<p>"client_secret_basic" : "client_secret_post",</p>
</blockquote>
<p>This looks like an error in your payload. I'd expect to see</p>
<p><code>"token_endpoint_auth_method": "client_secret_basic"</code></p>



<a name="153909914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909914">(Sep 22 2017 at 13:40)</a>:</h4>
<p>And, er... for the first two cases, <code>response_type</code> should be <code>code</code>.</p>



<a name="153909915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909915">(Sep 22 2017 at 13:40)</a>:</h4>
<p>(See <a href="https://tools.ietf.org/html/rfc7591#section-2.1" target="_blank" title="https://tools.ietf.org/html/rfc7591#section-2.1">OIDC dynreg Section 2.1</a>)</p>



<a name="153909971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909971">(Sep 22 2017 at 20:54)</a>:</h4>
<p>I don't follow the logic for response_type being different for the first 2 cases, since the actual response is the same in all 3 cases (except for no openid element)</p>



<a name="153909973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909973">(Sep 22 2017 at 20:55)</a>:</h4>
<p>I am very much against using jwks_uri for issuer because of this:</p>



<a name="153909975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909975">(Sep 22 2017 at 20:55)</a>:</h4>
<blockquote>
<p>The "jwks_uri" and "jwks" parameters MUST NOT both be present in the same request or response.</p>
</blockquote>



<a name="153909976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909976">(Sep 22 2017 at 20:56)</a>:</h4>
<blockquote>
<p>"client_secret_basic" : "client_secret_post"</p>
</blockquote>



<a name="153909977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909977">(Sep 22 2017 at 20:56)</a>:</h4>
<p>that was a s typo preparing my posts</p>



<a name="153909978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Dynamic%20Client%20Registration/near/153909978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Dynamic.20Client.20Registration.html#153909978">(Sep 22 2017 at 20:57)</a>:</h4>
<p>so I hope that this is enough to be convincing that we actually need to say this stuff in the spec</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
