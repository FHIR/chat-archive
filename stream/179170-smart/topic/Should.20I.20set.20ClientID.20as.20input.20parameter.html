---
layout: page
title: "FHIR Chat  · Should I set ClientID as input parameter · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html">Should I set ClientID as input parameter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="157536413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157536413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157536413">(Feb 04 2019 at 16:43)</a>:</h4>
<p>I am trying to setup one client to serve two Smart server. Because two servers provide two different clientIDs, my client need to pickup the correct clientID during the lanch process. I am thinking to add clientID into registered launch url. For example, the registered launch url looks like:</p>
<div class="codehilite"><pre><span></span>http://myserver.com/launch?clientID=1234
</pre></div>


<p>The actual launch request sent from SMART server would be:</p>
<div class="codehilite"><pre><span></span>http://myserver.com/launch?clientID=1234&amp;iss=smartserver.com
</pre></div>


<p>Technically, this should work. <br>
Is there any problem from SMART spec?</p>



<a name="157536940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157536940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157536940">(Feb 04 2019 at 16:50)</a>:</h4>
<p>The SMART EHR Launch specification provides an <code>iss</code> parameter that your app can you use to know which server is launching your app. The details of the client ID should be stored in your app itself, with the issuer parameter used by your app to perform a lookup.</p>



<a name="157536992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157536992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157536992">(Feb 04 2019 at 16:51)</a>:</h4>
<p>you should avoid adding a new URL parameter because if your app depends this new parameter it will be incompatible with existing servers</p>



<a name="157539961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157539961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157539961">(Feb 04 2019 at 17:32)</a>:</h4>
<blockquote>
<p>you should avoid adding a new URL parameter because if your app depends this new parameter it will be incompatible with existing servers</p>
</blockquote>
<p>This can be resolved by using value from clientID parameter if exists  otherwise use value from server config.</p>
<p>My most concern is  about this:</p>
<blockquote>
<p>The details of the client ID should be stored in your app itself, with the issuer parameter used by your app to perform a lookup</p>
</blockquote>
<p>What is the problem/drawback for exposing clientID? I first thought there were some security risks but anyone can get clientID by looking at the authorization request from launch page.<br>
I just don't know if I missed anything during my analysis.</p>



<a name="157541898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157541898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157541898">(Feb 04 2019 at 18:00)</a>:</h4>
<p>I don't see a security risk, but I don't understand what your goal would be in adding a new parameter like this. It will lead to poor compatibility of your app with the ecosystem, and on my assessment, it does not open up any new use cases beyond what you can accomplish simply by maintaining a map between issuer values and client ID values within your application.</p>



<a name="157541940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157541940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157541940">(Feb 04 2019 at 18:01)</a>:</h4>
<p>It's possible I have missed something about what you are trying to accomplish or the constraints that you are working with.</p>



<a name="157590950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157590950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157590950">(Feb 05 2019 at 08:32)</a>:</h4>
<p>And some servers may want you to have a secret with that client id?</p>



<a name="157612682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157612682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157612682">(Feb 05 2019 at 15:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> My client is a Angular client and it does not use client secret.<br>
<span class="user-mention" data-user-id="191315">@Josh Mandel</span> Here is my situation. I have an Angular app developed for one EHR and now I need to tune this app for second EHR. I have three options:<br>
1) Use separate servers. Each server has its own environment configuration.<br>
2) Use iss parameter to decide which server sends the request<br>
3) Add client ID to server registration.</p>



<a name="157612768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157612768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157612768">(Feb 05 2019 at 15:06)</a>:</h4>
<p>I'm not sure what you mean by (3).</p>



<a name="157613187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157613187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157613187">(Feb 05 2019 at 15:13)</a>:</h4>
<p>That is what I mentioned in my first post. For example, my client registered launch URL is <a href="http://myserver.com/launch" target="_blank" title="http://myserver.com/launch">http://myserver.com/launch</a>. I can add clientID as a url parameter to it and change the registered launch URL to <a href="http://myserver.com/launch?clientID=my-client-id" target="_blank" title="http://myserver.com/launch?clientID=my-client-id">http://myserver.com/launch?clientID=my-client-id</a>. When launched from SMARTserver, the request sending to <a href="http://myserver.com" target="_blank" title="http://myserver.com">myserver.com</a> would be <a href="http://myserver.com/launch?clientID=my-client-id&amp;iss=fhirserver.com" target="_blank" title="http://myserver.com/launch?clientID=my-client-id&amp;iss=fhirserver.com">http://myserver.com/launch?clientID=my-client-id&amp;iss=fhirserver.com</a></p>



<a name="157615423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157615423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157615423">(Feb 05 2019 at 15:41)</a>:</h4>
<p>What I'm confused about is that the client ID can be fully inferred (by the client), given the issuer value.</p>



<a name="157615436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157615436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157615436">(Feb 05 2019 at 15:41)</a>:</h4>
<p>Is there some reason this isn't true in your case?</p>



<a name="157621256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157621256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157621256">(Feb 05 2019 at 17:03)</a>:</h4>
<p>(deleted)</p>



<a name="157623454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157623454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157623454">(Feb 05 2019 at 17:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> When I check all my app registrations, I found that Cerner allows ONLY one pair of launch/redirect URLs per client registration. Since I have dev, qa, staging and prod servers, I have 4 client registrations on Cerner. So yes, one issuer could map to multiple client ids.</p>



<a name="157623751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/157623751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#157623751">(Feb 05 2019 at 17:36)</a>:</h4>
<p>Sure, but I think you're saying that your different environments have different redirect urls, which implies they are hosted at different locations. In this case, doesn't your production instance know that it is a production instance, and your development instance knows that it is a development since?</p>



<a name="246548093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/246548093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#246548093">(Jul 20 2021 at 06:03)</a>:</h4>
<p>Reading back through this again, and rechecking my understanding, is it the Auth server that allocates the Client ID, or does that "depend".<br>
The use case I'm struggling with is that will have thousands of on-prem PMS systems (primary care) that will be calling the smart app, (even if they are all the one vendor) and each one has their own issuer (the on prem server)...</p>



<a name="246583516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/246583516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#246583516">(Jul 20 2021 at 13:27)</a>:</h4>
<p>Servers assign client_ids. Of course, a server could have a strategy that reflects the job back onto the client (e.g., using a client domain name or client signed JWT as a client_id)-- but 1) that's pretty unusual, and 2) the server still is in charge, and needs to enforce whatever rules it sets</p>



<a name="246583968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Should%20I%20set%20ClientID%20as%20input%20parameter/near/246583968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Should.20I.20set.20ClientID.20as.20input.20parameter.html#246583968">(Jul 20 2021 at 13:31)</a>:</h4>
<p>You can make registration work at scale using a convention for client IDs (as long as clients use asymmetric auth), or using dynamic registration (if clients need a symmetric secret).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
