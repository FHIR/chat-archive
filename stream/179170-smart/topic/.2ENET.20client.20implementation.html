---
layout: page
title: "FHIR Chat  · .NET client implementation · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html">.NET client implementation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153860563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153860563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153860563">(Dec 05 2016 at 08:53)</a>:</h4>
<p>Have people implemented the SMART on FHIR launch with .NET client yet? Are there libraries available?</p>
<p>I know of <span class="user-mention" data-user-id="191328">@Ewout Kramer</span>'s <a href="http://ewoutkramer.github.io/fhir-net-api/docu-index.html" target="_blank" title="http://ewoutkramer.github.io/fhir-net-api/docu-index.html">http://ewoutkramer.github.io/fhir-net-api/docu-index.html</a>, but that does not seem to do OAuth or any of the other SMART stuff yet, right?</p>
<p>If I'd be interested in developing an open source implementation for SMART on FHIR with .NET, should I<br>
1) start a new project,<br>
2) extend fhir-net-api, or<br>
3) use some other project as a starting point?</p>
<p>Any thoughts?</p>



<a name="153860647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153860647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153860647">(Dec 05 2016 at 13:16)</a>:</h4>
<p>The dotnet client supports the authorization bearer however the other requests for the web calls are very dependent on the type of application you are writing (winforms, WPF, UWA...), and therefore how you can do the other parts of the OAuth web request need some form of browser based user interaction.</p>



<a name="153860648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153860648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153860648">(Dec 05 2016 at 13:17)</a>:</h4>
<p>If you're thinking about how you implement the server side, I'd highly recommend using the IdentityServer3 NuGet package and project to cover it.</p>



<a name="153860663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153860663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153860663">(Dec 05 2016 at 14:30)</a>:</h4>
<p>Thanks Brian! I'm currently just working on the client side. And yes, the flow requires some browser redirects. I would still be very happy with a .NET library that would, for instance, fetch the conformance statement and parse the security extensions (authLocation and tokenLocation) for me.<br>
I noticed IdentityServer3 has some client examples too at <a href="https://github.com/IdentityServer/IdentityServer3.Samples/tree/master/source/Clients" target="_blank" title="https://github.com/IdentityServer/IdentityServer3.Samples/tree/master/source/Clients">https://github.com/IdentityServer/IdentityServer3.Samples/tree/master/source/Clients</a>. Some of them might be good starting points for handling OAuth, but there are these SMART specific things too...</p>



<a name="153860671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153860671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153860671">(Dec 05 2016 at 14:51)</a>:</h4>
<p>FWIW, the <strong>Swift</strong> client does that and may give some ideas on how to approach it. Interesting bits happen in <code>Client</code>, <code>Server</code> and <code>Auth</code> (in <code>Sources/Client</code>): <a href="https://github.com/smart-on-fhir/Swift-SMART" target="_blank" title="https://github.com/smart-on-fhir/Swift-SMART">https://github.com/smart-on-fhir/Swift-SMART</a></p>
<p>The wiki mentions a few details:<br>
<a href="https://github.com/smart-on-fhir/Swift-SMART/wiki" target="_blank" title="https://github.com/smart-on-fhir/Swift-SMART/wiki">https://github.com/smart-on-fhir/Swift-SMART/wiki</a><br>
<a href="https://github.com/smart-on-fhir/Swift-SMART/wiki/Client" target="_blank" title="https://github.com/smart-on-fhir/Swift-SMART/wiki/Client">https://github.com/smart-on-fhir/Swift-SMART/wiki/Client</a></p>
<p>(Our <strong>Python</strong> client works similarly: <a href="https://github.com/smart-on-fhir/client-py" target="_blank" title="https://github.com/smart-on-fhir/client-py">https://github.com/smart-on-fhir/client-py</a>)</p>



<a name="153860750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153860750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153860750">(Dec 05 2016 at 17:15)</a>:</h4>
<p>Mikael, couldn't this be done by subclassing the Fhirclient and overriding the OnBeforeRequest and OnAfterResponse hooks?  And adding some kind of Authenticate() method as well?   If not, I'd be interested to see how we can change the client to make it more flexible...</p>



<a name="153860765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153860765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153860765">(Dec 05 2016 at 17:37)</a>:</h4>
<p>OAuth has multiple interaction and token types because there are different types of use. The OAuth method you use for a thin-browser application is not the one you use with a standalone-application, or a service-to-servce-client. The differences are important as they approach the environment that can be trusted, while protecting against the pathways that can't be trusted. You can use Bearer token while developing anything, but it is most likely the wrong token type to go into production.</p>



<a name="153860768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153860768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153860768">(Dec 05 2016 at 17:41)</a>:</h4>
<p>@Ewout, that's what we've done, in fact we didn't even subclass, we just hooked the events to perform the OAuth. This was for a service-to-service integration using the FhirClient.</p>



<a name="153861437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153861437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153861437">(Dec 07 2016 at 05:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span>, the way I see it, FhirClient is (and should be) a good tool for client-initiated communications with the server.</p>
<p>What I'm working on is the launch from the EHR. The library should, in my opinion,<br>
1) interpret the launch request<br>
2) fetch (and ideally, cache) the metadata from the calling EHR, parse authLocation and tokenLocation<br>
3) handle the OAuth flow (at least the authorization code flow), based on configuration given to it<br>
4) fetch (and ideally, cache) the public keys from the server<br>
5) decode and parse the JWT and other information from the token response<br>
5) make the information available for the application using the library.</p>



<a name="153861438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153861438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153861438">(Dec 07 2016 at 05:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> Interesting. So does your implementation support the SMART launch from the EHR? Is it fully proprietary, or is any part of it open source?</p>



<a name="153861442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153861442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153861442">(Dec 07 2016 at 05:35)</a>:</h4>
<p>The issue with this is how can the headless client ask the user to enter the details into a web page to perform the authentication?</p>



<a name="153861443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153861443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153861443">(Dec 07 2016 at 05:36)</a>:</h4>
<p>I do think we should add some routines to get at the SMART enpoint metadata though.</p>



<a name="153861444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153861444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mikael Rinnetmäki <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153861444">(Dec 07 2016 at 05:38)</a>:</h4>
<p>The use case I'm working on is not a headless client, rather the browser based flow, using redirects.</p>



<a name="153861686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153861686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153861686">(Dec 07 2016 at 12:35)</a>:</h4>
<p>It feels like most of this should be part of a new SMART component that _contains_ and uses the FhirClient, rather than extending this on top of the FHIR client. I am pretty sure others have done this already (seen the number of people asking me about the aforementioned hooks for authentication), so maybe there is indeed someone who could share their solution? Again, I would not mind adding this to the distribution.</p>



<a name="153861692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153861692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153861692">(Dec 07 2016 at 12:38)</a>:</h4>
<p>in the pascal client, I have the hooks, and a class that grabs the hooks for SMART on FHIR</p>



<a name="153861695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/.NET%20client%20implementation/near/153861695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/.2ENET.20client.20implementation.html#153861695">(Dec 07 2016 at 12:39)</a>:</h4>
<p>Right, an equivalent of that class (that grabs the books) is probably what we need to port then.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
