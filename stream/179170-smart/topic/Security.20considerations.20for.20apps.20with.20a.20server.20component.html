---
layout: page
title: "FHIR Chat  · Security considerations for apps with a server component · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Security.20considerations.20for.20apps.20with.20a.20server.20component.html">Security considerations for apps with a server component</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="276681129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Security%20considerations%20for%20apps%20with%20a%20server%20component/near/276681129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> adam strickland <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Security.20considerations.20for.20apps.20with.20a.20server.20component.html#276681129">(Mar 25 2022 at 21:31)</a>:</h4>
<p>I'm wondering if we should add more guidance to this <a href="http://www.hl7.org/fhir/smart-app-launch/best-practices.html#app-and-server-developers-should-consider-trade-offs-associated-with-confidential-vs-public-app-architectures">best practices</a> section on choosing an app architecture (public vs confidential).</p>
<p>My main concern is when an app that has both server and client components uses the public app profile, and specifically when they make their token endpoint request from their client-side.</p>
<p>For this discussion, I'm assuming the app has a server-component for a reason, and is looking to secure access to it through a SMART app launch.</p>



<a name="276681139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Security%20considerations%20for%20apps%20with%20a%20server%20component/near/276681139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> adam strickland <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Security.20considerations.20for.20apps.20with.20a.20server.20component.html#276681139">(Mar 25 2022 at 21:31)</a>:</h4>
<p>Broadly, I think there are 2 ways a server-based app COULD use the SMART spec.</p>



<a name="276681252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Security%20considerations%20for%20apps%20with%20a%20server%20component/near/276681252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> adam strickland <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Security.20considerations.20for.20apps.20with.20a.20server.20component.html#276681252">(Mar 25 2022 at 21:33)</a>:</h4>
<p>A. Server-Side Token Request:</p>
<ol>
<li>The client-side component sends the authorization code to it's server-side</li>
<li>The server-side component redeems the authorization code from the authz server</li>
<li>The authz server grants access (or not) to the server-side</li>
<li>The server-side component completes the initial request, granting a session token to the client-side<br>
<a href="/user_uploads/10155/q13Ade2nIJS5WWYfJnk2f-bd/oauth-session-Server-Good.drawio.png">oauth-session-Server-Good.drawio.png</a><div class="message_inline_image"><a href="/user_uploads/10155/q13Ade2nIJS5WWYfJnk2f-bd/oauth-session-Server-Good.drawio.png" title="oauth-session-Server-Good.drawio.png"><img src="/user_uploads/10155/q13Ade2nIJS5WWYfJnk2f-bd/oauth-session-Server-Good.drawio.png"></a></div></li>
</ol>



<a name="276681272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Security%20considerations%20for%20apps%20with%20a%20server%20component/near/276681272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> adam strickland <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Security.20considerations.20for.20apps.20with.20a.20server.20component.html#276681272">(Mar 25 2022 at 21:33)</a>:</h4>
<p>B. Client-Side Token Request:</p>
<ol>
<li>The client side redeems the authorization code from the authz server</li>
<li>The authz server grants access (or not) to the client-side</li>
<li>The client-side uses the output of the grant in some request to the server-side</li>
<li>The server-side grants a session token to the client-side based on that request<br>
<a href="/user_uploads/10155/Eo1eUwQduyfPnC0xiRXq62Fr/oauth-session-Server-Bad.drawio.png">oauth-session-Server-Bad.drawio.png</a><div class="message_inline_image"><a href="/user_uploads/10155/Eo1eUwQduyfPnC0xiRXq62Fr/oauth-session-Server-Bad.drawio.png" title="oauth-session-Server-Bad.drawio.png"><img src="/user_uploads/10155/Eo1eUwQduyfPnC0xiRXq62Fr/oauth-session-Server-Bad.drawio.png"></a></div></li>
</ol>



<a name="276681282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Security%20considerations%20for%20apps%20with%20a%20server%20component/near/276681282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> adam strickland <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Security.20considerations.20for.20apps.20with.20a.20server.20component.html#276681282">(Mar 25 2022 at 21:33)</a>:</h4>
<p>Is the second method fundamentally insecure? Are there any RFCs/OWASP best practices we could link out to? At the very least I think we should link out to the OWASP <a href="https://cheatsheetseries.owasp.org/cheatsheets/Session_Management_Cheat_Sheet.html">session management cheat sheet</a>, since at some point a server-side app will need to secure it's client-side.</p>



<a name="276681289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Security%20considerations%20for%20apps%20with%20a%20server%20component/near/276681289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> adam strickland <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Security.20considerations.20for.20apps.20with.20a.20server.20component.html#276681289">(Mar 25 2022 at 21:33)</a>:</h4>
<p>Wanted to note that I still think it's OK to send access tokens up to your client-side from the server, but that should be secured by having a session token in the first place.</p>



<a name="276690748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Security%20considerations%20for%20apps%20with%20a%20server%20component/near/276690748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Security.20considerations.20for.20apps.20with.20a.20server.20component.html#276690748">(Mar 25 2022 at 23:15)</a>:</h4>
<p>It would help to lay out some of the specific threats you are concerned about. Certainly in some situations it is fine to have an access token present in your client. The circumstances you're talking about in terms of session management in your second scenario seem very specific; I'm not sure we would have useful things to say but pointing to OWASP best practices sounds fine.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
