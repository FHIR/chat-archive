---
layout: page
title: "FHIR Chat  · Refresh tokens · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html">Refresh tokens</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="190090514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190090514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190090514">(Mar 09 2020 at 16:45)</a>:</h4>
<p>Looks like ONC's final rule doesn't give public clients the right to a refresh token -- this is a huge blow for pure-client-side apps like native mobile apps and HTML5/JS Web apps, and I'm frankly puzzled by it</p>
<p>FYI <span class="user-mention" data-user-id="191414">@Dan Gottlieb</span></p>



<a name="190112251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190112251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190112251">(Mar 09 2020 at 20:09)</a>:</h4>
<p>Does it deny their use?  Or simply not specify?  If the EHR vendor choses to implement, that would be allowed, I'd assume?  </p>
<p>Without the refresh tokens, it becomes a more transactional access model rather than a streaming 'always on' model.  And probably will drive solutions towards having a PHR store, like Apple Health Records.</p>



<a name="190114774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190114774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190114774">(Mar 09 2020 at 20:33)</a>:</h4>
<p>Overall, the rules just set a floor -- so nothing precludes use, but in real life, the regulatory floor is often as high as most parties climb.</p>



<a name="190114852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190114852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190114852">(Mar 09 2020 at 20:34)</a>:</h4>
<p>Re: forcing solutions towards a PHR store, yes that's true, but it creates an <em>uneven playing field</em> for PHR stores, if big/important PHR providers can negotiate for refresh tokens, and others can't.</p>



<a name="190138986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190138986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190138986">(Mar 10 2020 at 03:11)</a>:</h4>
<p>Are you sure? </p>
<blockquote>
<p>This includes the requirements finalized in §170.315(g)(10)(v)(A)(2)(i) that Health IT Modules presented for testing and certification must demonstrate that access is granted to patient data in accordance with the implementation specification adopted in § 170.215(a)(3) without requiring re-authorization and re-authentication when a valid refresh token is supplied by the application. It also includes the requirements finalized in § 170.315(g)(10)(v)(A)(2)(ii) that an application capable of storing a client secret must be issued a new refresh token valid for a new period of no less than three months.</p>
</blockquote>
<p><a href="https://www.healthit.gov/cerus/sites/cerus/files/2020-03/ONC_Cures_Act_Final_Rule_03092020.pdf" target="_blank" title="https://www.healthit.gov/cerus/sites/cerus/files/2020-03/ONC_Cures_Act_Final_Rule_03092020.pdf">pg 403</a></p>



<a name="190139118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139118">(Mar 10 2020 at 03:14)</a>:</h4>
<p>See page 1174:</p>
<blockquote>
<p>An application capable of storing a client secret must be issued a refresh token valid for a period of no less than three months.</p>
</blockquote>



<a name="190139201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139201">(Mar 10 2020 at 03:16)</a>:</h4>
<p>in practice though I think the fact that refresh tokens are available for confidential clients will lead to one of two behaviors:</p>
<ol>
<li>
<p>Developers will register native mobile apps as confidential clients, and simply distribute them with a static secret that isn't really a secret.</p>
</li>
<li>
<p>Developers will insert a "secure" web server into their process, rather than having the mobile app connect directly to EHR systems. This exposes more surface area to attackers without a security gain.</p>
</li>
</ol>
<p>So if I were an EHR developer I would just allow public clients to get refresh tokens. The SMART specification allows it and ONC allows it (but does not seem to require it).</p>



<a name="190139219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139219">(Mar 10 2020 at 03:17)</a>:</h4>
<p>(Oh, sorry, Josh, I misunderstood your original point -- I mistakenly thought you were saying that refresh tokens weren't being mandated at all).</p>



<a name="190139380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139380">(Mar 10 2020 at 03:20)</a>:</h4>
<p>How is the outcome of your #1 different from allowing public clients to have a refresh token?</p>



<a name="190139411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139411">(Mar 10 2020 at 03:21)</a>:</h4>
<p>The outcome really isn't different; I think #1 just introduces ambiguity or confusion about whether things are secrets or not. When we first wrote the smart specification I wanted to avoid that ambiguity so I made it explicit that public clients would not be given fake secrets. The principle being: if something is labeled as a secret in your code and in the protocol then it should be kept secret :-)</p>



<a name="190139473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139473">(Mar 10 2020 at 03:23)</a>:</h4>
<p>Also from the perspective of the rules: #1 maybe involves app developers misrepresenting the capabilities of their apps to ensure that they can get refreshed tokens? I'm not sure on this.</p>



<a name="190139525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139525">(Mar 10 2020 at 03:24)</a>:</h4>
<p>I totally agree with your principle. Your entire premise is that developers will act in bad faith. Have you read the comment/response section on dyn reg? That's the technical solution, here.</p>



<a name="190139547"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139547" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139547">(Mar 10 2020 at 03:25)</a>:</h4>
<p>Dynamic registration would be a nice solution here, I agree! (My premise is not that developers would be acting in bad faith; it is that they would take the technical steps required to provide a reasonable user experience. Adding a web server to the mix clearly is not bad faith, but neither does it improve the security.)</p>



<a name="190139595"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139595" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139595">(Mar 10 2020 at 03:26)</a>:</h4>
<p>yes, that's true. Wasn't trying to besmirch you or our hypothetical patient app developer. :)</p>



<a name="190139599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139599">(Mar 10 2020 at 03:26)</a>:</h4>
<p>Also if I think about single device dynamic registration versus just using public clients on those devices, it's really not clear to me that the dynamic registration offers better security properties.</p>



<a name="190139609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139609">(Mar 10 2020 at 03:27)</a>:</h4>
<p>where public clients means without persistent access? Yes. Totally.</p>



<a name="190139611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139611">(Mar 10 2020 at 03:27)</a>:</h4>
<p>In other words, the dynamic registration approach does let you keep a secret on the device, but does the secret really improve the security properties? It's generally stored in the same place is that the access tokens and refresh tokens and protected health data are stored...</p>



<a name="190139657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139657">(Mar 10 2020 at 03:28)</a>:</h4>
<p>In my comment above when I said public clients I just meant clients that could not keep a static secret; I think these clients are perfectly capable of maintaining persistent access.</p>



<a name="190139661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139661">(Mar 10 2020 at 03:28)</a>:</h4>
<p>It's all about the length of data access and the requirement on the user to re-authorize. That's where the security actually lives (for clients that cannot "keep a secret").</p>



<a name="190139676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139676">(Mar 10 2020 at 03:29)</a>:</h4>
<p>The user experience is all about that, I agree. But basically any app architecture is capable of supporting refresh tokens, and I'm wondering why you would suggest that a dynamically registered mobile app provides better security when it comes to using those refresh tokens.</p>



<a name="190139721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139721">(Mar 10 2020 at 03:30)</a>:</h4>
<p>The issues you listed re: how long the data access lasts for and the requirement to reauthorize -- they apply equally to apps that can keep a secret and to apps that cannot.</p>



<a name="190139751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139751">(Mar 10 2020 at 03:31)</a>:</h4>
<p>If a secret is confidential, it serves as a stand-in for the user re-authorizing.</p>



<a name="190139806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139806">(Mar 10 2020 at 03:32)</a>:</h4>
<p>I'm not sure I understand that</p>



<a name="190139808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190139808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190139808">(Mar 10 2020 at 03:32)</a>:</h4>
<p>I could just as well say if a refresh token is confidential it stands in for the user reauthorizing</p>



<a name="190140343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190140343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190140343">(Mar 10 2020 at 03:48)</a>:</h4>
<p>isn't a refresh token typically communicated and, at least temporarily, stored on the insecure client, though? The basic premise here is that the client isn't secure (also, I feel super out of my depth arguing OAuth philosophy with you -- however, it also seems obvious to me that public clients shouldn't be trusted with persistent access).</p>



<a name="190175822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190175822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190175822">(Mar 10 2020 at 14:11)</a>:</h4>
<p>The refresh token is stored wherever the access token is stored. This could be a client or a server.</p>



<a name="190194499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190194499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190194499">(Mar 10 2020 at 16:35)</a>:</h4>
<p>To dyn reg aspects in relation to native apps - it limits the attack to the specific app install (since it's not a secret that will be shared with all installs). As you point out, that device has places to (typically) securely store data. But if you put a "shared" secret in that location, you've exposed the broader platform since there are ways to view that data with access to the physical device.</p>



<a name="190195451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190195451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190195451">(Mar 10 2020 at 16:43)</a>:</h4>
<p>I agree with this exactly as you've stated, Jenni  -- i.e., you've articulated exactly the benefit of dynreg. But in my estimation it's a pretty modest benefit; and given we have no production support for (or regulatory requirement for) dynreg today, it feels like quite a jump to say "this is what we need, in order to make native apps safe." We already have real-world native apps (e.g., Apple Health) that we trust to make persistent connections to the EHR (even without dynreg).</p>



<a name="190196272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190196272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190196272">(Mar 10 2020 at 16:50)</a>:</h4>
<p>Correct, but Apple also correctly protects that secret as a confidential app. I agree that there's confusion about how to correctly set up a confidential app that can have long term access by providing credentials that prove they're the authorized owner of the refresh token</p>



<a name="190196357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190196357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190196357">(Mar 10 2020 at 16:51)</a>:</h4>
<p>The public apps not having that capability and being tied to an active session goes with the idea that you're only able to protect <em>that specific session</em> and the app doesn't need that data after the user logs off</p>



<a name="190196429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190196429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190196429">(Mar 10 2020 at 16:51)</a>:</h4>
<p>typically those types of apps also can't continue to call after they're shut down. Native apps get wonky depending on architecture.</p>



<a name="190197702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190197702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190197702">(Mar 10 2020 at 17:02)</a>:</h4>
<blockquote>
<p>Correct, but Apple also correctly protects that secret as a confidential app. </p>
</blockquote>
<p>Can you clarify on this? My understanding is that connections go directly from phone to EHR (i.e. "public client", even if under the hood there's a "secret" issued). This is to say, no access tokens, authorization codes, refresh tokens, or PHI leaves the device, and there's no per-device secrets (no dynreg).</p>



<a name="190411740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190411740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190411740">(Mar 12 2020 at 16:33)</a>:</h4>
<p>We do not need to invent these rules. The IETF community already has "Best Current Practice" (bcp212) that has all kinds of these very important rules. We should just leverage that 'standard'... imagine that, a standards organization leveraging another standards organization .   <a href="https://tools.ietf.org/html/bcp212" target="_blank" title="https://tools.ietf.org/html/bcp212">https://tools.ietf.org/html/bcp212</a></p>



<a name="190411998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190411998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190411998">(Mar 12 2020 at 16:35)</a>:</h4>
<p>and are drafting a best current practice for oauth security <a href="https://tools.ietf.org/html/draft-ietf-oauth-security-topics-09" target="_blank" title="https://tools.ietf.org/html/draft-ietf-oauth-security-topics-09">https://tools.ietf.org/html/draft-ietf-oauth-security-topics-09</a></p>



<a name="190412715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190412715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190412715">(Mar 12 2020 at 16:41)</a>:</h4>
<p>John, would you say that sections 8.5 and 8.6 are most relevant here? </p>
<p><a href="https://tools.ietf.org/html/bcp212#section-8.5" target="_blank" title="https://tools.ietf.org/html/bcp212#section-8.5">https://tools.ietf.org/html/bcp212#section-8.5</a></p>



<a name="190448804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190448804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190448804">(Mar 12 2020 at 21:42)</a>:</h4>
<p>dyn reg scales awfully bad in products like Keycloak</p>



<a name="190462626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190462626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190462626">(Mar 13 2020 at 01:22)</a>:</h4>
<p>I think we brought that bcp up/discussed it during one of our oauth threads... but may have ben daVinci? or another accelerator</p>



<a name="190462631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/190462631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#190462631">(Mar 13 2020 at 01:22)</a>:</h4>
<p>Definitely has some good things</p>



<a name="217051059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/217051059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#217051059">(Nov 17 2020 at 19:34)</a>:</h4>
<p>Picking up on an old thread. </p>
<p>For a native app to do <a href="https://tools.ietf.org/html/bcp212#section-8.5">trusted dynamic client registration</a> like Isaac, John, and Jenni describe above, the client will need to know where to find the register URL.</p>



<a name="217051096"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/217051096" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#217051096">(Nov 17 2020 at 19:34)</a>:</h4>
<p>Have we discussed this at all yet?</p>



<a name="217051209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/217051209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#217051209">(Nov 17 2020 at 19:35)</a>:</h4>
<p>It seems to make sense that it would be in the CapabilityStatement along with the auth and token endpoints.  Is that right?  If so, how would we identity it?</p>



<a name="217051513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/217051513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#217051513">(Nov 17 2020 at 19:38)</a>:</h4>
<p>It's discoverable in the .well-known SMART configuration</p>



<a name="217051556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/217051556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#217051556">(Nov 17 2020 at 19:38)</a>:</h4>
<p>Oh, hey, there it is!  :)</p>



<a name="217051577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/217051577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#217051577">(Nov 17 2020 at 19:38)</a>:</h4>
<p>For anyone who finds this later: <a href="http://hl7.org/fhir/smart-app-launch/conformance/index.html#using-well-known">http://hl7.org/fhir/smart-app-launch/conformance/index.html#using-well-known</a></p>



<a name="217051615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/217051615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#217051615">(Nov 17 2020 at 19:39)</a>:</h4>
<p><a href="http://hl7.org/fhir/smart-app-launch/conformance/index.html#declaring-support-for-oauth2-endpoints">http://hl7.org/fhir/smart-app-launch/conformance/index.html#declaring-support-for-oauth2-endpoints</a></p>



<a name="217051620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/217051620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#217051620">(Nov 17 2020 at 19:39)</a>:</h4>
<p>From 4.2.1 <br>
registration_endpoint: OPTIONAL, if available, URL to the OAuth2 dynamic registration endpoint for this FHIR server.</p>



<a name="217051631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/217051631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#217051631">(Nov 17 2020 at 19:39)</a>:</h4>
<p>Thanks Josh.</p>



<a name="217051661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/Refresh%20tokens/near/217051661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/Refresh.20tokens.html#217051661">(Nov 17 2020 at 19:39)</a>:</h4>
<p><span class="user-mention" data-user-id="315322">@Kunal Shah</span> this is what we were talking about earlier.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
