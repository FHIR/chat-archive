---
layout: page
title: "FHIR Chat  · scopes · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html">scopes</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153817114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817114">(Mar 21 2016 at 22:00)</a>:</h4>
<p>What does a scope of <code>patient/Practitioner.*</code> mean to everyone?</p>
<p>It would seem that there are a certain set of nonsensical patient-level scopes. Currently, SMART's clinical scopes must start with <code>patient/</code> or <code>user/</code>. However, whether you can use <code>patient/</code> (and perhaps <code>user/</code>) depends upon the FHIR resource</p>



<a name="153817116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817116">(Mar 21 2016 at 22:03)</a>:</h4>
<p>A related question: imagine a provider-facing SMART app that wants to provide the ability to read + write the authenticated provider's Practitioner record.<br>
The app would request a scope of <code>user/Practitioner.*</code> to be granted the proper permissions. However, based upon the current SMART documentation, the app would get permissions to update *any* Practitioner record. The ideal state for this scenario is that SMART app is granted read/write permission on just the authenticated user's Practitioner record</p>



<a name="153817117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817117">(Mar 21 2016 at 22:04)</a>:</h4>
<p>I wonder if rather than <code>patient/</code> and <code>user/</code> prefixes, we should be using <code>context/</code> and <code>all/</code> (or something like that). <code>context</code> would mean something semantically depending on the FHIR resource (eg, the patient in context, the provider in context, etc).</p>



<a name="153817118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817118">(Mar 21 2016 at 22:05)</a>:</h4>
<p>I haven't thought through all of this but wanted to throw this out here to see if others have already thought about this</p>



<a name="153817126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817126">(Mar 21 2016 at 22:16)</a>:</h4>
<p>You're right that it doesn't make sense to request "patient/" scopes on a resource with no "patient" element. </p>



<a name="153817127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817127">(Mar 21 2016 at 22:18)</a>:</h4>
<p>As for user permissions: remember that our goal is not to model the whole system. "user/Practitioner.write" means "allow writing to any practitioner resources that I, as the user, am allowed to edit". </p>



<a name="153817128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817128">(Mar 21 2016 at 22:19)</a>:</h4>
<p>The ehr knows/sets/enforces policy to determine that I can't write to Dr.  Jones's practitioner resource (unless I'm an administrator). </p>



<a name="153817129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817129">(Mar 21 2016 at 22:20)</a>:</h4>
<p>This feel like a reasonable balance to me. I'm not sure how much  a generic "context" prefixed would improve expectations/understanding/consistency. </p>



<a name="153817133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817133">(Mar 21 2016 at 22:38)</a>:</h4>
<p>well, it depends how much you care about context other than patient. </p>



<a name="153817134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817134">(Mar 21 2016 at 22:38)</a>:</h4>
<p>I think there's a lot of uses for Smart on FHIR outside context = patient </p>



<a name="153817135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817135">(Mar 21 2016 at 22:38)</a>:</h4>
<p>and so I think that Kevin's idea makes a lot of sense</p>



<a name="153817136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817136">(Mar 21 2016 at 22:56)</a>:</h4>
<p>But you'd need to define what it meant, is my point. I'm reluctant to add a generic prefix. </p>



<a name="153817137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817137">(Mar 21 2016 at 22:57)</a>:</h4>
<p>If we can establish uses that systems will support, sure. </p>



<a name="153817138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817138">(Mar 21 2016 at 23:13)</a>:</h4>
<p>Good points. I'll ammend my off the cuff thoughts to perhaps we just rename <code>patient/</code> to <code>context/</code> then (leave <code>user/</code> as-is). So, it's not adding a generic prefix so much as changing patient to a word that isn't specific to a particular type of context</p>



<a name="153817139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817139">(Mar 21 2016 at 23:29)</a>:</h4>
<p>But that's just it: you'll want it to behave one way when there context is a patient, and a different way when the context is... something else? I'm saying let's describe "patient" for patient context, and other values when some other context is relevant. That will force us to confront the actual use cases rather than resorting to an underdefined generic value. </p>



<a name="153817140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817140">(Mar 21 2016 at 23:30)</a>:</h4>
<p>well, ehr plug-ins should be expected in the following contexts:<br>
- observation (/DR)<br>
- medicationX<br>
- care plan<br>
- condition<br>
- allergy<br>
....</p>



<a name="153817141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817141">(Mar 21 2016 at 23:30)</a>:</h4>
<p>and I expect to use it in the tooling framework with any of the non-patient related resources as context </p>



<a name="153817143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817143">(Mar 21 2016 at 23:31)</a>:</h4>
<p>I'll need to understand the intended use cases / semantics (since they're not obvious to me from you're list). </p>



<a name="153817144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817144">(Mar 21 2016 at 23:34)</a>:</h4>
<p>And when "context" implies multiple values (e.g. a patient <strong>and</strong> an encounter <strong>and</strong> a location), a single "context/" scope prefix doesn't make sense. </p>



<a name="153817145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817145">(Mar 21 2016 at 23:35)</a>:</h4>
<p>well, that's an interesting case, yes. is the context is a particular observation, is access limited to the observation and related information, or to the patient and related information? </p>



<a name="153817146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817146">(Mar 21 2016 at 23:36)</a>:</h4>
<p>out side of the patient space, there's probably less interest in preventing read, and less need to prevent write based on context </p>



<a name="153817148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817148">(Mar 21 2016 at 23:43)</a>:</h4>
<p>Good points, Josh</p>



<a name="153817149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817149">(Mar 21 2016 at 23:55)</a>:</h4>
<p>fyi, my questions were prompted by an internal discussion here on whether our authorization server shouldn't disallow scopes that don't make sense (like patient/Practitioner)</p>



<a name="153817150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153817150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153817150">(Mar 21 2016 at 23:56)</a>:</h4>
<p>So, there are not specific/concrete needs or use cases from my end. Our internal discussion just spurred some thought on some what-ifs outside of the current resources we support today</p>



<a name="153818284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153818284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan Ben-Hamou <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153818284">(Mar 27 2016 at 02:31)</a>:</h4>
<p>Completely new here ... but looking to contribute. Would it be a correct assessment that the 'patient/' and 'user/' scopes, convey the realm for the authenticated user, and that SMART does not attempt to stipulate how the SMART scopes are mapped to access decisions? Have you seen a need to present different projections of data  (e.g. different resource bundles for observations - prelim lab results, provider notes etc) so that only data that's approrpiate for consumption by the user (e.g. patient) is shared?</p>



<a name="153818285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153818285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan Ben-Hamou <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153818285">(Mar 27 2016 at 02:34)</a>:</h4>
<p>Also, consider for example delegated access from a young man caring for his elderly mother, leveraging a SMART app. Could this care giver, use an app that requests a 'patient' scope, even if this person is not necessarily a bona-fide patient of that institution, but more for the reason that the 'patient' scope would offer least-privilage access (non-provider)? If this person were a bona-fide patient in addition to caring for a parent who is also a bona-fide patient of the same healthcare organization, could the 'patient/Patient.read' provide contemporaneous access both his record and his parent's record?</p>



<a name="153818287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153818287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153818287">(Mar 27 2016 at 04:37)</a>:</h4>
<p>The notion is that you ask for "patient/" scopes if you want to access "all of the (somethings) about the relevant patient". And you use "user/" scopes if you want to access "all the (somethings) that the authorizing user has access to to". </p>



<a name="153818288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153818288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153818288">(Mar 27 2016 at 04:38)</a>:</h4>
<p>So for your caregiver example, the son would be able to grant  "patient/*.read" on the mother's record. </p>



<a name="153818289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153818289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153818289">(Mar 27 2016 at 04:39)</a>:</h4>
<p>The actual policy lives in the EHR; we only standardize how the sharing (delegation) happens. </p>



<a name="153818298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153818298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan Ben-Hamou <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153818298">(Mar 27 2016 at 05:02)</a>:</h4>
<p>Thanks for clarifying.</p>



<a name="153818328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153818328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153818328">(Mar 27 2016 at 17:25)</a>:</h4>
<p>There is some efforts outside of smart that are working on using a profile of OAuth called User Managed Access (UMA) to support these kinds of delegation functionality. These are quite bleeding edge, but could be very helpful if they can be shown to be both functional and effective. They are complementary and could plug into a smart infrastructure once they prove trustworthy. See <a href="http://openid.bitbucket.org/HEART/openid-heart-uma.html" target="_blank" title="http://openid.bitbucket.org/HEART/openid-heart-uma.html">http://openid.bitbucket.org/HEART/openid-heart-uma.html</a> </p>



<a name="153818332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153818332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153818332">(Mar 27 2016 at 19:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191654">@Jonathan Ben-Hamou</span>  - I did <a href="http://fhirblog.com/2016/03/23/smart-scopes-and-profiles/" target="_blank" title="http://fhirblog.com/2016/03/23/smart-scopes-and-profiles/">a post</a> on scopes that may be useful...</p>



<a name="153820535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153820535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153820535">(Apr 09 2016 at 03:08)</a>:</h4>
<p>We've, for a while, been tossing around the notion that scopes like <code>patient/Observation.read</code> are too simple (e.g. you don't really wan to lump all observations together). The problem is that you try to "fix" this you get scopes like:</p>
<div class="codehilite"><pre>{&quot;context&quot;:&quot;patient&quot;,&quot;resource&quot;:&quot;Observation&quot;,&quot;category&quot;:&quot;laboratory&quot;,&quot;permissions&quot;:[&quot;read&quot;,&quot;create&quot;]}
</pre></div>


<p>... which I've generally looked upon with fear. But maybe they're not so bad.</p>



<a name="153820570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153820570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153820570">(Apr 09 2016 at 21:47)</a>:</h4>
<p>there's a precipice here for sure. Cross the line, and whee.....</p>



<a name="153820571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153820571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153820571">(Apr 09 2016 at 21:48)</a>:</h4>
<p>but if people are going to be forced to cross the lines by themselves....</p>



<a name="153820572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153820572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153820572">(Apr 09 2016 at 21:48)</a>:</h4>
<p>but finer grained permissions might not be the right way to manage this?</p>



<a name="153821161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153821161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153821161">(Apr 12 2016 at 11:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> we should separate out the permissions needs from the scope needs. scope should focus on logical sub-sets that are likely to need to be segmented based on client needs. Meaning they don't need to be as fine-grain as permissions, but they do need to be powerful enough that one can authorize an app with a sub-set of the users permissions.</p>



<a name="153821162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153821162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153821162">(Apr 12 2016 at 11:58)</a>:</h4>
<p>I did propose a scope model <a href="http://healthcaresecprivacy.blogspot.com/2016/01/fhir-oauth-scope.html" target="_blank" title="http://healthcaresecprivacy.blogspot.com/2016/01/fhir-oauth-scope.html">http://healthcaresecprivacy.blogspot.com/2016/01/fhir-oauth-scope.html</a></p>



<a name="153821175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153821175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153821175">(Apr 12 2016 at 12:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> I think I understand that you're proposing different scopes, but your article doesn't mention "permissions". I typically use "scopes" and "permissions" as synonyms; how do you characterize the difference? </p>



<a name="153821177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153821177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153821177">(Apr 12 2016 at 12:14)</a>:</h4>
<p>Also, you here described a desire for *coarser* grained scopes, but your article proposes much finer grained scopes than SMART uses today (e.g. your proposal includes not just resource but also sensitivity, purpose of use, etc). </p>



<a name="153821178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153821178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153821178">(Apr 12 2016 at 12:15)</a>:</h4>
<p>For US use cases, it seems to me there would be clear value in defining read and write scopes for things like  "medications", "vital signs", "lab results" (i.e. Generally aligned at the level of MU API requirements) </p>



<a name="153821182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153821182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153821182">(Apr 12 2016 at 12:28)</a>:</h4>
<p>The article was written a while ago, we have learned more..   Yes, scopes are generally going to be more coarse than permissions.  I use a general term permissions to encompass all the Access Control space inclusive of the Resource types, Patient privacy consents, data tagging, etc. </p>



<a name="153821185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153821185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153821185">(Apr 12 2016 at 12:30)</a>:</h4>
<p>I do like your idea that scopes should likely be a very different vector that is more logical. We are struggling with the similar problem in the Consent work. In Consent we have the problem that a Patient might want to slice and segment their whole medical history to give some subset to one doctor, where this is a different vector than we generally have in the Resource types, or the user roles, or the data sensitivity.</p>



<a name="153821186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153821186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153821186">(Apr 12 2016 at 12:32)</a>:</h4>
<p>My blog yesterday on how to write a Consent that focuses on the Resource types is an example. It might be easy to encode but it is not necessarly useful. (Note it is not really easy to encoded today but that is a different problem).</p>



<a name="153878710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153878710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153878710">(Mar 21 2017 at 10:03)</a>:</h4>
<p>I've just learned that UMA is a potential candidate for the Dutch national efforts around PHRs. </p>



<a name="153878711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153878711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153878711">(Mar 21 2017 at 10:04)</a>:</h4>
<p>Anyone know if UMA complements SMART on FHIR, or overlaps it.</p>



<a name="153878722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153878722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153878722">(Mar 21 2017 at 11:54)</a>:</h4>
<p>UMA is a high-level specification, useful for all domains. There is a "HEART" workgroup that is working on how one might use UMA in Healthcare. There are various participants from healthcare. Josh has presented, I have presented, and others. Their work is useful as an alternative way of managing consent, that is the patient has a relationship with a UMA authority to set rules (in proprietary format), all accesses of that patients data is routed (UMA style) through that authority for a decision (Permit/Deny). The group is making progress, but is struggling with not focusing on realistic use-cases, not prioritizing, and not cutting off debate. <a href="http://openid.net/wg/heart/" target="_blank" title="http://openid.net/wg/heart/">http://openid.net/wg/heart/</a></p>



<a name="153878723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153878723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153878723">(Mar 21 2017 at 11:54)</a>:</h4>
<p>We do point at HEART, as well as SMART, and IHE-IUA on the FHIR security pages...</p>



<a name="153878724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153878724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153878724">(Mar 21 2017 at 11:58)</a>:</h4>
<p>The development of Scopes will take some experimentation. The SMART scopes are the best we have today, HEART somewhat followed them. I expect that healthcare data is going to stress the simplistic concept of OAuth scopes.  I go into some initial dept, wanted to write more but didn't see any interest <a href="https://healthcaresecprivacy.blogspot.com/2016/08/controlling-big-data-feeding-frenzy.html" target="_blank" title="https://healthcaresecprivacy.blogspot.com/2016/08/controlling-big-data-feeding-frenzy.html">https://healthcaresecprivacy.blogspot.com/2016/08/controlling-big-data-feeding-frenzy.html</a> </p>



<a name="153878739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153878739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153878739">(Mar 21 2017 at 13:11)</a>:</h4>
<p><img alt=":thumbsup:" class="emoji" src="/static/third/gemoji/images/emoji/thumbsup.png" title=":thumbsup:"> thanks, John!</p>



<a name="153955571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153955571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153955571">(May 03 2018 at 03:52)</a>:</h4>
<p>I'm finally adding this to my server and covering the "action" part as <span class="user-mention" data-user-id="191404">@John Moehrke</span> described - the .(read|write|*)<br>
Wondering if we've considered extending it to cover the other actions like operations.<br>
I was contemplating</p>
<div class="codehilite"><pre><span></span>( &#39;patient&#39; | &#39;user&#39; ) &#39;/&#39; ( fhir-resource | &#39;*&#39; ) &#39;.&#39; ( &#39;read&#39; | &#39;write&#39; | $[AZaz-.]+ | &#39;*&#39; )
</pre></div>


<p>Where the $ covers operations too.<br>
This would make a scope like these valid:</p>
<div class="codehilite"><pre><span></span>patient/Patient.$everything
user/Observation.$lastn
user/Questionnaire.$populate
</pre></div>



<a name="153955795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153955795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153955795">(May 03 2018 at 20:44)</a>:</h4>
<p>I think this is definitely worth experimenting with!</p>



<a name="153955796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153955796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153955796">(May 03 2018 at 20:44)</a>:</h4>
<p>Would love to get a sense of your experience with it.</p>



<a name="153955818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153955818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153955818">(May 03 2018 at 22:00)</a>:</h4>
<p>I'll do some experimentation and see how it looks.</p>



<a name="153955871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153955871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153955871">(May 04 2018 at 02:28)</a>:</h4>
<p>the other action that is notably absent here is delete<br>
(makes sense that search and get are under GET, but DELETE under write seems wrong)</p>



<a name="153955885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153955885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153955885">(May 04 2018 at 03:41)</a>:</h4>
<p>Looking through the operations, I can't generalize the operation access to either read or write permission.<br>
any operation that changes data would need write permission (metaAdd), and others are read (valueset expand)</p>



<a name="153956114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153956114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153956114">(May 05 2018 at 05:01)</a>:</h4>
<p>so my first rule is that the OAuth scopes are not a permissions model. Are we talking permissions or authorizations? I personally think that the coarse split into read/write makes perfect sense for authorizing an application, but doesn't begin to cover it for a permissions models, which are notoriously complicated.</p>



<a name="153956124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153956124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153956124">(May 05 2018 at 06:51)</a>:</h4>
<p>I think of the OAuth scopes as function/feature level security, not data level security.<br>
A first pass filter before the tough stuff gets done.<br>
(Though that's probably wrong too)</p>



<a name="153956134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153956134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153956134">(May 05 2018 at 12:16)</a>:</h4>
<p>you are both partially right, but partially wrong. Scopes only need to cover the space which is a declaration of what is authorized for this requesting actor. It does not cover all the rules used to make that decision.  OAuth is optimized for REST. This works really well when the various patterns for this level of authorization are simple, hierarchical, and declarative.  Hence why most scope models are  compartment and CRUD based. We have mostly designed FHIR to this model, but health data is more complex than a wiki, blog, filesystem, etc...    I think we have also missed the  principle that all elements in a resource should be the same level of access control need, one should not mix sensitive data into a resource at needs normal access.   The grouping of elements purely according to clinical need can make resources that are hard to have a binary permit/deny decision on.</p>



<a name="153956238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153956238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153956238">(May 06 2018 at 02:37)</a>:</h4>
<p>Do the scopes in the way that we're using them in SMART more cover the types that the APP is able to access, not the user of the app. The users permissions are still then evaluated after that... (which may be more restrictive, but not less)</p>



<a name="153956239"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153956239" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153956239">(May 06 2018 at 02:39)</a>:</h4>
<p>Yes, this is how I have looked at things. Scopes convey what an app is authorized to do, but are always restricted by the permissions of the user running the app.</p>



<a name="153956247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153956247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153956247">(May 06 2018 at 14:02)</a>:</h4>
<p>In the case with SMART, where the AS is tightly bound to the RS,  there can be many simplifying mechanisms that you use.  You can even do nothing other than PERMIT vs DENY, and do all actual authorization decisions in the RS.  Thus never exposing in a token anything useful for the app. The more likely is that you do expose gross authorizations, like are found in the SMART scopes.  If this s a specific goal driving SMART, then it should be declared. That intent description will then help people understand better the use-case that will fit SMART best. I don't know that this changes much of anything, but is a very useful thing for the reader of SMART to see. Right?</p>



<a name="153956248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/scopes/near/153956248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/scopes.html#153956248">(May 06 2018 at 14:06)</a>:</h4>
<p>I am not saying it is a limitation of SMART, but rather that it is an intended deployment simplifying assumption.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
