---
layout: page
title: "FHIR Chat  · C25 -- Testing with Epic · smart"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/index.html">smart</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html">C25 -- Testing with Epic</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="209656764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209656764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209656764">(Sep 10 2020 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="279701">@Jake Fisher</span> great to meet you on the check-in call just now. Re: testing with Epic, do you have a server online for "Scenario 1"? And can share details about how to get a client configured? When I follow links from <a href="https://docs.google.com/spreadsheets/d/1Acaz612wOy6TYT-aaBJm9A7WjVa3Kn7JSj1E-2h9PzQ/edit#gid=0">the signup spreadsheet</a> I end up at <a href="https://connectathon.epic.com/Interconnect-Fhir-OAuth/Login.aspx?ReturnUrl=%2fInterconnect-Fhir-OAuth%2fStatusPage%2fMain.aspx">https://connectathon.epic.com/Interconnect-Fhir-OAuth/Login.aspx?ReturnUrl=%2fInterconnect-Fhir-OAuth%2fStatusPage%2fMain.aspx</a> but I don't know how to sign in.</p>



<a name="209657802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209657802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209657802">(Sep 10 2020 at 14:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> let me get a client set up. Would you like to test one with access to vital-signs Observations but not labs Observations, or something along those lines? Also what redirect_uri should I use for your "app"? I'll need to register those things statically.</p>



<a name="209659233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209659233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209659233">(Sep 10 2020 at 15:02)</a>:</h4>
<p>Ideally it'd be good to test a client for Scenario 0 (including all observations) and Scenario 1 (so it can ask for <code>patient/Observation.rs?category=vital-signs</code> and get access to vitals but not labs). It sounds like that will require registering two separate clients?</p>



<a name="209659712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209659712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209659712">(Sep 10 2020 at 15:04)</a>:</h4>
<p>For redirect URLS, if you can register <code>http://localhost:8000/index.html</code> and <code>https://smart.argo.run/granular/</code> for both, that'd be ideal. (Gino might chime in and tweak that arog.run URL once things are up and running ;-))</p>



<a name="209666994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209666994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209666994">(Sep 10 2020 at 15:49)</a>:</h4>
<p>OK, updated the second URL in the request above. <span class="user-mention" data-user-id="279701">@Jake Fisher</span> just want to make sure you've seen this?</p>



<a name="209668260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209668260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209668260">(Sep 10 2020 at 15:57)</a>:</h4>
<p>Yep I have and I'm working on creating clients for you to test with. We currently return our R4 resources with the existing SMART scope syntax (system | user | patient)/resource.(read | write), so I need to alter how we return this slightly to support this testing.</p>



<a name="209668411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209668411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209668411">(Sep 10 2020 at 15:58)</a>:</h4>
<p>Awesome, that's what connectathon is for :-)</p>



<a name="209668509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209668509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209668509">(Sep 10 2020 at 15:59)</a>:</h4>
<p>Also - FYI that we don't support dynamic scoping right now. The scopes that are statically registered for the client with the server is what it will have access to, regardless of what it requests at runtime.</p>



<a name="209670424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209670424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209670424">(Sep 10 2020 at 16:12)</a>:</h4>
<p>Will this be clear in the token response? In other words can a client learn what it has been granted by looking up the Scopes array in the access token response?</p>



<a name="209671351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209671351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209671351">(Sep 10 2020 at 16:19)</a>:</h4>
<p>Yes - the client will currently get a list of all the scopes they statically registered with us, regardless of whether or not they requested all of them. So this does accurately reflect what they have access to.</p>



<a name="209671445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209671445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209671445">(Sep 10 2020 at 16:20)</a>:</h4>
<p>Almost done with the mock client record setup for you Josh.</p>



<a name="209671827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209671827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209671827">(Sep 10 2020 at 16:22)</a>:</h4>
<p>Quick question about scenario 0: should the client have access to some interactions for Observation but not all? For example, read/search but not create? We already don't support GETing all Observations without supplying a patient  (search interaction) or Observation ID (read)  so this example in confluence seems a bit weird to me, but maybe I'm misinterpreting it.</p>
<p><code>GET Observation</code> (as opposed to <code>GET Observation?patient={}</code>)</p>
<p>I'll allow these scopes for the scenario 0 client for now (so create would not be allowed):</p>
<p>patient/Observation.rs<br>
patient/Patient.rs</p>



<a name="209672692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209672692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Philips <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209672692">(Sep 10 2020 at 16:28)</a>:</h4>
<p>GET Observation in my experience tends to work on reference servers but not vendor servers :). I.e. for Cerner GET Observation also already does not work, so I didn't do any extra connectathon-specific implementation for that part</p>



<a name="209673358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209673358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209673358">(Sep 10 2020 at 16:33)</a>:</h4>
<p>For scenario 0, we'd be happy with <code>patient/Observation.r</code> and <code>patient/Patient.r</code> I think.</p>



<a name="209674360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209674360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209674360">(Sep 10 2020 at 16:40)</a>:</h4>
<p>Any concerns with user-facing clients instead of patient-facing? I have a test user already set up. I could set up a test patient with a patient portal account and some patient-facing clients as well if needed.</p>



<a name="209674465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209674465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209674465">(Sep 10 2020 at 16:41)</a>:</h4>
<p>Details for the user-facing clients are in the spreadsheet now. Working on mocking up some test data so you can actually get some data haha.</p>



<a name="209676389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209676389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209676389">(Sep 10 2020 at 16:55)</a>:</h4>
<p>Our scenarios are designed around patient-level scopes so we can try out restrictions by patient as well as category.</p>



<a name="209676463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209676463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209676463">(Sep 10 2020 at 16:55)</a>:</h4>
<p>It'd be great if you're able to stay compatible with the scopes from Scenario 0 and Scenario 1</p>



<a name="209676568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209676568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209676568">(Sep 10 2020 at 16:56)</a>:</h4>
<p>(Gino's working on a "playground" mode that'll  let us more easily test things off the beaten path, but it'd be great to test things <em>on</em> the path first.)</p>



<a name="209683295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209683295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209683295">(Sep 10 2020 at 17:47)</a>:</h4>
<p>Ok I updated the scopes for the 2 clients I created to be patient/*. Details are in the spreadsheet.</p>



<a name="209690972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209690972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209690972">(Sep 10 2020 at 18:43)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="279701">@Jake Fisher</span> ! I'm making some progress in testing here. One issues is that at the end of the authz process, even though I asked for <code>launch/patient</code> and I'm granted <code>patient/Observation.rs?category=vital-signs</code>, the access token response isn't giving me a <code>patient</code> context param. For example I'm getting:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;access_token&quot;: &quot;P51s2Ti9GLDZq4mn2RFatx3b3i27LrkGvpVrsksuQgYA6wxbBYsIosVDIuqG21BeO4bvz0ZiHUXe3YFZ8TGZ98qjNUni30Q1ibEAypyJUN9wx29ni2vtlSm5KRrh0isI&quot;,
  &quot;token_type&quot;: &quot;bearer&quot;,
  &quot;expires_in&quot;: 3600,
  &quot;scope&quot;: &quot;fhirUser openid patient/Patient.rs patient/Observation.rs?category=vital-signs&quot;,
  &quot;state&quot;: &quot;LTFO5plq1H4Rlf7J&quot;,
  &quot;id_token&quot;: &quot;eyJhbGciOiJSUzI1NiIsImtpZCI6IkVRU2F0aDBEVU95Mzl3Rnk5ZDZ4Z0o2TThHMUFtR1Noc0ZRanplcjFFRUk9IiwidHlwIjoiSldUIn0.eyJhdWQiOiJDb25uZWN0YXRob24yMDIwT2JzZXJ2YXRpb25WaXRhbHMiLCJleHAiOjE1OTk3NjM2MzIsImZoaXJVc2VyIjoiaHR0cHM6Ly9jb25uZWN0YXRob24uZXBpYy5jb20vSW50ZXJjb25uZWN0LUZoaXItT0F1dGgvYXBpL0ZISVIvUjQvUHJhY3RpdGlvbmVyL2VVNk1NRUxVemdGMzBYcVZwMFZsQVNRMyIsImlhdCI6MTU5OTc2MzMzMiwiaXNzIjoiaHR0cHM6Ly9jb25uZWN0YXRob24uZXBpYy5jb20vSW50ZXJjb25uZWN0LUZoaXItT0F1dGgvb2F1dGgyL3Rva2VuIiwic3ViIjoiZVU2TU1FTFV6Z0YzMFhxVnAwVmxBU1EzIn0.jQ3HZ8jb7RAwV9chP3QU-_uzKJs4dh7IrPRrU3chds0x0Ltd4uCYChMcYJuFpM8M7EUyaFN1LL3Tf4aSCibePz02lTRG3qNCtz5Cv4inOhtjqnWTONIf2TrZo1MkUP7oJtQzwTCEeNrp6zLGzq8jgpP-uBU4N9ZAPds8N6JpCjmsVy0wLqOkXJueCuGAHlzshdJ3QWs3c73xb1Lz-Th8cLEDBevvusb_9kXbScW2SNuuGKR03aQyBXplamcOTATdvZVpS0hGv25eH4gqz6wtqEeoCBF_5Y90R-bhmKk-lh-G4L3-VFoAfelHkxLfWEDUAsTNNjqz1US-A-BZfI9ebQ&quot;
}
</code></pre></div>



<a name="209692870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209692870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209692870">(Sep 10 2020 at 18:57)</a>:</h4>
<p>We don't support launch/patient yet. Right now (for connectathon) this is basically a user-facing standalone launch, though the scopes are prefixed with patient. Working on getting an actual patient-facing standalone launch set up for this, in which case you'd get the patient ID along with the access token.</p>



<a name="209694367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209694367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209694367">(Sep 10 2020 at 19:07)</a>:</h4>
<p>OK, that'll be really helpful when patient launch is in place (it's basically what we designed our scenarios around).</p>



<a name="209696145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209696145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209696145">(Sep 10 2020 at 19:21)</a>:</h4>
<p>Ok these clients will now use true patient-facing standalone launch. Please try again. I've put the patient portal login information in the spreadsheet.</p>



<a name="209696342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209696342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209696342">(Sep 10 2020 at 19:23)</a>:</h4>
<p>Awesome!</p>



<a name="209696487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209696487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209696487">(Sep 10 2020 at 19:24)</a>:</h4>
<p>I've got the end-to-end test running now. Thanks <span class="user-mention" data-user-id="279701">@Jake Fisher</span> !</p>



<a name="209708360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209708360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209708360">(Sep 10 2020 at 20:59)</a>:</h4>
<p>Whoops realized just now that the Connectathon2020AllObservations client wasn't actually allowed to search Observation?category=vital-signs (it was allowed to read them and to search other observation categories). That's updated now.</p>



<a name="209714080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209714080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209714080">(Sep 10 2020 at 21:50)</a>:</h4>
<p>Wow Jake, that's a nice &amp; scary auth screen :)</p>



<a name="209714714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209714714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209714714">(Sep 10 2020 at 21:56)</a>:</h4>
<p>Nice – same here, end-to-end tested!<br>
I tried <code>Observation?patient=eH8RPbKOmYpNJoL9ha.Uq9A3</code> and that gave an operation outcome with "required parameter missing" or similar<br>
And I tried <code>Observation?patient=eH8RPbKOmYpNJoL9ha.Uq9A3&amp;category=vital-signs</code> and that gave me a bundle of vitals<br>
And I tried <code>Observation?patient=eH8RPbKOmYpNJoL9ha.Uq9A3&amp;category=laboratory</code> and that gave me an empty bundle</p>



<a name="209715074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209715074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209715074">(Sep 10 2020 at 22:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191339">@Pascal Pfiffner</span>  yep - though it doesn't look as scary if developers fill out a data use questionnaire which is shown to patients instead. I didn't do that for these connectathon clients. :)</p>



<a name="209715158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209715158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209715158">(Sep 10 2020 at 22:00)</a>:</h4>
<p>Yeah that's what I assumed; but I like it, it should be scary!</p>



<a name="209777032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209777032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Carlson <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209777032">(Sep 11 2020 at 12:59)</a>:</h4>
<p>I'm getting an <code>invalid_request</code> when I try and hit the token endpoint using:</p>
<div class="codehilite"><pre><span></span><code>curl -i &quot;https://connectathon.epic.com/Interconnect-Fhir-OAuth/oauth2/token&quot; -H &quot;Content-Type: application/x-www-form-urlencoded&quot; -H &quot;Accept: application/json&quot; --data &quot;code=sYChMYd9WlCxjmYaV60IW48W1vR69_g3KIcA8XIcuHGofzhVTtJbvfeik60ApbcfQvl8mVzm7J9wsltZ2hG_NA8ia2F2RQ4DFYuPF4j2Cbn5iRj0GpraskxGoWZ1xKKH&amp;grant_type=authorization_code&amp;redirect_uri=http://localhost:8000/index.html&quot;
</code></pre></div>


<p>Any ideas what I am missing here?</p>



<a name="209784978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209784978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209784978">(Sep 11 2020 at 14:08)</a>:</h4>
<p><span class="user-mention" data-user-id="308473">@Keith Carlson</span>  How did you get that auth code? Those are one time use and only valid for a short amount of time (a few minutes).</p>



<a name="209785456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209785456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Carlson <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209785456">(Sep 11 2020 at 14:13)</a>:</h4>
<p>I got the auth code by using <code>https://connectathon.epic.com/Interconnect-Fhir-OAuth/oauth2/authorize?client_id=Connectathon2020AllObservations&amp;scope=launch/patient&amp;response_type=code&amp;redirect_uri=http://localhost:8000/index.html</code> and grabbing it from the uri</p>
<p>And yeah I figured it was short lived, when I was trying to exchange the code for the token I was doing that within a few minutes and still running into the <code>invalid_request</code></p>



<a name="209785631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209785631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209785631">(Sep 11 2020 at 14:14)</a>:</h4>
<p>Ok thought it was worth a check. I'll take a look.</p>



<a name="209785865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209785865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Carlson <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209785865">(Sep 11 2020 at 14:16)</a>:</h4>
<p>Okay, thanks. The curl command I was using looks good to you? Not sure if I'm missing something small there. It seems like other people are able to connect</p>



<a name="209788055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209788055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Fisher <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209788055">(Sep 11 2020 at 14:32)</a>:</h4>
<p>Ah - you need to pass the client_id in the body. I just added that to my CURL request and it's working.</p>
<p><code>curl -i "https://connectathon.epic.com/Interconnect-Fhir-OAuth/oauth2/token" -H "Content-Type: application/x-www-form-urlencoded" -H "Accept: application/json" --data "code=sYChMYd9WlCxjmYaV60IW48W1vR69_g3KIcA8XIcuHGofzhVTtJbvfeik60ApbcfQvl8mVzm7J9wsltZ2hG_NA8ia2F2RQ4DFYuPF4j2Cbn5iRj0GpraskxGoWZ1xKKH&amp;grant_type=authorization_code&amp;redirect_uri=http://localhost:8000/index.html&amp;client_id=Connectathon2020AllObservations"</code></p>
<p>(Added  <code>&amp;client_id=Connectathon2020AllObservations</code>)</p>



<a name="209789649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179170-smart/topic/C25%20--%20Testing%20with%20Epic/near/209789649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Carlson <a href="https://fhir.github.io/chat-archive/stream/179170-smart/topic/C25.20--.20Testing.20with.20Epic.html#209789649">(Sep 11 2020 at 14:45)</a>:</h4>
<p>Great! Thank you :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
