---
layout: page
title: "FHIR Chat  · $docref operation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24docref.20operation.html">$docref operation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="214879467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24docref%20operation/near/214879467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Castillo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24docref.20operation.html#214879467">(Oct 28 2020 at 18:31)</a>:</h4>
<p>Hello everyone,</p>
<p>I'm new to FHIR so apologies if this question has been asked before. Any ideas of to add the $docref operation to the DocumentReference call in C# code? Any examples? I'm currently reviewing the FHIR Library but can't find much.</p>
<p>We need something like this <a href="http://fhir.cerner.com/millennium/dstu2/infrastructure/document-reference/#example-3">http://fhir.cerner.com/millennium/dstu2/infrastructure/document-reference/#example-3</a> where we are passing the CCD LOINC code to get a CCD from Cerner. It looks like by default $docref isn't included in the DocumentReference call so instead of a CCD we are getting back documents.</p>
<p>Thanks in advance,</p>
<p>Victor</p>



<a name="214882118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24docref%20operation/near/214882118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24docref.20operation.html#214882118">(Oct 28 2020 at 18:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> <span class="user-mention" data-user-id="203235">@Ward Weistra</span></p>



<a name="214882290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24docref%20operation/near/214882290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24docref.20operation.html#214882290">(Oct 28 2020 at 18:54)</a>:</h4>
<p>something like <code>client.TypeOperation( "DocumentReference", "docref", . . . .)</code></p>



<a name="214883121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24docref%20operation/near/214883121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Castillo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24docref.20operation.html#214883121">(Oct 28 2020 at 19:01)</a>:</h4>
<p>This is a snippet of the code for reference, it returns documents but no CCD since I'm not passing $docref:</p>
<div class="codehilite"><pre><span></span><code>   public async Task&lt;WrappedApiResponseBody&gt; GetCcda(GetCcdaRequest request, Connection connection)
    {
        #region Validate inputs

        try
        {
            ValidateInputs(request, connection);
        }
        catch (ArgumentNullException e)
        {
            Log.Error(e);
            throw;
        }
        catch (ArgumentException e)
        {
            Log.Error(e);
            throw;
        }

        #endregion

        #region Query for DocumentReferences

        var client = await BuildFhirClient(connection);

        var results = await Search(client, request);

        #endregion

        #region Return bundle

        return new WrappedApiResponseBody(results.ToJson(), null);

        #endregion
    }
</code></pre></div>



<a name="214883435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24docref%20operation/near/214883435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24docref.20operation.html#214883435">(Oct 28 2020 at 19:03)</a>:</h4>
<p>See my answer above - use  <code>TypeOperation</code> to call $docref</p>



<a name="214950615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24docref%20operation/near/214950615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24docref.20operation.html#214950615">(Oct 29 2020 at 10:47)</a>:</h4>
<p><span class="user-mention" data-user-id="359731">@Victor Castillo</span> Also feel welcome to join the <a class="stream" data-stream-id="179171" href="/#narrow/stream/179171-dotnet">#dotnet</a> stream for a C# crowd!</p>



<a name="215028317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24docref%20operation/near/215028317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Castillo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24docref.20operation.html#215028317">(Oct 29 2020 at 21:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191912">Michele Mottini</span> <a href="#narrow/stream/179166-implementers/topic/.24docref.20operation/near/214883435">said</a>:</p>
<blockquote>
<p>See my answer above - use  <code>TypeOperation</code> to call $docref</p>
</blockquote>
<p>Hey Michele, </p>
<p>I tested your suggestion but TypeOperation returns a Resource instead of a Bundle. Do you have any other idea of how we can accomplish this? </p>
<p>Thanks, </p>
<p>Victor</p>



<a name="215030242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24docref%20operation/near/215030242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24docref.20operation.html#215030242">(Oct 29 2020 at 21:23)</a>:</h4>
<p>Bundles are resources, cast the returned value (assuming the server actually returned a bundle)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
