---
layout: page
title: "FHIR Chat  · ✔ $everything Operation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html">✔ $everything Operation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="270361727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270361727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohsen Jafari <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270361727">(Feb 02 2022 at 10:20)</a>:</h4>
<p>I ran the <a href="https://hapi.fhir.org/baseR4/Patient/$everything">https://hapi.fhir.org/baseR4/Patient/$everything</a> request against the public test server. I expected to receive patients along with their related resources, but the public test server only gave me patients' data and not any related resources. Am I wrong with something or did I misunderstand the functionality of the $everything operation?</p>



<a name="270379147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270379147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270379147">(Feb 02 2022 at 12:58)</a>:</h4>
<p>What _type values did you specify if any?</p>



<a name="270381734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270381734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohsen Jafari <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270381734">(Feb 02 2022 at 13:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="335936">Daniel Venton</span> <a href="#narrow/stream/179166-implementers/topic/.24everything.20Operation/near/270379147">said</a>:</p>
<blockquote>
<p>What _type values did you specify if any?</p>
</blockquote>
<p>Just the abovementioned query and nothing else. You can click on the link and you will see that it will only return the patients data and nothing about the related resources to the patients. I'm not sure what I should do in this regard.</p>



<a name="270386535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270386535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270386535">(Feb 02 2022 at 13:53)</a>:</h4>
<p>The spec for this seems to allow for the FHIR server to "do what it wants":</p>
<p>"the server is responsible for determining what resources to return as included resources (rather than the client specifying which ones)."</p>
<p><a href="https://www.hl7.org/fhir/patient-operation-everything.html">https://www.hl7.org/fhir/patient-operation-everything.html</a></p>



<a name="270390007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270390007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270390007">(Feb 02 2022 at 14:16)</a>:</h4>
<p>Once I jumped up to page 1000, I started seeing resources other than Patient.<br>
<a href="https://hapi.fhir.org/baseR4?_getpages=1b2b6134-35db-4ece-b5ee-0777dad75128&amp;_getpagesoffset=20000&amp;_count=20&amp;_pretty=true&amp;_bundletype=searchset">https://hapi.fhir.org/baseR4?_getpages=1b2b6134-35db-4ece-b5ee-0777dad75128&amp;_getpagesoffset=20000&amp;_count=20&amp;_pretty=true&amp;_bundletype=searchset</a></p>



<a name="270390591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270390591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohsen Jafari <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270390591">(Feb 02 2022 at 14:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="335936">Daniel Venton</span> <a href="#narrow/stream/179166-implementers/topic/.24everything.20Operation/near/270390007">said</a>:</p>
<blockquote>
<p>Once I jumped up to page 1000, I started seeing resources other than Patient.<br>
<a href="https://hapi.fhir.org/baseR4?_getpages=1b2b6134-35db-4ece-b5ee-0777dad75128&amp;_getpagesoffset=20000&amp;_count=20&amp;_pretty=true&amp;_bundletype=searchset">https://hapi.fhir.org/baseR4?_getpages=1b2b6134-35db-4ece-b5ee-0777dad75128&amp;_getpagesoffset=20000&amp;_count=20&amp;_pretty=true&amp;_bundletype=searchset</a></p>
</blockquote>
<p>I'm completely confused of the mechanism of the $evertything operation. Could someone explain a bit more.</p>



<a name="270391231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270391231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270391231">(Feb 02 2022 at 14:25)</a>:</h4>
<p>The FHIR spec for Patient $everything explains the basics of how it is intended to operate.  However, any particular FHIR server implementation may have its own variances, while still meeting the spec.   Since the example being used is for the HAPI server, it would be best to look at their implementation specs or ask for more information about the HAPI implementation in the <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a> channel.</p>



<a name="270393611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270393611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270393611">(Feb 02 2022 at 14:39)</a>:</h4>
<ol>
<li>Fetch all the patient resources the user is allowed to access.</li>
<li>Fetch all the clinical resources that reference the patients in step 1.</li>
<li>Optionally - Fetch all the referenced resources (Organization, Practitioner, ...) from all the items gathered in steps 1 and 2.</li>
<li>Pack all the resources from 1, 2 and 3 into a bundle and return (paged or unpaged).</li>
</ol>



<a name="270394058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270394058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270394058">(Feb 02 2022 at 14:42)</a>:</h4>
<p>Normally you would run patient $everything against a single patient resource, with a URL like /baseR4/Patient/[id]/$everything. The output of that should be a lot more manageable.</p>



<a name="270417562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270417562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270417562">(Feb 02 2022 at 16:52)</a>:</h4>
<p>This definition of the "patient compartment" might also help.    <a href="https://www.hl7.org/fhir/compartmentdefinition-patient.html">https://www.hl7.org/fhir/compartmentdefinition-patient.html</a></p>
<p>From spec page:<br>
"The server SHOULD return at least all resources that it has that are in the <strong>patient compartment</strong> for the identified patient(s)"</p>



<a name="270522561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270522561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohsen Jafari <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270522561">(Feb 03 2022 at 09:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="298707">John Silva</span> <a href="#narrow/stream/179166-implementers/topic/.24everything.20Operation/near/270417562">said</a>:</p>
<blockquote>
<p>This definition of the "patient compartment" might also help.    <a href="https://www.hl7.org/fhir/compartmentdefinition-patient.html">https://www.hl7.org/fhir/compartmentdefinition-patient.html</a></p>
<p>From spec page:<br>
"The server SHOULD return at least all resources that it has that are in the <strong>patient compartment</strong> for the identified patient(s)"</p>
</blockquote>
<p>But I don't think the HAPI public server does such a thing.</p>



<a name="270540659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20%24everything%20Operation/near/270540659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20.24everything.20Operation.html#270540659">(Feb 03 2022 at 12:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="410473">Mohsen Jafari</span> has marked this topic as resolved.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
