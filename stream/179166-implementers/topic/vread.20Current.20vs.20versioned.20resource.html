---
layout: page
title: "FHIR Chat  · vread Current vs versioned resource · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html">vread Current vs versioned resource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153957696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153957696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Watt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153957696">(May 10 2018 at 23:37)</a>:</h4>
<p>Hi All, If querying a resource using a vread  is there anything in the resource that indicates that the returned version is not the current version? I note that there is resource.active but the description appears to be functional - ie this record is active vs the version of the record resource is not active. Is there somewhere else that indicates this for the resource version?</p>



<a name="153957775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153957775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153957775">(May 11 2018 at 12:45)</a>:</h4>
<p>The 'active' flag only exists on Patient (and perhaps one or two other resources) and it applies to the record, not the version.  I'm not clear what the point of a declaration on resource that says "this is the current version" would be, given that such a claim could be invalidated milliseconds after it was retrieved.  Can you explain how you'd use such a flag?</p>



<a name="153959886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153959886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Watt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153959886">(May 14 2018 at 01:20)</a>:</h4>
<p>Maybe it's not significant but my thought process was if a client queried using a vread and the server returns the current version how does the client know that it's the current version? (without necessarily querying the same resource with a read) Alternatively if a server received a vread that is for the current version should it just return the current version or should it return something else such as a redirect to the read?</p>



<a name="153959900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153959900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153959900">(May 14 2018 at 05:18)</a>:</h4>
<p>If a server receives a vread, the expectation is that it will receive a response back, not a redirect.  Typically a server either wants "most recent" or "the version as it was referenced".  The knowledge of what's "current" is highly dynamic.</p>



<a name="153959930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153959930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Watt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153959930">(May 14 2018 at 06:18)</a>:</h4>
<p>So a vread that happens to be the most recent version is simply returned to the client.<br>
Given that current is dynamic is there anything that flags to a client that a historical version has been returned?</p>



<a name="153959959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153959959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153959959">(May 14 2018 at 06:38)</a>:</h4>
<p>Not right now.  Again, the question would be what the use-case is for the flag given that the absense of the flag doesn't mean that your version is still "current".</p>



<a name="153959974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153959974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153959974">(May 14 2018 at 07:07)</a>:</h4>
<p>I'm not sure why it should matter that a historical version is also current?</p>



<a name="153959984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153959984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153959984">(May 14 2018 at 07:29)</a>:</h4>
<p>All versions are historic to a client to any extend. The resource that a client 'just' received can be outdated the millisecond after. As such, the server would tell the client a lie if it said it was the current version - it can only be the newest within that split of transaction. It might have been the newest version retrieved at the time of the client request - but that  'newest' version can be stale right after you fetched it. Since it sounds like you are using versioned resources and that you will probably update your resources based on its version (which is great) you will probably encounter the version aware updates scheme - and you will know for sure if your resource is stale or not.</p>



<a name="153960224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Watt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960224">(May 14 2018 at 10:50)</a>:</h4>
<p>I agree with the arguments around not flagging a current version. The thought came up when working through vread on how to minimize the potential risk of action being taken on a stale resource - either know it's the most current or that it's not, given that a vread could potentially return either.</p>



<a name="153960226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960226">(May 14 2018 at 10:53)</a>:</h4>
<p>If you support the use of <a href="http://build.fhir.org/http.html#versionaware" target="_blank" title="http://build.fhir.org/http.html#versionaware">http://build.fhir.org/http.html#versionaware</a> you should not hit the case of running updates on stale data.</p>



<a name="153960228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Watt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960228">(May 14 2018 at 11:09)</a>:</h4>
<p>Agreed updates are covered with IfMatch checking. The action I was talking about was clinician action rather than a system action.</p>



<a name="153960269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960269">(May 14 2018 at 11:52)</a>:</h4>
<p>If it's relevant, the system can do a GET on the base URL looking for a response only if the data has changed eTag.  If you get a response, you've now got the current version and if nothing's changed, you haven't cost yourself much bandwidth.</p>



<a name="153960619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960619">(May 14 2018 at 18:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> - if you're looking for performance then use the HTTP HEAD operation in combination with ETag. It saves you the body</p>



<a name="153960621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960621">(May 14 2018 at 18:20)</a>:</h4>
<p><span class="user-mention" data-user-id="194153">@Paul Watt</span> Ain't it more a task for the software to do such checks and verifications?</p>



<a name="153960627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960627">(May 14 2018 at 18:37)</a>:</h4>
<p>Yes, but if you want to make sure you have the current version, you'd actually want the full payload if there is one</p>



<a name="153960634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960634">(May 14 2018 at 20:18)</a>:</h4>
<p>Ain't that what HEAD and ETag is all about? Not specifically load and serialize the entire resource but just checking the version?</p>



<a name="153960692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960692">(May 14 2018 at 20:58)</a>:</h4>
<p>Right.  But if your problem is "I have some version and want to know if I have the current version before I update", then you'll always want to actually retrieve the current version if you don't already have it.  So far we haven't heard a use-case to just check whether I've got the current version, but have no interest in retrieving the current version if I don't have it.  If there were such a use-case, then HEAD + ETag would be the solution.</p>



<a name="153960709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960709">(May 14 2018 at 21:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> - Performance ... thats your reason. And the fact that you can flag parts of your model as guaranteed outdated. If your resources are costly to transfer because of size or whatever other reason, then it is a perfectly valid reason for using just HEAD and ETag. And usually, performance ain't fit to model as use cases, IMHO.</p>



<a name="153960713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960713">(May 14 2018 at 21:13)</a>:</h4>
<p>Yes - but if you need the current version to update, you're going to then have to query for the current version anyhow, so haven't saved yourself anything.</p>



<a name="153960752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Watt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960752">(May 14 2018 at 22:41)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="194153">@Paul Watt</span> Ain't it more a task for the software to do such checks and verifications?</p>
</blockquote>
<p>Yes,  could definitely pass on the responsibility to the client application.</p>



<a name="153960755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960755">(May 14 2018 at 22:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Right ... but if the operation is costly you might want to postpone that, and updates to that resource. You can simply mark it for later retrieval at the point of when you need to update it and not before that.</p>



<a name="153960962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153960962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153960962">(May 15 2018 at 11:31)</a>:</h4>
<p>better to retrieve the current version with the if-modified-since header.<br>
<a href="http://hl7.org/fhir/http.html#cread" target="_blank" title="http://hl7.org/fhir/http.html#cread">http://hl7.org/fhir/http.html#cread</a><br>
This does what you're looking for, returns you content if its changed, otherwise like the head.</p>



<a name="153961401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/vread%20Current%20vs%20versioned%20resource/near/153961401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/vread.20Current.20vs.20versioned.20resource.html#153961401">(May 15 2018 at 21:59)</a>:</h4>
<p>and thats why one can only love these open forums because eventually an awesome response pops up - <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> +1</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
