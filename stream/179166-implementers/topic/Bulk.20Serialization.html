---
layout: page
title: "FHIR Chat  · Bulk Serialization · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html">Bulk Serialization</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153880844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880844">(Apr 03 2017 at 21:44)</a>:</h4>
<p>For bulk serialization (to support research use cases), has there been any consideration or talk of FHIR supporting parquet to maximize efficiency? </p>



<a name="153880851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880851">(Apr 03 2017 at 22:14)</a>:</h4>
<p>parquet?</p>



<a name="153880853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880853">(Apr 03 2017 at 22:17)</a>:</h4>
<p>Presumably <a href="https://parquet.apache.org/" target="_blank" title="https://parquet.apache.org/">https://parquet.apache.org/</a></p>



<a name="153880854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880854">(Apr 03 2017 at 22:19)</a>:</h4>
<p>given that FHIR is based on tree structures with internal cardinality &gt; 1, tables are problematic</p>



<a name="153880858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880858">(Apr 03 2017 at 22:38)</a>:</h4>
<p>A parquet schema can specify "repeated" fields, which could be a straightforward way to handle cardinality &gt; 1.</p>



<a name="153880859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880859">(Apr 03 2017 at 22:39)</a>:</h4>
<p>nested repeated? </p>



<a name="153880860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880860">(Apr 03 2017 at 22:41)</a>:</h4>
<p>I'm not an expert, but the doc says, "Parquet is built from the ground up with complex nested data structures in mind ..."  <a href="https://parquet.apache.org/documentation/latest/" target="_blank" title="https://parquet.apache.org/documentation/latest/">https://parquet.apache.org/documentation/latest/</a></p>



<a name="153880861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880861">(Apr 03 2017 at 22:45)</a>:</h4>
<p>hmm. well, it would be interesting to investigate. As is also the R data_gram format</p>



<a name="153880873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880873">(Apr 04 2017 at 01:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> How can we help with the investigation process?  We have an internal proof of concept of sorts where we are using Parquet files with (Apache) Spark.  It is based on FHIR resource schema.  Would it help if I emailed you a couple example Parquet files?</p>



<a name="153880881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880881">(Apr 04 2017 at 03:07)</a>:</h4>
<p>it would help if they were publicly available. let me look at them and then propose a way to engage the community</p>



<a name="153880925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geoff Low <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880925">(Apr 04 2017 at 17:01)</a>:</h4>
<p>Interested to hear what particular research use cases are being tracked; relating to drug trial usage or more population health research?</p>



<a name="153880930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153880930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153880930">(Apr 04 2017 at 20:26)</a>:</h4>
<p>Hi, I'm a colleague of Michelle's and have some context behind this question. We've found Parquet to be interesting because: </p>
<p>1.) It is flexible enough to encode FHIR resources with arbitrary nested or repeated elements. I've attached examples of a (tiny) Parquet file of Observation resources and the Parquet schema it uses. (The schema itself was generated from resource definitions, and the Parquet file was generated by code that encodes FHIR resources using the HAPI FHIR API. This is proof-of-concept work so I can't rule out bugs in this yet, but we will be able to share/open source/contribute this if that would be of interest.)</p>
<p>2.) Parquet is an efficient binary format with significant mind share in many analytic tools, and can be easily and efficiently loaded into them and queried. </p>
<p>Our specific use case is centered around deep analytics of population health data. The ability to share very large FHIR datasets that can be imported and queried supports that, and surely a number of other needs as well. </p>
<p>Side node: Since Parquet is binary format, users will need something like parquet-tools (linked below) to inspect it directly, or import it into a system that understands the format.</p>
<p>In any case, I'm happy to engage on this topic in anyway that could help. </p>
<p>[1]<br>
<a href="https://github.com/apache/parquet-mr/tree/master/parquet-tools" target="_blank" title="https://github.com/apache/parquet-mr/tree/master/parquet-tools">https://github.com/apache/parquet-mr/tree/master/parquet-tools</a></p>
<p>EDIT: might be having trouble with the attachment, but here is a link to the Parquet schema generated from the resource definition: <a href="https://gist.github.com/rbrush/af4b8f7bed8ec3cd5fc34419325c4e86" target="_blank" title="https://gist.github.com/rbrush/af4b8f7bed8ec3cd5fc34419325c4e86">https://gist.github.com/rbrush/af4b8f7bed8ec3cd5fc34419325c4e86</a></p>
<p><a href="/user_uploads/10155/oajiDFsSCJ8GOuxxsSEA8VrS/obs_example_parquet_schema.txt" target="_blank" title="obs_example_parquet_schema.txt">obs_example_parquet_schema.txt</a> </p>
<p><a href="/user_uploads/10155/bgCCc1eB8zJf8jwf2fW06sH-/obs_example.snappy.parquet" target="_blank" title="obs_example.snappy.parquet">obs_example.snappy.parquet</a></p>



<a name="153881051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153881051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153881051">(Apr 06 2017 at 00:26)</a>:</h4>
<p>thanks, can you comment on how the parquet format can be used? how many analytical tools support it? How about R and the related AI community</p>



<a name="153881164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153881164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153881164">(Apr 06 2017 at 20:44)</a>:</h4>
<p>Parquet is commonly used in conjunction with Spark (<a href="http://spark.apache.org" target="_blank" title="http://spark.apache.org">spark.apache.org</a>) and/or Hadoop.  That ecosystem also includes Spark/R (<a href="http://spark.apache.org/docs/latest/sparkr.html" target="_blank" title="http://spark.apache.org/docs/latest/sparkr.html">http://spark.apache.org/docs/latest/sparkr.html</a>).</p>



<a name="153881182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153881182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153881182">(Apr 06 2017 at 21:53)</a>:</h4>
<p>I can't find an assigned mime for Parquet format?</p>



<a name="153881195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153881195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153881195">(Apr 06 2017 at 23:01)</a>:</h4>
<p>I couldn't find an assigned MIME type for Parquet format either, although the related Apache Thrift format does have assigned mimes.  For FHIR, maybe application/fhir+parquet would make sense.</p>



<a name="153881207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153881207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Brush <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153881207">(Apr 07 2017 at 01:25)</a>:</h4>
<p>As for how Parquet is used: it can be read in R and converted to data frames via Apache Spark, but is also natively supported by a number of open source tools (Apache projects like Spark, Impala, and Presto, as well as Java, Python and C++ libraries) and several scalable database systems (like Amazon Athena, Google BigQuery, Microsoft PolyBase, and HP Vertica). I'm sure I'm missing others.</p>
<p>Our goal is to share large datasets (many terabytes) with users looking to do deep analysis in a standard format that is easily plugged into a variety of tools, and FHIR-in-Parquet makes for a good combination of standards, scalability, and mindshare across systems.</p>



<a name="153881209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bulk%20Serialization/near/153881209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bulk.20Serialization.html#153881209">(Apr 07 2017 at 02:19)</a>:</h4>
<p>it's certainly a problem that we're interested in </p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
