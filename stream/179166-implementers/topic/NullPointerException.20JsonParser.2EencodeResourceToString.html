---
layout: page
title: "FHIR Chat  · NullPointerException JsonParser.encodeResourceToString · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NullPointerException.20JsonParser.2EencodeResourceToString.html">NullPointerException JsonParser.encodeResourceToString</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="273488648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NullPointerException%20JsonParser.encodeResourceToString/near/273488648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tia Cummings <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NullPointerException.20JsonParser.2EencodeResourceToString.html#273488648">(Feb 28 2022 at 13:32)</a>:</h4>
<p>We have an interceptor that is trying to print out the outgoing resource on Pointcut.OUTGOING_SERVER_RESPONSE and we're getting an NPE when calling the JsonParser.encodeResourceToString() method. I did some debugging and it looks like one of the contained resources has a null id, so somewhere in the hapi code, when id.getValue() is called, id is null, BUT our server prints out the response fine to the end user, we just can't use the jsonparser to log the response. This seems to happen when we get a heavy load of calls. Is anyone aware if the IParser is thread safe?<br>
This is the stacktrace that we're getting:</p>
<p>java.lang.NullPointerException: null</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeChildElementToStreamWriter(JsonParser.java:309)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeCompositeElementChildrenToStreamWriter(JsonParser.java:399)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeCompositeElementToStreamWriter(JsonParser.java:587)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeResourceToJsonStreamWriter(JsonParser.java:741)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeResourceToJsonStreamWriter(JsonParser.java:625)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeChildElementToStreamWriter(JsonParser.java:339)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeCompositeElementChildrenToStreamWriter(JsonParser.java:497)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeCompositeElementToStreamWriter(JsonParser.java:587)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeChildElementToStreamWriter(JsonParser.java:291)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeCompositeElementChildrenToStreamWriter(JsonParser.java:501)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeCompositeElementToStreamWriter(JsonParser.java:587)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeResourceToJsonStreamWriter(JsonParser.java:741)</p>
<p>at ca.uhn.fhir.parser.JsonParser.encodeResourceToJsonStreamWriter(JsonParser.java:625)</p>
<p>at ca.uhn.fhir.parser.JsonParser.doEncodeResourceToJsonLikeWriter(JsonParser.java:163)</p>
<p>at ca.uhn.fhir.parser.JsonParser.doEncodeResourceToWriter(JsonParser.java:170)</p>
<p>at ca.uhn.fhir.parser.BaseParser.encodeResourceToWriter(BaseParser.java:399)</p>
<p>at ca.uhn.fhir.parser.BaseParser.encodeResourceToWriter(BaseParser.java:383)</p>
<p>at ca.uhn.fhir.parser.BaseParser.encodeResourceToString(BaseParser.java:372)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
