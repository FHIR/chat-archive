---
layout: page
title: "FHIR Chat  · Profiling of complex structures · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html">Profiling of complex structures</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153879911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879911">(Mar 27 2017 at 18:16)</a>:</h4>
<p>Starting work to update my implementation guide for STU3.  Does anyone know if there is a way to profile an element that is defined as a reference to another structure?<br>
From <a href="http://wiki.hl7.org/?title=FHIR_Spreadsheet_Profile_Authoring" target="_blank" title="http://wiki.hl7.org/?title=FHIR_Spreadsheet_Profile_Authoring">http://wiki.hl7.org/?title=FHIR_Spreadsheet_Profile_Authoring</a> :</p>
<div class="codehilite"><pre>For complex structures (which includes profiled simple structures with nested elements):

 You can say &quot;@some.complex.element.path&quot; or &quot;@[Element Profile Name]&quot; to say that the type for the element should be a complex structure already defined elsewhere within the resource.
</pre></div>



<a name="153879912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879912">(Mar 27 2017 at 18:19)</a>:</h4>
<p>Example:  PlanDefinition.action.action  (defined as type '@PlanDefinition.action' in plandefinition-spreadsheet.xml of the spec)</p>



<a name="153879927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879927">(Mar 27 2017 at 19:09)</a>:</h4>
<p>are you looking for ElementDefinition.type.targetProfile?</p>



<a name="153879935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879935">(Mar 27 2017 at 19:22)</a>:</h4>
<p>possibly; i'm not familiar with that one and so i'll go look now.  in the meantime, i just committed my stripped down sample in case you/anyone interested would like to help crack this nut (sent the same sample to <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> a while ago but I don't think he's had chance to look into it yet)</p>



<a name="153879936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879936">(Mar 27 2017 at 19:22)</a>:</h4>
<p><a href="https://github.com/lmsurpre/plandefinition-profile-example" target="_blank" title="https://github.com/lmsurpre/plandefinition-profile-example">https://github.com/lmsurpre/plandefinition-profile-example</a></p>



<a name="153879941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879941">(Mar 27 2017 at 19:33)</a>:</h4>
<p>so far i've tried a bunch of stuff, but I included in that sample what I felt to be the most promising two ways:<br>
1. as a single structure where i include the subelements of the complex element i'm trying to profile (singleStructure)<br>
2. tried to define a separate structure based on PlanDefinition.action for the profile of PlanDefinition.action.action</p>
<p>#1 is complaining that my differential doesn't match my snapshot (which makes sense since the sub-element isn't repeated in the snapshot)</p>
<p>#2 is giving me this:</p>



<a name="153879942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879942">(Mar 27 2017 at 19:33)</a>:</h4>
<div class="codehilite"><pre>java.lang.Exception: exception parsing pack /Users/lmsurpre/svn/fhir/NCCN-simple/resources/plandefinition-order-template-simple-spreadsheet-split: Unhandled case
    at org.hl7.fhir.igtools.spreadsheets.IgSpreadsheetParser.parse(IgSpreadsheetParser.java:204)
    at org.hl7.fhir.igtools.publisher.Publisher.loadSpreadsheet(Publisher.java:1247)
    at org.hl7.fhir.igtools.publisher.Publisher.loadSpreadsheets(Publisher.java:1231)
    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1040)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:268)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:3263)
Caused by: java.lang.Exception: Unhandled case
    at org.hl7.fhir.igtools.spreadsheets.TypeParser.parse(TypeParser.java:107)
    at org.hl7.fhir.igtools.spreadsheets.TypeParser.parse(TypeParser.java:46)
    at org.hl7.fhir.igtools.spreadsheets.IgSpreadsheetParser.processLine(IgSpreadsheetParser.java:751)
    at org.hl7.fhir.igtools.spreadsheets.IgSpreadsheetParser.parseProfileSheet(IgSpreadsheetParser.java:268)
    at org.hl7.fhir.igtools.spreadsheets.IgSpreadsheetParser.parse(IgSpreadsheetParser.java:178)
</pre></div>



<a name="153879944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879944">(Mar 27 2017 at 19:34)</a>:</h4>
<p>I tried using this syntax in the 'Type' column:  "{#subtask}"  (based on my reading of <a href="http://wiki.hl7.org/index.php?title=FHIR_Spreadsheet_Authoring#Element_Definition_Columns" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_Spreadsheet_Authoring#Element_Definition_Columns">http://wiki.hl7.org/index.php?title=FHIR_Spreadsheet_Authoring#Element_Definition_Columns</a> )</p>



<a name="153879950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879950">(Mar 27 2017 at 21:08)</a>:</h4>
<p>did some more reading and I don't think ElementDefinition.type.targetProfile is right.  That seems to be about elements of type Reference.  what I was trying to ask is whether its possible to profile elements that are defined by a 'contentReference'</p>



<a name="153879951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879951">(Mar 27 2017 at 21:09)</a>:</h4>
<p>per eld-5, if the element definition has a contentReference, it cannot have type.  so i guess the question i have is whether there existing anything like a profile or targetProfile for a contentReference</p>



<a name="153879952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879952">(Mar 27 2017 at 21:10)</a>:</h4>
<p>if not, i'm thinking i need to redo all my constraints as invariants which i'd rather not do</p>



<a name="153879953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879953">(Mar 27 2017 at 21:11)</a>:</h4>
<p>i want to say things like "PlanDefinition.action must have one or more subaction and those subactions must have codes like x, y, z, etc"</p>



<a name="153879954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879954">(Mar 27 2017 at 21:16)</a>:</h4>
<p>so there's no way to profile a content reference because you should just unroll the content reference and go ahead and make rules about it </p>



<a name="153879955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879955">(Mar 27 2017 at 21:17)</a>:</h4>
<p>.e.g replace the content reference with the content being referred to </p>



<a name="153879963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879963">(Mar 27 2017 at 21:26)</a>:</h4>
<p>cool, that is why i tried first.  but the spreadsheet tooling doesn't seem to handle that when it generates the snapshot (i.e. the differential lists the extra elements but that doesn't match the snapshot)</p>



<a name="153879964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879964">(Mar 27 2017 at 21:26)</a>:</h4>
<p>is this a place where the differential is allowed to differ from the snapshot?   or do i need to scrap the tooling and do snapshot by hand?</p>



<a name="153879965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879965">(Mar 27 2017 at 21:35)</a>:</h4>
<p>FWIW the only other example of a profiled contentReference i could find was <a href="http://build.fhir.org/consentdirective.html" target="_blank" title="http://build.fhir.org/consentdirective.html">http://build.fhir.org/consentdirective.html</a> and it seems broken there too:<br>
<a href="/user_uploads/10155/qvXFb_K62HO2Ulk1XZxdcVVZ/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/qvXFb_K62HO2Ulk1XZxdcVVZ/pasted_image.png" target="_blank" title="pasted_image.png"><img src="/user_uploads/10155/qvXFb_K62HO2Ulk1XZxdcVVZ/pasted_image.png"></a></div>



<a name="153879966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879966">(Mar 27 2017 at 21:37)</a>:</h4>
<p>I think if 'action' was defined as its own re-usable Type  (e.g. like 'Dosage') then I could create a profile for it a lot easier.  any advantage to using this 'contentReference' thing over something like that?  ...doesn't seem to be very widely used</p>



<a name="153879971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879971">(Mar 27 2017 at 21:51)</a>:</h4>
<p>don't know. let me investigate</p>



<a name="153879996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153879996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153879996">(Mar 28 2017 at 00:48)</a>:</h4>
<p>I need to debug - can you send me an example?</p>



<a name="153880002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880002">(Mar 28 2017 at 02:00)</a>:</h4>
<p>hi graham, i tried to provide an example at <a href="https://github.com/lmsurpre/plandefinition-profile-example" target="_blank" title="https://github.com/lmsurpre/plandefinition-profile-example">https://github.com/lmsurpre/plandefinition-profile-example</a></p>



<a name="153880003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880003">(Mar 28 2017 at 02:07)</a>:</h4>
<p>as mentioned above this version currently fails with the following error:</p>
<div class="codehilite"><pre>java.lang.Exception: Exception loading http://example.org/fhir/StructureDefinition/order-template: Snapshot for http://example.org/fhir/StructureDefinition/order-template does not contain differential element with id: PlanDefinition:ordertemplate.action.action:subtask.label
    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1559)
    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:1323)
    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:272)
    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:3263)
Caused by: org.hl7.fhir.exceptions.DefinitionException: Snapshot for http://example.org/fhir/StructureDefinition/order-template does not contain differential element with id: PlanDefinition:ordertemplate.action.action:subtask.label
    at org.hl7.fhir.dstu3.conformance.ProfileUtilities.generateSnapshot(ProfileUtilities.java:351)
    at org.hl7.fhir.dstu3.context.SimpleWorkerContext.seeProfile(SimpleWorkerContext.java:263)
    at org.hl7.fhir.dstu3.context.SimpleWorkerContext.seeResource(SimpleWorkerContext.java:213)
    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1557)
    ... 3 more
</pre></div>



<a name="153880004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880004">(Mar 28 2017 at 02:08)</a>:</h4>
<p>if i remove the offending row from the spreadsheet then it produces a StructureDefinition like this:  <a href="/user_uploads/10155/6XDMJSqvvJ7_6ODWz2lsJo3P/StructureDefinition-order-template.xml" target="_blank" title="StructureDefinition-order-template.xml">StructureDefinition-order-template.xml</a></p>



<a name="153880005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880005">(Mar 28 2017 at 02:09)</a>:</h4>
<p>in this example, I am trying to specify the cardinality of a property (label) of the PlanDefinition.action.action  ...any tips/pointers much appreciated</p>



<a name="153880007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880007">(Mar 28 2017 at 03:24)</a>:</h4>
<p>can make a gForge task for this please</p>



<a name="153880008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880008">(Mar 28 2017 at 03:26)</a>:</h4>
<p>yes, will do now</p>



<a name="153880010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880010">(Mar 28 2017 at 03:26)</a>:</h4>
<p>thanks</p>



<a name="153880011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880011">(Mar 28 2017 at 03:27)</a>:</h4>
<p>in single structure?</p>



<a name="153880012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880012">(Mar 28 2017 at 03:29)</a>:</h4>
<p>basically i've tried a bunch of things hoping something would stick.  in single structure i tried to just list the extra elements (unwrap the contentReference as you say)</p>



<a name="153880013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880013">(Mar 28 2017 at 03:30)</a>:</h4>
<p>in my other version (which i call the 'split' version), i tried to define a separate structure just to profile PlanDefinition.action -- but I couldn't seem to make that work either (i think it has to be its own standalone resource/datatype to allow that?)</p>



<a name="153880015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880015">(Mar 28 2017 at 03:35)</a>:</h4>
<p>opened <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13139" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13139">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13139</a></p>



<a name="153880017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880017">(Mar 28 2017 at 03:44)</a>:</h4>
<p>ok, so this one: <a href="/user_uploads/10155/wmb8zKQLrDEKV5fPuqriIsXF/test-ig-lee.xml" target="_blank" title="test-ig-lee.xml">test-ig-lee.xml</a> </p>



<a name="153880018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880018">(Mar 28 2017 at 03:45)</a>:</h4>
<p>that's correct for slicing action at the root level. </p>



<a name="153880019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880019">(Mar 28 2017 at 03:45)</a>:</h4>
<p>with a discriminator of label (which is pretty crappy, but valid and sufficient for our purpose now)</p>



<a name="153880020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880020">(Mar 28 2017 at 03:45)</a>:</h4>
<p>can you check that and tell me whether it makes sense, and I'll look at slicing the next level</p>



<a name="153880033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880033">(Mar 28 2017 at 06:12)</a>:</h4>
<p>This one: <a href="/user_uploads/10155/8-z7QIKo4KSsqokEyCYlwIHf/test-ig-lee.xml" target="_blank" title="test-ig-lee.xml">test-ig-lee.xml</a> - it works now</p>



<a name="153880422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880422">(Mar 30 2017 at 18:55)</a>:</h4>
<p>Sorry, just getting back to this now (I tried it right away but it seemed I needed to wait for the new ig publisher jar and fhir build was broken at that time)</p>



<a name="153880426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880426">(Mar 30 2017 at 19:03)</a>:</h4>
<p>after downloading the latest jar from <a href="http://build.fhir.org/downloads" target="_blank" title="http://build.fhir.org/downloads">http://build.fhir.org/downloads</a>, I confirm it builds for me.  in my case, I don't even think I need the slicing (because each sub-action at a specific level will be the same), and it worked there as well</p>



<a name="153880427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880427">(Mar 30 2017 at 19:04)</a>:</h4>
<p>one thing i noticed is that when slicing is used, the snapshot still contains this ugly 'Unknown reference to #PlanDefinition.ordertemplate.action' text<br>
<a href="/user_uploads/10155/YY217A6P9QtaG3wSoNp1Lytf/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/YY217A6P9QtaG3wSoNp1Lytf/pasted_image.png" target="_blank" title="pasted_image.png"><img src="/user_uploads/10155/YY217A6P9QtaG3wSoNp1Lytf/pasted_image.png"></a></div>



<a name="153880428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880428">(Mar 30 2017 at 19:04)</a>:</h4>
<p>hmm. I will investigate</p>



<a name="153880429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880429">(Mar 30 2017 at 19:05)</a>:</h4>
<p>in my version without slicing, i don't see that</p>



<a name="153880432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880432">(Mar 30 2017 at 19:06)</a>:</h4>
<p>however, i just tried adding a third level (a sub-sub-action) and this is where things got interesting...  the jar seems to be stuck (maybe a endless loop somewhere due to the recursive nature of this)?</p>



<a name="153880433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880433">(Mar 30 2017 at 19:06)</a>:</h4>
<p>i will deliver this updated sample to that github project in case you find some time to look</p>



<a name="153880434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20of%20complex%20structures/near/153880434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20of.20complex.20structures.html#153880434">(Mar 30 2017 at 19:06)</a>:</h4>
<p>i havn't tried the 3rd level with slicing yet (i assume it will be the same story)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
