---
layout: page
title: "FHIR Chat  · Normative (breaking?) change to Bundle fullUrl requirements · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html">Normative (breaking?) change to Bundle fullUrl requirements</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="255151177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/255151177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#255151177">(Sep 28 2021 at 02:22)</a>:</h4>
<p>We're proposing to refine and slightly loosen the requirements for fullUrls on Bundle.entry to more clearly reflect what our original intention was (as well as what's useful/appropriate).  However, loosening normative requirements is technically a breaking change, so we're seeking community review and feedback on this proposed clarification.  If you implement Bundles - and in particular batch or transaction, please read <a href="http://jira.hl7.org/browse/FHIR-31354">FHIR#31354</a> and comment here on whether you agree or disagree with the proposed change.</p>



<a name="255205431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/255205431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#255205431">(Sep 28 2021 at 12:10)</a>:</h4>
<p>What does this statement mean; can you give an example?</p>
<p>"invoking or responding to an operation where the body is not a single identified resource; "</p>



<a name="255224323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/255224323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#255224323">(Sep 28 2021 at 14:20)</a>:</h4>
<p>If you're invoking $validate and are passing in a resource that 'exists' somewhere, the fullUrl would be the location of that resource.  However, the OperationOutcome you get back wouldn't have a resource id and doesn't exist on a specific server, so no fullUrl would be needed.  If invoking $graphql, there's no resource payload on the request at all, so there also wouldn't be a fullUrl.</p>



<a name="255224353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/255224353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#255224353">(Sep 28 2021 at 14:20)</a>:</h4>
<p>Feedback on how to be clearer is welcome.</p>



<a name="255231993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/255231993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Corey Spears <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#255231993">(Sep 28 2021 at 15:05)</a>:</h4>
<p>Does this affect only batch and transaction bundles? Document bundles with use of fullUrl feels a little bit wonky. It is fine if the resource fullURL (when it is a url and not a urn) exists on the server that the document exists on, but there is no guarantee of that (the document itself may have passed through several servers) and there is no guarantee that the entry resources exist outside of the document. </p>
<p>This has been a point of some confusion that I think we may see more of when FHIR native documents become more prevalent. We should at least have clearer guidance regarding how this should work and what the expectations are (more clearly laid out) or consider taking another look at this to see if there is a way to simplify.</p>



<a name="255270499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/255270499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#255270499">(Sep 28 2021 at 18:10)</a>:</h4>
<p>In a document Bundle the fullUrl is necessary for references among the resources in the Bundle, isn't it?</p>



<a name="255273033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/255273033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Corey Spears <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#255273033">(Sep 28 2021 at 18:25)</a>:</h4>
<p>Yes, that is the way it is currently defined, though it could be more explicit in the documents documentation. The FHIR Documents section (<a href="https://www.hl7.org/fhir/documents.html">https://www.hl7.org/fhir/documents.html</a>) doesn't even mention fullUrl.</p>



<a name="255279394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/255279394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#255279394">(Sep 28 2021 at 19:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191529">@Corey Spears</span> we need fullUrl in documents when we do not have identifiable resources (e.g. CDA to FHIR transformation)</p>



<a name="255281501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/255281501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#255281501">(Sep 28 2021 at 19:14)</a>:</h4>
<p>fullUrl is needed any time resolution is necessary - which is the case for all entries in a document or message and may be true for some entries in transactions - we appear to presume it's also always true for 'collection' Bundles, though there's no documented requirement there.  We've also asserted that It's true when the entries correspond to entries that represent content available on a server, though it's not entirely clear to me why we require this.</p>



<a name="256631217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/256631217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amy Li <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#256631217">(Oct 07 2021 at 18:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179166-implementers/topic/Normative.20.28breaking.3F.29.20change.20to.20Bundle.20fullUrl.20requirements/near/255281501">said</a>:</p>
<blockquote>
<p>fullUrl is needed any time resolution is necessary - which is the case for all entries in a document or message and may be true for some entries in transactions - we appear to presume it's also always true for 'collection' Bundles, though there's no documented requirement there.  We've also asserted that It's true when the entries correspond to entries that represent content available on a server, though it's not entirely clear to me why we require this.</p>
</blockquote>
<p>Hi Lloyd, <br>
the requirements around Bundle.fullUrl seems going backward from build to build of the validator v3.0.2.  What I mean is that in the older builds of the _cli.jar validator, it never complained about missing Bundle.fullUrl for OperationOutcome entry in the Bundle.  In the new builds since 2021-02-18, the validator starts to raise error for the same Bundle document I have which is a searchset.   The error is </p>
<p>Error @ Bundle.entry[1] (line 733, col12) : Except for transactions and batches, each entry in a Bundle must have a fullUrl which is the identity of the resource in the entry  </p>
<p>Is this the requirement that you are trying to loosen?  If not what is the reason for that a fullUrl is now needed for OperationOutcome in the Bundle?</p>
<p>Thanks,</p>
<p>Amy</p>



<a name="256634082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/256634082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#256634082">(Oct 07 2021 at 19:17)</a>:</h4>
<p>The rule was always there (and is, in fact tighter than it needs to be).  We're trying to create additional clarity in R5.  Feel free to submit a change request around this, though there's also a proposal to move OperationOutcome in a Bundle outside of entry entirely and deprecate that approach.</p>



<a name="256651354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normative%20%28breaking%3F%29%20change%20to%20Bundle%20fullUrl%20requirements/near/256651354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amy Li <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normative.20(breaking.3F).20change.20to.20Bundle.20fullUrl.20requirements.html#256651354">(Oct 07 2021 at 21:15)</a>:</h4>
<p>Thank you Lloyd.<br>
It makes perfect sense to move OperationOutcome outside of Bundle.entry.  For one obvious reason, OperationOutcome is not counted in the <a href="http://Bundle.total">Bundle.total</a> and for another it has different characteristics as other resources.  I would definitely welcome this change in the future releases.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
