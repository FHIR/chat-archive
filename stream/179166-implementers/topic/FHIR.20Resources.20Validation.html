---
layout: page
title: "FHIR Chat  · FHIR Resources Validation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Resources.20Validation.html">FHIR Resources Validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="198770810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Resources%20Validation/near/198770810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Radharani Sonnathi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Resources.20Validation.html#198770810">(May 26 2020 at 14:36)</a>:</h4>
<p>Hi I am relatively new to FHIR and and now working on a project to do FHIR resources validation. This is for DSTU3 and using HAPI FHIR Validator 4.2.0 . I have couple of questions</p>
<p>1) How to validate  snomed ,rxnorm codes and any other external codes  to see that codes in our fhir response json are valid? <br>
2)  Secondly I am testing patient resource and it has extensions for Race and Ethnicity. I did  add structuredefinitions, valuesets  to the validator and ran the program. It is throwing NullPointerException  </p>
<p>Exception in thread "main" java.lang.NullPointerException<br>
    at org.hl7.fhir.r5.model.Element.getExtensionString(Element.java:419)<br>
    at org.hl7.fhir.r5.model.ElementDefinition$TypeRefComponent.getWorkingCode(ElementDefinition.java:2285)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.checkChild(InstanceValidator.java:4390)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:4376)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.checkExtension(InstanceValidator.java:1627)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.checkChild(InstanceValidator.java:4495)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:4376)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.start(InstanceValidator.java:3287)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.validateResource(InstanceValidator.java:5047)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:851)<br>
    at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:684)<br>
    at org.hl7.fhir.common.hapi.validation.ValidatorWrapper.validate(ValidatorWrapper.java:141)<br>
    at org.hl7.fhir.dstu3.hapi.validation.FhirInstanceValidator.validate(FhirInstanceValidator.java:288)<br>
    at org.hl7.fhir.dstu3.hapi.validation.BaseValidatorBridge.doValidate(BaseValidatorBridge.java:20)<br>
    at org.hl7.fhir.dstu3.hapi.validation.BaseValidatorBridge.validateResource(BaseValidatorBridge.java:43)<br>
    at org.hl7.fhir.dstu3.hapi.validation.FhirInstanceValidator.validateResource(FhirInstanceValidator.java:59)<br>
    at ca.uhn.fhir.validation.FhirValidator.validateWithResult(FhirValidator.java:245)<br>
    at ca.uhn.fhir.validation.FhirValidator.validateWithResult(FhirValidator.java:200)<br>
    at com.ecw.fhir.validator.ValidatorTest.main(ValidatorTest.java:171)</p>
<p>I am using R3 but it is using object from R5. My sample json for extension is<br>
"extension": [<br>
    {<br>
      "url": "<a href="http://hl7.org/fhir/us/core/StructureDefinition/us-core-race">http://hl7.org/fhir/us/core/StructureDefinition/us-core-race</a>",<br>
      "extension": [<br>
        {<br>
          "url": "ombCategory",<br>
          "valueCoding": {<br>
            "system": "urn:oid:2.16.840.1.113883.6.238",<br>
            "code": "2106-3",<br>
            "display": "White"<br>
          }<br>
        }<br>
      ]<br>
    },<br>
    {<br>
      "url": "<a href="http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity">http://hl7.org/fhir/us/core/StructureDefinition/us-core-ethnicity</a>",<br>
      "extension": [<br>
        {<br>
          "url": "ombCategory",<br>
          "valueCoding": {<br>
            "system": "2.16.840.1.113883.6.238",<br>
            "code": "2186-5",<br>
            "display": "Not Hispanic or Latino"<br>
          }<br>
        }<br>
      ]<br>
    },<br>
    {<br>
      "url": "<a href="http://hl7.org/fhir/us/core/StructureDefinition/us-core-birthsex">http://hl7.org/fhir/us/core/StructureDefinition/us-core-birthsex</a>",<br>
      "valueCoding": {<br>
        "code": "M"<br>
      }<br>
    }<br>
  ]</p>
<p>While debugging my observation is org.hl7.fhir.r5.model.Element.getExtensionString(..) gets called with "<a href="http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type">http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type</a>" and it returns null. Seems like this is happening while validating "urn:oid:2.16.840.1.113883.6.238". </p>
<p>Thanks in advance and any guidance is appreciated. Thanks.</p>



<a name="198779991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Resources%20Validation/near/198779991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Resources.20Validation.html#198779991">(May 26 2020 at 15:32)</a>:</h4>
<ol>
<li>You'll need to ensure that when you launch the validator, it points to a terminology server that has access to the terminologies you need.  (The default HL7 one <em>should</em> have most SNOMED CT partitions as well as RxNorm</li>
<li>You should not be defining extensions for US-Core extensions - just point to the U.S. Core IG as a dependency.  (The validator uses R5 internally, regardless of what version of the spec is being used, so the references to R5 are expected.)</li>
</ol>



<a name="198781761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Resources%20Validation/near/198781761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Radharani Sonnathi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Resources.20Validation.html#198781761">(May 26 2020 at 15:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  thanks a lot for your quick response.<br>
1) Terminology server is that something do I need to configure in my code?<br>
2) Should not be defining extensions for US-Core extensions,  you meant in my json response? I am using all US Core profiles.</p>



<a name="198782066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Resources%20Validation/near/198782066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Resources.20Validation.html#198782066">(May 26 2020 at 15:46)</a>:</h4>
<ol>
<li>The validator takes a parameter indicating what terminology server to use.  I generally use it from commandline, but you should be able to set the configuration in code too</li>
<li>The validator should be pointing to the US Core profiles and extensions as they're defined in the official IG - you shouldn't be defining them yourself.</li>
</ol>



<a name="198782910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Resources%20Validation/near/198782910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Radharani Sonnathi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Resources.20Validation.html#198782910">(May 26 2020 at 15:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <br>
1)That is what I don't know what terminology server to use.<br>
2) is it possible for you to provide a sample Patient Json please?  Thanks.</p>



<a name="198785225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Resources%20Validation/near/198785225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Resources.20Validation.html#198785225">(May 26 2020 at 16:09)</a>:</h4>
<ol>
<li><a href="http://tx.fhir.org">tx.fhir.org</a> should support both SNOMED and RxNorm</li>
<li>There are lots of example Patient json files in the core spec, and there are some in the US Core IG as well.  Do you need something other than those?</li>
</ol>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
