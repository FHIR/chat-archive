---
layout: page
title: "FHIR Chat  · jsonschema · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html">jsonschema</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153927172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927172">(Dec 28 2017 at 18:36)</a>:</h4>
<p>Hi, <br>
I'm new to FHIR. Just trying to use the json schemas, available on fhir for each resources, to validate input data on the backend. I have a problem with self referencing (for example the element schema, referencing to itself <a href="https://www.hl7.org/fhir/Element.schema.json" target="_blank" title="https://www.hl7.org/fhir/Element.schema.json">https://www.hl7.org/fhir/Element.schema.json</a>), because most of the libraries like ajv crash going in infinite loop. There is a reason for self referencing and this is something that will stay in the future and if there is a solution to this. Thanks</p>



<a name="153927186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927186">(Dec 28 2017 at 21:28)</a>:</h4>
<p>json schema is a challenge for us.</p>



<a name="153927187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927187">(Dec 28 2017 at 21:29)</a>:</h4>
<p>I'm expecting to meet with several json schema tool maintainers in march to see if we can figure out how to do a json schema that works across multiple tools - all of them instruct us to do different things with the schema</p>



<a name="153927188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927188">(Dec 28 2017 at 21:33)</a>:</h4>
<p>So this means that the schema will change soon?</p>



<a name="153927192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927192">(Dec 28 2017 at 22:02)</a>:</h4>
<p>Grahame, has the new update to the IETF RFC for JSON helped?   RFC8259 (STD90)  <a href="https://www.rfc-editor.org/info/std90" target="_blank" title="https://www.rfc-editor.org/info/std90">https://www.rfc-editor.org/info/std90</a></p>



<a name="153927196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927196">(Dec 28 2017 at 22:19)</a>:</h4>
<p>I don't know. I'll have to look</p>



<a name="153927328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927328">(Dec 29 2017 at 17:40)</a>:</h4>
<p>I saw another problem with the schema. For example in Patient.schema.json is it correct that the dependencies : Patient_Contact, Patient_Link,... aren't inside dependencies, but on the same level as Patient? Shouldn't it be more like this <a href="https://gist.github.com/gpietro/20775ec6d6a53d50426a573a51e8ffeb" target="_blank" title="https://gist.github.com/gpietro/20775ec6d6a53d50426a573a51e8ffeb">https://gist.github.com/gpietro/20775ec6d6a53d50426a573a51e8ffeb</a> ?</p>



<a name="153927361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927361">(Dec 31 2017 at 05:22)</a>:</h4>
<blockquote>
<p>I saw another problem with the schema. For example in Patient.schema.json...</p>
</blockquote>
<p>As far as I can tell, those <code>Foo.schema.json</code> files auto-generate the documentation, and aren't actual JSON-Schema files for the resource in question.</p>



<a name="153927364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927364">(Dec 31 2017 at 10:02)</a>:</h4>
<p>nup I generate them with the intent that they are actual json schema files</p>



<a name="153927366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927366">(Dec 31 2017 at 10:43)</a>:</h4>
<p>Yes they are valid json schemas. I'm trying to make them work with ajv library for validating data input.</p>



<a name="153927367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927367">(Dec 31 2017 at 12:46)</a>:</h4>
<p>Interesting.  A couple of rough edges, but I think the Meteor community could start supporting the raw JSON Schema files then.  </p>
<p>We've been refactoring/extracting the FHIR Simple Schemas into their own package:<br>
<a href="https://github.com/clinical-meteor/fhir-simple-schemas" target="_blank" title="https://github.com/clinical-meteor/fhir-simple-schemas">https://github.com/clinical-meteor/fhir-simple-schemas</a></p>
<p>And our Patient schema is roughly analogous.  We invert the <code>required</code> array into an <code>optional</code> field.   And use a class based shorthand for describing cardinality and type.<br>
<a href="https://github.com/clinical-meteor/fhir-simple-schemas/blob/master/schemas/Patient.js" target="_blank" title="https://github.com/clinical-meteor/fhir-simple-schemas/blob/master/schemas/Patient.js">https://github.com/clinical-meteor/fhir-simple-schemas/blob/master/schemas/Patient.js</a></p>
<p>But it looks like there's a JSON Schema to SimpleSchema converter:<br>
<a href="https://github.com/bshamblen/meteor-json-simple-schema" target="_blank" title="https://github.com/bshamblen/meteor-json-simple-schema">https://github.com/bshamblen/meteor-json-simple-schema</a></p>
<p>So, with a little bit of work, we can help get the Meteor/Node/NPM communities using JSON Schema files, as published.</p>



<a name="153927369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927369">(Dec 31 2017 at 13:22)</a>:</h4>
<p>I guess my question would be:  why all the underscore fields?  Coming from the other direction, with a validation infrastructure that has been using simple-schemas for the past 2 years, it seems that the json-schemas are cluttered with underscore variables and extensions.  Is there a way to rethink that?</p>



<a name="153927371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927371">(Dec 31 2017 at 14:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191678">@Abigail Watson</span> I still have some problems with that. <a href="https://github.com/epoberezkin/ajv/issues/659" target="_blank" title="https://github.com/epoberezkin/ajv/issues/659">https://github.com/epoberezkin/ajv/issues/659</a>. I'm looking to find the correct format.<br>
I got rid of underscore fields. They aren't necessary for input validation.</p>



<a name="153927372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927372">(Dec 31 2017 at 14:38)</a>:</h4>
<p>Huh.  Looks like you're not resolving the urls for the datatypes.  We had to implement those as separate schemas, and pull them in via ES6 imports.  But it's not clear at all that a FHIR server ought to serve them up at any endpoint.  Perhaps resolve to <code>https://www.hl7.org/fhir</code> instead of <code>http://localhost:3030/fhir</code>?</p>
<p>The problem with those <code>$ref</code>fields is figuring out where they resolve to.   You've approached the problem assuming that they would be endpoints, but the only thing they really specify is the name of a file.  Could be accessed via file reader, or any number of other approaches.</p>



<a name="153927373"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927373" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927373">(Dec 31 2017 at 16:57)</a>:</h4>
<p>I have now a "working" solution with ajv without the use of Extension and ResourceList schemas.<br>
The problem is that those schemas have too many $ref.</p>



<a name="153927377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927377">(Jan 01 2018 at 19:01)</a>:</h4>
<p>the json schemas contain the underscored fields because the json source does too</p>



<a name="153927378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927378">(Jan 01 2018 at 19:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  What do you mean with json source?</p>



<a name="153927379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927379">(Jan 01 2018 at 20:19)</a>:</h4>
<p>the json resources</p>



<a name="153927741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927741">(Jan 05 2018 at 10:07)</a>:</h4>
<blockquote>
<p>I'm expecting to meet with several json schema tool maintainers in march to see if we can figure out how to do a json schema that works across multiple tools - all of them instruct us to do different things with the schema</p>
</blockquote>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  can you tell some of the those instructions? I'm trying to elaborate the schemas. One try was to put all the references inside the resources definitions. It works but it is unacceptable since there are too many and files get too big. I'm curious to know some suggestions on how to solve this problem and try an implementation. Thanks</p>



<a name="153927744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927744">(Jan 05 2018 at 10:34)</a>:</h4>
<blockquote>
<p>Interesting.  A couple of rough edges, but I think the Meteor community could start supporting the raw JSON Schema files then.  </p>
<p>We've been refactoring/extracting the FHIR Simple Schemas into their own package:<br>
<a href="https://github.com/clinical-meteor/fhir-simple-schemas" target="_blank" title="https://github.com/clinical-meteor/fhir-simple-schemas">https://github.com/clinical-meteor/fhir-simple-schemas</a></p>
<p>And our Patient schema is roughly analogous.  We invert the <code>required</code> array into an <code>optional</code> field.   And use a class based shorthand for describing cardinality and type.<br>
<a href="https://github.com/clinical-meteor/fhir-simple-schemas/blob/master/schemas/Patient.js" target="_blank" title="https://github.com/clinical-meteor/fhir-simple-schemas/blob/master/schemas/Patient.js">https://github.com/clinical-meteor/fhir-simple-schemas/blob/master/schemas/Patient.js</a></p>
<p>But it looks like there's a JSON Schema to SimpleSchema converter:<br>
<a href="https://github.com/bshamblen/meteor-json-simple-schema" target="_blank" title="https://github.com/bshamblen/meteor-json-simple-schema">https://github.com/bshamblen/meteor-json-simple-schema</a></p>
<p>So, with a little bit of work, we can help get the Meteor/Node/NPM communities using JSON Schema files, as published.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191678">@Abigail Watson</span> I don't see a good reason in converting json schema to another format like json-simple-schema. It's not even a standard, it would create only a dependency. I did try to solve the issue by importing refs into resources definitions but the file gets too big. Another solution could be: importing only the circular refs but I don't know if it's doable, or, simplify the schemas as you did in <a href="https://github.com/clinical-meteor/fhir-simple-schemas" target="_blank" title="https://github.com/clinical-meteor/fhir-simple-schemas">https://github.com/clinical-meteor/fhir-simple-schemas</a> with an official full supported version. Any thoughts?</p>



<a name="153927822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927822">(Jan 05 2018 at 22:06)</a>:</h4>
<p><span class="emoji emoji-1f937" title="shrug">:shrug:</span>  It may not be suitable for your use case. </p>
<p>We like it because <code>meteor-simple-schema</code>supports isomorphic client/server/database design, came out of the  Meteor.js community, which was started and currated by MIT alumni, and is now one of the most popular web frameworks on the internet,  and has been widely proven in production.  But you're correct, it uses an adhoc schema library.  </p>
<p>So, if we want to harmonize with the FHIR standards, we're probably going to want to migrate the <code>fhir-simple-schemas</code> from SimpleSchemas to JsonSchemas; which means moving towards <code>meteor-json-simple-schema</code>.   </p>
<p>But all the source code is there.  We've got a strategy for converting FHIR Json Schemas into Meteor SimpleSchemas, which can be attached to Mongo cursors on the server and minimongo cursors on the client.  And it all supports hooks and triggers.  </p>
<p>Guess what I'm trying to say is 'this is what we had to go  through to get a working schema validation infrastructure working' and 'this is our plans for harmonizing with FHIR initiatives'.</p>



<a name="153927829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927829">(Jan 05 2018 at 22:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191678">@Abigail Watson</span> I didn't mean to criticize the choice of the framework. Meteor is perfectly fine. What I was trying to say is that if we stay with a standard format it would be better for everyone (you could choose, js, python, go,...) and there are already the fhir schemas for each resource (155). I think it needs just a little effort to make them work with validation libraries. It would be more difficult the other way around, I didn't find any library supporting self referencing. So far I see AJV as the best choice. But I would like to hear also the option of <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> about this, I have limited knowledge of FHIR. <br>
Also Mongo version 3.6 supports now json schema validation:<br>
<a href="https://docs.mongodb.com/manual/core/schema-validation/#json-schema" target="_blank" title="https://docs.mongodb.com/manual/core/schema-validation/#json-schema">https://docs.mongodb.com/manual/core/schema-validation/#json-schema</a></p>
<p>There are also client side library for rendering forms with json schemas.  One is from mozilla:<br>
<a href="https://github.com/mozilla-services/react-jsonschema-form" target="_blank" title="https://github.com/mozilla-services/react-jsonschema-form">https://github.com/mozilla-services/react-jsonschema-form</a></p>
<p>This would save a lot of work.</p>
<p>I'm available on helping with this if anyone like the idea.</p>



<a name="153927833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927833">(Jan 05 2018 at 23:35)</a>:</h4>
<p>No criticism taken.  I'd very much like to move towards using the standard json-schemas that FHIR provides directly; and the Meteor community is in a great position to make that migration and promote it.  The Mongo 3.6 support for <code>json-schema</code> in the database is pretty fantastic; and we could continue using <code>meteor-json-simple-schema</code> when we need validation on the server and client cursors.  </p>
<p>I will say that we've had problems with using schema based form rendering in the past.  We had a templating layer which people tried to add an additional templating layer on top of; and it became too much abstraction.  But people continue asking about it; and the React approach with its pure methods and functional programming might make the approach work.  The real win, of course, would be in autogenerating forms for the long tail of lesser-used FHIR schemas.</p>



<a name="153927834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927834">(Jan 05 2018 at 23:35)</a>:</h4>
<p>Anyhow, count me in.  I'd be happy to test out the json-schemas for Mongo 3.6 and the <code>react-jsonschema-form</code>.  We're doing a refactor/redesign right now, and I'm happy to take recommendations and ideas.  (Still on the fence about <code>ajv.js</code> though. It's probably a solution for non-Meteor node apps.)</p>



<a name="153927835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927835">(Jan 05 2018 at 23:48)</a>:</h4>
<p>Now here's the important question: are the FHIR json-schemas available on NPM anywhere?</p>



<a name="153927856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927856">(Jan 06 2018 at 19:28)</a>:</h4>
<p>Is Swagger (aka Open API) a viable alternative or complement to other JSON schema technologies?<br>
<a href="https://github.com/OAI/OpenAPI-Specification" target="_blank" title="https://github.com/OAI/OpenAPI-Specification">https://github.com/OAI/OpenAPI-Specification</a></p>



<a name="153927859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927859">(Jan 06 2018 at 20:30)</a>:</h4>
<p>complement - it uses JSON schema, though with some technical restrictions that are very... painful... for us</p>



<a name="153927863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927863">(Jan 06 2018 at 23:27)</a>:</h4>
<p>So, I took the liberty of publishing the JSON Schemas onto NPM:<br>
<a href="https://www.npmjs.com/package/fhir-schemas" target="_blank" title="https://www.npmjs.com/package/fhir-schemas">https://www.npmjs.com/package/fhir-schemas</a></p>
<p>And I managed to get Ajv.js working.  Implementation is in the following file:<br>
<a href="https://github.com/clinical-meteor/meteor-on-fhir/blob/schemas/webapp/server/main.js" target="_blank" title="https://github.com/clinical-meteor/meteor-on-fhir/blob/schemas/webapp/server/main.js">https://github.com/clinical-meteor/meteor-on-fhir/blob/schemas/webapp/server/main.js</a></p>
<p>A few notes:</p>
<p>1.  Element, Extension, and ResourceList were the resources that caused the pain points.<br>
2.  The way they're structured requires importing ALL of the schemas into Ajv, so it can parse across the entire dependency graph.  It's the <code>allOf</code> and <code>oneOf</code>declarations that wind up spanning across the entire API surface.<br>
3.  The $schema field in the published JSON Schemas isn't being picked up by Ajv.  I had to delete it from each resource.<br>
4.  Likewise, the <code>Foo.id</code> field needed to be assigned to <code>Foo.$id</code>.  <br>
5.  Lastly, and most importantly, the <code>Foo.schema.json</code>references needed to be replaced by <code>http://hl7.org/fhir/json-schema/Foo</code></p>
<p>In summary, some of the $ fields seem to be misconstructed, and the <code>$ref</code> fields should point to the schema id, not the name of the .json file.</p>



<a name="153927864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927864">(Jan 06 2018 at 23:29)</a>:</h4>
<p>Later this week I'll do the <code>meteor-json-simple-schema</code> integration; and see if the $ref values work in that library also.</p>



<a name="153927872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153927872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153927872">(Jan 07 2018 at 11:00)</a>:</h4>
<p>The problem with swagger are the remote refs that is not resolved.</p>



<a name="153928067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153928067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153928067">(Jan 09 2018 at 00:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Can you give any opinion on the viability of replacing the .json file names in the $ref fields with the $id?  i.e. changing from <code>$ref: "Foo.schema.json"</code> to <code>$ref: "http://hl7.org/fhir/json-schema/Foo"</code>?</p>



<a name="153928069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153928069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153928069">(Jan 09 2018 at 01:03)</a>:</h4>
<p>One json schema tool author said that would be a wrong thing to do. Other than that, I don't know. I get conflicting advice from the json schema tools guys. That's why I'm hoping to meet them face to face in March</p>



<a name="153928070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153928070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153928070">(Jan 09 2018 at 01:40)</a>:</h4>
<p>Gotchya.  It sort of boils down to different implementations, then.  Hate to suggest that we need a spreadsheet, but it sounds like it may boil down to doing some empirical research and tracking which schemas are supported in which tools.  Thx!</p>



<a name="153928639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153928639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153928639">(Jan 12 2018 at 12:59)</a>:</h4>
<p>As I said it would be great to know what those advice from library maintainers are to try out some solutions and make a proposal.</p>



<a name="153932381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153932381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153932381">(Jan 28 2018 at 22:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <a href="https://github.com/fhir-js/fhir-schema" target="_blank" title="https://github.com/fhir-js/fhir-schema">https://github.com/fhir-js/fhir-schema</a> - source code &amp; here is a demo <a href="http://fhir-js.github.io/fhir-schema/" target="_blank" title="http://fhir-js.github.io/fhir-schema/">http://fhir-js.github.io/fhir-schema/</a></p>
<p>For contained resources and resource list we could use reference to the root $ref: "#/" - so if engine support discriminator - it will report better errors</p>



<a name="153935145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153935145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153935145">(Feb 03 2018 at 16:40)</a>:</h4>
<p>During the Working Group FHIRChat, someone mentioned that a new set of R4 schemas were published last week, after the connectathon?  Is there a link?</p>



<a name="153935152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153935152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153935152">(Feb 03 2018 at 18:59)</a>:</h4>
<p>Graham posted in the JSON Schema(R3) thread that it's available for download on <a href="http://build.fhir.org" target="_blank" title="http://build.fhir.org">build.fhir.org</a>  - took me a while to find it -- here's the direct URL:   <a href="http://build.fhir.org/fhir.schema.json.zip" target="_blank" title="http://build.fhir.org/fhir.schema.json.zip">http://build.fhir.org/fhir.schema.json.zip</a></p>



<a name="153935177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153935177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153935177">(Feb 04 2018 at 14:10)</a>:</h4>
<p>Thank you!  Exactly what I was looking for.  It blipped by as desktop notification, and I couldn't find it again.  Will get to work publishing it on NPM...</p>



<a name="153935179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153935179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153935179">(Feb 04 2018 at 16:55)</a>:</h4>
<p>Okay, got it loaded up into the <code>fhir-schemas</code> package.  Anybody have an Ajv.js syntax example for the new all-in-one file format?  I'm not seeing <code>id</code> or <code>$id</code> properties on the resources.</p>



<a name="153935205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153935205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153935205">(Feb 04 2018 at 20:31)</a>:</h4>
<p>$id - ?</p>



<a name="153935218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153935218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153935218">(Feb 04 2018 at 21:00)</a>:</h4>
<p>Do you mean the <a href="http://meta.id" target="_blank" title="http://meta.id">meta.id</a> property?</p>



<a name="153935407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153935407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153935407">(Feb 06 2018 at 01:10)</a>:</h4>
<p>Well, I mean an <code>$id</code> field on the schema:  <br>
<a href="https://github.com/clinical-meteor/fhir-schemas/blob/master/fhir.schema.json/Patient.schema.json#L3" target="_blank" title="https://github.com/clinical-meteor/fhir-schemas/blob/master/fhir.schema.json/Patient.schema.json#L3">https://github.com/clinical-meteor/fhir-schemas/blob/master/fhir.schema.json/Patient.schema.json#L3</a></p>
<p>We're having a bit more success with the Json Schemas from the download page than the all-in-one schema.  The schemas that are separated out in different files at least have an <code>id</code> field.  We used that to add a <code>$</code> and arrived at an <code>$id</code> field which our validator could pick up and stitch together into a graph.  Having all the schemas in the same file solves the problem of building an API graph, I think; but now I'm not entirely sure how to query a single schema, if not by id.  </p>
<p>I'm going to experiment with syntax a bit more.  Having them all in a single file could be a good idea; but there's still a bit of room for improvement.</p>



<a name="153935408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153935408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153935408">(Feb 06 2018 at 01:14)</a>:</h4>
<p>so we decided to get rid of the individual schemas - they were generating all the problems with references, and they weren't real useful because they all depended on each other anyway</p>



<a name="153935409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153935409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153935409">(Feb 06 2018 at 01:14)</a>:</h4>
<p>I think you're doing something with the graph that's not clear to me - can you explain more?</p>



<a name="153936406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153936406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153936406">(Feb 08 2018 at 20:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191678">@Abigail Watson</span> ping on this - I'd like to close JSON schema issues out</p>



<a name="153936574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153936574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153936574">(Feb 09 2018 at 16:26)</a>:</h4>
<p>I think we're all set on the NPM side.  We had to add the following <code>$id</code> field at the top of the file, like so:</p>
<div class="codehilite"><pre><span></span>&quot;$id&quot; : &quot;http://hl7.org/fhir/json-schema&quot;,
</pre></div>


<p>Which lets us do the following:</p>
<div class="codehilite"><pre><span></span>import { FhirApi } from &#39;fhir-schemas&#39;;
import Ajv from &#39;ajv&#39;;

var ajv = new Ajv;
var validate = ajv.addSchema(FhirApi).getSchema(&#39;http://hl7.org/fhir/json-schema/Patient&#39;);

var newPatient = {
    &quot;resourceType&quot;: &quot;Patient&quot;,
    &quot;name&quot;: [{
        &quot;family&quot;: &#39;Doe&#39;,
        &quot;given&quot;: [&#39;Jane&#39;]
    }],
    &quot;identifier&quot;: [{
        &quot;value&quot;: &#39;123&#39;
    }]
};

var isValid = validate(newPatient);
</pre></div>


<p>Apparently, as long as that initial <code>$id</code> is there, Ajv will autogenerate the <code>$id</code> fields throughout the rest of the schema.  We can even override it with a second parameter (but it's not as clean syntax).</p>
<div class="codehilite"><pre><span></span>var validate = ajv.addSchema(FhirApi2, &quot;http://hl7.org/fhir/json-schema&quot;).getSchema(&#39;http://hl7.org/fhir/json-schema#/definitions/Patient&#39;);
</pre></div>


<p>Anyhow, it's all working great, with minimal maintenance on our part.  Great work, everyone.</p>



<a name="153936576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153936576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153936576">(Feb 09 2018 at 16:30)</a>:</h4>
<p>Also, it's now published in the <code>fhir-schemas</code>NPM package.  <br>
<a href="https://www.npmjs.com/package/fhir-schemas" target="_blank" title="https://www.npmjs.com/package/fhir-schemas">https://www.npmjs.com/package/fhir-schemas</a></p>
<p>I'm still refining the README with examples, and deprecating the older schemas that Meteor was using.  Regardless, I have a list of list of Meteor apps that will be migrating towards it, and and a number of business clients using Node who are asking about it as well.</p>



<a name="153936618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153936618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153936618">(Feb 09 2018 at 20:08)</a>:</h4>
<p>ok added the root $id to the generator</p>



<a name="153936619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153936619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153936619">(Feb 09 2018 at 20:11)</a>:</h4>
<p>Fantastic.  Should we think about including semver or release version in there?  <br>
<code>http://hl7.org/fhir/json-schema/v3.0.1/</code></p>



<a name="153936620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153936620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153936620">(Feb 09 2018 at 20:14)</a>:</h4>
<p>If we were to do that, we should trim it to "3.0" rather than "3.0.1"</p>



<a name="153936621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153936621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153936621">(Feb 09 2018 at 20:15)</a>:</h4>
<p>Works for me.  I'd only want to release on major versions, anyhow.</p>



<a name="153936623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153936623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153936623">(Feb 09 2018 at 20:18)</a>:</h4>
<p>I'll do that</p>



<a name="153937988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153937988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153937988">(Feb 15 2018 at 23:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> - all this work was kicked off because you wanted to add more metadata to the json schema. Now would be a great time to start adding to it, now that it's valid</p>



<a name="153938188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153938188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153938188">(Feb 16 2018 at 12:47)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> - all this work was kicked off because you wanted to add more metadata to the json schema. Now would be a great time to start adding to it, now that it's valid</p>
</blockquote>
<p>Yes! I have a few:</p>
<ul>
<li>xml-order</li>
<li>binding information (strength, valueset)</li>
<li>is choice type?</li>
<li>target profile</li>
<li>aggregation</li>
<li>mustsupport, ismodifier</li>
</ul>
<p>just to get started...</p>
<p>pattern values - I doubt we could do that.</p>



<a name="153941124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153941124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153941124">(Feb 28 2018 at 06:03)</a>:</h4>
<p>yikes - just loaded the R3 into Swagger UI and effectively killed Chrome as the mem usage swelled to over 20GB</p>



<a name="153941140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153941140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153941140">(Feb 28 2018 at 12:12)</a>:</h4>
<p>That's swagger ui problem - create them issue on github :) - they should be lazy</p>



<a name="153956949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153956949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153956949">(May 08 2018 at 14:31)</a>:</h4>
<p>...are the json schema files for DSTU2? Or a way to generate them?</p>



<a name="153956953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153956953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dread Hawk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153956953">(May 08 2018 at 14:35)</a>:</h4>
<p><a href="http://hl7.org/fhir/DSTU2/allergyintolerance.html#resource" target="_blank" title="http://hl7.org/fhir/DSTU2/allergyintolerance.html#resource">http://hl7.org/fhir/DSTU2/allergyintolerance.html#resource</a><br>
Check 'JSON'</p>



<a name="153956954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153956954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153956954">(May 08 2018 at 14:36)</a>:</h4>
<p>That's a example of JSON coding, not the JSON schema...</p>



<a name="153956955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153956955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153956955">(May 08 2018 at 14:36)</a>:</h4>
<p>There are JSON schemas for STU3 at <a href="https://www.hl7.org/fhir/fhir.schema.json.zip" target="_blank" title="https://www.hl7.org/fhir/fhir.schema.json.zip">https://www.hl7.org/fhir/fhir.schema.json.zip</a>, but not for DSUT2</p>



<a name="153956957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153956957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dread Hawk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153956957">(May 08 2018 at 14:37)</a>:</h4>
<p>Derp. Sorry.</p>



<a name="153956959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153956959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153956959">(May 08 2018 at 14:46)</a>:</h4>
<p>..no problem...thanks for trying!</p>



<a name="153957101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153957101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153957101">(May 09 2018 at 04:24)</a>:</h4>
<p>I thought I generated json schema for R2 somewhere -- but can't retrospectively add them to the spec itself.</p>



<a name="153957398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153957398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153957398">(May 09 2018 at 19:33)</a>:</h4>
<p>If there is a way to get those files - or to generate them somehow - that would be great</p>



<a name="153957399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153957399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153957399">(May 09 2018 at 19:33)</a>:</h4>
<p>(We have a customer asking for Swagger description of our FHIR DSTU2 implementation, and the json schemas are the closes thing to that)</p>



<a name="153958117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153958117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153958117">(May 11 2018 at 19:03)</a>:</h4>
<p>umm. I'll have a look - but I'm pretty backlogged up...</p>



<a name="153972965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153972965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dread Hawk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153972965">(Jul 02 2018 at 19:58)</a>:</h4>
<p>Bump - I need json schemas for testing purposes.</p>



<a name="153973110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153973110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153973110">(Jul 03 2018 at 11:16)</a>:</h4>
<p>They are 'hidden' ;-) in a non-obvious place under Documentation -&gt; Downloads</p>
<p><a href="http://build.fhir.org/downloads.html" target="_blank" title="http://build.fhir.org/downloads.html">http://build.fhir.org/downloads.html</a> (R4) or <a href="https://www.hl7.org/fhir/downloads.html" target="_blank" title="https://www.hl7.org/fhir/downloads.html">https://www.hl7.org/fhir/downloads.html</a></p>
<p>The JSchema file is one BIG file with many internal references.  I've had some problems using it (though not the most recent version) with Newtonsoft's JSchema implementation.</p>



<a name="153973187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153973187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dread Hawk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153973187">(Jul 03 2018 at 16:54)</a>:</h4>
<p>Sorry, I meant that I need STU2 json schemas, preferably with Argonaut profiles.</p>



<a name="153973221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153973221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153973221">(Jul 03 2018 at 20:10)</a>:</h4>
<p>I do not think that I have generated these, or that it's very easy for me to do so</p>



<a name="153980839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153980839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153980839">(Aug 02 2018 at 06:22)</a>:</h4>
<p>I received the following question today:</p>
<blockquote>
<p>we experience inconsistencies in the FHIR json files from R4 Ballot #1 (FHIR 3.3.0) ( <a href="http://hl7.org/fhir/2018May" target="_blank" title="http://hl7.org/fhir/2018May">http://hl7.org/fhir/2018May</a> ). <br>
The experience with the current version (FHIR Release 3 STU) was much better and does not contain any of these inconsistencies.<br>
 Is that a “normal” behavior and we can expect the metadata quality to improve when it comes to the final R4 release?</p>
<p>Find below the list of problems with the JSON encoded files of the FHIR definitions and examples for version 3.3.0:</p>
<p>In <a href="http://hl7.org/fhir/2018May/definitions.json.zip" target="_blank" title="http://hl7.org/fhir/2018May/definitions.json.zip">http://hl7.org/fhir/2018May/definitions.json.zip</a></p>
<p>valuesets.json<br>
Multiple entries missing 1..1 field <code>CodeSystem.content</code>: <a href="http://hl7.org/fhir/2018May/codesystem.html" target="_blank" title="http://hl7.org/fhir/2018May/codesystem.html">http://hl7.org/fhir/2018May/codesystem.html</a><br>
We patched the standard to allow 0..1</p>
<p><code>fhir-versions</code> CodeSystem with entry in <code>concept</code> list missing the 1..1 field <code>code</code>:<br>
At lines</p>
<p>32913           {<br>
  32914             "display": "1.0.2",<br>
  32915             "definition": "DSTU 2 (Official version) with 1 technical errata"<br>
  32916           },</p>
<p>We changed to</p>
<p>32913           {<br>
  32914             "code": "1.0.2",<br>
  32915             "display": "1.0.2",<br>
  32916             "definition": "DSTU 2 (Official version) with 1 technical errata"<br>
  32917           },</p>
<p><code>feeding-device</code> CodeSystem missing 1..1 field <code>status</code><br>
At lines</p>
<p>36431       "fullUrl": "<a href="http://hl7.org/fhir/CodeSystem/feeding-device" target="_blank" title="http://hl7.org/fhir/CodeSystem/feeding-device">http://hl7.org/fhir/CodeSystem/feeding-device</a>",<br>
  36432       "resource": {<br>
  36433         "resourceType": "CodeSystem",<br>
  36434         "id": "feeding-device",<br>
  36435         "meta": {</p>
<p>We changed to</p>
<p>36431       "fullUrl": "<a href="http://hl7.org/fhir/CodeSystem/feeding-device" target="_blank" title="http://hl7.org/fhir/CodeSystem/feeding-device">http://hl7.org/fhir/CodeSystem/feeding-device</a>",<br>
  36432       "resource": {<br>
  36433         "resourceType": "CodeSystem",<br>
  36434         "status": "unknown",<br>
  36435         "id": "feeding-device",<br>
  36436         "meta": {</p>
<p>dataelements.json<br>
Multiple entries missing 1..1 field<br>
We ended up ignoring them in the tests as it was not obvious how to fix</p>
<p>Here is the list of issues we found because we have tests validating the example files:</p>
<p>·         Files with entry(ies) missing some mandatory <code>base</code> field:<br>
o   codesystem-extensions-CodeSystem-{author,effective,end,keyword,workflow}.json<br>
o   valueset-extensions-CodeSystem-{author,effective,end,keyword,workflow}.json</p>
<p>·         Files with entry(ies) missing some mandatory <code>type</code> field:<br>
o   definition.json<br>
o   event.json<br>
o   request.json<br>
o   fivews.json</p>
<p>·         Files with entry(ies) missing some mandatory <code>linkId</code> field:<br>
o   All files whose name end with <code>-questionnaire.json</code>, except for <code>operation-structuredefinition-questionnaire.json</code></p>
<p>·         Files with entry(ies) missing some mandatory <code>code</code> field:<br>
o   codesystem-fhir-versions.json<br>
o   valuesets.json<br>
o   dataelements.json</p>
<p>·         Files with entry(ies) missing some mandatory <code>status</code> field:<br>
o   codesystem-feeding-device.json<br>
o   codesystem-fhir-versions.json</p>
</blockquote>
<p>...can someone comment on these issues?</p>



<a name="153980940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153980940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gabriel Bezerra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153980940">(Aug 02 2018 at 13:55)</a>:</h4>
<p>Hi Simone, thanks for posting it. I'm the one that found these issues in your comment. Another case is the file <code>plandefinition-example-cardiology-os.json</code> in examples. On line 551 the field <code>action</code> contains null values without a companion <code>_action</code> field containing corresponding <code>{id: “”, extension: {…}}</code> values.</p>
<div class="codehilite"><pre><span></span>    551       &quot;action&quot;: [
    552         null,
    553         {
    …
    601         },
    602         null,
    603         null,
    604         null,
    605         {
    …
    700         }
    701       ]
</pre></div>



<a name="153983527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153983527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153983527">(Aug 08 2018 at 06:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ...?</p>



<a name="153983534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/153983534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#153983534">(Aug 08 2018 at 06:35)</a>:</h4>
<p>json schema is on my list for the net week or so</p>



<a name="156992597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/156992597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#156992597">(Jan 27 2019 at 23:25)</a>:</h4>
<p>I just released a work I have done two years ago with the jsonschema. It's a javascript generator that helps to create a REST API with FHIR resources. It only support STU3 for now. If somebody has the time to check it out I would interested in some feedback.</p>



<a name="156992599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/jsonschema/near/156992599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/jsonschema.html#156992599">(Jan 27 2019 at 23:25)</a>:</h4>
<p><a href="https://www.npmjs.com/package/generator-fhir" target="_blank" title="https://www.npmjs.com/package/generator-fhir">https://www.npmjs.com/package/generator-fhir</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
