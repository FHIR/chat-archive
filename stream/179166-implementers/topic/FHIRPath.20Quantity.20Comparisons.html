---
layout: page
title: "FHIR Chat  · FHIRPath Quantity Comparisons · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Quantity.20Comparisons.html">FHIRPath Quantity Comparisons</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153923048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Quantity%20Comparisons/near/153923048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Quantity.20Comparisons.html#153923048">(Dec 05 2017 at 21:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> I thought that we set up quanity for comparisons - and I did comparisons in my code...?</p>



<a name="153923049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Quantity%20Comparisons/near/153923049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Quantity.20Comparisons.html#153923049">(Dec 05 2017 at 21:31)</a>:</h4>
<p>see <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14194" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14194">GF#14194</a></p>



<a name="153923061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Quantity%20Comparisons/near/153923061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Quantity.20Comparisons.html#153923061">(Dec 05 2017 at 21:44)</a>:</h4>
<p>Yeah, I thought we did as well, and we even have examples in the spec that use quantity comparisons. But after looking for it, the submitter is right, we don't explicitly define the semantics for quantity arithmetic, except for date/time values.</p>



<a name="153923062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Quantity%20Comparisons/near/153923062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Quantity.20Comparisons.html#153923062">(Dec 05 2017 at 21:49)</a>:</h4>
<p>Here's what we say about it in general in CQL:</p>



<a name="153923064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Quantity%20Comparisons/near/153923064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Quantity.20Comparisons.html#153923064">(Dec 05 2017 at 21:49)</a>:</h4>
<p>Note that complete support for unit conversion for all valid UCUM units would be ideal, but practical CQL implementations will likely provide support for a subset of units for commonly used clinical dimensions. At a minimum, however, a CQL implementation must respect units and throw an error if it is not capable of normalizing the quantities involved in a given expression to a common unit.</p>



<a name="153923065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Quantity%20Comparisons/near/153923065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Quantity.20Comparisons.html#153923065">(Dec 05 2017 at 21:49)</a>:</h4>
<p>And then we have specific wording for each operator family, for instance, comparisons:</p>



<a name="153923066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Quantity%20Comparisons/near/153923066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Quantity.20Comparisons.html#153923066">(Dec 05 2017 at 21:49)</a>:</h4>
<p>For comparisons involving quantities, the dimensions of each quantity must be the same, but not necessarily the unit. For example, units of 'cm' and 'm' are comparable, but units of 'cm2' and  'cm' are not. Attempting to operate on quantities with invalid units will result in a run-time error.</p>



<a name="153923105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Quantity%20Comparisons/near/153923105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Quantity.20Comparisons.html#153923105">(Dec 06 2017 at 08:44)</a>:</h4>
<p>I can certainly see the value of adding it - how else to create meaningful constraints on quantity or use FhirPath expressions in CQL?  The only counter argument may be that implementing quantity comparisons is not easy, so it sets a higher bar for implementers of an evaluation engine if we add it.</p>



<a name="153923193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Quantity%20Comparisons/near/153923193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Quantity.20Comparisons.html#153923193">(Dec 06 2017 at 15:25)</a>:</h4>
<p>True about the bar for implementation, but the language we have in CQL only requires that implementations respect units, not that necessarily implement full support. In addition, we have Java, .NET, and I believe JS implementations of the UCUM library, so integrating the support should be straightforward.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
