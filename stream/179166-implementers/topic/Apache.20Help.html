---
layout: page
title: "FHIR Chat  · Apache Help · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html">Apache Help</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153842739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842739">(Aug 06 2016 at 02:30)</a>:</h4>
<p>I'm looking for some Apache help. </p>



<a name="153842740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842740">(Aug 06 2016 at 02:30)</a>:</h4>
<p>some background:</p>



<a name="153842741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842741">(Aug 06 2016 at 02:32)</a>:</h4>
<p>When a request for a canonical or literal URL of a resource is made (e.g. <a href="http://hl7.org/fhir/Patient/example" target="_blank" title="http://hl7.org/fhir/Patient/example">http://hl7.org/fhir/Patient/example</a> or <a href="http://hl7.org/fhir/ValueSet/condition-status" target="_blank" title="http://hl7.org/fhir/ValueSet/condition-status">http://hl7.org/fhir/ValueSet/condition-status</a>), the server responds with a redirect to the appropriate page in the spec</p>



<a name="153842742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842742">(Aug 06 2016 at 02:33)</a>:</h4>
<p>the redirect first looks at the accept: header, and redirects to either json, xml depending on the accept content type, or else to the html page </p>



<a name="153842743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842743">(Aug 06 2016 at 02:35)</a>:</h4>
<p>in this way, the spec is an example of itself (not conformant itself, but it will be)</p>



<a name="153842744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842744">(Aug 06 2016 at 02:36)</a>:</h4>
<p><a href="http://hl7.org" target="_blank" title="http://hl7.org">hl7.org</a> is hosted on IIS. So I have an ASP script that does the redirect. All good</p>



<a name="153842746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842746">(Aug 06 2016 at 02:38)</a>:</h4>
<p>I'd like the same arrangements to apply to implementation guides. And these might be hosted ona variety of servers. But Apache is the most likely. </p>



<a name="153842747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842747">(Aug 06 2016 at 02:39)</a>:</h4>
<p>how would do redirects like this on Apache? php? else...? </p>



<a name="153842748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842748">(Aug 06 2016 at 02:41)</a>:</h4>
<p>most help explains how to use htaccess for this, but isn't that wrong for this context? (htaccess is server administrator stuff..?) (and it won't do Accept: header stuff..._</p>



<a name="153842749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842749">(Aug 06 2016 at 02:41)</a>:</h4>
<p>for reference, the asp script:</p>



<a name="153842750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842750">(Aug 06 2016 at 02:41)</a>:</h4>
<div class="codehilite"><pre>&lt;%@ language=&quot;javascript&quot;%&gt;
&lt;%
  var s = String(Request.ServerVariables(&quot;HTTP_ACCEPT&quot;));
  if (s.indexOf(&quot;json&quot;) &gt; -1) 
    Response.Redirect(&quot;http://hl7.org/fhir/&lt;%literal%&gt;.json&quot;);
  else if (s.indexOf(&quot;xml&quot;) &gt; -1) 
    Response.Redirect(&quot;http://hl7.org/fhir/&lt;%literal%&gt;.xml&quot;);
  else
    Response.Redirect(&quot;http://hl7.org/fhir/&lt;%logical%&gt;.html&quot;);
%&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
You should not be seeing this page. If you do, ASP has failed badly.
&lt;/body&gt;
&lt;/html&gt;
</pre></div>



<a name="153842752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842752">(Aug 06 2016 at 02:42)</a>:</h4>
<p>on the server, this will be at e.g. /fhir/Patient/example/index.asp </p>



<a name="153842753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842753">(Aug 06 2016 at 02:43)</a>:</h4>
<p>with the tokens replaced </p>



<a name="153842756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842756">(Aug 06 2016 at 03:11)</a>:</h4>
<p>Here's an example using nginx with about 10 lines of custom config.<br>
<a href="https://github.com/jmandel/fhir-static-content-types" target="_blank" title="https://github.com/jmandel/fhir-static-content-types">https://github.com/jmandel/fhir-static-content-types</a> </p>



<a name="153842757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842757">(Aug 06 2016 at 03:11)</a>:</h4>
<p>The relevant file is the nginx config <a href="https://github.com/jmandel/fhir-static-content-types/blob/master/nginx/default.conf" target="_blank" title="https://github.com/jmandel/fhir-static-content-types/blob/master/nginx/default.conf">default.conf</a>, which demonstrates how to map a variable from the accept header.</p>



<a name="153842758"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842758" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842758">(Aug 06 2016 at 03:12)</a>:</h4>
<p>The <a href="https://github.com/jmandel/fhir-static-content-types/blob/master/example-nginx.sh" target="_blank" title="https://github.com/jmandel/fhir-static-content-types/blob/master/example-nginx.sh">example.sh</a> script just demonstrates that it works, by downloading the spec, running nginx in docker, and using this config to serve the spec as static content.</p>



<a name="153842759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842759">(Aug 06 2016 at 03:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> note that <a href="http://hl7.org" target="_blank" title="http://hl7.org">hl7.org</a> isn't exposing FHIR MIME types:</p>
<div class="codehilite"><pre><span></span>$ curl -s -v http://hl7.org/fhir/patient-example.json 2&gt;&amp;1 | grep -i content-type
&lt; Content-Type: application/json
</pre></div>


<p>My nginx config shows how to do this.</p>



<a name="153842771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842771">(Aug 06 2016 at 08:14)</a>:</h4>
<p>I don't have any clue how that example solves my problem. It's not for Apache, right? and I don't see where the name mapping happens? </p>



<a name="153842772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842772">(Aug 06 2016 at 08:15)</a>:</h4>
<p>as for the <a href="http://hl7.org" target="_blank" title="http://hl7.org">hl7.org</a> server - I thought it was serving the correct mime types. I will investigate</p>



<a name="153842785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842785">(Aug 06 2016 at 12:22)</a>:</h4>
<p>Your question was about apache, but you indicated you didn't have an actual need to do this with apache specifically; so  I shared a way to do this with nginx (since it's my preferred tool for this kind of thing, and rapidly approaching Apache in usage numbers across the web). </p>



<a name="153842786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842786">(Aug 06 2016 at 12:25)</a>:</h4>
<p>The "name mapping" happens in the config file, if I understand what you're asking. It's the "try_files" rule, which says "if the accept header wants json, look for a static file on disk by appending ".json" to the requested url. </p>



<a name="153842787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842787">(Aug 06 2016 at 12:26)</a>:</h4>
<p>It's pretty succinct/powerful. </p>



<a name="153842788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842788">(Aug 06 2016 at 12:29)</a>:</h4>
<p>(Also, one  cool thing about my example is -- well,  if you have docker :p -- you can just run it and see how it works.) </p>



<a name="153842789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842789">(Aug 06 2016 at 13:28)</a>:</h4>
<p>so the name root mightn't match - the redirect has to not only deal with extensions, but deal with renaming</p>



<a name="153842790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842790">(Aug 06 2016 at 13:29)</a>:</h4>
<p>and, ok, nginx is fine, but still, what you showed was a config file approach, right? so I can't generate that? </p>



<a name="153842796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Apache%20Help/near/153842796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Apache.20Help.html#153842796">(Aug 06 2016 at 17:11)</a>:</h4>
<p>I'm not sure I understand the requirements, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>. Perhaps you could spell out a few examples of what you expect to happen when specific requests are made?</p>
<p>But if you're looking to write a kind of explicit mapping file, and you want to do it with apache and a .htaccess file, then you can see this updated example  -- see the apache examples at <a href="https://github.com/jmandel/fhir-static-content-types" target="_blank" title="https://github.com/jmandel/fhir-static-content-types">https://github.com/jmandel/fhir-static-content-types</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
