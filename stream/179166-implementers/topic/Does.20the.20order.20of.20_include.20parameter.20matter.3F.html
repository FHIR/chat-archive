---
layout: page
title: "FHIR Chat  · Does the order of _include parameter matter? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Does.20the.20order.20of.20_include.20parameter.20matter.3F.html">Does the order of _include parameter matter?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="255728498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Does%20the%20order%20of%20_include%20parameter%20matter%3F/near/255728498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Ganshin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Does.20the.20order.20of.20_include.20parameter.20matter.3F.html#255728498">(Oct 01 2021 at 11:26)</a>:</h4>
<p>Hi. Could you help me to understand the semantic behind _include/_revinclude?</p>
<p>I have next model: CarePlan which points to Tasks (via activity-reference search-param) and Goals (via goal search-param). And I have Provenance resources, which point to all three my resource types (CarePlan, Task, Goal) via target search-param.</p>
<p>As I understood the doc, non-iterate <code>_include/_revinclude</code> depend only on the first resourceType we search on.<br>
<code>:iterate</code> modifier says, that <code>_include/_revinclude</code> should be processed based on gathered result from previous includes.</p>
<p>So, it looks like the order of <code>_include/_revinclude</code> in query-string only matter in the case we have <code>:iterate</code> modifier. Is it correct?</p>
<p>Here are few examples:</p>
<ol>
<li>These requests will return the same results, which is bundle of CarePlans and Tasks&amp;Goals related to. So, the order or _include doesn't matter.</li>
</ol>
<div class="codehilite"><pre><span></span><code>GET /CarePlan?_include=activity-reference,goal
GET /CarePlan?_include=goal,activity-reference
GET /CarePlan?_include=activity-reference&amp;_include=goal
GET /CarePlan?_include=goal&amp;_include=activity-reference
</code></pre></div>
<ol start="2">
<li>Same results again. Same as previous one, but Provenance resources related to CarePlan will be added too.</li>
</ol>
<div class="codehilite"><pre><span></span><code>GET /CarePlan?_include=activity-reference,goal&amp;_revinclude=Provenance:target
GET /CarePlan?_revinclude=Provenance:target&amp;_include=activity-reference,goal
GET /CarePlan?_include=activity-reference,goal&amp;_revinclude:iterate=Provenance:target:CarePlan
GET /CarePlan?_revinclude:iterate=Provenance:target&amp;_include=activity-reference,goal
</code></pre></div>
<ol start="3">
<li>This one will return all CarePlans, related Goals,Task and Provenances related to CarePlans,Goals &amp; Tasks.</li>
</ol>
<div class="codehilite"><pre><span></span><code>GET /CarePlan?_include=activity-reference,goal&amp;_revinclude:iterate=Provenance:target
</code></pre></div>
<ol start="4">
<li>This one will return all CarePlans, related Goals,Task and Provenances related to CarePlans &amp; Goals (not Tasks).</li>
</ol>
<div class="codehilite"><pre><span></span><code>GET /CarePlan?_include=goall&amp;_revinclude:iterate=Provenance:target&amp;_include=activity-reference
</code></pre></div>
<p>P.S. By the same results per group I mean the set of returned resources, they may be returned in any order in the entry.</p>



<a name="255747146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Does%20the%20order%20of%20_include%20parameter%20matter%3F/near/255747146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Does.20the.20order.20of.20_include.20parameter.20matter.3F.html#255747146">(Oct 01 2021 at 13:52)</a>:</h4>
<p>_(rev)include (without using :iterate) will only be related to the inclusion of resources referencing/referenced by the focal resource of the search, therefore the order in which one _(rev)includes doesn't matter one bit. <br>
With :iterate, the sequence also doesn't matter. The server will have to keep on expanding all :iterate includes (repeatedly, all of the :iterates, again and again and again) until it has reached the full result set.</p>



<a name="255747372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Does%20the%20order%20of%20_include%20parameter%20matter%3F/near/255747372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Does.20the.20order.20of.20_include.20parameter.20matter.3F.html#255747372">(Oct 01 2021 at 13:54)</a>:</h4>
<p>This is by design, partly because the underlying web standards for URLs states that the order of the search parameters may be swapped around at will.</p>



<a name="255771768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Does%20the%20order%20of%20_include%20parameter%20matter%3F/near/255771768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Ganshin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Does.20the.20order.20of.20_include.20parameter.20matter.3F.html#255771768">(Oct 01 2021 at 16:33)</a>:</h4>
<p>Thank you! It's clear now. One more thing I read up from the doc</p>
<blockquote>
<p>_include and _revinclude parameters do not include multiple values. Instead, the parameters are repeated for each different include criteria.</p>
</blockquote>
<p><a href="http://hl7.org/fhir/search.html#revinclude">http://hl7.org/fhir/search.html#revinclude</a><br>
So, samples with multiple values (like <code>GET /CarePlan?_include=activity-reference,goal</code>) are invalid.</p>



<a name="255830652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Does%20the%20order%20of%20_include%20parameter%20matter%3F/near/255830652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Does.20the.20order.20of.20_include.20parameter.20matter.3F.html#255830652">(Oct 02 2021 at 01:41)</a>:</h4>
<p>Iterate means you keep re-running the iterates until you quit finding new resources to include - or the server decides it's had enough fun iterating and quits for performance reasons.</p>



<a name="255830703"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Does%20the%20order%20of%20_include%20parameter%20matter%3F/near/255830703" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Does.20the.20order.20of.20_include.20parameter.20matter.3F.html#255830703">(Oct 02 2021 at 01:42)</a>:</h4>
<p>And yes, _include=activyt-reference,goal would be invalid</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
