---
layout: page
title: "FHIR Chat  · Quantity search and display units · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html">Quantity search and display units</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="164554719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164554719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164554719">(Apr 30 2019 at 16:51)</a>:</h4>
<p>Last fall we ran into a case where our fhir server wasn't behaving as expected by a user...after digging in we found what we feel is ambiguous language in the spec and opened <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19597" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19597">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19597</a> (Clarify expected behavior for system-less quantity search).</p>



<a name="164554795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164554795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164554795">(Apr 30 2019 at 16:52)</a>:</h4>
<p>Lloyd asked me to poll the implementer community to see how others are handling this...does anyone index the displayable unit and make that available via search?  Does anyone not?</p>



<a name="164556273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164556273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164556273">(Apr 30 2019 at 17:10)</a>:</h4>
<p>For example, suppose you have an Observation with a quantity like</p>
<div class="codehilite"><pre><span></span>  &quot;valueQuantity&quot;: {
    &quot;value&quot;: 7,
    &quot;unit&quot;: &quot;yrs&quot;,
    &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,
    &quot;code&quot;: &quot;a&quot;
  }
</pre></div>


<p>And you receive a search like <code>Observation?value-quantity=7||yrs</code>.</p>



<a name="164556320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164556320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164556320">(Apr 30 2019 at 17:11)</a>:</h4>
<p>/poll Does your server return the resource?</p>



<a name="164569881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164569881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164569881">(Apr 30 2019 at 19:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191319">@James Agnew</span> <span class="user-mention" data-user-id="192710">@Kenneth Myhra</span> <span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span></p>



<a name="164577334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164577334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164577334">(Apr 30 2019 at 21:13)</a>:</h4>
<p>Spark will match for this search: <a href="http://spark.kufu.no/fhir/Observation?value-quantity=36||pg" target="_blank" title="http://spark.kufu.no/fhir/Observation?value-quantity=36||pg">http://spark.kufu.no/fhir/Observation?value-quantity=36||pg</a> but internally it will make an assumption that the system is UCUM. Doing the same search with an unit it does not recognize as an UCUM unit, as the one above, it will ignore the search parameter. So the answer is both yes and no. I would need to do some refactoring and probably change the library that Spark uses for unit conversion.</p>



<a name="164588421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164588421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164588421">(May 01 2019 at 00:12)</a>:</h4>
<p>Thanks all.  Hopefully its enough to inform the FHIR working group on the best way to clarify this behavior (if at all).</p>



<a name="164611554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164611554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164611554">(May 01 2019 at 09:31)</a>:</h4>
<p><span class="user-mention" data-user-id="193551">@Marco Visser</span> <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> ?</p>



<a name="164617842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164617842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164617842">(May 01 2019 at 11:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span>:  I guess <span class="user-mention" data-user-id="193430">@Alexander Zautke</span> 's vote is for Vonk.</p>



<a name="164618204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164618204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164618204">(May 01 2019 at 11:59)</a>:</h4>
<p>Ah yes, never mind.</p>



<a name="164618364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164618364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164618364">(May 01 2019 at 12:01)</a>:</h4>
<p>Yes, the search request does work in Vonk :)</p>



<a name="164646787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/164646787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#164646787">(May 01 2019 at 18:45)</a>:</h4>
<p>FYI - WildFHIR also supports this search.</p>



<a name="180732550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/180732550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#180732550">(Nov 14 2019 at 13:56)</a>:</h4>
<p>Does anyone know where we landed on this one?  <br>
<a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19597" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19597">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19597</a> is marked as resolved, but I forget how to tell if the full change has been applied or not (is there a GForge field for that or resolved implies that?).<br>
Was the text in the resolution (which I do see in the spec) the text that was added to address the question?</p>



<a name="180732652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/180732652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#180732652">(Nov 14 2019 at 13:57)</a>:</h4>
<p>If so, I don't think it actually clarifies the expected behavior in the case you search on just a unit (with no system).  It only covers the case when the client searches with both system and unit.  Safe to assume there will be no further clarification due to the existing implementation differences?</p>



<a name="180732764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/180732764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#180732764">(Nov 14 2019 at 13:58)</a>:</h4>
<p>Status changes to 'Applied' when made in the CI build, then 'Published' when an official release goes out.</p>



<a name="180732775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/180732775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#180732775">(Nov 14 2019 at 13:59)</a>:</h4>
<p>So nothing done yet</p>



<a name="180732924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/180732924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#180732924">(Nov 14 2019 at 14:00)</a>:</h4>
<p>thanks lloyd</p>



<a name="180733016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/180733016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#180733016">(Nov 14 2019 at 14:01)</a>:</h4>
<p>I also noticed some poor grammar in the existing text here:  "In this case, it is inappropriate to search on the human display for the unit, which can be is uncontrolled and may unpredictable. "</p>



<a name="180733103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/180733103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#180733103">(Nov 14 2019 at 14:02)</a>:</h4>
<p>I'll just add that as a comment to this existing issue rather than open separate one</p>



<a name="180733156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/180733156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#180733156">(Nov 14 2019 at 14:03)</a>:</h4>
<p>and, more importantly, did the team actually resolve on what is the 'correct' behavior?  or they just agree it needs clarification?</p>



<a name="180734154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Quantity%20search%20and%20display%20units/near/180734154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Quantity.20search.20and.20display.20units.html#180734154">(Nov 14 2019 at 14:15)</a>:</h4>
<p>My interpretation would be "if you specify both code + system, them match against Quantity.code + Quantity.system only.  If you specify only code then match against Quantity.code or Quantity.unit".  However, agree that's not super-clear in the disposition.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
