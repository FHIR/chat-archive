---
layout: page
title: "FHIR Chat  · Versioning strategy for profiles · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html">Versioning strategy for profiles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="174140840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/174140840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthi M <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#174140840">(Aug 26 2019 at 13:27)</a>:</h4>
<p>Hi,</p>
<p>We are setting up some processes in place to handle versioning of profiles in our project. Basically we have multiple profiles and most of them are used by multiple applications. So when one application needs a breaking change in a profile, it breaks functionality in other applications. I have listed down here some approaches to handle this. Can you please suggest what the best practices are and if there is any other way we can go. </p>
<p>1. Create a new profile version with a new URL (something like patient-2) --&gt; the application that needs this new profile will send the meta.profile in its resources. I understand that we need to be careful about also fixing references between profiles in this case. <br>
2. Use canonical URL with version using the pipe token --&gt; again here the application needs to send meta.profile in its resources. This seems to be very similar to approach 1. Only we will not have multiple copies of the Profile. Is this correct?<br>
3. Packaging --&gt; I understand that this is basically grouping related conformance resources together like a zip and sharing. I am not clear how we leverage this in our case. For example, if we have separate packages for the applications, all the data at the end is going to a common DB. How can data extraction happen? I mean which profile should be considered?<br>
Looking forward to your support!</p>



<a name="174141436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/174141436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#174141436">(Aug 26 2019 at 13:34)</a>:</h4>
<p>Different profiles should not cause breaking changes</p>



<a name="174142329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/174142329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthi M <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#174142329">(Aug 26 2019 at 13:45)</a>:</h4>
<p>Hi, sorry, I meant each profile is used by multiple applications.</p>



<a name="174194195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/174194195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#174194195">(Aug 27 2019 at 03:44)</a>:</h4>
<p>Breaking changes between versions of profiles is certainly possible when the profiles are low-maturity.  Ideally, you'll have a maturity scale where, at some point, you lock profiles (and value sets and other things) down and promise to maintain backward compatibility - such that if you make a breaking change, you have to use a new canonical URL.  In the meantime though, distinguishing profiles by business version is completely reasonable.  Applications should ideally comply with a particular IG version and that IG version will contain (and/or reference) specific profile versions.  If you're receiving inbound data and don't know a priori what version of the IG a given source is using, then it's certainly helpful if the instances declare what profile version(s) they're valid against.  However, in many cases, that's not something you can guarantee.  The alternative is you need to check inbound instances against the various possibilities.</p>



<a name="174194209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/174194209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#174194209">(Aug 27 2019 at 03:45)</a>:</h4>
<p>Also note that well-defined profiles try hard not to prohibit extra data, so it's often possible to have instances that comply with multiple profiles even if they have different expectations.</p>



<a name="174200344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/174200344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthi M <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#174200344">(Aug 27 2019 at 06:30)</a>:</h4>
<p>Many thanks for the response! <br>
One question about using the canonical url with business version (using the pipe token)..<br>
in STU3 i see that the meta.profile is of type URI. In R4 it is changed to canonical. <br>
We are still currently on STU3. Can we still use the canonical URL with the pipe token in meta.profile of STU3? or is there any other way to handle this?</p>



<a name="174234390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/174234390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#174234390">(Aug 27 2019 at 14:28)</a>:</h4>
<p>Many tools will just treat the STU3 URI as a canonical as it will work just fine - but that's not guaranteed.  There isn't any other way I'm afraid.</p>



<a name="242215729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/242215729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Lohmeier <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#242215729">(Jun 10 2021 at 14:30)</a>:</h4>
<p>Resurrecting an old thread here but what if it's the norm to version profiles? In my case, we're using a FHIR API as part of a bigger platform that powers all our internal and external apps. There's an API version number associated with the platform that we can cross cut into FHIR using the business version but there doesn't seem like a way to iterate on IG, Profiles and StructureDefinition safely. Ideally, we could version our IGs in a semantic fashion and allow every client to pin to a semantic version and get both binary and behavior that matches the version requested.</p>
<p>For example, in v1.0.0 of our platform API we might add field A to patient. In v1.1.0 we might add field B to patient. Our single FHIR API implementation should be smart enough to serve up IGs for both v1.0.0 and v1.1.0 and we can have clients pinning to either version at any time. </p>
<p>Is there any facility to have a client specify business version in a request similar to the fhirVersion Accept header?</p>



<a name="242219304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/242219304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#242219304">(Jun 10 2021 at 14:50)</a>:</h4>
<p>You can't generally specify what profile you want when you're requesting data.  A system will express all data it has for a resource that you're allowed to see - and that interface will comply with whatever profiles (and profile versions) it complies with.</p>



<a name="242219376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/242219376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#242219376">(Jun 10 2021 at 14:51)</a>:</h4>
<p>Typically profiles are all up-versioned with each new release of the implementation guide they're part of (whether the specific profile has changed or not).</p>



<a name="242220493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/242220493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Lohmeier <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#242220493">(Jun 10 2021 at 14:58)</a>:</h4>
<p>How do you guarantee clients won't break then? While most clients have no problems with minor version changes like adding a new field but it will break some clients.</p>



<a name="242221248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/242221248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Lohmeier <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#242221248">(Jun 10 2021 at 15:02)</a>:</h4>
<p>A good example is an enum. If version 1.0.0 has an enum defined as A,B,C and version 1.1.0 has an enum defined as A,B,C,D we will break any client compiled against v1.0.0 when a value of D is returned.</p>



<a name="242222505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/242222505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#242222505">(Jun 10 2021 at 15:10)</a>:</h4>
<p>You won't have any enums that can change for versions of a profile unless you're talking about an extension.  Any 'code' elements (e.g. Patient.gender) are tied to the version of FHIR you're using and can't be changed by profile - at least not beyond constraining them.  For extensions, clients would need to be robust against code value sets changing - or the Extension data type should be Coding or CodeableConcept to encourage such robustness.</p>
<p>You <em>can</em> choose to expose different endpoints for different clients and keep them frozen to particular profile versions if you wish, but that's the only way to control what profiles will be exposed by the endpoint.</p>



<a name="242354011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Versioning%20strategy%20for%20profiles/near/242354011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Lohmeier <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Versioning.20strategy.20for.20profiles.html#242354011">(Jun 11 2021 at 14:36)</a>:</h4>
<p>hmm thanks. We should be able at the infrastructure level expose a version number of the API in the URL and have the same implementation servicing all versions. It's a bit clunky but it works. I really don't want to pass the buck of reverse compatibility to all clients and not allow clients to pin to a business version.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
