---
layout: page
title: "FHIR Chat  · TestScript capabilities · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html">TestScript capabilities</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153824601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824601">(May 04 2016 at 22:32)</a>:</h4>
<p>I'm still trying to wrap my head around what TestScript is designed to do. Can a TestScript say "run this query and ensure that all references in the returned resources are resolvable to existing resource"? </p>



<a name="153824604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824604">(May 05 2016 at 01:48)</a>:</h4>
<p>Yes. This is a common type of test. For example, your TestScript defines the following series of operations: create resource, search for resource. After the search operation, you define asserts; one of which is a verification that the searchset Bundle contains the just created resource.</p>



<a name="153824605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824605">(May 05 2016 at 01:51)</a>:</h4>
<p>There are a couple of ways you could write that assert - using the minimumId test where you reference a known external version of the resource to compare against the response, or a series of asserts that explicitly test the response for known expected values referenced via path expressions (currently xpath or jsonpath, fluentpath in the near future).</p>



<a name="153824625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824625">(May 05 2016 at 12:07)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191370">@Richard Ettema</span>! Let me rephrase my question: I'm interested in TestScripts that don't/can't create new data on a server; I just want to perform consistency tests on whatever data a server exposes. </p>



<a name="153824646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824646">(May 05 2016 at 14:04)</a>:</h4>
<p>So, you should be able to do a READ and then check values in the response, or compare to a known fixture (aka example)</p>



<a name="153824647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824647">(May 05 2016 at 14:06)</a>:</h4>
<p>or validate against a given profile, for example</p>



<a name="153824648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824648">(May 05 2016 at 14:06)</a>:</h4>
<p>But for example is possible to say:</p>
<p>1. Get me all the MedicationOrders<br>
2. For each, resolve the <code>MedicationOrder.medication</code> and make sure it exists</p>
<p>... with no preconception about what prescriptions and meds will actually be on the server?</p>



<a name="153824649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824649">(May 05 2016 at 14:08)</a>:</h4>
<p>The context here is conformance testing for projects like Argonaut or Sync for Science where the servers represent real EHR products exposing read-only interfaces on top of existing patient records. We can ask them to synthesize some specific records for testing, but ultimately we want to test systems "in the wild" to make sure references <strong>actually</strong> resolve (vs. testing that in carefully curated sample data they <strong>can</strong> resolve).</p>



<a name="153824650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824650">(May 05 2016 at 14:09)</a>:</h4>
<p>I think this is out of scope for <code>TestScript</code>, but I don't want to assume too much since I see a lot defined there and I don't understand all of it.</p>



<a name="153824651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824651">(May 05 2016 at 14:12)</a>:</h4>
<p>Yeah, you can't do that with <code>TestScript</code> today... unless you use a <code>ruleset</code></p>



<a name="153824652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824652">(May 05 2016 at 14:12)</a>:</h4>
<p>Which is new and not supported outside of AEGIS</p>



<a name="153824653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824653">(May 05 2016 at 14:13)</a>:</h4>
<p>All the Argonaut tests in Crucible are hand written. And I anticipate we'll do the same for S4S.</p>



<a name="153824654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824654">(May 05 2016 at 14:13)</a>:</h4>
<p>We (Crucible) likely won't use <code>TestScript</code> for those.</p>



<a name="153824655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824655">(May 05 2016 at 14:17)</a>:</h4>
<p>Ah, OK. That lines up with my expectations, but I wanted to double-check. Thanks <span class="user-mention" data-user-id="191381">@Jason Walonoski</span>!</p>



<a name="153824715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824715">(May 05 2016 at 19:36)</a>:</h4>
<p>@Josh, through the use of TestScript.variables that point to expected reference values in a retrieved resource; e.g. read or search, we can then perform a subsequent read based on the reference value to determine if the referenced resource does exist.</p>



<a name="153824716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824716">(May 05 2016 at 19:42)</a>:</h4>
<p>The new TestScript <code>rule</code> and <code>ruleset</code> elements are something we [AEGIS] are proposing for STU3 and we'll be trying them out at the Connectathon this weekend.</p>



<a name="153824717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824717">(May 05 2016 at 19:44)</a>:</h4>
<p>I'll be happy to write a TestScript that demonstrate what your example for <code>MedicationOrder.medication</code> defines and we can review it in Montreal.</p>



<a name="153824773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824773">(May 06 2016 at 11:33)</a>:</h4>
<p>Well, he wants to do it for every single MedicationOrder, so I'm interested to see how you do that. I'd like to see that in Montreal as well.</p>



<a name="153824776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824776">(May 06 2016 at 12:09)</a>:</h4>
<p>Sure, it would be great to see how this works <span class="user-mention" data-user-id="191370">@Richard Ettema</span>! </p>



<a name="153824797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153824797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153824797">(May 06 2016 at 14:30)</a>:</h4>
<p>Josh, Jason is correct regarding the TestScript's current ability to not iterate through the search results. When we started working on the TestScript definition, this wasn't something we thought to initially include based on the use cases we had at the time. The proposed <code>rule</code> and <code>ruleset</code> enhancements might work but there are some security concerns I have around providing that kind of functionality in a rules engine and rule scripts. Based on your use case, I would recommend a potential enhancement to TestScript that would allow for variables to contain a collection of elements and/or values along with corresponding assert constructs to handle iterating though that collection. In any case, I will have an example TestScript ready of your use case using the current TestScript capabilities that we can review in Montreal. Looking forward to the discussion. -Thanks.</p>



<a name="153825210"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825210" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825210">(May 07 2016 at 17:56)</a>:</h4>
<p>Montreal Connectathon 12 Breakout recap:</p>
<ul>
<li>Grahame is interested in optimizing TestScript for the ImplementationGuide use-case, and making API technical conformance testing an infrastructure thing each TestScript inherits</li>
<li>This would mean breaking out things like "verifying presence of headers" and very fine-grained assertions into a computable format for the base specification</li>
<li>There was also discussion of replacing various assertions and rules/rulesets with FluentPath.</li>
</ul>
<p>Did I miss anything else?</p>



<a name="153825211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825211">(May 07 2016 at 17:56)</a>:</h4>
<p>I wouldn't have said this: <br>
"Grahame is interested in confining TestScript to ImplementationGuide use-cases"</p>



<a name="153825214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825214">(May 07 2016 at 17:57)</a>:</h4>
<p>I am interested in optimising it for that use case, and making API technical conformance testing an infrastructural thing you can inherit into a normal test script, and one that's maintained by only a few of us</p>



<a name="153825215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825215">(May 07 2016 at 17:58)</a>:</h4>
<p>and that probably means re-organising the rules part of the spec somewhat </p>



<a name="153825216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825216">(May 07 2016 at 17:58)</a>:</h4>
<p>OK, I edited my previous post to reflect some of that.</p>



<a name="153825218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825218">(May 07 2016 at 18:00)</a>:</h4>
<p>I think that a summary would cover some of our scope discussions</p>



<a name="153825219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825219">(May 07 2016 at 18:01)</a>:</h4>
<p>- security is out of scope </p>



<a name="153825223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825223">(May 07 2016 at 18:01)</a>:</h4>
<p>- whether orchestration/choreography in scope is undecided </p>



<a name="153825231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825231">(May 07 2016 at 18:02)</a>:</h4>
<p>- we're all concerned that Test Script doesn't get too complex, and most of us think that we're already there</p>



<a name="153825234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825234">(May 07 2016 at 18:02)</a>:</h4>
<p>- Josh's specific need is specifically out of current scope</p>



<a name="153825236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825236">(May 07 2016 at 18:02)</a>:</h4>
<p>- but we do want to able have interoperable test specifications</p>



<a name="153825260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153825260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153825260">(May 07 2016 at 18:10)</a>:</h4>
<p>Good adds.</p>



<a name="153826454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153826454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153826454">(May 10 2016 at 19:12)</a>:</h4>
<p>So, I've been thinking about the concept that was raised during the TestScript breakout on Saturday regarding pulling some assertions outside of TestScript.</p>
<p>What if we encoded the two tables here (<a href="http://hl7.org/fhir/2016May/http.html#summary" target="_blank" title="http://hl7.org/fhir/2016May/http.html#summary">http://hl7.org/fhir/2016May/http.html#summary</a>) as structured XML/JSON -- perhaps with some more metadata in there -- as part of the build. An execution engine could then use that template for validating all client/server RESTful interactions. We'd be able to omit those from TestScripts since they would be implicitly verified, and the TestScript can focus on logic associated with the business rules of the test itself.</p>
<p>Thoughts?</p>



<a name="153826464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153826464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153826464">(May 10 2016 at 19:38)</a>:</h4>
<p>I think those are good thoughts. Do you want to make the json, or do you want me to make it?</p>



<a name="153826587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153826587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153826587">(May 10 2016 at 20:56)</a>:</h4>
<p>So is the intent that if I defined the following operation that the 'base' asserts from these tables would already be defined and executed by the test engine?</p>
<div class="codehilite"><pre>&lt;operation&gt;
    &lt;type&gt;
            &lt;system value=&quot;http://hl7.org/fhir/testscript-operation-codes&quot;/&gt;
            &lt;code value=&quot;create&quot;/&gt;
    &lt;/type&gt;
    &lt;resource value=&quot;Patient&quot;/&gt;
    &lt;accept value=&quot;xml&quot;/&gt;
    &lt;contentType value=&quot;xml&quot;/&gt;
    &lt;sourceId value=&quot;patient-create&quot;/&gt;
&lt;/operation&gt;
</pre></div>


<p>And, therefore, eliminate the need for explict asserts like this?</p>
<div class="codehilite"><pre>&lt;assert&gt;
    &lt;description value=&quot;Confirm that the returned HTTP status is 200(OK).&quot;/&gt;
    &lt;response value=&quot;okay&quot;/&gt;
&lt;/assert&gt;
</pre></div>



<a name="153826608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153826608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153826608">(May 10 2016 at 21:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I'm on vacation the next few days, but I can create it after that. <span class="user-mention" data-user-id="191370">@Richard Ettema</span> Yes.</p>



<a name="153826736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153826736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153826736">(May 11 2016 at 10:29)</a>:</h4>
<p>yes. After all, this assert is always enforceable whether specified in the test script or not </p>



<a name="153827829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827829">(May 13 2016 at 18:22)</a>:</h4>
<p>This is an extremely interesting discussion, and it dovetails nicely with the work that I have been doing around ONC DAF profile testing. Basically, I am seeking to create automated test coverage for as much of the DAF profile functionality as possible, while not adding to problems of tool proliferation/duplication, and TestScripts seem the ideal solution. During my analysis of the existing coverage in both Crucible-FHIR and Aegis' Touchstone, and just looking at the FHIR TestScript resource definition itself, I have noticed some things that could be improved, and wonder what you all think: &lt;more to come, didn't realize enter would post&gt;</p>



<a name="153827830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827830">(May 13 2016 at 18:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191537">@Douglas Harley</span> Yes. Any suggestions and recommendations are very welcome. I do need to re-visit the TestScripts currently deployed in Touchstone and your input would definitely help.</p>



<a name="153827831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827831">(May 13 2016 at 18:27)</a>:</h4>
<p>1) Coming primarily from the Java world, and a deep appreciation for the junit framework, it seems that it would be useful for purposes of aggregation that TestScript could optionally refer to children TestScripts. Additionally, it would be beneficial if there were downward-visible variable scoping, such that a child TestScript would have visibility of variables defined "above it" in the hierarchy. Aggregating TestScripts would greatly ease the burden of TestScript organization for test clients, and implementors too.</p>



<a name="153827832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827832">(May 13 2016 at 18:30)</a>:</h4>
<p>2) Currently, TestScript is really a great concept without a home, since it isn't referred-to by any other resources. It seems that it would be beneficial for the community to be able to define "official" TestScripts, and associated fixture data along with other profile resources. So, a profile would have an implementation guide, and conformance statement(s), and TestScripts/fixtures, which can be used to verify correct implementation of the putative conformance statement(s).</p>



<a name="153827833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827833">(May 13 2016 at 18:32)</a>:</h4>
<p>I had initially purposed within our team that the Conformance resource might be a good home for TestScript(s), but others on my team thought not, and I can see their point. Still, we all think it would be useful if there were some way to associate official DAF profile TestScripts and data with the DAF profile.</p>



<a name="153827834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827834">(May 13 2016 at 18:34)</a>:</h4>
<p>3) The current TestScript operation codes (<a href="https://www.hl7.org/fhir/valueset-testscript-operation-codes.html" target="_blank" title="https://www.hl7.org/fhir/valueset-testscript-operation-codes.html">https://www.hl7.org/fhir/valueset-testscript-operation-codes.html</a>) while defining the r̶e̶a̶d̶ search operation, do not allow for the specification of POST HTTP method, and that is an explicit requirement of FHIR, so I don't see how to test it, and it seems that the value set needs to expanded.</p>



<a name="153827836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827836">(May 13 2016 at 18:36)</a>:</h4>
<p>&lt;edit&gt; adding: <span class="user-mention" data-user-id="191370">@Richard Ettema</span>&lt;/edit&gt; Hi Richard, thanks for your great work with the existing DAF TestScripts! They are excellent, and cover already the most important aspects of DAF functionality. :)</p>



<a name="153827837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827837">(May 13 2016 at 18:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191537">@Douglas Harley</span> You're very welcome.  I know that there have been some recent updates regarding supported search pardigms that would remove the compartment search from the Argonaut requirements.  I'll be updating the DAF TestScripts at some point based on this.</p>



<a name="153827838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827838">(May 13 2016 at 18:48)</a>:</h4>
<p>That should be an Argonaut-only change I think...as far as I know there is no move to remove the Patient compartment search requirements from DAF Patient. However, I am relatively new to the project, so I will discuss with our team.</p>



<a name="153827839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827839">(May 13 2016 at 18:51)</a>:</h4>
<p>Visibility of variables defined elsewhere is a bit challenging from a methodology perspective.  We try hard to ensure that each resource instance can be interpreted/used on its own.</p>



<a name="153827840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827840">(May 13 2016 at 18:52)</a>:</h4>
<p>I think that the ability to abstract-out a lot of the lower-level validation out of TestScript is a great idea...indeed, it seems to suggest a need for a TestScript engine RI. Without a single reference implementation, it is quite possible to have a single TestScript that operates differently, and gives different results, when executed within 2 different engines.</p>



<a name="153827841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827841">(May 13 2016 at 18:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> That makes sense...to clarify, I think that is the least-useful aspect of a potential self-referential TestScript, the aggregation and organizational abilities are more interesting.</p>



<a name="153827842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827842">(May 13 2016 at 18:58)</a>:</h4>
<p>all the above just my $0.02 from when I was thinking about this stuff...please feel free to shoot holes in all of it :)</p>



<a name="153827843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827843">(May 13 2016 at 18:58)</a>:</h4>
<p>Abstracting the lower-level validation is something we (FHIR Core, AEGIS and MITRE) discussed in Montreal during the FHIR Connectathon and some of the WGM sessions. The idea is that a FHIR TestScript test engine would always execute the base assertions for a given operation as defined on the RESTful API page (bottom two tables) <a href="http://hl7-fhir.github.io/http.html#summary" target="_blank" title="http://hl7-fhir.github.io/http.html#summary">http://hl7-fhir.github.io/http.html#summary</a></p>



<a name="153827844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827844">(May 13 2016 at 19:04)</a>:</h4>
<p>yes, i saw that, and it is a great idea. (unfortunately, the DAF team was not able to travel to Montreal for the connect-a-thon.)</p>



<a name="153827845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827845">(May 13 2016 at 19:07)</a>:</h4>
<p>No worries. This thread will be the place to collaborate and share ideas.</p>



<a name="153827846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827846">(May 13 2016 at 19:08)</a>:</h4>
<p>Regarding your 3rd point, each of the operations define how they are executed; i.e. read via GET, create via POST, update via PUT and so on. A TestScript test engine will know which HTTP operation to perform for each FHIR operation.</p>



<a name="153827847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827847">(May 13 2016 at 19:10)</a>:</h4>
<p>...but it ultimately depends upon the reach/depth/correctness of the implementation, which can be assumed to vary between engines. in an ideal world, there would be a single implementation of TestScript engine, that way the only differences between TestScript results for 2 different FHIR servers would be completely due to differences in server implementations, but that cannot be the case with multiple engine implementations.</p>



<a name="153827848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827848">(May 13 2016 at 19:11)</a>:</h4>
<p>argh!...i accidentally wrote "read" when i meant "search"</p>



<a name="153827849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827849">(May 13 2016 at 19:12)</a>:</h4>
<p>the search interaction can be either GET, or POST</p>



<a name="153827850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827850">(May 13 2016 at 19:13)</a>:</h4>
<p><a href="https://www.hl7.org/fhir/http.html#search" target="_blank" title="https://www.hl7.org/fhir/http.html#search">https://www.hl7.org/fhir/http.html#search</a> "...in addition to the get based search method above, servers that support search SHALL also support a POST based search..."</p>



<a name="153827851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827851">(May 13 2016 at 19:35)</a>:</h4>
<p>Currently, we control this in the the Touchstone test engine by whether the source is set in the operation where if source points to a fixture to be sent we issue a POST; if the source is empty/not defined, then a GET.</p>



<a name="153827852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827852">(May 13 2016 at 19:40)</a>:</h4>
<p>nice, that is a good workaround. i wasn't able to look inside Touchstone code to see how things were implemented...again though, this behavior is not specified in the TestScript standard, and other implementations (e.g., Crucible-FHIR) are not like this.</p>



<a name="153827853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827853">(May 13 2016 at 19:41)</a>:</h4>
<p>...at least not that i gathered, i am a relative ruby newby. ;)</p>



<a name="153827854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827854">(May 13 2016 at 19:44)</a>:</h4>
<p>Yes, this behavior needs to be defined and documented for TestScript.  The current TestScript definition page also needs to be updated based on some recent modifications.  I am also going to be authoring a new "testing" page in the spec to offload a good chunk of the TestScript page text to a new home.</p>



<a name="153827855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827855">(May 13 2016 at 19:45)</a>:</h4>
<p>cool...that sounds like a good idea too</p>



<a name="153827867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827867">(May 14 2016 at 05:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> I spoke with the DAF technical lead, and you are completely correct: DAF is following Argonaut, and we are also removing the compartment search requirements for DAF Patient.</p>



<a name="153827868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827868">(May 14 2016 at 13:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191537">@Douglas Harley</span> interesting discussion. I've talked to Richard at the WGM about some of this, esp. how the community could provide some form of "official" or vetted Testscripts. One of the ideas that came up is to publish approved TestScript packages on the FHIR registry at <a href="http://simplifier.net" target="_blank" title="http://simplifier.net">simplifier.net</a>. This could also enable links between official IG's/profiles on the registry and associated TestScripts. If the community finds this helpful, we could try and implement some basic TestScript support in the simplifier platform. Looking forward to feedback on this.</p>



<a name="153827878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827878">(May 14 2016 at 23:09)</a>:</h4>
<p>So there's a daf implementation guide resource - this is where a day test script should be referenced </p>



<a name="153827931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827931">(May 16 2016 at 02:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> thanks for the clarification.</p>



<a name="153827936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827936">(May 16 2016 at 02:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> Thanks for the suggestions, that all sounds intriguing...but I must confess that I am fairly new to the ONC DAF project, and FHIR itself, and so am not familiar with <a href="http://simplifier.net" target="_blank" title="http://simplifier.net">simplifier.net</a> and its role in the FHIR ecosystem. I have passed-along this conversation to our technical lead to get his thoughts, and I will be able to respond further after we speak. cheers :)</p>



<a name="153827986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827986">(May 16 2016 at 15:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> DAF profile TestScripts, along with all other profile resources, are free for anyone to use, and will be made available through the usual FHIR release mechanisms. Right now though, I am just starting the process of seeing what's already out there in terms of DAF testing, what needs to get done, and ultimately where things are going to live. With regards to a "reference implementation" of a TestScript engine, I was speaking only conceptually. As a software developer who fully-embraces automated testing, I see the lack of a single common community TestScript execution engine as a weakness in the ultimate practicality and usefulness of TestScripts, and was just stating my technical opinion explicitly.</p>



<a name="153827999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153827999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153827999">(May 16 2016 at 17:34)</a>:</h4>
<p>but having more than one is a different kind of strength</p>



<a name="153828136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153828136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153828136">(May 17 2016 at 13:38)</a>:</h4>
<p>Interesting.... I came up with a few potential strengths: 1) more people working on implementations means "more eyes", and so the spec can be worked-over iteratively, and innovation might occur faster; 2) potential issues discovered in one implementation might be circumvented via use of a different implementation; 3) having multiple implementations lends a kind of tacit approval of the specification, in that "the more implementers, the better the spec must be". All certainly well-and-good at this stage, but as the platform matures, uniformity of correctness, breadth-and-depth of spec coverage, and stability seems like they would become of overriding importance for a TestScript engine.</p>



<a name="153828142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153828142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153828142">(May 17 2016 at 13:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> any thoughts on my proposal to add reference to child TestScripts to TestScript? it seems that it would be much easier for test tool implementers to just "point-to" 2 DAF-related tests (i.e., DAF query requester, and DAF query responder), and get all the TestScripts referred-to therein automatically via a resolution process. During my process I might create for example 20 different TestScripts in total, and organizing them without this proposed self-referential enhancement seems like a real headache, and a potential source of errors/ommissions</p>



<a name="153828169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153828169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153828169">(May 17 2016 at 18:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191537">@Douglas Harley</span> I do like the concept in general; however, I have to agree with Lloyd's position here where he stated earlier in this thread "We try hard to ensure that each resource instance can be interpreted/used on its own". The dependencies this would introduce into the TestScript definition goes against this philosophy. I would also be concerned of potential circular references.</p>



<a name="153828170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153828170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153828170">(May 17 2016 at 18:13)</a>:</h4>
<p>In Touchstone we currently provide a grouping mechanism using an appropriate folder structure. This isn't part of the specification but still a useful organizational mechanism for our environment.</p>



<a name="153828171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153828171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Douglas Harley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153828171">(May 17 2016 at 18:20)</a>:</h4>
<p>Fair enough...if it isn't an organizational problem for you guys, then it isn't a problem. :)</p>



<a name="153829673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829673">(May 24 2016 at 18:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191370">@Richard Ettema</span> I've made an attempt to move the HTTP Table (<a href="http://hl7.org/fhir/2016May/http.html#summary" target="_blank" title="http://hl7.org/fhir/2016May/http.html#summary">http://hl7.org/fhir/2016May/http.html#summary</a>) into JSON. You can see the proposal here: </p>
<ul>
<li><a href="https://github.com/fhir-crucible/fhir_client/blob/stu3/lib/fhir_api_validation.json" target="_blank" title="https://github.com/fhir-crucible/fhir_client/blob/stu3/lib/fhir_api_validation.json">https://github.com/fhir-crucible/fhir_client/blob/stu3/lib/fhir_api_validation.json</a></li>
</ul>
<p>Example code that uses these JSON rules to validate the structure of the HTTP request/responses is here: </p>
<ul>
<li><a href="https://github.com/fhir-crucible/fhir_client/commit/31a434eb57354f241879642823da8cbbc65a1fde#diff-68edf999a120d604d2b47800ed1a3377" target="_blank" title="https://github.com/fhir-crucible/fhir_client/commit/31a434eb57354f241879642823da8cbbc65a1fde#diff-68edf999a120d604d2b47800ed1a3377">https://github.com/fhir-crucible/fhir_client/commit/31a434eb57354f241879642823da8cbbc65a1fde#diff-68edf999a120d604d2b47800ed1a3377</a></li>
</ul>
<p>Let me know what you think. The JSON (or something similar) could be used to generate the HTTP Table in the specification HTML, and could be used to validate the API calls, replacing a boat-load of TestScript assertions.</p>



<a name="153829681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829681">(May 24 2016 at 21:31)</a>:</h4>
<p>that's the kind of thing I was thinking of, yes. We could generate conformance statements from that as well, right? </p>



<a name="153829682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829682">(May 24 2016 at 21:31)</a>:</h4>
<p>I do think we need support for 5xx as a code, and generally, 3xx codes are always allowed...</p>



<a name="153829683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829683">(May 24 2016 at 21:32)</a>:</h4>
<p>could make some more detailed comment, but I think it would be good to build that into the spec itself and generate conformance statements from it,</p>



<a name="153829698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829698">(May 24 2016 at 23:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191381">@Jason Walonoski</span> I like the initial structure. I'll have to wait until later this week to do a more detailed review.  Thanks.</p>



<a name="153829750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829750">(May 25 2016 at 12:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> My thinking was that 4XX errors were valid responses... but a 5XX errors was something really bad (internal server error) so the response should not validate. As for 3XX, a redirect, the client should follow it and eventually get a different status code and server response which can be validated, therefore it didn't need to be included.</p>
<p>As for generating conformance statements... I'm not sure where it fits to be honest.</p>
<p>Do you want me to move it into the svn build, or submit a change request, or take no action?</p>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span>  OK, thanks.</p>



<a name="153829837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829837">(May 25 2016 at 21:30)</a>:</h4>
<p>a number of the public servers have trouble separating client and server errors. I don't how to do that is very often you shouldn't have asked for that, but differentiating this is above the level of the code. </p>



<a name="153829838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829838">(May 25 2016 at 21:30)</a>:</h4>
<p>I think we shouldn't require a server to get this right in conformance testing. </p>



<a name="153829839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829839">(May 25 2016 at 21:31)</a>:</h4>
<p>here's an example: if a client sends me a json with duplicate properties, my json parser throws an exception. </p>



<a name="153829840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829840">(May 25 2016 at 21:31)</a>:</h4>
<p>it throws the same exception if it's out of resources</p>



<a name="153829841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829841">(May 25 2016 at 21:32)</a>:</h4>
<p>as for 3xx - A production client doesn't always follow that. and it's not clear that a conformance testing client will either. 304 not modified is a valid response under some circumstances. </p>



<a name="153829977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829977">(May 26 2016 at 12:12)</a>:</h4>
<p>Well, I follow you in how it can be used to identify both client and server errors in conformance testing -- just not how it would be used in generating conformance statements... unless it is a statement like "your client (or server) doesn't conform to history interactions properly."</p>



<a name="153829978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153829978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153829978">(May 26 2016 at 12:12)</a>:</h4>
<p>At any rate, I'm going to use this JSON in the Crucible FHIR client. Let me know if you'd like me to contribute it to the SVN repo.</p>



<a name="153830223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830223">(May 27 2016 at 15:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, <span class="user-mention" data-user-id="191381">@Jason Walonoski</span> Here are my current thoughts regarding the computable structured format of the http.html summary tables.</p>



<a name="153830224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830224">(May 27 2016 at 15:59)</a>:</h4>
<p>I agree that having this structure is good as it provides a way to generate and maintain the http.html summary tables.</p>



<a name="153830225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830225">(May 27 2016 at 15:59)</a>:</h4>
<p>I am with Jason regarding not quite understanding how this structure would be used to generate conformance statements. I do see it working in relation with a FHIR client's or server's conformance statement as it applies to testing that client and/or server.</p>



<a name="153830226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830226">(May 27 2016 at 15:59)</a>:</h4>
<p>While I do agree that this structure could be used by a test engine as a set of pre-defined test conditions, I have some questions and concerns:</p>



<a name="153830228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830228">(May 27 2016 at 16:00)</a>:</h4>
<p>- The http.html summary tables contain a value 'N/A' for many entries. Is the 'N/A' to be interpreted as a hard MUST not be present, or as an optional SHOULD not be present?</p>



<a name="153830229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830229">(May 27 2016 at 16:00)</a>:</h4>
<p>- There are other aspects of the API that are not represented in the summary tables. A few examples:</p>



<a name="153830230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830230">(May 27 2016 at 16:00)</a>:</h4>
<p>-- Under the Support for Versions, <a href="http://hl7-fhir.github.io/http.html#versioning" target="_blank" title="http://hl7-fhir.github.io/http.html#versioning">http://hl7-fhir.github.io/http.html#versioning</a>, section is the statement "Server should always return the default timezone for date searches in the HTTP Response headers using the Date header." The HTTP Date header is not shown in the response summary table.</p>



<a name="153830231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830231">(May 27 2016 at 16:00)</a>:</h4>
<p>-- Under the Content Types and encoding, <a href="http://hl7-fhir.github.io/http.html#mime-type" target="_blank" title="http://hl7-fhir.github.io/http.html#mime-type">http://hl7-fhir.github.io/http.html#mime-type</a>, section is the description of the _format parameter that every operation/interaction SHOULD support.</p>



<a name="153830232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830232">(May 27 2016 at 16:00)</a>:</h4>
<p>-- Under the Content Types and encoding, <a href="http://hl7-fhir.github.io/http.html#mime-type" target="_blank" title="http://hl7-fhir.github.io/http.html#mime-type">http://hl7-fhir.github.io/http.html#mime-type</a>, section is the statement "Requests MAY also specify this charset parameter in the Accept header and/or use the Accept-Charset header." The HTTP Accept-Charset header is not shown in the request summary table.</p>



<a name="153830233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830233">(May 27 2016 at 16:01)</a>:</h4>
<p>- The structure derived from the http.html summary tables lack many features that should be explicitly defined. These features are what we as a Testing Group (FHIR Core Team, MITRE, AEGIS and a few others) worked through last summer when defining and refining the TestScript definition; i.e.:<br>
-- Descriptions for interactions/operations and assertions. These inform the tester of what the expected behavior of a test execution should be.<br>
-- Ability to group operations/assertions into specific tests.<br>
-- Ability to validate against profiles.<br>
-- Ability to check conformance of a test system for successful execution via metadata elements.<br>
-- Sophisticated assertions based on XPath/JasonPath (FluentPath/FHIRPath in the near future).<br>
-- Explicit checks for request/response header values.<br>
-- Setup procedures to prepare a system under test for repeatable test execution outcomes.<br>
-- Teardown procedures to return a system under test to its state prior to the test execution.<br>
-- Constructs to allow client-side/peer-to-peer testing including support for multiple origins.<br>
-- Constructs to support multiple destinations for interactions.</p>



<a name="153830234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830234">(May 27 2016 at 16:01)</a>:</h4>
<p>I understand the desire to simplify what I sense is the perceived complexity of the TestScript resource. However, based on my experience, implementing a robust testing platform and environment is inherently complex. I'm sure you would agree that regardless of the design and implementation details, building a testing tool is not a simple task. I'm seeing the direct use of this structure in a test engine as just a shuffling of the deck chairs (as Grahame likes to put it).</p>



<a name="153830235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830235">(May 27 2016 at 16:01)</a>:</h4>
<p>Getting back to the proposed structure, as I stated above I agree having this is good. Building the summary tables should be generated via a computable format. However, if we were to continue down the path of using this structure as input to a test engine, I feel that it will out of necessity need to grow and expand to support the explicit testing definitions that a test engine requires. As we add the missing features outlined above to this structure, it will increasingly look more like what we already have in the TestScript resource. The Testing Group put a lot of thought into the design of TestScript for DSTU2 and the current specification. Rather than add another format for a test engine to ingest, we could use this new computable structure format in a slightly different way. This structure could be used by a TestScript generator to produce the TestScript resources that define the approved "FHIR API &lt;version&gt; Test Definitions".</p>



<a name="153830236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830236">(May 27 2016 at 16:01)</a>:</h4>
<p>As an example of what this might look like, I have taken the read operation/interaction from the existing summary tables and built a corresponding FHIR API STU3 Test Definition (TestScript) for a Patient read on our AEGIS FHIR STU3 server (GET <a href="http://wildfhir.aegis.net/fhir/TestScript/fhir-api-stu3-patient-read-xml" target="_blank" title="http://wildfhir.aegis.net/fhir/TestScript/fhir-api-stu3-patient-read-xml">http://wildfhir.aegis.net/fhir/TestScript/fhir-api-stu3-patient-read-xml</a>).</p>



<a name="153830252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830252">(May 27 2016 at 18:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> the proposed JSON was not to replace TestScript at all, so things like "the ability to validate against profiles" doesn't apply here -- that will remain a function of the TestScript. The proposed JSON was just to make the basic assertions that validate the structure of the requests and responses, and eliminates the need to reassert every header and response code for each operation in every TestScript. The TestScript will have to continue to assert things like all of your bullet points above. In your example, using this "request/response schema" (using the word schema as an analogy) you can eliminate lines 32-79, 86-92, 99-120 from your example TestScript with the exact same functionality.</p>



<a name="153830320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830320">(May 27 2016 at 23:02)</a>:</h4>
<p>I would have thought that at least some of the things Richard listed would be candidates for addition to the json</p>



<a name="153830399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Hyland <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830399">(May 28 2016 at 18:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191381">@Jason Walonoski</span> I believe what <span class="user-mention" data-user-id="191370">@Richard Ettema</span> was offering adding something new which parallels what Test Script already does may in fact become more confusing.  While our objective is to make it simply, if we are not careful we could make it more confusing for the community at large.  <span class="user-mention" data-user-id="191370">@Richard Ettema</span> identified alternative paths to automating and simplifying the generation of Test Scripts.  I think if we can support a broader range of inputs - such as IG, Profile, Resource, Model such as MDHT, and others - each providing a way to input into some mechanism which generates or outputs Test Script Resource (and does so quickly and efficiently) - we can keep the Test Script Resource as the Authoritative Approach to test FHIR Implementations.   I agree with <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> (if I am reading him/it correctly) we can add to JSON Tests.  I am keen to see what happens with the FluentPath test implementations.   </p>



<a name="153830414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830414">(May 29 2016 at 09:57)</a>:</h4>
<p>well, there's already a set of unit tests for fluent path. I guess I could extract them to a more structured form</p>



<a name="153830542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830542">(May 30 2016 at 15:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191381">@Jason Walonoski</span> Yes, I know the proposed JSON is not a replacement for TestScript but is meant to be a way to simplify a TestScript. The intent as I understand it (please correct me if I mis-state) is that the proposed JSON represents pre-defined asserts that will always be used by a FHIR test engine. As you stated, this would drastically reduce the number of explict asserts following any given test operation. This sounds like a great idea at first and I agree that all of the rich features of TestScript do not need to be available for these base API asserts. Though, as I continue to think about this, I still have concerns and questions.</p>



<a name="153830543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830543">(May 30 2016 at 15:59)</a>:</h4>
<p>Even though the proposed JSON implicitly defines the base API asserts, the test engine will still need to explicitly implement those asserts. So, there still needs to be explicit definitions of the base API asserts for a FHIR test engine to correctly execute.</p>



<a name="153830544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830544">(May 30 2016 at 15:59)</a>:</h4>
<p>If a FHIR test engine were required to implement and always execute these base API asserts; i.e. make the test engine smarter, the test engine is now constrained. For instance, how does the test engine deal with testing situations where negative testing (error and exception conditions) must be verified? In other words, a test can be designed to force a system under test to respond to bad requests and data where the test will succeed when the system under test responds with an appropriate and expected error? The test engine would then need to 'know' not to apply the base API success asserts.</p>



<a name="153830545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830545">(May 30 2016 at 16:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191381">@Jason Walonoski</span> I believe we need to perform a full examination of all the implementation pages - http.html, search.html, operations.html, messaging.html and services.html - to produce a complete and accurate structure that represents what we are calling the "Base FHIR API". This structure would then be initially used to generate the summary tables. We can then take a better look at its potential use by and within a test engine.</p>



<a name="153830711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript%20capabilities/near/153830711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.20capabilities.html#153830711">(May 31 2016 at 12:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191370">@Richard Ettema</span> I agree that clarifying the N/A makes sense (Bullet 1), and adding support to the JSON for Date Header, _format parameter, Accept, Accept-Charset (Bullet 2 and sub-bullets) makes sense. If we add the features of Bullet 3 (and sub-bullets), I suspect we'd just end up with another set of TestScripts. That is fine and where we are today, but the idea was to explore a way to make some basic things in every TestScript implicit --- unless the TestScript wanted to explicitly execute things like check response code, or check a header -- for negative testing or otherwise. I think the more complicated actions in Bullet 3 should remain in TestScript. At any rate, I think (?) that we all agree that we want a computable "Base FHIR API" structure as Richard stated, and I submit that JSON example as a beginning.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
