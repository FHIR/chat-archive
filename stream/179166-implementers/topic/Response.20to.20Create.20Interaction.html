---
layout: page
title: "FHIR Chat  · Response to Create Interaction · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html">Response to Create Interaction</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="177654494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177654494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177654494">(Oct 08 2019 at 20:14)</a>:</h4>
<p>I just noticed that from FHIR v1.6.0 to FHIR v1.8.0, there was a change in conformance language for the expected response to a Create Interaction:</p>
<p>The server returns a 201 Created HTTP status code, and <strong>SHOULD</strong> also return a Location header which contains the new Logical Id and Version Id of the created resource version (<a href="http://hl7.org/fhir/2016Sep/http.html#create" target="_blank" title="http://hl7.org/fhir/2016Sep/http.html#create">http://hl7.org/fhir/2016Sep/http.html#create</a>)</p>
<p>The server returns a 201 Created HTTP status code, and <strong>SHALL</strong> also return a Location header which contains the new Logical Id and Version Id of the created resource version (<a href="http://hl7.org/fhir/2017Jan/http.html#create" target="_blank" title="http://hl7.org/fhir/2017Jan/http.html#create">http://hl7.org/fhir/2017Jan/http.html#create</a>)</p>
<p>Does this imply that a FHIR Server's Create Interaction:<br>
1) Must persist a copy of the FHIR Resource (e.g. that "Create" cannot by transient, and be used as transmission)?<br>
2) Must support/enable the retrieval of that FHIR Resource after its creation (since the location must be available)?</p>
<p>Just noticed this change, and wondering if those implications are correct.</p>
<p>Thanks!</p>



<a name="177666866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177666866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177666866">(Oct 08 2019 at 22:52)</a>:</h4>
<p>I don't believe it implies either of those 2 things. But it does imply that the system understands that the location it returned thereafter refers to that resource, and it won't re-use the location for another resource, and it will understand future references to that location as being references to that resource. </p>
<p>None of that requires that the resource exist or be available, but it does imply that some record of the transaction needs to be retained (unless the location is a random UUID and you regard references to resources by UUID as likely a reference to a past resource and you don't care about integrity)</p>



<a name="177670812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177670812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177670812">(Oct 09 2019 at 00:00)</a>:</h4>
<p>Thank you Grahame. Returning a copy of the newly created FHIR resource in the response body is only optional/situation, correct? For some reason, I had it in my head that a Create Interaction should always return a copy of the new resource, but I may be conflating it with a different conformance rule.</p>



<a name="177676515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177676515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177676515">(Oct 09 2019 at 02:16)</a>:</h4>
<p>The client has the ability to indicate whether it wants back a copy of the created record or not using the Prefer:return header, but that's a preference, not a requirement.  In the end, the server can choose what to return - be that just the headers, or headers + OperationOutcome (if warnings) or headers + content.  The latter is most important if the server has persisted something other than what was sent (e.g. dropped or transformed content in some way) to allow subsequent update without re-query.</p>



<a name="177676536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177676536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177676536">(Oct 09 2019 at 02:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Do we have language that says that a client needs to pay attention to the content echoed back on a create (or an update for that matter) when planning subsequent updates?</p>



<a name="177676707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177676707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177676707">(Oct 09 2019 at 02:20)</a>:</h4>
<p>no i don't think so. We couldn't make it a SHALL and it's self evident that it's probably a good thing to do</p>



<a name="177677055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177677055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177677055">(Oct 09 2019 at 02:29)</a>:</h4>
<p>I don't think it's self-evident.  I suspect most clients don't twig to the fact that the stored content could be different from the submitted content.  Most probably blindly assume that whatever's returned just echos what they submitted in the first place.</p>



<a name="177677261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177677261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177677261">(Oct 09 2019 at 02:34)</a>:</h4>
<p>We do have a whole page about that</p>



<a name="177677436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177677436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177677436">(Oct 09 2019 at 02:38)</a>:</h4>
<p>Is it pointed to by the HTTP spec?</p>



<a name="177677736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177677736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177677736">(Oct 09 2019 at 02:46)</a>:</h4>
<p>What I currently see is "The second asks to return the full resource. " - there's no explanation of why this could or should happen (independent of whether the client asks for it).  We do point to the "varations between submitted and stored data" section a few places, but we don't have anywhere that specifically says:<br>
a) if you've changed the content of the resource, you SHOULD return it;<br>
b) if you receive the content of the stored source in a response and want to be able to do updates, you SHALL drive your update from the returned content, not the originally submitted content.</p>
<p>If we can't do a SHALL for the latter, then we should at least make it a SHOULD and note the danger involved in failing to do so (and perhaps suggest that servers that change data and don't trust clients to drive off the version in the response shouldn't include the etag and instead require systems to query for it)</p>



<a name="177680613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177680613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177680613">(Oct 09 2019 at 03:58)</a>:</h4>
<p>what's the danger? but sure, make a task to link to it from the appropriate place</p>



<a name="177682056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177682056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177682056">(Oct 09 2019 at 04:35)</a>:</h4>
<p>Danger is that data gets changed by the EHR, the client then sends an update and the changes aren't taken into account.  For example, a clients submits a patient with an email address and two phone numbers.  The server dumps the email address because it can't store emails.  The client subsequently uses PATCH to correct the first phone number.  If the client received an etag in response to the initial create and based their PATCH off the submitted record rather than the returned record, the PATCH would end up replacing the second phone number rather than the first .</p>



<a name="177682319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177682319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177682319">(Oct 09 2019 at 04:43)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24914" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=24914">GF#24914</a></p>



<a name="177713307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177713307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177713307">(Oct 09 2019 at 13:29)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22770" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22770">GF#22770</a> also indicate that "a server MAY determine that <code>create</code> request matches an existing record with high confidence, and MAY return a 201, effectively making it look to the client as though a new resource had been created, even though the the "created" resource is actually a pre-existing resource."</p>



<a name="177716706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177716706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177716706">(Oct 09 2019 at 14:05)</a>:</h4>
<p>The HTTP page <a href="https://www.hl7.org/fhir/http.html#create" target="_blank" title="https://www.hl7.org/fhir/http.html#create">https://www.hl7.org/fhir/http.html#create</a> section points to Variations between Submitted data and Retrieved data <br>
 (<a href="http://hl7.org/fhir//updates.html" target="_blank" title="http://hl7.org/fhir//updates.html">http://hl7.org/fhir//updates.html</a>) and transactional integrity (<a href="https://www.hl7.org/fhir/http.html#transactional-integrity" target="_blank" title="https://www.hl7.org/fhir/http.html#transactional-integrity">https://www.hl7.org/fhir/http.html#transactional-integrity</a>)</p>



<a name="177727260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177727260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177727260">(Oct 09 2019 at 15:47)</a>:</h4>
<p>Yes - it points to those pages.  But there's no normative wording in those pages.  And there's no specific warning in the HTTP page that highlights the fact that paying attention to what comes back is important.</p>



<a name="177727266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/177727266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#177727266">(Oct 09 2019 at 15:47)</a>:</h4>
<p>(and why)</p>



<a name="180744965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/180744965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#180744965">(Nov 14 2019 at 16:07)</a>:</h4>
<blockquote>
<p>unless the location is a random UUID </p>
</blockquote>
<p>Reading over the Create section <a href="https://www.hl7.org/fhir/http.html#create" target="_blank" title="https://www.hl7.org/fhir/http.html#create">https://www.hl7.org/fhir/http.html#create</a>, it doesn't seem like a random UUID is allowed for the location header -- "the location SHALL contain logical id", in the format Location: [base]/[type]/[id]/_history/[vid].</p>



<a name="180768447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Response%20to%20Create%20Interaction/near/180768447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Response.20to.20Create.20Interaction.html#180768447">(Nov 14 2019 at 19:59)</a>:</h4>
<p>the id can be a random UUID</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
