---
layout: page
title: "FHIR Chat  · indicating error in enrichment service · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html">indicating error in enrichment service</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153904413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/indicating%20error%20in%20enrichment%20service/near/153904413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html#153904413">(Sep 05 2017 at 02:33)</a>:</h4>
<p>We have an environment where resources can be 'enriched' by means of an external service at read time. For example, a terminology lookup that 'normalizes' a condition.code, or lookup a provider details based on an identifier .   If the service is unavailable at the time of querying, we want to indicate that to the client, while returning the data that we have. This could occur on both a search or read of a single resource. What's the best way to do this? A resource tag (like 'subsetted'?) . An operationOutcome would give more detail, but doesn't apply for a single resource read - and in any case, only some of the resources in the query may have been effected...</p>



<a name="153904415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/indicating%20error%20in%20enrichment%20service/near/153904415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html#153904415">(Sep 05 2017 at 03:26)</a>:</h4>
<p>a tag of "unenriched" ? <img alt=":simple_smile:" class="emoji" src="/static/generated/emoji/images/emoji/unicode/1f642.png" title=":simple_smile:"></p>



<a name="153904417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/indicating%20error%20in%20enrichment%20service/near/153904417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html#153904417">(Sep 05 2017 at 03:29)</a>:</h4>
<p>On a query response, I'd probably provide an OperationOutcome.  Not sure about what to do with a Read though</p>



<a name="153904419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/indicating%20error%20in%20enrichment%20service/near/153904419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html#153904419">(Sep 05 2017 at 05:31)</a>:</h4>
<p>trouble is we still need something on each resource, as not all may have been effected. And we did think of a custom tag :)</p>



<a name="153904438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/indicating%20error%20in%20enrichment%20service/near/153904438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html#153904438">(Sep 05 2017 at 12:08)</a>:</h4>
<p>It does seem like a tag to indicate that the data was enhanced / enriched is possibly useful. How would you expect to represent this enrichment with Provenance? I would hope that this enrichment is represented by a version... and that version would have a Provenance. Even here, I don't see a good code for what type of Provenance activity or agent you have. This seems like an important gap. Might need FHIR-I, Vocab to give Security some guidance. Presumably some vocabulary value exists to indicate computer aided enrichment. It is just not  in my known vocabulary.</p>



<a name="243704487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/indicating%20error%20in%20enrichment%20service/near/243704487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amit Cudykier <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html#243704487">(Jun 23 2021 at 19:59)</a>:</h4>
<p>I see this post is kind of old but maybe FHIR has better ways to do it now :) . I am facing a similar task.  We also thought of using a tag to indicate the resource was "enriched" . My question is, what is the proper way to indicate what elements were enriched by the external service? </p>
<p>For example, the response did not include the patient address, but my external service was able to fetch the address and add it to the FHIR response. I am not sure if a Provenance resource might be helpful, it does feel like an extension is a way to go.</p>



<a name="243941016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/indicating%20error%20in%20enrichment%20service/near/243941016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html#243941016">(Jun 25 2021 at 16:44)</a>:</h4>
<p>As an immediate response, you would echo back what was actually stored (allowing the client to see what had changed/been enriched) or an OperationOutcome with warning/information messages noting what changes were made.</p>
<p>After the fact, the only way to see where data came from is Provenance.  I believe there are some standard extensions for allowing details to be tracked on a resource element level rather than a "resource as a whole" level.  <span class="user-mention" data-user-id="191404">@John Moehrke</span>?</p>



<a name="243942642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/indicating%20error%20in%20enrichment%20service/near/243942642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html#243942642">(Jun 25 2021 at 16:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> there is a FHIR-I approved CR, but it has not yet been applied and not enough details in the CR for me to understand what the plan is.  <a href="https://jira.hl7.org/browse/FHIR-21284">https://jira.hl7.org/browse/FHIR-21284</a></p>



<a name="243952418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/indicating%20error%20in%20enrichment%20service/near/243952418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amit Cudykier <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html#243952418">(Jun 25 2021 at 18:23)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  . How will you handle the case where the client is trying to READ a FHIR resource? and you want to enrich data<br>
I am not really sure,  is it appropriate to send back a bundle resource with the resource that the client wanted to read and the operation outcome resource (I do not think so)?</p>



<a name="243953304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/indicating%20error%20in%20enrichment%20service/near/243953304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amit Cudykier <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html#243953304">(Jun 25 2021 at 18:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span>  thank you for sharing the CR. I will monitor it.  I am new to the CR process. What are the next steps to move this CR forward? We are happy to help however we can.<br>
We would love to develop a solution for our use case endorsed and accepted by the community.</p>



<a name="243970641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/indicating%20error%20in%20enrichment%20service/near/243970641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/indicating.20error.20in.20enrichment.20service.html#243970641">(Jun 25 2021 at 21:05)</a>:</h4>
<p>FHIR presumes that if data changes, the _lastUpdated timestamp changes and the version changes.  The 'version' and _lastUpdated are important to managing update collisions and having polling work.  So either you need to update your stored copy at the time you receive the new information or at the time the original POST comes in.  Doing it at time of read is likely to cause grief because every time someone looks at the data it's treated as if it's changed.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
