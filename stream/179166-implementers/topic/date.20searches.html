---
layout: page
title: "FHIR Chat  · date searches · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/date.20searches.html">date searches</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153917352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/date%20searches/near/153917352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Spencer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/date.20searches.html#153917352">(Nov 02 2017 at 17:08)</a>:</h4>
<p>When searching by day, "For example, the date 2013-01-10 specifies all the time from 00:00 on 10-Jan 2013 to immediately before 00:00 on 11-Jan 2013" - but in what timezone?</p>



<a name="153917356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/date%20searches/near/153917356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Spencer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/date.20searches.html#153917356">(Nov 02 2017 at 17:16)</a>:</h4>
<p>I suppose whatever timezone the value on the resource is recorded with (if any)</p>



<a name="153917357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/date%20searches/near/153917357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/date.20searches.html#153917357">(Nov 02 2017 at 17:24)</a>:</h4>
<p>all timezones... ?</p>



<a name="153918799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/date%20searches/near/153918799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/date.20searches.html#153918799">(Nov 10 2017 at 08:06)</a>:</h4>
<p>This is only relevant when cross processing date values with date/time values.<br>
For date/date comparisons, there is no time component, and hence no zone issue.</p>



<a name="153918802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/date%20searches/near/153918802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/date.20searches.html#153918802">(Nov 10 2017 at 08:07)</a>:</h4>
<p>If your storage layer is storing dates as datetimes, then yes you'd need to be careful here.</p>



<a name="153918806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/date%20searches/near/153918806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/date.20searches.html#153918806">(Nov 10 2017 at 08:18)</a>:</h4>
<blockquote>
<div class="codehilite"><pre><span></span>When the date parameter is not fully specified, matches against it are based on the behavior of intervals, where:
    Dates with only the year specified are equivalent to an interval that starts at the first instant of January 1st to the last instant of December 31st, e.g. 2000 is equivalent to an interval of [2000-01-01T00:00, 2000-12-31T23:59].
    Dates with the year and month are equivalent to an interval that starts at the first instant of the first day of the month and ends on the last instant of the last day of the month, e.g. 2000-04 is equivalent to an interval of [2000-04-01T00:00, 2000-04-30T23:59].
Where possible, the system should correct for timezones when performing queries. Dates do not have time zones, and time zones should not be considered. Where both search parameters and resource element date times do not have time zones, the servers local time zone should be assumed.
</pre></div>


</blockquote>
<p>I think this means that the search parameter ultimately is always expressed as a datetime (either already on the url, or a date interpreted as a period by the server as described above), and to match that with the resources, I use datetimes in the search index as well. Thereby using the second rule: use the servers local time zone if not otherwise specified.</p>
<p>But I agree there are probably cases where these rules don't cover everything.</p>



<a name="153918817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/date%20searches/near/153918817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/date.20searches.html#153918817">(Nov 10 2017 at 09:21)</a>:</h4>
<p>For date parameters, I'm actually indexing the string.<br>
(and therefore the starts-with works great, completely ducking the issues)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
