---
layout: page
title: "FHIR Chat  · Slice closed rule validation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20closed.20rule.20validation.html">Slice closed rule validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153889361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20closed%20rule%20validation/near/153889361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JL <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20closed.20rule.20validation.html#153889361">(May 11 2017 at 14:11)</a>:</h4>
<p>I asked this on the HAPI FHIR google groups forum, but didn't get a response.  I do wonder, given the class name, if the code in question is not really from the HAPI team though.  Anyways, trying this question here to see if anyone knows the answer.  I basically created a StructureDefinition in Forge and want to validate an XML input against that definition.</p>



<a name="153889362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20closed%20rule%20validation/near/153889362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JL <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20closed.20rule.20validation.html#153889362">(May 11 2017 at 14:12)</a>:</h4>
<p>Sorry, pressed entered by mistake.  :)  This is the original question posted on HAPI google groups:</p>
<p>I created a profile using Forge where only certain identifiers are permitted for a resource.  It created a StructureDefinition that contains this:</p>
<div class="codehilite"><pre><span></span>    &lt;element&gt;
        &lt;path value=&quot;Patient.identifier&quot; /&gt;
        &lt;slicing&gt;
            &lt;discriminator&gt;
                &lt;type value=&quot;value&quot; /&gt;
                &lt;path value=&quot;type.coding.system&quot; /&gt;
            &lt;/discriminator&gt;
            &lt;discriminator&gt;
                &lt;type value=&quot;value&quot; /&gt;
                &lt;path value=&quot;type.coding.code&quot; /&gt;
            &lt;/discriminator&gt;
            &lt;rules value=&quot;closed&quot; /&gt;
        &lt;/slicing&gt;
    &lt;/element&gt;
</pre></div>


<p>I wanted to validate a resource against definition using HAPI, but it seems HAPI does not validate slicing closed rules?  I took a look at org.hl7.fhir.dstu3.validation.InstanceValidator, and I can't seem to find any code that checks for a closed slicing rule.  I see some logic around line 3003 for open rules, but no references for closed rule.  I am using HAPI FHIR 2.4.  Please advise.</p>



<a name="153889370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20closed%20rule%20validation/near/153889370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20closed.20rule.20validation.html#153889370">(May 11 2017 at 14:42)</a>:</h4>
<p>Looks like the validator in the .NET API also doesn't verify this yet. TODO</p>



<a name="153889374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20closed%20rule%20validation/near/153889374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20closed.20rule.20validation.html#153889374">(May 11 2017 at 14:50)</a>:</h4>
<p>The FHIR validator has different rules for open vs. "not open" but doesn't distinguish between openAtEnd and closed.  So definitely more work to happen.  Out of curiosity, why are you using closed?  It's sort of similar to declaring "final" in Java, which is hard to use well.</p>



<a name="153889396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20closed%20rule%20validation/near/153889396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JL <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20closed.20rule.20validation.html#153889396">(May 11 2017 at 15:14)</a>:</h4>
<p>Thanks for the reply, Llyod.  I was trying to declare that our system takes "these" identifiers and other identifiers will be ignored.  Having written that, I think openAtEnd might be a better rule.  I was interested in testing out the validation though, which was why I chose "closed" in the beginning because it was more restrictive.</p>



<a name="153889429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20closed%20rule%20validation/near/153889429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20closed.20rule.20validation.html#153889429">(May 11 2017 at 16:23)</a>:</h4>
<p>Open is preferable to OpenAtEnd.  OpenAtEnd says yours have to appear first, which is generally not good practice - order has no meaning and forces the sender to customize order just for you.</p>



<a name="153889431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20closed%20rule%20validation/near/153889431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JL <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20closed.20rule.20validation.html#153889431">(May 11 2017 at 16:25)</a>:</h4>
<p>Good point - thanks</p>



<a name="153889619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20closed%20rule%20validation/near/153889619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20closed.20rule.20validation.html#153889619">(May 12 2017 at 05:38)</a>:</h4>
<p>So why do we have that as an option?</p>



<a name="153889646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20closed%20rule%20validation/near/153889646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20closed.20rule.20validation.html#153889646">(May 12 2017 at 09:23)</a>:</h4>
<p>Because there are some implementations that will need to be able to say "our stuff must come first" or "only our stuff is allowed".  It's not good practice, but sometimes it's implementation reality.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
