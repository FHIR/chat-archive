---
layout: page
title: "FHIR Chat  · Oxygen fhirPath support · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html">Oxygen fhirPath support</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="168853263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/168853263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#168853263">(Jun 24 2019 at 14:17)</a>:</h4>
<p>For most of what I do I use Oxygen XML Editor (java). Oxygen can be extended with an <a href="https://github.com/raducoravu/hl7-framework/" target="_blank" title="https://github.com/raducoravu/hl7-framework/">XMLCatalog</a> for FHIR. Oxygen also recently added XPath support for JSON, which helps, but it got me thinking how much nicer life would be if there were fhirPath support inside.</p>
<p>Oxygen is extensible in a <a href="https://www.oxygenxml.com/doc/versions/21.1/ug-editor/topics/extending-oxygen.html" target="_blank" title="https://www.oxygenxml.com/doc/versions/21.1/ug-editor/topics/extending-oxygen.html">number of ways</a>, but did anyone by any chance already look into how that would work?</p>



<a name="169549138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/169549138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#169549138">(Jul 03 2019 at 08:35)</a>:</h4>
<p>I was also looking for the Java implementation of fhirPath, but the <a href="http://wiki.hl7.org/index.php?title=FHIRPath_Implementations" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIRPath_Implementations">Wiki</a> looks outdated or at the very least I cannot find something I would send to the Oxygen makers as part of my feature request. Is there really only a DSTU3 implementation or is there something separate from FHIR releases now that FHIRPath itself has been branched off?</p>



<a name="169566746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/169566746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#169566746">(Jul 03 2019 at 13:38)</a>:</h4>
<p>FHIRPath support is part of HAPI and has full support for all versions, including draft R5</p>



<a name="169586257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/169586257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#169586257">(Jul 03 2019 at 17:33)</a>:</h4>
<p>I thought HAPI inherited that from somewhere in <a href="http://github.com/hl7/fhir" target="_blank" title="http://github.com/hl7/fhir">github.com/hl7/fhir</a>, but I could make out where/what. Apparently the code actually lives in HAPI?</p>
<p><a href="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.dstu3/src/main/java/org/hl7/fhir/dstu3/utils" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.dstu3/src/main/java/org/hl7/fhir/dstu3/utils">https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.dstu3/src/main/java/org/hl7/fhir/dstu3/utils</a><br>
<a href="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r4/src/main/java/org/hl7/fhir/r4/utils" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r4/src/main/java/org/hl7/fhir/r4/utils">https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r4/src/main/java/org/hl7/fhir/r4/utils</a><br>
<a href="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/utils" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/utils">https://github.com/hapifhir/org.hl7.fhir.core/tree/master/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/utils</a></p>



<a name="169594956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/169594956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#169594956">(Jul 03 2019 at 19:23)</a>:</h4>
<p>The code has been migrated to the HAPI repository, yes</p>



<a name="169594961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/169594961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#169594961">(Jul 03 2019 at 19:23)</a>:</h4>
<p>That's the right stuff you're looking at</p>



<a name="179368954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179368954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179368954">(Oct 29 2019 at 20:08)</a>:</h4>
<p>I am trying to use oxygen with the current R4 schematrons. Keep getting error "Cannot find a 0-argument function named {http://www.w3.org/2005/xpath-functions}name.exists()". Before and after adding the XMLCatalog you mentioned. Any idea?</p>



<a name="179373002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179373002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179373002">(Oct 29 2019 at 20:52)</a>:</h4>
<p>That sounds like we've got FHIRPath that suck into XPath somehow.  Can you look at the schematron and see where name.exists() is appearing?</p>



<a name="179377061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179377061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179377061">(Oct 29 2019 at 21:41)</a>:</h4>
<p>fhir-invariants.sch line 4753:</p>
<p>&lt;sch:assert test="((not(f:type/@value = 'named-event')) or name.exists()) and (not(f:type/@value = 'periodic') or timing.exists()) and (not(starts-with(f:type/@value, 'data-')) or data.exists())"&gt;trd-3: A named event requires a name, a periodic event requires timing, and a data event requires data&lt;/sch:assert&gt;</p>
<p>I am looking at the R4 release schemas/schematrons. Those from build.fhir yield schema errors earlier in the process.</p>



<a name="179377534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179377534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179377534">(Oct 29 2019 at 21:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Any chance this was fixed in the technical correction?</p>



<a name="179377867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179377867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179377867">(Oct 29 2019 at 21:50)</a>:</h4>
<p>Just tried the build version: Now the same error points to line 4999 in the same file.</p>



<a name="179381503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179381503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179381503">(Oct 29 2019 at 22:26)</a>:</h4>
<p>I don't know of any reason it would have been fixed in the technical correction</p>



<a name="179384363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179384363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179384363">(Oct 29 2019 at 22:54)</a>:</h4>
<p>and I just completed the gold build, and the clock is running...</p>



<a name="179385338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179385338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179385338">(Oct 29 2019 at 23:04)</a>:</h4>
<p>no worries, I am not in production. Just checking the validation tools in a good old experimental XML environment.</p>



<a name="179396070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179396070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179396070">(Oct 30 2019 at 01:55)</a>:</h4>
<p>It should be:<br>
<code>(not(f:type/@value='named-event') or exists(f:name)) and (not(f:type/@value='periodic') or exists(f:timing)) and (not(starts-with(f:type/@value, 'data-')) or exists(f:data))</code></p>



<a name="179396308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179396308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179396308">(Oct 30 2019 at 02:02)</a>:</h4>
<p>Submitted as <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25088" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25088">GF#25088</a>]</p>



<a name="179426891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179426891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179426891">(Oct 30 2019 at 12:41)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> ! I fixed this at two occurrences. And also a few other flaws, including a few unmatched closing brackets, and commented out two lines with erroneous regexp. <a href="/user_uploads/10155/azUqBBwVlmYtjBnQIPYOnMyg/fhir-invariants.sch" target="_blank" title="fhir-invariants.sch">fhir-invariants.sch</a>. Now it appears to work as expected.</p>



<a name="179431531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179431531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179431531">(Oct 30 2019 at 13:34)</a>:</h4>
<p>Can you tell us where the other errors were?</p>



<a name="179462471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179462471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179462471">(Oct 30 2019 at 18:32)</a>:</h4>
<p>lines 2718-2721: unmatched closing bracket<br>
      &lt;sch:assert test="exists(f:patient) or not(exists(f:scope/f:coding[f:system/@value='something' and f:code/@value='adr'])))"&gt;ppc-4: IF Scope=adr, there must be a patient&lt;/sch:assert&gt;<br>
      &lt;sch:assert test="exists(f:patient) or not(exists(f:scope/f:coding[f:system/@value='something' and f:code/@value='treatment'])))"&gt;ppc-5: IF Scope=treatment, there must be a patient&lt;/sch:assert&gt;<br>
      &lt;sch:assert test="exists(f:patient) or not(exists(f:scope/f:coding[f:system/@value='something' and f:code/@value='patient-privacy'])))"&gt;ppc-2: IF Scope=privacy, there must be a patient&lt;/sch:assert&gt;<br>
      &lt;sch:assert test="exists(f:patient) or not(exists(f:scope/f:coding[f:system/@value='something' and f:code/@value='research'])))"&gt;ppc-3: IF Scope=research, there must be a patient&lt;/sch:assert&gt;</p>
<p>line 4753 and 5047: function call<br>
      &lt;sch:assert test="((not(f:type/@value = 'named-event')) or name.exists()) and (not(f:type/@value = 'periodic') or timing.exists()) and (not(starts-with(f:type/@value, 'data-')) or data.exists())"&gt;trd-3: A named event requires a name, a periodic event requires timing, and a data event requires data&lt;/sch:assert&gt;</p>
<p>line 10670: trailing garbage within first bracket (unmatched quote)<br>
      &lt;sch:assert test="f:type/@value=('choice','open-choice','decimal','integer','date','dateTime','time','string','quantity',') or not(f:answerOption or f:answerValueSet)"&gt;que-5: Only 'choice' and 'open-choice' items can have answerValueSet&lt;/sch:assert&gt;</p>
<p>lines 12144 and 12182: parser complains about regexp (something with amp character... had no time to analyze):<br>
      &lt;sch:assert test="matches(path/@value, '[^\s\.,:;\'&amp;quot;\/|?!@#$%&amp;amp;*()\[\]{}]{1,64}(\.[^\s\.,:;\'&amp;quot;\/|?!@#$%&amp;amp;*()\[\]{}]{1,64}(\[x\])?(\:[^\s\.]+)?)*')"&gt;eld-19: Element names cannot include some special characters&lt;/sch:assert&gt;</p>



<a name="179464613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179464613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179464613">(Oct 30 2019 at 18:51)</a>:</h4>
<p>If you diff the file I attached in previous message vs the original, you'll see what I changed.</p>



<a name="179466171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Oxygen%20fhirPath%20support/near/179466171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Oxygen.20fhirPath.20support.html#179466171">(Oct 30 2019 at 19:06)</a>:</h4>
<p>thanks</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
