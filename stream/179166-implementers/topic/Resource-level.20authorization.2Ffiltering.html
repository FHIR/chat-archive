---
layout: page
title: "FHIR Chat  · Resource-level authorization/filtering · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource-level.20authorization.2Ffiltering.html">Resource-level authorization/filtering</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="159069763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource-level%20authorization/filtering/near/159069763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl M. Davis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource-level.20authorization.2Ffiltering.html#159069763">(Feb 21 2019 at 14:06)</a>:</h4>
<p>Howdy, all!</p>
<p>Just wondering if anyone has OPINIONS on how this best ought to be implemented on our side:</p>
<ul>
<li>We need to start filtering out certain ExplanationOfBenefit resources for certain peers/queries (filtering out SAMHSA-related claims).</li>
<li>The peers are trusted, so we could just ask them to add an HTTP header or URL query param, but I don't know if/how that fits in to the FHIR spec at all.</li>
<li>We're using HAPI (not the JPA layer, though), so we could go investigate whatever options it offers for resource authorization and see if that's workable.<br>
    * But, our authentication is using mutual TLS and having quite gotten the principals visible in the app layer yet. I can fix that, probably.</li>
</ul>
<p>I'm inclined to add a query parameter for right now, e.g. <code>nonSamhsa=true</code>, but like I said: curious if anyone has OPINIONS about that. This is all internal usage, so FHIR spec compliance is a nice-to-have, but also not a huge priority.</p>
<p>Thanks!</p>



<a name="159070039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource-level%20authorization/filtering/near/159070039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource-level.20authorization.2Ffiltering.html#159070039">(Feb 21 2019 at 14:10)</a>:</h4>
<p>So you are using mutual authenticated TLS... the server thus knows who the client is... so what more is needed for the server to understand the rule distinction?  I presume that some clients will get everything others will get a subset... is that what you are looking for?<br>
I would not use parameters, they are not 'secure'...   however if a client is found, during an audit analysis, to be misbehaving then you know who to punish... You are doing good audit logging, possibly using AuditEvent... right?</p>



<a name="159070054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource-level%20authorization/filtering/near/159070054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource-level.20authorization.2Ffiltering.html#159070054">(Feb 21 2019 at 14:11)</a>:</h4>
<p>Confirming, you are not using OAuth?</p>



<a name="159070163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource-level%20authorization/filtering/near/159070163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl M. Davis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource-level.20authorization.2Ffiltering.html#159070163">(Feb 21 2019 at 14:12)</a>:</h4>
<p>Typo above: _haven't_ quite gotten the principals visible in our app layer.</p>



<a name="159104805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource-level%20authorization/filtering/near/159104805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource-level.20authorization.2Ffiltering.html#159104805">(Feb 21 2019 at 21:12)</a>:</h4>
<p>there's no particular spec statement on this, so no compliance issues. </p>
<p>Opinions: </p>
<ul>
<li>you should default to not sending, and only send when asked (instead of the opposite, which is what you appear to choose). </li>
<li>you can choose to do it by parameter, by header, or configuration. choosing the last is a fucntional question - better if you can, but not always possible. parameter vs header - I'd probably lean towards a parameter, except:</li>
<li>this feels like it overlaps with Consent. Is it per-user? Should look at using X-Consent header?</li>
</ul>



<a name="159110212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource-level%20authorization/filtering/near/159110212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl M. Davis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource-level.20authorization.2Ffiltering.html#159110212">(Feb 21 2019 at 22:20)</a>:</h4>
<p>Excellent advice!</p>
<p>We're a bit constrained by this being 1 of 3 active peers we have, and the only one that needs this filtering. So I'm inclined to make it opt-in for now, just to avoid accidental breakage.</p>
<p>It's less of a consent thing, and more of a policy thing: "not per-Patient, but instead per-peer/user/system -- this peer/system can see SAMHSA claims for any Patient, but this one can't." I'll look into X-Consent, though, to see if that's a reasonable stretch of its use case.</p>
<p>And agreed: definite preference is for configuration (security roles). Just need to get our app server to play ball, which will likely take more time than I have. (Been banging on Wildfly about it occasionally for like a year now.)</p>



<a name="159296780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource-level%20authorization/filtering/near/159296780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource-level.20authorization.2Ffiltering.html#159296780">(Feb 24 2019 at 21:27)</a>:</h4>
<p><span class="user-mention" data-user-id="192789">@Karl M. Davis</span> <br>
If this is something that could become necessary for other partners or in other forms in future, it would be advisable to make it a configurable part of your authorization policy. If you add support for redaction obligations in your authorization policy, i.e. the ability to express a rule to grant access conditioned on applying an obligation, this case then seems to be a redaction obligation applied to all access requests from that particular partner. <br>
I have discussed some more implementation considerations and alternatives for redaction policies <a href="https://medium.com/@jafarim/using-fhir-search-filter-to-express-and-enforce-redaction-obligations-981838c355f6" target="_blank" title="https://medium.com/@jafarim/using-fhir-search-filter-to-express-and-enforce-redaction-obligations-981838c355f6">here</a>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
