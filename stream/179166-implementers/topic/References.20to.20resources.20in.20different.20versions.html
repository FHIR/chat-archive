---
layout: page
title: "FHIR Chat  · References to resources in different versions · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html">References to resources in different versions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="239260087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20resources%20in%20different%20versions/near/239260087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html#239260087">(May 18 2021 at 14:11)</a>:</h4>
<p>Is it OK for a resource to reference FHIR resources on servers that are of different versions? For example an R4 Observation to reference a Patient on a Patient store (server) that holds (and serves out  the Patient as an STU3 resource?</p>



<a name="239260255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20resources%20in%20different%20versions/near/239260255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html#239260255">(May 18 2021 at 14:12)</a>:</h4>
<p>that's very difficult to answer. OK in what sense?</p>



<a name="239260377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20resources%20in%20different%20versions/near/239260377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html#239260377">(May 18 2021 at 14:13)</a>:</h4>
<p>Most (all?) clients won't be happy about that</p>



<a name="239261000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20resources%20in%20different%20versions/near/239261000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html#239261000">(May 18 2021 at 14:17)</a>:</h4>
<p>We are thinking that in a "modular environment" - a Patient store, an Organization &amp; Location store, a Practitioner store all on different servers (and endpoints), they may offer only interfaces at certain FHIR versions as the estate as a whole evolves. A rsource created may be in later version than the store it needs to point to (hence the example of  an R4 Observation pointing to the STU3 Patient endpoint).</p>



<a name="239276410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20resources%20in%20different%20versions/near/239276410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html#239276410">(May 18 2021 at 15:46)</a>:</h4>
<p>If you perform a search, all resources in the Bundle must be of the same version.  So if you attempt an _include or _revinclude that spans version boundaries, it won't work.</p>



<a name="239287297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20resources%20in%20different%20versions/near/239287297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html#239287297">(May 18 2021 at 16:50)</a>:</h4>
<p>use resource.identifier</p>



<a name="239294842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20resources%20in%20different%20versions/near/239294842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html#239294842">(May 18 2021 at 17:37)</a>:</h4>
<blockquote>
<p>use resource.identifier</p>
</blockquote>
<p>Reference.identifier?</p>



<a name="239381881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20resources%20in%20different%20versions/near/239381881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html#239381881">(May 19 2021 at 07:58)</a>:</h4>
<p>Just to be clear, its not mixing versions of resources in the same bundle, its about whether a R4 resource can reference an STU3 resource (endpoint). John's solution of using reference.identifier is what we are doing at present, so (for example) if a R4 Encounter resource wants to reference a Patient, and that Patient record can only be gotten on an STU3 endpoint, then we put in a reference.identifier to the primary identifier for the patient (in out case the NHS Number). It's then up to the client to deal with the STU3 based endpoint for Patient - i.e. find the endpoint, query the CapabilityStatement, and retrieve the Patient record.</p>



<a name="239383405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20resources%20in%20different%20versions/near/239383405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html#239383405">(May 19 2021 at 08:11)</a>:</h4>
<p>Our basic reference will look something like this </p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="nt">"patient"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"Patient"</span><span class="p">,</span>
                    <span class="nt">"identifier"</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://fhir.nhs.uk/Id/nhs-number"</span><span class="p">,</span>
                        <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"9912003888"</span>
                    <span class="p">},</span>
                   <span class="nt">"display"</span><span class="p">:</span> <span class="s2">"Bilbo Baggins"</span>
                <span class="p">},</span>
</code></pre></div>



<a name="239383815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20resources%20in%20different%20versions/near/239383815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html#239383815">(May 19 2021 at 08:15)</a>:</h4>
<p>Which is useful to consumers, they get the identifier and the name but if they want to resolve the reference then supplying a resource reference would be useful.</p>
<p>I'm not convinced saying the reference MUST be the the same version is helpful. We would be including the version in the url, so a consumer would know the FHIR version. If that version is usable then they follow the reference else they query using the identifier.</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="nt">"patient"</span><span class="p">:</span> <span class="p">{</span>
                   <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"Patient"</span><span class="p">,</span>
                     <span class="nt">"reference"</span><span class="p">:</span> <span class="s2">"https://spine-directory-services.nhs.uk/STU3/Patient/9912003888"</span><span class="p">,</span>
                    <span class="nt">"identifier"</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"https://fhir.nhs.uk/Id/nhs-number"</span><span class="p">,</span>
                        <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"9912003888"</span>
                    <span class="p">},</span>
                   <span class="nt">"display"</span><span class="p">:</span> <span class="s2">"Bilbo Baggins"</span>
                <span class="p">},</span>
</code></pre></div>



<a name="239449819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20resources%20in%20different%20versions/near/239449819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20resources.20in.20different.20versions.html#239449819">(May 19 2021 at 15:53)</a>:</h4>
<p>A reference isn't actually version-specific.  It's possible to query the same resource and ask for it in different FHIR versions, just as you can ask for it in XML or JSON.  So exposing the 'version' in the URL wouldn't really make sense.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
