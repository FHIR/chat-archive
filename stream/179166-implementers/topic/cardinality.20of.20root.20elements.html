---
layout: page
title: "FHIR Chat  · cardinality of root elements · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html">cardinality of root elements</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154024377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154024377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154024377">(Dec 11 2018 at 09:07)</a>:</h4>
<p>Hello, In all official profile StructureDefinitions the root elements have a min-max-cardinality of 0-*. What is meant with this information ? What would happen if I had a custom profile with a different min-max-cardinality ? As the cardinality of all elements is always given when they are used, the information in the root elements seems redundant, if not possibly contradicting to its possible uses as elements.</p>



<a name="154024407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154024407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154024407">(Dec 11 2018 at 13:42)</a>:</h4>
<p>In a StructureDefinition for an extension, this cardinality is used to indicate whether the extension may be repeated.</p>



<a name="154024442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154024442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154024442">(Dec 11 2018 at 15:57)</a>:</h4>
<p>The cardinality of the root element places limits on what the cardinality can be when referencing that type.  So if you define an extension whose root cardinality is 0..1, you're not allowed to reference it with a cardinality of 0..*.</p>



<a name="154024451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154024451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154024451">(Dec 11 2018 at 16:17)</a>:</h4>
<p>There is a difference between <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> and my interpretation - and I cannot find a normative statement in the specification about this. Would you know where Lloyd?  </p>
<p>The main difference between our viewpoints is that for me cardinality is enforced at validation time - so dependent on what actually appears in an instance, while for Lloyd it places restrictions on profiles that reference other types (including extensions).  I agree this should also be done by authoring tools, but it means that unprofiled resources, that reference an extension with a cardinality constraint, go unchecked.</p>



<a name="154024468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154024468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154024468">(Dec 11 2018 at 16:33)</a>:</h4>
<p>I think the rules apply both for profiles and for instances.  If you reference an extension, you're intrinsicly bound by the profile that defines that extension.  I'm not sure where in the spec it would be defined though.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="154024475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154024475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154024475">(Dec 11 2018 at 16:46)</a>:</h4>
<p>Note: the implementation of the snapshot generator in the .NET FHIR API library confirms to Lloyd's interpretation. In other words, if a profile element references an external type profile, then the cardinality of the referencing element is constrained by the cardinality of the referenced root element in the external profile. Optionally, the referencing profile can further constrain (but not relax) the inherited cardinality.<br>
The snapshot generator logic simply applies any inherited constraints by overriding, but does no attempt to verify the actual values. It is up to the validator to verify that the applied constraints are actually valid.</p>



<a name="154024550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154024550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154024550">(Dec 11 2018 at 19:59)</a>:</h4>
<p>technically, what we say is that it has no meaning: </p>
<p><code>min/max  optional (irrelevant)</code></p>



<a name="154024552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154024552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154024552">(Dec 11 2018 at 19:59)</a>:</h4>
<p><a href="http://build.fhir.org/elementdefinition.html#interpretation" target="_blank" title="http://build.fhir.org/elementdefinition.html#interpretation">http://build.fhir.org/elementdefinition.html#interpretation</a></p>



<a name="154024553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154024553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154024553">(Dec 11 2018 at 19:59)</a>:</h4>
<p>but I do agree with Lloyd's interpretation</p>



<a name="154024594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154024594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154024594">(Dec 11 2018 at 21:02)</a>:</h4>
<p>ah, thank you. Interesting to see that the answer was already there in the specs :-)</p>



<a name="154024640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154024640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154024640">(Dec 11 2018 at 22:09)</a>:</h4>
<p>Added <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19756" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19756">GF#19756</a></p>



<a name="154026211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026211">(Dec 18 2018 at 23:51)</a>:</h4>
<p>This is exactly why we included what's in the spec today.  The snapshot generator (and validator) is <em>not</em> supposed to pull the root element cardinality into the element snapshot - it's supposed to ignore the root element cardinality.</p>



<a name="154026213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026213">(Dec 18 2018 at 23:58)</a>:</h4>
<p>If the root cardinality of an extension definition is 0..1, it's <em>illegal</em> for a profile that references the extension to have a cardinality of 0..*</p>



<a name="154026214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026214">(Dec 18 2018 at 23:58)</a>:</h4>
<p>The root cardinality can't be ignored.</p>



<a name="154026215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026215">(Dec 18 2018 at 23:58)</a>:</h4>
<p>But it can be constrained</p>



<a name="154026216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026216">(Dec 19 2018 at 00:06)</a>:</h4>
<p>That's not what the spec says...and not what my implementations have done.  Generally, I've not found it good practice to allow a type definition to constrain it's parent's ability to use it...</p>



<a name="154026217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026217">(Dec 19 2018 at 00:07)</a>:</h4>
<p>although I'm aware that's what SD.context does...</p>



<a name="154026218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026218">(Dec 19 2018 at 00:10)</a>:</h4>
<p>If you have an extension that's not allowed to repeat, the extension definition needs to be able to enforce that.  That's always been the rule.  The change request is to ensure it's properly documented.</p>



<a name="154026220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026220">(Dec 19 2018 at 00:11)</a>:</h4>
<p>We don't have a whole lot of use-cases for constraints other than prohibiting extension repetition, but that's still a necessary and valid one.</p>



<a name="154026225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026225">(Dec 19 2018 at 01:19)</a>:</h4>
<p>Is there somewhere in the spec that confirms your assertion?  Extension definitions are simply type profiles. They're only special because they're implicitly applied via the url attribute.  Is it your intention that this would also apply to say, a profile on Identifier?</p>



<a name="154026226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026226">(Dec 19 2018 at 01:22)</a>:</h4>
<p>(deleted)</p>



<a name="154026227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026227">(Dec 19 2018 at 01:50)</a>:</h4>
<p>If someone creates a profile on identifier that has a cardinality of 0..1 (e.g. a profile for a particular MRN), then yes, that would apply.  You could define in the profile a requirement that the cardinality of the declaring element would have to be a proper constraint on the profile of the type.  And there are places that might be reasonable to do.</p>



<a name="154026454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026454">(Dec 19 2018 at 21:35)</a>:</h4>
<blockquote>
<p>If the root cardinality of an extension definition is 0..1, it's illegal for a profile that references the extension to have a cardinality of 0..*</p>
</blockquote>
<p>That was my interpretation too.  My point was not so much about what happens or can be done when authoring profiles, but more what happens in an instance.  I can have a resource instance that does not claim conformance to any profile, yet the instance can use an extension, in fact, if it has multiple repeats of an extension, and the extension referenced then says 0..1 in the root - should't the validator complain?</p>



<a name="154026504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20of%20root%20elements/near/154026504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20of.20root.20elements.html#154026504">(Dec 20 2018 at 01:26)</a>:</h4>
<p>The validator <em>could</em> but that would mean inferring (and possibly locating) the extension profile based on the url.  That's not magic we've assumed just yet.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
