---
layout: page
title: "FHIR Chat  · FHIR resource validation using response interceptor in HA... · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20resource.20validation.20using.20response.20interceptor.20in.20HA.2E.2E.2E.html">FHIR resource validation using response interceptor in HA...</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="164636931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20resource%20validation%20using%20response%20interceptor%20in%20HA.../near/164636931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20resource.20validation.20using.20response.20interceptor.20in.20HA.2E.2E.2E.html#164636931">(May 01 2019 at 16:40)</a>:</h4>
<p>I am trying to validate outgoing FHIR resources using ResponseValidatingInterceptor but its not working. I followed all steps listed here : <a href="http://hapifhir.io/doc_rest_server_interceptor.html#_toc_requestresponse_validation" target="_blank" title="http://hapifhir.io/doc_rest_server_interceptor.html#_toc_requestresponse_validation">http://hapifhir.io/doc_rest_server_interceptor.html#_toc_requestresponse_validation</a></p>



<a name="164637597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20resource%20validation%20using%20response%20interceptor%20in%20HA.../near/164637597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20resource.20validation.20using.20response.20interceptor.20in.20HA.2E.2E.2E.html#164637597">(May 01 2019 at 16:50)</a>:</h4>
<p>Can you expand on "not working"?</p>



<a name="164638433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20resource%20validation%20using%20response%20interceptor%20in%20HA.../near/164638433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20resource.20validation.20using.20response.20interceptor.20in.20HA.2E.2E.2E.html#164638433">(May 01 2019 at 17:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> </p>
<p>I have a code as shown in example where I am purposely not setting "status" which is required in Observation resource  when http request is made to my server <a href="http://localhost:8080/context/fhir/resource/Observation?category=vital-signs&amp;patient=abcdefgh" target="_blank" title="http://localhost:8080/context/fhir/resource/Observation?category=vital-signs&amp;patient=abcdefgh">http://localhost:8080/context/fhir/resource/Observation?category=vital-signs&amp;patient=abcdefgh</a> </p>
<div class="codehilite"><pre><span></span>    Observation obs = new Observation();
    obs.getCode().addCoding().setSystem(&quot;http://loinc.org&quot;).setCode(&quot;12345-6&quot;);
    obs.setValue(new StringType(&quot;This is a value&quot;));
</pre></div>


<p>Then I have following code in the service which extends RestfulServer : </p>
<div class="codehilite"><pre><span></span>    public void initialize() {

          //some code ...
          ResponseValidatingInterceptor responseInterceptor = new ResponseValidatingInterceptor();
      responseInterceptor.addValidatorModule(new FhirInstanceValidator());
      responseInterceptor.setFailOnSeverity(ResultSeverityEnum.ERROR);
      responseInterceptor.setAddResponseHeaderOnSeverity(ResultSeverityEnum.INFORMATION);
      responseInterceptor.setResponseHeaderValue(&quot;Validation on ${line}: ${message} ${severity}&quot;);
      responseInterceptor.setResponseHeaderValueNoIssues(&quot;No issues detected&quot;);
    }
</pre></div>


<p>Now at the output, I am getting "No issues detected" when ideally I should get validation error in header since observation has no status.<br>
Thats my problem</p>
<p>My outgoing response in bundle through :</p>
<div class="codehilite"><pre><span></span>{
    &quot;resourceType&quot;: &quot;Bundle&quot;,
    &quot;id&quot;: &quot;uiehfkdhsfn-sdfjs-sdff-sdfs-yugrhfjbsdf&quot;,
    &quot;meta&quot;: {
        &quot;lastUpdated&quot;: &quot;2019-05-01T14:11:26.390-04:00&quot;
      },
    &quot;language&quot;: &quot;ENG&quot;,
    &quot;type&quot;: &quot;searchset&quot;,
    &quot;total&quot;: 4,
    &quot;link&quot;: [
        {
            &quot;relation&quot;: &quot;self&quot;,
            &quot;url&quot;: &quot;http://localhost:8080/context/fhir/resource/Observation?category=vital-signs&amp;amp;amp;patient=abcdefgh&quot;
        }
    ],
    &quot;entry&quot;: [
        {
            &quot;resource&quot;: {
                &quot;resourceType&quot;: &quot;Observation&quot;,
                &quot;id&quot;: &quot;adasdasdadasdasd.asdasdasdasdasdasd&quot;,
                &quot;text&quot;: {
                    &quot;status&quot;: &quot;generated&quot;,
                    &quot;div&quot;: &quot;&amp;amp;lt;table     xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&amp;amp;gt;&amp;amp;lt;thead&amp;amp;gt;&amp;amp;lt;tr&amp;amp;gt;&amp;amp;lt;th&amp;amp;gt;Vital&amp;amp;lt;/th&amp;amp;gt;&amp;amp;lt;th&amp;amp;gt;Patient Control         No&amp;amp;lt;/th&amp;amp;gt;&amp;amp;lt;/tr&amp;amp;gt;&amp;amp;lt;/thead&amp;amp;gt;&amp;amp;lt;tbody&amp;amp;gt;&amp;amp;lt;tr&amp;amp;gt;&amp;amp;lt;td&amp;amp;gt;Blood Pressure Systolic:117 mm     Hg&amp;amp;lt;/td&amp;amp;gt;&amp;amp;lt;td&amp;amp;gt;9294&amp;amp;lt;/td&amp;amp;gt;&amp;amp;lt;/tr&amp;amp;gt;&amp;amp;lt;/tbody&amp;amp;gt;&amp;amp;lt;/table&amp;amp;gt;&quot;
                },
                &quot;category&quot;: [
                    {
                        &quot;coding&quot;: [
                            {
                                &quot;system&quot;: &quot;http://hl7.org/fhir/observation-category&quot;,
                                &quot;code&quot;: &quot;vital-signs&quot;,
                                &quot;display&quot;: &quot;Vital Signs&quot;
                            }
                        ],
                        &quot;text&quot;: &quot;vital-signs&quot;
                    }
                ],
                &quot;code&quot;: {
                    &quot;coding&quot;: [
                        {
                            &quot;system&quot;: &quot;http://loinc.org&quot;,
                            &quot;code&quot;: &quot;8480-6&quot;,
                            &quot;display&quot;: &quot;blood pressure systolic&quot;
                        }
                    ],
                    &quot;text&quot;: &quot;Blood Pressure Systolic&quot;
                },
                &quot;subject&quot;: {
                    &quot;reference&quot;: &quot;Patient/abcdefgh&quot;
                },
                &quot;effectiveDateTime&quot;: &quot;2019-04-17&quot;,
                &quot;valueQuantity&quot;: {
                    &quot;value&quot;: 117,
                    &quot;unit&quot;: &quot;mm[Hg]&quot;,
                    &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,
                    &quot;code&quot;: &quot;mm[Hg]&quot;
                }
            }
        }
    ]
}
</pre></div>



<a name="164640092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20resource%20validation%20using%20response%20interceptor%20in%20HA.../near/164640092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20resource.20validation.20using.20response.20interceptor.20in.20HA.2E.2E.2E.html#164640092">(May 01 2019 at 17:27)</a>:</h4>
<p>That's much better :)  <span class="user-mention" data-user-id="191319">@James Agnew</span> ?  (Also, in the future, and if you don't get a timely response here, suggest raising on the <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a> stream.)</p>



<a name="164645109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20resource%20validation%20using%20response%20interceptor%20in%20HA.../near/164645109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20resource.20validation.20using.20response.20interceptor.20in.20HA.2E.2E.2E.html#164645109">(May 01 2019 at 18:25)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> . I also added some more desription regarding the response I am sending out.</p>



<a name="164654899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20resource%20validation%20using%20response%20interceptor%20in%20HA.../near/164654899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20resource.20validation.20using.20response.20interceptor.20in.20HA.2E.2E.2E.html#164654899">(May 01 2019 at 20:28)</a>:</h4>
<p>It doesn't look like you actually registered the interceptor in your code. You need to call <code>registerInterceptor(responseInterceptor);</code></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
