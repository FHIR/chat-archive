---
layout: page
title: "FHIR Chat  · optional datatype validation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/optional.20datatype.20validation.html">optional datatype validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="210508101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/optional%20datatype%20validation/near/210508101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirstine Rosenbeck Gøeg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/optional.20datatype.20validation.html#210508101">(Sep 18 2020 at 11:53)</a>:</h4>
<p>I have gotten reports that validation fails, if an attribute with an optional datatype e.g. value[x] is only constrained on datatype. Which would mean that an Observation.value[x] constrained to string, without any other profiling done to the value[x] field, will not validate. Differential looks like this:<br>
,<br>
      {<br>
        "id" : "Observation.value[x]",<br>
        "path" : "Observation.value[x]",<br>
        "type" : [<br>
          {<br>
            "code" : "string"<br>
          }<br>
        ]<br>
      },</p>
<p>Has anyone else experienced this? If yes, why is it that it doesn't validate?</p>



<a name="210508325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/optional%20datatype%20validation/near/210508325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/optional.20datatype.20validation.html#210508325">(Sep 18 2020 at 11:56)</a>:</h4>
<p>can you provide a full profile and an instance? I'm not quite sure what you mean</p>



<a name="210509252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/optional%20datatype%20validation/near/210509252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirstine Rosenbeck Gøeg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/optional.20datatype.20validation.html#210509252">(Sep 18 2020 at 12:06)</a>:</h4>
<p>I have both a profile and an example on this one: <a href="http://build.fhir.org/ig/Kirstinerosenbeck/FKInfo/branches/master/StructureDefinition-KLCommonCareSocialInformation.html">http://build.fhir.org/ig/Kirstinerosenbeck/FKInfo/branches/master/StructureDefinition-KLCommonCareSocialInformation.html</a><br>
(I know the profile has a stupid name, because everything is "information", and that the IG has a silly path - it is a work i progress)</p>



<a name="210856118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/optional%20datatype%20validation/near/210856118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/optional.20datatype.20validation.html#210856118">(Sep 22 2020 at 11:19)</a>:</h4>
<p>so I validated this resource against the profile <a href="http://kl.dk/fhir/common/caresocial/StructureDefinition/KLCommonCareSocialInformation">http://kl.dk/fhir/common/caresocial/StructureDefinition/KLCommonCareSocialInformation</a> using the package from that branch:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span> <span class="p">:</span> <span class="s2">"Observation"</span><span class="p">,</span>
  <span class="nt">"id"</span> <span class="p">:</span> <span class="s2">"MobilityInformation"</span><span class="p">,</span>
  <span class="nt">"meta"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">"profile"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="s2">"http://kl.dk/fhir/common/caresocial/StructureDefinition/KLCommonCareSocialInformation"</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">"status"</span> <span class="p">:</span> <span class="s2">"final"</span><span class="p">,</span>
  <span class="nt">"code"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">"coding"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">"system"</span> <span class="p">:</span> <span class="s2">"urn:oid:1.2.208.176.2.21"</span><span class="p">,</span>
        <span class="nt">"code"</span> <span class="p">:</span> <span class="s2">"J3"</span><span class="p">,</span>
        <span class="nt">"display"</span> <span class="p">:</span> <span class="s2">"Mobilitet"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">"subject"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">"reference"</span> <span class="p">:</span> <span class="s2">"Patient/Judith"</span>
  <span class="p">},</span>
  <span class="nt">"effectiveDateTime"</span> <span class="p">:</span> <span class="s2">"2020-08-11T15:28:17-01:00"</span><span class="p">,</span>
  <span class="nt">"valueString"</span> <span class="p">:</span> <span class="s2">"Judith har faldtendens, men er meget dedikeret ift. at lære at bruge sin rollator indendørs og udendørs, og desuden går hun en tur på 30min hver dag"</span>
<span class="p">}</span>
</code></pre></div>



<a name="210856122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/optional%20datatype%20validation/near/210856122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/optional.20datatype.20validation.html#210856122">(Sep 22 2020 at 11:19)</a>:</h4>
<p>I got this output:</p>



<a name="210856127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/optional%20datatype%20validation/near/210856127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/optional.20datatype.20validation.html#210856127">(Sep 22 2020 at 11:19)</a>:</h4>
<div class="codehilite"><pre><span></span><code>|FHIR Validation tool Version 5.1.11-SNAPSHOT (Git# 8a11bd2e9b6f). Built 2020-09-16T06:48:26.711+10:00 (6 days old)
  Java:   1.8.0_251 from C:\Program Files\Java\jre1.8.0_251 on amd64 (64bit). 14526MB available
  Paths:  Current = c:\temp, Package Cache = C:\Users\graha\.fhir\packages
  Params: C:\temp\mobility.json -ig C:\temp\package-dk.tgz -profile http://kl.dk/fhir/common/caresocial/StructureDefinition/KLCommonCareSocialInformation
Scanning for versions (no -version parameter):
  Package C:\temp\package-dk.tgz: 4.0
-&gt; use version 4.0
Loading
  Load FHIR v4.0 from hl7.fhir.r4.core#4.0.1 - 4575 resources (00:03.0826)
  Terminology server http://tx.fhir.org - Version 1.0.349 (00:02.0927)
  Load C:\temp\package-dk.tgz+  .. load IG from hl7.fhir.us.core#3.1.0 - 228 resources (00:00.0922)
  Get set...  go (00:00.0002)
Validating
  Profiles: [http://kl.dk/fhir/common/caresocial/StructureDefinition/KLCommonCareSocialInformation]
  Validate C:\temp\mobility.json 00:00.0116
Done. Times: Loading: 00:08.0168, validation: 00:00.0116

*FAILURE*: 1 errors, 0 warnings, 1 notes
  Error @ Observation.code (line 11, col17) : None of the codes provided are in the value set http://kl.dk/fhir/common/caresocial/ValueSet/KLInformationCodes (http://kl.dk/fhir/common/caresocial/ValueSet/KLInformationCodes), and a code from this value set is required) (codes = urn:oid:1.2.208.176.2.21#J3)
  Information @ Observation.code.coding[0] (line 12, col8) : Code System URI &#39;urn:oid:1.2.208.176.2.21&#39; is unknown so the code cannot be validated
</code></pre></div>



<a name="210969825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/optional%20datatype%20validation/near/210969825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirstine Rosenbeck Gøeg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/optional.20datatype.20validation.html#210969825">(Sep 23 2020 at 08:00)</a>:</h4>
<p>Thanks. That is an expected error - sorry I didn't catch that before I decided this was a great example.  No errors regarding the validation of valueString so that is great. Wonder if <span class="user-mention" data-user-id="256845">@Signe Hejgaard Kristoffersen</span> could remember more details about what it is that won't validate in their system?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
