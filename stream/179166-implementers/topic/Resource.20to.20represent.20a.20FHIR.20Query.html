---
layout: page
title: "FHIR Chat  · Resource to represent a FHIR Query · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html">Resource to represent a FHIR Query</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="228821873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/228821873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcus Wurlitzer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#228821873">(Mar 04 2021 at 18:09)</a>:</h4>
<p>Hi all, is there a "FHIR way" to represent metadata of a FHIR query? Background: someone requests data from our FHIR server with a query. We would like the sender to submit not only the query, but also information about who sends it, at what time, what authorization they have, and possibly more. That "Query resource" may be stored as a kind of audit event and also used to form the response (think of asynchronous queries). Quick sketch of what such Resource could be like:</p>
<ul>
<li>Query.sender - Reference(Person)</li>
<li>Query.sendingOrganization - Reference(Organization)</li>
<li>Query.timestamp - instant</li>
<li>Query.parameters 0..* any number of parameters that may be query-specific. Also including an authorization token (or perhaps this should go somewhere else?)</li>
<li>Query.requestBundle - Bundle with the actual queries to be executed</li>
<li>Query.responseBundle - the response</li>
</ul>
<p>Is there a way to do it in FHIR? Or would you say that this goes to a "meta-level" that is beyond what FHIR is supposed to be?</p>



<a name="228825227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/228825227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#228825227">(Mar 04 2021 at 18:28)</a>:</h4>
<p>This is interesting idea. First question, are you using post? Otherwise, how could a client search and send those data at the same time?</p>



<a name="228832121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/228832121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcus Wurlitzer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#228832121">(Mar 04 2021 at 19:10)</a>:</h4>
<p>This would be a POST query then, yes, like a Bundle with an entry where <code>request.method = GET</code> and <code>request.url = Patient?identifier=12345</code>.</p>



<a name="228834609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/228834609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#228834609">(Mar 04 2021 at 19:26)</a>:</h4>
<p>I think you can create a profile on Bundle with extensions for Reference(Person) and Reference(Organization). why do you need Reference(Organization) since Person already have Person.managingOrganization</p>



<a name="228836637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/228836637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcus Wurlitzer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#228836637">(Mar 04 2021 at 19:39)</a>:</h4>
<p>Right - the Bundle has many properties that would be needed. Is the concept of <a href="https://www.hl7.org/fhir/messaging.html">messaging</a> related to this?</p>



<a name="228897552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/228897552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#228897552">(Mar 05 2021 at 04:46)</a>:</h4>
<p>It sounds like what you're trying to do is more up the messaging pathway.  In REST, the user would authenticate with OAuth and you might, at that point, capture their reason for access.</p>



<a name="228897571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/228897571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#228897571">(Mar 05 2021 at 04:46)</a>:</h4>
<p>Note that Person is never allowed to be referenced.  You must use Patient, RelatedPerson or Practitioner.  Person is a linking resource, it can't ever act on its own.</p>



<a name="228897623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/228897623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#228897623">(Mar 05 2021 at 04:47)</a>:</h4>
<p>There's no need to specify timestamp or parameters because you know when the query is received and the parameters are what's captured online.  If you want to record all of that information in a permanent record, you can create an AuditEvent instance.</p>



<a name="228897691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/228897691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#228897691">(Mar 05 2021 at 04:48)</a>:</h4>
<p>Most of the FHIR community uses REST for query.  You're free to use messaging, but you won't find a lot of interoperability partners.</p>



<a name="228897714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/228897714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#228897714">(Mar 05 2021 at 04:48)</a>:</h4>
<p>Also, solutions like SMART, CDS-Hooks, etc. won't be able to work on top of your interface.</p>



<a name="228910889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/228910889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#228910889">(Mar 05 2021 at 07:59)</a>:</h4>
<p>Indeed, using a Parameters resource as the focal resource in a FHIR Message would support your use case.</p>



<a name="229308992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/229308992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcus Wurlitzer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#229308992">(Mar 08 2021 at 14:41)</a>:</h4>
<p>Thanks Lloyd, I get the point on acting RESTfully, but I think this is a really an asynchronous query scenario here which cannot be handled truly RESTfully. Think having your own FHIR server and you wanting to <em>review every query</em> before execution.</p>
<p>Thank you for pointing out the nature of the Person resource.</p>



<a name="229309806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/229309806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#229309806">(Mar 08 2021 at 14:46)</a>:</h4>
<p><span class="user-mention" data-user-id="263785">@Marcus Wurlitzer</span> </p>
<blockquote>
<p>but I think this is a really an asynchronous query scenario here which cannot be handled truly RESTfully. but I think this is a really an asynchronous query scenario here which cannot be handled truly RESTfully. </p>
</blockquote>
<p>That is why Lloyd mentioned "messaging" which is async by nature. Take a look of this one: <a href="http://build.fhir.org/messaging">http://build.fhir.org/messaging</a>. It may give you some ideas.</p>



<a name="229445260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20to%20represent%20a%20FHIR%20Query/near/229445260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcus Wurlitzer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20to.20represent.20a.20FHIR.20Query.html#229445260">(Mar 09 2021 at 09:16)</a>:</h4>
<p>Yes, that's what I was thinking as well. Thank you all for your suggestions.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
