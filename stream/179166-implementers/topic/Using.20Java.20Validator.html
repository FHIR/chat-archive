---
layout: page
title: "FHIR Chat  · Using Java Validator · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html">Using Java Validator</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153851509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851509">(Oct 03 2016 at 04:37)</a>:</h4>
<p>Hello all,<br>
I was trying to use java-validator to validate profiles. I found an existing one here, <a href="https://www.hl7.org/fhir/uslab/uslab-patient.profile.xml.html" target="_blank" title="https://www.hl7.org/fhir/uslab/uslab-patient.profile.xml.html">https://www.hl7.org/fhir/uslab/uslab-patient.profile.xml.html</a> and an example patient for this profile <a href="https://www.hl7.org/fhir/uslab/patient-uslab-example1.xml.html" target="_blank" title="https://www.hl7.org/fhir/uslab/patient-uslab-example1.xml.html">https://www.hl7.org/fhir/uslab/patient-uslab-example1.xml.html</a>. I downloaded the java-validator and FHIR Definitions as xml from downloads page.</p>
<p>I am running it as below</p>
<p><code>java -jar org.hl7.fhir.validator.jar example_us_lab_patient.xml -defn validation-min.xml.zip -profile patient-us-lab.profile.xml</code></p>
<p>below is the result </p>
<p><code>Validating valid_patient_with_mandatory_fields.xml: 2 messages
ERROR @ /f:Patient/f:extension[1] (line 3, col505) Element is unknown or does not match any slice (src = InstanceValidator)
ERROR @ /f:Patient/f:extension (line 10, col78) Element is unknown or does not match any slice (src = InstanceValidator)
 …failure</code></p>
<p>I am not sure whether I am missing something or the example patient is incorrect. I also want to know how to do the same using java code.</p>



<a name="153851510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851510">(Oct 03 2016 at 04:49)</a>:</h4>
<p>the java question - the validator is also packaged in HAPI - org.hl7.fhir.dstu2.validation.ValidationEngine is the java class that the jar uses to launch the actual validator</p>



<a name="153851511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851511">(Oct 03 2016 at 04:50)</a>:</h4>
<p>I'm not sure why you're getting that error - it looks uncorrect to me </p>



<a name="153851514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851514">(Oct 03 2016 at 05:14)</a>:</h4>
<p>hey <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, thanks for your response. I tried using it in java code. I added downloaded <code>org.hl7.fhir.validator.jar</code> itself as a dependency for my project, but it fails when I say below</p>



<a name="153851515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851515">(Oct 03 2016 at 05:16)</a>:</h4>
<p><code>engine.loadProfile("/Users/mritunjd/Downloads/validator/patient-us-lab.profile.xml");</code></p>



<a name="153851516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851516">(Oct 03 2016 at 05:16)</a>:</h4>
<p>It goes to <code>SimpleWorkerContext</code> and fails saying <code>java.lang.Error: not done yet</code>. </p>



<a name="153851517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851517">(Oct 03 2016 at 05:17)</a>:</h4>
<p>Even I tried adding <code>me.fhir:fhir-dstu2:1.0.1.7108</code> as dependency and do it, but same problem, can you please tell me what can be wrong here ?</p>



<a name="153851524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851524">(Oct 03 2016 at 05:54)</a>:</h4>
<p>You have to refer to the profile by it's url, not it's location </p>



<a name="153851527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851527">(Oct 03 2016 at 06:12)</a>:</h4>
<p>okey, I tried changing this with <code>engine.loadProfile("patient-us-lab.profile.xml")</code>, it fails with an error <code>Unable to find named profile (source = patient-us-lab.profile.xml)</code>, but if I pass the same from command line it works fine. Is there a way to load the profile from file?</p>



<a name="153851528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851528">(Oct 03 2016 at 06:15)</a>:</h4>
<p>if I see the code, there it says if it's a url(i.e. startswith <code>http(s)</code>), load it from url otherwise load it from file.</p>



<a name="153851529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851529">(Oct 03 2016 at 06:16)</a>:</h4>
<p>but when I pass it as a profile location, it fails in <code>SimpleWorkerContext</code>.</p>



<a name="153851530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851530">(Oct 03 2016 at 06:38)</a>:</h4>
<p>well, whatever you put in the -profile parameter is passed straight to ValidationEngine.loadprofile()</p>



<a name="153851537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851537">(Oct 03 2016 at 07:41)</a>:</h4>
<p>I also thought the same, and passed the same argument (value for <code>-profile</code> option) to <code>loadProfile()</code> method, but seems like there is something missing. What is the recomonnded way to validate against a <code>profile.xml</code> file. Is there a tutorial available for this ?</p>



<a name="153851544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153851544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153851544">(Oct 03 2016 at 10:19)</a>:</h4>
<p>All we have at the moment is the validation page in the spec. And that doesn't deal with using it in java, but the code for Validator.java is in the fhir svn</p>



<a name="153852107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852107">(Oct 06 2016 at 03:01)</a>:</h4>
<p>hey <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, I cloned  the fhir-svn repo, and run the build with <code>sh publish.sh</code>, the build fails  saying <code>error: cannot find symbol return StringUtils.equals(getValueAsString(), theString);</code><br>
I am using it on macos.</p>



<a name="153852108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852108">(Oct 06 2016 at 03:01)</a>:</h4>
<p><a href="/user_uploads/10155/YuKN5PJt2vbdDoyF3dYXaxD_/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/YuKN5PJt2vbdDoyF3dYXaxD_/pasted_image.png" target="_blank" title="pasted_image.png"><img src="/user_uploads/10155/YuKN5PJt2vbdDoyF3dYXaxD_/pasted_image.png"></a></div>



<a name="153852109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852109">(Oct 06 2016 at 03:39)</a>:</h4>
<p>What does <code>java -version</code> say?</p>



<a name="153852110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852110">(Oct 06 2016 at 03:53)</a>:</h4>
<p>java 1.8.0_92</p>



<a name="153852111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852111">(Oct 06 2016 at 04:19)</a>:</h4>
<p>Well, I checked out a specific commit 6cc899af2017c3819f5448165434450bced7b047 because I wanted the DSTU2-last, and here it build successfuly.</p>



<a name="153852112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852112">(Oct 06 2016 at 04:26)</a>:</h4>
<p>DSTU2? carumna. that's a problem. why do you want to build</p>



<a name="153852113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852113">(Oct 06 2016 at 04:28)</a>:</h4>
<p>As I told above, I was trying to use java-validator jar in my code directly. For some reason it is failing, but I am not able to debug it beacasue I don't have codebase of same version.</p>



<a name="153852114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852114">(Oct 06 2016 at 04:28)</a>:</h4>
<p>I thought I will build the jar with DSTU2 version and debug it on same code base, to get an idea of what's going wrong while validation.</p>



<a name="153852115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852115">(Oct 06 2016 at 04:29)</a>:</h4>
<p>hm. well, you don't need to run the build, but ok, you do need to get it compiling. I'll have to figure out what your problem is .....</p>



<a name="153852150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852150">(Oct 06 2016 at 13:22)</a>:</h4>
<p>I got it working, thanks for the support, Now I have a different question. In my patient profile I am making <a href="http://patient.name" target="_blank" title="http://patient.name">patient.name</a>, patient.name.family and patient .name.given as mandatory (i.e. cardinality 1..1). </p>
<p>When I try to validate it gives error for patient.name(when I don't send <a href="http://patient.name" target="_blank" title="http://patient.name">patient.name</a>, expexted), but for patient.name.given and patient.name.family it's validating. I think that might be because of they are grand-child of parent(patient=&gt;name=&gt;family). Is there another way to validate them?</p>



<a name="153852151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852151">(Oct 06 2016 at 13:22)</a>:</h4>
<p>below is the relavant part of profile-differential generated by Forge tool</p>
<div class="codehilite"><pre>&lt;element&gt;
  &lt;path value=&quot;Patient.name&quot; /&gt;
  &lt;min value=&quot;1&quot; /&gt;
  &lt;max value=&quot;1&quot; /&gt;
  &lt;base&gt;
    &lt;path value=&quot;Patient.name&quot; /&gt;
    &lt;min value=&quot;0&quot; /&gt;
    &lt;max value=&quot;*&quot; /&gt;
  &lt;/base&gt;
&lt;/element&gt;
&lt;element&gt;
  &lt;path value=&quot;Patient.name.family&quot; /&gt;
  &lt;min value=&quot;1&quot; /&gt;
  &lt;max value=&quot;1&quot; /&gt;
  &lt;base&gt;
    &lt;path value=&quot;Patient.name.family&quot; /&gt;
    &lt;min value=&quot;0&quot; /&gt;
    &lt;max value=&quot;*&quot; /&gt;
  &lt;/base&gt;
&lt;/element&gt;
&lt;element&gt;
  &lt;path value=&quot;Patient.name.given&quot; /&gt;
  &lt;min value=&quot;1&quot; /&gt;
  &lt;max value=&quot;1&quot; /&gt;
  &lt;base&gt;
    &lt;path value=&quot;Patient.name.given&quot; /&gt;
    &lt;min value=&quot;0&quot; /&gt;
    &lt;max value=&quot;*&quot; /&gt;
  &lt;/base&gt;
&lt;/element&gt;
</pre></div>



<a name="153852171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852171">(Oct 06 2016 at 18:41)</a>:</h4>
<p>that should work</p>



<a name="153852172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852172">(Oct 06 2016 at 18:41)</a>:</h4>
<p>what does 'I got it working' mean?</p>



<a name="153852242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20Java%20Validator/near/153852242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20Java.20Validator.html#153852242">(Oct 07 2016 at 02:49)</a>:</h4>
<p>what does 'I got it working' mean?</p>
<p>I meant that I was not able to Use <code>org.hl7.fhir.dstu2.validation.ValidationEngine</code> for some reason, but I am able to use it in a fresh project, but I am still facing problem validation for field which are not directly children to parent. I think it might be because to validate <code>patient.name.family</code> it might be reading the standard <code>humanname.profile.xml</code>. Is there a way I can force it to use overridden snapshot? The snapshot says family and given are mandatory fields.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
