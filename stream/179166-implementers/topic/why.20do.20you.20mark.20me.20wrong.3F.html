---
layout: page
title: "FHIR Chat  · why do you mark me wrong? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/why.20do.20you.20mark.20me.20wrong.3F.html">why do you mark me wrong?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="165850492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/why%20do%20you%20mark%20me%20wrong%3F/near/165850492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luis EC <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/why.20do.20you.20mark.20me.20wrong.3F.html#165850492">(May 16 2019 at 21:26)</a>:</h4>
<p>what am I doing wrong?</p>
<p>patient.setId(IdDt.newRandomUuid());</p>
<div class="codehilite"><pre><span></span>    Observation observation = new Observation();
    observation.setStatus(ObservationStatus.FINAL);
    observation
            .getCode()
            .addCoding()
            .setSystem(&quot;http://loinc.org&quot;)
            .setCode(&quot;789-8&quot;)
            .setDisplay(&quot;Erythrocytes [#/volume] in Blood by Automated count&quot;);
    observation.setValue(
            new Quantity()
                    .setValue(4.12)
                    .setUnit(&quot;10 trillion/L&quot;)
                    .setSystem(&quot;http://unitsofmeasure.org&quot;)
                    .setCode(&quot;10*12/L&quot;));
    observation.setSubject(new Reference(patient.getId()));

    //reporte diagnostico 
    DiagnosticReport diagnosticom = new DiagnosticReport();
    diagnosticom.setStatus(DiagnosticReportStatus.FINAL);
    diagnosticom.getCode().addCoding().setSystem(&quot;s&quot;).setCode(&quot;78&quot;).setDisplay(&quot;:&quot;);
diagnosticom.getCode().setText(&quot;Some Diagnostic Report&quot;);

diagnosticom.addResult().setReference(&quot;Observation/1&quot;);
diagnosticom.addResult().setReference(&quot;Observation/2&quot;);
diagnosticom.addResult().setReference(&quot;Observation/3&quot;);

/*Narrative narrative = new Narrative();
myGen.generateNarrative(ctx, diagnosticom, narrative);
String output = narrative.getDiv().getValueAsString();

ourLog.info(output);
assertThat(output, StringContains.containsString(diagnosticom.getCode().getTextElement().getValue()));*/
    diagnosticom.setSubject(new Reference(patient.getId()));

    // Create a bundle that will be used as a transaction

    Bundle bundle = new Bundle();
    bundle.setType(BundleType.TRANSACTION);

    bundle.addEntry()
            .setFullUrl(patient.getId())
            .setResource(patient)
            .getRequest()
            .setUrl(&quot;Patient&quot;)
            .setIfNoneExist(&quot;identifier=http://acme.org/mrns|12345&quot;)
            .setMethod(HTTPVerb.POST);
    bundle.addEntry()
            .setResource(observation)
            .getRequest()
            .setUrl(&quot;Observation&quot;)
            .setMethod(HTTPVerb.POST);
    bundle.addEntry()
            .setResource(diagnosticom)
            .getRequest()
            .setUrl(&quot;diagnostico&quot;)
            .setMethod(HTTPVerb.POST);

    ctx.newXmlParser().setPrettyPrint(true).encodeResourceToString(bundle);
    //System.out.println(&quot;uno: &quot;+ctx.newXmlParser().setPrettyPrint(true).encodeResourceToString(bundle));
    Bundle resp = client.transaction().withBundle(bundle).execute();
    ctx.newXmlParser().setPrettyPrint(true).encodeResourceToString(resp);
</pre></div>



<a name="165855122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/why%20do%20you%20mark%20me%20wrong%3F/near/165855122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/why.20do.20you.20mark.20me.20wrong.3F.html#165855122">(May 16 2019 at 22:34)</a>:</h4>
<p>what's the error? Is this HAPI?</p>



<a name="165857971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/why%20do%20you%20mark%20me%20wrong%3F/near/165857971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luis EC <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/why.20do.20you.20mark.20me.20wrong.3F.html#165857971">(May 16 2019 at 23:22)</a>:</h4>
<p>I mark error in these two lines but I can not understand why<br>
Bundle resp = client.transaction().withBundle(bundle).execute();<br>
ctx.newXmlParser().setPrettyPrint(true).encodeResourceToString(resp)</p>



<a name="165858612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/why%20do%20you%20mark%20me%20wrong%3F/near/165858612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/why.20do.20you.20mark.20me.20wrong.3F.html#165858612">(May 16 2019 at 23:32)</a>:</h4>
<p>You mean your developer environment is flagging those lines as being in error?  What do the error messages say?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
