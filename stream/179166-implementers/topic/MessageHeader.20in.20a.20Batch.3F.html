---
layout: page
title: "FHIR Chat  · MessageHeader in a Batch? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MessageHeader.20in.20a.20Batch.3F.html">MessageHeader in a Batch?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153952309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MessageHeader%20in%20a%20Batch%3F/near/153952309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MessageHeader.20in.20a.20Batch.3F.html#153952309">(Apr 13 2018 at 19:55)</a>:</h4>
<p>I'm wondering whether it's allowed to have a MessageHeader resource in a FHIR batch or it can only be used in a message. </p>
<p>We consider creating an alternative mechanism for some pharmacies, which are not able so support REST, to let them submit batches of Medication Dispense resources. We would need to have some metadata in each batch, e.g. source software and version, which can be conveyed in a MessageHeader in case it's allowed in a batch.</p>



<a name="153952329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MessageHeader%20in%20a%20Batch%3F/near/153952329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MessageHeader.20in.20a.20Batch.3F.html#153952329">(Apr 13 2018 at 21:07)</a>:</h4>
<p>If MessageHeader were in a batch, it would let you say "Please create/update/delete this MessageHeader instance".  And each element in the batch would be produced independently.  If you want to send metadata about elements, use Provenance - though you'd probably want to use "transaction" rather than "batch" because you'd want everything to be processed or nothing.</p>



<a name="153952365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MessageHeader%20in%20a%20Batch%3F/near/153952365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MessageHeader.20in.20a.20Batch.3F.html#153952365">(Apr 14 2018 at 02:00)</a>:</h4>
<p>Thank you Lloyd. I did realize MessageHeader wasn't right for transactions/batches, but still hoped to be wrong :) We would probably create extensions on the bundle, since Provenance doesn't have data elements for software name and version anyway. Also, having a provenance on each resource might be an overkill as we expect hundreds of thousands of resources a day once the system is fully rolled out. We do plan to use a "transaction", but for historical reasons we call it a batch process.</p>



<a name="153952366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MessageHeader%20in%20a%20Batch%3F/near/153952366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MessageHeader.20in.20a.20Batch.3F.html#153952366">(Apr 14 2018 at 02:59)</a>:</h4>
<p>If all of the resources were created as a single event, they can have a single Provenance.  The software and version would be on the Device the Provenance points to</p>



<a name="153952367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MessageHeader%20in%20a%20Batch%3F/near/153952367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MessageHeader.20in.20a.20Batch.3F.html#153952367">(Apr 14 2018 at 03:00)</a>:</h4>
<p>(And the Device could be contained if you don't care about its identity)</p>



<a name="153952368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MessageHeader%20in%20a%20Batch%3F/near/153952368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MessageHeader.20in.20a.20Batch.3F.html#153952368">(Apr 14 2018 at 03:54)</a>:</h4>
<p>Thank you Lloyd! This is very helpful.</p>



<a name="153952452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MessageHeader%20in%20a%20Batch%3F/near/153952452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MessageHeader.20in.20a.20Batch.3F.html#153952452">(Apr 16 2018 at 09:23)</a>:</h4>
<p>And - I don't believe that you can have extensions on a Bundle type anyway...  (It inherits from Resource - not DomainResource)...</p>



<a name="153952460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MessageHeader%20in%20a%20Batch%3F/near/153952460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MessageHeader.20in.20a.20Batch.3F.html#153952460">(Apr 16 2018 at 11:06)</a>:</h4>
<p>You could create a Bundle (#1) which contains a MessageHeader which points to a Bundle (#2, also part of Bundle #1). That way you'd associate a MessageHeader with a Bundle. <br>
However, Igor's interest seems to be in the area of Provenance. Provenance.agent.whoReference can be to a Device resource (which also applies to software applications). The Device resource has data elements for name and version. Provenance.agent.role could be used to identify whether the agent is a sender or a reciever of the Bundle.</p>



<a name="153952544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MessageHeader%20in%20a%20Batch%3F/near/153952544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MessageHeader.20in.20a.20Batch.3F.html#153952544">(Apr 16 2018 at 15:27)</a>:</h4>
<p>Thank you David and Rene. We are still trying to confirm our business requirements. We would need to support both REST and Batch/Transaction submissions of medication dispenses. Ideally, we wouldn't request every pharmacy to include the Provenance and Device resources, but would rather create Provenance internally for received dispenses. However, if software and version are indeed in scope, we would need to find a place for pharmacies to include these data elements in their submissions.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
