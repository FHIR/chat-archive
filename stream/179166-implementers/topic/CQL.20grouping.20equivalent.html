---
layout: page
title: "FHIR Chat  · CQL grouping equivalent · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CQL.20grouping.20equivalent.html">CQL grouping equivalent</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="271152317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CQL%20grouping%20equivalent/near/271152317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik Smith <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CQL.20grouping.20equivalent.html#271152317">(Feb 08 2022 at 16:21)</a>:</h4>
<p>I want to express a query to find the claim provider with the most frequent visits for a member in CQL, not specific to FHIR.  This would be straightforward if CQL had a SQL GROUP BY.  It's unclear how I can accomplish this with aggregate.   Any Ideas?</p>



<a name="271159906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CQL%20grouping%20equivalent/near/271159906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CQL.20grouping.20equivalent.html#271159906">(Feb 08 2022 at 17:15)</a>:</h4>
<p>We didn't add a group by or having clause, but both of those are just short-hands. The long-hand for count of observations by category, for example, is:</p>
<div class="codehilite"><pre><span></span><code>define ObservationCountsByCategory:
  [Observation] O
    return {
      category: O.category,
      numberOfObservations: Count([Observation] InnerO where InnerO.category ~ O.category)
    }
</code></pre></div>



<a name="271178351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CQL%20grouping%20equivalent/near/271178351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik Smith <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CQL.20grouping.20equivalent.html#271178351">(Feb 08 2022 at 19:26)</a>:</h4>
<p>This is nice.  I was thinking that you would want the outer source O need to be distinct observations by category , or just a a distinct category list, for the counts to work, but maybe that is optional since the result of this query will be distinct?</p>



<a name="271181438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CQL%20grouping%20equivalent/near/271181438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CQL.20grouping.20equivalent.html#271181438">(Feb 08 2022 at 19:51)</a>:</h4>
<p>Right, the result will be distinct.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
