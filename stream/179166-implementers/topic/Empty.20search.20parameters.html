---
layout: page
title: "FHIR Chat  · Empty search parameters · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html">Empty search parameters</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153924729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153924729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Svendsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153924729">(Dec 13 2017 at 13:17)</a>:</h4>
<p>Noobie here: <br>
Say I make a search along the lines of 'GET [base]/Observation?subject=,code=whatever' (with an empty subject-parameter), what would the expected response be?<br>
Do I throw an error,  since searching for nothing does not make sense?<br>
Or should I return an empty set, since I have no observations with the subject in the empty list?<br>
Or do I return all observations where subject is missing?</p>
<p>I know hapi just tosses the empty parameters away before they even hit the server, but I was wondering what the fhir spec has to say on the matter, and I could not find anything about it in <a href="https://www.hl7.org/fhir/DSTU2/search.html#errors" target="_blank" title="https://www.hl7.org/fhir/DSTU2/search.html#errors">https://www.hl7.org/fhir/DSTU2/search.html#errors</a></p>



<a name="153924730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153924730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153924730">(Dec 13 2017 at 13:19)</a>:</h4>
<p>Elements are not allowed to be empty, so searching for it also makes no sense. If subject (in this case) is to be empty, it should not be in the resource altogether. And you can search for that: /Observation?subject:missing=true</p>



<a name="153924731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153924731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153924731">(Dec 13 2017 at 13:20)</a>:</h4>
<p>BTW: Your example contains another error: the comma should be an ampersand: <br>
GET [base]/Observation?subject=&amp;code=whatever</p>



<a name="153924732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153924732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Svendsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153924732">(Dec 13 2017 at 13:22)</a>:</h4>
<p>Roger, so I just return an OperationOutcome in which I yell at the client for trying to do that?  :-)</p>



<a name="153924733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153924733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153924733">(Dec 13 2017 at 13:26)</a>:</h4>
<p>You could also tell the client politely, but yes, that is the correct answer :-)</p>



<a name="153924755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153924755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153924755">(Dec 13 2017 at 15:54)</a>:</h4>
<p>There are a lot of UIs that display a list of search criteria for you to search on and then generate the search string by concatenation, so seeing <code>...?subject=&amp;code=foo</code> is pretty common.  I know Grahame's server ignores parameters without a value.  If you wanted to search for elements where the value was missing, you'd do <code>subject:missing=true</code></p>



<a name="153924844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153924844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153924844">(Dec 13 2017 at 19:17)</a>:</h4>
<p>a search with no criteria is a request to list all resources of the specified type. The public servers generally just go ahead and list all the resources... but server are not required to implement this, and should return an error if they do not</p>



<a name="153924896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153924896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153924896">(Dec 13 2017 at 20:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> The question is what to do with a parameter that's listed but provides no value</p>



<a name="153924900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153924900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153924900">(Dec 13 2017 at 20:57)</a>:</h4>
<p>ignore it.</p>



<a name="153925059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153925059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153925059">(Dec 13 2017 at 22:31)</a>:</h4>
<p>Do we state that explicitly in the spec anywhere?</p>



<a name="153925064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153925064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153925064">(Dec 13 2017 at 22:32)</a>:</h4>
<p>apparently not. Surprisingly. but it's very definitely the case, based on how HTML forms work</p>



<a name="153925070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153925070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153925070">(Dec 13 2017 at 22:39)</a>:</h4>
<p><span class="user-mention" data-user-id="194989">@Mathias Svendsen</span> Would you be willing to submit a change proposal?  Just click on the "Propose a change" link at the bottom of any page in the spec.  You'll need to register (which sometimes takes a day or two as HL7 HQ tries to confirm that you're a real human being and not a viagra sales person), but after that you can submit as many change proposals as you like.  And you'll be officially elevated from being a "Noobie" :)</p>



<a name="153925187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153925187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathias Svendsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153925187">(Dec 14 2017 at 13:14)</a>:</h4>
<p>Ignoring search params seems like a bad thing - that's what prompted me to ask here. If i, say ask for all observations for a patient, and the list of patiens is accidentally empty, the server would take quite a performance hit if it was expected to just return everything.  Personally I like either the error-option or the empty-result-option. <br>
Any way, i'll propose a change, to officially be un-noobie-fied</p>



<a name="153925205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153925205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153925205">(Dec 14 2017 at 15:42)</a>:</h4>
<p>The server has the right to reject a query without a minimum number of search parameters, to cap the number of rows contained or to throw a "too costly" error.  Ignoring search parameters will be pretty common - systems can also ignore search parameters they don't support even if data is specified.  It's the responsibility of the client to look at the "self" link to see what search parameters were actually used.</p>



<a name="153925875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153925875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153925875">(Dec 18 2017 at 10:02)</a>:</h4>
<p>Indeed it is not explicitly in the spec. I interpreted this as a special case of 'Unknown and unsupported parameters' (<a href="http://build.fhir.org/search.html#errors" target="_blank" title="http://build.fhir.org/search.html#errors">http://build.fhir.org/search.html#errors</a>), since a parameter without a value is unsupported by Vonk. We ignore it but include a warning in the OO in the response bundle.</p>



<a name="153925884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153925884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153925884">(Dec 18 2017 at 10:29)</a>:</h4>
<p>pre-applied this note:<br>
Note: Empty parameters are not in error - they are just ignored by the server</p>



<a name="153925967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Empty%20search%20parameters/near/153925967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Empty.20search.20parameters.html#153925967">(Dec 18 2017 at 15:44)</a>:</h4>
<p>"an error" would read slightly better than "in error"</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
