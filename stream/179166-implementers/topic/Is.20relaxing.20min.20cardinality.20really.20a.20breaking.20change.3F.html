---
layout: page
title: "FHIR Chat  · Is relaxing min cardinality really a breaking change? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html">Is relaxing min cardinality really a breaking change?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="272746267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/272746267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#272746267">(Feb 21 2022 at 23:58)</a>:</h4>
<p>For an ideal resolution of <a href="http://jira.hl7.org/browse/FHIR-25888">FHIR-25888</a> we would need to change the cardinality of <code>ValueSet.expansion.contains.property.code</code> from <code>1..1</code> to <code>0..1</code>.  But, ValueSet is a normative resource so the question is whether this constitutes a breaking change?</p>
<p>All old R4 resources will still be valid in R5, but an R4 client will be expecting a minimum cardinality and thus will not expect this element to be absent.</p>
<p>The rules <a href="http://build.fhir.org/versions.html#f-compat">http://build.fhir.org/versions.html#f-compat</a> state that "Minimum element cardinalities will not be changed."<br>
But this change does not violate <em>Forward compatibility</em> which states:</p>
<blockquote>
<p>that content that is conformant in an old release will remain conformant with future versions. Once normative, FHIR's rules try to enforce forward compatibility. However, that doesn't guarantee that all old systems will interoperate with future systems.</p>
</blockquote>



<a name="272747934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/272747934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#272747934">(Feb 22 2022 at 00:29)</a>:</h4>
<p>I think it should be ok to make that change, but I don't follow the justification</p>



<a name="272748152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/272748152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#272748152">(Feb 22 2022 at 00:33)</a>:</h4>
<p>As I understand the rule, we are not allowed to change the minimum cardinality, but it seems to me that a change from 1..x to 0..x should be allowed because the Forward compatibility rule is satisfied (but this would not be the case for changing 0..x to 1..x)</p>



<a name="272748354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/272748354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#272748354">(Feb 22 2022 at 00:37)</a>:</h4>
<p>right. process wise it should be ok, but I don't understand this particular change</p>



<a name="272748531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/272748531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#272748531">(Feb 22 2022 at 00:40)</a>:</h4>
<p>Oh, this is part of supporting returning subproperties.  When you have subproperties you don't always have a property (as per $lookup).  In particular, the SNOMED's  concept of role grouping</p>



<a name="273049677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/273049677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#273049677">(Feb 24 2022 at 05:36)</a>:</h4>
<p>how can you not have a property if you have sub-properties?</p>



<a name="273057572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/273057572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#273057572">(Feb 24 2022 at 08:03)</a>:</h4>
<p>well sub-property is a misnomer - in SNOMED they are grouped properties<br>
But I've _just_ noticed that the <code>$lookup</code> output <code>property.code</code> is <code>1..1</code> so I'm not sure what it should be in the SNOMED case</p>



<a name="273057671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/273057671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#273057671">(Feb 24 2022 at 08:05)</a>:</h4>
<p>hence this question: <a href="#narrow/stream/179202-terminology/topic/.24lookup.20and.20SNOMED.20properties/near/273016405">https://chat.fhir.org/#narrow/stream/179202-terminology/topic/.24lookup.20and.20SNOMED.20properties/near/273016405</a></p>



<a name="273057839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/273057839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#273057839">(Feb 24 2022 at 08:07)</a>:</h4>
<p>One option might be to use a well-known code: (<code>subproperty</code>) whenever the code system doesn't define/use something itself?</p>



<a name="273070525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/273070525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#273070525">(Feb 24 2022 at 10:22)</a>:</h4>
<p>well, yes, but you have to differentiate it from some other property. So it would be something like <code>snomed.group</code></p>



<a name="273294258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/273294258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#273294258">(Feb 25 2022 at 22:37)</a>:</h4>
<p>I'm not sure I understand what you're differentiating?  It's effectively a constant  (meaningless) value.</p>



<a name="273304097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/273304097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#273304097">(Feb 26 2022 at 00:31)</a>:</h4>
<p>right but it would differentiate from some other bunch of sub-properties</p>



<a name="273304923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20relaxing%20min%20cardinality%20really%20a%20breaking%20change%3F/near/273304923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20relaxing.20min.20cardinality.20really.20a.20breaking.20change.3F.html#273304923">(Feb 26 2022 at 00:45)</a>:</h4>
<p>This is what <code>444718001 |Bilateral enlargement of atria</code> would look like without the <code>property.code</code> -- there are two sets of sub-properties that are undifferentiated.</p>
<p><a href="/user_uploads/10155/8PSh-ps1hkac-m7AvGuTmZBj/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/8PSh-ps1hkac-m7AvGuTmZBj/image.png" title="image.png"><img src="/user_uploads/10155/8PSh-ps1hkac-m7AvGuTmZBj/image.png"></a></div><div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">"resourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Parameters"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"parameter"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"property"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">"part"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"parent"</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"67741000119109"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"property"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">"part"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"parent"</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"67751000119106"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"property"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">"part"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subproperty"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">"part"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code"</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"363698007"</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"valueCode"</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"244387002"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">          </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subproperty"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">"part"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code"</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"116676008"</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"valueCode"</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"442021009"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">          </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"property"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">"part"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subproperty"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">"part"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code"</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"363698007"</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"valueCode"</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"244383003"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">          </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subproperty"</span><span class="p">,</span><span class="w"></span>
<span class="w">          </span><span class="nt">"part"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code"</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"116676008"</span><span class="w"></span>
<span class="w">            </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="w">              </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"valueCode"</span><span class="p">,</span><span class="w"></span>
<span class="w">              </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"442021009"</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">          </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">      </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">"valueString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SNOMED Clinical Terms Australian extension"</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"display"</span><span class="p">,</span><span class="w"></span>
<span class="w">      </span><span class="nt">"valueString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bilateral enlargement of atria"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
