---
layout: page
title: "FHIR Chat  · Should conditional update/patch support If-Match header? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html">Should conditional update/patch support If-Match header?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153979707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979707">(Jul 31 2018 at 14:28)</a>:</h4>
<p>Search (<a href="https://www.hl7.org/fhir/search.html" target="_blank" title="https://www.hl7.org/fhir/search.html">https://www.hl7.org/fhir/search.html</a>) doesn't seem to allow searching by version id, does it make sense to support version aware conditional update/patch?</p>



<a name="153979708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979708">(Jul 31 2018 at 14:35)</a>:</h4>
<p>In what situations would a decision to apply an update/patch be based on a version of a resource other than the current one?</p>



<a name="153979715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979715">(Jul 31 2018 at 15:01)</a>:</h4>
<p>E.g. there are multiple clients</p>



<a name="153979721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979721">(Jul 31 2018 at 15:42)</a>:</h4>
<p>I understand how there can be colliding updates.  I don't understand why the decision on apply changes would not be driven by the most recent version of the artifact</p>



<a name="153979751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979751">(Jul 31 2018 at 17:13)</a>:</h4>
<p><span class="user-mention" data-user-id="195841">@Jie Fan</span>  are you referring to the version concurrency aspect: <a href="http://hl7.org/fhir/stu3/http.html#concurrency" target="_blank" title="http://hl7.org/fhir/stu3/http.html#concurrency">http://hl7.org/fhir/stu3/http.html#concurrency</a></p>



<a name="153979752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979752">(Jul 31 2018 at 17:13)</a>:</h4>
<p>If so, yes, you can use if-match on patch</p>



<a name="153979753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979753">(Jul 31 2018 at 17:13)</a>:</h4>
<p>We specifically tested this during our connectathon tracks</p>



<a name="153979754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979754">(Jul 31 2018 at 17:14)</a>:</h4>
<p>That is different than a Conditional Update or Conditional Patch (see <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17256" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17256">GF#17256</a> for some clarification on behavior for Patch specifically)</p>



<a name="153979755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979755">(Jul 31 2018 at 17:14)</a>:</h4>
<p>Though perhaps we need to call out the concurrency support for patch specifically??</p>



<a name="153979764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979764">(Jul 31 2018 at 17:22)</a>:</h4>
<p>Yes, I should have clarified that :)</p>
<p>I understand that If-Match is supported for Patch, however, should it also be supported for Conditional Patch as well (or are they considered the same operation)? My understand is that Conditional Patch would face the issues which If-Match tries to solve (e.g. race conditions), so we would need If-Match support as well.</p>



<a name="153979792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979792">(Jul 31 2018 at 18:47)</a>:</h4>
<p>If-Match makes sense.  Why would that be on historical versions?</p>



<a name="153979816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979816">(Jul 31 2018 at 19:48)</a>:</h4>
<p>Oh, I don't think that would be on historical versions. I meant if search supported version id, then a client might be able to get around by searching for current version's id for conditional update/patch.</p>



<a name="153979832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979832">(Jul 31 2018 at 20:17)</a>:</h4>
<p>I just explicitly added a comment that if-match works on patch to the current build</p>



<a name="153979850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153979850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153979850">(Jul 31 2018 at 20:44)</a>:</h4>
<p>With conditional updates, you do either an ETAG match or a timestamp match.  You don't need to do a version-based search.</p>



<a name="153980099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20conditional%20update/patch%20support%20If-Match%20header%3F/near/153980099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20conditional.20update.2Fpatch.20support.20If-Match.20header.3F.html#153980099">(Aug 01 2018 at 08:42)</a>:</h4>
<p>How do you know the version but not the id? And if you know the id, why do a conditional update / patch and not a normal one?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
