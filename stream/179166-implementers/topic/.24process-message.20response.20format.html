---
layout: page
title: "FHIR Chat  · $process-message response format · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html">$process-message response format</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="181661059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181661059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alison Lo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181661059">(Nov 22 2019 at 17:47)</a>:</h4>
<p>Hello,</p>
<p>On the FHIR site for the $process-message operation (<a href="https://www.hl7.org/fhir/messageheader-operation-process-message.html" target="_blank" title="https://www.hl7.org/fhir/messageheader-operation-process-message.html">https://www.hl7.org/fhir/messageheader-operation-process-message.html</a>), it says:<br>
<em>The response content type returned is always Bundle with type “message” containing a MessageHeader resource as the first resource, or an HTTP error</em></p>
<p>But then on the page, it later says:<br>
<em>The server acknowledges the message with a 200 OK <strong>with no body</strong></em></p>
<p>The example on the page aligns with the latter.</p>
<p>Can anyone advise on the standard format for the response? Should it really always be a Bundle with a MessageHeader resource? Also Bundle type “transaction-response” seems more appropriate than “message”.</p>
<p>Thanks</p>



<a name="181666878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181666878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181666878">(Nov 22 2019 at 18:55)</a>:</h4>
<p>It also says...</p>



<a name="181671153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181671153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181671153">(Nov 22 2019 at 19:50)</a>:</h4>
<p><span class="user-mention" data-user-id="222261">@Alison Lo</span> You are correct that the existing wording is a bit misleading.  The actual options are: 200 with no body <em>or</em> a message Bundle or an HTTP error code and an OperationOutcome.  In theory I guess you could also have a 200 with an OperationOutcome containing only warnings, but so far no one's had a use-case for that.</p>



<a name="181671202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181671202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181671202">(Nov 22 2019 at 19:51)</a>:</h4>
<p>transaction-response is only allowed as a response to a REST transaction.  The only allowed response to a successful message (if a response is given) is another message.</p>



<a name="181671626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181671626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alison Lo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181671626">(Nov 22 2019 at 19:55)</a>:</h4>
<p>Thanks!</p>



<a name="181674898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181674898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181674898">(Nov 22 2019 at 20:38)</a>:</h4>
<p>After reading the do I again it does say fir sync messaging a message bundle is required.   (In the out parameter conments). But the formal def is 0..1.  I think that it should be ok to have no response message but is that sync or a sync?</p>



<a name="181674919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181674919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181674919">(Nov 22 2019 at 20:39)</a>:</h4>
<p>That is a bit confusing to me</p>



<a name="181676774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181676774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181676774">(Nov 22 2019 at 21:03)</a>:</h4>
<p>Even for sync, no response is a possibility.  If I send you an ADT notification, you might respond with a bare 200 - the equivalent of an accept ack in v2.</p>



<a name="181848533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181848533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181848533">(Nov 25 2019 at 18:20)</a>:</h4>
<p>but then this  comment is then misleading. (highlights from me)</p>
<blockquote>
<p>A response message, if synchronous messaging is being used <strong>(mandatory in this case)</strong>. For asynchronous messaging, there is no return value<br>
Note: as this is the only out parameter, it is a resource, and it has the name 'return', the result of this operation is returned directly as a resource</p>
</blockquote>
<p>I think it should say:</p>
<blockquote>
<p>A response message used for synchronous messaging unless no response is expected.  For asynchronous messaging, there is no return value<br>
Note: as this is the only out parameter, it is a resource, and it has the name 'return', the result of this operation is returned directly as a resource</p>
</blockquote>
<p>Does that sound like a change request?</p>



<a name="181857743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181857743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181857743">(Nov 25 2019 at 20:05)</a>:</h4>
<p>It does indeed.</p>



<a name="181857765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181857765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181857765">(Nov 25 2019 at 20:05)</a>:</h4>
<p><span class="user-mention" data-user-id="222261">@Alison Lo</span> would you be willing to submit one?</p>



<a name="181862134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/181862134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alison Lo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#181862134">(Nov 25 2019 at 20:59)</a>:</h4>
<p>CR created: <a href="https://jira.hl7.org/browse/FHIR-25252" target="_blank" title="https://jira.hl7.org/browse/FHIR-25252">https://jira.hl7.org/browse/FHIR-25252</a><br>
Thanks</p>



<a name="183336987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/183336987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#183336987">(Dec 13 2019 at 08:12)</a>:</h4>
<p>The quoted blurb "The server acknowledges the message with a 200 OK with no body" appears under the heading "The following rules apply when using the $process-message operation asynchronously", on both <a href="https://www.hl7.org/fhir/messageheader-operation-process-message.html" target="_blank" title="https://www.hl7.org/fhir/messageheader-operation-process-message.html">https://www.hl7.org/fhir/messageheader-operation-process-message.html</a> and <a href="https://www.hl7.org/fhir/operation-messageheader-process-message.html" target="_blank" title="https://www.hl7.org/fhir/operation-messageheader-process-message.html">https://www.hl7.org/fhir/operation-messageheader-process-message.html</a></p>
<p>The formal definition of Out 0..1 is accounting for the async response -- you can't asynchronously respond with a response body -- that would make it synchronous. The documentation states that this is mandatory for synchronous -- is there a way to define invariants or conditionals in an OperationOutcome?</p>
<p>I wonder about the initial decision for stating that synchronous messages must always respond with a Message Bundle, and if we're missing some previous business case for the mandatory response.</p>



<a name="183354089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/183354089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#183354089">(Dec 13 2019 at 12:28)</a>:</h4>
<p>Why can't you asynchronously respond with a message body?  That would just mean posting a message to the other system's endpoint (or an intermediary endpoint intended to eventually get to the other system)</p>



<a name="183367279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/183367279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#183367279">(Dec 13 2019 at 15:08)</a>:</h4>
<p>I am logging a tracker to. Propose loosening up the guidance surrounding  synchronous messaging.  For Notifications no response is required besides an http response. Or possibly an operation outcome</p>



<a name="183369146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/183369146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#183369146">(Dec 13 2019 at 15:27)</a>:</h4>
<p>Is there even a distinction between sync and async $process-message then?</p>



<a name="183369706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/183369706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#183369706">(Dec 13 2019 at 15:32)</a>:</h4>
<p>I think the statement is that you cannot include a message body as the synchronous response for the process message operation.</p>
<p>To expand:</p>
<ul>
<li>synchronous $process-message immediate response - can be just HTTP 200, or may contain a message bundle (or is it that it always has to have a message bundle with an ACK?)</li>
<li>asynchronous $process-message immediate response - can only be HTTP 200. A message bundle may be "pushed" separately to a different end point - the asynchronous response.</li>
</ul>



<a name="183390722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/183390722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#183390722">(Dec 13 2019 at 19:19)</a>:</h4>
<p>Yes It is confusing to talk about  sync or  a async for the notifications use case where all you expect is a http response ( no ack in V2 speak). The assumption here is the 200 replaces the Ack response.  Application acknowledgement is a separate issue btw.</p>



<a name="183390841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/183390841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#183390841">(Dec 13 2019 at 19:20)</a>:</h4>
<p>I consider that a sync with no response message.</p>



<a name="183392600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/183392600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#183392600">(Dec 13 2019 at 19:38)</a>:</h4>
<p>It doesn't make sense to me that a system couldn't submit a message expecting an async response and get an immediate response.  Why would we want to prohibit that?</p>



<a name="183393504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/183393504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#183393504">(Dec 13 2019 at 19:46)</a>:</h4>
<p>Because the system submitting the message and expecting an async response, may not be able to process an immediate response. How can you assume that it will be able to process it? If it were able to, it won't be requesting an async response, would it?</p>



<a name="184309890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/184309890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#184309890">(Dec 27 2019 at 09:11)</a>:</h4>
<p>For the purposes of conformance with R4 (against both the documentation as written i.e. "mandatory in this case", as well as the operation's CapabilityStatement), is a synchronous $process-message returning an HTTP 200 with no payload conformant, for the current release of FHIR?</p>



<a name="184323252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/184323252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#184323252">(Dec 27 2019 at 14:15)</a>:</h4>
<p>Yes</p>



<a name="184455539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/184455539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#184455539">(Dec 30 2019 at 07:05)</a>:</h4>
<p>On my endpoint I'm validating (hl7v2 converted to fhir and fhir messages) and converting them to transactions before accepting them. So its desirable to get transaction bundles for accepted messages or operation outcomes for rejected.</p>
<p>If I went synchronous a transaction response would also be desirable, for debug purposes in all cases.</p>
<p>200 response works for me but no payload doesn't seem practical. I know this is a hack at present but getting a bundle for p+h hl7v2 messages when media is set to fhir is very useful.</p>



<a name="184492087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/184492087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#184492087">(Dec 30 2019 at 18:50)</a>:</h4>
<p>I amn confused by ...</p>
<blockquote>
<p>So its desirable to get transaction bundles for accepted messages or operation outcomes for rejected.</p>
</blockquote>
<p>do you mean a transaction <em>response</em> bundle or a <em>message response</em> bundle ?</p>



<a name="184551686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24process-message%20response%20format/near/184551686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24process-message.20response.20format.html#184551686">(Dec 31 2019 at 16:19)</a>:</h4>
<p>Message response bundle. I've not got that far yet and currently return the response from HAPI - I'm finding that useful and so good enough for now.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
