---
layout: page
title: "FHIR Chat  · Recommending medication as a custom operation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html">Recommending medication as a custom operation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="163364451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163364451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Simonsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163364451">(Apr 15 2019 at 09:14)</a>:</h4>
<p>Hey guys. I am trying to implement a system to recommend medication for a patient automatically as a microservice. The plan is that the system updates the patient with a new recommended amount of medication to take based on previous Observations and previous MedicationStatements posted to the server, then returning a RequestGroup with the recommended steps to take. The new MedicationRequest will then be posted to the server to use for the algorithm. Looking into the best ways of automating this though, it seems like a PlanDefinition or ActivityDefinition doesn't fit the bill, as running the $apply operation on them is idempotent, so it shouldn't change the state of the server, which is required. It seems to me like the only way for this to work is through a custom operation defined on the server. Is this the correct way of doing this? Or is there a better, more generic way?</p>



<a name="163368475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163368475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163368475">(Apr 15 2019 at 10:27)</a>:</h4>
<blockquote>
<p>The plan is that the system updates the patient with a new recommended amount of medication to take based on previous Observations and previous MedicationStatements posted to the server, then returning a RequestGroup with the recommended steps to take. </p>
</blockquote>
<p>First, I think you do not mean Update the patient, but update the patient's medication plan with the request group, right?</p>



<a name="163368634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163368634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163368634">(Apr 15 2019 at 10:30)</a>:</h4>
<p>I don't understand what you want as output - a medicationrequest with the medication? a requestgroup with more medications? a treatment plan (with what?)</p>



<a name="163368726"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163368726" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163368726">(Apr 15 2019 at 10:32)</a>:</h4>
<p>the apply simply instanciates the plan to a given patient / context.</p>



<a name="163368751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163368751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163368751">(Apr 15 2019 at 10:33)</a>:</h4>
<p>what do you mean "automating this"? what do you want to automate? The application of a given algorithm to a patient?</p>



<a name="163368872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163368872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163368872">(Apr 15 2019 at 10:35)</a>:</h4>
<p>the $apply operation creates a careplan. In my understanding it is idempotent in that if you $apply several times, you still get the same care plan. Not sure what you mean with changing the state of the server.</p>



<a name="163368879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163368879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163368879">(Apr 15 2019 at 10:35)</a>:</h4>
<p>(sorry for many questions, jsut trying to guess your goal from your statement)</p>



<a name="163370543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163370543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Simonsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163370543">(Apr 15 2019 at 11:09)</a>:</h4>
<p>No problem. Not too sure on what my goal is right now, as I keep finding alternative ways to do this.</p>
<p>Yes, I just want to update the current medication plan for the patient on the server, not the actual patient. As for the output, I ideally want a RequestGroup with all the steps needed for the patient to do to improve. A MedicationRequest will be a part of this, which should also be posted to the server as the new medication plan for the patient. By automating this, I mean that this should run as a standalone service, on it's own server. The people using the server should just have to post the a new observation for the patient, and that should automatically generate the RequestGroup output based on previous observations and medication plans. I also want the people using the server not have to give all the parameters needed for the algorithm to run (previous medication plans and observations), it should be stored on the server.</p>
<p>I guess a PlanDefinition would not be good enough then, as I want to do more than just generate a plan given a context.</p>



<a name="163370724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163370724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163370724">(Apr 15 2019 at 11:14)</a>:</h4>
<p>k, interesting stuff. I would actually do CarePlan, not Request group. For a shorter scope, PlanDefinition can hold requests or reques groups, so it is an envelope. and when you want to also put dependencies and advanced steps, plandefinition will cover it, and requestgroup won't.</p>



<a name="163370925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163370925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163370925">(Apr 15 2019 at 11:16)</a>:</h4>
<p>sounds like your request is: <br>
<strong>How to automatically trigger the creation / update of a careplan for a patient, from a given trigger e.g. posting of an observation for that patient, and having the server consult whatever information is needed to create that plan beyond what has been provided in the observation.</strong><br>
Correct?</p>



<a name="163370952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163370952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163370952">(Apr 15 2019 at 11:17)</a>:</h4>
<p>I don't think that falls into the scope of what FHIR does now. I may be wrong.</p>



<a name="163371029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163371029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163371029">(Apr 15 2019 at 11:19)</a>:</h4>
<p>we've never really discussed stanardising triggers for consequential actions. We have event definition... but not any way to express an expectation that it will work like that. We probably wouldn't make any such rule in the base standard, but it would make sense for IGs to do exactyl that</p>



<a name="163371314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Recommending%20medication%20as%20a%20custom%20operation/near/163371314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philip Simonsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Recommending.20medication.20as.20a.20custom.20operation.html#163371314">(Apr 15 2019 at 11:24)</a>:</h4>
<p>Alright, I'll look into other ways of doing this then. Thanks a lot the help!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
