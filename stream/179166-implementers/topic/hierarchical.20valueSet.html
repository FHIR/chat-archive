---
layout: page
title: "FHIR Chat  · hierarchical valueSet · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html">hierarchical valueSet</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153886685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886685">(May 02 2017 at 16:49)</a>:</h4>
<p>Hi,</p>
<p>I have a hierarchical terminology (say icd9). I want to store all the codes in a FHIR valueSet. Moreover, I d'like to store all the branches of the ICD9 hierarchy tree. Reading the documentation about valueSet and expansions:</p>
<blockquote>
<p>The final "result set" is then represented in expansion. Note that the expansion structure is inherently ordered, and also provides support for a hierarchical tree of items. (<a href="https://www.hl7.org/fhir/valueset.html" target="_blank" title="https://www.hl7.org/fhir/valueset.html">https://www.hl7.org/fhir/valueset.html</a>)</p>
</blockquote>
<p>If I take this example: <a href="http://www.icd9data.com/2012/Volume1/E000-E999/E880-E888/E884/E884.0.htm" target="_blank" title="http://www.icd9data.com/2012/Volume1/E000-E999/E880-E888/E884/E884.0.htm">http://www.icd9data.com/2012/Volume1/E000-E999/E880-E888/E884/E884.0.htm</a>, FHIR allows me to include all E000-E999, E880-E888, E884 within a nested set of abstract contains ? <br>
Please let me know if this is right or if I am absolutely wrong and going to lost myself in that direction.</p>
<blockquote></blockquote>
<p>Thanks by advance</p>



<a name="153886705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886705">(May 02 2017 at 22:26)</a>:</h4>
<p>ICD9 is a code system - so you should be storing it in a code system resource. </p>



<a name="153886706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886706">(May 02 2017 at 22:26)</a>:</h4>
<p>btw, if you do that, I'd like to have a look at it to see how big it is, (and to load it onto <a href="http://tx.fhir.org" target="_blank" title="http://tx.fhir.org">tx.fhir.org</a>)</p>



<a name="153886715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886715">(May 02 2017 at 22:55)</a>:</h4>
<p>Reading the codeSystem documentation:</p>
<blockquote>
<p>The CodeSystem resource is not intended to support the process of maintaining a code system. Instead, the focus is on publishing the properties and optionally the content of a code system for use throughout the FHIR eco-system, such as to support value set expansion and validation. Note that the important existing (large) code systems (SNOMED CT, LOINC, RxNorm, ICD family, etc) all have their own distribution formats, and there is no intent that the CodeSystem resource be used for distributing these kind of terminologies. Instead, it is intended to be used for distributing the smaller ad-hoc code systems that are ubiqutiously encountered through out the healthcare process.</p>
</blockquote>
<p>That is why, I thought valueSet where the place to store code. Isn't it ?</p>
<p>For sure, I anderstand correctly I will implement various code system during my project, and if interesting, push them in your system. </p>



<a name="153886716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886716">(May 02 2017 at 22:56)</a>:</h4>
<p>well, you're not going to actually <em>maintain</em> ICD itself. If you were going to do that, you'd find that code system didn't address your needs. You're just going to publish it - take the format and say 'this is ICD-X'. Yes?</p>



<a name="153886717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886717">(May 02 2017 at 23:04)</a>:</h4>
<p>Right, I  hope to publish it in a sense. This is supposed to complete the resources such condition. As you may know, I am trying to implemente FHIR as a kind of clinical datawarehouse. And then code system are the equivalent of dimension; condition as fact tables.</p>



<a name="153886718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886718">(May 02 2017 at 23:20)</a>:</h4>
<p>so you should use code system then</p>



<a name="153886720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886720">(May 02 2017 at 23:34)</a>:</h4>
<p>Thanks for the help. I hope to post here my example (<a href="http://www.icd9data.com/2012/Volume1/E000-E999/E880-E888/E884/E884.0.htm" target="_blank" title="http://www.icd9data.com/2012/Volume1/E000-E999/E880-E888/E884/E884.0.htm">http://www.icd9data.com/2012/Volume1/E000-E999/E880-E888/E884/E884.0.htm</a>)<br>
using the codeSystem resource. </p>



<a name="153886721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886721">(May 02 2017 at 23:37)</a>:</h4>
<p>great</p>



<a name="153886762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886762">(May 03 2017 at 08:47)</a>:</h4>
<p>Here is a first draft of <a href="http://www.icd9data.com/2012/Volume1/E000-E999/E880-E888/E884/E884.0.htm" target="_blank" title="http://www.icd9data.com/2012/Volume1/E000-E999/E880-E888/E884/E884.0.htm">http://www.icd9data.com/2012/Volume1/E000-E999/E880-E888/E884/E884.0.htm</a>. I put 2 codes and their respective hierarchy. Main concern are :<br>
- both codes "E884.0" and "E884.1"  share the same hierarchy at some point, but it is repeated (denormalisation) .<br>
- it is not possible to push it on <a href="http://simplifier.net" target="_blank" title="http://simplifier.net">simplifier.net</a> because resource CodeSystem is not implemented (yet?) <a href="https://www.simplifier.net/test243/CodeSystem-example" target="_blank" title="https://www.simplifier.net/test243/CodeSystem-example">https://www.simplifier.net/test243/CodeSystem-example</a></p>
<blockquote></blockquote>
<p>Is it how it is intended to be implemented ?</p>
<p>Thanks</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;CodeSystem&quot;,
  &quot;meta&quot;: {
    &quot;versionId&quot;: &quot;1&quot;,
    &quot;lastUpdated&quot;: &quot;2017-03-08T15:14:24.985-05:00&quot;
  },
  &quot;id&quot;: &quot;16687&quot;,
  &quot;version&quot;: &quot;1&quot;,
  &quot;name&quot;: &quot;icd9&quot;,
  &quot;title&quot;: &quot;ICD-9&quot;,
  &quot;status&quot;: &quot;draft&quot;,
  &quot;experimental&quot;: true,
  &quot;publisher&quot;: &quot;natus&quot;,
  &quot;caseSensitive&quot;: true,
  &quot;valueSet&quot;: &quot;not applicable?&quot;,
  &quot;hierarchyMeaning&quot;: &quot;part-of&quot;,
  &quot;content&quot;: &quot;fragment&quot;,
  &quot;count&quot;: 2,
  &quot;concept&quot;: [
    {
      &quot;code&quot;: &quot;E884.0&quot;,
      &quot;display&quot;: &quot;2012 ICD-9-CM Diagnosis Code E884.0&quot;,
      &quot;definition&quot;: &quot;Accidental fall from playground equipment&quot;,
      &quot;designation&quot;: [
        {
          &quot;language&quot;: &quot;EN&quot;,
          &quot;value&quot;: &quot;Short description: Fall from playgrnd equip.&quot;
        },
        {
          &quot;language&quot;: &quot;EN&quot;,
          &quot;value&quot;: &quot;E884.0 describes the circumstance causing an injury, not the nature of the injury.&quot;
        }
      ],
      &quot;concept&quot;: [
        {
          &quot;code&quot;: &quot;E884&quot;,
          &quot;display&quot;: &quot;Other accidental falls from one level to another E884&quot;,
          &quot;definition&quot;: &quot;Other accidental falls from one level to another&quot;,
          &quot;concept&quot;: [
            {
              &quot;code&quot;: &quot;E880-E888&quot;,
              &quot;display&quot;: &quot;Accidental Falls E880-E888&quot;,
              &quot;definition&quot;: &quot;Accidental Falls&quot;,
              &quot;concept&quot;: [
                {
                  &quot;code&quot;: &quot;E000-E999&quot;,
                  &quot;display&quot;: &quot;Supplementary Classification Of External Causes Of Injury And Poisoning E000-E999&quot;,
                  &quot;definition&quot;: &quot;Supplementary Classification Of External Causes Of Injury And Poisoning&quot;
                }
              ]
            }
          ]
        }
      ]
    },
    {
      &quot;code&quot;: &quot;E884.1&quot;,
      &quot;display&quot;: &quot;2012 ICD-9-CM Diagnosis Code E884.1&quot;,
      &quot;definition&quot;: &quot;Accidental fall from cliff&quot;,
      &quot;designation&quot;: [
        {
          &quot;language&quot;: &quot;EN&quot;,
          &quot;value&quot;: &quot;Short description: Fall from cliff.&quot;
        },
        {
          &quot;language&quot;: &quot;EN&quot;,
          &quot;value&quot;: &quot;E884.1 describes the circumstance causing an injury, not the nature of the injury.&quot;
        }
      ],
      &quot;concept&quot;: [
        {
          &quot;code&quot;: &quot;E884&quot;,
          &quot;display&quot;: &quot;Other accidental falls from one level to another E884&quot;,
          &quot;definition&quot;: &quot;Other accidental falls from one level to another&quot;,
          &quot;concept&quot;: [
            {
              &quot;code&quot;: &quot;E880-E888&quot;,
              &quot;display&quot;: &quot;Accidental Falls E880-E888&quot;,
              &quot;definition&quot;: &quot;Accidental Falls&quot;,
              &quot;concept&quot;: [
                {
                  &quot;code&quot;: &quot;E000-E999&quot;,
                  &quot;display&quot;: &quot;Supplementary Classification Of External Causes Of Injury And Poisoning E000-E999&quot;,
                  &quot;definition&quot;: &quot;Supplementary Classification Of External Causes Of Injury And Poisoning&quot;
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
</pre></div>



<a name="153886868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886868">(May 03 2017 at 20:09)</a>:</h4>
<p>I think the order is wrong. For example, parent concept is E884 and child concepts are E884.0/E884.1</p>



<a name="153886902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886902">(May 04 2017 at 00:34)</a>:</h4>
<p>Yes - agree with Yunwei on fixing the order.</p>



<a name="153886903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886903">(May 04 2017 at 00:35)</a>:</h4>
<p>I think that heirarchyMeaning should be "classified-with". And agree with Yunwei and Rob</p>



<a name="153886905"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886905" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886905">(May 04 2017 at 00:39)</a>:</h4>
<p>Yes - didn't notice the "part-of" - agree it should be "classified-with" for ICD-9.</p>



<a name="153886959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886959">(May 04 2017 at 09:20)</a>:</h4>
<p>Thanks for clarifications.</p>
<blockquote></blockquote>
<p>What about code systems having both "classified-with" and "part-of" ? I guess ICD9 is that kind. By eg: "Diseases Of The Musculoskeletal System And Connective Tissue 710-739" ; child are sometimes "Diseases Of The Musculoskeletal System" and sometimes  "Diseases Of The Connective Tissue".  The problem is hiearchicalMeaning is defined for all the code system, and not for each concept.</p>



<a name="153886967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886967">(May 04 2017 at 09:45)</a>:</h4>
<p>I think that meets the criteria for 'classified with' - which basically means, wahtever the classification wants it to mean</p>



<a name="153886968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/153886968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#153886968">(May 04 2017 at 09:45)</a>:</h4>
<p>but if there really is a difference in heirarchy, then you can't use the heirarchy at all, and present just a flat list with properties that expresses what relatinoships there are</p>



<a name="154006899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154006899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154006899">(Oct 08 2018 at 22:16)</a>:</h4>
<p>Hi<br>
I am wondering how to navigate in a CodeSystem hierarchy, from a client side. Other resource such Organization are quite comfortable to navigate the hierarchy with "part-of". </p>
<p>But CodeSystem seems to contain all the codes. There is no way to ask for root code, then childs and so -on to build some navigation tool.</p>
<p>Am I missing something ?</p>



<a name="154006900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154006900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154006900">(Oct 08 2018 at 22:22)</a>:</h4>
<p>You should be able to find the "roots" of a CodeSystem by expanding a ValueSet of all concepts in the CodeSystem that have no parent (property="parent", op="exists", value="false")</p>



<a name="154006901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154006901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154006901">(Oct 08 2018 at 22:30)</a>:</h4>
<p>So you suggest to use ValueSet to dig into CodeSystem. The trick would be to create a ValueSet containing all the code of the CodeSystem. The operation $expand then allows to navigate easily in the hierarchy. Is that correct ?</p>



<a name="154006904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154006904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154006904">(Oct 08 2018 at 22:42)</a>:</h4>
<p>I think you're looking for the $lookup operation</p>



<a name="154006905"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154006905" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154006905">(Oct 08 2018 at 22:43)</a>:</h4>
<p>Once you've found the root concepts, you can use $lookup to find the children</p>



<a name="154006956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154006956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154006956">(Oct 09 2018 at 07:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191376">@Jim Steel</span> you suggest to both use ValueSet resource (with $expand) to get the root concept and then dig  CodeSystem Resource (with $lookup) to get the children ?</p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> you suggest to only use CodeSystem resource (with $lookup) and use parameters such root to describe the codes hierarchy ?</p>
<p>Thanks</p>



<a name="154007586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007586">(Oct 10 2018 at 18:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  would you only focus on CodeSystem and $lookup to go through the hierachy of any code system ? Thanks</p>



<a name="154007599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007599">(Oct 10 2018 at 18:49)</a>:</h4>
<p>$lookup takes a specific code as input, and returns properties on that specific code. We haven't defined a specific operation for this.</p>



<a name="154007615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007615">(Oct 10 2018 at 18:58)</a>:</h4>
<p>Cannot $lookup take a property as input ? <br>
From <a href="https://www.hl7.org/fhir/codesystem-operations.html#4.7.15.1" target="_blank" title="https://www.hl7.org/fhir/codesystem-operations.html#4.7.15.1">https://www.hl7.org/fhir/codesystem-operations.html#4.7.15.1</a><br>
code is 0..1 so this should be possible to ask for root, leaf, parent and child with properties isnt'it ?</p>



<a name="154007619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007619">(Oct 10 2018 at 19:04)</a>:</h4>
<p>You provide a code to the $lookup operation. $lookup operation will returns properties of this code. If parent is a declared property, then you can get parent code. Then you can feed the parent code to $lookup again.</p>



<a name="154007622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007622">(Oct 10 2018 at 19:05)</a>:</h4>
<p>Guys, sorry but the documentation tells the opposite:<br>
<a href="https://www.hl7.org/fhir/operation-codesystem-lookup.html" target="_blank" title="https://www.hl7.org/fhir/operation-codesystem-lookup.html">https://www.hl7.org/fhir/operation-codesystem-lookup.html</a><br>
IN parameters can be <strong>property only</strong> or I am missing something</p>



<a name="154007624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007624">(Oct 10 2018 at 19:08)</a>:</h4>
<p>"Given a code/system, or a Coding, get additional details about the concept, including definition, status, designations, and properties. "<br>
So code/system or coding is required.</p>



<a name="154007625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007625">(Oct 10 2018 at 19:08)</a>:</h4>
<p>we could be a little clearer about this</p>



<a name="154007626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007626">(Oct 10 2018 at 19:09)</a>:</h4>
<p>We do have that for most valueset operations. Yeah agree. tracker?</p>



<a name="154007629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007629">(Oct 10 2018 at 19:11)</a>:</h4>
<p>All right about that. So, in definitive, the only workaround right now to explore a hierarchy <br>
is to use a valueset containing the whole code system with $expand ?</p>



<a name="154007631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007631">(Oct 10 2018 at 19:12)</a>:</h4>
<p>yes. and we say that the value set should always exist. but then we forgot to define it.</p>



<a name="154007632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007632">(Oct 10 2018 at 19:12)</a>:</h4>
<p>it might be a good idea to do this:</p>



<a name="154007633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007633">(Oct 10 2018 at 19:13)</a>:</h4>
<div class="codehilite"><pre><span></span>http://acme.com/fhir/ValueSet/$expand?text=brain&amp;system=http://hl7.org/fhir/sid/icd-10
</pre></div>



<a name="154007634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007634">(Oct 10 2018 at 19:14)</a>:</h4>
<p>and then say that the server identifies the value set implied by the system, or fakes one up</p>



<a name="154007635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007635">(Oct 10 2018 at 19:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  wrong topic. <span class="emoji emoji-1f600" title="grinning">:grinning:</span></p>



<a name="154007636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007636">(Oct 10 2018 at 19:14)</a>:</h4>
<p>oh oops</p>



<a name="154007639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007639">(Oct 10 2018 at 19:18)</a>:</h4>
<p><span class="user-mention" data-user-id="193729">@natus</span> The only way to do that is to define your own valueSet using the property that Jim Steel mentioned and use that ValueSet as input paramater for $expand operation. The question now is if the server would accept the inbound ValueSet parameter.</p>



<a name="154007647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007647">(Oct 10 2018 at 19:31)</a>:</h4>
<p>valueSet $expand documentation is hardcore <a href="https://www.hl7.org/fhir/valueset.html#expansion" target="_blank" title="https://www.hl7.org/fhir/valueset.html#expansion">https://www.hl7.org/fhir/valueset.html#expansion</a><br>
Where a simple $child, $parent in codeSystem would do the same thing easily (up and down in the codeSystem tree)</p>



<a name="154007666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007666">(Oct 10 2018 at 19:47)</a>:</h4>
<p>You can do that using $lookup</p>
<div class="codehilite"><pre><span></span>/CodeSystem/$lookup?code=xxx&amp;system=yyy&amp;property=parent
</pre></div>



<a name="154007671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007671">(Oct 10 2018 at 19:54)</a>:</h4>
<div class="codehilite"><pre><span></span>/CodeSystem/$lookup?code=xxx&amp;system=yyy&amp;property=parent
</pre></div>


<p>would return all the parent of xxx</p>
<div class="codehilite"><pre><span></span>/CodeSystem/$lookup?code=xxx&amp;system=yyy&amp;property=child
</pre></div>


<p>would return all the childs of xxx</p>
<p>That's too bad that </p>
<div class="codehilite"><pre><span></span>/CodeSystem/$lookup?system=yyy&amp;property=leaf
</pre></div>


<p>AND</p>
<div class="codehilite"><pre><span></span>/CodeSystem/$lookup?system=yyy&amp;property=root
</pre></div>


<p>are not allowed ! Any reason they are not and they won't in the future ?</p>



<a name="154007672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007672">(Oct 10 2018 at 19:55)</a>:</h4>
<p>$lookup only returns the properties of a single code</p>



<a name="154007673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007673">(Oct 10 2018 at 19:56)</a>:</h4>
<p>Some properties are defined by code system not FHIR.</p>



<a name="154007681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007681">(Oct 10 2018 at 20:00)</a>:</h4>
<p>I will then focus on ValueSet + $expand only to implement the hierarchy traversal.<br>
Hope that won't be like desert traversal, but many thanks for your support</p>



<a name="154007682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007682">(Oct 10 2018 at 20:01)</a>:</h4>
<p>Just curious why you want to do that.</p>



<a name="154007683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007683">(Oct 10 2018 at 20:01)</a>:</h4>
<blockquote>
<p>desert traversal</p>
</blockquote>
<p>?</p>



<a name="154007692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007692">(Oct 10 2018 at 20:04)</a>:</h4>
<p>I am implementing a  i2b2 over fhir: I provide exploring terminologies though the tool. Terminologies are huge<br>
and cannot be loaded entirely in client memory.</p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> crossing desert: $expand documentation is comlicated</p>



<a name="154007696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007696">(Oct 10 2018 at 20:07)</a>:</h4>
<p>yes. it's a pretty flexible thing... ideas for better doco always welcome</p>



<a name="154007706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007706">(Oct 10 2018 at 20:20)</a>:</h4>
<p>One thing to consider is that it's not a specific requirement that every code system have a single top-level root concept.  If that's not the case in a specific instance then referencing 'root' would be either ambiguous, an error or would reference/return multiple values.</p>



<a name="154007713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007713">(Oct 10 2018 at 20:25)</a>:</h4>
<p>would that be ok then to say every code system do have a single top-level <em>abstract</em> root ? icd10 abstract root would be the beginning and its child would be the first codes in the hierarchy, and the last would be leaves ?</p>



<a name="154007732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007732">(Oct 10 2018 at 20:51)</a>:</h4>
<p>I'm thinking that we probably wouldn't want to try to define that independently of the code system publisher (assuming that I understand what you are asking).</p>



<a name="154007734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007734">(Oct 10 2018 at 20:53)</a>:</h4>
<p>The set of root concept(s) would be all of the concepts for which no parent concept is defined.  That's pretty straightforward, even if it doesn't always resolve to only a single concept.</p>



<a name="154007739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007739">(Oct 10 2018 at 20:56)</a>:</h4>
<p>That makes sense. Much better definition, and I notice that this is the one Jim provided few post above.</p>



<a name="154007814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154007814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154007814">(Oct 10 2018 at 23:04)</a>:</h4>
<p>Yes.  That was a while back in the thread and I had forgotten that he said that, but it's good to confirm.</p>



<a name="154008340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154008340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154008340">(Oct 11 2018 at 20:35)</a>:</h4>
<p>Not sure the best way to implement that:</p>
<div class="codehilite"><pre><span></span>GET [base]/ValueSet/$expand?url=http://icd10.com&amp;filter=(property=&quot;parent&quot;, op=&quot;exists&quot;, value=&quot;false&quot;)
</pre></div>


<p>Or</p>
<div class="codehilite"><pre><span></span>POST [base]/ValueSet/$expand --data
- parameters:
     parameter:
         ValueSet: myValueSet
</pre></div>


<p>The concern with the GET version is the filter is a String parameter that is not standardized<br>
Passing the ValueSet looks more standard while this looks much more complicated to implement</p>



<a name="154008455"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hierarchical%20valueSet/near/154008455" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hierarchical.20valueSet.html#154008455">(Oct 12 2018 at 02:05)</a>:</h4>
<p>I don't think the first one works. When I mentioned that, I didn't mean that as a filter parameter in a GET request, I meant it as a filter block in a POSTed ValueSet resource (your second example)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
