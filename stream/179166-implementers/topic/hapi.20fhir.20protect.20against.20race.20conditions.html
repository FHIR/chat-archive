---
layout: page
title: "FHIR Chat  · hapi fhir protect against race conditions · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hapi.20fhir.20protect.20against.20race.20conditions.html">hapi fhir protect against race conditions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="240119016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hapi%20fhir%20protect%20against%20race%20conditions/near/240119016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pengyu Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hapi.20fhir.20protect.20against.20race.20conditions.html#240119016">(May 24 2021 at 22:08)</a>:</h4>
<p>Hi, we're running into an issue with HAPI FHIR where multiple resources are created with the same identifier, even though we're doing a condition create  with the header <code>If-None-Exist</code>.  We believe the issue is because of a race condition where we're sending multiple create requests simultaneously, so HAPI is not able to reliably synchronously find the existing resource for a given identifier, and thus ends up creating multiple duplicates.</p>
<p>We've made changes to the code so it's sending the requests synchronously to prevent this particular issue. But the root cause of the issue is still not solved because there could potentially be multiple processes writing to the HAPI server and we can't guarantee the order of operations.</p>
<p>What is the best practice for protecting against race conditions? Is it possible to manually enforce uniqueness constraints at the db level in HAPI?</p>



<a name="240124426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hapi%20fhir%20protect%20against%20race%20conditions/near/240124426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hapi.20fhir.20protect.20against.20race.20conditions.html#240124426">(May 24 2021 at 23:06)</a>:</h4>
<p>you might want to ask this on <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a></p>



<a name="240142685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/hapi%20fhir%20protect%20against%20race%20conditions/near/240142685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pengyu Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/hapi.20fhir.20protect.20against.20race.20conditions.html#240142685">(May 25 2021 at 04:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179166-implementers/topic/hapi.20fhir.20protect.20against.20race.20conditions/near/240124426">said</a>:</p>
<blockquote>
<p>you might want to ask this on <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a></p>
</blockquote>
<p>Thanks. Moved here: <a href="#narrow/stream/179167-hapi/topic/hapi.20fhir.20protect.20agains.20race.20conditions/near/240119267">https://chat.fhir.org/#narrow/stream/179167-hapi/topic/hapi.20fhir.20protect.20agains.20race.20conditions/near/240119267</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
