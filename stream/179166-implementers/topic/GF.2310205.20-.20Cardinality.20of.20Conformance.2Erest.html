---
layout: page
title: "FHIR Chat  · GF#10205 - Cardinality of Conformance.rest · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html">GF#10205 - Cardinality of Conformance.rest</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153974280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GF%2310205%20-%20Cardinality%20of%20Conformance.rest/near/153974280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html#153974280">(Jul 09 2018 at 07:35)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10205" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10205">GF#10205</a> proposes to change the cardinality of Conformance.rest to 0..2, to reflect the meaning on of the invariants. I've tried to apply this once before, and got in a mess. But now I'm thinking about it again, I'm wondering whether it's actually a good idea - see this thread, for instance</p>



<a name="153974281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GF%2310205%20-%20Cardinality%20of%20Conformance.rest/near/153974281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html#153974281">(Jul 09 2018 at 07:36)</a>:</h4>
<p><a href="#narrow/stream/4-implementers/subject/GF.2317408.20-.20FHIR.20end-point.20discovery" title="#narrow/stream/4-implementers/subject/GF.2317408.20-.20FHIR.20end-point.20discovery">https://chat.fhir.org/#narrow/stream/4-implementers/subject/GF.2317408.20-.20FHIR.20end-point.20discovery</a></p>



<a name="153974282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GF%2310205%20-%20Cardinality%20of%20Conformance.rest/near/153974282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html#153974282">(Jul 09 2018 at 07:37)</a>:</h4>
<p>so I wonder - maybe we should revoke the invariant rather than insisting that there can only be one endpoint per capability statement.</p>



<a name="153974283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GF%2310205%20-%20Cardinality%20of%20Conformance.rest/near/153974283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html#153974283">(Jul 09 2018 at 07:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191315">@Josh Mandel</span> (<span class="user-mention" data-user-id="196305">@Andrew Marcus</span>)</p>



<a name="153974483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GF%2310205%20-%20Cardinality%20of%20Conformance.rest/near/153974483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html#153974483">(Jul 10 2018 at 16:08)</a>:</h4>
<p>Revoking the invariant on this is fine for me -- but _some_ guidance on when/why this repeats would be helpful. In particular, if I'm a client looking to determine a server's capabilities, do I filter the CapabilityStatement.rest to look at only the ones in "server" mode, and then take the union of all capabilities I see?</p>



<a name="153974492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GF%2310205%20-%20Cardinality%20of%20Conformance.rest/near/153974492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Marcus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html#153974492">(Jul 10 2018 at 17:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> To support our use case  in <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17408" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17408">GF#17408</a>, in which a server can support multiple FHIR versions simultaneously at different endpoints, a FHIR client would need to be able to determine which FHIR versions are supported by the server and where to find the CapabilityStatement for each.</p>
<p>So, in this case, a client would look Conformance.rest and filter for the ones in "server" mode, then look at the version associated with each.  Once it selected one it was able to work with, it would then fetch all the CapabilityStatement definitions associated with that version.</p>



<a name="153974494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GF%2310205%20-%20Cardinality%20of%20Conformance.rest/near/153974494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Marcus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html#153974494">(Jul 10 2018 at 17:27)</a>:</h4>
<p>On the other hand, each CapabilityStatement can currently only support a single version of FHIR because <code>CapabilityStatement.fhirVersion</code> has a cardinality of <code>1..1</code>.  To make this work as a solution for <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17408" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17408">GF#17408</a>, you would actually need to push the <code>fhirVersion</code> element down one level into the <code>rest</code> element.</p>
<p>That is potentially a viable solution, but probably more of a refactor than you'd like.  It also requires each server to publish a single metadata endpoint which aggregates the metadata for all the versions they support, which can be logistically complicated for the implementor depending on the mix of technologies in play.  In addition, it is not clear how to support DSTU2 as one of the versions, which has a <code>ConformanceStatement</code> instead of a <code>CapabilityStatement</code>.</p>



<a name="153974524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GF%2310205%20-%20Cardinality%20of%20Conformance.rest/near/153974524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html#153974524">(Jul 10 2018 at 22:16)</a>:</h4>
<p>yes I think that the cross version thing isn't solved by this.</p>



<a name="153974525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GF%2310205%20-%20Cardinality%20of%20Conformance.rest/near/153974525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html#153974525">(Jul 10 2018 at 22:16)</a>:</h4>
<p>as for mutiple end points.... I guess they'd primarily be differentiated by security?</p>



<a name="153974942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GF%2310205%20-%20Cardinality%20of%20Conformance.rest/near/153974942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Marcus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html#153974942">(Jul 12 2018 at 15:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> yeah, security's an interesting use case.  There could be several <code>CapabilityStatement.rest</code> endpoints with "server" mode but with different <code>security.service</code> values; Smart-on-FHIR, certificates, etc.</p>
<p>Another potential use case would be to use this to point to a GraphQL server if it were distinct from the FHIR endpoints.  <span class="user-mention" data-user-id="196306">@Robert Winterbottom</span></p>
<p>In either case, though, the different server rest endpoints would need some attributes a client could use to distinguish between them.  In <a href="#narrow/stream/4-implementers/subject/GF.2317408.20-.20FHIR.20end-point.20discovery/near/163982" title="#narrow/stream/4-implementers/subject/GF.2317408.20-.20FHIR.20end-point.20discovery/near/163982">https://chat.fhir.org/#narrow/stream/4-implementers/subject/GF.2317408.20-.20FHIR.20end-point.20discovery/near/163982</a> I show how each could include its own <code>fhirVersion</code>, but perhaps there are other differentiator fields as well.</p>



<a name="153978542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GF%2310205%20-%20Cardinality%20of%20Conformance.rest/near/153978542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GF.2310205.20-.20Cardinality.20of.20Conformance.2Erest.html#153978542">(Jul 27 2018 at 00:19)</a>:</h4>
<p>so I just committed a change that allows rest to repeat 0..*. <span class="user-mention" data-user-id="196305">@Andrew Marcus</span> you can include any number of end-points now, and you can introduce your own extension to declare what version(s) the endpoints use. if that turns out to have legs, we can add it in R5</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
