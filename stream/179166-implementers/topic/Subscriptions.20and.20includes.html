---
layout: page
title: "FHIR Chat  · Subscriptions and includes · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html">Subscriptions and includes</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154005644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154005644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154005644">(Oct 04 2018 at 08:41)</a>:</h4>
<p>What does the event look like from a Subscription where payload is set and the criteria is eg. Encounter/?_include=Encounter:subject</p>
<p>Is it just the Encounter or is it a bundle with the Encounter and Patient(subject)?</p>



<a name="154006347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006347">(Oct 05 2018 at 15:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="154006461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006461">(Oct 05 2018 at 21:04)</a>:</h4>
<p>yes</p>



<a name="154006634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006634">(Oct 08 2018 at 08:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> yes, as in the first or the last?</p>



<a name="154006655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006655">(Oct 08 2018 at 12:41)</a>:</h4>
<p>yes</p>



<a name="154006657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006657">(Oct 08 2018 at 12:48)</a>:</h4>
<p>actually, now that I read it carefully, I don't know. Ask on the subscriptions track</p>



<a name="154006658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006658">(Oct 08 2018 at 13:05)</a>:</h4>
<blockquote>
<p>actually, now that I read it carefully, I don't know. Ask on the subscriptions track</p>
</blockquote>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span>  I implemented a simple subscription where the payload was set and I got the resource in the notification. I don't know if that is your question, whether you get the Encounter resource or just a search string for it. Looking back at my code I am a little shocked that it worked as I look at the criteria and it is</p>
<div class="codehilite"><pre><span></span>subscription.setCriteria(&quot;Observation?patient=sisansarahId-1.2.3.4.5.6.7.8.10&quot;);
</pre></div>


<p>I would expect it to be</p>
<div class="codehilite"><pre><span></span>subscription.setCriteria(&quot;Observation?subject=sisansarahId-1.2.3.4.5.6.7.8.10&quot;);
</pre></div>


<p>Somehow it worked ...</p>



<a name="154006662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006662">(Oct 08 2018 at 13:27)</a>:</h4>
<blockquote>
<blockquote>
<p>actually, now that I read it carefully, I don't know. Ask on the subscriptions track</p>
</blockquote>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span>  I implemented a simple subscription where the payload was set and I got the resource in the notification. I don't know if that is your question, whether you get the Encounter resource or just a search string for it. Looking back at my code I am a little shocked that it worked as I look at the criteria and it is</p>
</blockquote>
<p>subscription.setCriteria("Observation?patient=sisansarahId-1.2.3.4.5.6.7.8.10");</p>
<div class="codehilite"><pre><span></span>I would expect it to be
</pre></div>


<p>subscription.setCriteria("Observation?subject=sisansarahId-1.2.3.4.5.6.7.8.10");</p>
<div class="codehilite"><pre><span></span>Somehow it worked ...
</pre></div>


<p>thats interesting ... lets continue on the subscription stream on "Subscription and includes"</p>



<a name="154006670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006670">(Oct 08 2018 at 13:37)</a>:</h4>
<p>for a subscription, the server likely needs to be a bit more picky about 'unknown' parameters. right? with a REST query, ignoring an unknown parameter just affects one response. But ignoring an unknown parameter on a subscription can result in much more  unwanted traffic.</p>



<a name="154006674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006674">(Oct 08 2018 at 13:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> - that sounds correct to me. Also, if it indeed is the case that one cannot use the include/revinclude parameters (and maybe other friends from <a href="http://build.fhir.org/search.html#Summary" target="_blank" title="http://build.fhir.org/search.html#Summary">http://build.fhir.org/search.html#Summary</a>) perhaps the criteria definition on subscription should be sharpened a bit.</p>



<a name="154006682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006682">(Oct 08 2018 at 14:18)</a>:</h4>
<p>Historically we've always said (in v2 and v3) that a subscription uses the same format as a search (it is kind of a 'delayed/ongoing search') , so I'd expect that to be the starting point for FHIR unless one has a good reason to include exceptions.</p>



<a name="154006687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006687">(Oct 08 2018 at 14:25)</a>:</h4>
<p>Format, I would agree. I am just thinking a warning to servers that they likely should be more strict because of this possibility.  It would be an informative recommendation, not a normative requirement.</p>



<a name="154006707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006707">(Oct 08 2018 at 15:12)</a>:</h4>
<p>(deleted)</p>



<a name="154006775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006775">(Oct 08 2018 at 18:27)</a>:</h4>
<blockquote>
<p>Historically we've always said (in v2 and v3) that a subscription uses the same format as a search</p>
</blockquote>
<p><span class="user-mention" data-user-id="191372">@René Spronk</span> interesting - where did we say that?</p>



<a name="154006948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006948">(Oct 09 2018 at 07:16)</a>:</h4>
<p>That's my recollection as an InM co-chair.  Searching for references:</p>
<p>v2.7 section 5.7.1: Runtime subscription has existed in earlier versions of HL7, but little attention has been drawn to it. Original mode queries could define an open ended time interval in QRF-9-When quantity/timing qualifier.  The unexplained semantics of this field had been interpreted to mean: If the QRF-9 specified an end time in the future, then the source system would keep sending results using the query continuation protocol.</p>
<p>In v3 the QueryByParameter class has this same kind of fuzzy implied subscription mechanism; the subscription mechanism has not been explicitely documented, although the word subscription is being used in the documentation.  </p>
<p>As far as HL7 was concerned, a subscription is just a query, with a 'delayed' response period.</p>



<a name="154006957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006957">(Oct 09 2018 at 08:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191372">@René Spronk</span>  Subscriptions cannot just be considered as a 'delayed' response period as it works continuously.</p>



<a name="154006963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006963">(Oct 09 2018 at 10:11)</a>:</h4>
<p>Sloppy wording perhaps - a normal query is "now", a subscription is a query that is executed "from now onwards up to point in time x".</p>



<a name="154006964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006964">(Oct 09 2018 at 10:12)</a>:</h4>
<p>Point being: subscription is a query like any others, only the timing differs</p>



<a name="154006966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006966">(Oct 09 2018 at 10:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191372">@René Spronk</span>  if it is a query like any others - how should the criteria Encounter/?_include=Encounter:subject on a Subscription be handled?</p>



<a name="154006969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154006969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154006969">(Oct 09 2018 at 12:34)</a>:</h4>
<p>The exact same way as it would be handled as a regular query. In other words: any (new) encounters, inclusive of their subject resources will be sent to the subscribing party as part of the subscription stream. So as a result of the subscription will be that you'll receive repetitive bursts each consisting of 2 resources. It's exactly what you asked for.</p>
<p>But again: it's up to FHIR to redefine this behaviour should it be desirable. This is just a response based on past behaviour of HL7 standards, but that doesn't mean one can't define it any other way if there are reasons to do so.</p>



<a name="154012990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154012990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154012990">(Oct 28 2018 at 01:25)</a>:</h4>
<p>I guess given the description <span class="user-mention" data-user-id="191372">@René Spronk</span>  that chain search parameters are also allowed? This makes the task a little more difficult as now a server must trigger the subscription searches on every server resource create/update, not just the create/update of the desired resource type. <br>
For instance, criteria <code>Observation.subject:Patient.organization.identifier=http//somesystem/for/org|ACME</code><br>
For this I must trigger the subscription search on every create.update to the resources Observation, Patient and Organization.<br>
Just looking for confirmation you agree. It feels rather different to a message subscription where you may just filter messages on topics as they pass through and push that message to a subscription if matched. Here we have to perform many searches very often. I'm guessing that is the case.</p>



<a name="154013014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscriptions%20and%20includes/near/154013014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscriptions.20and.20includes.html#154013014">(Oct 28 2018 at 09:10)</a>:</h4>
<p>Yes - any URL that's a valid search expression can also be used as the basis for a subscription.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
