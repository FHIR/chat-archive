---
layout: page
title: "FHIR Chat  · TestScript · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html">TestScript</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153850071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Rudenko <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850071">(Sep 21 2016 at 08:08)</a>:</h4>
<p>Hello. Can I ask a question about TestScript and Touchstone Project? As I see there is an inconsistency between spec and tests. For example, this test <a href="https://touchstone.aegis.net/touchstone/testscript?name=%2fBasic-FHIR1-6-0%2fPatient%2fClient+Assigned+Id%2fPatient-client-id-json&amp;version=2&amp;latestVersion=2" target="_blank" title="https://touchstone.aegis.net/touchstone/testscript?name=%2fBasic-FHIR1-6-0%2fPatient%2fClient+Assigned+Id%2fPatient-client-id-json&amp;version=2&amp;latestVersion=2">https://touchstone.aegis.net/touchstone/testscript?name=%2fBasic-FHIR1-6-0%2fPatient%2fClient+Assigned+Id%2fPatient-client-id-json&amp;version=2&amp;latestVersion=2</a> -&gt; Step3-UpdatePatient -&gt; &lt;sourceId value="resource-update"/&gt; . In spec (<a href="http://hl7.org/fhir/2016Sep/testing.html#ops" target="_blank" title="http://hl7.org/fhir/2016Sep/testing.html#ops">http://hl7.org/fhir/2016Sep/testing.html#ops</a>) "The sourceId fixture cannot be statically defined because the id cannot be relied upon." for update operations. But "resource-update" is statically defined, isn't it?</p>
<p>I apologize if this is wrong place for such questions. Thank you</p>



<a name="153850075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850075">(Sep 21 2016 at 10:18)</a>:</h4>
<p>it's not the wrong place. <span class="user-mention" data-user-id="191370">@Richard Ettema</span> this is for you</p>



<a name="153850147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850147">(Sep 21 2016 at 12:38)</a>:</h4>
<p>Yes, this is the right place.<br>
<span class="user-mention" data-user-id="192657">@Andrew Rudenko</span> The testing.html is a new page that got created in the STU3 Ballot (2016Sep) snapshot and came from the original TestScript resource page. The information on this page along with the many How-To examples need to be updated from the DSTU2 spec and this task is on my to-do list in the next couple of weeks.<br>
Would you please create a tracker item for this issue and make sure you reference the url link to this section of the testing.html page? Thank you.</p>



<a name="153850149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Rudenko <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850149">(Sep 21 2016 at 12:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> this tracker <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemBrowse&amp;tracker_id=677" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemBrowse&amp;tracker_id=677">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemBrowse&amp;tracker_id=677</a> ?</p>



<a name="153850153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Rudenko <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850153">(Sep 21 2016 at 13:00)</a>:</h4>
<p>Ok, let me ask a few more questions :)</p>
<p>1) lessThan/greaterThan operators. How should they work? Should values be coerced? By which rules?<br>
2) in operator. Is somewhere described that it should split value by ","?<br>
3) What does <code>direction</code> mean in asserts?<br>
4) <code>path</code> can be "json-path" or "xpath". How can I recognise which one is used in particular place? Touchstone uses xpath for originally json resources, for example.</p>



<a name="153850226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Rudenko <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850226">(Sep 21 2016 at 15:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> one more: 5) touchstone uses variables inside fixtures. but I can't find anything about it in spec</p>



<a name="153850231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850231">(Sep 21 2016 at 16:14)</a>:</h4>
<p>The link to the GForge tracker doesn't go to a new tracker item. Can you verify that link?</p>
<p>Answers to first four questions coming...</p>



<a name="153850232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850232">(Sep 21 2016 at 16:15)</a>:</h4>
<p>1) lessThan/greaterThan operators. How should they work? Should values be coerced? By which rules?</p>
<p>The lessThan/greaterThan operators are intended for numbers only at the moment, for example:<br>
- Assert greaterThan 9.14. Actual value of 9.139 fails. Actual value of 9.141 passes.<br>
- Assert lessThan 9.14. Actual value of 9.139 passes. Actual value of 9.141 fails.<br>
Touchstone supports textual string value comparison such that 'Aaa' is less than 'aaa'.<br>
The contains operator is intended for string values. Since spec doesn’t talk about case sensitivity, it is assumed to be case sensitive.</p>



<a name="153850233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850233">(Sep 21 2016 at 16:16)</a>:</h4>
<p>2) in operator. Is somewhere described that it should split value by ","?<br>
After re-reviewing the spec, yes, this description is missing. Yes, the value list is split by comma ",".</p>



<a name="153850234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850234">(Sep 21 2016 at 16:16)</a>:</h4>
<p>3) What does direction mean in asserts?<br>
direction = "request" - apply the assert to the request (client) side of the message exchange; HTTP headers, payload, etc.<br>
direction = "response" - apply the assert to the response (server) side of the message exchange; HTTP header, payload, etc.</p>



<a name="153850235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850235">(Sep 21 2016 at 16:16)</a>:</h4>
<p>4) path can be "json-path" or "xpath". How can I recognise which one is used in particular place? Touchstone uses xpath for originally json resources, for example.<br>
A FHIR test engine needs to support both xpath and jsonpath and the general assumption (probably needs to be defined) is that you would use xpath when the request and/or response payload is XML and jsonpath for JSON payload. Touchstone has implemented support for use of xpath or jsonpath against either XML or JSON. So, in the majority of the TestScript deployed in Touchstone we use xpath by default. I have run into a couple instances where I needed to resort to jsonpath for explicit JSON references.</p>



<a name="153850240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Rudenko <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850240">(Sep 21 2016 at 16:36)</a>:</h4>
<p>3) Some asserts can't be applied to request (response, responseCode) and most of the rest explicitly defines "response" as a target in documentation (<a href="http://hl7.org/fhir/2016Sep/testing.html#assert" target="_blank" title="http://hl7.org/fhir/2016Sep/testing.html#assert">http://hl7.org/fhir/2016Sep/testing.html#assert</a>), for example, "Asserts that compareToSourcePath against the response body..."</p>



<a name="153850241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Rudenko <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850241">(Sep 21 2016 at 16:36)</a>:</h4>
<p>4) In <a href="https://touchstone.aegis.net/touchstone/testscript?name=%2fBasic-FHIR1-6-0%2fPatient%2fClient+Assigned+Id%2fPatient-client-id-json&amp;version=2&amp;latestVersion=2" target="_blank" title="https://touchstone.aegis.net/touchstone/testscript?name=%2fBasic-FHIR1-6-0%2fPatient%2fClient+Assigned+Id%2fPatient-client-id-json&amp;version=2&amp;latestVersion=2">https://touchstone.aegis.net/touchstone/testscript?name=%2fBasic-FHIR1-6-0%2fPatient%2fClient+Assigned+Id%2fPatient-client-id-json&amp;version=2&amp;latestVersion=2</a> it uses xpath for JSON payloads.</p>



<a name="153850243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850243">(Sep 21 2016 at 16:46)</a>:</h4>
<p>Are we going to switch to fluentpath sometimes?</p>



<a name="153850246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850246">(Sep 21 2016 at 17:31)</a>:</h4>
<p>@<strong>nicola</strong> Yes, we are planning on adding support for fluentpath (name changing back to fhirpath). We need to add a GForge tracker for that.</p>



<a name="153850248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850248">(Sep 21 2016 at 17:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span>  we have some ideas how to make tests more declarative. Are you going to Dev Days in Amsterdam?</p>



<a name="153850250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850250">(Sep 21 2016 at 17:44)</a>:</h4>
<p>@<strong>nicola</strong> I am hoping to get approval to go. I should know for sure in a few days.</p>



<a name="153850251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850251">(Sep 21 2016 at 17:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> You SHOULD join! ;p</p>



<a name="153850259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850259">(Sep 21 2016 at 18:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> +1 hope to see u there and have a discussion. <span class="user-mention" data-user-id="192657">@Andrew Rudenko</span> will be there too!</p>



<a name="153850261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850261">(Sep 21 2016 at 18:03)</a>:</h4>
<p>Tracker for TestScript fhirpath support - <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12140" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12140">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12140</a></p>



<a name="153850274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850274">(Sep 21 2016 at 18:20)</a>:</h4>
<p><span class="user-mention" data-user-id="192657">@Andrew Rudenko</span> 3) Yes. The spec doesn't prevent the response, responseCode elements from being populated when the direction = "request". I have a created a new tracker for this - <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12142" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12142">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12142</a></p>



<a name="153850276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850276">(Sep 21 2016 at 18:22)</a>:</h4>
<p>4) Yes. This is a good example of where we use XPath against a JSON payload. This is convenience feature we implemented in Touchstone.</p>



<a name="153850281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Rudenko <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850281">(Sep 21 2016 at 18:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> 4) so, how should engine choose: xpath or json path? )</p>



<a name="153850287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850287">(Sep 21 2016 at 18:57)</a>:</h4>
<p><span class="user-mention" data-user-id="192657">@Andrew Rudenko</span> Sorry. I meant to say that since the spec defines that the path can be either XPath or JSONPath we built Touchstone to allow the use of either regardless of the payload format. If you're building a test engine, I can see where this may be difficult as this capability took us a while to figure out. If you would like to suggest that a test engine only support XPath for XML and JSONPath for JSON, then please add a new tracker item to clarify/constrain the spec.</p>



<a name="153850291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850291">(Sep 21 2016 at 19:41)</a>:</h4>
<p>5) Yes, we saw this as a needed feature for the test engine and added it to Touchstone. Yes, we need a new tracker to have this defined in the spec. Thanks!</p>



<a name="153850334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850334">(Sep 22 2016 at 12:07)</a>:</h4>
<p>We should probably migrate to FluentPath to be consistent with the rest of the specification.</p>



<a name="153850362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850362">(Sep 22 2016 at 13:33)</a>:</h4>
<p>In FHIR-I Q4 yesterday the resolution to tracker #12140 was to:<br>
Replace the current "path" elements with *two* elements: one for an xpath, and one for a fhirpath, as we do in ElementDefinition.constraint (name them like "expression" and "xpath").</p>



<a name="153850530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Rudenko <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850530">(Sep 23 2016 at 06:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span>  &gt; we built Touchstone to allow the use of either regardless of the payload format</p>
<p>but how does it choose right *path?</p>



<a name="153850539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850539">(Sep 23 2016 at 13:21)</a>:</h4>
<p>We built a transformation from/to XPath &lt;--&gt; JSONPath. When the content is XML and JSONPath is present, we transform the JSONPath to XPath and vice versus.</p>



<a name="153850540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Rudenko <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850540">(Sep 23 2016 at 13:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> i'm asking how do you determine what this is JSONPath (and should be transformed to XPath) ;)</p>



<a name="153850542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Rudenko <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850542">(Sep 23 2016 at 13:26)</a>:</h4>
<p>by comparing first character with "$"?  Maybe there should be a special flag, especially if you going to add new selectors engines?</p>



<a name="153850567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850567">(Sep 23 2016 at 16:01)</a>:</h4>
<p>Our logic is "If the path contains '/' and it doesn’t contain '?(@', then we consider it to be an XPath".</p>



<a name="153850568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850568">(Sep 23 2016 at 16:02)</a>:</h4>
<p>I actually had a discussion with Grahame this morning and we will be updating the specification for TestScript to use the fhirpath (fluentpath) expression language.</p>



<a name="153850569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Rudenko <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850569">(Sep 23 2016 at 16:05)</a>:</h4>
<p>ok, thankyou )</p>



<a name="153850639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153850639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153850639">(Sep 24 2016 at 01:48)</a>:</h4>
<p>@<strong>nicola</strong> - given the timeline of STU3, please dsicuss the changes to STU3 with <span class="user-mention" data-user-id="191370">@Richard Ettema</span> as soon as possible - devdays is too late </p>



<a name="153852178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852178">(Oct 06 2016 at 19:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191370">@Richard Ettema</span> I mocked up the first pass of the <code>TestReport</code> resource coming out of our conversation in Baltimore. <a href="/user_uploads/10155/mBi18R7pFvmU6hu5U20lzeXr/TestReport-FHIR-v1.7.0.pdf" target="_blank" title="TestReport-FHIR-v1.7.0.pdf">TestReport-FHIR-v1.7.0.pdf</a> <a href="/user_uploads/10155/-s-NusPA0nB6nAOHhZuXXX68/testreport-example.xml" target="_blank" title="testreport-example.xml">testreport-example.xml</a>. These changes have not been pushed to SVN.</p>



<a name="153852182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852182">(Oct 06 2016 at 19:22)</a>:</h4>
<p>score - what's that out of? (as long as the definition says)<br>
shouldn't date be mandatory (and an 'instant')?<br>
Origin is unexpectedly complex to me. same for destination<br>
I'm not sure what label &amp; description are- I would have just expected result / message / link-to-details<br>
generally , linking to a detailed report isn't there </p>



<a name="153852195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852195">(Oct 06 2016 at 19:52)</a>:</h4>
<p>I'm presuming 'score' is the percentage pass for all the tests.<br>
I agree on the origin and destination. You could probably just have the index and participant elements. The link back to the TestScript will give you the extra details.</p>



<a name="153852197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852197">(Oct 06 2016 at 20:32)</a>:</h4>
<p>The origin and destination are complex, but they are in TestScript as well, this just mirrors the structure. I was trying to be consistent.</p>



<a name="153852198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852198">(Oct 06 2016 at 20:32)</a>:</h4>
<p>Score would be a percentage of tests passed.</p>



<a name="153852200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852200">(Oct 06 2016 at 20:32)</a>:</h4>
<p>Date should be mandatory, and instant. Yes.</p>



<a name="153852201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852201">(Oct 06 2016 at 20:33)</a>:</h4>
<p>score - fine. was just checking. I don't understand the testscript origin/destination either </p>



<a name="153852202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852202">(Oct 06 2016 at 20:37)</a>:</h4>
<p>Label and description was meant as a way for the TestReport to have a simple label or description of the result beyond just "error" or "skip" (or whatever). This also mirrors the TestScript structure.</p>



<a name="153852203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852203">(Oct 06 2016 at 20:37)</a>:</h4>
<p>I thought about not having origin/destination, and just reference the server being tested, but I figured I'd get push back for not including all the other options (clients, form fillers, etc). I'm okay with simplifying it.</p>



<a name="153852204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852204">(Oct 06 2016 at 20:38)</a>:</h4>
<p>I vote for simplifying and let pushback be towards complexity, not the other way around</p>



<a name="153852205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852205">(Oct 06 2016 at 20:40)</a>:</h4>
<p>OK on simplifying. I'll revise tomorrow morning.... also, the instant should probably be 0..1 in case the report is still pending (which is one of the legal statuses)</p>



<a name="153852206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852206">(Oct 06 2016 at 20:43)</a>:</h4>
<p>ok</p>



<a name="153852258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852258">(Oct 07 2016 at 04:15)</a>:</h4>
<p>I think date shold be a dateTime, not an instant.  TestReport should be limited to automated test execution, so it's possible that in some cases only a date or date + time without milliseconds could be present</p>



<a name="153852265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852265">(Oct 07 2016 at 06:56)</a>:</h4>
<p>why, if it's limited to automated execution, would milliseconds not be present? </p>



<a name="153852288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852288">(Oct 07 2016 at 12:55)</a>:</h4>
<p>Updates attached from discussion... using <code>instant</code> for the time being since that piece seems unresolved.</p>
<p><a href="/user_uploads/10155/DHWN5EzW2ZF-fg8Bchy0tuHJ/TestReport-FHIR-v1.7.0.pdf" target="_blank" title="TestReport-FHIR-v1.7.0.pdf">TestReport-FHIR-v1.7.0.pdf</a> <br>
<a href="/user_uploads/10155/cc3q52Gs0eymPPMyLysDOqVw/testreport-example.xml" target="_blank" title="testreport-example.xml">testreport-example.xml</a> </p>



<a name="153852291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852291">(Oct 07 2016 at 14:02)</a>:</h4>
<p>I like the simplification. It's a good starting point for implementation.</p>



<a name="153852292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852292">(Oct 07 2016 at 14:02)</a>:</h4>
<p>I think the operation.message and assert.message data type should be markdown. This would allow for more structure to the message content if desired.</p>



<a name="153852305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852305">(Oct 07 2016 at 16:53)</a>:</h4>
<p>First, milliseconds are unlikely to be relevant.  Second, why are you limiting it to automated execution?</p>



<a name="153852312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852312">(Oct 07 2016 at 17:41)</a>:</h4>
<p>I'll make the change for markdown.</p>



<a name="153852313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852313">(Oct 07 2016 at 17:42)</a>:</h4>
<p>Lloyd, it seems unlikely that a person will manually execute all the operations and assertions in a TestScript resource. Also, this is equivalent to an Observation.issued or DiagnosticReport.issued attribute, which are both instant, and which both refer to automated services.</p>



<a name="153852314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852314">(Oct 07 2016 at 17:43)</a>:</h4>
<p>But, I'll make the change to dateTime... I don't think milliseconds are terribly important here.</p>



<a name="153852317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852317">(Oct 07 2016 at 17:48)</a>:</h4>
<p>Updates with <code>markdown</code> and <code>dateTime</code><br>
<a href="/user_uploads/10155/EZbEjsiJWWBg02SkdWSnfIvx/TestReport-FHIR-v1.7.0.pdf" target="_blank" title="TestReport-FHIR-v1.7.0.pdf">TestReport-FHIR-v1.7.0.pdf</a> <br>
(example unchanged)</p>



<a name="153852318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852318">(Oct 07 2016 at 17:51)</a>:</h4>
<p>At this point, is it OK if I add these to the current/latest in SVN? Not sure what the process is any longer.</p>



<a name="153852323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852323">(Oct 07 2016 at 19:01)</a>:</h4>
<p>I don't agree with Observation.issued or DiagnosticReport.issued being instants either.  DiagnosticReport.issued is particularly problematic because it's mandatory.  The question is: If I do some manual testing, can I capture and share the results of that using TestReport or not?  I think the answer should be yes.  And if the answer *is* yes, then the resource design should take that into account.</p>



<a name="153852326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852326">(Oct 07 2016 at 19:42)</a>:</h4>
<p>it's hard to imagine someone doing a manual test run</p>



<a name="153852327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852327">(Oct 07 2016 at 19:43)</a>:</h4>
<p>Jason - looks like time to commit. But we didn;t talk about making a formal Resource proposal. Does someone want to do that? </p>



<a name="153852345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852345">(Oct 07 2016 at 20:14)</a>:</h4>
<p>Do we need a gforge tracker created for a formal Resource proposal?</p>



<a name="153852346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852346">(Oct 07 2016 at 20:18)</a>:</h4>
<p>Meaning... is there a tracker already created or would you like me to go ahead and create one?</p>



<a name="153852347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852347">(Oct 07 2016 at 20:27)</a>:</h4>
<p>Nevermind.  I just started a "TestReport_FHIR_Resource_Proposal" page.</p>



<a name="153852350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852350">(Oct 07 2016 at 20:37)</a>:</h4>
<p><a href="http://wiki.hl7.org/index.php?title=TestReport_FHIR_Resource_Proposal" target="_blank" title="http://wiki.hl7.org/index.php?title=TestReport_FHIR_Resource_Proposal">http://wiki.hl7.org/index.php?title=TestReport_FHIR_Resource_Proposal</a> has been created and updated with similar content as the TestScript proposal page.</p>



<a name="153852731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852731">(Oct 12 2016 at 20:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191381">@Jason Walonoski</span> <span class="user-mention" data-user-id="191370">@Richard Ettema</span> my server at <a href="http://fhir3.healthintersections.com.au" target="_blank" title="http://fhir3.healthintersections.com.au">http://fhir3.healthintersections.com.au</a> now supports TestReport - just for testing, is it worth setting up a push from touchstone/crucible to my server with test reports</p>



<a name="153852740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852740">(Oct 12 2016 at 21:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> We normally wait until an official FHIR snapshot release; i.e. Connectathon event or the official STU3, is created before adding support for that release into Touchstone. That being said, I would like to get support for TestReport into Touchstone sooner than later. I see if I have time in the next few days to implement support for the current 1.7.0 spec.</p>



<a name="153852741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852741">(Oct 12 2016 at 21:56)</a>:</h4>
<p>Question - what will be the FHIR version number for STU 3 when it's officially released?  2.0.0?</p>



<a name="153852746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852746">(Oct 12 2016 at 22:40)</a>:</h4>
<p>yes that's the plan. </p>



<a name="153852776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852776">(Oct 13 2016 at 11:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> we have a few things to do before we'd be in a position to push TestReport to your server, but we can work toward that goal.</p>



<a name="153852854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153852854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153852854">(Oct 14 2016 at 19:14)</a>:</h4>
<p>ok thx</p>



<a name="153879250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879250">(Mar 22 2017 at 21:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> - I don't have any idea what TestScript.profile is for, after reading the documentation</p>



<a name="153879252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879252">(Mar 22 2017 at 21:29)</a>:</h4>
<p>TestScript.profile defines the FHIR Profile(s) [StructureDefinition(s)] to be used in subsequent asserts where the test engine invokes a FHIR validation engine against the request or response payload; e.g.</p>
<div class="codehilite"><pre>&lt;profile id=&quot;resource-profile&quot;&gt;
    &lt;reference value=&quot;http://hl7.org/fhir/StructureDefinition/Patient&quot;/&gt;
&lt;/profile&gt;
</pre></div>



<a name="153879253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879253">(Mar 22 2017 at 21:30)</a>:</h4>
<p>Yes, the current definition is somewhat lacking.  Sorry I missed updating that.</p>



<a name="153879254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879254">(Mar 22 2017 at 21:31)</a>:</h4>
<p>why not just refer to the profile directly when you use it? What does an id based internal reference buy? </p>



<a name="153879255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879255">(Mar 22 2017 at 21:32)</a>:</h4>
<p>I think that TestScript.setup.action.operation.type should be a URI. We define standard URIs for the standard interactions on http.html, and otherwise is the canonical URL of the operation that is being tested</p>



<a name="153879256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879256">(Mar 22 2017 at 21:35)</a>:</h4>
<p>I reckon that the testscript resource should reference the testing.html page in it's introduction</p>



<a name="153879257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879257">(Mar 22 2017 at 21:36)</a>:</h4>
<p>re: TestScript.profile - good point. It's been defined that way from the beginning and I never went back and questioned it.</p>



<a name="153879259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879259">(Mar 22 2017 at 21:38)</a>:</h4>
<p>The TestScript resource page section 7.3.3.1 Background has a link to testing.html. Yes, moving it up under Introduction would make it more noticeable.</p>



<a name="153879260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879260">(Mar 22 2017 at 21:38)</a>:</h4>
<p>I've read the documentation of TestScript.setup.action.operation.targetId several times, and I haev no idea what it's for </p>



<a name="153879262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879262">(Mar 22 2017 at 21:43)</a>:</h4>
<p>There's an example of using targetId in the How-To section of the testing.html page under <a href="http://hl7.org/fhir/STU3/testing.html#7.2.2.3" target="_blank" title="http://hl7.org/fhir/STU3/testing.html#7.2.2.3">http://hl7.org/fhir/STU3/testing.html#7.2.2.3</a> "Perform delete operation in teardown".</p>



<a name="153879265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879265">(Mar 22 2017 at 21:47)</a>:</h4>
<p>re: TestScript.setup.action.operation.type - I've read over the http.html page again and I'm not seeing the standard URIs for the standard interactions. How would extended operations be handled otherwise?</p>



<a name="153879267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879267">(Mar 22 2017 at 21:53)</a>:</h4>
<p>Sorry, you're talking about the OperationDefintion.url, right?  e.g. "<a href="http://hl7.org/fhir/OperationDefinition/Resource-validate" target="_blank" title="http://hl7.org/fhir/OperationDefinition/Resource-validate">http://hl7.org/fhir/OperationDefinition/Resource-validate</a>" for $validate.</p>



<a name="153879269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879269">(Mar 22 2017 at 21:55)</a>:</h4>
<p>yes. (and we would have to define URLs for the standard interactions)</p>



<a name="153879270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879270">(Mar 22 2017 at 21:56)</a>:</h4>
<p>Yes.  Agreed.  That would be a better way to go.</p>



<a name="153879271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879271">(Mar 22 2017 at 21:59)</a>:</h4>
<p>suggest that you add 'a target id could be used to delete a resource in a teardown operation' to the comments of the target id, and/or review it's definition, because I still don't understand "Id of fixture used for extracting the [id], [type], and [vid] for GET requests"</p>



<a name="153879275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879275">(Mar 22 2017 at 22:01)</a>:</h4>
<p>Ok.  Will do.</p>



<a name="153879337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879337">(Mar 23 2017 at 02:38)</a>:</h4>
<p>ok. there's a lot about the assert that I don't follow. </p>



<a name="153879346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879346">(Mar 23 2017 at 02:42)</a>:</h4>
<p>I'd still much rather it be simple:</p>
<div class="codehilite"><pre>&lt;assert&gt;
   &lt;name value=&quot;&quot;/&gt;
  &lt;description value=&quot;&quot;/&gt;
  &lt;source value=&quot;[what is being tested: request-header | request-body | response-header | response -body | fixture&quot;/&gt;
  &lt;sourceId value=&quot;id of what is being tested - fixture id, header name&quot;/&gt;
  &lt;expressionType value=&quot;fhirpath | xpath | regex | javascript&quot;/&gt; 
  &lt;expression value=&quot;per above&quot;/&gt;
&lt;/assert&gt;
</pre></div>



<a name="153879347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879347">(Mar 23 2017 at 02:43)</a>:</h4>
<p>anyway, I sent you a draft of a test script for comment</p>



<a name="153879615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879615">(Mar 23 2017 at 23:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> I don't understand the cardinality of TestScript.setup.action.assert - shouldn't that be 0..*? How can I have multiple asserts about the outcome of an operation? </p>



<a name="153879617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879617">(Mar 23 2017 at 23:40)</a>:</h4>
<p>The containing element "action" has the cardinality of 0..*.  A test will have 1 or more actions which are combinations of 1 or more "operation"s; each "operation" can be followed by 0 or more "assert"s.</p>



<a name="153879618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879618">(Mar 23 2017 at 23:41)</a>:</h4>
<p>so is there any difference between one action with an operation and an assert, and two actions, one with an operation, and one with an assert?</p>



<a name="153879619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879619">(Mar 23 2017 at 23:42)</a>:</h4>
<p>If you look at the invariant inv-1, an action can only contain either an operation or an assert.</p>



<a name="153879620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879620">(Mar 23 2017 at 23:43)</a>:</h4>
<p>pfft. I thought I checked that. sorry</p>



<a name="153879621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879621">(Mar 23 2017 at 23:45)</a>:</h4>
<p>np.  You can go to Touchstone and look at any of the the TestScripts via the "Test Definitions" menu item.  You don't even have to be logged in.<br>
<a href="/user_uploads/10155/5DHaz6ork0rmo_ZXrSaTEeUR/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/5DHaz6ork0rmo_ZXrSaTEeUR/pasted_image.png" target="_blank" title="pasted_image.png"><img src="/user_uploads/10155/5DHaz6ork0rmo_ZXrSaTEeUR/pasted_image.png"></a></div>



<a name="153879622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879622">(Mar 23 2017 at 23:50)</a>:</h4>
<p>while you're here... Asserts...</p>



<a name="153879623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879623">(Mar 23 2017 at 23:51)</a>:</h4>
<p>I'm not sure how to use the assert to say what I want. </p>



<a name="153879624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879624">(Mar 23 2017 at 23:52)</a>:</h4>
<p>Ok.  I've got about 10 minutes before I have to sign off.  Describe what you want and I'll do my best to translate to an assert.  :)</p>



<a name="153879625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879625">(Mar 23 2017 at 23:52)</a>:</h4>
<p>so I want to make a fhir path assertion that compares input from one of the fixtures to the result of an operation</p>



<a name="153879626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879626">(Mar 23 2017 at 23:55)</a>:</h4>
<p>So you want to compare the contents of a static fixture to the response body/payload of an operation?</p>



<a name="153879627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879627">(Mar 23 2017 at 23:56)</a>:</h4>
<p>yes</p>



<a name="153879628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879628">(Mar 23 2017 at 23:58)</a>:</h4>
<p>The minimumId assert element currently provides that functionality; for example,</p>
<div class="codehilite"><pre>&lt;action&gt;
    &lt;assert&gt;
        &lt;description value=&quot;Confirm that read returns updated version and that update did not delete previously created fields.&quot;/&gt;
        &lt;direction value=&quot;response&quot;/&gt;
        &lt;minimumId value=&quot;resource-update-min&quot;/&gt;
    &lt;/assert&gt;
&lt;/action&gt;
</pre></div>



<a name="153879629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879629">(Mar 23 2017 at 23:59)</a>:</h4>
<p>I don't really understand direction, for a start</p>



<a name="153879630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879630">(Mar 23 2017 at 23:59)</a>:</h4>
<p>The minimumId points to a static fixture.  The assert will have the test engine do a comparison of the static fixture to the response body of the read.</p>



<a name="153879631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879631">(Mar 23 2017 at 23:59)</a>:</h4>
<p>If direction="request", the comparison would be to the request body from the client.</p>



<a name="153879632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879632">(Mar 24 2017 at 00:00)</a>:</h4>
<p>but that's not what i want. I have a specific FHIRPath assertion about the difference between the two resoruces</p>



<a name="153879633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879633">(Mar 24 2017 at 00:00)</a>:</h4>
<p>Understood.  I'm just trying to give you some context.</p>



<a name="153879634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879634">(Mar 24 2017 at 00:00)</a>:</h4>
<p>and that didn't bring me any clarity. Why not just identify what is being compared by the id it is assigned? </p>



<a name="153879635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879635">(Mar 24 2017 at 00:02)</a>:</h4>
<p>currently, I have this:</p>
<div class="codehilite"><pre>      &lt;assert&gt;  
        &lt;label value=&quot;check-elements&quot;/&gt;
        &lt;description value=&quot;The snapshot elements must be the same&quot;/&gt;
        &lt;direction value=&quot;response&quot;/&gt;
        &lt;expression value=&quot;fixture(&#39;simple1-output&#39;).snapshot.element.all($this = fixture(&#39;patient&#39;).snapshot.element.where(path = $this.path)&quot;/&gt;
      &lt;/assert&gt;
</pre></div>



<a name="153879636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879636">(Mar 24 2017 at 00:02)</a>:</h4>
<p>though, as I said above, looking at assert fills me with an urgent desire to simply and calrify it </p>



<a name="153879637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879637">(Mar 24 2017 at 00:03)</a>:</h4>
<p>Is that FHIRPath expression currently valid?  I don't recognize the fixture() method.</p>



<a name="153879638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879638">(Mar 24 2017 at 00:04)</a>:</h4>
<p>it's an extension for this context (such extensions are allowed)</p>



<a name="153879639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879639">(Mar 24 2017 at 00:04)</a>:</h4>
<p>but I don't know how else you would do it </p>



<a name="153879640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879640">(Mar 24 2017 at 00:05)</a>:</h4>
<p>Ok. Is that extension supported by the Java RI FHIRPathEngine?  I ask because that's what I'm using in Touchstone.</p>



<a name="153879641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879641">(Mar 24 2017 at 00:06)</a>:</h4>
<p>there's an API for regsitering extension methods </p>



<a name="153879642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879642">(Mar 24 2017 at 00:06)</a>:</h4>
<p>see org.hl7.fhir.dstu3.utils.FHIRPathEngine.IEvaluationContext</p>



<a name="153879643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879643">(Mar 24 2017 at 00:07)</a>:</h4>
<p>and I think that any useful use of FHIRPath will require the ability to refer to multiple fixtures</p>



<a name="153879644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879644">(Mar 24 2017 at 00:07)</a>:</h4>
<p>in this context, anwyay</p>



<a name="153879645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879645">(Mar 24 2017 at 00:08)</a>:</h4>
<p>I was just about to ask.  Thanks.  Yes, very useful.<br>
I'll have to investigate how this would work in Touchstone.</p>



<a name="153879646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879646">(Mar 24 2017 at 00:08)</a>:</h4>
<p>Right now I'm using FHIRPath expressions like the following:</p>
<div class="codehilite"><pre>&lt;action&gt;
    &lt;assert&gt;
        &lt;description value=&quot;Confirm that the returned resource contains the expected start datetime value.&quot;/&gt;
        &lt;direction value=&quot;response&quot;/&gt;
        &lt;expression value=&quot;Slot.start = @2016-10-25T09:00:00Z&quot;/&gt;
    &lt;/assert&gt;
&lt;/action&gt;
</pre></div>



<a name="153879647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879647">(Mar 24 2017 at 00:09)</a>:</h4>
<p>yes that will work, but as soon as you have content that depends on other resources, then you need a fixture or a variable. I expect we'll need variable() as well</p>



<a name="153879648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879648">(Mar 24 2017 at 00:10)</a>:</h4>
<p>Yes, it's fairly simple at the moment but I definitely want to explore getting more complex expressions implemented.</p>



<a name="153879649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879649">(Mar 24 2017 at 00:11)</a>:</h4>
<p>Sorry, I have to drop now - just as things were getting interesting.  :)  I'd like to pick this up again later.  Thanks.</p>



<a name="153879650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879650">(Mar 24 2017 at 00:11)</a>:</h4>
<p>ok</p>



<a name="153879652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153879652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153879652">(Mar 24 2017 at 01:11)</a>:</h4>
<p>FYI:</p>
<div class="codehilite"><pre>   <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">FunctionDetails</span> <span class="nf">resolveFunction</span><span class="o">(</span><span class="n">String</span> <span class="n">functionName</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="s">&quot;fixture&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">functionName</span><span class="o">))</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">FunctionDetails</span><span class="o">(</span><span class="s">&quot;Access a fixture defined in the testing context&quot;</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">TypeDetails</span> <span class="nf">checkFunction</span><span class="o">(</span><span class="n">Object</span> <span class="n">appContext</span><span class="o">,</span> <span class="n">String</span> <span class="n">functionName</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">TypeDetails</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">PathEngineException</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="s">&quot;fixture&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">functionName</span><span class="o">))</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">TypeDetails</span><span class="o">(</span><span class="n">CollectionStatus</span><span class="o">.</span><span class="na">SINGLETON</span><span class="o">,</span> <span class="n">TestingUtilities</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">getResourceNamesAsSet</span><span class="o">());</span>
      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Base</span><span class="o">&gt;</span> <span class="nf">executeFunction</span><span class="o">(</span><span class="n">Object</span> <span class="n">appContext</span><span class="o">,</span> <span class="n">String</span> <span class="n">functionName</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Base</span><span class="o">&gt;&gt;</span> <span class="n">parameters</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="s">&quot;fixture&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">functionName</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="na">convertToString</span><span class="o">(</span><span class="n">parameters</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
        <span class="n">Resource</span> <span class="n">res</span> <span class="o">=</span> <span class="n">fetchFixture</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">res</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">List</span><span class="o">&lt;</span><span class="n">Base</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Base</span><span class="o">&gt;();</span>
          <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">res</span><span class="o">);</span>
          <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
        <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
</pre></div>



<a name="153880021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153880021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153880021">(Mar 28 2017 at 04:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> it's not clear to me how a test script differentiates between errors and fatal errors - is there anyway to say 'just stop running the tests'?</p>



<a name="153880073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/TestScript/near/153880073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/TestScript.html#153880073">(Mar 28 2017 at 14:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Let me address your two issues separately...</p>
<ul>
<li>how a test script differentiates between errors and fatal errors</li>
</ul>
<p>The short answer is no. During our working group discussions during May and June 2015, the concept of a "fatal" error was not mentioned. It’s not clear what fatal would be: A prerequisite that’s not met in the test script? A fatal error within the test engine? A fatal error in the test system? The current behavior expected of a test engine is to mark the overall test script execution as Failed if the setup or any of the tests fail.</p>
<ul>
<li>is there anyway to say 'just stop running the tests'?</li>
</ul>
<p>The currently defined behavior (testing.html) of the test engine's processing of the TestScript regarding failures is:<br>
<strong>7.2.1.1 Workflow</strong> - <a href="http://hl7.org/fhir/STU3/testing.html#7.2.1.1" target="_blank" title="http://hl7.org/fhir/STU3/testing.html#7.2.1.1">http://hl7.org/fhir/STU3/testing.html#7.2.1.1</a><br>
<strong>Setup Execution</strong></p>
<blockquote>
<p>All operations in a setup section (including assertions) must complete successfully for the subsequent tests to be executed. If an assertion operation in the setup section fails, then execution and evaluation of the tests in the TestScript should be skipped.</p>
</blockquote>
<p><strong>7.2.1.5 Operation Execution</strong> - <a href="http://hl7.org/fhir/STU3/testing.html#7.2.1.5" target="_blank" title="http://hl7.org/fhir/STU3/testing.html#7.2.1.5">http://hl7.org/fhir/STU3/testing.html#7.2.1.5</a></p>
<blockquote>
<p>If an operation or assertion fails, then the test ends in failure and the test script execution proceeds to the next test.</p>
</blockquote>
<p>What this means is that (currently) the only way for a test engine to not execute all the defined tests is for the setup to fail. Otherwise, each individual test will execute. An individual test execution will be halted if an operation or assert fails within the definition of that test.</p>
<p>A design enhancement to allow for conditional execution of a test based on a prior test execution result would be needed to allow for a test engine to stop running all the (remaining) tests in that situation.</p>
<p>HTH</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
