---
layout: page
title: "FHIR Chat  · base64Binary RegEx StackOverflowError · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/base64Binary.20RegEx.20StackOverflowError.html">base64Binary RegEx StackOverflowError</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="210013806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/base64Binary%20RegEx%20StackOverflowError/near/210013806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/base64Binary.20RegEx.20StackOverflowError.html#210013806">(Sep 14 2020 at 14:35)</a>:</h4>
<p>The current version of the base64Binary RegEx is <code>(\s*([0-9a-zA-Z\+\=]){4}\s*)+</code>. If I use Java regular expressions to validate a Base64 encoded String, I get a StackOverflowError on Strings longer than 6220 chars. If I remove the group around the character class <code>(\s*[0-9a-zA-Z\+\=]{4}\s*)+</code>, I can validate 9848 chars. If I remove the leading whitespace <code>([0-9a-zA-Z\+/=]{4}\s*)+</code>, I can validate 13132 chars and if I remove both whitespaces <code>([0-9a-zA-Z\+/=]{4})+</code> I don't get a StackOverflowError anymore.</p>
<p>My Java version is:</p>
<div class="codehilite"><pre><span></span><code>java version &quot;11.0.7&quot; 2020-04-14 LTS
Java(TM) SE Runtime Environment 18.9 (build 11.0.7+8-LTS)
Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.7+8-LTS, mixed mode)
</code></pre></div>


<p>Can someone else replicate my findings? I found this problem while trying to upload a Library resource with a 75k <code>application/elm+xml</code> content into my Blaze server. I do validate every primitive data type with its regular expression during create/update.</p>
<p>Have other servers the same problem? <span class="user-mention" data-user-id="191676">@Lee Surprenant</span></p>



<a name="210017857"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/base64Binary%20RegEx%20StackOverflowError/near/210017857" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Olbrich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/base64Binary.20RegEx.20StackOverflowError.html#210017857">(Sep 14 2020 at 15:00)</a>:</h4>
<p>I have noticed in the past that those regexes are not 'anchored' to the start and end of the string because the tooling they are used with does that by default.  If you manually anchor them, does that help?</p>



<a name="210020341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/base64Binary%20RegEx%20StackOverflowError/near/210020341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/base64Binary.20RegEx.20StackOverflowError.html#210020341">(Sep 14 2020 at 15:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191614">@Kevin Olbrich</span> Thanks, but that doesn't help. I create a <code>java.util.regex.Matcher</code> from a <code>java.util.regex.Pattern</code> using the <code>matcher</code> method and call the <code>matches</code> afterwards. The <code>matches</code> method already tries to match the entire string.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
