---
layout: page
title: "FHIR Chat  · Date searches: contained or overlap · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html">Date searches: contained or overlap</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="172887905"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/172887905" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#172887905">(Aug 09 2019 at 20:51)</a>:</h4>
<p>So search by date should use overlap or contains? eg date=2019-03 matches only encounters that happened entirely within march 2019, or any encounter that was even partially in March 2019?<br>
I cannot really understand which is supposed to be from <a href="http://hl7.org/fhir/search.html#date" target="_blank" title="http://hl7.org/fhir/search.html#date">http://hl7.org/fhir/search.html#date</a><br>
Our server used to use overlap, but a while ago (November 2017) we switched to contained - based on some information / discussions that happened here I think, but that I cannot find</p>



<a name="172903272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/172903272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#172903272">(Aug 10 2019 at 01:42)</a>:</h4>
<p>I'm astounded to find that the specification doesn't seem to make clear that it's an "intersection" match, not a "contains" match.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="172903488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/172903488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#172903488">(Aug 10 2019 at 01:49)</a>:</h4>
<p>I thought it was very clear</p>



<a name="172904444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/172904444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#172904444">(Aug 10 2019 at 02:18)</a>:</h4>
<p>I can't see wording that says it...</p>



<a name="173028031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/173028031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#173028031">(Aug 12 2019 at 14:27)</a>:</h4>
<p>Added <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23558" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23558">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23558</a></p>



<a name="173028209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/173028209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#173028209">(Aug 12 2019 at 14:29)</a>:</h4>
<p>..and you do positively confirm that should be overlap?</p>



<a name="173185534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/173185534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#173185534">(Aug 14 2019 at 08:51)</a>:</h4>
<p>I think it's overlap, yes</p>



<a name="173198374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/173198374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#173198374">(Aug 14 2019 at 12:39)</a>:</h4>
<p>Actually - it is documented at <a href="http://hl7.org/fhir/search.html#prefix" target="_blank" title="http://hl7.org/fhir/search.html#prefix">http://hl7.org/fhir/search.html#prefix</a> - and it is contains for <code>eq</code>, overlap for <code>ge</code>, <code>gt</code>, <code>le</code>, <code>lt</code></p>



<a name="173207145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/173207145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#173207145">(Aug 14 2019 at 14:20)</a>:</h4>
<p>Those prefix work for when the element is a date or dateTime.. but not well for when the element is a period. This CR and one I entered (<a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19909" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19909">GF#19909</a>) , are about searching against a period.</p>



<a name="173207731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/173207731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#173207731">(Aug 14 2019 at 14:27)</a>:</h4>
<p>It is partially clear for inclusive searches (give me observatinos within range of x to y). Not clear how start/end of period is used here, but more clear that the intent is to favor false-positives... What is not clear at all is when one is asking for things before x, or after y; mostly I want everything NOT during the period x to y. Usecase that happens in XDS is that there is a known period of time that is very noisy but known to not be relevant. So I want things that happened before that period, and things after. (or there is consent policy restricting that period from x to y).</p>



<a name="173261086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/173261086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#173261086">(Aug 15 2019 at 02:45)</a>:</h4>
<p>might need some more qualifiers for some of these cases. Sounds like a face to face discussion in Atlanta during the connectathon to me</p>



<a name="173290050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/173290050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#173290050">(Aug 15 2019 at 13:31)</a>:</h4>
<p>Sure<br>
Don't understand what's the difference between dates and periods: dates are periods as well (of 1 day or 1 month or 1 year) and the spec say they should be treated as such</p>



<a name="188044198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/188044198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#188044198">(Feb 12 2020 at 19:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191912">@Michele Mottini</span>  Are there any news here? How can I find the gForge issues in JIRA? Thanks.</p>



<a name="188049676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/188049676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#188049676">(Feb 12 2020 at 20:19)</a>:</h4>
<p>As I see it the <code>ap</code> prefix covers the overlap case were the <code>eq</code> prefix covers the contains case.</p>



<a name="188050910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/188050910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#188050910">(Feb 12 2020 at 20:35)</a>:</h4>
<p>If you know the gForge id for an issue, you can find the Jira equivalent using <code>http://jira.hl7.org/browse/FHIR-[id]</code> where [id] is your gForge id.  E.g. <a href="http://jira.hl7.org/browse/FHIR-19909" target="_blank" title="http://jira.hl7.org/browse/FHIR-19909">http://jira.hl7.org/browse/FHIR-19909</a></p>



<a name="188051013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/188051013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#188051013">(Feb 12 2020 at 20:36)</a>:</h4>
<p>If you don't know the gForge id, Jira has significant search capabilities.  There's some documentation here: <a href="https://confluence.hl7.org/display/HL7/Specification+Feedback#SpecificationFeedback-Searchingandmonitoringissues" target="_blank" title="https://confluence.hl7.org/display/HL7/Specification+Feedback#SpecificationFeedback-Searchingandmonitoringissues">https://confluence.hl7.org/display/HL7/Specification+Feedback#SpecificationFeedback-Searchingandmonitoringissues</a></p>



<a name="188051064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/188051064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#188051064">(Feb 12 2020 at 20:37)</a>:</h4>
<p>No news per se. We implemented <code>eq</code> as contains and <code>gt</code>, <code>lt</code>, <code>ge</code>, <code>le</code> as overlap. We do not support <code>ap</code>. We handle dates as periods of 1 day</p>



<a name="188097043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/188097043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#188097043">(Feb 13 2020 at 11:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191912">@Michele Mottini</span> Is in your case <code>gt</code> the same as <code>ge</code> for dates? I ask because for dates the <code>range above the value</code> is defined the same as the lower bound for dates. In the example it's <code>2015-08-12T05:23:45.000000000000000</code> for <code>2015-08-12T05:23:45</code> where <code>2015-08-12T05:23:45.000000000000000</code> would also the lower bound. For decimals however the lower bound of  <code>2.0</code> is <code>1.95</code>, so it's different from the point where <code>range above the value</code> starts (<code>2.00000000000000000000</code>) and so <code>ge</code> matches more values as <code>gt</code>.</p>



<a name="188146819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/188146819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#188146819">(Feb 13 2020 at 20:25)</a>:</h4>
<p>No, <code>ge</code> and <code>gt</code> are different  (we actually had to fix that - automatic testing with the Inferno tool was failing)</p>



<a name="188147453"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/188147453" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#188147453">(Feb 13 2020 at 20:32)</a>:</h4>
<p><code>ge</code> =&gt; the end of the period is greater or equal to the start of the search period (or the period is open ended)</p>



<a name="188147476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Date%20searches%3A%20contained%20or%20overlap/near/188147476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Date.20searches.3A.20contained.20or.20overlap.html#188147476">(Feb 13 2020 at 20:32)</a>:</h4>
<p><code>gt</code> =&gt; the end of the period is greater to the start of the search period (or the period is open ended)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
