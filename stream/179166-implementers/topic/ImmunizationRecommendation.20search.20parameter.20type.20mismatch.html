---
layout: page
title: "FHIR Chat  · ImmunizationRecommendation search parameter type mismatch · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html">ImmunizationRecommendation search parameter type mismatch</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153984321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ImmunizationRecommendation%20search%20parameter%20type%20mismatch/near/153984321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Munini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html#153984321">(Aug 09 2018 at 17:34)</a>:</h4>
<p>The dose-number and dose-sequence Search Parameters on the ImmunizationRecommendation resource (<a href="http://build.fhir.org/immunizationrecommendation.html" target="_blank" title="http://build.fhir.org/immunizationrecommendation.html">http://build.fhir.org/immunizationrecommendation.html</a>) are defined as “number” search types.  The FHIRPath expression for dose-number, for example, is ImmunizationRecommendation.recommendation.doseNumber which is a Type Choice of both a positiveInt and a String.</p>
<p>The positiveInt makes sense, but the String is not a “number” as declared by the Search Parameter.  This is the only instance I have found in the spec of a type mismatch in search parameter definitions.</p>
<p>Is a Search Parameter like this permitted? Is it valid?</p>
<p>If it is, there are some side effects we would need to describe - for example - how should a server handle a greater than search on a doseNumberString?</p>
<p>If it is not valid, should these two Search Parameters be modified to a FHIRPath expression like this: ImmunizationRecommendation.recommendation.doseNumber.as(positiveInt), and then a second, separate Search Parameter be defined for the String types?</p>
<p>Thanks!</p>



<a name="153984325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ImmunizationRecommendation%20search%20parameter%20type%20mismatch/near/153984325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html#153984325">(Aug 09 2018 at 17:40)</a>:</h4>
<p><span class="user-mention" data-user-id="192758">@Craig Newman</span> <span class="user-mention" data-user-id="191418">@Joginder Madra</span></p>



<a name="153984338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ImmunizationRecommendation%20search%20parameter%20type%20mismatch/near/153984338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Newman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html#153984338">(Aug 09 2018 at 17:54)</a>:</h4>
<p>We got feedback that doseNumber and seriesDoses should allow the option to include a string to allow things like indicating a dose was booster (e.g. adult tetanus) or yearly (influenza), so we made that change. We didn't intend to disrupt the search types. The best solution is beyond my technical understanding, so if someone can confirm  Steve's proposed solution (or suggest a different solution), I'm happy to make the change.</p>



<a name="153984375"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ImmunizationRecommendation%20search%20parameter%20type%20mismatch/near/153984375" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html#153984375">(Aug 09 2018 at 18:21)</a>:</h4>
<p>You have a choice of going with 2 search parameters or going with a single "string" one.  You might also consider 'token' as you'd always want exact string matches.  You need a number based search parameter if you need the ge, le and similar modifiers.</p>



<a name="153984384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ImmunizationRecommendation%20search%20parameter%20type%20mismatch/near/153984384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Newman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html#153984384">(Aug 09 2018 at 18:34)</a>:</h4>
<p>I think I lean towards two search parameters. I don't know if there is a real pressing need for ge and le but it seems reasonable to leave open the possibility. I assume they need unique names and would the path be literally ImmunizationRecommendation.recommendation.doseNumber.as(positiveInt) (and a type of number) and ImmunizationRecommendation.recommendation.doseNumber.as(string) (and a type of string).</p>



<a name="153984399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ImmunizationRecommendation%20search%20parameter%20type%20mismatch/near/153984399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html#153984399">(Aug 09 2018 at 18:56)</a>:</h4>
<p>The first, yes.  For the second, string has a base-behavior of starts-with match and case-insensitive/accent insensitive.  I suspect 'token' is more the behavior you'd want.</p>



<a name="153984402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ImmunizationRecommendation%20search%20parameter%20type%20mismatch/near/153984402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Newman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html#153984402">(Aug 09 2018 at 18:58)</a>:</h4>
<p>sounds good. Thanks</p>



<a name="153984901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ImmunizationRecommendation%20search%20parameter%20type%20mismatch/near/153984901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Newman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html#153984901">(Aug 10 2018 at 12:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  is this OK to  try and do today, or do you want me to wait?</p>



<a name="153984907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ImmunizationRecommendation%20search%20parameter%20type%20mismatch/near/153984907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Newman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html#153984907">(Aug 10 2018 at 12:38)</a>:</h4>
<p>And the addition of Immunization.recorded - is that OK to do today as well?</p>



<a name="153984939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ImmunizationRecommendation%20search%20parameter%20type%20mismatch/near/153984939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html#153984939">(Aug 10 2018 at 14:15)</a>:</h4>
<p>Totally fine to do today</p>



<a name="153984997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ImmunizationRecommendation%20search%20parameter%20type%20mismatch/near/153984997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig Newman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ImmunizationRecommendation.20search.20parameter.20type.20mismatch.html#153984997">(Aug 10 2018 at 17:28)</a>:</h4>
<p>I have the following in the spreadsheet:<br>
dose-number                        number   ImmunizationRecommendation.recommendation.doseNumber.as(positiveInt)<br>
dose-number-by-token    token       ImmunizationRecommendation.recommendation.doseNumber.as(token)<br>
dose-sequence                  number   ImmunizationRecommendation.recommendation.seriesDose.as(positiveInt)<br>
dose-sequence-by-token  token       ImmunizationRecommendation.recommendation.seriesDose.as(token)</p>
<p>It builds fine locally, but the display doesn't include a path or description. Is there something wrong with the path I added?</p>
<p>Name    Type    Description Expression  In Common<br>
date    date    Date recommendation(s) created  ImmunizationRecommendation.date <br>
dose-number number          <br>
dose-number-by-token    token           <br>
dose-sequence   number          <br>
dose-sequence-by-token  token           <br>
identifier  token   Business identifier ImmunizationRecommendation.identifier</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
