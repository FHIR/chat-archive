---
layout: page
title: "FHIR Chat  · Slicing · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html">Slicing</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153814818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153814818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153814818">(Mar 10 2016 at 17:19)</a>:</h4>
<p>Is it legal (or does it even make sense) to constrain sub elements of the "setup" slice when slicing in profiles?</p>



<a name="153814826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153814826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153814826">(Mar 10 2016 at 17:25)</a>:</h4>
<p>By "setup" slice I mean the "slicing entry" as per <a href="https://www.hl7.org/fhir/profiling.html#discriminator" target="_blank" title="https://www.hl7.org/fhir/profiling.html#discriminator">https://www.hl7.org/fhir/profiling.html#discriminator</a>.</p>



<a name="153814828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153814828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153814828">(Mar 10 2016 at 17:26)</a>:</h4>
<p>I think it doesn't make sense. (But my understanding of slicing is... limited.)</p>



<a name="153814831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153814831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153814831">(Mar 10 2016 at 17:27)</a>:</h4>
<p>OK cool - I guess I was thinking you may want to apply certain restrictions to all of the slices (and any elements added outside the slices (if Open or OpenAtEnd)).</p>



<a name="153814833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153814833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153814833">(Mar 10 2016 at 17:28)</a>:</h4>
<p>However it would make it complicated to apply (and calculate) the restrictions if this were the case.  So I hope the answer is no!</p>



<a name="153814989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153814989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153814989">(Mar 10 2016 at 23:12)</a>:</h4>
<p>You can definitely constrain sub-elements of the setup slice.  For example, you can say "the only kinds of telecoms allowed are phone numbers" and then slice to say that there must be one home number and can be up to two work numbers.</p>



<a name="153814990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153814990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153814990">(Mar 10 2016 at 23:12)</a>:</h4>
<p>(Now whether Forge allows that or not, I have no idea :))</p>



<a name="153814998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153814998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153814998">(Mar 10 2016 at 23:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> OK, Forge doesn't allow you to do that.  Once you've sliced an element, you can only modify elements of the slices, and not the setup slice.</p>



<a name="153815000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153815000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153815000">(Mar 10 2016 at 23:21)</a>:</h4>
<p>Raise the issue on the "conformance" stream so they can add it to their to-do list</p>



<a name="153815006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153815006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153815006">(Mar 10 2016 at 23:29)</a>:</h4>
<p>This does make for some pretty tricky validation logic though!</p>



<a name="153815007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153815007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153815007">(Mar 10 2016 at 23:30)</a>:</h4>
<p>(raised)</p>



<a name="153815157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153815157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153815157">(Mar 11 2016 at 11:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> thank you for pointing this out.<br>
In Forge, the element treeview represents slice constraints as child nodes of the sliced element. The original child elements of a sliced element are hidden in the treeview. The UI clearly expresses the relationship between the sliced element and the associated slices, however it also prevents the user from constraining the original child elements.<br>
If the spec indeed allows this, then Forge should support it too. However I'm afraid that displaying both the original child elements as well slices will clutter the UI and is likely to confuse the user. Alternatively, displaying slices as following siblings (like they are defined in StructureDefinition) would require quite invasive and time-consuming changes in the application, and frankly that is not a feasible option at the moment. Some kind of toggle button that controls the visibility of the original child nodes might work, but I'm not fully convinced. I'll add an issue to our tracker and ponder on the UI.</p>



<a name="153818120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818120">(Mar 25 2016 at 18:26)</a>:</h4>
<p>When slicing an element, the discriminators determine (select) which slice definition applies to each instance of the element.  The definition is based on the fixed[x] value of each discriminator element OR (I think) a binding for the element.  See <a href="http://hl7-fhir.github.io/profiling.html#discriminator" target="_blank" title="http://hl7-fhir.github.io/profiling.html#discriminator">http://hl7-fhir.github.io/profiling.html#discriminator</a> paragraph 3.</p>
<p>This means that all other parts of the element definition are validation criteria for the slice.  In other words, a failure of a constraint on that element would NOT simply disqualify the instance as a member of the slice but would rather make the entire resource instance invalid.</p>
<p>Is this correct?</p>



<a name="153818123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818123">(Mar 25 2016 at 18:30)</a>:</h4>
<p>I ask this for 2 reasons:<br>
1. Clarify whether binding is a valid way to discriminate (I've heard both yes and no at various times).<br>
2. Clarify that constraint and all the other parts of elementdefinition really are not useful in slice discrimination.</p>
<p>We're running into all kinds of situations where a more sophisticated slicing discriminator would be valuable...</p>



<a name="153818127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818127">(Mar 25 2016 at 18:34)</a>:</h4>
<p>Especially min/max for range segmentation</p>



<a name="153818130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818130">(Mar 25 2016 at 19:01)</a>:</h4>
<p>Slicing doesn't require declaration of a computable discriminator - you can provide a description instead.  And if you do that, anything goes.  But validation becomes much more expensive.  As well, the discriminator can be @profile, which allows you to do all sorts of things</p>



<a name="153818131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818131">(Mar 25 2016 at 19:02)</a>:</h4>
<p>Is that clear in the section I referenced?  Shouldn't there be some line between "standard computable" and "wild west"?</p>



<a name="153818135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818135">(Mar 25 2016 at 19:12)</a>:</h4>
<p>The deliniation is "descriminator" vs. "description"</p>



<a name="153818136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818136">(Mar 25 2016 at 19:14)</a>:</h4>
<p>We don't talk too much about slicing without discriminators because that's not something we necessarily want to encourage, but we probably should beef up the description of when and why you might have slicing that doesn't list discriminators</p>



<a name="153818138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818138">(Mar 25 2016 at 19:16)</a>:</h4>
<p>So if it's "discriminator" then it MUST be fixed[x] or bound (assuming not @type/@profile).</p>



<a name="153818140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818140">(Mar 25 2016 at 19:36)</a>:</h4>
<p>If you have a discriminatory, you can slice by element fixed value, type (for a polymorphic element) and/or by profile.  You can only enforce bindings within profile.</p>



<a name="153818165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818165">(Mar 25 2016 at 21:59)</a>:</h4>
<p>Chris: Lloyd has made this difficult, I think. Yes, you can slice by fixed value, or required binding. And yes, errors outside the discriminator are validation errors, not slice mismatches</p>



<a name="153818174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818174">(Mar 25 2016 at 23:19)</a>:</h4>
<p>How can you slice by required binding without using profile or description?</p>



<a name="153818864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818864">(Mar 29 2016 at 15:56)</a>:</h4>
<p>Sounds like there's some...ambiguity.</p>



<a name="153818865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818865">(Mar 29 2016 at 16:00)</a>:</h4>
<p>I'm assuming limiting the parts of elementdefinition used for slice selection is to simplify implementation, yes?  @profile pretty much adds all that complexity back in though...  I'm going to propose that all parts of the element definition for a discriminator element within a named slice be part of the selection, not validation.  In other words, failure of any aspect of the discriminator element of a named slice simply means "this is not the slice you're looking for".  This enables much more rich slicing.  Thoughts?</p>



<a name="153818866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818866">(Mar 29 2016 at 16:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> </p>



<a name="153818867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818867">(Mar 29 2016 at 16:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> </p>



<a name="153818870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818870">(Mar 29 2016 at 16:06)</a>:</h4>
<p>Separate topic - now that name isn't for recursive things, does name need to be unique within the whole structure definition, or just within siblings?</p>
<p>Consider when a complex extension is used in multiple places in a SD.  If my complex extension has 3 sub-elements: type, code, and reference (these are all named slices of extension in this case), these names will appear in the SD in multiple places IF the SD further constrains them in some way.</p>
<p>I think uniqueness is already broken...</p>



<a name="153818871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818871">(Mar 29 2016 at 16:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> I remember that my collaegue Martijn Harthoorn has struggled with this last year. IIRC, having to validate the full element in order to determine the associated slice introduces all kinds of ambiguity and nasty recursive matching challenges. So in order for slicing to be implementable, he strongly suggests to limit the discriminator to a primitive value that is easy to match. This ensures that you can find the associated slice _before_ trying to validate the element.</p>



<a name="153818872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818872">(Mar 29 2016 at 16:09)</a>:</h4>
<p>That's fine IF we don't bother with @profile as a valid disciminator...</p>



<a name="153818873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818873">(Mar 29 2016 at 16:09)</a>:</h4>
<p>Adding that in brings the devil's details with it!</p>



<a name="153818874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818874">(Mar 29 2016 at 16:10)</a>:</h4>
<p>you can match on profile url, that's a primitive value</p>



<a name="153818875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818875">(Mar 29 2016 at 16:11)</a>:</h4>
<p>Only if you *only* consider meta.profile values which requires pre-coordination and tagging of all resources.</p>



<a name="153818876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818876">(Mar 29 2016 at 16:11)</a>:</h4>
<p>What about maxValue[x] and minValue[x] - that should be OK, no?</p>



<a name="153818877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818877">(Mar 29 2016 at 16:11)</a>:</h4>
<p>Ah so you are referring to resources that implicitly conform to a certain profile?</p>



<a name="153818878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818878">(Mar 29 2016 at 16:12)</a>:</h4>
<p>Right...we're currently implementing profile evaluation at a server level.  Basically, search by (previously not evaluated) profile.</p>



<a name="153818880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818880">(Mar 29 2016 at 16:13)</a>:</h4>
<p>Without this, new profiles are of limited value...</p>



<a name="153818881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818881">(Mar 29 2016 at 16:13)</a>:</h4>
<p>So matching a slice would require to find a matching profile on the fly? That seems very costly... how do you determine which candidate profiles you are going to try and match? All profiles that exist on the server?</p>



<a name="153818882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818882">(Mar 29 2016 at 16:13)</a>:</h4>
<p>I don't think Martijn is going to like this ;p</p>



<a name="153818883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818883">(Mar 29 2016 at 16:14)</a>:</h4>
<p>No...just the profile(s) used to discriminate.</p>



<a name="153818884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818884">(Mar 29 2016 at 16:16)</a>:</h4>
<p>We're using ElasticSearch which makes much of the profile validation relatively fast/cheap (fixed, range, binding).  Most of the constraints appear on the base HL7 defined profile, so those are always validated and don't need to be re-evaluated.  This leaves only new constraints to consider on a per-resource basis (and we try to limit/discourage these).</p>



<a name="153818885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818885">(Mar 29 2016 at 16:17)</a>:</h4>
<p>So, when I am onboarding my Cardiology dept and they define a new profile for cardiology-lab-observation with a limited binding on Observation.code, this can effectively be served by a search for code:in=cardiology-lab-vs</p>



<a name="153818886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818886">(Mar 29 2016 at 16:17)</a>:</h4>
<p>and _profile=Enterprise-Lab-Profile (to cover anything else fancy about labs).</p>



<a name="153818887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818887">(Mar 29 2016 at 16:33)</a>:</h4>
<p>Hmm, interesting. Don't you think this behavior is specific to your implementation? As in general, matching resources to profiles is a costly operation. So I am not sure if the FHIR standard should define this automagical profile matching as mandatory functionality...</p>



<a name="153818888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818888">(Mar 29 2016 at 16:34)</a>:</h4>
<p>No, I think this could be an option.  The "depth" of profile validation may be something to call out in conformance though.</p>



<a name="153818889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818889">(Mar 29 2016 at 16:35)</a>:</h4>
<p>Many implementation (esp facades) won't be able to do this efficiently enough to be practical.</p>



<a name="153818890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818890">(Mar 29 2016 at 16:36)</a>:</h4>
<p>Agreed, it would be useful to express support for this advanced behavior via a Conformance resource.</p>



<a name="153818891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818891">(Mar 29 2016 at 16:36)</a>:</h4>
<p>I'm interested in Martijn's work - where he found issues</p>



<a name="153818892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818892">(Mar 29 2016 at 16:37)</a>:</h4>
<p>I'm looking forward to discussing your proposal with Martijn Harthoorn ;p</p>



<a name="153818893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818893">(Mar 29 2016 at 16:37)</a>:</h4>
<p>We're pretty early in the process - mostly converting profiles into search criteria today.</p>



<a name="153818894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818894">(Mar 29 2016 at 16:39)</a>:</h4>
<p>I think Martijn tried to implement a very generic solution that could deal with any kind of profile / nested slicing construction etc - and gave up trying, as the possibilities seemed dizzying...</p>



<a name="153818908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818908">(Mar 29 2016 at 18:06)</a>:</h4>
<p>The benefit with profile is we already need to have code that tests whether a given instance is valid against a profile.  It's expensive code to run (and is a pain to write), but it has to exist.  And given that profile can do whatever's needed, it's hard to justify adding in another means of doing the same thing.  As well, if implementers are concerned about performance, they can mandate the declaration of particular profile ids in the instances and thus avoid the performance issues.  There'd be no similarly easy out if we opened up discriminator further.</p>



<a name="153818921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818921">(Mar 29 2016 at 19:28)</a>:</h4>
<p>firstly, name uniqueness, you might be right. I'll have to look at that to see whether I have any problems with uniqueness and navigation</p>



<a name="153818922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153818922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153818922">(Mar 29 2016 at 19:29)</a>:</h4>
<p>slicing, agree that slicing by profile is much more complex. It only really works if the profile itself is simple. otherwise, you might as well not define a discriminator</p>



<a name="153819381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819381">(Mar 31 2016 at 15:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> I've been mentally reviewing the options for slice selection and keep coming back to the necessity to evaluate every constraint (scalar or xpath/fluentpath) during validation <em>regardless</em> of whether it's used for selection or validation.  Is slice selection somehow more complex?</p>



<a name="153819394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819394">(Mar 31 2016 at 15:20)</a>:</h4>
<p>If the discriminator is declared, you just need to look at the discriminator to figure out what slice it is.  Then you test the constraints for that particular slice.  But you can ignore the constraints for all of the other slices.</p>



<a name="153819395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819395">(Mar 31 2016 at 15:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> I informed my colleague Martijn about this discussion topic. He's very busy atm, but hopefully he can find some time to chip in. From what I understand, the challenge is that in order to validate a slice in a resource instance, you need to match it to a slice definition in the profile  - but in this case, matching requires validation. This introduces a recursive dependency. Martijn can probably explain the issue in greater detail.</p>



<a name="153819396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819396">(Mar 31 2016 at 15:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> I'm considering challenging how it's currently working and trying to discern the complexities of what I'm proposing.</p>



<a name="153819397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819397">(Mar 31 2016 at 15:21)</a>:</h4>
<p>uh oh...</p>



<a name="153819398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819398">(Mar 31 2016 at 15:22)</a>:</h4>
<p>I'm just running into may use cases where fixed discriminator slices aren't adequate.  And there's no way to use extensions to get around this...</p>



<a name="153819399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819399">(Mar 31 2016 at 15:23)</a>:</h4>
<p>Big ones are range slicing and ordinal position slicing</p>



<a name="153819400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819400">(Mar 31 2016 at 15:24)</a>:</h4>
<p>And (even more!) slicing by binding/valueset</p>



<a name="153819401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819401">(Mar 31 2016 at 15:26)</a>:</h4>
<p>Interesting. Ordinal position slicing would seem so basic that you'd expect it would be covered by the standard. Maybe FHIR should define some rules for this specific case.</p>



<a name="153819402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819402">(Mar 31 2016 at 15:27)</a>:</h4>
<p>Right? :)</p>



<a name="153819403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819403">(Mar 31 2016 at 15:27)</a>:</h4>
<p>The other use cases don't seem too exotic either.</p>



<a name="153819404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819404">(Mar 31 2016 at 15:27)</a>:</h4>
<p>In those places where a fixed discriminator can't work, you can slice by profile, which then requires testing the instance against each profile or looking for the profile.  The former is expensive, the latter requires agreement of the submitter.  But it should meet your needs in either case, with the possible exception or slicing by position which you've already proposed.</p>



<a name="153819405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819405">(Mar 31 2016 at 15:30)</a>:</h4>
<p>Hmm...so create a type profile and use @profile to put all parts of elementdefinition into play...</p>



<a name="153819406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819406">(Mar 31 2016 at 15:30)</a>:</h4>
<p>ug...ok</p>



<a name="153819407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819407">(Mar 31 2016 at 15:31)</a>:</h4>
<p>makes so much of the semantics external to the SD itself....but makes some things re-useable</p>



<a name="153819408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819408">(Mar 31 2016 at 15:32)</a>:</h4>
<p>and implementer penetration is going to be, umm.... low? =)</p>



<a name="153819413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819413">(Mar 31 2016 at 15:36)</a>:</h4>
<p>Range slicing is also an interesting case. Maybe the discriminator could accept a FHIRPath expression? In it's most simple form this is an element path, but it would also allow for complex multi-field expressions. Just thinking out loud here.</p>



<a name="153819414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819414">(Mar 31 2016 at 15:37)</a>:</h4>
<p>Assuming that all the popular FHIR API libraries will (eventually) provide FHIR path support, this seems feasible.</p>



<a name="153819415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819415">(Mar 31 2016 at 15:40)</a>:</h4>
<p>I would like to keep a line between scalar evaluation and expression evaluation - the former being possible during stream parsing and the latter not so much.</p>



<a name="153819416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819416">(Mar 31 2016 at 15:41)</a>:</h4>
<p>Smart parsing of profiles though could retain that line...</p>



<a name="153819417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819417">(Mar 31 2016 at 15:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> So a discriminator of @type doesn't require looking at type.profile, just type.code where @profile looks at both?</p>



<a name="153819430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153819430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153819430">(Mar 31 2016 at 17:29)</a>:</h4>
<p>@profile incidentally ends up looking at both.  And yes, penetration will be "low" - but that's ok.  We'd like most uses of slicing to be straight-forward.  The more complex edge-case stuff ought to be less common.</p>



<a name="153822876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153822876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153822876">(Apr 22 2016 at 19:51)</a>:</h4>
<p>Assume a create a profile of CodeableConcept where I slice coding into LOINC and SNOMED by system.  I then use that type in an Encounter profile to add these slicings to Encounter.type:</p>
<div class="codehilite"><pre>&lt;element&gt;
    &lt;path value=&quot;Encounter.type&quot; /&gt;
    &lt;type&gt;
        &lt;code value=&quot;CodeableConcept&quot; /&gt;
        &lt;profile value=&quot;http://.../my-codeableconcept&quot; /&gt;
    &lt;/type&gt;
</pre></div>


<p>I then (in my Encounter profile) slice type into "Practice Type" and "Institution Type".  Do each of these slices now including coding slicings (for LOINC and SNOMED)?</p>



<a name="153822877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153822877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153822877">(Apr 22 2016 at 19:51)</a>:</h4>
<p>yes</p>



<a name="153822879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153822879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153822879">(Apr 22 2016 at 19:52)</a>:</h4>
<p>And would a snapshot be expected to include them?</p>



<a name="153824391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153824391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153824391">(May 03 2016 at 22:05)</a>:</h4>
<p>Is there a way to slice a BackboneElement (e.g. Patient.contact) by @profile?  For instance, slice Patient.contact by relationship in a valueset.  Since backbone element don't have their own SDs, there's no way to create a profile for just contact, correct?</p>



<a name="153824392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153824392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153824392">(May 03 2016 at 22:06)</a>:</h4>
<p>yes you have to enter the profile at the root of the resource, but you don't need yo say anything about the elements other than Patient.contact</p>



<a name="153824395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153824395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153824395">(May 03 2016 at 22:15)</a>:</h4>
<p>So the contact tag will be evaluated for conformance against a whole Patient profile? That's...confusing....</p>



<a name="153824396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153824396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153824396">(May 03 2016 at 22:16)</a>:</h4>
<p>But not unusable....</p>



<a name="153828117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153828117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153828117">(May 17 2016 at 08:21)</a>:</h4>
<p>I'm trying to slice something by type, but cannot seem to get it to work on observation.  Anyone here have any words of wisdom.  The error I'm getting is: Attempt to a slice an element that does not repeat: Observation.value[x]/null from <a href="http://hl7.org/fhir/StructureDefinition/CodeableConcept" target="_blank" title="http://hl7.org/fhir/StructureDefinition/CodeableConcept">http://hl7.org/fhir/StructureDefinition/CodeableConcept</a> but my use of value[x] only includes Quantity | string.</p>



<a name="153828135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153828135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153828135">(May 17 2016 at 13:24)</a>:</h4>
<p>Keith - what tool are you using?</p>



<a name="153828140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153828140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153828140">(May 17 2016 at 13:47)</a>:</h4>
<p>Using the spreadsheet.</p>



<a name="153828395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153828395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153828395">(May 18 2016 at 03:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191387">@Keith Boone</span>  "Attempt to a slice an element that does not repeat" is not possible. Slicing is done on element that may occur more than once.  You define the type as valueQuantity.</p>



<a name="153828436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153828436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153828436">(May 18 2016 at 13:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> That's not true actually.  You can also slice when an element has a choice of types.</p>



<a name="153828440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153828440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153828440">(May 18 2016 at 13:43)</a>:</h4>
<p>Ah yes ... my mistake.</p>



<a name="153828441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153828441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153828441">(May 18 2016 at 14:08)</a>:</h4>
<p>This is a "2 ways to do something" situation.  Why would we not just use the type named element for this?  It's very ambiguous.</p>



<a name="153828468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153828468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153828468">(May 18 2016 at 18:06)</a>:</h4>
<p>might not have a single type?</p>



<a name="153828469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153828469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153828469">(May 18 2016 at 18:08)</a>:</h4>
<p>Yes, I suppose you could create slices for multiple types...huh.</p>



<a name="153921640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153921640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153921640">(Nov 27 2017 at 13:02)</a>:</h4>
<p>Hi all, what if I have to slice the element  'identifier'  and do not know the total number of slices? Thank you</p>



<a name="153921650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153921650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153921650">(Nov 27 2017 at 14:33)</a>:</h4>
<p>Just define the slices you care about.  Others can define additional slices and it's fine if there is space that remains unsliced.</p>



<a name="153921759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153921759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153921759">(Nov 28 2017 at 06:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I did not understand. Can you elaborate?</p>



<a name="153921801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153921801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153921801">(Nov 28 2017 at 10:42)</a>:</h4>
<p><span class="user-mention" data-user-id="193568">@Pranitha Sruthi</span>  just slice the identifier element as many times af you can / want to specifiy this element. Leave the slicing.orderd on  'open' or  'openAtEnd' so it is possible to add additional identifiers you don't specify in your profile.</p>



<a name="153921802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/153921802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#153921802">(Nov 28 2017 at 10:45)</a>:</h4>
<p><span class="user-mention" data-user-id="192301">@Ardon Toonstra</span>  Ok thank you</p>



<a name="178400878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/178400878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#178400878">(Oct 17 2019 at 17:04)</a>:</h4>
<p>HI <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I am trying to understand how to do slices in the spreadsheet. To understand this, I am using practitioner profile example, having multiple identifiers for practitioner (provider number, license number) and trying to show then as slices. I want to slice it on Practitioner.identifier.type (whose fixed code values are 'PN','LN'). Please let me know <a href="/user_uploads/10155/TBYgufChiRhyZkJcL3WpEQxQ/Capture.PNG" target="_blank" title="Capture.PNG">Capture.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/TBYgufChiRhyZkJcL3WpEQxQ/Capture.PNG" target="_blank" title="Capture.PNG"><img src="/user_uploads/10155/TBYgufChiRhyZkJcL3WpEQxQ/Capture.PNG"></a></div>



<a name="178402159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/178402159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#178402159">(Oct 17 2019 at 17:21)</a>:</h4>
<p>You need to declare a discriminator on the first repetition column (discriminator column) which should be type.@pattern.  Your patterns need to be in the pattern column, not the value column.  And you need to put a name in the profile name for your two subsequent identifier repetitions to name your slices</p>



<a name="178403159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/178403159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#178403159">(Oct 17 2019 at 17:34)</a>:</h4>
<p>Perfect! Works now :) Thanks Lloyd. However, I don't understand the role of 'Profile Name' column here, since we have mentioned in Discriminator column how to distinguish the slices (pattern column has the appropriate code to differentiate between slices)..</p>



<a name="178404613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/178404613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#178404613">(Oct 17 2019 at 17:50)</a>:</h4>
<p>Also, what will be the 'Discriminator' if I want to slice it for example on practitioner.identifier.use (which has 'code' type)? just trying to understand different discriminator types..</p>



<a name="178405020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/178405020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#178405020">(Oct 17 2019 at 17:54)</a>:</h4>
<p>Every slice needs to have a name.  That name is used to establish a unique id for the slicing element and descendant elements.  It can also be referenced in child profiles if re-slicing the element.</p>



<a name="178405058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/178405058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#178405058">(Oct 17 2019 at 17:55)</a>:</h4>
<p>If you're slicing on code, you generally slice by value, not pattern, so just strip off the ".@pattern" from the end.  (Slicing by value is the default.)</p>



<a name="178405790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/178405790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#178405790">(Oct 17 2019 at 18:03)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  makes perfect sense!</p>



<a name="178427948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/178427948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#178427948">(Oct 17 2019 at 22:32)</a>:</h4>
<p>Slicing often doesn't, so that's awesome :)</p>



<a name="179073564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179073564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179073564">(Oct 25 2019 at 17:56)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I am trying to have a contained resource (consent) in immunization profile, can you let me know how to do that in spreadsheet?</p>



<a name="179074062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179074062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179074062">(Oct 25 2019 at 18:01)</a>:</h4>
<p>Look at the example in the <a href="https://github.com/fhir/sample-ig" target="_blank" title="https://github.com/fhir/sample-ig">https://github.com/fhir/sample-ig</a>.  Also, the first page of the spread points to a wiki page that provides some documentation</p>



<a name="179080000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179080000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179080000">(Oct 25 2019 at 19:11)</a>:</h4>
<p>umm, I am still unsure how to do document another resource as 'Contained' in the profile. If consent is contained in immunization profile, what will be the element name, for example immunization.consent. (I couldn't find an example in IG documentation and also in IG sample..) Also what should be the value in 'Type' column, since it's another resource will it be something like this Contained(Consent)?? am I missing something?</p>



<a name="179085021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179085021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179085021">(Oct 25 2019 at 20:13)</a>:</h4>
<p>In the referencing element, populate the 'aggregation' property with 'contained.</p>



<a name="179085079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179085079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179085079">(Oct 25 2019 at 20:14)</a>:</h4>
<p>Type would be Reference(Consent)</p>



<a name="179087408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179087408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179087408">(Oct 25 2019 at 20:43)</a>:</h4>
<p>How do I reflect contained aggregation property? I have attached the snapshot as well. My apologies if it's too basic, but I am hearing this aggregation property for the first time.. <a href="/user_uploads/10155/QSqi3FHkq0b-YD1BLPXyr9-C/Capture.PNG" target="_blank" title="Capture.PNG">Capture.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/QSqi3FHkq0b-YD1BLPXyr9-C/Capture.PNG" target="_blank" title="Capture.PNG"><img src="/user_uploads/10155/QSqi3FHkq0b-YD1BLPXyr9-C/Capture.PNG"></a></div>



<a name="179093396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179093396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179093396">(Oct 25 2019 at 22:10)</a>:</h4>
<p>Ah.  Aggregations in spreadsheet is actually pretty advanced.  Instructions for everything are here: <a href="https://wiki.hl7.org/w/index.php?title=FHIR_Spreadsheet_Authoring#Element_Definition_Columns" target="_blank" title="https://wiki.hl7.org/w/index.php?title=FHIR_Spreadsheet_Authoring#Element_Definition_Columns">https://wiki.hl7.org/w/index.php?title=FHIR_Spreadsheet_Authoring#Element_Definition_Columns</a></p>



<a name="179093405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179093405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179093405">(Oct 25 2019 at 22:10)</a>:</h4>
<p>so in this case, it would be <code>Reference(Consent) &lt;contained&gt;</code></p>



<a name="179095522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179095522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179095522">(Oct 25 2019 at 22:47)</a>:</h4>
<p>Okay Thanks! and Element will be like 'Consent.Identifier' and not Immunization.Consent.identifier, right?</p>



<a name="179095579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179095579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179095579">(Oct 25 2019 at 22:48)</a>:</h4>
<p>Right</p>



<a name="179095620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179095620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179095620">(Oct 25 2019 at 22:49)</a>:</h4>
<p>There's still something wrong, it breaks my profile <a href="/user_uploads/10155/j9B2zzYBqutoz2VnL-ugbfXG/Capture.PNG" target="_blank" title="Capture.PNG">Capture.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/j9B2zzYBqutoz2VnL-ugbfXG/Capture.PNG" target="_blank" title="Capture.PNG"><img src="/user_uploads/10155/j9B2zzYBqutoz2VnL-ugbfXG/Capture.PNG"></a></div>



<a name="179095709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179095709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179095709">(Oct 25 2019 at 22:51)</a>:</h4>
<p><a href="/user_uploads/10155/cFEV2WO4acYh6x8VvhJmdlz6/Capture.PNG" target="_blank" title="Capture.PNG">Capture.PNG</a>  Am I missing something? Problem is publisher doesn't tell me the error message, it doesn't even fail (it just breaks the profile),,</p>
<div class="message_inline_image"><a href="/user_uploads/10155/cFEV2WO4acYh6x8VvhJmdlz6/Capture.PNG" target="_blank" title="Capture.PNG"><img src="/user_uploads/10155/cFEV2WO4acYh6x8VvhJmdlz6/Capture.PNG"></a></div>



<a name="179096076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179096076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179096076">(Oct 25 2019 at 22:58)</a>:</h4>
<p>do you have a working example spreadsheet for the contained resource in a profile?</p>



<a name="179106755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179106755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179106755">(Oct 26 2019 at 03:27)</a>:</h4>
<p>Why are you defining things that aren't references as a reference?  I'm surprised that your publisher is publishing at all...</p>



<a name="179106759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179106759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179106759">(Oct 26 2019 at 03:27)</a>:</h4>
<p>You're going to have one profile for Immunization and a different profile for Consent</p>



<a name="179106805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179106805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179106805">(Oct 26 2019 at 03:28)</a>:</h4>
<p>The element in your Immunization profile will be of type <code>Reference(Consent) {http://.....yourconsentprofile} &lt;contained&gt;</code>, pointing to your Consent profile</p>



<a name="179106808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179106808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179106808">(Oct 26 2019 at 03:28)</a>:</h4>
<p>One profile can only ever contain elements from a single resource.</p>



<a name="179251841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179251841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179251841">(Oct 28 2019 at 17:01)</a>:</h4>
<p>the reason I was thinking the resource (Consent) will be contained and will be in the same profile (Immunization) is because immunization profile doesn't have any element which will be referencing to Consent and there is no enough information about consent.. That makes sense there will be 2 profiles, however It's still confusing for me which element in immunization profile will be referencing to Consent profile ('Element' column)?</p>



<a name="179252572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179252572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179252572">(Oct 28 2019 at 17:09)</a>:</h4>
<p>Every resource needs its own profile.  You can't have a contained resource unless the containing resource points to the contained resource or vice versa.  And if you want to enforce a profile on the contained resource, the container needs to point to contained</p>



<a name="179603466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179603466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aleksi Aho <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179603466">(Nov 01 2019 at 06:34)</a>:</h4>
<p>Hello, I have question about slicing. I would like to have two slices in meta.profile. In the first slice  I have fixed value for profile, and for the second slice I would like to be "open". I mean no fixed values or no bindings etc. Is this possible to do?</p>



<a name="179623287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179623287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179623287">(Nov 01 2019 at 12:58)</a>:</h4>
<p>What you actually want <span class="user-mention" data-user-id="222926">@Aleksi Aho</span> is to have "open" slicing (which is the default) and declare a single slice with a fixed value.  You can then declare a 'default' slice that applies to everything else, or you can have no additional slices, in which case the rules for all other profile repetitions are just the rules you've set for the element as a whole</p>



<a name="179850264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179850264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aleksi Aho <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179850264">(Nov 04 2019 at 16:43)</a>:</h4>
<p>Okay. How should I use discriminator, or what should be  discriminator? I keep getting message that my element match more than one slice when I'm trying to save resource against the profile.</p>



<a name="179850654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/179850654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#179850654">(Nov 04 2019 at 16:47)</a>:</h4>
<p>$this, I believe</p>



<a name="180551747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180551747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180551747">(Nov 12 2019 at 19:27)</a>:</h4>
<p>HI <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I am doing slicing on Provenance.agent to indicate who are the author, custodian, etc.. For some reason it's not liking my slices and profile not showing up. Can you please have a look and let me know if you see any error. Pattern column has these values:<br>
{"coding":[{"system":"<a href="http://terminology.hl7.org/CodeSystem/provenance-participant-type" target="_blank" title="http://terminology.hl7.org/CodeSystem/provenance-participant-type">http://terminology.hl7.org/CodeSystem/provenance-participant-type</a>", "code":"author"}]} <br>
{"coding":[{"system": "<a href="http://terminology.hl7.org/CodeSystem/provenance-participant-type" target="_blank" title="http://terminology.hl7.org/CodeSystem/provenance-participant-type">http://terminology.hl7.org/CodeSystem/provenance-participant-type</a>", "code": "informant"}]}<br>
<a href="/user_uploads/10155/NEMQaSX_JpfwCeU5VNUH-cxc/Capture.PNG" target="_blank" title="Capture.PNG">Capture.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/NEMQaSX_JpfwCeU5VNUH-cxc/Capture.PNG" target="_blank" title="Capture.PNG"><img src="/user_uploads/10155/NEMQaSX_JpfwCeU5VNUH-cxc/Capture.PNG"></a></div>



<a name="180553639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180553639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180553639">(Nov 12 2019 at 19:45)</a>:</h4>
<p>Nothing looks obviously wrong.  What error messages are you getting?</p>



<a name="180555309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180555309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180555309">(Nov 12 2019 at 20:03)</a>:</h4>
<p>it doesn't state any explicit error, it just doesn't show anything.<br>
<a href="/user_uploads/10155/lHmBSp0ZppCLzntR8i4w5rMW/Capture.PNG" target="_blank" title="Capture.PNG">Capture.PNG</a> <br>
It's so weird when i remove the slice, it displays fine...</p>
<div class="message_inline_image"><a href="/user_uploads/10155/lHmBSp0ZppCLzntR8i4w5rMW/Capture.PNG" target="_blank" title="Capture.PNG"><img src="/user_uploads/10155/lHmBSp0ZppCLzntR8i4w5rMW/Capture.PNG"></a></div>



<a name="180561563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180561563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180561563">(Nov 12 2019 at 21:03)</a>:</h4>
<p>Are you checking the validation.html?  Anything in the console log during the build process?</p>



<a name="180565561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180565561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180565561">(Nov 12 2019 at 21:45)</a>:</h4>
<p>Yes, checked I don't see anything, except I see one message related to this profile (which I am  unsure of.. java code not generated for this profile) It appears even if I dont' have slicing in the profile, so I am not sure if it's related..<br>
<a href="/user_uploads/10155/FFKnBCH_2iDfeKz4bw1QtutZ/Capture.PNG" target="_blank" title="Capture.PNG">Capture.PNG</a><br>
 It's weird coz I have added slices the same way in other profiles and they render fine. Will you be able to look at the  spreadsheet?</p>
<div class="message_inline_image"><a href="/user_uploads/10155/FFKnBCH_2iDfeKz4bw1QtutZ/Capture.PNG" target="_blank" title="Capture.PNG"><img src="/user_uploads/10155/FFKnBCH_2iDfeKz4bw1QtutZ/Capture.PNG"></a></div>



<a name="180570056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180570056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180570056">(Nov 12 2019 at 22:40)</a>:</h4>
<p>And qa.html is clean?</p>



<a name="180682491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180682491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180682491">(Nov 13 2019 at 22:55)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  is there any version update I have to do on my end, I am getting version error while publishing:<br>
<a href="/user_uploads/10155/7yrFBxClVjRNRW41-V21xMBJ/Capture.PNG" target="_blank" title="Capture.PNG">Capture.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/7yrFBxClVjRNRW41-V21xMBJ/Capture.PNG" target="_blank" title="Capture.PNG"><img src="/user_uploads/10155/7yrFBxClVjRNRW41-V21xMBJ/Capture.PNG"></a></div>



<a name="180682715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180682715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180682715">(Nov 13 2019 at 22:58)</a>:</h4>
<p>Also I have deleted the slicing profile to make sure that's not causing any problem..</p>



<a name="180682763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180682763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180682763">(Nov 13 2019 at 22:59)</a>:</h4>
<p>That sounds like you're not using the latest &amp; greatest IG publisher.  You need one from the last 1.5 weeks - and in practice you want the one that was published today.</p>



<a name="180684368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180684368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180684368">(Nov 13 2019 at 23:22)</a>:</h4>
<p>Thanks that resolves it!</p>



<a name="180779124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180779124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180779124">(Nov 14 2019 at 21:51)</a>:</h4>
<p>For the slicing issue I mentioned before, I see this error in StructureDefinition-prov-profile-validation.html file:<br>
{% raw %}&lt;table class="grid"&gt;<br>
&lt;tr&gt;&lt;td&gt;&lt;b&gt;Level&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Type&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Location&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Message&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;&lt;td&gt;error&lt;/td&gt;&lt;td&gt;invariant&lt;/td&gt;&lt;td&gt;StructureDefinition/prov-profile: StructureDefinition.differential&lt;/td&gt;&lt;td&gt;sdf-8a: In any differential, all the elements must start with the StructureDefinition's specified type for non-logical models, or with the same type name for logical models [((%resource.kind = 'logical') or element.first().path.startsWith(%resource.type)) and (element.tail().empty() or element.tail().all(path.startsWith(%resource.differential.element.first().path.replaceMatches('\\..*', '') &amp; '.')))]&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;&lt;td&gt;warning&lt;/td&gt;&lt;td&gt;invariant&lt;/td&gt;&lt;td&gt;StructureDefinition/prov-profile: StructureDefinition&lt;/td&gt;&lt;td&gt;sdf-0: Name should be usable as an identifier for the module by machine processing applications such as code generation [name.matches('<a href="http://[A-Za-z0-9_]" target="_blank" title="http://[A-Za-z0-9_]">A-Z</a>{0,254}')]&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;<br>
&lt;/table&gt;<br>
{%  %}</p>



<a name="180786767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180786767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180786767">(Nov 14 2019 at 23:18)</a>:</h4>
<p>hmm so confused, it seems to give an error now in IG Publisher:<br>
<a href="/user_uploads/10155/oTZPVSp5_PCEjKhbg2TJUJh5/Capture.PNG" target="_blank" title="Capture.PNG">Capture.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/oTZPVSp5_PCEjKhbg2TJUJh5/Capture.PNG" target="_blank" title="Capture.PNG"><img src="/user_uploads/10155/oTZPVSp5_PCEjKhbg2TJUJh5/Capture.PNG"></a></div>



<a name="180786825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180786825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180786825">(Nov 14 2019 at 23:19)</a>:</h4>
<p>any idea what's this related to <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> ?</p>



<a name="180786940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180786940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180786940">(Nov 14 2019 at 23:21)</a>:</h4>
<p>As an example, if you're creating a profile on Observation, every element in your profile must start with "Observation." (unless it's the root element, in which case it can be just "Observation".)</p>



<a name="180787287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/180787287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#180787287">(Nov 14 2019 at 23:26)</a>:</h4>
<p>uhhh found the root cause - spelling error Provence. Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> :)</p>



<a name="183313259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/183313259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#183313259">(Dec 12 2019 at 23:16)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  we need to have different addresses in our patient profile (for example - home, work, temp, old, etc - which is basically denoted by address.use element). Will this has to be achieved through slicing or is it possible to not slice address and just repeat the address multiple times (I am just trying to understand the slicing concept)..</p>



<a name="183313647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/183313647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#183313647">(Dec 12 2019 at 23:22)</a>:</h4>
<p>In the instance, you just repeat the address multiple times declaring the desired type for each repetition.  If you're trying to define what's <em>allowed</em> and you have different requirements for each type (e.g. must be one work, old addresses must specify end date, etc.) then slicing allows you to define different expectations for addresses with different types.  If you don't have different rules, just leave address as 0..* and allow all the types and let implementers send what they have.</p>



<a name="183315010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/183315010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#183315010">(Dec 12 2019 at 23:47)</a>:</h4>
<p>Thanks for the clarification!</p>



<a name="183806747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/183806747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#183806747">(Dec 19 2019 at 01:02)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  can a slice be marked as 'must-support'?</p>



<a name="183807573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/183807573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#183807573">(Dec 19 2019 at 01:22)</a>:</h4>
<p>Yes.<br>
We do it in <a href="https://github.com/AuDigitalHealth/ci-fhir-stu3/blob/master/output/SharedMedicinesList/StructureDefinition-composition-sml-prac-1.xml" target="_blank" title="https://github.com/AuDigitalHealth/ci-fhir-stu3/blob/master/output/SharedMedicinesList/StructureDefinition-composition-sml-prac-1.xml">https://github.com/AuDigitalHealth/ci-fhir-stu3/blob/master/output/SharedMedicinesList/StructureDefinition-composition-sml-prac-1.xml</a> from <a href="https://github.com/AuDigitalHealth/ci-fhir-stu3/tree/master/output/SharedMedicinesList" target="_blank" title="https://github.com/AuDigitalHealth/ci-fhir-stu3/tree/master/output/SharedMedicinesList">https://github.com/AuDigitalHealth/ci-fhir-stu3/tree/master/output/SharedMedicinesList</a></p>



<a name="183875785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/183875785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#183875785">(Dec 19 2019 at 19:15)</a>:</h4>
<p>Thanks!</p>



<a name="185102355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185102355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Liam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185102355">(Jan 08 2020 at 11:54)</a>:</h4>
<p>Hi,<br>
I am new to FHIR and having difficulty in understanding slicing.<br>
What is difference between Slicing and applying constraints.<br>
Basically its same thing.<br>
Is my understanding correct?<br>
Thanks</p>



<a name="185125090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185125090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185125090">(Jan 08 2020 at 15:45)</a>:</h4>
<p>slicing is important where in a Resource there is an element which is a list of various kinds of data. slicing allows you in one profile (StructureDefinition) to indicate that you are requiring a variety of things. Such as, in this Resource blah element you must specify atleast ONE of these, and up-to-TWO of these, and none of these. where these are all variations of list elements.   among other functionality...<br>
slicing is powerful, but hard to grasp initially.</p>



<a name="185128577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185128577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185128577">(Jan 08 2020 at 16:15)</a>:</h4>
<p>Slicing is a type of constraint, but it's a constraint where different rules apply to different repetitions - typically based on some difference between the repetitions.  So, for example, if you slice <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a> by use, you could have one set of constraints on names with a use of 'official' and a different set of constraints on names with a use of 'usual'.  It might be possible to express all of your slicing rules using the 'constraint' mechanism, but some of them would get incredibly complex and very hard to read/understand.  Once you know what slicing is, reading slicing in a resource table is pretty straight-forward.</p>



<a name="185142812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185142812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185142812">(Jan 08 2020 at 18:39)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  we have 3 different source systems with specific business requirements and constraints on current (home), mailing and old address. We are trying to have these 3 slices, but wondering how to slice it and on which address element (either its Address.use or Address.type?)  slicing needs to be done.<br>
Current address – Address.use &gt;home<br>
Old address – Address.use &gt;old<br>
Mailing address – use may not be appropriate here, since use can be home, work, temp, etc…</p>



<a name="185145904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185145904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185145904">(Jan 08 2020 at 19:09)</a>:</h4>
<p>Sounds like you may need to slice by both.  Are home and old both expected to be physical addresses?</p>



<a name="185146205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185146205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185146205">(Jan 08 2020 at 19:12)</a>:</h4>
<p>Is it possible to slice by use and type? Home is expected to be physical address whereas old may be  physical or not..</p>



<a name="185149282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185149282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185149282">(Jan 08 2020 at 19:43)</a>:</h4>
<p>Yes, you can have multiple discriminators when you slice.</p>



<a name="185149330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185149330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185149330">(Jan 08 2020 at 19:44)</a>:</h4>
<p>If old can be mailing, does that take precedence over mailing?</p>



<a name="185156639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185156639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185156639">(Jan 08 2020 at 21:05)</a>:</h4>
<p>If old can be mailing, does that take precedence over mailing? Nope (For 'old' slice there is a possibility that  source systems might not indicate if address is postal or physical, they just sit in Address history).</p>
<p>When you say multiple discriminators, will it be something like sub-slicing or Re-slicing?</p>



<a name="185167551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185167551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185167551">(Jan 08 2020 at 23:06)</a>:</h4>
<p>No.  re-slicing is when a derived profile slices something that was already sliced.  Multiple discriminators just means that when you declare slicing on the root element, you list multiple discriminators rather than just one.</p>



<a name="185182717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185182717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Liam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185182717">(Jan 09 2020 at 04:29)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> and <span class="user-mention" data-user-id="191404">@John Moehrke</span> <br>
One more thing by seeing actual FHIR Resource (Data not the structure definition) is there any option to know whether slicing has been done or not ?</p>



<a name="185183067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185183067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185183067">(Jan 09 2020 at 04:40)</a>:</h4>
<p>In a resource instance, there's no such thing a slicing.  Slicing is about the rules, not the content.  I might have rules that say "There must be one home phone number and no more than 5 addresses", and use slicing to define those rules.  But in the instance, I'll just have a Patient with a certain number of telecom instances - and that Patient will either comply with the rules or not.</p>



<a name="185293778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185293778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185293778">(Jan 10 2020 at 09:25)</a>:</h4>
<p>Hi,<br>
Suppose the extension of Observation is sliced to add two more elements(One with URL and ValueReference and other with URL and ValueString).<br>
The mapping is one to many.<br>
My question is even after extension is sliced can we add more elements in the extension other than tha above two?</p>
<p>Thanks</p>



<a name="185321799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185321799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185321799">(Jan 10 2020 at 15:50)</a>:</h4>
<p>You're not really adding more elements.  The 'extension' element is already there.  In your profile, you're using slicing to set expectations around the cardinality or other constraints of extension repetitions that happen to have particular URLs.  So long as the slicing was 'open', subsequent profiles are free to define additional slices.  (And in general, slicing should generally be 'open')</p>



<a name="185464760"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185464760" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185464760">(Jan 13 2020 at 04:47)</a>:</h4>
<p>In the profile, Yes we can add if it is 'open' . But while adding in the data it shouldn't be allowed right ?</p>



<a name="185465311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185465311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185465311">(Jan 13 2020 at 05:04)</a>:</h4>
<p>I'm not understanding the question</p>



<a name="185465430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185465430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185465430">(Jan 13 2020 at 05:09)</a>:</h4>
<blockquote>
<p>Hi,<br>
Suppose the extension of Observation is sliced to add two more elements(One with URL and ValueReference and other with URL and ValueString).<br>
The mapping is one to many.<br>
My question is even after extension is sliced can we add more elements in the extension other than the above two?</p>
<p>Thanks</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <br>
I asked this question with reference to the actual FHIR JSON(not the profile).<br>
It might sound silly but wanted to clarify.</p>



<a name="185471400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185471400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185471400">(Jan 13 2020 at 07:52)</a>:</h4>
<p>If slicing of an element is 'open', then any derived profile is free to add additional slices.</p>



<a name="185540994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185540994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185540994">(Jan 13 2020 at 21:43)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> If I am slicing address on 2 address elements i.e. use and type, does that mean for all the address slices there is a need to specify value for both - Address.use and Address.type? for example - 'Work' slice Address.use is work however I don't want to specify any specific value for Address.type (since it can be postal or physical or both), is that okay to leave it blank?</p>



<a name="185543672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185543672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185543672">(Jan 13 2020 at 22:13)</a>:</h4>
<p>Common practice is to specify either a value or a value set for both.  I'm not sure what happens if you leave one of the discriminators unconstrained.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - is that allowed?</p>



<a name="185544297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185544297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185544297">(Jan 13 2020 at 22:20)</a>:</h4>
<p>it's ok to say nothing about one of the discriminators as long as the other values provide distinctness</p>



<a name="185545126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185545126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185545126">(Jan 13 2020 at 22:29)</a>:</h4>
<p>Thanks!</p>



<a name="185632828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185632828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep Dhanoa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185632828">(Jan 14 2020 at 19:48)</a>:</h4>
<p>Hey Lloyd, in the address slice we are trying to bind address.type to physical and both. It's not rendering properly:<br>
Bindings tab:<br>
<a href="/user_uploads/10155/k4aCYqoVQWYzja81g_hzz4tX/Capture.PNG" target="_blank" title="Capture.PNG">Capture.PNG</a><br>
physical-both is the tab name in spreadsheet, where I am specifying the value-sets<br>
<a href="/user_uploads/10155/rqHTaHGv9IXS5ezm_Vp_L5of/Capture1.PNG" target="_blank" title="Capture1.PNG">Capture1.PNG</a> <br>
Am I missing something?</p>
<div class="message_inline_image"><a href="/user_uploads/10155/k4aCYqoVQWYzja81g_hzz4tX/Capture.PNG" target="_blank" title="Capture.PNG"><img src="/user_uploads/10155/k4aCYqoVQWYzja81g_hzz4tX/Capture.PNG"></a></div><div class="message_inline_image"><a href="/user_uploads/10155/rqHTaHGv9IXS5ezm_Vp_L5of/Capture1.PNG" target="_blank" title="Capture1.PNG"><img src="/user_uploads/10155/rqHTaHGv9IXS5ezm_Vp_L5of/Capture1.PNG"></a></div>



<a name="185642333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185642333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185642333">(Jan 14 2020 at 21:28)</a>:</h4>
<p>Code lists in the spreadsheet are probably not well supported right now and are eventually likely to be deprecated.  You really should be authoring a proper ValueSet instance and CodeSystem instance.</p>



<a name="185785254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185785254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185785254">(Jan 16 2020 at 04:38)</a>:</h4>
<p>I was dealing with one of the Observation Structure Definition in which I came across below thing :<br>
 "id" : "Observation.extension",<br>
        "path" : "Observation.extension",<br>
        "slicing" : {<br>
          "discriminator" : [<br>
            {<br>
              "type" : "value",<br>
              "path" : "url"<br>
            }<br>
          ]</p>
<p>Can someone help me out on what does here "type" and "url" means.</p>
<p>Thanks</p>



<a name="185785427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/185785427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#185785427">(Jan 16 2020 at 04:42)</a>:</h4>
<p>It means that extension is being sliced by the value of the URL element.  I.e. you know what the rules for the extension are because each extension has a fixed URL value.</p>



<a name="198060361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/198060361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Katarina <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#198060361">(May 19 2020 at 12:52)</a>:</h4>
<p>Hi,</p>
<p>I do slicing by type.coding.system(Value). Is this different to slicing by type.coding.code(Value) and then slice again  type.coding by system(Value)?</p>



<a name="198082754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/198082754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#198082754">(May 19 2020 at 15:25)</a>:</h4>
<p>Normally if slicing by code, you'll have to use both system and value as a discriminator.  However, it's easier (and slightly better) to slice with a discriminator with type 'pattern' and a path of type.coding or even a path of type.</p>



<a name="205808280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/205808280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kailash <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#205808280">(Aug 03 2020 at 15:29)</a>:</h4>
<p>For an example take Organization.type(STU3), which has example binding to HL7 valueset and i want to use my custom value set instead, so I has sliced Organization.type based on the value of coding.system and bind my custom value set to one of the slice. In this case, Is the constraints (Custom value set) defined for a slice overrule the constraints defined on sliced element(HL7 value Set)?or has higher precedence?</p>



<a name="205837289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/205837289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#205837289">(Aug 03 2020 at 19:31)</a>:</h4>
<p>If it's an example binding, it's simplest to just declare your own binding and override the example one.  (You can do that for either example or preferred bindings.)  For required or extensible bindings, you can also override, but the newly bound value set must comply with the base binding)</p>



<a name="205866998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/205866998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kailash <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#205866998">(Aug 04 2020 at 02:19)</a>:</h4>
<p>Thanks, but question is about precedence, what if there is conflict between constraints on sliced element and slice ? <br>
take same example, i want to use two diff value sets, one on Organization.type(sliced element) and another on Organization.type:slicename(slice). Does this mean that the value set bind with Organization.type will be applicable to none slice repetitions(if open at end) and binding to slice will be applicable to slice repetition only? and in this case slice constraints(binding) will ignore sliced element constraints(binding).</p>



<a name="205869443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/205869443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#205869443">(Aug 04 2020 at 03:08)</a>:</h4>
<p>You can't slice Organization.type - you can only slice Organization.type.coding.  The binding on type says "one of these codings must/should/may adhere to this value set" (depending on the strength of the binding.  Bindings on your slices just make assertions about additional codings.</p>



<a name="205869460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/205869460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#205869460">(Aug 04 2020 at 03:09)</a>:</h4>
<p>If you define mandatory slices and also have a required or extensible binding on the overall CodeableConcept, the instance must have Codings that match <em>all</em> of the requirements.</p>



<a name="205878179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/205878179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kailash <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#205878179">(Aug 04 2020 at 06:55)</a>:</h4>
<p>means, every repeat(whether it is part of slice or not) should confirmed base element(element which is sliced) constraints.</p>



<a name="205923076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/205923076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#205923076">(Aug 04 2020 at 15:39)</a>:</h4>
<p>I don't understand that sentence.  The binding on a CodeableConcept says that <em>one</em> Coding needs to meet the binding.  And defining slices generally also means that <em>one</em> Coding needs to meet the slice binding.</p>



<a name="213909805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/213909805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> sandhya kodimala <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#213909805">(Oct 20 2020 at 12:17)</a>:</h4>
<p>I am trying to slice an element based on its value.  I am unable to find any examples how to do slicing in Java.  Does anyone did slicing using java FHIR API?  Thanks in advance.</p>



<a name="213929216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/213929216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#213929216">(Oct 20 2020 at 14:42)</a>:</h4>
<p>If this is a question about the HAPI FHIR server, you may get a quicker answer on the <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a> channel...</p>



<a name="216380498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/216380498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shahim Essaid <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#216380498">(Nov 11 2020 at 18:19)</a>:</h4>
<p>I'm struggling with some slicing issues in a profile but before I create too much noise here I'd like confirm one aspect first.  I'm also reading through few threads here before asking for more help but a yes/no answer to the following will probably resolve some issues. I'm also assuming it's okay to add my question to this thread. I'll move this to a new thread if that helps.</p>
<p>Let's say I'm slicing Observation.component, can I have two slicings on it in the same profile?</p>
<p>The first slicing's discriminator is code.coding.system AND code.coding.code.  Two slices. First max 1 and the other max *.  The valueCodableConcept is bound in these slices to a ValueSet</p>
<p>The second slicing's discriminator is also code.coding.system AND code.coding.code with max 2 but it adds a third type discriminator  for  value[x] being CodableConcept in one slice and Quantity in another. In this slicing, the code.coding.system AND code.coding.code have the same fixed values in the two slices but the difference is the types in the two slices.</p>
<p>This is still WIP but if you'd rather see what I'm trying to do, you can take a look at these GitHub links although parts of it are still incomplete and/or commented out:</p>
<p><a href="https://github.com/phenopackets/core-ig/blob/b4b5fdd1bacb660205442f17d76d6f03bb5b2958/ig-root/input/resources/StructureDefinition-observation-phenotypic-abnormality.xml">https://github.com/phenopackets/core-ig/blob/b4b5fdd1bacb660205442f17d76d6f03bb5b2958/ig-root/input/resources/StructureDefinition-observation-phenotypic-abnormality.xml</a></p>
<p>and the WIP PR is here (feel free to comment on the PR or code lines):</p>
<p><a href="https://github.com/phenopackets/core-ig/pull/9">https://github.com/phenopackets/core-ig/pull/9</a></p>
<p>Thanks!</p>



<a name="216380782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/216380782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#216380782">(Nov 11 2020 at 18:22)</a>:</h4>
<p>A single element in FHIR can only have one set of discriminators defined and all slices must be distinct based on that one set of discriminators</p>



<a name="216381015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/216381015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shahim Essaid <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#216381015">(Nov 11 2020 at 18:24)</a>:</h4>
<p>I'm assuming this is per profile. Correct? In other words, a child profile can override the slicing in that case?  If that's how it works, is all slicing info from the base profile erased?</p>



<a name="216381210"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/216381210" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#216381210">(Nov 11 2020 at 18:26)</a>:</h4>
<p>Per path within a profile.  If you have a repeating element that is itself sliced, you could have different discriminators on a sub-element within each parent slice.  E.g. if you sliced Observation.component, you could have different discriminator sets on Observation.component.code.coding within each component slice.</p>



<a name="216381290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/216381290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shahim Essaid <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#216381290">(Nov 11 2020 at 18:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  thanks for the tips! I'm still digesting all this and will probably have few follow up questions later.</p>



<a name="216381329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/216381329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#216381329">(Nov 11 2020 at 18:27)</a>:</h4>
<p>That's what the chat is here for :)</p>



<a name="216381718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/216381718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shahim Essaid <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#216381718">(Nov 11 2020 at 18:31)</a>:</h4>
<p>Does this also mean that each slice needs to address all the paths in the set of discriminator paths?  If not, what happens with the other discriminator paths if a slice doesn't need them to be unique?</p>



<a name="216382675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/216382675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shahim Essaid <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#216382675">(Nov 11 2020 at 18:39)</a>:</h4>
<p>One more question and then I'll do my homework before asking again :)</p>
<p>If a path in a discriminator needs to be used both by value or by type in the different slices, does this mean that there should be two entries for that path in the slicing discriminators, once by value and once by type, or is that sort of discrimination not possible?</p>



<a name="216383311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/216383311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#216383311">(Nov 11 2020 at 18:44)</a>:</h4>
<p>It's fine if not all of the discriminators have a value.  What matters is that all slices are unique based on the discriminators</p>



<a name="217295713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/217295713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Davis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#217295713">(Nov 19 2020 at 16:36)</a>:</h4>
<p>I'm getting a slicing error (attempting to slice an element that does not repeat) on the following code snippet .  What am I missing?  I've used the same slicing for similar elements in other profiles and it works.<br>
        &lt;element id="Observation:HeartRate.device"&gt;<br>
            &lt;path value="Observation.device"/&gt;<br>
            &lt;slicing id="1"&gt;<br>
                &lt;discriminator&gt;<br>
                                   &lt;type value="profile"/&gt;<br>
                                   &lt;path value="device.reference.resolve"/&gt;<br>
                               &lt;/discriminator&gt;<br>
                               &lt;ordered value="false"/&gt;<br>
                               &lt;rules value="open"/&gt;<br>
                        &lt;/slicing&gt;<br>
            &lt;min value="0"/&gt;<br>
            &lt;max value="*"/&gt;<br>
            &lt;mustSupport value="true"/&gt;<br>
        &lt;/element&gt;<br>
        &lt;element id="Observation:HeartRate.device:genDevice"&gt;<br>
            &lt;path value="Observation.device"/&gt;<br>
            &lt;sliceName value="Device"/&gt;<br>
            &lt;type&gt;<br>
                &lt;code value="Reference"/&gt;<br>
                &lt;targetProfile value="http://hl7.org/fhir/StructureDefinition/Device"/&gt;<br>
            &lt;/type&gt;<br>
            &lt;mustSupport value="true"/&gt;<br>
        &lt;/element&gt;<br>
        &lt;element id="Observation:HeartRate.device:BPDevice"&gt;<br>
            &lt;path value="Observation.device"/&gt;<br>
            &lt;sliceName value="BPDevice"/&gt;<br>
            &lt;type&gt;<br>
                &lt;code value="Reference"/&gt;<br>
                &lt;targetProfile value="http://hl7.org/fhir/us/vitals/StructureDefinition/BPDevice"/&gt;<br>
            &lt;/type&gt;<br>
            &lt;mustSupport value="true"/&gt;<br>
        &lt;/element&gt;</p>



<a name="217296030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/217296030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#217296030">(Nov 19 2020 at 16:39)</a>:</h4>
<p>Observation.device does not repeat and is not polymorphic (doesn't have multiple data types).  Because of that, slicing is not supported.  (We've talked about introducing it, but that adds a lot of complexity to the validator, which is already extremely complex, so it's not something we'll undertake lightly or soon.</p>



<a name="217296870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/217296870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Davis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#217296870">(Nov 19 2020 at 16:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Thank you.</p>



<a name="222057222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/222057222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Emmeli Gross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#222057222">(Jan 08 2021 at 10:33)</a>:</h4>
<p>Hi! I have done a slice on Provenance.reason and I need some advise:<br>
The case is as follows: <br>
We want to use two different ValueSets in Provenance.reason (Provenance.reason is a CodableConcept). </p>
<p>One ValueSet contains "reasons for nullification" and should be used if the Provenance.activity is some variant of "nullification" of the resource the Provenance is targeting . The other ValueSet contains "reasons for change" should be used if the Provenance.activity is a revision of the targeting resource.<br>
One of the ValueSets contain codes from more than one CodeSystem.<br>
To be able to provide different ValueSets for for different scenarios I need to do a slice, right? (Or is there some other pattern?)<br>
Now to may main concern:<br>
What should I do with the "discriminator" for the slice? Do you think that we should provide a discriminator for a scenario like the one described above? <br>
If we should provide a discriminator, what should it be? One idea is to use  the coding.system attribute, but what should I enter here in that case? The ValueSet URI? Then, aren't we misusing the "coding.system"? Any other suggestions?<br>
Thanks!</p>



<a name="222077724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing/near/222077724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.html#222077724">(Jan 08 2021 at 14:26)</a>:</h4>
<p>Slices allow for multiple simultaneous sets of constraints - for different repetitions.  If you want to define different rules for an element for a different circumstance, you either need to define distinct profiles (one profile per condition) or define an invariant that makes the assertion of the value set binding contingent on the value of another element.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
