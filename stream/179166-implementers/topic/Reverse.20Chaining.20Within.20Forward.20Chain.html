---
layout: page
title: "FHIR Chat  · Reverse Chaining Within Forward Chain · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reverse.20Chaining.20Within.20Forward.20Chain.html">Reverse Chaining Within Forward Chain</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="243868349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reverse%20Chaining%20Within%20Forward%20Chain/near/243868349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Li-Sauerwine <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reverse.20Chaining.20Within.20Forward.20Chain.html#243868349">(Jun 25 2021 at 02:06)</a>:</h4>
<p>I'm trying to ask a question of HAPI FHIR like,</p>
<p>"Give me Specimens for Patients having a given Diagnosis code"</p>
<p>I notice that it's possible to nest reverse-chains.  For instance, I could use Patient?_has:Observation:patient:_has:AuditEvent:entity:user=MyUserId to get Patients with Observations where the Observation has be audited by a specific user as per the FHIR spec (<a href="https://www.hl7.org/fhir/search.html#has">https://www.hl7.org/fhir/search.html#has</a>).</p>
<p>It's also possible within HAPI to nest a forward-chain within a reverse-chain, e.g. Patient?_has:Observation:subject:device.identifier=urn:system|DEVICEID if you wanted Patients with Observations by a specific Device (<a href="https://github.com/hapifhir/hapi-fhir/issues/1752">https://github.com/hapifhir/hapi-fhir/issues/1752</a>).</p>
<p>What I would expect the syntax to look like is something like Specimen?subject:_has:Condition:subject:code=system|CODE, but in practice I get the same error as if I request some nonsense thing from the forward chain, which is the less-than-illuminating:</p>
<p>{<br>
  "resourceType": "OperationOutcome",<br>
  "issue": [ {<br>
    "severity": "error",<br>
    "code": "processing",<br>
    "diagnostics": "Index 0 out of bounds for length 0"<br>
  } ]<br>
}</p>
<p>I can't be the first person who's wished to nest a reverse-chain into a forward-chain, and it doesn't seem to me that there should be any architectural or performance reason why this would not be supported while either forward- or reverse-chaining is supported within reverse-chaining.  Is there a canonical way to do this that I'm missing?</p>



<a name="243870003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reverse%20Chaining%20Within%20Forward%20Chain/near/243870003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Li-Sauerwine <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reverse.20Chaining.20Within.20Forward.20Chain.html#243870003">(Jun 25 2021 at 02:44)</a>:</h4>
<p>I figured it out.  For any who follow, the syntax would be, e.g.:</p>
<p>Specimen?subject:Patient._has:Condition:subject:code=system|CODE</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
