---
layout: page
title: "FHIR Chat  · Profile conformance - resource or server controlled? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html">Profile conformance - resource or server controlled?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="180806699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180806699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180806699">(Nov 15 2019 at 06:33)</a>:</h4>
<p>In the UK we are getting a lot of resistance to having many profiles. </p>
<p>As a developer I'm guilty of this, I can easily get lost in profiles and what I want to do is build one resource and use it many times.<br>
So my resource conforms to a UK core profile but in reality its conformant to many more. </p>
<p>When I worked on the uk sandbox (resftul), I followed this and endpoints validated against uk core profiles ignoring the profile stated in the resource.</p>
<p>We also have a lot of message and document based specifications in the NHS in England. This is where I believe the anti-profile comments are coming from. The specs have a focus around profiles, in particular the message appears to be build this and this profile. <br>
Here I feel we have made a mistake and we should be saying this is how you build a message or document (using GrapDefinition) and you resources should validate against these profiles. </p>
<p>Profiles are rules not building instructions.<br>
(building is done in practice using fhir site and uk sandbox)</p>
<p>The last bit goes back to the restful pattern where the resource was validated against the servers requirements. In this latter pattern, the bundle is validated against the profiles listed in graphdefintions (the graphdefintion controls validation). <br>
So validation is not controlled by the resource (it can be, it's useful during early development).<br>
It's also key that a validation service is provided to check conformance to the rules (profiles). This is primarily how a developer discovers they are not following profiles (they are unlikely to trawl profiles, they will use them when they find an error).</p>



<a name="180812538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180812538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180812538">(Nov 15 2019 at 08:43)</a>:</h4>
<p>A resource could simply declare conformance to a GraphDefenition and be done with it. Having the server ignore a declared profile/GraphDefintion sounds bad practice to me, as there will surely be multiple version of (e.g. a message) GraphDefenition over time.  As such only the client can label the instance with the correct GraphDef url.</p>



<a name="180812730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180812730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180812730">(Nov 15 2019 at 08:47)</a>:</h4>
<p>The server should be able to reject resources that it doesn't support. E.g. a resource may say it supports vital-signs, the server doesn't support LOINC and so enforces a profile that requires SNOMED code to be present.</p>



<a name="180812746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180812746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180812746">(Nov 15 2019 at 08:47)</a>:</h4>
<p>So the the vital-sign resource would be rejected.</p>



<a name="180812831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180812831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180812831">(Nov 15 2019 at 08:49)</a>:</h4>
<p>Sure, that's a business rule aspect. But the client is in control in declaring what its instance complies with. As you say that doesn't mean the server has to accept it, it has its own business rules.</p>



<a name="180813424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180813424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180813424">(Nov 15 2019 at 08:59)</a>:</h4>
<p>On a practical level, if I'm building a document or a message. What I would like to do is assemble the bundle from restful servers (with minimal transform) so Patient and Encounter comes from the PAS, Observations from the Obs/EPR, Binaries from the EDMS, etc.<br>
The stated profile in these returned resources is not likely to match what the message/document wants but they should validate according to their conformance rules. Do I need to correct the stated profile in the resources?</p>



<a name="180813530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180813530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180813530">(Nov 15 2019 at 09:01)</a>:</h4>
<p>I feel not as the servers/project business rules take precedence (and will override the resources stated conformance)</p>



<a name="180813622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180813622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180813622">(Nov 15 2019 at 09:02)</a>:</h4>
<p><code>profile</code>:</p>
<blockquote>
<p>An assertion that the content conforms to a resource profile (a StructureDefinition). See Extending and Restricting Resources for further discussion. Can be changed as profiles and value sets change or the system rechecks conformance. The profile can be used to indicate which version(s) of FHIR a resource conforms to.<br>
On the RESTful API: On receiving a write operation, the server MAY elect to remove invalid claims, SHOULD retain claims that are correct or untested, and MAY add additional claims it believes are valid</p>
</blockquote>



<a name="180813759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180813759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180813759">(Nov 15 2019 at 09:04)</a>:</h4>
<blockquote>
<p>I feel not as the servers/project business rules take precedence (and will override the resources stated conformance)</p>
</blockquote>
<p>I think so too, and then the server could add the profiles it thinks the resource conforms to, like the spec says</p>



<a name="180813771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180813771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180813771">(Nov 15 2019 at 09:04)</a>:</h4>
<blockquote>
<p>I can easily get lost in profiles and what I want to do is build one resource and use it many times.</p>
</blockquote>
<p>This is why one should not build overzealous profiles that 0..0 everything you don't want :)</p>



<a name="180813789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180813789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180813789">(Nov 15 2019 at 09:05)</a>:</h4>
<p>It causes developer pain (and pushback) like this.</p>



<a name="180827896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180827896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180827896">(Nov 15 2019 at 12:39)</a>:</h4>
<blockquote>
<p>In the UK we are getting a lot of resistance to having many profiles</p>
</blockquote>
<p>I get that. Totally. And I get this too, as the actual goal:</p>
<blockquote>
<p>what I want to do is build one resource and use it many times.</p>
</blockquote>
<p>But hiding hard requirements and not using profiles... doesn't achieve your actual goal. Unless, that is, there's some confusion that because you have a profile, you have to use Resource.meta.profile. A lot of projects knee-jerk into this because of past experience, but I strongly advise against it. I am in favor of defining profiles for your requirements, but I'm very much in favor of using Resource.meta.profile as sparingly as possible. </p>
<p>It tends to get used because lazy validator writers think it's easier for them, but it creates heaps of work downstream</p>



<a name="180830258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180830258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180830258">(Nov 15 2019 at 13:13)</a>:</h4>
<p>Thanks. That matches technical feedback in UK. Their is a push to make Resource.meta.profile mandatory for reasons you've mentioned.</p>



<a name="180830585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180830585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180830585">(Nov 15 2019 at 13:17)</a>:</h4>
<p>Why does it create heaps of work downstream? Any declared profiles can be ignored by a server, so what's the extra effort if it's there? One can choose to ignore, but if there are no declared profiles, one can't choose to use the client-specified profiles. And somehow you need to identify the version of the StrucDef or IG one is sending.</p>



<a name="180830981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180830981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180830981">(Nov 15 2019 at 13:22)</a>:</h4>
<p>You're free to ignore declared profiles inbound, but if you spit them out outbound and they're wrong, your system is non-conformant.  More importantly, requiring that profiles be declared means that clients must customize their interfaces to declare all of the profiles for all of the downstream systems that expect that declaration.  So rather than just pointing at a new server and having things work, the client needs to change their code every time a new server comes along that wants a different profile (or different profile version) declaration - even though the data being provided hasn't changed and the meaning of the instance hasn't changed.  That's a tax on the client community for the convenience of the server and makes costs higher for the system overall.</p>



<a name="180835398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180835398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180835398">(Nov 15 2019 at 14:13)</a>:</h4>
<p>Wouldn't that be covered by the business when establishing the connections? They would establish something like a contract which says which profiles can be used by client and server?</p>



<a name="180835567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180835567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180835567">(Nov 15 2019 at 14:15)</a>:</h4>
<p>[del]</p>



<a name="180859340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180859340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180859340">(Nov 15 2019 at 18:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  that statement (about being non conformant by returning possibly invalid profiles on a resources) doesn't agree with what the spec states about that: "...SHOULD retain claims that are correct or <em>untested</em>, and MAY add additional claims it believes are valid" (emphasis mine)</p>



<a name="180859346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180859346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180859346">(Nov 15 2019 at 18:39)</a>:</h4>
<p><a href="http://hl7.org/fhir/r4/resource.html#Meta" target="_blank" title="http://hl7.org/fhir/r4/resource.html#Meta">http://hl7.org/fhir/r4/resource.html#Meta</a></p>



<a name="180859435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180859435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180859435">(Nov 15 2019 at 18:40)</a>:</h4>
<p>The documentation for the field even hints a bit that this is something that may slowly get stale over time/not be real time maintained: "It is up to the server and/or other infrastructure of policy to determine whether/how these claims are verified and/or updated over time. The list of profile URLs is a set."</p>



<a name="180859478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180859478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180859478">(Nov 15 2019 at 18:41)</a>:</h4>
<p>This has always been my understanding of the profile field - it's not guaranteed to be accurate as it's pretty expensive to re-validate on all calls/keep these up to date in all cases</p>



<a name="180862906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180862906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180862906">(Nov 15 2019 at 19:18)</a>:</h4>
<p>typically, people write a profile that expresses their requirements, which is reasonable, and then say 'you have to tell me you meet my requirements' (use Resource.meta.profile). Which is the bit that stops re-use, since the requirements are compatible, but the explicit declaration is not. So you can't re-use your existing interface. And then you add the new profile declaration and some other interface suddenly blows up because it doesn't know this new profile you've declared.. and now we're back to one-off interfaces. </p>
<p>yes, servers are allowed to rewrite profile ids.. but the kind of thinking that leads to the scenarios in the previous paragraph... those kind of IGs also prohibit servers changing profiles, etc. </p>
<p>The lesson is that there's really 2 types of profiles (well, there's more sub-types): </p>
<ul>
<li>ones that express business rules for conformance purposes </li>
<li>ones that describes inherent semantics in the resource (exp. Observation)<br>
(yes I'm aware that this is not a clean division)</li>
</ul>
<p>It's the second ones that are candidates for Resource.meta.profile, and the only reason to do that is to make semantic usage <em>easy to find</em> (it's a denormalization). You should never put the first type of profile in Resource.meta.profile</p>
<p><span class="user-mention" data-user-id="191321">@David Hay</span> btw, this is why it's important not to require Resource.meta.profile in order to validate</p>



<a name="180865897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180865897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180865897">(Nov 15 2019 at 19:53)</a>:</h4>
<p>so (how) can we say and inquire that a resource indicates "this content is declared compatible with the constraints and requirements expresssed by xxx. May (or may not) be compatible with other requirements"?</p>



<a name="180901693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180901693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180901693">(Nov 16 2019 at 07:37)</a>:</h4>
<p>Wouldn't it be more practical for the source/client to say its compatible with xxxx? Probably via documentation (which resembles a capability statement).</p>



<a name="180911026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180911026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180911026">(Nov 16 2019 at 12:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191356">@Jenni Syed</span> You're free to strip profile claims.  But if you retain them and spit them out in subsequent query responses - and the instance is no longer (or never was) valid against those claims - then you're non-conformant.  If an instance declares a profile and isn't valid against that profile, the instance is non-conformant.</p>



<a name="180914130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180914130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180914130">(Nov 16 2019 at 14:24)</a>:</h4>
<p>So if you send something (perhaps as a result of a subscription or query, or trigger based) you'd better make sure that whatever profiles you include [if any] were validated by you as a sender ? If (as a server) I receive a profile on a resource, a profile that I don't know about nor care about, then I'd better strop it off as quickly as I can because it serves no purpose. Or at least; strip unknown profiles off incoming resources UNLESS (a) I still know who/what system send the profile to me in the first place [so at least I can send it back to them], (b) the resource hasn't been modified by any other system, and (c) my persistence layer allows me to fully reconstruct all data elements that were originally sent to me. That's a lot of ifs.</p>



<a name="180914151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180914151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180914151">(Nov 16 2019 at 14:25)</a>:</h4>
<p>Yup.  Retaining profiles that you don't verify yourself - ideally on output - is a risky business</p>



<a name="180918834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/180918834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#180918834">(Nov 16 2019 at 16:35)</a>:</h4>
<p>Fair enough. So my little validator app should have an option to specify the profile to apply. I'll update the docs as well...</p>



<a name="181036539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181036539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181036539">(Nov 18 2019 at 17:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  do you have links to where that is described in the spec? The doc I linked to doesn't seem to indicate that.</p>



<a name="181036715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181036715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181036715">(Nov 18 2019 at 17:28)</a>:</h4>
<p>Also, to be transparent, my implementation doesn't currently support this (it would strip profiles sent in on write today). However, we've talked about the profile field in Meta over time and my understanding is that it shouldn't be considered perfectly reliable. I just want to make sure I understand it as this is something that comes up with many IG discussions.</p>



<a name="181036904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181036904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181036904">(Nov 18 2019 at 17:30)</a>:</h4>
<p>As well as realities of use. IE: querying by a profile, many think they could do this and get only the data they want. But typically, they want data that logically meets a profile rather than strictly conforming. For example, If I query for the US Core vitals profile and it excludes vitals that my system knows about but that don't conform (freetext results, different units, etc), this is surprising to many apps.</p>



<a name="181037131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181037131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181037131">(Nov 18 2019 at 17:32)</a>:</h4>
<blockquote>
<p>it shouldn't be considered perfectly reliable</p>
</blockquote>
<p>It's a claim. It should be considered reliable in the sense that it reliably claims to conform. Whether the claim is reliable or not is testable.</p>



<a name="181037219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181037219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181037219">(Nov 18 2019 at 17:33)</a>:</h4>
<p>as for querying, yes, that is a subtle point that we can't stop people being surprised about in either direction</p>



<a name="181037289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181037289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181037289">(Nov 18 2019 at 17:34)</a>:</h4>
<blockquote>
<p>excludes vitals that my system knows about but that don't conform</p>
</blockquote>
<p>But these should not exist...</p>



<a name="181037670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181037670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181037670">(Nov 18 2019 at 17:38)</a>:</h4>
<p>I have seen heights recorded in something other than cm and inches, or fat fingered in with freetext units. I've seen weights in stones. We know they're height and weight, but spitting it out in a converted unit isn't an accurate representation of how it looks in the system</p>



<a name="181037721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181037721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181037721">(Nov 18 2019 at 17:39)</a>:</h4>
<p>those are still vitals in our system, and would be shown in our vitals sections, but they don't strictly meet the international profile.</p>



<a name="181037900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181037900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181037900">(Nov 18 2019 at 17:41)</a>:</h4>
<p>if you queried by the vitals category (not the profile), we would return them</p>



<a name="181040277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181040277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181040277">(Nov 18 2019 at 18:10)</a>:</h4>
<p>The intent of the profile is that you <em>do</em> return them in a converted unit. If you are concerned with representation, you have the narrative and/or rendered value extension</p>



<a name="181040297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181040297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181040297">(Nov 18 2019 at 18:10)</a>:</h4>
<p>if you think that statement is a problem, then you need to take that up with OO</p>



<a name="181040764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181040764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181040764">(Nov 18 2019 at 18:15)</a>:</h4>
<p>Yeah, because if I had an app tell me to update it using the same unit, it would probably not make the system owner happy and there are precision issues as well</p>



<a name="181040832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181040832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181040832">(Nov 18 2019 at 18:16)</a>:</h4>
<p>I thought that was why we had the conversion extensions - specifically for these types of issues/concerns</p>



<a name="181040850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181040850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181040850">(Nov 18 2019 at 18:16)</a>:</h4>
<p>but now we're drifting :) It could be that it's not just the unit that we don't have/there are issues with</p>



<a name="181041042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181041042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181041042">(Nov 18 2019 at 18:19)</a>:</h4>
<p>more common one is that we likely recognize it as a vital, may not recognize the underlying coding as weight or height, would return it by category query, and a human being would recognize that it was a weight :)</p>



<a name="181041050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181041050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181041050">(Nov 18 2019 at 18:19)</a>:</h4>
<p>(but the computer didn't)</p>



<a name="181041176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181041176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181041176">(Nov 18 2019 at 18:20)</a>:</h4>
<p>I'm more trying to understand how to be conformant if we do use the meta profile fields, because what I see in the spec is that we should try to make those accurate, but a system may choose to not automatically validate or update on every call</p>



<a name="181041214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181041214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181041214">(Nov 18 2019 at 18:20)</a>:</h4>
<p>And Lloyd seems to be saying that would make the server non-conformant, but I'm not sure I can find the language for that field to back that/understand that</p>



<a name="181041289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181041289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181041289">(Nov 18 2019 at 18:21)</a>:</h4>
<p>And I think what he is saying is what many people actually <em>expect</em> from that field - that it's supposed to be 100% accurate at all times, but the spec itself seems to not indicate that as a reality</p>



<a name="181041687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181041687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181041687">(Nov 18 2019 at 18:25)</a>:</h4>
<p>I think that the text you are looking for is:</p>



<a name="181041692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181041692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181041692">(Nov 18 2019 at 18:25)</a>:</h4>
<blockquote>
<p>On the RESTful API: On receiving a write operation, the server MAY elect to remove invalid claims, SHOULD retain claims that are correct or untested, and MAY add additional claims it believes are valid</p>
</blockquote>



<a name="181043182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181043182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181043182">(Nov 18 2019 at 18:40)</a>:</h4>
<p>Profile declaration is irrelevant in terms of vital signs profiles.  If your system recognizes that an Observation is a height, weight or one of the other core-standardized vital signs profiles, you SHALL comply with the relevant profile (Including converting code or units).  You don't have to declare the profile, but you <em>must</em> comply with it.</p>



<a name="181045641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181045641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181045641">(Nov 18 2019 at 19:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  then that makes it look like that it's ok to be untested/unvalidated. It doesn't look like a <em>must</em> to validate that</p>



<a name="181045656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181045656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181045656">(Nov 18 2019 at 19:07)</a>:</h4>
<p>And that is the statement I found earlier</p>



<a name="181048744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/181048744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#181048744">(Nov 18 2019 at 19:41)</a>:</h4>
<p>I don't know where you found that. Perhaps in some narrower context where an additional rules was being applied?</p>



<a name="221201367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20conformance%20-%20resource%20or%20server%20controlled%3F/near/221201367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20conformance.20-.20resource.20or.20server.20controlled.3F.html#221201367">(Dec 30 2020 at 09:43)</a>:</h4>
<p>Revisiting this issue: profile seems to be mainly something we need at the communications layer, not at the persistence layer. Therefore, a server should probably use declared profiles [on an inbound resource] in any way it sees fit (validation, optimized processing), but strip it off before actually persisting the resource. Profiles could be retained as part of a Provenance resource if one so chooses. <br>
Before sending a resource, a server could attempt to detect which profiles a resource conforms to, and include any profiles in the meta tag. This could be a forced process if the context of the implementation has implicit rules around the use of profiles. Don't include any profiles in profiles that one hasn't validated as a server, for these may cause problems downstream.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
