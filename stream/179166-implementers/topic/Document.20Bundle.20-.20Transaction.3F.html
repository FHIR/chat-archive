---
layout: page
title: "FHIR Chat  · Document Bundle - Transaction? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html">Document Bundle - Transaction?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="161327758"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161327758" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161327758">(Mar 21 2019 at 09:05)</a>:</h4>
<p>For one of our use cases, we are specifying the exchange of FHIR Document (Bundle.type = document and with a Composition ect.). We are currently looking at the Bundle end-points for posting the Document Bundle ( <a href="http://hl7.org/fhir/documents.html#bundle" target="_blank" title="http://hl7.org/fhir/documents.html#bundle">http://hl7.org/fhir/documents.html#bundle</a> ).</p>
<p>We are wondering if a post of a Document Bundle at the server's base URL should be seen as a transaction. Currently, at the given table in the link above the transaction is only mentioned in a ' e.g. a transaction'. Not very convincing. What's FHIR idea here?</p>



<a name="161331854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161331854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161331854">(Mar 21 2019 at 10:16)</a>:</h4>
<p>More details are given in <a href="http://hl7.org/fhir/http.html#other-bundles" target="_blank" title="http://hl7.org/fhir/http.html#other-bundles">http://hl7.org/fhir/http.html#other-bundles</a><br>
So the idea is that the document bundle is decomposed into its individual resources, and for every resource either a POST or a PUT is executed depending whether or not the server already has a resource in its database with the corresponding id.</p>



<a name="161331996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161331996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161331996">(Mar 21 2019 at 10:19)</a>:</h4>
<p>For a document it is however not expected that all resources need to be accepted like in a transaction. At least that is my interpretation of it.</p>



<a name="161332875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161332875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161332875">(Mar 21 2019 at 10:33)</a>:</h4>
<p>I don't think a server gets to pick and choose. IF a server decides to accept bundles being posted to /, the sever gets to determine whether a POST or a PUT is in order as a method. Other than that, all resources have to be processed. Client side orchestration, after all, this being REST.</p>



<a name="161333191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161333191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161333191">(Mar 21 2019 at 10:38)</a>:</h4>
<p>„if the identity of the resource refers to a valid location on the server, it should treat it as an update to that location“ sounds to me like it is being decided for each resource in the document bundle</p>



<a name="161333341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161333341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161333341">(Mar 21 2019 at 10:41)</a>:</h4>
<p>Of course all resources in the document bundle should be processed, yet, I don’t see the part where it is mentioned that for a document bundle all create or update interactions need to succeed.</p>



<a name="161333525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161333525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161333525">(Mar 21 2019 at 10:44)</a>:</h4>
<p>Though, I understand that such a behavior would be desirable, and needed in <span class="user-mention" data-user-id="192301">@Ardon Toonstra</span> use case.</p>



<a name="161333557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161333557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161333557">(Mar 21 2019 at 10:45)</a>:</h4>
<p>Agree - there is no 'transactional integrity'.</p>



<a name="161345828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161345828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161345828">(Mar 21 2019 at 13:43)</a>:</h4>
<p>That's rather unsatisfying. Documents in CDA are regarded as 'whole'. Documents in FHIR apparently have a lesser status.</p>



<a name="161345914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161345914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161345914">(Mar 21 2019 at 13:44)</a>:</h4>
<p>I.e. there's no guarantee that the server accepts the the whole thing this way.</p>



<a name="161346302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161346302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161346302">(Mar 21 2019 at 13:49)</a>:</h4>
<p>Or maybe the server base URL is just unsuitable for documents and we should rather look into persistence at the Bundle endpoint</p>



<a name="161352473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161352473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161352473">(Mar 21 2019 at 14:51)</a>:</h4>
<p>If you want to persist the Document as a whole: a) post it to /Bundle (instead of /), and it will be persisted as-is (as a bundle), b) if digital signatures etc. play a role, you need to persist a document as a Binary resource.</p>
<p>If you post a bundle (message, document, or any other non-transaction type) to / you're telling the sever that "for convenience reasons I'm grouping these resources, process them as if they were sent to you on a one-by-one basis", i.e. bundle is a transportation-level-batching mechanism.</p>



<a name="161361097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161361097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161361097">(Mar 21 2019 at 16:15)</a>:</h4>
<p>Generally, posting a document to the base endpoint would be treated as an error.  A server <em>could</em> choose to treat it as a transaction, but the server would then have to decide whether to treat each resource as a create or update and figure out how to map the resource ids in the Bundle to its local records.  Doing that isn't expected behavior though.  A client wanting a document to be processed as a transaction should convert the Bundle to a transaction before posting.</p>



<a name="161404709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Document%20Bundle%20-%20Transaction%3F/near/161404709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Document.20Bundle.20-.20Transaction.3F.html#161404709">(Mar 21 2019 at 23:24)</a>:</h4>
<p>we say that a server is allowed to do that, and it's at the server's discretion how to handle the problems it creates</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
