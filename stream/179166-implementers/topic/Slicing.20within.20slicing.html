---
layout: page
title: "FHIR Chat  · Slicing within slicing · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20within.20slicing.html">Slicing within slicing</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="201370490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20within%20slicing/near/201370490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20within.20slicing.html#201370490">(Jun 19 2020 at 09:48)</a>:</h4>
<p>Hallo everyone, <br>
I have a question concerning the slicing within a slicing. <br>
We are trying to profile the wound size, consisting of length, width, area and (optionally) depth. We are profiling this as one observation with many components (see <a href="https://simplifier.net/ewundbericht/positherawoundsize">https://simplifier.net/ewundbericht/positherawoundsize</a>). <br>
We sliced the component, our discriminator is <code>code(pattern)</code>,  so we have a pattern on code of the component.<br>
Now we also want to slice the code in order to allow more than one coding (e.g. one mandatory loinc, one optional snomed). This again we sliced with <code>$this(pattern)</code> as discriminator.</p>
<p>We also have an example for this profile (<a href="https://simplifier.net/ewundbericht/observation-example">https://simplifier.net/ewundbericht/observation-example</a> ). When we validate our example against this profile we get the following error: </p>
<div class="codehilite"><pre><span></span><code>Invalid : Value does not match pattern
&#39;{&quot;system&quot;:&quot;http://loinc.org&quot;,&quot;code&quot;:&quot;39126-8&quot;}&#39;
Observation.component[0].code[0].coding[1]
</code></pre></div>


<p>When we delete the snomed code in our example, everything is fine.</p>
<p>Has anyone an idea how we can change our profile so that different codings are possible?<br>
Thanks in advance to any contributions on this topic.</p>



<a name="201377972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20within%20slicing/near/201377972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20within.20slicing.html#201377972">(Jun 19 2020 at 11:30)</a>:</h4>
<p>you could setup the first slice with patternCodeableConcept then local codes will be allowed and you don't need to do a slicing within a slicing, see <a href="https://github.com/FHIR/fhir-test-cases/blob/master/validator/observation-bp-profile.xml">https://github.com/FHIR/fhir-test-cases/blob/master/validator/observation-bp-profile.xml</a> for an example</p>



<a name="201391215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20within%20slicing/near/201391215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20within.20slicing.html#201391215">(Jun 19 2020 at 13:42)</a>:</h4>
<p>Thank you Oliver, that was exactly the problem: I missed the patternCodeableConcepts. Now it works.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
