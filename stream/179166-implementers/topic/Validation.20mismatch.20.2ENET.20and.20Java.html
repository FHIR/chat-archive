---
layout: page
title: "FHIR Chat  · Validation mismatch .NET and Java · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20mismatch.20.2ENET.20and.20Java.html">Validation mismatch .NET and Java</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="242697834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20mismatch%20.NET%20and%20Java/near/242697834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20mismatch.20.2ENET.20and.20Java.html#242697834">(Jun 15 2021 at 07:40)</a>:</h4>
<p>I try to validate my resources and profiles using both the .NET implementation on SIMPLIFIER and the Java validator. However even when my profiles validate OK in SIMPLIFIER I get a lot of errors when I try to run the same validation in Java with a catalog of my StrctureDefinition as my IG.<br>
The thing bugging me most at the moment is this one: </p>
<div class="codehilite"><pre><span></span><code>Unable to generate snapshot for gd-Person from no-basis-Person because Profile GdPerson (http://ehelse.no/fhir/StructureDefinition/gd-Person), element null. Error generating snapshot: Error sorting Differential: StructureDefinition http://ehelse.no/fhir/StructureDefinition/gd-Person: Differential contains path Person.extension.extension.value[x].coding.code which is actually Element.coding.code, which is not found in the in base http://ehelse.no/fhir/StructureDefinition/gd-Person
org.hl7.fhir.exceptions.DefinitionException: Profile GdPerson (http://ehelse.no/fhir/StructureDefinition/gd-Person), element null. Error generating snapshot: Error sorting Differential: StructureDefinition http://ehelse.no/fhir/StructureDefinition/gd-Person: Differential contains path Person.extension.extension.value[x].coding.code which is actually Element.coding.code, which is not found in the in base http://ehelse.no/fhir/StructureDefinition/gd-Person
        at org.hl7.fhir.r5.context.SimpleWorkerContext.generateSnapshot(SimpleWorkerContext.java:785)
        at org.hl7.fhir.r5.context.SimpleWorkerContext.generateSnapshot(SimpleWorkerContext.java:752)
        at org.hl7.fhir.r5.context.SimpleWorkerContext.allStructures(SimpleWorkerContext.java:635)
        at org.hl7.fhir.validation.ValidationEngine.prepare(ValidationEngine.java:502)
        at org.hl7.fhir.validation.cli.services.ValidationService.initializeValidator(ValidationService.java:257)
        at org.hl7.fhir.validation.cli.services.ValidationService.initializeValidator(ValidationService.java:212)
        at org.hl7.fhir.validation.ValidatorCli.doValidation(ValidatorCli.java:203)
        at org.hl7.fhir.validation.ValidatorCli.main(ValidatorCli.java:159)
</code></pre></div>
<p>I don't know what the validator is up to here as the StructureDefinition differential should be correctly generated from Forge, and I can't really se any problem with the StructureDefinition in question:</p>
<div class="codehilite"><pre><span></span><code>    &lt;element id=&quot;Person.extension:citizenship.extension&quot;&gt;
      &lt;path value=&quot;Person.extension.extension&quot; /&gt;
      &lt;slicing&gt;
        &lt;discriminator&gt;
          &lt;type value=&quot;value&quot; /&gt;
          &lt;path value=&quot;url&quot; /&gt;
        &lt;/discriminator&gt;
        &lt;rules value=&quot;open&quot; /&gt;
      &lt;/slicing&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Person.extension:citizenship.extension:code&quot;&gt;
      &lt;path value=&quot;Person.extension.extension&quot; /&gt;
      &lt;sliceName value=&quot;code&quot; /&gt;
      &lt;mustSupport value=&quot;true&quot; /&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Person.extension:citizenship.extension:code.value[x].coding.system&quot;&gt;
      &lt;path value=&quot;Person.extension.extension.value[x].coding.system&quot; /&gt;
      &lt;definition value=&quot;Grunndata - sets the system value of http://hl7.org/fhir/ValueSet/iso3166-1-3 or extension for the extended code values from FREG&amp;#xD;&amp;#xA;&amp;#xD;&amp;#xA;The identification of the code system that defines the meaning of the symbol in the code.&quot; /&gt;
      &lt;mustSupport value=&quot;true&quot; /&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Person.extension:citizenship.extension:code.value[x].coding.code&quot;&gt;
      &lt;path value=&quot;Person.extension.extension.value[x].coding.code&quot; /&gt;
      &lt;alias value=&quot;Kode for statsborgerskap&quot; /&gt;
      &lt;mustSupport value=&quot;true&quot; /&gt;
    &lt;/element&gt;
</code></pre></div>
<p>The profile: <a href="https://simplifier.net/grunndata-r4/person">https://simplifier.net/grunndata-r4/person</a></p>
<p>Any help appreciated <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="242702499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20mismatch%20.NET%20and%20Java/near/242702499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20mismatch.20.2ENET.20and.20Java.html#242702499">(Jun 15 2021 at 08:31)</a>:</h4>
<p>I'll have to debug</p>



<a name="242807012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20mismatch%20.NET%20and%20Java/near/242807012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20mismatch.20.2ENET.20and.20Java.html#242807012">(Jun 15 2021 at 22:19)</a>:</h4>
<p>in fact, the part you quoted isn't incorrect, it's the next line</p>



<a name="242807068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20mismatch%20.NET%20and%20Java/near/242807068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20mismatch.20.2ENET.20and.20Java.html#242807068">(Jun 15 2021 at 22:20)</a>:</h4>
<div class="codehilite"><pre><span></span><code>    &lt;element id=&quot;Person.meta.security:addressConfidentiality.system&quot;&gt;
    &lt;element id=&quot;Person.meta.security:addressConfidentiality.code&quot;&gt;
    &lt;element id=&quot;Person.meta.security:addressConfidentiality.extension&quot;&gt;
    &lt;element id=&quot;Person.meta.security:addressConfidentiality.extension:fregMetadata&quot;&gt;
</code></pre></div>
<p>extension comes before system</p>



<a name="242843076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20mismatch%20.NET%20and%20Java/near/242843076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20mismatch.20.2ENET.20and.20Java.html#242843076">(Jun 16 2021 at 08:06)</a>:</h4>
<p>Absolutely didn't catch that. However, it does not solve the problem. I think there is really something wrong with my extended extensions again...</p>



<a name="242858528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20mismatch%20.NET%20and%20Java/near/242858528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20mismatch.20.2ENET.20and.20Java.html#242858528">(Jun 16 2021 at 09:59)</a>:</h4>
<p>Looks like it validates OK if I generate snapshots for the derived profiles in Forge. There is something funky about the way Forge makes differentials for derived profiles, and it could be related to those problems. I will investigate furter.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
