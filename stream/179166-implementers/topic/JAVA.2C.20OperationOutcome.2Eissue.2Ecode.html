---
layout: page
title: "FHIR Chat  · JAVA, OperationOutcome.issue.code · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html">JAVA, OperationOutcome.issue.code</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153988520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153988520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zak Guler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153988520">(Aug 17 2018 at 19:42)</a>:</h4>
<p>first timer, I am new to HAPI/FHIR and to this forum. hope some one will be kind to answer a simple How-To question:<br>
I am trying to generate the following Java Rest response:</p>
<blockquote>
<p><a href="http://hapi.fhir.org/baseDstu3/MAMA?given=Ruth&amp;_pretty=true" target="_blank" title="http://hapi.fhir.org/baseDstu3/MAMA?given=Ruth&amp;_pretty=true">http://hapi.fhir.org/baseDstu3/MAMA?given=Ruth&amp;_pretty=true</a></p>
</blockquote>
<div class="codehilite"><pre><span></span>***Unknown resource type MAMA
        {
          &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
          &quot;text&quot;: {
            &quot;status&quot;: &quot;generated&quot;,
            &quot;div&quot;: &quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\&quot;0\&quot;&gt;&lt;tr&gt;&lt;td style=\&quot;font-weight: bold;\&quot;&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Unknown resource type &#39;MAMA&#39; - Server knows how to handle: [Appointment, Account,...]&lt;/pre&gt;&lt;/td&gt;\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t&lt;/tr&gt;\n\t\t&lt;/table&gt;\n\t&lt;/div&gt;&quot;
          },
          &quot;issue&quot;: [
            {
              &quot;severity&quot;: &quot;error&quot;,
              &quot;code&quot;: &quot;processing&quot;,
              &quot;diagnostics&quot;: &quot;Unknown resource type &#39;MAMA&#39; - Server knows how to handle: [Appointment, Account, ...&quot;
            }
          ]
        }
</pre></div>


<p>*** I was unable to generate 'OperationOutcome.issue.code'.</p>
<p>the following is the sample code I used:<br>
OperationOutcome outcome = new OperationOutcome();</p>
<div class="codehilite"><pre><span></span>        outcome.getText().setStatusAsString(&quot;generated&quot;);
        outcome.getText().setDivAsString(&quot;&lt;div&gt;Unknown resource type &#39;MAMA&#39; - Server knows how to handle: [Appointment, Account,...]&lt;/div&gt;&quot;);

        outcome.addIssue()
                .setSeverity(OperationOutcome.IssueSeverity.ERROR)
                .setDiagnostics(&quot;Unknown resource type &#39;MAMA&#39; - Server knows how to handle: [Appointment, Account, ...]&quot;);

        FhirContext ctx = config.getCtx();          
        String outFhirString = &quot;&quot;; 
        outFhirString = ctx.newJsonParser().setPrettyPrint(true).encodeResourceToString(outcome);   
        return outFhirString;
</pre></div>


<p>I couldn't find a way to do the following 'outcome.addIssue().setCode("xyz..");'</p>
<p>this may be a basic question but I couldn't find a way to implement it. any help would be appreciated.<br>
thanx<br>
Zak <a href="mailto:zguler@utah.gov" title="mailto:zguler@utah.gov">zguler@utah.gov</a></p>



<a name="153988531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153988531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153988531">(Aug 17 2018 at 19:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> ?</p>



<a name="153988532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153988532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zak Guler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153988532">(Aug 17 2018 at 19:48)</a>:</h4>
<p>(deleted)</p>



<a name="153988545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153988545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153988545">(Aug 17 2018 at 20:26)</a>:</h4>
<p>you are better to use the enumeration</p>



<a name="153988546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153988546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153988546">(Aug 17 2018 at 20:26)</a>:</h4>
<p>.addIssue().setCode(<a href="http://IssueType.xxx" target="_blank" title="http://IssueType.xxx">IssueType.xxx</a>)</p>



<a name="153988548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153988548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153988548">(Aug 17 2018 at 20:27)</a>:</h4>
<p>if you really want to use a string: <br>
.addIssue().getCodeAsElement().setValueAsString("....")- but you still must use one of the valid enumeration strings</p>



<a name="153989562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153989562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zak Guler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153989562">(Aug 20 2018 at 15:32)</a>:</h4>
<p>but, there is no .addIssue().addCode() in the api that I am using. that is why I was unable to set the code. I wonder if I need to use different jars?</p>
<p>the jar files I am using is for STU3:<br>
        &lt;dependency&gt;<br>
            &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;<br>
            &lt;artifactId&gt;hapi-fhir-base&lt;/artifactId&gt;<br>
            &lt;version&gt;3.3.0&lt;/version&gt;<br>
        &lt;/dependency&gt;<br>
        &lt;!-- <a href="https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-structures-dstu3" target="_blank" title="https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-structures-dstu3">https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-structures-dstu3</a> --&gt;<br>
        &lt;dependency&gt;<br>
            &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;<br>
            &lt;artifactId&gt;hapi-fhir-structures-dstu3&lt;/artifactId&gt;<br>
            &lt;version&gt;3.3.0&lt;/version&gt;<br>
        &lt;/dependency&gt;<br>
        &lt;!-- <a href="https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-client" target="_blank" title="https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-client">https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-client</a> --&gt;<br>
        &lt;dependency&gt;<br>
            &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;<br>
            &lt;artifactId&gt;hapi-fhir-client&lt;/artifactId&gt;<br>
            &lt;version&gt;3.3.0&lt;/version&gt;<br>
        &lt;/dependency&gt;</p>



<a name="153989563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153989563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153989563">(Aug 20 2018 at 15:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span></p>



<a name="153989585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153989585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153989585">(Aug 20 2018 at 17:58)</a>:</h4>
<p>Up until HAPI FHIR 3.4.0, the response error for trying to access an unknown resource was pretty much hardcoded into HAPI.</p>
<p>By coincidence, this just changed a few weeks ago. If you are ok with using the current pre-release version (3.5.0-SNAPSHOT) you can override <code>throwUnknownResourceTypeException(String)</code> on RestfulServer. In your method, you throw ResourceNotFoundException, and you can pass in an OperationOutcome if you want.</p>



<a name="153989600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153989600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zak Guler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153989600">(Aug 20 2018 at 18:34)</a>:</h4>
<p>in my case, I am not using a RestfulServer. I am getting the Patient data from our server and use "ctx = FhirContext.forDstu3()" to build a client response. the challenge now is the api I am using OperationOutcome does not have a method called .addCode() in it. so how can I add the Code to the Issue element like:<br>
operationOutcome .addIssue().addCode(<a href="http://IssueType.xxx" target="_blank" title="http://IssueType.xxx">IssueType.xxx</a>); ???<br>
Am I using the wrong jar file? or am I using the wrong version 3.0.0??? this is the kind of help that I need. where can I find method "addIssue().addCode()"???<br>
thank you for your help.</p>



<a name="153989601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153989601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zak Guler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153989601">(Aug 20 2018 at 18:35)</a>:</h4>
<p>Or getIssue().SetCode()!!!</p>



<a name="153989618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153989618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zak Guler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153989618">(Aug 20 2018 at 20:03)</a>:</h4>
<p>ooh, so Sorry, silly me.<br>
 I was looking for addCode() and when I looked more closely to Grahame Grieve's response it was setCode() and not addCode() like the others.</p>



<a name="153989667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153989667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153989667">(Aug 20 2018 at 21:34)</a>:</h4>
<p>Yup, it's <code>setCode</code>. If you're curious, the reason for that is that we use <code>addFoo</code> for repeating things, but not for 1..1 things.</p>



<a name="153989679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JAVA%2C%20OperationOutcome.issue.code/near/153989679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zak Guler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JAVA.2C.20OperationOutcome.2Eissue.2Ecode.html#153989679">(Aug 20 2018 at 22:18)</a>:</h4>
<p>thank you for clarifying some things for me. I am new to FHIR and I am trying to learn it as soon as I can. so much to explore but it is getting easier as I go.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
