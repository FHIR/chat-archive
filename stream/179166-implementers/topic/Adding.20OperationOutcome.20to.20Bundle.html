---
layout: page
title: "FHIR Chat  · Adding OperationOutcome to Bundle · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html">Adding OperationOutcome to Bundle</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="254640884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/254640884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#254640884">(Sep 24 2021 at 02:29)</a>:</h4>
<p>In discussing <a href="http://jira.hl7.org/browse/FHIR-32011">FHIR#32011</a>, FHIR-I is proposing adding an 'outcome' element to Bundle to capture information and warning messages related to the processing of a bundle or transaction, or even to capture information related to the processing of a message or creation of a document.  The proposals would also mean deprecating the Bundle.entry.search.mode of 'outcome', with the guidance to use the new element instead.  Feedback about the idea is welcome.</p>



<a name="254645868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/254645868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#254645868">(Sep 24 2021 at 03:44)</a>:</h4>
<p>I like the idea. I've been considering adding outcome entries to our implementation for some searchset situations but it's a real concern that any clients not anticipating this possibility could be broken by it. It would fix a lot of fhirpath constraint issues.</p>



<a name="254693958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/254693958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#254693958">(Sep 24 2021 at 12:17)</a>:</h4>
<p>Since a bundle can contain any resource, and when it comes to search, it's recommended to include the OperationOutcome resource. Why wouldn't you just include the OperationOutcome resource to capture those messages related to the outcome of the bundle processing?</p>



<a name="254717657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/254717657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#254717657">(Sep 24 2021 at 14:57)</a>:</h4>
<p>In a batch-response, the entries in the response must exactly correspond to the entries in the request.  You can't throw in another entry with an OperationOutcome without causing an error.  Same goes for 'transaction'.  You could throw an OperationOutcome into a document Bundle, but it would have to be navigable to from the Composition, which isn't necessarily what you want.  Same deal with messages.</p>



<a name="263923013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/263923013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#263923013">(Dec 06 2021 at 20:54)</a>:</h4>
<p>After further discussion, we're leaning towards defining a standard header that could include an OperationOutcome as part of the result of an API invocation.  With Bundles, it would be used for batch-response, transaction-response and history.  In principle, it could also be used with POST, PUT and PATCH to return both the 'result' of a change (as the body) as well as the OperationOutcome.  (At the moment you can only do one or the other.)</p>



<a name="263937730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/263937730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#263937730">(Dec 06 2021 at 23:06)</a>:</h4>
<p>FYI too: <span class="user-mention" data-user-id="191319">@James Agnew</span> <span class="user-mention" data-user-id="193430">@Alexander Zautke</span> <span class="user-mention" data-user-id="197072">@Paul Church</span> <span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> <span class="user-mention" data-user-id="191676">@Lee Surprenant</span> <span class="user-mention" data-user-id="191364">@Peter Jordan</span> <span class="user-mention" data-user-id="191343">@Michael Lawley</span> <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span></p>



<a name="263937987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/263937987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#263937987">(Dec 06 2021 at 23:09)</a>:</h4>
<p>My concern would be the size of the OpOutcome as a header (assuming you mean in json format - don't have that much space to mess with)<br>
And then which to look for, the body (when it's a bad request) or the header if it's info messages.</p>



<a name="263938019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/263938019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#263938019">(Dec 06 2021 at 23:09)</a>:</h4>
<p>(and we already have the provenance header stuff too - not that I've used that yet)</p>



<a name="263938159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/263938159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#263938159">(Dec 06 2021 at 23:10)</a>:</h4>
<p>How about Bundle supporting contained, and including the outcome in there? (and would work for any resource too)</p>



<a name="263939508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/263939508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#263939508">(Dec 06 2021 at 23:27)</a>:</h4>
<blockquote>
<p>which to look for,</p>
</blockquote>
<p>That's an issue either way</p>



<a name="263939596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/263939596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#263939596">(Dec 06 2021 at 23:28)</a>:</h4>
<p>I really don't want to complicate bundle by allowing other kinds of resources</p>



<a name="263940873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/263940873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#263940873">(Dec 06 2021 at 23:45)</a>:</h4>
<p>Yes an issue either way, but this is another location to add to that list of possible locations.</p>



<a name="263944149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/263944149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#263944149">(Dec 07 2021 at 00:27)</a>:</h4>
<p>Still didn't get problem clearly - is it about bundle in bundles or just add meta information to each entry of the bundle? -1 for header, especially with json/xml data - for me it is anti-pattern (HTTP is not the only interaction protocol). I really not a fan of idea sharing Bundle for everything - specialized  containers would be better. And for us it is not a problem to extend bundle.entry with new properties. Does name "outcome" reflect this semantic?- for me it is more like "additional-info" or "metadata", "details"</p>



<a name="263953973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/263953973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#263953973">(Dec 07 2021 at 03:16)</a>:</h4>
<p>This isn't for each entry, it's for the overall processing of the interaction.  Bundle.entry can already capture an outcome.  As an example, when invoking a history interaction, you might pass back a warning that says "some history entries have been suppressed due to permission limitations" or "history between date X and Y is not available" or something like that</p>



<a name="263964204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/263964204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#263964204">(Dec 07 2021 at 06:38)</a>:</h4>
<p>I may be remembering incorrectly, but had thought that it was always valid to wrap a response in an OperationOutcome. Or is that only for "operations" and not for things like search?</p>



<a name="264001775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/264001775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#264001775">(Dec 07 2021 at 13:38)</a>:</h4>
<p>Putting a whole OO resource in a header might be trouble on some networks if the OO gets too big.</p>
<p>I know we added an interceptor in HAPI server that added validation results to response headers, and we've had a lot of reports of this causing things to fail as the response passes through various bits of network infrastructure. Despite the RFC not claiming any size limits on headers, there definitely seem to be some practical ones.</p>



<a name="264006530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/264006530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#264006530">(Dec 07 2021 at 14:12)</a>:</h4>
<p>Given the concerns about header size, would there be more support for the original proposal of adding an additional element to Bundle to support an overall OperationOutcome?</p>



<a name="264021602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/264021602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#264021602">(Dec 07 2021 at 16:01)</a>:</h4>
<p>Would this would change the batch "all or nothing' rules too?</p>



<a name="264021918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/264021918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#264021918">(Dec 07 2021 at 16:03)</a>:</h4>
<p>Not sure what you mean <span class="user-mention" data-user-id="191401">@Eric Haas</span></p>



<a name="264022279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/264022279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#264022279">(Dec 07 2021 at 16:05)</a>:</h4>
<p>if a batch fails because #3 of 4 Post fails what would it look like under the changes?</p>



<a name="264022734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/264022734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#264022734">(Dec 07 2021 at 16:07)</a>:</h4>
<p>A batch wouldn't fail if 3 of 4 posts fail.  However, a transaction would fail.  This OperationOutcome wouldn't be for errors - those would be handled as they always were.  This would be for warnings and information messages that apply to the whole Bundle when the processing was 'successful'.</p>



<a name="264041377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20OperationOutcome%20to%20Bundle/near/264041377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20OperationOutcome.20to.20Bundle.html#264041377">(Dec 07 2021 at 17:50)</a>:</h4>
<p>I remain in favour of this idea and I don't think an http response header is a good compromise due to header size issues.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
