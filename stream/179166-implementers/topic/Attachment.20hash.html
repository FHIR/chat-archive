---
layout: page
title: "FHIR Chat  · Attachment hash · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Attachment.20hash.html">Attachment hash</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="176019057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Attachment%20hash/near/176019057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Chapman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Attachment.20hash.html#176019057">(Sep 18 2019 at 16:04)</a>:</h4>
<p>The documentation for a Attachment.hash specifically states the has is SHA1.  It's interesting because it doesn't seem to include any extensibility mechanism for future, or other current hash algorithms.</p>



<a name="176019911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Attachment%20hash/near/176019911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Radov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Attachment.20hash.html#176019911">(Sep 18 2019 at 16:14)</a>:</h4>
<p>Yes that seems like a problem. Should we add a new coded element to indicate the hashing algorithm used? SHA-1 is now regarded as vulnerable and is falling out of use. (Although this particular case is intended more to protect against accidental data corruption rather than intentional attacks.)</p>



<a name="176021210"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Attachment%20hash/near/176021210" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Attachment.20hash.html#176021210">(Sep 18 2019 at 16:29)</a>:</h4>
<p>We don't care that it's vulnerable.  The intention isn't to secure the information, it's to check if the data has changed.</p>



<a name="176021321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Attachment%20hash/near/176021321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Attachment.20hash.html#176021321">(Sep 18 2019 at 16:30)</a>:</h4>
<p>If you wanted to secure it, you'd use a different element (probably DigitalSignature)</p>



<a name="176027442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Attachment%20hash/near/176027442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Attachment.20hash.html#176027442">(Sep 18 2019 at 17:40)</a>:</h4>
<p>it's a trip wire for not using it for crypto stuff</p>



<a name="176184313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Attachment%20hash/near/176184313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Attachment.20hash.html#176184313">(Sep 20 2019 at 11:31)</a>:</h4>
<p>Lloyd and Grahame nailed it. For more discussion of why it is NOT a cryptographic signature see my write up for the exact same need in XDS with the exact same solution, and where new people end up with a misunderstanding of the purpose of the hash -- <a href="https://healthcaresecprivacy.blogspot.com/2019/06/xds-sha-1-is-still-okay.html" target="_blank" title="https://healthcaresecprivacy.blogspot.com/2019/06/xds-sha-1-is-still-okay.html">https://healthcaresecprivacy.blogspot.com/2019/06/xds-sha-1-is-still-okay.html</a><br>
I welcome suggestions on ways to improve the description of these elements (in both IHE and HL7). They clearly need clarification.</p>



<a name="176184408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Attachment%20hash/near/176184408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Attachment.20hash.html#176184408">(Sep 20 2019 at 11:33)</a>:</h4>
<p>The pain is when you already have a (different) hash that you want to use rather than being forced to compute a new one.</p>



<a name="176184747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Attachment%20hash/near/176184747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Attachment.20hash.html#176184747">(Sep 20 2019 at 11:39)</a>:</h4>
<p>understood. You are free to add an extension for your custom hash.. but now you put a burden on the recipients that they also have have your hash. So we picked one for this need. And aligning it with XDS allows intermediaries between the technology to not need to re-calculate a hash (which would be a failure-mode). Most important is that there is no value to the need for a different hash.</p>



<a name="176187300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Attachment%20hash/near/176187300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Attachment.20hash.html#176187300">(Sep 20 2019 at 12:22)</a>:</h4>
<p>you have to compute your own surely?</p>



<a name="176289105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Attachment%20hash/near/176289105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Attachment.20hash.html#176289105">(Sep 22 2019 at 01:50)</a>:</h4>
<p>In our case, low level code has already computed and checked a (SHA256) hash, so we're happy with the integrity of the file.  We don't want to have to re-process the file at this point in the handling to compute another hash.  Instead we use an extension.<br>
To <span class="user-mention" data-user-id="191404">@John Moehrke</span> s point about putting a burden on recipients, the use case for us is that clients have a manifest from a trusted source that lists the SHA256 hash, and they wish to know that it corresponds with the hash of the <em>input</em> to a function that resulted in a derived artifact.  i.e., we're saying here is f(X) for that "X" over there (URL) and it had this hash when we used it to compute f(X).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
