---
layout: page
title: "FHIR Chat  · Search with multi-resource conditions · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20with.20multi-resource.20conditions.html">Search with multi-resource conditions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="198212172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20with%20multi-resource%20conditions/near/198212172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucile <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20with.20multi-resource.20conditions.html#198212172">(May 20 2020 at 15:09)</a>:</h4>
<p>Hello everyone,</p>
<p>I have a question about a search query on a FHIR API, in particular to include mother/daughter resources to the answer (using _include, _revinclude and _iterate parameters,  <a href="https://www.hl7.org/fhir/search.html#revinclude">here</a> in FHIR doc) and to specify chained parameters (<a href="https://www.hl7.org/fhir/search.html#chaining">here</a> and <a href="https://www.hl7.org/fhir/search.html#has">here</a>).</p>
<p>Here is what I want to query to the API :<br>
I wish to return Condition, AllergyIntolerance, Patient and Practitioner resources that meet all of the following conditions:</p>
<ul>
<li>patients were born in 1970 (associated search parameter of the resource Patient : birthdate=1970)</li>
<li>they’ve been diagnosed allergic to Cashew nuts (associated search parameter of the resource AllergyIntolerance: code=http://snomed.info/sct|227493005)</li>
<li>the source of the information about the allergy is a practitioner who lives in France (associated search parameter of the resource Practitioner: address-state=france)</li>
<li>patients have had fever (associated search parameter of the resource Condition: code=http://snomed.info/sct|386661006)</li>
</ul>
<p>A priori, I thought I could do a search that might look like:</p>
<div class="codehilite"><pre><span></span><code>/AllergyIntolerance?
code=http://snomed.info/sct|227493005&amp;
patient:Patient.birthdate=1970&amp;
patient:Patient:_has:Condition:code=http://snomed.info/sct|386661006&amp;
asserter:Practitioner.address-state=france&amp;
_include=AllergyIntolerance:patient&amp;
_revinclude:iterate=Condition:subject&amp;
_include=AllergyIntolerance:asserter
</code></pre></div>


<p>But I have serious doubts about the legality of the parameters: <br>
<code>patient:_has:Condition:subject:code=http://snomed.info/sct|386661006&amp;</code> and <code>_revinclude:iterate=Condition:subject</code></p>
<p>In summary, the difficulty I have comes from the fact that I want to link resources together (Allergy And Condition) that refer to Patient, but that are not linked by a reference to each other.</p>
<p>This is my first question on this forum. Feel free to tell me if it's better that I ask my question on another stream.</p>
<p>Thank you in advance for your time!</p>
<p><a href="/user_uploads/10155/7-5lmZBifq7FZME54_fuVijj/Graph_fhir-page-001.jpg">diagram of the situation</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/7-5lmZBifq7FZME54_fuVijj/Graph_fhir-page-001.jpg" title="diagram of the situation"><img src="/user_uploads/10155/7-5lmZBifq7FZME54_fuVijj/Graph_fhir-page-001.jpg"></a></div>



<a name="198213794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20with%20multi-resource%20conditions/near/198213794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20with.20multi-resource.20conditions.html#198213794">(May 20 2020 at 15:19)</a>:</h4>
<p>For chaining, the syntax would just be <code>patient.birthdate=1970</code>.  I don't know that we support chaining to _has though.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191319">@James Agnew</span> <br>
(this is the right place - and congrats on raising an evil first question :&gt;)</p>



<a name="198214323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20with%20multi-resource%20conditions/near/198214323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucile <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20with.20multi-resource.20conditions.html#198214323">(May 20 2020 at 15:22)</a>:</h4>
<p>Thank you so much for getting back to me so quickly!</p>



<a name="198215244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20with%20multi-resource%20conditions/near/198215244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Rossignol <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20with.20multi-resource.20conditions.html#198215244">(May 20 2020 at 15:28)</a>:</h4>
<p>I don't want to make assumptions about your use-case here, but most EHRs I've worked with don't support the parameters you're attempting to use. A simpler method to perform this lookup would be to pull the relevant resources via unique API calls then utilizing server-side logic to achieve your purpose with the retrieved data.</p>



<a name="198216822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20with%20multi-resource%20conditions/near/198216822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucile <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20with.20multi-resource.20conditions.html#198216822">(May 20 2020 at 15:39)</a>:</h4>
<p>It helps me a lot to know that most EHRs don't support the parameters I'm attempting to use.<br>
I'm going to do as you suggested!</p>



<a name="198233395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20with%20multi-resource%20conditions/near/198233395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20with.20multi-resource.20conditions.html#198233395">(May 20 2020 at 17:48)</a>:</h4>
<p>Wow. A chained <code>_has</code>. I have never even considered this. :)</p>
<p>Technically the correct syntax for that would be: </p>
<div class="codehilite"><pre><span></span><code>patient:Patient._has:Condition:subject:code=http://snomed.info/sct|386661006
</code></pre></div>


<p>..or just..</p>
<div class="codehilite"><pre><span></span><code>patient._has:Condition:subject:code=http://snomed.info/sct|386661006
</code></pre></div>


<p>I had my doubts this would work, but looks like HAPI is ok with it:</p>
<p><a href="http://hapi.fhir.org/baseR4/AllergyIntolerance?patient._has:Condition:subject:code=http://snomed.info/sct|386661006">http://hapi.fhir.org/baseR4/AllergyIntolerance?patient._has:Condition:subject:code=http://snomed.info/sct|386661006</a></p>



<a name="198234020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20with%20multi-resource%20conditions/near/198234020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20with.20multi-resource.20conditions.html#198234020">(May 20 2020 at 17:53)</a>:</h4>
<p>Works also fine with Vonk. Not totally uncommon, I think it came up in a few threads here.</p>



<a name="198235140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20with%20multi-resource%20conditions/near/198235140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucile <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20with.20multi-resource.20conditions.html#198235140">(May 20 2020 at 18:02)</a>:</h4>
<p>I'm so glad it's working! Thank you so much for your help.</p>



<a name="198240353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20with%20multi-resource%20conditions/near/198240353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20with.20multi-resource.20conditions.html#198240353">(May 20 2020 at 18:42)</a>:</h4>
<p>Another small correction - you probably want address_country to be France, not address-state. I suspect many French people would be dismayed that their country has become an Australian state (for example). <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="198414908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20with%20multi-resource%20conditions/near/198414908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucile <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20with.20multi-resource.20conditions.html#198414908">(May 22 2020 at 08:00)</a>:</h4>
<p>Thank you very much! Indeed I would have been surprised</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
