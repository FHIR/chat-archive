---
layout: page
title: "FHIR Chat  · search on type reference in STU3 · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html">search on type reference in STU3</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="220110213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220110213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220110213">(Dec 16 2020 at 12:40)</a>:</h4>
<p>Is it possible to construct a query (in STU3) for eg. all Communications where the sender reference is of a/is not of a particular type?</p>



<a name="220113898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220113898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220113898">(Dec 16 2020 at 13:20)</a>:</h4>
<p>/Communication?sender:Practitioner:missing=false  (as an example for Practitioner senders). This is R4.</p>



<a name="220189340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220189340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220189340">(Dec 16 2020 at 23:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191372">@René Spronk</span> that does not seem to do it even though the spec says that it seems doable. When doing <a href="http://hapi.fhir.org/baseDstu3/Communication?sender:Practitioner:missing=false">http://hapi.fhir.org/baseDstu3/Communication?sender:Practitioner:missing=false</a> I would have expected at least <a href="http://hapi.fhir.org/baseDstu3/Communication/2787907">http://hapi.fhir.org/baseDstu3/Communication/2787907</a> among the results, but an empty resultset is returned.</p>



<a name="220190064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220190064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220190064">(Dec 16 2020 at 23:51)</a>:</h4>
<p>:type:missing seems like a long shot, I doubt implementations are going to support that unless they thought of it specifically.</p>
<p>Maybe chain on ?sender:Practitioner with some trivial condition that will always be true? Or maybe ?sender._type=Practitioner</p>



<a name="220215265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220215265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220215265">(Dec 17 2020 at 07:58)</a>:</h4>
<p>:missing is defined for all parameter types, so also for reference. If HAPI decides not to support it, then it should create an error. (non supported qualifiers and comparators should cause an error, they may not be ignored).</p>



<a name="220215293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220215293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220215293">(Dec 17 2020 at 07:59)</a>:</h4>
<p>When GETting <a href="http://hapi.fhir.org/baseDstu3/Communication?sender:Practitioner:missing=false">http://hapi.fhir.org/baseDstu3/Communication?sender:Practitioner:missing=false</a> , the self link in the response is the same as the URL used, so the server supposedly processed all parts of the search URL. That's a HAPI bug.</p>



<a name="220215412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220215412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220215412">(Dec 17 2020 at 08:00)</a>:</h4>
<p>However, Paul offers a nice alternative, which appears to work just fine.</p>



<a name="220223113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220223113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220223113">(Dec 17 2020 at 09:47)</a>:</h4>
<p>thx <span class="user-mention" data-user-id="197072">@Paul Church</span>  - <a href="http://hapi.fhir.org/baseDstu3/Communication?sender._type=Practitioner">http://hapi.fhir.org/baseDstu3/Communication?sender._type=Practitioner</a> seems to fit the bill<br>
<span class="user-mention silent" data-user-id="191372">René Spronk</span> <a href="#narrow/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3/near/220215265">said</a>:</p>
<blockquote>
<p>:missing is defined for all parameter types, so also for reference. If HAPI decides not to support it, then it should create an error. (non supported qualifiers and comparators should cause an error, they may not be ignored).</p>
</blockquote>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> it sounds like I'm gonna make a issue.</p>



<a name="220223743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220223743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220223743">(Dec 17 2020 at 09:54)</a>:</h4>
<p>Now, a clarifying question: should the following be possible <a href="http://hapi.fhir.org/baseDstu3/Communication?sender._type=Device,Practitioner">http://hapi.fhir.org/baseDstu3/Communication?sender._type=Device,Practitioner</a> - meaning that the types are OR'ed - meaning either Device or Practitioner?<br>
<span class="user-mention" data-user-id="191319">@James Agnew</span> the observed current behaviour seems to omit senders with type Device, so there is another bug in there somewhere.</p>



<a name="220224107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220224107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220224107">(Dec 17 2020 at 09:58)</a>:</h4>
<p>and a follow up question. Should sender._type work for contained resources?</p>



<a name="220240241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220240241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220240241">(Dec 17 2020 at 13:05)</a>:</h4>
<p>I agree that it should be an error rather than ignored, but I'm not sure it's so clear-cut that the spec allows this combination. It certainly allows reference-field:missing, but there's not really any language about combinations of modifiers - many of which do not make sense, e.g. string-field:contains:missing.</p>



<a name="220243009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220243009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220243009">(Dec 17 2020 at 13:32)</a>:</h4>
<p>Any combination of modifiers not supported by a server should result in an error. I agree that not all modifier combinations may make sense.</p>



<a name="220307445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220307445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220307445">(Dec 17 2020 at 21:45)</a>:</h4>
<p><span class="user-mention" data-user-id="197072">@Paul Church</span> does Google support <code>?sender._type=X,Z</code></p>



<a name="220582219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220582219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220582219">(Dec 21 2020 at 13:18)</a>:</h4>
<p><span class="user-mention" data-user-id="197072">@Paul Church</span> hmmm ... my 'empirical study' says Google doesn't support it</p>



<a name="220599942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220599942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220599942">(Dec 21 2020 at 16:11)</a>:</h4>
<p>I'm off on holidays and haven't had a chance to look into it, but _type is a bit of a special case so it's possible we can't do that search.</p>



<a name="220621831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/220621831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#220621831">(Dec 21 2020 at 19:40)</a>:</h4>
<p>It would seem like a pretty useful feature, to be able to query for eg. messages (as in the case with Communication)  that was sent from practitioners to you as  a patient, at let the server do the filtering, instead of putting that load on the client</p>



<a name="221986900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20type%20reference%20in%20STU3/near/221986900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20type.20reference.20in.20STU3.html#221986900">(Jan 07 2021 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> is this something that is interesting to HAPI ?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
