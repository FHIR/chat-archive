---
layout: page
title: "FHIR Chat  · What to do when _include/$everything conflicts with scopes? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/What.20to.20do.20when.20_include.2F.24everything.20conflicts.20with.20scopes.3F.html">What to do when _include/$everything conflicts with scopes?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="266951434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/What%20to%20do%20when%20_include/%24everything%20conflicts%20with%20scopes%3F/near/266951434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/What.20to.20do.20when.20_include.2F.24everything.20conflicts.20with.20scopes.3F.html#266951434">(Jan 05 2022 at 15:47)</a>:</h4>
<p>Looking for thoughts on what your server does.<br>
If the token authorizes patient/Patient.read and patient/Observation scopes only.... if the user executes /Immunization then get a 401, easy.<br>
What if the user executes /Patient/$everything?_type=Immunization,Observation<br>
Should the server respond: </p>
<ol>
<li>401, you asked for 1+ resource types that you aren't authorized to get</li>
<li>A bundle with the Patient and Observation resources (essentially ignoring the Immunization request)</li>
</ol>
<ul>
<li>Optionally with an OperationOutcome stating Immunizations were excluded due to lack of authorization</li>
</ul>



<a name="266955034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/What%20to%20do%20when%20_include/%24everything%20conflicts%20with%20scopes%3F/near/266955034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/What.20to.20do.20when.20_include.2F.24everything.20conflicts.20with.20scopes.3F.html#266955034">(Jan 05 2022 at 16:15)</a>:</h4>
<p>any of those are legitimate policy, but it is a policy choice, not a dictate from FHIR -- see <a href="http://hl7.org/fhir/security.html#AccessDenied">http://hl7.org/fhir/security.html#AccessDenied</a></p>



<a name="266956557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/What%20to%20do%20when%20_include/%24everything%20conflicts%20with%20scopes%3F/near/266956557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/What.20to.20do.20when.20_include.2F.24everything.20conflicts.20with.20scopes.3F.html#266956557">(Jan 05 2022 at 16:28)</a>:</h4>
<p>403 not 401</p>



<a name="266958618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/What%20to%20do%20when%20_include/%24everything%20conflicts%20with%20scopes%3F/near/266958618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/What.20to.20do.20when.20_include.2F.24everything.20conflicts.20with.20scopes.3F.html#266958618">(Jan 05 2022 at 16:43)</a>:</h4>
<p>The Google implementation does #2.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
