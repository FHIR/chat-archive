---
layout: page
title: "FHIR Chat  · detection of FHIR struct · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/detection.20of.20FHIR.20struct.html">detection of FHIR struct</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="274091619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/detection%20of%20FHIR%20struct/near/274091619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/detection.20of.20FHIR.20struct.html#274091619">(Mar 04 2022 at 07:44)</a>:</h4>
<p>Various programming languages use a simple function to determine the mime-type of a given file. XML and JSON are easily detected that way - but when extending that functionality to detect application/fhir+xml (as opposed to any other XML) or application/fhir+json (versus any other JSON format) - what would be the easiest/most reliable way to detect FHIR-XML, FHIR-JSON ?</p>



<a name="274102792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/detection%20of%20FHIR%20struct/near/274102792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/detection.20of.20FHIR.20struct.html#274102792">(Mar 04 2022 at 09:33)</a>:</h4>
<p>For json I'd say the presence of a <code>resourceType</code> key, if you want to go deeper then with a corresponding valid value.</p>
<p>XML - the fhir namespace declaration, following that the presence of an element <code>id</code> with a <code>value</code> attribute.</p>
<p>Of course these are heuristics with flaws :)</p>



<a name="274106289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/detection%20of%20FHIR%20struct/near/274106289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Declan Kieran <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/detection.20of.20FHIR.20struct.html#274106289">(Mar 04 2022 at 10:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191372">René Spronk</span> <a href="#narrow/stream/179166-implementers/topic/detection.20of.20FHIR.20struct/near/274091619">said</a>:</p>
<blockquote>
<p>what would be the easiest/most reliable way to detect FHIR-XML, FHIR-JSON ?</p>
</blockquote>
<p>Using schemas, XSD or JSON schema would be the most reliable way, and maybe catching any general parsing errors when loading the xml or json document beforehand, but depending on the language you're using that's maybe built into the schema validation.  Easy if all the schemas are already done...</p>



<a name="274139833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/detection%20of%20FHIR%20struct/near/274139833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/detection.20of.20FHIR.20struct.html#274139833">(Mar 04 2022 at 14:56)</a>:</h4>
<p>Thanks - I thinks Vadim's suggestion is 'good enough' in my context, where most [but not all] of the XML/JSON being processed will be FHIR. So it's ok to err on the side of FHIR ;-)</p>
<p>Schema validation would be rather costly, and it's very FHIR release dependent. That may be proper fit with some other contexts however.</p>



<a name="274148122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/detection%20of%20FHIR%20struct/near/274148122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/detection.20of.20FHIR.20struct.html#274148122">(Mar 04 2022 at 15:50)</a>:</h4>
<p>As a note, keep in mind that the JSON <code>resourceType</code> key follows the same rules as the rest of JSON serialization - since it is unordered it does not need to be the first key in a resource.<br>
(noted because if you are using a streaming parser, you cannot guarantee knowing the type until the end of parsing instead of the beginning)</p>



<a name="274341789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/detection%20of%20FHIR%20struct/near/274341789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/detection.20of.20FHIR.20struct.html#274341789">(Mar 07 2022 at 02:08)</a>:</h4>
<p>Adding to <span class="user-mention" data-user-id="222054">@Gino Canessa</span> 's warning: <a href="https://build.fhir.org/json.html#resources">https://build.fhir.org/json.html#resources</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
