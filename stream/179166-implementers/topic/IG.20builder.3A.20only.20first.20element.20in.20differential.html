---
layout: page
title: "FHIR Chat  · IG builder: only first element in differential · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html">IG builder: only first element in differential</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153928147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin von Siebenthal <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928147">(Jan 09 2018 at 16:57)</a>:</h4>
<p>Hi, I am trying to run IG builder with the test-ig examples from FHIR svn. I tried both DSTU 3 branch and master with the respective igbuilder jar. For resources created from the spreadsheet all elements are shown in the differential view, but for the test-ig-sd example the differential view only shows the first element. Same if I try with own StructureDefinitions exported from Forge. Does that sound familiar to anyone? <a href="/user_uploads/10155/X0rjdSdpCYpkjLstzM_pH7HN/only-first-element-in-differential.PNG" target="_blank" title="only-first-element-in-differential.PNG">only-first-element-in-differential.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/X0rjdSdpCYpkjLstzM_pH7HN/only-first-element-in-differential.PNG" target="_blank" title="only-first-element-in-differential.PNG"><img src="/user_uploads/10155/X0rjdSdpCYpkjLstzM_pH7HN/only-first-element-in-differential.PNG"></a></div>



<a name="153928149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928149">(Jan 09 2018 at 17:07)</a>:</h4>
<p>If you create a profile, the differential will only show the elements listed in the spreadsheet, not everything.  Is that what's happening for you?</p>



<a name="153928150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928150">(Jan 09 2018 at 17:28)</a>:</h4>
<p>Other examples using the the IG Builder here: <a href="https://github.com/Healthedata1/IG-Sampler" target="_blank" title="https://github.com/Healthedata1/IG-Sampler">https://github.com/Healthedata1/IG-Sampler</a>   as Lloyd stated the Diff only shows only the stuff you have profiled.   The Snapshot shows everything.</p>



<a name="153928152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928152">(Jan 09 2018 at 18:01)</a>:</h4>
<p><span class="user-mention" data-user-id="194778">@Martin von Siebenthal</span> note that Forge provides a configuration setting in the Options menu to toggle saving with snapshot component (disabled by default). If you enable this option, then Forge will generate the snapshot component when saving a profile.</p>



<a name="153928167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928167">(Jan 09 2018 at 21:44)</a>:</h4>
<p>it doesn't matter whether you save the snapshot or not - the IG publisher will generate it if it wants to.</p>



<a name="153928168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928168">(Jan 09 2018 at 21:45)</a>:</h4>
<p>this immediately makes me think that the differential is out of order - the spreadsheet sorts, but if you provide a SD directly, it doesn't</p>



<a name="153928213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin von Siebenthal <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928213">(Jan 10 2018 at 07:28)</a>:</h4>
<p>Thanks for your quick replies! The StructureDefinitions I tried have multiple elements profiled, both the test-ig example and my own. The problem is that I only get the first of them displayed in differential. I don't know where in the chain it goes wrong. But the intermediate *-sd.csv that is built in the temp folder already has only the first profiled element correct. Multiplicities of the other profiled elements are as in the base resource and not taken from the SD xml. test-ig-sd.xml has only one multiplicity constraint. But it has for example a mustSupport on generalPractitioner which does not make it to the test-ig-sd.csv.</p>



<a name="153928215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin von Siebenthal <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928215">(Jan 10 2018 at 07:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  which order do you mean? The order in which the elements in the differential appear compared to the order in the base resource SD? This looks the same. The test-ig-sd.xml has the constrained elements in the same order as the base resource: Patient.active, Patient.gender, ....., Patient.generalPractitioner. Or how does the spreadsheet sort?</p>



<a name="153928263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928263">(Jan 10 2018 at 14:46)</a>:</h4>
<p>Double check what version you're declaring.  Patient.active has moved around.  If you're building against the wrong version of FHIR, the sort order would be wrong.</p>



<a name="153928275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin von Siebenthal <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928275">(Jan 10 2018 at 15:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> In the json control file I have "specification": “http://hl7.org/fhir/” and “version” : “3.0.1”.<br>
In the tests\ig30\resources\test-ig-sd.xml I changed fhirVersion value="1.4.0" to “3.0.1” but no change. The forge example profile sd.xml already said version “3.0.1” when exported from Forge. <br>
IG publisher says "Definitions 3.0.1.-11917" when running.<br>
Anywhere else where I may be pointing to a too old version? Thanks for your help.</p>



<a name="153928278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928278">(Jan 10 2018 at 16:19)</a>:</h4>
<p>I would have expected the change from 1.4.0 to 3.0.1 would do it.  I can't think of anything else that would be relevant.  Are you able to post your differential?</p>



<a name="153928282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin von Siebenthal <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928282">(Jan 10 2018 at 16:43)</a>:</h4>
<p>You mean post here? I am just trying to use the tests\ig30 example from FHIR svn, where the differential on the patient is  <br>
&lt;differential&gt;  <br>
  &lt;!-- <br>
    make active required<br>
    fix the type for deceased<br>
    fix the value for gender<br>
    constrain birthdate<br>
  --&gt;<br>
  &lt;element&gt;<br>
    &lt;path value="Patient.active"/&gt;<br>
    &lt;min value="1"/&gt;<br>
  &lt;/element&gt;<br>
  &lt;element&gt;<br>
    &lt;path value="Patient.gender"/&gt;<br>
    &lt;fixedCode value="female"/&gt;<br>
  &lt;/element&gt;<br>
  &lt;element&gt;<br>
    &lt;path value="Patient.birthDate"/&gt;<br>
    &lt;constraint&gt;<br>
      &lt;key value="tst-1"/&gt;<br>
      &lt;severity value="error"/&gt;<br>
      &lt;human value="A full date is required"/&gt;<br>
      &lt;expression value="length() = 8"/&gt;<br>
    &lt;/constraint&gt;<br>
  &lt;/element&gt;<br>
  &lt;element&gt;<br>
    &lt;path value="Patient.deceased[x]"/&gt;<br>
    &lt;type&gt;<br>
      &lt;code value="dateTime"/&gt;<br>
    &lt;/type&gt;<br>
    &lt;mustSupport value="true"/&gt;<br>
  &lt;/element&gt;<br>
  &lt;element&gt;<br>
    &lt;path value="Patient.generalPractitioner"/&gt;<br>
    &lt;type&gt;<br>
      &lt;code value="Reference"/&gt;<br>
      &lt;profile value="http://hl7.org/fhir/StructureDefinition/Organization"/&gt;<br>
      &lt;aggregation value="contained"/&gt;<br>
    &lt;/type&gt;<br>
    &lt;mustSupport value="true"/&gt;<br>
  &lt;/element&gt;<br>
 &lt;/differential&gt;</p>
<p>I tried one on CareTeam with only multiplicities (my forge example. Just clicked some, not trying to make clinical sense in this example):</p>
<p>&lt;differential&gt;<br>
    &lt;element id="CareTeam.subject"&gt;<br>
      &lt;path value="CareTeam.subject" /&gt;<br>
      &lt;min value="1" /&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="CareTeam.context"&gt;<br>
      &lt;path value="CareTeam.context" /&gt;<br>
      &lt;min value="1" /&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="CareTeam.period"&gt;<br>
      &lt;path value="CareTeam.period" /&gt;<br>
      &lt;min value="1" /&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="CareTeam.reasonCode"&gt;<br>
      &lt;path value="CareTeam.reasonCode" /&gt;<br>
      &lt;min value="1" /&gt;<br>
      &lt;max value="1" /&gt;<br>
      &lt;mustSupport value="true" /&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="CareTeam.reasonReference"&gt;<br>
      &lt;path value="CareTeam.reasonReference" /&gt;<br>
      &lt;min value="1" /&gt;<br>
      &lt;max value="1" /&gt;<br>
    &lt;/element&gt;<br>
    &lt;element id="CareTeam.note"&gt;<br>
      &lt;path value="CareTeam.note" /&gt;<br>
      &lt;min value="1" /&gt;<br>
      &lt;max value="1" /&gt;<br>
    &lt;/element&gt;<br>
  &lt;/differential&gt;</p>



<a name="153928289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928289">(Jan 10 2018 at 17:33)</a>:</h4>
<p>That looks fine for 3.0.1.  Can you attach the StructureDefinition that's generated by the build process?</p>



<a name="153928290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928290">(Jan 10 2018 at 17:35)</a>:</h4>
<p>Look at the qa.html  file to see what is wrong with the StructureDefinition for this profile <code>test-ig-sd.xml</code> its missing the id element and the order of elements is wrong.  I think that is the problemo</p>



<a name="153928292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928292">(Jan 10 2018 at 17:37)</a>:</h4>
<p>What's wrong with the order?</p>



<a name="153928305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928305">(Jan 10 2018 at 18:05)</a>:</h4>
<p><code>date</code> was in the wrong place.  After fixing the qa issues, I can't get it to render either.  it will only display a single element in the diff even if comment out active will only display gender etc.   Mysterious.</p>



<a name="153928306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928306">(Jan 10 2018 at 18:14)</a>:</h4>
<p>here is my modified sd.xml file<a href="/user_uploads/10155/vxWtOd3DuTLDEkSrizz9doHO/test-ig-sd.xml" target="_blank" title="test-ig-sd.xml">test-ig-sd.xml</a></p>



<a name="153928395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928395">(Jan 11 2018 at 09:51)</a>:</h4>
<p>The Patient.generalPractitioner element has an invalid profile constraint. This should be a typeProfile constraint, since the referenced profile constrains the target of the reference (Organization), not the reference itself.<br>
Don't know if this fixes the rendering error...</p>



<a name="153928404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin von Siebenthal <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928404">(Jan 11 2018 at 10:11)</a>:</h4>
<p>I'm getting the same "only first profiled element" symptom in rendering with above CareTeam differential, which only has multiplicities and a mustSupport.... indeed mysterious as some of the IG sampler examples such as structuredefinition-template-basic2.xml are also xml (non-spreadsheet)  based and properly generated Dec 13, 2017...???</p>



<a name="153928410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928410">(Jan 11 2018 at 10:55)</a>:</h4>
<p>does anyone have an example of this that is open source somewhere so I can have a look at it?</p>



<a name="153928420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin von Siebenthal <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928420">(Jan 11 2018 at 13:07)</a>:</h4>
<p>I have my dummy example that I can zip and post. Here? Or do you have a location where I can drop it?</p>



<a name="153928462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928462">(Jan 11 2018 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>   look at   /tests/ig30 out of the build.</p>



<a name="153928463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928463">(Jan 11 2018 at 19:12)</a>:</h4>
<p>and run it out of the box and you will see profile #1 only list the first element in the diff</p>



<a name="153928491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/IG%20builder%3A%20only%20first%20element%20in%20differential/near/153928491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/IG.20builder.3A.20only.20first.20element.20in.20differential.html#153928491">(Jan 11 2018 at 20:25)</a>:</h4>
<p>ok</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
