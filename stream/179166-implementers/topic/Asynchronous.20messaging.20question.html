---
layout: page
title: "FHIR Chat  · Asynchronous messaging question · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html">Asynchronous messaging question</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="211948824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/211948824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sanjaai <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#211948824">(Oct 01 2020 at 17:56)</a>:</h4>
<p>Hi,<br>
 We are planning to develop a FHIR asynchronous messaging between two entities to exchange documents using bundle based messaged as described here under the async interaction pattern here <a href="https://www.hl7.org/fhir/messaging.html#async">https://www.hl7.org/fhir/messaging.html#async</a>.<br>
Page indicates that sender and received can get their latest messages and acknowledgements using time based queries such as  <br>
GET [base]/Bundle?message.destination-uri=[rcv]&amp;_lastUpdated=&gt;2015-03-01T02:00:02+01:00</p>
<p>We are also floating an idea to track read status(pending/read/ failed) at the server, and also provide a custom query parameter to query by read/acknowledgement status.<br>
While I acknowledge this is technically possible, we are discussing whether this in line with general design goals of this message pattern.<br>
Mainly, we are introducing read status and acknowledgement into the server, which are meant for the two endpoints involved. <br>
Query parameter is representing something not tracked or contained within resources  (i.e. read, pending)<br>
Does fhir provide any other mechanism to track user activity on read/pending statuses of resources in general ( primarily meant for improve client experience, in this case )</p>
<p>Like to hear the thoughts from the community, </p>
<p>Thanks <br>
Sanjaai</p>



<a name="211962224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/211962224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#211962224">(Oct 01 2020 at 19:31)</a>:</h4>
<p>I have a customer who has done something like that, but rather than trying to track 'read' status (which is hard), their workflow calls for the client to submit a batch of 'deletes' for the resources they've successfully read and written to persistent store (and which thus no longer need to be stored on the intermediary mailbox system).  Obviously the mailbox retains an audit log of everything that's passed through.</p>



<a name="211962281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/211962281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#211962281">(Oct 01 2020 at 19:31)</a>:</h4>
<p>Anything that isn't deleted will show up on the next query and presumably get deleted then if it somehow gets missed the first round.</p>



<a name="217778940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/217778940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#217778940">(Nov 24 2020 at 16:35)</a>:</h4>
<p>Follow-up question on Async Messaging.</p>
<p>As part of the acknowledgement message, we would like to add an additional destination/recipient on this acknowledgement. Does this break any rules and/or expectations on how Async Messaging should work?</p>



<a name="217779627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/217779627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#217779627">(Nov 24 2020 at 16:40)</a>:</h4>
<p>The original message from Sender A is being sent to Destination [B, C] (two destinations). On the acknowledgement response, Destination B is responding to originating Sender A.<br>
1) What should Destination B do with Destination C from the originating message? The guidance in the Async Messaging documentation is that Sender and Destination are inverted, but doesn't talk about how to deal w/ multiple destinations.<br>
2) On the acknowledgement from Destination B, could Destination B "cc" Destination C on the acknowledgement?</p>



<a name="217786791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/217786791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#217786791">(Nov 24 2020 at 17:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> for guidance/feedback</p>



<a name="217794062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/217794062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#217794062">(Nov 24 2020 at 18:23)</a>:</h4>
<p>In general, an acknowledgement goes from whichever destination received the message to the sender. Expecting/requiring that an acknowledgement will also go to a third party (even if it was one of the destinations in the original message) seems to be a custom/non-standard behavior.</p>
<p>If you have complex workflow orchestration  requirements, have you looked <a href="http://build.fhir.org/branches/argonaut-subscription/subscriptions.html">at subscriptions</a>, and the RESTful API?</p>



<a name="217948145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/217948145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#217948145">(Nov 25 2020 at 22:48)</a>:</h4>
<p>Is the question whether B is responsible for routing to C or whether it can assume that it's A's responsibility to get it to C?  I would have presumed the former.  In the end, there would be two acknowledgment messages, one from B and one from C with a destination of A.</p>



<a name="218037780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/218037780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Mota <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#218037780">(Nov 26 2020 at 20:57)</a>:</h4>
<p>Basically the scenario is this:<br>
Sender A sends the message to Org B and Org C through an intermediary messaging system.<br>
Org B attempts to process the message (async) and determines there was a fatal-error in doing so.<br>
Org B send the appropriate error response to Sender A via the intermediary message system, however, because it's an error Org B also wants to send the response to Org C for their records.</p>



<a name="218042572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/218042572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#218042572">(Nov 26 2020 at 22:28)</a>:</h4>
<p>I don't think there's any standard mechanism for C to receive B's response.</p>



<a name="218105695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/218105695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Mota <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#218105695">(Nov 27 2020 at 15:53)</a>:</h4>
<p>Okay so then i guess in this situation, the most appropriate path forward would be for Org B to instead send a new message to Org C containing the appropriate data?</p>



<a name="218114347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Asynchronous%20messaging%20question/near/218114347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Asynchronous.20messaging.20question.html#218114347">(Nov 27 2020 at 17:26)</a>:</h4>
<p>Either that or A could wrap B's response and pass it on to C (if B and C don't know how to talk to each other)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
