---
layout: page
title: "FHIR Chat  · StructureDefinition with slice on choice · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html">StructureDefinition with slice on choice</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153858990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153858990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153858990">(Nov 29 2016 at 18:14)</a>:</h4>
<p>StructureDefinition/ElementDefinition has this rule about slicing:<br>
"An element with a cardinality of 0..1 and a choice of multiple types can be sliced by type. This is in order to specify different constraints for different types. In this case, the discriminator SHALL be "@type""<br>
Does anyone know any examples of how this is represented?<br>
Ex: Trying to figure out if the element with "slicing" should have a path of "Observation.effective[x]" and a discriminator of "@type". Then does that mean that children of the slice should have a path of "Observation.effective[x].effectiveDateTime"?</p>



<a name="153858991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153858991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153858991">(Nov 29 2016 at 18:14)</a>:</h4>
<p>that doesn't seem right to me... but not sure what is</p>



<a name="153859000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859000">(Nov 29 2016 at 18:39)</a>:</h4>
<p>there is an example in US Lab Diagnostic Order</p>



<a name="153859002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859002">(Nov 29 2016 at 18:41)</a>:</h4>
<p>where is that at? not seeing it under "Examples" of StructureDefinition</p>



<a name="153859005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859005">(Nov 29 2016 at 18:45)</a>:</h4>
<p>Ok. Maybe I found it... I see this:</p>



<a name="153859006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859006">(Nov 29 2016 at 18:45)</a>:</h4>
<div class="codehilite"><pre>&lt;element&gt;
  &lt;path value=&quot;DiagnosticOrder.extension.valueReference&quot;/&gt;
  &lt;short value=&quot;Value of extension&quot;/&gt;
  &lt;definition value=&quot;Value of extension - may be a resource or one of a constrained set of the data types (see
   Extensibility in the spec for list).&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;max value=&quot;1&quot;/&gt;
  &lt;base&gt;
    &lt;path value=&quot;Extension.value[x]&quot;/&gt;
    &lt;min value=&quot;0&quot;/&gt;
    &lt;max value=&quot;1&quot;/&gt;
  &lt;/base&gt;
  &lt;type&gt;
    &lt;code value=&quot;Reference&quot;/&gt;
    &lt;profile value=&quot;http://hl7.org/fhir/StructureDefinition/uslab-pract&quot;/&gt;
  &lt;/type&gt;
  &lt;mustSupport value=&quot;true&quot;/&gt;
  &lt;mapping&gt;
    &lt;identity value=&quot;rim&quot;/&gt;
    &lt;map value=&quot;N/A&quot;/&gt;
  &lt;/mapping&gt;
&lt;/element&gt;
</pre></div>



<a name="153859007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859007">(Nov 29 2016 at 18:45)</a>:</h4>
<p>But I see nothing about slicing in this example...</p>



<a name="153859008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859008">(Nov 29 2016 at 18:45)</a>:</h4>
<p>is it just the use of &lt;base&gt; that makes this work?</p>



<a name="153859010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859010">(Nov 29 2016 at 18:47)</a>:</h4>
<p>in the R2 version, you can find @type used as a descriminator</p>



<a name="153859011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859011">(Nov 29 2016 at 18:48)</a>:</h4>
<p>what about STU3?</p>



<a name="153859014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859014">(Nov 29 2016 at 18:53)</a>:</h4>
<p>STU3 is hard to search because the IGs have been moved out of the spec. I see if on DAF2 condition on onset[x] though</p>



<a name="153859019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859019">(Nov 29 2016 at 19:07)</a>:</h4>
<p>ok</p>



<a name="153859021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859021">(Nov 29 2016 at 19:07)</a>:</h4>
<p>I think I see what you're talking about</p>



<a name="153859022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859022">(Nov 29 2016 at 19:07)</a>:</h4>
<p>having multiple &lt;type&gt; for each type supported</p>



<a name="153859023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859023">(Nov 29 2016 at 19:07)</a>:</h4>
<p>but that rule about slicing in my first post confuses me then</p>



<a name="153859024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859024">(Nov 29 2016 at 19:07)</a>:</h4>
<p>it seems to indicate that I should use slicing</p>



<a name="153859025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859025">(Nov 29 2016 at 19:07)</a>:</h4>
<p>not type</p>



<a name="153859026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859026">(Nov 29 2016 at 19:08)</a>:</h4>
<p>further-more, how do I say valueCodeableConcept should be bound to a value set</p>



<a name="153859027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859027">(Nov 29 2016 at 19:08)</a>:</h4>
<p>&lt;type&gt; doesn't seem to include any binding information</p>



<a name="153859028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859028">(Nov 29 2016 at 19:11)</a>:</h4>
<p>that's when you have to slice by @type - so you can make different constraints for different types</p>



<a name="153859029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859029">(Nov 29 2016 at 19:12)</a>:</h4>
<p>tell me if you think this pseudo structuredefn is correct:</p>



<a name="153859030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859030">(Nov 29 2016 at 19:14)</a>:</h4>
<p>&lt;element&gt;<br>
  &lt;path value="Observation.extension.value[x]" /&gt;<br>
  &lt;min value="1" /&gt;<br>
  &lt;max value="2" /&gt;<br>
  &lt;slicing&gt;<br>
    &lt;discriminator value="@type" /&gt;<br>
  &lt;/slicing&gt;<br>
&lt;/element&gt;<br>
&lt;element&gt;<br>
  &lt;path value="Observation.extension.valueCodeableConcept" /&gt;<br>
  ... bindings ...<br>
&lt;/element&gt;</p>



<a name="153859031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859031">(Nov 29 2016 at 19:18)</a>:</h4>
<p>yes I think so</p>



<a name="153859032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859032">(Nov 29 2016 at 19:19)</a>:</h4>
<p>ok. good enough for me, for now, then</p>



<a name="153859033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859033">(Nov 29 2016 at 19:19)</a>:</h4>
<p>:)</p>



<a name="153859034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859034">(Nov 29 2016 at 19:20)</a>:</h4>
<p>wish I knew why zulip code-blocked by first xml, but not the second</p>



<a name="153859039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153859039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153859039">(Nov 29 2016 at 19:21)</a>:</h4>
<p>oh... maybe because of the "...bindings..."</p>



<a name="153860185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/StructureDefinition%20with%20slice%20on%20choice/near/153860185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/StructureDefinition.20with.20slice.20on.20choice.html#153860185">(Dec 04 2016 at 08:56)</a>:</h4>
<p>For a slicing example check out <a href="http://healthedatainc.com/go-ftp/US-Core/structuredefinition-us-core-observationresults.html" target="_blank" title="http://healthedatainc.com/go-ftp/US-Core/structuredefinition-us-core-observationresults.html">http://healthedatainc.com/go-ftp/US-Core/structuredefinition-us-core-observationresults.html</a>.  Did it to specify the bindings.  Although having tried to use this core profile, I wound up having to reslice which I'd rather avoid.  Would creating an invariant to avoid reslicing work here?  e.g if type a then bind to A if type b then bind to B.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
