---
layout: page
title: "FHIR Chat  · GET query -- only entries that conform to a profile · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html">GET query -- only entries that conform to a profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153885762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885762">(Apr 24 2017 at 17:05)</a>:</h4>
<p>Is there a way in a GET to indicate to the server that the client wants only entries that conform to a named profile?</p>



<a name="153885763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885763">(Apr 24 2017 at 17:15)</a>:</h4>
<p>I recognize the _profile query parameter... but how does the fact that the resources on the server 'are' compliant with that profile known? </p>



<a name="153885765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885765">(Apr 24 2017 at 17:39)</a>:</h4>
<p>Supplying an explicit parameter presumably only returns resources that include the specified profile annotation -- but how that annotation got there is a  server dependent phenomenon (so some servers could faithfully pass through all client-originated annotations even if they were lies; other servers could validate client annotations; and still other servers could proactively apply new annotations based on analysis of a given resource)</p>



<a name="153885767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885767">(Apr 24 2017 at 17:41)</a>:</h4>
<p>yes, that is the non-deterministic problem we are struggling with... that and how do we specify that the server MUST validate all Create/Update actions against our profile.</p>



<a name="153885771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885771">(Apr 24 2017 at 17:54)</a>:</h4>
<p>You can do all sorts of things with ImplementationGuide text.  But it's not something you can currently express in a CapabilityStatement</p>



<a name="153885775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885775">(Apr 24 2017 at 18:40)</a>:</h4>
<p>Im not even sure how to express this need in narrative business requirement. Take the case where a profile on Location wants to assure that the <a href="http://Location.name" target="_blank" title="http://Location.name">Location.name</a> must be filled. How do I represent that a Server shall not return entries that have <a href="http://Location.name" target="_blank" title="http://Location.name">Location.name</a> empty? That is to say, how does a client indicate that they don't want Locations that have no <a href="http://Location.name" target="_blank" title="http://Location.name">Location.name</a> value?</p>



<a name="153885777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885777">(Apr 24 2017 at 18:51)</a>:</h4>
<p>The normal HTTP GET expectation is that the server returns results that match the query parameters that it understood. These results might or might not have profile conformance. These results might even be more than the client wanted, due to the server not implementing the query prameters provided.</p>



<a name="153885780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885780">(Apr 24 2017 at 18:54)</a>:</h4>
<p>location:missing=false</p>



<a name="153885782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885782">(Apr 24 2017 at 19:00)</a>:</h4>
<p>interesting.. but are you serious? A client that wants this needs to include each parameter cardionality requirement? What about elements that don't have a parameter?</p>



<a name="153885783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885783">(Apr 24 2017 at 19:02)</a>:</h4>
<p>I don't know whether I'm serious. What you are asking is.... difficult. Does the client really want to ignore locations that have no name? </p>



<a name="153885784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885784">(Apr 24 2017 at 19:02)</a>:</h4>
<p>every time I've gamed this out in reality, it's always come back to, the application wishes to live in a reality where all locations have a name. </p>



<a name="153885785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885785">(Apr 24 2017 at 19:03)</a>:</h4>
<p>sometimes, that's achievable, and we have a conformance mechanism to deal with that. </p>



<a name="153885786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885786">(Apr 24 2017 at 19:03)</a>:</h4>
<p>the xample of name is an example of a constraint... I could have been more persuasive on the need for the constraint... but ultimetly there is a general solution needed</p>



<a name="153885787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885787">(Apr 24 2017 at 19:03)</a>:</h4>
<p>but simply naming a profile, and expecting the server to magically figure out how to filter records for conformance to the profile... it's always seem computationally unfeasible to us </p>



<a name="153885788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885788">(Apr 24 2017 at 19:04)</a>:</h4>
<p>I don't like that either... I have tried to argue that the constaints are not something one applys to a Query; they are rules you apply on Create/Update.</p>



<a name="153885789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153885789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153885789">(Apr 24 2017 at 19:05)</a>:</h4>
<p>but... I needed to ask if there was a solution... because right now we are profiling only the GET side, not Create/Update.... </p>



<a name="153886108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153886108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153886108">(Apr 26 2017 at 08:54)</a>:</h4>
<p>And for the location resource, there are some types of locations where a name just doesn't make sense, specifically where they are only recording the geo-code co-ordinates. So the constraint to force a name would result in it being filled with junk.</p>



<a name="153886132"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153886132" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153886132">(Apr 26 2017 at 12:17)</a>:</h4>
<p>The question is not specific to Location  resource... it is a question about any Resource... It is not specific to <a href="http://Location.name" target="_blank" title="http://Location.name">Location.name</a>, that was just an example of a string that some application may want not empty. The question is, is there a way a client can ask that results be constrained to only results that are compliant to a specified Profile? -- It seems not, and I am not thinking this is an important need. I just didn't want to ignore a capability that exists when there was moderate interest in using that capability, if it existed.</p>



<a name="153886230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153886230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153886230">(Apr 26 2017 at 20:52)</a>:</h4>
<p>(I have a similar use case where I want to filter the returned with a profile, to get a similar effect to _elements or _summary, where the profile is used to mask the properties - I believe some others have done something similar)</p>



<a name="153887511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153887511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153887511">(May 06 2017 at 10:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> We implemented this (partially) as part of our profile governed API system.  <code>GET /patient?_profile:evaluate=http://example.com/fhir/some-profile</code> asks the server to ensure that returned resources meet the profile. We implemented by parsing the profile and pulling out "limiting" parts of the profile such as max=0, fixed[x], minValue[x], etc. and converting those parts to persistence layer queries (ElasticSearch in our case).  The resulting candidates are then washed thru the validator if needed (additional expressions to evaluate).</p>



<a name="153887513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153887513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153887513">(May 06 2017 at 10:27)</a>:</h4>
<p>It's smart enough to "build" on pre-validated content.  E.g. since all Patients already conform to the standard profile, no expressions from that profile are loaded.  In our case, they already conform to the enterprise profile as well, so that's even fewer checks.</p>



<a name="153887514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153887514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153887514">(May 06 2017 at 10:31)</a>:</h4>
<p>I think we should use this as an example of a more common need. Is this a need that is best served by breaking the resource into more 'right sized' Resource? Is this need that should be built into a more reusable pattern? etc. Seems like a job for FHIR-I and Security to work together.</p>



<a name="153887516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GET%20query%20--%20only%20entries%20that%20conform%20to%20a%20profile/near/153887516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GET.20query.20--.20only.20entries.20that.20conform.20to.20a.20profile.html#153887516">(May 06 2017 at 10:41)</a>:</h4>
<p>Our use case is more about semantic definition - we create sets of profiles for integrated contexts, usually a clinical specialty, and use those profiles to govern communication with the FHIR server for app access and ultimately for analytics.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
