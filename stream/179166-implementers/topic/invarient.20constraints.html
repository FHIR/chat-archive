---
layout: page
title: "FHIR Chat  · invarient constraints · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html">invarient constraints</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153823008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823008">(Apr 25 2016 at 21:23)</a>:</h4>
<p>What if the base constraint says  "Only  If A is true"  and the profile says "Only if A is false"?   Is there a  way to validate the profile has properly constrained the invarient?  Or do you figure it out when you start validate profile instances?  </p>



<a name="153823019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823019">(Apr 26 2016 at 00:33)</a>:</h4>
<p>I can't validate that invariants clash like that</p>



<a name="153823020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823020">(Apr 26 2016 at 00:33)</a>:</h4>
<p>there just isn't any instances that can satisfy that profile</p>



<a name="153823030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823030">(Apr 26 2016 at 01:33)</a>:</h4>
<p>In principle, we could use OWL to test those (if we figure out an algorithm to express all FluentPaths in OWL), but we're a ways away from that level of sophistication</p>



<a name="153823031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823031">(Apr 26 2016 at 01:34)</a>:</h4>
<p>pfft. in theory. man. I have the full object model and I know as much about the constraints as anyone. And I have no clue how I could realistically infer from what I know that there's ( A) no instances that are valid and ( B) that's not what you want</p>



<a name="153823035"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823035" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823035">(Apr 26 2016 at 01:37)</a>:</h4>
<p>Well, I think we can presume that no valid instances is never the desired outcome.  To test, we'd enforce all the constraints and then assert that there's at least one valid instance and see if the reasoner blows up.</p>



<a name="153823037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823037">(Apr 26 2016 at 01:38)</a>:</h4>
<p>(but it doesn't blow up if you remove the assertion there's at least one instance)</p>



<a name="153823041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823041">(Apr 26 2016 at 01:49)</a>:</h4>
<p>how do you infer whats' a valid instance from a expression that defines what isn't a valid instance? </p>



<a name="153823042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823042">(Apr 26 2016 at 01:49)</a>:</h4>
<p>that's rather harder than it sounds </p>



<a name="153823107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823107">(Apr 26 2016 at 13:59)</a>:</h4>
<p>You don't have to.  With the test I described, the reasoner will simply test if any instance is possible.  It won't evaluate whether the possible instance is "useful" though.</p>



<a name="153823111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823111">(Apr 26 2016 at 14:01)</a>:</h4>
<p>going to brute force an infinite space, are you? </p>



<a name="153823160"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/invarient%20constraints/near/153823160" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/invarient.20constraints.html#153823160">(Apr 26 2016 at 15:44)</a>:</h4>
<p>There's nothing brute force about it.  If you've got one constraint that says "must have A or B but not both" and a separate constraint that says "If A or B then must be both" and you put those together, then the reasoner will simply say "ok, there can't be any instances of this".  If you add a separate assertion that there is an instance, the reasoner will blow up.  It doesn't brute force anything, it just checks for consistency.  That said, my experience with this sort of testing is it's not exactly super fast.  Not the kind of thing we'd want to do at run-time</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
