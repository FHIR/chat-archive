---
layout: page
title: "FHIR Chat  · Can you Specialize a Constrained StructureDefinition? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html">Can you Specialize a Constrained StructureDefinition?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153963914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963914">(May 21 2018 at 20:31)</a>:</h4>
<p>Is it possible to create a StructureDefinition whose derivation is "specialization" and whose baseDefinition is a StructureDefinition whose derivation is "constraint"?  It appears that this is not possible if the parent SD has a sliced element (because of sdf-1 unique path rule) but if the baseDefinition has not sliced, then I don't see any constraint that would prevent this. Is it legal?</p>



<a name="153963915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963915">(May 21 2018 at 20:57)</a>:</h4>
<p>we've certainly not thought about this before. I don't know whether it's legal or whether the tools support it.</p>



<a name="153963916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963916">(May 21 2018 at 20:58)</a>:</h4>
<p>but I wonder whether you really need it...</p>



<a name="153963917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963917">(May 21 2018 at 21:01)</a>:</h4>
<p>Yes, we need it in CIMI. We build hierarchies in the logical model and apply constraints intermixed with definition of new "native" properties. It would be good to actually have a way in logical models to do <em>both</em> constraints and new elements in the same SD, and use that as a baseDefinition for another SD that adds <em>both</em> constraints and new elements, etc.</p>



<a name="153963918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963918">(May 21 2018 at 21:02)</a>:</h4>
<p>i wonder whether you really do. you can apply constraints to existing elements in a specialization</p>



<a name="153963919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963919">(May 21 2018 at 21:07)</a>:</h4>
<p>Really?   I thought that was illegal to add constraints to a specialization. That's what Chris Moesel says -- didn't you say that to him? <br>
<a href="#narrow/stream/4-implementers/topic/Logical.20Models.20and.20Inheritance" title="#narrow/stream/4-implementers/topic/Logical.20Models.20and.20Inheritance">https://chat.fhir.org/#narrow/stream/4-implementers/topic/Logical.20Models.20and.20Inheritance</a></p>



<a name="153963920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963920">(May 21 2018 at 21:09)</a>:</h4>
<p>so there's some misunderstanding there. You can't mix both. but adding constraints to an element is not what I had in mind there - you can do that when specializing. kind = constraint vs kind = specialization has special meaning in the typing system, but is orthogonal to adding constraints to an existing element</p>



<a name="153963921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963921">(May 21 2018 at 21:10)</a>:</h4>
<p>my apologies to <span class="user-mention" data-user-id="191469">@Chris Moesel</span> if that means I misunderstood him</p>



<a name="153963923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963923">(May 21 2018 at 21:12)</a>:</h4>
<p>I don't know if you misunderstood me or I misunderstood you, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, but apology accepted and likewise extended if applicable. ;-)</p>



<a name="153963926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963926">(May 21 2018 at 21:13)</a>:</h4>
<p>well, generally, misunderstandings are mutual.</p>



<a name="153963927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963927">(May 21 2018 at 21:15)</a>:</h4>
<p>So to be clear, if A has an element <code>mycode</code>, and B is a specialization of A, then B can apply a new constraint on the inherited <code>mycode</code> element?</p>



<a name="153963928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963928">(May 21 2018 at 21:15)</a>:</h4>
<p>but let's try and be clear:</p>
<ul>
<li>you can't mix constraint and specialization, because they are mutually exclusive in the typing system</li>
<li>but when specializing a structure, you can add new rules about an existing element:<br>
** tighter bindings<br>
** new invariants<br>
** narrower documentation<br>
** tighter cardinality constraints</li>
</ul>



<a name="153963929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963929">(May 21 2018 at 21:16)</a>:</h4>
<p>and possible others... and yes, a new constraint</p>



<a name="153963930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963930">(May 21 2018 at 21:16)</a>:</h4>
<p>And, see my original message, it seems slicing might be an exception, because of the unique path invariant?</p>



<a name="153963931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963931">(May 21 2018 at 21:17)</a>:</h4>
<p>yes, slicing is an exception</p>



<a name="153963932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963932">(May 21 2018 at 21:17)</a>:</h4>
<p>just like you couldn't slice in an OO class</p>



<a name="153963933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963933">(May 21 2018 at 21:17)</a>:</h4>
<p>Thanks!</p>



<a name="153963934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963934">(May 21 2018 at 21:17)</a>:</h4>
<p>no problems</p>



<a name="153963949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963949">(May 21 2018 at 22:51)</a>:</h4>
<p>Just a thought -- but -- since slicing is an outlier -- would you be open to a tracker that proposed removing constraint sdf-1?</p>



<a name="153963950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Can%20you%20Specialize%20a%20Constrained%20StructureDefinition%3F/near/153963950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Can.20you.20Specialize.20a.20Constrained.20StructureDefinition.3F.html#153963950">(May 21 2018 at 22:55)</a>:</h4>
<p>we can certainly talk about it. But I'm extremely dubious about the idea. Slicing is hard. And I think that it's important to be able to generate code for concrete classes</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
