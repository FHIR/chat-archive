---
layout: page
title: "FHIR Chat  · cardinality and :not · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html">cardinality and :not</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153950001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950001">(Apr 02 2018 at 22:43)</a>:</h4>
<p>I'm trying to understand the application of :not in the presence of different cardinalities for values.<br>
Given a resource with a SNOMED and ICD-10 code of <em>SOMESNOMEDCODE</em> and <em>SOMEICD10CODE</em><br>
Does Condition?code:not=<em>SOMESNOMEDCODE</em> match that resources because it has a code that doesn't match <em>SOMESNOMEDCODE</em> (specifically <em>SOMEICD10CODE</em>).</p>
<p>Taking this a step further.  If I have two security flags on a Condition resource, call them <em>SFLAG1</em> and <em>SFLAG2</em><br>
does Condition?_security:not=<em>SFLAG1</em> match that resource because it has <em>SFLAG2</em> which is NOT <em>SFLAG1</em>?</p>
<p>Or does Resource?<em>searchkey</em>:not=<em>SOMEVALUE</em> for resource X mean that Resource X has NO <em>searchkey</em> value that matches <em>SOMEVALUE</em>?</p>
<p>I THINK this has been SOMEWHAT clarified in STU4 current code in this text:<br>
 GET [base]/Composition?section:not=48765-2<br>
Search for any Composition that does not contain an Allergies and adverse reaction section. Note that this search does not return "any document that has a section that is not an Allergies and adverse reaction section" (e.g. in the presence of multiple possible matches, <em>the negation applies to the set, not each individual entry</em>)</p>
<p>But I am not entirely certain, since this text is new and not entirely clear.</p>
<p>Is there any variation of interpretation different in STU2, 3 and 4 intended?  In implementations?</p>



<a name="153950003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950003">(Apr 02 2018 at 22:47)</a>:</h4>
<p>we clarified this in R4 - it was not clarifed until then and different implementations did different things</p>



<a name="153950004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950004">(Apr 02 2018 at 22:47)</a>:</h4>
<p>what is not clear about the R4 documentation?</p>



<a name="153950009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950009">(Apr 02 2018 at 22:52)</a>:</h4>
<p>Well, first of off, it went to the deep case of Composition.section.code, instead of the simpler case of _tag, _security or other cases where there could be multiple codings (not using CodeableConcept) or identifiers, and so it took interpretation to work back to the simpler case.  Also, Composition.section is confusing since it (as a search term) refers to Composition.section.code, and as a resource field, to a BackboneElement (both with Cardinality &gt; 1), so it took some thinking to understand what was meant.  I think that code:not=foo means HAS NO CODE with the value of foo, rather than has at least one code that does not have the value of foo, and that's what I eventually got out of the R4 documentation, but like I said, it was a bit of a struggle because of cognitive dissonance present in the example.  A simpler example preceding the more complex one would help, but you can save that for responding to my ballot comments.</p>



<a name="153950010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950010">(Apr 02 2018 at 22:54)</a>:</h4>
<p>sure. please ballot about that</p>



<a name="153950011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950011">(Apr 02 2018 at 22:54)</a>:</h4>
<p>anyway, the interpretation is clear now, yes?</p>



<a name="153950012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950012">(Apr 02 2018 at 22:55)</a>:</h4>
<p>If you can tell me that my thinking agrees with yours, then it does, but not until you say that ;-)</p>



<a name="153950013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950013">(Apr 02 2018 at 22:56)</a>:</h4>
<p>using your example: Condition?_security:not=SFLAG1 does not match that resource because it has SFLAG1?</p>



<a name="153950014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950014">(Apr 02 2018 at 22:56)</a>:</h4>
<p>and "Resource?searchkey:not=SOMEVALUE for resource X mean that Resource X has NO searchkey value that matches SOMEVALUE?" - yes</p>



<a name="153950017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keith Boone <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950017">(Apr 02 2018 at 22:58)</a>:</h4>
<p>Thank you.  I now understand.  Blog posting coming on this one.  I like that this is being clarified.  Information I was finding in implementations wasn't helping.</p>



<a name="153950019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950019">(Apr 02 2018 at 23:08)</a>:</h4>
<p>no. probably none have been updated for the clarification yet</p>



<a name="153950220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950220">(Apr 03 2018 at 15:22)</a>:</h4>
<p>Opportunity for test tools <span class="user-mention" data-user-id="191370">@Richard Ettema</span> ???</p>



<a name="153950367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950367">(Apr 03 2018 at 22:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> Always looking for opportunities <span class="emoji emoji-1f609" title="wink">:wink:</span>  Just need well defined positive and negative scenarios and the test data with enough variance to support them.</p>



<a name="153950582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/cardinality%20and%20%3Anot/near/153950582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/cardinality.20and.20.3Anot.html#153950582">(Apr 04 2018 at 12:50)</a>:</h4>
<p>good test scenarios with details can be found on the various FHIR blogs... Keith especially <a href="http://motorcycleguy.blogspot.com/" target="_blank" title="http://motorcycleguy.blogspot.com/">http://motorcycleguy.blogspot.com/</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
