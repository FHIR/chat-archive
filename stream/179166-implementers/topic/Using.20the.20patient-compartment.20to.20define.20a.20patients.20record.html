---
layout: page
title: "FHIR Chat  · Using the patient-compartment to define a patients record · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20patient-compartment.20to.20define.20a.20patients.20record.html">Using the patient-compartment to define a patients record</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="205132820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20patient-compartment%20to%20define%20a%20patients%20record/near/205132820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Burnett <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20patient-compartment.20to.20define.20a.20patients.20record.html#205132820">(Jul 27 2020 at 15:38)</a>:</h4>
<p>Hey, am considering the ramifications of using the patient-compartment to determine which patient a piece of data is about.</p>
<p>The definition of the $everything endpoint (<a href="https://www.hl7.org/fhir/operation-patient-everything.html">https://www.hl7.org/fhir/operation-patient-everything.html</a>) says that it can be used to get a patients entire record, and also says that is achieved by returning everything in the patient-compartment (and other stuff in addition).</p>
<p>But from looking at the patient compartment (<a href="https://www.hl7.org/fhir/compartmentdefinition-patient.html">https://www.hl7.org/fhir/compartmentdefinition-patient.html</a>), it seems like it would include data that isn’t necessarily from a Patients record.<br>
For a specific example, Observation; it searches on both the subject or performer parameter. The inclusion of performer seems to imply it would include data that wasn’t necessarily about that Patient, for example if they were marked as a performer on an Observation for their child.</p>
<p>So my question is, what is the reasoning behind including Observation.performer in the patient-compartment and, more generally, is it actually sensible to use the patient-compartment to determine who a resource is about (both for authorisation purposes and more generally to decide if it is part of a patients medical record).</p>



<a name="205134539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20patient-compartment%20to%20define%20a%20patients%20record/near/205134539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20patient-compartment.20to.20define.20a.20patients.20record.html#205134539">(Jul 27 2020 at 15:53)</a>:</h4>
<p>interesting find. This would seem to align the definition of patient compartment closer with "what the patient has authorization to" that it is aligned with the concept of "this is information about the patient as the subject".   The parent / child use-case seems like a good use-case for authorization perspective;  but as you point out there is a need to get just the data where the patient is the subject (so not children or elder-care or spouse-care)</p>



<a name="205134577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20patient-compartment%20to%20define%20a%20patients%20record/near/205134577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20patient-compartment.20to.20define.20a.20patients.20record.html#205134577">(Jul 27 2020 at 15:53)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1454">@FHIR-I Co-chairs</span> ?</p>



<a name="205134833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20patient-compartment%20to%20define%20a%20patients%20record/near/205134833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20patient-compartment.20to.20define.20a.20patients.20record.html#205134833">(Jul 27 2020 at 15:55)</a>:</h4>
<p>note that compartment is a concept in security (Attribute Based Access Control) that would work this way</p>



<a name="205134977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20patient-compartment%20to%20define%20a%20patients%20record/near/205134977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20patient-compartment.20to.20define.20a.20patients.20record.html#205134977">(Jul 27 2020 at 15:56)</a>:</h4>
<p>Agree that the Patient compartment is more about 'access' than 'who's it about'.  It may be that the $everything wording needs to be tightened.  What it really does is find everything that matches using the 'patient' search parameter - which would be less than everything in the Patient compartment.  Can you submit a change request <span class="user-mention" data-user-id="260074">@Jack Burnett</span> for us to clarify the description of $everything?</p>



<a name="205135098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20patient-compartment%20to%20define%20a%20patients%20record/near/205135098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20patient-compartment.20to.20define.20a.20patients.20record.html#205135098">(Jul 27 2020 at 15:57)</a>:</h4>
<p>This would be a good clarification that the fine-grain-SMART could leverage too...</p>



<a name="205205475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20patient-compartment%20to%20define%20a%20patients%20record/near/205205475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Burnett <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20patient-compartment.20to.20define.20a.20patients.20record.html#205205475">(Jul 28 2020 at 07:40)</a>:</h4>
<p>Thanks both, will submit that change request.</p>
<p>Though I still question the correctness of having child resources in their parents compartment.<br>
If we totally set aside the $everything endpoint for now;<br>
The compartment definition page for patient (<a href="https://www.hl7.org/fhir/compartmentdefinition-patient.html">https://www.hl7.org/fhir/compartmentdefinition-patient.html</a>) lists as the description “The set of resources associated with a particular patient”.</p>
<p>So in terms of how you’d use that for authorisation, I figured you would be granting users access to certain compartments, and thus granting them access to the records of the patients those compartments compare too.<br>
So the preferred usage would simply be to grant the parent access to both their compartment AND their Childs compartment, rather than having access to those child resources be implicit in their own compartment.</p>
<p>That way you could more easily turn off the parents access - for example when that child becomes an adult themselves.</p>
<p>Of course I appreciate that the desired behaviour here may vary by use case quite a bit!<br>
Though even if you do think that the current behaviour is working as intended, I would suggest modifying the compartment definition itself to make it more clear that it may contain resources not directly related to the patient.</p>



<a name="205226768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20patient-compartment%20to%20define%20a%20patients%20record/near/205226768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20patient-compartment.20to.20define.20a.20patients.20record.html#205226768">(Jul 28 2020 at 12:03)</a>:</h4>
<p>I agree. which is why I was surprised. I would have expected the patient compartment to truly be patient centric. I do think we are too focused right now on child. I wonder if the intent of indicating that patient compartment might have data that was not directly associated with the patient as leading toward resources that are medically relevant to the patient, but are not attributed to that patient.  I would expect any resource that is dual subject, would just have both subjects listed. Thus I am not sure what falls into these edge cases. Might the variation have been put there simply to deal with edge cases that are not predictable, and they had no specific examples?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
