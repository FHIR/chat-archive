---
layout: page
title: "FHIR Chat  · Batch interdependencies · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html">Batch interdependencies</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="170488762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170488762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eero Kelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170488762">(Jul 09 2019 at 20:41)</a>:</h4>
<p>Are batches with interdependencies considered non-conformant as a whole or does this refer to the individual operations within a batch?<br>
It's not clear if a dependency causes the batch to not process and return a 4xx or 5xx, or return a 200 with internal errors on operations with dependencies.<br>
<a href="https://www.hl7.org/fhir/http.html#brules" target="_blank" title="https://www.hl7.org/fhir/http.html#brules">https://www.hl7.org/fhir/http.html#brules</a></p>



<a name="170586924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170586924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170586924">(Jul 10 2019 at 22:56)</a>:</h4>
<p>depends. what happens when the server processes the operations one at a time?</p>



<a name="170586937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170586937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170586937">(Jul 10 2019 at 22:57)</a>:</h4>
<p>as if you submitted them independently</p>



<a name="170586950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170586950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170586950">(Jul 10 2019 at 22:57)</a>:</h4>
<p>some interdependencies would work out ok, but others would not</p>



<a name="170592656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170592656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eero Kelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170592656">(Jul 11 2019 at 00:39)</a>:</h4>
<p>That seems to go against "For a batch, there SHALL be no interdependencies between the different entries in the Bundle that cause change on the server." It sounds like any interdependencies are not okay.</p>
<p>For example, say a resource is created and updated in the same batch, we fail them both internally because "The success or failure of one change SHOULD not alter the success or failure or resulting content of another change." But in doing so, we're failing one change based on another change, which itself seems to go against the rule. It looks like the best option would be to fail processing the bundle as a whole for being a bad batch for having the interdependencies in the first place.</p>



<a name="170627066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170627066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170627066">(Jul 11 2019 at 12:19)</a>:</h4>
<p>well, I guess we could be clearer in the wording there - we're really saying that the kind of interdependencies that a transaction caters for aren't supported. But you could post a resource that references another, and then put the other resource ... that could be descibred as an 'interdepedency' but isn't in the same sense</p>



<a name="170641767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170641767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170641767">(Jul 11 2019 at 15:05)</a>:</h4>
<p>I thought batch entries could be processed out of order or in parallel?</p>



<a name="170648279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170648279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170648279">(Jul 11 2019 at 16:22)</a>:</h4>
<p>I was expecting the difference between Transaction and Batch had more to do with success than to do with what is allowed to be placed into them. That is to say that a Transaction must succeeded totally or fail totally; where as Batch is allowed to partially succeed.   Seems the interdependencies within should be just as complex or simple. The processing flow is defined the same for both.</p>



<a name="170668966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170668966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170668966">(Jul 11 2019 at 20:24)</a>:</h4>
<p>the interdependencies depend on the integrity</p>



<a name="170731278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170731278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170731278">(Jul 12 2019 at 15:29)</a>:</h4>
<p>Does Batch presume in-order sequential processing <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>?</p>



<a name="170741522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170741522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170741522">(Jul 12 2019 at 17:46)</a>:</h4>
<p>This from the spec in the Batch section <a href="http://build.fhir.org/http.html#brules" target="_blank" title="http://build.fhir.org/http.html#brules">http://build.fhir.org/http.html#brules</a><br>
 " Note that it is considered that servers execute the batch in the same order as that specified below for transactions, though the order of execution should not matter given the previous rule"</p>



<a name="170809653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170809653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170809653">(Jul 13 2019 at 23:38)</a>:</h4>
<p>If order shouldn't matter, then referencing something created in the  same batch sounds  like an error.</p>



<a name="170875730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/170875730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#170875730">(Jul 15 2019 at 09:08)</a>:</h4>
<p>The transaction order also puts all reads after all writes. Does that mean that in both cases (batch and transaction) all reads see all writes? At least that would mean that the order of execution for reads and writes does matter.</p>



<a name="171807235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependencies/near/171807235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependencies.html#171807235">(Jul 26 2019 at 20:22)</a>:</h4>
<blockquote>
<p>Note that it is considered that servers execute the batch in the same order as that specified below for transactions</p>
</blockquote>
<p>I don't remember writing that, and that's not how my implementation works</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
