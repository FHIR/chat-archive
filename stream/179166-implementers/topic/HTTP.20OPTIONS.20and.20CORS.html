---
layout: page
title: "FHIR Chat  · HTTP OPTIONS and CORS · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html">HTTP OPTIONS and CORS</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153821512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Riemer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821512">(Apr 13 2016 at 15:25)</a>:</h4>
<p>While testing our PDQm consumer at the IHE Connectathon, we found that many servers weren't handling our requests, due to our (browser based) client sending HTTP OPTIONS requests. This is caused by the browsers implementing the Cross Origin Request (CORS) protocol.</p>
<p>The CORS protocol describes that non-trivial requests (e.g. GET requests with Authorization headers) should be preceded by a so called CORS preflight request, which is an HTTP OPTIONS call. Servers don't seem to be expecting this.</p>
<p>In the interest of interoperability, I'm interested to seeing who should be fixing this. The clients not sending the HTTP CORS requests, or the servers correctly handling them. In my opinion FHIR should make it easy to create clients, so the browser behavior will be encountered more often and the servers should just handle this (there are CORS filter libraries out there for Java server implementers).</p>
<p>What do the implementers here think?</p>



<a name="153821531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821531">(Apr 13 2016 at 17:18)</a>:</h4>
<p>Hi Rick - do you know which servers weren't handling this? Is this just via an unauthenticated flow or authenticated? I know the Conformance statement allows servers to specify CORS support: <a href="http://hl7.org/fhir/dstu2/conformance-definitions.html#Conformance.rest.security.cors" target="_blank" title="http://hl7.org/fhir/dstu2/conformance-definitions.html#Conformance.rest.security.cors">http://hl7.org/fhir/dstu2/conformance-definitions.html#Conformance.rest.security.cors</a></p>



<a name="153821532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821532">(Apr 13 2016 at 17:19)</a>:</h4>
<p>Sorry - not quite clear - was the issue that clients didn't send the pre-flight, or that they did and the servers didn't process correctly...</p>



<a name="153821548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Riemer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821548">(Apr 13 2016 at 18:12)</a>:</h4>
<p>It was about servers not handling the preflight CORS request. It was caused by our clients sending Authentication headers, which made the requests non-trivial and thus triggering the browser to try a CORS preflight first. When we removed the Authentication, there wasn't any CORS.</p>
<p>I wasn't aware about the conformance possibility, but I don't think it's really a Conformance choice for servers. Servers need to support it at least in combination with Authentication, as the browser clients will automatically send CORS preflight if required. It can only be prevented by removing all Authentication and alike headers.</p>
<p>My suggestion is that there's some clarification towards CORS needing to be supported on servers. WDYT?</p>



<a name="153821549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821549">(Apr 13 2016 at 18:35)</a>:</h4>
<p>It is a bit tricky, as HTTP OPTIONS request is treated as a request for a conformance statement in FHIR,<br>
so sending pre-flight requests will produce may prodoce some overhead on the server side,</p>
<p>I wonder how many systems will use browser based clients and thus need CORS support.<br>
But on the other hand it ist not too complicated to add CORS handling,  so at least it should be possible to add it on the server side.</p>



<a name="153821551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821551">(Apr 13 2016 at 18:45)</a>:</h4>
<p>From what I've seen, generally if you support the SMART standard on top of FHIR, you likely support CORS (as a server). But if a server chooses not to trust browser-based cross origin, then that would be up to their security stance.</p>



<a name="153821552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821552">(Apr 13 2016 at 18:45)</a>:</h4>
<p>As to clients - usually as a javascript client you don't have a choice - the browser handles cors for you. It doesn't apply to non-browser based calls</p>



<a name="153821553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821553">(Apr 13 2016 at 18:46)</a>:</h4>
<p>The Options request isn't that hard to filter out in the server (to differentiate from the Conformance request) because the Origin header is on there</p>



<a name="153821580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821580">(Apr 13 2016 at 20:22)</a>:</h4>
<p>Rick - CORS is proving hard for many servers. Especially the intersection between CORS and authentication, and the registration of a client. Can you be specific about which servers are a problem?</p>



<a name="153821713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Riemer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821713">(Apr 14 2016 at 09:53)</a>:</h4>
<p>There were various servers here at the IHE Connectathon. Some have put in temporary solutions for working through the Connectathon (Indra, Systelab), some completely fixed it (OSM, Visus), and some mentioned that they might fix it somewhere down the road (ICW, Lexmark).</p>



<a name="153821995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821995">(Apr 15 2016 at 18:49)</a>:</h4>
<p>from my perspective (developing the clinFHIR resource builder for the clinician challenge) I'm doing everything in the browser, so CORS has become essential for me...   I didn't realize the issue around the preflight request which might explain some puzzling errors I've had!  Would definitely appreciate clarification around that - maybe OPTIONS is no longer a good choice for the conformance resource?</p>



<a name="153821996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153821996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153821996">(Apr 15 2016 at 18:50)</a>:</h4>
<p>(ah - just saw Jenni's comment)...</p>



<a name="153822311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153822311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153822311">(Apr 18 2016 at 15:10)</a>:</h4>
<p>We ran into an issue a while bacl (I think it was with HAPI) where OPTIONS on [base]/** always gave back the metadata rather than just on [base]</p>



<a name="153822315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153822315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153822315">(Apr 18 2016 at 16:32)</a>:</h4>
<p>peter scholz, you wrote "It is a bit tricky, as HTTP OPTIONS request is treated as a request for a conformance statement in FHIR..."  HTTP OPTIONS is really about the communication options available for a given server (e.g., does it support GET, UPDATE, etc.). The FHIR Conformance statement is more about what the FHIR services available at a particular FHIR server. FWIW, I've tested a number of FHIR servers from my browser-based client and all have implemented CORS correctly (if they don't, I let them know about it ;)</p>



<a name="153822412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153822412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153822412">(Apr 19 2016 at 03:30)</a>:</h4>
<p>We did implement handling of CORS too. But that does mit change my statement as the FHIR spec says that you have to respond to a HTTP OPTIONS by sending a conformance resource</p>



<a name="153822413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153822413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153822413">(Apr 19 2016 at 03:50)</a>:</h4>
<p>I don't think it does actually say that. But perhaps we could be specific about CORS</p>



<a name="153822418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153822418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153822418">(Apr 19 2016 at 05:07)</a>:</h4>
<p>AT the least I think you should be clear that it is only OPTIONS on the [base] URL that should trigger the conformance resource (although why this is needed when [base]/metadata exists I am not sure)</p>



<a name="153822472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153822472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153822472">(Apr 19 2016 at 15:28)</a>:</h4>
<p>I can't find that in the FHIR spec. And if it is, it should be changed.</p>



<a name="153822473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153822473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153822473">(Apr 19 2016 at 15:59)</a>:</h4>
<p>Section 2.1.025 reads<br>
GET [base]/metadata or OPTIONS [base] triggers the sending of the Conformance Resource </p>



<a name="153822474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153822474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153822474">(Apr 19 2016 at 16:00)</a>:</h4>
<p>Sorry should be 2.1.0.15</p>



<a name="153822478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153822478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153822478">(Apr 19 2016 at 16:17)</a>:</h4>
<p>thanks for the link, Peter. I've just added a change request here: <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9841" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9841">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9841</a></p>



<a name="153822495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153822495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153822495">(Apr 19 2016 at 18:35)</a>:</h4>
<p>Perfect </p>



<a name="153847384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153847384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153847384">(Sep 15 2016 at 15:23)</a>:</h4>
<p>is there any update on this? we try to access a HAPI 2.0 server build from the hapi jpa example. CORS is supported by the JPA example server like it is described here: <a href="http://hapifhir.io/doc_cors.html" target="_blank" title="http://hapifhir.io/doc_cors.html">http://hapifhir.io/doc_cors.html</a></p>
<p>However we are still getting preflight errors:<br>
fhir-client.min.js:5 OPTIONS <a href="https://fhir.iap.hs-heilbronn.de/baseDstu2/Specimen" target="_blank" title="https://fhir.iap.hs-heilbronn.de/baseDstu2/Specimen">https://fhir.iap.hs-heilbronn.de/baseDstu2/Specimen</a> send @ fhir-client.min.js:5ajax @ fhir-client.min.js:5http @ fhir-<br>
orders.html:1 XMLHttpRequest cannot load <a href="https://fhir.iap.hs-heilbronn.de/baseDstu2/Specimen" target="_blank" title="https://fhir.iap.hs-heilbronn.de/baseDstu2/Specimen">https://fhir.iap.hs-heilbronn.de/baseDstu2/Specimen</a>. Response for preflight has invalid HTTP status code 403</p>



<a name="153852240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HTTP%20OPTIONS%20and%20CORS/near/153852240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HTTP.20OPTIONS.20and.20CORS.html#153852240">(Oct 07 2016 at 02:41)</a>:</h4>
<p>HTTP 403 sounds to me like the issue isn't CORS, but rather authentication.. That server seems to be down right now, but does it allow anonymous access?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
