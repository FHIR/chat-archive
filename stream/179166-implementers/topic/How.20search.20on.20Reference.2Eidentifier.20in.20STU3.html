---
layout: page
title: "FHIR Chat  · How search on Reference.identifier in STU3 · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html">How search on Reference.identifier in STU3</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153975298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975298">(Jul 15 2018 at 16:24)</a>:</h4>
<p>For R4 we added this:</p>
<p>"References are also allowed to have an identifier. The modifier <code>:identifier</code> allows for searching by the identifier rather than the literal reference:</p>
<p><code>GET [base]/Observation?subject:identifier=http://acme.org/fhir/identifier/mrn|123456</code></p>
<p>This is a search for all observations that reference a patient by a particular patient MRN. When the :identifier modifier is used, the search value works as a <em>token</em> search. <br>
"</p>
<p>I did not see a way to create custom search modifier using SearchParameter,  what is the best way to add this search functionality to a STU3 Implementation Guide.  As an Operation?</p>



<a name="153975324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975324">(Jul 16 2018 at 00:39)</a>:</h4>
<p>I'm not understanding this.. you want to add different functionality to an IG?</p>



<a name="153975381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975381">(Jul 16 2018 at 07:03)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191401">@Eric Haas</span>, I got it working with a SearchParameter - you'll need to follow the server-specific docs for adding it in</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;SearchParameter&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;observation-context-identifier&quot;</span><span class="p">,</span>
  <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/SearchParameter/observation-context-identifier&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Observation.context.identifier Search Parameter&quot;</span><span class="p">,</span>
  <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;draft&quot;</span><span class="p">,</span>
  <span class="nt">&quot;experimental&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2018-07-11&quot;</span><span class="p">,</span>
  <span class="nt">&quot;publisher&quot;</span><span class="p">:</span> <span class="s2">&quot;blah&quot;</span><span class="p">,</span>
  <span class="nt">&quot;purpose&quot;</span><span class="p">:</span> <span class="s2">&quot;Need to search Observation.context references by business identifier&quot;</span><span class="p">,</span>
  <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;context-identifier&quot;</span><span class="p">,</span>
  <span class="nt">&quot;base&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;Observation&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;token&quot;</span><span class="p">,</span>
  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Search Observation contexts by their business identifier&quot;</span><span class="p">,</span>
  <span class="nt">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;Observation.context.identifier&quot;</span><span class="p">,</span>
  <span class="nt">&quot;target&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;Patient&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;modifier&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;missing&quot;</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p>Then a query like <code> /Observation?context-identifier=my-system|my-code</code> will work</p>



<a name="153975476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975476">(Jul 16 2018 at 14:23)</a>:</h4>
<p>Can't you already do that with a chained search (even in DSTU2): GET [base]/Observation?subject.dentifier=http://acme.org/fhir/identifier/mrn|123456</p>



<a name="153975501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975501">(Jul 16 2018 at 17:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>   is not defined in STU3 only showed up in R4,  <span class="user-mention" data-user-id="191912">@Michele Mottini</span>   This is  not the resource identifier but the Reference.identifier element for the Reference Type.  <span class="user-mention" data-user-id="191363">@Vadim Peretokin</span>   thanks that just might be the answer I was looking for  - create my own SearchParameter!</p>



<a name="153975502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975502">(Jul 16 2018 at 17:26)</a>:</h4>
<p>Yes...but shouldn't they be the same? Don't reference.identifier means 'referencing to a resource with this identifier' ?</p>



<a name="153975505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975505">(Jul 16 2018 at 17:40)</a>:</h4>
<p>they may be, but not interested in chaining across Resources since the endpoint only has QuestionnaireAnswers or some other resource but no Patient.  Although I don't know if this buys you anything.  Is, Reference.reference is any more or less opaque than a  Reference.identifier from a privacy aspect?</p>



<a name="153975506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975506">(Jul 16 2018 at 17:40)</a>:</h4>
<p>assuming the identifier is opaque</p>



<a name="153975683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975683">(Jul 17 2018 at 08:29)</a>:</h4>
<p>A key difference is that for the chained version to work, the resource that is referenced to has to be available on the same server.<br>
When searching directly on the identifier value of the Reference element, you don't need the referenced-to resource to be available.</p>



<a name="153975814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975814">(Jul 17 2018 at 18:31)</a>:</h4>
<p>Why does the referenced resource has to be available? I don't see anything in the specs requiring that</p>



<a name="153975828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975828">(Jul 17 2018 at 19:58)</a>:</h4>
<p>you can't chain without it.   need to access Patient to query the identifiers.  If your server only has QuestionnaireAnswers you are out of luck on your query.</p>



<a name="153975836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975836">(Jul 17 2018 at 20:50)</a>:</h4>
<p>That's not strictly true in that if the Patient were contained, you could theoretically chain without supporting the Patient endpoint - but containing Patient would be weird...</p>



<a name="153975837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975837">(Jul 17 2018 at 20:50)</a>:</h4>
<p>Can be relevant when searching Bundles though - because all the data you chain through to could live in the Bundle.</p>



<a name="153975929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975929">(Jul 18 2018 at 02:43)</a>:</h4>
<p>I am not sure I am fully clear on where this conversation is ending. There are cases where the element in a Resource (Any). Plus I am told that in the case of a Reference.identifier, I can put a business identifier there even if there is no Resource yet holding that business identifier. For example where Observation.basedOn.identifier holds a HL7 v2 order number; but there is no actual instance of any of the given resource types that exist and hold that business identifier. Thus in this case  basedOn.reference is not populated.  So how do I search for this?</p>



<a name="153975936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975936">(Jul 18 2018 at 02:57)</a>:</h4>
<p><code>GET [base]/Observation?subject:identifier=http://acme.org/fhir/identifier/mrn|123456</code> should do the trick in your case since this is querying the Observation.subject directly and not search for a yet to be created Patient resource.</p>



<a name="153975944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975944">(Jul 18 2018 at 03:00)</a>:</h4>
<p>okay, that is what I was thinking....   so then I don't understand the subtly of this thread. What is different that makes it not as easy?</p>



<a name="153975946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975946">(Jul 18 2018 at 03:05)</a>:</h4>
<p>My initial ask was how to do it in STU3? since the above Query is new for R4.  This stream went a little sideways for other use cases.  </p>
<p>Is a Reference.reference is any more or less opaque than a Reference.identifier from a privacy aspect?... assuming the identifier is opaque</p>



<a name="153975947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975947">(Jul 18 2018 at 03:06)</a>:</h4>
<p>you should do it the same way in R3 - just pre-adopt the R4 solution</p>



<a name="153975948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975948">(Jul 18 2018 at 03:06)</a>:</h4>
<p>Hm, so one can't do what I asked about in STU3? Didn't know that</p>



<a name="153975949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975949">(Jul 18 2018 at 03:07)</a>:</h4>
<p>pre-adopt is fallacy... nice story, but not helpful... ultimately R4 will happen soon enough.</p>



<a name="153975950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975950">(Jul 18 2018 at 03:08)</a>:</h4>
<p>As to the Reference.reference vs Reference.identifier.... if both are assigned given pseudorandom identifier mechanism, they are both equal from a Privacy perspective.</p>



<a name="153975951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975951">(Jul 18 2018 at 03:08)</a>:</h4>
<p>I can definitely chain without having a Patient resource implemented. It is just a matter of convert ?subject.identifier=xxx in the appropriate query to the underlying data store - exactly like you would do for ?subject:identifier=xxxxx</p>



<a name="153975952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975952">(Jul 18 2018 at 03:09)</a>:</h4>
<p>If the identifiers are issued poorly, which can happen with either URI or identifier, then they are equally bad.</p>



<a name="153975953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975953">(Jul 18 2018 at 03:09)</a>:</h4>
<p>(that is why I'd rather always use the chained syntax - that is already established - instead of adding yet another way to do the same thing)</p>



<a name="153975954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975954">(Jul 18 2018 at 03:12)</a>:</h4>
<p>so, given the query problem in STU3 as just outlined, I guess I am now glad I didn't simplify Provenance and AuditEvent until last week... The STU3 flavors were old school (pre STU3) model...</p>



<a name="153975965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975965">(Jul 18 2018 at 04:32)</a>:</h4>
<p>I think there is some confusion here.<br>
The <code>:idenfitier</code> search modifier is not referring to an identifier value in the referenced resource, its specifying the value in the reference.reference property (which would have been indexed)<br>
This is not a chain, but a property in the resource.<br>
I do however note that there is nothing in this part of the spec that talks about if the reference.identifier was resolved to fill in the reference.reference value.<br>
<code>http://build.fhir.org/search.html#reference</code></p>



<a name="153975970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975970">(Jul 18 2018 at 04:36)</a>:</h4>
<p>The example in the spec would be searching for observations like this one.</p>
<div class="codehilite"><pre><span></span>&lt;Observation&gt;
    &lt;subject&gt;
        &lt;identifier&gt;
            &lt;system value=&quot;http://acme.org/fhir/identifier/mrn&quot; /&gt;
            &lt;value value=&quot;123456&quot; /&gt;
        &lt;/identifier&gt;
    &lt;/subject&gt;
&lt;/Observation&gt;
</pre></div>


<p>It would not be checking for a chained search to check Observation.subject.identifier= ...</p>



<a name="153975971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/153975971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#153975971">(Jul 18 2018 at 04:36)</a>:</h4>
<p>(Haven't implemented this in my R4 test server yet either)</p>



<a name="207663134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/207663134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#207663134">(Aug 21 2020 at 17:48)</a>:</h4>
<p>I've read through this thread, and admit I'm confused. I can successfully create this resource on <code>http://hapi.fhir.org/baseR4/</code></p>
<div class="codehilite"><pre><span></span><code>&lt;Observation&gt;
    &lt;subject&gt;
        &lt;identifier&gt;
            &lt;system value=&quot;http://acme.org/identifier/mrn&quot; /&gt;
            &lt;value value=&quot;000&quot; /&gt;
        &lt;/identifier&gt;
    &lt;/subject&gt;
&lt;/Observation&gt;
</code></pre></div>


<p>(a Patient resource does not exist)<br>
and then I attempt to search for it using<br>
<code>GET http://hapi.fhir.org/baseR4/Observation?subject:identifier=http://acme.org/identifier/mrn|000</code><br>
but it doesn't find anything. Is this expected behavior? <br>
How would I search for Observation.subject.identifier?</p>



<a name="207670402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/207670402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#207670402">(Aug 21 2020 at 18:51)</a>:</h4>
<p>This might be completely off, but could an identifier "000" be hitting a strange edge case that breaks the search?</p>



<a name="207671203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/207671203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#207671203">(Aug 21 2020 at 18:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192685">Vassil Peytchev</span> <a href="#narrow/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3/near/207670402">said</a>:</p>
<blockquote>
<p>This might be completely off, but could an identifier "000" be hitting a strange edge case that breaks the search?</p>
</blockquote>
<p>I've used other values (eg 123456) with the same result.</p>



<a name="207687884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/207687884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#207687884">(Aug 21 2020 at 21:40)</a>:</h4>
<p>Try asking in #hapi ? This seems something specific to that server - a bug, or it does not support that search</p>



<a name="227815004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20search%20on%20Reference.identifier%20in%20STU3/near/227815004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a>  Bob Milius <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3.html#227815004">(Feb 25 2021 at 18:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191912">Michele Mottini</span> <a href="#narrow/stream/179166-implementers/topic/How.20search.20on.20Reference.2Eidentifier.20in.20STU3/near/207687884">said</a>:</p>
<blockquote>
<p>Try asking in #hapi ? This seems something specific to that server - a bug, or it does not support that search</p>
</blockquote>
<p>I did ask in <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a>  (<a href="#narrow/stream/179167-hapi/topic/searching.20for.20subject.3Aidentifier">https://chat.fhir.org/#narrow/stream/179167-hapi/topic/searching.20for.20subject.3Aidentifier</a>)  but haven't gotten anywhere so far. Can someone show me a working example on a public server that supports searching for observations based on subject:identifier?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
