---
layout: page
title: "FHIR Chat  · Slice on code type discrminator with existence of value · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20on.20code.20type.20discrminator.20with.20existence.20of.20value.html">Slice on code type discrminator with existence of value</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="182459511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20on%20code%20type%20discrminator%20with%20existence%20of%20value/near/182459511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laureen Loison <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20on.20code.20type.20discrminator.20with.20existence.20of.20value.html#182459511">(Dec 03 2019 at 15:27)</a>:</h4>
<p>Hello, I try to create a Slice on CommunicationRequest resource on status field and I would like to say : "status = active only if communication request have at least one recipient" do you know how to do that with a slice or constraint ? <br>
Thanks</p>



<a name="182475603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20on%20code%20type%20discrminator%20with%20existence%20of%20value/near/182475603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20on.20code.20type.20discrminator.20with.20existence.20of.20value.html#182475603">(Dec 03 2019 at 17:45)</a>:</h4>
<p>That should be a constraint, not a slice.  Slice is for repeating elements within a resource, not for the resource as a whole.</p>



<a name="182476692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20on%20code%20type%20discrminator%20with%20existence%20of%20value/near/182476692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laureen Loison <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20on.20code.20type.20discrminator.20with.20existence.20of.20value.html#182476692">(Dec 03 2019 at 17:56)</a>:</h4>
<p>Great, thanks, I try with this constraint add in Forge but no errors comes ... <br>
Here it's my try :<br>
         {<br>
            "key": "cmr-1",<br>
            "severity": "error",<br>
            "human": "if status = active we must have a recipient,",<br>
            "expression": "status != 'active' | recipient.exists()"<br>
          }<br>
Do you thing it's a correct expression ? Should I need to add a xpath ?<br>
Thanks</p>



<a name="182479389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20on%20code%20type%20discrminator%20with%20existence%20of%20value/near/182479389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20on.20code.20type.20discrminator.20with.20existence.20of.20value.html#182479389">(Dec 03 2019 at 18:22)</a>:</h4>
<p>It should be <code>status != 'active' or recipient.exists()</code></p>



<a name="182546717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20on%20code%20type%20discrminator%20with%20existence%20of%20value/near/182546717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laureen Loison <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20on.20code.20type.20discrminator.20with.20existence.20of.20value.html#182546717">(Dec 04 2019 at 11:23)</a>:</h4>
<blockquote>
<p>It should be <code>status != 'active' or recipient.exists()</code></p>
</blockquote>
<p>I try but he didn't work. I have no error on my validation, have you got an other idea ?</p>



<a name="182553338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20on%20code%20type%20discrminator%20with%20existence%20of%20value/near/182553338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20on.20code.20type.20discrminator.20with.20existence.20of.20value.html#182553338">(Dec 04 2019 at 13:06)</a>:</h4>
<p>The invariant is being declared on "CommunicationRequest" root element, correct?  How are you trying to validate?</p>



<a name="182559705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20on%20code%20type%20discrminator%20with%20existence%20of%20value/near/182559705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laureen Loison <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20on.20code.20type.20discrminator.20with.20existence.20of.20value.html#182559705">(Dec 04 2019 at 14:24)</a>:</h4>
<p>Oh sorry I think the constraint should be declared on "CommunicationRequest.status" field, I try and it's work perfectly, thank you</p>



<a name="182562180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slice%20on%20code%20type%20discrminator%20with%20existence%20of%20value/near/182562180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slice.20on.20code.20type.20discrminator.20with.20existence.20of.20value.html#182562180">(Dec 04 2019 at 14:52)</a>:</h4>
<p>Constraints always have to appear on an ancestor (typically the nearest ancestor) that contains all elements referenced by the constraint.  Paths are expressed with respect to the element the constraint appears on.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
