---
layout: page
title: "FHIR Chat  · Bundle Transaction with externally referenced Resources · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20with.20externally.20referenced.20Resources.html">Bundle Transaction with externally referenced Resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153952166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20with%20externally%20referenced%20Resources/near/153952166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Francis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20with.20externally.20referenced.20Resources.html#153952166">(Apr 12 2018 at 23:23)</a>:</h4>
<p>Hi,</p>
<p>I am looking for clarification on how to send an externally existing resources in a bundle. <br>
I am sending a Bundle [type=”transaction”] and I want to POST a ServiceRequestand  Patient resource existing on my Server at <a href="http://sendingsystem/fhir/ServiceRequest/123" target="_blank" title="http://sendingsystem/fhir/ServiceRequest/123">http://sendingsystem/fhir/ServiceRequest/123</a> and <a href="http://sendingsystem/fhir/Patient/12345" target="_blank" title="http://sendingsystem/fhir/Patient/12345">http://sendingsystem/fhir/Patient/12345</a> to <a href="http://receivingSystem/fhir/Bundle" target="_blank" title="http://receivingSystem/fhir/Bundle">http://receivingSystem/fhir/Bundle</a><br>
And have the ServiceRequest and Patient saved at the respective /ServiceRequest and /Patient end points. The way I would structure the Bundle keeping in mind <a href="https://www.hl7.org/fhir/bundle.html#references" target="_blank" title="https://www.hl7.org/fhir/bundle.html#references">https://www.hl7.org/fhir/bundle.html#references</a> is as follows:<br>
I have used the fullUrl element as the base and then provided the respective ids for each and the transaction related operation with be a POST to the appropriate end points.<br>
Is this approach valid and the norm?</p>
<p>Thanks,</p>
<p>Joel<br>
<a href="/user_uploads/10155/gxYNMYb5xeM0NiiV8RrVY0tE/Transaction_External_Ref.png" target="_blank" title="Transaction_External_Ref.png">Transaction_External_Ref.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/gxYNMYb5xeM0NiiV8RrVY0tE/Transaction_External_Ref.png" target="_blank" title="Transaction_External_Ref.png"><img src="/user_uploads/10155/gxYNMYb5xeM0NiiV8RrVY0tE/Transaction_External_Ref.png"></a></div>



<a name="153952177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20with%20externally%20referenced%20Resources/near/153952177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20with.20externally.20referenced.20Resources.html#153952177">(Apr 13 2018 at 00:52)</a>:</h4>
<p>Your fullUrls need to include the identifiers</p>



<a name="153952237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20with%20externally%20referenced%20Resources/near/153952237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Francis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20with.20externally.20referenced.20Resources.html#153952237">(Apr 13 2018 at 13:41)</a>:</h4>
<blockquote>
<p>Your fullUrls need to include the identifiers</p>
</blockquote>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="153953395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20with%20externally%20referenced%20Resources/near/153953395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20with.20externally.20referenced.20Resources.html#153953395">(Apr 20 2018 at 13:58)</a>:</h4>
<p>I have a similar usecase, but it is still not quite clear how to set <em>fullUrl</em> in my case: I want to have a client system use batch bundles to POST new Observations that do not (yet) exists as FHIR resources anywhere. These resources contain references to patients that already exist on the receiving server, and the client knows the corresponding logical IDs (so that it can put the correct relative URLs - Patient/123 etc. - into the resources being POSTed). The receiving server assigns logical IDs to created identities itself and will ignore any IDs the client sends along.</p>
<p>In that case, it is not clear to me how the client can give a <em>fullUrl</em> since the resource does have an identity yet. Indeed, if I leave out <em>fullUrl</em> altogether (as generally allowed for POSTs in bundles), POSTing the bundle on the base URL works fine on a test server (<a href="http://fhirtest.uhn.ca/baseDstu3" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3">http://fhirtest.uhn.ca/baseDstu3</a>). However the resource validator JAR gives a validation error for the corresponding bundle resource: "Relative Reference appears inside Bundle whose entry is missing a fullUrl". If I add a UUID as the <em>fullUrl</em>, the validator gives a warning: "URN reference is not locally contained within the bundle Patient/abc123".</p>
<p>So is the best/correct option in that case to put in a generated UUID as the <em>fullUrl</em> or to leave it out altogether - or maybe some third option?</p>



<a name="153953411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20with%20externally%20referenced%20Resources/near/153953411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Łukasz Dywicki <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20with.20externally.20referenced.20Resources.html#153953411">(Apr 20 2018 at 15:23)</a>:</h4>
<blockquote>
<p>So is the best/correct option in that case to put in a generated UUID as the <em>fullUrl</em> or to leave it out altogether - or maybe some third option?</p>
</blockquote>
<p>I had same case a while ago and somehow I managed to get <a class="stream" data-stream-id="8" href="/#narrow/stream/8-hapi">#hapi</a> accepting URLs of non existent resources (it was failing at random factor). Temporary identifier you talk about is way to go. Under the hood, regardless of how you specify reference, it is resolved to <code>Patient/&lt;resource-id&gt;</code>and UUID is gone once transaction is commited.</p>



<a name="153953463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20with%20externally%20referenced%20Resources/near/153953463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20with.20externally.20referenced.20Resources.html#153953463">(Apr 20 2018 at 21:14)</a>:</h4>
<p>uuid: is expected in this case</p>



<a name="153953516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20with%20externally%20referenced%20Resources/near/153953516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20with.20externally.20referenced.20Resources.html#153953516">(Apr 23 2018 at 06:52)</a>:</h4>
<p><span class="user-mention" data-user-id="195497">@Łukasz Dywicki</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Thanks!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
