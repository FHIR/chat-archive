---
layout: page
title: "FHIR Chat  · :iterate, or not · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html">:iterate, or not</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="202536245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202536245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202536245">(Jul 01 2020 at 06:55)</a>:</h4>
<p>The description of the :iterate modifier wasn't entirely clear to me, so I did some testing on various public test servers: [base]/Patient?identifier=1020304050&amp;_revinclude=Condition:patient&amp;_include=Condition:asserter works fine on one, but another one requires :iterate Patient?identifier=1020304050&amp;_revinclude=Condition:patient&amp;_include:iterate=Condition:asserter .. so what's correct, and would this search (according to the spec) need iterate ?</p>



<a name="202536370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202536370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202536370">(Jul 01 2020 at 06:58)</a>:</h4>
<p>(you can try the above search URLs on Vonk, on HAPI, and on <a href="http://test.fhir.org">test.fhir.org</a>, where one and the same set of patient data has been uploaded for use during our (Firely's) FHIR training courses). <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <a href="http://test.fhir.org">test.fhir.org</a> bombs if one doesn't use the iterate, and doesn't actually include a Practitioner if one does use iterate.</p>



<a name="202653542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202653542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202653542">(Jul 02 2020 at 06:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> ? The public server exhibit quite different behaviour, so some clarification (once we know what it should be) seems to be required.</p>



<a name="202695005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202695005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202695005">(Jul 02 2020 at 14:23)</a>:</h4>
<p>I'm not actually sure.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="202699799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202699799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202699799">(Jul 02 2020 at 14:59)</a>:</h4>
<p>My read has always been this:</p>
<p>Say you do a search for <code>GET Foo?</code> without any includes, and it returns resources <code>Foo/A</code>, <code>Foo/B</code>, and <code>Foo/C</code>.</p>
<ul>
<li>Adding <code>_include=Foo:bar</code>will add any resources that are linked to directly from those three resources.</li>
<li>Adding <code>_include:iterate=Foo:bar</code> will add any resources that are linked to directly from those three or from any additional Foo resources that were brought in via includes</li>
<li>Adding <code>_include=Baz:baz</code> doesn't do anything at all</li>
<li>Adding <code>_include:iterate=Baz:baz</code> will bring in any Baz resources that were brought in via includes</li>
</ul>



<a name="202714936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202714936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202714936">(Jul 02 2020 at 16:57)</a>:</h4>
<p>On HAPI R4, GET Foo?_include=Foo:bar&amp;_include=Bar:red works (the bundle includes Reds), whereas that shouldn't happen IMHO. Or to use my example: [base]/Patient?identifier=1020304050&amp;_revinclude=Condition:patient&amp;_include=Condition:asserter - the latter _include should have :iterate, right ?</p>



<a name="202715817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202715817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202715817">(Jul 02 2020 at 17:02)</a>:</h4>
<p>Ahh interesting. That's on HAPI right?</p>
<p>There are some internal reasons for this, but HAPI treats revincludes kind of differently from regular includes.. One of the differences is that revincludes end up getting treated as regular search results, which we do so that we can page them. That decision has the side effect of causing regular includes to see them as candidates even when there is no :iterate there.</p>



<a name="202716130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202716130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202716130">(Jul 02 2020 at 17:04)</a>:</h4>
<p>IMO this is HAPI deviating from the spec slightly... This does come up from time to time though. </p>
<p>I know <span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> has raised this before (and I would say I agree with him) - Even if technically per the spec your query shouldn't work, it does seem fairly obvious what you're trying to accomplish, and maybe the spec is too strict as a result.</p>



<a name="202723864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202723864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202723864">(Jul 02 2020 at 18:03)</a>:</h4>
<p>Here is our extension, which seems for us more unambiguous  - <a href="https://docs.aidbox.app/basic-concepts/search-1/_include-and-_revinclude#using-the-_with-parameter">https://docs.aidbox.app/basic-concepts/search-1/_include-and-_revinclude#using-the-_with-parameter</a></p>



<a name="202725913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202725913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202725913">(Jul 02 2020 at 18:19)</a>:</h4>
<p>Aidbox uses :iterate (and old :recur) only for recursive includes and ignore in other cases.</p>



<a name="202725989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202725989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202725989">(Jul 02 2020 at 18:19)</a>:</h4>
<p>Here is the link to the discussion - <a href="#narrow/stream/179166-implementers/topic/About.20_include.3Aiterate">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/About.20_include.3Aiterate</a></p>



<a name="202726200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202726200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202726200">(Jul 02 2020 at 18:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191372">@René Spronk</span> you can register on <a href="https://aidbox.app/">https://aidbox.app/</a> and create your personal and free aidbox sandbox.</p>



<a name="202772400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%3Aiterate%2C%20or%20not/near/202772400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.3Aiterate.2C.20or.20not.html#202772400">(Jul 03 2020 at 06:31)</a>:</h4>
<p>I agree with what's stated on the page referenced by Nicola, in that it's mostly not ambiguous and therefore :iterate can be omitted in most acses. My concern is that the spec doesn't match some/most of the implementations. That's an element of concern.<br>
@nicola I'm aware that one can create ones own sandbox, but our FHIR for training courses we've chosen to only use public/open/shared/non-secure/read-write endpoints. Aidbox, nor MS, nor IBM have such servers, so we are unable to use them in training courses. In terms of richness of functionalty Aidbox would be a good candidate to add to our list, next to HAPI, Vonk and <a href="http://test.fhir.org">test.fhir.org</a>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
