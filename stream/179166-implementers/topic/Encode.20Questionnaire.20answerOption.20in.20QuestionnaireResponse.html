---
layout: page
title: "FHIR Chat  · Encode Questionnaire answerOption in QuestionnaireResponse · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Encode.20Questionnaire.20answerOption.20in.20QuestionnaireResponse.html">Encode Questionnaire answerOption in QuestionnaireResponse</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="189225518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Encode%20Questionnaire%20answerOption%20in%20QuestionnaireResponse/near/189225518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pieter Edelman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Encode.20Questionnaire.20answerOption.20in.20QuestionnaireResponse.html#189225518">(Feb 27 2020 at 15:49)</a>:</h4>
<p>The Questionnaire resource defines the "choice" item type, which allows the user of a questionnaire to choose from a list of predefined answers. What these possible answers may be, can be defined using the Questionnaire.item.answerOption.value[x] element, where can be of type Integer, Date, Time, String, Coding and Reference (at least in STU3).<br>
However, it is unclear how to communicate the answer to these choice questions using the QuestionnaireResponse resource. One would expect the type of the QuestionnaireResponse.item.value[x] to simply match the type of the _selected_ answer in the Questionnaire. Thus if the answer the user selected was an .answerOption.valueString, one would expect to see a QuestionnaireResponse.item.valueString for the matching question.<br>
However, the documentation on the "choice" type in the item-type valueset (<a href="https://www.hl7.org/fhir/stu3/valueset-item-type.html" target="_blank" title="https://www.hl7.org/fhir/stu3/valueset-item-type.html">https://www.hl7.org/fhir/stu3/valueset-item-type.html</a>), states: "Question with a Coding drawn from a list of options (specified in either the option property, or via the valueset referenced in the options property) as an answer (valueCoding)". This suggests that the answer to a "choice" item in a Questionnaire should always result in a QuestionnaireResponse.item.valueCoding.<br>
Which one of these interpretations is correct, the former or the latter? And if the latter interpretation is correct, how would one capture e.g. a Questionnaire.item.answerOption.valueString or .valueDate in a QuestionnaireResponse.item.valueCoding?</p>



<a name="189228645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Encode%20Questionnaire%20answerOption%20in%20QuestionnaireResponse/near/189228645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Encode.20Questionnaire.20answerOption.20in.20QuestionnaireResponse.html#189228645">(Feb 27 2020 at 16:20)</a>:</h4>
<p>I think the answer is that if the Questionnaire item type is <code>choice</code> then Questionnaire.item.answerOption.value[x] must be Coding</p>



<a name="189228817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Encode%20Questionnaire%20answerOption%20in%20QuestionnaireResponse/near/189228817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Encode.20Questionnaire.20answerOption.20in.20QuestionnaireResponse.html#189228817">(Feb 27 2020 at 16:22)</a>:</h4>
<p>yes, that's it: 'Question with a Coding drawn from a list of options (specified in either the option property, or via the valueset referenced in the options property) as an answer (valueCoding)'  (from <a href="http://hl7.org/fhir/STU3/valueset-item-type.html#expansion" target="_blank" title="http://hl7.org/fhir/STU3/valueset-item-type.html#expansion">http://hl7.org/fhir/STU3/valueset-item-type.html#expansion</a>)</p>



<a name="189231019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Encode%20Questionnaire%20answerOption%20in%20QuestionnaireResponse/near/189231019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Encode.20Questionnaire.20answerOption.20in.20QuestionnaireResponse.html#189231019">(Feb 27 2020 at 16:45)</a>:</h4>
<p>Choice type means 'coding'.  You can have a question of type 'date' where there are answer options defined.  However, agree this needs to be made more clear.  Can you submit a change request <span class="user-mention" data-user-id="216303">@Pieter Edelman</span> ?</p>



<a name="189296001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Encode%20Questionnaire%20answerOption%20in%20QuestionnaireResponse/near/189296001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pieter Edelman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Encode.20Questionnaire.20answerOption.20in.20QuestionnaireResponse.html#189296001">(Feb 28 2020 at 09:46)</a>:</h4>
<p>Well, that kind of makes sense. I would be glad to submit a change request if I understand what needs to be done. However, I now have several new questions about the expected behavior:</p>
<p>First, the documentation on Questionnaire.item.option states:</p>
<ul>
<li>definition: "One of the permitted answers for a "choice" or "open-choice" question."</li>
<li>comment: "This element can be used when the value set machinery of options is deemed too cumbersome or when there's a need to capture options that are not codes."<br>
If I understand correctly, both statements are incorrect. item.option isn't only used for choice or open-choice type items, but also for integer, date, time, etc. And it cannot be used at all to extend value sets with other option types - it's either coding OR one of the other types.</li>
</ul>
<p>Second, the behavior in the presence of the an .option.value[x] is unclear for item.type other than choice/open-choice. Does it mean that the answer MUST come from the defined .option's ("choice"), or that it MAY come from them ("open-choice")?</p>
<p>And last, shouldn't there be a constraint that in all instances of item.option.value[x], [x] MUST match item.type?</p>
<p>Thanks for your help.</p>



<a name="189313790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Encode%20Questionnaire%20answerOption%20in%20QuestionnaireResponse/near/189313790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Encode.20Questionnaire.20answerOption.20in.20QuestionnaireResponse.html#189313790">(Feb 28 2020 at 14:24)</a>:</h4>
<p>The documentation for item.option is incorrect.  item.option can now be used for types other than choice and open-choice.</p>
<p>I'm not sure what you mean by "extend value sets with other option types" - the FHIR machinery doesn't allow value sets of dates, integers, etc.</p>
<p>We have an unapplied change request that will shift the open/closed question into a separate element so you can have open/closed regardless of type.</p>
<p>And yes, that sounds like a good constraint to introduce</p>



<a name="189322068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Encode%20Questionnaire%20answerOption%20in%20QuestionnaireResponse/near/189322068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pieter Edelman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Encode.20Questionnaire.20answerOption.20in.20QuestionnaireResponse.html#189322068">(Feb 28 2020 at 15:52)</a>:</h4>
<p>Thanks for the clarification <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>. I've applied for a Jira account to submit a change request.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
