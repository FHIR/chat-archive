---
layout: page
title: "FHIR Chat  · permissions, hateoas, can-i? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html">permissions, hateoas, can-i?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153936964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153936964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153936964">(Feb 12 2018 at 20:25)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=5884" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=5884">GF#5884</a> asks for more <a href="https://en.wikipedia.org/wiki/HATEOAS" target="_blank" title="https://en.wikipedia.org/wiki/HATEOAS">HATEOAS-style</a> capabilities, so that a client knows "here's what you're allowed to do with this resources." Another thing we could consider here would be to introduce an explicit permissions API like <a href="https://kubernetes.io/docs/admin/authorization/" target="_blank" title="https://kubernetes.io/docs/admin/authorization/">what Kubernetes does</a> with commands like</p>
<div class="codehilite"><pre><span></span>kubectl auth can-i list pods
</pre></div>


<p>In the context of FHIR this might look something like:</p>
<div class="codehilite"><pre><span></span>GET /Patient/123/$can-i?interaction=update
GET /Patient/123/$can-i?operation=$everything
GET /Patient/$can-i?interaction=search
GET /$can-i?interaction=history
</pre></div>


<p>This is more client-driven (i.e. the client can choose to ask questions) rather than server-driven (i.e. the server pushes a list of allowed transitions to a client).</p>
<p>Pros: no wasted work to compute a long list of permissions that may be irrelevant the vast majority of the time. Cons: clunky; sometimes the answer will depend not just on an interaction name but also the specific arguments (or request body) that would go along with it (but this applies to HATEOAS too).</p>
<p>Thoughts <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, <span class="user-mention" data-user-id="192320">@Ed Costello</span> , and others?</p>



<a name="153936965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153936965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153936965">(Feb 12 2018 at 20:27)</a>:</h4>
<p>I like this a lot more except that I wonder (a) should it cover transactional integrity (e.g. given version X as  a header $can-i? (b) does it matter that I can't serve up permissions in the same transaction? not sure about these</p>



<a name="153937818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153937818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153937818">(Feb 15 2018 at 15:53)</a>:</h4>
<p>Although it's definitely an improvement, I do wonder how many server implementers would implement it if we would add it to the spec.</p>



<a name="153937912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153937912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153937912">(Feb 15 2018 at 20:28)</a>:</h4>
<p>I would because we added it. But I wouldn't have much interesting to say about this in my server other than 'yes'</p>



<a name="153937913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153937913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153937913">(Feb 15 2018 at 20:29)</a>:</h4>
<p>but some people have asked for it</p>



<a name="153938581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153938581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153938581">(Feb 19 2018 at 14:39)</a>:</h4>
<p>I like this, it looks much like one of my proposals. And that was ignorant of this. In that I recognized that we have some common query parameters that could be composed into scopes.  <a href="https://healthcaresecprivacy.blogspot.com/2017/05/fhir-oauth-scope-proposal-using-fhir.html" target="_blank" title="https://healthcaresecprivacy.blogspot.com/2017/05/fhir-oauth-scope-proposal-using-fhir.html">https://healthcaresecprivacy.blogspot.com/2017/05/fhir-oauth-scope-proposal-using-fhir.html</a></p>



<a name="153938835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153938835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153938835">(Feb 20 2018 at 06:51)</a>:</h4>
<p>I think there are a lot of details in the authorization that you can not easily convey in the response:</p>
<ul>
<li>GET Observation/456/$can-i?interaction=update =&gt; Yes, but only if you do not change the Observation.subject, otherwise it may fall out of your compartment.</li>
<li>GET Patient/123/$can-i?operation=$everything =&gt; Yes, but you will not really get everything because your authorization scopes only allow you to see Observation and AllergyIntolerance.</li>
<li>GET Patient/$can-i?interaction=search =&gt; Yes, but not if you do a chained search on general-practitioner, because you don't have authorization to read Practitioner.</li>
</ul>
<p>For individual requests it is more efficient to simply try the statement. 200 or 401 is the answer you wanted to know. And on a 200 you don't need to re-query for the result. But that does not fulfill the need of the original question: en-/disable buttons on a form based on available interactions.</p>



<a name="153938947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153938947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153938947">(Feb 20 2018 at 14:25)</a>:</h4>
<p>You should never expect an authorization denial to be conveyed to you. It might, but it might be silent. There are two very different policies, one that says that the client is trustable enough to tell it that it is NOT authorized, the other that says that if the client is not authorized then they are not authorized to know that they are not authorized. So you will simply have the results you are not authorized to receive filtered out silently. Often just returning a successful empty Bundle.   See <a href="http://build.fhir.org/security.html#AccessDenied" target="_blank" title="http://build.fhir.org/security.html#AccessDenied">http://build.fhir.org/security.html#AccessDenied</a></p>



<a name="153939066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153939066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153939066">(Feb 20 2018 at 19:54)</a>:</h4>
<p>it has to be conveyed on POST/PUT/DELETE</p>



<a name="153939405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153939405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153939405">(Feb 21 2018 at 17:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> as in you'll know if it works when you try it?  Should we add a "try" flag somewhere that would allow a client to check the action without actually executing the action?  Useful for things like "before I make my user fill out this form I'll check to see if I can submit the form"?</p>



<a name="153939406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153939406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153939406">(Feb 21 2018 at 17:25)</a>:</h4>
<p>Of course, all of <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> 's points about the specifics of the data would still apply.</p>



<a name="153939446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153939446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153939446">(Feb 21 2018 at 19:36)</a>:</h4>
<p>you can validate a resource as a put/post  - that's pretty much the same thing</p>



<a name="153940033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153940033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ed Costello <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153940033">(Feb 23 2018 at 03:02)</a>:</h4>
<p>Certainly the original problem that led to that suggestion is the UI presentation one. For any FHIR APIs exposing mutation operations to and end user context there are going to be operations the people are not authorized to perform. If there is a goal of people building direct end user facing applications that write back and are inter-operable across different back ends then we're going to need to have some standard way of exposing this information, at least at a course level.</p>
<p>Alternatively, if the primary target of FHIR is going to be towards exposing data for query, and mutation is only expected in a more system to system data exchange context then there is a lot less need for something like this. The limits will be far less dynamic and per-record so it's far more reasonable to use a "just try it" kind of approach. Or the kubernetes style that kicked off this discussion.</p>
<p>Since I originally raised that request,  I've certainly came to the conclusion that FHIR API mutations are really only going to be inter-operable at the system to system level. User facing applications really do need specific APIs to back them, whether these are using the FHIR resources with application specific surrounds to deal with these kind of authorization considerations, or pure application APIs I don't expect a user facing application to be portable across them, and to be honest I struggle to see a case where it would be valuable to have such portability.</p>
<p>Where as interoperability in querying the data actually is a valuable goal and can be achieved without trying to bake this authorization information into the spec.</p>
<p>I'm curious about what contexts people are thinking about when discussing FHIR interoperability now.</p>



<a name="153940099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/permissions%2C%20hateoas%2C%20can-i%3F/near/153940099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/permissions.2C.20hateoas.2C.20can-i.3F.html#153940099">(Feb 23 2018 at 13:45)</a>:</h4>
<p>The FHIR specification is an Interoperability specification.  It should be usable with many security and privacy models.  Including security models that are really good, and really bad... This is not a statement of goodness, just an emphasis that the FHIR specification needs to be independent of the security model.   This is also not to say that there won't be security models that will be published by HL7 (or other organizations like IHE or Katara); in fact that is happening. In those publications they express clearly how the security model interacts with the FHIR model.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
