---
layout: page
title: "FHIR Chat  · transitive composite search ? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transitive.20composite.20search.20.3F.html">transitive composite search ?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153984807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transitive%20composite%20search%20%3F/near/153984807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transitive.20composite.20search.20.3F.html#153984807">(Aug 10 2018 at 10:34)</a>:</h4>
<p>Hello, I have a question concerning the search capabilities of the FHIR-REST-query: I would like to find patients having encounters containing observations with contrained values (e.g. systolic blood pressure &lt; 60). After reading the search documentation I think that I have to use the Composite Search (<a href="http://build.fhir.org/search.html#composite" target="_blank" title="http://build.fhir.org/search.html#composite">http://build.fhir.org/search.html#composite</a>) to enforce each observation to contain both constraints, the contraint on the code values as well as the contraint on the quantity. But I have the additional request that some of the observations have to belong to the same encounter and some are allowed to belong to arbitrary encounters of the patient. For that the composite search somehow would have to be transitively nestable. How would a query like that look like ?<br>
Btw.: Is the implementers stream the correct one to discuss search issues or is there one that better matches that topic ?</p>



<a name="153984837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transitive%20composite%20search%20%3F/near/153984837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transitive.20composite.20search.20.3F.html#153984837">(Aug 10 2018 at 11:41)</a>:</h4>
<p>this is the right place.</p>



<a name="153984848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transitive%20composite%20search%20%3F/near/153984848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transitive.20composite.20search.20.3F.html#153984848">(Aug 10 2018 at 11:46)</a>:</h4>
<p>the only way I can think that you'll get something like that to work is with the _filter parameter</p>



<a name="153984892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transitive%20composite%20search%20%3F/near/153984892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Georg Fette <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transitive.20composite.20search.20.3F.html#153984892">(Aug 10 2018 at 12:30)</a>:</h4>
<p>Ah, interesting, I had not yet taken a look at the "_Filter Parameter" page. But after reading about filters I still have problems constructing my query.</p>
<p>I came up with something like <br>
GET [base]/Patient?_has:Encounter:_has:Observation.component-code-value=1234-5$lt50&amp;_has:Encounter:_has:Observation.component-code-value=1234-5$lt50<br>
&amp;_filter=encounter1.identifier = encounter2.identifier</p>
<p>My first problem is the double reverse chaining of the patient (as I am interested in the patients and not in the observations by which they are contrained by). Is double reverse chaining possible ?<br>
My second problem is the combination with the filter. As neither in the filter specification nor in the normal query specification there exists the possibility for aliases for the objects. It is difficult to express that the encounter has to be the container of one observation and the same encounter also has to be the container of the other observation without having the binding that those two observations are the same as in the other constraints.<br>
Is it necessary to compare the identifier of the ecnounters in a filter or can the encounter be compared itself (i.e. _filter=encounter1 = encounter2) ?</p>



<a name="153984894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transitive%20composite%20search%20%3F/near/153984894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transitive.20composite.20search.20.3F.html#153984894">(Aug 10 2018 at 12:32)</a>:</h4>
<p>so we've always known that the simple search, and even the _filter parameter are hardly the beginning of a real query language. And you're crossed the boundaries, I'm afraid. The only other options you have is:<br>
- do as much of the query as you can and then plough through the return resources, or <br>
- use CQL</p>



<a name="153984936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transitive%20composite%20search%20%3F/near/153984936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transitive.20composite.20search.20.3F.html#153984936">(Aug 10 2018 at 14:08)</a>:</h4>
<p>Keep also in consideration that advanced search features like _filter or composite search are not widely implemented</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
