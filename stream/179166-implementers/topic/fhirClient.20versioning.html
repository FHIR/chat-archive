---
layout: page
title: "FHIR Chat  · fhirClient versioning · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fhirClient.20versioning.html">fhirClient versioning</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="176637845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fhirClient%20versioning/near/176637845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Trond Klakken <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fhirClient.20versioning.html#176637845">(Sep 26 2019 at 08:22)</a>:</h4>
<p>Hi! I'm trying to post R4 fhir objects to our Vonk server, and to get vonk to identify it as R4 object, I have to add ; fhirVersion=4.0 to the accept or contentType headers (<a href="https://www.hl7.org/fhir/http.html#version-parameter" target="_blank" title="https://www.hl7.org/fhir/http.html#version-parameter">https://www.hl7.org/fhir/http.html#version-parameter</a>).</p>
<p>I was hoping the R4 FhirClient for C# (<a href="https://github.com/FirelyTeam/fhir-net-api" target="_blank" title="https://github.com/FirelyTeam/fhir-net-api">https://github.com/FirelyTeam/fhir-net-api</a>) would do this, but after inspection, it does not set the headers.<br>
Is there any way of getting the FhirClient to post fhirVersion without this ugly hack:</p>
<p><code>FhirClient.OnBeforeRequest += (sender, args) =&gt;
{
           args.RawRequest.Accept = args.RawRequest.Accept + "; fhirVersion=4.0";
            args.RawRequest.ContentType = args.RawRequest.ContentType + "; fhirVersion=4.0";
};</code></p>
<p>Headers without hack:</p>
<div class="codehilite"><pre><span></span>{
  &quot;content-length&quot;: &quot;450&quot;,
  &quot;user-agent&quot;: &quot;.NET FhirClient for FHIR 4.0.0&quot;,
  &quot;prefer&quot;: &quot;return=representation&quot;,
  &quot;accept&quot;: &quot;application/fhir+xml; charset=utf-8&quot;,
  &quot;content-type&quot;: &quot;application/fhir+xml; charset=utf-8&quot;
}
</pre></div>


<p>Thanks!</p>



<a name="176653616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fhirClient%20versioning/near/176653616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fhirClient.20versioning.html#176653616">(Sep 26 2019 at 12:35)</a>:</h4>
<p>Seems a bug in the server? Specifying the version is optional. Or is it an end point that supports multiple versions?</p>



<a name="176653831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fhirClient%20versioning/near/176653831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fhirClient.20versioning.html#176653831">(Sep 26 2019 at 12:38)</a>:</h4>
<p>Correct, Vonk R4 release supports multi-version endpoints. Requests can specify version header (default STU3). Looks like we still need to integrate this logic into the <code>FhirClient</code> class.</p>



<a name="176653863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fhirClient%20versioning/near/176653863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Trond Klakken <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fhirClient.20versioning.html#176653863">(Sep 26 2019 at 12:39)</a>:</h4>
<p>Well, this works for now, just writing it a little bit prettier then above :)</p>



<a name="176697128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fhirClient%20versioning/near/176697128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fhirClient.20versioning.html#176697128">(Sep 26 2019 at 21:04)</a>:</h4>
<p>Question - does the Vonk server support configuration to set the default FHIR version to R4?</p>



<a name="176735525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fhirClient%20versioning/near/176735525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Trond Klakken <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fhirClient.20versioning.html#176735525">(Sep 27 2019 at 10:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191370">@Richard Ettema</span> not at this time. So you have to use multiple versions: <a href="http://docs.simplifier.net/vonk/features/multiversion.html" target="_blank" title="http://docs.simplifier.net/vonk/features/multiversion.html">http://docs.simplifier.net/vonk/features/multiversion.html</a></p>



<a name="176736697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fhirClient%20versioning/near/176736697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fhirClient.20versioning.html#176736697">(Sep 27 2019 at 11:11)</a>:</h4>
<p>In our next release we will implement version specific endpoints, so you don't need to use the fhirVersion parameter anymore.</p>



<a name="176913399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fhirClient%20versioning/near/176913399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Trond Klakken <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fhirClient.20versioning.html#176913399">(Sep 30 2019 at 08:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191347">@Mirjam Baltus</span> nice!</p>



<a name="176917283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fhirClient%20versioning/near/176917283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fhirClient.20versioning.html#176917283">(Sep 30 2019 at 09:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191347">@Mirjam Baltus</span> Just out of curiosity, will both options (one endpoint for both versions with version header AND version specific endpoints) be there in next release? Since I saw some people already implementing the FHIR version header.</p>



<a name="176925070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fhirClient%20versioning/near/176925070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fhirClient.20versioning.html#176925070">(Sep 30 2019 at 11:59)</a>:</h4>
<p>Yes, we will keep supporting the current way of running Vonk on one endpoint and using the fhirVersion parameter too. As far as I know, both will work out of the box without having to configure your preference. We are also working on a configuration option to be able to set R4 as the default.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
