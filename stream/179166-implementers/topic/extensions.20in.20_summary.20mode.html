---
layout: page
title: "FHIR Chat  · extensions in _summary mode · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html">extensions in _summary mode</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="171136994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171136994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171136994">(Jul 18 2019 at 04:19)</a>:</h4>
<p>A few  of us (<span class="user-mention" data-user-id="191328">@Ewout Kramer</span> , <span class="user-mention" data-user-id="191319">@James Agnew</span> , <span class="user-mention" data-user-id="191315">@Josh Mandel</span> ) have been having a discussion about whether or not nested extensions on fields labeled as <code>isSummary=true</code> should be included when using the <code>_summary=true</code> search parameter. For example in the following Patient address:</p>
<div class="codehilite"><pre><span></span>    &quot;address&quot;: [
        {
            &quot;extension&quot;: [
                {
                    &quot;url&quot;: &quot;http://fhir.ufp/StructureDefinition/planet&quot;,
                    &quot;valueString&quot;: &quot;Earth&quot;
                }
            ],
            &quot;use&quot;: &quot;home&quot;,
            &quot;type&quot;: &quot;both&quot;,
            &quot;line&quot;: [
                &quot;Milchstrasse 42&quot;
            ],
            &quot;city&quot;: &quot;Spöck&quot;,
            &quot;postalCode&quot;: &quot;76297&quot;,
            &quot;country&quot;: &quot;DE&quot;
        }
    ],
</pre></div>


<p>should the planet extension be included in summary view?</p>
<p>The discussion started because some servers include the <code>rest.security.extension</code> content in <code>/metadata</code> and some do not. SMART on FHIR client libraries  query the capability statement to learn about the authorize and token endpoint and some default to doing this in summary mode to avoid pulling down a very large capability statement, e.g. on a mobile device. It is perfectly understandable why they would want to do it that way. </p>
<p>The question is now if it is reasonable for a client to expect that auth information is included in summary view? </p>
<p>The spec (<a href="https://www.hl7.org/fhir/search.html#summary" target="_blank" title="https://www.hl7.org/fhir/search.html#summary">https://www.hl7.org/fhir/search.html#summary</a>) says "This subset SHOULD consist solely of all supported elements that are marked as "summary" in the base definition of the resource(s)", but the question is whether any nested extensions on elements labeled summary should be included? And the spec also includes the statement: "Implementation Note: There is some question about the inclusion of extensions in the summary. Additional rules may be made around this in the future.", so it is at least somewhat ambiguous. </p>
<p>Servers that are based on the .NET FHIR API (Vonk, Microsoft FHIR Server, etc) don't include extensions in summary view (even nested extensions on elements that are labeled as is summary are excluded). Servers based on HAPI FHIR don't include extensions on resources (e.g. an extension on address is excluded in summary), but due to a bug that was discovered over the course of our discussion, it just happened to include them  on the capability statement, but not others. Since the SMART sandbox is based on HAPI, several SMART on FHIR client libraries now include a dependency on this bug.  The <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> server appears to include extensions nested on isSummary elements. The EMR based FHIR from Cerner, Epic, and AllScripts don't appear to support <code>_summary</code> at all. </p>
<p>It would seem that it would at least be not recommended for a client to depend on this behavior, but some do nonetheless. We were wondering what the correct path forward is? </p>
<p>1. Introduce the "bug" (if that is what it is) in all servers? If yes, only for capability statement?<br>
2. "Fix" all the client libraries?<br>
3. Update the spec to be explicit about the expected behavior one way or another?<br>
4. Some combination of all of the above. <br>
5. ??<br>
<span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , would love to hear your thoughts on this?<br>
<span class="user-mention" data-user-id="195435">@Kurt Ericson</span> what does the GCP FHIR service do?</p>



<a name="171162876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171162876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171162876">(Jul 18 2019 at 12:05)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="195775">@Michael Hansen</span>, great summary of our discussion.</p>



<a name="171162993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171162993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171162993">(Jul 18 2019 at 12:06)</a>:</h4>
<p>I deliberately ensured that those extensions are in the summary.</p>



<a name="171163022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171163022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171163022">(Jul 18 2019 at 12:07)</a>:</h4>
<p>the smart-app-launch spec is moving away from the extensions to known url based discovery. Which I prefer myself now</p>



<a name="171163042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171163042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171163042">(Jul 18 2019 at 12:07)</a>:</h4>
<p>in the mean time, I will keep my server returning those extensions in summary mode, irrespective of whether I return others or not</p>



<a name="171163086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171163086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171163086">(Jul 18 2019 at 12:08)</a>:</h4>
<p>I don't know what the correct answer should be</p>



<a name="171172163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171172163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171172163">(Jul 18 2019 at 13:55)</a>:</h4>
<p>I think in the near term, updating the two SMART libraries with this behavior (Python and  Swift) to avoid depending on _summary would help -- and in the process, updating them to also use /.well-known when available. FYI <span class="user-mention" data-user-id="191339">@Pascal Pfiffner</span>  and <span class="user-mention" data-user-id="191660">@Harold Solbrig</span>.</p>



<a name="171172425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171172425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171172425">(Jul 18 2019 at 13:58)</a>:</h4>
<p>For r5, I think we should pin down expectations for _summary to resolve this ambiguity. (My preference would be to say that complex extensions aren't included -- but clarify that simple extensions are, since they behave as "data type properties" )</p>



<a name="171172491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171172491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171172491">(Jul 18 2019 at 13:59)</a>:</h4>
<p>(And we might clarify that <em>modifier</em> extensions of any nesting level should be included; I'm not sure.)</p>



<a name="171172704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171172704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171172704">(Jul 18 2019 at 14:01)</a>:</h4>
<p>During this discussion, a question also came up about the <code>_elements</code> query parameter. The spec makes it unclear whether nested paths are allowed. (I assume not, though HAPI responds differently than Grahame's server for <code>/metadata?_elements=rest.security</code>)</p>



<a name="171180134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171180134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171180134">(Jul 18 2019 at 15:16)</a>:</h4>
<p>I guess a base question is whether _summary means that other elements are absolutely prohibited, or merely that they <em>should</em> be absent</p>



<a name="171180597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171180597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171180597">(Jul 18 2019 at 15:22)</a>:</h4>
<p>GCP FHIR has not yet implemented _summary=true (just data/text). If I had to guess based on how the server is generally implemented, we will probably default to including nested extensions on summary elements.</p>



<a name="171180678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171180678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171180678">(Jul 18 2019 at 15:22)</a>:</h4>
<p>Related question, does _summary also summarize contained resources, or exclude them?</p>



<a name="171181502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171181502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171181502">(Jul 18 2019 at 15:31)</a>:</h4>
<p>That's a good question <span class="user-mention" data-user-id="197072">@Paul Church</span>.  Can you submit a change request for us to put an answer to this into the core spec (once we figure out what the answer is :&gt;)</p>



<a name="171182582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171182582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171182582">(Jul 18 2019 at 15:43)</a>:</h4>
<p><a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22902&amp;start=0" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22902&amp;start=0">GF#22902</a></p>



<a name="171211337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171211337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171211337">(Jul 18 2019 at 21:39)</a>:</h4>
<p>Acknowledging that this pattern has cascaded into what it is today because of the early behavior of what is returned with <code>_summary</code> in the early SMART sandboxes. Agree with Josh that it would be good to have the Python <span class="user-mention" data-user-id="191660">@Harold Solbrig</span> and Swift <span class="user-mention" data-user-id="191395">@Dave Carlson</span> libraries stop issuing <code>_summary</code> when loading the capability statement and to add support for <code>.well-known</code> in a second step.</p>



<a name="171223170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/171223170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#171223170">(Jul 19 2019 at 01:46)</a>:</h4>
<p>Thanks for chiming in everybody. For Swift (<span class="user-mention" data-user-id="191395">@Dave Carlson</span>),  I added this issue <a href="https://github.com/smart-on-fhir/Swift-FHIR/issues/26" target="_blank" title="https://github.com/smart-on-fhir/Swift-FHIR/issues/26">https://github.com/smart-on-fhir/Swift-FHIR/issues/26</a> the other day. In case you are tracking it.</p>



<a name="245826938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/245826938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Narkinsky <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#245826938">(Jul 13 2021 at 13:48)</a>:</h4>
<p>Is there any standard way to represent rules for required search parameters in the capability statement?  What I mean is something like "For the Patient resource, you must provide EITHER "first name + last name + DOB" OR "first name + last name + phone number" OR "social security number"?  If not, would an extension be appropriate?</p>



<a name="245832583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/extensions%20in%20_summary%20mode/near/245832583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/extensions.20in.20_summary.20mode.html#245832583">(Jul 13 2021 at 14:26)</a>:</h4>
<p>There's this: <a href="https://build.fhir.org/extension-capabilitystatement-search-parameter-combination.html">https://build.fhir.org/extension-capabilitystatement-search-parameter-combination.html</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
