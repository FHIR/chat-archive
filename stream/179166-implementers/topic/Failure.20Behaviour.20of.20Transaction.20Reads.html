---
layout: page
title: "FHIR Chat  · Failure Behaviour of Transaction Reads · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Failure.20Behaviour.20of.20Transaction.20Reads.html">Failure Behaviour of Transaction Reads</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="248322654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Failure%20Behaviour%20of%20Transaction%20Reads/near/248322654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Failure.20Behaviour.20of.20Transaction.20Reads.html#248322654">(Aug 04 2021 at 08:24)</a>:</h4>
<p>According the <a href="https://www.hl7.org/fhir/http.html#trules">Transaction Processing Rules</a> transaction actions should either fail or succeed completely. </p>
<blockquote>
<p>For a transaction, servers SHALL either accept all actions and return a 200 OK, along with a response bundle (see below), or reject all resources and return an HTTP 400 or 500 type response.</p>
</blockquote>
<p>For write actions (create, update, delete, ...) this atomicity is clear. However transactions can also contain reads. In the <a href="http://www.hl7.org/fhir/bundle-transaction.xml.html">transaction bundle example</a> one can find the statement:</p>
<blockquote>
<p>can also do read-only operations. </p>
<p>Note that these do not 'fail' - see discussion on transaction <br>
atomicity for further information </p>
</blockquote>
<p>I can't find a section in the documentation that discusses the transaction atomicity particular for reads.</p>
<p>If I post transaction bundles with reads to HAPI, I get a transaction-response bundle with the individual errors in it's entries rather than a complete failure on the post. If I mix reads and writes, a failure on one write will result in a complete failure but failures on reads will result in successful writes and individual failed reads.</p>
<p>So it seems that failed reads don't result in a failed transaction but failed writes do. Is this the expected behaviour? Is there a section in the documentation that makes this behaviour clear?</p>



<a name="248414183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Failure%20Behaviour%20of%20Transaction%20Reads/near/248414183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Failure.20Behaviour.20of.20Transaction.20Reads.html#248414183">(Aug 04 2021 at 21:57)</a>:</h4>
<p>I think it's <em>reasonable</em> behavior in that reads don't affect state, so their success or failure don't actually impact database state.  Do you have a use-case where a read failure should legitimately cause the transaction to roll back?  Also agree that having better documentation would be good, so feel free to submit a change request either way.</p>



<a name="248414589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Failure%20Behaviour%20of%20Transaction%20Reads/near/248414589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Failure.20Behaviour.20of.20Transaction.20Reads.html#248414589">(Aug 04 2021 at 22:01)</a>:</h4>
<p>That's a tricky one. My gut reaction was that it should fail on the grounds that "something is wrong" in the transaction but I don't know of a use case where it's really necessary to roll back.</p>



<a name="248414926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Failure%20Behaviour%20of%20Transaction%20Reads/near/248414926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Failure.20Behaviour.20of.20Transaction.20Reads.html#248414926">(Aug 04 2021 at 22:04)</a>:</h4>
<p>I'm not arguing that a server <em>couldn't</em> fail the transaction.  Just that it's not necessarily wrong if they don't fail because of an error on a GET.</p>



<a name="248447091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Failure%20Behaviour%20of%20Transaction%20Reads/near/248447091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Failure.20Behaviour.20of.20Transaction.20Reads.html#248447091">(Aug 05 2021 at 07:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> I had the request from someone to implement the atomic failure behaviour on reads in Blaze.  Because the documentation was not super clear, I tested in HAPI and Vonk. Both servers didn't fail on reads.</p>
<p>I like your argument that failing reads do not effect the state of the server. On top of that, in my database architecture which isn't the usual RDBMS, it would be really inefficient to implement a rollback on failing reads. So I will submit a change request.</p>



<a name="248468428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Failure%20Behaviour%20of%20Transaction%20Reads/near/248468428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Failure.20Behaviour.20of.20Transaction.20Reads.html#248468428">(Aug 05 2021 at 12:12)</a>:</h4>
<p>I could see where an operation might be defined this way, but it would be explicitly defined based on use-case and the operations functional need. At the generic transaction level, I would tend to agree with Lloyd that a fail on a GET should not have affected any server state so would not be logical to rollback the transaction. I wonder if those that are looking for this behavior are actually defining something more than just a transaction, they are actually needing an operation?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
