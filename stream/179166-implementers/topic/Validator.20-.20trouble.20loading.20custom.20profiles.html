---
layout: page
title: "FHIR Chat  · Validator - trouble loading custom profiles · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20-.20trouble.20loading.20custom.20profiles.html">Validator - trouble loading custom profiles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153991239"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20-%20trouble%20loading%20custom%20profiles/near/153991239" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20-.20trouble.20loading.20custom.20profiles.html#153991239">(Aug 28 2018 at 13:59)</a>:</h4>
<p>I am using the newest validator from <a href="https://build.fhir.org/downloads.html" target="_blank" title="https://build.fhir.org/downloads.html">https://build.fhir.org/downloads.html</a> and want to validate STU3 resources against custom profiles. Using just the standard validation works fine (here for a file in the directory of the validator)</p>
<div class="codehilite"><pre><span></span>java -jar org.hl7.fhir.validator.jar -version 3.0.1 ./patient-example.xml
</pre></div>


<p>Then I add a Patient profile (just the <code>StructureDefinition</code> resource as XML, not a full IG) in the sub-directory <em>profiles</em>.  Now I want to the validator to load this profile and validate against it. As a test, suppose that I added the standard Patient resource definition, (<a href="https://www.hl7.org/fhir/patient.profile.xml" target="_blank" title="https://www.hl7.org/fhir/patient.profile.xml">https://www.hl7.org/fhir/patient.profile.xml</a>). So I run</p>
<div class="codehilite"><pre><span></span>java -jar org.hl7.fhir.validator.jar -version 3.0.1 ./patient-example.xml -ig profiles/ -profile http://hl7.org/fhir/StructureDefinition/Patient
</pre></div>


<p>This gives the following error:</p>
<div class="codehilite"><pre><span></span>    (v3.0.1-null)
+  .. load IG from profiles/
Exception in thread &quot;main&quot; java.lang.Exception: Error parsing patient.profile.xml: Unknown Content valueSetReference @  START_TAG seen ...escription value=&quot;A human language.&quot;/&gt;\n        &lt;valueSetReference&gt;... @939:28
        at org.hl7.fhir.r4.validation.ValidationEngine.loadIg(ValidationEngine.java:670)
        at org.hl7.fhir.r4.validation.Validator.main(Validator.java:341)
Caused by: org.hl7.fhir.exceptions.FHIRFormatError: Unknown Content valueSetReference @  START_TAG seen ...escription value=&quot;A human language.&quot;/&gt;\n        &lt;valueSetReference&gt;... @939:28
        at org.hl7.fhir.r4.formats.XmlParserBase.unknownContent(XmlParserBase.java:279)
        at org.hl7.fhir.r4.formats.XmlParser.parseElementDefinitionElementDefinitionBindingComponent(XmlParser.java:1888)
        at org.hl7.fhir.r4.formats.XmlParser.parseElementDefinitionContent(XmlParser.java:1701)
        at org.hl7.fhir.r4.formats.XmlParser.parseElementDefinition(XmlParser.java:1626)
        at org.hl7.fhir.r4.formats.XmlParser.parseStructureDefinitionStructureDefinitionSnapshotComponentContent(XmlParser.java:19497)
        at org.hl7.fhir.r4.formats.XmlParser.parseStructureDefinitionStructureDefinitionSnapshotComponent(XmlParser.java:19486)
        at org.hl7.fhir.r4.formats.XmlParser.parseStructureDefinitionContent(XmlParser.java:19418)
        at org.hl7.fhir.r4.formats.XmlParser.parseStructureDefinition(XmlParser.java:19357)
        at org.hl7.fhir.r4.formats.XmlParser.parseResource(XmlParser.java:23323)
        at org.hl7.fhir.r4.formats.XmlParserBase.parse(XmlParserBase.java:105)
        at org.hl7.fhir.r4.formats.XmlParserBase.parse(XmlParserBase.java:89)
        at org.hl7.fhir.r4.validation.ValidationEngine.loadIg(ValidationEngine.java:659)
        ... 1 more
</pre></div>


<p>This error occurs even after removing the <code>-profile</code> parameter, so it seems to be related to the initial loading of the profile. Playing with the <code>-tx</code> and <code>-version</code> parameters does not change anything, either. I tried various different profiles and always see this error (always comaplaining about the same field in the StructureDefinition), yet loading profiles from a directory used to work fine and as far as I could tell from the <a href="http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator" target="_blank" title="http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator">validator wiki page</a>, it is still supported. Did anything change or am I just missing something?</p>



<a name="153991301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20-%20trouble%20loading%20custom%20profiles/near/153991301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20-.20trouble.20loading.20custom.20profiles.html#153991301">(Aug 28 2018 at 15:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="153991431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20-%20trouble%20loading%20custom%20profiles/near/153991431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20-.20trouble.20loading.20custom.20profiles.html#153991431">(Aug 29 2018 at 03:51)</a>:</h4>
<p>the question is why it's reading it as an r4 profile, not an r3 profile. I'll have to have a look tonight</p>



<a name="153993430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20-%20trouble%20loading%20custom%20profiles/near/153993430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20-.20trouble.20loading.20custom.20profiles.html#153993430">(Sep 05 2018 at 13:49)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - was this resolved (or a workaround found)?</p>



<a name="153993441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20-%20trouble%20loading%20custom%20profiles/near/153993441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20-.20trouble.20loading.20custom.20profiles.html#153993441">(Sep 05 2018 at 13:54)</a>:</h4>
<p>no. sorry. I'll work on it tomorrow</p>



<a name="153994272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20-%20trouble%20loading%20custom%20profiles/near/153994272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20-.20trouble.20loading.20custom.20profiles.html#153994272">(Sep 07 2018 at 11:58)</a>:</h4>
<p>OK, thanks! - using the STU3 validator meanwhile.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
