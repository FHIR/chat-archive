---
layout: page
title: "FHIR Chat  · UUID to lower-case() · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html">UUID to lower-case()</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153929587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929587">(Jan 19 2018 at 10:40)</a>:</h4>
<p>In HL7 version 3 datatypes  1 and 2 there was a requirement to send upper-case UUIDs. In FHIR this requirement has shifted to lower-case UUIDs. The UUID 'standard' marks UUIDs as case insensitive.</p>
<p>The HL7 V3 and FHIR requirements to do case conversion both represent a problem. The requirement for a UUID should have been that once it is created, it shall be an immutable string and shall not be converted to upper or lower in any way.</p>
<p>I'm writing this from real world experience where all communication with our national "CDC" like institute is broken based on the case conversion requirements of UUIDs.</p>
<p>What were the reasons behind specifying V3 and FHIR this way? <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  / <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> / <span class="user-mention" data-user-id="192440">@Marc de Graauw</span></p>



<a name="153929590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929590">(Jan 19 2018 at 10:44)</a>:</h4>
<p>it's a running problem in v3 too. But we inherited lowercase from RFC 4122 (<a href="https://tools.ietf.org/html/rfc4122" target="_blank" title="https://tools.ietf.org/html/rfc4122">https://tools.ietf.org/html/rfc4122</a>), which says: The hexadecimal values "a" through "f" are output as<br>
      lower case characters and are case insensitive on input</p>



<a name="153929591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929591">(Jan 19 2018 at 10:47)</a>:</h4>
<p>Just below there it also says:</p>
<p>The formal definition of the UUID string representation is<br>
      provided by the following ABNF [7]:</p>
<div class="codehilite"><pre><span></span>  UUID                   = time-low &quot;-&quot; time-mid &quot;-&quot;
                           time-high-and-version &quot;-&quot;
                           clock-seq-and-reserved
                           clock-seq-low &quot;-&quot; node
  time-low               = 4hexOctet
  time-mid               = 2hexOctet
  time-high-and-version  = 2hexOctet
  clock-seq-and-reserved = hexOctet
  clock-seq-low          = hexOctet
  node                   = 6hexOctet
  hexOctet               = hexDigit hexDigit
  hexDigit =
        &quot;0&quot; / &quot;1&quot; / &quot;2&quot; / &quot;3&quot; / &quot;4&quot; / &quot;5&quot; / &quot;6&quot; / &quot;7&quot; / &quot;8&quot; / &quot;9&quot; /
        &quot;a&quot; / &quot;b&quot; / &quot;c&quot; / &quot;d&quot; / &quot;e&quot; / &quot;f&quot; /
        &quot;A&quot; / &quot;B&quot; / &quot;C&quot; / &quot;D&quot; / &quot;E&quot; / &quot;F&quot;
</pre></div>



<a name="153929592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929592">(Jan 19 2018 at 10:48)</a>:</h4>
<p>That appears to include upper case A-F too right?</p>



<a name="153929593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929593">(Jan 19 2018 at 10:49)</a>:</h4>
<p>it does. I don't know why since it clearly says to use lower case chars</p>



<a name="153929594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929594">(Jan 19 2018 at 10:52)</a>:</h4>
<p>I would propose, <em>not</em> to impose any case conversion in FHIR (or V3, but that ship has sailed). If real world databases generate A-F and a-f, then we break those and that just seems wrong</p>



<a name="153929595"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929595" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929595">(Jan 19 2018 at 10:53)</a>:</h4>
<p>I think the ship has sailed in fhir too. but what does "case insensitive on input" mean?</p>



<a name="153929596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929596">(Jan 19 2018 at 10:53)</a>:</h4>
<p>are there real world databases that generate invalid urns?</p>



<a name="153929597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929597">(Jan 19 2018 at 10:54)</a>:</h4>
<p>No idea. I only use the result of the input, i.e. the UUID. The input (in think) is all things you consider in generating the UUID?</p>



<a name="153929598"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929598" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929598">(Jan 19 2018 at 10:54)</a>:</h4>
<p>also: "he requirement for a UUID should have been that once it is created, it shall be an immutable string and shall not be converted to upper or lower in any way." - where do you get that from? The rules are more complex than that - in a given URI, some parts may or may not be case sensitive</p>



<a name="153929599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929599">(Jan 19 2018 at 10:54)</a>:</h4>
<p>There are real world databases that generate UUIDs. If you convert them to lower-case/upper-case, there is no way to get back to the original UUID</p>



<a name="153929600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929600">(Jan 19 2018 at 10:55)</a>:</h4>
<p>If you cannot get back to the original UUID, you get mismatches, or really ineffcient matching</p>



<a name="153929601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929601">(Jan 19 2018 at 10:55)</a>:</h4>
<p>I think the point is, they are case insensitive, and should be treated accordingly; that's how I understand the rfc: write lower case, accept either case</p>



<a name="153929602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929602">(Jan 19 2018 at 10:56)</a>:</h4>
<p>That sounds to me as if the urn is de facto case insensitive too and that there is no need for FHIR to require lower-case</p>



<a name="153929603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929603">(Jan 19 2018 at 10:57)</a>:</h4>
<p>I don't follow that.</p>



<a name="153929604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929604">(Jan 19 2018 at 11:01)</a>:</h4>
<p>Oracle/Java supports both cases <a href="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html" target="_blank" title="https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html">https://docs.oracle.com/javase/8/docs/api/java/util/UUID.html</a> (see method toString)</p>



<a name="153929605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929605">(Jan 19 2018 at 11:04)</a>:</h4>
<p>I'm just saying that FHIR should not impose the lower-case (or upper-case). I do not read that requirement in the RFC either. Any UUID can have both upper and lower case letters and that does not change when you communicate it in a urn.</p>



<a name="153929606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929606">(Jan 19 2018 at 11:07)</a>:</h4>
<p>Breaking my argument somewhat I also found this link: <a href="https://stackoverflow.com/questions/34585957/postgresql-9-3-how-to-insert-upper-case-uuid-into-table#34586013" target="_blank" title="https://stackoverflow.com/questions/34585957/postgresql-9-3-how-to-insert-upper-case-uuid-into-table#34586013">https://stackoverflow.com/questions/34585957/postgresql-9-3-how-to-insert-upper-case-uuid-into-table#34586013</a></p>



<a name="153929610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929610">(Jan 19 2018 at 13:12)</a>:</h4>
<p>forced convert to urn:oid..    joking...</p>



<a name="153929611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929611">(Jan 19 2018 at 13:15)</a>:</h4>
<p>Given that everyone must process a UUID in case insensitive ways... therefore there is no advantage or need to force a conversion of case... and that forcing, as Alex points out well, is problematic.  I would be against a requirement to force the case.</p>



<a name="153929612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929612">(Jan 19 2018 at 13:19)</a>:</h4>
<p>"A universally unique identifier (UUID) is a 128-bit number (...)"</p>
<p>So, I think equality of UUIDs is based on their 128-bit value, and differences in the (canonical) serialization format are immaterial.  This also means you are not "changing" the UUID in any way when you change lower to upper case.  And we could still tell everyone that in FHIR, we want you to send it in lowercase.</p>



<a name="153929615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929615">(Jan 19 2018 at 13:44)</a>:</h4>
<p>I agree on the equality (hence why urn:oid conversion is also acceptable)... However by forcing a case change, you are forcing unnecessary work; and in some cases creating a failure-mode.   What is the advantage in FHIR for forcing lowercase?</p>



<a name="153929763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUID%20to%20lower-case%28%29/near/153929763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUID.20to.20lower-case().html#153929763">(Jan 20 2018 at 05:21)</a>:</h4>
<p>my read of rfc 4122 is that is requires lower case: "The hexadecimal values "a" through "f" are output as lower case characters". That's why we specifiy lower case. It's true that the grammar allows uppercase, but the text doesn't.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
