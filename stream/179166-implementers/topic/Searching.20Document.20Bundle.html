---
layout: page
title: "FHIR Chat  · Searching Document Bundle · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html">Searching Document Bundle</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="215005614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215005614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Grey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215005614">(Oct 29 2020 at 18:03)</a>:</h4>
<p>I am having trouble searching the FHIR server for a document bundle based on its composition id. I tried:<br>
<strong>[base]/Bundle?composition=[resource id] </strong><br>
and get no results. If I alter this search I always return this error:<br>
<em>"Unknown search parameter \"composition_id\". Value search parameters for this search are: [_id, _language, composition, identifier, message, timestamp, type]"</em><br>
Am I doing something wrong? Thanks</p>



<a name="215005868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215005868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215005868">(Oct 29 2020 at 18:05)</a>:</h4>
<p>I would expect that a DocumentReference would index those FHIR-Documents(compositions+) that have been committed to a persistant bundle (binary).</p>



<a name="215005995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215005995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215005995">(Oct 29 2020 at 18:06)</a>:</h4>
<p><a href="http://hl7.org/fhir/documents.html">http://hl7.org/fhir/documents.html</a></p>



<a name="215006062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215006062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215006062">(Oct 29 2020 at 18:06)</a>:</h4>
<p><a href="http://hl7.org/fhir/documentreference-mappings.html#fhircomposition">http://hl7.org/fhir/documentreference-mappings.html#fhircomposition</a></p>



<a name="215008200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215008200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Grey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215008200">(Oct 29 2020 at 18:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span>  Thanks! If the contents of a document bundle including the composition are not created and stored individually, but only persist on the server within a bundle, can you query the bundles based on on their contents other than bundle id?</p>



<a name="215010444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215010444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215010444">(Oct 29 2020 at 18:42)</a>:</h4>
<p>You can chain through Composition.  So you can say <code>[base]/Bundle?composition.subject=Patient/123</code> or stuff like that</p>



<a name="215010503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215010503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215010503">(Oct 29 2020 at 18:42)</a>:</h4>
<p>(providing the server supports the chaining in question)</p>



<a name="215015967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215015967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215015967">(Oct 29 2020 at 19:25)</a>:</h4>
<p>the limitations of Binary elements and unknown of how capable a server will be at searching within a Binary.... is a reason why a DocumentReference is useful metadata</p>



<a name="215563725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215563725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215563725">(Nov 04 2020 at 10:30)</a>:</h4>
<p>If the Patient resource was in the document Bundle, would the syntax for looking for all documents for Patient 123 be something like <br>
GET [base]/Bundle?composition.subject:Patient.identifier=123 and if I wanted to get a document  Bundle based on its identifier the would <br>
GET [base]/Bundle?composition.identifier=abc123 be an OK syntax?</p>



<a name="215602743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215602743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215602743">(Nov 04 2020 at 16:08)</a>:</h4>
<p>Typically you'll want to include the identifier system, not just the identifier value, but yes, that looks like the appropriate syntaxes</p>



<a name="215688447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215688447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215688447">(Nov 05 2020 at 09:35)</a>:</h4>
<p>Putting reasons as to why you would want to do this aside, if there was a use case to send both query parameters, it looks from the Search page on the FHIR spec that you use a "$" to AND these 2 parameters together<br>
GET [base]/Bundle?composition.identifier=abc123$composition.subject:Patient.identifier=https://fhir.nhs.uk/Id/nhs-number|123<br>
does that look correct?</p>



<a name="215717937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215717937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215717937">(Nov 05 2020 at 14:26)</a>:</h4>
<p>Actually, it'd be an &amp; , not a $ ..</p>



<a name="215724885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215724885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215724885">(Nov 05 2020 at 15:13)</a>:</h4>
<p>It looks as if it should be a "&amp;", but according to the Search documentation, as we are using chaining in the search parameters, I think you are supposed to use "$" to AND parameters together (<a href="http://hl7.org/fhir/R4/search.html#combining">http://hl7.org/fhir/R4/search.html#combining</a>)</p>



<a name="215730764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215730764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215730764">(Nov 05 2020 at 15:51)</a>:</h4>
<p>Composite search parameters using $ have to be pre-defined, and servers will list which ones they support in the capability statement. It's not an operator that can be applied arbitrarily in a query.</p>



<a name="215829118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215829118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215829118">(Nov 06 2020 at 10:44)</a>:</h4>
<p><span class="user-mention" data-user-id="197072">@Paul Church</span> <span class="user-mention" data-user-id="191372">@René Spronk</span>  - I didn't pick that up from documentation. Could you point me to the relevant section that says parameters using $ have to be pre-defined?</p>



<a name="215839820"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20Document%20Bundle/near/215839820" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20Document.20Bundle.html#215839820">(Nov 06 2020 at 12:37)</a>:</h4>
<p>See <a href="http://build.fhir.org/search.html#composite">http://build.fhir.org/search.html#composite</a> , which is the only search parameter type that uses $ as a separator</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
