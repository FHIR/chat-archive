---
layout: page
title: "FHIR Chat  · R4B questions / issues · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html">R4B questions / issues</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="264152793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264152793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264152793">(Dec 08 2021 at 13:17)</a>:</h4>
<p>I've finally spent some quality time with the latest R4B draft.  I've catalogued a number of issues locally and today I'm trying to open Jira issues for the ones that make sense.  I think I will post questions/discussions in this thread for the superset (assuming that is helpful for folks).  Or maybe I should start a separate topic for each one?</p>
<p>High-level summary:</p>
<ul>
<li><a href="http://FHIR#34426">duplicate version suffix in canonical reference values</a></li>
<li><a href="#narrow/stream/179166-implementers/topic/potentially.20bad.20invariant.20in.20RatioRange">potentially bad invariant in RatioRange</a></li>
<li><a href="#narrow/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types">clarification on RatioRange and CodeableReference data types in "open" choice types</a></li>
<li><a href="#narrow/stream/179166-implementers/topic/CodeSystem.20FHIRVersion.20in.20R4B">codesystem-FHIR-version: removes "4.0.1" and replaces it with "4.1.0"</a> ...shouldn't it be additive?</li>
<li><a href="#narrow/stream/179166-implementers/topic/ValueSet.20RemittanceOutcome.20in.20R4B">codesystem-remittance-outcome: removes "queued"</a> ...I'd consider that a breaking change to ExplanationOfBenefit, ClaimResponse, CoverageEligibilityResponse, EnrollmentResponse, and PaymentReconciliation</li>
<li><a href="#narrow/stream/179166-implementers/topic/R4B.20missing.20valueset.3F">ValueSets ConceptSubsumptionOutcome and StandardsStatus are missing in R4B; and ValueSet StatisticsCode is invalid</a></li>
<li><a href="https://jira.hl7.org/browse/FHIR-34303">ResourceTypes Codesystem contains duplicate entries</a></li>
</ul>
<p>I havn't checked whether any of these apply to R5 as well, but some of them may.</p>



<a name="264155941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264155941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264155941">(Dec 08 2021 at 13:40)</a>:</h4>
<p>I'd say a separate topic for each is better - otherwise the discussion would be hard to follow.</p>



<a name="264161010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264161010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264161010">(Dec 08 2021 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191676">@Lee Surprenant</span> these are great finds, thank you! Meta question: can you talk about your methods of investigation? E.f., should we expect that since you found one surprising ValueSet change, there are no others lurking?</p>



<a name="264161193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264161193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264161193">(Dec 08 2021 at 14:19)</a>:</h4>
<p>I'm going through the exercise of updating our fhir server implementation (on a branch), so thats how I found these.</p>



<a name="264161365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264161365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264161365">(Dec 08 2021 at 14:20)</a>:</h4>
<p>I regenerated our model classes and checked the diffs.  We use enums for required code bindings and so the diff was pretty clear on those.</p>



<a name="264161422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264161422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264161422">(Dec 08 2021 at 14:21)</a>:</h4>
<p>there's others I've opened previously as well (which aren't fixed yet)...maybe I'll go find those and mention them here just so i have a single list i'm tracking :-)</p>



<a name="264162719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264162719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264162719">(Dec 08 2021 at 14:31)</a>:</h4>
<p>ok, i added the main one i was thinking of and linked them to the various topics</p>



<a name="264196130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264196130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264196130">(Dec 08 2021 at 18:11)</a>:</h4>
<p>A similar, but more acceptable, set of CodeSystem changes that I would consider "backwards-breaking" is in the foundational resource types.<br>
To align with the updates to this version of FHIR, concepts have been removed from the following ValueSets:</p>
<ul>
<li><a href="https://build.fhir.org/branches/R4B/valueset-resource-types.html">https://build.fhir.org/branches/R4B/valueset-resource-types.html</a></li>
<li><a href="https://build.fhir.org/branches/R4B/valueset-data-types.html">https://build.fhir.org/branches/R4B/valueset-data-types.html</a></li>
<li><a href="https://build.fhir.org/branches/R4B/valueset-defined-types.html">https://build.fhir.org/branches/R4B/valueset-defined-types.html</a></li>
<li><a href="https://build.fhir.org/branches/R4B/valueset-all-types.html">https://build.fhir.org/branches/R4B/valueset-all-types.html</a></li>
</ul>
<p>These (at least the ResourceType one) have required bindings from many foundation resources like OperationDefinition, StructureDefinition, ElementDefinition, MessageDefinition, CapabilityStatement, SearchParameter, Questionnaire, CompartmentDefinition.</p>
<p>Presumably we wouldn't expect conformance artifacts like these that are valid in R4 to also be valid in R4B, right?<br>
Are we comfortable saying a valid R4 Questionnaire may not be a valid R4B Questionnaire (even though the chances of having one that references one of the removed resource types is extremely slim)?</p>



<a name="264199335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264199335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264199335">(Dec 08 2021 at 18:31)</a>:</h4>
<p>those particular value sets are version specific, and will change. But what's been deleted from data types?</p>



<a name="264199614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264199614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264199614">(Dec 08 2021 at 18:33)</a>:</h4>
<p>ah SubstanceAmount. yes, that's fine.</p>



<a name="264201983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264201983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264201983">(Dec 08 2021 at 18:50)</a>:</h4>
<p>yep, they even have this nice warning:</p>
<blockquote>
<p>This Value Set is normative - it is generated based on the information defined in this specification. The definition will remain fixed across versions, but the actual contents will change from version to version</p>
</blockquote>
<p>I assume "The definition will remain fixed across versions" is just saying concepts won't change meaning (so CodeSystem.versionNeeded=false)?</p>



<a name="264202206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264202206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264202206">(Dec 08 2021 at 18:52)</a>:</h4>
<p>yes</p>



<a name="264202335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264202335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264202335">(Dec 08 2021 at 18:53)</a>:</h4>
<p>Ok, thanks.  I wasn't too concerned about any of the resource types I listed there...Questionnaire seemed the most iffy which is why I singled that one out in my question, which is sort of me just testing the boundaries of this statement from Josh:</p>
<blockquote>
<p>Valid R4 resources should absolutely be valid R4B resources.</p>
</blockquote>
<p>Safe to assume my answer is "we are comfortable with these potentially breaking changes", so no need to open an issue for this one?</p>



<a name="264203113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264203113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264203113">(Dec 08 2021 at 18:58)</a>:</h4>
<p>yes. in the corner case that you were writing a questionnaire with a subjectType of a resourceType like MedicinalProductPackaged, it couldn't be valid in R4B.</p>



<a name="264506351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264506351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264506351">(Dec 10 2021 at 20:52)</a>:</h4>
<p>A few more tidbits from the investigation:  was going through the examples zip downloaded from <a href="https://build.fhir.org/branches/R4B/downloads.html">https://build.fhir.org/branches/R4B/downloads.html</a> and seeing a lot of issues.  So far, the leading two causes I've seen are the following:</p>
<ul>
<li>Somewhere between R4 and the latest draft at <a href="http://build.fhir.org">build.fhir.org</a>, the value at <a href="http://hl7.org/fhir/extension-structuredefinition-fhir-type.html">http://hl7.org/fhir/extension-structuredefinition-fhir-type.html</a> got flipped from <code>url</code> to <code>uri</code>.  In R4B, the definition is still <code>url</code> but almost all the StructureDefinition examples use <code>uri</code>.</li>
<li>LOTS of ValueSets that claim conformance to <a href="http://hl7.org/fhir/StructureDefinition/shareablevalueset">http://hl7.org/fhir/StructureDefinition/shareablevalueset</a> but are missing the required element <code>experimental</code></li>
</ul>



<a name="264515507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264515507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264515507">(Dec 10 2021 at 22:08)</a>:</h4>
<p>opened <a href="http://jira.hl7.org/browse/FHIR-34449">FHIR#34449</a> for the former and <a href="http://jira.hl7.org/browse/FHIR-34450">FHIR#34450</a> for the latter.  a lot of questionnaire examples are still invalid from <a href="http://jira.hl7.org/browse/FHIR-24080">FHIR#24080</a> as well (already marked <code>Resolved - change required</code>)</p>



<a name="264749639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264749639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264749639">(Dec 13 2021 at 18:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191676">@Lee Surprenant</span> , I think <a href="http://jira.hl7.org/browse/FHIR-34449">FHIR-34449</a> is covered by <a href="http://jira.hl7.org/browse/FHIR-31733">FHIR-31733</a> (and the linked <a href="http://jira.hl7.org/browse/FHIR-32105">FHIR-32105</a> ).  Is that correct?</p>



<a name="264751735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264751735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264751735">(Dec 13 2021 at 18:43)</a>:</h4>
<p>Thanks Gino.  I did search Jira for some of these but must not have searched for this one.  Will close 34449 as a duplicate of 32105</p>



<a name="264752131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264752131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264752131">(Dec 13 2021 at 18:46)</a>:</h4>
<p>No problem!  I did the same thing when I missed 32105 (it's a lot easier to catch when you file the ticket =).</p>



<a name="264752336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264752336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264752336">(Dec 13 2021 at 18:48)</a>:</h4>
<p>in 32105 there is a "Resolution Description" of:</p>
<blockquote>
<p>While this should be URI, we've lived with it as URL for quite a while and it's going to break lots of tooling to change, and we've decided it doesn't much matter. We'll never encounter a URN, so URL is ok.  We will correct the values in the instance to use valueUrl.</p>
</blockquote>
<p>However, there is also this comment from Lloyd:</p>
<blockquote>
<p>Reverted previous resolution: Persuasive with Modification made 2021-05-24 00:00:00.0 with vote Ewout Kramer/Michael Donnelly: 22-0-1//(Impact: Non-substantive; Category: Correction; Version: null)//Will correct the extension definition to be uri rather than url</p>
</blockquote>
<p>I assume the Resolution Description text is the NEW resolution and that the "Will correct the extension definition to be uri rather than url" in the comment from Lloyd was the old resolution that will be reverted...does that sound right?</p>



<a name="264752855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264752855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264752855">(Dec 13 2021 at 18:52)</a>:</h4>
<p>Never mind, I confirmed that understanding by looking at the issue's history (it changed 9 minutes after the original resolution was approved :-).  FWIW I think its the right decision though.</p>



<a name="264755692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264755692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264755692">(Dec 13 2021 at 19:15)</a>:</h4>
<p>Just opened another one; hopefully not another dup:  <a href="https://jira.hl7.org/browse/FHIR-34462">Apply eld-17 update to allow targetProfile for CodeableReference in R4B</a></p>



<a name="264922113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264922113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264922113">(Dec 14 2021 at 20:40)</a>:</h4>
<p>ok all addressed - there'll be a new R4B posted just as soon as sonatype starts working so I can release new build tools</p>



<a name="264925049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/264925049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#264925049">(Dec 14 2021 at 21:03)</a>:</h4>
<p>awesome, thanks grahame!</p>



<a name="265104831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/265104831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#265104831">(Dec 16 2021 at 02:24)</a>:</h4>
<p>The two technical corrections (from the list at <a href="https://build.fhir.org/branches/R4B/ballot-intro.html">https://build.fhir.org/branches/R4B/ballot-intro.html</a>) that I've seen break tests so far are:</p>
<ul>
<li><a href="http://jira.hl7.org/browse/FHIR-28312">FHIR-28312</a>  - Corrected type for 'profile' parameter in $validate operation to be canonical, not uri (aside:  why is this listed under StructureDefinition?)</li>
<li><a href="http://jira.hl7.org/browse/FHIR-28415">FHIR-28415</a>  - Corrected Schematron XPath for drt-1 constraint (the description says its for the XPath but the FHIRPath constraint got updated too)</li>
</ul>



<a name="265104881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/265104881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#265104881">(Dec 16 2021 at 02:25)</a>:</h4>
<p>On 28312, this is a backwards-breaking change to the $validate operation which clients must be aware of (or else they will continue passing a uri where its now expecting a canonical).</p>
<p>On 28415, the old expression allowed a Duration with a value and a unit (but no coded unit) whereas the new expression does not. Note that this change actually broke one of the spec examples (or helped identify a broken example...depending how you want to look at it): <a href="http://jira.hl7.org/browse/FHIR-34465">FHIR#34465</a></p>
<p>I think I'm OK with both of these; I just wanted to document my experience here / give others a heads up.</p>



<a name="265178911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/265178911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#265178911">(Dec 16 2021 at 16:14)</a>:</h4>
<p>This one wasn't one of mine, but I'll mention it here because I don't think the change has been applied yet (at least not fully) and it would be nice to have ClinicalUseIssue totally gone before the connectathon snapshot is made:  <a href="https://jira.hl7.org/browse/FHIR-31847">https://jira.hl7.org/browse/FHIR-31847</a></p>



<a name="265179324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/265179324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#265179324">(Dec 16 2021 at 16:17)</a>:</h4>
<p><a href="https://jira.hl7.org/browse/FHIR-34445">https://jira.hl7.org/browse/FHIR-34445</a> is a minor related issue that I opened but didn't bother mentioning above because the fix/workaround is so simple</p>



<a name="265180175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/265180175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#265180175">(Dec 16 2021 at 16:23)</a>:</h4>
<p>It would be great to get rid of ClinicalUseIssue and I have tried, several times. I have removed every reference to it in a local build (grep'ed every file), deleted everything I can find and it will not build without it. A circular dependency or something strange. Maybe now that the links to it have gone and the build has happened a few times, removing it again will work.</p>



<a name="265201974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/265201974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#265201974">(Dec 16 2021 at 18:54)</a>:</h4>
<p>I have posted my release candidate to <a href="http://build.fhir.org">build.fhir.org</a> at <a href="https://build.fhir.org/branches/R4B/index.html">https://build.fhir.org/branches/R4B/index.html</a>. There's a few hours to do more QA, and I'll look at the last few issues raised here</p>



<a name="265204698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/265204698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#265204698">(Dec 16 2021 at 19:13)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-28312">FHIR-28312</a> - must clients invoke this as a simple URL parameter, so won't notice the difference. I don't know if we can require servers to continue to accept url as well as canonical?</p>



<a name="265207131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/265207131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#265207131">(Dec 16 2021 at 19:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191651">@Rik Smithies</span> <a href="http://jira.hl7.org/browse/FHIR-34465">FHIR-34465</a> is a more general issue: you are not coding your example quantities, just using UCUM units in the human readable units. Please review all of your examples and make your UCUM units explicit - people are very much guided by the examples. And the area you are working in, processible units seems like a very necessary thing</p>



<a name="265278934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/265278934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#265278934">(Dec 17 2021 at 10:35)</a>:</h4>
<p>done. thanks</p>



<a name="265290636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/265290636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#265290636">(Dec 17 2021 at 12:45)</a>:</h4>
<p>but it did miss my final build, so that will not be part of the snapshot</p>



<a name="268573982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/268573982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#268573982">(Jan 19 2022 at 17:22)</a>:</h4>
<p>process question:  if some of my tickets are pre-applied in R4B and I've confirmed that the issues have been addressed...should I close the ticket myself or wait for some HL7 WG to review what was done?</p>



<a name="268575871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/268575871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#268575871">(Jan 19 2022 at 17:35)</a>:</h4>
<p>Has the workgroup voted on these tickets? If so, we'll want to hit the "Applied" button rather than closing:<br>
<a href="/user_uploads/10155/IgH99rfNIP9v-2L50wCMJ4vE/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/IgH99rfNIP9v-2L50wCMJ4vE/image.png" title="image.png"><img src="/user_uploads/10155/IgH99rfNIP9v-2L50wCMJ4vE/image.png"></a></div>



<a name="268576717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/268576717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#268576717">(Jan 19 2022 at 17:41)</a>:</h4>
<p>my understanding is that they were preapplied by grahame to get a good snapshot for connectathon and HAVE NOT been voted</p>



<a name="268587050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/268587050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#268587050">(Jan 19 2022 at 18:58)</a>:</h4>
<p>Okay,  in this context if you are happy with the current state I don't think we need to proceed with and it seems fair to close.  I will note that <a class="stream" data-stream-id="179280" href="/#narrow/stream/179280-fhir.2Finfrastructure-wg">#fhir/infrastructure-wg</a>  is the best place for discussion on these points</p>



<a name="274782317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/274782317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#274782317">(Mar 10 2022 at 02:33)</a>:</h4>
<p>Today I hit an interesting issue that I missed in my first go-around with R4B and so I thought I'd share it here:<br>
Most references to codesystems that are external to FHIR (and especially to v3 codesystems) have binding strength "Example" and we don't really do anything with those.<br>
However, in at least one case, there is an Extensible binding to a v3 CodeSystem in a resource type that we care about:  <br>
<a href="http://hl7.org/fhir/r4/explanationofbenefit-definitions.html#ExplanationOfBenefit.accident.type">http://hl7.org/fhir/r4/explanationofbenefit-definitions.html#ExplanationOfBenefit.accident.type</a></p>
<p>In R4, those v3 CodeSystems were included with the definitions from the downloads page of the FHIR spec and the hierarchy in them was modeled as a set of nested codes.<br>
In R4B, the v3 CodeSystems are not included and so you need to get those from <a href="https://terminology.hl7.org">https://terminology.hl7.org</a> separately.<br>
In this particular case, the valueSet has the following include filter:</p>
<div class="codehilite"><pre><span></span><code>      {
        &quot;system&quot; : &quot;http://terminology.hl7.org/CodeSystem/v3-ActCode&quot;,
        &quot;filter&quot; : [
          {
            &quot;property&quot; : &quot;concept&quot;,
            &quot;op&quot; : &quot;is-a&quot;,
            &quot;value&quot; : &quot;_ActIncidentCode&quot;
          }
        ]
      }
</code></pre></div>
<p>Our server has support for expanding these from CodeSystems, but for some reason it wasn't working...<br>
it turns out that the newer v3 CodeSystem resources like this one no longer nest the concepts and now they only express the hierarchy through a property named "subsumedBy".</p>



<a name="274827413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/274827413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#274827413">(Mar 10 2022 at 12:27)</a>:</h4>
<p>Update:  while the v2 and v3 ValueSet and CodeSystem resources are no longer available in the "definitions" download, I found that <em>most of them</em> <em>are</em> available in the ValueSet expansions download linked to under <code>Code Generation Support</code> from <a href="https://build.fhir.org/branches/R4B/downloads.html">https://build.fhir.org/branches/R4B/downloads.html</a> (including the v3-ActCode one mentioned above).  And because they are listed in their expanded form, we might get away with not packaging the corresponding CodeSystem or being able to expand the ValueSets ourselves.</p>



<a name="274829761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/274829761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#274829761">(Mar 10 2022 at 12:50)</a>:</h4>
<p>I said <em>most of them</em> above because I thought we were missing a couple expansions for bindings from the Patient resource, but I looked again and the ValueSet expansions file <em>does</em> have those.</p>



<a name="274829800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/274829800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#274829800">(Mar 10 2022 at 12:51)</a>:</h4>
<p>Also worth mentioning that this extensions download file has validation issues: <a href="http://jira.hl7.org/browse/FHIR-36244">FHIR-36244</a></p>



<a name="274853662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/274853662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#274853662">(Mar 10 2022 at 15:49)</a>:</h4>
<p>I have taken to downloading/parsing/loading the matching <code>.expansions</code> package for any request on a <code>.core</code> package by default.  I did not like the initial 'feel' of doing it (feels like defeat!  ;-), but it has proven to be generally easier.</p>
<p>Probably preaching to the choir here, but the biggest gotcha I ran into is 'partial' expansions included in the package, signified by <code>ValueSet.expansion.parameter.name=limitedExpansion</code> and/or extensions on <code>ValueSet.expansion</code> of <code>.../valueset-toocostly</code> and <code>.../valueset-unclosed</code>).  Looking up the literals in <code>ValueSet-ucum-units.json</code> also shows that there is no constraint for repeated values in <code>expansion.parameters</code>, but at least they are all duplicate values that match?  =)</p>



<a name="274885390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/274885390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#274885390">(Mar 10 2022 at 19:41)</a>:</h4>
<blockquote>
<p>it turns out that the newer v3 CodeSystem resources like this one no longer nest the concepts and now they only express the hierarchy through a property named "subsumedBy".</p>
</blockquote>
<p>not the newer ones, but the ones that have a poly-heirarchy, which ActCode does. So <span class="user-mention" data-user-id="191676">@Lee Surprenant</span> either you can handle those, or you fall back to the .expansions package, which is provided to help code generators that do not have a terminology server to depend on. And the value sets in the .expansions are intentionally limited to required bindings</p>



<a name="274972497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/274972497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#274972497">(Mar 11 2022 at 13:13)</a>:</h4>
<p>I guess that makes sense.  I just wish there was a standard property name that we could rely on...its confusing to me that the CodeSystem properties are defined via some optional URI field... how are we supposed to know that "subsumedBy" is the one to use for hierarchy in this case?</p>



<a name="274972616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/274972616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#274972616">(Mar 11 2022 at 13:14)</a>:</h4>
<blockquote>
<p>I have taken to downloading/parsing/loading the matching .expansions package for any request on a .core package by default.</p>
</blockquote>
<p>I was just starting to think this is the best option.  But one aspect I didn't appreciate until our failing unit tests:  we need to be able to traverse the hierarchy to support the <code>:above</code> and <code>:below</code> token parameter modifiers</p>



<a name="274978155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/274978155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#274978155">(Mar 11 2022 at 13:59)</a>:</h4>
<p>OK, now here is an interesting one:  I was poking around the R4B valuesets download (trying to see how many <a href="http://terminology.hl7.org">terminology.hl7.org</a> CodeSystems were referenced) and I noticed these two codesystem urls that don't look quite right:</p>
<ul>
<li><a href="http://terminology.hl7.org/fhir/CodeSystem/medicationdispense-status-reason">http://terminology.hl7.org/fhir/CodeSystem/medicationdispense-status-reason</a> (from <a href="https://build.fhir.org/branches/R4B/valueset-medicationdispense-status-reason.html">https://build.fhir.org/branches/R4B/valueset-medicationdispense-status-reason.html</a>)</li>
<li><a href="http://terminology.hl7.org/fhir/CodeSystem/medicationdispense-category">http://terminology.hl7.org/fhir/CodeSystem/medicationdispense-category</a> (from <a href="https://build.fhir.org/branches/R4B/valueset-medicationdispense-category.html">https://build.fhir.org/branches/R4B/valueset-medicationdispense-category.html</a>)</li>
</ul>
<p>FHIR-defined systems usually have a prefix like <code>http://hl7.org/fhir</code> and external hl7 systems are usually <code>http://terminology.hl7.org/CodeSystem</code> but, just for these two, there is an extra <code>/fhir</code> on the path. JIRA issue?</p>



<a name="274979793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/274979793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#274979793">(Mar 11 2022 at 14:11)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-36259">FHIR-36259</a></p>



<a name="275288936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20questions%20/%20issues/near/275288936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues.html#275288936">(Mar 14 2022 at 19:49)</a>:</h4>
<blockquote>
<p>And the value sets in the .expansions are intentionally limited to required bindings</p>
</blockquote>
<p>But not the required bindings from core spec extensions apparently.  Just bumped into that while validating a couple examples that have this one:  <a href="https://build.fhir.org/branches/R4B/extension-family-member-history-genetics-parent.json.html">https://build.fhir.org/branches/R4B/extension-family-member-history-genetics-parent.json.html</a> (because I didn't have the expanded <a href="http://hl7.org/fhir/ValueSet/parent-relationship-codes">http://hl7.org/fhir/ValueSet/parent-relationship-codes</a> )</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
