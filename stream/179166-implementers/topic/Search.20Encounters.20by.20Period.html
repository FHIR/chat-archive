---
layout: page
title: "FHIR Chat  · Search Encounters by Period · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html">Search Encounters by Period</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="253479254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/253479254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amy Li <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#253479254">(Sep 15 2021 at 20:08)</a>:</h4>
<p>Hi, we would like to implement a date Period  search on Encounters for a list of encounters that are either admitted or discharged within the date range.  After reading the specification on date filters and prefixes, we want to minimize the complexity of using prefixes.  </p>
<p>Can someone please confirm if a system is allowed to <br>
a. omit all date search prefixes.  This means just the dates are used as such <br>
            [baseURL]/Encounter?date=2021-01-01&amp;date=2021-12-31<br>
The search is expected to include any encounters that are admitted or discharged on or after 2021-01-01 and before or on 2021-12-31.</p>
<p>b. implement a subset of prefixes.  We would pick and choose to implement a few prefixes that make sense  with our data.</p>
<p>Thanks,</p>
<p>Amy</p>



<a name="253481902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/253481902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#253481902">(Sep 15 2021 at 20:25)</a>:</h4>
<p><code>[baseURL]/Encounter?date=2021-01-01</code> matches encounter with admit and discharge both on that day - and so <code>[baseURL]/Encounter?date=2021-01-01&amp;date=2021-12-31</code> won't match anything (see <a href="http://hl7.org/fhir/search.html#prefix">http://hl7.org/fhir/search.html#prefix</a> ' the range of the search value fully contains the range of the target value')</p>



<a name="253482240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/253482240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#253482240">(Sep 15 2021 at 20:28)</a>:</h4>
<p>What you want is <code>[baseURL]/Encounter?date=ge2021-01-01&amp;date=le2021-12-31</code>  - that matches  encounters that are admitted or discharged on or after 2021-01-01 and before or on 2021-12-31.</p>



<a name="253482311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/253482311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#253482311">(Sep 15 2021 at 20:29)</a>:</h4>
<p>(but double-check that with the spec I linked - date searches on periods are confusing)</p>



<a name="253487572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/253487572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#253487572">(Sep 15 2021 at 21:04)</a>:</h4>
<p>Using HAPI this won't work [baseURL]/Encounter?date=2021-01-01&amp;date=2021-12-31, the default comparator with not specified is eq. Meaning that what you said was translated as [baseURL]/Encounter?date=<strong>eq</strong>2021-01-01&amp;date=<strong>eq</strong>2021-12-31</p>
<p>If you did like  Michele showed, <code>[baseURL]/Encounter?date=ge2021-01-01&amp;date=le2021-12-31 </code> I would think that if either period.start OR period.end was in the range the Encounter would be returned.</p>



<a name="253621743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/253621743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#253621743">(Sep 16 2021 at 17:49)</a>:</h4>
<p><span class="user-mention" data-user-id="335936">@Daniel Venton</span> Multiple search parameter repetitions are treated as <strong>AND</strong>.</p>



<a name="253632402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/253632402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#253632402">(Sep 16 2021 at 18:57)</a>:</h4>
<p>Then you are saying that since it's a date range applied to a range that:<br>
period.start has to be &gt; lower bound AND period.start has to be &lt; upper bound<br>
AND [NOT Allowed to be OR in this position?]<br>
period.start has to be &gt; lower bound AND period.start has to be &lt; upper bound.</p>



<a name="253632989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/253632989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#253632989">(Sep 16 2021 at 19:00)</a>:</h4>
<p>Following that pattern. All date attributes that the search parameter applies to must be within range. In CARIN a service-date param applies to 2 ranges service date and billing date.<br>
All 4 dates must fall within the date range specified.<br>
If any one of those dates are missing, then the resource is not a match.</p>



<a name="253636744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/253636744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#253636744">(Sep 16 2021 at 19:25)</a>:</h4>
<p><code>date=ge2021-01-01</code> is 'the range above the search value intersects (i.e. overlaps) with the range of the target value, or the range of the search value fully contains the range of the target value' = the encounter end must be on or after 2021-01-01<br>
<code>date=le2021-12-31</code> is 'the range below the search value intersects (i.e. overlaps) with the range of the target value or the range of the search value fully contains the range of the target value' = the encounter start must on or before 2021-12-31<br>
both conditions = the encounter end must be on or after 2021-01-01 AND the encounter start must on or before 2021-12-31<br>
that is matched if encounter end OR encounter start are within the range</p>



<a name="253640741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/253640741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#253640741">(Sep 16 2021 at 19:52)</a>:</h4>
<p>Date comparisons are always handled as range overlap/intersection tests.  So Encounter?date isn't about start vs. end it's about the range represented by the whole period of time - based on the precision stated.</p>



<a name="253643919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/253643919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#253643919">(Sep 16 2021 at 20:15)</a>:</h4>
<p>'range overlap/intersection tests' translate into condition on the start / end of the relevant periods, that is what I did above</p>



<a name="270531962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/270531962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> guninder <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#270531962">(Feb 03 2022 at 11:07)</a>:</h4>
<p>Hello ! <br>
We are implementing CARIN's profiles for and are creating c4bb EOB resources based on this-<br>
<a href="http://hl7.org/fhir/us/carin-bb/STU1/StructureDefinition-C4BB-ExplanationOfBenefit-Pharmacy.html">http://hl7.org/fhir/us/carin-bb/STU1/StructureDefinition-C4BB-ExplanationOfBenefit-Pharmacy.html</a><br>
Basically, we are through with it but the only thing we are failing for the is the value-set mentioned in the profile for ExplanationOfBenefit.supportingInfo:dawcode.code  which is <br>
Link - <a href="http://hl7.org/fhir/us/carin-bb/STU1/ValueSet-NCPDPDispensedAsWrittenOrProductSelectionCode.html">http://hl7.org/fhir/us/carin-bb/STU1/ValueSet-NCPDPDispensedAsWrittenOrProductSelectionCode.html</a></p>
<p>As per this URL (<a href="https://build.fhir.org/ig/HL7/carin-bb/ValueSet-NCPDPDispensedAsWrittenOrProductSelectionCode.html">https://build.fhir.org/ig/HL7/carin-bb/ValueSet-NCPDPDispensedAsWrittenOrProductSelectionCode.html</a>) FHIR doesn’t give detail on the value-set required and we don’t have licensed NCPDP codes to support this.</p>
<p>Although we had tried passing the DAW standard code values 0-9 from this <a href="https://ushik.ahrq.gov/ViewItemDetails?system=mdr&amp;itemKey=60578000">https://ushik.ahrq.gov/ViewItemDetails?system=mdr&amp;itemKey=60578000</a> </p>
<p>But still not getting through.</p>
<p>So, seeking help /advice on how to get through it.  Any alternative value-set and code can be used here. Any help or pointers on this is appreciated. <br>
Thank you!</p>



<a name="270570005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20Encounters%20by%20Period/near/270570005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20Encounters.20by.20Period.html#270570005">(Feb 03 2022 at 15:48)</a>:</h4>
<p>You might want to ask on <a class="stream" data-stream-id="204607" href="/#narrow/stream/204607-CARIN-IG-for-Blue-Button.C2.AE">#CARIN IG for Blue Button®</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
