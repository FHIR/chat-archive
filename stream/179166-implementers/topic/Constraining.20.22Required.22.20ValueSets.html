---
layout: page
title: "FHIR Chat  · Constraining &quot;Required&quot; ValueSets · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html">Constraining &quot;Required&quot; ValueSets</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153846673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846673">(Sep 07 2016 at 13:32)</a>:</h4>
<p>If an element within a Resource is bound to a "Required" ValueSet, is it legal to restrict (constrain) that ValueSet or does it have to be used in its entirety?</p>



<a name="153846674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846674">(Sep 07 2016 at 13:34)</a>:</h4>
<p>You may constrain (logical subset) in profiles or in use but not exchange with a valueset containing other values or extend.</p>



<a name="153846675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya Joshi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846675">(Sep 07 2016 at 13:35)</a>:</h4>
<p>Hi Richard. You can use any codes from that ValueSet as per your requirement and can constraint or create subset from the values given in ValueSet. Required means, you cannot extend (with your own codes) the ValueSet codes. It is like HL7 Defined tables (data type ID) in V2. </p>



<a name="153846678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846678">(Sep 07 2016 at 13:49)</a>:</h4>
<p>Thanks</p>



<a name="153846679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846679">(Sep 07 2016 at 13:52)</a>:</h4>
<p>RIchard, If you see a need, now is a good time to express that need. You might have a use-case that has not yet been considered.</p>



<a name="153846684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846684">(Sep 07 2016 at 15:59)</a>:</h4>
<p>In this case our use case is a very local one. Within the NHS in England we have national standards for such things as gender, marital status, language, country codes etc. Unfortunately in places FHIR chooses to provide "required" valueSets for these which causes us a world of pain. Where our national valueset can be mapped to a subset of the FHIR valueset then we can get by.</p>
<p>We have other issues where this is not possible and we are raising changes which may or may not be picked up in STU3. For now we are having to do some relatively clunky modifier extensions to get around these.</p>



<a name="153846711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846711">(Sep 07 2016 at 19:45)</a>:</h4>
<p>In HL7 Core Principles, we have the concept of both "minimum" and "maximum" bindings - maximum bindings identify the complete set of what's permitted to be used and minimum bindings identify what must be supported (and can't be later constrained out).  At the moment FHIR only deals with maximum bindings - it's generally hard enough to get agreement there.  I suspect at some point we'll add extensions to let implementers define "minimum" bindings when they want to say "and by the way, systems must be able to handle at least all of this subset and can't constrain them out.</p>



<a name="153846713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846713">(Sep 07 2016 at 20:07)</a>:</h4>
<p>Those extensions have already been defined:<br>
<a href="https://simplifier.net/core-extensions/elementdefinition-minValueSet" target="_blank" title="https://simplifier.net/core-extensions/elementdefinition-minValueSet">https://simplifier.net/core-extensions/elementdefinition-minValueSet</a><br>
<a href="https://simplifier.net/core-extensions/elementdefinition-maxValueSet" target="_blank" title="https://simplifier.net/core-extensions/elementdefinition-maxValueSet">https://simplifier.net/core-extensions/elementdefinition-maxValueSet</a></p>



<a name="153846715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846715">(Sep 07 2016 at 20:26)</a>:</h4>
<p>Why do you have an extension for maxValueSet?</p>



<a name="153846723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846723">(Sep 07 2016 at 21:57)</a>:</h4>
<p>I defined it. From the description: The maximum allowable value set, for use when the binding strength is 'extensible'. This value set is the value set from which extensions can be taken from</p>



<a name="153846729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846729">(Sep 07 2016 at 23:36)</a>:</h4>
<p>But how is that different from "required"?</p>



<a name="153846730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846730">(Sep 07 2016 at 23:36)</a>:</h4>
<p>You're saying "only codes from this value set are permitted" - which is what required does . . .</p>



<a name="153846731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846731">(Sep 08 2016 at 00:02)</a>:</h4>
<p>if the binding strength is extensible,</p>



<a name="153846737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846737">(Sep 08 2016 at 03:23)</a>:</h4>
<p>If the binding strength is extensible, that means you can use any code from any system if your concept is outside the specified value set.  If you want to say "you must use only this set of codes" - which is what you're doing with your "max", then that's a required binding</p>



<a name="153846738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846738">(Sep 08 2016 at 04:06)</a>:</h4>
<p>what you are saying is that the value set is extensible, *but* if your concept is outside the speciifed value set, it still must be drawn from a bigger value set</p>



<a name="153846741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846741">(Sep 08 2016 at 06:01)</a>:</h4>
<p>Then it's not extensible.  Instead, the value set is the larger value set.  Because there's no requirement to support any of the codes in the small value set, there's no point mentioning it at all - you just have a required binding to the larger value set.  Extensible means you can use any code you like - or no codes at all - for concepts outside the value set.</p>



<a name="153846744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846744">(Sep 08 2016 at 07:50)</a>:</h4>
<p>not so. Extensible means that if one of these codes is correct, you must use it. Simply going with the max value set loses that. </p>



<a name="153846791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846791">(Sep 08 2016 at 20:22)</a>:</h4>
<p>But if you have a required value set, you haven't lost anything unless your "big" value set includes duplicate concepts - which would be poor design.  With the big value set, you'd be saying "you must use whichever one of these big value set codes applies".  With small extensible value set plus big value set, you'd still be saying "you must use whichever one of these big value set codes applies" - adding "and by the way if one of this subset of the big value set applies, you must use that" is redundant.</p>



<a name="153846808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846808">(Sep 08 2016 at 21:13)</a>:</h4>
<p>the use case I was given - one that's come up in more than one context is 'this SCT value set', but if you can't, it still must be a SCT concept. </p>



<a name="153846814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846814">(Sep 08 2016 at 21:34)</a>:</h4>
<p>So, from a validation perspective, how is the behaviour different than simply saying "the value set is any SNOMED CT code"?  Do you agree that your max binding is essentially doing a required binding to all of SNOMED?  If not, how would it be different?</p>



<a name="153846815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846815">(Sep 08 2016 at 21:36)</a>:</h4>
<p>yes, the max binding is doing a required binding to all of snomed. but providing a extensible binding to a snomed ct subset, and a required binding to snomed, that's different than just providing a required binding to snomed</p>



<a name="153846816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846816">(Sep 08 2016 at 21:42)</a>:</h4>
<p>What's the difference from a validation/conformance testing perspective?  Is it the fact that SNOMED allows you to say the same thing multiple ways (and thus, a value set of "all of SNOMED" is, automatically, a poorly designed value set)?</p>



<a name="153846817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846817">(Sep 08 2016 at 21:43)</a>:</h4>
<p>I don't know that any computable testing can test the difference. But manual inspection could. </p>



<a name="153846818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846818">(Sep 08 2016 at 21:43)</a>:</h4>
<p>and I don't think 'all of snomed' is a poorly designed value set. It might be eay to use it poorly</p>



<a name="153846895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Constraining%20%22Required%22%20ValueSets/near/153846895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Constraining.20.22Required.22.20ValueSets.html#153846895">(Sep 09 2016 at 18:26)</a>:</h4>
<p>From a good vocabulary practice perspective, it's a "questionable" value set because there are multiple ways to convey the same concept, but I guess it wouldn't qualify as "poorly designed" because it's still a single code system.  If the intention is to say "you must send this concept as pre-coordinated, but other concepts can be whatever you like", then I guess that works.  To me, this is actually an example of multiple bindings - you have both a required binding and an extensible binding that tightens down how you're allowed to send certain concepts.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
