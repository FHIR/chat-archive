---
layout: page
title: "FHIR Chat  · Element.id Uniqueness Constraint  within a Resource · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html">Element.id Uniqueness Constraint  within a Resource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="168788994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168788994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168788994">(Jun 23 2019 at 10:43)</a>:</h4>
<p>The documentation of <code>Element.id</code> says: Unique id for the element within a resource (for internal references).</p>
<p>In most StructureDefinitions, ElementDefinitions, which inherit <a href="http://Element.id" target="_blank" title="http://Element.id">Element.id</a>, are repeated in snapshot and differential but have the same id. Is this a violation of the uniqueness constraint of <a href="http://Element.id" target="_blank" title="http://Element.id">Element.id</a>?</p>



<a name="168789170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168789170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168789170">(Jun 23 2019 at 10:48)</a>:</h4>
<p>It's not because snapshot and differential are two views of the same thing.  However, it would be good if we made that clearer.  Can you submit a change request?</p>



<a name="168792511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168792511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168792511">(Jun 23 2019 at 12:32)</a>:</h4>
<p>Well, actually, it is. And that’s a problem</p>



<a name="168800139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168800139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168800139">(Jun 23 2019 at 16:51)</a>:</h4>
<p>Is that something that can even be changed at this point?.  We already have scoping rules around id in Bundle.  Can't we just officially do the same here?  Is there a usecase for the snapshot and differential ids being distinct?</p>



<a name="168829154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168829154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168829154">(Jun 24 2019 at 07:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Good point. In a Bundle, Element ids would also not unique. Can you please point me to the scoping rules? I can't find them.</p>



<a name="168838797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168838797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168838797">(Jun 24 2019 at 10:46)</a>:</h4>
<p><a href="http://build.fhir.org/element.html#id" target="_blank" title="http://build.fhir.org/element.html#id">http://build.fhir.org/element.html#id</a></p>



<a name="168838805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168838805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168838805">(Jun 24 2019 at 10:46)</a>:</h4>
<p>(Though I had to do some digging to find that :&gt;)</p>



<a name="168839098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168839098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168839098">(Jun 24 2019 at 10:53)</a>:</h4>
<p>Ok but then we have still the problem in StructureDefinition snapshot/differential. I think someone with more experience in FHIR has to decide whether we should fix this problem by using different ids in snapshot and differential or simply add this case to the scoping rules.</p>



<a name="168839174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168839174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168839174">(Jun 24 2019 at 10:54)</a>:</h4>
<p>hah 2 normative rules that disagree with each other....</p>



<a name="168839404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168839404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168839404">(Jun 24 2019 at 10:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, can you think of any situations where we'd <em>need</em> a differential and snapshot element that corresponded to the same thing to have distinct ids?</p>



<a name="168840232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168840232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168840232">(Jun 24 2019 at 11:12)</a>:</h4>
<p>only because of this rule</p>



<a name="168892658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/168892658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#168892658">(Jun 24 2019 at 23:03)</a>:</h4>
<p>If we have conflicting rules, obviously we'll need to fix one of them.  If there's no need for distinct ids between snapshot and differential, the simplest is to add this as one of the official exceptions to unique ids - on the grounds that none of the current tools are expecting unique ids here - if they were, they'd have been blowing up all over.  (Ideally, we could reflect this as a technical correction in R4 too.)  Do you want me to capture a change request?</p>



<a name="170976216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20Uniqueness%20Constraint%20%20within%20a%20Resource/near/170976216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20Uniqueness.20Constraint.20.20within.20a.20Resource.html#170976216">(Jul 16 2019 at 11:27)</a>:</h4>
<p>Note: StructureDefinition invariants sdf-16 and sdf-17 constrain element id's to be unique within the differential component and within the snapshot component (separately):<br>
<a href="http://build.fhir.org/structuredefinition.html#invs" target="_blank" title="http://build.fhir.org/structuredefinition.html#invs">http://build.fhir.org/structuredefinition.html#invs</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
