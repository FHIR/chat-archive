---
layout: page
title: "FHIR Chat  · Referencing in bundle · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20in.20bundle.html">Referencing in bundle</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="208703855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20in%20bundle/near/208703855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sandeep Rathore <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20in.20bundle.html#208703855">(Sep 01 2020 at 15:27)</a>:</h4>
<p>Hi Everyone,<br>
I have created a bundle resource from HL7 v2 meassage, in  which I am sending full URL for each resource in order to reference in another resource,  i have also  used conditional update in few resources like - Patient Resource and Encounter resource based on the identifiers. My issue is - In fhir server it it creating 2 resources for a single resource from the bundle. one with the resource id with full url  which is an empty resource and another with a new id for example - For a patient resource in a bundle- It is creating 2 patient resources, one with full content inside it and with new resource id and another with the full url id that I have given. Please refer the below json.  <br>
{<br>
  "resourceType": "Bundle",<br>
  "type": "transaction",<br>
  "entry": [<br>
    {<br>
      "fullUrl": "urn:uuid:9d1ca0a8-0cee-3747-814d-3ff9907939a9",<br>
      "resource": {<br>
        "resourceType": "Patient",<br>
        "id": "9d1ca0a8-0cee-3747-814d-3ff9907939a9",<br>
        "identifier": [<br>
          {<br>
            "use": "usual",<br>
            "system": "<a href="http://hospital.org/externalID">http://hospital.org/externalID</a>",<br>
            "value": "NGM03126211"<br>
          },<br>
          {<br>
            "use": "usual",<br>
            "system": "<a href="http://mein-krankenhaus.de/NamingSystem/patient-identifier">http://mein-krankenhaus.de/NamingSystem/patient-identifier</a>",<br>
            "value": "201991014"<br>
          },<br>
          {<br>
            "use": "secondary",<br>
            "system": "<a href="http://hospital.org/alternatePatientID">http://hospital.org/alternatePatientID</a>",<br>
            "value": "201927815"<br>
          }<br>
        ],<br>
        "name": [<br>
          {<br>
            "use": "official",<br>
            "text": "Donald",<br>
            "family": "Duck Donald",<br>
            "given": [<br>
              "Duck"<br>
            ]<br>
          }<br>
        ],<br>
        "birthDate": "1949-12-03",</p>
<div class="codehilite"><pre><span></span><code>    &quot;gender&quot;: &quot;male&quot;,
    &quot;address&quot;: [
      {
        &quot;line&quot;: [
          &quot;Main str. 10&quot;
        ],
        &quot;city&quot;: &quot;Berlin&quot;,
        &quot;postalCode&quot;: &quot;72076&quot;,
        &quot;country&quot;: &quot;Deuscheland&quot;,

      }
    ],
    &quot;telecom&quot;: [
      {
        &quot;value&quot;: &quot;0176-3333355&quot;,
        &quot;system&quot;: &quot;phone&quot;,
        &quot;use&quot;: &quot;home&quot;
      },
      {
        &quot;value&quot;: &quot;07071-23332&quot;,
        &quot;system&quot;: &quot;phone&quot;,
        &quot;use&quot;: &quot;work&quot;
      }
    ],
    &quot;communication&quot;: [
      {
        &quot;language&quot;: {
          &quot;coding&quot;: [
            {
              &quot;system&quot;: &quot;urn:ietf:bcp:47&quot;,
              &quot;code&quot;: &quot;de&quot;,
              &quot;display&quot;: &quot;German&quot;
            }
          ]
        },
        &quot;preferred&quot;: true
      }
    ],
    &quot;multipleBirthBoolean&quot;: false
  },
  &quot;request&quot;: {
    &quot;method&quot;: &quot;PUT&quot;,
    &quot;url&quot;: &quot;Patient?identifier=http://mein-krankenhaus.de/NamingSystem/patient-identifier|201991014&quot;
  }
},
{
  &quot;fullUrl&quot;: &quot;urn:uuid:2750731b-7408-3289-94f4-913df2982229&quot;,
  &quot;resource&quot;: {
    &quot;resourceType&quot;: &quot;Practitioner&quot;,
    &quot;id&quot;: &quot;2750731b-7408-3289-94f4-913df2982229&quot;,
    &quot;identifier&quot;: [
      {
        &quot;value&quot;: &quot;610732721&quot;
      }
    ],
    &quot;name&quot;: [
      {
        &quot;family&quot;: &quot;Test&quot;,
        &quot;given&quot;: [
          &quot;Test_Fr&quot;
        ],
        &quot;prefix&quot;: [
          &quot;Dr. med.&quot;
        ]
      }
    ],
    &quot;address&quot;: [
      {
        &quot;line&quot;: [
          &quot;Unknownstr. 13&quot;
        ],
        &quot;city&quot;: &quot;Herrenberg&quot;,
        &quot;postalCode&quot;: &quot;71083&quot;,
        &quot;country&quot;: &quot;Deutschland&quot;
      }
    ]
  },
  &quot;request&quot;: {
    &quot;method&quot;: &quot;POST&quot;,
    &quot;url&quot;: &quot;Practitioner&quot;,
    &quot;ifNoneExist&quot;: &quot;identifier=610732721&quot;
  }
},
{
  &quot;fullUrl&quot;: &quot;urn:uuid:5dff23ec-e5e1-36a4-9094-249ea4f0b160&quot;,
  &quot;resource&quot;: {
    &quot;resourceType&quot;: &quot;Practitioner&quot;,
    &quot;id&quot;: &quot;5dff23ec-e5e1-36a4-9094-249ea4f0b160&quot;,
    &quot;identifier&quot;: [
      {
        &quot;value&quot;: &quot;618239221&quot;
      }
    ],
    &quot;name&quot;: [
      {
        &quot;family&quot;: &quot;Test2&quot;,
        &quot;given&quot;: [
          &quot;Uknown&quot;
        ],
        &quot;prefix&quot;: [
          &quot;Dr. med.&quot;
        ]
      }
    ],
    &quot;address&quot;: [
      {
        &quot;line&quot;: [
          &quot;Str. 3&quot;
        ],
        &quot;city&quot;: &quot;Herrenberg&quot;,
        &quot;postalCode&quot;: &quot;71083&quot;,
        &quot;country&quot;: &quot;Deutschland&quot;
      }
    ]
  },
  &quot;request&quot;: {
    &quot;method&quot;: &quot;POST&quot;,
    &quot;url&quot;: &quot;Practitioner&quot;,
    &quot;ifNoneExist&quot;: &quot;identifier=618239221&quot;
  }
},
{
  &quot;fullUrl&quot;: &quot;urn:uuid:cbee8c1f-9933-3dd3-b62f-c91b87574cf6&quot;,
  &quot;resource&quot;: {
    &quot;resourceType&quot;: &quot;Condition&quot;,
    &quot;id&quot;: &quot;cbee8c1f-9933-3dd3-b62f-c91b87574cf6&quot;,
    &quot;code&quot;: {
      &quot;coding&quot;: [
        {
          &quot;system&quot;: &quot;https://www.dimdi.de&quot;,
          &quot;code&quot;: &quot;M65.4&quot;,
          &quot;display&quot;: &quot;Tendovaginitis stenosans (de Quervain)&quot;
        },
        {
          &quot;system&quot;: &quot;https://www.dimdi.de&quot;,
          &quot;code&quot;: &quot;M65.41&quot;,
          &quot;display&quot;: &quot;Tendovaginitis stenosans (de Quervain)&quot;
        }
      ],
      &quot;text&quot;: &quot;Tendovaginitis stenosans (de Quervain)&quot;
    },
    &quot;onsetDateTime&quot;: &quot;2020-08-11T11:32:46.000Z&quot;,
    &quot;subject&quot;: {
      &quot;reference&quot;: &quot;Patient/9d1ca0a8-0cee-3747-814d-3ff9907939a9&quot;
    }
  },
  &quot;request&quot;: {
    &quot;method&quot;: &quot;POST&quot;,
    &quot;url&quot;: &quot;Condition&quot;
  }
},
{
  &quot;fullUrl&quot;: &quot;urn:uuid:63fc6ebf-83f3-3d74-b76b-be16557c4e61&quot;,
  &quot;resource&quot;: {
    &quot;resourceType&quot;: &quot;Condition&quot;,
    &quot;id&quot;: &quot;63fc6ebf-83f3-3d74-b76b-be16557c4e61&quot;,
    &quot;code&quot;: {
      &quot;coding&quot;: [
        {
          &quot;system&quot;: &quot;https://www.dimdi.de&quot;,
          &quot;code&quot;: &quot;M65.4&quot;,
          &quot;display&quot;: &quot;Tendovaginitis stenosans&quot;
        },
        {
          &quot;system&quot;: &quot;https://www.dimdi.de&quot;,
          &quot;code&quot;: &quot;M65.40&quot;,
          &quot;display&quot;: &quot;Tendovaginitis stenosans&quot;
        }
      ],
      &quot;text&quot;: &quot;Tendovaginitis stenosans&quot;
    },
    &quot;onsetDateTime&quot;: &quot;2019-06-13T18:24:13.000Z&quot;,
    &quot;subject&quot;: {
      &quot;reference&quot;: &quot;Patient/9d1ca0a8-0cee-3747-814d-3ff9907939a9&quot;
    }
  },
  &quot;request&quot;: {
    &quot;method&quot;: &quot;POST&quot;,
    &quot;url&quot;: &quot;Condition&quot;
  }
},
{
  &quot;fullUrl&quot;: &quot;urn:uuid:5c4ffa26-3806-382f-8a85-f21c2afd4ecf&quot;,
  &quot;resource&quot;: {
    &quot;resourceType&quot;: &quot;Encounter&quot;,
    &quot;id&quot;: &quot;5c4ffa26-3806-382f-8a85-f21c2afd4ecf&quot;,
    &quot;class&quot;: {
      &quot;code&quot;: &quot;AMB&quot;,
      &quot;display&quot;: &quot;ambulatory&quot;,
      &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/v3-ActCode&quot;
    },
    &quot;status&quot;: &quot;finished&quot;,
    &quot;location&quot;: [
      {
        &quot;location&quot;: {
          &quot;display&quot;: &quot;Hospital &quot;
        },
        &quot;status&quot;: &quot;active&quot;
      }
    ],
    &quot;participant&quot;: [
      {
        &quot;type&quot;: [
          {
            &quot;coding&quot;: [
              {
                &quot;code&quot;: &quot;REF&quot;,
                &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/v3-ParticipationType&quot;,
                &quot;display&quot;: &quot;referrer&quot;
              }
            ]
          }
        ],
        &quot;individual&quot;: {
          &quot;reference&quot;: &quot;Practitioner?identifier=610732721&quot;
        }
      },
      {
        &quot;type&quot;: [
          {
            &quot;coding&quot;: [
              {
                &quot;code&quot;: &quot;CON&quot;,
                &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/v3-ParticipationType&quot;,
                &quot;display&quot;: &quot;consultant&quot;
              }
            ]
          }
        ],
        &quot;individual&quot;: {
          &quot;reference&quot;: &quot;Practitioner?identifier=618239221&quot;
        }
      }
    ],
    &quot;identifier&quot;: [
      {
        &quot;type&quot;: {
          &quot;coding&quot;: [
            {
              &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/v2-0203&quot;,
              &quot;code&quot;: &quot;VN&quot;,
              &quot;display&quot;: &quot;Visit number&quot;
            }
          ]
        },
        &quot;system&quot;: &quot;http://hospital/visitID&quot;,
        &quot;value&quot;: &quot;201927815&quot;
      }
    ],
    &quot;period&quot;: {
      &quot;start&quot;: &quot;2019-05-09T10:49:00.000Z&quot;,
      &quot;end&quot;: &quot;2019-12-31T23:59:00.000Z&quot;
    },
    &quot;subject&quot;: {
      &quot;reference&quot;: &quot;Patient/9d1ca0a8-0cee-3747-814d-3ff9907939a9&quot;
    },
    &quot;diagnosis&quot;: [
      {
        &quot;condition&quot;: {
          &quot;reference&quot;: &quot;Condition/cbee8c1f-9933-3dd3-b62f-c91b87574cf6&quot;
        }
      },
      {
        &quot;condition&quot;: {
          &quot;reference&quot;: &quot;Condition/63fc6ebf-83f3-3d74-b76b-be16557c4e61&quot;
        }
      }
    ]
  },
  &quot;request&quot;: {
    &quot;method&quot;: &quot;PUT&quot;,
    &quot;url&quot;: &quot;Encounter?identifier=http://hospital/visitID|201927815&quot;
  }
},
{
  &quot;fullUrl&quot;: &quot;urn:uuid:74110a3b-fc68-35e6-99ec-72e70a266a07&quot;,
  &quot;resource&quot;: {
    &quot;resourceType&quot;: &quot;Procedure&quot;,
    &quot;id&quot;: &quot;74110a3b-fc68-35e6-99ec-72e70a266a07&quot;,
    &quot;status&quot;: &quot;completed&quot;,
    &quot;code&quot;: {
      &quot;coding&quot;: [
        {
          &quot;system&quot;: &quot;https://www.dimdi.de&quot;,
          &quot;code&quot;: &quot;5-984&quot;,
          &quot;display&quot;: &quot;Mikrochirurgische Technik - Zusatzcode&quot;
        }
      ],
      &quot;text&quot;: &quot;Mikrochirurgische Technik - Zusatzcode&quot;
    },
    &quot;performedDateTime&quot;: &quot;2019-06-14T08:22:00.000Z&quot;,
    &quot;category&quot;: {
      &quot;coding&quot;: [
        {
          &quot;code&quot;: &quot;OP&quot;
        }
      ]
    },
    &quot;subject&quot;: {
      &quot;reference&quot;: &quot;Patient/9d1ca0a8-0cee-3747-814d-3ff9907939a9&quot;
    }
  },
  &quot;request&quot;: {
    &quot;method&quot;: &quot;POST&quot;,
    &quot;url&quot;: &quot;Procedure&quot;
  }
}
</code></pre></div>


<p>]<br>
}</p>



<a name="208706948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20in%20bundle/near/208706948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20in.20bundle.html#208706948">(Sep 01 2020 at 15:47)</a>:</h4>
<p>That sounds like something to take up with the author of the server...</p>



<a name="208736145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20in%20bundle/near/208736145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sandeep Rathore <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20in.20bundle.html#208736145">(Sep 01 2020 at 19:30)</a>:</h4>
<p>Hi Lloyd,<br>
It seems mean while patient resource is looking for identifier using conditional put, it  creates another resource from the bundle which contains reference to this patient resource and when this referenced patient is not found then, it creates another resource with this reference id.</p>



<a name="208736499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20in%20bundle/near/208736499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20in.20bundle.html#208736499">(Sep 01 2020 at 19:33)</a>:</h4>
<p>We don't know what server you are using. There are many different implementations of FHIR.</p>



<a name="208736834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20in%20bundle/near/208736834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sandeep Rathore <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20in.20bundle.html#208736834">(Sep 01 2020 at 19:36)</a>:</h4>
<p>I am using Hapi Fhir JPA</p>



<a name="208737930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20in%20bundle/near/208737930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20in.20bundle.html#208737930">(Sep 01 2020 at 19:46)</a>:</h4>
<p>You may get a faster answer in the <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a> stream. Also, if you have your bundle in a file, you may attach it to your post there, as it may be easier to review, compared to pasting it in the post...</p>



<a name="208738358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20in%20bundle/near/208738358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sandeep Rathore <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20in.20bundle.html#208738358">(Sep 01 2020 at 19:49)</a>:</h4>
<p>Sure, Thanks for suggesting</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
