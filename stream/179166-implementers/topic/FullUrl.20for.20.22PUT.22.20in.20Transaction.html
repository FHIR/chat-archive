---
layout: page
title: "FHIR Chat  · FullUrl for &quot;PUT&quot; in Transaction · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FullUrl.20for.20.22PUT.22.20in.20Transaction.html">FullUrl for &quot;PUT&quot; in Transaction</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153933759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FullUrl%20for%20%22PUT%22%20in%20Transaction/near/153933759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> emilio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FullUrl.20for.20.22PUT.22.20in.20Transaction.html#153933759">(Jan 30 2018 at 18:24)</a>:</h4>
<p>In the REST API documentation, in the section about transactions and FullUrls it says that:<br>
"For updates, the server performs a mapping between the fullUrl specified and the local URL the server knows that instance as, if possible. If the server does not have a mapping for the fullUrl, the server ignores the base URL and attempts an update assuming the base is the same as the server base. "<br>
I can't understand what it means. <br>
Could someone please explain it?<br>
source: <a href="https://www.hl7.org/fhir/http.html#2.21.0.17.2" target="_blank" title="https://www.hl7.org/fhir/http.html#2.21.0.17.2">https://www.hl7.org/fhir/http.html#2.21.0.17.2</a></p>



<a name="153933819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FullUrl%20for%20%22PUT%22%20in%20Transaction/near/153933819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FullUrl.20for.20.22PUT.22.20in.20Transaction.html#153933819">(Jan 30 2018 at 20:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span></p>



<a name="153934116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FullUrl%20for%20%22PUT%22%20in%20Transaction/near/153934116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FullUrl.20for.20.22PUT.22.20in.20Transaction.html#153934116">(Jan 31 2018 at 12:56)</a>:</h4>
<p>Let's say you send a Transaction bundle to server <a href="http://fhirserver.com" target="_blank" title="http://fhirserver.com">http://fhirserver.com</a>, containing an entry for an update on Patient/123. You may expect that the fullUrl of it has to be <a href="http://fhirserver.com/Patient/123" target="_blank" title="http://fhirserver.com/Patient/123">http://fhirserver.com/Patient/123</a>. The first line says that the server will try to map this fullUrl to it's own location of Patient/123, and in this case they match perfectly.<br>
But if you want to send this same Transaction to another server - <a href="http://differentfhirserver.com" target="_blank" title="http://differentfhirserver.com">http://differentfhirserver.com</a> - you'd have to adjust the Transaction bundle first: change the fullUrl of the update to <a href="http://differentfhirserver.com/Patient/123" target="_blank" title="http://differentfhirserver.com/Patient/123">http://differentfhirserver.com/Patient/123</a>, so with the base of the other server.<br>
This is inconvenient. Therefore the second line says that the other server is allowed to ignore the base altogether and thus interpret the original '<a href="http://fhirserver.com/Patient/123" target="_blank" title="http://fhirserver.com/Patient/123">http://fhirserver.com/Patient/123</a> as a relative link to it's own Patient/123 endpoint.</p>
<p>Hopefully now the last line of that paragraph makes sense to you: "This allows the same transaction bundle to be sent to multiple systems without changing the fullUrls for each target."</p>
<p>Note that the fullUrl is not used to determine which resource to update. The resource.entry.url is used for that, and that is supposed to be relative, so it does not have this problem.</p>
<p>The fullUrl can be understood as the location of the resource after performing the request in the entry. As such you can use it in other entries to reference to the result of the request. Because the server may assign a new id, it will keep a map internally from the fullUrl you specified to the actual location of the resource after processing the request. And use that map for resolving subsequent references in other entries in the bundle.</p>
<p>But altogether I think this paragraph can be simpler: Since the server is allowed to ignore the base of the fullUrl, it may as well always do so (in the context of a PUT request  entry).</p>



<a name="153934241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FullUrl%20for%20%22PUT%22%20in%20Transaction/near/153934241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> emilio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FullUrl.20for.20.22PUT.22.20in.20Transaction.html#153934241">(Jan 31 2018 at 17:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>  thank you!</p>



<a name="153934258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FullUrl%20for%20%22PUT%22%20in%20Transaction/near/153934258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> emilio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FullUrl.20for.20.22PUT.22.20in.20Transaction.html#153934258">(Jan 31 2018 at 17:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>  Antoher question about this. You wrote that: <br>
"Because the server may assign a new id, it will keep a map internally from the fullUrl you specified to the actual location of the resource after processing the request. And use that map for resolving subsequent references in other entries in the bundle."<br>
So, do I have to check all the <code>references</code> in all the entries and, if it has a corresponding value on my internal map, replace it before saving it?<br>
And, can these replacing values in the map be relative? Or do they have to have the fullUrl format?<br>
cc <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="153934375"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FullUrl%20for%20%22PUT%22%20in%20Transaction/near/153934375" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FullUrl.20for.20.22PUT.22.20in.20Transaction.html#153934375">(Jan 31 2018 at 21:12)</a>:</h4>
<p>Yes, you have to replace the references, otherwise you won't be able to resolve them afterwards. We return the references as absolute urls, so you can follow them as they are. But that does not neccessarily mean you have to store them that way.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
