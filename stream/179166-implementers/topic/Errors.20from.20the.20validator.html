---
layout: page
title: "FHIR Chat  · Errors from the validator · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html">Errors from the validator</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="169677086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169677086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169677086">(Jul 05 2019 at 00:20)</a>:</h4>
<p>This issue report: <a href="https://github.com/hapifhir/org.hl7.fhir.core/issues/50" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/issues/50">https://github.com/hapifhir/org.hl7.fhir.core/issues/50</a> says that the indexes reported by the validator are wrong. </p>
<p>but XPath indexes are 1 based: <a href="https://mukulgandhi.blogspot.com/2008/05/blog-post.html" target="_blank" title="https://mukulgandhi.blogspot.com/2008/05/blog-post.html">https://mukulgandhi.blogspot.com/2008/05/blog-post.html</a></p>
<p>JsonPath, of course, they start at 0. FHIRPath makes it 0 except in special cases</p>



<a name="169677093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169677093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169677093">(Jul 05 2019 at 00:21)</a>:</h4>
<p>it's not obvious to me what the right behavior for the validator is here</p>



<a name="169678921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169678921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169678921">(Jul 05 2019 at 01:22)</a>:</h4>
<p>There was a time when the indexes were inconsistent in the validator.  Sometimes 0-based, sometimes 1-based.  Not sure if that's still the case.</p>



<a name="169678927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169678927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169678927">(Jul 05 2019 at 01:23)</a>:</h4>
<p>We're using FHIRPath to report the locations, so we should be using 0-based</p>



<a name="169678928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169678928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169678928">(Jul 05 2019 at 01:23)</a>:</h4>
<p>(though that's certainly going to be confusing to some)</p>



<a name="169681233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169681233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169681233">(Jul 05 2019 at 02:40)</a>:</h4>
<p>well, it's not FHIRPath based. :-(. Guess I'll have to invest in this part of the validator...</p>



<a name="169681346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169681346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169681346">(Jul 05 2019 at 02:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> do you have any memory for what this part of the validator code is about:</p>
<div class="codehilite"><pre><span></span> <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">isGrandfathered</span><span class="o">(</span><span class="n">String</span> <span class="n">path</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;xds-documentmanifest.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;observation-device-metric-devicemetricobservation.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;medicationadministration-immunization-vaccine.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;elementdefinition-de-dataelement.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;dataelement-sdc-sdcelement.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;questionnaireresponse-sdc-structureddatacaptureanswers.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;valueset-sdc-structureddatacapturevalueset.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;dataelement-sdc-de-sdcelement.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;do-uslab-uslabdo.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">path</span><span class="o">.</span><span class="na">startsWith</span><span class="o">(</span><span class="s">&quot;.&quot;</span><span class="o">))</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>

    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>
</pre></div>



<a name="169690235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169690235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169690235">(Jul 05 2019 at 07:26)</a>:</h4>
<p>.NET Validator uses 0 based ones for comparison</p>



<a name="169694828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169694828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169694828">(Jul 05 2019 at 09:04)</a>:</h4>
<p>Is it right though?</p>



<a name="169695836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169695836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169695836">(Jul 05 2019 at 09:25)</a>:</h4>
<p>Well - I hope it is - because then I can just treat the location as a valid FHIRpath, give it to the FHIRpath engine and retrieve the element in question that has the error</p>



<a name="169695855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169695855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169695855">(Jul 05 2019 at 09:25)</a>:</h4>
<p>If I had to manually parse the location and +1 all the indexes (and insert them in short.forms) that wouldn't be nice :(</p>



<a name="169698883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169698883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169698883">(Jul 05 2019 at 10:25)</a>:</h4>
<p>well, next release will generate proper FHIRPaths now.</p>



<a name="169699678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169699678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169699678">(Jul 05 2019 at 10:42)</a>:</h4>
<p>Nice, thank you. That'll really help tools that show the raw resource put the error messages right</p>



<a name="169707491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169707491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169707491">(Jul 05 2019 at 13:11)</a>:</h4>
<p>Or my front ends that use that value to select the control.</p>



<a name="169711043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Errors%20from%20the%20validator/near/169711043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Errors.20from.20the.20validator.html#169711043">(Jul 05 2019 at 14:04)</a>:</h4>
<p>Nope.  And the last 4 clauses are troubling.  The sdc ones aren't being used anymore.  I expect it was a transition where we didn't want to break things that had previously been valid while enforcing tighter rules on everyone else.  It seems reasonable to be tight on everyone at this point.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
