---
layout: page
title: "FHIR Chat  · SearchParameter date type · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20date.20type.html">SearchParameter date type</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153913088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20date%20type/near/153913088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20date.20type.html#153913088">(Oct 09 2017 at 11:00)</a>:</h4>
<p>Hi,<br>
I'm using Vonk as my FHIR server and I'm having an issue using the SearchParameter for date searches. I have the SP type="date" and created a organization entry that uses a date:</p>
<div class="codehilite"><pre><span></span>&lt;extension url=&quot; https://fhir.nhs.uk/STU3/StructureDefinition/ODSAPI-ActivePeriod-1&quot;&gt;
    &lt;valuePeriod&gt;
        &lt;start value=&quot;2017-10-09&quot;/&gt;
    &lt;/valuePeriod&gt;
&lt;/extension&gt;
</pre></div>


<p>If I do a REST GET <a href="http://localhost:4080/Organization?orgperiod=2017-10-09" target="_blank" title="http://localhost:4080/Organization?orgperiod=2017-10-09">http://localhost:4080/Organization?orgperiod=2017-10-09</a> I get no results. I tried adding =eq2017-10-09 and still no result, however if I do a =ge2017-10-09 it returns the record. Why can't I find an exact match ? I added the comparator "eq" to my SP but that made no difference. </p>
<p>Any suggestions most welcome.<br>
Thanks<br>
Dave</p>



<a name="153913091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20date%20type/near/153913091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20date.20type.html#153913091">(Oct 09 2017 at 12:01)</a>:</h4>
<p>Hi Dave, I can see the extension as part of the project <a href="https://simplifier.net/Test-FHIRODSLookupAP/~introduction" target="_blank" title="https://simplifier.net/Test-FHIRODSLookupAP/~introduction">https://simplifier.net/Test-FHIRODSLookupAP/~introduction</a>, but the SearchParameter is not yet on the project (or not visible to me). If you could either add that or send it in a pm, along with the example Organization resource you uploaded, I want to try to find out what happens.</p>



<a name="153913234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20date%20type/near/153913234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20date.20type.html#153913234">(Oct 10 2017 at 10:26)</a>:</h4>
<p>Hi,<br>
After a discussion with Christiaan, the issue is with the use of valuePeriod.</p>
<p>My search =eq2017-10-09 is interpreted as [2017-10-09T00:00:00 - 2017-10-10T00:00:00)<br>
The period is only equal if it falls within the period.<br>
Since I have no end date, this cannot be equal and therefore, cannot be found.</p>
<p>The question is now, how to return an exact match for a valuePeriod that only has a start date available ? </p>
<p>FHIR itself is not clear on the equality of periods (<a href="http://www.hl7.org/implement/standards/fhir/search.html#date" target="_blank" title="http://www.hl7.org/implement/standards/fhir/search.html#date">http://www.hl7.org/implement/standards/fhir/search.html#date</a>)  and Christiaan suggested a better interpretation could be "A period in a resource is considered 'equal' if it has any overlap with the period searched for."</p>



<a name="153913997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20date%20type/near/153913997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20date.20type.html#153913997">(Oct 16 2017 at 03:47)</a>:</h4>
<p>I've been reconsidering my date searching implementation to use strings rather than native datetime values in some cases, as the timezones keep getting in my way.</p>



<a name="153913998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20date%20type/near/153913998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20date.20type.html#153913998">(Oct 16 2017 at 03:48)</a>:</h4>
<p>The example you provided <code>2017-10-09T00:00:00 - 2017-10-10T00:00:00</code> doesn't have the timezone there, so what does that mean to your local values?</p>



<a name="153914002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20date%20type/near/153914002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Spencer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20date.20type.html#153914002">(Oct 16 2017 at 05:22)</a>:</h4>
<blockquote>
<p>FHIR itself is not clear on the equality of periods (<a href="http://www.hl7.org/implement/standards/fhir/search.html#date" target="_blank" title="http://www.hl7.org/implement/standards/fhir/search.html#date">http://www.hl7.org/implement/standards/fhir/search.html#date</a>)  and Christiaan suggested a better interpretation could be "A period in a resource is considered 'equal' if it has any overlap with the period searched for."</p>
</blockquote>
<p>For ranges, 'ap' means "any overlap" and 'eq' means "the range of the search value fully contains the range of the target value" (see right column: <a href="http://www.hl7.org/implement/standards/fhir/search.html#prefix" target="_blank" title="http://www.hl7.org/implement/standards/fhir/search.html#prefix">http://www.hl7.org/implement/standards/fhir/search.html#prefix</a>)</p>
<blockquote>
<p>The question is now, how to return an exact match for a valuePeriod that only has a start date available ? </p>
</blockquote>
<p>A period without an end date extends indefinitely into the future, so an exact match doesn't really make sense, but 'ap' or 'ge' might do what you want.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
