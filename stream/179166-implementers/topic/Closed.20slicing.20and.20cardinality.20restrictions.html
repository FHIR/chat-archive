---
layout: page
title: "FHIR Chat  · Closed slicing and cardinality restrictions · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html">Closed slicing and cardinality restrictions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153973303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Closed%20slicing%20and%20cardinality%20restrictions/near/153973303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html#153973303">(Jul 04 2018 at 09:45)</a>:</h4>
<p>I am working on a profile of Observation. I have restricted the cardinality of <em>code.coding</em> to "1...*" and also sliced this field (discriminating on system and code). I have set the slicing to be closed and have defined a single slice (with cardinality 1...1). I was under the impression that this latter combination (closed slicing + defining only a single slice, of which only one instance is allowed) should implicitly restrict the cardinality of <em>code.coding</em> to "1...1" (no undefined elements allowed + 1 required element defined -&gt; exactly 1 element required). However, when I run the validator on an example Observation in which the element defined by the slice AND a further element (different code &amp; system) is present in <em>code.coding</em>, it goes through without errors (but it does catch if the slice element occurs twice). Have I misunderstood the way closed slicings work?</p>
<p>For the future: Insofar as closed slicing does actually restrict cardinality, are there any best-practice rules for how to set the cardinality of a field with a closed slicing? E.g. should it also be set to reflect the min and max no. of element the slicing allows or rather not be changed at all?</p>



<a name="153973311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Closed%20slicing%20and%20cardinality%20restrictions/near/153973311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html#153973311">(Jul 04 2018 at 11:16)</a>:</h4>
<p>As far as I can see, your assumption is correct. Which validator are you using?</p>



<a name="153973314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Closed%20slicing%20and%20cardinality%20restrictions/near/153973314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html#153973314">(Jul 04 2018 at 11:56)</a>:</h4>
<p>I am using the standard Java JAR validator, <em>org.hl7.fhir.validator.jar</em> (retrieved the latest version today).</p>



<a name="153973327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Closed%20slicing%20and%20cardinality%20restrictions/near/153973327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html#153973327">(Jul 04 2018 at 13:20)</a>:</h4>
<p>Sounds like a bug in the validator.  Please submit a change request.  If you can submit a minimal instance that demonstrates the issue, that'd be good too.</p>
<p>On a separate note, restricting the number of codings in a CodeableConcept is generally not a good idea unless you're just documenting what your system will currently do.  One of the objectives of FHIR is to allow systems to design a single external interface that satisfies the needs of all of their interaction partners.  So you might spit out a local code, an ICD9 code, an ICD10 code and a SNOMED code as different codings because different consumers expect different systems.  As a consumer, you should always be prepared to handle the possibility that there are additional codings present you don't care about and support - and when that happens, you should ignore the extra codings, not raise an error.  Otherwise you're forcing your communication partner to have a special interface just for talking to your system, and that significantly raises costs.</p>



<a name="153973330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Closed%20slicing%20and%20cardinality%20restrictions/near/153973330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html#153973330">(Jul 04 2018 at 13:30)</a>:</h4>
<p>As a comparison, you can upload your resources (profile + instance) to your Simplifier project, and validate there. It uses the C# Validator.</p>



<a name="153973662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Closed%20slicing%20and%20cardinality%20restrictions/near/153973662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html#153973662">(Jul 05 2018 at 09:20)</a>:</h4>
<p>Thanks for the input! <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I will try to boil the issue down to a minimal version. Where should I submit the change request (will be my first one)? Also thanks for the tip on the cardinality restriction, I will give that some more thought.</p>



<a name="153973690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Closed%20slicing%20and%20cardinality%20restrictions/near/153973690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html#153973690">(Jul 05 2018 at 13:32)</a>:</h4>
<p>There's a link at the bottom of each page in the specification that says "propose a change".  There's a one time (free) registration process where we try to confirm you're a human.  After that, you can submit changes to your heart's content :)</p>



<a name="153974438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Closed%20slicing%20and%20cardinality%20restrictions/near/153974438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html#153974438">(Jul 10 2018 at 08:43)</a>:</h4>
<p>Now submitted to GForge as <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17469" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17469">#17469</a> (with a minimal example included).</p>



<a name="153974465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Closed%20slicing%20and%20cardinality%20restrictions/near/153974465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html#153974465">(Jul 10 2018 at 14:41)</a>:</h4>
<p><a href="https://simplifier.net/slicebugtest/observation-example/$validate" target="_blank" title="https://simplifier.net/slicebugtest/observation-example/$validate">https://simplifier.net/slicebugtest/observation-example/$validate</a></p>



<a name="153974466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Closed%20slicing%20and%20cardinality%20restrictions/near/153974466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html#153974466">(Jul 10 2018 at 14:41)</a>:</h4>
<p>I checked your examples. The dotnet validator agrees with you.</p>



<a name="153974583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Closed%20slicing%20and%20cardinality%20restrictions/near/153974583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Closed.20slicing.20and.20cardinality.20restrictions.html#153974583">(Jul 11 2018 at 10:56)</a>:</h4>
<p>Thanks! - nice to know I wasn't entirely off when reading the spec <span class="emoji emoji-1f604" title="smile">:smile:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
