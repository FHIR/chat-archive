---
layout: page
title: "FHIR Chat  · search: all ServiceRequests with no Task · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html">search: all ServiceRequests with no Task</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="159500352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159500352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159500352">(Feb 27 2019 at 11:15)</a>:</h4>
<p>Is there a possibility for doing such a search in one request?:<br>
All ServiceRequests which don't have a Task.basedOn pointing to them</p>



<a name="159500474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159500474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159500474">(Feb 27 2019 at 11:18)</a>:</h4>
<p>i think i need a search filter (which our hapi doesn't support)</p>



<a name="159503992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159503992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159503992">(Feb 27 2019 at 12:18)</a>:</h4>
<p>In aidbox you can use SQL on FHIR for that :)</p>



<a name="159545096"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159545096" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159545096">(Feb 27 2019 at 19:32)</a>:</h4>
<p>I don't see a way of creating such a query. _has in the regular search api does not accept any modifiers, like :not, therefore is not an option. In my opinion not even _filter would solve your issue. It is still an open question how to combine _filter and _has (See <a href="#narrow/stream/179166-implementers/topic/_has.20.26.20_filter" title="#narrow/stream/179166-implementers/topic/_has.20.26.20_filter">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/_has.20.26.20_filter</a>)</p>



<a name="159545169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159545169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159545169">(Feb 27 2019 at 19:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> Which parameter do you use for the sql statement? I'm interested in the solution!</p>



<a name="159579814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159579814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159579814">(Feb 28 2019 at 05:17)</a>:</h4>
<p>select s.* from ServiceRequest s<br>
left join Task t on <a href="http://s.id" target="_blank" title="http://s.id">s.id</a> = t.resource#&gt;&gt;'{basedOn, id}'<br>
where <a href="http://t.id" target="_blank" title="http://t.id">t.id</a> is null;</p>



<a name="159582250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159582250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159582250">(Feb 28 2019 at 06:17)</a>:</h4>
<p>Sorry, I meant how do you pass this query from the client to the server in the REST API?</p>



<a name="159590540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159590540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159590540">(Feb 28 2019 at 09:18)</a>:</h4>
<p>In aidbox you can create a stored query, which will be exposed as custom search parameter or custom operation</p>



<a name="159590657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159590657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159590657">(Feb 28 2019 at 09:20)</a>:</h4>
<p>Sounds like <a href="http://hl7.org/fhir/R4/search.html#query" target="_blank" title="http://hl7.org/fhir/R4/search.html#query">_query</a></p>



<a name="159629076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159629076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159629076">(Feb 28 2019 at 16:29)</a>:</h4>
<blockquote>
<p>I don't see a way of creating such a query. _has in the regular search api does not accept any modifiers, like :not</p>
</blockquote>
<p>_has with a :not modifier sounds great. Is there a strong argument against _has with a :not modifier?</p>



<a name="159629828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159629828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159629828">(Feb 28 2019 at 16:37)</a>:</h4>
<p>i stumbled today on a related _has question:<br>
How to query only Patients which have a Task pointing to them?<br>
We ended up with: <code>{{baseurl}}/Patient?_has:Task:patient:code=[some_code]</code>, which works fine. But how to get all Patients with a referencing Task without independent of a code or other criteria? <code>{{baseurl}}/Patient?_has:Task:patient</code>doesn't work</p>



<a name="159641027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159641027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159641027">(Feb 28 2019 at 18:53)</a>:</h4>
<p>You’re asking that joins be included in the API.  Is that reasonable?  Why not fetch all the Tasks, create an array of patientIds from them, and then fetch that array of Patients?  You’re wanting the API to do something that it’s not really designed to do.</p>



<a name="159695159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159695159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159695159">(Mar 01 2019 at 09:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> You can always reverse chain on _id:missing=false. That's a criteria which should work without being an restriction to which resources to include. <code>{{BASE_URL}}/Patient?_has:Task:patient:_id:missing=false</code></p>



<a name="159695803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159695803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159695803">(Mar 01 2019 at 10:02)</a>:</h4>
<p>Regarding your other question: As much as I would like to have a way of expressing these queries in FHIR, I am not in favour of adding more complexity to the current way reverse chaining is handled. It's hard enough to handle the current modifiers. I would guess that it would not be completely sufficient to 'just' have a :not modifier on _has, but that you want to go one more level deeper and even restrict this result set, e.g. '_has:Task:patient:not=false' + another condition.</p>



<a name="159695893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/159695893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#159695893">(Mar 01 2019 at 10:04)</a>:</h4>
<p>We should rather explore on how to make _filter work and start implementing it. Or follow <span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> idea of using SQL on FHIR.</p>



<a name="161333113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/161333113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#161333113">(Mar 21 2019 at 10:37)</a>:</h4>
<p>(deleted)</p>



<a name="172214837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/172214837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcelo Cabello <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#172214837">(Aug 01 2019 at 12:14)</a>:</h4>
<p>Hi, I'd created a query to retrieve the patients which have a DiagnosticReport where the code of diagnosis is XXX. So it's really simple to do following the examples,  But it doesnt'work. The spec shows two search parameters to reference the Patient resource. So I tried that;<br>
<code>url/Patient?_has:DiagnosticReport:subject:code=[snomedCode]</code><br>
<code>url/Patient?_has:DiagnosticReport:patient:code=[snomedCode]</code></p>
<p>Some hint?</p>



<a name="172215386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/172215386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#172215386">(Aug 01 2019 at 12:23)</a>:</h4>
<p>what does doesn't work mean? which server?</p>



<a name="172216239"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/172216239" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcelo Cabello <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#172216239">(Aug 01 2019 at 12:37)</a>:</h4>
<p>I was trying on a local server based on hapi-fhir-jpaserver-starter. <br>
I replied the same request on UHN/HAPI Server (both DSTU3 &amp; R4) and works well!!<br>
I notice the difference that Patients are in another server, wich maybe the references didn't resolved. I'll try again with local Patients to see what happens. <br>
Thanks!!!</p>



<a name="172234267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20all%20ServiceRequests%20with%20no%20Task/near/172234267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcelo Cabello <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20all.20ServiceRequests.20with.20no.20Task.html#172234267">(Aug 01 2019 at 16:02)</a>:</h4>
<p>After move the Patients resources to my local endpoint and then update the references to patients in DiagnosticReport, the search works fine!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
