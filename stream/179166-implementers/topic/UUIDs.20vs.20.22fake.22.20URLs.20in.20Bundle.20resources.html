---
layout: page
title: "FHIR Chat  · UUIDs vs &quot;fake&quot; URLs in Bundle resources · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html">UUIDs vs &quot;fake&quot; URLs in Bundle resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153890241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153890241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153890241">(May 17 2017 at 17:45)</a>:</h4>
<p>Hi all. I'm generating FHIR Bundle resources, in particular documents converted from C-CDA, and would like to hear opinions on best practice for entry.fullUrl. Since there is no FHIR server involved in the conversion process, I am currently generating UUIDs to identify each resource, so entry.fullUrl looks like this:</p>
<div class="codehilite"><pre><span></span>     &lt;fullUrl value=&quot;urn:uuid:df2a676b-d2a6-4bbe-87e6-de61e14f4958&quot;/&gt;
</pre></div>


<p>However, I'm considering moving to something like this instead:</p>
<div class="codehilite"><pre><span></span>     &lt;fullUrl value=&quot;http://example.org/not-a-fhir-server/Patient/1&quot;/&gt;
</pre></div>


<p>My question is, does this add value by identifying the resource as a Patient and allowing for relative references from the FHIR base of <a href="http://example.org/not-a-fhir-server" target="_blank" title="http://example.org/not-a-fhir-server">http://example.org/not-a-fhir-server</a>, or does it imply a false promise that the patient is actually accessible at that URL? Would like to hear others thoughts on this. </p>



<a name="153890243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153890243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153890243">(May 17 2017 at 17:55)</a>:</h4>
<p>If the reference is inside a Bundle, you already know it's a Patient because you can resolve the reference without doing a query.  A fake URL is going to prompt systems to try to resolve it, at least in some cases, which means you'd be triggering a performance hit.  The recommendation is to use a UUID and I don't see any reason to not do that.</p>



<a name="153890246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153890246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153890246">(May 17 2017 at 18:00)</a>:</h4>
<p>Thanks Lloyd. One other reason I am considering this approach is that I am using XSLT, and am currently using a Java extension to generate the UUIDs, whereas with the URL-based approach I can simply use generate-id() to create resource ids that are unique within the Bundle. </p>



<a name="153890248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153890248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153890248">(May 17 2017 at 18:22)</a>:</h4>
<p>I'd stick with UUID.  If it's a URL, the expectation is that it <em>should</em> be resolvable.  Obviously servers go down, users don't have permissions, etc.  But it's definitely supposed to be resolvable.</p>



<a name="153914134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153914134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153914134">(Oct 16 2017 at 17:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Are UUIDs the preferred/only method to reference other resources within bundle?  Are there any rules around the generation of a uuid for this purpose?</p>



<a name="153914138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153914138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153914138">(Oct 16 2017 at 18:37)</a>:</h4>
<p>No, you can use regular urls as well. Check the rules here: <a href="http://hl7.org/fhir/http.html#2.21.0.17.2" target="_blank" title="http://hl7.org/fhir/http.html#2.21.0.17.2">http://hl7.org/fhir/http.html#2.21.0.17.2</a></p>



<a name="153914229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153914229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153914229">(Oct 17 2017 at 00:03)</a>:</h4>
<p>If you're using a UUID, then normal UUID-generation rules apply - i.e. use an algorithm that should ensure global uniqueness.  Good practice is for the same resource instance to have the same UUID if sent in multiple Bundles, but that's not a requirement.</p>



<a name="153914230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153914230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153914230">(Oct 17 2017 at 00:03)</a>:</h4>
<p>(But if the same UUID does appear in distinct Bundle instances, it should definitely be on the same resource instance :))</p>



<a name="153914442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153914442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153914442">(Oct 17 2017 at 15:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> Could you point me to an example of regular urls being used? Is this the "fake" URL as mentioned above? Again, this is in the case of a local resource within a bundle only.</p>



<a name="153914468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153914468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153914468">(Oct 17 2017 at 16:57)</a>:</h4>
<p>If the identifier is only valid within the scope of the bundle, then it needs to be a UUID.  If you used URLs, the expectation is that they would resolve outside the Bundle to the resource.</p>



<a name="153914480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153914480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153914480">(Oct 17 2017 at 17:50)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> !</p>



<a name="153914586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153914586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153914586">(Oct 18 2017 at 09:30)</a>:</h4>
<p>Take a look at <a href="http://hl7.org/fhir/bundle-transaction.xml.html" target="_blank" title="http://hl7.org/fhir/bundle-transaction.xml.html">http://hl7.org/fhir/bundle-transaction.xml.html</a>.</p>
<p>If a bundle would contain a fullUrl "  &lt;fullUrl value="http://example.org/fhir/Patient/123"/&gt; " like it does here and other may reference it. However, if the entry.request.method would be a POST, it would get assigned a new id (you might not even be <a href="http://example.org" target="_blank" title="http://example.org">http://example.org</a>) - and all references to this fullUrl in other parts of the bundle would get updated to this new id.  It is not necessary for the fullUrl to be a UUID in this case - though it is user friendlier since it clearly indicates this is a "new" resource.</p>



<a name="153918838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/UUIDs%20vs%20%22fake%22%20URLs%20in%20Bundle%20resources/near/153918838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/UUIDs.20vs.20.22fake.22.20URLs.20in.20Bundle.20resources.html#153918838">(Nov 10 2017 at 11:31)</a>:</h4>
<p>Yes, if the resource is created by the bundle, then the refs in the bundle also need to be updated.<br>
So this needs to be careful of the order of processing...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
