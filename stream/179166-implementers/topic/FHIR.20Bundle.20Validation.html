---
layout: page
title: "FHIR Chat  · FHIR Bundle Validation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Bundle.20Validation.html">FHIR Bundle Validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153974435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Bundle%20Validation/near/153974435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yener Topal <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Bundle.20Validation.html#153974435">(Jul 10 2018 at 08:35)</a>:</h4>
<p>Hello Everyone,</p>
<p>I am getting started with learning the FHIR Api for c# and I would like to ask a question on how i can validate an incoming Bundle request through a POST request to make sure its valid. I receive it as JSON.</p>
<p>I am also looking for documentation on the C# FHIR Api it seems like documentation is incomplete?</p>



<a name="153974865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Bundle%20Validation/near/153974865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Bundle.20Validation.html#153974865">(Jul 12 2018 at 06:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191347">@Mirjam Baltus</span> <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> ?</p>



<a name="153974909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Bundle%20Validation/near/153974909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Bundle.20Validation.html#153974909">(Jul 12 2018 at 13:13)</a>:</h4>
<p>Documentation is indeed not covering validation. Basics are simple. Create a new Validator and call Validate() on your resource POCO. You can find an example of its use in <a href="https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs" target="_blank" title="https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs">https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs</a></p>



<a name="153975387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Bundle%20Validation/near/153975387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yener Topal <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Bundle.20Validation.html#153975387">(Jul 16 2018 at 08:08)</a>:</h4>
<blockquote>
<p>Documentation is indeed not covering validation. Basics are simple. Create a new Validator and call Validate() on your resource POCO. You can find an example of its use in <a href="https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs" target="_blank" title="https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs">https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs</a></p>
</blockquote>
<p>Can I apply this validation for my case? I am receiving a Bundle message in JSON:<br>
This is my code:</p>
<div class="codehilite"><pre><span></span>        Bundle bundle = new FhirJsonParser().Parse&lt;Bundle&gt;(resource.ToString());

        OperationOutcome result = null;

        ValidationSettings settings = ValidationSettings.Default;
        settings.EnableXsdValidation = true;
        settings.Trace = true;
        settings.ResourceResolver = this.CombinedSource;

        var validator = new Hl7.Fhir.Validation.Validator(settings);
        result = validator.Validate(bundle);
</pre></div>


<p>I receive the error:  "Unable to resolve reference to profile '<a href="http://hl7.org/fhir/StructureDefinition/Bundle" target="_blank" title="http://hl7.org/fhir/StructureDefinition/Bundle">http://hl7.org/fhir/StructureDefinition/Bundle</a>' (at Bundle)"</p>
<p>Not sure if this is how its supposed to work but that given url in the error has been changed to "<a href="http://hl7.org/fhir/bundle.html" target="_blank" title="http://hl7.org/fhir/bundle.html">http://hl7.org/fhir/bundle.html</a>" I believe.</p>
<p>Just need confirmation if i did it right, i can read the bundle perfectly fine, atm the validator doesn't seem to work for my case.</p>



<a name="153975474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Bundle%20Validation/near/153975474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Bundle.20Validation.html#153975474">(Jul 16 2018 at 14:04)</a>:</h4>
<p>I think the <a class="stream" data-stream-id="179171" href="/#narrow/stream/179171-dotnet">#dotnet</a> stream is a better fit for .NET API specifics.<br>
<span class="user-mention" data-user-id="191347">@Mirjam Baltus</span> : can you spot an error in the code?</p>



<a name="153975493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Bundle%20Validation/near/153975493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Bundle.20Validation.html#153975493">(Jul 16 2018 at 15:40)</a>:</h4>
<p>I'm not sure what's in the CombinedSource for the ResourceResolver. You need the specification to validate against, so one of the sources should be pointing to the specification.zip. One of the ways to do that, is: <br>
            var source = new CachedResolver(ZipSource.CreateValidationSource());</p>
<p>Of course you can combine sources with a MultiResolver, for example joining the specs with your own directory containing StructureDefinitions.</p>



<a name="153975673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Bundle%20Validation/near/153975673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yener Topal <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Bundle.20Validation.html#153975673">(Jul 17 2018 at 07:29)</a>:</h4>
<blockquote>
<p>I'm not sure what's in the CombinedSource for the ResourceResolver. You need the specification to validate against, so one of the sources should be pointing to the specification.zip. One of the ways to do that, is: <br>
            var source = new CachedResolver(ZipSource.CreateValidationSource());</p>
<p>Of course you can combine sources with a MultiResolver, for example joining the specs with your own directory containing StructureDefinitions.</p>
</blockquote>
<div class="codehilite"><pre><span></span>              string profilePath = @&quot;C:\Users\Yener\Source\Repos\first-stam-rep\packages\Hl7.Fhir.Specification.STU3.0.96.0\contentFiles\any\any&quot;;
              DirectorySource = new CachedResolver(new DirectorySource(profilePath, includeSubdirectories: true));
              CombinedSource = new MultiResolver(DirectorySource);
</pre></div>


<p>This is how I set up the resolver. Because ZipSource.CreateValidationSource gave me an error I think i need to setup something before i can use that method.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
