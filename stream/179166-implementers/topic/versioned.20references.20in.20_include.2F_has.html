---
layout: page
title: "FHIR Chat  · versioned references in _include/_has · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html">versioned references in _include/_has</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153851946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153851946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153851946">(Oct 05 2016 at 02:32)</a>:</h4>
<p>If a reference is version specific (think AuditEvent.entity.reference) and an _include or _has is used, should the included resources be the version specific ones or the current ones?  At first, I thought this obvious (version specific), but not so sure.  Today, I needed to find:<br>
<code>Encounter?_has:AuditEvent:reference:action-by=update$my-user-id&amp;_profile=http://example.com/sd/something</code><br>
(action-by is a composite of subtype + altid)<br>
Since search parameters only apply to the current version, the _profile search applies to current, but the AuditEvent.reference applies to an old version.  My intent was "an Encounter that was ever updated by my-user-id and (currently) has this profile".</p>



<a name="153851947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153851947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153851947">(Oct 05 2016 at 02:33)</a>:</h4>
<p>not obvious at all then</p>



<a name="153851949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153851949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153851949">(Oct 05 2016 at 02:34)</a>:</h4>
<p>Having a hard time getting my head around this...thinking maybe there should be a modifier on reference searches to direct resolution</p>



<a name="153851953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153851953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153851953">(Oct 05 2016 at 02:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191370">@Richard Ettema</span> How do your servers handle this?</p>



<a name="153851955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153851955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153851955">(Oct 05 2016 at 02:44)</a>:</h4>
<p>Could be as simple as <code>Encounter?patient.name=donovan</code> when the Encounter has a version specific patient reference and the patient has been updated. The search indexes usually don't have the old version of the patient...then what?</p>



<a name="153852232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153852232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153852232">(Oct 07 2016 at 02:30)</a>:</h4>
<p>This is an interesting question..</p>
<p>I implemented <code>_has</code> in a non-version-specific way. Now that I think about it, so is <code>_include</code>. Both features assume the latest version even if the reference is to an older version.</p>



<a name="153852257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153852257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153852257">(Oct 07 2016 at 04:13)</a>:</h4>
<p>If a reference is version-specific, you really want an _include to be the specified version.  I'm not as sure about _has</p>



<a name="153852475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153852475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153852475">(Oct 10 2016 at 20:07)</a>:</h4>
<p>What about a chained search?</p>



<a name="153852484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153852484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153852484">(Oct 10 2016 at 22:35)</a>:</h4>
<p>That would still follow version-specific references if they were version specific, I presume</p>



<a name="153852486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153852486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153852486">(Oct 10 2016 at 22:56)</a>:</h4>
<p>Meaning search on old versions. Ouch.  Of course, servers could opt-out, but now we're in a situation where chained search *is* supported, but a particular instance may not be.  Similar to a broken link/reference, but not quite since a current version of the record may still exist.  This is all kinds of fuzzy....</p>



<a name="153852498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153852498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153852498">(Oct 10 2016 at 23:22)</a>:</h4>
<p>interesting question. I don't follow version specific references in search; all search is on current resources</p>



<a name="153852510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153852510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153852510">(Oct 11 2016 at 02:08)</a>:</h4>
<p>I think with the chained search I would be ok if the deleted content was not indexed, and that the link for chaining was not considered to be the versioned item.</p>



<a name="153852827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153852827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153852827">(Oct 14 2016 at 03:44)</a>:</h4>
<p>If I search a Provanance and ask to get back its target too, I definitely don't want the current version</p>



<a name="153853253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153853253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anand Mohan Tumuluri <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153853253">(Oct 19 2016 at 20:30)</a>:</h4>
<p>Are there any servers out there that follow version specific references in (chained) search? Is this a mandatory requirement? <br>
Contrary use case: Get all audit events for the patient with the MRN currently as 12345 - <br>
/AuditEvent?participant:Patient.identifier=http://acmehospital.com/Downtown|12345. <br>
I want to get all audit events of the patient even though this patient was previously wrongly assigned a different MRN?</p>



<a name="153853254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153853254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153853254">(Oct 19 2016 at 20:30)</a>:</h4>
<p>my server does not consider the version</p>



<a name="153853255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/versioned%20references%20in%20_include/_has/near/153853255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/versioned.20references.20in.20_include.2F_has.html#153853255">(Oct 19 2016 at 20:31)</a>:</h4>
<p>it's not a mandatory requirement</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
