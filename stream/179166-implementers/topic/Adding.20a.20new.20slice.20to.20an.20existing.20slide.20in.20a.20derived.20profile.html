---
layout: page
title: "FHIR Chat  · Adding a new slice to an existing slide in a derived profile · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20a.20new.20slice.20to.20an.20existing.20slide.20in.20a.20derived.20profile.html">Adding a new slice to an existing slide in a derived profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153897503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20a%20new%20slice%20to%20an%20existing%20slide%20in%20a%20derived%20profile/near/153897503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20a.20new.20slice.20to.20an.20existing.20slide.20in.20a.20derived.20profile.html#153897503">(Jul 20 2017 at 19:13)</a>:</h4>
<p>I need some help getting the IG publisher to recognize a new slice in a derived profile added to an existing slice defined in a base profile. </p>
<p>My base profile looks like this:</p>
<div class="codehilite"><pre><span></span>&lt;element id=&quot;Composition.section&quot;&gt;
  &lt;path value=&quot;Composition.section&quot;/&gt;
  &lt;slicing&gt;
    &lt;discriminator&gt;
      &lt;type value=&quot;value&quot;/&gt;
      &lt;path value=&quot;code&quot;/&gt;
    &lt;/discriminator&gt;
    &lt;rules value=&quot;open&quot;/&gt;
  &lt;/slicing&gt;
&lt;/element&gt;
&lt;element id=&quot;Composition.section:health_concerns_section_slice&quot;&gt;
  &lt;extension
    url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-explicit-type-name&quot;&gt;
    &lt;valueString value=&quot;Section&quot;/&gt;
  &lt;/extension&gt;
  &lt;path value=&quot;Composition.section&quot;/&gt;
  &lt;sliceName value=&quot;health_concerns_section_slice&quot;/&gt;
  &lt;short value=&quot;Health Concerns Section&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;max value=&quot;1&quot;/&gt;
&lt;/element&gt;
&lt;element id=&quot;Composition.section:health_concerns_section_slice.code&quot;&gt;
  &lt;path value=&quot;Composition.section.code&quot;/&gt;
  &lt;short value=&quot;Health concerns section code&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;patternCodeableConcept&gt;
    &lt;coding&gt;
      &lt;system value=&quot;http://loinc.org&quot;/&gt;
      &lt;code value=&quot;75310-3&quot;/&gt;
    &lt;/coding&gt;
  &lt;/patternCodeableConcept&gt;
&lt;/element&gt;
... other slices follow
</pre></div>


<p>In my derived profile I am trying to add a new slice for a "Payers" section. I tried doing the following:</p>
<div class="codehilite"><pre><span></span>&lt;element id=&quot;Composition.section:payer_section_slice&quot;&gt;
  &lt;path value=&quot;Composition.section&quot; /&gt;
  &lt;sliceName value=&quot;payer_section_slice&quot; /&gt;
  &lt;short value=&quot;Payers Section&quot; /&gt;
  &lt;max value=&quot;1&quot; /&gt;
&lt;/element&gt;
&lt;element id=&quot;Composition.section:payer_section_slice.code&quot;&gt;
  &lt;path value=&quot;Composition.section.code&quot;/&gt;
  &lt;short value=&quot;Payers section code&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;patternCodeableConcept&gt;
    &lt;coding&gt;
      &lt;system value=&quot;http://loinc.org&quot;/&gt;
      &lt;code value=&quot;48768-6&quot;/&gt;
    &lt;/coding&gt;
  &lt;/patternCodeableConcept&gt;
&lt;/element&gt;
</pre></div>


<p>... but no luck. I also tried repeating the slicing declaration in the derived profile, but that didn't work either. </p>
<div class="codehilite"><pre><span></span>&lt;element id=&quot;Composition.section&quot;&gt;
  &lt;path value=&quot;Composition.section&quot;/&gt;
  &lt;slicing&gt;
    &lt;discriminator&gt;
      &lt;type value=&quot;value&quot;/&gt;
      &lt;path value=&quot;code&quot;/&gt;
    &lt;/discriminator&gt;
    &lt;rules value=&quot;open&quot;/&gt;
  &lt;/slicing&gt;
&lt;/element&gt;
&lt;element id=&quot;Composition.section:payer_section_slice&quot;&gt;
  &lt;path value=&quot;Composition.section&quot; /&gt;
  &lt;sliceName value=&quot;payer_section_slice&quot; /&gt;
  &lt;short value=&quot;Payers Section&quot; /&gt;
  &lt;max value=&quot;1&quot; /&gt;
&lt;/element&gt;
&lt;element id=&quot;Composition.section:payer_section_slice.code&quot;&gt;
  &lt;path value=&quot;Composition.section.code&quot;/&gt;
  &lt;short value=&quot;Payers section code&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;patternCodeableConcept&gt;
    &lt;coding&gt;
      &lt;system value=&quot;http://loinc.org&quot;/&gt;
      &lt;code value=&quot;48768-6&quot;/&gt;
    &lt;/coding&gt;
  &lt;/patternCodeableConcept&gt;
&lt;/element&gt;
</pre></div>


<p>The IG builds fine, but the new Payer section doesn't show up in the differential or snapshot rendering in the derived profile. </p>
<p>Any ideas?</p>



<a name="153897563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20a%20new%20slice%20to%20an%20existing%20slide%20in%20a%20derived%20profile/near/153897563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20a.20new.20slice.20to.20an.20existing.20slide.20in.20a.20derived.20profile.html#153897563">(Jul 21 2017 at 00:10)</a>:</h4>
<blockquote>
<p>I need some help getting the IG publisher to recognize a new slice in a derived profile added to an existing slice defined in a base profile. </p>
<p>My base profile looks like this:</p>
<div class="codehilite"><pre><span></span>&lt;element id=&quot;Composition.section&quot;&gt;
  &lt;path value=&quot;Composition.section&quot;/&gt;
  &lt;slicing&gt;
    &lt;discriminator&gt;
      &lt;type value=&quot;value&quot;/&gt;
      &lt;path value=&quot;code&quot;/&gt;
    &lt;/discriminator&gt;
    &lt;rules value=&quot;open&quot;/&gt;
  &lt;/slicing&gt;
&lt;/element&gt;
&lt;element id=&quot;Composition.section:health_concerns_section_slice&quot;&gt;
  &lt;extension
    url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-explicit-type-name&quot;&gt;
    &lt;valueString value=&quot;Section&quot;/&gt;
  &lt;/extension&gt;
  &lt;path value=&quot;Composition.section&quot;/&gt;
  &lt;sliceName value=&quot;health_concerns_section_slice&quot;/&gt;
  &lt;short value=&quot;Health Concerns Section&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;max value=&quot;1&quot;/&gt;
&lt;/element&gt;
&lt;element id=&quot;Composition.section:health_concerns_section_slice.code&quot;&gt;
  &lt;path value=&quot;Composition.section.code&quot;/&gt;
  &lt;short value=&quot;Health concerns section code&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;patternCodeableConcept&gt;
    &lt;coding&gt;
      &lt;system value=&quot;http://loinc.org&quot;/&gt;
      &lt;code value=&quot;75310-3&quot;/&gt;
    &lt;/coding&gt;
  &lt;/patternCodeableConcept&gt;
&lt;/element&gt;
... other slices follow
</pre></div>


<p>In my derived profile I am trying to add a new slice for a "Payers" section. I tried doing the following:</p>
<div class="codehilite"><pre><span></span>&lt;element id=&quot;Composition.section:payer_section_slice&quot;&gt;
  &lt;path value=&quot;Composition.section&quot; /&gt;
  &lt;sliceName value=&quot;payer_section_slice&quot; /&gt;
  &lt;short value=&quot;Payers Section&quot; /&gt;
  &lt;max value=&quot;1&quot; /&gt;
&lt;/element&gt;
&lt;element id=&quot;Composition.section:payer_section_slice.code&quot;&gt;
  &lt;path value=&quot;Composition.section.code&quot;/&gt;
  &lt;short value=&quot;Payers section code&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;patternCodeableConcept&gt;
    &lt;coding&gt;
      &lt;system value=&quot;http://loinc.org&quot;/&gt;
      &lt;code value=&quot;48768-6&quot;/&gt;
    &lt;/coding&gt;
  &lt;/patternCodeableConcept&gt;
&lt;/element&gt;
</pre></div>


<p>... but no luck. I also tried repeating the slicing declaration in the derived profile, but that didn't work either. </p>
<div class="codehilite"><pre><span></span>&lt;element id=&quot;Composition.section&quot;&gt;
  &lt;path value=&quot;Composition.section&quot;/&gt;
  &lt;slicing&gt;
    &lt;discriminator&gt;
      &lt;type value=&quot;value&quot;/&gt;
      &lt;path value=&quot;code&quot;/&gt;
    &lt;/discriminator&gt;
    &lt;rules value=&quot;open&quot;/&gt;
  &lt;/slicing&gt;
&lt;/element&gt;
&lt;element id=&quot;Composition.section:payer_section_slice&quot;&gt;
  &lt;path value=&quot;Composition.section&quot; /&gt;
  &lt;sliceName value=&quot;payer_section_slice&quot; /&gt;
  &lt;short value=&quot;Payers Section&quot; /&gt;
  &lt;max value=&quot;1&quot; /&gt;
&lt;/element&gt;
&lt;element id=&quot;Composition.section:payer_section_slice.code&quot;&gt;
  &lt;path value=&quot;Composition.section.code&quot;/&gt;
  &lt;short value=&quot;Payers section code&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;patternCodeableConcept&gt;
    &lt;coding&gt;
      &lt;system value=&quot;http://loinc.org&quot;/&gt;
      &lt;code value=&quot;48768-6&quot;/&gt;
    &lt;/coding&gt;
  &lt;/patternCodeableConcept&gt;
&lt;/element&gt;
</pre></div>


<p>The IG builds fine, but the new Payer section doesn't show up in the differential or snapshot rendering in the derived profile. </p>
<p>Any ideas?</p>
</blockquote>
<p>What I do is  hand edit  the slicing after the ig pub generates it and the use this sd instead</p>



<a name="153897572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20a%20new%20slice%20to%20an%20existing%20slide%20in%20a%20derived%20profile/near/153897572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20a.20new.20slice.20to.20an.20existing.20slide.20in.20a.20derived.20profile.html#153897572">(Jul 21 2017 at 00:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> You you hand edit what? The generated HTML? Or do you take the generated StructureDefinition and hand edit that (differential and snapshot) then feed it back to the IG publisher again? If so, do the Differential and Snapshot tabs render correctly?</p>



<a name="153897682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20a%20new%20slice%20to%20an%20existing%20slide%20in%20a%20derived%20profile/near/153897682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20a.20new.20slice.20to.20an.20existing.20slide.20in.20a.20derived.20profile.html#153897682">(Jul 21 2017 at 13:41)</a>:</h4>
<p>For now I may just ditch adding slices, reslicing, etc. and instead copy the base profile and modify it directly. This is for a comment-only ballot, so I will mention in the IG description that we will try to get the inheritance working properly before going back for STU.</p>



<a name="153898472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20a%20new%20slice%20to%20an%20existing%20slide%20in%20a%20derived%20profile/near/153898472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20a.20new.20slice.20to.20an.20existing.20slide.20in.20a.20derived.20profile.html#153898472">(Jul 26 2017 at 20:34)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> You you hand edit what? The generated HTML? Or do you take the generated StructureDefinition and hand edit that (differential and snapshot) then feed it back to the IG publisher again? If so, do the Differential and Snapshot tabs render correctly?</p>
</blockquote>
<p>I hand edit the SD  - delete text, snapshot and edit the diff</p>



<a name="153898714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20a%20new%20slice%20to%20an%20existing%20slide%20in%20a%20derived%20profile/near/153898714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20a.20new.20slice.20to.20an.20existing.20slide.20in.20a.20derived.20profile.html#153898714">(Jul 27 2017 at 07:47)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191401">@Eric Haas</span>, the derived profile should repeat the slice entry. Then you can add constraints on existing named slices and introduce new named slices. Forge supports this BTW.</p>



<a name="153898837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20a%20new%20slice%20to%20an%20existing%20slide%20in%20a%20derived%20profile/near/153898837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20a.20new.20slice.20to.20an.20existing.20slide.20in.20a.20derived.20profile.html#153898837">(Jul 27 2017 at 19:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> Yes, it worked fine for me in Forge, but the IG publisher would not recognize the new slice when it generated the snapshot and differential diagrams.</p>



<a name="153898838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20a%20new%20slice%20to%20an%20existing%20slide%20in%20a%20derived%20profile/near/153898838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20a.20new.20slice.20to.20an.20existing.20slide.20in.20a.20derived.20profile.html#153898838">(Jul 27 2017 at 19:42)</a>:</h4>
<p>adding a new slice to another profile ( using the same discriminator worked for me in IG pub.  I get slice1 in profile1 and add slice2 in profile2 based on profile 1.</p>
<div class="codehilite"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;StructureDefinition xmlns=&quot;http://hl7.org/fhir&quot;&gt;
    &lt;id value=&quot;template-basic2&quot;/&gt;
    &lt;url value=&quot;http://www.fhir.org/guides/test/StructureDefinition/template-basic2&quot;/&gt;
&lt;!-- snip ... --&gt;
    &lt;baseDefinition value=&quot;http://www.fhir.org/guides/test/StructureDefinition/template-basic&quot;/&gt;
    &lt;derivation value=&quot;constraint&quot;/&gt;
    &lt;differential&gt;
    &lt;element id=&quot;Basic&quot;&gt;
        &lt;path value=&quot;Basic&quot;/&gt;
        &lt;definition value=&quot;This is a simple example Template.&quot;/&gt;
        &lt;mustSupport value=&quot;false&quot;/&gt;
        &lt;isModifier value=&quot;false&quot;/&gt;
    &lt;/element&gt;
&lt;!--  ****** the discriminator is defined in the profile upon which this profile is based *********
    &lt;element id=&quot;Basic.identifier&quot;&gt;
      &lt;path value=&quot;Basic.identifier&quot;/&gt;
      &lt;slicing&gt;
    &lt;discriminator&gt;
      &lt;type value=&quot;value&quot;/&gt;
      &lt;path value=&quot;system&quot;/&gt;
    &lt;/discriminator&gt;
    &lt;rules value=&quot;open&quot;/&gt;
      &lt;/slicing&gt;
      &lt;min value=&quot;1&quot;/&gt;
      &lt;max value=&quot;*&quot;/&gt;
      &lt;type&gt;
    &lt;code value=&quot;Identifier&quot;/&gt;
      &lt;/type&gt;
      &lt;mustSupport value=&quot;true&quot;/&gt;
      &lt;isModifier value=&quot;false&quot;/&gt;
    &lt;/element&gt;
--&gt;
&lt;!--add a slice in the new profile --&gt;
    &lt;element id=&quot;Basic.identifier:slice2&quot;&gt;
        &lt;path value=&quot;Basic.identifier&quot;/&gt;
        &lt;sliceName value=&quot;slice2&quot;/&gt;
        &lt;min value=&quot;1&quot;/&gt;
        &lt;max value=&quot;1&quot;/&gt;
        &lt;type&gt;
          &lt;code value=&quot;Identifier&quot;/&gt;
        &lt;/type&gt;
        &lt;mustSupport value=&quot;true&quot;/&gt;
        &lt;isModifier value=&quot;false&quot;/&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Basic.identifier:slice2.system&quot;&gt;
        &lt;path value=&quot;Basic.identifier.system&quot;/&gt;
        &lt;min value=&quot;1&quot;/&gt;
        &lt;max value=&quot;1&quot;/&gt;
        &lt;type&gt;
            &lt;code value=&quot;uri&quot;/&gt;
        &lt;/type&gt;
        &lt;fixedUri value=&quot;http://acme.org/identifiers2&quot;/&gt;
        &lt;mustSupport value=&quot;true&quot;/&gt;
        &lt;isModifier value=&quot;false&quot;/&gt;
    &lt;/element&gt;
    &lt;/differential&gt;
&lt;/StructureDefinition&gt;
</pre></div>



<a name="153898840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20a%20new%20slice%20to%20an%20existing%20slide%20in%20a%20derived%20profile/near/153898840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20a.20new.20slice.20to.20an.20existing.20slide.20in.20a.20derived.20profile.html#153898840">(Jul 27 2017 at 19:43)</a>:</h4>
<p>tried to add a discriminator in profile2 and that did not work for me</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
