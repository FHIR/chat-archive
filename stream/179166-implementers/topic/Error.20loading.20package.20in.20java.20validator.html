---
layout: page
title: "FHIR Chat  · Error loading package in java validator · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html">Error loading package in java validator</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="228787495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/228787495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#228787495">(Mar 04 2021 at 15:05)</a>:</h4>
<p>Hi, I encountered a problem with the java validator when validating against an ig package. It seems that one of the dependencies in the package does not resolve, although it is present in the registry and I'm relatively sure it was loading before. This is the package I'm using: <a href="http://registry.fhir.org/package/de.medizininformatikinitiative.kerndatensatz.diagnose|1.0.2">http://registry.fhir.org/package/de.medizininformatikinitiative.kerndatensatz.diagnose|1.0.2</a> <br>
Here is the exception thrown by the validator:</p>
<div class="codehilite"><pre><span></span><code>  Load de.medizininformatikinitiative.kerndatensatz.meta#1.0.2 - 2 resources (00:00.0046)
  Load de.basisprofil.r4#0.9.12 - 126 resources (00:00.0355)
  Load KBV.Basis#1.1.0Exception in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: Unable to find/resolve/read -ig KBV.Basis#1.1.0
    at org.hl7.fhir.validation.IgLoader.loadIgSource(IgLoader.java:191)
    at org.hl7.fhir.validation.IgLoader.loadIg(IgLoader.java:85)
    at org.hl7.fhir.validation.IgLoader.loadIg(IgLoader.java:71)
    at org.hl7.fhir.validation.cli.services.ValidationService.getValidator(ValidationService.java:205)
    at org.hl7.fhir.validation.ValidatorCli.doValidation(ValidatorCli.java:200)
    at org.hl7.fhir.validation.ValidatorCli.main(ValidatorCli.java:156)
</code></pre></div>



<a name="228790020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/228790020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#228790020">(Mar 04 2021 at 15:18)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span></p>



<a name="228836070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/228836070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#228836070">(Mar 04 2021 at 19:35)</a>:</h4>
<p>please provide the exact command you ran with any supporting files</p>



<a name="228842139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/228842139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#228842139">(Mar 04 2021 at 20:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="248736">Mark Iantorno</span> <a href="#narrow/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator/near/228836070">said</a>:</p>
<blockquote>
<p>please provide the exact command you ran with any supporting files</p>
</blockquote>
<p>Here's the file and the command:<br>
<a href="/user_uploads/10155/PJVUF0MBG6GGdItJKJipDP0j/Condition-example.json">Condition-example.json</a> <a href="/user_uploads/10155/t93ekIIrWoihiOvfWXPJw3_e/de.medizininformatikinitiative.kerndatensatz.diagnose-1.0.2.tgz">de.medizininformatikinitiative.kerndatensatz.diagnose-1.0.2.tgz</a> </p>
<div class="codehilite"><pre><span></span><code>julian@Julians-MacBook-Air kerndatensatzmodul-diagnose % java -jar validator_cli.jar Condition-example.json -version 4.0 -ig de.medizininformatikinitiative.kerndatensatz.diagnose#1.0.2
FHIR Validation tool Version 5.3.2 (Git# 7e70adf8198d). Built 2021-02-18T23:33:17.184Z (13 days old)
  Java:   15.0.2 from /Library/Java/JavaVirtualMachines/jdk-15.0.2.jdk/Contents/Home on x86_64 (64bit). 2048MB available
  Paths:  Current = /Users/julian/git/kerndatensatzmodul-diagnose, Package Cache = /Users/julian/.fhir/packages
  Params: Condition-example.json -version 4.0 -ig de.medizininformatikinitiative.kerndatensatz.diagnose#1.0.2
Loading
  Load FHIR v4.0 from hl7.fhir.r4.core#4.0.1Creating Package manager?
 - 4575 resources (00:17.0543)
  Load hl7.terminology#2.0.0 - 3749 resources (00:01.0836)
  Terminology server http://tx.fhir.org - Version 1.9.369 (00:02.0909)
  Load de.medizininformatikinitiative.kerndatensatz.meta#1.0.2 - 2 resources (00:00.0101)
  Load de.basisprofil.r4#0.9.12 - 126 resources (00:01.0198)
  Load KBV.Basis#1.1.0Exception in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: Unable to find/resolve/read -ig KBV.Basis#1.1.0
    at org.hl7.fhir.validation.IgLoader.loadIgSource(IgLoader.java:191)
    at org.hl7.fhir.validation.IgLoader.loadIg(IgLoader.java:85)
    at org.hl7.fhir.validation.IgLoader.loadIg(IgLoader.java:71)
    at org.hl7.fhir.validation.cli.services.ValidationService.getValidator(ValidationService.java:205)
    at org.hl7.fhir.validation.ValidatorCli.doValidation(ValidatorCli.java:200)
    at org.hl7.fhir.validation.ValidatorCli.main(ValidatorCli.java:156)
</code></pre></div>



<a name="232644200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/232644200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#232644200">(Mar 31 2021 at 18:46)</a>:</h4>
<p><span class="user-mention" data-user-id="194952">@Julian Sass</span> Given <a href="#narrow/stream/179177-conformance/topic/Bug.20in.20FHIR.20Package.20Servers/near/231780540">your comment here</a> is this now resolved?</p>



<a name="232646382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/232646382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#232646382">(Mar 31 2021 at 19:01)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="203235">@Ward Weistra</span> the error remains when packages include a dependency on KBV.Basis. But yes, resolved in the sense that the bug has been reported.</p>



<a name="232648405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/232648405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#232648405">(Mar 31 2021 at 19:14)</a>:</h4>
<p><span class="user-mention" data-user-id="194952">@Julian Sass</span> Sorry to hear, I thought this was now resolved, given that the package API will now basically ignore capitalization (eg both <a href="https://packages.simplifier.net/KBV.Basis">https://packages.simplifier.net/KBV.Basis</a> and <a href="https://packages.simplifier.net/kbv.basis">https://packages.simplifier.net/kbv.basis</a> resolve). But perhaps there's still some case-dependent resolving in the IG Publisher?<br>
<span class="user-mention" data-user-id="191451">@Patrick Werner</span> Is this also still occurring for you? And if so, is there a IG publisher ticket for that?</p>



<a name="233633409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/233633409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#233633409">(Apr 08 2021 at 10:50)</a>:</h4>
<p>Isn't this an issue with the upper cases in the package.json package reference?</p>



<a name="233633450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/233633450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#233633450">(Apr 08 2021 at 10:50)</a>:</h4>
<p>And the IG tool not being able to match that against the lower cased package listing?</p>



<a name="233792015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/233792015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#233792015">(Apr 09 2021 at 09:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> If this is still an issue, could the IG publisher be improved to compare package names case independent (always treat the names in package cache, dependencies, dependencies of dependencies as lowercase)?</p>



<a name="233792631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/233792631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#233792631">(Apr 09 2021 at 09:36)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="203235">@Ward Weistra</span> i hadn't had the time to fix this, and i think nobody else did it on the java side.</p>



<a name="233792671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/233792671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#233792671">(Apr 09 2021 at 09:36)</a>:</h4>
<p>will file a ticket</p>



<a name="234048204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/234048204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#234048204">(Apr 11 2021 at 14:17)</a>:</h4>
<p><a href="https://github.com/hapifhir/org.hl7.fhir.core/issues/475">https://github.com/hapifhir/org.hl7.fhir.core/issues/475</a><br>
fyi: <span class="user-mention" data-user-id="203235">@Ward Weistra</span> <span class="user-mention" data-user-id="194952">@Julian Sass</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="234287943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/234287943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#234287943">(Apr 13 2021 at 08:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> <span aria-label="wait one second" class="emoji emoji-261d" role="img" title="wait one second">:wait_one_second:</span>️ FYI<br>
Perhaps you can also check if sushi is comparing and searching for packages always as lowercase.</p>



<a name="234292412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/234292412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#234292412">(Apr 13 2021 at 09:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> Perhaps you can also check your scripts to make sure they always treat package names as lowercase, regardless of how provided.</p>



<a name="234318280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/234318280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#234318280">(Apr 13 2021 at 12:47)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> -- I think we take the package name exactly as the user provided it in the config.  If we switch to use lowercase only, then won't it temporarily break projects that currently depend on a Simplifier package name with capitals?  Or am I misunderstanding?</p>



<a name="234318400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/234318400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#234318400">(Apr 13 2021 at 12:48)</a>:</h4>
<p>That said, since Simplifier doesn't publish snapshots in the packages, I'm guessing we don't have too many cases of this anyway.</p>



<a name="234331919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/234331919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#234331919">(Apr 13 2021 at 14:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191469">@Chris Moesel</span> It depends a bit on how your logic for comparing packages is implemented. Let's take <a href="https://simplifier.net/packages/kbv.basis/1.1.3">KBV.Basis 1.3.3</a> as an example:</p>
<ul>
<li>The package API will now give you back the package, regardless of how you capitalize it and the file will be named how you capitalized it. Eg. <a href="https://packages.simplifier.net/kbv.basis/1.1.3">https://packages.simplifier.net/kbv.basis/1.1.3</a> will give back a file called <code>kbv.basis-1.3.3.tgz</code>, <a href="https://packages.simplifier.net/KbV.BaSiS/1.1.3">https://packages.simplifier.net/KbV.BaSiS/1.1.3</a> will give you a file called <code>KbV.BaSiS-1.3.3.tgz</code>.</li>
<li>The package.json will still have the original package name <code>KBV.Basis</code> regardless: <a href="https://simplifier.net/packages/kbv.basis/1.1.3/files/319323">https://simplifier.net/packages/kbv.basis/1.1.3/files/319323</a></li>
</ul>
<p>When someone now specifies <code>KBV.Basis@1.1.3</code> as a dependency in sushi or IG publisher or wherever, I hope you will:</p>
<ol>
<li>query the local package cache for <code>kbv.basis</code> regardless of how it's capitalized there</li>
<li>if not locally available yet, query the package server for lowercase <code>kbv.basis</code> and put a lowercase folder in the FHIR package cache (although that shouldn't matter if other tools implement 1. as well, but just for good measure)</li>
</ol>
<p>Makes sense or am I missing something?</p>



<a name="234332597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/234332597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#234332597">(Apr 13 2021 at 14:14)</a>:</h4>
<p>We'll start to enforce new package( version)s to have lowercase names, possibly even update old ones to lowercase. But until other tools have capitalization-independent package comparison I'm afraid that will lead to breaking dependencies for current sushi/IG publisher IGs when using a previously capitalized dependency.</p>



<a name="234343030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/234343030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#234343030">(Apr 13 2021 at 15:04)</a>:</h4>
<p>Thanks for the extra detail / suggested approach <span class="user-mention" data-user-id="203235">@Ward Weistra</span> -- that's helpful.  We'll look into this to ensure SUSHI fits within this.</p>



<a name="234343935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/234343935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#234343935">(Apr 13 2021 at 15:08)</a>:</h4>
<p><a href="https://github.com/FHIR/sushi/issues/800">SUSHI #800</a></p>



<a name="237261765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/237261765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#237261765">(May 04 2021 at 03:02)</a>:</h4>
<p>I can't reproduce this. it doesn't matter whether I use KBV.Basis or kbv.basis in the java client.</p>



<a name="237782876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/237782876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#237782876">(May 07 2021 at 08:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191451">@Patrick Werner</span> <span class="user-mention" data-user-id="194952">@Julian Sass</span> Can you check whether this (<a href="https://github.com/hapifhir/org.hl7.fhir.core/issues/475">https://github.com/hapifhir/org.hl7.fhir.core/issues/475</a>) is still an issue and, if so, make it reproducible for Grahame?</p>



<a name="238458482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/238458482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julian Sass <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#238458482">(May 12 2021 at 11:31)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Just tested again and I'm still getting this error with the java validator when I set the -ig parameter to <code>de.medizininformatikinitiative.kerndatensatz.diagnose#1.0.2</code>.  This IG declares a dependency on <code>"KBV.Basis": "1.1.0"</code> in its package manifest. The subsequent version of <em>diagnose</em> changed this to <code>kbv.basis</code> and package loading works. Here's the log:</p>
<div class="codehilite"><pre><span></span><code>julian@Julians-Air kerndatensatzmodul-diagnose % java -jar validator_cli.jar Condition-example.json -version 4.0 -ig de.medizininformatikinitiative.kerndatensatz.diagnose#1.0.2
FHIR Validation tool Version 5.3.11 (Git# 33fffe28ff6b). Built 2021-04-22T05:48:36.375Z (20 days old)
  Java:   15.0.2 from /Library/Java/JavaVirtualMachines/jdk-15.0.2.jdk/Contents/Home on x86_64 (64bit). 2048MB available
  Paths:  Current = /Users/julian/git/kerndatensatzmodul-diagnose, Package Cache = /Users/julian/.fhir/packages
  Params: Condition-example.json -version 4.0 -ig de.medizininformatikinitiative.kerndatensatz.diagnose#1.0.2
Loading
  Load FHIR v4.0 from hl7.fhir.r4.core#4.0.1Creating Package manager?
 - 4575 resources (00:08.0710)
  Load hl7.terminology#2.0.0 - 3749 resources (00:02.0256)
  Terminology server http://tx.fhir.org - Version 1.9.372 (00:02.0206)
  Load de.medizininformatikinitiative.kerndatensatz.meta#1.0.2 - 2 resources (00:00.0028)
  Load de.basisprofil.r4#0.9.12 - 126 resources (00:00.0275)
  Load KBV.Basis#1.1.0Exception in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: Unable to find/resolve/read -ig KBV.Basis#1.1.0
    at org.hl7.fhir.validation.IgLoader.loadIgSource(IgLoader.java:195)
    at org.hl7.fhir.validation.IgLoader.loadIg(IgLoader.java:89)
    at org.hl7.fhir.validation.IgLoader.loadIg(IgLoader.java:75)
    at org.hl7.fhir.validation.cli.services.ValidationService.initializeValidator(ValidationService.java:234)
    at org.hl7.fhir.validation.cli.services.ValidationService.initializeValidator(ValidationService.java:212)
    at org.hl7.fhir.validation.ValidatorCli.doValidation(ValidatorCli.java:203)
    at org.hl7.fhir.validation.ValidatorCli.main(ValidatorCli.java:159)
</code></pre></div>



<a name="238461119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/238461119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#238461119">(May 12 2021 at 11:55)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="194952">@Julian Sass</span>. <span class="user-mention" data-user-id="191687">@Kevin Mayfield</span> sees the same <a href="#narrow/stream/179177-conformance/topic/Simplifier.20-.20Git.20Worklow.20FHIR.20Validation/near/238449585">here</a>.<br>
<span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Can you reproduce that for <a href="https://github.com/hapifhir/org.hl7.fhir.core/issues/475">https://github.com/hapifhir/org.hl7.fhir.core/issues/475</a>? I believe just always lowercasing any user inputted FHIR package names should do the trick.</p>



<a name="238692430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/238692430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#238692430">(May 13 2021 at 22:46)</a>:</h4>
<p>hah found it. It was an internal regex I was using for internal decision making. Should be fixed next release. Fixed next release</p>



<a name="240428769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/240428769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#240428769">(May 27 2021 at 07:24)</a>:</h4>
<p>It looks like I just encountered a separate version of this issue when trying to load packages into the JPA server starter, see <a href="#narrow/stream/179167-hapi/topic/Error.20loading.20de.2Egecco.20package.20into.20JPA.20starter">this HAPI thread</a>. Specifically, the <code>JpaPackageCache#addPackageToCache</code> method also does a package ID comparison that is case-sensitive (see <a href="https://github.com/hapifhir/hapi-fhir/blob/48f93f55555e397bc664fc51be38a77d6e15d0ee/hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/packages/JpaPackageCache.java#L198">these code lines</a>), causing this error:</p>
<div class="codehilite"><pre><span></span><code>2021-05-26 16:52:02.948 [main] ERROR o.a.c.c.C.[Tomcat].[localhost].[/] [DirectJDKLog.java:175] Servlet.init() for servlet [jpaRestfulServer] threw exception
ca.uhn.fhir.rest.server.exceptions.InvalidRequestException: Package ID KBV.Basis doesn&#39;t match expected: kbv.basis
    at ca.uhn.fhir.jpa.packages.JpaPackageCache.addPackageToCache(JpaPackageCache.java:199)
</code></pre></div>
<p>Am I right in assuming this would require a separate fix?</p>



<a name="240429109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/240429109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#240429109">(May 27 2021 at 07:28)</a>:</h4>
<p>(I'd be happy to do a PR for this, just wanted to check whether it would have further ramifications)</p>



<a name="240441426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/240441426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#240441426">(May 27 2021 at 09:43)</a>:</h4>
<p>yes you should do a PR for that</p>



<a name="240465922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Error%20loading%20package%20in%20java%20validator/near/240465922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Error.20loading.20package.20in.20java.20validator.html#240465922">(May 27 2021 at 13:22)</a>:</h4>
<p>Opened a PR with a fix that makes the ID check case-insensitive:</p>
<p>PR: <a href="https://github.com/hapifhir/hapi-fhir/pull/2683">https://github.com/hapifhir/hapi-fhir/pull/2683</a><br>
Associated issue: <a href="https://github.com/hapifhir/hapi-fhir/issues/2682">https://github.com/hapifhir/hapi-fhir/issues/2682</a></p>
<p>Finally, I managed to (attempt to) contribute smt. to HAPI <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>  (even if it is only a single line &amp; two tests...).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
