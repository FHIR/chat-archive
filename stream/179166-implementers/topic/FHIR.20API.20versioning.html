---
layout: page
title: "FHIR Chat  · FHIR API versioning · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html">FHIR API versioning</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153910550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153910550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153910550">(Sep 25 2017 at 20:56)</a>:</h4>
<p>Is there a standard way to version FHIR REST interfaces?  (e.g. <a href="https://host/{FHIR-VERSION}/{API-VERSION}/Patient/1" target="_blank" title="https://host/{FHIR-VERSION}/{API-VERSION}/Patient/1">https://host/{FHIR-VERSION}/{API-VERSION}/Patient/1</a> )</p>



<a name="153910583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153910583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153910583">(Sep 26 2017 at 03:11)</a>:</h4>
<p>Not at present.  And our intention, once things are normative, is for version not to matter anymore.</p>



<a name="153910602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153910602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153910602">(Sep 26 2017 at 06:10)</a>:</h4>
<p>will still have business versions...</p>



<a name="153910616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153910616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153910616">(Sep 26 2017 at 09:46)</a>:</h4>
<blockquote>
<p>Not at present.  And our intention, once things are normative, is for version not to matter anymore.</p>
</blockquote>
<p>That being said, DSTU2, and increasingly STU3 and R4 will be around for a <em>long</em> time - and it's kind of a FAQ.  Out of interest: As a client - what would you do if there was a "standard" way of finding the endpoint for a specific version - would you envision being able to use multiple versions.....I can see that would get likelier with each version of the spec, and resources becoming more mature...</p>



<a name="153910654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153910654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153910654">(Sep 26 2017 at 13:04)</a>:</h4>
<p>No in the most part I wouldn't envisage a client using multiple API versions (or negotiating versions).</p>
<p>The purpose of the API versioning is two fold - to prevent against breaking backwards compatibility, and to be able to technically and clinically assure a clients implementation of a particular version of an API.  The assurance breaks if the interface evolves over time, hence our need for versioned interfaces. (- or never to change our interface! :-))</p>
<p>Note by API version I'm referring to the version of the interface, rather than the FHIR version, though the two are obviously interconnected.</p>
<p>Also to mention that the clients are not in our direct control, and therefore we cannot simultaneously update client &amp; interface/implementation at the same time.</p>



<a name="153910655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153910655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153910655">(Sep 26 2017 at 13:11)</a>:</h4>
<p>I really want to hold to the no versioning, as Lloyd has expressed. BUT when we get to R4, we are going to be faced with no alternative. This because in R4 we will not be taking ALL resources to Normative, some will be STU. Those STU resources might take a few additional revisions before they become normative. Thus in R4 we must support a normative Bundle holding normative resources, and non-normative resources. Those non-normative resources might be generation 4 or 5 or 6 or their final normative... Thus I hate to say it, but we need some solution eventually.</p>



<a name="153910676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153910676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153910676">(Sep 26 2017 at 13:46)</a>:</h4>
<p>One aspect that I am getting out of this is the endpoint url remaining the same, yet the API version going up.  Some clients (at least the .NET and Java ones) let you verify this by getting the CapabilityStatement and checking the version - but that's kind of chicken and egg, using a specific version of the CapabilityStatement (which was renamed as well in STU3!) to check the version.  Following something like you sketched out as a best practice is a good thing - and I see it being done that way.</p>
<p>At the San Diego WGM we found examples of both out in the wild:</p>
<ul>
<li>
<p>Facebook does put the version in the url: <code>https://www.facebook.com/v2.10/dialog/oauth?
  client_id={app-id}
  &amp;redirect_uri={redirect-uri}</code> (see <a href="https://developers.facebook.com/docs/apps/versions/" target="_blank" title="https://developers.facebook.com/docs/apps/versions/">https://developers.facebook.com/docs/apps/versions/</a> for their policies)</p>
</li>
<li>
<p>GitHub uses a media type: application/vnd.github.VERSION.raw+json (<a href="https://developer.github.com/v3/media/" target="_blank" title="https://developer.github.com/v3/media/">https://developer.github.com/v3/media/</a>)</p>
</li>
</ul>
<p>The latter situation allows for content negotiation involving versions. An interesting concept that we might want to try out at the next connectathon in New Orleans in january.</p>



<a name="153911036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Olbrich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911036">(Sep 27 2017 at 15:45)</a>:</h4>
<p>We are operating under the assumption that we will need to support multiple FHIR version simultaneously for quite some time.  The approach we are taking towards that is to pass the version in the Accept header by setting the mime type to something like 'application/fhir+json; fhirVersion=3.0.1' and then switching versions on the server.</p>



<a name="153911047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Spielman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911047">(Sep 27 2017 at 18:56)</a>:</h4>
<p>We are offering multiple endpoints by version rather than doing anything like headers.</p>



<a name="153911113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911113">(Sep 27 2017 at 22:56)</a>:</h4>
<p>The AcceptHeader approach isn't standard and isn't likely to be recognized by most servers</p>



<a name="153911181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911181">(Sep 28 2017 at 07:35)</a>:</h4>
<p><span class="user-mention" data-user-id="193229">@Kevin Olbrich</span> <span class="user-mention" data-user-id="191921">@Matthew Spielman</span>  - that's interesting you each represent one of the options I mentioned - I'd be interested in why you have chosen one over the other...</p>



<a name="153911225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911225">(Sep 28 2017 at 12:56)</a>:</h4>
<p>The mime-type one is automatic since we have changed mime-type between DSTU2 and STU3...</p>



<a name="153911227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911227">(Sep 28 2017 at 12:56)</a>:</h4>
<p>Neither of these address my concern about mixtures. specifically that at R4 we will have mixtures from that point forward.</p>



<a name="153911246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911246">(Sep 28 2017 at 14:41)</a>:</h4>
<p>Not sure what you mean by "mixtures" John.  In a given instance, all resources must be from a single version.  If you're sending an R5 instance, all content will be from R5.  It's just that the normative content will also be compatible with R4.</p>



<a name="153911253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911253">(Sep 28 2017 at 14:58)</a>:</h4>
<p>Okay, so your perspective is that once a Resource goes normative it is not "R4", it is "Normative". Thus all Normative are infinitely compatible. Somehow I knew that, and agree with it.. but it did get lost in the versioning discussion. Especially since we are projecting "R4" as something that 'contains normative' content... thus there is marketing that seems to indicate normative resources do have a "Revision" number...</p>



<a name="153911254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911254">(Sep 28 2017 at 15:00)</a>:</h4>
<p>A normative resource in R5 could even have an extra data element or two than it had in R4.  It's just that the backward compatibility rules would allow you to ignore those elements if you're processing them as R4 instances.</p>



<a name="153911255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911255">(Sep 28 2017 at 15:03)</a>:</h4>
<p>Wouldn't having only some resources normative mean the FHIR API endpoint as a whole is not normative?  (in that it's important for the client to know the server's FHIR API version)</p>



<a name="153911256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911256">(Sep 28 2017 at 15:14)</a>:</h4>
<p>Would CapabilityStatement.resource be a reasonable place to indicate something about the normative vs. non-normative status of a resource implementation?</p>



<a name="153911283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911283">(Sep 28 2017 at 18:02)</a>:</h4>
<p>Some notes here: <a href="https://www.hl7.org/fhir/versions.html" target="_blank" title="https://www.hl7.org/fhir/versions.html">https://www.hl7.org/fhir/versions.html</a></p>



<a name="153911373"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911373" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911373">(Sep 28 2017 at 19:06)</a>:</h4>
<p>CapabilityStatement lets you indicate the version of FHIR you support - which in turn tells you which resources are Normative and should have the normative compatibility rules applied.</p>



<a name="153911382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Seib <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911382">(Sep 28 2017 at 19:11)</a>:</h4>
<p>I think that it would make sense to indicate this in the CapabilityStatement.resource - curious if there are any who would disagree.</p>



<a name="153911397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Olbrich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911397">(Sep 28 2017 at 20:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> We took the accept header approach because we need to be able to integrate with multiple partners with dissimilar FHIR versions and maintaining a separate url endpoint (and possibly servers) struck us as a maintenance nightmare.  We also liked the accept header approach because it makes more semantic sense to us for the URL of the resource to define where to find the information and the details of the serialization format and fhir version are about how to transmit that data.  Internallly we handle all our objects as domain models and serialize/deserialize them to/from the requested FHIR version as necessary, and we have built some code generation tools that can abstract away a lot of the implementation details.   This article is an interesting read on the subject... <a href="https://www.troyhunt.com/your-api-versioning-is-wrong-which-is/" target="_blank" title="https://www.troyhunt.com/your-api-versioning-is-wrong-which-is/">https://www.troyhunt.com/your-api-versioning-is-wrong-which-is/</a>.  Another benefit of this approach is that a client can upgrade their version at any time and so long as they request a FHIR version our server supports they can just use the existing url they may have stored and they can expect to get the resource back without having to munge their data.</p>



<a name="153911398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911398">(Sep 28 2017 at 20:08)</a>:</h4>
<p>For those interested:  <a href="https://www.linkedin.com/pulse/fhir-nuts-bolts-versioning-chris-grenz/" target="_blank" title="https://www.linkedin.com/pulse/fhir-nuts-bolts-versioning-chris-grenz/">https://www.linkedin.com/pulse/fhir-nuts-bolts-versioning-chris-grenz/</a></p>



<a name="153911399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911399">(Sep 28 2017 at 20:26)</a>:</h4>
<p>I'm also very interested in the topic of versioning the API for backwards compatibility within a single FHIR version.    </p>
<p>Maybe the terminology is:</p>
<ul>
<li>fhir-spec-version (e.g. 1.0.2)</li>
<li>fhir-patch-version (i.e. what set of patches you have for Epic's implementation of 1.0.2)</li>
<li>fhir-resource-version (the vread/vid in the RESTful API.  I just list list this for completeness - this is well understood I think)</li>
</ul>
<p>My specific concern how to not break all of the connected clients we have when we roll out a bug fix (for example, when we fix a bug in our implementation of FHIR 1.0.2).  I had also thought about using an HTTP header so the client could tell us what fhir-patch-version they want (i.e. what set of bug fixes they want us to apply when we render the resource we send back to them).</p>
<p>I'm sure Epic is the only FHIR server implementation that will have any bugs though, so maybe it's not applicable to the general community :).</p>
<p>Our problem is that operationally, if our server has a bug, often the clients that connect to us will implement a workaround.  If that client is connecting to our FHIR server at two different sites, they would have that workaround applied to both sites.  When we roll out a bug fix, one site may get it before the other side, so the client would need to remove the workaround for just the one site, but not the other.  This seems ok for 2 sites, but once we are at 300+ sites it won't be realistic for clients to migrate away from the workaround one site at a time.</p>
<p>Add to this that a client may be connecting to Cerner and Epic servers, having a common way to specify the patch-level they want would be cool.</p>



<a name="153911405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Olbrich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911405">(Sep 28 2017 at 20:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191764">@Cooper Thompson</span> couldn't the CapabilityStatement.software.version be used to determine if a workaround should be used with a specific server?</p>



<a name="153911414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Teirney <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911414">(Sep 28 2017 at 21:04)</a>:</h4>
<p>We're using the FHIR version within the server root path, e.g. <a href="https://fhir.example.org/fhir/0.5/Patient" target="_blank" title="https://fhir.example.org/fhir/0.5/Patient">https://fhir.example.org/fhir/0.5/Patient</a> or <a href="https://fhir.example.org/fhir/1.0/Patient" target="_blank" title="https://fhir.example.org/fhir/1.0/Patient">https://fhir.example.org/fhir/1.0/Patient</a>. Not all our resources support both versions so our clients are either using the 0.5 or 1.0 collection of resources (eventually 2.0). Conveniently this means it's straightforward (well sort of) to get the Conformance statement for the supported resources for each version.</p>
<p>Discretely versioning each resource is surely tricky because there are references returned to other resource locations in many parts of the data model, which are supposed to be relative to the server root of the FHIR server.</p>
<p>We haven't had too many problems with breaking backwards compatibility since so much of FHIR is optional anyway and extensions use "name/value" semantics. So, clients need to know how to deal with content that isn't there. Most of the issues we've had so far with changes is making sure that clients understand the quirks of standard FHIR responses, e.g. OperationOutcome resources can be mixed in with the expected resource type requested (so you have to check the resource type before trying to parse it), or that the Bundle won't have an empty array it will just not be there if the total is 0.</p>
<p>Having said all this, we use Accept header versioning for all our other non-FHIR APIs.</p>



<a name="153911420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911420">(Sep 28 2017 at 22:01)</a>:</h4>
<blockquote>
<p>CapabilityStatement lets you indicate the version of FHIR you support - which in turn tells you which resources are Normative and should have the normative compatibility rules applied.</p>
</blockquote>
<p>It's encouraging to understand that CapabilityStatement.fhirVersion will enable safe client/server interactions using normative resources.</p>
<p>Presumably the FHIR implementation offered by any stable/production FHIR endpoint (base url) should never change in a way that breaks backward compatibility, because doing that could be dangerous, and would be very unfriendly to existing clients.</p>



<a name="153911433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911433">(Sep 29 2017 at 02:28)</a>:</h4>
<p>Yeah, versioning definitely needs to be handled at the API level, not the resource level.  <span class="user-mention" data-user-id="194138">@Aaron Seib</span> Are you arguing for including the normative status in the CapabilityStatement?  That wouldn't make a whole lot of sense because the CapabilityStatements don't get to decide whether something is normative or not - that's HL7's call.  All the CapabilityStatement can do is declare what version of FHIR overall is supported by that endpoint.</p>



<a name="153911475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911475">(Sep 29 2017 at 13:20)</a>:</h4>
<p>I disagree that versioning "definitely needs to be handled at the API level, not the resource level."  The API must be versioned at the API level, but a stream of resources could be a mix of versions.  In many systems, the stream <em>will</em> be a mix.  Any <em>one</em> resource must be a single version (although I could envision a Bundle with a mix in some limited use cases).</p>



<a name="153911476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911476">(Sep 29 2017 at 13:22)</a>:</h4>
<p>Systems (e.g. integration engines) that include mappings between versions could be perfectly happy with a mix of post-normative versions.</p>



<a name="153911484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911484">(Sep 29 2017 at 15:12)</a>:</h4>
<p>Each instance must be a single version - and the references in those instances need to resolve to the same version if they're resolvable.  If you do funky things with headers, you can send different types of instances to the same URL, but you're essentially establishing distinct "virtual" endpoints via your headers.</p>



<a name="153911493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911493">(Sep 29 2017 at 15:59)</a>:</h4>
<p>Agree with the caveat that I think it would be OK for an R5 Observation (normative) to reference an R4 Patient (normative).  If we distinguish between normative versions in these situations, interop is very much hindered.</p>



<a name="153911516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911516">(Sep 29 2017 at 19:01)</a>:</h4>
<p>In an instance, an R5 Observation would need to reference an R5-compliant patient.  It's just easy to do that if patient is normative.</p>



<a name="153911524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonathan Shultlis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911524">(Sep 29 2017 at 23:43)</a>:</h4>
<p>We have a server that has been in a pilot for over a year, and need to carry forward AuditEvent and other data across FHIR versions. We cannot (must not) migrate the old records. We can easily write code that can deal with multiple FHIR versions, but to do that we need an efficient way to determine what version a resource is. We're currently using a meta.tag for that, that gets parsed out and stored in the AuditEvent table for easy access to choose what FHIR version parser to use.</p>



<a name="153911808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911808">(Oct 02 2017 at 15:24)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> We took the accept header approach  (...)   This article is an interesting read on the subject... <a href="https://www.troyhunt.com/your-api-versioning-is-wrong-which-is/" target="_blank" title="https://www.troyhunt.com/your-api-versioning-is-wrong-which-is/">https://www.troyhunt.com/your-api-versioning-is-wrong-which-is/</a>. </p>
</blockquote>
<p>Thanks <span class="user-mention" data-user-id="193229">@Kevin Olbrich</span>, interesting read....</p>



<a name="153911809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911809">(Oct 02 2017 at 15:31)</a>:</h4>
<p>"Support all three wrong ways" ;-)    Makes me think of our current Accept/_format couple...</p>



<a name="153911959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153911959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153911959">(Oct 03 2017 at 02:28)</a>:</h4>
<p>so we talked about this in San Deigo, and agreed that in new Orleans we'll do a connctathon stream around using application/fhir.[version] to evaluate how that goes. In the meantime, anyone can version their APIs by putting the version in the URL itself - that will work whatever. But it does confuse identity and reference. </p>
<p>As for merging version in a stream (or a bundle!) ... it's sort of logical, but there's some unresolvable pitfalls around moving content between resources between versions, etc. So I think that for the next version, and in regard to previous versions, we'll just put our hands over our ears and pretend we don't have to think about that. But that won't fly in the R4/R5 land</p>



<a name="153913397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153913397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153913397">(Oct 10 2017 at 22:25)</a>:</h4>
<blockquote>
<p>Is there a standard way to version FHIR REST interfaces?  (e.g. <a href="https://host/{FHIR-VERSION}/{API-VERSION}/Patient/1" target="_blank" title="https://host/{FHIR-VERSION}/{API-VERSION}/Patient/1">https://host/{FHIR-VERSION}/{API-VERSION}/Patient/1</a> )</p>
</blockquote>
<p>The Touchstone project recommendation is to use the <code>fhirVersion</code> in the URL path base. <br>
 We've been doing the following in our Node apps:</p>
<div class="codehilite"><pre><span></span><span class="nx">JsonRoutes</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;put&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nx">fhirVersion</span> <span class="o">+</span> <span class="s2">&quot;/Patient/:id&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>


<p>Where <code>fhirVersion</code> is one of the following versions:<br>
<a href="https://www.hl7.org/fhir/directory.html" target="_blank" title="https://www.hl7.org/fhir/directory.html">https://www.hl7.org/fhir/directory.html</a></p>
<p>We've been getting quite successful interoperability with the Touchstone conformance tests doing so.</p>
<p>ps.  The 'versionless' ideal that people have seems to suggest a slight misunderstanding of the DICOM standard (which is not versionless, contrary to popular talking points).</p>



<a name="153914810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153914810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adrian Lanzafame <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153914810">(Oct 19 2017 at 07:20)</a>:</h4>
<p>if the version isn't specified in the URL, how do I figure out what version of an external Reference I am meant to request from the external server? I understand that this confuses identify and reference but how would I go about separating those concepts in the scenario?</p>



<a name="153914848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153914848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153914848">(Oct 19 2017 at 13:30)</a>:</h4>
<p>The CapabilityStatement for the server endpoint will declare what version it supports</p>



<a name="153915255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153915255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153915255">(Oct 22 2017 at 22:51)</a>:</h4>
<p>I am getting around to specifying the X-version API track for the new Orleans connectathon.</p>



<a name="153915256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153915256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153915256">(Oct 22 2017 at 22:51)</a>:</h4>
<p>It seems to me that given where we are, there needs to be a single simple call that a client can make of a server: "what versions do you support"</p>



<a name="153915257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153915257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153915257">(Oct 22 2017 at 22:52)</a>:</h4>
<p>retrieving a full conformance statement has proven slow in practice, and then we renamed it - both of those were annoying but manageable. But if the first question you have for a server is now 'what versions can you be?' then we need some new API.</p>



<a name="153915266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153915266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153915266">(Oct 23 2017 at 02:14)</a>:</h4>
<p>Connectation Proposal: <a href="http://wiki.hl7.org/index.php?title=201801_Versioned_API" target="_blank" title="http://wiki.hl7.org/index.php?title=201801_Versioned_API">http://wiki.hl7.org/index.php?title=201801_Versioned_API</a></p>
<p>comments welcome - I'm not sure how far to push scenario #4. In a few days my server will start supporting scenario#1</p>



<a name="153915267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153915267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153915267">(Oct 23 2017 at 02:14)</a>:</h4>
<p>with regard to the connectathon details:</p>



<a name="153915268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153915268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153915268">(Oct 23 2017 at 02:15)</a>:</h4>
<p>in San Diego we (ITS and FHIR-I) agreed that we would use application/fhir.r3+xml|json to differentiate between FHIR versions on a version-independent interface</p>



<a name="153915269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153915269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153915269">(Oct 23 2017 at 02:16)</a>:</h4>
<p>but when I presented this to the Australian connectathon last week, there was a strong preference for a parameter: application/fhir+xml|json; fhir-version=r3</p>



<a name="153915270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153915270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153915270">(Oct 23 2017 at 02:17)</a>:</h4>
<p>then, when I implemented, I discovered that there was a variety of mime types across my implementation that needed the same treatment (e.g., at a minimum, for turtle and nd-json). And the only way to do it consistently was with a mime type parameter</p>



<a name="153915271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153915271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153915271">(Oct 23 2017 at 02:17)</a>:</h4>
<p>hence I have proposed that instead</p>



<a name="153915292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153915292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153915292">(Oct 23 2017 at 06:49)</a>:</h4>
<p>I see at mix of #2 and #3 from <a href="https://www.troyhunt.com/your-api-versioning-is-wrong-which-is/" target="_blank" title="https://www.troyhunt.com/your-api-versioning-is-wrong-which-is/">https://www.troyhunt.com/your-api-versioning-is-wrong-which-is/</a> #2 in the proposal.</p>



<a name="153915293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153915293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153915293">(Oct 23 2017 at 06:49)</a>:</h4>
<p>yes. that's right. a mix</p>



<a name="153916787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153916787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153916787">(Oct 30 2017 at 16:29)</a>:</h4>
<p>I'm just wondering whether even calling $version makes too much assumptions, by using FHIR to ask something about FHIR.  Would OPTIONS work as well (without breaking CORS this time)</p>



<a name="153916807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153916807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153916807">(Oct 30 2017 at 19:24)</a>:</h4>
<p>how would that work?</p>



<a name="153916832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153916832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153916832">(Oct 30 2017 at 20:25)</a>:</h4>
<p>Thought about returning an OPTIONS with an Accept header including the accepted formats  + versions</p>



<a name="153916833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153916833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153916833">(Oct 30 2017 at 20:27)</a>:</h4>
<p>I can't find anyone else using it like this?</p>



<a name="153916834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153916834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153916834">(Oct 30 2017 at 20:29)</a>:</h4>
<p>Indeed. To quote a random Google search I did about this: "As RESTful Web Services puts it, “OPTIONS is a promising idea that nobody uses.”"</p>



<a name="153916835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153916835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153916835">(Oct 30 2017 at 20:29)</a>:</h4>
<p>except CORS.... which makes it difficult for anyone other use, in my view</p>



<a name="153916866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20API%20versioning/near/153916866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20API.20versioning.html#153916866">(Oct 31 2017 at 01:09)</a>:</h4>
<p>the simplified json representation was intended to jump us around the versioning issues</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
