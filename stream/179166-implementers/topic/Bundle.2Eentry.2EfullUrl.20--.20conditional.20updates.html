---
layout: page
title: "FHIR Chat  · Bundle.entry.fullUrl -- conditional updates · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html">Bundle.entry.fullUrl -- conditional updates</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="191643314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/191643314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ivan Dubrov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#191643314">(Mar 24 2020 at 17:13)</a>:</h4>
<p>Should FHIR server "resolve" bundle references for conditional updates as well?<br>
For example, in the following bundle:</p>
<div class="codehilite"><pre><span></span>{
    &quot;resourceType&quot;: &quot;Bundle&quot;,
    &quot;type&quot;: &quot;transaction&quot;,
    &quot;entry&quot;: [{
        &quot;fullUrl&quot;: &quot;urn:uuid:ac7ed09f-3711-4884-a0ff-13ed81ea21d0&quot;,
        &quot;request&quot;: {
            &quot;method&quot;: &quot;PUT&quot;,
            &quot;url&quot;: &quot;Patient?identifier=patient-xyz&quot;
        }
        &quot;resource&quot;: ...
    },
    {
        &quot;request&quot;: {
            &quot;method&quot;: &quot;PUT&quot;,
            &quot;url&quot;: &quot;RelatedPerson?patient=urn:uuid:ac7ed09f-3711-4884-a0ff-13ed81ea21d0&quot;
        }
        &quot;resource&quot;: ...
    }]
}
</pre></div>


<p>Is it reasonable to expect that <code>patient=</code> reference in the query is also replaced with real FHIR resource identity?</p>



<a name="191646272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/191646272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#191646272">(Mar 24 2020 at 17:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="191648626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/191648626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#191648626">(Mar 24 2020 at 17:50)</a>:</h4>
<p>That sounds technically problematic, it could require an unbounded number of passes to finish resolving all of the references in a bundle.</p>



<a name="191650206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/191650206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ivan Dubrov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#191650206">(Mar 24 2020 at 18:01)</a>:</h4>
<p>But that's not any different from using these references as references inside resources? I can have conditional PUT, then second entry having a reference to the first one and also doing a conditional PUT, then third entry having a reference to the second one, etc.</p>



<a name="191650618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/191650618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#191650618">(Mar 24 2020 at 18:04)</a>:</h4>
<p>The way I think of it is that you can do one pass to figure out what resource identities exist in the bundle (including resolving conditional create/updates) and then a second pass to rewrite references using that information.</p>



<a name="191651669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/191651669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ivan Dubrov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#191651669">(Mar 24 2020 at 18:13)</a>:</h4>
<p>Hmm, I see what you mean.</p>
<p>I guess, this is where our use/implementation of transactions is non-conformant with the spec: we allow dependencies between entries (for example, through <a href="https://www.hl7.org/fhir/references.html#logical" target="_blank" title="https://www.hl7.org/fhir/references.html#logical">logical references</a>) where we have to process resource fully for identifiers to resolve for the following entry. Extended operations would be another example where we have to process an operation before entries that depend on its result.</p>



<a name="191653578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/191653578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#191653578">(Mar 24 2020 at 18:28)</a>:</h4>
<p>I think logical references could be done with only one pass though? As part of figuring out what resource identities exist in the bundle, the identifiers could be extracted. It's a bit more cumbersome because there could be other resources already on the server with those identifiers.</p>



<a name="192168384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/192168384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#192168384">(Mar 29 2020 at 10:57)</a>:</h4>
<p>that makes my head hurt. My server certainly doesn't</p>



<a name="192907268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/192907268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chidamber Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#192907268">(Apr 04 2020 at 13:20)</a>:</h4>
<p>Hi <br>
I have a question regarding conditional update.  The section here <a href="http://build.fhir.org/http.html#cond-update" title="http://build.fhir.org/http.html#cond-update">http://build.fhir.org/http.html#cond-update</a><br>
The 4th bullet point says, the server returns a 400 Bad Request if a resource match is found but resource id doesn't match. <br>
While, the last statement of the same section mentions that "If an id is provided, the server SHALL ignore it".  </p>
<p>Any clarifications ?</p>



<a name="192908495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/192908495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#192908495">(Apr 04 2020 at 13:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191315">@Josh Mandel</span></p>



<a name="192910694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/192910694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#192910694">(Apr 04 2020 at 14:40)</a>:</h4>
<p>Given the amount of detail we provide in the paragraphs above about exactly to do in circumstance when there is an ID or not an ID, and when the ID matches or does not match... I have to conclude that the sentence at the end is a mistake in our specification and should be deleted. At least this is trial use material :-)</p>



<a name="192910705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/192910705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#192910705">(Apr 04 2020 at 14:41)</a>:</h4>
<p>I will add an issue to our tracker</p>



<a name="192910913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/192910913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#192910913">(Apr 04 2020 at 14:45)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-26688" title="http://jira.hl7.org/browse/FHIR-26688">FHIR#26688</a></p>



<a name="218042295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle.entry.fullUrl%20--%20conditional%20updates/near/218042295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Moorhouse <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.2Eentry.2EfullUrl.20--.20conditional.20updates.html#218042295">(Nov 26 2020 at 22:22)</a>:</h4>
<p>Thanks Josh, we just stumbled across this one too. :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
