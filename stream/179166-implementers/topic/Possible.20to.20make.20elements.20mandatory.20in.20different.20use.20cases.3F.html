---
layout: page
title: "FHIR Chat  · Possible to make elements mandatory in different use cases? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Possible.20to.20make.20elements.20mandatory.20in.20different.20use.20cases.3F.html">Possible to make elements mandatory in different use cases?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="202085825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Possible%20to%20make%20elements%20mandatory%20in%20different%20use%20cases%3F/near/202085825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rebecka Hansson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Possible.20to.20make.20elements.20mandatory.20in.20different.20use.20cases.3F.html#202085825">(Jun 26 2020 at 12:56)</a>:</h4>
<p>Hi!<br>
I have a question regarding if it is possible to set use case based rules in profiles. I want to use the same profile but for different use cases and want a certain element or attribute to be mandatory/optional.<br>
Here is one example:<br>
Profile on the encounter resorce: First time when posting the encounter we need the start time on the period.start attribute and we need status=in-progress. When updating the encounter with status=finished we want to require an end time. Is it possible to somehow connect the cardinality on the period.end attribute to be 0..1 when status=in-progress and 1..1 when status=finished?<br>
Do anyone have a suggestion on how to solve this? Maybe by applying implicitRules?</p>



<a name="202089534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Possible%20to%20make%20elements%20mandatory%20in%20different%20use%20cases%3F/near/202089534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Possible.20to.20make.20elements.20mandatory.20in.20different.20use.20cases.3F.html#202089534">(Jun 26 2020 at 13:30)</a>:</h4>
<p>Seems like you can add an invariant in your profile</p>



<a name="202095015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Possible%20to%20make%20elements%20mandatory%20in%20different%20use%20cases%3F/near/202095015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Possible.20to.20make.20elements.20mandatory.20in.20different.20use.20cases.3F.html#202095015">(Jun 26 2020 at 14:09)</a>:</h4>
<p>Invariant can only make use of data within the instance - it can't make use of environmental context (e.g. whether something is sent as a POST or PUT, or what system a request is coming from).  You can express such rules in text in a profile, but there's no way to enforce them computably with a single profile - you'd need multiples.  And even then, you'd need extensions in your CapabilityStatement to allow declaring distinct profiles for different usage contexts</p>



<a name="202096229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Possible%20to%20make%20elements%20mandatory%20in%20different%20use%20cases%3F/near/202096229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Possible.20to.20make.20elements.20mandatory.20in.20different.20use.20cases.3F.html#202096229">(Jun 26 2020 at 14:18)</a>:</h4>
<blockquote>
<p>period.end attribute to be 0..1 when status=in-progress and 1..1 when status=finished?</p>
</blockquote>
<p>this could be done inside the instance, if that is all it is required, right?</p>



<a name="202096301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Possible%20to%20make%20elements%20mandatory%20in%20different%20use%20cases%3F/near/202096301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Possible.20to.20make.20elements.20mandatory.20in.20different.20use.20cases.3F.html#202096301">(Jun 26 2020 at 14:19)</a>:</h4>
<p>With that in mind, this sounds like 2 different types of transactions and thus 2 profiles.</p>



<a name="202097230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Possible%20to%20make%20elements%20mandatory%20in%20different%20use%20cases%3F/near/202097230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Possible.20to.20make.20elements.20mandatory.20in.20different.20use.20cases.3F.html#202097230">(Jun 26 2020 at 14:26)</a>:</h4>
<p>Yes, but what needs to be true on create vs. update couldn't be</p>



<a name="202343173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Possible%20to%20make%20elements%20mandatory%20in%20different%20use%20cases%3F/near/202343173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rebecka Hansson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Possible.20to.20make.20elements.20mandatory.20in.20different.20use.20cases.3F.html#202343173">(Jun 29 2020 at 17:30)</a>:</h4>
<p>Thank you!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
