---
layout: page
title: "FHIR Chat  · Saving multiple Location positions · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html">Saving multiple Location positions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153980339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153980339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tristan Wilson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153980339">(Aug 01 2018 at 17:13)</a>:</h4>
<p>Hey everyone! Have a quick question regarding HealthcareService locations and coverageAreas in FHIR.</p>
<p>HealthcareService.location.reference &gt; Location.position saves latitude, longitude, and altitude as decimal values.</p>
<p>HealthcareService.coverageArea.reference &gt; Location.position only allows for one position to be stored; In a case where we are storing multiple positions (i.e Municipal boundaries) and have many positions needing to be stored in a specific order, what would be the proper way to store a coverage area in this case?</p>
<p><span class="user-mention" data-user-id="193959">@Tim Berezny</span></p>



<a name="153980351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153980351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Berezny <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153980351">(Aug 01 2018 at 19:12)</a>:</h4>
<p>Is creating an extension the only way put in a service's coverage area as a shapefile (like, .kml, which is a series of points that make up a shape such as a municipal boundary?)</p>



<a name="153980352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153980352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153980352">(Aug 01 2018 at 19:21)</a>:</h4>
<p>At the moment, yes, however look at <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13391" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13391">GF#13391</a>, and <a href="#narrow/stream/4-implementers/subject/Input.20on.20representing.20geoshape.20data.20in.20FHIR" title="#narrow/stream/4-implementers/subject/Input.20on.20representing.20geoshape.20data.20in.20FHIR">https://chat.fhir.org/#narrow/stream/4-implementers/subject/Input.20on.20representing.20geoshape.20data.20in.20FHIR</a>. Please provide feedback on GForge tracker item if you have an opinion.</p>



<a name="153980543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153980543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153980543">(Aug 01 2018 at 22:14)</a>:</h4>
<p>This is one that I'm hoping we get into R4 as a standard extension, so yes, please put your thoughts in that tracker! Time is getting short for our change.<br>
The format of the boundary definition is the only thing to be decided right now.</p>



<a name="153980544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153980544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153980544">(Aug 01 2018 at 22:15)</a>:</h4>
<p>(and yes, some guidance notes in the Location resource highlighting the extension, and how it relates to the address/position properties)</p>



<a name="153981024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153981024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Berezny <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153981024">(Aug 02 2018 at 18:49)</a>:</h4>
<p>The GeoJSON looks good to me. Would love to have this included in R4...</p>



<a name="153981162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153981162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153981162">(Aug 02 2018 at 20:16)</a>:</h4>
<p><span class="user-mention" data-user-id="193959">@Tim Berezny</span> If a resource is retrieved in XML, do you feel GeoJSON for the location is still appropriate?</p>



<a name="153982074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Berezny <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982074">(Aug 04 2018 at 12:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> Well that's an interesting conundrum... Is there such as a shapefile format that has a parallel in both XML and JSON?</p>
<p>We have very advanced use of shapefiles as it relates to HealthcareServices. We only use JSON, so I don't have much insight into XML specifically. However, I can say that in the converse scenario if the format chosen was KML (which is XML) and that KML was returned in my JSON-oriented world, I would be fine with getting a KML file with no complaints. </p>
<p>In other words ... yes.</p>



<a name="153982089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982089">(Aug 04 2018 at 14:55)</a>:</h4>
<p>I think the point here is to leverage external and commonly used standards. If the Geo standards are focused on JSON, then yes it is appropriate that JSON alone is used even when moving it around XML FHIR... SImilar is done in the Signature datatype, as we are leveraging external signature standards for the signature evidence.  Note that the Signature datatype does expose in FHIR encoding some signature elements that are considered important to FHIR world. Note also that Signature datatype leverages mime-type to distance us from picking an external standard, and supports multiple... I am bias, as I own the Signature Datatype.</p>



<a name="153982096"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982096" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982096">(Aug 04 2018 at 15:17)</a>:</h4>
<p>The fun bit is whether it's sent as XML or JSON, it'll be base64 encoded in both transports.</p>



<a name="153982104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Berezny <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982104">(Aug 04 2018 at 16:25)</a>:</h4>
<p>I think a main criteria would be that’s it’s easily renderable in web mapping programs like google maps without conversions. It looks like geoJSON meets this criteria. </p>
<p>If it’s being sent as a base64 anyway, whether it’s JSON or XML becomes pretty much irrelevant. It’s the kind of data you’ll be running my through some kind of library anyway.</p>



<a name="153982968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982968">(Aug 07 2018 at 03:32)</a>:</h4>
<p>It'll be string encoded json (or XML), not base64endocded..<br>
I've had a wonder through a bit of info online, and most things support both these formats, and there are converters for both available to get into and out of each other, and other platforms.<br>
So all things being equal, I suggest we go with GeoJSON as noted in the tracker item.<br>
Last chance before this is done for R4! (plan to include in last PA R4 block vote)</p>



<a name="153982969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982969">(Aug 07 2018 at 03:34)</a>:</h4>
<p><span class="user-mention" data-user-id="193959">@Tim Berezny</span> , <span class="user-mention" data-user-id="191380">@Elliot Silver</span> , <span class="user-mention" data-user-id="191604">@Carl Leitner</span> , <span class="user-mention" data-user-id="191404">@John Moehrke</span>, <span class="user-mention" data-user-id="196530">@Tristan Wilson</span></p>



<a name="153982970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982970">(Aug 07 2018 at 03:39)</a>:</h4>
<p>Note that I've drafted the resolution into the tracker item, so you can see exactly what it is that we are proposing, so you can compare with any internal definitions you may have defined.<br>
<span class="user-mention" data-user-id="191678">@Abigail Watson</span> , <span class="user-mention" data-user-id="191764">@Cooper Thompson</span></p>



<a name="153982971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982971">(Aug 07 2018 at 03:42)</a>:</h4>
<p>What are “both these formats”? </p>
<p>I think that for clarity, if we have an always JSON string, it should be base64 encoded (potentially as a full Attachment). Saying it is an always-JSON string in a regular  convertible resource is going to lead to errors. </p>
<p>Hmmm, the Atrachment parallel brings up an interesting issue: how large will these strings be? Do we want the ability to reference an external GeoJSON string?</p>



<a name="153982973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982973">(Aug 07 2018 at 03:47)</a>:</h4>
<p>Sorry, the 2 main formats under consideration/suggestion were KML (google/XML) and GeoJson</p>



<a name="153982974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982974">(Aug 07 2018 at 03:48)</a>:</h4>
<p>I'll encode up some boundaries and check the sizes (it also depends on the level of accuracy/detail that is included in the shape)</p>



<a name="153982975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982975">(Aug 07 2018 at 04:00)</a>:</h4>
<p><a href="https://data.boston.gov/dataset/city-council-districts" target="_blank" title="https://data.boston.gov/dataset/city-council-districts">https://data.boston.gov/dataset/city-council-districts</a><br>
The total of boston's location data (not sure on its granularity)<br>
KML(XML) 205KB<br>
GeoJson   202KB<br>
Base64 encoded GeoJson 1.1MB</p>



<a name="153982976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982976">(Aug 07 2018 at 04:01)</a>:</h4>
<p>This is the 9 districts of Boston, so maybe divide the size by that as you'd likely only have 1 district per FHIR location resource, but I guess this gives you some idea as to the size.<br>
And also a feel as to the cost of the encoding</p>



<a name="153982977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982977">(Aug 07 2018 at 04:02)</a>:</h4>
<p>(and we'd need to chose which charset to encode/decode with UTF-8?</p>



<a name="153982978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982978">(Aug 07 2018 at 04:26)</a>:</h4>
<p>always UTF-8 unless there's a really coherent reason</p>



<a name="153982979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982979">(Aug 07 2018 at 04:26)</a>:</h4>
<p>+1 for GeoJson.  Clear favorite.</p>
<p>Won't bash KML, since it's tried and true.  Just not supported in browsers.  Good option for XML based systems.</p>
<p>Base64 approach is... misguided, in my opinion.  Would vote against.</p>
<p>Happy to provide code samples, application samples, FHIR based geomapping examples, etc.</p>



<a name="153982982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982982">(Aug 07 2018 at 04:38)</a>:</h4>
<p>To bring in GeoJson officially, we need to think about the supporting geospatial primatives.  Good news is they're already defined, similar to FHIR Datatypes.  But if we want FeatureCollection, we'll need Feature, which generally relies on MultiPolygon, Polygon, Line, and Point.</p>



<a name="153982983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982983">(Aug 07 2018 at 04:55)</a>:</h4>
<p>Would definitely love to see those example resources <span class="user-mention" data-user-id="191678">@Abigail Watson</span> !<br>
With your permission would like to include one/some updated to the formal name etc.</p>



<a name="153982985"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982985" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982985">(Aug 07 2018 at 04:56)</a>:</h4>
<p>If they aren't already publicly available, could you put them on one of the public servers, mine if you like</p>
<div class="codehilite"><pre><span></span>http://sqlonfhir-stu3.azurewebsites.net/fhir/Location
</pre></div>



<a name="153982988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982988">(Aug 07 2018 at 05:09)</a>:</h4>
<p>Mmmm....  not sure it's quite possible to upload the geojson to a /fhir/Location path.  Here's a .geojson file of 2014 Health Service Areas for the U.S. </p>
<p><a href="/user_uploads/10155/Ic-cJFFrGLJXKtoMqTY_SqEq/health_service_areas.geojson" target="_blank" title="health_service_areas.geojson">health_service_areas.geojson</a> </p>
<p>Be forewarned, it's 22MB... pretty typical for geojson maps, and certainly not the largest file we work with.   (The geomapping files are similar in size to DICOM images.)  </p>
<p>You can load this file up into Google Maps.  One can extract FHIR Organizations from this file; or do vice-versa and write FHIR Organizations into the <code>properties</code> field and and FHIR Locations into the <code>geometry</code> field.</p>



<a name="153982990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982990">(Aug 07 2018 at 05:16)</a>:</h4>
<p>I thought you already had some fhir location resources already up and going from your screenshots pasted into the tracker ;)</p>



<a name="153982991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982991">(Aug 07 2018 at 05:16)</a>:</h4>
<p>Oh, I have those too.</p>



<a name="153982992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982992">(Aug 07 2018 at 05:17)</a>:</h4>
<p>Um, are Chicago area hospitals okay?  That's the dataset we usually use.</p>



<a name="153982993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982993">(Aug 07 2018 at 05:18)</a>:</h4>
<p>Yup, as long as we aren't violating any copyright issues.</p>



<a name="153982994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982994">(Aug 07 2018 at 05:18)</a>:</h4>
<p>Or privacy issues :P</p>



<a name="153982996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982996">(Aug 07 2018 at 05:19)</a>:</h4>
<p>Locations of hospitals are usually in the public domain, so we'll probably be okay.</p>



<a name="153982997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982997">(Aug 07 2018 at 05:20)</a>:</h4>
<p>Ok, send the links on through and I'll check em over.</p>



<a name="153982998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153982998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153982998">(Aug 07 2018 at 05:22)</a>:</h4>
<p>Just put it on tomorrow's inbox.  Let's check in tomorrow afternoon.</p>



<a name="153983000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983000">(Aug 07 2018 at 05:24)</a>:</h4>
<p>Changes to the spec are getting closing soon, and we need to land this for voting before it can go into R4 which is closing soonish, would prefer not to miss the boat on this one if we can.<br>
But thanks so much for your contributions here!</p>



<a name="153983122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983122">(Aug 07 2018 at 14:05)</a>:</h4>
<p>I've pre-applied a version of the standard extension that we're discussing on the call today at 3pm eastern<br>
<a href="http://build.fhir.org/extension-location-boundary-geojson.html" target="_blank" title="http://build.fhir.org/extension-location-boundary-geojson.html">http://build.fhir.org/extension-location-boundary-geojson.html</a></p>



<a name="153983143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Berezny <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983143">(Aug 07 2018 at 14:34)</a>:</h4>
<p>GeoJSON vs. KML, i'll go with the flow. </p>
<p>The question by <span class="user-mention" data-user-id="191380">@Elliot Silver</span>  is worth poking at a bit: "Hmmm, the Atrachment parallel brings up an interesting issue: how large will these strings be? Do we want the ability to reference an external GeoJSON string". </p>
<p>In particular... being able to EXTERNALLY reference a GeoJSON string could be very quite helpful. So long as that's possible, the various sizes of potential GeoJSON strings becomes much less constraining.</p>
<p>Definitely don't want to "miss the boat" as <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> says on this one.</p>



<a name="153983145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983145">(Aug 07 2018 at 14:37)</a>:</h4>
<p>I don't know what resource type the external definition is.<br>
Interested to get some real examples of the GeoJSON to check the sizing.<br>
An area of boston as defined above looks like it was around 20kb. Remember that this is the boundary of the specific resource, not of a group of areas.</p>



<a name="153983152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Berezny <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983152">(Aug 07 2018 at 14:57)</a>:</h4>
<p>I think what i mean is, you could allow the GeoJSON to be inline in the resource, and also allow it to be listed as a URL to go grab it anywhere on the internet.  (similar to how we have "data" and "url" in the attachment datatype). </p>
<p>The size of shapefiles can vary wildly, especially when there are tight contours to shorelines. Our largest in 30k vertices. It's in PostGIS so the size won't be exactly the same but the structure is not too different from GeoJSON, and it clocks in at 2.5MB. That's the extreme end of the spectrum probably.</p>



<a name="153983223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983223">(Aug 07 2018 at 16:31)</a>:</h4>
<p><span class="user-mention" data-user-id="193959">@Tim Berezny</span> , <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> , yes, the data/url capability was what I was referring to. At 20K, I'd say that's about where it makes sense to have references to the data rather than inline it. We don't want to have every reader of the location resource have to read/skip that content regardless of whether they are interested in the mapping info or not.</p>



<a name="153983266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983266">(Aug 07 2018 at 18:15)</a>:</h4>
<blockquote>
<p>In particular... being able to EXTERNALLY reference a GeoJSON string could be very quite helpful. So long as that's possible, the various sizes of potential GeoJSON strings becomes much less constraining.</p>
</blockquote>
<p>Yes, this is how GeoJSON is designed to be used.  No need for a Base64 encoded attachment.  We use it with great success.  Can sometimes be a bit slow to load; but it's been very reliable.</p>



<a name="153983268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983268">(Aug 07 2018 at 18:17)</a>:</h4>
<blockquote>
<p>The size of shapefiles can vary wildly, especially when there are tight contours to shorelines. Our largest in 30k vertices. It's in PostGIS so the size won't be exactly the same but the structure is not too different from GeoJSON, and it clocks in at 2.5MB. That's the extreme end of the spectrum probably.</p>
</blockquote>
<p>Haven't gotten around to drawing nation wide maps yet, eh?  :)   We have lots of 20MB+ files; and some of them get up to be 100MB files.  Same general size as DICOM, roughly speaking.  But no problems as long as the internet connection is reasonably fast.  My $0.02 is this is very dependent upon one's development environment... monitors, available RAM, and network speed.  The more screen real-estate and RAM you have, the more comfort you'll be pushing around large geodata files.</p>



<a name="153983270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983270">(Aug 07 2018 at 18:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>  Some Chicago Area Hospitals coded up as Locations.  Pretty typical.  We use these with pathfinding and paratransit ambulance routing applications.  We haven't been using the PUT functionality all that much, so currently working on that functionality.  In the meantime, here's a (virtual) hand delivered Bundle.  </p>
<p><a href="/user_uploads/10155/WMq9cMn8GYmRT43YbHouuWiC/ChicagoAreaHospitals.Locations.fhir" target="_blank" title="ChicagoAreaHospitals.Locations.fhir">ChicagoAreaHospitals.Locations.fhir</a></p>



<a name="153983271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983271">(Aug 07 2018 at 18:22)</a>:</h4>
<p>That's our internal representation.  We extend the resources by adding a <code>location</code> field for a GeoJSON Point primitive, so we can use Mongo's 2-sphere geospatial index.  It duplicates the lat/lng data, which would be nice to have resolved.  But that would involve harmonizing the FHIR and GeoJSON specifications on the Point data primitive.</p>



<a name="153983286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983286">(Aug 07 2018 at 18:47)</a>:</h4>
<p>Heh.  Tried to send over the Bundle via Postman, and your server really didn't like it.  Unknown Bundle, missing Narrative.div, unknown Location.location field, empty Location.address[0], and System.Xml.XmlTextReaderImpl errors.  Mostly all to be expected.</p>



<a name="153983304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983304">(Aug 07 2018 at 19:03)</a>:</h4>
<p>Did you want to join the call which is just starting now to discuss?</p>



<a name="153983306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983306">(Aug 07 2018 at 19:04)</a>:</h4>
<p>A PA call?</p>



<a name="153983307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983307">(Aug 07 2018 at 19:05)</a>:</h4>
<p>yes<br>
<a href="https://global.gotomeeting.com/join/311685429" target="_blank" title="https://global.gotomeeting.com/join/311685429">https://global.gotomeeting.com/join/311685429</a></p>
<p>1-770-657-9270 Participant Code: 986210<br>
for non-US participants: <a href="https://www.intercallonline.com/listNumbersByCode.action?confCode=4603612751" target="_blank" title="https://www.intercallonline.com/listNumbersByCode.action?confCode=4603612751">https://www.intercallonline.com/listNumbersByCode.action?confCode=4603612751</a></p>



<a name="153983316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983316">(Aug 07 2018 at 19:16)</a>:</h4>
<p>So change my extension to be extension.valueAttachment with the same thing?</p>



<a name="153983317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983317">(Aug 07 2018 at 19:17)</a>:</h4>
<p>I think that would be simplest.</p>



<a name="153983318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983318">(Aug 07 2018 at 19:18)</a>:</h4>
<p>FYI:  application/vnd.geo+json is registered.</p>
<p>Correction -- looks like they've upgraded: application/geo+json</p>



<a name="153983327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983327">(Aug 07 2018 at 19:33)</a>:</h4>
<p>Joined on call.</p>



<a name="153983329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983329">(Aug 07 2018 at 20:05)</a>:</h4>
<p>Thanks all for your contributions on this one, the committee has approved the standard extension (attachment) for this functionality.<br>
This results in it being contained (base64 encoded in the data) or external (through the URL property)</p>



<a name="153983330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983330">(Aug 07 2018 at 20:07)</a>:</h4>
<p>Was that a balloting call?  PA?  What does PA stand for again?  I feel like I just participated in something official, and I don't know what!  :D</p>



<a name="153983331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983331">(Aug 07 2018 at 20:08)</a>:</h4>
<p>Yup, Patient Admin.</p>



<a name="153983371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983371">(Aug 07 2018 at 20:49)</a>:</h4>
<p>HL7 is highly addicted to acronyms (starting with our own name :&gt;)  A cheat-sheet to the work group abbreviations can be found at the bottom of the FHIR WGM agendas (e.g <a href="http://wiki.hl7.org/index.php?title=FHIR_Agenda_201805_WGM" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_Agenda_201805_WGM">http://wiki.hl7.org/index.php?title=FHIR_Agenda_201805_WGM</a>).  Much of the reconciliation of tracker items is handled on conference calls like that one.  Far more gets handled at conference calls than face-to-face at WGMs (though we typically have fewer people on calls than at face-to-face sessions)</p>



<a name="153983378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983378">(Aug 07 2018 at 21:01)</a>:</h4>
<p>For your viewing pleasure, the new standard extension (only took how long for us to get there?)<br>
<a href="http://build.fhir.org/extension-location-boundary-geojson.html" target="_blank" title="http://build.fhir.org/extension-location-boundary-geojson.html">http://build.fhir.org/extension-location-boundary-geojson.html</a></p>



<a name="153983468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983468">(Aug 08 2018 at 02:02)</a>:</h4>
<p>On a related note, I'm updating the definition of the Location near search parameter (<a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14216" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14216">GF#14216</a>) and wanted to give a preview of the new format for comment. (this is a "special" type search parameter and isn't able to use generic search processing logic)</p>
<div class="codehilite"><pre><span></span>GET [base]/Location?near=-83.694810|42.256500|11.20|km,active=true
</pre></div>


<p>near = {latitude}|{longitude}|{distance}[|{unit}) If distance is missing, then default is kms.<br>
The new format is done as a single parameter, and therefore can work with multiples, and also through chaining.<br>
<em>This also got me thinking about our new standard extension, should we also have a new search parameter for that to cover the point in area space - tracker and thoughts for the future on this one</em></p>



<a name="153983469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983469">(Aug 08 2018 at 02:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> , <span class="user-mention" data-user-id="191678">@Abigail Watson</span> , <span class="user-mention" data-user-id="191764">@Cooper Thompson</span> , <span class="user-mention" data-user-id="191604">@Carl Leitner</span>  Thoughts on this?</p>



<a name="153983470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983470">(Aug 08 2018 at 02:05)</a>:</h4>
<p>p.s. the near-distance search parameter will also dissappear as is no longer required, its merged into this single parameter</p>



<a name="153983471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983471">(Aug 08 2018 at 02:08)</a>:</h4>
<p>If units is missing, then it defaults to km?</p>



<a name="153983472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983472">(Aug 08 2018 at 02:09)</a>:</h4>
<p>Distance is max distance from point?</p>



<a name="153983474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983474">(Aug 08 2018 at 02:29)</a>:</h4>
<p>Hmm, so we now have two definitions of the place of something - the lat/long, and the boundary. What does it mean when both are populated? Is one the front door, and the other the area it is responsible for?</p>
<p>When you search, are you looking for the nearest front door, or who is responsible for a particular place? You may be dealing with the case where the neighbouring jurisdiction office is closer than your jurisdiction’s office. </p>
<p>There may be multiple locations that all cover the same point. What does that mean for nearest?</p>
<p>(Aside - is “nearest” expected to be straight-line, travel distance, travel time, ...?)</p>



<a name="153983475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983475">(Aug 08 2018 at 02:30)</a>:</h4>
<p>y (within distance) - server could have its own decision as what nearest means</p>



<a name="153983476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983476">(Aug 08 2018 at 02:31)</a>:</h4>
<p>Multiple locations at same point, then they'll get returned in the search results. As you'd expect.</p>



<a name="153983477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983477">(Aug 08 2018 at 02:37)</a>:</h4>
<p>There is no expectation that the near relates to the boundary, I expect people will use near to locate a place, where they will use the boundary to perform a different search on that extension, maybe:</p>
<div class="codehilite"><pre><span></span>GET [base]/HealthcareService?coverageArea.contains=-83.694810|42.256500
</pre></div>


<p>This would check that the provided point is in the coverage area of the Healthcare Service</p>



<a name="153983479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983479">(Aug 08 2018 at 02:38)</a>:</h4>
<p>In the search results you may get a distance from the location to the point you specified, which would help you locate the appropriate location</p>



<a name="153983490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983490">(Aug 08 2018 at 03:15)</a>:</h4>
<p>Ok, so you are asking if we need a search specifically on the new extension? nearestBoundary (or insideBoundry) search?</p>
<p>I’m mixed on that. On the face of it, it might be useful, but it also seems like a smart server could use it in calculating the response to near. </p>
<p>What does strike me as useful, is the ability to specify modes or hints in the near search: straight-line, driving distance, walking time, jurisdiction not point,...</p>
<p>Do we need to be able to search against another boundary or just a point? Another boundary opens up several cans of worms. </p>
<p>I filed the original issue on behalf of IHE and <span class="user-mention" data-user-id="193299">@Luke Duncan</span>, and don’t deal with GIS issues myself. Although I find the topic interesting, I’ll step back and let other with experience answer further.</p>



<a name="153983493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983493">(Aug 08 2018 at 03:30)</a>:</h4>
<p><code>near</code> and <code>contain</code> roughly map onto the geospatial database operators, and are pretty good parameters to support, in the same way that GET/PUT/POST/DELETE roughly map onto CRUD.   They're a pragmatic choice.</p>
<p>The issue of 'near' in terms of travel time, distance, gas mileage costs, or other metrics are compound functions built on top of those geospatial primitives.  Scalars vs vectors.  So, if we have <code>near</code> and <code>contain</code>, we have the necessary information to do the geometry, and can build up most of the other details from them.  </p>
<p>All things considered, we get a lot of mileage from them, it's a bit more than I expected to see in the API, and they provide enough functionality to keep a lot of people busy for awhile.</p>
<p>I keep stressing the following point, and need to reiterate it again:  Before building out more search parameters, I think FHIR needs to have official support for geospatial primitives (Point, Line, Polygon, MultiPolygon).     <code>near</code> and <code>contain</code> are freebies that geospatial databases often optimize for and expose as special operators because they're so commonly used.  But more advanced functionality like paths, pathfinding, region intersections, etc need those primitives.</p>



<a name="153983494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983494">(Aug 08 2018 at 03:33)</a>:</h4>
<p>And I think those really should stay outside of the FHIR space and let the geospatial things do their bit.<br>
(I think that is agreeing with you Abigail?)</p>



<a name="153983495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983495">(Aug 08 2018 at 03:34)</a>:</h4>
<p>I think contains and near are actually quite different things.<br>
In some contexts the contains is the eligibility, if you're over the street, you don't get service.</p>



<a name="153983496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983496">(Aug 08 2018 at 03:35)</a>:</h4>
<p>Well, we can let the geospatial folks define and manage the geospatial primitives.  We can also forklift/piggyback on their work, and simply say that any GeoJSON primitive is also a FHIR datatype.  But that probably needs to be explicit.</p>



<a name="153983497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983497">(Aug 08 2018 at 03:36)</a>:</h4>
<p>Except that then doesn't help with the XML world. And extensions wouldn't apply to it.</p>



<a name="153983498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983498">(Aug 08 2018 at 03:36)</a>:</h4>
<p>So not feeling very fhir-y</p>



<a name="153983499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983499">(Aug 08 2018 at 03:36)</a>:</h4>
<p>And therein is the rub.</p>



<a name="153983501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983501">(Aug 08 2018 at 03:37)</a>:</h4>
<p>I kinda like where we got things to, enough to permit the overlap to occur, now we just need to see how we can make them work together before we get too excited <span class="emoji emoji-1f600" title="grinning">:grinning:</span></p>



<a name="153983502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983502">(Aug 08 2018 at 03:38)</a>:</h4>
<p>(Not proposing we put the contains operation in R4, but maybe consider at connectathons if people are keen enough)</p>



<a name="153983632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Berezny <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983632">(Aug 08 2018 at 13:17)</a>:</h4>
<p>I 1000% support a contains search parameter (searching for an address within a coverage area). In our application we focus on home and commuity care services, and contains is acutely relevant for finding homecare services. i.e., for home care services, it's irrelevant what a HealthcareService's office address distance from home is (near function), need to know where it deliver's home care to (contains function). </p>
<p>contains search is to coverageArea as near search is to point</p>



<a name="153983633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Berezny <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983633">(Aug 08 2018 at 13:19)</a>:</h4>
<p>In other words, it's GREAT that there is now a (proposed) method for storing shapefiles, but that really is only half of the equation. Most of the benefit from having a shape comes from being able to do a search (contains) within that shape.</p>



<a name="153983635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Berezny <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983635">(Aug 08 2018 at 13:22)</a>:</h4>
<p>I haven't done any work with extensions yet ... so this is probably my extension newbiness speaking, but should i expect to see something at the link referenced in the extension (which is blank now)? <a href="http://hl7.org/fhir/StructureDefinition/location-boundary-geojson" target="_blank" title="http://hl7.org/fhir/StructureDefinition/location-boundary-geojson">http://hl7.org/fhir/StructureDefinition/location-boundary-geojson</a></p>



<a name="153983816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983816">(Aug 08 2018 at 20:55)</a>:</h4>
<p>Once the R4 is officially published that URL should resolve, however the details of the extension are here<br>
<a href="http://build.fhir.org/extension-location-boundary-geojson.html" target="_blank" title="http://build.fhir.org/extension-location-boundary-geojson.html">http://build.fhir.org/extension-location-boundary-geojson.html</a></p>



<a name="153983826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983826">(Aug 08 2018 at 21:04)</a>:</h4>
<p>And yes, we can probably talk about the search operation at the connectathon, and get some agreement on that, and try it out</p>



<a name="153983886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983886">(Aug 08 2018 at 21:42)</a>:</h4>
<p>Sequoia (CareQuality and eHEX) have a Provider Directory with geolocation information in it. <span class="user-mention" data-user-id="191646">@Eric Heflin</span>    see this javascript page driven off of their FHIR API <a href="https://sequoiaproject.org/carequality/active-sites-search/" target="_blank" title="https://sequoiaproject.org/carequality/active-sites-search/">https://sequoiaproject.org/carequality/active-sites-search/</a></p>



<a name="153983895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983895">(Aug 08 2018 at 21:47)</a>:</h4>
<p>I suspect that one is just using the positions, rather than boundaries (which is the new part)<br>
But thanks for the link too!</p>



<a name="153983902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983902">(Aug 08 2018 at 21:51)</a>:</h4>
<p>I also assume that in that implementation the distance is in miles?</p>



<a name="153983903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153983903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153983903">(Aug 08 2018 at 21:52)</a>:</h4>
<p>(Must test that my server handles the Mi/Km conversion correctly, have tested Km/m but not the other)</p>



<a name="153989058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Saving%20multiple%20Location%20positions/near/153989058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Saving.20multiple.20Location.20positions.html#153989058">(Aug 19 2018 at 03:26)</a>:</h4>
<p>And those looking for an example of the new format!<br>
<a href="http://build.fhir.org/ig/HL7/VhDir/Location-wash-dc-metro.xml.html" target="_blank" title="http://build.fhir.org/ig/HL7/VhDir/Location-wash-dc-metro.xml.html">http://build.fhir.org/ig/HL7/VhDir/Location-wash-dc-metro.xml.html</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
