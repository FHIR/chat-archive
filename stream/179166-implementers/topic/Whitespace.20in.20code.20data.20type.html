---
layout: page
title: "FHIR Chat  · Whitespace in code data type · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html">Whitespace in code data type</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="189823800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Whitespace%20in%20code%20data%20type/near/189823800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html#189823800">(Mar 05 2020 at 18:49)</a>:</h4>
<p>Does anyone have any background about <em>why</em> we have this requirement in the definition of the <a href="https://www.hl7.org/fhir/datatypes.html#primitive" target="_blank" title="https://www.hl7.org/fhir/datatypes.html#primitive">code data type</a>: </p>
<div class="codehilite"><pre><span></span>Technically, a code is restricted to a string which has at least one character
and no leading or trailing whitespace, and where there is no whitespace
other than single spaces in the contents.
</pre></div>


<p>What is so bad about having multiple spaces in a code?  I mean I wouldn't personally create codes with double spaces, but are there real reasons we need to prohibit it?</p>



<a name="189824147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Whitespace%20in%20code%20data%20type/near/189824147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html#189824147">(Mar 05 2020 at 18:53)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-18441" target="_blank" title="http://jira.hl7.org/browse/FHIR-18441">J#18441</a> and <a href="http://jira.hl7.org/browse/FHIR-5573" target="_blank" title="http://jira.hl7.org/browse/FHIR-5573">J#5573</a> have some related notes, but nothing that really jumps out as causing a problem with codes with multiple spaces.</p>



<a name="189824165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Whitespace%20in%20code%20data%20type/near/189824165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html#189824165">(Mar 05 2020 at 18:53)</a>:</h4>
<p>Applying a digital signature will normalize the white space. Code comparisons/lookup are done using exact match. Things will break. <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="189824411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Whitespace%20in%20code%20data%20type/near/189824411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html#189824411">(Mar 05 2020 at 18:56)</a>:</h4>
<p>If you are doing code comparisons for a locally defined code set with multiple spaces, then you would get exact matches.  It seems really odd that a digital signature normalization would control what content can be expressed.</p>



<a name="189825389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Whitespace%20in%20code%20data%20type/near/189825389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html#189825389">(Mar 05 2020 at 19:07)</a>:</h4>
<p>If someone is authoring codes where the meaning is dependent on the number of consecutive white-space characters, I'd like to meet that individual in a dark alley somewhere...</p>



<a name="189827436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Whitespace%20in%20code%20data%20type/near/189827436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html#189827436">(Mar 05 2020 at 19:29)</a>:</h4>
<p>But, think of the security / privacy benefits!  <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>



<a name="189834542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Whitespace%20in%20code%20data%20type/near/189834542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html#189834542">(Mar 05 2020 at 20:46)</a>:</h4>
<p>it's because of tricky issues around whitespace normalization in xml when using schema</p>



<a name="189834632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Whitespace%20in%20code%20data%20type/near/189834632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html#189834632">(Mar 05 2020 at 20:47)</a>:</h4>
<p>but I agree with Lloyd about multiple spaces in a code. Have you get a practical example?</p>



<a name="189920976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Whitespace%20in%20code%20data%20type/near/189920976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html#189920976">(Mar 06 2020 at 18:31)</a>:</h4>
<p>We have a framework where organizations can define their own local codes, typically for communication within the hospital system.  We ran into a case where it was a typo that triggered our FHIR validation, but it got me looking at the rules for the  code data type.</p>



<a name="189928058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Whitespace%20in%20code%20data%20type/near/189928058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html#189928058">(Mar 06 2020 at 19:52)</a>:</h4>
<p>That's one of the benefits of the rules :)</p>



<a name="189935266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Whitespace%20in%20code%20data%20type/near/189935266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Whitespace.20in.20code.20data.20type.html#189935266">(Mar 06 2020 at 21:16)</a>:</h4>
<p>The V3 data types schema contains a Regex check that prevents the use of spaces in codes. In NZ, we ran into this problem in the early days of our national GP2GP system due to one vendor's legacy use of user-defined codes (which, by their very nature, are not interoperable). Fortunately, the CDA payload in this system is generated from a single common component, so we were able to implement a quick fix. I'm guessing that plenty of other countries will encounter this problem when attempting to exchange legacy data at a national level.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
