---
layout: page
title: "FHIR Chat  · ValueSet expansion · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html">ValueSet expansion</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="164180610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164180610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Francis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164180610">(Apr 25 2019 at 15:28)</a>:</h4>
<p>Hi,</p>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> <br>
Not sure if this is a valid question but I am trying to wrap my head around the ValueSet expand operation. Does the content in the expansion differ if the codes we all LOINC or SNOMED or a mixture? Are there any guidelines on how to appropriately expand a ValueSet based on the input parameters? Would it matter based on a particular clinical domain?</p>
<p>Thanks in advance.</p>



<a name="164182512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164182512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164182512">(Apr 25 2019 at 15:47)</a>:</h4>
<p>The expansion is generated / calcuated based on value set definition inside ValueSet.compose.</p>



<a name="164185785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164185785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Francis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164185785">(Apr 25 2019 at 16:25)</a>:</h4>
<blockquote>
<p>The expansion is generated / calcuated based on value set definition inside ValueSet.compose.</p>
</blockquote>
<p>Ok and there used to be an ExpansionProfile that would profile the epansion but this sn't there in R4 so this goes back to my questions about there being any guidelines to expand the ValueSet based on the input parameters and if it matters based on a particular domain. Can you comment on that?</p>



<a name="164187033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164187033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164187033">(Apr 25 2019 at 16:38)</a>:</h4>
<p>Terminology server decide what input parameters server accept and how the input parameter is used. Most of ExpansionProfile elements are presented at input parameters in R4. For the same value set,  you can exclude certain code systems (exclude-system parameters).</p>



<a name="164188834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164188834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164188834">(Apr 25 2019 at 17:00)</a>:</h4>
<p>Hi, <span class="user-mention" data-user-id="193795">@Joel Francis</span>.  I assume you may have seen it, but the way that the $expand operation is intended to work is documented <a href="http://hl7.org/fhir/R4/valueset.html#expansion" target="_blank" title="http://hl7.org/fhir/R4/valueset.html#expansion">here</a>.  I think that should answer your questions at least in regard to the general approach, but if there are details that still aren't clear or are confusing we can certainly talk about that further - and that might indicate that there's some missing documentation that we can add.  As Yunwei said, the servers do some discretion in regard to support for input parameters (which should ideally be documented in the capability statement  - including TerminologyCapabilities where appropriate).  But all servers should be following the basic algorithm documented in the link above.</p>



<a name="164190789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164190789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Francis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164190789">(Apr 25 2019 at 17:24)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191506">@Yunwei Wang</span>  and <span class="user-mention" data-user-id="191405">@Rob Hausam</span> .  I am jostling with the reasoning for the expansionprofile and then the move to standard parameters if we needes to profile expansions the. How can we use parametera in a standardized way? But as Yunwei mentioned it is the terminology server that determines these or have I misunderstood?</p>



<a name="164192911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164192911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164192911">(Apr 25 2019 at 17:48)</a>:</h4>
<p>The first thing that I'll mention is that the ExpansionProfile resource (if that's what you were referring to) has been removed in R4.  So even if you are working with servers that are on STU3 (where it still exists in the specification) I'm not sure if any of the servers (other than possibly Grahame's) did much with ExpansionProfile, and even if they did it's likely best to generally ignore and not use it at this point.  Maybe you can clarify a bit more what you are thinking of specifically in regard to your question about how to "use parameters in a standardized way"?  Obviously the parameters should be used in a standardized way, so if it appears that is not the case then that needs to be clarified (or corrected).</p>



<a name="164196501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164196501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Francis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164196501">(Apr 25 2019 at 18:24)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191405">@Rob Hausam</span> , there is a Working Group called the ValueSet Expansion (VSE) and the scope aims to define a standard that specifies what content belongs in a value set expansion. So I was trying to understand the usecases behind the work and tie it together with my questions earlier and the need for a standardization from the expansion aspect.</p>



<a name="164208493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164208493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164208493">(Apr 25 2019 at 20:50)</a>:</h4>
<p><span class="user-mention" data-user-id="193795">@Joel Francis</span> I'm a lead on the <a href="https://confluence.hl7.org/display/VOC/Value+Set+Expansion+(VSE)+Project" target="_blank" title="https://confluence.hl7.org/display/VOC/Value+Set+Expansion+(VSE)+Project">Value Set Expansion</a> project you've referenced. I assume you've seen that confluence page, but if not, start there. We'll be meeting Thursday Q2 (Vocab) to discuss. If you can wait until Montreal, I'll bet we can help clarify things then. Will that work?</p>



<a name="164257427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164257427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Francis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164257427">(Apr 26 2019 at 12:37)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="193795">Joel Francis</span> I'm a lead on the <a href="https://confluence.hl7.org/display/VOC/Value+Set+Expansion+(VSE)+Project" target="_blank" title="https://confluence.hl7.org/display/VOC/Value+Set+Expansion+(VSE)+Project">Value Set Expansion</a> project you've referenced. I assume you've seen that confluence page, but if not, start there. We'll be meeting Thursday Q2 (Vocab) to discuss. If you can wait until Montreal, I'll bet we can help clarify things then. Will that work?</p>
</blockquote>
<p>Yes that works. Thank you <span class="user-mention" data-user-id="191503">@Robert McClure</span>  and <span class="user-mention" data-user-id="191405">@Rob Hausam</span></p>



<a name="164276930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164276930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164276930">(Apr 26 2019 at 16:34)</a>:</h4>
<p>Sounds good.  We'll talk further in Montreal.</p>



<a name="164453740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164453740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Francis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164453740">(Apr 29 2019 at 13:51)</a>:</h4>
<p>Hi,</p>
<p>Can anyone provide an explanation for the contextDirection? What is the purpose?</p>
<p>Thanks in advance.</p>



<a name="164461794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164461794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164461794">(Apr 29 2019 at 15:28)</a>:</h4>
<p><span class="user-mention" data-user-id="193795">@Joel Francis</span>  Because some FHIR servers may require different values for inbound message vs outbound message for the same ValueSet. For example, my server may allow Yes/No/Unknown used for outbound FHIR data (GET operation) but require Yes/No for inbound data (POST/PUT operations). <br>
Here is the original disucssion: <a href="#narrow/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection" title="#narrow/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection">https://chat.fhir.org/#narrow/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection</a></p>



<a name="164539240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20expansion/near/164539240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Francis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20expansion.html#164539240">(Apr 30 2019 at 13:37)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="193795">Joel Francis</span>  Because some FHIR servers may require different values for inbound message vs outbound message for the same ValueSet. For example, my server may allow Yes/No/Unknown used for outbound FHIR data (GET operation) but require Yes/No for inbound data (POST/PUT operations). <br>
Here is the original disucssion: <a href="#narrow/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection" title="#narrow/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection">https://chat.fhir.org/#narrow/stream/179202-terminology/topic/.24expand.20context.20and.20contextDirection</a></p>
</blockquote>
<p>Thanks <span class="user-mention" data-user-id="191506">@Yunwei Wang</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
