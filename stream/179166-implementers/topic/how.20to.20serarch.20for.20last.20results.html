---
layout: page
title: "FHIR Chat  · how to serarch for last results · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html">how to serarch for last results</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153820337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820337">(Apr 07 2016 at 19:43)</a>:</h4>
<p>On a call today question was asked how to search for last n results or most recent results?  </p>



<a name="153820339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820339">(Apr 07 2016 at 19:49)</a>:</h4>
<p>query for the latest updated/inserted 30 observation resources:<br>
<a href="http://fhirtest.uhn.ca/baseDstu2/Observation?_sort=date&amp;_count=30" target="_blank" title="http://fhirtest.uhn.ca/baseDstu2/Observation?_sort=date&amp;_count=30">http://fhirtest.uhn.ca/baseDstu2/Observation?_sort=date&amp;_count=30</a></p>



<a name="153820340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820340">(Apr 07 2016 at 19:50)</a>:</h4>
<p>thanks!</p>



<a name="153820342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820342">(Apr 07 2016 at 19:51)</a>:</h4>
<p>this one are the latest 30 observations by valueDateTime<br>
<a href="http://fhirtest.uhn.ca/baseDstu2/Observation?_sort=value-date&amp;_count=30" target="_blank" title="http://fhirtest.uhn.ca/baseDstu2/Observation?_sort=value-date&amp;_count=30">http://fhirtest.uhn.ca/baseDstu2/Observation?_sort=value-date&amp;_count=30</a></p>



<a name="153820343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820343">(Apr 07 2016 at 19:52)</a>:</h4>
<p>(or value-period)</p>



<a name="153820344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820344">(Apr 07 2016 at 19:53)</a>:</h4>
<p>*valuePeriod</p>



<a name="153820346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820346">(Apr 07 2016 at 19:59)</a>:</h4>
<p>OK  a little more complicated  how to for the most recent result of each type = code in a category.?  </p>



<a name="153820347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820347">(Apr 07 2016 at 19:59)</a>:</h4>
<p>for  example: </p>



<a name="153820348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820348">(Apr 07 2016 at 20:00)</a>:</h4>
<p>GET [base]/Observation?patient=[id]&amp;category=vital-signs&amp; {last temp, weight, etc in the category}</p>



<a name="153820350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820350">(Apr 07 2016 at 20:01)</a>:</h4>
<p>or</p>



<a name="153820351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820351">(Apr 07 2016 at 20:02)</a>:</h4>
<p>GET [base]/Observation?patient=[id]&amp;category=laboratory&amp;{ last glucose, NA, K etc}</p>



<a name="153820361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820361">(Apr 07 2016 at 20:10)</a>:</h4>
<p>order by date descending and ask for only 1  (too lazy to look up the actual query!)</p>



<a name="153820426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820426">(Apr 07 2016 at 22:06)</a>:</h4>
<p>There's no "group by" in FHIR, so you'd need to do a custom query/operation or some sort of custom search parameter to do that.</p>



<a name="153820543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820543">(Apr 09 2016 at 07:56)</a>:</h4>
<p>As a clinician I can see a lot of practical utility getting only the most recent n result of labs/vitals for a patient.   On paper I  only look back to the most recent visits and labs.   This was brought up twice on a recent Argo call for Labs and Vitals.  So since there doesn't seem to be a way to do this presently,  I'll submit a tracker to create an operation for Observation.   Anybody think this is a bad idea?</p>



<a name="153820556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820556">(Apr 09 2016 at 14:36)</a>:</h4>
<p>Trying something is rarely a bad idea :)</p>



<a name="153820564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820564">(Apr 09 2016 at 18:15)</a>:</h4>
<p>perhaps pass in a valueset with the codes that you would like the last value of?</p>



<a name="153820608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820608">(Apr 11 2016 at 04:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> I'm not sure what you can't do - get the last n results for labs and vitals should be straight forward....</p>



<a name="153820624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820624">(Apr 11 2016 at 05:56)</a>:</h4>
<p>"get the last n results for labs and vitals should be straight forward...." Not for me.  I want the most recent of each of the labs ( whatever they are - I don't know that ahead of time for a patient -   ie a the last cbc, chem, ua , t4 and lipase panel and 16 more. )  So the category is 'laboratory'  I know that, do  I order by date and code?</p>



<a name="153820625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820625">(Apr 11 2016 at 06:01)</a>:</h4>
<p>ok. name a panel, and get the last of the panel - you can name the panel by a code, yes? </p>



<a name="153820626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820626">(Apr 11 2016 at 06:01)</a>:</h4>
<p>that's ok, so it's just a batch ith 14 requests</p>



<a name="153820628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820628">(Apr 11 2016 at 06:19)</a>:</h4>
<p>If I knew what labs the patient had already.  I could search by panel.    Remember I'm doing a search on for never before seen patient and I  want to review all the labs they ever had by starting with the most recent one of each.  So I need to search through the entire master list of lab codes and return the most recent one for each unique lab.  I don' t  see how searching for a single panel solves that?</p>



<a name="153820632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820632">(Apr 11 2016 at 06:37)</a>:</h4>
<p>I think this is amost hard thing to do. I want to search for something but I don't know what I'm searching by....</p>



<a name="153820635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820635">(Apr 11 2016 at 06:44)</a>:</h4>
<p>You search by Observation.category = vitals or labs and return the latest and greatest of each code that exists. </p>



<a name="153820638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820638">(Apr 11 2016 at 08:15)</a>:</h4>
<p>yes, that's a general recipe, but 'latest and greatest' is the loose point</p>



<a name="153820655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mat Coolidge  <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820655">(Apr 11 2016 at 13:20)</a>:</h4>
<p>Wouldnt you search for the orders? There would be no labs/observations without someone submitting an order.</p>



<a name="153820656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mat Coolidge  <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820656">(Apr 11 2016 at 13:23)</a>:</h4>
<p>We are modeling the order results, especially lab panels,  as diagnostic reports</p>



<a name="153820657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mat Coolidge  <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820657">(Apr 11 2016 at 13:23)</a>:</h4>
<p>but in the context of the application it looks first for the orders and lists them (including status)</p>



<a name="153820680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820680">(Apr 11 2016 at 15:50)</a>:</h4>
<p>Actually, it's very common to have vital signs observations without orders.  (And it's occasionally possible to have lab tests without orders too.)</p>



<a name="153820682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820682">(Apr 11 2016 at 15:53)</a>:</h4>
<p>Whether search for Observations or DiagnosticReports  same idea.    I want to scan the breadth of whats been done.</p>



<a name="153820683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820683">(Apr 11 2016 at 15:54)</a>:</h4>
<p>OK maybe not "latest and greatest"  but at least "latest"</p>



<a name="153820684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820684">(Apr 11 2016 at 15:54)</a>:</h4>
<p>I believe was called  "lastknown" by one participant on call</p>



<a name="153820809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820809">(Apr 11 2016 at 17:23)</a>:</h4>
<p>We call it "last N" internally for Millennium. The _count parameter doesn't work because that's page size. EG: I want to see the last 2 of each vital result for this patient. Or I want the last 10 labs of these types (monitoring disease progression or therapy response). It's actually the most common way internally that we see used to find labs and vitals.</p>



<a name="153820810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820810">(Apr 11 2016 at 17:23)</a>:</h4>
<p>if you use count, you may get 100 heights before you even see 1 weight (and cross many pages)</p>



<a name="153820811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820811">(Apr 11 2016 at 17:25)</a>:</h4>
<p>I don't think this needs to be an operation - couldn't we just create another parameter? EG: maxPerCode or something? All other query params likely still apply</p>



<a name="153820814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820814">(Apr 11 2016 at 17:40)</a>:</h4>
<p>I agree that this is a common (maybe even the most common, as Jenni said) use case for labs and vitals, and it makes sense to support it.  As Eric said, you would want to search by Observation.category (and that may be about the best use for category that I've seen).  A parameter seems reasonable.  The "PerCode" part seems a little clunky to me - could that instead be implicit?  I don't think that "max" would actually be saying what we need here.  Maybe it could be "lastN", or "lastNPerCode" (if we do need to include the latter bit)?</p>



<a name="153820825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820825">(Apr 11 2016 at 18:10)</a>:</h4>
<p>Surely this is a proper use for a batch? </p>



<a name="153820836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820836">(Apr 11 2016 at 19:21)</a>:</h4>
<p>I hope not, from an API perspective, I would rather be able to get this straight from the "owning" resource given how common the use case is</p>



<a name="153820837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820837">(Apr 11 2016 at 19:21)</a>:</h4>
<p>I'm not sure how common this is outside of Observation</p>



<a name="153820838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820838">(Apr 11 2016 at 19:22)</a>:</h4>
<p>most others are usually all active or date range (at least in CCDS)</p>



<a name="153820839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820839">(Apr 11 2016 at 19:23)</a>:</h4>
<p>I could see something similar, i guess, on diagnosticReport given the relationship between them. EG: let me complare the last 2 reports from imaging scans</p>



<a name="153820840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820840">(Apr 11 2016 at 19:27)</a>:</h4>
<p>well, if they have the same modality and body site...</p>



<a name="153820841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820841">(Apr 11 2016 at 19:28)</a>:</h4>
<p>is this really a common use case though? </p>



<a name="153820842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820842">(Apr 11 2016 at 19:28)</a>:</h4>
<p>there's variations on this above - is it latest in category, or latest by panel, or latest by actual observation value?</p>



<a name="153820848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820848">(Apr 11 2016 at 19:38)</a>:</h4>
<p>In our case, it's usually latest by code. Even if you queried at a category level, we would return latest by like code</p>



<a name="153820849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820849">(Apr 11 2016 at 19:39)</a>:</h4>
<p>eg: give me the last 1 of all vitals would return 1 height, 1 weight, 1 temp...</p>



<a name="153820850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820850">(Apr 11 2016 at 19:41)</a>:</h4>
<p>latest in by observation code in Obs where category equal labs or vitals,  and latest by results code in DR.  I see the problem with panel vs atomic test codes in Obs.   decision needed there .. maybe exclude those with no value or DAR    </p>



<a name="153820861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820861">(Apr 11 2016 at 20:31)</a>:</h4>
<p>It's a bit heavyweight, but you could definitely accomplish this with a batch request</p>



<a name="153820866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820866">(Apr 11 2016 at 20:52)</a>:</h4>
<p>well, thsis is one kind of 'please do some analysis for me' </p>



<a name="153820867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820867">(Apr 11 2016 at 20:52)</a>:</h4>
<p>How would this be done via batch? I think I'm missing some param documentation somewhere</p>



<a name="153820879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820879">(Apr 11 2016 at 20:58)</a>:</h4>
<p>It would be a transaction with a bunch of search operations in it. Like, one search operation for "give me the most recent weight", one for "give me the most recent BP", etc</p>



<a name="153820881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820881">(Apr 11 2016 at 21:01)</a>:</h4>
<p>great for vitals for which may have a dozen codes. What about labs where you may have 2000+  codes?  What if you are accessing another system and don't know what codes they use?</p>



<a name="153820884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820884">(Apr 11 2016 at 21:03)</a>:</h4>
<p>yeah, if you don't know the codes that wouldn't work.... </p>



<a name="153820885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820885">(Apr 11 2016 at 21:04)</a>:</h4>
<p>how would it work if you don't know the codes anyway?</p>



<a name="153820887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820887">(Apr 11 2016 at 21:04)</a>:</h4>
<p>and also, you would have to "hack" search by using page size as a max - which is not apparent. Nor is it obvious why you can't do this through Observation itself</p>



<a name="153820888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820888">(Apr 11 2016 at 21:04)</a>:</h4>
<p>please give me something.... I don't know how to tell you what I want....</p>



<a name="153820890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820890">(Apr 11 2016 at 21:04)</a>:</h4>
<p>(for the batch approach)</p>



<a name="153820893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820893">(Apr 11 2016 at 21:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - /Observation?category=vital-signs&amp;max=5</p>



<a name="153820894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820894">(Apr 11 2016 at 21:05)</a>:</h4>
<p>well, it's obvious why you can't - we didn't define it. I think you meant, why shouldn't you...</p>



<a name="153820900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820900">(Apr 11 2016 at 21:05)</a>:</h4>
<p>(max being whatever param name we decided to call it, lastN, etc)</p>



<a name="153820903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820903">(Apr 11 2016 at 21:06)</a>:</h4>
<p>/Observation?category=hematology&amp;lastN=5</p>



<a name="153820910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820910">(Apr 11 2016 at 21:07)</a>:</h4>
<p>why don't just query for the Observation.Category and and define a lab category  to get the 2000 different lab observations and sort by date</p>



<a name="153820913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820913">(Apr 11 2016 at 21:07)</a>:</h4>
<p>or, if you *did* know the code, /Observation?code=http://loinc.org|8867-4&amp;lastN=10</p>



<a name="153820922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820922">(Apr 11 2016 at 21:08)</a>:</h4>
<p>because if I have a lab that has 1000 results on its own (very recent), and I want 5, I have to page through all of that to get to the next lab?</p>



<a name="153820923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820923">(Apr 11 2016 at 21:08)</a>:</h4>
<p>more common for vitals or measurements that come in via machines per second</p>



<a name="153820925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820925">(Apr 11 2016 at 21:09)</a>:</h4>
<p>we are working on defining an operation that allows you to ask for 'current vital signs status' and returns latest values along with stats (min, max, mean, trend) over a period of time</p>



<a name="153820926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820926">(Apr 11 2016 at 21:09)</a>:</h4>
<p>also, as the server that's going to impact my EHR and users to expose that massive amount of results when you only want 5 of each... ew :) <br>
And if anyone charged by transaction a la Amazaon... ew...</p>



<a name="153820927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820927">(Apr 11 2016 at 21:10)</a>:</h4>
<p>lab seems a slightly different case. It's still not clear to me what is proposed for the client to ask for, and how the server decides what to return</p>



<a name="153820928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820928">(Apr 11 2016 at 21:11)</a>:</h4>
<p>The operation won't help when the app is graphing the actual trend either - common for vitals</p>



<a name="153820929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hussain Chinoy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820929">(Apr 11 2016 at 21:12)</a>:</h4>
<p>An unbounded last change since is definitely a large burden on the server.</p>



<a name="153820953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820953">(Apr 12 2016 at 03:07)</a>:</h4>
<p>Retrieving most recent labs when you don't know the codes could still make sense in situations where you're expecting the data to be looked at by a human, not necessarily evaluated by decision support or something.  I tend to agree that using batch where you know the codes is an ugly way to solve the problem and it's unworkable if you don't know all of the codes that could be relevant on the target system.</p>



<a name="153820955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20to%20serarch%20for%20last%20results/near/153820955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20to.20serarch.20for.20last.20results.html#153820955">(Apr 12 2016 at 03:11)</a>:</h4>
<p>I can also potentially envision "most recent by practitioner" or "most recent by location", though those wouldn't be as common.  If we want to allow filtering of which elements can be used, the parameter would need to be a composite combining the name of the search criteria to "group" by and the number of records to return.  If we restrict it to code, we'd need a piece of metadata to use to identify what attribute applied.  We could probably leverage the w5 for this, but we'd need a rule that one and only one attribute per resource could have that w5 category.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
