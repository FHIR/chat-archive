---
layout: page
title: "FHIR Chat  · Should Coverage.class.value be 0..1? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html">Should Coverage.class.value be 0..1?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="202388382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/202388382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tadas Antanavicius <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#202388382">(Jun 30 2020 at 02:08)</a>:</h4>
<p>Hi all,</p>
<p>I'm working on an app that allows a user to enter insurance information for patients. We're using the Coverage resource to represent each of the insurance plans that a Patient should be associated with.</p>
<p>Two of the pieces of data we need to collect about an insurance plan are "group name" and "group number".</p>
<p>This seems like a natural fit for <a href="http://Coverage.class.name">Coverage.class.name</a> and Coverage.class.value, so that was what we went with initially.</p>
<p>However, it turns out that in reality there are insurance plans that can be effectively billed with any combination of the following:<br>
1) Missing both group name &amp; group number<br>
2) Having just group name, and missing group number<br>
3) Having just group number, and missing group name<br>
4) Having both group name and number</p>
<p>With the cardinalities defined in Coverage, scenarios 1, 3, and 4 are fine. Scenario 2 is not, because inside a Coverage.class, .value (the "number" in this context) is required (1..1).</p>
<p>Is this intentional? Should Coverage.class.value be relaxed to be 0..1? Is there another way to model this situation?</p>
<p>Thanks!</p>



<a name="202390242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/202390242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#202390242">(Jun 30 2020 at 02:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191430">@Paul Knapp</span></p>



<a name="202492856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/202492856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tadas Antanavicius <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#202492856">(Jun 30 2020 at 20:49)</a>:</h4>
<p>At the moment, the workaround I am leaning towards is continuing to store "group number" in <code>Coverage.class.value</code>, and coming up with a custom <code>Coverage.identifier</code> to store the group name when it exists</p>



<a name="202603865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/202603865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tadas Antanavicius <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#202603865">(Jul 01 2020 at 18:13)</a>:</h4>
<p>We landed on a slightly more elegant solution: for scenario 2, we'll just use the <code>http://terminology.hl7.org/CodeSystem/data-absent-reason</code> extension with a <code>valueCode</code> of <code>asked-unknown</code> to satisfy the constraint</p>



<a name="203026497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/203026497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#203026497">(Jul 06 2020 at 18:49)</a>:</h4>
<p><span class="user-mention" data-user-id="242509">@Tadas Antanavicius</span> Normally if there is a class element you would know the value, e.g. group=ABC123, if you wish to not require that then given that the element is required (1..1) in the base resource you would need to include a Data Absent reason extension in .class.value. In a future version of FHIR we could relax the cardinality to 0..1 and I would encourage you to come to a Financial Management conference call  to discuss that as a proposal.</p>



<a name="204127962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204127962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204127962">(Jul 16 2020 at 19:03)</a>:</h4>
<p>I know DAR is a mitigation when a profile constrains the cardinality of a field and there's no data.  In this case, when it's a spec required field, is DAR still sufficient?  I'm curious if client libraries would choke.</p>



<a name="204134460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204134460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204134460">(Jul 16 2020 at 19:53)</a>:</h4>
<p>It would be conformant, but many systems would choke.  For interoperability, it's best to avoid surprising communication partners - and a DAR in a required element would be a surprise to most unless it was specifically called out in the relevant profile.</p>



<a name="204135565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204135565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204135565">(Jul 16 2020 at 20:03)</a>:</h4>
<p>That's what I figured.  <span class="user-mention" data-user-id="242509">@Tadas Antanavicius</span>  are you returning some kind of placeholder default value for Coverage.class.value along with the DAR?</p>



<a name="204151507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204151507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204151507">(Jul 16 2020 at 22:30)</a>:</h4>
<p>If you have a valid placeholder value, there wouldn't really be a need for a DAR (and it would be somewhat confusing to have one...)</p>



<a name="204151851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204151851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tadas Antanavicius <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204151851">(Jul 16 2020 at 22:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191358">@Dennis Patterson</span> we're not using a placeholder value (indeed, as Lloyd points out, I would not have run into this problem if I'd had a placeholder value). And yes, I agree the solution is undesirable from an interoperability perspective.</p>



<a name="204210869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204210869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204210869">(Jul 17 2020 at 14:16)</a>:</h4>
<p>To elaborate, I was meaning something like </p>
<div class="codehilite"><pre><span></span><code>&quot;value&quot;: &quot;--&quot;,
 &quot;_value&quot;: {
   &quot;extension&quot; : [ {
      &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;,
      &quot;valueCode&quot; : &quot;unknown&quot;
   }]
 }
</code></pre></div>


<p>The DAR is necessary in the situation being discussed.  The only reason I'm mentioning something like a placeholder value is to prevent client libraries from blowing up.  However, while a human reader might make sense of this, software may be all the more confused (to <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> 's point) about what was intended.</p>



<a name="204225092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204225092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204225092">(Jul 17 2020 at 16:04)</a>:</h4>
<p><code>"value": "--"</code><br>
would blow up if that's not in the required value set</p>



<a name="204225273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204225273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204225273">(Jul 17 2020 at 16:05)</a>:</h4>
<p>Most valuesets support an unknown concept</p>



<a name="204225475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204225475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204225475">(Jul 17 2020 at 16:07)</a>:</h4>
<p>My question is what is the value of DAR? Aren't we setting up consuming applications for a hard time here? Why not have guidance in the spec on how to handle this? Couldn't we set some value in this example where the resource is valid to return without this 1 field?</p>



<a name="204226211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204226211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204226211">(Jul 17 2020 at 16:13)</a>:</h4>
<p>If they support the notion of "unknown", you don't generally need DAR</p>



<a name="204226352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204226352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204226352">(Jul 17 2020 at 16:14)</a>:</h4>
<p>If it's valid to have an instance without the field, then it shouldn't be 1..x.  If you always need a value, then you <em>should</em> also mark the 'value' property as required - which means that sending an extension instead isn't good enough.</p>



<a name="204226390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204226390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204226390">(Jul 17 2020 at 16:14)</a>:</h4>
<p>We don't use 1..x for "we strongly encourage you to send" - that's what mustSupport is for.</p>



<a name="204226444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204226444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204226444">(Jul 17 2020 at 16:15)</a>:</h4>
<p>we're talking about class.value, not class.type.  It's a string not a code</p>



<a name="204226713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204226713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204226713">(Jul 17 2020 at 16:17)</a>:</h4>
<p>If you don't have a value, just omit the class entirely.  Why would you send a class without a value?</p>



<a name="204226900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204226900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204226900">(Jul 17 2020 at 16:18)</a>:</h4>
<p>the system has a group name without a group value</p>



<a name="204227010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204227010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204227010">(Jul 17 2020 at 16:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191430">@Paul Knapp</span></p>



<a name="204229404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204229404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204229404">(Jul 17 2020 at 16:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191358">Dennis Patterson</span> <a href="#narrow/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F/near/204226900">said</a>:</p>
<blockquote>
<p>the system has a group name without a group value</p>
</blockquote>
<p>Isn't then the value the same as the name?</p>



<a name="204406578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204406578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PKumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204406578">(Jul 20 2020 at 10:29)</a>:</h4>
<p>Does FHIR resources provide any option to have row level security feature? where I want to ensure the particular patient record is provided access to given client? can I use SMART on FHIR to implement role based access to FHIR application?</p>



<a name="204423827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/204423827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#204423827">(Jul 20 2020 at 13:46)</a>:</h4>
<p>There is much background on security and privacy in the core spec <a href="http://build.fhir.org/secpriv-module.html">http://build.fhir.org/secpriv-module.html</a><br>
And security and privacy questions might get more focus on <a class="stream" data-stream-id="179247" href="/#narrow/stream/179247-Security-and-Privacy">#Security and Privacy</a> stream</p>



<a name="207421514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/207421514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#207421514">(Aug 19 2020 at 15:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191358">@Dennis Patterson</span> We can relax the cardinality in R5. Can you give an example of the Group which has a name not a value, as I'm with Vassil that if the name is 'Bronze' or 'Firefighters' then that is the value but if 'Boilermakers of America Local #126' then not the value.</p>



<a name="208259058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Should%20Coverage.class.value%20be%200..1%3F/near/208259058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Should.20Coverage.2Eclass.2Evalue.20be.200.2E.2E1.3F.html#208259058">(Aug 27 2020 at 18:44)</a>:</h4>
<p>We model group value numerically (we actually call it group number), and had a case where there was a group name but not a group number at a client domain.  I've seen some other examples in domains that match up more with your former examples, but at runtime if there's a group name but no group number, I can't distinguish whether it's 'Bronze' or 'Boilermakers of America Local #126'.  I just know I have a textual name for the group.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
