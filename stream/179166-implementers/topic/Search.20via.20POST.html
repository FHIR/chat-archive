---
layout: page
title: "FHIR Chat  · Search via POST · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html">Search via POST</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="221665804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/221665804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#221665804">(Jan 05 2021 at 16:16)</a>:</h4>
<p><a href="https://www.hl7.org/fhir/search.html">https://www.hl7.org/fhir/search.html</a> mentions that search can be invoked via a POST to [base]/[type]/_search.</p>
<p>However, in the swagger definitions being generated for the various implementation guides, I don't see this endpoint listed.  Are servers required to support this search variant?  Should I open an issue to have this endpoint added to all the generated swagger?</p>



<a name="221666201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/221666201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#221666201">(Jan 05 2021 at 16:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="221945977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/221945977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#221945977">(Jan 07 2021 at 14:16)</a>:</h4>
<p>This seems important to me because if its not clear then not all servers will support it and then clients can't depend on it.  Any thoughts?</p>



<a name="221971428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/221971428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#221971428">(Jan 07 2021 at 17:18)</a>:</h4>
<p>in US Core we specify the search requirements in the CapabilityStatements,  I would expect that would drive the swagger definitions too.</p>



<a name="221971514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/221971514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#221971514">(Jan 07 2021 at 17:19)</a>:</h4>
<blockquote>
<p>Are servers required to support this search variant?  </p>
</blockquote>
<p>short answer is no.</p>



<a name="221985103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/221985103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#221985103">(Jan 07 2021 at 18:58)</a>:</h4>
<p>It is a shall requirement <a href="http://hl7.org/fhir/http.html#search">in the base spec</a> though:</p>
<blockquote>
<p>Because of the way that some user agents and proxies treat GET and POST requests, in addition to the get based search method above, servers that support search SHALL also support a POST based search</p>
</blockquote>



<a name="223891021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/223891021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#223891021">(Jan 25 2021 at 12:42)</a>:</h4>
<p>The conflict above from base spec to IG seems to highlight the need for clarification here and so I went ahead and opened <a href="https://jira.hl7.org/browse/FHIR-30577">https://jira.hl7.org/browse/FHIR-30577</a></p>



<a name="223891103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/223891103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#223891103">(Jan 25 2021 at 12:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> is there a better spot to leave the "add the <code>_search</code> endpoints to the generated openapi" request?</p>



<a name="224940240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/224940240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#224940240">(Feb 02 2021 at 21:35)</a>:</h4>
<p>I don't think so</p>



<a name="231370753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/231370753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#231370753">(Mar 22 2021 at 19:29)</a>:</h4>
<p>It wasn't Eric's intention to indicate that US-core relaxes the base spec requirement - and support for POST to _search is mandatory.  (i.e. it must be supported for any US core implementation that supports search at all).</p>



<a name="231382167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/231382167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#231382167">(Mar 22 2021 at 20:48)</a>:</h4>
<p>see <a href="http://jira.hl7.org/browse/FHIR-31585">FHIR#31585</a></p>



<a name="231864281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/231864281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#231864281">(Mar 25 2021 at 19:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> Cannot open the reference guidance in your ticket</p>
<blockquote>
<p>Add guidance on "POST ... _search" in general guidance here: file:///Users/ehaas/Documents/FHIR/US-Core-R4/output/general-guidance.html#search-syntax</p>
</blockquote>



<a name="231873447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/231873447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#231873447">(Mar 25 2021 at 20:46)</a>:</h4>
<p><a href="http://build.fhir.org/ig/HL7/US-Core/general-guidance.html#search-syntax">http://build.fhir.org/ig/HL7/US-Core/general-guidance.html#search-syntax</a></p>



<a name="231873724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/231873724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#231873724">(Mar 25 2021 at 20:48)</a>:</h4>
<p>basically going to say server reuqired to support the POST syntax per the FHIR spec but we are only going to use the GET syntax in the guide.</p>



<a name="232256529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/232256529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ayush Shrivastava <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#232256529">(Mar 29 2021 at 12:02)</a>:</h4>
<blockquote>
<p>However, in the swagger definitions being generated for the various implementation guides, I don't see this endpoint listed. Are servers required to support this search variant? Should I open an issue to have this endpoint added to all the generated swagger?</p>
</blockquote>
<p>Can anyone please point me to the swagger definition of endpoints</p>



<a name="234364987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234364987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mona O <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234364987">(Apr 13 2021 at 17:08)</a>:</h4>
<p>Is an implementer conformant if only the Search via POST is supported or are all implementers required to support the GET method for searches?</p>



<a name="234367837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234367837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234367837">(Apr 13 2021 at 17:26)</a>:</h4>
<p>You must support GET. I don't know if that's actually written somewhere but it is what most / all clients would expect</p>



<a name="234378901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234378901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mona O <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234378901">(Apr 13 2021 at 18:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191912">Michele Mottini</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234367837">said</a>:</p>
<blockquote>
<p>You must support GET. I don't know if that's actually written somewhere but it is what most / all clients would expect</p>
</blockquote>
<p>Are there any exceptions to this rule? Due to PHI in the URL our security dept. does not allow us to support GET.</p>



<a name="234379139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234379139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234379139">(Apr 13 2021 at 18:40)</a>:</h4>
<p>here is the text:  <a href="http://build.fhir.org/http.html#search">http://build.fhir.org/http.html#search</a></p>
<blockquote>
<p>.... <em>in addition</em> to the get based search method above, servers that support search <strong>SHALL</strong> also support a <code>POST</code> based search:<br>
(emphasis mine)</p>
</blockquote>



<a name="234446596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234446596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234446596">(Apr 14 2021 at 06:16)</a>:</h4>
<p>I did not read this as "all servers shall support GET search". in fact, we discussed excluding GET search.</p>



<a name="234499029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234499029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234499029">(Apr 14 2021 at 13:32)</a>:</h4>
<p>'...in addition.... SHALL also....' seems pretty clearly requiring GET to me</p>



<a name="234520968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234520968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mona O <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234520968">(Apr 14 2021 at 15:30)</a>:</h4>
<p>Am I'm hearing that companies are forced to follow conformance over their own security policies? Are there no exceptions?</p>



<a name="234531010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234531010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234531010">(Apr 14 2021 at 16:31)</a>:</h4>
<p>Forced by whom? Your legal counsel can advise you of the risks.</p>
<p>In practice, most clients use GET and every server I've ever seen supports GET.</p>



<a name="234565264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234565264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234565264">(Apr 14 2021 at 20:01)</a>:</h4>
<p>We decided that all searches should be by POST. does this mean we are not FHIR conformant?</p>



<a name="234565434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234565434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234565434">(Apr 14 2021 at 20:02)</a>:</h4>
<p>"servers shall also support" does not mean "implementations must also enable". I may be wrong here</p>



<a name="234566878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234566878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234566878">(Apr 14 2021 at 20:11)</a>:</h4>
<p>is there a reason why all implementations would need to support GET search?</p>



<a name="234567394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234567394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234567394">(Apr 14 2021 at 20:15)</a>:</h4>
<p>Servers supporting the usage of GET does not require or even recommend the usage of the GET method. Choice of which method to use is up to the client application. If the client chooses to use the GET method then they are the ones placing the potentially restricted information in the URL.</p>
<p>Every resource in USCore says, "SHALL support searching using the combination of the patient and intent search parameters:<br>
including support for composite OR search on intent (e.g.intent={system|}[code],{system|}[code],...)<br>
GET [base]/MedicationRequest?patient=[reference]&amp;intent=order,plan". </p>
<p>Some people will read that and say, must support GET. Other's will read that and say that the usage of GET in the example doesn't mandate the usage of the GET method or the requirement to support the GET method. Some client applications won't even attempt to use the POST because they "know" all servers SHALL support GET.</p>



<a name="234567404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234567404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234567404">(Apr 14 2021 at 20:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191912">Michele Mottini</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234499029">said</a>:</p>
<blockquote>
<p>'...in addition.... SHALL also....' seems pretty clearly requiring GET to me</p>
</blockquote>
<p>I think the sentence is not that unequivocal. A implies B does not mean A is true, or that B implies A,  right?</p>



<a name="234567700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234567700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony ThaDee <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234567700">(Apr 14 2021 at 20:17)</a>:</h4>
<p>hey, if I'm using HAPI or some FHIR server to send data to our EMR, do EMRs like Athena provide a different means of passing data to/from them (perhaps with more access or benefits ) ASIDE from their usual API? I guess I'm wondering if a FHIR server would exchange data with an EMR via their API just like any other program or if there's another way.</p>



<a name="234568530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234568530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234568530">(Apr 14 2021 at 20:23)</a>:</h4>
<p>Also, the prohibition against using the GET method and requiring the usage of only the POST method, doesn't prevent the client app from putting the values on the URL, in exactly the same manner as they would using the GET method. HAPI will even conveniently merge the two sets of parameters together for you (URL + post body).</p>



<a name="234568545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234568545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony ThaDee <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234568545">(Apr 14 2021 at 20:23)</a>:</h4>
<p>I know the FHIR server wouldn't do the data exchange, but I mean to ask, do EMRs provide teams/projects that utilize certain technologies that utilize something like a FHIR server greater or special access that anyone here is aware of.</p>



<a name="234568730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234568730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234568730">(Apr 14 2021 at 20:24)</a>:</h4>
<p><span class="user-mention" data-user-id="405774">@Tony ThaDee</span> not to hijack this thread, but every implementation is going to be different. Some will be more features using FHIR others will be more features using custom API.</p>



<a name="234569127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234569127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tony ThaDee <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234569127">(Apr 14 2021 at 20:27)</a>:</h4>
<p>didn't mean to distract from the thread.</p>



<a name="234569144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234569144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234569144">(Apr 14 2021 at 20:27)</a>:</h4>
<p>getting back to the topic:</p>
<blockquote>
<p>'...in addition.... SHALL also....' seems pretty clearly requiring GET to me</p>
</blockquote>
<p>I think the sentence is not that unequivocal. A implies B does not mean A is true, or that B implies A,  right?</p>



<a name="234570230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234570230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234570230">(Apr 14 2021 at 20:34)</a>:</h4>
<p>This wordsmithing seems confusing to me. The definition of search is a GET operation.  The spec doesn't say you SHALL support it  - you don't have to support all API methods, just declare what you do support in your capability statement. But if you support search, this is the definition. If you don't support GET, you don't support search. POST is the additional thing, which the spec goes out of its way to say is required <em>if</em> you support search.</p>
<p>Look at any other operation, like create: "The create interaction creates a new resource in a server-assigned location [...] The create interaction is performed by an HTTP POST command" - the word SHALL does not appear here, nor does it need to.</p>



<a name="234570463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234570463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234570463">(Apr 14 2021 at 20:36)</a>:</h4>
<p>is the definition of Search a GET operation? I understood that GET is one way to implement search</p>



<a name="234570705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234570705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234570705">(Apr 14 2021 at 20:38)</a>:</h4>
<p>I think <a href="https://www.hl7.org/fhir/http.html#search">https://www.hl7.org/fhir/http.html#search</a> is pretty clear?</p>
<ol>
<li>The interaction can be performed by several different HTTP commands.</li>
<li>Because of the way that some user agents and proxies treat GET and POST requests, in addition to the get based search method above, servers that support search SHALL also support a POST based search:</li>
</ol>



<a name="234570755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234570755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234570755">(Apr 14 2021 at 20:38)</a>:</h4>
<p>This interaction searches a set of resources based on some filter criteria. The interaction can be performed by several different HTTP commands." <br>
I don't think this unambiguously mean this is a GET</p>



<a name="234570976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234570976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234570976">(Apr 14 2021 at 20:39)</a>:</h4>
<p>Right <span class="user-mention" data-user-id="191478">@Oliver Egger</span>. This reads indeed that servers shall support both.</p>



<a name="234571162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234571162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234571162">(Apr 14 2021 at 20:40)</a>:</h4>
<p>I read it the same same way, SHALL support GET and POST. </p>
<p>-This allows the client application to determine if the usage of a GET method is problematic for them.<br>
-No matter which method is used/allowed, the http logs have to be treated as protected. This probably tells all clients that they SHOULD use only post, but they don't have to.</p>



<a name="234571336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234571336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234571336">(Apr 14 2021 at 20:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191832">Jose Costa Teixeira</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234446596">said</a>:</p>
<blockquote>
<p>I did not read this as "all servers shall support GET search". in fact, we discussed excluding GET search.</p>
</blockquote>
<p>This sentence is not correct. </p>
<p>What I should have said is that </p>
<blockquote>
<p>I didn't read this as "all implementations shall support GET search"</p>
</blockquote>



<a name="234571567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234571567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234571567">(Apr 14 2021 at 20:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="335936">Daniel Venton</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234571162">said</a>:</p>
<blockquote>
<p>I read it the same same way, SHALL support GET and POST. </p>
<p>-This allows the client application to determine if the usage of a GET method is problematic for them.<br>
-No matter which method is used/allowed, the http logs have to be treated as protected. This probably tells all clients that they SHOULD use only post, but they don't have to.</p>
</blockquote>
<p>Right. And I'd say that some implementations may disable GET. If there is a reason that an IG cannot exclude GET search, I'd like to see it so that I can transmit to the implementers</p>



<a name="234571593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234571593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234571593">(Apr 14 2021 at 20:43)</a>:</h4>
<p>For this very reason, I've built FHIR servers that disallowed certain searches with GET searches depending on the parameters  whereas the search can always safely be performed using POST</p>



<a name="234572011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234572011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234572011">(Apr 14 2021 at 20:46)</a>:</h4>
<p>I agree that no client is under an obligation to use GET, and an IG can say "don't use GET". I was just arguing that servers are obligated to support both.</p>



<a name="234572478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234572478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234572478">(Apr 14 2021 at 20:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191427">Jens Villadsen</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234571593">said</a>:</p>
<blockquote>
<p>For this very reason, I've built FHIR servers that disallowed certain searches with GET searches depending on the parameters  whereas the search can always safely be performed using POST</p>
</blockquote>
<p>If you reject the GET method, for any reason, then the damage has already been done. That URL with the PHI/PII has already been written to your logs and the log of every router between you and the client. Perhaps this will train clients to not use the GET method, but I suspect your capability statement doesn't say, 'POST parameters allowed X, GET parameters allowed X-n"</p>



<a name="234572878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234572878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234572878">(Apr 14 2021 at 20:52)</a>:</h4>
<p>This concern seems a bit archaic to me - we know how to do TLS now. The URL is not getting written to the log of any router between you and the client.</p>



<a name="234575872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234575872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234575872">(Apr 14 2021 at 21:07)</a>:</h4>
<p>"the damage has already ben done" - not a lot. <br>
The client can try once but it will not do all searches using GET. So I hope that a client, even if it forgot to undergo the testing phase to see what is allowed, can try one search but after that search it will realize that it doesn't work. Stubborn clients may give away a few searches, but even then I don't think the first search a client would do would contain sensitive parameters.</p>



<a name="234576482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234576482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234576482">(Apr 14 2021 at 21:09)</a>:</h4>
<p>I encourage my customers to do GET searches. Seriously. We designed for the presence of sensitive data in the query parameters and there's no "damage".</p>



<a name="234885719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234885719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234885719">(Apr 16 2021 at 16:42)</a>:</h4>
<p>The intention was very much that servers would be allowed to NOT support GET - because there are environments that have architectural requirements (well-founded or not) that prohibit using GET.  We don't want to prevent those systems from being FHIR conformant.  The only mechanism you can count on ALL conformant systems supporting is POST.</p>



<a name="234885746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234885746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234885746">(Apr 16 2021 at 16:42)</a>:</h4>
<p>That said, all systems SHOULD support GET.</p>



<a name="234893881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234893881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234893881">(Apr 16 2021 at 17:42)</a>:</h4>
<p>Then the IG should explicitly state SHALL support search via POST method, SHOULD support search via GET method. The way it's currently worded SHALL also support POST implies that there is another SHALL. It doesn't read right if it's "MAY support GET and SHALL also support POST." If you don't support GET then you aren't also doing anything.</p>



<a name="234894438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234894438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234894438">(Apr 16 2021 at 17:46)</a>:</h4>
<p>If you feel the current wording needs clarification, please submit a change request.</p>



<a name="234895926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234895926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234895926">(Apr 16 2021 at 17:57)</a>:</h4>
<p>some will only support GET, some will only support POST, some will support both... right? I don't think the core should declare either as manditory.</p>



<a name="234895979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234895979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234895979">(Apr 16 2021 at 17:57)</a>:</h4>
<p>The core spec <em>does</em> declare POST as mandatory.</p>



<a name="234896004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234896004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234896004">(Apr 16 2021 at 17:57)</a>:</h4>
<p>And I don't think we can relax that at this point...</p>



<a name="234897014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234897014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234897014">(Apr 16 2021 at 18:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234885719">said</a>:</p>
<blockquote>
<p>The intention was very much that servers would be allowed to NOT support GET - because there are environments that have architectural requirements (well-founded or not) that prohibit using GET.  We don't want to prevent those systems from being FHIR conformant.  The only mechanism you can count on ALL conformant systems supporting is POST.</p>
</blockquote>
<p>I was racting to this statement... I don't think you can "count" on "ALL conformant systems supporting is POST"</p>



<a name="234897081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234897081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234897081">(Apr 16 2021 at 18:03)</a>:</h4>
<p>If it doesn't support POST, it's not a conformant system.</p>



<a name="234897530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234897530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234897530">(Apr 16 2021 at 18:06)</a>:</h4>
<p>ah, that is news to me. where is that stated?</p>



<a name="234898995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234898995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234898995">(Apr 16 2021 at 18:17)</a>:</h4>
<p>search page seems to speak to GET and POST equally <a href="http://hl7.org/fhir/search.html">http://hl7.org/fhir/search.html</a></p>



<a name="234899421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234899421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234899421">(Apr 16 2021 at 18:20)</a>:</h4>
<p>well, if equal is (POST = 2 mentions) vs (GET =124 mentions)</p>



<a name="234899643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234899643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234899643">(Apr 16 2021 at 18:21)</a>:</h4>
<p>It baffles me that the intent would be for GET to be optional. The entire search spec is written around GET.</p>



<a name="234899731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234899731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234899731">(Apr 16 2021 at 18:22)</a>:</h4>
<p>I find on the http page is a hint about POST being mandatory - <a href="http://build.fhir.org/http.html#search">http://build.fhir.org/http.html#search</a></p>



<a name="234899763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234899763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234899763">(Apr 16 2021 at 18:22)</a>:</h4>
<div class="codehilite"><pre><span></span><code>Because of the way that some user agents and proxies treat GET and POST requests, in addition to the get based search method above, servers that support search SHALL also support a POST based search:
</code></pre></div>



<a name="234899852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234899852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234899852">(Apr 16 2021 at 18:23)</a>:</h4>
<p>I don't see how an explicit SHALL statement is a 'hint'?</p>



<a name="234899857"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234899857" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234899857">(Apr 16 2021 at 18:23)</a>:</h4>
<p>does this mean that an Implementation Guide can not forbid POST and mandate GET?</p>



<a name="234899912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234899912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234899912">(Apr 16 2021 at 18:23)</a>:</h4>
<p>We don't <em>want</em> GET to be optional, but in some environments, it's banned.  It would be non-conformant to ban POST.</p>



<a name="234899931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234899931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234899931">(Apr 16 2021 at 18:23)</a>:</h4>
<p>I say hint.. because it is passive voice, and at the very end of a oddly phrased statement</p>



<a name="234900097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234900097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234900097">(Apr 16 2021 at 18:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234899912">said</a>:</p>
<blockquote>
<p>We don't <em>want</em> GET to be optional, but in some environments, it's banned.  It would be non-conformant to ban POST.</p>
</blockquote>
<p>I think this is wrong. FHIR core should not have taken a position.</p>



<a name="234900474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234900474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234900474">(Apr 16 2021 at 18:28)</a>:</h4>
<p>not all uses of FHIR are PHI (Personal health information).     Many people know how to properly configure their web-servers to not log GET parameters.</p>



<a name="234903879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234903879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234903879">(Apr 16 2021 at 18:54)</a>:</h4>
<p>POST search is not used just for security/privacy reasons. The practical limits on a query string are orders of magnitude lower than the limits on a POST body. It makes good sense to have POST support required for servers, while GET is strongly recommended. "some servers will have this, other servers will have that" doesn't cut it in this case.</p>



<a name="234905415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234905415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234905415">(Apr 16 2021 at 19:06)</a>:</h4>
<p>(deleted)</p>



<a name="234905754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234905754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234905754">(Apr 16 2021 at 19:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234900474">said</a>:</p>
<blockquote>
<p>not all uses of FHIR are PHI (Personal health information).     Many people know how to properly configure their web-servers to not log GET parameters.</p>
</blockquote>
<p>"Many" is very relative...  Be careful about bias here.  People in your circle probably do know about this, but you're a security guy in a security-conscious group of experts.</p>



<a name="234908456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234908456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234908456">(Apr 16 2021 at 19:30)</a>:</h4>
<p>I am well aware of my credentials. But failure to configure your server is poor security.</p>



<a name="234908606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234908606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234908606">(Apr 16 2021 at 19:32)</a>:</h4>
<p>and those that can't protect logs, should not be given the responsibility to protect the data.... it is such a rediculous fallacy that a server can have PHI but can't protect http server log files.</p>



<a name="234908911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234908911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234908911">(Apr 16 2021 at 19:34)</a>:</h4>
<p>the size limits of GET vs POST are far more useful discussion.. . I don't think this is a reason to mandate POST, but it is a consideration that should be voiced.</p>



<a name="234909014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234909014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234909014">(Apr 16 2021 at 19:35)</a>:</h4>
<p>my biggest complain is that I am being told that it is non-conformant to FHIR for me to have an implementation guide that focuses on GET and does not include POST.</p>



<a name="234909454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234909454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234909454">(Apr 16 2021 at 19:39)</a>:</h4>
<blockquote>
<p>focuses on GET and <strong>does not include</strong> POST</p>
</blockquote>
<p>or</p>
<blockquote>
<p>focuses on GET and <strong>prohibits</strong> POST</p>
</blockquote>
<p>?</p>
<p>There is a difference. If the latter, what would be the reason to prohibit POST searches?</p>



<a name="234909804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234909804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234909804">(Apr 16 2021 at 19:42)</a>:</h4>
<p>I agree that I was tactful in my words... but I don't think there is a difference.   as absence of a statement is often seen as a strong implication.</p>



<a name="234909920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234909920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234909920">(Apr 16 2021 at 19:43)</a>:</h4>
<p>plus, I was about to add a shall-not to an implementation guide... as asked for by that community... but now need to reverse direction and force that community  to do POST searches that they don't want to be forced to do.</p>



<a name="234910141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234910141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234910141">(Apr 16 2021 at 19:45)</a>:</h4>
<p>No one is forcing them to <strong>do</strong> POST searches. The <strong>server</strong> must support POST searches. Why would an implementation guide promote incomplete server implementations?</p>



<a name="234910509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234910509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234910509">(Apr 16 2021 at 19:48)</a>:</h4>
<p>that is a confusing message... I am hearing that any search must be supported by way of POST search, not just by GET... right?    Thus I must tell the servers that they must implement POST search, not just GET search... right?</p>



<a name="234910669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234910669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234910669">(Apr 16 2021 at 19:49)</a>:</h4>
<p>I understand that this does not mean clients must be able to query by POST... but it does mean that servers must implement POST search, even when they will never be asked to do it in real-life.</p>



<a name="234911636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234911636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234911636">(Apr 16 2021 at 19:56)</a>:</h4>
<p>Yes, servers must support POST search - this is a basic property of a FHIR server. </p>
<p>A FHIR implementation guide that describes some type of use of the FHIR RESTful API  expects that there will be FHIR servers to support that API. We don't want to promote the illusion that the implementation of a FHIR server is trivial, and does not require rigorous software engineering. The existence of reference implementations and various products already satisfies that requirement by default. </p>
<p>If someone needs to create a FHIR server from scratch, the ability to support search via POST doesn't seem to be such an onerous requirements compared to the overall requirements a FHIR server needs to meet.</p>



<a name="234913053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234913053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234913053">(Apr 16 2021 at 20:07)</a>:</h4>
<p>It just seems odd to me that all the documentation is on GET and I am confident that all the testing is using GET... yet we are comfortable that POST is what we mandate.</p>



<a name="234913502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234913502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234913502">(Apr 16 2021 at 20:10)</a>:</h4>
<p>POST is the common denominator.  We <em>can</em> mandate support for that everywhere (and have).  We can't do the same for GET.  And whether anyone feels we ought to or not, we did, and given that the requirement is normative, it's not something we can reasonably revisit - nor have I heard a strong reason why we should try.</p>



<a name="234913960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234913960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234913960">(Apr 16 2021 at 20:14)</a>:</h4>
<p>John does make a good point though - do certification testing actually test this? I will ask in the Inferno stream...</p>



<a name="234914074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234914074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234914074">(Apr 16 2021 at 20:15)</a>:</h4>
<p>According to our experience in real life it is also a POST for clients due to organisational regulations. We had this discussion already for IHE MHD implementations in a project (MHD implies GET for search queries). Since <a href="https://profiles.ihe.net/ITI/">IHE MHD is in public comment phase</a> added just a comment to <a href="https://github.com/IHE/ITI.MHD/issues/39">clarify</a>, thanks for that interesting discussion here!</p>



<a name="234915083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234915083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234915083">(Apr 16 2021 at 20:23)</a>:</h4>
<blockquote>
<p>John does make a good point though - do certification testing actually test this? I will ask in the Inferno stream...</p>
</blockquote>
<p>No. We are well aware of this though it will in by the next release.  Anecdotally, if an IG doesn't (re)state that POST is required, this requirement will be missed.  FHIR is a big spec, and much of it is optional depending on use case.</p>



<a name="234917688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234917688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234917688">(Apr 16 2021 at 20:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191478">Oliver Egger</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234914074">said</a>:</p>
<blockquote>
<p>According to our experience in real life it is also a POST for clients due to organisational regulations. We had this discussion already for IHE MHD implementations in a project (MHD implies GET for search queries). Since <a href="https://profiles.ihe.net/ITI/">IHE MHD is in public comment phase</a> added just a comment to <a href="https://github.com/IHE/ITI.MHD/issues/39">clarify</a>, thanks for that interesting discussion here!</p>
</blockquote>
<p>yup, I noticed... drat</p>



<a name="234917920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234917920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234917920">(Apr 16 2021 at 20:45)</a>:</h4>
<p>I am still worried that we are driving this use of POST for search purely academically... adding testing is not changing that academic point... what we need to understand is.. clients support for POST search..</p>



<a name="234918480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234918480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234918480">(Apr 16 2021 at 20:49)</a>:</h4>
<p>I have had many discussions about the security fallacy... not helpful that it continues. (I am not saying it is 100% false, but rather that it is a configuration failure by incompetent security. Either protect your logs, or configure your auditing properly. I prefer you protect your logs).</p>



<a name="234918769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234918769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234918769">(Apr 16 2021 at 20:51)</a>:</h4>
<p>Right.  But that's only one of the reasons.  The length limits of URLs is a more valid reason</p>



<a name="234931438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234931438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234931438">(Apr 16 2021 at 22:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192576">Robert Scanlon</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234915083">said</a>:</p>
<blockquote>
<blockquote>
<p>John does make a good point though - do certification testing actually test this? I will ask in the Inferno stream...</p>
</blockquote>
<p>No. We are well aware of this though it will in by the next release.  Anecdotally, if an IG doesn't (re)state that POST is required, this requirement will be missed.  FHIR is a big spec, and much of it is optional depending on use case.</p>
</blockquote>
<p>See this update for the next version of US Core: <a href="http://build.fhir.org/ig/HL7/US-Core/general-guidance.html#search-syntax">http://build.fhir.org/ig/HL7/US-Core/general-guidance.html#search-syntax</a>.  Which I now realized  misinterprets the shoddy conformance language in the FHIR spec.  So based on this conversation it will have to say <strong>SHALL</strong> POST and <strong>SHOULD</strong> GET (we will need to clarify the CapabilityStatement narrative too).</p>



<a name="234933620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234933620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234933620">(Apr 16 2021 at 23:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234894438">said</a>:</p>
<blockquote>
<p>If you feel the current wording needs clarification, please submit a change request.</p>
</blockquote>
<p><a href="http://jira.hl7.org/browse/FHIR-31912">FHIR#31912</a></p>



<a name="234995452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/234995452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#234995452">(Apr 17 2021 at 15:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> said:</p>
<blockquote>
<p>So based on this conversation it will have to say SHALL POST and SHOULD GET (we will need to clarify the CapabilityStatement narrative too).</p>
</blockquote>
<p>This feels more like a substantive change to US Core requirements from v3.1.1 to v3.2.0, and not just  a clarification.  I know this wasn't necessarily your intent, but the language in the <a href="http://hl7.org/fhir/us/core/general-guidance.html#search-syntax">search syntax section</a>, and the hundreds of GET-based search examples throughout the guide (without POST being mentioned anywhere), very strongly implies that search by GET is a requirement.  I absolutely do not think impacts to test tooling should drive your decision here, but to illustrate one downstream effect of this change, we will have to alter all of our tests to no longer ever rely on search by GET working, because from our perspective it is no longer required.  I suspect most clients would need to do the same.</p>



<a name="235003026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235003026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235003026">(Apr 17 2021 at 17:08)</a>:</h4>
<p>US Core is free to mandate support for GET too.  The key thing is that it can't loosen the mandate to support POST that's already in the core spec.</p>



<a name="235010122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235010122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235010122">(Apr 17 2021 at 19:04)</a>:</h4>
<p>Or mandate support for search by GET for only the specific searches required by the US Core CapabilityStatement, but make no statement about other searches that may be supported by the API.  Then you can objectively look at the finite set of searches and ask the question: "do these searches realistically need more characters than what you can fit in a GET request?" and maybe "do the search parameters themselves constitute PHI?"</p>



<a name="235013415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235013415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235013415">(Apr 17 2021 at 20:00)</a>:</h4>
<p><span class="user-mention" data-user-id="192576">@Robert Scanlon</span>  my concern was that in order to comply with the base spec we would need to add this language and I agree what you proposed is a better solution.  But I have concerns that implementers are going to push back and say that they only support  POST.  But I imagine that pushback will be experienced by your team first.</p>



<a name="235173486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235173486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235173486">(Apr 19 2021 at 12:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> -- understood, adding constraints on top of base FHIR (in this case, search by GET is required, not optional) needs to be done intentionally and with an understanding of why the flexibility in the base spec isn't needed for the use cases that an IG applies to.  And if you don't feel like you have that yet, then you shouldn't have that constraint.  I do think that you can make a good case that this constraint  is appropriate, but it may take some work to properly validate it, and if may feel safer to stick with what base FHIR says.</p>



<a name="235175940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235175940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235175940">(Apr 19 2021 at 13:01)</a>:</h4>
<p>The problem is that  I believe US Core very strongly implies that it already added the constraint "GET is required, on top of whatever other requirements come from the base spec" , and at this point stating that it doesn't will incur some costs.  But that is just my opinion, and "very strongly implies" doesn't mean anything from a conformance perspective, and even if it did you are still free to change it in v3.2.0.</p>



<a name="235177766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235177766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235177766">(Apr 19 2021 at 13:13)</a>:</h4>
<p>If you state that GET isn't a requirement, I do think that you should rewrite US Core so that search requirements within the Capability Statement are presented in terms of POST for clarity's sake.  It's a lot of changes, and a pain, because the POST syntax isn't nearly as concise.  But that's why we like GET, it is concise.  Also, do you need to add a constraint on top of the flexibility in search by post so that servers can't do something strange, like support POST but decide to ignore the body and only obey the querystring parameters?</p>



<a name="235177943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235177943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235177943">(Apr 19 2021 at 13:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234918480">said</a>:</p>
<blockquote>
<p>I have had many discussions about the security fallacy... not helpful that it continues. (I am not saying it is 100% false, but rather that it is a configuration failure by incompetent security. Either protect your logs, or configure your auditing properly. I prefer you protect your logs).</p>
</blockquote>
<p>I'm sure that your system has correct controls on your logs. I'm sure mine does. But what about those I'm not control of, ie every router and sniffer between the client and me, treating their logs as might contain PHI. Do you think Starbucks treats their logs as protected?</p>



<a name="235178056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235178056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235178056">(Apr 19 2021 at 13:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="335936">Daniel Venton</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/235177943">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/234918480">said</a>:</p>
<blockquote>
<p>I have had many discussions about the security fallacy... not helpful that it continues. (I am not saying it is 100% false, but rather that it is a configuration failure by incompetent security. Either protect your logs, or configure your auditing properly. I prefer you protect your logs).</p>
</blockquote>
<p>I'm sure that your system has correct controls on your logs. I'm sure mine does. But what about those I'm not control of, ie every router and sniffer between the client and me, treating their logs as might contain PHI. Do you think Starbucks treats their logs as protected?</p>
</blockquote>
<p>so you are communicating PHI without TLS?</p>



<a name="235178273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235178273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235178273">(Apr 19 2021 at 13:16)</a>:</h4>
<p>Does the URL parameters get encrypted now? I thought the url was only in plain text. If the URL is encrypted what is everybody's problem with using GET in the 1st place?</p>



<a name="235178346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235178346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235178346">(Apr 19 2021 at 13:17)</a>:</h4>
<p>see what I mean by a security fallacy... The URL has always been encrypted using https (TLS). ALWAYS.</p>



<a name="235178404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235178404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235178404">(Apr 19 2021 at 13:17)</a>:</h4>
<p>I learned something today, thanks!</p>



<a name="235183235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235183235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235183235">(Apr 19 2021 at 13:50)</a>:</h4>
<p>The whole TLS encryption point isn't a boolean "security: yes" thing.  You'll normally have TLS between the client and wherever you terminate the TLS connection, but you might terminate TLS near your front-door, and have non-TLS connections for some hops behind the front-end reverse proxy and the back-end FHIR server.  Depending on network architecture and what hops are involved with which parties, you may still have some areas that are not using TLS.  POST <em>can</em> add one layer to a defense-in-depth security posture.</p>



<a name="235187034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235187034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235187034">(Apr 19 2021 at 14:13)</a>:</h4>
<p>Operation has similar GET format, such as <code>ValueSet/$validate-code?url=xxx&amp;code=yyy&amp;system=zzz</code> Will this <code>SHALL POST SHOULD GET</code> thing apply to operation too?</p>



<a name="235194493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235194493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235194493">(Apr 19 2021 at 14:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191764">Cooper Thompson</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/235183235">said</a>:</p>
<blockquote>
<p>The whole TLS encryption point isn't a boolean "security: yes" thing.  You'll normally have TLS between the client and wherever you terminate the TLS connection, but you might terminate TLS near your front-door, and have non-TLS connections for some hops behind the front-end reverse proxy and the back-end FHIR server.  Depending on network architecture and what hops are involved with which parties, you may still have some areas that are not using TLS.  POST <em>can</em> add one layer to a defense-in-depth security posture.</p>
</blockquote>
<p>I don't disagree... but my point still  stands. You have chosen to not encrypt and thus you don't seem to care about the PHI in the body either. So there is no difference here. GET vs POST are identical.</p>



<a name="235346263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235346263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Keeler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235346263">(Apr 20 2021 at 13:48)</a>:</h4>
<p>I'm not sure why we're relitigating something that is decidedly not FHIR specific<br>
<a href="https://security.stackexchange.com/questions/233795/are-url-parameters-of-get-and-post-requests-over-https-secure">https://security.stackexchange.com/questions/233795/are-url-parameters-of-get-and-post-requests-over-https-secure</a><br>
<a href="https://stackoverflow.com/questions/3063530/whats-the-difference-between-get-and-post-encryption">https://stackoverflow.com/questions/3063530/whats-the-difference-between-get-and-post-encryption</a> <br>
<a href="https://stackoverflow.com/questions/499591/are-https-urls-encrypted">https://stackoverflow.com/questions/499591/are-https-urls-encrypted</a> </p>
<p>HTTPS protects GET and POST equally against man in the middle. Only the FQDN is really exposed (due to unencrypted SNI pre TLS 1.3).</p>
<p>Server logs have unencrypted URLs is the main point of contention. We need to think whether that's a real risk</p>



<a name="235383256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235383256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235383256">(Apr 20 2021 at 17:32)</a>:</h4>
<p>on this whole topic, is there a way to (in the capability statement) declare support for search as POST-only vs GET and POST?<br>
would that have to go in interaction.documentation?</p>



<a name="235386887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235386887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235386887">(Apr 20 2021 at 17:57)</a>:</h4>
<p>I will most likely put in documentation here for each SP defined in IG: </p>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">searchParam</span><span class="p">:</span>
            <span class="nt">definition</span><span class="p">:</span> <span class="p p-Indicator">&gt;-</span>
              <span class="no">http://hl7.org/fhir/us/core/SearchParameter/us-core-allergyintolerance-clinical-status</span>
            <span class="nt">documentation</span><span class="p">:</span>   <span class="c1">#&lt;&lt;&lt;&lt;&lt;&lt; put it here &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
</code></pre></div>



<a name="235387943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235387943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235387943">(Apr 20 2021 at 18:03)</a>:</h4>
<p>if you declare across the board then here:  CapabilityStatement.rest.documentation</p>



<a name="235424725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235424725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235424725">(Apr 20 2021 at 22:15)</a>:</h4>
<p><span class="user-mention" data-user-id="237342">@ryan moehrke</span> Not computably - at least not right now.  As documentation, it could show up a few places.</p>



<a name="235522859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235522859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235522859">(Apr 21 2021 at 14:48)</a>:</h4>
<p>I have submitted a request to reevaluate this with a request to relax. To at the very least allow an Implementation Guide to constrain out POST. Better to eliminate this misguided requirement and replace it with a design consideration.  <a href="https://jira.hl7.org/browse/FHIR-31943">https://jira.hl7.org/browse/FHIR-31943</a></p>



<a name="235535196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235535196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235535196">(Apr 21 2021 at 15:51)</a>:</h4>
<p>add to the fallacy that POST is better than GET.... that POST allows exactly the same encoding of the parameters on the URL... Thus without further refinement to forbid URL parameters, there exactly the same concern with POST as GET.</p>
<div class="codehilite"><pre><span></span><code>This has exactly the same semantics as the equivalent GET command. Note that in the POST variant, parameters may appear in both the URL and the body. Parameters have the same meaning in either place. Since parameters can repeat, putting them in both places is the same as repeating them (which is valid for some parameters and not for others).
</code></pre></div>



<a name="235537183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235537183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235537183">(Apr 21 2021 at 16:04)</a>:</h4>
<p>Once again, POST is required to work around URL size limitations. You cannot predict or force a limit on the URL size, since the base is variable. All FHIR servers support search over POST. There is no value in IGs being able to constrain out POST searches.</p>



<a name="235538466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235538466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235538466">(Apr 21 2021 at 16:12)</a>:</h4>
<p><span class="user-mention" data-user-id="192685">@Vassil Peytchev</span> that only works if you require POST search parameters in the body... our spec allows them on the URL.</p>



<a name="235538546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235538546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235538546">(Apr 21 2021 at 16:13)</a>:</h4>
<p>I am not at all opposed to making a strong statement about considerations for size.. that is a very legitimate need.</p>



<a name="235542023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235542023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235542023">(Apr 21 2021 at 16:35)</a>:</h4>
<p>Once a SHALL statement is normative, I don't know that we have a mechanism that would allow that to be relaxed - and we'd certainly need a compelling reason to try to do that.  Right now, all I've heard is "some people might maybe have issues with it" rather than "this is a serious issue here, here and here".</p>



<a name="235544366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/235544366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#235544366">(Apr 21 2021 at 16:51)</a>:</h4>
<p>relaxing a requirement is not a breaking change. right? (Especially one that few knew about)<br>
I have stated my case in the jira ticket <a href="http://jira.hl7.org/browse/FHIR-31943">FHIR-31943</a><br>
I have offered many potential paths.<br>
Others are encouraged to weight in</p>



<a name="236454186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/236454186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jame Dang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#236454186">(Apr 28 2021 at 05:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> : If I understand well, it is not possible to search with extension in HAPI now (I'm sorry if wrong topic)?</p>



<a name="236500772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/236500772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#236500772">(Apr 28 2021 at 12:50)</a>:</h4>
<p>HAPI does support search by POST if that's what you mean.</p>



<a name="236515370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/236515370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#236515370">(Apr 28 2021 at 14:23)</a>:</h4>
<p>You would have to define a new SearchParameter instance to allow search by the desired extension.  However, so long as you do that and register it with the HAPI server, HAPI will support the search.</p>



<a name="239154932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/239154932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#239154932">(May 17 2021 at 20:29)</a>:</h4>
<p>with a POST based search. what is the Content-Type header to hold? Is <code>application/x-www-form-urlencoded</code>?  This is defined as the encoding, but is not clear it is defined to be the content-type header value</p>



<a name="240727413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/240727413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#240727413">(May 29 2021 at 23:30)</a>:</h4>
<p>Sorry to bring this topic back. The resolution for <a href="http://jira.hl7.org/browse/FHIR-18551">FHIR-18551</a> is not aligned with what we discussed here.. Quote the resolution</p>
<blockquote>
<p>In section 3.1.1.2, right in front of the paragraph starting "The server determines which of the set of resources...", will add a new paragraph stating:</p>
<p>Conformant FHIR servers SHALL support both the GET and POST-based mechanism for all FHIR queries they support.</p>
</blockquote>
<p>Since this is an old ticket which was resolved two years ago, I am wondering if the resolution is still correct based on the discussion here that POST search is mandatory and GET search is optional.<br>
<span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="240731625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/240731625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#240731625">(May 30 2021 at 01:33)</a>:</h4>
<p>I'm a bit confused about how we thought we could make GET mandatory given that R4 was already normative?</p>



<a name="240733122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/240733122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#240733122">(May 30 2021 at 02:17)</a>:</h4>
<p>I think, the ticket was based on the assumption that GET was already mandatory by FHIR spec. The resolution was to add POST as mandatory also. It is the same misunderstanding at the beginning of this thread.</p>



<a name="240733251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/240733251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#240733251">(May 30 2021 at 02:20)</a>:</h4>
<p>(deleted)</p>



<a name="240733812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/240733812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#240733812">(May 30 2021 at 02:38)</a>:</h4>
<p>I don't think we can make GET mandatory - too many organizations have policies (sensible or not) that prohibit it.</p>



<a name="240734169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/240734169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#240734169">(May 30 2021 at 02:50)</a>:</h4>
<p>That is my question about this resolution. Should we reopen it?</p>



<a name="240736916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/240736916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#240736916">(May 30 2021 at 04:09)</a>:</h4>
<p>I think so.  Can you add it to our agenda?</p>



<a name="240757444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/240757444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#240757444">(May 30 2021 at 14:08)</a>:</h4>
<p>done</p>



<a name="240936745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/240936745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#240936745">(Jun 01 2021 at 12:55)</a>:</h4>
<p>Neither should be mandatory in FHIR core.</p>



<a name="240944851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/240944851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#240944851">(Jun 01 2021 at 13:53)</a>:</h4>
<p>POST is mandatory.  It's a SHALL that's normative.</p>



<a name="250061440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250061440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kate Dech <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250061440">(Aug 19 2021 at 23:31)</a>:</h4>
<p>(Sorry-NotSorry for resurrecting this thread!)</p>
<p>When you use POST for a search, and you return a bundle that must have a the self-link (to communicate back the parameters used in the search)...can you expose all of the query parameters as a URL even though it was received as body using a POST command? Are users expecting that a self-link is executable?<br>
Thanks</p>
<p><span class="user-mention" data-user-id="217847">@Mona O</span> , <span class="user-mention" data-user-id="270256">@Bapi Behera</span></p>



<a name="250074332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250074332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250074332">(Aug 20 2021 at 03:33)</a>:</h4>
<p>That's actually a really good question.  I'm assuming the intent is that the 'self' link is always expressed as a GET, regardless of how the search is invoked.  However, we should definitely discuss that and, whatever the answer is, make it explicit in the specification.  <span class="user-mention" data-user-id="217850">@Kate Dech</span>, can you submit a change request on this issue?</p>



<a name="250075205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250075205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250075205">(Aug 20 2021 at 03:49)</a>:</h4>
<p>(agreed, good question! Similar question applies to next/prev links, especially to the extent that they're repeating params rather than totally opaque structures.)</p>



<a name="250075667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250075667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250075667">(Aug 20 2021 at 03:58)</a>:</h4>
<p>I feel like that's the only option available, put the query params in the URL. We had the same consideration when trying to define a gRPC FHIR API where the query goes in its own field - the client is going to have to decipher the self/next/etc. links and move the query params somewhere else to formulate its next request.</p>



<a name="250075826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250075826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250075826">(Aug 20 2021 at 04:00)</a>:</h4>
<p>I think we should clarify that explicitly, but also consider whether there's some different path we could be considering. It seems like a burden on the client to expect that they can decipher the URL when we haven't defined exactly what it contains.</p>



<a name="250077484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250077484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250077484">(Aug 20 2021 at 04:36)</a>:</h4>
<p>With next/prev, we also need to clarify whether - if the next/prev are expressed as GET, is the client allowed to invoke them with POST - and must the server accept that.</p>



<a name="250077649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250077649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250077649">(Aug 20 2021 at 04:40)</a>:</h4>
<p>is allowed to invoke them as a POST with the query parameters, or as a POST with the parameters in the body, or both?</p>



<a name="250078553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250078553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250078553">(Aug 20 2021 at 05:03)</a>:</h4>
<p>no need to decipher, simply to convert to a POST. Though for most servers, there's no reason not to do a get (unfortunately, though, that's not something that can be relied on)</p>



<a name="250111074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250111074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250111074">(Aug 20 2021 at 12:30)</a>:</h4>
<p>Given that one of the reasons for POST search is the size limit on URLs, it seems that we should at least mention that the URLs in the response Bundle may have to be converted to POST with parameters in the body. Unless, as Paul mentioned, we can come up with an alternative approach.</p>



<a name="250111376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250111376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250111376">(Aug 20 2021 at 12:34)</a>:</h4>
<p>sigh... and all this because of a fallacy about POST being more secure than GET.</p>



<a name="250111601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250111601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250111601">(Aug 20 2021 at 12:36)</a>:</h4>
<blockquote>
<p>size limit on URLs</p>
</blockquote>
<ul>
<li>they do exist.</li>
</ul>



<a name="250111785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250111785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250111785">(Aug 20 2021 at 12:38)</a>:</h4>
<p>I did not disagree with the size limit. I disagree with the "POST being more secure than GET"  --- I was very specific</p>



<a name="250116396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250116396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250116396">(Aug 20 2021 at 13:21)</a>:</h4>
<p>Size limits on URLs shouldn't be an issue for next/previous, so the only reason for <em>those</em> being pushed into POST would be organizational policy.</p>



<a name="250117930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250117930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250117930">(Aug 20 2021 at 13:35)</a>:</h4>
<blockquote>
<p>no need to decipher, simply to convert to a POST. Though for most servers, there's no reason not to do a get (unfortunately, though, that's not something that can be relied on)</p>
</blockquote>
<p>As Paul points out above, we need to specify what convert means. A post with query parameters is a pretty unusual construct, but it's technically valid. Is that what we mean? Or do we mean the clients are parts the query parameters and turn them into form parameters when posting?</p>



<a name="250118258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250118258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250118258">(Aug 20 2021 at 13:37)</a>:</h4>
<p>or just using POST with URL parameters... effectively not using the POST body... which is allowed (note this has the same "security" problem that GET is "said to have")</p>



<a name="250118478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250118478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250118478">(Aug 20 2021 at 13:39)</a>:</h4>
<p>(And to Vassil's point,  it faces the same URL length limitations that GET is said to have.)</p>



<a name="250118538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250118538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250118538">(Aug 20 2021 at 13:40)</a>:</h4>
<p>can we just stop this charade?  POST has important benefits (size being one).</p>



<a name="250118577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250118577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250118577">(Aug 20 2021 at 13:40)</a>:</h4>
<p>Sorry what is the charade?</p>



<a name="250118620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250118620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250118620">(Aug 20 2021 at 13:40)</a>:</h4>
<p>Are you saying that fhir should drop support for either get or post?</p>



<a name="250118725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250118725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250118725">(Aug 20 2021 at 13:41)</a>:</h4>
<p>The charade is that POST is more secure than GET, and this is why POST is mandated and GET is optional (for searches).</p>



<a name="250118769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250118769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250118769">(Aug 20 2021 at 13:41)</a>:</h4>
<p>POST is definitely needed</p>



<a name="250118843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250118843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250118843">(Aug 20 2021 at 13:42)</a>:</h4>
<p>And the question on the thread is about how to support it best. I don't see a charade.</p>



<a name="250118875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250118875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250118875">(Aug 20 2021 at 13:42)</a>:</h4>
<p>Not the original thread</p>



<a name="250118975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250118975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250118975">(Aug 20 2021 at 13:43)</a>:</h4>
<p>I started this when I realized that FHIR core MANDATES POST and indicates GET is optional (for searches).</p>



<a name="250119125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250119125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250119125">(Aug 20 2021 at 13:44)</a>:</h4>
<p>that mandate is just a bit too strong. If GET is not pushed to the background, then there would not be questions like the new one on Bundle encoding and next/prev</p>



<a name="250119163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250119163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250119163">(Aug 20 2021 at 13:44)</a>:</h4>
<p>Sorry, I've just been talking about the discussion that started here yesterday, about how to populate things like self links and next links in a search responsible; the earlier discussion about mandatory support for GET/POST based search was already brought to FHIR Infrastructure, according to the notes above.</p>



<a name="250119259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250119259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250119259">(Aug 20 2021 at 13:45)</a>:</h4>
<p>and I still think we will continue to come up against issues like this.. all over a silly misguided policy based on a fallacy.</p>



<a name="250119378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250119378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250119378">(Aug 20 2021 at 13:46)</a>:</h4>
<p>yes this self/next/prev does need to be addressed related to POST.. yes, i understand that is regardless of the mandate/optionality.</p>



<a name="250119638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250119638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250119638">(Aug 20 2021 at 13:48)</a>:</h4>
<p>Let's throw the difference between GET and POST when it comes to default caching into the mix too! :)</p>



<a name="250119675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250119675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250119675">(Aug 20 2021 at 13:49)</a>:</h4>
<p>note, I am also interested in this encoding question because I have the same problem when recording a search in an AuditEvent</p>



<a name="250119852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250119852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250119852">(Aug 20 2021 at 13:50)</a>:</h4>
<p>my only point is that FHIR core should have never said one way or the other... the statement of preference should be an IG scope.</p>



<a name="250120890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250120890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250120890">(Aug 20 2021 at 13:59)</a>:</h4>
<p>FHIR mandates POST because everything can be done with POST and only some things can be done with GET.  It was also mandated because some organizations mandate POST (for good reason or not doesn't matter) but we couldn't find any organizations that mandate GET.  By requiring everyone support POST, we maximize interoperability.  It wasn't about fostering false beliefs around security.</p>



<a name="250120897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250120897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250120897">(Aug 20 2021 at 13:59)</a>:</h4>
<p>The problem I see if you allow individual IGs to specify which operations shall be supported.... Company has to comply with 2 different IGs. IG A says SHALL GET and SHALL NOT POST and IG B says SHALL NOT GET and SHALL POST. What does Company do, stand up 2 different servers to handle different IGs? What if an IG says SHALL support GET but a governmental authority prohibits it?</p>
<p>What if Base FHIR said, "All compliant FHIR servers SHALL support both GET and POST for searches, unless local regulations prohibit their use. Each server SHALL indicate via their /metadata which operations are supported. (perhaps metadata already does?)" By having the search operations supported in the metadata, at least a client would know how to communicate with the server.</p>



<a name="250130437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250130437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250130437">(Aug 20 2021 at 15:09)</a>:</h4>
<p>Can IG nullify a SHALL in FHIR base spec (Server SHALL support POST search)? I doubt about that.</p>
<blockquote>
<p>All compliant FHIR servers SHALL support both GET and POST for searches, unless local regulations prohibit their use. </p>
</blockquote>
<p>That basically change the SHALL to a SHOULD because anyone can use that "unless" part as an excuse for not supporting one of them</p>



<a name="250131011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250131011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kate Dech <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250131011">(Aug 20 2021 at 15:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> : <a href="http://jira.hl7.org/browse/FHIR-33220">FHIR-33220</a> has been created for this. </p>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> - we didn't have the same issue with the pagination because the link didn't have to be understood to be executable. We  encrypted the parameters in the page links. As a server receiving it, we understood what they include. But the self link was more problematic because we are trying to communicate back the parameters actually used.</p>



<a name="250131588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250131588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250131588">(Aug 20 2021 at 15:17)</a>:</h4>
<blockquote>
<p>we didn't have the same issue with the pagination because the link didn't have to be understood to be [introspectable by clients]</p>
</blockquote>
<p>That's fair; it still seems worth documenting at least if clients are expected to follow next/prev links via GET even if the original search was via POST.</p>



<a name="250131918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250131918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250131918">(Aug 20 2021 at 15:20)</a>:</h4>
<p>"expected to follow next/prev links via GET" or "allowed to choose whether to follow next/prev links via GET or POST"?</p>



<a name="250131943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250131943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250131943">(Aug 20 2021 at 15:20)</a>:</h4>
<p>Right, that's a critical question and we need to be clear.</p>



<a name="250131955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250131955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250131955">(Aug 20 2021 at 15:20)</a>:</h4>
<p>or is there a way the server can indicate that POST should be used</p>



<a name="250132045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250132045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250132045">(Aug 20 2021 at 15:21)</a>:</h4>
<p>If there's a choice: </p>
<ol>
<li>does it belong to the server or to the client?</li>
<li>If it belongs to the server, how does the client know?</li>
<li>How does a client turn a "next page" link into a POST? (presumably we want body params here, but we need to say)</li>
</ol>



<a name="250132192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250132192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250132192">(Aug 20 2021 at 15:22)</a>:</h4>
<p>I've updated <a href="https://jira.hl7.org/browse/FHIR-33220?focusedCommentId=190079&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-190079">my comment on the Jira issue</a> to capture this</p>



<a name="250133873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250133873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250133873">(Aug 20 2021 at 15:34)</a>:</h4>
<p>on next/prev links</p>
<blockquote>
<p>presumably we want body params here, but we need to say</p>
</blockquote>
<p>I actually didn't mean that. What I had in mind is that if I executed my original search using <code>method</code>, I could still use <code>method</code> for next/prev links. The server must ensure that the next/prev links are not too long  for its HTTP server to handle.</p>
<p>For <code>self</code> links, I think we need to note that the client must be aware of the possibility that the <code>self</code> url may be too long for the server to process, and therefore the client must be able to convert it into POST with params.</p>
<p>The open question for me is whether there is a way to actually represent the <code>self</code> link as a POST link with parameters.</p>



<a name="250137459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250137459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250137459">(Aug 20 2021 at 16:01)</a>:</h4>
<p>I have to wonder why the client, which presumably issued the initial request, would have decipher the self link in order to re-issue the request?</p>



<a name="250139032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250139032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250139032">(Aug 20 2021 at 16:13)</a>:</h4>
<blockquote>
<p>I have to wonder why the client, which presumably issued the initial request, would have decipher the self link in order to re-issue the request?</p>
</blockquote>
<p>The specific case we are pondering is when the client issues a POST search with the search parameters in the body. The <code>self</code> link cannot represent that, as it is just a URL.</p>



<a name="250152978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250152978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250152978">(Aug 20 2021 at 18:10)</a>:</h4>
<blockquote>
<p>I have to wonder why the client, which presumably issued the initial request, would have decipher the self link in order to re-issue the request?</p>
</blockquote>
<p><span class="user-mention" data-user-id="335936">@Daniel Venton</span> it's not so much that clients need to re-issue, but this is how clients can <em>understand</em> how the server processed their initial request (e.g., if the server had to ignore some params it didn't understand, the server omits these from the self link, to tell the client "here's the search I actually did for you")</p>



<a name="250153094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250153094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250153094">(Aug 20 2021 at 18:10)</a>:</h4>
<p>From <a href="http://build.fhir.org/search.html#errors">http://build.fhir.org/search.html#errors</a></p>
<blockquote>
<p>The client can determine what parameters the server used by examining the self link in the return (see below)</p>
</blockquote>



<a name="250169942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250169942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250169942">(Aug 20 2021 at 20:40)</a>:</h4>
<p>Not <em>loving</em> the idea, but we could define an extension with a <code>valueParameters</code> for released versions that has the processed key-value pairs in it.  That would allow servers to at least return proper context for values that are over their URL limit.</p>



<a name="250170300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250170300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250170300">(Aug 20 2021 at 20:44)</a>:</h4>
<p>er, <code>valueReference(Parameters[contained])</code>? That's tough.</p>



<a name="250170876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250170876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250170876">(Aug 20 2021 at 20:50)</a>:</h4>
<p>I think we've strayed off topic. The idea was about POST and could a client deconstruct the self link and be able to know how to do a POST vs a GET. I understand that a client might want to know which values it specified originally were ignored (or modified, _count). But I still don't see a reason why a client would have to deconstruct a self link and re-execute as POST or GET. Yes the client may have done a POST and the self link might read like a GET that doesn't mean it's going to be executed as a GET or deconstructed and reformed into a POST (if it happens to be too long to be executed as a GET).</p>



<a name="250172157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250172157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250172157">(Aug 20 2021 at 21:02)</a>:</h4>
<p>I think the current point is that it might be too big for the datatype of the self element</p>



<a name="250182437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250182437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250182437">(Aug 20 2021 at 23:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/250170300">said</a>:</p>
<blockquote>
<p>er, <code>valueReference(Parameters[contained])</code>? That's tough.</p>
</blockquote>
<p>One day I'm going to add <code>Parameters</code> as an option, so that I'll be right when I <em>repeatedly</em> try to do this.  ;-)</p>
<p>In reality, I'd probably change it to something like a <code>0..*</code> string that has a URL-Encoded KVP then.</p>



<a name="250763493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250763493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250763493">(Aug 26 2021 at 12:28)</a>:</h4>
<p><a href="http://build.fhir.org/http.html#paging">http://build.fhir.org/http.html#paging</a> says:</p>
<blockquote>
<p>The links are opaque to the client, have no dictated structure, and only the server understands them.</p>
</blockquote>
<blockquote>
<p>In the case of a search, the initial request may be made via a POST, but the follow up page requests will be made via GET requests. However servers SHOULD allow for a client to convert the follow up requests to be made via a POST.</p>
</blockquote>
<p>That means, it should be possible to issue a GET request using the opaque next link without any modification. If so the link has to satisfy the following requirements:</p>
<ol>
<li>don't be to long to work with any HTTP client and any intermediate HTTP server (which isn't in control of the FHIR server)</li>
<li>don't expose sensitive information</li>
<li>be also requestable with POST (but without modification)</li>
<li>be cache friendly (as a bonus and good HTTP citizen)</li>
</ol>
<p><span class="user-mention" data-user-id="217850">@Kate Dech</span> You said, that you encrypt the query params. That would satisfy 2. but not necessarily 1. </p>
<p>To satisfy 1. in all cases, I have no better idea as to implement it in a stateful way. That would mean that every search creates state which might complicate implementation and hurt performance.</p>
<p>Has someone an idea that will satisfy 1. but works without creating new state for every search?</p>



<a name="250769017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250769017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250769017">(Aug 26 2021 at 13:10)</a>:</h4>
<blockquote>
<p>Has someone an idea that will satisfy 1. but works without creating new state for every search?</p>
</blockquote>
<p>Wouldn't you want new state for every multi-page search for performance reasons?</p>



<a name="250771123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250771123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250771123">(Aug 26 2021 at 13:25)</a>:</h4>
<blockquote>
<ol start="2">
<li>don't expose sensitive information</li>
</ol>
</blockquote>
<p>No, sensitive information in GET URL are ok</p>



<a name="250774853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250774853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250774853">(Aug 26 2021 at 13:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192685">Vassil Peytchev</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/250769017">said</a>:</p>
<blockquote>
<blockquote>
<p>Has someone an idea that will satisfy 1. but works without creating new state for every search?</p>
</blockquote>
<p>Wouldn't you want new state for every multi-page search for performance reasons?</p>
</blockquote>
<p>In my implementation, I don't need to create state for multi-page searches. My database exposes explicit snapshots to my application, so all I need to track in order to ensure consistent paging is the identifier of the database snapshot. I put this identifier in the URL. So if you will, that snapshot identifier refers to state, but that state isn't create because of the search, it's created after every transaction (write). </p>
<p>So just storing the search params, because they don't fit in the URL, is additional state for me.</p>



<a name="250774953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250774953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250774953">(Aug 26 2021 at 13:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191912">Michele Mottini</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/250771123">said</a>:</p>
<blockquote>
<blockquote>
<ol start="2">
<li>don't expose sensitive information</li>
</ol>
</blockquote>
<p>No, sensitive information in GET URL are ok</p>
</blockquote>
<p>I thought that is one of the reasons for using POST instead of GET. Because URL's are usually logged but request bodies not.</p>



<a name="250775033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250775033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250775033">(Aug 26 2021 at 13:52)</a>:</h4>
<p>usually. Any intermediary can log the body.</p>



<a name="250775054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250775054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250775054">(Aug 26 2021 at 13:52)</a>:</h4>
<p>you don't secure stuff for what 'usually' happens</p>



<a name="250775143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250775143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250775143">(Aug 26 2021 at 13:52)</a>:</h4>
<blockquote>
<p>storing the search params, because they don't fit in the URL</p>
</blockquote>
<p>This feels like a fictional concern to me. What FHIR search would ever be longer than 1-2k?</p>



<a name="250775182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250775182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250775182">(Aug 26 2021 at 13:53)</a>:</h4>
<p>and if it is... reject it</p>



<a name="250775190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250775190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250775190">(Aug 26 2021 at 13:53)</a>:</h4>
<p>So what is the reason to use POST? What makes POST more 'secure'?</p>



<a name="250775236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250775236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250775236">(Aug 26 2021 at 13:53)</a>:</h4>
<p>POST is not more secure. As far as we are concerned.</p>



<a name="250775500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250775500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250775500">(Aug 26 2021 at 13:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179166-implementers/topic/Search.20via.20POST/near/250775143">said</a>:</p>
<blockquote>
<blockquote>
<p>storing the search params, because they don't fit in the URL</p>
</blockquote>
<p>This feels like a fictional concern to me. What FHIR search would ever be longer than 1-2k?</p>
</blockquote>
<p>We have the use case of expanded, say SNOMED concepts into a big or-search, because our FHIR server doesn't support modifiers like :below or :in.</p>



<a name="250775551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250775551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250775551">(Aug 26 2021 at 13:55)</a>:</h4>
<p>hah well, that could get long. So you'll have to make some decision then</p>



<a name="250786821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250786821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250786821">(Aug 26 2021 at 15:03)</a>:</h4>
<p>"Opaque" means "no standard way to parse", not "guaranteed to not contain sensitive information".</p>



<a name="250786982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250786982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250786982">(Aug 26 2021 at 15:04)</a>:</h4>
<p>POST is not more secure, but some implementers have policies that presume it is (because logs more typically capture URLs than POST bodies).</p>



<a name="250795982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250795982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250795982">(Aug 26 2021 at 16:00)</a>:</h4>
<p>But does that mean that implementers have to support the case where clients strip the query params of a next link and POST'in them to an endpoint of the remaining URL? Or does "opaque" count for the whole URL including the query params? If so and if a implementation ensures not to disclose any actual initial query params in the URL of the next link, than a GET would be safe.</p>



<a name="250801684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/250801684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#250801684">(Aug 26 2021 at 16:36)</a>:</h4>
<p>Ideally, previous/next links would always be accessed by GET.  But I can imagine some prev/next links repeating all of the search parameters and just adding on an offset or something (not best practice, due to problems with data changing between queries, but not prohibited) and then some security person freaking out because there are names, identifiers or other PHI in a URL and saying that next/prev links need to be traversed as POSTs too.  And therefore, it's something we should probably address in the specification.</p>



<a name="256245069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/256245069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Forbis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#256245069">(Oct 05 2021 at 13:29)</a>:</h4>
<p>We also support multi-ID searches to efficiently read resources in batches. With resource IDs maxing out at 64 characters, you can hit 1k characters with only 16 IDs in your search. For mechanisms like this, we pretty much NEED to use POST due to URL length limits. The self links returned by these bundles will not be accessible using GET for the same reason.</p>



<a name="260889663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/260889663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#260889663">(Nov 10 2021 at 01:49)</a>:</h4>
<p>In SearchWithPost if we implement parameters only in the URI or only in the body, is that conformant to the specifications or should the parameters be in both URI and the body? <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="260914990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/260914990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#260914990">(Nov 10 2021 at 02:44)</a>:</h4>
<p>A given parameter SHOULD only appear in one place.  If it appears in both places, then it's the same as if you'd repeated the parameter multiple times on the URL or in the body.  However, it's possible for some parameters to be in the URL and others to be in the body.</p>



<a name="260944142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/260944142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#260944142">(Nov 10 2021 at 04:18)</a>:</h4>
<p>Does that mean that servers are required to support such mix of URL and body parameters?</p>



<a name="260946601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/260946601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sridhar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#260946601">(Nov 10 2021 at 05:09)</a>:</h4>
<p>Thanks, <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span></p>



<a name="260962129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/260962129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#260962129">(Nov 10 2021 at 09:10)</a>:</h4>
<p><span class="user-mention" data-user-id="192685">@Vassil Peytchev</span> we've never said anything about that, but I think that a mix is inherent in the way HTTP works, and therefore expected. I'm interested to hear if you know of anything from elsewhere about this</p>



<a name="261067704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/261067704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#261067704">(Nov 10 2021 at 22:56)</a>:</h4>
<p>We do not support parameters in the URL for POST searches, and I am actually surprised that such a thing is done / expected- seems super-confusing that you can mix</p>



<a name="261068642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/261068642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#261068642">(Nov 10 2021 at 23:02)</a>:</h4>
<p>We support either body or URL parameters, but not mixed. I am curious if there are any clients that build POST searches in a mixed way.</p>



<a name="261074218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/261074218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#261074218">(Nov 11 2021 at 00:00)</a>:</h4>
<p>I support it because it comes naturally to people building form based solutions - the action attribute includes some parameters, the method is POST, and there's form variables. Bingo, you have mixed parameters</p>



<a name="261117494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20via%20POST/near/261117494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20via.20POST.html#261117494">(Nov 11 2021 at 10:45)</a>:</h4>
<p>What happens if the form in the POST body contains _filter?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
