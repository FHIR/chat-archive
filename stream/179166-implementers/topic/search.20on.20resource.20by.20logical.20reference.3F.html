---
layout: page
title: "FHIR Chat  · search on resource by logical reference? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html">search on resource by logical reference?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="214216438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214216438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Bosman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214216438">(Oct 22 2020 at 17:00)</a>:</h4>
<p>Let's say I have an Immunization that is on a FHIR server. That FHIR server does not have Patient resources.<br>
Every Immunization would always refer to its patient via a logical reference (i.e. a Reference.identifier with system X and value Y)<br>
Is it at all possible to construct a GET that would give me all the immunizations that have as their Patient a logical reference to system X and value Y or is this simply not possible?<br>
(I have read that a logical reference prevents chaining - is the conclusion my above scenario is not possible?)</p>



<a name="214216887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214216887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214216887">(Oct 22 2020 at 17:03)</a>:</h4>
<p>yes, Immunization?patient:identifier=X|Y - this is a modifier available in R4 reference search</p>



<a name="214217501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214217501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214217501">(Oct 22 2020 at 17:08)</a>:</h4>
<p>(ironically :identifier is one of the things the Google implementation doesn't support yet <span aria-label="cant talk" class="emoji emoji-1f637" role="img" title="cant talk">:cant_talk:</span> )</p>



<a name="214244676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214244676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214244676">(Oct 22 2020 at 20:35)</a>:</h4>
<p>You can search on .identifier, but you couldn't do an _include that matched on identifier, nor could you do chained searching based on identifier.  I.e. you couldn't search Immunization?patient.name=foo if the Immunization.patient just had Reference.identifier and not Reference.reference</p>



<a name="214281264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214281264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Bosman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214281264">(Oct 23 2020 at 07:24)</a>:</h4>
<p>Thanks! So just to be sure, an Immunization resource that is uploaded like this:<br>
&lt;Immunization xmlns="<a href="http://hl7.org/fhir">http://hl7.org/fhir</a>"&gt;<br>
[...]<br>
   &lt;patient&gt;<br>
      &lt;identifier&gt;<br>
         &lt;system value="X"/&gt;<br>
         &lt;value value="Y"/&gt;<br>
      &lt;/identifier&gt;<br>
   &lt;/patient&gt;<br>
[...]<br>
&lt;/Immunization&gt;<br>
-&gt; If now I would like to do a GET to give me all the Immunization that have their Patient only defined by their logical reference identifier X|Y -&gt; this is not possible.</p>



<a name="214313680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214313680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214313680">(Oct 23 2020 at 13:34)</a>:</h4>
<p>No, as Paul said, it is possible using GET [base]/Immunization?patient:identifier=X|Y<br>
<strong>As long as</strong> the particular server implementation supports that type of search.</p>



<a name="214315841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214315841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214315841">(Oct 23 2020 at 13:53)</a>:</h4>
<p>patient.identifier, not patient:identifier ..</p>



<a name="214316534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214316534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214316534">(Oct 23 2020 at 14:00)</a>:</h4>
<blockquote>
<p>patient.identifier, not patient:identifier ..</p>
</blockquote>
<p>Oh no - can be either (and the client has to figure out which one is the right one)</p>



<a name="214320543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214320543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214320543">(Oct 23 2020 at 14:30)</a>:</h4>
<p>Right.  Patient:identifier matches when Reference.identifier is present.  Patient.identifier matches when Reference.reference is present and the resolved resource has an identifier</p>



<a name="214320928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214320928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214320928">(Oct 23 2020 at 14:33)</a>:</h4>
<blockquote>
<p>Patient:identifier matches when Reference.identifier is present. Patient.identifier matches when Reference.reference is present </p>
</blockquote>
<p>Except that the client has to to do the search before seeing the resources, so it has to 'know' already (it would be so much better that patient.identifier always worked, but that ship has sailed I guess)</p>



<a name="214321174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214321174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214321174">(Oct 23 2020 at 14:34)</a>:</h4>
<p>surely we can move this complexity to the server... right?</p>



<a name="214321596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214321596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214321596">(Oct 23 2020 at 14:38)</a>:</h4>
<p>Someone could submit a change request that would propose that servers treat the chaining approach and the qualifier approach as covering both.  Whether we can get away with that post-normative, I'm not sure</p>



<a name="214322447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214322447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214322447">(Oct 23 2020 at 14:44)</a>:</h4>
<p>Ah, yes, reference.identifier again. I wonder how often that's actually used in production systems (usage seems to be very low (but I could be wrong), so we're skipping this in our FHIR training courses. Not part of the 80% of the 80% ;-) )</p>



<a name="214323229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214323229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214323229">(Oct 23 2020 at 14:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191372">@René Spronk</span> In Saskatchewan, where they are converting from a V3 pharmacy system to FHIR, they actually use reference.identifier quite a bit.  In this architecture, the data comes into the V3 system and that kicks off a process to add the new data to FHIR.  Since the V3 system doesn't know the FHIR ids of the data, we use reference.identifier to reference the various resources, eg. Patient, Practitioner, Dispense.  But I do agree that this is not your normal case.</p>



<a name="214323988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214323988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214323988">(Oct 23 2020 at 14:57)</a>:</h4>
<p>Hmm - so if you had a Bundle of these resources, how would one populate fullUrl ? some urn: that's totally useless because it'll never be used for inter-resource-referencing ?</p>



<a name="214324677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214324677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214324677">(Oct 23 2020 at 15:02)</a>:</h4>
<p>they are batch Bundles, so no fullUrl is needed.</p>



<a name="214326340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214326340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214326340">(Oct 23 2020 at 15:15)</a>:</h4>
<p><a href="https://jira.hl7.org/browse/FHIR-29410">https://jira.hl7.org/browse/FHIR-29410</a></p>



<a name="214328491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214328491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214328491">(Oct 23 2020 at 15:33)</a>:</h4>
<p>Also patient:identifier matches in situations where Reference.identifier is populated and the server has a resource with that identifier (so the server could, in theory, have translated that reference to a local reference when it was created) and also where Reference.identifier is populated with something that doesn't correspond to a resource on the server. There might be different solutions depending on which case we're in.</p>



<a name="214335125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/214335125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#214335125">(Oct 23 2020 at 16:30)</a>:</h4>
<p>Reference.identifier is pretty new, so most systems haven't had a chance to use it yet.  It's relevant when you're trying to point at stuff that doesn't have a RESTful endpoint - which in legacy environments is somewhat common.</p>



<a name="225001302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/225001302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#225001302">(Feb 03 2021 at 11:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> how 'new' are we talking here? Is it something that also applies to STU3? I would have imagined that eg. the following search: <code>.../Communication?sender.identifier=1|2</code> should give me results that would contain the following eg.:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;Communication&quot;,
  ...
  &quot;sender&quot;: {
    &quot;identifier&quot;: {
      &quot;system&quot;: &quot;1&quot;,
      &quot;value&quot;: &quot;2&quot;
    }
  }
}
</code></pre></div>



<a name="225003355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/225003355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#225003355">(Feb 03 2021 at 11:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> is that functionality intended to be supported by HAPI in the future?</p>



<a name="225017324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/225017324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#225017324">(Feb 03 2021 at 13:52)</a>:</h4>
<p>No, to get that you have to use <code>../Communication?sender:identifier=1|2</code></p>



<a name="225047141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/225047141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#225047141">(Feb 03 2021 at 17:11)</a>:</h4>
<p>Reference.identifier was only introduced in R4.  <span class="user-mention" data-user-id="191912">@Michele Mottini</span> is right.  sender.identifier=1|2 would only find a match if the Reference specified a Reference.reference that, when resolved, was to a resource with identifier system and value of 1,2.  It totally ignores Reference.identifier.</p>



<a name="225047308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/225047308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#225047308">(Feb 03 2021 at 17:12)</a>:</h4>
<p>And FHIR-I just confirmed that it <em>should</em> ignore Reference.identifier.  If you want to search by either, you need to do two searches, because otherwise the server has no way of communicating what searches it actually supports.</p>



<a name="225067412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/225067412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#225067412">(Feb 03 2021 at 19:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191912">@Michele Mottini</span> / <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> point taken,  with the <code>':'</code>part. <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> regarding </p>
<blockquote>
<p>Reference.identifier was only introduced in R4</p>
</blockquote>
<p>-you mean as search parameter, right - because as a datatype, the  reference datatype definitely contained the <code>identifier</code>-part in STU3.</p>



<a name="225076674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/225076674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#225076674">(Feb 03 2021 at 20:30)</a>:</h4>
<p>Actually, I meant being introduced at all, but looks like I was wrong.  I guess it was introduced at the very tail end of STU3.  The :identifier search qualifier was definitely R4.</p>



<a name="225145446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%20on%20resource%20by%20logical%20reference%3F/near/225145446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.20on.20resource.20by.20logical.20reference.3F.html#225145446">(Feb 04 2021 at 11:09)</a>:</h4>
<p>Just to be clear here, I'm not looking for an actual chained search. I don't expect the server holding the Communication instance, to also hold the actual Device instance. I'm only trying to identify the Communication instance which have a certain logical reference. But as you mention <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , I can only see the <code>:identifier</code> as part of R4, not STU3. I guess I'll have to dig into the server implementation and either provide a custom search paramter or expand the allowed use of <code>:identifier</code>.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
