---
layout: page
title: "FHIR Chat  · How to create a variable in FHIR mapping language · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20create.20a.20variable.20in.20FHIR.20mapping.20language.html">How to create a variable in FHIR mapping language</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="186404196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20create%20a%20variable%20in%20FHIR%20mapping%20language/near/186404196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Han <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20create.20a.20variable.20in.20FHIR.20mapping.20language.html#186404196">(Jan 23 2020 at 16:11)</a>:</h4>
<p>Hi guys, I have the following code snippet which does not run. Please help</p>
<p>My goal is to create a variable to store uuid() so that I can use it in multiple locations inside my MessageHeader. Is there a way to do this? </p>
<p>Also, there are places where I just want to set a target value equal to a constant. However, I get errors running the mapping unless I put something to the left of the '-&gt;' operator. <br>
For example, I want to set b1.resourceType = 'MessageHeader'. But to do this I have to write some useless statement like<br>
'MSH.9 as _' on the left, which doesn't do anything. </p>
<p>group message_header(source source : TLeft, target target : TRight) {<br>
    source.VXU_V04 as a -&gt; target.MessageHeader as a1 then {<br>
         -&gt; uuid() as id then {<br>
            a.MSH as MSH -&gt; a1.resource as b1 then {<br>
                MSH.9 as _ -&gt; b1.resourceType = 'MessageHeader';<br>
                MSH.9 as _ -&gt; <a href="http://b1.id" target="_blank" title="http://b1.id">b1.id</a> = id;<br>
                MSH.9 as c -&gt; b1.event as c1 then {<br>
                    c.1 -&gt; c1.version = 'v1';<br>
                    c.1 as d -&gt; c1.code = d;<br>
                    c.1 -&gt; c1.system = 'MSHType-lookup-unharmonized';<br>
                };<br>
                MSH.4 as c -&gt; b1.source as c1 then {<br>
                    b.3 as d -&gt; b1.source as c1 then {<br>
                        d.1 as software -&gt; c1.software = software;<br>
                        c.1 as name -&gt; <a href="http://c1.name" target="_blank" title="http://c1.name">c1.name</a> = name;<br>
                    };<br>
                };<br>
                MSH.5 as c -&gt; b1.destination as c1 then {<br>
                    b.6 as d -&gt; b1.destination as c1 then {<br>
                        c.1 as name -&gt; <a href="http://c1.name" target="_blank" title="http://c1.name">c1.name</a> = name;<br>
                        d.1 as endpoint -&gt; c1.endpoint = endpoint;<br>
                    };<br>
                };<br>
            };<br>
            a.MSH as MSH -&gt; a1.request as b1 then {<br>
                MSH.9 as _ -&gt; b1.method = 'POST';<br>
                MSH.9 as _ -&gt; b1.url = append('MessageHeader/', id);<br>
            };<br>
        };<br>
    };<br>
}</p>



<a name="186421567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20create%20a%20variable%20in%20FHIR%20mapping%20language/near/186421567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20create.20a.20variable.20in.20FHIR.20mapping.20language.html#186421567">(Jan 23 2020 at 18:52)</a>:</h4>
<p>how do you run the maps? there is a proposal for a let statement (see <a href="#narrow/stream/181579-mapping-framework/topic/tutorial.20step.2014" title="#narrow/stream/181579-mapping-framework/topic/tutorial.20step.2014">https://chat.fhir.org/#narrow/stream/181579-mapping-framework/topic/tutorial.20step.2014</a>) or <a href="http://jira.hl7.org/browse/FHIR-21642" target="_blank" title="http://jira.hl7.org/browse/FHIR-21642">J#21642</a>,  in the java implementation it is not yet implemented.</p>



<a name="186423252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20create%20a%20variable%20in%20FHIR%20mapping%20language/near/186423252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Han <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20create.20a.20variable.20in.20FHIR.20mapping.20language.html#186423252">(Jan 23 2020 at 19:08)</a>:</h4>
<blockquote>
<p>how do you run the maps? there is a proposal for a let statement (see <a href="#narrow/stream/181579-mapping-framework/topic/tutorial.20step.2014" title="#narrow/stream/181579-mapping-framework/topic/tutorial.20step.2014">https://chat.fhir.org/#narrow/stream/181579-mapping-framework/topic/tutorial.20step.2014</a>) or <a href="http://jira.hl7.org/browse/FHIR-21642" target="_blank" title="http://jira.hl7.org/browse/FHIR-21642">J#21642</a>,  in the java implementation it is not yet implemented.</p>
</blockquote>
<p>I'm using the validator (<a href="https://wiki.hl7.org/index.php?title=Using_the_FHIR_Mapping_Language" target="_blank" title="https://wiki.hl7.org/index.php?title=Using_the_FHIR_Mapping_Language">https://wiki.hl7.org/index.php?title=Using_the_FHIR_Mapping_Language</a>)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
