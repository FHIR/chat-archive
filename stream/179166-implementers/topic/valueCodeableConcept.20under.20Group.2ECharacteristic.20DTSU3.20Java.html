---
layout: page
title: "FHIR Chat  · valueCodeableConcept under Group.Characteristic DTSU3 Java · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html">valueCodeableConcept under Group.Characteristic DTSU3 Java</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="173295836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173295836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Calvin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173295836">(Aug 15 2019 at 14:42)</a>:</h4>
<p>Hello,<br>
I am trying to generate a "Group" resource DTSU3 in Java. Everything except a valueCodeableConcept (under Characteristic) is not working for me. I am unable to set the valueCodeableConcept as a part of the characteristic. I am unable to use the GroupCharacteristicComponent.setValue directly.</p>
<p>Any pointers appreciated. Thanks in advance.</p>
<p>Sample Expected Output:</p>
<div class="codehilite"><pre><span></span>  &quot;characteristic&quot;: [
    {
      &quot;code&quot;: {
        &quot;coding&quot;: [
          {
            &quot;code&quot;: &quot;attributed-to&quot;
          }
        ]
      },
      &quot;valueCodeableConcept&quot;: {
        &quot;coding&quot;: [
          {
            &quot;system&quot;: &quot;http://hl7.org/fhir/sid/us-npi&quot;,
            &quot;value&quot;: &quot;110001029483&quot;
          }
        ]
      }
    }
  ]
</pre></div>


<p>What I have so far:</p>
<div class="codehilite"><pre><span></span>  &quot;characteristic&quot;: [
    {
      &quot;code&quot;: {
        &quot;coding&quot;: [
          {
            &quot;code&quot;: &quot;attributed-to&quot;
          }
        ]
      }
    }
  ],
</pre></div>


<p>What is missing:</p>
<div class="codehilite"><pre><span></span>      &quot;valueCodeableConcept&quot;: {
        &quot;coding&quot;: [
          {
            &quot;system&quot;: &quot;http://hl7.org/fhir/sid/us-npi&quot;,
            &quot;value&quot;: &quot;110001029483&quot;
          }
        ]
      }
</pre></div>


<p>My Code:</p>
<div class="codehilite"><pre><span></span>        // set characteristic code
        CodeableConcept ccgcc1 = new CodeableConcept();
        ccgcc1.addCoding().setCodeElement(new CodeType(&quot;attributed-to&quot;));

        Extension e = new Extension();
        e.setValue(new StringType(&quot;123321&quot;));
        e.setUrl(&quot;http://hl7.org/fhir/sid/us-npi&quot;);


        // add characteristic code to the groupcharacteristiccomponent
        GroupCharacteristicComponent gccgrp1 = new GroupCharacteristicComponent();
        gccgrp1.setCode(ccgcc1);
        try {
            gccgrp1.setValue(e.castToType(new CodeableConcept()));
        } catch (FHIRFormatError e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (FHIRException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }


        // member references
        Reference rpt1 = new Reference();
        rpt1.setReference(&quot;pt1&quot;);

        GroupMemberComponent gmc1 = new GroupMemberComponent();
        gmc1.setEntity(rpt1);

        Reference rpt2 = new Reference();
        rpt2.setReference(&quot;pt2&quot;);

        GroupMemberComponent gmc2 = new GroupMemberComponent();
        gmc2.setEntity(rpt2);
        gmc2.setInactive(true);

        Group attrgrp1 = new Group();
        attrgrp1.setActual(true);
        attrgrp1.setType(GroupType.PERSON);
        attrgrp1.addCharacteristic(gccgrp1);
        attrgrp1.addMember(gmc1);
        attrgrp1.addMember(gmc2);


        FhirContext forDstu3 = FhirContext.forDstu3();
        return forDstu3.newJsonParser().setPrettyPrint(true).encodeResourceToString(attrgrp1);
</pre></div>



<a name="173315277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173315277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173315277">(Aug 15 2019 at 19:02)</a>:</h4>
<blockquote>
<p>gccgrp1.setValue(e.castToType(new CodeableConcept()));</p>
</blockquote>
<p>Why are you using castToType?</p>



<a name="173315309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173315309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173315309">(Aug 15 2019 at 19:03)</a>:</h4>
<p>are you getting any exceptions? What happens if you remove the catch?</p>



<a name="173315849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173315849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Calvin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173315849">(Aug 15 2019 at 19:09)</a>:</h4>
<blockquote>
<blockquote>
<p>gccgrp1.setValue(e.castToType(new CodeableConcept()));</p>
</blockquote>
<p>Why are you using castToType?</p>
</blockquote>
<p>Hello,<br>
I was unable to find a direct way to set the value needed. I just thought it may work. Guess, I am doing something wrong somewhere.</p>



<a name="173315903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173315903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Calvin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173315903">(Aug 15 2019 at 19:09)</a>:</h4>
<blockquote>
<p>are you getting any exceptions? What happens if you remove the catch?</p>
</blockquote>
<p>On doing "gccgrp1.setValue(e);", I get this:</p>
<div class="codehilite"><pre><span></span>org.hl7.fhir.exceptions.FHIRFormatError: Not the right type for Group.characteristic.value[x]: Extension
</pre></div>


<p>Any help is appreciated. Thanks!</p>



<a name="173315970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173315970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173315970">(Aug 15 2019 at 19:10)</a>:</h4>
<p>should be just </p>
<div class="codehilite"><pre><span></span>  <span class="n">gccgrp1</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="k">new</span> <span class="n">CodeableConcept</span><span class="o">());</span>
</pre></div>


<p>but then you have to populate some information on the codeable concept or the value will be ignored</p>



<a name="173316347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173316347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173316347">(Aug 15 2019 at 19:15)</a>:</h4>
<p>oh - read more carefully. You shouldn't be using an extension at all in that code</p>



<a name="173317536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173317536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Calvin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173317536">(Aug 15 2019 at 19:31)</a>:</h4>
<p>Yes, you are correct. My challenge is how do I setup that value in CodeableConcept. I have just been able to set Code part (if you see my original code, </p>
<div class="codehilite"><pre><span></span>ccgcc1.addCoding().setCodeElement(new CodeType(&quot;attributed-to&quot;));
</pre></div>


<p>however, I am unable to enter the value (which should come in as valueCodeableConcept.</p>
<p>I know, Extensions are not needed, but, it was a last ditch effort to see if I can try to get that populated. I keep on learning something new every time I am trying to work with Java.</p>
<p>Thanks.</p>



<a name="173317858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173317858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173317858">(Aug 15 2019 at 19:34)</a>:</h4>
<div class="codehilite"><pre><span></span>  <span class="n">CodeableConcept</span> <span class="n">cc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodeableConcept</span><span class="o">();</span>
  <span class="n">cc</span><span class="o">.</span><span class="na">addCoding</span><span class="o">().</span><span class="na">setCode</span><span class="o">(</span><span class="s">&quot;attributed-to&quot;</span><span class="o">).</span><span class="na">setSystem</span><span class="o">(</span><span class="s">&quot;http://my-uri&quot;</span><span class="o">);</span>
  <span class="n">gccgrp1</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">cc</span><span class="o">);</span>
</pre></div>



<a name="173318207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173318207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Calvin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173318207">(Aug 15 2019 at 19:39)</a>:</h4>
<blockquote>
<div class="codehilite"><pre><span></span>  <span class="n">CodeableConcept</span> <span class="n">cc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CodeableConcept</span><span class="o">();</span>
  <span class="n">cc</span><span class="o">.</span><span class="na">addCoding</span><span class="o">().</span><span class="na">setCode</span><span class="o">(</span><span class="s">&quot;attributed-to&quot;</span><span class="o">).</span><span class="na">setSystem</span><span class="o">(</span><span class="s">&quot;http://my-uri&quot;</span><span class="o">);</span>
  <span class="n">gccgrp1</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">cc</span><span class="o">);</span>
</pre></div>


</blockquote>
<p>you beat me to that.</p>
<p>I just did the same</p>
<div class="codehilite"><pre><span></span>        CodeableConcept ccgcc2 = new CodeableConcept();
        ccgcc2.addCoding().setSystem(&quot;MyURL&quot;).setUserData(&quot;value&quot;, new StringType(&quot;123&quot;));
</pre></div>


<p>This returns:</p>
<div class="codehilite"><pre><span></span>     &quot;valueCodeableConcept&quot;: {
        &quot;coding&quot;: [
          {
            &quot;system&quot;: &quot;MyURL&quot;
          }
        ]
}
</pre></div>


<p>Now, what is missing is, how to get that value "123" as a part of this CodeableConcept... </p>
<p>Thanks</p>



<a name="173318437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173318437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173318437">(Aug 15 2019 at 19:42)</a>:</h4>
<p>what 'value 123'? There's no value element in a CodeableConcept - what are you trying to achieve?</p>



<a name="173318502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173318502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Calvin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173318502">(Aug 15 2019 at 19:43)</a>:</h4>
<blockquote>
<p>what 'value 123'? There's no value element in a CodeableConcept - what are you trying to achieve?</p>
</blockquote>
<p>I am trying to achieve:</p>
<div class="codehilite"><pre><span></span>      &quot;valueCodeableConcept&quot;: {
        &quot;coding&quot;: [
          {
            &quot;system&quot;: &quot;http://hl7.org/fhir/sid/us-npi&quot;,
            &quot;value&quot;: &quot;110001029483&quot;
          }
        ]
      }
</pre></div>


<p>How does one set the value in above example? Thank you.</p>



<a name="173318778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173318778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173318778">(Aug 15 2019 at 19:47)</a>:</h4>
<p>there is no value - you are confused between identifier and codeable concept. npi is an identifier thing. But step back further - what are you trying to do? It doesn't make sense to create a group with a characteristic that is 'npi number'?</p>



<a name="173322260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173322260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Calvin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173322260">(Aug 15 2019 at 20:34)</a>:</h4>
<blockquote>
<p>there is no value - you are confused between identifier and codeable concept. npi is an identifier thing. But step back further - what are you trying to do? It doesn't make sense to create a group with a characteristic that is 'npi number'?</p>
</blockquote>
<p>I am trying to create what is called an "Attribution Group" also known as a Patient roster. That is a way to associate patient(s) to a provider/ practitioner as a Group. Hence the need for the NPI value is needed to be setup.</p>
<p>Sample Roster:</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;Group&quot;,
  &quot;type&quot;: &quot;person&quot;,
  &quot;actual&quot;: true,
  &quot;characteristic&quot;: [
    {
      &quot;code&quot;: {
        &quot;coding&quot;: [
          {
            &quot;code&quot;: &quot;attributed-to&quot;
          }
        ]
      },
      &quot;valueCodeableConcept&quot;: {
        &quot;coding&quot;: [
          {
            &quot;system&quot;: &quot;http://hl7.org/fhir/sid/us-npi&quot;,
            &quot;value&quot;: &quot;110001029483&quot;
          }
        ]
      }
    }
  ],
  &quot;member&quot;: [
    {
      &quot;entity&quot;: {
        &quot;reference&quot;: &quot;Patient/4d72ad76-fbc6-4525-be91-7f358f0fea9d&quot;
      }
    },
    {
      &quot;entity&quot;: {
        &quot;reference&quot;: &quot;Patient/74af8018-f3a1-469c-9bfa-1dfd8a646874&quot;
      }
    }
  ]
}
</pre></div>


<p>Hope this clarifies.</p>



<a name="173322513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173322513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173322513">(Aug 15 2019 at 20:38)</a>:</h4>
<p>The group resource doesn't currently support that. - identifier is not a valid value for a characteristic - which is why the problem. You should create a task (see bottom of any page of the FHIR spec) asking for it to support that. in the meantime, I guess I'd stick with CodeableConcept and use <code>code</code> instead of <code>value</code></p>



<a name="173323551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173323551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Calvin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173323551">(Aug 15 2019 at 20:52)</a>:</h4>
<blockquote>
<p>The group resource doesn't currently support that. - identifier is not a valid value for a characteristic - which is why the problem. You should create a task (see bottom of any page of the FHIR spec) asking for it to support that. in the meantime, I guess I'd stick with CodeableConcept and use <code>code</code> instead of <code>value</code></p>
</blockquote>
<p>Wow, this is interesting. I will be also reaching to the source which requested such a data and seek feedback. Thank you again!</p>



<a name="173371720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173371720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173371720">(Aug 16 2019 at 13:11)</a>:</h4>
<p>I think our best advice for attribution groups (at least mine) is captured at <a href="https://github.com/smart-on-fhir/smart-on-fhir.github.io/wiki/Bulk-data:-thoughts-on-attribution-lists-and-groups" target="_blank" title="https://github.com/smart-on-fhir/smart-on-fhir.github.io/wiki/Bulk-data:-thoughts-on-attribution-lists-and-groups">https://github.com/smart-on-fhir/smart-on-fhir.github.io/wiki/Bulk-data:-thoughts-on-attribution-lists-and-groups</a> -- and the CMS Data at the Point of Care pilot team is exploring the approach and Will be able to provide some real world feedback (<a href="https://dpc.cms.gov/docs" target="_blank" title="https://dpc.cms.gov/docs">https://dpc.cms.gov/docs</a>)</p>



<a name="173371737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173371737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173371737">(Aug 16 2019 at 13:11)</a>:</h4>
<p><span class="user-mention" data-user-id="196700">@Calvin</span> FYI</p>



<a name="173375508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/173375508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Calvin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#173375508">(Aug 16 2019 at 14:01)</a>:</h4>
<blockquote>
<p>I think our best advice for attribution groups (at least mine) is captured at <a href="https://github.com/smart-on-fhir/smart-on-fhir.github.io/wiki/Bulk-data:-thoughts-on-attribution-lists-and-groups" target="_blank" title="https://github.com/smart-on-fhir/smart-on-fhir.github.io/wiki/Bulk-data:-thoughts-on-attribution-lists-and-groups">https://github.com/smart-on-fhir/smart-on-fhir.github.io/wiki/Bulk-data:-thoughts-on-attribution-lists-and-groups</a> -- and the CMS Data at the Point of Care pilot team is exploring the approach and Will be able to provide some real world feedback (<a href="https://dpc.cms.gov/docs" target="_blank" title="https://dpc.cms.gov/docs">https://dpc.cms.gov/docs</a>)</p>
</blockquote>
<p>Perfect. Will keep an eye. Thanks.</p>



<a name="207285600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207285600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Fulk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207285600">(Aug 18 2020 at 17:00)</a>:</h4>
<p><span class="user-mention" data-user-id="196700">@Calvin</span>   We at the CMS Data at the Point of Care project are also running into this issue. We would like to be able to include a practitioner's NPI in the Group.characteristic, but using <code>code</code> instead of <code>value</code> still fails validation due to the code system <code>http://hl7.org/fhir/sid/us-npi</code> being an identifier system and not a terminology. I plan on creating a task as <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> suggested if you have not already done so. Have you had any success since this conversation?</p>



<a name="207364961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207364961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207364961">(Aug 19 2020 at 02:45)</a>:</h4>
<p>can you provide an example of what is failing to validate?</p>



<a name="207405497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207405497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Fulk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207405497">(Aug 19 2020 at 13:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Sure! One piece of info that might be helpful is that we are validating with HAPI. The validation failure is happening in an integration test that uses the group we create in this method (this specific line is the one causing the failure): <a href="https://github.com/CMSgov/dpc-app/blob/f24b3014db681f6039953c12dc0d4daf0da363b3/dpc-common/src/main/java/gov/cms/dpc/common/utils/SeedProcessor.java#L125">https://github.com/CMSgov/dpc-app/blob/f24b3014db681f6039953c12dc0d4daf0da363b3/dpc-common/src/main/java/gov/cms/dpc/common/utils/SeedProcessor.java#L125</a>.</p>
<p>The goal is to create a resource with a practitioner's NPI inside a CodeableConcept in the Group characteristic, like this:</p>
<div class="codehilite"><pre><span></span><code>{
    &quot;resourceType&quot;: &quot;Group&quot;,
    &quot;characteristic&quot;: [{
        &quot;code&quot;: {
            &quot;coding&quot;: {
                &quot;code&quot;: &quot;attributed-to&quot;
            }
        },
        &quot;value&quot;: {
            &quot;coding&quot;: {
                &quot;system&quot;: &quot;http://hl7.org/fhir/sid/us-npi&quot;,
                &quot;code&quot;: &quot;1234567890&quot;
            }
        }
    }]
}
</code></pre></div>


<p>The validation failure is that the URI is an Unknown Code System, and we believe it is due to the fact that this URI is not included here:  <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/eb23fcc5e45c36f1c2f7bca9aa5b68b1b7aa0810/org.hl7.fhir.validation/src/main/java/org/hl7/fhir/validation/instance/InstanceValidator.java#L774">https://github.com/hapifhir/org.hl7.fhir.core/blob/eb23fcc5e45c36f1c2f7bca9aa5b68b1b7aa0810/org.hl7.fhir.validation/src/main/java/org/hl7/fhir/validation/instance/InstanceValidator.java#L774</a> even though it does appear in the FHIR docs. It seems like this could be because the NPI is an identifier system and not a terminology system, so we're not sure if we are trying to include the NPI in the wrong place or if there is a mistake in the HAPI validator.</p>



<a name="207575650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207575650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Fulk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207575650">(Aug 20 2020 at 21:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  When you have a chance to look at the snippets above, I'm most interested in knowing if I should create a task to allow this URI or if I need to be storing the attributed-to NPI differently. Thanks!</p>



<a name="207602191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207602191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207602191">(Aug 21 2020 at 05:45)</a>:</h4>
<p>hi</p>



<a name="207602246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207602246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207602246">(Aug 21 2020 at 05:46)</a>:</h4>
<p>so looking at this: you'll first get a warning that you don't have system for the code "attributed-to". Then you should get a warning that the system <code>http://hl7.org/fhir/sid/us-npi</code> is not known to the validator, and indeed, that's correct. <code>http://hl7.org/fhir/sid/us-npi</code> is not a code system, it's a set of identifiers.</p>



<a name="207602544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207602544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207602544">(Aug 21 2020 at 05:54)</a>:</h4>
<p>I'm not exactly sure what it is that you want but I would think something like this:</p>
<div class="codehilite"><pre><span></span><code>    <span class="s2">&quot;resourceType&quot;</span><span class="err">:</span> <span class="s2">&quot;Group&quot;</span><span class="err">,</span>
    <span class="s2">&quot;characteristic&quot;</span><span class="err">:</span> <span class="p">[{</span>
        <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;coding&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;http://terminology.hl7.org/CodeSystem/contractsignertypecodes&quot;</span><span class="p">,</span>
                <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;RESPRSN&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nt">&quot;valueReference&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;identifier&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/sid/us-npi&quot;</span><span class="p">,</span>
                <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;1234567890&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}]</span>
<span class="err">}</span>
</code></pre></div>



<a name="207855075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207855075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Fulk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207855075">(Aug 24 2020 at 15:10)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, Thanks for your reply last week! I've been talking it over with the team. We're still on STU3, so we're considering just using the X-Provenance header to store the practitioner NPI instead of a characteristic. Do you have thoughts or opinions on that? Thanks again for taking the time!</p>



<a name="207884309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207884309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207884309">(Aug 24 2020 at 19:13)</a>:</h4>
<p>it's hard for me to understand how that approach would be appropriate for the same functional outcome. What are you actually trying to do?</p>



<a name="207886962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207886962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Fulk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207886962">(Aug 24 2020 at 19:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Initially, we were trying to use the Group.characteristic to store the Practitioner's NPI so that we could later get the Practitioner from the Group via this NPI, which is failing validation for the reasons we discussed already. However, we are also including the Practitioner's internal ID in the X-Provenance header, so we could get to the Practitioner from this ID as well instead of using the NPI. The goal is to link the Group to the Practitioner in our database, and it looks like we can't correctly use a characteristic for this until we upgrade to R4 and use the<code>valueReference</code> property as you describe above. We're curious whether or not you think using the <code>X-Provenence</code> header for this instead of a characteristic is still in line with the FHIR spec. By the way, we do intend on upgrading to R4 eventually, but we don't have that work slated yet.</p>



<a name="207888814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207888814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207888814">(Aug 24 2020 at 19:53)</a>:</h4>
<p>you're linking this because the Practitioner manages the group?</p>



<a name="207888905"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/207888905" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Fulk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#207888905">(Aug 24 2020 at 19:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java/near/207888814">said</a>:</p>
<blockquote>
<p>you're linking this because the Practitioner manages the group?</p>
</blockquote>
<p>Yes, this Group is the patient roster for that Practitioner.</p>



<a name="208262414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/208262414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Fulk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#208262414">(Aug 27 2020 at 19:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321924">Jon Fulk</span> <a href="#narrow/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java/near/207888905">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java/near/207888814">said</a>:</p>
<blockquote>
<p>you're linking this because the Practitioner manages the group?</p>
</blockquote>
<p>Yes, this Group is the patient roster for that Practitioner.</p>
</blockquote>
<p>Is this an incorrect use of Provenance? We are having some discussion internally as to whether Provenance should even have anything to do with Groups in the first place.</p>



<a name="208280934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/208280934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#208280934">(Aug 27 2020 at 21:49)</a>:</h4>
<p>I think so. Provenance is about the record keeping. It's still not clear to me who's actually in the group</p>



<a name="208335073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/208335073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Fulk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#208335073">(Aug 28 2020 at 12:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  The group is the patients being seen by the practitioner whose NPI we're trying to reference. The practitioner creates the group (or roster) of patients, and we associate that group to the practitioner so that we can ensure that we are sending the correct beneficiary claims data to the correct practitioner, verifying that the requesting practitioner has access to the requested claims data.</p>



<a name="208403790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/208403790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#208403790">(Aug 28 2020 at 23:01)</a>:</h4>
<p>so when the practitioner creates the group, he lists his patients? or the list is supposed to figured out algorithmically?</p>



<a name="208442797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/208442797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Fulk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#208442797">(Aug 29 2020 at 16:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> The practitioner creates the group and lists his own patients. He then can request claims data for everyone in the group, but we only allow the data to be returned under certain conditions, one of which is that the provider NPI on the claim matches the provider's NPI.</p>



<a name="208461139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/valueCodeableConcept%20under%20Group.Characteristic%20DTSU3%20Java/near/208461139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/valueCodeableConcept.20under.20Group.2ECharacteristic.20DTSU3.20Java.html#208461139">(Aug 30 2020 at 00:30)</a>:</h4>
<p>hmm ok. so why does the group need characteristics if the author of the group lists patients explicitly?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
