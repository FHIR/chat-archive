---
layout: page
title: "FHIR Chat  · npm: Fetching Packages from Simplifier · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html">npm: Fetching Packages from Simplifier</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="227648786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227648786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcus Wurlitzer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227648786">(Feb 24 2021 at 18:33)</a>:</h4>
<p>Hi, I am unable to download packages from Simplifier via <code>npm</code>, e.g. <a href="https://simplifier.net/packages/hl7.fhir.r4.core/4.0.1">FHIR R4 Core</a>. Tested with npm 7.4.3 and 7.5.6. Error ist <code>Invalid package manifest: no 'dist.tarball' field</code>. Can anyone reproduce this?</p>



<a name="227681706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227681706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227681706">(Feb 24 2021 at 22:04)</a>:</h4>
<p>I think you need to provide more details</p>



<a name="227681907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227681907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227681907">(Feb 24 2021 at 22:05)</a>:</h4>
<p><span class="user-mention" data-user-id="263785">@Marcus Wurlitzer</span> , what was your npm invocation?</p>



<a name="227687708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227687708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcus Wurlitzer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227687708">(Feb 24 2021 at 22:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191452">@Eric Prud'hommeaux</span> I used the command from simplifier: <code>npm --registry https://packages.simplifier.net install hl7.fhir.r4.core@4.0.1</code> IIRC, it did work with an older (?) version of <code>npm</code>. Or am I missing something else?</p>



<a name="227688581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227688581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227688581">(Feb 24 2021 at 22:50)</a>:</h4>
<p>i can reproduce the error</p>



<a name="227688669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227688669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227688669">(Feb 24 2021 at 22:51)</a>:</h4>
<p>not sure yet whether i can go further</p>



<a name="227690020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227690020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcus Wurlitzer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227690020">(Feb 24 2021 at 23:02)</a>:</h4>
<p>Thank you. So if there is no obvious mistake, I might just send a 'feedback' to <a href="http://simplifier.net">simplifier.net</a>.</p>



<a name="227690245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227690245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227690245">(Feb 24 2021 at 23:03)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> someone should look into this?</p>



<a name="227745781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227745781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227745781">(Feb 25 2021 at 10:21)</a>:</h4>
<p><span class="user-mention" data-user-id="263785">@Marcus Wurlitzer</span> <span class="user-mention" data-user-id="191452">@Eric Prud'hommeaux</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <br>
Just installed the LTS version of Node.js and NPM on my new laptop, which indeed has an older NPM (<code>6.14.11</code>) and there it installs without trouble.</p>
<p>Does it work for you if you download the package first and then install it?</p>
<div class="codehilite"><pre><span></span><code>npm pack hl7.fhir.r4.core@4.0.1 --registry https://packages.simplifier.net
npm install .\hl7.fhir.r4.core-4.0.1.tgz
</code></pre></div>
<p>I really know very little about Node/NPM, perhaps <span class="user-mention" data-user-id="191469">@Chris Moesel</span> or <span class="user-mention" data-user-id="191782">@Brian Kaney</span> know what this is about.</p>



<a name="227765193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227765193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227765193">(Feb 25 2021 at 13:20)</a>:</h4>
<p>looks indeed like an incompatibility with v7 of npm. I installed a local copy of 6.14.11 and it worked:</p>
<div class="codehilite"><pre><span></span><code>mkdir fhirtoy &amp;&amp;
cd $_ &amp;&amp; npm init -y &gt; /dev/null &amp;&amp;
mkdir oldnpm &amp;&amp;
cd oldnpm &amp;&amp;
npm init -y &gt; /dev/null &amp;&amp; npm install npm@6.14.11 &gt; /dev/null &amp;&amp;
cd .. &amp;&amp;
./oldnpm/node_modules/.bin/npm --registry https://packages.simplifier.net install hl7.fhir.r4.core@4.0.1
</code></pre></div>



<a name="227766325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227766325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227766325">(Feb 25 2021 at 13:28)</a>:</h4>
<p>(I stuck 6.14.11 in a <code>oldnpm</code> subdir 'cause i didn't want to default to using an old npm for all npm commands run from that hierarchy)</p>



<a name="227769639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227769639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227769639">(Feb 25 2021 at 13:53)</a>:</h4>
<p>Interesting...  I don't know the differences between NPM6 and NPM7 well enough to comment on what might be going on here.  I looked at the NPM7 announcement (<a href="https://github.blog/2021-02-02-npm-7-is-now-generally-available/">here</a>) and didn't see anything that looked like it would break package resolution in this way (<code>Invalid package manifest: no 'dist.tarball' field</code>).  It looks like they treat peer dependencies different now, but that doesn't seem to be what's going on here.  Based on the error message, I guess I'd ask -- does the simplifier registry provide that "dist.tarball" field in the package manifest?</p>



<a name="227778502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227778502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227778502">(Feb 25 2021 at 14:50)</a>:</h4>
<p>Simplifier does not touch the package manifest, just serves as is.</p>



<a name="227781376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227781376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227781376">(Feb 25 2021 at 15:08)</a>:</h4>
<p>Looks like this is not about the manifest inside the package, but the package version listing API.<br>
We'll make it compliant with npm 7 in the coming days.</p>
<p>If you're in a hurry. you can always use Firely.Terminal. It was built for this purpose. ;)</p>



<a name="227807465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227807465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227807465">(Feb 25 2021 at 17:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191335">@Martijn Harthoorn</span> what changes are needed?</p>



<a name="227896996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227896996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcus Wurlitzer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227896996">(Feb 26 2021 at 08:38)</a>:</h4>
<p>Thank you all for looking into this!<br>
<span class="user-mention" data-user-id="203235">@Ward Weistra</span> the <code>pack</code> command gives me <code>Cannot read property '0' of undefined</code>.<br>
<span class="user-mention" data-user-id="191335">@Martijn Harthoorn</span> I had chosen <code>npm</code> because it is ready to run on the target machine running ubuntu, while the .NET SDK is not. So I was quite happy that <code>npm</code> is provided as an option to fetch packages. :) Looking forward to your API update!</p>



<a name="227910133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/227910133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#227910133">(Feb 26 2021 at 10:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I believe the <a href="https://simplifier.net/docs/package-server/VersionListing">versions endpoint</a> needs an additional <code>dist</code> entry per version with <code>shasum</code> and <code>tarball</code>:<br>
<a href="/user_uploads/10155/TdWV7gnIwkAWbj8-4jRcyYpb/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/TdWV7gnIwkAWbj8-4jRcyYpb/image.png" title="image.png"><img src="/user_uploads/10155/TdWV7gnIwkAWbj8-4jRcyYpb/image.png"></a></div>



<a name="228214601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/228214601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#228214601">(Mar 01 2021 at 11:28)</a>:</h4>
<p><span class="user-mention" data-user-id="263785">@Marcus Wurlitzer</span> , wat do you mean by "ready-to-run". Because In itself .NET SDK is definitely available for Ubuntu. And Firely Terminal has been made cross platform too.</p>



<a name="228215010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/228215010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martijn Harthoorn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#228215010">(Mar 01 2021 at 11:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - As far as I can see the dist.shasum and dist.tarball is indeed all that is required to make it work for NPM-7, but we need to do this fix, to make sure nothing more is needed.</p>



<a name="228215323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/228215323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcus Wurlitzer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#228215323">(Mar 01 2021 at 11:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191335">Martijn Harthoorn</span> Yes - I did not mean to say that Firely Terminal is not compatible. Just that <code>npm</code> is readily available on our system, while the <code>.NET SDK</code> is not. This may of course be specific to our systems. Basically, this was to encourage you not to drop <code>npm</code> support, if feasible. :)</p>



<a name="231766720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/231766720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#231766720">(Mar 25 2021 at 09:04)</a>:</h4>
<p><span class="user-mention" data-user-id="263785">@Marcus Wurlitzer</span> Can you please try again? We've made some major changes to now precompute all package tar-balls, instead of creating them only when requested, so we can serve the <code>dist.shasum</code> and <code>dist.tarball</code> in the API.</p>



<a name="231768802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/231768802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marcus Wurlitzer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#231768802">(Mar 25 2021 at 09:24)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> I can confirm package fetching now works with <code>npm 7.5.6/ubuntu</code> and <code>npm 7.4.3/MacOS</code>. Thank you!</p>



<a name="231768938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/npm%3A%20Fetching%20Packages%20from%20Simplifier/near/231768938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/npm.3A.20Fetching.20Packages.20from.20Simplifier.html#231768938">(Mar 25 2021 at 09:25)</a>:</h4>
<p>Thanks for confirming <span class="user-mention" data-user-id="263785">@Marcus Wurlitzer</span> <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> <br>
cc <span class="user-mention" data-user-id="191452">@Eric Prud'hommeaux</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191469">@Chris Moesel</span> <span class="user-mention" data-user-id="191782">@Brian Kaney</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
