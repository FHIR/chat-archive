---
layout: page
title: "FHIR Chat  · CodeSystem $lookup operation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html">CodeSystem $lookup operation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="155134146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/155134146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ivan Dubrov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#155134146">(Jan 15 2019 at 00:45)</a>:</h4>
<p>According to the specification (<a href="https://www.hl7.org/fhir/operation-codesystem-lookup.html" target="_blank" title="https://www.hl7.org/fhir/operation-codesystem-lookup.html">https://www.hl7.org/fhir/operation-codesystem-lookup.html</a>), $lookup operation on CodeSystem is only defined on type level. However, other operations on CodeSystem are generally defined either on the type level or on the instance level (<a href="https://www.hl7.org/fhir/operationslist.html" target="_blank" title="https://www.hl7.org/fhir/operationslist.html">https://www.hl7.org/fhir/operationslist.html</a>).</p>
<p>Why is this difference? Is it accidental or on purpose? I don't see any reason why $lookup cannot be defined on the instance level.</p>



<a name="155134241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/155134241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#155134241">(Jan 15 2019 at 00:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="155139633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/155139633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#155139633">(Jan 15 2019 at 02:33)</a>:</h4>
<p>(deleted)</p>



<a name="155139753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/155139753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#155139753">(Jan 15 2019 at 02:36)</a>:</h4>
<p>and it would presume you knew the CodeSystem id which I don' t think is always the case.  You don't need it as it is so why go to the extra trouble?</p>



<a name="155144213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/155144213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ivan Dubrov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#155144213">(Jan 15 2019 at 04:17)</a>:</h4>
<p>You are correct. <br>
I was curious about discrepancy with other operations. For example, <a href="https://www.hl7.org/fhir/codesystem-operation-subsumes.html" target="_blank" title="https://www.hl7.org/fhir/codesystem-operation-subsumes.html">https://www.hl7.org/fhir/codesystem-operation-subsumes.html</a> can be invoked both on type level and on an instance level. I can see how invoking it on an instance level might introduce a conflict (what if CodeSystem identified via "id" does not match the system provided as "coding" parameter?), but same argument could be applied to the "$subsumes" operation.</p>



<a name="155167446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/155167446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#155167446">(Jan 15 2019 at 13:08)</a>:</h4>
<p>Yes, this does seem to be an anomaly.  I'm not thinking of any discussions or any reason why this operation should not also have been defined at the instance level.  Unless <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  knows of something?  But the question now is, I guess, is whether we would want to attempt to change this for a normative operation?  At least the change itself would be compatible.</p>



<a name="155169750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/155169750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#155169750">(Jan 15 2019 at 13:45)</a>:</h4>
<p>I can't think of any deliberate reason</p>



<a name="155223421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/155223421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#155223421">(Jan 16 2019 at 02:56)</a>:</h4>
<p>So do we (or can we) add it in R5?</p>



<a name="155247714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/155247714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#155247714">(Jan 16 2019 at 11:55)</a>:</h4>
<p>yes</p>



<a name="161430477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161430477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luca Toldo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161430477">(Mar 22 2019 at 08:54)</a>:</h4>
<p>According to the specification,  code is not compulsory (0..1). What is the expected the behavior of the $lookup in that case ?<br>
Are there tests available to validate the proper behavior of $lookup ?</p>



<a name="161445290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161445290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161445290">(Mar 22 2019 at 13:01)</a>:</h4>
<p><span class="user-mention" data-user-id="196897">@Luca Toldo</span> the optionality is so you can provide a <code>code</code> (and <code>system</code>) or a <code>coding</code></p>



<a name="161445674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161445674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luca Toldo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161445674">(Mar 22 2019 at 13:06)</a>:</h4>
<p>Thankyou <span class="user-mention" data-user-id="191343">@Michael Lawley</span>  ! so if I understand correctly <br>
either<br>
a) A code and system<br>
or<br>
b) a coding<br>
must be provided<br>
right ?</p>



<a name="161445869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161445869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161445869">(Mar 22 2019 at 13:09)</a>:</h4>
<p>Yes.  It's there in the text:</p>
<blockquote>
<p>When invoking this operation, a client SHALL provide both a system and a code, either using the system+code parameters, or in the coding parameter. Other parameters are optional.</p>
</blockquote>



<a name="161446140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161446140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161446140">(Mar 22 2019 at 13:12)</a>:</h4>
<p>I'd never noticed that <code>[base]/CodeSystem/[id]/$lookup</code> wasn't defined!<br>
I guess this is some kind of hang-over from when it was defined on <code>ValueSet</code>, because <code>CodeSystem</code> instances didn't exist.</p>



<a name="161484469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161484469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161484469">(Mar 22 2019 at 21:12)</a>:</h4>
<p>I think that's an oversight. I was certainly surprised when I read that. But I see my server doesn't support it</p>



<a name="161492474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161492474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161492474">(Mar 22 2019 at 23:10)</a>:</h4>
<p>Neither does ours; looks like a HAPI limitation - <span class="user-mention" data-user-id="191319">@James Agnew</span></p>



<a name="161596692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161596692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161596692">(Mar 24 2019 at 21:02)</a>:</h4>
<p>I mean, yeah.. HAPI was written to implement the operation as its defined in the spec. :)</p>



<a name="161599756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161599756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161599756">(Mar 24 2019 at 22:20)</a>:</h4>
<p>My Server insists on the system/codeSystem uri input parameter being completed for all operation requests on the CodeSystem resource., regardless of whether an id is passed. That's my own limitation! However, it does support the /[id]/ syntax for the other terminology resources.</p>



<a name="161659422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161659422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161659422">(Mar 25 2019 at 16:16)</a>:</h4>
<p>Since the code/system or coding already provide system url, I don't know why there's need for codesystem/id/$lookup?</p>



<a name="161717848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161717848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161717848">(Mar 26 2019 at 00:14)</a>:</h4>
<p>No actual need, but neither is there one for <code>/ValuseSet/[id]/$expand</code>. However, it would be slightly faster as resolving the system -&gt; Resource (search) naturally takes longer than simply using a lookup for id -&gt; Resource.</p>



<a name="161717947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161717947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161717947">(Mar 26 2019 at 00:17)</a>:</h4>
<p>I think the value set expand has a quite different functional reason to call it, as compared to code system expand. But I don’t see any harm in allowing the code system lookup to explicitly identify an id- it would function as a check on the system as well as the system/code combo</p>



<a name="161719546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161719546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161719546">(Mar 26 2019 at 00:47)</a>:</h4>
<p>Would CodeSystem/$expand take into account available supplements?</p>



<a name="161721447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161721447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161721447">(Mar 26 2019 at 01:22)</a>:</h4>
<p>Open discussion.</p>



<a name="161722897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161722897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161722897">(Mar 26 2019 at 01:57)</a>:</h4>
<p>...so the debate is moving from ValueSet/$lookup to CodeSystem/$expand as a suggested mechanism for requesting multiple properties about a group of concepts?</p>



<a name="161722964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161722964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161722964">(Mar 26 2019 at 01:58)</a>:</h4>
<p>It is?? That certainly wasn't anything like the original question (at least as I read it)</p>



<a name="161724082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161724082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161724082">(Mar 26 2019 at 02:23)</a>:</h4>
<p>I was merely posing the question, based on some of the above posts, but can see some advantages in doing it that way.</p>



<a name="161759116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161759116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161759116">(Mar 26 2019 at 13:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> If allowing id in URL and both id and sysystem URI (in parameter) were provided, which one should take higher priority? For example, id points to SCT and coding.system is LOINC.</p>



<a name="161759360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161759360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161759360">(Mar 26 2019 at 13:07)</a>:</h4>
<p>Checking ValueSet.$expand, I noticed that the same was not clarified between valueset/id and url parameter. Is that up to the implementer to decide? My implementation is that if there's id, use id. Otherwise, check url.</p>



<a name="161800561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161800561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161800561">(Mar 26 2019 at 20:37)</a>:</h4>
<p>I do the same for ValueSet/$expand.</p>



<a name="161800576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161800576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161800576">(Mar 26 2019 at 20:37)</a>:</h4>
<p>for $lookup - I would say that neither has priority; they both must agree</p>



<a name="161800858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161800858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161800858">(Mar 26 2019 at 20:41)</a>:</h4>
<p>[I thought that was a typo above from <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> when he said "code system expand" and that he actually meant "code system lookup"?]</p>



<a name="161801946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CodeSystem%20%24lookup%20operation/near/161801946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CodeSystem.20.24lookup.20operation.html#161801946">(Mar 26 2019 at 20:56)</a>:</h4>
<p>y i did</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
