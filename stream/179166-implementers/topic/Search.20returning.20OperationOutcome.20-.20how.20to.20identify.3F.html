---
layout: page
title: "FHIR Chat  · Search returning OperationOutcome - how to identify? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20returning.20OperationOutcome.20-.20how.20to.20identify.3F.html">Search returning OperationOutcome - how to identify?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="208879414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20returning%20OperationOutcome%20-%20how%20to%20identify%3F/near/208879414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santosh Jami <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20returning.20OperationOutcome.20-.20how.20to.20identify.3F.html#208879414">(Sep 02 2020 at 20:01)</a>:</h4>
<p>I have done a standard DiagnosticReport search operation using FhirClient (using .NET FHIR API STU3)</p>
<div class="codehilite"><pre><span></span><code>Bundle diagnosticReportSearchBundle = fhirClient.Search&lt;DiagnosticReport&gt;(searchParams);
</code></pre></div>


<p>And based on the bundle results, I am reading the data and executing my logic.</p>
<p>I identified my search params were wrong, so FHIR server returned all the DiagnosticResources, and not just limited to my search criteria.<br>
This stumped me. <br>
What is the way to identify if the search returned "OperationOutcome" resource? Should I traverse all entries for every search and determine that there is no OperationOutcome, this is good result. Seems a bad approach, any better way to identify this?</p>



<a name="208887143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20returning%20OperationOutcome%20-%20how%20to%20identify%3F/near/208887143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20returning.20OperationOutcome.20-.20how.20to.20identify.3F.html#208887143">(Sep 02 2020 at 21:01)</a>:</h4>
<p>Why would you want to look for OperationOutcome? Servers are under no obligation to return those when search parameters are not recognized. You can try a <code>Prefer: handling=strict</code> header if you want the search to fail if parameters are not recognized but I do not know how many server implement that (See <a href="http://hl7.org/fhir/search.html#errors">http://hl7.org/fhir/search.html#errors</a>)</p>



<a name="208890886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20returning%20OperationOutcome%20-%20how%20to%20identify%3F/near/208890886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santosh Jami <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20returning.20OperationOutcome.20-.20how.20to.20identify.3F.html#208890886">(Sep 02 2020 at 21:35)</a>:</h4>
<p>I tried the following query on my Vonk server:<br>
<code>https://localhost/DiagnosticReport?patient=abc123&amp;_format=json</code></p>
<p>Then I got the below response 200 status code - all the daignosticreports returned to me, no search criteria applied with error details in operationoutcome resource as one of the entries.<br>
I am trying to find how to identify that below outcome was an error in search instead of the relevant results.</p>
<p>I am posting the response here:</p>
<div class="codehilite"><pre><span></span><code>{
    &quot;resourceType&quot;: &quot;Bundle&quot;,
    &quot;type&quot;: &quot;searchset&quot;,
    &quot;entry&quot;: [
        {
            &quot;fullUrl&quot;: &quot;https://localhost:10022/DiagnosticReport/A1-B1-C1&quot;,
            &quot;search&quot;: {
                &quot;mode&quot;: &quot;match&quot;
            },
            &quot;resource&quot;: {
                &quot;resourceType&quot;: &quot;DiagnosticReport&quot;,
                &quot;id&quot;: &quot;A1-B1-C1&quot;,
                &quot;extension&quot;: [
                    {
                        &quot;url&quot;: &quot;http://www.acme.org/resultsource&quot;,
                        &quot;valueString&quot;: &quot;Interface&quot;
                    }
                ],
                &quot;identifier&quot;: [
                    {
                        &quot;type&quot;: {
                            &quot;coding&quot;: [
                                {
                                    &quot;system&quot;: &quot;http://hl7.org/fhir/identifier-type&quot;,
                                    &quot;code&quot;: &quot;PLAC&quot;,
                                    &quot;display&quot;: &quot;PLAC&quot;
                                }
                            ]
                        },
                        &quot;system&quot;: &quot;PLAC&quot;,
                        &quot;value&quot;: &quot;C1&quot;
                    },
                    {
                        &quot;type&quot;: {
                            &quot;coding&quot;: [
                                {
                                    &quot;system&quot;: &quot;http://hl7.org/fhir/identifier-type&quot;,
                                    &quot;code&quot;: &quot;FILL&quot;,
                                    &quot;display&quot;: &quot;FILL&quot;
                                }
                            ]
                        },
                        &quot;system&quot;: &quot;FILL&quot;,
                        &quot;value&quot;: &quot;D1&quot;
                    }
                ],
                &quot;status&quot;: &quot;final&quot;,
                &quot;code&quot;: {
                    &quot;coding&quot;: [
                        {
                            &quot;system&quot;: &quot;99QDI&quot;,
                            &quot;code&quot;: &quot;36126&quot;,
                            &quot;display&quot;: &quot;RPR(DX) REFL CONFIRM&quot;
                        }
                    ]
                },
                &quot;subject&quot;: {
                    &quot;reference&quot;: &quot;https://localhost:10022/Patient/A1&quot;
                },
                &quot;context&quot;: {
                    &quot;reference&quot;: &quot;https://localhost:10022/Encounter/B1&quot;
                },
                &quot;effectiveDateTime&quot;: &quot;2018-05-11T21:48:00+00:00&quot;,
                &quot;issued&quot;: &quot;2020-09-01T18:39:00.000+00:00&quot;,
                &quot;specimen&quot;: [
                    {
                        &quot;reference&quot;: &quot;https://localhost:10022/Specimen/LAB-D1&quot;
                    }
                ],
                &quot;result&quot;: [
                    {
                        &quot;reference&quot;: &quot;https://localhost:10022/Observation/A1-B1-C1-LabOrder-HEPC&quot;
                    },
                    {
                        &quot;reference&quot;: &quot;https://localhost:10022/Observation/A1-B1-C1-LabOrder-Syphilis&quot;
                    }
                ],
                &quot;conclusion&quot;: &quot;SELF&quot;,
                &quot;meta&quot;: {
                    &quot;versionId&quot;: &quot;216b1a5a-4ecf-48f6-a1c1-5fe791b1786f&quot;,
                    &quot;lastUpdated&quot;: &quot;2020-09-02T19:00:15.495+00:00&quot;
                }
            }
        },
        {
            &quot;fullUrl&quot;: &quot;https://localhost:10022/DiagnosticReport/F1-G1-H1&quot;,
            &quot;search&quot;: {
                &quot;mode&quot;: &quot;match&quot;
            },
            &quot;resource&quot;: {
                &quot;resourceType&quot;: &quot;DiagnosticReport&quot;,
                &quot;id&quot;: &quot;F1-G1-H1&quot;,
                &quot;extension&quot;: [
                    {
                        &quot;url&quot;: &quot;http://www.acme.org/resultsource&quot;,
                        &quot;valueString&quot;: &quot;Interface&quot;
                    }
                ],
                &quot;identifier&quot;: [
                    {
                        &quot;type&quot;: {
                            &quot;coding&quot;: [
                                {
                                    &quot;system&quot;: &quot;http://hl7.org/fhir/identifier-type&quot;,
                                    &quot;code&quot;: &quot;PLAC&quot;,
                                    &quot;display&quot;: &quot;PLAC&quot;
                                }
                            ]
                        },
                        &quot;system&quot;: &quot;PLAC&quot;,
                        &quot;value&quot;: &quot;H1&quot;
                    },
                    {
                        &quot;type&quot;: {
                            &quot;coding&quot;: [
                                {
                                    &quot;system&quot;: &quot;http://hl7.org/fhir/identifier-type&quot;,
                                    &quot;code&quot;: &quot;FILL&quot;,
                                    &quot;display&quot;: &quot;FILL&quot;
                                }
                            ]
                        },
                        &quot;system&quot;: &quot;FILL&quot;,
                        &quot;value&quot;: &quot;I1&quot;
                    }
                ],
                &quot;status&quot;: &quot;final&quot;,
                &quot;code&quot;: {
                    &quot;coding&quot;: [
                        {
                            &quot;system&quot;: &quot;99QDI&quot;,
                            &quot;code&quot;: &quot;36126&quot;,
                            &quot;display&quot;: &quot;RPR(DX) REFL CONFIRM&quot;
                        }
                    ]
                },
                &quot;subject&quot;: {
                    &quot;reference&quot;: &quot;https://localhost:10022/Patient/F1&quot;
                },
                &quot;context&quot;: {
                    &quot;reference&quot;: &quot;https://localhost:10022/Encounter/G1&quot;
                },
                &quot;effectiveDateTime&quot;: &quot;2018-05-11T21:48:00+00:00&quot;,
                &quot;issued&quot;: &quot;2020-08-31T16:50:00.000+00:00&quot;,
                &quot;specimen&quot;: [
                    {
                        &quot;reference&quot;: &quot;https://localhost:10022/Specimen/LAB-I1&quot;
                    }
                ],
                &quot;result&quot;: [
                    {
                        &quot;reference&quot;: &quot;https://localhost:10022/Observation/F1-G1-H1-LabOrder-Gonorrhea&quot;
                    },
                    {
                        &quot;reference&quot;: &quot;https://localhost:10022/Observation/F1-G1-H1-LabOrder-Syphilis&quot;
                    }
                ],
                &quot;conclusion&quot;: &quot;SELF&quot;,
                &quot;meta&quot;: {
                    &quot;versionId&quot;: &quot;8237b989-a49c-4fb5-b290-1259d3f087f0&quot;,
                    &quot;lastUpdated&quot;: &quot;2020-09-02T18:00:27.134+00:00&quot;
                }
            }
        },
        {
            &quot;fullUrl&quot;: &quot;https://localhost:10022/OperationOutcome/8aa5996f-cc57-4e21-963b-45720c76483c&quot;,
            &quot;search&quot;: {
                &quot;mode&quot;: &quot;outcome&quot;
            },
            &quot;resource&quot;: {
                &quot;resourceType&quot;: &quot;OperationOutcome&quot;,
                &quot;id&quot;: &quot;8aa5996f-cc57-4e21-963b-45720c76483c&quot;,
                &quot;meta&quot;: {
                    &quot;versionId&quot;: &quot;ae6ae6a4-e891-4dfe-9bc5-8a955809aecd&quot;,
                    &quot;lastUpdated&quot;: &quot;2020-09-02T19:30:48.312+00:00&quot;
                },
                &quot;issue&quot;: [
                    {
                        &quot;severity&quot;: &quot;error&quot;,
                        &quot;code&quot;: &quot;exception&quot;,
                        &quot;details&quot;: {
                            &quot;coding&quot;: [
                                {
                                    &quot;system&quot;: &quot;http://hl7.org/fhir/dotnet-api-operation-outcome&quot;,
                                    &quot;code&quot;: &quot;5006&quot;
                                }
                            ],
                            &quot;text&quot;: &quot;Parameter patient could target one of the resourcetypes &#39;Patient, Group&#39;. Please specify one of those types using the :type modifier.&quot;
                        }
                    },
                    {
                        &quot;severity&quot;: &quot;warning&quot;,
                        &quot;code&quot;: &quot;not-supported&quot;,
                        &quot;details&quot;: {
                            &quot;coding&quot;: [
                                {
                                    &quot;system&quot;: &quot;http://hl7.org/fhir/dotnet-api-operation-outcome&quot;,
                                    &quot;code&quot;: &quot;5003&quot;
                                }
                            ],
                            &quot;text&quot;: &quot;Parameter If-Modified-Since is not implemented&quot;
                        }
                    },
                    {
                        &quot;severity&quot;: &quot;warning&quot;,
                        &quot;code&quot;: &quot;not-supported&quot;,
                        &quot;details&quot;: {
                            &quot;coding&quot;: [
                                {
                                    &quot;system&quot;: &quot;http://hl7.org/fhir/dotnet-api-operation-outcome&quot;,
                                    &quot;code&quot;: &quot;5003&quot;
                                }
                            ],
                            &quot;text&quot;: &quot;Parameter If-None-Match is not implemented&quot;
                        }
                    }
                ]
            }
        }
    ],
    &quot;total&quot;: 5836,
    &quot;link&quot;: [
        {
            &quot;relation&quot;: &quot;self&quot;,
            &quot;url&quot;: &quot;https://localhost:10022/DiagnosticReport?_format=json&amp;_sort=-_lastUpdated&amp;_count=10&amp;_skip=0&quot;
        },
        {
            &quot;relation&quot;: &quot;next&quot;,
            &quot;url&quot;: &quot;https://localhost:10022/DiagnosticReport?_format=json&amp;_sort=-_lastUpdated&amp;_count=10&amp;_skip=10&quot;
        },
        {
            &quot;relation&quot;: &quot;last&quot;,
            &quot;url&quot;: &quot;https://localhost:10022/DiagnosticReport?_format=json&amp;_sort=-_lastUpdated&amp;_count=10&amp;_skip=5830&quot;
        }
    ],
    &quot;id&quot;: &quot;574fb9b4-a4bd-4044-9698-e09231777cb7&quot;,
    &quot;meta&quot;: {
        &quot;versionId&quot;: &quot;c48f0125-ef9d-4a45-8658-2b05d2b808f3&quot;,
        &quot;lastUpdated&quot;: &quot;2020-09-02T19:30:48.291+00:00&quot;
    }
}
</code></pre></div>



<a name="208898764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20returning%20OperationOutcome%20-%20how%20to%20identify%3F/near/208898764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20returning.20OperationOutcome.20-.20how.20to.20identify.3F.html#208898764">(Sep 02 2020 at 22:54)</a>:</h4>
<blockquote>
<p>In such cases, the search process MAY include an OperationOutcome in the search set that contains additional hints and warnings about the search process. This is included in the search results as an entry with search mode = outcome</p>
</blockquote>
<p>if looking for Bundle.entry.search.mode = outcome is easier you have that..</p>
<p>the other thing you can do is check the link.url if it doesn't have a search parameter you sent that means that the parameter was ignored. couldn't find the specific text on that one but I'm pretty sure its true..</p>



<a name="209099516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20returning%20OperationOutcome%20-%20how%20to%20identify%3F/near/209099516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santosh Jami <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20returning.20OperationOutcome.20-.20how.20to.20identify.3F.html#209099516">(Sep 04 2020 at 14:26)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="237342">@ryan moehrke</span> .<br>
Adding the fix to look for search params returned in "self-link", and also a condition for Bundle.entry.search.mode = outcome</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
