---
layout: page
title: "FHIR Chat  · search: on-the-fly composites? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html">search: on-the-fly composites?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153900188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900188">(Aug 02 2017 at 20:35)</a>:</h4>
<p>Monday in the FHIR Infrastructure WG we discussed <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13324" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13324">GF#13324</a>, where <span class="user-mention" data-user-id="191351">@Chris Grenz</span> asked about a more expressive way to find resources based on inbound connections. (Specifically he wanted a way to say: find me all Patients pointed to by a Provenance that meets conditions A and B. Today's API lets you say: find me all Patients pointed to by a Provenance that meets condition A and a Provenance that meets condition B — but there's no way to restrict the search to cases where a single Provenance meets both conditions.)</p>



<a name="153900190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900190">(Aug 02 2017 at 20:37)</a>:</h4>
<p>It seems to me like this issue isn't restricted to inbound references (with <code>_has</code> search parameters). Rather, the same issue arises for outbound connections. Like I can say <code>Patient?generalPractitioner.given=John&amp;generalPractitioner.family=Smith</code> — but this query also finds patients with two provides, named "John Adams" and "Alice Smith".</p>



<a name="153900191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900191">(Aug 02 2017 at 20:39)</a>:</h4>
<p>In fact, it can even apply to queries within a given resource, on repeated fields. Like the following erroneous way to find patients with diastolic hypertension (diastolic BP  &gt; 100): <code>Observation?component-name=diastolic&amp;component-value=gt100</code></p>
<p>the problem is that this query will match observations with a  normal BP (of 120/80), because it contains <em>some</em> diastolic value, and <em>some</em> value over 100 mmHg.</p>



<a name="153900192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900192">(Aug 02 2017 at 20:40)</a>:</h4>
<p>For the final case (within-resource queries) FHIR has "composite" search parameters — a way to ask for <code>component-value-quantity=diastolic$gt100</code>.</p>



<a name="153900193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900193">(Aug 02 2017 at 20:41)</a>:</h4>
<p>The question is: should we try to introduce some on-the-fly way to perform similar constraints-on-subtrees for queries that cross resource boundaries?</p>



<a name="153900195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900195">(Aug 02 2017 at 20:41)</a>:</h4>
<p>I'm inclined to say "No", on the principle that FHIR's search interface was never designed to handle full-on graph search. But we've historically had difficulty explaining exactly how to draw this line.</p>



<a name="153900196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900196">(Aug 02 2017 at 20:42)</a>:</h4>
<p>Agree it's a generalizable problem.</p>



<a name="153900207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900207">(Aug 02 2017 at 20:59)</a>:</h4>
<p>the _filter parameter can do all this stuff.</p>



<a name="153900208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900208">(Aug 02 2017 at 21:00)</a>:</h4>
<p>it intrigues me that there's such resistance to it....</p>



<a name="153900274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900274">(Aug 02 2017 at 23:56)</a>:</h4>
<p>It's likely lack of understanding. Can you share some examples of how to solve this with <code>filter</code>?</p>



<a name="153900276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900276">(Aug 03 2017 at 00:04)</a>:</h4>
<p>_filter=related[type eq has-component and target.code eq 2345-6].target re url</p>



<a name="153900425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900425">(Aug 03 2017 at 21:13)</a>:</h4>
<p>Can you maybe write out the "Patient with a provider with first name John and last name Smith" example <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>? I'm still having trouble following.</p>



<a name="153900431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900431">(Aug 03 2017 at 21:42)</a>:</h4>
<div class="codehilite"><pre><span></span>GET [base]/Patient?_filter=general-practitioner[given eq John and family eq Smith].id pr true
</pre></div>



<a name="153900432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/search%3A%20on-the-fly%20composites%3F/near/153900432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/search.3A.20on-the-fly.20composites.3F.html#153900432">(Aug 03 2017 at 21:42)</a>:</h4>
<p>i think.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
