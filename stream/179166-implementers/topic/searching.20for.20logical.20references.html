---
layout: page
title: "FHIR Chat  · searching for logical references · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html">searching for logical references</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154024402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/154024402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#154024402">(Dec 11 2018 at 13:26)</a>:</h4>
<p>Whats the syntax for searching for a patient that has a 'logical reference' link where the search criteria would be the logical link. Is that possible?</p>



<a name="154024409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/154024409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#154024409">(Dec 11 2018 at 13:47)</a>:</h4>
<p><a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14103" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14103">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14103</a></p>



<a name="154024411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/154024411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#154024411">(Dec 11 2018 at 13:48)</a>:</h4>
<p>"Will clearly define that chaining, reverse chaining and include are only defined to work for references using canonical or Reference.reference. "</p>



<a name="154024412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/154024412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#154024412">(Dec 11 2018 at 13:49)</a>:</h4>
<p>"Will add a ":identifier" modifier for reference searches that allows specifying the value to match on in Reference.identifier."</p>



<a name="154024413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/154024413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#154024413">(Dec 11 2018 at 13:49)</a>:</h4>
<p>Now, we just have to find out where that text ended up in the spec...</p>



<a name="154024414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/154024414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#154024414">(Dec 11 2018 at 13:49)</a>:</h4>
<p><a href="http://build.fhir.org/search.html#reference" target="_blank" title="http://build.fhir.org/search.html#reference">http://build.fhir.org/search.html#reference</a>, search for "References are also allowed to have an identifier"</p>



<a name="154024430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/154024430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#154024430">(Dec 11 2018 at 15:18)</a>:</h4>
<p>So if my resource looks like:</p>
<div class="codehilite"><pre><span></span>{
    &quot;resourceType&quot;: &quot;Patient&quot;,
    &quot;id&quot;: &quot;1&quot;,
    &quot;identifier&quot;: [
        {
            &quot;system&quot;: &quot;a&quot;,
            &quot;value&quot;: &quot;b&quot;
        }
    ],
    &quot;link&quot;: [
        {
            &quot;other&quot;: {
                &quot;identifier&quot;: {
                    &quot;system&quot;: &quot;a&quot;,
                    &quot;value&quot;: &quot;c&quot;
                }
            },
            &quot;type&quot;: &quot;replaced-by&quot;
        }
    ]
}
</pre></div>


<p>... it should be possible to find it using '/Patient?link:identifier=a|c'   ?</p>



<a name="154024449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/154024449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#154024449">(Dec 11 2018 at 16:06)</a>:</h4>
<p>I think that's correct.</p>



<a name="154024756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/154024756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#154024756">(Dec 12 2018 at 11:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> is that supposed to work out of the box in HAPI JPA? Because it doesn't ... :(</p>



<a name="154024803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/154024803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#154024803">(Dec 12 2018 at 15:07)</a>:</h4>
<p>the identifier qualifier is pretty new, so probably not widely supported yet.</p>



<a name="154024804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/154024804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#154024804">(Dec 12 2018 at 15:08)</a>:</h4>
<p>it never hurts to ask ;)</p>



<a name="157666260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/157666260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flemming Jørgensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#157666260">(Feb 06 2019 at 05:21)</a>:</h4>
<p>With version 3.6.0 I have verified that you can simply post a SearchParameter with the expression Patient.link.other.identifier and voila!</p>



<a name="161136364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/161136364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Christensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#161136364">(Mar 19 2019 at 10:09)</a>:</h4>
<blockquote>
<p>With version 3.6.0 I have verified that you can simply post a SearchParameter with the expression Patient.link.other.identifier and voila!</p>
</blockquote>
<p><span class="user-mention" data-user-id="193540">@Flemming Jørgensen</span>: Am trying to construct such a search against the <a href="http://hapi.fhir.org/baseR4" target="_blank" title="http://hapi.fhir.org/baseR4">hapi.fhir.org/baseR4</a> server, but am not succeeding. How exactly should your search url look to make this work?</p>



<a name="161137175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/161137175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Christensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#161137175">(Mar 19 2019 at 10:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span>, did you ever find a way for doing such searches?</p>



<a name="161137437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/161137437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flemming Jørgensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#161137437">(Mar 19 2019 at 10:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191521">@Michael Christensen</span> Given a SearchParameter named patientLink the search would be like this: <code>baseUrl/Patient?patientLink=&lt;system&gt;|&lt;value&gt;</code> We are currently on hapi version 3.7.0 but only using STU3</p>



<a name="161141668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/161141668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Christensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#161141668">(Mar 19 2019 at 11:32)</a>:</h4>
<p><span class="user-mention" data-user-id="193540">@Flemming Jørgensen</span>: Thanks, but I can't seem to make this work in our case. For instance we have a PractitionerRole (at <a href="http://hapi.fhir.org/baseR4/PractitionerRole/12512" target="_blank" title="http://hapi.fhir.org/baseR4/PractitionerRole/12512">http://hapi.fhir.org/baseR4/PractitionerRole/12512</a>):</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;PractitionerRole&quot;,
  &quot;id&quot;: &quot;12512&quot;,
  &quot;meta&quot;: {
    &quot;versionId&quot;: &quot;1&quot;,
    &quot;lastUpdated&quot;: &quot;2019-03-19T09:57:41.936+00:00&quot;
  },
  &quot;identifier&quot;: [
    {
      &quot;system&quot;: &quot;urn:ietf:rfc:3986&quot;,
      &quot;value&quot;: &quot;79bd3605-e5f7-49ff-b813-06befb9c036b&quot;
    }
  ],
  &quot;active&quot;: true,
  &quot;period&quot;: {
    &quot;start&quot;: &quot;2017-02-01&quot;
  },
  &quot;practitioner&quot;: {
    &quot;type&quot;: &quot;Practitioner&quot;,
    &quot;identifier&quot;: {
      &quot;system&quot;: &quot;https://stps.dk/da/sundhedsprofessionelle-og-myndigheder/autorisationsregister/autorisationsid/&quot;,
      &quot;value&quot;: &quot;55GT7&quot;
    }
  },
  &quot;organization&quot;: {
    &quot;type&quot;: &quot;Organization&quot;,
    &quot;identifier&quot;: {
      &quot;system&quot;: &quot;urn:oid:1.2.208.176.1.1&quot;,
      &quot;value&quot;: &quot;453191000016003&quot;
    }
  }
}
</pre></div>


<p>And I try to search for <a href="http://hapi.fhir.org/baseR4/PractitionerRole?organization=urn:oid:1.2.208.176.1.1|453191000016003" target="_blank" title="http://hapi.fhir.org/baseR4/PractitionerRole?organization=urn:oid:1.2.208.176.1.1|453191000016003">http://hapi.fhir.org/baseR4/PractitionerRole?organization=urn:oid:1.2.208.176.1.1|453191000016003</a>, but the resulting Bundle is empty. Have also tried <a href="http://hapi.fhir.org/baseR4/PractitionerRole?organization.identifier=urn:oid:1.2.208.176.1.1|453191000016003" target="_blank" title="http://hapi.fhir.org/baseR4/PractitionerRole?organization.identifier=urn:oid:1.2.208.176.1.1|453191000016003">http://hapi.fhir.org/baseR4/PractitionerRole?organization.identifier=urn:oid:1.2.208.176.1.1|453191000016003</a> with the same result. I am probably missing something obvious here, but I just can't get my head around it.</p>
<p>By the way, we're on FHIR R4.</p>



<a name="161142773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/161142773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flemming Jørgensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#161142773">(Mar 19 2019 at 11:53)</a>:</h4>
<p>I would say that the correct search would be:  <a href="http://hapi.fhir.org/baseR4/PractitionerRole?organization:identifier=urn:oid:1.2.208.176.1.1|453191000016003" target="_blank" title="http://hapi.fhir.org/baseR4/PractitionerRole?organization:identifier=urn:oid:1.2.208.176.1.1|453191000016003">http://hapi.fhir.org/baseR4/PractitionerRole?organization:identifier=urn:oid:1.2.208.176.1.1|453191000016003</a> with a ":" instead of ".". However it doesn't work. I have created a custom SearchParameter :</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="s2">&quot;SearchParameter&quot;</span><span class="p">,</span>
  <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://test.dk/SearchParameter/PractitionerRole&quot;</span><span class="p">,</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;PractitionerRole organization identifier&quot;</span><span class="p">,</span>
  <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span><span class="p">,</span>
  <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;organizationLink&quot;</span><span class="p">,</span>
  <span class="nt">&quot;base&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&quot;PractitionerRole&quot;</span>
  <span class="p">],</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;token&quot;</span><span class="p">,</span>
  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Search parameter that basically fixes organization:identifier search param not working&quot;</span><span class="p">,</span>
  <span class="nt">&quot;expression&quot;</span><span class="p">:</span> <span class="s2">&quot;PractitionerRole.organization.identifier&quot;</span><span class="p">,</span>
  <span class="nt">&quot;xpathUsage&quot;</span><span class="p">:</span> <span class="s2">&quot;normal&quot;</span>
<span class="p">}</span>
</pre></div>


<p>and now you can find it like this: <a href="http://hapi.fhir.org/baseR4/PractitionerRole?organizationLink=urn:oid:1.2.208.176.1.1|453191000016003" target="_blank" title="http://hapi.fhir.org/baseR4/PractitionerRole?organizationLink=urn:oid:1.2.208.176.1.1|453191000016003">http://hapi.fhir.org/baseR4/PractitionerRole?organizationLink=urn:oid:1.2.208.176.1.1|453191000016003</a></p>
<p>This is a workaround I know</p>



<a name="161143644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/161143644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Christensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#161143644">(Mar 19 2019 at 12:05)</a>:</h4>
<p>Yeah, I also did try previously with the "organization:identifier" search with no luck. However, your solution with the custom SearchParameter is very clever. I will try to use that until the ":identifier" stuff gets implemented in HAPI. </p>
<p>Thanks!</p>



<a name="161145541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/searching%20for%20logical%20references/near/161145541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/searching.20for.20logical.20references.html#161145541">(Mar 19 2019 at 12:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191521">@Michael Christensen</span>  SearchParameters are indeed very powerful</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
