---
layout: page
title: "FHIR Chat  · Task dependencies · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html">Task dependencies</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="204604298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204604298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Orlando Osorio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204604298">(Jul 21 2020 at 21:20)</a>:</h4>
<p>We use tasks to model most of our non-trivial workflows, and some of those tasks are automated.</p>
<p>We need to model dependencies between some tasks, e.g.:</p>
<p>Task #1: pay for Invoice/5<br>
Task #2: send a fax to the pharmacy</p>
<p>Task/2 is automated, but we need to block it by Task/1, so that when someone balances Invoice/5, only then the fax is sent.</p>
<p>We looked at putting Task/2 with status <code>on-hold</code> and add Task/1 as an input to Task/2 with a label of <code>blockedBy</code> or <code>dependsOn</code>. While that works for the moment,  we were thinking maybe it made sense to have something more "first-class", so the queries are more explicit, the intent is more apparent and the implementation easier.</p>
<p>We can, of course, add an extension, but wanted to know if this is something that made sense to have in FHIR.</p>



<a name="204630732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204630732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204630732">(Jul 22 2020 at 05:04)</a>:</h4>
<p>It probably doesn't make sense to have as part of core, but it's potentially reasonable to have this included as a standard extension.  You could submit a change request.  You might also look at RequestGroup, which allows strict dependency of a bunch of Request resources (of which Task is one).  However, it doesn't allow for independent state transitions of the governed requests - the state is maintained at the RequestGroup level.</p>



<a name="204677085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204677085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Orlando Osorio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204677085">(Jul 22 2020 at 14:58)</a>:</h4>
<p>We use RequestGroups when we want to orchestrate more complex operations.</p>
<p>We looked at them for this scenario but we feel that using them would change the root resource of some operations. Most of the time we don't have dependencies and backend services just look for active tasks to perform (by code and owner). It also adds a new "thing" to create for seemingly simple user actions.</p>
<p>Our goal is to build upon the Task abstraction to provide an easy to use, easy to understand, data-oriented interface for the end-user and we think most of it is achievable using Task as a building block. The only piece we've found missing is the ability to link Tasks with a label (blocked-by, depends-on, related, superseded, etc)</p>
<p>Would you consider instead of adding a <code>dependsOn</code> property to core having something more generic and extensible like <a href="https://www.hl7.org/fhir/medicationknowledge-definitions.html#MedicationKnowledge.relatedMedicationKnowledge">MedicationKnowledge.relatedMedicationKnowledge</a>?</p>



<a name="204680588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204680588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204680588">(Jul 22 2020 at 15:22)</a>:</h4>
<p>Isn't a depends-on relationship expressible with PlanDefinition? It seemed to me that was what we have been discussion in the FHIR workflow calls...</p>



<a name="204681531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204681531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Orlando Osorio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204681531">(Jul 22 2020 at 15:29)</a>:</h4>
<p>While it is expressible we would have to name it, create a new "thing", coordinate state changes, move the responsibility up the graph, and introduce PlanDefinition (and CarePlans?) to our model.</p>
<p>In our case, the dependency is managed at the task level, practitioners and office staff understand those dependencies at that level, A is blocked by B, C is related to D, etc.</p>
<p>We already use PlanDefinition and CarePlans in other contexts, we have protocols that fit perfectly in the PlanDefinition resource. But we think the needs here are a bit lighter.</p>
<p>As an example of the type of interface we are building for Task management, please check <a href="https://clickup.com/features/dependencies">https://clickup.com/features/dependencies</a></p>



<a name="204690311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204690311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204690311">(Jul 22 2020 at 16:36)</a>:</h4>
<p>PlanDefinition would define the rule, but it's reasonable/appropriate for the actual Task/Request to explicitly declare the pre-condition constraint.</p>



<a name="204804576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204804576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Orlando Osorio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204804576">(Jul 23 2020 at 14:30)</a>:</h4>
<p>Hi, <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>, just in case this question got missed:</p>
<blockquote>
<p>Would you consider instead of adding a dependsOn property to core having something more generic and extensible like MedicationKnowledge.relatedMedicationKnowledge?</p>
</blockquote>



<a name="204806412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204806412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204806412">(Jul 23 2020 at 14:42)</a>:</h4>
<p>We try hard to avoid 'typed' references because they're harder to constrain and declare conformance to - you get forced into slicing.  Best practice is to enumerate the specific types of relationships as distinct properties - each potentially constrained to different allowed target resources.</p>



<a name="204806526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204806526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204806526">(Jul 23 2020 at 14:43)</a>:</h4>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span> <span class="user-mention" data-user-id="191759">@Melva Peters</span> side question - why is MedicationKnowledge taking this approach.  And in particular, why isn't the 'type' element constrained to a specific value set?</p>



<a name="204806793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204806793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Melva Peters <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204806793">(Jul 23 2020 at 14:45)</a>:</h4>
<p>There will be value sets added, we haven't finished that work yet.  Is it an issue if they are exemplar value sets?</p>



<a name="204809136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204809136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204809136">(Jul 23 2020 at 15:02)</a>:</h4>
<p>For something like this, it really ought to be required or extensible.  Otherwise you would have zero interoperability.  "This med relates to this other med 'somehow' doesn't tell you much..."</p>



<a name="204809241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204809241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Orlando Osorio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204809241">(Jul 23 2020 at 15:03)</a>:</h4>
<p>We currently use MedicationKnowledge.related to model medications that have minor variations between them but are different products in our catalog, e.g.: different flavors, different packaging (syringe vs topi-click), etc. And we link them with shortcuts in the UI when ordering.</p>
<p>The value set we use is our own, so 'example' or 'preferred' would be ideal for us.</p>



<a name="204813152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204813152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204813152">(Jul 23 2020 at 15:31)</a>:</h4>
<p>Example/preferred is always easier because no mapping is required, but the result is that while it's easy to comply, it's next to impossible to interoperate across organizations.</p>



<a name="204820607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204820607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204820607">(Jul 23 2020 at 16:30)</a>:</h4>
<p>the "relatedMedicationKnowledge" element is intended to allow for hierarchies of products to be expressed.  We've had use cases for simply parent-child relationships, but also related, same class, equivalence, etc.  Thus we added a type code to allow different knowledgebase vendors to express their assorted hierarchies.  Like Melva said, we are currently working on providing example bindings to value sets.</p>



<a name="204823158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204823158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204823158">(Jul 23 2020 at 16:50)</a>:</h4>
<p>Why wouldn't you provide required or extensible bindings?  Why the need to support variation by implementation?</p>



<a name="204823989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204823989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204823989">(Jul 23 2020 at 16:57)</a>:</h4>
<p>because we have no idea what the complete set of relationships would be.  and different implementations will have different relationships.</p>



<a name="204824096"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204824096" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204824096">(Jul 23 2020 at 16:58)</a>:</h4>
<p>That doesn't mean you can't identify the 4-5 most common ones and mandate codes for those with an extensible binding</p>



<a name="204824172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204824172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204824172">(Jul 23 2020 at 16:59)</a>:</h4>
<p>that's an interesting idea.  when we get this more complete and have a connectathon about it, we'll ask the implementers what they think</p>



<a name="204830743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204830743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204830743">(Jul 23 2020 at 17:54)</a>:</h4>
<p>A wide open typed relationship is a FHIR anti-pattern</p>



<a name="204831928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204831928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204831928">(Jul 23 2020 at 18:03)</a>:</h4>
<p>really?  hmm.  (looks at ServiceRequest.performerType, Claim.related.relationship, EpisodeOfCare.diagnosis.role). As Melva and I said above, we are still working on all of our value sets and their bindings and we'll take your advice into account when we work with our implementers.</p>



<a name="204840887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204840887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204840887">(Jul 23 2020 at 19:08)</a>:</h4>
<p>A side observation: ServiceRequest, Claim, EpisodeOfCare are all FMM level 2. Is removing the anti-pattern something to be considered when resources move to a higher level?</p>



<a name="204840957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204840957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204840957">(Jul 23 2020 at 19:08)</a>:</h4>
<p>performerType isn't tied to a relationship.  Claim.related.relationship is definitely antipattern.  EpisodeOfCare.diagnosis.role is a qualifier and is optional.  It's not necessary to understand the instance.</p>



<a name="204841052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Task%20dependencies/near/204841052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Task.20dependencies.html#204841052">(Jul 23 2020 at 19:09)</a>:</h4>
<p>Removing anti-patterns can (and should) be done as early as they're detected prior to getting locked into normative.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
