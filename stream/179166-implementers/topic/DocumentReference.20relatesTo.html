---
layout: page
title: "FHIR Chat  · DocumentReference relatesTo · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html">DocumentReference relatesTo</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="269305444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269305444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amy Allen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269305444">(Jan 25 2022 at 18:55)</a>:</h4>
<p>Looking for some details and input for how to connect documentreference entries using the relatesTo element. <br>
The use case we are needing to accommodate is this - User creates a document entry in the system and saves. <br>
This is saved into the database and assigned an ID, for example ID 25. <br>
User then selects to append to the original document (ID 25) by entering an amendment. <br>
Amendment is saved into the database and assigned an ID, for example ID 45. <br>
So these are saved as unique, separate entries but we have a designation in the db that links the documents together.<br>
In our system we would present these together for viewing to show the complete documentation. <br>
Our understanding of the FHIR spec is that we would use the relatesTo element on the second document, <br>
 the amendment (ID 45) using a code of "appends" and target reference to the first original document (ID 25).  <br>
QUESTIONS: <br>
Is our interpretation accurate? <br>
Is the relatesTo element the best way to connect these partial documents?<br>
How do we indicate on the first original documentreference entry (ID 25) that there is a second, <br>
amendment documentreference entry (ID 45) that completes the document and needs to be included for a full view?</p>



<a name="269308718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269308718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269308718">(Jan 25 2022 at 19:17)</a>:</h4>
<p>I think the solution is correct. You can use _revinclude: <code>DocumentReference?_id=25&amp;_revinclude=DocumentReference.relatesto</code></p>



<a name="269311370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269311370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269311370">(Jan 25 2022 at 19:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="413699">Amy Allen</span> <a href="#narrow/stream/179166-implementers/topic/DocumentReference.20relatesTo/near/269305444">said</a>:</p>
<blockquote>
<p>How do we indicate on the first original documentreference entry (ID 25) that there is a second, <br>
amendment documentreference entry (ID 45) that completes the document and needs to be included for a full view?</p>
</blockquote>
<p><span class="user-mention" data-user-id="413699">@Amy Allen</span>,  In case <span class="user-mention" data-user-id="191506">@Yunwei Wang</span>'s answer isn't clear enough, there is no need to update the first DocumentReference to indicate it has been amended. You can structure your search (as indicated) to that anything that relatesTo the DocumentReference is returned in the results. However, depending on whether your "amended" means "adds further content," or "replaces previous content" you may want to mark the orginal DocumentReference as with superseded status.</p>



<a name="269326877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269326877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amy Allen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269326877">(Jan 25 2022 at 21:24)</a>:</h4>
<p>Thank you for the response! I am taking this back to my team for discussion.</p>



<a name="269389145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269389145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Alper <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269389145">(Jan 26 2022 at 10:32)</a>:</h4>
<p>Other resources (such as Composition and Citation) had the relatesTo element changed to use RelatedArtifact datatype in R5.  RelatedArtifact.type has more codes available including amends | amended-with | appends | appended-with so you can document the relations in either direction. This was necessary because sometime the related artifact is not a FHIR Resource so you can not always control the preferred direction of relationship.</p>



<a name="269415237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269415237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269415237">(Jan 26 2022 at 14:02)</a>:</h4>
<p>Is there a ticket to apply this to DocumentReference? We should be consistent. ( <span class="user-mention" data-user-id="191404">@John Moehrke</span> )</p>



<a name="269416848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269416848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269416848">(Jan 26 2022 at 14:11)</a>:</h4>
<p>there is not a ticket. I didn't know that Composition did that. Unfortunate that RelatedArtifact includes a .document (Attachment) inside. This is going to make relatesTo rather confusing. Even in Composition this seems problematic. I think this use of the metdatatype should be thought thru a bit more. Might need a more trim version of RelatedArtifact that doesn't have this blob inside.</p>



<a name="269436992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269436992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Alper <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269436992">(Jan 26 2022 at 16:12)</a>:</h4>
<p>If the related artifact is available as an attachment, how would you handle it otherwise?   Or are you just suggesting RelatedArtifact.attachment would be a better element name than RelatedArtifact.document where the datatype for that element is Attachment?</p>



<a name="269437029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269437029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Alper <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269437029">(Jan 26 2022 at 16:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span></p>



<a name="269446651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269446651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269446651">(Jan 26 2022 at 17:11)</a>:</h4>
<p>We need to be <em>very</em> careful with RelatedArtifact.  It should NOT be widely used as it's actually contrary to FHIR best practices.  There are a few limited places where it makes sense (e.g. Citation), but it should absolutely not be something that sees widespread use.</p>



<a name="269447065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269447065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269447065">(Jan 26 2022 at 17:14)</a>:</h4>
<p>At a quick glance, if it's in composition, it should be in DocumentReference. However, why we need it, and not just use DocumentReference isn't clear.</p>



<a name="269454392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269454392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Alper <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269454392">(Jan 26 2022 at 18:00)</a>:</h4>
<p>RelatedArtifact is a Datatype and DocumentReference is a Resource.  If the relation between artifacts does not require its own resource for exchange as a shareable unit, it seems preferable to use a Datatype to a new Resource.  I believe the RelatedArtifact Datatype was developed for relations between artifacts in resources that are often not patient-specific (PlanDefinition, Library, Citation, Evidence, etc.)</p>



<a name="269459157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269459157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269459157">(Jan 26 2022 at 18:31)</a>:</h4>
<p>In general, we want relationships to be called out by explicit elements (one per relationship) that appropriately control cardinality, direction and mustSupport.  We don't want bidirectional relationships.  We don't want relationships that aren't "core" showing up as core elements.  And we want it to be easy for profiles to place constraints on relationships.  Using RelatedArtifact makes all of these things harder.  So it should not be used most places.</p>



<a name="269461229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269461229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269461229">(Jan 26 2022 at 18:46)</a>:</h4>
<p>so then Composition should revert</p>



<a name="269463603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269463603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269463603">(Jan 26 2022 at 19:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192085">Brian Alper</span> <a href="#narrow/stream/179166-implementers/topic/DocumentReference.20relatesTo/near/269454392">said</a>:</p>
<blockquote>
<p>RelatedArtifact is a Datatype and DocumentReference is a Resource.  If the relation between artifacts does not require its own resource for exchange as a shareable unit, it seems preferable to use a Datatype to a new Resource.</p>
</blockquote>
<p>I don't understand this. We could make the same argument that all of Observation should just be made a datatype that can be included in Compositions.</p>
<blockquote>
<p>I believe the RelatedArtifact Datatype was developed for relations between artifacts in resources that are often not patient-specific (PlanDefinition, Library, Citation, Evidence, etc.)</p>
</blockquote>
<p>There's nothing about DocumentReference that requires it be patient-centric. IHE even has the NPFS profile of DocumentReference that is specifically tailored for non-patient documents.</p>



<a name="269471419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269471419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Alper <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269471419">(Jan 26 2022 at 19:53)</a>:</h4>
<p>The relatesTo element and RelatedArtifact Datatype are primarily about the relationship between artifacts/resources, and the Observation and DocumentReference Resources are primarily for the artifact/resource itself, so one does not replace the other.  There are schemas like Scholix (<a href="http://www.scholix.org/">http://www.scholix.org/</a>) that represent the relationships/links between artifacts/resources as separate entities but I don't think there is an intention in FHIR to create a Resource to represent the links between resources.</p>



<a name="269602431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20relatesTo/near/269602431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20relatesTo.html#269602431">(Jan 27 2022 at 16:57)</a>:</h4>
<p>I am worried about all of the multi-directionality in the valueset that RelatedArtifact supports. It does not support a deterministic method that FHIR RESTful directionality modeling relies on. Pointers should be a deterministic direction, usually from the resource that is created later toward the resource that was created before. These can be navigated both directions.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
