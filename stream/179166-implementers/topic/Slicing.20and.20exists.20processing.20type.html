---
layout: page
title: "FHIR Chat  · Slicing and exists processing type · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html">Slicing and exists processing type</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153926481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153926481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Katie Wheatley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153926481">(Dec 20 2017 at 16:22)</a>:</h4>
<p>The HL7 FHIR website defines the exists processing type as <br>
exists  The slices are differentiated by the presence or absence of the nominated element.<br>
Does this mean that the slice differentiating will occur based on whether the element is populated or not, so there could be a legal discriminator with no value in it? Why would this processing type be used?</p>



<a name="153926507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153926507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153926507">(Dec 20 2017 at 20:22)</a>:</h4>
<p>I typically use it with an extension - so one slice where the extension is present and another where the extension is absent.  But you could do it for any element.  It allows you to place limits like "this extension is only allowed to be present on a maximum of one repetition" or "this extension must appear on at least one repetition".</p>



<a name="153970027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970027">(Jun 14 2018 at 23:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  can you share an example of this SD?</p>



<a name="153970031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970031">(Jun 14 2018 at 23:59)</a>:</h4>
<p>Deleted</p>



<a name="153970033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970033">(Jun 15 2018 at 00:03)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  but this isn't slicing where one slice contains  a extension and the other doesn't ?</p>



<a name="153970035"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970035" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970035">(Jun 15 2018 at 00:13)</a>:</h4>
<p>Should have read the thread first :)  Will post an example shortly.</p>



<a name="153970038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970038">(Jun 15 2018 at 00:45)</a>:</h4>
<div class="codehilite"><pre><span></span>&lt;element&gt;
  &lt;path value=&quot;Practitioner.practitionerRole&quot;/&gt;
  &lt;slicing&gt;
    &lt;discriminator&gt;
      &lt;type value=&quot;exists&quot;/&gt;
      &lt;path value=&quot;organization&quot;/&gt;
    &lt;/discriminator&gt;
    &lt;rules value=&quot;open&quot;/&gt;
  &lt;/slicing&gt;
  &lt;mustSupport value=&quot;true&quot;/&gt;
&lt;/element&gt;
&lt;element&gt;
  &lt;path value=&quot;Practitioner.practitionerRole&quot;/&gt;
  &lt;sliceName value=&quot;practitionerOrg&quot;/&gt;
  &lt;mustSupport value=&quot;true&quot;/&gt;
&lt;/element&gt;
&lt;element&gt;
  &lt;path value=&quot;Practitioner.practitionerRole.organization&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;type&gt;
    &lt;code value=&quot;Reference&quot;/&gt;
    &lt;targetProfile value=&quot;http://sharedhealth.exchange/fhir/StructureDefinition/profile-organization-service-location&quot;/&gt;
    &lt;aggregation value=&quot;bundled&quot;/&gt;
  &lt;/type&gt;
  &lt;mustSupport value=&quot;true&quot;/&gt;
&lt;/element&gt;
&lt;element&gt;
  &lt;path value=&quot;Practitioner.practitionerRole.organization.reference&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;mustSupport value=&quot;true&quot;/&gt;
&lt;/element&gt;
&lt;element&gt;
  &lt;path value=&quot;Practitioner.practitionerRole&quot;/&gt;
  &lt;sliceName value=&quot;practitionerSpecialty&quot;/&gt;
  &lt;mustSupport value=&quot;true&quot;/&gt;
&lt;/element&gt;
&lt;element&gt;
  &lt;path value=&quot;Practitioner.practitionerRole.organization&quot;/&gt;
  &lt;max value=&quot;0&quot;/&gt;
  &lt;mustSupport value=&quot;false&quot;/&gt;
&lt;/element&gt;
&lt;element&gt;
  &lt;path value=&quot;Practitioner.practitionerRole.role&quot;/&gt;
  &lt;type&gt;
    &lt;code value=&quot;CodeableConcept&quot;/&gt;
    &lt;profile value=&quot;http://sharedhealth.exchange/fhir/StructureDefinition/dtprofile-codeableconcept-code&quot;/&gt;
  &lt;/type&gt;
  &lt;mustSupport value=&quot;true&quot;/&gt;
  &lt;binding&gt;
    &lt;strength value=&quot;required&quot;/&gt;
    &lt;valueSetReference&gt;
      &lt;reference value=&quot;https://fhir.infoway-inforoute.ca/ValueSet/sharedpractitionerrole&quot;/&gt;
    &lt;/valueSetReference&gt;
  &lt;/binding&gt;
&lt;/element&gt;
&lt;element&gt;
  &lt;path value=&quot;Practitioner.practitionerRole.role.coding&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;mustSupport value=&quot;true&quot;/&gt;
&lt;/element&gt;
&lt;element&gt;
  &lt;path value=&quot;Practitioner.practitionerRole.specialty&quot;/&gt;
  &lt;min value=&quot;1&quot;/&gt;
  &lt;type&gt;
    &lt;code value=&quot;CodeableConcept&quot;/&gt;
    &lt;profile value=&quot;http://sharedhealth.exchange/fhir/StructureDefinition/dtprofile-codeableconcept-text-required-with-code&quot;/&gt;
  &lt;/type&gt;
  &lt;mustSupport value=&quot;true&quot;/&gt;
&lt;/element&gt;
</pre></div>



<a name="153970057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970057">(Jun 15 2018 at 04:59)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , I want to limit the choice on  Task.owner  to Practitioner or extension PractitionerRole, I thought this would be the ticket but I am stuck.  Getting a 'can't slice non-repeating elements' message in R3 build.  I can always use an invariant.</p>



<a name="153970058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970058">(Jun 15 2018 at 05:02)</a>:</h4>
<p>I thought this was possible but not so sure anymore.</p>



<a name="153970116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970116">(Jun 15 2018 at 10:59)</a>:</h4>
<p>That's odd.  You're using the most recent IGPublisher?</p>



<a name="153970137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970137">(Jun 15 2018 at 17:03)</a>:</h4>
<p>Is it possible because in the current build documentation it only talk about elements that repeat and polymorphic elements.  Nothing that describes slicing non repeating elements.   Also I may have done it wrong...since I hand edited it.  but want to make sure is a thing first before trying to debug it.  So basically here is the constraint</p>
<p>slice 1 Task.owner 0..1  ref(Practitioner)<br>
slice 2 Task.owner 0..1 extension...valueRed(PractitionerRole)</p>



<a name="153970139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970139">(Jun 15 2018 at 17:55)</a>:</h4>
<p>here is my xml snippet...</p>
<div class="codehilite"><pre><span></span>...
        &lt;element id=&quot;Task.owner&quot;&gt;
            &lt;path value=&quot;Task.owner&quot;/&gt;
            &lt;slicing&gt;
                &lt;discriminator&gt;
                    &lt;type value=&quot;exists&quot;/&gt;
                    &lt;path value=&quot;extension.url&quot;/&gt;
                &lt;/discriminator&gt;
                &lt;rules value=&quot;open&quot;/&gt;
            &lt;/slicing&gt;
            &lt;mustSupport value=&quot;true&quot;/&gt;
            &lt;isModifier value=&quot;false&quot;/&gt;
        &lt;/element&gt;
        &lt;element id=&quot;Task.owner:owner-p&quot;&gt;
            &lt;path value=&quot;Task.owner&quot;/&gt;
            &lt;sliceName value=&quot;owner-p&quot;/&gt;
            &lt;type&gt;
                &lt;code value=&quot;Reference&quot;/&gt;
                &lt;profile value=&quot;http://hl7.org/fhir/us/core/StructureDefinition/us-core-practitioner&quot;/&gt;
                &lt;targetProfile value=&quot;http://hl7.org/fhir/StructureDefinition/Practitioner&quot;/&gt;
            &lt;/type&gt;
            &lt;mustSupport value=&quot;true&quot;/&gt;
            &lt;isModifier value=&quot;false&quot;/&gt;
        &lt;/element&gt;
        &lt;element id=&quot;Task.owner:owner-pr&quot;&gt;
            &lt;path value=&quot;Task.owner&quot;/&gt;
            &lt;sliceName value=&quot;owner-pr&quot;/&gt;
            &lt;mustSupport value=&quot;true&quot;/&gt;
            &lt;isModifier value=&quot;false&quot;/&gt;
        &lt;/element&gt;
        &lt;element id=&quot;Task.owner:oner-pr.extension&quot;&gt;
            &lt;path value=&quot;Task.owner.extension&quot;/&gt;
            &lt;slicing&gt;
                &lt;discriminator&gt;
                    &lt;type value=&quot;value&quot;/&gt;
                    &lt;path value=&quot;url&quot;/&gt;
                &lt;/discriminator&gt;
                &lt;rules value=&quot;open&quot;/&gt;
            &lt;/slicing&gt;
            &lt;mustSupport value=&quot;true&quot;/&gt;
            &lt;isModifier value=&quot;false&quot;/&gt;
        &lt;/element&gt;
        &lt;element id=&quot;Task.owner:owner-pr.extension:owner-pr&quot;&gt;
            &lt;path value=&quot;Task.owner.extension&quot;/&gt;
            &lt;sliceName value=&quot;owner-pr&quot;/&gt;
            &lt;min value=&quot;0&quot;/&gt;
            &lt;max value=&quot;1&quot;/&gt;
            &lt;type&gt;
                &lt;code value=&quot;Extension&quot;/&gt;
                &lt;profile value=&quot;http://hl7.org/fhir/ig/davinci/StructureDefinition/ext-practitionerRole&quot;/&gt;
            &lt;/type&gt;
            &lt;mustSupport value=&quot;true&quot;/&gt;
            &lt;isModifier value=&quot;false&quot;/&gt;
        &lt;/element&gt;
...
</pre></div>



<a name="153970140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970140">(Jun 15 2018 at 17:58)</a>:</h4>
<p>If you want to base it on the existence of an extension, you need to do something like this:<br>
      &lt;slicing&gt;<br>
        &lt;discriminator&gt;<br>
          &lt;type value="exists"/&gt;<br>
          &lt;path value="extension('http://sharedhealth.exchange/fhir/StructureDefinition/ext-communication-sender-locum')"/&gt;<br>
        &lt;/discriminator&gt;<br>
        &lt;rules value="open"/&gt;<br>
      &lt;/slicing&gt;</p>



<a name="153970141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970141">(Jun 15 2018 at 17:58)</a>:</h4>
<p>End then in one slice, have a minOccurs=1 for that extension and in the other slice have a maxOccurs=0</p>



<a name="153970142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970142">(Jun 15 2018 at 18:02)</a>:</h4>
<p>Got it! ty.....that is not obvious to mere mortals like me. This seems like a relatively common pattern in r3 where the choice gets expanded by an ig.  Do you agree?  Is this only way to skin this cat using slicing and is it really better than using an invariant?</p>



<a name="153970148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Slicing%20and%20exists%20processing%20type/near/153970148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Slicing.20and.20exists.20processing.20type.html#153970148">(Jun 15 2018 at 18:12)</a>:</h4>
<p>It's the cleanest way to skin the cat.  You could put the extension on the root instead, but it's more vulnerable to getting stripped there.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
