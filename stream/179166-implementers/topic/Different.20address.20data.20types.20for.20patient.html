---
layout: page
title: "FHIR Chat  · Different address data types for patient · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html">Different address data types for patient</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="158620255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/158620255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Grundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#158620255">(Feb 15 2019 at 15:03)</a>:</h4>
<p>We are looking at how a Swedish profile for a patient could look like and particularly address formats. </p>
<p>In the core profile we have this:<br>
address Σ   0..*    Address An address for the individual</p>
<p>Address formats seem to differ slightly between different countries, so other countries seem to have created their own address data types:<br>
Netherlands: <a href="https://simplifier.net/NictizSTU3-Zib2017/nl-core-address" target="_blank" title="https://simplifier.net/NictizSTU3-Zib2017/nl-core-address">https://simplifier.net/NictizSTU3-Zib2017/nl-core-address</a><br>
Norway: <a href="https://simplifier.net/HL7Norwayno-basis/no-basis-Address" target="_blank" title="https://simplifier.net/HL7Norwayno-basis/no-basis-Address">https://simplifier.net/HL7Norwayno-basis/no-basis-Address</a></p>
<p>This seems to be a good way to define national requirements for an address. </p>
<p><strong>Question</strong><br>
A patient can according to the patient resource have multiple addresses, that is correct and good! But a patient can also have addresses in different countries. All the national profiles we have looked at only support one address data type. </p>
<p>Is there a way to profile so that a patient can have 0..* addresses, where each address is of different address data types? Maybe in our Swedish profile we want to have 0..* address of data type <strong>swe-core-address</strong>, but <em>also</em> 0..* address of data type <strong>address</strong>?</p>
<p>I know from working with Patient data in the UK that there were different address formats for "UK address" and "non-UK address", and we would want something similar here "Swe address" and "non-Swe address".</p>



<a name="158620481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/158620481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Grundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#158620481">(Feb 15 2019 at 15:06)</a>:</h4>
<p>The requirement seems to be a mix of slicing and how you can choose data type based on your requirement using <em>attribute</em>[x]</p>



<a name="158622998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/158622998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#158622998">(Feb 15 2019 at 15:39)</a>:</h4>
<p>You can define a must-support slice of address that's 0..* of addresses complying to your national profile and leave it open, which allows for other types of addresses too.  It's up to you whether you create an "everything" profile that defines minimum must-support expectations for arbitrary addresses.</p>



<a name="158638248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/158638248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#158638248">(Feb 15 2019 at 18:44)</a>:</h4>
<p>Can you slice on the country and require the swe-core-address when the country is Sweden, but leave it open otherwise?</p>



<a name="158651193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/158651193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#158651193">(Feb 15 2019 at 21:30)</a>:</h4>
<p>That's tricky.  If you have a Swedish address captured in a Canadian system, there's no guarantee it's going to comply with the Swedish profile.</p>



<a name="158672604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/158672604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#158672604">(Feb 16 2019 at 03:10)</a>:</h4>
<p>I'm not sure that I follow what's going on here. A patient can have only one address from Sweden?</p>



<a name="158676063"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/158676063" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#158676063">(Feb 16 2019 at 04:42)</a>:</h4>
<p>The slice would be 0..*.  It would just say there's a need to support Swedish-formatted addresses.</p>



<a name="158978235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/158978235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Grundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#158978235">(Feb 20 2019 at 14:18)</a>:</h4>
<p>Ah, is it that simple?</p>
<p>Create a slice on Address, set that slice to 0..* and change the data type to the Swedish address data type?</p>
<p>Do you need a second slice for the 0..* address?</p>
<p>What I would want (or potentially want) is something like this:</p>
<p>Address<br>
0..* swe-core-address (where this is a new data type for the national Swedish address format)<br>
0..* address (where this is the standard address data type)</p>
<p>There are lots of patients in Sweden who will live in the country for half the year, and then move to a nicer sunnier country in winter. And in that second country, the Swedish address format doesnt apply, but of course, correspondance might need to go to either their Swedish or foreign address. </p>
<p>Ideally, and maybe that was what Elliot was getting at, you would want the address data type to correspond to the country in which the address is. Need to think a bit more about that :)</p>



<a name="158988225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/158988225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#158988225">(Feb 20 2019 at 16:03)</a>:</h4>
<p>There's no need for a second slice if the base is already 0..<em>.  That would say "you can have 0..</em> addresses.  Within that, you must support 0..* addresses that comply with the swedish profile.</p>



<a name="158999876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/158999876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#158999876">(Feb 20 2019 at 18:26)</a>:</h4>
<p><span class="user-mention" data-user-id="197234">@Martin Grundberg</span> Yes, that was exactly what I was getting at -- for the systems that this applies to, there are no restrictions on international addresses, but if the address is in Sweden, then your Swedish profile applies.</p>



<a name="159000590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/159000590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#159000590">(Feb 20 2019 at 18:35)</a>:</h4>
<p>If you wanted to apply the rule to all Swedish addresses, you could slice by country - though you'd have to constrain country to a value set for that to work well</p>



<a name="182761052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182761052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182761052">(Dec 06 2019 at 13:42)</a>:</h4>
<p>How would you discriminate the different Address slices conforming to different address profiles?<br>
I have tried this for the Norwegian master person index, and the validator can not understand what profile it should validate against, It just tries out the first one in the list of allowed profiles and throws errors at me because the address given is actually conforming to another profile. I have not done any slicing, just given an option of more than one address profile in the profile definition like this: <br>
&lt;element id="Person.address"&gt;<br>
      &lt;path value="Person.address" /&gt;<br>
      &lt;definition value="Grunndata uses Five different address content types expressed in gd-Address profiles that further restricts the use of the <a href="http://hl7.no/fhir/StructureDefinition/no-basis-Address" target="_blank" title="http://hl7.no/fhir/StructureDefinition/no-basis-Address">http://hl7.no/fhir/StructureDefinition/no-basis-Address</a> to contain information from the norwegian Master person index.&#xD;&#xA;&#xD;&#xA;Based on: <a href="http://hl7.no/fhir/StructureDefinition/no-basis-Address" target="_blank" title="http://hl7.no/fhir/StructureDefinition/no-basis-Address">http://hl7.no/fhir/StructureDefinition/no-basis-Address</a>" /&gt;<br>
      &lt;type&gt;<br>
        &lt;code value="Address" /&gt;<br>
        &lt;profile value="<a href="http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral" target="_blank" title="http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral">http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral</a>" /&gt;<br>
        &lt;profile value="<a href="http://ehelse.no/fhir/StructureDefinition/gd-Address-international" target="_blank" title="http://ehelse.no/fhir/StructureDefinition/gd-Address-international">http://ehelse.no/fhir/StructureDefinition/gd-Address-international</a>" /&gt;<br>
        &lt;profile value="<a href="http://ehelse.no/fhir/StructureDefinition/gd-Address-street" target="_blank" title="http://ehelse.no/fhir/StructureDefinition/gd-Address-street">http://ehelse.no/fhir/StructureDefinition/gd-Address-street</a>" /&gt;<br>
        &lt;profile value="<a href="http://ehelse.no/fhir/StructureDefinition/gd-Address-box" target="_blank" title="http://ehelse.no/fhir/StructureDefinition/gd-Address-box">http://ehelse.no/fhir/StructureDefinition/gd-Address-box</a>" /&gt;<br>
        &lt;profile value="<a href="http://ehelse.no/fhir/StructureDefinition/gd-Address-freeform" target="_blank" title="http://ehelse.no/fhir/StructureDefinition/gd-Address-freeform">http://ehelse.no/fhir/StructureDefinition/gd-Address-freeform</a>" /&gt;<br>
      &lt;/type&gt;<br>
      &lt;mustSupport value="true" /&gt;<br>
    &lt;/element&gt;</p>



<a name="182761129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182761129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182761129">(Dec 06 2019 at 13:43)</a>:</h4>
<p>Is it possible to state what profile I try to conform to in the person instance somehow?</p>



<a name="182761924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182761924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182761924">(Dec 06 2019 at 13:53)</a>:</h4>
<p><span class="user-mention" data-user-id="197234">@Martin Grundberg</span> How did you discriminate the address types? Did you post a profile somewhere?</p>



<a name="182785671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182785671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182785671">(Dec 06 2019 at 17:49)</a>:</h4>
<p>How are you validating?</p>



<a name="182787666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182787666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182787666">(Dec 06 2019 at 18:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> I use my for-validation catalog: <a href="https://github.com/HL7Norway/Grunndata-profiles/tree/gd-Person21/for-validation-gd-r4" target="_blank" title="https://github.com/HL7Norway/Grunndata-profiles/tree/gd-Person21/for-validation-gd-r4">https://github.com/HL7Norway/Grunndata-profiles/tree/gd-Person21/for-validation-gd-r4</a><br>
To validate my examples: <a href="https://github.com/HL7Norway/Grunndata-profiles/tree/gd-Person21/examples" target="_blank" title="https://github.com/HL7Norway/Grunndata-profiles/tree/gd-Person21/examples">https://github.com/HL7Norway/Grunndata-profiles/tree/gd-Person21/examples</a><br>
In particular the gd-person: <a href="https://github.com/HL7Norway/Grunndata-profiles/blob/gd-Person21/examples/gd-Person-04021950128-version-2.xml" target="_blank" title="https://github.com/HL7Norway/Grunndata-profiles/blob/gd-Person21/examples/gd-Person-04021950128-version-2.xml">https://github.com/HL7Norway/Grunndata-profiles/blob/gd-Person21/examples/gd-Person-04021950128-version-2.xml</a><br>
fails running the official validator like this: <br>
java -jar C:\Users\Thomas\Downloads\org.hl7.fhir.validator.jar gd-Person-04021950128-version-2.xml -ig C:\GitRepo\grunndata-r4\for-validation-gd-r4 -version 4.0.1</p>



<a name="182787914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182787914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182787914">(Dec 06 2019 at 18:14)</a>:</h4>
<p>I can understand the codesystem error, as the definition of 3402 codesystem does'nt actually contain any codes. The validator seems to think that the address should be conforming to the gd-Address-cadastral profile, even though I try to actually provide a gd-Address-street type address.</p>
<p>Detected Java version: 1.8.0_31 from C:\Program Files\Java\jre1.8.0_31 on amd64 (64bit). 3636MB available<br>
Arguments: gd-Person-04021950128-version-2.xml -ig E:\GitRepo\grunndata-r4\for-validation-gd-r4 -version 4.0.1<br>
Directories: Current = E:\GitRepo\Grunndata-R4\examples, Package Cache = C:\Users\Thomas\.fhir\packages<br>
  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1<br>
  .. connect to tx server @ <a href="http://tx.fhir.org" target="_blank" title="http://tx.fhir.org">http://tx.fhir.org</a><br>
    (v4.0.1)<br>
+  .. load IG from E:\GitRepo\grunndata-r4\for-validation-gd-r4<br>
  .. validate [gd-Person-04021950128-version-2.xml]<br>
<em>FAILURE</em> validating gd-Person-04021950128-version-2.xml:  error:1 warn:0 info:4<br>
  Error @ Person.address[0].extension[0].extension[0].value.ofType(Coding) (line 77, col18) : Unknown Code urn:oid:2.16.578.1.12.4.1.1.3402#0238 in urn:oid:2.16.578.1.12.4.1.1.3402 for 'urn:oid:2.16.578.1.12.4.1.1.3402#0238'<br>
  Information @ Person.extension[0].extension[1] (line 10, col78) : This element does not match any known slice for the profile <a href="http://ehelse.no/fhir/StructureDefinition/gd-person-status" target="_blank" title="http://ehelse.no/fhir/StructureDefinition/gd-person-status">http://ehelse.no/fhir/StructureDefinition/gd-person-status</a><br>
  Information @ Person.address[0].extension[4] (line 128, col80) : This element does not match any known slice for the profile <a href="http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral" target="_blank" title="http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral">http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral</a><br>
  Information @ Person.address[0].line[0].extension[0] (line 143, col86) : This element does not match any known slice for the profile <a href="http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral" target="_blank" title="http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral">http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral</a><br>
  Information @ Person.address[0].line[0].extension[1] (line 146, col103) : This element does not match any known slice for the profile <a href="http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral" target="_blank" title="http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral">http://ehelse.no/fhir/StructureDefinition/gd-Address-cadastral</a></p>



<a name="182788126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182788126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182788126">(Dec 06 2019 at 18:17)</a>:</h4>
<p>Hmm.  It should be happy so long as one of the profiles is valid.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="182788199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182788199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182788199">(Dec 06 2019 at 18:18)</a>:</h4>
<p>so I understand saying that the address could be one of 5 different profiles, but why slice it?</p>



<a name="182788604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182788604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182788604">(Dec 06 2019 at 18:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I did not actually slice it, just gave five different options for possible profiles the Address can conform to. Sorry if the first post was confusing on that point.</p>



<a name="182794912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182794912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182794912">(Dec 06 2019 at 19:29)</a>:</h4>
<p>I haven't had any luck reproducing this. can you turn this into a simple test case - a single set of profiles and examples - the demonstrates the problem?</p>



<a name="182857364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182857364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182857364">(Dec 07 2019 at 19:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Just made a quick testproject to demonstrate the problem without any confusing other artifacts. Uploaded it here: <a href="https://github.com/thomiz/TestAddressTypes" target="_blank" title="https://github.com/thomiz/TestAddressTypes">https://github.com/thomiz/TestAddressTypes</a></p>
<p>When I try to validate the Person example that should be conformant to the complex address type, it succeeds, but the validator do not understand that there is in fact another Address type where this behaviour is defined.</p>
<div class="codehilite"><pre><span></span>E:\GitRepo\testing&gt;java -jar c:\Users\Thomas\Downloads\org.hl7.fhir.validator.jar Person-test.xml -ig . -version 4.0.1
FHIR Validation tool Version 4.1.19-SNAPSHOT - Built 2019-12-06T08:56:29.651+11:00 - Git 89195efad312
Detected Java version: 1.8.0_31 from C:\Program Files\Java\jre1.8.0_31 on amd64 (64bit). 3636MB available
Arguments: Person-test.xml -ig . -version 4.0.1
Directories: Current = E:\GitRepo\testing, Package Cache = C:\Users\Thomas\.fhir\packages
  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1
  .. connect to tx server @ http://tx.fhir.org
    (v4.0.1)
+  .. load IG from .
  .. validate [Person-test.xml]
Terminology server: Check for supported code systems for urn:iso:std:iso:3166
Success...validating Person-test.xml:  error:0 warn:0 info:1
  Information @ Person.address[0].extension[1] (line 23, col81) : This element does not match any known slice for the profile http://example.org/fhir/StructureDefinition/AddressWithExtension
</pre></div>



<a name="182857440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182857440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182857440">(Dec 07 2019 at 19:09)</a>:</h4>
<p>Seems the validator always tries out the first profile, but don't test if the example conforms to the second one. I would expect the validator not to ouput the Information text if it finds the second Address profile.</p>



<a name="182926887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182926887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182926887">(Dec 09 2019 at 06:02)</a>:</h4>
<p>ok so I'm committing a fix for this, but the information message has not gone away. it has changed a little:</p>



<a name="182926911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182926911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182926911">(Dec 09 2019 at 06:03)</a>:</h4>
<p>Information @ Person.address[0].extension[1] (line 23, col81) : This element does not match any known slice for the profile <a href="http://example.org/fhir/StructureDefinition/AddressWithExtension" target="_blank" title="http://example.org/fhir/StructureDefinition/AddressWithExtension">http://example.org/fhir/StructureDefinition/AddressWithExtension</a> (validating against <a href="http://example.org/fhir/StructureDefinition/AddressWithExtension" target="_blank" title="http://example.org/fhir/StructureDefinition/AddressWithExtension">http://example.org/fhir/StructureDefinition/AddressWithExtension</a> [AddressWithExtension])</p>



<a name="182926912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182926912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182926912">(Dec 09 2019 at 06:03)</a>:</h4>
<p>this is valid.</p>



<a name="182926952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182926952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182926952">(Dec 09 2019 at 06:04)</a>:</h4>
<p>Warning @ Person.address[0] (line 16, col11) : Found multiple matching profiles among choices: ; [http://example.org/fhir/StructureDefinition/AddressWithTwoExtensions, <a href="http://example.org/fhir/StructureDefinition/AddressWithExtension]" target="_blank" title="http://example.org/fhir/StructureDefinition/AddressWithExtension]">http://example.org/fhir/StructureDefinition/AddressWithExtension]</a></p>



<a name="182947841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182947841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182947841">(Dec 09 2019 at 11:42)</a>:</h4>
<blockquote>
<p>Warning @ Person.address[0] (line 16, col11) : Found multiple matching profiles among choices: ; [http://example.org/fhir/StructureDefinition/AddressWithTwoExtensions, <a href="http://example.org/fhir/StructureDefinition/AddressWithExtension]" target="_blank" title="http://example.org/fhir/StructureDefinition/AddressWithExtension]">http://example.org/fhir/StructureDefinition/AddressWithExtension]</a></p>
</blockquote>
<p>OK, so the profile still matches even though one includes a definition for the profile, and the other does not. I would probably have to declare one of the two mandatory to achieve a singular match then.</p>
<p>Thanks for your help <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="182949296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20address%20data%20types%20for%20patient/near/182949296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20address.20data.20types.20for.20patient.html#182949296">(Dec 09 2019 at 12:07)</a>:</h4>
<p>yes</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
