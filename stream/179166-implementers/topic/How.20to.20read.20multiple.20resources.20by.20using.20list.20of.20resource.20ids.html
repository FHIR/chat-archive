---
layout: page
title: "FHIR Chat  · How to read multiple resources by using list of resource ids · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20read.20multiple.20resources.20by.20using.20list.20of.20resource.20ids.html">How to read multiple resources by using list of resource ids</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="204398671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20read%20multiple%20resources%20by%20using%20list%20of%20resource%20ids/near/204398671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Markku Nikkanen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20read.20multiple.20resources.20by.20using.20list.20of.20resource.20ids.html#204398671">(Jul 20 2020 at 08:46)</a>:</h4>
<p>Hello,</p>
<p>I am building pagination for a custom Encounter search method. There is a nice instruction how to do this:</p>
<p><a href="https://hapifhir.io/hapi-fhir/docs/server_plain/paging.html">https://hapifhir.io/hapi-fhir/docs/server_plain/paging.html</a></p>
<p>So far I have listed all the ids.</p>
<div class="codehilite"><pre><span></span><code>  private List&lt;Long&gt; ids() {
    Bundle bundle = client
      .search()
      .forResource(Encounter.class)
...
      .execute();

    List&lt;IBaseResource&gt; resources = new ArrayList&lt;&gt;();
    resources.addAll(BundleUtil.toListOfResources(ctx, bundle));

    List&lt;Long&gt; list = new ArrayList&lt;&gt;();
    for (IBaseResource e : resources) {
      list.add(e.getIdElement().getIdPartAsLong());
    }

    return list;
}
</code></pre></div>


<p>Next step would be to get list of Encounters using:</p>
<div class="codehilite"><pre><span></span><code>private List&lt;IBaseResource&gt; loadResourcesByIds(List&lt;Long&gt; theIdsToReturn) {
// TODO: how to get Encounters by list of ids?
}
</code></pre></div>


<p>You can get single Encounter by id:</p>
<div class="codehilite"><pre><span></span><code>Encounter e = client.read().resource(Encounter.class).withId(id).execute();
</code></pre></div>


<p>Running above query in a loop does not feel as a correct implementation. Read operation does not support reading multiple Encounters using list of ids, I think. Should I use "where" operation? </p>
<div class="codehilite"><pre><span></span><code>    Bundle bundle = client
      .search()
      .forResource(Encounter.class)
      .where(&lt;what should I place here?)
      .execute();

    List&lt;IBaseResource&gt; encounters = new ArrayList&lt;&gt;();
    encounters.addAll(BundleUtil.toListOfResources(ctx, bundle));
</code></pre></div>



<a name="204424915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20read%20multiple%20resources%20by%20using%20list%20of%20resource%20ids/near/204424915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20read.20multiple.20resources.20by.20using.20list.20of.20resource.20ids.html#204424915">(Jul 20 2020 at 13:56)</a>:</h4>
<p>Search returns a bundle of resources. Why do you want to get the id of returned resources and read from server again? did I miss something herer?</p>



<a name="204448109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20read%20multiple%20resources%20by%20using%20list%20of%20resource%20ids/near/204448109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Markku Nikkanen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20read.20multiple.20resources.20by.20using.20list.20of.20resource.20ids.html#204448109">(Jul 20 2020 at 17:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191506">Yunwei Wang</span></p>
<p>I think you missed something. In Bundle search I must return Encounters (with ref resources, thats why Bundle). Problem is that I do not know how do I formulate "where" operation so that it matches list of Encounter IDs.</p>
<div class="codehilite"><pre><span></span><code>    Bundle bundle = client
      .search()
      .forResource(Encounter.class)
      .where(&lt;what should I place here?)
      .execute();
</code></pre></div>



<a name="204452086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20read%20multiple%20resources%20by%20using%20list%20of%20resource%20ids/near/204452086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20read.20multiple.20resources.20by.20using.20list.20of.20resource.20ids.html#204452086">(Jul 20 2020 at 17:38)</a>:</h4>
<p>I'm not sure what you're asking for still, but [baseUrl]/Encounter?_id=id1,id2,id3 should return a searchset bundle including the three Encounters whose ids are listed.</p>



<a name="204452836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20read%20multiple%20resources%20by%20using%20list%20of%20resource%20ids/near/204452836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20read.20multiple.20resources.20by.20using.20list.20of.20resource.20ids.html#204452836">(Jul 20 2020 at 17:45)</a>:</h4>
<p>Sorry, I still don't get it. In your first code block, you received a bundle of Encounter and returns a list of Encounter Ids. And in your second code block, you are trying to read Encounter using the Encounter Ids returned from first code block. Is that correct? My question is if so, why not just return Encounters from the first block?</p>



<a name="204513945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20read%20multiple%20resources%20by%20using%20list%20of%20resource%20ids/near/204513945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Markku Nikkanen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20read.20multiple.20resources.20by.20using.20list.20of.20resource.20ids.html#204513945">(Jul 21 2020 at 05:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191506">Yunwei Wang</span> <br>
Because I am building pagination see: <a href="https://hapifhir.io/hapi-fhir/docs/server_plain/paging.html">https://hapifhir.io/hapi-fhir/docs/server_plain/paging.html</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
