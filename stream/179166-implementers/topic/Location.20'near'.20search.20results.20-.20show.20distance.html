---
layout: page
title: "FHIR Chat  · Location &#x27;near&#x27; search results - show distance · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html">Location &#x27;near&#x27; search results - show distance</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="247972309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/247972309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kate Dech <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#247972309">(Aug 02 2021 at 21:14)</a>:</h4>
<p>Curious if anyone has implemented a search on Location using near (for geo-based searches)? And if so, did anyone account for 'distance' in the search results? </p>
<p>In our legacy provider search tools that used geo-based searching, the results would include the matching providers distance from the starting search point. With the current structure definition, we can return a provider's lat and long and let the client perform a calculation. But if we want to return a distance, I am curious how this would done. Would this be an extension of the provider of the search-set Bundle (perhaps saying 'match' and '2  miles away').</p>
<p>Any implementer experience would be useful, thanks!</p>



<a name="248176051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/248176051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#248176051">(Aug 03 2021 at 02:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span></p>



<a name="248226072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/248226072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#248226072">(Aug 03 2021 at 14:11)</a>:</h4>
<p><span class="user-mention" data-user-id="193299">@Luke Duncan</span> I think you were looking at this at one point.</p>



<a name="248239496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/248239496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#248239496">(Aug 03 2021 at 15:45)</a>:</h4>
<p>I think that CareQuality has something like this. <span class="user-mention" data-user-id="192587">@David Pyke</span> <span class="user-mention" data-user-id="192274">@Joe Lamy</span> <span class="user-mention" data-user-id="191646">@Eric Heflin</span></p>



<a name="250143582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/250143582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kate Dech <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#250143582">(Aug 20 2021 at 16:53)</a>:</h4>
<p>I did find information in the base spec about this. <a href="https://www.hl7.org/fhir/location.html#positional">https://www.hl7.org/fhir/location.html#positional</a><br>
Thanks.</p>



<a name="250205637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/250205637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#250205637">(Aug 21 2021 at 08:40)</a>:</h4>
<p>This is implemented in our server.<br>
And the details are in the spec in this section<br>
<a href="http://hl7.org/fhir/2018Sep/location.html#positional">http://hl7.org/fhir/2018Sep/location.html#positional</a><br>
Note the extension in the bundle search component with the distance you're talking about.</p>



<a name="250205665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/250205665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#250205665">(Aug 21 2021 at 08:40)</a>:</h4>
<p>Of course the distance we return is a crow flies distance, and routing could have that longer...</p>



<a name="253442265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/253442265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kate Dech <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#253442265">(Sep 15 2021 at 16:17)</a>:</h4>
<p>When performing a near search, is it assumed that server will sort the results smallest distance to largest? If not, what would the mechanism be for requesting a _sort=near? Just curious if it's different because the distance is part of the bundle and not the actual location resources. Thanks.</p>



<a name="253443557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/253443557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kate Dech <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#253443557">(Sep 15 2021 at 16:23)</a>:</h4>
<p>To add more context: the use case is to limit the result of a provider search to the 10 nearest matches near me (where lat and long of 'me' is passed in). There might 100 matching results in the search radius. If a consumer wants to limit to just 10...they may wish to supply _count=10 but the want the closest 10.  </p>
<p>Does the near search parameter require that the server sort by distance or would that be client controlled by requesting _sort?</p>



<a name="253468277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/253468277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#253468277">(Sep 15 2021 at 18:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span></p>



<a name="253489754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/253489754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#253489754">(Sep 15 2021 at 21:19)</a>:</h4>
<p>There is nothing currently documented for that. But it makes sense - you could suggest a tracker for that.</p>



<a name="253499623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/253499623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#253499623">(Sep 15 2021 at 22:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191646">@Eric Heflin</span>  and <span class="user-mention" data-user-id="192274">@Joe Lamy</span> is there something the CareQuality can offer?</p>



<a name="254140682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Location%20%27near%27%20search%20results%20-%20show%20distance/near/254140682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kate Dech <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Location.20&#x27;near&#x27;.20search.20results.20-.20show.20distance.html#254140682">(Sep 21 2021 at 00:51)</a>:</h4>
<p>Logged as <a href="https://jira.hl7.org/browse/FHIR-33976">https://jira.hl7.org/browse/FHIR-33976</a> requesting additional guidance. Thanks!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
