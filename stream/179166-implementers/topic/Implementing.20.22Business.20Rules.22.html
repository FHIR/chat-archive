---
layout: page
title: "FHIR Chat  · Implementing &quot;Business Rules&quot; · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html">Implementing &quot;Business Rules&quot;</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="180035039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180035039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180035039">(Nov 06 2019 at 14:05)</a>:</h4>
<p>We are looking to follow the US Core or Australian Base idea of having a set of profiles that are suitable for implementation within a Nation's jurisdiction (in our case the UK). The idea is that we'll have a UK Core set of profiles that are fairly generic &amp; so can be used in several use cases. Each use case may have its own set of business rules (for example tighten cardinalities, use specific valueSets, make certain elements mandatory for example). We are not intending to have a set of FHIR profiles for each use case, but rather have a validation engine that will test an instance written against a use case by testing against the base resorces (UK Core), and then validate against the use case specific business rules. What I'm not certain is how to write the business rules so that they are computable. For example, I could write them in bespoke template, I could use a FHIR resource such as ElementDefinition or TestScript as these have elements to add rules, or I could use something like FHIRPath. <br>
Has anyone looked at adding business rules, and if so is there a preferred approach to documenting them?</p>



<a name="180035850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180035850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180035850">(Nov 06 2019 at 14:14)</a>:</h4>
<p>Derived profiles seem to cover your requirements...</p>



<a name="180036943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180036943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180036943">(Nov 06 2019 at 14:27)</a>:</h4>
<p>Yeah, I know Michel. However, we are trying not to have profiles that relate to use cases, as you tend to end up with loads of profiles (we'll be talking to Firely about this soon), so we are looking to run with a base set of profiles &amp; use business rules to use case specific rules. For example we might say that for a particular use case maritalStatus is mandated - so rather than create a Patient profile where maritalStatus is set to [1..1] (so now we have 2 Patient profiles - one for the base &amp; one for the use case), we are looking at have a business rule in the use case Implementation Guide to enforce the fact that martialStatus is mandated. Given that, the question is how would we code/express the business rule in the Implementation Guide?</p>



<a name="180037261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180037261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180037261">(Nov 06 2019 at 14:30)</a>:</h4>
<p>Document the business rules as text. Implement them in your server returning meaningful error messages.</p>



<a name="180039258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180039258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180039258">(Nov 06 2019 at 14:50)</a>:</h4>
<p>Have you looked at GraphDefinition? (I don't know why it's called that, it doesn't seem to describe it's use) </p>
<p>Having looked at some of the NHS Digital tests, it seems many of the rules could be written as GraphDefinitions <br>
e.g. Rule (GraphDefinition) = this bundle should contain MessageDefinition (1..1), Patient (1..1)</p>
<p>It also looks as if it supports fhirPath</p>



<a name="180039479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180039479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180039479">(Nov 06 2019 at 14:52)</a>:</h4>
<p>Having worked recently with text based rules, I find them hideous. :) [Ask me for details if you see me in your office]</p>



<a name="180084705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180084705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180084705">(Nov 06 2019 at 22:51)</a>:</h4>
<p>FHIR pretty much expects you to define profiles, assign them URLs  etc. How would you refer to your business rules otherwise?</p>



<a name="180084713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180084713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180084713">(Nov 06 2019 at 22:51)</a>:</h4>
<p>not sure why you don't want to create a profile...</p>



<a name="180090955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180090955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180090955">(Nov 07 2019 at 00:27)</a>:</h4>
<p>If you want a computable set of business rules, you're going to have an extra artifact anyhow to maintain/share/etc.  Profiles are the artifact that's defined for that purpose, and profiles are widely supported by tools and specification infrastructure.  Why are you trying to avoid them?</p>



<a name="180121233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180121233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180121233">(Nov 07 2019 at 11:00)</a>:</h4>
<p>Simple answer: I'm seeing evidence that many developers aren't following profiles, they are using examples and text based rules. [This maybe caused by local issues]</p>



<a name="180121390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180121390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180121390">(Nov 07 2019 at 11:02)</a>:</h4>
<p>it's always easy to hack it ;-)</p>



<a name="180122628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180122628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180122628">(Nov 07 2019 at 11:22)</a>:</h4>
<p>It's also practical, so a general desire not to validate on live links. Validation would be done during testing.</p>



<a name="180122636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180122636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180122636">(Nov 07 2019 at 11:22)</a>:</h4>
<p>but live links would still have rules.</p>



<a name="180123479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180123479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180123479">(Nov 07 2019 at 11:37)</a>:</h4>
<p>I'm not sure I follow there. Of course you want to be judicious validating in production systems, but I don't see what that has to do with the question</p>



<a name="180123780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180123780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180123780">(Nov 07 2019 at 11:42)</a>:</h4>
<p>I think I'm seeing rules and validation as two separate things in practice. Rules being mandated on operational links.</p>
<p>So an operational link may have a business rule that a SNOMED code in Observation is mandatory</p>



<a name="180124221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180124221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180124221">(Nov 07 2019 at 11:48)</a>:</h4>
<p>What <span class="user-mention" data-user-id="192158">@Dave Barnet</span> didn't mention is a general dislike of multiple/many profiles coming from implementers.</p>



<a name="180128015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180128015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180128015">(Nov 07 2019 at 12:45)</a>:</h4>
<p>I understand that, but what I don't really follow is some magical separation of 'I made some rules' and 'I made a profile'. What matters is what the rules are. Why would expressing them in a more computer processible way be a problem? I think it's a proxy for the real issue, which is managing contention between rule making (semi) authorities</p>



<a name="180144023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180144023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180144023">(Nov 07 2019 at 15:39)</a>:</h4>
<p>If you're wanting to define rules in a computable way that can be consumed by various servers and enforced consistently, Profiles are the way FHIR does that.  If the issue is that developers don't like reading the way that profiles <em>express</em> the rules and you think they'd be more likely to read a text expression, we could look at generating a text expression.  (My personal experience is that diagram-based and table-based representations are <em>much</em> easier to consume and understand than pages of SHALL and SHOULD statements as was commonly found in CDA IGs.)</p>



<a name="180145342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180145342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180145342">(Nov 07 2019 at 15:52)</a>:</h4>
<p>USCore does indeed express the rules text like cda.   I dont think that will solve the problem of human nature trying to take a shortcut and start with the example first approach.</p>



<a name="180145395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180145395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180145395">(Nov 07 2019 at 15:53)</a>:</h4>
<p>Just a reminder to take the examples seriously</p>



<a name="180145512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180145512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180145512">(Nov 07 2019 at 15:54)</a>:</h4>
<p>That is what testing is for... By testing MORE than was shown in examples one catches those that only coded to the examples.  Test plans and Test tools are just as critical to compliance as good specifications.</p>



<a name="180145513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180145513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180145513">(Nov 07 2019 at 15:54)</a>:</h4>
<p>And make more example friendly igs</p>



<a name="180149310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180149310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180149310">(Nov 07 2019 at 16:33)</a>:</h4>
<p>I'm absolutely a fan of using profiles to express business rules. But I think it's also true that "reading profiles" and turning them reliably into code is often quite hard for developers, at least if they don't have previous experience with similar standards (based on personal and shared experience). It's a complex format and there are quite a few things to keep an eye out for (is-modifers indicated with a tiny <code>?!</code> in the rendering, FHIRPath constraints hiding on nested elements etc.). Of course, that complexity is really there and will not go away, but I think exploring ways of making it easier to consume for devs would be a worthwhile thing to pursue (I'd be happy to chip in my 5ct).</p>



<a name="180149704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180149704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180149704">(Nov 07 2019 at 16:37)</a>:</h4>
<p>We're always open to new/better ways of rendering information that makes it faster/easier/more likely to create compliant implementations</p>



<a name="180149846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180149846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180149846">(Nov 07 2019 at 16:39)</a>:</h4>
<p>+1 for textual descriptions. Those in Argonaut / US Core are perfect (or see the Cerner documentation for another nice example: <a href="https://fhir.cerner.com/millennium/dstu2/individuals/patient/" target="_blank" title="https://fhir.cerner.com/millennium/dstu2/individuals/patient/">https://fhir.cerner.com/millennium/dstu2/individuals/patient/</a>)</p>



<a name="180158709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180158709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180158709">(Nov 07 2019 at 18:16)</a>:</h4>
<p>Would be good to link the text to the actual constraint and vice-versa. Something that says "Click here if you want to see why this constraint is here".</p>



<a name="180158849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180158849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180158849">(Nov 07 2019 at 18:17)</a>:</h4>
<p>For this, we'd probably need business rules to be identifiable chunks of text. Not sure we have that.</p>



<a name="180158971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180158971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180158971">(Nov 07 2019 at 18:18)</a>:</h4>
<p>(i'm jumping in because I made a side comment in the Atlanta IG training about having "requirements" as an entity. That is probably not the role of FHIR but...)</p>



<a name="180211119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180211119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180211119">(Nov 08 2019 at 08:31)</a>:</h4>
<p>Agree with <span class="user-mention" data-user-id="194703">@Morten Ernebjerg</span> I've been implementing FHIR for several years and so familiar with profiles. Where I struggle is identifying new business rules within profiles - to be honest I mostly miss them.<br>
Most projects seem to be more concerned about adherence to rules rather than FHIR conformance.</p>
<p>An example is here <a href="https://nhsconnect.github.io/gpconnect/accessrecord_structured_development_medicationrequest.html#extensionrepeatinformation" target="_blank" title="https://nhsconnect.github.io/gpconnect/accessrecord_structured_development_medicationrequest.html#extensionrepeatinformation">https://nhsconnect.github.io/gpconnect/accessrecord_structured_development_medicationrequest.html#extensionrepeatinformation</a><br>
This extension has a rule: which is mandatory if the order is a repeat, it must not be present if not. </p>
<p>You could create two derived profiles to enforce this rule (this profile is already derived) or create a constraint (which I would probably miss). <br>
I think I would prefer ruleset, which states which profile I should use and what are the extra rules. </p>
<p>This sounds similar to FHIR Graph Definition. Am I correct in believing many of the rules on the link above, could be defined in a GraphDefinition (<span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> ).</p>
<p>This same resource is returned in a FHIR Bundle which also has business rules (), again I think GraphDefinition would work here as a way of defining rules. (<span class="user-mention" data-user-id="191495">@Jonny Rylands</span>  thoughts). These rules are best illustrated in this diagram <a href="https://nhsconnect.github.io/gpconnect/accessrecord_structured_development_retrieve_patient_record.html#bundle-population-illustrated" target="_blank" title="https://nhsconnect.github.io/gpconnect/accessrecord_structured_development_retrieve_patient_record.html#bundle-population-illustrated">https://nhsconnect.github.io/gpconnect/accessrecord_structured_development_retrieve_patient_record.html#bundle-population-illustrated</a>.</p>



<a name="180222320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180222320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180222320">(Nov 08 2019 at 11:47)</a>:</h4>
<p>I guess discoverability of constraints is mainly related to presentation/rendering, more so than the actual underlying representation/wire format. I'm not sure if/how this would improve by expressing your business logic in some other way.</p>



<a name="180236286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180236286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180236286">(Nov 08 2019 at 14:53)</a>:</h4>
<p>Lots of useful discussion. Just to try out the "make a profile" solution, here's a few scenarios (I'm relally thinking messaging &amp; validation rather then REST)</p>
<p><strong>Scenario 1</strong> <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a> - the base profile we use has <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a> as optional. A project comes along that mandates <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a> - is that reason enough to create a profile of Patient that mandates <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a>?<br>
<strong>Scenario 2</strong> Condition.code - the base profile we use has a preferred binding to a large condition  SNOMED CT refset. A project wants to use condition to capture whether a mother suffers from a recognised post-natal list of conditions. They provide a valueSet. Is this reason enough to have a Condition profile that binds the code element to this new valueSet?<br>
<strong>Scenario  3</strong> Observation - We need to standarise units from pathology lab tests - is this reason enough to create Observation profiles for each lab test that fix codes (type of test) and expected units?</p>



<a name="180237175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180237175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180237175">(Nov 08 2019 at 15:02)</a>:</h4>
<p>Observation Definition  and graph definition are shortcuts to profiling.  But still needs to be documented clearly.</p>



<a name="180245138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180245138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180245138">(Nov 08 2019 at 16:19)</a>:</h4>
<p>I'm not sure they are shortcuts. Have played around with ObservationDefinition and it was pretty straight forward (from a dev perspective) to understand and use, especially when compared to equivalents in Observation profiles (I'd start coming close to being anti-fhir if pushed to use multiple obs profiles).</p>



<a name="180245797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180245797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180245797">(Nov 08 2019 at 16:26)</a>:</h4>
<p>GraphDefinition would be good for defining invariants that hold across resources - particularly those that don't have direct relationships with each other.  Invariants within a resource would still be expected to be handled within a profile though.  (Our ability to render profiles may not be ideal, but our capabilities and experience with authoring GraphDefinitions, let alone rendering them in an understandable way, is significantly less.</p>



<a name="180245956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180245956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180245956">(Nov 08 2019 at 16:28)</a>:</h4>
<p>However for RESTful interactions I am a fan of using profiles only. </p>
<p>For messaging, firstly I want to know what should be in the message bundle. What I want is something this HL7v2 for ADT^A04 which I believe is what GraphDefinition can do.</p>
<p><a href="/user_uploads/10155/C4vCPbMZW73p0g6TGiNDYqcI/ADTA04.PNG" target="_blank" title="ADTA04.PNG">ADTA04.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/C4vCPbMZW73p0g6TGiNDYqcI/ADTA04.PNG" target="_blank" title="ADTA04.PNG"><img src="/user_uploads/10155/C4vCPbMZW73p0g6TGiNDYqcI/ADTA04.PNG"></a></div>



<a name="180246143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180246143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180246143">(Nov 08 2019 at 16:30)</a>:</h4>
<p>From there I would go to the profiles, so PID being Patient would say CareConnect-Patient-1.<br>
If a derived profile is used I only want to know what the diff is, I'm not going to want to wade through a full profile.</p>



<a name="180265208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180265208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180265208">(Nov 08 2019 at 19:52)</a>:</h4>
<p>my responses:</p>
<ul>
<li>Scenario 1 is definitely a profile whatever you try to call it</li>
<li>Scenario 2 depends. It might be a value set condition buried in a Trigger Definition. It's not clear that it's a 'profile' </li>
<li>Scenario 3: no I advise against using profiles in this case; there's no useful differentiation in structure between 1000s of different numerical lab tests. There's about 10 or so relevant data patterns; use ObservationDefinition to describe the 1000s of variants.</li>
</ul>



<a name="180304726"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180304726" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180304726">(Nov 09 2019 at 09:24)</a>:</h4>
<p>Scenario 2 is more complex. On a practical level a lot of things need to happen before the rule is followed (mostly around SNOMED, code conversions, term server interactions and validation engines), so at best it's going to be guidance.</p>



<a name="180305180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180305180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180305180">(Nov 09 2019 at 09:37)</a>:</h4>
<p>Sure. But my point is, there are other computable places in FHIR than profiles for stuff like this</p>



<a name="180307287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180307287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180307287">(Nov 09 2019 at 10:45)</a>:</h4>
<p>Given readability and expressivity of the CQL, is it possible to use CQL for the rules in the FHIR profile?  Just a wierd idea :)</p>



<a name="180309064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180309064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180309064">(Nov 09 2019 at 11:35)</a>:</h4>
<p>well... CQL is optimised for queries across resources. The inside resource bit is FHIRPath which is common with profiles. and it's possible to have a profile that says nothing in structured content, just makes a bunch of fhirpath invariants</p>



<a name="180315138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180315138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180315138">(Nov 09 2019 at 14:23)</a>:</h4>
<p>Appreciate so much for your explanation</p>



<a name="180316412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180316412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180316412">(Nov 09 2019 at 14:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> agree. Any worked through examples - if not I'll look at doing some.</p>



<a name="180322219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180322219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180322219">(Nov 09 2019 at 17:12)</a>:</h4>
<p>I am very interested in rendering a graph definition as a table or a DAG to make it more useful for readers.   Has anybody done that already before I give it a go.?</p>



<a name="180328744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180328744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180328744">(Nov 09 2019 at 19:59)</a>:</h4>
<p>like this? <a href="http://hl7.org.au/fhir/rcpa/cprofiles.html" target="_blank" title="http://hl7.org.au/fhir/rcpa/cprofiles.html">http://hl7.org.au/fhir/rcpa/cprofiles.html</a></p>



<a name="180353365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180353365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180353365">(Nov 10 2019 at 08:23)</a>:</h4>
<p>I've had a go at rendering <a href="https://data.developer.nhs.uk/ccri/term/graph/7" target="_blank" title="https://data.developer.nhs.uk/ccri/term/graph/7">https://data.developer.nhs.uk/ccri/term/graph/7</a> (and a GraphDefinition)<br>
to help describe how to build a Bundle I'm currently working on.</p>
<p>Some of the rules on the response, are below: </p>
<p><a href="/user_uploads/10155/g9bsgyFj0BRcBbr1jKN0AWGQ/Screenshot-2019-11-10-at-08.10.34.png" target="_blank" title="Screenshot-2019-11-10-at-08.10.34.png">Screenshot-2019-11-10-at-08.10.34.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/g9bsgyFj0BRcBbr1jKN0AWGQ/Screenshot-2019-11-10-at-08.10.34.png" target="_blank" title="Screenshot-2019-11-10-at-08.10.34.png"><img src="/user_uploads/10155/g9bsgyFj0BRcBbr1jKN0AWGQ/Screenshot-2019-11-10-at-08.10.34.png"></a></div><p>Although the patient profile doesn't require a generalPractitioner, the response does and graphDefinition has allowed me to override that. </p>
<p>Probably a better example are the lists.  The lists differ by code and which resource is in the list.</p>
<p><a href="/user_uploads/10155/Xrd5TMXHMGZsnzHDWnQLpT5b/Screenshot-2019-11-10-at-08.14.07.png" target="_blank" title="Screenshot-2019-11-10-at-08.14.07.png">Screenshot-2019-11-10-at-08.14.07.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/Xrd5TMXHMGZsnzHDWnQLpT5b/Screenshot-2019-11-10-at-08.14.07.png" target="_blank" title="Screenshot-2019-11-10-at-08.14.07.png"><img src="/user_uploads/10155/Xrd5TMXHMGZsnzHDWnQLpT5b/Screenshot-2019-11-10-at-08.14.07.png"></a></div><p>This rule is quite brief and for that reason I don't think it justifies a profile.</p>



<a name="180354009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180354009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180354009">(Nov 10 2019 at 08:42)</a>:</h4>
<p>what is it that 'justifies a profile'?</p>



<a name="180354445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180354445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180354445">(Nov 10 2019 at 08:56)</a>:</h4>
<p>I think that's the question.</p>



<a name="180354673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180354673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180354673">(Nov 10 2019 at 09:03)</a>:</h4>
<p>well, our answer so far is: any time you want to make rules about what is acceptable in a resource. But you don't seem to like that answer very much, because you seem to think that there's some...weight...price... to having a profile</p>



<a name="180358154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180358154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180358154">(Nov 10 2019 at 10:40)</a>:</h4>
<p>Don't think it's as simple as that. </p>
<p>I'd say I'm trying to profile/define Bundle responses (most UK standards are messaging or document based).</p>
<p>I believe some of the response requirements shouldn't be profiled. I need to look further though.</p>



<a name="180438332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180438332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180438332">(Nov 11 2019 at 16:38)</a>:</h4>
<p>is this <a href="https://nhsconnect.github.io/gpconnect/accessrecord_structured_development_retrieve_patient_record.html#bundle-population-illustrated" target="_blank" title="https://nhsconnect.github.io/gpconnect/accessrecord_structured_development_retrieve_patient_record.html#bundle-population-illustrated">https://nhsconnect.github.io/gpconnect/accessrecord_structured_development_retrieve_patient_record.html#bundle-population-illustrated</a></p>
<p>rendered from a GraphDefinition as well?</p>



<a name="180441786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180441786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180441786">(Nov 11 2019 at 17:17)</a>:</h4>
<p>Nope. I think it's a good candidate for it though (working on an example for it)</p>



<a name="180442075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/180442075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#180442075">(Nov 11 2019 at 17:20)</a>:</h4>
<p>Leaning towards Rene's view in here though <a href="#narrow/stream/179177-conformance/topic/GraphDefinition.20as.20a.20conformance.20resource" title="#narrow/stream/179177-conformance/topic/GraphDefinition.20as.20a.20conformance.20resource">https://chat.fhir.org/#narrow/stream/179177-conformance/topic/GraphDefinition.20as.20a.20conformance.20resource</a></p>



<a name="181294276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/181294276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#181294276">(Nov 21 2019 at 11:05)</a>:</h4>
<p>FWIW Friday at the DevDays in Amsterdam, there'll be a tutorial about GraphDefinition at 11:05 in The Richard.</p>



<a name="181294385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementing%20%22Business%20Rules%22/near/181294385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementing.20.22Business.20Rules.22.html#181294385">(Nov 21 2019 at 11:06)</a>:</h4>
<p>Wish I was there.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
