---
layout: page
title: "FHIR Chat  · Unable to find code system and profile us-core-observationre · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Unable.20to.20find.20code.20system.20and.20profile.20us-core-observationre.html">Unable to find code system and profile us-core-observationre</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="165718151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Unable%20to%20find%20code%20system%20and%20profile%20us-core-observationre/near/165718151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Unable.20to.20find.20code.20system.20and.20profile.20us-core-observationre.html#165718151">(May 15 2019 at 14:16)</a>:</h4>
<p>I am using custom validator (MyValidationSupport implements IValidationSupport) chained with DefaultValidationSupport. I am getting following error &amp; warning while validating DiagnosticReport.</p>
<div class="codehilite"><pre><span></span>&quot;issue&quot;: [
        {
            &quot;severity&quot;: &quot;warning&quot;,
            &quot;code&quot;: &quot;processing&quot;,
            &quot;diagnostics&quot;: &quot;Error unable to find code system http://loinc.org validating CodeableConcept&quot;,
            &quot;location&quot;: [
                &quot;DiagnosticReport.code&quot;
            ]
        },
        {
            &quot;severity&quot;: &quot;error&quot;,
            &quot;code&quot;: &quot;processing&quot;,
            &quot;diagnostics&quot;: &quot;Unable to resolve the profile reference &#39;http://hl7.org/fhir/us/core/StructureDefinition/us-core-observationresults&#39;&quot;,
            &quot;location&quot;: [
                &quot;DiagnosticReport.result[1]&quot;
            ]
        }
</pre></div>


<p>What am i missing ?</p>
<p>I am able to successfully validate AllergyIntolerance which means it is able to find profile <a href="http://hl7.org/fhir/us/core/StructureDefinition/us-core-allergyintolerance" target="_blank" title="http://hl7.org/fhir/us/core/StructureDefinition/us-core-allergyintolerance">http://hl7.org/fhir/us/core/StructureDefinition/us-core-allergyintolerance</a></p>



<a name="165718803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Unable%20to%20find%20code%20system%20and%20profile%20us-core-observationre/near/165718803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Unable.20to.20find.20code.20system.20and.20profile.20us-core-observationre.html#165718803">(May 15 2019 at 14:24)</a>:</h4>
<p>Does the standard validator work?  (That might hint as to whether the issue is in the instances/IG somehow vs. the customized code.)</p>



<a name="165718846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Unable%20to%20find%20code%20system%20and%20profile%20us-core-observationre/near/165718846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Unable.20to.20find.20code.20system.20and.20profile.20us-core-observationre.html#165718846">(May 15 2019 at 14:25)</a>:</h4>
<blockquote>
<p>Does the standard validator work?  (That might hint as to whether the issue is in the instances/IG somehow vs. the customized code.)</p>
</blockquote>
<p>It does and also the forge custom profiles work</p>



<a name="165718988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Unable%20to%20find%20code%20system%20and%20profile%20us-core-observationre/near/165718988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Unable.20to.20find.20code.20system.20and.20profile.20us-core-observationre.html#165718988">(May 15 2019 at 14:27)</a>:</h4>
<p>If the problem is with your customized code, it's going to be hard for the community to help much :(</p>



<a name="165719277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Unable%20to%20find%20code%20system%20and%20profile%20us-core-observationre/near/165719277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Unable.20to.20find.20code.20system.20and.20profile.20us-core-observationre.html#165719277">(May 15 2019 at 14:30)</a>:</h4>
<blockquote>
<p>If the problem is with your customized code, it's going to be hard for the community to help much :(</p>
</blockquote>
<p>I am not sure if it is though, because rest all profiles are working great. Below is the custom Validator just in case if there is any obvious flaw</p>
<div class="codehilite"><pre><span></span>package com.ecw.fhir.validator;

import java.util.HashMap;
import java.util.List;
import org.hl7.fhir.dstu3.hapi.ctx.IValidationSupport;
import org.hl7.fhir.dstu3.model.CodeSystem;
import org.hl7.fhir.dstu3.model.StructureDefinition;
import org.hl7.fhir.dstu3.model.ValueSet;
import org.hl7.fhir.instance.model.api.IBaseResource;
import ca.uhn.fhir.context.FhirContext;

public class MyValidationSupport implements IValidationSupport {

HashMap&amp;lt;String, StructureDefinition&amp;gt; definitionsMap = null;
List&amp;lt;StructureDefinition&amp;gt; definitions = null;

  public MyValidationSupport(List&amp;lt;StructureDefinition&amp;gt; definitions) {
      //Definitions list gotten from code above
      definitionsMap = new HashMap&amp;lt;&amp;gt;();
      this.definitions = definitions;
      definitions.forEach(def -&amp;gt; definitionsMap.put(def.getUrl(), def));
  }

  @Override
  public ValueSet.ValueSetExpansionComponent expandValueSet(FhirContext theContext,     ValueSet.ConceptSetComponent theInclude) {
      return null;
  }

  @Override
  public List&amp;lt;IBaseResource&amp;gt; fetchAllConformanceResources(FhirContext theContext) {

      return null;
  }

  @Override
  public List&amp;lt;StructureDefinition&amp;gt; fetchAllStructureDefinitions(FhirContext theContext) {
      return definitions;
  }

  @Override
  public CodeSystem fetchCodeSystem(FhirContext theContext, String theSystem) {
      return null;
  }

  @Override
  public &amp;lt;T extends IBaseResource&amp;gt; T fetchResource(FhirContext theContext, Class&amp;lt;T&amp;gt; theClass, String theUri) {

      return (T) definitionsMap.get(theUri);
  }

  @Override
  public StructureDefinition fetchStructureDefinition(FhirContext theCtx, String theUrl) {
      return definitionsMap.get(theUrl);
  }

  @Override
  public boolean isCodeSystemSupported(FhirContext theContext, String theSystem) {
      return false;
  }

  @Override
  public CodeValidationResult validateCode(FhirContext theContext, String theCodeSystem, String theCode, String     theDisplay) {
      return null;
  }
}
</pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
