---
layout: page
title: "FHIR Chat  · Adding  a choice of valueInteger  to Observation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html">Adding  a choice of valueInteger  to Observation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153895702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895702">(Jun 29 2017 at 20:23)</a>:</h4>
<p>The Orders and Observation workgroup is considering the tracker - <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13375&amp;start=0" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13375&amp;start=0">#13375</a> to add  a choice of valueInteger to Observation resource.  We are seeking feedback on this before voting on whether to approve this tracker.  Specifically looking feedback on any negative consequences.</p>



<a name="153895718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895718">(Jun 29 2017 at 20:35)</a>:</h4>
<p>The main negative consequence is that increases the likelihood that different implementers will uses a different data type to capture the same Observation value.  There's already a (slight) likelihood of that now with CodeableConcept vs. boolean.  But the risk is much higher with Quantity vs. integer.  As an aside, Quantity allows you to display Quantity.unit which is often helpful for human interpretation.  With integer, you're totally reliant on the Observation.code.coding.display or Observation.code.text which, in some cases, may not be totally clear.  As far as I can tell, the only benefit of adding valueInteger is that you eliminate one layer of nesting - Observation.valueInteger as opposed to Observation.valueQuantity.value.  I'm not sure the saving 7 characters is worth the complexity of supporting an additional type, deciding which observations should use Quantity vs. integer, loss of the expressive capability that Quantity provides around unit, and need for extra logic to handle both types when graphing or doing other numerical analysis.</p>



<a name="153895755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895755">(Jun 29 2017 at 21:24)</a>:</h4>
<p>I don't understand how this is any different from having an Integer datatype and a count specialization on Quantity.  Those same arguments would apply there but we have two choices....</p>



<a name="153895756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895756">(Jun 29 2017 at 21:30)</a>:</h4>
<p>Also my expectation is that at my end of the spectrum  - publshing the standard specification you would want to provide a broader level of support and optionality and as you move to the other end of the spectrum - the implemenation you would profile ( at least informally ) what you will use. </p>



<a name="153895759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895759">(Jun 29 2017 at 22:00)</a>:</h4>
<p>The main difference is that we use the integer data type on elements that <em>can't</em> possibly be anything than an integer.  To my knowledge, we've never supported a choice of integer|Quantity.  With Observation, frequently values <em>can</em> be something other than an integer, so there's a need to have Quantity.</p>



<a name="153895760"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895760" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895760">(Jun 29 2017 at 22:01)</a>:</h4>
<p>With FHIR, we're not doing design-by-constraint.  We provide necessary flexibility, but we try not to be more flexible than necessary.  Variability is the enemy of interoperability, so we try to only support flexibility where it's necessary to support implementer capabilities.  It's not clear how that could be the case here.</p>



<a name="153895762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895762">(Jun 29 2017 at 22:38)</a>:</h4>
<p>I don't think we are jumping on 'the design by constraint' train  -  if you expect integer values you would expect to find valueInteger without having to read the spec.</p>



<a name="153895769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895769">(Jun 30 2017 at 03:53)</a>:</h4>
<p>It adds complexity, it adds likelihood of non-interoperable variation, and it doesn't increase expressive functionality.  If there's confusion, it can be addressed with a paragraph in the notes section.  I don't see the benefit being worth the cost.</p>



<a name="153895773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895773">(Jun 30 2017 at 05:27)</a>:</h4>
<p>A agree with Lloyd here, but we do need clear and obvious documentation about how to use valueQuantity for what valueInteger could do.</p>



<a name="153895857"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895857" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sadiq Saleh <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895857">(Jun 30 2017 at 17:13)</a>:</h4>
<p>Based on UCUM specifications any string between a {} is actually a value of 1. Thus a value of {beats}/min is actually equivalent to {b}/min. <br>
However as far as I can tell in FHIR,  these are codes not equivalent as they are not an exact match.<br>
Is it possible to aim for interoperability without also requiring the enforcement of UCUM rules as well? <br>
And if the argument is to use a unit of 1 for all counts (rather than the {}), then does this not take away from the human readability?</p>



<a name="153895871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895871">(Jun 30 2017 at 20:02)</a>:</h4>
<p>The codes are definitely not equivalent.  So a value set expecting "{beats}/min" would not match on "1/min" even though both codes correspond to the same UCUM concept.  (In much the same way as a value sets that includes a pre-coordinated SNOMED concept wouldn't accept the post-coordinated variant.)</p>



<a name="153895875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895875">(Jun 30 2017 at 20:18)</a>:</h4>
<p>Lloyd: define equivalent in that sentence. Because I think they are equivalent, thought they are not the smae</p>



<a name="153895876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895876">(Jun 30 2017 at 20:33)</a>:</h4>
<p>Equivalent means "not equal from a string perspective", which is what matters if you're dealing with an enumerated value set.  (You're fine if you're using a subsumption based value set - something like "all UCUM codes that express distance".)</p>



<a name="153895877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895877">(Jun 30 2017 at 20:34)</a>:</h4>
<p>But with an enumerated value set, if the enumeration contains "1/min" and doesn't contain "{beats}/min", only the former would be a legal value in the instance - regardless of the fact that the meaning of the two is the same.</p>



<a name="153895891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895891">(Jun 30 2017 at 22:43)</a>:</h4>
<p>The are 2 timely issues on this stream:</p>
<ul>
<li>Mine - the original one which is the tracker we, OO are considering.  of which my concern about having to read the damn specification in order to express valueInteger has not been addressed to my satisfaction - is that a barrier to adoption or at least an unnecessary hurdle for implementers. ( It was the same with valueBoolean - after the 3 separate tracker requesting it - OO gave in and added it ....either nobody bothered read the notes on how to handle it or did not agree with it  )</li>
<li>Sadiq's - UCUM issue which is timely because we need to say more about Quantity vis a vis UCUM.  I think in <a href="https://chat.fhir.org/#narrow/stream/implementers/topic/UCUM.20bpm.20-.20heart.20rate.20at.20wrist" target="_blank" title="https://chat.fhir.org/#narrow/stream/implementers/topic/UCUM.20bpm.20-.20heart.20rate.20at.20wrist">this stream</a>  Lloyd summarizes this issue very well and namely the fact that UCUM provides a human readable {[whatever-you-are-counting]} and the Quantity.unit do very similar things.  i.e., provide a way to display the units to the end user.  putting the <code>{}</code> stuff in Quantity.code may be problematic for systems.  OO has a tracker on that and will probably punt to MNM or Vocab to say more on this particular topic in a more general way.</li>
</ul>



<a name="153895893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153895893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153895893">(Jun 30 2017 at 23:48)</a>:</h4>
<p>Why is it a problem to have to read the specification to figure out how to express valueInteger?  I think setting that as an expectation to avoid interoperability issues is a reasonable tradeoff...</p>



<a name="153896836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153896836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153896836">(Jul 13 2017 at 13:55)</a>:</h4>
<p>I support adding valueInteger to Observation. There are lots of observations whose values are fundamentally and always integers. How many people in your household? On a scale of 1-5 how would you rate your satisfaction? What is the Mitotic Count Score (1, 2 or 3)?  I don't believe the issue is referencing the value, it is roundoff error in representing an integer value as a decimal. Is 1.0000000000000001 (the nearest decimal to 1 in one system) equal to 0.9999999999999 (the nearest decimal to 1 in a different system) equal?  This is basic to every computer language. It's nutty that FHIR Observations do not support integers.</p>



<a name="153896912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153896912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153896912">(Jul 14 2017 at 05:26)</a>:</h4>
<p>"How many people in your household?" should get an answer of "x people". Just as "How tall are you (in centimetres)?" should get an answer of "x cm."</p>



<a name="153896914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153896914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153896914">(Jul 14 2017 at 07:44)</a>:</h4>
<p>Whether scores and ratings are numeric or rather codes (thus CodeableConcepts in FHIR)  is one of the discussions that will probably never settle. Despite the fact that scores are often calculated by adding up subscores, many systems are treating them as codes. But even if you treat them as numeric, it should be "x score points" or "x rating points" rather than "x".<br>
I also think that the mentioned precision issues should be handled on the implementation side (something that is also within the capability of every computer language). If you store/send "1.0000000000000001" within a decimal element, that should mean exactly "1.0000000000000001" and not "1 +/-0000000000000001". If you want to have "1" and you know that your calculation result has only 3 significant figures, ensure to round properly.<br>
The FHIR spec is quite clear on how to handle the precision of decimals, up to the required ability to keep trailing zeros.</p>



<a name="153896915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153896915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153896915">(Jul 14 2017 at 07:47)</a>:</h4>
<p>So, tl;dr: I don't see increased functionality by adding integer, but I would see increased confusion and decreased interoperability, as Lloyd pointed out.</p>



<a name="153897668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153897668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153897668">(Jul 21 2017 at 12:32)</a>:</h4>
<p>I'm not seeing us circling towards resolution on this issue. It seems to me that the issues are relatively clear, and people differ on values. Mu summary is that adding valueInteger is clearer for newbies encountering the spec who have what looks like an integer, and aren't used to the ucum code tricks that insiders know all about, and also allows newbies to defer the precision issue (though I agree with Stefan). But adding it means that there'll always be the question for ever with regard to having to look for either valueInteger, or a valueQuantity with a UCUM code - and many people will get caught out by that</p>



<a name="153897669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153897669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153897669">(Jul 21 2017 at 12:33)</a>:</h4>
<p>e.g. it's a classic reader vs writer thing</p>



<a name="153897692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153897692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153897692">(Jul 21 2017 at 14:14)</a>:</h4>
<p>In my opinion, the newbie issue can be minimized with some clear documentation and a couple of examples</p>



<a name="153898230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153898230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153898230">(Jul 26 2017 at 05:45)</a>:</h4>
<p>+1 to using valueQuantity so that you get the units.</p>



<a name="153898510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Adding%20%20a%20choice%20of%20valueInteger%20%20to%20Observation/near/153898510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Adding.20.20a.20choice.20of.20valueInteger.20.20to.20Observation.html#153898510">(Jul 26 2017 at 23:28)</a>:</h4>
<p>The issue is now closed OO voted in favor.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
