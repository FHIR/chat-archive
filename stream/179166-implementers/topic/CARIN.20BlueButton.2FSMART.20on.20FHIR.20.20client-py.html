---
layout: page
title: "FHIR Chat  · CARIN BlueButton/SMART on FHIR  client-py · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CARIN.20BlueButton.2FSMART.20on.20FHIR.20.20client-py.html">CARIN BlueButton/SMART on FHIR  client-py</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="193483772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CARIN%20BlueButton/SMART%20on%20FHIR%20%20client-py/near/193483772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CARIN.20BlueButton.2FSMART.20on.20FHIR.20.20client-py.html#193483772">(Apr 09 2020 at 17:35)</a>:</h4>
<p>Hello, I built a CARIN CPCDS Reference Server and CARIN CPCDS Authorization Server  locally. I can make requests to the server-ri and authenticate via auth-server using oauth2 successfully. Now I am working on making the requests via a flask app within the smart on fhir client-py library. Should I be able to request an access token via the app, or would I need to pass the token to the app? Are there any available resources to aid me in getting this up and running? Thank you in advance!</p>
<p>cc <span class="user-mention" data-user-id="191660">@Harold Solbrig</span></p>



<a name="193488640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CARIN%20BlueButton/SMART%20on%20FHIR%20%20client-py/near/193488640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CARIN.20BlueButton.2FSMART.20on.20FHIR.20.20client-py.html#193488640">(Apr 09 2020 at 18:13)</a>:</h4>
<p>I register the app URL as <a href="http://localhost:8000/fhir-app/" title="http://localhost:8000/fhir-app/">http://localhost:8000/fhir-app/</a> and receive an app_id and app_secret outside of the flask app. I then pass the following as the settings:</p>
<p><code>smart_defaults = {
    'app_id': '855471ae-ece0-41bb-88cb-de2cc967bb5f',
    'app_secret': 'FiYefhrSv0wkDE1bx7vWBkhdsTsVenVeI9z9P',
    'api_base': 'http://localhost:8080/cpcds-server/fhir',
    'redirect_uri': 'http://localhost:8000/fhir-app/',
}</code></p>
<p>I then attempt to authorize at <a href="http://localhost:8000" title="http://localhost:8000">http://localhost:8000</a>. It prompts me to log in to the auth server. I log in with a registered user and get redirected to the redirect_uri (<a href="http://localhost:8000/fhir-app/" title="http://localhost:8000/fhir-app/">http://localhost:8000/fhir-app/</a>) and receive an authorization code in the URL. At that point I get an Authorization Error and the flow stops.</p>



<a name="193492942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CARIN%20BlueButton/SMART%20on%20FHIR%20%20client-py/near/193492942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CARIN.20BlueButton.2FSMART.20on.20FHIR.20.20client-py.html#193492942">(Apr 09 2020 at 18:46)</a>:</h4>
<p>I understand that this is the point in the flow where I'm getting stuck:</p>
<p><a href="/user_uploads/10155/NMuWQqCuEEkzDdy7yjZb9Xu0/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/NMuWQqCuEEkzDdy7yjZb9Xu0/image.png" title="image.png"><img src="/user_uploads/10155/NMuWQqCuEEkzDdy7yjZb9Xu0/image.png"></a></div>



<a name="193495581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CARIN%20BlueButton/SMART%20on%20FHIR%20%20client-py/near/193495581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CARIN.20BlueButton.2FSMART.20on.20FHIR.20.20client-py.html#193495581">(Apr 09 2020 at 19:07)</a>:</h4>
<p><a href="https://github.com/smart-on-fhir/client-py/blob/1f622d28d039ae7d60045595680b3a2aef66f473/fhirclient/auth.py#L231" title="https://github.com/smart-on-fhir/client-py/blob/1f622d28d039ae7d60045595680b3a2aef66f473/fhirclient/auth.py#L231">https://github.com/smart-on-fhir/client-py/blob/1f622d28d039ae7d60045595680b3a2aef66f473/fhirclient/auth.py#L231</a></p>
<p>The line above in auth.py correctly parses the URL with code when I test:</p>
<p><a href="/user_uploads/10155/2XnSNvO6bV420n9yV9O8BT6G/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/2XnSNvO6bV420n9yV9O8BT6G/image.png" title="image.png"><img src="/user_uploads/10155/2XnSNvO6bV420n9yV9O8BT6G/image.png"></a></div>



<a name="193497531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CARIN%20BlueButton/SMART%20on%20FHIR%20%20client-py/near/193497531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CARIN.20BlueButton.2FSMART.20on.20FHIR.20.20client-py.html#193497531">(Apr 09 2020 at 19:22)</a>:</h4>
<p>I believe the issue might be that the app doesn't pass a basic Authorization header. I'll likely have to edit the code to handle.<br>
<a href="/user_uploads/10155/OP4VUrcA9LZd6VFy6oLd9v0E/image.png" title="image.png">image.png</a> <br>
<a href="/user_uploads/10155/KVW4RvFH_9daB0rS-DeWbhQN/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/OP4VUrcA9LZd6VFy6oLd9v0E/image.png" title="image.png"><img src="/user_uploads/10155/OP4VUrcA9LZd6VFy6oLd9v0E/image.png"></a></div><div class="message_inline_image"><a href="/user_uploads/10155/KVW4RvFH_9daB0rS-DeWbhQN/image.png" title="image.png"><img src="/user_uploads/10155/KVW4RvFH_9daB0rS-DeWbhQN/image.png"></a></div>



<a name="193505077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CARIN%20BlueButton/SMART%20on%20FHIR%20%20client-py/near/193505077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CARIN.20BlueButton.2FSMART.20on.20FHIR.20.20client-py.html#193505077">(Apr 09 2020 at 20:29)</a>:</h4>
<p>perhaps you might ask in the <a class="stream" data-stream-id="179170" href="/#narrow/stream/179170-smart">#smart</a> stream</p>



<a name="193506636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CARIN%20BlueButton/SMART%20on%20FHIR%20%20client-py/near/193506636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Whitney <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CARIN.20BlueButton.2FSMART.20on.20FHIR.20.20client-py.html#193506636">(Apr 09 2020 at 20:41)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> . I was successful in getting it to work!<br>
<a href="/user_uploads/10155/tA522vObzoEZMsvZ8F2q4vWD/image.png" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/tA522vObzoEZMsvZ8F2q4vWD/image.png" title="image.png"><img src="/user_uploads/10155/tA522vObzoEZMsvZ8F2q4vWD/image.png"></a></div>



<a name="196829762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CARIN%20BlueButton/SMART%20on%20FHIR%20%20client-py/near/196829762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tushar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CARIN.20BlueButton.2FSMART.20on.20FHIR.20.20client-py.html#196829762">(May 07 2020 at 21:03)</a>:</h4>
<p>Hello, I have question can we use third party authorization server like OKTA instead of CPCDS auth server?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
