---
layout: page
title: "FHIR Chat  · FHIR mapping language implementations · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html">FHIR mapping language implementations</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153876156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153876156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flavius Butnariu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153876156">(Mar 13 2017 at 08:43)</a>:</h4>
<p>Dear all,</p>
<p>I was wondering what FHIR implementations are out there that support to some extent the FHIR mapping language.</p>
<p>I will be grateful for any information you can provide.</p>
<p>With kind regards,<br>
Flavius</p>



<a name="153876246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153876246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153876246">(Mar 13 2017 at 19:11)</a>:</h4>
<p>the java reference implemementation has the fhir mapping language included, i startet a tutorial, but got diverted by other work, have to update as soon as i get time: <a href="https://github.com/ahdis/fhir-mapping-tutorial" target="_blank" title="https://github.com/ahdis/fhir-mapping-tutorial">https://github.com/ahdis/fhir-mapping-tutorial</a> see </p>



<a name="153886417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flavius Butnariu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886417">(Apr 28 2017 at 11:20)</a>:</h4>
<p>I know that the Java reference implementation can handle mappings specified in the FHIR mapping language from logical models to FHIR resources. The question is: can it also handle mappings to extended FHIR resources, i.e., a FHIR resource extended with additional data elements? Many thanks!</p>



<a name="153886426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886426">(Apr 28 2017 at 13:57)</a>:</h4>
<p>Unless you're using the built-in extension capability, you couldn't call such structures FHIR resources.  FHIR doesn't allow the introduction of custom elements except as extensions.  If you're talking about extensions, the language should support mapping to any StructureDefinition - including profiles that make use of extensions.</p>



<a name="153886554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flavius Butnariu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886554">(May 01 2017 at 13:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> thank you for your reply.</p>
<p>I understand that I cannot have something like</p>
<div class="codehilite"><pre><span></span>&lt;Observation xmlns=&quot;http://hl7.org/fhir&quot;&gt;
...
&lt;comment value=&quot;some string&quot;/&gt;
&lt;additionalDataElement value=&quot;some other string&quot;/&gt;
...
&lt;/Observation&gt;
</pre></div>


<p>but instead something like</p>
<div class="codehilite"><pre><span></span>&lt;Observation xmlns=&quot;http://hl7.org/fhir&quot;&gt;
...
&lt;comment value=&quot;some string&quot;/&gt;
&lt;extension url=&quot;structure/definition/of/extension&quot;&gt;
  &lt;valueString value=&quot;some other string&quot;/&gt;
&lt;/extension&gt;
...
&lt;/Observation&gt;
</pre></div>


<p>Here's what I try to accomplish:</p>
<ul>
<li>Extend a FHIR resource with an additional data element.</li>
<li>Map some other endpoint to this additional data element using the FHIR mapping language.</li>
<li>Run the mapping using the Java reference implementation.</li>
</ul>
<p>The Java reference implementation can handle a mapping to a data element such as <code>comment</code>. However, I struggle to make it work with my additional data element. Can this be accomplished in the current implementation?</p>



<a name="153886562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886562">(May 01 2017 at 16:40)</a>:</h4>
<p>Make sure the extension is at the right place in your XML instance - extensions are one of the first elements allowed (only "id" and a couple of other elements are allowed to appear sooner).  Also make sure your URL is a full URL.  Beyond that, I'm pretty sure the StructureMap process works with extensions.</p>



<a name="153886683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flavius Butnariu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886683">(May 02 2017 at 15:59)</a>:</h4>
<p>I still can't manage to map to an extended FHIR resource. Maybe another pair of eyes can quickly spot what I'm doing wrong.</p>
<p>On the source side, I have a simple logical model - thanks to <span class="user-mention" data-user-id="191478">@Oliver Egger</span> - specified by the structure definition available <a href="https://github.com/ahdis/fhir-mapping-tutorial/blob/master/maptutorial/step1/logical/structuredefinition-tleft.xml" target="_blank" title="https://github.com/ahdis/fhir-mapping-tutorial/blob/master/maptutorial/step1/logical/structuredefinition-tleft.xml">here</a>.</p>
<div class="codehilite"><pre><span></span>&lt;TLeft xmlns=&quot;http://hl7.org/fhir/tutorial&quot;&gt;
    &lt;a value=&quot;some string&quot; /&gt;
&lt;/TLeft&gt;
</pre></div>


<p>On the target side, I have FHIR resource <a href="https://www.hl7.org/fhir/observation-genetics.html" target="_blank" title="https://www.hl7.org/fhir/observation-genetics.html">Observation-genetics</a> extended from the standard FHIR resource <a href="https://www.hl7.org/fhir/observation.html" target="_blank" title="https://www.hl7.org/fhir/observation.html">Observation</a>.</p>
<p>Now let's say I wanna map <code>a</code> of  <code>TLeft</code> to <code>observation-geneticsDNARegionName</code> of <code>Observation-genetics</code>. It makes little sense, but both are of type <code>string</code>, so why not?</p>
<div class="codehilite"><pre><span></span>map &quot;http://hl7.org/fhir/StructureMap/tutorial&quot; = &quot;tutorial&quot;

uses &quot;http://hl7.org/fhir/StructureDefinition/tutorial-left&quot; as source
uses &quot;http://hl7.org/fhir/StructureDefinition/observation-genetics&quot; as target

group tutorial
  input source : TLeft as source
  input target : observation-genetics as target

rule_a: for source.a as a make target.observation-geneticsDNARegionName = a

endgroup
</pre></div>


<p>The reference implementation will actually complain about this mapping.</p>
<div class="codehilite"><pre><span></span>org.hl7.fhir.dstu3.utils.FHIRLexer$FHIRLexerException: Error at 8, 6: Found &quot;-&quot; expecting &quot;as&quot;
    at org.hl7.fhir.dstu3.utils.FHIRLexer.error(FHIRLexer.java:101)
    at org.hl7.fhir.dstu3.utils.FHIRLexer.error(FHIRLexer.java:97)
    at org.hl7.fhir.dstu3.utils.FHIRLexer.token(FHIRLexer.java:266)
    at org.hl7.fhir.dstu3.utils.StructureMapUtilities.parseInput(StructureMapUtilities.java:807)
        ...
</pre></div>


<p>So let me go ahead and get rid of those dashes in <a href="https://www.hl7.org/fhir/observation-genetics.profile.xml.html" target="_blank" title="https://www.hl7.org/fhir/observation-genetics.profile.xml.html">the structure definition of Observation-genetics</a>, in <a href="https://www.hl7.org/fhir/extension-observation-geneticsdnaregionname.xml.html" target="_blank" title="https://www.hl7.org/fhir/extension-observation-geneticsdnaregionname.xml.html">the structure definition of extension observation-geneticsDNARegionName</a>, and in the mapping.</p>
<p>Now here's the output coming from the reference implementation.</p>
<div class="codehilite"><pre><span></span>java.lang.Error: Cannot set property observationgeneticsDNARegionName on null
    at org.hl7.fhir.dstu3.elementmodel.Element.setProperty(Element.java:330)
    at org.hl7.fhir.dstu3.utils.StructureMapUtilities.processTarget(StructureMapUtilities.java:1579)
    at org.hl7.fhir.dstu3.utils.StructureMapUtilities.executeRule(StructureMapUtilities.java:1206)
    at org.hl7.fhir.dstu3.utils.StructureMapUtilities.executeGroup(StructureMapUtilities.java:1191)
    at org.hl7.fhir.dstu3.utils.StructureMapUtilities.transform(StructureMapUtilities.java:1165)
    ...
</pre></div>


<p>Any clues on what I'm doing wrong?</p>



<a name="153886696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Osborne <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886696">(May 02 2017 at 20:28)</a>:</h4>
<p>(deleted)</p>



<a name="153886697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Osborne <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886697">(May 02 2017 at 20:29)</a>:</h4>
<p>Seems like you have not defined <code>target.observation-geneticsDNARegionName</code></p>



<a name="153886710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886710">(May 02 2017 at 22:29)</a>:</h4>
<p>looks like 3 things:<br>
- if your element name has a "-" in it, you have to surround the name with " (see how this works in the FHIRPath spec)<br>
- you have to construct the target and pass it into the mapping language<br>
- what is "observation-geneticsDNARegionName"? that's not a valid element</p>



<a name="153886763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flavius Butnariu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886763">(May 03 2017 at 08:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> thank you for your reply.</p>
<p>I understand that surrounding an element name with quotes would prevent the lexer exception.</p>
<p>However, a rule such <code>rule_a: for source.a as a make target."comment" = a</code>, where <code>comment</code> is an element of resource <code>Observation</code>, would produce the following output:</p>
<div class="codehilite"><pre><span></span>java.lang.Error: Cannot set property &quot;comment&quot; on null
    at org.hl7.fhir.dstu3.elementmodel.Element.setProperty(Element.java:330)
    at org.hl7.fhir.dstu3.utils.StructureMapUtilities.processTarget(StructureMapUtilities.java:1579)
    at org.hl7.fhir.dstu3.utils.StructureMapUtilities.executeRule(StructureMapUtilities.java:1206)
    at org.hl7.fhir.dstu3.utils.StructureMapUtilities.executeGroup(StructureMapUtilities.java:1191)
    at org.hl7.fhir.dstu3.utils.StructureMapUtilities.transform(StructureMapUtilities.java:1165)
        ...
</pre></div>


<p>If the quotes are removed, the rule would be executed successfully.</p>



<a name="153886766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flavius Butnariu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886766">(May 03 2017 at 10:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <code>observation-geneticsDNARegionName</code> is an <a href="https://www.hl7.org/fhir/extension-observation-geneticsdnaregionname.html" target="_blank" title="https://www.hl7.org/fhir/extension-observation-geneticsdnaregionname.html">extension</a> used by profile <a href="https://www.hl7.org/fhir/observation-genetics.html" target="_blank" title="https://www.hl7.org/fhir/observation-genetics.html">Observation-genetics</a> of resource Observation. The structure definitions of this extension and profile are available in <code>/publish/definitions.xml.zip</code>.</p>
<p>Putting the lexer exception aside, am I wrong to assume that a rule such as </p>
<div class="codehilite"><pre><span></span>rule_a: for source.a as a make target.observation-geneticsDNARegionName = a
</pre></div>


<p>is correct? The intention here is as follows: I have resource Observation with its data elements.  However, these data elements are insufficient, so I want to add a new data element to Observation (by means of an extension). My mapping rule should map  to this new data element. To have a go at this, I used profile <a href="https://www.hl7.org/fhir/observation-genetics.html" target="_blank" title="https://www.hl7.org/fhir/observation-genetics.html">Observation-genetics</a> and extension <a href="https://www.hl7.org/fhir/extension-observation-geneticsdnaregionname.html" target="_blank" title="https://www.hl7.org/fhir/extension-observation-geneticsdnaregionname.html">observation-geneticsDNARegionName</a> as an example.</p>
<p>Moreover, would it be possible to provide me with a few extra pointers on how to construct the target and pass it into the mapping language?</p>



<a name="153886780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flavius Butnariu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886780">(May 03 2017 at 11:36)</a>:</h4>
<p>Digging through the mappings available in <code>\implementations\r2maps\</code> I was able to figure out my conundrum. <br>
My rule should be something like </p>
<div class="codehilite"><pre><span></span>rule_a: for source.a as a make target.extension as t, t.url = &#39;http://hl7.org/fhir/StructureDefinition/observation-geneticsDNARegionName&#39;, t.value = a
</pre></div>



<a name="153886789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> suresh sargar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886789">(May 03 2017 at 12:58)</a>:</h4>
<p>I am using FHIR DSTU3 compatible HAPI API to encode JSON data from XML data which i have. the problem which i observed is for Patient Resource is we have "deceasedBoolean" and "deceasedDateTime" field for Patient but when when we convert into JSON only one of the fields remain in JSON. look like one is overwrite to another.<br>
How do i preserve both values into JSON?</p>



<a name="153886790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886790">(May 03 2017 at 12:59)</a>:</h4>
<p>You cannot have both. If you set deceasedDateTime then you don't need deceasedBoolean</p>



<a name="153886799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> suresh sargar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886799">(May 03 2017 at 13:20)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191912">@Michele Mottini</span>   </p>



<a name="153886829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> suresh sargar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886829">(May 03 2017 at 17:37)</a>:</h4>
<p>Hi Team,</p>



<a name="153886831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> suresh sargar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886831">(May 03 2017 at 17:40)</a>:</h4>
<p>Hi Team,<br>
Can i get STU3 all FHIR resource .XSD at one place? currently i am getting .XSD per resource visiting that resource page.</p>



<a name="153886832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886832">(May 03 2017 at 17:50)</a>:</h4>
<p>Look at <a href="http://www.hl7.org/fhir/downloads.html" target="_blank" title="http://www.hl7.org/fhir/downloads.html">http://www.hl7.org/fhir/downloads.html</a></p>



<a name="153886876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886876">(May 03 2017 at 20:16)</a>:</h4>
<p>There's a single schema that combines all the resources and data types too - fhir-single.xsd  (you'll still need the xml and xhtml schemas)</p>



<a name="153886904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886904">(May 04 2017 at 00:38)</a>:</h4>
<p>The problem with "comment" is a bug in the tool. If you can create a gForge task, I'll get to it soon</p>



<a name="153886973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153886973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flavius Butnariu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153886973">(May 04 2017 at 10:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I created <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13316" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13316">tracker item #13316</a> for this bug. I hope this is the proper way to raise the issue.</p>



<a name="153887075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153887075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Flavius Butnariu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153887075">(May 04 2017 at 13:15)</a>:</h4>
<p>I've notice that executing a mapping from a source structure to a target <em>profile extending a FHIR resource</em>, does not seem to require the <em>structure definition of the extension</em>, but does require the <em>structure definition of the profile</em>. The reference implementation definitely does not complain about the missing structure definition, and it actually generates output as expected. </p>
<p>And not only that, but the declaration of the extension in the profile can be omitted, and the reference implementation can still generate output as expected most likely guided only by the mapping.</p>
<p>Is this intentional?</p>



<a name="153887102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153887102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153887102">(May 04 2017 at 15:25)</a>:</h4>
<p>sure. it works with the instances. the profiles are only observation</p>



<a name="153894141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153894141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153894141">(Jun 16 2017 at 09:39)</a>:</h4>
<p>Looking to get started with the FHIR mapping language - had a look around, I take it I should download the latest svn source and use the reference implementation classes from there? Not seeing any stand-alone tools that can run the maps</p>



<a name="153894211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153894211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153894211">(Jun 16 2017 at 13:34)</a>:</h4>
<p>it's on my todo list to package up a stand alone tool</p>



<a name="153894236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153894236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> robert worden <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153894236">(Jun 16 2017 at 16:03)</a>:</h4>
<p>Also available shortly: (now working as a proof of concept)<br>
Generate a Java transform class from FHIR mappings, which runs the transform direct on HAPI (i.e. no mapping engine needed).</p>
<p>This and other  extensions to mapping language support are part of a proposed HL7 project. Info from me if interested. </p>



<a name="153894485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153894485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> suresh sargar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153894485">(Jun 20 2017 at 05:13)</a>:</h4>
<p>Hi Team,<br>
I want to store resource content(<a href="https://www.hl7.org/fhir/patient.html#resource" target="_blank" title="https://www.hl7.org/fhir/patient.html#resource">https://www.hl7.org/fhir/patient.html#resource</a>) into Database for my application use. Is there any utility/ HAPI API gives me handy information for each resource to store in Database?</p>



<a name="153955430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153955430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153955430">(May 02 2018 at 17:37)</a>:</h4>
<p>I'm working on developing some CCDA-to-FHIR mappings using the FHIR Mapping Language.  I'm wondering if there are any FHIR Mapping Engine implementations that could be used for testing my mappings?  This is an old topic but a simple google search didn't reveal anything besides FHIR Transform Engine (from Robert Worden) and that doesn't seem to use FML?</p>



<a name="153955551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153955551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153955551">(May 02 2018 at 23:47)</a>:</h4>
<p>Hi Jean - are you aware of this project: <a href="https://gforge.hl7.org/gf/download/trackeritem/15874/16474/HL7_Project_Scope_Statement_CCDA_on_FHIR_Mappings_20180323.docx" target="_blank" title="https://gforge.hl7.org/gf/download/trackeritem/15874/16474/HL7_Project_Scope_Statement_CCDA_on_FHIR_Mappings_20180323.docx">https://gforge.hl7.org/gf/download/trackeritem/15874/16474/HL7_Project_Scope_Statement_CCDA_on_FHIR_Mappings_20180323.docx</a></p>
<p>(would be interested in an engine myself!)</p>



<a name="153955565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153955565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153955565">(May 03 2018 at 02:20)</a>:</h4>
<p>I believe the validator has a mode that executes mappings (don't remember if it's structure maps or concept maps).  I do know Grahame has an implementation.</p>



<a name="153955576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153955576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153955576">(May 03 2018 at 04:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191321">@David Hay</span> yes - my company was awarded the contract for the initial work on that project and that is why I'm asking. :)</p>



<a name="153955578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153955578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153955578">(May 03 2018 at 04:41)</a>:</h4>
<p>brilliant!</p>



<a name="153956106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153956106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153956106">(May 05 2018 at 04:47)</a>:</h4>
<p>so talked to Jean about this elsewhere, but for everyone's interest:</p>



<a name="153956108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153956108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153956108">(May 05 2018 at 04:50)</a>:</h4>
<p>You can run the transforms:</p>
<div class="codehilite"><pre><span></span>java -jar org.hl7.fhir.validator.jar [source-file-name] -transform [url] -ig [logical-model] -ig [path-to-maps] -output [dest-name] -defn [local-igpack]
</pre></div>


<p>where</p>
<ul>
<li>source-file-name=the name of the file you want to transform</li>
<li>url= canonical url of the structure map to start at</li>
<li>logical-model=the structure definitions for the source or dest (if either are not FHIR resources of the version in the definitions) (can be repeated)</li>
<li>path-to-maps=folder containing structure maps (text representation as .map, or xml or json forms)</li>
<li>dest-name=where you want the output to go<br>
*local-igpack=your local copy of the file [fhir]/igpack.zip (makes things faster)</li>
</ul>



<a name="153957704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153957704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153957704">(May 11 2018 at 03:49)</a>:</h4>
<p>btw - there's a broken link in the spec from the mapping page (<a href="http://hl7.org/fhir/2018Jan/mapping-language.html" target="_blank" title="http://hl7.org/fhir/2018Jan/mapping-language.html">http://hl7.org/fhir/2018Jan/mapping-language.html</a>)  - <a href="http://hl7.org/fhir/2018Jan/mapping.g4" target="_blank" title="http://hl7.org/fhir/2018Jan/mapping.g4">http://hl7.org/fhir/2018Jan/mapping.g4</a> is a 404</p>



<a name="153958159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153958159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153958159">(May 11 2018 at 22:11)</a>:</h4>
<p>can you make a task?</p>



<a name="153961416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/153961416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#153961416">(May 16 2018 at 04:25)</a>:</h4>
<p><a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17191" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17191">17191</a></p>



<a name="154010924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154010924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gustav Vella <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154010924">(Oct 22 2018 at 10:32)</a>:</h4>
<p>May  I ask a follow-up question to your instructions as to running the validator:<br>
We (<span class="user-mention" data-user-id="193430">@Alexander Zautke</span>)  are currently trying to use the FHIR Mapping language to transform a logical model and ran into this issue (<a href="#narrow/stream/8-hapi/subject/Hapi.20Logical.20Model/near/200452" title="#narrow/stream/8-hapi/subject/Hapi.20Logical.20Model/near/200452">https://chat.fhir.org/#narrow/stream/8-hapi/subject/Hapi.20Logical.20Model/near/200452</a>) . </p>
<p>we are currently running the validator as follows:</p>
<p><code>java -jar org.hl7.fhir.validator.jar ../source.xml
-ig ../SDSource.StructureDefinition.xml
-ig ../SDTarget.StructureDefinition.xml
-ig ../maps/
-transform http://uk-koeln.de/fhir/StructureMap/test
-output output/output.xml</code> </p>
<p>Has somebody ever succeeded in transforming a logical model and can share how to execute the validator for that purpose? Or has this not been done with the validator before?</p>



<a name="154010934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154010934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154010934">(Oct 22 2018 at 12:00)</a>:</h4>
<p>I've done it. I'll have to go document this properly.</p>



<a name="154010935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154010935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154010935">(Oct 22 2018 at 12:00)</a>:</h4>
<p>I'll let you know when I have</p>



<a name="154010952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154010952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gustav Vella <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154010952">(Oct 22 2018 at 12:49)</a>:</h4>
<p>feel relieved to know that we are on the right track.</p>



<a name="154011228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154011228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154011228">(Oct 22 2018 at 22:20)</a>:</h4>
<p><a href="http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator_to_transform_content" target="_blank" title="http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator_to_transform_content">http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator_to_transform_content</a></p>



<a name="154011229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154011229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154011229">(Oct 22 2018 at 22:20)</a>:</h4>
<p>not that this all works - I'll set to testing it shortly</p>



<a name="154011301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154011301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154011301">(Oct 23 2018 at 08:06)</a>:</h4>
<p>Awesome work! Thank you!</p>
<p>With regard to testing, currently, the validator is throwing the following exception for me:</p>
<div class="codehilite"><pre><span></span>  .. connect to tx server @ http://tx.fhir.org
  .. definitions from hl7.fhir.core#3.6.0
Exception in thread &quot;main&quot; java.lang.ClassCastException: com.google.gson.JsonPrimitive cannot be cast to com.google.gson.JsonArray
</pre></div>



<a name="154011302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154011302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154011302">(Oct 23 2018 at 08:10)</a>:</h4>
<p><span class="user-mention" data-user-id="193818">@robert worden</span></p>



<a name="154011303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154011303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154011303">(Oct 23 2018 at 08:11)</a>:</h4>
<p>I'm working on it now</p>



<a name="154011439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154011439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154011439">(Oct 23 2018 at 16:02)</a>:</h4>
<p>Just as a heads-up, there is a NullPointer Exception in StructureMapUtilities processSource. When jumping into the FHIRException ("Unknown input variable..."), vars.summary() will fail.</p>
<p>It would be no problem for me to fix it, is there any preferred way of submitting a patch?</p>



<a name="154011490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154011490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154011490">(Oct 23 2018 at 17:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="154011586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154011586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154011586">(Oct 23 2018 at 20:46)</a>:</h4>
<p>I already fixed that</p>



<a name="154011588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20mapping%20language%20implementations/near/154011588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20mapping.20language.20implementations.html#154011588">(Oct 23 2018 at 20:47)</a>:</h4>
<p>waiting for GitHub to ok the merge - it's still sick a little</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
