---
layout: page
title: "FHIR Chat  · Structure Definition · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html">Structure Definition</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153820292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820292">(Apr 07 2016 at 15:13)</a>:</h4>
<p>Quick ? - only HL7 can use StructureDefintion.derivation = specialization, correct?  <span class="user-mention" data-user-id="191336">@Michel Rutten</span> What are you doing with this in Forge?</p>



<a name="153820293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820293">(Apr 07 2016 at 15:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> Forge is still based on FHIR DSTU2, whereas StructureDefinition.derivation was introduced in DSTU3. For new profiles, Forge currently initializes StructureDefinition.constrainedType to the selected base resource type.</p>



<a name="153820294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820294">(Apr 07 2016 at 15:19)</a>:</h4>
<p>specialization seems intended for logical models (and core resources?)</p>



<a name="153820295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820295">(Apr 07 2016 at 15:20)</a>:</h4>
<p>Seems like there's a lot of churn in that part of the SD with changed in kind/type/contextType etc.</p>



<a name="153820296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820296">(Apr 07 2016 at 15:20)</a>:</h4>
<p>I'm struggling a bit to keep my tooling current!  Right now, we're supporting 0.5, 1.0.x, and (soon) 1.4.</p>



<a name="153820297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820297">(Apr 07 2016 at 15:20)</a>:</h4>
<p>Yes, we discussed some of these changes in Atlanta. in STU3 it should be more regular.</p>



<a name="153820298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820298">(Apr 07 2016 at 15:21)</a>:</h4>
<p>Must've missed that discussion...</p>



<a name="153820299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820299">(Apr 07 2016 at 15:21)</a>:</h4>
<p>We will upgrade all our tools (incl. Forge) to STU3 after the Montreal balloting rounds. Until then, we will stick to DSTU2.</p>



<a name="153820300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820300">(Apr 07 2016 at 15:22)</a>:</h4>
<p>Also, really struggling with the benefit of elementdefintion.base.  What was the motivation there?</p>



<a name="153820301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820301">(Apr 07 2016 at 15:22)</a>:</h4>
<p>It allows tooling to quickly determine the original path of the associated base element.</p>



<a name="153820302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820302">(Apr 07 2016 at 15:24)</a>:</h4>
<p>When would base.path != path?</p>



<a name="153820303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820303">(Apr 07 2016 at 15:24)</a>:</h4>
<p>And cardinality, e.g. if base resource defines an element as 0...* then a code generator would generate a List property. If a derived profile constrains the element to 0..1, then a code generator would still need to generate a List property, in order for the derived class to be compatible with the base class. The ElementDefinition.base component specifically solves this problem.</p>



<a name="153820304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820304">(Apr 07 2016 at 15:24)</a>:</h4>
<p>e.g. for choice elements, base path ends with "value[x]" where actual path ends with "valueString".</p>



<a name="153820305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820305">(Apr 07 2016 at 15:24)</a>:</h4>
<p>OK...nice for XML to JSON for sure.  That could just be a single flag though...</p>



<a name="153820307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820307">(Apr 07 2016 at 15:25)</a>:</h4>
<p>So path="valueString" and base.path = "value[x]"?</p>



<a name="153820308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820308">(Apr 07 2016 at 15:25)</a>:</h4>
<p>This information could be calculated by resolving the base resource profile or expanding the snapshot, but this is a costly operation.</p>



<a name="153820309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820309">(Apr 07 2016 at 15:25)</a>:</h4>
<p>e.g. path = "Observation.value[x]", base.path = "Observation.valueString"</p>



<a name="153820310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820310">(Apr 07 2016 at 15:26)</a>:</h4>
<p>Does base just go back one generation, or all the way back to the first appearance of the element?</p>



<a name="153820311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820311">(Apr 07 2016 at 15:26)</a>:</h4>
<p>In Forge, I currently initialize all the element base components while opening/loading the resource. This ensures that other business logic can safely assume the information is present and correct.</p>



<a name="153820312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820312">(Apr 07 2016 at 15:27)</a>:</h4>
<p>Good question... I'd have to think about that. I assume element.base refers to the path in the root profile, but I'm not sure - need to carefully look at an example.</p>



<a name="153820313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820313">(Apr 07 2016 at 15:28)</a>:</h4>
<p>So Patient baseDefinition of Acme-Patient baseDefinition of Acme-Neuro-Patient.  </p>
<ul>
<li>Acme-Patient has path = "Patient.deceasedDatetime" (base.path = "Patient.deceased[x]")</li>
<li>Acme-Neuro-Patient as path="Patient.deceasedDatetime" for further constraint.  What is base.path?</li>
</ul>



<a name="153820314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820314">(Apr 07 2016 at 15:28)</a>:</h4>
<p>According to the description, element.base.path always refers to a core structuredefinition without a StructureDefinition.base component.</p>



<a name="153820315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820315">(Apr 07 2016 at 15:29)</a>:</h4>
<p>ElementDefinition.base.path: "The Path that identifies the base element - this matches the ElementDefinition.path for that element. Across FHIR, there is only one base definition of any element - that is, an element definition on a StructureDefinition without a StructureDefinition.base."</p>



<a name="153820316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820316">(Apr 07 2016 at 15:29)</a>:</h4>
<p>So Acme-Neuro-Patient has the same base.path = "Patient.deceased[x]"</p>



<a name="153820317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820317">(Apr 07 2016 at 15:29)</a>:</h4>
<p>OK...so the "most base" element definition.  And element[x] is always "more base" than elementType.</p>



<a name="153820318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820318">(Apr 07 2016 at 15:29)</a>:</h4>
<p>ok...fair enough!</p>



<a name="153820319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820319">(Apr 07 2016 at 15:29)</a>:</h4>
<p>This makes sense, as this is the information that is useful in application logic.</p>



<a name="153820320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820320">(Apr 07 2016 at 15:30)</a>:</h4>
<p>thanks!</p>



<a name="153820321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820321">(Apr 07 2016 at 15:32)</a>:</h4>
<p>np. FHIR should be crystal clear on these concepts, so it's important we discuss this.</p>



<a name="153820322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820322">(Apr 07 2016 at 15:33)</a>:</h4>
<p>Part of this is that there's getting to be some mental "inertia" for some of us! "Now what happened there?" frequently crosses my mind!</p>



<a name="153820618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820618">(Apr 11 2016 at 05:20)</a>:</h4>
<p>base is really useful if a structure definition profiles a data type inline - just walks straight into it </p>



<a name="153820619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820619">(Apr 11 2016 at 05:21)</a>:</h4>
<p>path = Observation.valueQuantity.unit, base = Quantity.unit</p>



<a name="153820620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820620">(Apr 11 2016 at 05:21)</a>:</h4>
<p>It's on my task list to write up how the FHIR typing system works formally for the current build. </p>



<a name="153820621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153820621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153820621">(Apr 11 2016 at 05:21)</a>:</h4>
<p>or we can work through it when I come visit you ;-)</p>



<a name="153828165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828165">(May 17 2016 at 17:49)</a>:</h4>
<p>Right now, I think the general understanding is that snapshot and differential should be calculable from each other (round trip-able).  Maybe should be a little clearer on this.  Consider the need for a profiler to define a profile that includes only a particular set of extensions from an enterprise set (the profile uses the enterprise profile as its baseDefintion).  For instance, a cardio service may define a profile of encounter that uses 5 of the 25 extensions defined by the enterprise.</p>
<p>Question is: how does the profiler enforce the limitation of only 5 extensions (not cardinality, 5 urls)? He can close the slicing and max=0 the 20 to be disallowed.  But if/when the enterprise defines the 26th, it will appear in the cardio profile.</p>
<p>IF we allow definition by snapshot, it would be possible to explicitly limit the slices that appear, but the machinery gets a little wonky (snapshot is always a superset of all elements/sliced defined in the baseDefinition lineage).  Is there a mechanism to meet this use case I'm missing?</p>



<a name="153828196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828196">(May 17 2016 at 19:38)</a>:</h4>
<p>if you allow 5 and close, then why does it matter if another is defined somewhere else?</p>



<a name="153828198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828198">(May 17 2016 at 19:38)</a>:</h4>
<p>If it's added to your baseDefinition, you'll (forcibly) inherit it.</p>



<a name="153828201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828201">(May 17 2016 at 19:39)</a>:</h4>
<p>why? you said, these 5, and closed it. </p>



<a name="153828218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828218">(May 17 2016 at 20:50)</a>:</h4>
<p>The base has extension.slicing.rule="open" and defines 25 extensions.  My profile closes the extensions (extension.slicing.rule="closed") and max=0 all the ones I want to exclude.  But if another appears in the base (the 26th), it will already be part of my closed slicing (by inheritance).  There's no way to block that...</p>



<a name="153828605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828605">(May 19 2016 at 14:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> how about if the derived profile defines another extension slice with max = 0 and no url property. Since the extension slice discriminator is always the url (per definition), this "catch-all" constraint would match any remaining extensions that do not match any of the other extension slices, at least conceptually. If this constraint then specifies max = 0, it would explicitly suppress any implicitly inherited extensions from the base profile not matched by any of the other slices. Do you think this could work?</p>



<a name="153828606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828606">(May 19 2016 at 14:43)</a>:</h4>
<p>Yes, that would work.  Do we state what happens when a discriminator isn't set?  I think it should work as you describe...</p>



<a name="153828699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828699">(May 19 2016 at 18:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> maybe not now that I think about it.  Only _one_ slice may apply to any instance.  I don't think this means that a "catch all" is valid since both the catch all and the specific version would apply to an instance with a related slice definition.  In other words, an extension slice with no fixedUri for @url would apply to all extension instances and therefore disallow any other slices.</p>



<a name="153828700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828700">(May 19 2016 at 18:34)</a>:</h4>
<p>What you *could* do though would be to define a type profile of extension where max=0 for the url element.  But that would require slicing extension by @profile and not url.</p>



<a name="153828701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828701">(May 19 2016 at 18:34)</a>:</h4>
<p>And the discriminator for extension is fixed to url.</p>



<a name="153828847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828847">(May 20 2016 at 11:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> yes, that seems to be correct. My suggestion would require a change to the standard, in order to define the proposed interpretation and behavior as such. I was just thinking out loud about how to cover your use case. Your suggestion of using a type profile might also work, but slicing by profile can be (very) computationally intensive and might not be supported by many FHIR servers. So personally, I consider this to be an advanced technique that you should use only if there are not simple alternative ways to express the intended constraints.</p>



<a name="153828849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828849">(May 20 2016 at 11:40)</a>:</h4>
<p>Seems like the expressive power of SlicingRules are too limited to express the desired constraints of your use case. It somewhat resembles binding strength, through wich a profile author can limit binding overrides in a derived profile. Maybe we can expand the SlicingRules?</p>



<a name="153828863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828863">(May 20 2016 at 13:42)</a>:</h4>
<p>(deleted)</p>



<a name="153828864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828864">(May 20 2016 at 13:43)</a>:</h4>
<p>Would really like to come up with a way to express this without a major breaking change....</p>



<a name="153828867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828867">(May 20 2016 at 13:53)</a>:</h4>
<p>I may be that what I'm trying to do breaks the concept of polymorphic inheritance and shouldn't actually be allowed.  There's no way in most object oriented languages for a sub-type to constrain changes on the super-type or, more precisely, for the sub-type to selectively decide what to inherit from the super-type.</p>



<a name="153828869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828869">(May 20 2016 at 13:53)</a>:</h4>
<p>But that's not exactly how the FHIR type system works either....</p>



<a name="153828870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828870">(May 20 2016 at 13:55)</a>:</h4>
<p>I like your suggestion of a "everything else" slice...a notation for that might be the least disruptive.</p>



<a name="153828871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828871">(May 20 2016 at 13:56)</a>:</h4>
<p>It makes parsing somewhat harder though since all other slices have to be exhausted before it would match...similar to evaluating the "closed" rule.</p>



<a name="153828872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828872">(May 20 2016 at 13:57)</a>:</h4>
<p>Sorry for the rambling....that won't actually work either since the slices actually *are* defined in the baseDefinition and would just inherit intact.</p>



<a name="153828876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828876">(May 20 2016 at 15:15)</a>:</h4>
<p>Hmm... you always come up with these interesting cases ;p I definitely agree that it is preferred to find a compatible solution that doesn't introduce any breaking changes. Just having a hard time to find one. In this case, if I understand correctly, you need to suppress the inheritance of (yet) unknown information from the base profile. However SliningRule = closed on your derived profile only applies to profiles that derive from the derived profile, i.e. downstream 3rd+ level profiles. It does not lImit the inheritance from the original base profile and therefore cannot protect against future additions to the base profile, right? Hence my feeling that in order to express this behavior, we might have to expand SlicingRule with yet another option, e.g. sealed or something.</p>



<a name="153828880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828880">(May 20 2016 at 16:58)</a>:</h4>
<p>The primary issue is that we define by differential. We can only define how the profile is different from the base.  So, we'd need to be able to re-generalize base specializations, e.g. create a slice that encompasses a set (an open ended set!) of base slices.  While my use case is real, it really feels like an architecturally unsound thing to do within the profile hierarchy.</p>



<a name="153828881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828881">(May 20 2016 at 17:02)</a>:</h4>
<p>An alternate might be a profile that requires conformance to another profile but doesn't inherit from it.  Unfortunately I think I accidentally removed this possibility with <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9814" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9814">GF#9814</a> when we removed type from the root element.  While I don't *think* anyone was enforcing this, it would have been possible for a profile to set type.profile on the root element and therefore force conformance with another profile.</p>



<a name="153828882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153828882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153828882">(May 20 2016 at 17:04)</a>:</h4>
<p>With this, I could create a profile that required conformance to anther profile (e.g. an enterprise Patient profile) without using that as a base.</p>



<a name="153829283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153829283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153829283">(May 23 2016 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> There has been some discussion on supporting (the union of) multiple profiles. I specifically remember that Claude Nanjo would has requested support for this functionality. The idea being that instead of having a single-inheritance chain of profiles, you can combine/overlay/aggregate multiple separate profiles into one. This would allow a more composition-based / aspect-oriented profiling approach. However because of the complexity and calculation costs, we haven't even started to implement any of this (yet...). Note that in Forge, the element type profile textbox actually allows you to enter multiple profile urls (press enter to add another line), however Forge currently only validates the first type profile and ignores any remaining type profiles. And Grahame informed me that he is not about to implement support for this in his server.</p>



<a name="153829285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153829285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153829285">(May 23 2016 at 14:30)</a>:</h4>
<p>I've thought about multiple inheritance as well and found it to be as distasteful as it was in programming languages.  I would differentiate though between multiple inheritance and additional conformance constraints: each profile must only inherit from one profile, but they could state conformance to other profiles.  This wouldn't cause the other profiles' content to be included.  It would just state an additional (complex) constraint.</p>



<a name="153829365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153829365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153829365">(May 23 2016 at 21:00)</a>:</h4>
<p>we can calculate whether a profile is a constraint on another or whether it's consistent with another</p>



<a name="153829367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153829367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153829367">(May 23 2016 at 21:02)</a>:</h4>
<p>Yes, but we can't use another profile as a constraint (such as we can do with individual element type profiles) to the whole profiled type.</p>



<a name="153829368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153829368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153829368">(May 23 2016 at 21:12)</a>:</h4>
<p>the first is - all instances that conform t profile A conform to profile B</p>



<a name="153829369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153829369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153829369">(May 23 2016 at 21:12)</a>:</h4>
<p>the second is - there are some instances that conform to both profiles</p>



<a name="153829371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153829371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153829371">(May 23 2016 at 21:12)</a>:</h4>
<p>agree that we should only try to deal with one explicit parent</p>



<a name="153829374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153829374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153829374">(May 23 2016 at 21:13)</a>:</h4>
<p>So if I define an "Enterprise Patient" profile, could I (without inheriting from it) say that a conformant resource MUST also be DAF-Patient conformant?</p>



<a name="153829377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/153829377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#153829377">(May 23 2016 at 21:15)</a>:</h4>
<p>yes, by explicitly requiring that in your meta.profile. but not implicitly no</p>



<a name="187882596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/187882596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#187882596">(Feb 11 2020 at 04:28)</a>:</h4>
<p>How can we pass our own structure definition(In JSON or XML) to Hl7.Fhir.Specification (.net package provided by <a href="http://fire.ly" target="_blank" title="http://fire.ly">fire.ly</a>) so that it can validate against the object?<br>
Thanks</p>



<a name="187885021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/187885021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#187885021">(Feb 11 2020 at 05:31)</a>:</h4>
<p>you might get a quicker answer if you post this question to <a class="stream" data-stream-id="179171" href="/#narrow/stream/179171-dotnet">#dotnet</a></p>



<a name="187885608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/187885608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#187885608">(Feb 11 2020 at 05:46)</a>:</h4>
<p>Will do. Thanks</p>



<a name="233627796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/233627796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Radha Rajendran <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#233627796">(Apr 08 2021 at 09:52)</a>:</h4>
<p>Hello all, </p>
<p>Can anyone please share structure definition examples with minValue and maxValue ?<br>
These fields are choice of datatype, so could not find the exact key name for this fields .</p>



<a name="233674355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Structure%20Definition/near/233674355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Structure.20Definition.html#233674355">(Apr 08 2021 at 15:27)</a>:</h4>
<p>Already asked and answered here: <a href="#narrow/stream/179166-implementers/topic/StructureDefinition.20.20and.20unknown.20properties">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/StructureDefinition.20.20and.20unknown.20properties</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
