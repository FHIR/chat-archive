---
layout: page
title: "FHIR Chat  · How to handle unknown Code Systems · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20handle.20unknown.20Code.20Systems.html">How to handle unknown Code Systems</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="229927135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20handle%20unknown%20Code%20Systems/near/229927135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pash <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20handle.20unknown.20Code.20Systems.html#229927135">(Mar 11 2021 at 21:15)</a>:</h4>
<p>I am pretty sure that it is not a new question, but anyway:<br>
What is the best approach to handle Code Systems if I can receive any data? <br>
EX: third-party system sends to me Allergy resource with something like: "Code": "7982", "Codeset": "RxNorm", "Name": "Penicillin". And I need to convert it to FHIR AllergyIntolerance with AllergyIntolerance.code (CodeableConcept).<br>
Codesets from that third-party are not "official" and no restrictions to them, so anything can be there. The same for code. <br>
So how to convert that data to FHIR? <br>
Options I see so far:</p>
<ol>
<li>Use only "text" in CodeableConcept? But the type itself will be lost since we can store only one value there. And search by that field will not work.</li>
<li>"System" field = original "Codeset" as is. Not sure.</li>
<li>Use for "System" some custom URLs like "<a href="https://myapp.com/CodeSystem/{codeSystemFamily">https://myapp.com/CodeSystem/{codeSystemFamily</a> or just "Unknown"}/{codeset received from third-party as is}". Looks as less evil for me but still evil since we are creating CodeSystems on a fly.<br>
Please advise.</li>
</ol>
<p>UPD<br>
Or even:</p>
<ol start="4">
<li>"<a href="https://myapp.com/CodeSystem/{codeSystemFamily">https://myapp.com/CodeSystem/{codeSystemFamily</a> or just "Unknown"}/{third-party system id}/{codeset received from third-party as is}". In this case it will be linked to a specific third-party source.</li>
</ol>



<a name="229929610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20handle%20unknown%20Code%20Systems/near/229929610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20handle.20unknown.20Code.20Systems.html#229929610">(Mar 11 2021 at 21:31)</a>:</h4>
<p>I'd probably use a normalization algorithm to try to recognize as many variants of RxNorm as possible (RX NORM, Rx-Norm, Rxnrm), etc. based on your historical data for any common/well-known systems that have actual URLs and then map to those URLs.  For anything else, send the code with no system and send the "code system name" as an extension.  (In fact, submit a change request and we can define a 'standard' extension for this, because it's certainly an issue lots of people will have).</p>



<a name="229932078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20handle%20unknown%20Code%20Systems/near/229932078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pash <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20handle.20unknown.20Code.20Systems.html#229932078">(Mar 11 2021 at 21:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> yes, I've already implemented some simple normalization, so "RxNorm" is a bad example here, "hurrdurr" is a better example. Solution with extension is great but it will make it impossible to search by it (I am implementing only proxy app and using FHIR server I can't extend)</p>



<a name="229932614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20handle%20unknown%20Code%20Systems/near/229932614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20handle.20unknown.20Code.20Systems.html#229932614">(Mar 11 2021 at 21:50)</a>:</h4>
<p>You can search by identifier without specifying system - but you risk false matches.  That's the price of not having a computable system.</p>



<a name="229932919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20handle%20unknown%20Code%20Systems/near/229932919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20handle.20unknown.20Code.20Systems.html#229932919">(Mar 11 2021 at 21:52)</a>:</h4>
<p>Generating on the fly doesn't help because the person searching won't know what URL to use to search when they're looking for the "hurrdurr" id.  (Also, in some case there are 'standard' URIs defined in the core spec and if you use something other than the approved URI, you're non-conformant.</p>



<a name="229933776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20handle%20unknown%20Code%20Systems/near/229933776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pash <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20handle.20unknown.20Code.20Systems.html#229933776">(Mar 11 2021 at 21:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> at least it will be possible to search by "<a href="https://myapp.com/CodeSystem/Unknown/hurrdurr">https://myapp.com/CodeSystem/Unknown/hurrdurr</a>". So do you think that it is so a bad workaround?</p>



<a name="229935632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20handle%20unknown%20Code%20Systems/near/229935632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20handle.20unknown.20Code.20Systems.html#229935632">(Mar 11 2021 at 22:05)</a>:</h4>
<p>I wouldn't use "CodeSystem" in the URL because it looks like a FHIR URL but isn't.  Also, you'd have to worry about whether all of your string values would fit nicely in a URL.  However the biggest question is: who's going to know to search on it?</p>



<a name="229937907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20handle%20unknown%20Code%20Systems/near/229937907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pash <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20handle.20unknown.20Code.20Systems.html#229937907">(Mar 11 2021 at 22:15)</a>:</h4>
<p>So will just "hurrdurr" be better for "System" or "<a href="https://myapp.com/UnknownCodeSystem/hurrdurr">https://myapp.com/UnknownCodeSystem/hurrdurr</a>"? <br>
Good point, string values will be escaped, so it should be OK. <br>
Regarding "who's going to know" , yes, it is a problem, but at least we can provide a search mechanism, handle some situation when normalization failed and data already saved, and use guidance "try to search by "https://myapp.com/CodeSystem/Unknown/"code you may expect"" and not just "it's impossible to search by not supported codes (normalized)". So want to find "less evil" here.</p>



<a name="229940099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20handle%20unknown%20Code%20Systems/near/229940099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20handle.20unknown.20Code.20Systems.html#229940099">(Mar 11 2021 at 22:30)</a>:</h4>
<p>It really comes down to your clients.  If they're going to be customized to work in your space and will have a clue what "hurrdurr" is, then your approach has merit.  If not, then you're not achieving interoperability and may be adding complexity to it because you're making it appear that the identifier is a different system than it really is.  A system that's looking for a match on BC provincial health number that gets a match on an identifier for an identifier with no system can treat that as a "possible match".  On the other hand, if it sees an identifier with a system of "<a href="http://myapp.com/CodeSystem/Unknown-bchn">http://myapp.com/CodeSystem/Unknown-bchn</a>", it'll say definitively that that's <em>not</em> a match.</p>



<a name="230035163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20handle%20unknown%20Code%20Systems/near/230035163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20handle.20unknown.20Code.20Systems.html#230035163">(Mar 12 2021 at 14:15)</a>:</h4>
<p>Good Qs&amp;As. Looking foward to a standard practice.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
