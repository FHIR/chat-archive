---
layout: page
title: "FHIR Chat  · Contained Resources · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html">Contained Resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153829694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Barry <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829694">(May 24 2016 at 22:36)</a>:</h4>
<p>We are using transaction bundles to persist medicationDispense resources and all associated resources - organization, patient, dispenser. We'd like to link the MedicationDispense to the AuthorisingPrescription (MedicationOrder) if it exists. However if it doesn't exist we'd need to store the prescribing data somewhere but we wouldn't have enough information to create independent resources so I was thinking of using 'contained' resources. How would I put this logic in the transaction e.g. if AuthorisingPrescription exist then link else use contained resources</p>



<a name="153829708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Barry <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829708">(May 25 2016 at 03:17)</a>:</h4>
<p>We have since found in the spec the following statement on contained resources:<br>
<strong>*Contained resources SHALL NOT contain additional contained resources</strong>*<br>
This means we wouldn't be able to 'contain' the Prescriber within the MedicationOrder that is contained within the MedicationDispense. So we have a problem. How will we store the following data against our MedicationDispense resource?<br>
Prescriber number<br>
prescriber first name<br>
prescriber last name<br>
practice name<br>
practice address<br>
practice phone number<br>
Creating a profile doesn't feel right?</p>



<a name="153829724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gaute Brakstad <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829724">(May 25 2016 at 07:02)</a>:</h4>
<p>Next you have a rule that says:</p>



<a name="153829725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gaute Brakstad <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829725">(May 25 2016 at 07:02)</a>:</h4>
<p>A contained resource SHALL only be included in a resource if something in that resource (potentially another contained resource) has a reference to it</p>



<a name="153829727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gaute Brakstad <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829727">(May 25 2016 at 07:13)</a>:</h4>
<p>we had some discussion internally in our company around this in a similar case. What we ended up with was following is not allowed:<br>
 &lt;Composition xmlns="<a href="http://hl7.org/fhir" target="_blank" title="http://hl7.org/fhir">http://hl7.org/fhir</a>"&gt;<br>
  &lt;extension&gt;...&lt;/extension&gt;<br>
  &lt;text&gt;...&lt;/text&gt;<br>
  &lt;contained&gt;<br>
    &lt;Organization&gt;<br>
        &lt;contained&gt;<br>
         &lt;Organization&gt;<br>
             &lt;id value="org2"/&gt;<br>
             &lt;/Organization&gt;<br>
        &lt;/contained&gt;<br>
      &lt;id value="org1"/&gt;<br>
      &lt;partOf&gt; <br>
           &lt;reference value="#org2" /&gt;<br>
      &lt;/partOf&gt;<br>
    &lt;/Organization&gt;<br>
  &lt;/contained&gt;<br>
  &lt;information&gt;<br>
    &lt;custodian&gt;<br>
      &lt;reference value="#org1" /&gt;<br>
    &lt;/custodian&gt;<br>
  &lt;information&gt;<br>
 &lt;/Composition&gt;</p>
<p>While following is correct:<br>
 &lt;Composition xmlns="<a href="http://hl7.org/fhir" target="_blank" title="http://hl7.org/fhir">http://hl7.org/fhir</a>"&gt;<br>
  &lt;extension&gt;...&lt;/extension&gt;<br>
  &lt;text&gt;...&lt;/text&gt;<br>
  &lt;contained&gt;<br>
    &lt;Organization&gt;      <br>
      &lt;id value="org1"/&gt;<br>
      &lt;partOf&gt; <br>
           &lt;reference value="#org2" /&gt;<br>
      &lt;/partOf&gt;<br>
    &lt;/Organization&gt;¨<br>
&lt;/contained&gt;<br>
 &lt;contained&gt;<br>
    &lt;Organization&gt;<br>
       &lt;id value="org2"/&gt;<br>
    &lt;/Organization&gt; <br>
  &lt;/contained&gt;<br>
  &lt;information&gt;<br>
    &lt;custodian&gt;<br>
      &lt;reference value="#org1" /&gt;<br>
    &lt;/custodian&gt;<br>
  &lt;information&gt;<br>
 &lt;/Composition&gt;</p>
<p>This is to make sure you only have to look one place for your contained resources. Basicly its the "master" resource that have all the contain</p>



<a name="153829738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Barry <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829738">(May 25 2016 at 10:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191394">@Gaute Brakstad</span> Thanks for your response. I am not sure your solution works for my scenario. The organisation is only referenced by the prescriber and the prescriber can only be referenced by medicationOrder so how can I not go two deep?</p>



<a name="153829747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gaute Brakstad <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829747">(May 25 2016 at 12:03)</a>:</h4>
<p>&lt;MedicationDispense xmlns="<a href="http://hl7.org/fhir" target="_blank" title="http://hl7.org/fhir">http://hl7.org/fhir</a>"&gt;<br>
    &lt;contained&gt;<br>
     &lt;MedicationOrder&gt;<br>
         &lt;id&gt;order1&lt;/id&gt;<br>
         &lt;prescriber&gt;<br>
            &lt;reference value="#practitioner1" /&gt;<br>
         &lt;/prescriber&gt;<br>
     &lt;/MedicationOrder&gt;<br>
    &lt;/contained&gt;<br>
    &lt;contained&gt;<br>
     &lt;Practitioner&gt;<br>
         &lt;id&gt;practitioner1&lt;/id&gt; <br>
     &lt;/Practitioner&gt;<br>
    &lt;/contained&gt;<br>
 &lt;authorizingPrescription&gt;<br>
     &lt;reference value="#order1" /&gt;<br>
 &lt;/authorizingPrescription&gt;</p>
<p>&lt;/MedicationDispense&gt;</p>



<a name="153829748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gaute Brakstad <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829748">(May 25 2016 at 12:04)</a>:</h4>
<p>Is it something like this you want to achive?</p>



<a name="153829768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829768">(May 25 2016 at 14:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191949">@Paul Barry</span>  Just for curiosity, in which situation you have a MedicalDispense instance w/o MedicationOrder (so you have to create contained resource)?</p>



<a name="153829800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829800">(May 25 2016 at 15:53)</a>:</h4>
<p>We used the same solution as Gaute did: have all the contained resources under the MedicationDispense. Then each of these contained resources can reference any other contained resource</p>



<a name="153829842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829842">(May 25 2016 at 21:34)</a>:</h4>
<p>yes that's the intent </p>



<a name="153829846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Barry <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829846">(May 25 2016 at 22:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> Sometimes Pharmacies are connected to the system but the Prescribing systems are not. If the patient presents at the pharmacy they will submit details about the prescriber as well as their own dispensing information</p>



<a name="153829848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153829848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Barry <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153829848">(May 25 2016 at 22:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191394">@Gaute Brakstad</span> yes this is what we are trying to achieve. I see you have put the contained Practitioner inline with the contained MedicationOrder even though it is reference by the MedicationOrder (as opposed to the MedicationDispense). I wasn't sure if this was correct. Thanks for clarifying</p>



<a name="153831581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831581">(Jun 03 2016 at 14:45)</a>:</h4>
<p>A <code>Bundle</code> is not allowed to have contained resources, right?</p>



<a name="153831582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831582">(Jun 03 2016 at 14:45)</a>:</h4>
<p>because it inherits from <code>Resource</code> as opposed to <code>DomainResource</code></p>



<a name="153831583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831583">(Jun 03 2016 at 14:46)</a>:</h4>
<p>but the resources referenced in <code>Bundle.entry</code> each *can* have their own contained resources, right?</p>



<a name="153831584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831584">(Jun 03 2016 at 14:46)</a>:</h4>
<p>(but it wouldn't be possible for a resource in one <code>entry</code> to reference something contained in another)</p>



<a name="153831585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831585">(Jun 03 2016 at 14:47)</a>:</h4>
<p>we're building a FHIR client library that might encapsulate looking up contained resources and we just want to make sure we're looking in the right place</p>



<a name="153831587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831587">(Jun 03 2016 at 15:05)</a>:</h4>
<p>Correct.<br>
For which language/platform are you building the library?</p>



<a name="153831590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831590">(Jun 03 2016 at 15:12)</a>:</h4>
<p>Ruby</p>



<a name="153831591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831591">(Jun 03 2016 at 15:12)</a>:</h4>
<p>we're working with MITRE / FHIR crucible</p>



<a name="153831592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831592">(Jun 03 2016 at 15:13)</a>:</h4>
<p>they already have them published open source, we're just working on extending it to handle more use-cases</p>



<a name="153831613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831613">(Jun 03 2016 at 20:43)</a>:</h4>
<p>I've just found that if I try to validate a bundle with resources, which have contained resources on Grahame's server at <a href="http://fhir3.healthintersections.com.au/open/" target="_blank" title="http://fhir3.healthintersections.com.au/open/">fhir3.healthintersections.com.au/open/</a>, I get an error that local references have to start with "#", but actually, all my local references start with "#". If I extract any resources from this bundle and try to validate on the same server , it passes the validation. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, could you please look at this issue when you have time?</p>



<a name="153831715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831715">(Jun 05 2016 at 12:01)</a>:</h4>
<p>Igor, can you send me the bundle please</p>



<a name="153831832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831832">(Jun 06 2016 at 14:32)</a>:</h4>
<p><a href="/user_uploads/10155/bWnfb06n75HErTdcsDkHu38F/medicationdispensebundle.json" target="_blank" title="/user_uploads/10155/bWnfb06n75HErTdcsDkHu38F/medicationdispensebundle.json">medicationdispensebundle.json</a> </p>



<a name="153831833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831833">(Jun 06 2016 at 14:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , the bundle is attached above. I've simplified it, so it has only one MedicationDispense resource in it with a few data elements and a few references to contained resources.</p>



<a name="153831834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831834">(Jun 06 2016 at 14:38)</a>:</h4>
<p>The errors I get are of type: "SHALL have a local reference if the resource is provided inline (url: Medication561127; ids: ) () reference.startsWith('#').not() or (reference.substring(1).trace('url') in %resource.contained.id.trace('ids'))"</p>
<p>If I run the same resource with all its contained resources spearately (not part of a bundle), I get "All OK".</p>



<a name="153831868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153831868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153831868">(Jun 07 2016 at 00:42)</a>:</h4>
<p>ok I'll look</p>



<a name="153832202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153832202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153832202">(Jun 09 2016 at 19:06)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> </p>



<a name="153971672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153971672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153971672">(Jun 25 2018 at 22:24)</a>:</h4>
<p>Can a contained resource claim conformance to a profile? I don't see why not...</p>



<a name="153971702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153971702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153971702">(Jun 26 2018 at 03:22)</a>:</h4>
<p>yes</p>



<a name="153976367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153976367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raheel Sayeed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153976367">(Jul 19 2018 at 15:44)</a>:</h4>
<p>I have a similar question about contained resources, related to <code>QuestionnaireResponse</code> and <code>Questionnaire</code>. </p>
<p>1. Questionnaire is unique enough to exist as a contained resource in <code>QuestionnaireResponse</code>. </p>
<p>2. Questionnaire has a contained resource <code>ValueSet</code>, that <code>Quesionnaire.item.options</code> references. </p>
<p>So: QuestionnaireResponse <strong>contains</strong> Questionnaire <strong> contains</strong> ValueSet </p>
<p>However, when the resource is created: all contained resources are within the parent resource<br>
<code>QuestionnaireResponse</code>.contained: [ <br>
     1. <code>Questionnaire</code><br>
     2. <code>ValueSet</code><br>
] </p>
<p>Is this an expected behavior? The Questionnaire.item.options have to be redirected to the <code>contained</code> of parent resource and not its own <code>contained</code> set?</p>
<p>example: <a href="https://raw.githubusercontent.com/raheelsayeed/fhirpromis/master/QuestionnaireResponse_contained.json" target="_blank" title="https://raw.githubusercontent.com/raheelsayeed/fhirpromis/master/QuestionnaireResponse_contained.json">https://raw.githubusercontent.com/raheelsayeed/fhirpromis/master/QuestionnaireResponse_contained.json</a></p>



<a name="153976376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153976376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153976376">(Jul 19 2018 at 15:58)</a>:</h4>
<p>Contained resources cannot themselves contain resources, see <a href="http://build.fhir.org/references.html#contained" target="_blank" title="http://build.fhir.org/references.html#contained">http://build.fhir.org/references.html#contained</a><br>
You simply stick them all in the parent resource and reference them with "#id", as you're already doing.</p>



<a name="153976380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153976380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Raheel Sayeed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153976380">(Jul 19 2018 at 16:07)</a>:</h4>
<blockquote>
<p>Contained resources cannot themselves contain resources, see <a href="http://build.fhir.org/references.html#contained" target="_blank" title="http://build.fhir.org/references.html#contained">http://build.fhir.org/references.html#contained</a><br>
You simply stick them all in the parent resource and reference them with "#id", as you're already doing.</p>
</blockquote>
<p>Yep, thats what I figured, this is corrected at the server! Nice.</p>



<a name="153976392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Contained%20Resources/near/153976392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Contained.20Resources.html#153976392">(Jul 19 2018 at 17:35)</a>:</h4>
<p>Corrected at the server?  If you found a server that accepts a contained resource within a contained resource and fixes it for you, you're very lucky - as your inbound instance wasn't conformant and (in most environments) would have been rejected.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
