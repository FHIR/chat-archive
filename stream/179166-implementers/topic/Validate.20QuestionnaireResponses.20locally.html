---
layout: page
title: "FHIR Chat  · Validate QuestionnaireResponses locally · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validate.20QuestionnaireResponses.20locally.html">Validate QuestionnaireResponses locally</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="245305574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validate%20QuestionnaireResponses%20locally/near/245305574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Escher <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validate.20QuestionnaireResponses.20locally.html#245305574">(Jul 08 2021 at 12:23)</a>:</h4>
<p>Hey everybody,</p>
<p>I have a question concering validating questionnaire responses with the corresponding questionnaire.<br>
As far as I understood the documentation every response is connected to a questionnaire via its canonical uri and the items via the individual linkid. Does this mean that every questionnaire has to be online available so it can be validated? How can i test responses locally in case the questionnaires have a copyright and cannot be uploaded? </p>
<p>At the moment I'm using the jar-validator to validate the reponses and want to add the corresponding questionnaire as an additional parameter. As it seems this is not possible. All data I have are locally available and not yet on a fhir server. How can i test these responses before uploading?</p>
<p>Thanks in advantage!</p>
<p>Pascal</p>



<a name="245307302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validate%20QuestionnaireResponses%20locally/near/245307302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validate.20QuestionnaireResponses.20locally.html#245307302">(Jul 08 2021 at 12:41)</a>:</h4>
<p>Hi Pascal <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span>. The canonical URI  of a resource serves as a globally unique identifier for that resource - though it is nice if they actually resolve as URLs, they don't absolutely have do (see <a href="https://www.hl7.org/fhir/r4/resource.html#canonical">this bit of the FHIR spec</a>). Either way, you can test entirely locally by doing as follows:</p>
<ol>
<li>Make sure the canonical URL is entered in <code>Questionnaire.url</code> (if you are actually going to use it, it should be in a namespace you control so you can ensure it is unique)</li>
<li>Store the questionnaire in a folder, say <em>qs/</em>.</li>
<li>Make sure the the QuestionnaireResponse has the canonical URL of the matching Questionnaire in <code>QuestionnaireResponse.questionnaire</code> (assuming you are using R4)</li>
<li>Use the <code>-ig</code> parameter with the JAR-validator to load the questionnaires (passing the name of the folder).</li>
</ol>
<p>Hence, assuming that the validator and the response is in the current directory and the Questionnaire in the sub-directory <em>/qs</em>, you would run</p>
<div class="codehilite"><pre><span></span><code>java -jar validator_cli.jar -version 4.0.1 -ig qs my-questionnaire-response-resource.json
</code></pre></div>
<p>This should automatically trigger validation against the Questionnaire. The full documentation for the JAR validator is available <a href="https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator">here</a>.</p>



<a name="245316220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validate%20QuestionnaireResponses%20locally/near/245316220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Escher <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validate.20QuestionnaireResponses.20locally.html#245316220">(Jul 08 2021 at 13:57)</a>:</h4>
<p>Hey Morten,</p>
<p>thanks a lot! That's a very good guide about how to do validation properly!<br>
I used the documentation of the validator, but at some point it lacks of some details in this chapter about where to put the questionnaire: <a href="https://confluence.hl7.org/pages/viewpage.action?pageId=35718580#UsingtheFHIRValidator-Questionnaires">https://confluence.hl7.org/pages/viewpage.action?pageId=35718580#UsingtheFHIRValidator-Questionnaires</a><br>
Thanks again for clarify that out! Maybe somebody can add your explanation to confluence...</p>
<p>Best regards Pascal</p>



<a name="245378041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validate%20QuestionnaireResponses%20locally/near/245378041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validate.20QuestionnaireResponses.20locally.html#245378041">(Jul 08 2021 at 22:04)</a>:</h4>
<p>Do you mean validation on the client side or server side?<br>
Both sides need the definition to be able to function properly.</p>



<a name="245378128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validate%20QuestionnaireResponses%20locally/near/245378128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validate.20QuestionnaireResponses.20locally.html#245378128">(Jul 08 2021 at 22:05)</a>:</h4>
<p>And typically the server receiving the content would have it's own copy of the questionnaire and not reach out externally (although it could)</p>



<a name="245680065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validate%20QuestionnaireResponses%20locally/near/245680065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Escher <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validate.20QuestionnaireResponses.20locally.html#245680065">(Jul 12 2021 at 12:41)</a>:</h4>
<p>At first I want to validate the data locally and later on this should be done automatically on the fhir server. <br>
So if I understood that correctly then the fhir server will validate a QuestionnaireResponse with the given questionnaire in the uri, e.g. <a href="http://hl7.org/fhir/Questionnaire/3141">http://hl7.org/fhir/Questionnaire/3141</a> <br>
in case the server does not contain a corresponding questionnaire? The internal questionnaire will be prioritized?</p>



<a name="245700719"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validate%20QuestionnaireResponses%20locally/near/245700719" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validate.20QuestionnaireResponses.20locally.html#245700719">(Jul 12 2021 at 15:14)</a>:</h4>
<p>What do you mean by 'internal' Questionnaire?</p>



<a name="245793253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validate%20QuestionnaireResponses%20locally/near/245793253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Escher <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validate.20QuestionnaireResponses.20locally.html#245793253">(Jul 13 2021 at 08:34)</a>:</h4>
<p>Internal questionnaire = questionnaire which is stored on the server as a fhir resource.</p>



<a name="245832151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validate%20QuestionnaireResponses%20locally/near/245832151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validate.20QuestionnaireResponses.20locally.html#245832151">(Jul 13 2021 at 14:24)</a>:</h4>
<p>Then I'm not understanding this sentence: "in case the server does not contain a corresponding questionnaire? The internal questionnaire will be prioritized?"</p>
<p>When dealing with a resource that is pointed to by canonical URL (profile, value set, code system, questionnaire, etc.) systems would typically first look for the resource within the local server.  If not found, they would then search their favorite registry(ies) to see if they can find the resource there.  As a last resort (and if comfortable from a security perspective), they might try to resolve the URL itself.</p>



<a name="246059297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validate%20QuestionnaireResponses%20locally/near/246059297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Escher <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validate.20QuestionnaireResponses.20locally.html#246059297">(Jul 15 2021 at 07:15)</a>:</h4>
<p>Thanks, that was the point of my question! :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
