---
layout: page
title: "FHIR Chat  · Prefer Header · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html">Prefer Header</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153822070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822070">(Apr 16 2016 at 01:51)</a>:</h4>
<p>rom an implementer: I ran into different behaviors when creating a resource on different FHIR servers that brought up an interesting question. The issue was the following: I was creating a new resource and expecting the full resource back in the response with the ID of the resource populated. Two servers did this by default. One (HAPI) did not. In order to provide a hint to the server to return the full resource rather than just the ID, we looked at the specification, in particular the ‘prefer’ header. The specification states that servers can choose either behavior as the default but that callers can specify which one the prefer using the prefer header. That part is great. However, it then states that server implementors SHOULD honor this. This brings us back to square one in the sense that one still is not sure what one is going to get. We thought that if this is not a MUST, then at least adherence to prefer should be specified in the conformance statement in some way. Yet, we could not find where one could find this in the conformance statement.</p>



<a name="153822074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822074">(Apr 16 2016 at 03:29)</a>:</h4>
<p>It's a fair point. Can someone remind me why respecting the <code>prefer</code> header isn't a MUST? </p>



<a name="153822078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822078">(Apr 16 2016 at 03:36)</a>:</h4>
<p>I can't find the record</p>



<a name="153822079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822079">(Apr 16 2016 at 06:43)</a>:</h4>
<p>I think that it is implied by RFC 7240:<br>
"The Prefer request header field is used to indicate that particular server behaviors are preferred by the client but are not required for successful completion of the request."</p>



<a name="153822083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822083">(Apr 16 2016 at 07:43)</a>:</h4>
<p>I would say it's a MUST. On most interfaces we have, we're only using the http responseCode and/or full resource. Also normally develop without operationOutcome responses as errors are more useful in original format (except for 400-499 errors). </p>



<a name="153822323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822323">(Apr 18 2016 at 16:59)</a>:</h4>
<p>I'm curious why so many people seem to want servers to return the resource that they just sent it. It doesn't seem useful to me, but obviously lots of people disagree.</p>



<a name="153822324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andy Stechishin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822324">(Apr 18 2016 at 17:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> I think it may be because many of the RESTful frameworks do this as default behaviour. People simply have an expectation that this is 'what you do'. </p>



<a name="153822325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822325">(Apr 18 2016 at 17:10)</a>:</h4>
<p>As well, servers aren't required to store exactly what they're given, so if you want to do a subsequent update, passing back what was actually stored saves you from having to do a GET before submitting an update.</p>



<a name="153822328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Claude Nanjo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822328">(Apr 18 2016 at 17:48)</a>:</h4>
<p>And James, in this case, whatever is the default behavior by the server, the ask is that it be predictable somehow. In the current spec, it is unpredictable.</p>



<a name="153822329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822329">(Apr 18 2016 at 17:53)</a>:</h4>
<p>I thought we had determined the default to be to not return the resource as this conserved bandwidth.</p>



<a name="153822330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822330">(Apr 18 2016 at 18:05)</a>:</h4>
<p>no. we said that the default behavior was up to the server since this allows them to decide what is optimal in their context. the prefer header is used to make the behaviour predictable</p>



<a name="153822333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822333">(Apr 18 2016 at 19:20)</a>:</h4>
<p>We could always say something to the effect of "Servers SHALL return the updated resource content if they do not support the <code>Prefer</code> header", which would help on the predictability front</p>



<a name="153822360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822360">(Apr 18 2016 at 20:27)</a>:</h4>
<p>That seems like a reasonable suggestion <span class="user-mention" data-user-id="191319">@James Agnew</span> </p>



<a name="153822361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822361">(Apr 18 2016 at 20:28)</a>:</h4>
<p>But then there is no place to "register" that the server supports the prefer header? (nothing in conformance)</p>



<a name="153822362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822362">(Apr 18 2016 at 20:29)</a>:</h4>
<p>Maybe this needs to be a part of the patient track at connectathons to get people aware that this can happen.</p>



<a name="153822363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822363">(Apr 18 2016 at 20:30)</a>:</h4>
<p>If we are going to allow Servers to do just one choice of send or not send resource then I'd rather the not send is the default. Alternately if severs are required to support both then clients can set their expected behaviour by using the Prefer header.</p>



<a name="153822382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822382">(Apr 18 2016 at 22:49)</a>:</h4>
<p>I find it useful to read the new id from it, for when I don't have access to the response headers.</p>



<a name="153822389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822389">(Apr 18 2016 at 23:11)</a>:</h4>
<p>when would you not have access to the response headers?</p>



<a name="153822408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822408">(Apr 19 2016 at 00:47)</a>:</h4>
<p>XSLT? Although I'm not doing this in XSLT. I'll stop being lazy and add the Prefer header.</p>



<a name="153822422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822422">(Apr 19 2016 at 06:40)</a>:</h4>
<p>In order to for you to be assured to get the 'Prefered' behaviour we would need to require servers to follow the Prefer header whereas the current behaviour is might follow.</p>



<a name="153822424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822424">(Apr 19 2016 at 06:42)</a>:</h4>
<p>right. I'm ambivalent about this. From a client's point of view,  it would be good to have that the server SHALL observe the prefer header. But it seems to me that there's lots of times I'm writing a server where I know which I'm going to do, and forcing the server to check the prefer header is overhead, particularly since it's about optimization</p>



<a name="153822426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822426">(Apr 19 2016 at 06:43)</a>:</h4>
<p>In Vadim's case if he provides the Prefer header and the server is allowed to ignore then he is 'hooped'.</p>



<a name="153822431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822431">(Apr 19 2016 at 07:50)</a>:</h4>
<p>well, if the server doesn't return the content, yes</p>



<a name="153822477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822477">(Apr 19 2016 at 16:16)</a>:</h4>
<p>Life is no game of wishful thinking,<br>
The RFC defining the Prefer Header does state that it is solely at the discretion of the server what amount it returns. The prefer return header allows the server to take into consideration what the client wishes. That's exactly how it is defined in FHIR when it reads a sever SHOULD honor the header. A MUST definition is contrary to the RFC </p>



<a name="153822580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822580">(Apr 20 2016 at 08:56)</a>:</h4>
<p>Otherwise, I guess the header would have been called "Require" rather than "Prefer" I guess</p>



<a name="153822721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822721">(Apr 21 2016 at 08:42)</a>:</h4>
<p>So then this will work just fine in all cases except for when it doesn't - does that provide the needed level of consistency and assurance?</p>



<a name="153822722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822722">(Apr 21 2016 at 09:42)</a>:</h4>
<p>It should work fine for everyone, except for those clients making false assumptions</p>
<p>If you do ask for a minimal return, you can ignore the body if the server does not honor the Prefer return header.<br>
If you need the resource persisted, and the server does not honor the return=represenstion, you can take the ID from the header an perform a read.</p>
<p>So where's the point ?</p>



<a name="153822723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822723">(Apr 21 2016 at 10:45)</a>:</h4>
<p>Functionally, as long as those who need the Id can obtain it correctly from the location header then their need will be satisfied. <br>
You are correct, the the return of unncessary content, or the lack of supression of that through ignoring of the Prefered header, does not present a fundamentatl problem, it is merely a waste. Some will care, others will not.</p>



<a name="153822724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822724">(Apr 21 2016 at 10:50)</a>:</h4>
<p>It's like everywhere else,<br>
those who follow the specs will have no problem, those who don't might fail</p>
<p>And the spec for Prefer headers is RFC 7240</p>



<a name="153822725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822725">(Apr 21 2016 at 10:53)</a>:</h4>
<p>That's true. It is unfortunate the spec wasn't written to effectively manage the waste, but it is what it is. Ewout is also correct and maybe a Required header would better meet the need.</p>



<a name="153822726"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822726" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822726">(Apr 21 2016 at 11:01)</a>:</h4>
<p>IMHO there is no need,<br>
everyone implementing his client correctly will be able to gain the amount of information he needs.<br>
Most servers will honor the Prefer return, as they don't want to waste bandwidth and performance<br>
It's the same as the Accept-Encoding Header indicating if client might support gzip compression on content<br>
Some servers will honor it and send compressed content, others won't. Thats the way HHTP works well for quite a while now.</p>
<p>we should not try to take all burden away from the clients, and put it on the shoulder of the servers.</p>



<a name="153822727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822727">(Apr 21 2016 at 12:45)</a>:</h4>
<p>if w3c had defined a required header, we would have used it.</p>



<a name="153822760"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153822760" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153822760">(Apr 21 2016 at 17:08)</a>:</h4>
<p>So, I admit this isn't my area of strength, but I've been following this conversation, and don't understand why you don't want to make it a requirement  the server SHALL honor the header? I realize that this is stronger than the RFC, but we layer more stringent requirements on underlying standards in other places.<br>
Also, although a client can deal with the different server behaviors, it adds complexity--the client needs be prepared to try two different approaches. First, I'd rather put complexity on the server, than the client. Secondly, if most servers have one behavior, many client implementers might not even recognize they should be prepared to encounter the other behavior.</p>



<a name="153823199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153823199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153823199">(Apr 26 2016 at 18:07)</a>:</h4>
<blockquote>
<p>If you do ask for a minimal return, you can ignore the body if the server does not honor the Prefer return header.<br>
If you need the resource persisted, and the server does not honor the return=represenstion, you can take the ID from the header an perform a read.</p>
</blockquote>
<p>This is actually what the .NET API does do hide these differences for the client: when return=representation and the server does not obey the prefer header, the .NET API will send out a GET, and return the representation to the client after all.</p>



<a name="153823784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153823784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153823784">(Apr 29 2016 at 12:48)</a>:</h4>
<p>That's a good idea!</p>
<p>I'm stealing it. :)</p>



<a name="153824179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153824179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153824179">(May 02 2016 at 19:34)</a>:</h4>
<p>Technically, you're not stealing this, since this was the outcome of the discussion between me, Grahame and yourself in Paris ;-) You've just forgotten about it ;-)</p>



<a name="153824290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153824290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153824290">(May 02 2016 at 23:10)</a>:</h4>
<p>And this conversation has reminded me to implement it in my server (done yesterday)</p>



<a name="153834692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834692">(Jun 24 2016 at 02:11)</a>:</h4>
<p>If the client sends <code>Prefer: return=minimal</code>, is the server allowed to return an OperationOutcome? This has always been my understanding, but as Lloyd points out the spec seems to indicate that the options are either the created/update resource body or no body at all (see <a href="http://hl7-fhir.github.io/http.html#2.1.0.5.2" target="_blank" title="http://hl7-fhir.github.io/http.html#2.1.0.5.2">here</a> )</p>



<a name="153834697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834697">(Jun 24 2016 at 02:20)</a>:</h4>
<p>Client's need to be able to handle the OperationOutcome case anyway for when the validation/save fails, and the results are returned.</p>



<a name="153834729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834729">(Jun 24 2016 at 02:52)</a>:</h4>
<p>The question is: Can a Create return an OperationOutcome on a success?</p>



<a name="153834730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834730">(Jun 24 2016 at 02:52)</a>:</h4>
<p>My understanding is that on a success, you either get back nothing or a copy of the resource that was created.</p>



<a name="153834731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834731">(Jun 24 2016 at 02:59)</a>:</h4>
<p>Could you pass back warnings to the client using this mechanism?</p>



<a name="153834732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834732">(Jun 24 2016 at 03:00)</a>:</h4>
<p>Errors cause a fail, warnings are happy for the save to complete, but do want to inform that something happened.</p>



<a name="153834734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834734">(Jun 24 2016 at 03:00)</a>:</h4>
<p>Yes, that would be the purpose.</p>



<a name="153834738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834738">(Jun 24 2016 at 03:03)</a>:</h4>
<p>Anyone logged the tracker yet to suggest this change?<br>
(which some of us appear to have thought was the case anyway)</p>



<a name="153834741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834741">(Jun 24 2016 at 03:05)</a>:</h4>
<p>Well, the problem is that there's sometimes a need to echo back the created resource (because you want to see what actually got stored - often not exactly what you sent).  And you can't do both a copy of the created resource and an OperationOutcome, even though both might sometimes be relevant.</p>



<a name="153834744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834744">(Jun 24 2016 at 03:08)</a>:</h4>
<p>I say that if you think there's utility in returning hints and warnings (seems like a big waste to me) you need it whether you want to hte body of the resource or not - that's an orthogonal issue. </p>



<a name="153834745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834745">(Jun 24 2016 at 03:09)</a>:</h4>
<p>so the alternative is a X-FHIR-Notes header, that has an operation outcome in json</p>



<a name="153834747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834747">(Jun 24 2016 at 03:10)</a>:</h4>
<p>Technically, we could put two resources in the Body too, but I think that would be less expected.</p>



<a name="153834748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834748">(Jun 24 2016 at 03:10)</a>:</h4>
<p>But I'm correct that right now, OperationOutcome is prohibited as a response to a successful create, correct?  (Because that's not what HAPI does right now.)</p>



<a name="153834753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834753">(Jun 24 2016 at 03:19)</a>:</h4>
<p>right. that's not conformant</p>



<a name="153834787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834787">(Jun 24 2016 at 09:46)</a>:</h4>
<p>The idea of putting an OperationOutcome in a header is a non-starter unfortunately.</p>
<p>I experimented with this for a little bit, every create/update would get a header with an OO containing the validation results. As I quickly discovered, several pretty fundamental bits of web infrastructure (apache server, squid proxy, probably others) don't like header values longer than 1024 characters without special configuration. This is just asking for trouble.</p>
<p>Using a repeating header with a note in each repetition (i.e. not encoded in an OO) could be an option. Is there any reason not to allow an OO back though as HAPI is (currently incorrectly) doing? I think this behaviour should be allowable.. will file a tracker unless there is objection.</p>



<a name="153834788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834788">(Jun 24 2016 at 10:42)</a>:</h4>
<p>well, the problem is that we have 2 difference choices: OO with warnings or not, and resource or not. And we have one on|off header</p>



<a name="153834805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834805">(Jun 24 2016 at 12:22)</a>:</h4>
<p>Yeah, agree this isn't perfect. But would allowing OO on response make things worse? I don't actually see any rationale for not allowing it.</p>



<a name="153834822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834822">(Jun 24 2016 at 15:14)</a>:</h4>
<p>Well, if we have a usecase for OO on response, then we have a use-case for both OO and payload on response - so the question is, is there any way we can pass back both in a manner that won't be totally surprising/breaking?</p>



<a name="153834844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834844">(Jun 24 2016 at 17:23)</a>:</h4>
<p>I don't see any way that is nice.. You could</p>
<ul>
<li>Return a bundle with two entries (blech)</li>
<li>Use an operation and return the two things in a Parameters (only slightly less blech)</li>
</ul>
<p>Nonetheless, I don't think that means we shouldn't allow the OO back by itself. Tracker filed.</p>



<a name="153834856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834856">(Jun 24 2016 at 18:44)</a>:</h4>
<p>I'm sure FHIR already has a position on this, but what about a multi-part response?</p>



<a name="153834860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834860">(Jun 24 2016 at 19:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> I was thinking the same - is there a prohibition against having multiple payloads in the body (without going to Bundle)?</p>



<a name="153834862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834862">(Jun 24 2016 at 20:00)</a>:</h4>
<p>It seems to me that would accomplish the same thing as returning a bundle, but in a perhaps less client-friendly way.</p>



<a name="153834863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834863">(Jun 24 2016 at 20:01)</a>:</h4>
<p>yes  much less friendly</p>



<a name="153834864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834864">(Jun 24 2016 at 20:03)</a>:</h4>
<p>I don't actually see a usecase for returning the OO in this topic</p>



<a name="153834865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834865">(Jun 24 2016 at 20:03)</a>:</h4>
<p>I like to use it to return validation results</p>



<a name="153834866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834866">(Jun 24 2016 at 20:33)</a>:</h4>
<p>The other use-case is to warn about data that you've ignored or changed from what was submitted.</p>



<a name="153834867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834867">(Jun 24 2016 at 20:34)</a>:</h4>
<p>If you echo back the content, they can see what you did, but they don't have any information as to "why?".</p>



<a name="153834878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834878">(Jun 24 2016 at 22:13)</a>:</h4>
<p>neither of these are use cases. What does the client do with it other than ignore it?</p>



<a name="153834879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834879">(Jun 24 2016 at 22:16)</a>:</h4>
<p>In our case, they just log it. Obviously not a clinical use case if that's the bar, but we find it quite useful for debugging.</p>



<a name="153834900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153834900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153834900">(Jun 25 2016 at 08:35)</a>:</h4>
<p>really belongs in the header then. According to the http standards mailing list, headers over 8k in length are common, so I'm surprised to heara it's a problem</p>



<a name="153835155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835155">(Jun 27 2016 at 17:01)</a>:</h4>
<p>That surprises me.</p>
<p>I looked it up, and the max length in <a href="https://tomcat.apache.org/tomcat-7.0-doc/config/http.html" target="_blank" title="https://tomcat.apache.org/tomcat-7.0-doc/config/http.html">Tomcat is 8k</a> (not 1k as I remembered) oddly enough. According to <a href="http://stackoverflow.com/questions/1097651/is-there-a-practical-http-header-length-limit" target="_blank" title="http://stackoverflow.com/questions/1097651/is-there-a-practical-http-header-length-limit">this link</a> Apache is also 8k, IIS 6 is 16k, and NGINx is 4k or 8k depending on platform.</p>
<p>Obviously that gives a fair bit of room, but the validator certainly managed to exceed the 8k limit when I had it running for people's casual testing.</p>
<p>I dunno, I'd feel uncomfortable recommending a solution that requires reconfiguring something as basic as Apache. There are lots of situations where this type of configuration isn't accessible to you, and this isn't something that fails gracefully.</p>



<a name="153835190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835190">(Jun 27 2016 at 20:49)</a>:</h4>
<p>well, all that makes sense. What this comes to is: there's no un-surprising way to return both a resource and hints and warnings about it. And there's no way to manage a split two-way choice which is what we logically have here either</p>



<a name="153835200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835200">(Jun 27 2016 at 21:00)</a>:</h4>
<p>Well, given that the OperationOutcome isn't persisted, if there's a need for both to come back, the logical thing would be to return the OperationOutcome and let the client query for the created resource if they need that too.  But that behavior would be "surprising" from a RESTful perspective to most systems.</p>



<a name="153835203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835203">(Jun 27 2016 at 21:08)</a>:</h4>
<p>I dunno, I guess I'm in the minority here but I just don't find that behaviour surprising at all. Basically every (non-FHIR) REST API we have here at UHN follows the same pattern for POSTing data: You send it data in whatever structure it requires, and it replies with a much smaller and entirely different structure that contains any relevant status information about what it did.</p>
<p>To me, returning the same entity that it just received is the surprising behaviour. I get that there are valid reasons to do this, but banning returning a status object is just odd to me.</p>



<a name="153835208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835208">(Jun 27 2016 at 21:13)</a>:</h4>
<p>What about a header on  the request that identifies whether the client wants back the saved resource (default), the OperationOutcome, or (in a multipart response) both? This gives the "usual" RESTful behaviour*, but also gives the option for info that a more advanced client can make use of.<br>
(*I'm going to go with  that spelling, given James, Lloyd, and Grahame's participation on the thread.)</p>



<a name="153835211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835211">(Jun 27 2016 at 21:18)</a>:</h4>
<p>oh man if we have corrupted an American into spelling <code>behaviour</code>correctly, this whole FHIR adventure has been worth it.</p>



<a name="153835213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835213">(Jun 27 2016 at 21:21)</a>:</h4>
<p>Sorry <span class="user-mention" data-user-id="191319">@James Agnew</span> , not to invalidate your experience, but as a Canadian, I've always spelt it correctly.</p>



<a name="153835214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835214">(Jun 27 2016 at 21:25)</a>:</h4>
<p>lol ok I thought you were.... but your comment made me think otherwise :p</p>



<a name="153835216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835216">(Jun 27 2016 at 21:30)</a>:</h4>
<p>well, the prefer header is more than just minimal vs representation. it's extensible, and servers are requried to ignore values they do not understand. </p>



<a name="153835217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835217">(Jun 27 2016 at 21:30)</a>:</h4>
<p>so we could define a value 'warnings' to indicate that the client wishes for the server to return an OperationOutcome instead of the full resource </p>



<a name="153835219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835219">(Jun 27 2016 at 21:31)</a>:</h4>
<p>+1</p>



<a name="153835291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835291">(Jun 28 2016 at 00:59)</a>:</h4>
<p>Something like this in the prefer header? <br>
return=minimal<br>
return=representation<br>
return=outcome</p>



<a name="153835295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835295">(Jun 28 2016 at 01:01)</a>:</h4>
<p>well, suggested: <br>
return=minimal<br>
return=representation<br>
return=warnings</p>



<a name="153835296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835296">(Jun 28 2016 at 01:01)</a>:</h4>
<p>but the exact word is not important</p>



<a name="153835310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835310">(Jun 28 2016 at 01:14)</a>:</h4>
<p>warnings wouldn't be clear that you were always after the OperationOutcome, regardless of the result.<br>
(which is how I'd interpretted what this discussion was after, and would be happy with)</p>



<a name="153835311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835311">(Jun 28 2016 at 01:15)</a>:</h4>
<p>outcome isn't obvious that you don't want the outcome of the posting the resource ;-)</p>



<a name="153835312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835312">(Jun 28 2016 at 01:16)</a>:</h4>
<p>make it explicit<br>
<code>Prefer: return=operationoutcome</code></p>



<a name="153835316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835316">(Jun 28 2016 at 01:21)</a>:</h4>
<p>:) This one.</p>



<a name="153835430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835430">(Jun 28 2016 at 11:24)</a>:</h4>
<p>That last suggestion would be okay I guess. Contrary to James I'd totally expect the same resource back after a create/update from a RESTful service, never something entirely different (except on 400+).</p>



<a name="153835507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/153835507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#153835507">(Jun 28 2016 at 19:38)</a>:</h4>
<p>time for a task. <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10250" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10250">GF#10250</a></p>



<a name="161109974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/161109974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#161109974">(Mar 19 2019 at 00:38)</a>:</h4>
<p>The spec is quiet about how to represent multiple prefer headers...</p>
<p><a href="http://hl7.org/implement/standards/fhir/search.html#errors" target="_blank" title="http://hl7.org/implement/standards/fhir/search.html#errors">http://hl7.org/implement/standards/fhir/search.html#errors</a></p>
<ul>
<li>Prefer: handling=strict: Client requests that the server return an error for any unknown or unsupported parameter</li>
<li>Prefer: handling=lenient: Client requests that the server ignore any unknown or unsupported parameter</li>
</ul>
<p><a href="http://hl7.org/implement/standards/fhir/http.html#prefer" target="_blank" title="http://hl7.org/implement/standards/fhir/http.html#prefer">http://hl7.org/implement/standards/fhir/http.html#prefer</a></p>
<ul>
<li>Prefer: return=minimal</li>
<li>Prefer: return=representation</li>
<li>Prefer: return=OperationOutcome</li>
</ul>
<p><a href="http://hl7.org/implement/standards/fhir/async.html#3.1.6.2.0.1" target="_blank" title="http://hl7.org/implement/standards/fhir/async.html#3.1.6.2.0.1">http://hl7.org/implement/standards/fhir/async.html#3.1.6.2.0.1</a></p>
<ul>
<li>Prefer: respond-Async</li>
</ul>
<p>Specifically how you might request for search strict and Async.</p>



<a name="161110527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/161110527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#161110527">(Mar 19 2019 at 00:50)</a>:</h4>
<p>Per <a href="https://tools.ietf.org/html/rfc7240" target="_blank" title="https://tools.ietf.org/html/rfc7240">https://tools.ietf.org/html/rfc7240</a> section 2, either comma-separated or two separate Prefer headers are both accepted.</p>



<a name="161110669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Prefer%20Header/near/161110669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Prefer.20Header.html#161110669">(Mar 19 2019 at 00:53)</a>:</h4>
<p>Thanks.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
