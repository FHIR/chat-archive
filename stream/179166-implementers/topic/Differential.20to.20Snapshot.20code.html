---
layout: page
title: "FHIR Chat  · Differential to Snapshot code · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html">Differential to Snapshot code</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153814562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814562">(Mar 09 2016 at 13:41)</a>:</h4>
<p>Does anyone know if there is any open source code available to generate a StructureDefinition snapshot from a differential (and its base differentials)?  (C# preferably)</p>



<a name="153814563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814563">(Mar 09 2016 at 13:44)</a>:</h4>
<p>Hi Jonny, yes there is code that does that here: <a href="https://github.com/ewoutkramer/fhir-net-api/tree/develop/src/Hl7.Fhir.Specification/Specification/Snapshot" target="_blank" title="https://github.com/ewoutkramer/fhir-net-api/tree/develop/src/Hl7.Fhir.Specification/Specification/Snapshot">https://github.com/ewoutkramer/fhir-net-api/tree/develop/src/Hl7.Fhir.Specification/Specification/Snapshot</a></p>



<a name="153814564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814564">(Mar 09 2016 at 13:45)</a>:</h4>
<p>Excellent thanks :-)</p>



<a name="153814565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814565">(Mar 09 2016 at 13:45)</a>:</h4>
<p>It is still under development I think, but it's come a long way. <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> knows the current status.</p>



<a name="153814567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814567">(Mar 09 2016 at 14:48)</a>:</h4>
<p>Do you use Ewout's Snapshot generator in Forge?</p>



<a name="153814579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814579">(Mar 09 2016 at 16:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191334">@Marten Smits</span> <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> I <em>think</em> there might be a bug in the Snapshot generator - I'm trying to generate a snapshot of an Organization profile.  When the generator looks for the boolean base type for the "Organization.active" element, the following line passes in "Boolean" to ArtifactResolver:</p>
<p>var coreType = resolver.GetStructureDefinitionForCoreType(defn.Type[0].Code.ToString());</p>
<p>The ArtifactResolver can't find the definition for "Boolean" because it is defined "boolean".</p>
<p>Apologies if I'm doing something stupid, but it looks like it could be a bug, as other base resources such as "ContactPoint", "Identifier" as being resolved fine.</p>



<a name="153814584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814584">(Mar 09 2016 at 16:39)</a>:</h4>
<p>Thanks that is a bug indeed. I'll fix it right away.</p>



<a name="153814585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814585">(Mar 09 2016 at 16:43)</a>:</h4>
<p>Great - I'll pull an update when you're done.</p>



<a name="153814586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814586">(Mar 09 2016 at 16:46)</a>:</h4>
<p>Should be available now</p>



<a name="153814587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814587">(Mar 09 2016 at 16:47)</a>:</h4>
<p>is it the master branch in this repo?<br>
<a href="https://github.com/ewoutkramer/fhir-net-api" target="_blank" title="https://github.com/ewoutkramer/fhir-net-api">https://github.com/ewoutkramer/fhir-net-api</a></p>



<a name="153814588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814588">(Mar 09 2016 at 16:47)</a>:</h4>
<p>it's in the develop branch</p>



<a name="153814589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814589">(Mar 09 2016 at 16:47)</a>:</h4>
<p>ok</p>



<a name="153814590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814590">(Mar 09 2016 at 16:58)</a>:</h4>
<p>that's working great now thanks :-)</p>



<a name="153814591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marten Smits <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814591">(Mar 09 2016 at 16:58)</a>:</h4>
<p>No problem :-)</p>



<a name="153814640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814640">(Mar 09 2016 at 20:42)</a>:</h4>
<p>Jonny - the java reference implementation also does this too, and it's open source. In addition, my server also does this, and it's also open source too</p>



<a name="153814734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814734">(Mar 10 2016 at 10:18)</a>:</h4>
<p>@Jonny, Forge still performs snapshot expansion using custom application logic. So the results might slightly differ from other tools that also perform expansion. We are planning to deprecate the custom Forge expansion logic and leverage the new FHIR API snapshot generation in a future release, in order to have a uniform implementation across different tools.</p>



<a name="153814741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153814741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonny Rylands <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153814741">(Mar 10 2016 at 10:45)</a>:</h4>
<p>Ok thanks.</p>



<a name="153815365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153815365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153815365">(Mar 14 2016 at 08:04)</a>:</h4>
<p>Yeah. That looks like an incorrect fix for when we updated the model generation to C#: the Type[x].Code went from a string to an enum, and I did a quickfix by putting ToString() there, but that's obviously wrong.  This really should be ModelInfo.FhirTypeToFhirTypeName(defn.Type[0].Code). Can you try that?</p>



<a name="153815366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Differential%20to%20Snapshot%20code/near/153815366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Differential.20to.20Snapshot.20code.html#153815366">(Mar 14 2016 at 08:30)</a>:</h4>
<p>Oops, just noticed Marten has already fixed that. Still have to get used to Zulip, sorry ;-)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
