---
layout: page
title: "FHIR Chat  · scheduling · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html">scheduling</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153815586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153815586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153815586">(Mar 15 2016 at 08:30)</a>:</h4>
<p>We are implementing a scheduling system, where a patient-facing app or portal will allow the patient to reschedule their appointments. Since the workflow for this is simple and does not need asynchronous flows, we prefer to do a straight PUT on the Appointment (and not use pub/sub or AppointmentResponse).  We figure it works like this:</p>
<ul>
<li>The app does a PUT with the new time (start/end) + reference to the slot + status="proposed" + all participants (with all statuses set to needs-action)</li>
<li>Server processes any business rules, checks availability (single system, no need for AppointmentResponses)</li>
<li>On success, returns the Appointment with the status set to "booked", and updates to the participants (status =accepted)</li>
<li>On failure, returns 422, with an operation outcome detailing the why (mostly non-availability of resources)</li>
</ul>
<p>This seems to work but two things keep nagging me:</p>
<ul>
<li>We use the PUT to start a workflow, and the returned body will always differ from what was sent by the client. I know this is allowed by the spec, but is this the intention of how the Appointment is to be used in a synchronous workflow?</li>
<li>We chose to return an OperationOutcome, and not an Appointment with participant.status="declined" (and Appointment.status=????), since there might be other reasons the rescheduling failed</li>
</ul>
<p>Does this make sense?</p>



<a name="153815587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153815587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153815587">(Mar 15 2016 at 08:45)</a>:</h4>
<p>I would expect that the Appointment would not update (if these were the business rules) and that an OperationOutcome would be returned with the details of what went wrong, and a status of <code>422</code></p>



<a name="153815588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153815588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153815588">(Mar 15 2016 at 08:46)</a>:</h4>
<p>(as you pointed out, this is in the spec here: <a href="http://hl7.org/fhir/http.html#2.1.0.10.1" target="_blank" title="http://hl7.org/fhir/http.html#2.1.0.10.1">http://hl7.org/fhir/http.html#2.1.0.10.1</a>)</p>



<a name="153815589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153815589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153815589">(Mar 15 2016 at 08:46)</a>:</h4>
<p>And yes, in a synchronous appointment booking that would be quite reasonable.</p>



<a name="153818382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153818382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mat Coolidge  <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153818382">(Mar 28 2016 at 14:35)</a>:</h4>
<p>Anyone have an opinion how to map checkin/arrival time for an appointment?</p>



<a name="153818383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153818383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mat Coolidge  <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153818383">(Mar 28 2016 at 14:37)</a>:</h4>
<p>just found a relevant gforge ticket: <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9276" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9276">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9276</a></p>



<a name="153818485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153818485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153818485">(Mar 28 2016 at 21:20)</a>:</h4>
<p>When the patient arrives, the Encounter begins, and that is where you would record the checkin time. The status would be recorded as arrived.</p>



<a name="153819895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153819895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mat Coolidge  <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153819895">(Apr 04 2016 at 19:18)</a>:</h4>
<p>Looping back around to this topic,  I understand the workflow and it makes perfect sense that the encounter has begun once the patient arrives. Practically speaking our developer is asking for the time in which that occured within his query of appointments. I dont see a way to reference the encounter(s) from an appointment like there is on the encounter backwards to appointment. If there was I could ask that he use _include in the query to get that back and find the start time. </p>



<a name="153819930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153819930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153819930">(Apr 05 2016 at 01:23)</a>:</h4>
<p>You can use _revinclude.  (We try hard to make sure relationships only point way because otherwise things are quite complicated in REST.</p>



<a name="153819968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153819968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mat Coolidge  <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153819968">(Apr 05 2016 at 14:37)</a>:</h4>
<p>Thanks Lloyd! I guess thats workable, but I am sure other people will want to see the arrival time on upcoming appointments. This was actually driven by a feature request from a physician.</p>



<a name="153820446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153820446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153820446">(Apr 08 2016 at 05:03)</a>:</h4>
<p>Mat and I have gone through this, and jsut for others benefit, this is essentially 2 queries.<br>
One for the appointments, and another for the Encounters.<br>
The second is required even if doing the revinclude, as walk-ins may not be recorded as an appointment, so need the other call anyway.</p>



<a name="153820447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153820447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153820447">(Apr 08 2016 at 05:04)</a>:</h4>
<p>The appointment contains the times that are planned, then once the patient arrives, all the actual times are then entered into the encounter (including the arrival time)</p>



<a name="153820479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153820479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mat Coolidge  <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153820479">(Apr 08 2016 at 13:44)</a>:</h4>
<p>Thanks Brian, one thing we also discussed is our requirement of an estimated arrival time. Our understanding is that this would be an extension on the appointment resource. Also as an FYI, our providers dont allow walk ins. They would instead always schedule a "same day appointment" so for our use case, we will likely be implementing  the _revinclude option on the appointments endpoint to return the encounter, drill into that encounters start time. </p>



<a name="153821215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153821215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153821215">(Apr 12 2016 at 13:21)</a>:</h4>
<p>A couple things caught my attention in this discussion.</p>
<p>First, as part of <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_id=677&amp;tracker_item_id=7873" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_id=677&amp;tracker_item_id=7873">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_id=677&amp;tracker_item_id=7873</a>, it was previously advised that "the period that is allocated to the Encounter may be used to describe future/expected end dates."  Thus, as much as I would prefer an explicit estimated period (for estimated arrival and estimated departure dates), it seems like the guidance was to use the existing period, such that I assume the status would then imply whether the dates were estimated or actuals.  Has this guidance changed to using an extension now for estimated dates?</p>
<p>Second, I am wondering if we have the ability to calculate patient wait times based on registration date versus arrival date?  Is the recommendation to use the Encounter.location.period and assume that there is a waiting room location that could be used to infer the wait time?  If this is a common KPI (key performance indicator), then it seems cumbersome to understand all possible locations in order to calculate this.</p>



<a name="153821217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153821217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153821217">(Apr 12 2016 at 13:29)</a>:</h4>
<p>Patient wait times would be in the status history, the length of time in the arrived status.<br>
Isthis is what you were looking for, the amount of time that the patient spent waiting before being seen?</p>



<a name="153821369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153821369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153821369">(Apr 12 2016 at 23:11)</a>:</h4>
<p>FYI...  Our system doesn't have an "arrived" status, specifically, but we do track the dates and times....which leads to the question whether we should be mapping to FHIR's "arrived" status based on some combination of dates and our status.  We're internally discussing the implications of doing so....</p>



<a name="153821401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153821401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153821401">(Apr 13 2016 at 02:03)</a>:</h4>
<p>Thanks for the info. Interested to hear where you get to and if you represent tracking the arrived state anywhere in your system.</p>



<a name="153830365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/scheduling/near/153830365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/scheduling.html#153830365">(May 28 2016 at 04:54)</a>:</h4>
<p>We determined that we aren't going to map to Encounter.status of arrived because the registration date/time is not a reliable way to know when the patient was seen (i.e. knowing when to change the status from arrived to in progress) as registration can happen before or after the patient is seen. </p>
<p>That said, we do track the patient seen date/time on the appointment (just not the encounter).  I believe our wait time KPIs are all driving off the appointment, not encounter.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
