---
layout: page
title: "FHIR Chat  · OAuth2 / JWT auth? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html">OAuth2 / JWT auth?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153952047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/OAuth2%20/%20JWT%20auth%3F/near/153952047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Koch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html#153952047">(Apr 12 2018 at 13:04)</a>:</h4>
<p>We're looking into setting up an OAuth2 server that allows for clients to authenticate themselves and then request FHIR resources from our data store. The recommended approach for this seems to be the following (SMART on FHIR):</p>
<p><a href="http://docs.smarthealthit.org/authorization/backend-services/" target="_blank" title="http://docs.smarthealthit.org/authorization/backend-services/">http://docs.smarthealthit.org/authorization/backend-services/</a> </p>
<p>We will not be authenticating against an existing EHR Auth Server - we're setting this up ourselves.</p>
<p>Our primary use case will be for third parties to request (via GET calls) bundles of resources that they are granted access to via specific authorization rules we establish. One way we were thinking of doing this was to set up a database of "users" (e.g. clients) that would then be able to make authenticated API calls to our server to get what they need. They'd do this by sending along the appropriate Authorization header with their requests.</p>
<p>So...on to my question. Should we pursue a JSON Web Token (JWT) model where:</p>
<ul>
<li>Clients generate a public/private key pair, and store the private key securely</li>
<li>We store the client public key</li>
<li>Clients create single use JWT's, and make requests to a <code>/token</code> endpoint we set up, which returns them an access token</li>
<li>Clients can use this "bearer" token until it expires</li>
</ul>
<p>This does seem more cumbersome to set up, but secure in the long run. Open to thoughts...</p>



<a name="153952099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/OAuth2%20/%20JWT%20auth%3F/near/153952099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html#153952099">(Apr 12 2018 at 17:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> <span class="user-mention" data-user-id="191404">@John Moehrke</span> ?</p>



<a name="153952104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/OAuth2%20/%20JWT%20auth%3F/near/153952104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html#153952104">(Apr 12 2018 at 17:50)</a>:</h4>
<p>I think you have a wide design space available to you. On the lowest end of the spectrum: just give developers API keys that they can use directly for API calls (forever or until revoked). To avoid long-lived shared secrets, the asymmetric cryptography infrastructure helps. We proposed this (with a JWT-based OAuth flow) in SMART as a good fit for many use cases -- but it's entirely possible that it's "too cumbersome". We're trying to learn more on  this front through community feedback.</p>



<a name="153952105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/OAuth2%20/%20JWT%20auth%3F/near/153952105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html#153952105">(Apr 12 2018 at 17:52)</a>:</h4>
<p>One overarching goal is to find an approach in a sweet spot of "good security properties" and "not too cumbersome" ... to the point that it can be come commonly adopted and understood across many vendors and use cases. We've had modest success here with user-facing app OAuth protocols, but here hasn't been enough attention to "backend services" yet.</p>



<a name="153952108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/OAuth2%20/%20JWT%20auth%3F/near/153952108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html#153952108">(Apr 12 2018 at 18:14)</a>:</h4>
<p>I agree with Josh on the current state of the art. This specific use-case is one we (the FHIR community) is trying to gather experience and formulate a position on. You might want to join the "Security and Privacy" stream. Over there is a specific thread to this topic <a href="https://chat.fhir.org/#narrow/stream/Security.20and.20Privacy/topic/backend.20service.20secure.20communication" target="_blank" title="https://chat.fhir.org/#narrow/stream/Security.20and.20Privacy/topic/backend.20service.20secure.20communication">https://chat.fhir.org/#narrow/stream/Security.20and.20Privacy/topic/backend.20service.20secure.20communication</a></p>



<a name="153952129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/OAuth2%20/%20JWT%20auth%3F/near/153952129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Akeem Leighton Foster Spencer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html#153952129">(Apr 12 2018 at 19:42)</a>:</h4>
<blockquote>
<p>I think you have a wide design space available to you. On the lowest end of the spectrum: just give developers API keys that they can use directly for API calls (forever or until revoked). To avoid long-lived shared secrets, the asymmetric cryptography infrastructure helps. We proposed this (with a JWT-based OAuth flow) in SMART as a good fit for many use cases -- but it's entirely possible that it's "too cumbersome". We're trying to learn more on  this front through community feedback.</p>
</blockquote>
<p>Hey <span class="user-mention" data-user-id="191315">@Josh Mandel</span>, I'm sorry if the resources for this are covered in FHIR but I'll ask anyway, but what about biometrics? Can the clients use biometrics in order to sign-on? (i.e. fingerprints, facial detection). Does FHIR have resources built for this type of security protocol?</p>



<a name="153952143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/OAuth2%20/%20JWT%20auth%3F/near/153952143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html#153952143">(Apr 12 2018 at 21:24)</a>:</h4>
<p>FHIR doesn't have resources for authentication (biometric or otherwise). For user-facing apps, an identity provider certainly can provide support for multiple factors including passwords, OTP, device flows, biometrics, etc. This gets into details of authentication, which should be orthogonal to how FHIR and an authorization spec are created.</p>



<a name="153952144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/OAuth2%20/%20JWT%20auth%3F/near/153952144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html#153952144">(Apr 12 2018 at 21:24)</a>:</h4>
<p>Specifically for backend services (the question in this thread), there's no user in the loop, so it wouldn't make sense to talk about biometrics.</p>



<a name="153952324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/OAuth2%20/%20JWT%20auth%3F/near/153952324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html#153952324">(Apr 13 2018 at 21:00)</a>:</h4>
<p>in general you should look to SCIM for this - see <a href="http://www.simplecloud.info/" target="_blank" title="http://www.simplecloud.info/">http://www.simplecloud.info/</a></p>



<a name="153954801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/OAuth2%20/%20JWT%20auth%3F/near/153954801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Koch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html#153954801">(Apr 27 2018 at 16:29)</a>:</h4>
<blockquote>
<p>in general you should look to SCIM for this - see <a href="http://www.simplecloud.info/" target="_blank" title="http://www.simplecloud.info/">http://www.simplecloud.info/</a></p>
</blockquote>
<p>Hi Grahame, is this what you would recommend for this use case? Poking around, I think the SCIM protocol does show promise, especially if part of the goal is to limit what folks should be granted access to based on their identity.  <a href="https://tools.ietf.org/html/rfc7644" target="_blank" title="https://tools.ietf.org/html/rfc7644">https://tools.ietf.org/html/rfc7644</a></p>
<p>I also wonder how this would work in practice. I suppose we could provision users in a database but include enough information to encode them as SCIM objects. Then, when users (clients) make requests using OAuth, that mechanism doesn't change but we can restrict what FHIR resources those users can access once the request makes its way through.</p>



<a name="153954869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/OAuth2%20/%20JWT%20auth%3F/near/153954869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/OAuth2.20.2F.20JWT.20auth.3F.html#153954869">(Apr 27 2018 at 23:36)</a>:</h4>
<p>SCIM would mnage the user accounts and permissions (in the authorization server). And I'd use OAuth, yes. And the Authorization server users the user details in the SCIM fronted database to decide what user is allowed to do. THis requires that the resource server be firmly welded to the Authorization server for permission/access control as well as authorization</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
