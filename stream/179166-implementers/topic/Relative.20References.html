---
layout: page
title: "FHIR Chat  · Relative References · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html">Relative References</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="175893725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175893725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175893725">(Sep 17 2019 at 10:39)</a>:</h4>
<p>I have a question about a breaking change to a normative part of the specification. </p>
<p>Process note: Breaking changes to normative content are only allowed if <em>everyone</em> agrees that they're a reasonable change to make, and it won't break implementations. This might be one of those cases.</p>



<a name="175893803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175893803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175893803">(Sep 17 2019 at 10:40)</a>:</h4>
<div class="message_inline_image"><a href="https://i.kym-cdn.com/photos/images/original/000/264/241/9e9.gif" target="_blank" title="https://i.kym-cdn.com/photos/images/original/000/264/241/9e9.gif"><img src="https://i.kym-cdn.com/photos/images/original/000/264/241/9e9.gif"></a></div>



<a name="175893830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175893830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175893830">(Sep 17 2019 at 10:40)</a>:</h4>
<p><a href="https://www.hl7.org/fhir/references.html#literal" target="_blank" title="https://www.hl7.org/fhir/references.html#literal">https://www.hl7.org/fhir/references.html#literal</a> describes how relative references work. It says that a reference like </p>
<p>Patient/1</p>
<p>is a reference to a resource located at "Patient/1" relative to the resource. There's a special rule that if you accessed the resource by the RESTful API, "relative to" actually means 'Relative to the service base', not to the actual resource.</p>



<a name="175893858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175893858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175893858">(Sep 17 2019 at 10:41)</a>:</h4>
<p>Note, however, that this relative reference is also perfectly fine: </p>
<p>old_resources/my_archive/resources/something-else/thisthat.xml</p>



<a name="175893883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175893883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175893883">(Sep 17 2019 at 10:41)</a>:</h4>
<p>whatever is served up from this URL must be a resource that is one of the acceptable target types for the element that contains the reference</p>



<a name="175894117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175894117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175894117">(Sep 17 2019 at 10:44)</a>:</h4>
<p>There's one thing the specification doesn't say which is kind of surprising to most implementers: there's no rule that a reference like </p>
<p>Patient/1 </p>
<p>Actually has to point to a patient. Weird, and I would very strongly recommend against mucking around with people's expectations like that. And if you didn't serve a Patient from a link like that, you probably wouldn't conform to the RESTful API... but maybe you aren't anyway (you don't have to only use resources with the RESTful API).</p>
<p>What this means is that as the reference level, you can't assume that Patient/1 actually references a patient: you have to fetch it to see what it references.</p>



<a name="175894180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175894180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175894180">(Sep 17 2019 at 10:45)</a>:</h4>
<p>I think most people would find that surprising... So we could consider changing the specification to say that if a reference is relative, and starts with [Type]/ where Type is one of the known resources, then it SHALL refer to a resource of the named type.</p>



<a name="175894246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175894246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175894246">(Sep 17 2019 at 10:46)</a>:</h4>
<p>we can only do that if everyone agrees that this a reasonable rule that no one has deviated from (and we would have to implementer survey on this).</p>



<a name="175904327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175904327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175904327">(Sep 17 2019 at 13:13)</a>:</h4>
<p>Bulk data relies on all references being in the [Type]/[id] format</p>



<a name="175906948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175906948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175906948">(Sep 17 2019 at 13:41)</a>:</h4>
<p>I guess a validator would still have to verify by resolving the reference, and report a type mismatch as an error.</p>



<a name="175907094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175907094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175907094">(Sep 17 2019 at 13:43)</a>:</h4>
<p>Validators look at  a lot of things that normal clients don't need to.  ;)</p>



<a name="175907344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175907344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175907344">(Sep 17 2019 at 13:45)</a>:</h4>
<p>This seems totally good and clear. Out of curiosity: did this come up as a problem in a real-world situation?</p>



<a name="175908063"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175908063" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175908063">(Sep 17 2019 at 13:53)</a>:</h4>
<p>it arose when I was testing a validator fail report (on <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a> if you want to read the details)</p>



<a name="175908194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175908194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175908194">(Sep 17 2019 at 13:54)</a>:</h4>
<p>Thanks! <a href="#narrow/stream/179167-hapi/topic/constraint.20on.20careteam.20%28ctm-1%29/near/175879831" title="#narrow/stream/179167-hapi/topic/constraint.20on.20careteam.20%28ctm-1%29/near/175879831">deep link  to the thread</a>.</p>



<a name="175950839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175950839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175950839">(Sep 17 2019 at 21:27)</a>:</h4>
<blockquote>
<p>This seems totally good and clear. Out of curiosity: did this come up as a problem in a real-world situation?</p>
</blockquote>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span>  My main focus tends to revolve around real-world situations. Imaginary stuff scares the s**t out of me <span aria-label="scream" class="emoji emoji-1f631" role="img" title="scream">:scream:</span></p>



<a name="175950851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/175950851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#175950851">(Sep 17 2019 at 21:27)</a>:</h4>
<p><span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="176001531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/176001531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#176001531">(Sep 18 2019 at 12:54)</a>:</h4>
<blockquote>
<p>Process note: Breaking changes to normative content are only allowed if <em>everyone</em> agrees that they're a reasonable change to make, and it won't break implementations. This might be one of those cases.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  How many is <em>everyone</em> and what would the ETA be? Would this go back to eg. STU3?</p>



<a name="176002528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/176002528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#176002528">(Sep 18 2019 at 13:04)</a>:</h4>
<p>well, we would actively seek input repeatedly through all the channels we have, particularly ballot, hammering on the fact that this is a breaking change to normative content that can only stand if no one objects and we have thoroughly asked the community. And if TSC approves that we did all that properly</p>



<a name="176002718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/176002718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#176002718">(Sep 18 2019 at 13:06)</a>:</h4>
<p>and it wouldn't apply retrospectively directly, but it would be pretty strong guidance</p>



<a name="176002797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Relative%20References/near/176002797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Relative.20References.html#176002797">(Sep 18 2019 at 13:07)</a>:</h4>
<p>So ... between two days and two years</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
