---
layout: page
title: "FHIR Chat  · FHIR Narrative DIV  tag with or without xmlns ? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html">FHIR Narrative DIV  tag with or without xmlns ?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153897034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mordekhai Oziel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897034">(Jul 17 2017 at 09:09)</a>:</h4>
<p>Hi all,<br>
when writing a resource that contains an xhtml div tag, is the xmlns attribute requested or optional ? When I have a look at the FHIR specs it is not mentioned but when I have a look at the HAPI validator source, this attribute is requested.<br>
Thanks</p>



<a name="153897036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897036">(Jul 17 2017 at 09:15)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193842">@Mordekhai Oziel</span>, when you are serializing to XML, then I think you should always generate an XML namespace attribute on the div tag, as this element is not part of the FHIR namespace.</p>



<a name="153897037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mordekhai Oziel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897037">(Jul 17 2017 at 09:17)</a>:</h4>
<blockquote>
<p>Hi <span class="user-mention" data-user-id="193842">@Mordekhai Oziel</span>, when you are serializing to XML, then I think you should always generate an XML namespace attribute on the div tag, as this element is not part of the FHIR namespace.</p>
</blockquote>
<p>Thanks for your quick help</p>



<a name="153897059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mordekhai Oziel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897059">(Jul 17 2017 at 11:56)</a>:</h4>
<p>Hi all,<br>
is there a reason why in DSTU2 the validation of resources containing a div tag did not require an xmlns and from DSTU3 it seems to be required ? <br>
Is it required only when serializing xml or also for a json resource containing such a div tag ?<br>
Does anybody know why in FHIR specs(<a href="https://www.hl7.org/fhir/dstu2/narrative.html#xhtml" target="_blank" title="https://www.hl7.org/fhir/dstu2/narrative.html#xhtml">https://www.hl7.org/fhir/dstu2/narrative.html#xhtml</a>) we can see that a div without xmlns is legal ?</p>
<p>"div": "&lt;div&gt;text&lt;/div&gt;"<br>
is legal, but this is not:</p>
<p>"div": "&lt;?xml ...&gt;&lt;div&gt;text&lt;/div&gt;"</p>
<p>Thanks</p>



<a name="153897060"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897060" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897060">(Jul 17 2017 at 12:10)</a>:</h4>
<p>&lt;?xml&gt; is an XML declaration, that is different from the namespace xmlns declaration</p>



<a name="153897061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897061">(Jul 17 2017 at 12:11)</a>:</h4>
<p>The declaration might be not legal because it's just an xhtml snippet and not a full-blown, standalone XML document</p>



<a name="153897062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897062">(Jul 17 2017 at 12:12)</a>:</h4>
<p>See:</p>
<blockquote>
<p>The XHTML content SHALL NOT contain a head, a body element, external stylesheet references, deprecated elements, scripts, forms, base/link/xlink, frames, iframes, objects or event related attributes </p>
</blockquote>
<p>It's pretty stripped down</p>



<a name="153897064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897064">(Jul 17 2017 at 12:49)</a>:</h4>
<p>I think the XHTML Namespace on the div element is only required when serializing to XML. JSON doesn't have namespaces.<br>
The &lt;?xml... is a pre-processing tag that can only occur at the beginning of an XML document.</p>



<a name="153897065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mordekhai Oziel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897065">(Jul 17 2017 at 12:55)</a>:</h4>
<blockquote>
<p>I think the XHTML Namespace on the div element is only required when serializing to XML. JSON doesn't have namespaces.<br>
The &lt;?xml... is a pre-processing tag that can only occur at the beginning of an XML document.</p>
</blockquote>
<p>Thank you <span class="user-mention" data-user-id="191336">@Michel Rutten</span> , if I am correct, even when you write a JSON resource your div field contains xhtml and according to the HAPI validator, when you validate a JSON resource containing such a div tag without xmlns, you get an error.<br>
I am a little bit confused here...</p>
<p>Thanks</p>



<a name="153897066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897066">(Jul 17 2017 at 13:03)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193842">@Mordekhai Oziel</span>, not sure about JSON validator, as I mainly work in XML space myself. The "&lt;div...&gt;...&lt;/div&gt;" part is actually an XHTML fragment, not a complete document. Namespace on the div element could be useful/necessary when client logic wants to merge the fragment into a containing XHTML page, depending on the processing logic.</p>



<a name="153897067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897067">(Jul 17 2017 at 13:05)</a>:</h4>
<p>I think it's best to always include the namespace on div element in both XHTML and JSON, so the formats are interchangeable.</p>



<a name="153897069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mordekhai Oziel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897069">(Jul 17 2017 at 13:11)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191336">@Michel Rutten</span> , Sorry I should precise a little bit more  of context:<br>
I am writing a validation service that accepts FHIR resources in both XML and JSON formats, deserialize them and validate them.<br>
We noticed that when we work on objects that contain div tags missing xmlns we get an error from the HAPI validator.<br>
Here is an example:<br>
{<br>
    "resourceType": "StructureDefinition",<br>
         ...<br>
          "text": {<br>
        "status": "generated",<br>
        "div": "&lt;div&gt;abc&lt;/div&gt;"<br>
    },<br>
    ...<br>
}</p>
<p>Here is the error: ERROR: StructureDefinition.text.div: Wrong namespace on the XHTML ('null')</p>
<p>According to the answers I got from you and <span class="user-mention" data-user-id="191363">@Vadim Peretokin</span> , I understand that the xmlns should always be provided. But how can I say this is "mandatory" to my users when I can't see anything about it in the FHIR specs ?<br>
Do you think it is an error from the validator that should accept div without xmlns or do you think FHIR specs are incomplete ?<br>
Sorry to ask several times the same question but I am new to the FHIR world.</p>
<p>Thank you for your help</p>



<a name="153897071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897071">(Jul 17 2017 at 13:27)</a>:</h4>
<p>I see your point. It is mandatory for XML since it's a different namespace, but JSON doesn't have that idea of them. The .NET validator seems to be fine with it either way, and since nothing is mentioned about it in the spec, I'd say it seems HAPI is adding an extra constraint in here</p>



<a name="153897075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mordekhai Oziel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897075">(Jul 17 2017 at 13:40)</a>:</h4>
<blockquote>
<p>I see your point. It is mandatory for XML since it's a different namespace, but JSON doesn't have that idea of them. The .NET validator seems to be fine with it either way, and since nothing is mentioned about it in the spec, I'd say it seems HAPI is adding an extra constraint in here</p>
</blockquote>
<p>Thanks a lot <img alt=":+1:" class="emoji" src="/static/generated/emoji/images/emoji/unicode/1f44d.png" title=":+1:"></p>



<a name="153897179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897179">(Jul 18 2017 at 08:14)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193842">@Mordekhai Oziel</span>, maybe you should discuss this with the HAPI team (<span class="user-mention" data-user-id="191319">@James Agnew</span>)?</p>



<a name="153897188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mordekhai Oziel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897188">(Jul 18 2017 at 08:54)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191336">@Michel Rutten</span> , thanks for this contact, I'll do.</p>



<a name="153897613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897613">(Jul 21 2017 at 10:45)</a>:</h4>
<p>the spec says:<br>
"The XHTML &lt;div&gt; element in the Narrative datatype is represented as a single escaped string of XHTML. This is to avoid problems in JSON with mixed content, etc. The XHTML SHALL still conform to the rules described for the Narrative"</p>



<a name="153897614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897614">(Jul 21 2017 at 10:46)</a>:</h4>
<p>the rules for the narrative say that it is xhtml, according to the xhtml spec. So the namespace must be present, as shown in all the examples. We could make this a little more explicit in the JSON page, but it certainly must be present</p>



<a name="153897665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Narrative%20DIV%20%20tag%20with%20or%20without%20xmlns%20%3F/near/153897665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Narrative.20DIV.20.20tag.20with.20or.20without.20xmlns.20.3F.html#153897665">(Jul 21 2017 at 12:26)</a>:</h4>
<p>Yeah, that's something I should add. You can find it under <a href="https://github.com/ewoutkramer/fhir-net-api/issues/402" target="_blank" title="https://github.com/ewoutkramer/fhir-net-api/issues/402">https://github.com/ewoutkramer/fhir-net-api/issues/402</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
