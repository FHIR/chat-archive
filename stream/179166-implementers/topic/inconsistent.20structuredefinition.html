---
layout: page
title: "FHIR Chat  · inconsistent structuredefinition · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html">inconsistent structuredefinition</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153983876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153983876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153983876">(Aug 08 2018 at 21:34)</a>:</h4>
<p>hello, looking at the raw structure definition for <a href="http://hl7.org/fhir/StructureDefinition/observation-geneticsDNASequenceVariantName" target="_blank" title="http://hl7.org/fhir/StructureDefinition/observation-geneticsDNASequenceVariantName">http://hl7.org/fhir/StructureDefinition/observation-geneticsDNASequenceVariantName</a>, I noticed that in the snapshot, it lists Extension.extension as having max="*", but in the differential it has Extension.extension with max="0".  What's the story there?</p>



<a name="153983885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153983885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153983885">(Aug 08 2018 at 21:41)</a>:</h4>
<p>sounds like more problems in the snapshot generator</p>



<a name="153983894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153983894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153983894">(Aug 08 2018 at 21:47)</a>:</h4>
<p>yeah I assumed it was a bug - I'm working on codegen for profiles and not sure how to handle cases where the snapshot and diff are inconsistent.  Is that something that can get updated?</p>



<a name="153983897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153983897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153983897">(Aug 08 2018 at 21:48)</a>:</h4>
<p>well, I will certainly fix it for R4. There's also an outstanding request for me to regenerate the R3 snapshots, but that's pretty scary... it's a great deal of work, and what's the QA process?</p>



<a name="153983901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153983901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153983901">(Aug 08 2018 at 21:51)</a>:</h4>
<p>I imagine the QA process would be a validator that makes sure all fields in elements in the diff match those fields in those elements in the snapshot</p>



<a name="153983905"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153983905" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153983905">(Aug 08 2018 at 21:56)</a>:</h4>
<p>if only it were so simple</p>



<a name="153983906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153983906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153983906">(Aug 08 2018 at 22:08)</a>:</h4>
<p>Ok Thanks, sounds like best bet is to go with differential when there is a disagreement</p>



<a name="153985070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153985070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153985070">(Aug 10 2018 at 23:00)</a>:</h4>
<p>so I wrote a tool that compares structure definition differentials to the snapshots and calls out inconsistencies.  Let me know if that's something you'd be interested in taking a look at.  Most of what it found is pretty inconsequential (changed comments/definitions, or mappings that are added in differential but not present in snapshot).  Two bigger things are max number of extensions, where it looks like the differential is the correct one, and some contentReferences on profiles, where it seems that the snapshot is correct (e.g., ConsentDirective profile of Contract.term.group lists #Contract.term in the snapshot but #term in the differential)</p>



<a name="153985130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153985130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153985130">(Aug 10 2018 at 23:58)</a>:</h4>
<p>how does the tool work?</p>



<a name="153985132"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153985132" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153985132">(Aug 10 2018 at 23:58)</a>:</h4>
<p>I mean, what langauge/platform to run it?</p>



<a name="153985138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153985138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153985138">(Aug 11 2018 at 00:13)</a>:</h4>
<p>Java.  right now I'm writing it into our StructureDefinition -&gt; protobuf converter, but would be trivial to refactor into a standalone</p>



<a name="153985154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153985154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrik Sundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153985154">(Aug 11 2018 at 01:31)</a>:</h4>
<p><span class="user-mention" data-user-id="196561">@Nick George</span> , we should add a standalone binary in the github package to do these verifications. hopefully others can add more checks if we missed some.</p>



<a name="153985173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153985173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153985173">(Aug 11 2018 at 03:43)</a>:</h4>
<p>I would like to be able to run it from java code on winows/linux/osx - then I could built it into the standard build</p>



<a name="153985240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/inconsistent%20structuredefinition/near/153985240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/inconsistent.20structuredefinition.html#153985240">(Aug 11 2018 at 06:07)</a>:</h4>
<p>I think we can make that work</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
