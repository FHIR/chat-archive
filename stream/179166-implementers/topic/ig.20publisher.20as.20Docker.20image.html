---
layout: page
title: "FHIR Chat  · ig publisher as Docker image · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html">ig publisher as Docker image</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153928204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928204">(Jan 10 2018 at 05:02)</a>:</h4>
<p>Has anyone looked into running the FHIR IG publisher as a docker image? I got one built - which turned out to relatively straightforward - and was wondering if there was any general interest in sticking it in docker hub?</p>
<p>So for instance, if the publisher was dockerised to fhir/publisher then the following</p>
<p><code>docker run /home/andrew/ig:/ig  fhir/publisher</code></p>
<p>will process the implementation guide in /home/andrew/ig</p>
<p>No need to install jekyll, no dependency issues, runs the same on mac/linux/windows (in theory)</p>



<a name="153928372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928372">(Jan 11 2018 at 05:02)</a>:</h4>
<p>does it get the latest IG Publisher?</p>



<a name="153928374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928374">(Jan 11 2018 at 05:04)</a>:</h4>
<p>The publisher is baked into the docker image. So I would suggest the build process for the publisher could dockerise itself (as well as its normal publish steps) and push into dockerhub</p>



<a name="153928376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928376">(Jan 11 2018 at 05:05)</a>:</h4>
<p>But the docker images themselves are versioned - so you also fetch fhir/publisher:3.0.1 for instance</p>



<a name="153928378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928378">(Jan 11 2018 at 05:06)</a>:</h4>
<p>we don't want anything but the latest publisher to be used.</p>



<a name="153928379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928379">(Jan 11 2018 at 05:07)</a>:</h4>
<p>I guess we could push a new docker at the end of the build process, though I have no idea how that would be done</p>



<a name="153928380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928380">(Jan 11 2018 at 05:07)</a>:</h4>
<p>what CI/build server is being used?</p>



<a name="153928381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928381">(Jan 11 2018 at 05:07)</a>:</h4>
<p>we use travis. <span class="user-mention" data-user-id="191315">@Josh Mandel</span> maintains the build script</p>



<a name="153928382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928382">(Jan 11 2018 at 05:08)</a>:</h4>
<p>its pretty much <br>
docker build . -t fhir/publisher<br>
docker push fhir/publisher</p>



<a name="153928383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928383">(Jan 11 2018 at 05:09)</a>:</h4>
<p>we're just starting to use travis for our stuff so let me have a play and I'll report back how it goes - we are just having our own private docker image for the moment (mgha/fhir_publisher)</p>



<a name="153928384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928384">(Jan 11 2018 at 05:09)</a>:</h4>
<p>ok</p>



<a name="153928385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928385">(Jan 11 2018 at 05:09)</a>:</h4>
<p>thanks</p>



<a name="153928426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928426">(Jan 11 2018 at 14:34)</a>:</h4>
<p>We do run the publisher via Docker image for the automated Builder. Here's a link: <a href="https://github.com/hl7-fhir/auto-ig-builder/tree/master/images/ig-build" target="_blank" title="https://github.com/hl7-fhir/auto-ig-builder/tree/master/images/ig-build">https://github.com/hl7-fhir/auto-ig-builder/tree/master/images/ig-build</a></p>



<a name="153928427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928427">(Jan 11 2018 at 14:34)</a>:</h4>
<p>We actually don't use Travis in the IG publisher automatic builds.</p>



<a name="153928428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928428">(Jan 11 2018 at 14:35)</a>:</h4>
<p>It runs in GoogleKubernetes Engine, triggered by a GitHub webhook.</p>



<a name="153928493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928493">(Jan 11 2018 at 20:27)</a>:</h4>
<p>Andrew is talking about the main build, building a docker for the IG publisher - that's a slightly different thing. But perhaps there is enough functional overlap to only do something once</p>



<a name="153928535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928535">(Jan 11 2018 at 22:45)</a>:</h4>
<p>Yeah, perhaps I should actually be using the auto-ig-builder in which case a local version of the publisher is not needed. Once our ig has settled down I think I might do it that way. But for the moment we are doing broad changes and need to run builds locally.</p>
<p>So yes, along the lines of what has been done for ig-build but more focussed on running on local ig files bound into the container. And with the publisher.jar and all the relevant spec files etc baked into the Docker image. Then publish that Docker image itself to dockerhub. So rather than tell my team how to install jekyll etc (especially on windows) I could just get them to pull the latest image from dockerhub and it would all be setup with the latest publisher.jar, correct java and jekyll etc</p>



<a name="153928538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928538">(Jan 11 2018 at 22:51)</a>:</h4>
<p>doesn't docker = vm? wou;dn't it be better to just can a single docker and have it get the latest igpublisher?</p>



<a name="153928540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928540">(Jan 11 2018 at 22:56)</a>:</h4>
<p>Its not nearly as heavy as a vm. Whatever runs in docker is running just as a process on the host machine - but yes conceptually can be thought of like a vm - though at the end of the invocation the contents of the container are destroyed (only those files in a 'bound' filesystem are retained).</p>
<p>Getting the igpublisher dynamically is fine, but that fetch would happen on every invocation (unless the publisher too was a cacheable artifact)</p>



<a name="153928542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928542">(Jan 11 2018 at 23:03)</a>:</h4>
<p>well, you should be able to do a HEAD on it</p>



<a name="153928543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153928543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153928543">(Jan 11 2018 at 23:11)</a>:</h4>
<p>But anything that is downloaded within the docker process is thrown out, unless it is in one of the directories bound from the host filesystem. So in the way I am running it, I bind only the ig directory root itself into the container and only those files are retained after the process ends. So that means the txcache is still useful, but everything else is either baked into the image or dynamically fetched and then discarded.</p>



<a name="153929362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153929362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153929362">(Jan 17 2018 at 22:41)</a>:</h4>
<p>I'm still confused about whether we're talking about the IG publisher (what I originally thought) or the main build (which Grahame said in response to my comment).</p>



<a name="153929379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153929379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153929379">(Jan 18 2018 at 03:07)</a>:</h4>
<p>I'm suggesting that at the end of building an IG publisher jar version (is this the main build??), should be a step to build a Docker image of the publisher (and jekyll etc) and push that to dockerhub (in addition to whatever the process of building the IG publisher is currently doing, uploading the jar to a website etc)</p>



<a name="153929380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153929380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153929380">(Jan 18 2018 at 03:09)</a>:</h4>
<p>It would just be an alternative mechanism for giving people access to running the publisher (especially for those on windows machines where jekyll is a pain.. or even those who just don't normally run Ruby but who might want to run the publisher)</p>



<a name="153929381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153929381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153929381">(Jan 18 2018 at 03:09)</a>:</h4>
<p>(and by running the publisher I mean locally running the publisher - not using the remote service)</p>



<a name="153929382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153929382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153929382">(Jan 18 2018 at 03:15)</a>:</h4>
<p>as an example.. this is our current IG build process on travis - which takes advantage of a docker image we created for ourselves that includes jekyll and the ig.publisher.jar</p>
<p>before_install:<br>
  - docker login -u "$DOCKER_USERNAME" -p "$DOCKER_PASSWORD"<br>
  - docker pull mgha/fhir_publisher</p>
<p>install: true</p>
<p>script:<br>
  - cd ig; docker run -it --rm --name publish -v <code>pwd</code>:/ig mgha/fhir_publisher</p>
<p>But if I need one of our devs on a windows box to look at the IG I can get them to run that script locally and they get they equivalent result - without them needing to install anything (other than docker of course!)</p>



<a name="153937123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153937123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153937123">(Feb 13 2018 at 15:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191649">@Andrew Patterson</span>  - I found this Dockerfile that someone posted on GitHub; haven't tried it yet though (not familiar with creating Docker images):</p>
<p><a href="https://github.com/robstwd/assorted-dockerfiles/blob/master/alpine-fhir-ig-publisher/Dockerfile" target="_blank" title="https://github.com/robstwd/assorted-dockerfiles/blob/master/alpine-fhir-ig-publisher/Dockerfile">https://github.com/robstwd/assorted-dockerfiles/blob/master/alpine-fhir-ig-publisher/Dockerfile</a></p>



<a name="153937277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ig%20publisher%20as%20Docker%20image/near/153937277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ig.20publisher.20as.20Docker.20image.html#153937277">(Feb 13 2018 at 22:58)</a>:</h4>
<p>Thanks. I had cobbled one together myself - but that one with alpine is better (and smaller!).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
