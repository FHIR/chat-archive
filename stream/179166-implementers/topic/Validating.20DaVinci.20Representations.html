---
layout: page
title: "FHIR Chat  · Validating DaVinci Representations · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html">Validating DaVinci Representations</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="203204571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203204571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203204571">(Jul 07 2020 at 21:20)</a>:</h4>
<p>I have been trying to validate some sample DaVinci resource representations with limited success. I'm running into problems that I think are related to DaVinci's dependency on VhDir. Here is DaVinci's package.json file.<br>
{<br>
  "tools-version": 3,<br>
  "type": "fhir.ig",<br>
  "date": "20191024123102",<br>
  "license": "CC0-1.0",<br>
  "title": "DaVinci PDEX Plan Net",<br>
  "dependencies": {<br>
    "hl7.fhir.core": "4.0.0",<br>
    "hl7.fhir.uv.vhdir": "0.2.0"<br>
  },<br>
  "author": "HL7 Financial Management WG",<br>
  "directories": {<br>
    "lib": "package",<br>
    "example": "example"<br>
  },<br>
  "version": "0.1.0",<br>
  "name": "hl7.fhir.us.davinci-pdex-plan-net",<br>
  "url": "<a href="http://hl7.org/fhir/us/davinci-pdex-plan-net/2020Feb">http://hl7.org/fhir/us/davinci-pdex-plan-net/2020Feb</a>",<br>
  "canonical": "<a href="http://hl7.org/fhir/us/davinci-pdex-plan-net">http://hl7.org/fhir/us/davinci-pdex-plan-net</a>",<br>
  "fhirVersions": [<br>
    "4.0.0"<br>
  ]<br>
}</p>
<p>As you can see DaVinci depends on version 0.2.0 of VhDir. From what I can tell, v0.2.0 is rather old. Here is VhDir's package.json<br>
{<br>
  "type": "fhir.ig",<br>
  "license": "CC0-1.0",<br>
  "title": "Validated Healthcare Directory",<br>
  "author": "HL7 Patient Administration Committee",<br>
  "version": "0.2.0",<br>
  "name": "hl7.fhir.uv.vhdir",<br>
  "url": "<a href="http://hl7.org/fhir/uv/vhdir/2018Sep">http://hl7.org/fhir/uv/vhdir/2018Sep</a>",<br>
  "canonical": "<a href="http://hl7.org/fhir/uv/vhdir">http://hl7.org/fhir/uv/vhdir</a>",<br>
  "fhirVersions": [<br>
    "3.5.0"<br>
  ],<br>
  "tools-version": 3<br>
}</p>
<p>When I try to validate VhDir's ImplementationGuide-ig.json file I receive the following message, along with a lot more<br>
<em>FAILURE</em> validating ImplementationGuide-ig.json:  error:255 warn:0 info:252<br>
  Error @ ImplementationGuide.fhirVersion (line 1, col667) : This property must be an Array, not a a primitive property</p>
<p>I'm new-ish to FHIR, so I'm speculating here ... It seems to me that the Implementation guide probably conforms to an older specification.</p>
<p>If I change DaVinci's dependency to VhDir to "current", the Validator doesn't explode as badly. I can even get some representations to validate. </p>
<p>Changing the dependency doesn't seem like the best answer to me, but it "works". Any guidance on what I might be doing wrong is appreciated.</p>
<p>Thanks ... Charlie</p>



<a name="203210261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203210261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203210261">(Jul 07 2020 at 22:17)</a>:</h4>
<p>how are you validating it?</p>



<a name="203256466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203256466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203256466">(Jul 08 2020 at 11:29)</a>:</h4>
<p>From the command line of my Mac, I execute</p>
<p>java -jar org.hl7.fhir.validator.jar -version 4.0 PractitionerRole-practitionerrole1.json -ig hl7.fhir.us.davinci-pdex-plan-net#0.1.0</p>
<p>The Validator responds with (slightly redacted)</p>
<p>FHIR Validation tool Version 5.0.7-SNAPSHOT (Git# 6bc790d98b04). Built 2020-06-07T08:35:37.25+10:00 (31 days old)<br>
Detected Java version: 13.0.2 from /Library/Java/JavaVirtualMachines/jdk-13.0.2.jdk/Contents/Home on x86_64 (64bit). 4096MB available<br>
Arguments: -version 4.0 PractitionerRole-practitionerrole1.json -ig hl7.fhir.us.davinci-pdex-plan-net#0.1.0<br>
Directories: Current = xxx, Package Cache = ~/.fhir/packages<br>
  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1<br>
  .. connect to tx server @ <a href="http://tx.fhir.org">http://tx.fhir.org</a><br>
    (v4.0.1)</p>
<ul>
<li>.. load IG from hl7.fhir.us.davinci-pdex-plan-net#0.1.0</li>
<li>.. load IG from hl7.fhir.uv.vhdir#0.2.0</li>
<li>load file: ImplementationGuide-ig.json - ignored due to error: class com.google.gson.JsonPrimitive cannot be cast to class com.google.gson.JsonArray (com.google.gson.JsonPrimitive and com.google.gson.JsonArray are in unnamed module of loader 'app')<br>
java.lang.ClassCastException: class com.google.gson.JsonPrimitive cannot be cast to class com.google.gson.JsonArray (com.google.gson.JsonPrimitive and com.google.gson.JsonArray are in unnamed module of loader 'app')<br>
...</li>
</ul>
<p>There is only one instance of ImplementationGuide-ig.json on my machine. It is in ~/.fhir/packages/hl7.fhir.uv.vhdir#0.2.0</p>
<p>Thanks for looking into this ... Charlie</p>



<a name="203258987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203258987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203258987">(Jul 08 2020 at 12:01)</a>:</h4>
<p>this is what I get:</p>
<div class="codehilite"><pre><span></span><code>FHIR Validation tool Version 5.0.7-SNAPSHOT (Git# 6bc790d98b04). Built 2020-06-07T08:35:37.25+10:00 (31 days old)
Detected Java version: 1.8.0_251 from C:\Program Files\Java\jre1.8.0_251 on amd64 (64bit). 14526MB available
Arguments: -version 4.0 C:/work/org.hl7.fhir/build/publish/practitionerrole-example.json -ig hl7.fhir.us.davinci-pdex-plan-net#0.1.0
Directories: Current = c:\temp, Package Cache = C:\Users\graha\.fhir\packages
  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1
  .. connect to tx server @ http://tx.fhir.org
    (v4.0.1)
+  .. load IG from hl7.fhir.us.davinci-pdex-plan-net#0.1.0
  .. validate [C:/work/org.hl7.fhir/build/publish/practitionerrole-example.json]
Terminology server: Check for supported code systems for http://snomed.info/sct
Success...validating C:/work/org.hl7.fhir/build/publish/practitionerrole-example.json:  error:0 warn:0 info:1
  Information @ ?? : All OK
</code></pre></div>



<a name="203259012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203259012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203259012">(Jul 08 2020 at 12:01)</a>:</h4>
<p>and looking at the hl7.fhir.us.davinci-pdex-plan-net#0.1.0 package, I see no reason for vhdir to get in the picture.</p>



<a name="203259080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203259080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203259080">(Jul 08 2020 at 12:02)</a>:</h4>
<p>what do you have at ~/.fhir/packages/hl7.fhir.us.davinci-pdex-plan-net#0.1.0/package/package.json?</p>



<a name="203260249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203260249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203260249">(Jul 08 2020 at 12:17)</a>:</h4>
<p>{<br>
  "tools-version": 3,<br>
  "type": "fhir.ig",<br>
  "date": "20191024123102",<br>
  "license": "CC0-1.0",<br>
  "title": "DaVinci PDEX Plan Net",<br>
  "dependencies": {<br>
    "hl7.fhir.core": "4.0.0",<br>
    "hl7.fhir.uv.vhdir": "0.2.0"<br>
  },<br>
  "author": "HL7 Financial Management WG",<br>
  "directories": {<br>
    "lib": "package",<br>
    "example": "example"<br>
  },<br>
  "version": "0.1.0",<br>
  "name": "hl7.fhir.us.davinci-pdex-plan-net",<br>
  "url": "<a href="http://hl7.org/fhir/us/davinci-pdex-plan-net/2020Feb">http://hl7.org/fhir/us/davinci-pdex-plan-net/2020Feb</a>",<br>
  "canonical": "<a href="http://hl7.org/fhir/us/davinci-pdex-plan-net">http://hl7.org/fhir/us/davinci-pdex-plan-net</a>",<br>
  "fhirVersions": [<br>
    "4.0.0"<br>
  ]<br>
}</p>



<a name="203260731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203260731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203260731">(Jul 08 2020 at 12:24)</a>:</h4>
<p>ok. delete the directory ~/.fhir/packages/hl7.fhir.us.davinci-pdex-plan-net#0.1.0, then run the validator again, and then tell me what's in that file</p>



<a name="203264534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203264534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203264534">(Jul 08 2020 at 13:07)</a>:</h4>
<p>When I ran the validation, I did not specify a version for the IG, just hl7.fhir.us.davinci-pdex-plan-net. Here is the package.json<br>
{<br>
  "tools-version": 3,<br>
  "type": "fhir.ig",<br>
  "date": "20191024123102",<br>
  "license": "CC0-1.0",<br>
  "title": "DaVinci PDEX Plan Net",<br>
  "dependencies": {<br>
    "hl7.fhir.core": "4.0.0"<br>
  },<br>
  "author": "HL7 Financial Management WG",<br>
  "directories": {<br>
    "lib": "package",<br>
    "example": "example"<br>
  },<br>
  "version": "0.1.0",<br>
  "name": "hl7.fhir.us.davinci-pdex-plan-net",<br>
  "url": "<a href="http://hl7.org/fhir/us/davinci-pdex-plan-net/2020Feb">http://hl7.org/fhir/us/davinci-pdex-plan-net/2020Feb</a>",<br>
  "canonical": "<a href="http://hl7.org/fhir/us/davinci-pdex-plan-net">http://hl7.org/fhir/us/davinci-pdex-plan-net</a>",<br>
  "fhirVersions": [<br>
    "4.0.0"<br>
  ]<br>
}</p>
<p>I no longer see the dependency to VhDir, but now I see errors about extensions<br>
  Error @ PractitionerRole.extension[0] (line 14, col6) : Problem with use of resolve() - profile '[CanonicalType[http://hl7.org/fhir/uv/vhdir/StructureDefinition/newpatientprofile]]' on PractitionerRole.extension:newpatientprofile could not be resolved</p>
<p>Please tell me if I'm providing too much information here, or not enough. Like I said before, I'm fairly new to the FHIR game.</p>
<p>Thanks ... Charlie</p>



<a name="203314944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203314944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203314944">(Jul 08 2020 at 19:58)</a>:</h4>
<p>so I don't know what the vhdir thing was about.</p>



<a name="203315022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203315022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203315022">(Jul 08 2020 at 19:58)</a>:</h4>
<p>now what you report looks like a bug somewhere. can you attach the resource you are validating?</p>



<a name="203329338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203329338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203329338">(Jul 08 2020 at 22:02)</a>:</h4>
<p>I'm thinking that the 0.2.0 version of the VhDir fires are old and probably incompatible. Attached is a DaVinci PractitionerRole instance that I retrieved from the DaVinci Examples. <a href="/user_uploads/10155/QJNX6yGANerxQZk0wJB97199/PractitionerRole-practitionerrole1.json">PractitionerRole-practitionerrole1.json</a></p>



<a name="203499686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203499686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203499686">(Jul 10 2020 at 12:20)</a>:</h4>
<p>Grahame ... thank you for your help with this. Do you know who I can talk to about CARIN's Implementation Guide? I suspect that version 0.2.0 is built on old standards, or is otherwise broken in some way.</p>



<a name="203508806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203508806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203508806">(Jul 10 2020 at 13:52)</a>:</h4>
<p>There is a <a class="stream" data-stream-id="204607" href="/#narrow/stream/204607-CARIN-Blue-Button-IG">#CARIN Blue Button IG</a> channel</p>



<a name="203536242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20DaVinci%20Representations/near/203536242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20DaVinci.20Representations.html#203536242">(Jul 10 2020 at 17:36)</a>:</h4>
<p>Thanks Michele!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
