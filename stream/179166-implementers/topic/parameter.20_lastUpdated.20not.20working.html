---
layout: page
title: "FHIR Chat  · parameter _lastUpdated not working · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/parameter.20_lastUpdated.20not.20working.html">parameter _lastUpdated not working</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="237217131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/parameter%20_lastUpdated%20not%20working/near/237217131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/parameter.20_lastUpdated.20not.20working.html#237217131">(May 03 2021 at 19:41)</a>:</h4>
<p>Hi All, <br>
We are using a query to search Organizations role=OUTPHARM&amp;telecom-fax%3Aexact=4859414204&amp;_lastUpdated=gt2021-04-30T00:12:23. We are facing a strange Issue where the search doesnt work if its midnight. I am attaching the logs as well. </p>
<p>2021-05-03 18:17:46.883 +0000 ERROR          [         http-nio-8010-exec-10] [f.r.s.interceptor.ExceptionHandlingInterceptor:140]  Failure during REST processing { req.uuid=1234567890 } <br>
ca.uhn.fhir.rest.server.exceptions.InternalErrorException: Failed to call access method: java.lang.IllegalArgumentException: can't parse argument number: _lastUpdated</p>
<p><a href="/user_uploads/10155/eb6L5ZJP-bdSCYqjSmDPd6M9/ErrorLogs.txt">ErrorLogs.txt</a> </p>
<p>Do we have a fix for this  and Is this  a known Issue ?</p>
<p>Thanks</p>



<a name="237217661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/parameter%20_lastUpdated%20not%20working/near/237217661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/parameter.20_lastUpdated.20not.20working.html#237217661">(May 03 2021 at 19:45)</a>:</h4>
<p>Is this a question for a specific server developer? Your logs suggest you're working with <a href="https://www.telus.com/en/partner/our-solutions/digital-health/health-exchange-international">https://www.telus.com/en/partner/our-solutions/digital-health/health-exchange-international</a> -- so this would be a question for them</p>



<a name="237218022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/parameter%20_lastUpdated%20not%20working/near/237218022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/parameter.20_lastUpdated.20not.20working.html#237218022">(May 03 2021 at 19:47)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191319">@James Agnew</span>  can you please help me in this regard</p>



<a name="237222883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/parameter%20_lastUpdated%20not%20working/near/237222883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/parameter.20_lastUpdated.20not.20working.html#237222883">(May 03 2021 at 20:23)</a>:</h4>
<p>The public HAPI server does not have a problem with your date: <br>
<a href="http://hapi.fhir.org/baseR4/Patient?_lastUpdated=gt2030-04-30T00:12:23">http://hapi.fhir.org/baseR4/Patient?_lastUpdated=gt2030-04-30T00:12:23</a><br>
(note: I changed the year so people would not hammer the server with large results). <br>
This  error message :<br>
Caused by: java.lang.NumberFormatException: For input string: "_lastUpdated" <br>
suggests the server is trying to interpret the word "_lastUpdated" as a number. <br>
I would try desconstructing your query piece by piece. Try it first just against lastUpdated, then add the other params. I suspect you have some bad syntax or there is a URL-escaping problem somewhere.</p>
<p>edit to add: I notice you are escaping the colon before :exact, but not the colons in the date - could be something else to look at.</p>



<a name="237228961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/parameter%20_lastUpdated%20not%20working/near/237228961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramandeep <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/parameter.20_lastUpdated.20not.20working.html#237228961">(May 03 2021 at 21:03)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="193261">@craig mcclendon</span> : I will  try to fix it as per your suggestion, I will update how it goes.</p>



<a name="237234153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/parameter%20_lastUpdated%20not%20working/near/237234153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/parameter.20_lastUpdated.20not.20working.html#237234153">(May 03 2021 at 21:25)</a>:</h4>
<p>FWIW, I'd say this is the relevant bit of your stack trace:</p>
<div class="codehilite"><pre><span></span><code>Caused by: java.lang.IllegalArgumentException: can&#39;t parse argument number: _lastUpdated
    at java.text.MessageFormat.makeFormat(MessageFormat.java:1429)
    at java.text.MessageFormat.applyPattern(MessageFormat.java:479)
    at java.text.MessageFormat.&lt;init&gt;(MessageFormat.java:380)
    at org.springframework.context.support.MessageSourceSupport.createMessageFormat(MessageSourceSupport.java:159)
    at org.springframework.context.support.ReloadableResourceBundleMessageSource$PropertiesHolder.getMessageFormat(ReloadableResourceBundleMessageSource.java:616)
    at org.springframework.context.support.ReloadableResourceBundleMessageSource.resolveCode(ReloadableResourceBundleMessageSource.java:206)
    at org.springframework.context.support.AbstractMessageSource.getMessageInternal(AbstractMessageSource.java:221)
    at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:136)
    at com.telushealth.exchange.cs.common.spring.messages.Messages.getMessage(Messages.java:115)
    at com.telushealth.exchange.cs.common.hapi.OperationOutcomeBuilder.getMessageDefaultEmpty(OperationOutcomeBuilder.java:262)
    at com.telushealth.exchange.cs.common.hapi.OperationOutcomeBuilder.createOperationOutcome(OperationOutcomeBuilder.java:129)
    at com.telushealth.exchange.cs.tprcacheservice.handler.FhirOperationOutcomeBuilder.createOperationOutcome(FhirOperationOutcomeBuilder.java:45)
    at com.telushealth.exchange.cs.tprcacheservice.controller.OrganizationController.searchOrganizationsForBulkSyncWithFaxNumber(OrganizationController.java:287)
</code></pre></div>
<p>For what it's worth, my own approach to debugging this would be to put a breakpoint at <code>MessageFormat.java : 1429</code> and then walk down the stack when you hit it. That message looks like a malformed message format object or something like that. It doesn't appear to be coming from HAPI though.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
