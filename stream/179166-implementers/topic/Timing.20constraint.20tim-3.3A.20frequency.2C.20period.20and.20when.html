---
layout: page
title: "FHIR Chat  · Timing constraint tim-3: frequency, period and when · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20constraint.20tim-3.3A.20frequency.2C.20period.20and.20when.html">Timing constraint tim-3: frequency, period and when</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153865193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20constraint%20tim-3%3A%20frequency%2C%20period%20and%20when/near/153865193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mustafa Yuksel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20constraint.20tim-3.3A.20frequency.2C.20period.20and.20when.html#153865193">(Jan 02 2017 at 12:15)</a>:</h4>
<p>Copying Timing constraint tim-3: </p>
<blockquote>
<p>On Timing.repeat: Either frequency or when can exist, not both (expression on Timing.repeat: ((period or frequency) and when).not())</p>
</blockquote>
<p>This constraint creates some problems on our side, because it does not allow quite simple statements like "once a week in the morning", or "twice a day, (30 minutes) before meals". In fact, this constraint invalidates the following 3 timing examples at <a href="http://build.fhir.org/datatypes.html#Timing" target="_blank" title="http://build.fhir.org/datatypes.html#Timing">http://build.fhir.org/datatypes.html#Timing</a> when they are implemented as shown on the table:</p>
<ul>
<li>1 tablet 3 times daily, 30 minutes before meals -&gt; this can be handled by using when and offset only</li>
<li>BID, 30 mins before meal, for next 10 days -&gt; it is not possible to express this, as aligning with meal normally implies 3 major meals in <a href="http://hl7.org/fhir/event-timing" target="_blank" title="http://hl7.org/fhir/event-timing">http://hl7.org/fhir/event-timing</a> while BID means twice a day</li>
<li>Mon, Wed, Fri Morning -&gt; this can be handled by using dayOfWeek and when only</li>
</ul>
<p>Would it be possible to relax or remove this constraint? </p>
<p>Secondly, although the constraint verbally states that frequency and when cannot exist at the same time, the expression in the parenthesis does not allow period with when either. It is implemented this way in HL7 validator and in some public servers as well (e.g. Grahame's). Well, of course period implies frequency and vice versa by definition ("Event occurs frequency times per period"), but I think it would be better if a separate constraint is introduced for that if that is absolutely necessary. </p>



<a name="153865200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20constraint%20tim-3%3A%20frequency%2C%20period%20and%20when/near/153865200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20constraint.20tim-3.3A.20frequency.2C.20period.20and.20when.html#153865200">(Jan 02 2017 at 16:50)</a>:</h4>
<p>this has come up before. What if you said, every hour before meals?</p>



<a name="153865201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20constraint%20tim-3%3A%20frequency%2C%20period%20and%20when/near/153865201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20constraint.20tim-3.3A.20frequency.2C.20period.20and.20when.html#153865201">(Jan 02 2017 at 16:57)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12460" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12460">GF#12460</a></p>



<a name="153865202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20constraint%20tim-3%3A%20frequency%2C%20period%20and%20when/near/153865202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20constraint.20tim-3.3A.20frequency.2C.20period.20and.20when.html#153865202">(Jan 02 2017 at 16:58)</a>:</h4>
<p>Then you'd have a non-sensical timing - just is if you said 20mg 2-4 times a day to a maximum of 10mg/day.  I'm not sure we should prevent saying useful things on the premise that sometimes people might say nonsensical things . . .</p>



<a name="153865203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20constraint%20tim-3%3A%20frequency%2C%20period%20and%20when/near/153865203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20constraint.20tim-3.3A.20frequency.2C.20period.20and.20when.html#153865203">(Jan 02 2017 at 16:59)</a>:</h4>
<p>no we shouldn't. Question is whether that task shoud be deferred - I think not</p>



<a name="153865217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20constraint%20tim-3%3A%20frequency%2C%20period%20and%20when/near/153865217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Melva Peters <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20constraint.20tim-3.3A.20frequency.2C.20period.20and.20when.html#153865217">(Jan 02 2017 at 20:53)</a>:</h4>
<p>Agree, this should be fixed for this release.</p>



<a name="153865223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20constraint%20tim-3%3A%20frequency%2C%20period%20and%20when/near/153865223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20constraint.20tim-3.3A.20frequency.2C.20period.20and.20when.html#153865223">(Jan 02 2017 at 22:17)</a>:</h4>
<p>I undeferred it</p>



<a name="153865233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20constraint%20tim-3%3A%20frequency%2C%20period%20and%20when/near/153865233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mustafa Yuksel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20constraint.20tim-3.3A.20frequency.2C.20period.20and.20when.html#153865233">(Jan 03 2017 at 06:46)</a>:</h4>
<p>Thanks. I have read the forge tracker item. It is a quite similar issue with "timeOfDay" and "dayOfWeek", but not exactly the same with our problem with "when". Therefore I issued a follow-up in forge.</p>



<a name="153866023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20constraint%20tim-3%3A%20frequency%2C%20period%20and%20when/near/153866023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20constraint.20tim-3.3A.20frequency.2C.20period.20and.20when.html#153866023">(Jan 08 2017 at 19:51)</a>:</h4>
<p>I ran into a  similar problem for nutrition orders like " give this protein supplement at 12 and 4 and before bed."  The contstraint makes it so you need multiple timings to mix n match 'whens' with frequency.  So I support removing the constraint.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
