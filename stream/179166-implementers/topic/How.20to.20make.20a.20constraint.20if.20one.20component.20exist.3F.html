---
layout: page
title: "FHIR Chat  · How to make a constraint if one component exist? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20make.20a.20constraint.20if.20one.20component.20exist.3F.html">How to make a constraint if one component exist?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="263980202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20make%20a%20constraint%20if%20one%20component%20exist%3F/near/263980202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashwin Djorai <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20make.20a.20constraint.20if.20one.20component.20exist.3F.html#263980202">(Dec 07 2021 at 10:10)</a>:</h4>
<p>I have 3 component slices in my Observation resource. I want to add a constraint in my profile. This is my constraint name:</p>
<p>If one of the component codes is present, all SHALL be present.</p>
<p>I have created an expression in the following way:</p>
<p><strong>( component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.5').empty() and component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.4').empty() and component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.3').empty() ) or ( component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.5').exists() and component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.4').exists() and component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.3').exists() )</strong></p>
<p>This works for my use case, but is there a better way to create this expression?</p>



<a name="264007314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20make%20a%20constraint%20if%20one%20component%20exist%3F/near/264007314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20make.20a.20constraint.20if.20one.20component.20exist.3F.html#264007314">(Dec 07 2021 at 14:18)</a>:</h4>
<p>I think you could do<br>
<code>component.code.coding.where(system='...').where(code='4.6.5' or code='4.6.4' or code='4.6.3').empty() or component.code.coding.where(system='...').where(code='4.6.5' or code='4.6.4' or code='4.6.3').code().distinct().count()=3</code></p>



<a name="264135390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20make%20a%20constraint%20if%20one%20component%20exist%3F/near/264135390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashwin Djorai <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20make.20a.20constraint.20if.20one.20component.20exist.3F.html#264135390">(Dec 08 2021 at 10:17)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> I will test this and let know you the results</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
