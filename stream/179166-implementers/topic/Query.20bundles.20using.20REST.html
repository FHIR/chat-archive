---
layout: page
title: "FHIR Chat  · Query bundles using REST · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html">Query bundles using REST</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153943016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/153943016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#153943016">(Mar 08 2018 at 16:22)</a>:</h4>
<p>I have been tasked with looking at how or if it is possible to query bundles that have been stored in a central location and return all matching bundles within a searchset bundle. The stored bundles have not been processed in any way and retain their original structure, which consists of multiple FHIR resources.<br>
One of the resources is MessageHeader which identifies the 'type'  of data it contains, in addition to the Patient resource. Together these would form the search parameters, which I'd like to use to identify any matching bundles.  There are additional parameters that need to be added, but I'd like to know if what is being asked is possible before expanding search parameters. I'm hoping this can be done using REST, but I've never seen this type of search performed, since most bundles are used as a wrapper and not stored.</p>
<p>One of the concerns I have, if this is possible to do in the first place, is the amount of processing that such a search will need to do, having to search down what could be 1000's of bundles, identify matching records and then returning these back to the client.</p>
<p>Any advice/guidance would be appreciated.</p>
<p>Dave</p>



<a name="153943018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/153943018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#153943018">(Mar 08 2018 at 16:31)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193699">@Dave Henderson</span>, maybe the central server could index the bundles? This would allow you to optimize search speed, by resolving searches from the index tables.</p>



<a name="153943025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/153943025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#153943025">(Mar 08 2018 at 16:34)</a>:</h4>
<p>There is a standard search criteria for Bundle allowing you to chain to the MessageHeader and from there you can filter on MessageHeader elements.  It's up to a server whether it supports such chaining and, if so, to what elements.  However, if it does, then it will presumably index the Bundle accordingly, so the search should perform fairly well.</p>



<a name="153943050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/153943050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#153943050">(Mar 08 2018 at 16:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Can you point me to the FHIR documentation for this. I've trawled through it trying to find some guidance on searching bundles, but was unable to locate anything useful. Thanks</p>



<a name="153943051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/153943051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#153943051">(Mar 08 2018 at 16:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span>  If FHIR has its own indexing and search fucntions as <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> has indicated then this could be the answer.</p>



<a name="153943053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/153943053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#153943053">(Mar 08 2018 at 16:50)</a>:</h4>
<p>FHIR only defines the API, not the actual implementation. However a smart FHIR Server implementation (such as Vonk) would definitely build indexes for known search parameters.</p>



<a name="153943086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/153943086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#153943086">(Mar 08 2018 at 17:36)</a>:</h4>
<p>Search parameters for Bundle are here: <a href="http://hl7.org/fhir/bundle.html#search" target="_blank" title="http://hl7.org/fhir/bundle.html#search">http://hl7.org/fhir/bundle.html#search</a><br>
Search parameters for Message are here: <a href="http://hl7.org/fhir/messageheader.html#search" target="_blank" title="http://hl7.org/fhir/messageheader.html#search">http://hl7.org/fhir/messageheader.html#search</a><br>
Discussion on chaining is here: <a href="http://hl7.org/fhir/search.html#chaining" target="_blank" title="http://hl7.org/fhir/search.html#chaining">http://hl7.org/fhir/search.html#chaining</a><br>
Example: <code>GET [baseUrl]/Bundle?message.focus:Encounter.subject:Patient.identifier=[your MRN here]&amp;message.timestamp=ge2017&amp;message.timestamp=lt2018</code><br>
That'll give you all messages that have a focus that's an encounter whose subject is a Patient with the identifier specified and that were sent in 2017.</p>



<a name="153943142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/153943142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#153943142">(Mar 08 2018 at 22:44)</a>:</h4>
<p>Thanks guys. I've used Vonk quite a bit so I'll do some test runs using the example and look at the links provided for background information. Much appreciated.</p>



<a name="153947247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/153947247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#153947247">(Mar 22 2018 at 15:31)</a>:</h4>
<p>A warning though: exactly this type of searchparameter (Bundle.composition and Bundle.message, that chain into one of the Bundle entries) are not yet supported by Vonk. It's on the roadmap to add this sometime in the next few months.</p>



<a name="179254907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/179254907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Hatherly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#179254907">(Oct 28 2019 at 17:32)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> - has this functionality been added in Vonk since this thread? I'm interested in potentially using this in Vonk, but I'm testing a few queries with the current version and am not getting any results back for these types of queries.</p>



<a name="179311755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/179311755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#179311755">(Oct 29 2019 at 09:21)</a>:</h4>
<p>Hi Adam, thanks for asking! I am sorry to say we haven't yet. Since you are the first person actually asking for it, that helps in prioritizing! If others need this type of search (chaining into Bundle entries), please let me know!</p>



<a name="179913830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/179913830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#179913830">(Nov 05 2019 at 09:18)</a>:</h4>
<p>hi I am new here. I have questions regarding REST FHIR server</p>



<a name="179913964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/179913964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Keerthivasan Ramanathan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#179913964">(Nov 05 2019 at 09:20)</a>:</h4>
<p>This is the use case, i am working on now..<br>
For a group of patients, get most recent specific Lab result (A1C, Lipid panel)</p>
<p>I believe that the Response would be a bundle of Observation resource. How can a search query can contain references to multiple patients or group of patients? Can someone guide me?</p>



<a name="179932451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/179932451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#179932451">(Nov 05 2019 at 13:44)</a>:</h4>
<p>Querying for data across patients is pretty easy (though not all servers will support it).  If you just do a search and filter only by Observation type, you'll get all Observations of those types for all patients.  In R5, there'll be a parameter that lets you filter for subjects that are 'in' a Group.  The hard part about what you're asking for is "most recent per type per patient".  That mirror's SQL's "group by" mechanism - and RESTful search doesn't currently have any equivalent.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, could this be done with GraphQL?</p>



<a name="179975490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Query%20bundles%20using%20REST/near/179975490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Query.20bundles.20using.20REST.html#179975490">(Nov 05 2019 at 20:45)</a>:</h4>
<p>maybe. This sounds like $lastn space to me</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
