---
layout: page
title: "FHIR Chat  · Searching by extension value · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html">Searching by extension value</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153862354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Broadbent <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862354">(Dec 08 2016 at 16:06)</a>:</h4>
<p>Hi all,  I'm currently looking into filtering our searching on a HAPI backend.  Most of our data consists of custom resource types which I have implemented as profiles on Basic via adding extension to them.  I'm just wondering what the form of the url would be to search for resources which have an extension of a given value.</p>



<a name="153862355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Broadbent <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862355">(Dec 08 2016 at 16:08)</a>:</h4>
<p>As an example. I have a profile which captures instances of cars passing through speed traps.  It defines that it has the extension 'speed' which contains 'valueFloat' and the extension 'registration' which contains 'valueString'.  How would I search for all resources where speed is greater than 30.0 in HAPI?</p>



<a name="153862358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862358">(Dec 08 2016 at 16:17)</a>:</h4>
<p>You would define your own SearchParameter instances and declare that you support those in your Conformance / CapabilityStatement</p>



<a name="153862364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Broadbent <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862364">(Dec 08 2016 at 16:55)</a>:</h4>
<p>Are SearchParameters something defined in the fhir spec, or are they just part of HAPI?  I can't seem to find anything in the documentation specifically showing how to declare them.  I was also wondering if defining and using them is something that can be done in data/through the rest api, or does it require specific implementation and recompiling the backend?  The issue I'm having is that we're trying to create a system where end users can effectively define their own resource type, as we can't possibly know all the different kinds of data that they will input.</p>



<a name="153862365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862365">(Dec 08 2016 at 17:01)</a>:</h4>
<p>SearchParameter is a resource like any other.  If you have a question about how custom search parameters are supported by HAPI, that's probably best asked on the HAPI stream</p>



<a name="153862366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Broadbent <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862366">(Dec 08 2016 at 17:07)</a>:</h4>
<p>Ok no problem.  Is the HAPI stream hosted somewhere else?  Their site links to here, and there's only 3 streams listed here.</p>



<a name="153862374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862374">(Dec 08 2016 at 18:20)</a>:</h4>
<p>You may need to click on the settings gear in the left-hand streams list, where you should see HAPI.</p>



<a name="153862390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862390">(Dec 08 2016 at 19:15)</a>:</h4>
<p>you should also look at the example in the spec for this:</p>



<a name="153862391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862391">(Dec 08 2016 at 19:16)</a>:</h4>
<p><a href="http://build.fhir.org/searchparameter-example-extension.html" target="_blank" title="http://build.fhir.org/searchparameter-example-extension.html">http://build.fhir.org/searchparameter-example-extension.html</a></p>



<a name="153862393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862393">(Dec 08 2016 at 19:19)</a>:</h4>
<p>p.s. "a profile which captures instances of cars passing through speed traps" - doesn't really sound much like healthcare to me? Is this a side use, or is your primary application outside healthcare? and if so, why use FHIR?</p>



<a name="153862662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Broadbent <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862662">(Dec 09 2016 at 09:51)</a>:</h4>
<p>Thanks I'll take a look.  As for the example; it was just the simplest example I could think of that I knew wouldn't be related to any of the existing profiles.  The problem that I have is that I'm trying to port a legacy system and it's data to forge.  In that system users can develop analogue to resource types within there data; i.e. one user creates a type called 'Patient' and then all other users try to map their patient data on to that type.</p>



<a name="153862663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153862663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Broadbent <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153862663">(Dec 09 2016 at 09:53)</a>:</h4>
<p>I'm having difficulty using the existing fhir analogues to our types because there is large number of them in the legacy system, and I can't linearly map the values, so developing a script to do it requires a lot of special cases.  My work around has been to develop a profile on basic for each of our types, and emulate the ability to create your own resource types.  I just wanted to avoid people suggesting that I use the existing resource types as, although I intend to, the first pass will be done in this more clunky way as a proof of concept.</p>



<a name="153895973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153895973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xin Liu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153895973">(Jul 03 2017 at 19:35)</a>:</h4>
<p>I wonder if we are able to search resource by providing extension value in the GET url endpoint.</p>



<a name="153895974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153895974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153895974">(Jul 03 2017 at 19:51)</a>:</h4>
<p>see <a href="http://hl7.org/fhir/searchparameter.html#srch" target="_blank" title="http://hl7.org/fhir/searchparameter.html#srch">http://hl7.org/fhir/searchparameter.html#srch</a></p>



<a name="153896101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153896101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xin Liu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153896101">(Jul 05 2017 at 17:26)</a>:</h4>
<p>Thank you so much for your reply. But do you have a realistic example so that I can know better. For example if I want to search all the Observation resource with gene name TPMT, and this gene name is stored in the observation-geneticsGene profile extension. What will the url endpoint look like by using the Restful GET.</p>



<a name="153896107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153896107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153896107">(Jul 05 2017 at 18:33)</a>:</h4>
<p>To search by an extension, you'll need to define a custom SearchParameter and declare it in your CapabilityStatement.  The name of that parameter is up to you.  So your query would look like this:<br>
. . .<br>
GET [base]/Observation?some-custom-search-name=TPMT<br>
. . .</p>



<a name="153896108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153896108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153896108">(Jul 05 2017 at 18:33)</a>:</h4>
<p>(Assuming that gene name is a string or that the code system is fixed)</p>



<a name="153896135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153896135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153896135">(Jul 05 2017 at 20:25)</a>:</h4>
<p>There is an example in USCore for  a search parameter on the Patient extension Race <a href="http://hl7.org/fhir/us/core/SearchParameter-us-core-race.html" target="_blank" title="http://hl7.org/fhir/us/core/SearchParameter-us-core-race.html">here</a></p>



<a name="153896140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153896140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153896140">(Jul 05 2017 at 20:30)</a>:</h4>
<p>(Which I should update to include the fhirpath)  <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13605" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13605">GF#13605</a></p>



<a name="153896180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153896180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153896180">(Jul 06 2017 at 09:15)</a>:</h4>
<p>there is no single answer right now for that extension because we do not define a common search parameter for it </p>



<a name="153896217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153896217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xin Liu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153896217">(Jul 06 2017 at 15:56)</a>:</h4>
<p>I am using the SearchParamDefinition class to create the customer parameter, and there are some example to show how to use to to create the parameter for the resource field, but I cannot get an example for creating the extension parameter. I wonder if I can include the extension.url within the SearchParamDefinition class. If so, where should I place the url to? should I put into the path field of the class?</p>



<a name="153896225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153896225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153896225">(Jul 06 2017 at 16:17)</a>:</h4>
<p>That would be in the xpath</p>



<a name="153896228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153896228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xin Liu <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153896228">(Jul 06 2017 at 16:26)</a>:</h4>
<p>But SearchParamDefinition only have path method, not the xpath. I wonder what format that should look like.</p>



<a name="153896230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153896230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153896230">(Jul 06 2017 at 16:46)</a>:</h4>
<p>Are you using STU3?  I see it clearly here: <a href="http://hl7.org/fhir/searchparameter.html#resource" target="_blank" title="http://hl7.org/fhir/searchparameter.html#resource">http://hl7.org/fhir/searchparameter.html#resource</a></p>



<a name="153896233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20by%20extension%20value/near/153896233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20by.20extension.20value.html#153896233">(Jul 06 2017 at 16:48)</a>:</h4>
<p>is in current build too?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
