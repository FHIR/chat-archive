---
layout: page
title: "FHIR Chat  · FHIRPath id or extension reference expression · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20id.20or.20extension.20reference.20expression.html">FHIRPath id or extension reference expression</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="267488636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20id%20or%20extension%20reference%20expression/near/267488636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20id.20or.20extension.20reference.20expression.html#267488636">(Jan 10 2022 at 19:35)</a>:</h4>
<p>Anyone know how to construct FHIRPath that returns either<br>
<code>extension[url = "some-extension-url"].valueReference.reference</code><br>
or<br>
<code>id</code><br>
if the extension is not found?</p>



<a name="267488752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20id%20or%20extension%20reference%20expression/near/267488752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20id.20or.20extension.20reference.20expression.html#267488752">(Jan 10 2022 at 19:36)</a>:</h4>
<p>in XPath it might be something like:<br>
<code>fhir:extension[@url = 'some-extension-url']/fhir:valueReference/fhir:reference/@value | fhir:id/@value</code></p>



<a name="267489623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20id%20or%20extension%20reference%20expression/near/267489623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20id.20or.20extension.20reference.20expression.html#267489623">(Jan 10 2022 at 19:44)</a>:</h4>
<p>actually, this is more like it:</p>
<div class="codehilite"><pre><span></span><code>if (fhir:extension[@url = &#39;...&#39;]) then fhir:extension[@url = &#39;...&#39;]/fhir:valueReference/fhir:reference/@value else fhir:id/@value
</code></pre></div>



<a name="267497889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20id%20or%20extension%20reference%20expression/near/267497889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20id.20or.20extension.20reference.20expression.html#267497889">(Jan 10 2022 at 20:52)</a>:</h4>
<p><a href="https://sqlonfhir-r4.azurewebsites.net/fhir/Patient/example/$extract?expression=Patient.birthDate.select(iif(extension(%27http://hl7.org/fhir/StructureDefinition/patient-birthTime%27).exists(),%20extension,id))">https://sqlonfhir-r4.azurewebsites.net/fhir/Patient/example/$extract?expression=Patient.birthDate.select(iif(extension(%27http://hl7.org/fhir/StructureDefinition/patient-birthTime%27).exists(),%20extension,id))</a></p>



<a name="267502255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20id%20or%20extension%20reference%20expression/near/267502255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20id.20or.20extension.20reference.20expression.html#267502255">(Jan 10 2022 at 21:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> this is great. this will get me most of the way there.<br>
Can you tell me, how did you efficiently test this FHIRPath? With XPath, I would open up OxygenXML and pull up the XPath Builder... but, not sure of a good/efficient way to test FHIRPath like this against a HAPI server\</p>



<a name="267502550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20id%20or%20extension%20reference%20expression/near/267502550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20id.20or.20extension.20reference.20expression.html#267502550">(Jan 10 2022 at 21:27)</a>:</h4>
<p>HAPI also has a similar operation too.<br>
James pointed that out in a topic only in the last few days...<br>
<a href="http://hapi.fhir.org/baseR4/Observation/1574881?_fhirpath=Observation.component.where(code.coding.code%20=%20%278462-4%27).value">http://hapi.fhir.org/baseR4/Observation/1574881?_fhirpath=Observation.component.where(code.coding.code%20=%20%278462-4%27).value</a></p>



<a name="267502579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20id%20or%20extension%20reference%20expression/near/267502579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20id.20or.20extension.20reference.20expression.html#267502579">(Jan 10 2022 at 21:27)</a>:</h4>
<p>And I also use my fhirpath tester tool which is in the windows app store.</p>



<a name="267593379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20id%20or%20extension%20reference%20expression/near/267593379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20id.20or.20extension.20reference.20expression.html#267593379">(Jan 11 2022 at 15:00)</a>:</h4>
<p>Between the HAPI <code>_fhirpath</code>, the FHIRPath Tester tool, and your example <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>... I got what I needed. Thanks so much!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
