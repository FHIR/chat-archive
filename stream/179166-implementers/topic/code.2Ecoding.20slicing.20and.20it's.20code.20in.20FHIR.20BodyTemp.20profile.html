---
layout: page
title: "FHIR Chat  · code.coding slicing and it&#x27;s code in FHIR BodyTemp profile · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html">code.coding slicing and it&#x27;s code in FHIR BodyTemp profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153910934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153910934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pauli Koskinen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153910934">(Sep 27 2017 at 10:09)</a>:</h4>
<p>BodyTemp profile <a href="http://hl7.org/fhir/bodytemp.html#10.1.19.32" target="_blank" title="http://hl7.org/fhir/bodytemp.html#10.1.19.32">http://hl7.org/fhir/bodytemp.html#10.1.19.32</a> has code.coding sliced with discriminator value:code and it is Open. Coding has cardinality of 0..*. It has one slide with fixed LOINC code 8310-5.<br>
Loinc has multiple codes for temperature; <a href="https://r.details.loinc.org/LOINC/75965-4.html?sections=Comprehensive" target="_blank" title="https://r.details.loinc.org/LOINC/75965-4.html?sections=Comprehensive">https://r.details.loinc.org/LOINC/75965-4.html?sections=Comprehensive</a> .<br>
Specification says 'Other additional codes are allowed - e.g. more specific LOINC Codes'<br>
One slice with fixed code prevents use of more specific LOINC code.<br>
Obviously FHIR bodytemp profile can not be use directly to store specific codes in resources. How should it be used?</p>
<p>In our case we would like to make slice with code 8310-5 mandatory, and slice with specific code optional (for example oral temperature).  Should we create an additional slice to our own profile, with cardinality 0..1 and no fixed code? <br>
There is extensible valueset binding to fhir/valueset-observation-vitalsignresult in observation.code level, but we would like to have required binding to own valueset listing acceptable codes. Is this recommended way to handle more specific codes in our profile?</p>



<a name="153911006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911006">(Sep 27 2017 at 14:49)</a>:</h4>
<p>I'd recommend submitting a change request.  The body temperature profile <em>should</em> slice by both system and code.  That way you can have alternate codes from other code systems.  If you have a specific value set of additional codes, you can define a slice that has that required binding and the slicing should work.</p>



<a name="153911007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911007">(Sep 27 2017 at 14:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> Do you agree on not fixing to LOINC?</p>



<a name="153911032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911032">(Sep 27 2017 at 15:35)</a>:</h4>
<p>Its sliced that way to allow other codes.  The binding is extensible to allow other codes (LOINC, SNOMED, Local or whatever) as translations ( additional codings)  The value set is not limited to a single code system and can be extended to other code systems.  I am not sure what benefit is gained by slicing by system.</p>



<a name="153911033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911033">(Sep 27 2017 at 15:37)</a>:</h4>
<p>The only collisions would occur in the unlikely event of identical codes from system a and system b</p>



<a name="153911034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911034">(Sep 27 2017 at 15:39)</a>:</h4>
<p>and  I'm not imagining a lot of translations  typically 2 or 3.  "magic value" LOINC,  more specific LOINC or SNOMED, and local code</p>



<a name="153911059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911059">(Sep 27 2017 at 20:26)</a>:</h4>
<p>Sorry.  I had read that LOINC was a fixed value because you were only slicing by code, not system.  You probably should specify both as the discriminator as there could be a need for multiple codes with the same value from different systems.</p>



<a name="153911060"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911060" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911060">(Sep 27 2017 at 20:29)</a>:</h4>
<p>I think that would be extremely rare but I will update for R4</p>



<a name="153911063"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911063" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911063">(Sep 27 2017 at 20:33)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13964" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13964">GF#13964</a></p>



<a name="153911112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911112">(Sep 27 2017 at 22:54)</a>:</h4>
<p>I've noticed that U.S. Core takes a slightly different approach.  For example, consider their smokingstatus profile (<a href="http://hl7.org/fhir/us/core/StructureDefinition-us-core-smokingstatus.html" target="_blank" title="http://hl7.org/fhir/us/core/StructureDefinition-us-core-smokingstatus.html">http://hl7.org/fhir/us/core/StructureDefinition-us-core-smokingstatus.html</a>).  In this profile, rather than slicing on code.coding, they simply apply a patternCodeableConcept.</p>
<p>Is there a tangible difference here?  Based on my understanding of pattern[x], it also allows for additional values -- so it seems like it is accomplishing the same goal.  Is there a preferred approach?  Are there use cases that would call for one and not the other?</p>



<a name="153911118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911118">(Sep 27 2017 at 23:29)</a>:</h4>
<p>simple answer is that there were multiple profile authors and the profiles were created at different times as the discriminators and tooling was undergoing development.  Hence the variations.  Discriminator on code and system is the same a on  pattern {"coding":[{"system":"[sytem]","code":"[code]"}]}  However there is this little nugget  from the pattern <a href="http://build.fhir.org/elementdefinition-definitions.html#ElementDefinition.pattern_x_" target="_blank" title="http://build.fhir.org/elementdefinition-definitions.html#ElementDefinition.pattern_x_">comments</a>: "Mostly used for fixing values of CodeableConcept. At present, pattern[x] is not recommended as a basis for slicing while issues related to this are investigated during the STU period."</p>



<a name="153911119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911119">(Sep 27 2017 at 23:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  probably has some deeper understanding of some subtle differences.</p>



<a name="153911120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911120">(Sep 27 2017 at 23:32)</a>:</h4>
<p>I prefer listing out each discriminator vs pattern</p>



<a name="153911138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911138">(Sep 28 2017 at 04:41)</a>:</h4>
<p>Pattern was broken for a long time.  It now seems to be fixed, though slicing by both system &amp; code I think makes for slightly clearer documentation</p>



<a name="153911142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pauli Koskinen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911142">(Sep 28 2017 at 06:15)</a>:</h4>
<p>In our case fixing to LOINC is ok and we have no need to use other code systems.<br>
We try to build a profile that is quite strict. Meaning that the profile has so exact value bindings that profile based resource validation validates observation.code of the resource in resource server when storing the resource. We have on valueset that contains relevant bodytemperature LOINC codes picked from Rosetta temperature panel. Coding would have cardinality 1..2 and be sliced. First slice cardinality 1..1 and code fixed value 8310-5 (main temperature code). Other slice cardinality 0..1 and no fixed code value. Binding to that valueset in observation.code level and relates to both slices. Code is naturally mandatory in both slices.<br>
Is that profile design possible based on FHIR bodytemperature profile?</p>
<p>The profile that I am talking about is <a href="https://simplifier.net/FinnishPHR/fiphr-bodytemperature-stu3" target="_blank" title="https://simplifier.net/FinnishPHR/fiphr-bodytemperature-stu3">https://simplifier.net/FinnishPHR/fiphr-bodytemperature-stu3</a> . That is not based on FHIR bodytemperature profile but fiphr-vitalsigns-stu3 which is based on Observation. With this structure we were able to build profile described above.<br>
When using with HAPI resource server it gives error 'Element matches more than one slice'. I am not ble to say if it is a bug in HAPI or other problem. But due to that error our current profile in Simplifier has more slices, one for each specific temperature LOINC code with fixed code value.<br>
Do you consider this profile design reasonable to include specific codes and profile based validate them strictly in resources? Are we FHIR vitalsigns and bodytemperature compatible with this design?</p>



<a name="153911243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code.coding%20slicing%20and%20it%27s%20code%20in%20FHIR%20BodyTemp%20profile/near/153911243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.2Ecoding.20slicing.20and.20it&#x27;s.20code.20in.20FHIR.20BodyTemp.20profile.html#153911243">(Sep 28 2017 at 14:34)</a>:</h4>
<p>That design is certainly possible.  However, preventing other systems from sending you additional codes you don't care about (and could ignore) means you're forcing those systems to customize their interface just for your system, which is generally a bad idea.  It'd be better to leave the cardinality of Coding 1..* and define the two slices that are "mustSupport" and then plan to ignore everything else.  That way if a client needs to talk to your system plus someone else who requires a different code system, they can spit out the same instances to both of you and you can each pay attention to what you wish.  It should certainly be possible to have a profile that meets the HL7 vital signs requirements and the Finish requirements.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
