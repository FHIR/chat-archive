---
layout: page
title: "FHIR Chat  · v2 &lt;--&gt; Mapping · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html">v2 &lt;--&gt; Mapping</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153844383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844383">(Aug 19 2016 at 02:27)</a>:</h4>
<p>one of the things I intended to work on in the lead in to Baltimore is using the mapping language for v2 --&gt; FHIR mapping (or reverse)</p>



<a name="153844384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844384">(Aug 19 2016 at 02:29)</a>:</h4>
<p>to do that, I need a FHIR logical model for v2. (actually, it doesn't need to be explicit, but making it explicit helps us communicate)</p>



<a name="153844385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844385">(Aug 19 2016 at 02:29)</a>:</h4>
<p>there's 2 choices for the logical model. The first is some structure like this:</p>



<a name="153844386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844386">(Aug 19 2016 at 02:29)</a>:</h4>
<div class="codehilite"><pre>message
  segment 0..*
    code 1..1
    field 0..*
      element 1..1
        component 0..*
          subcomponent 0..*
</pre></div>



<a name="153844387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844387">(Aug 19 2016 at 02:30)</a>:</h4>
<p>the alternative is something like this: </p>



<a name="153844388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844388">(Aug 19 2016 at 02:31)</a>:</h4>
<div class="codehilite"><pre>ADT_A01
  MSH
    MSH-1
  EVN
    EVN-1
    EVN-2
      EVN-2-1
</pre></div>



<a name="153844389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844389">(Aug 19 2016 at 02:31)</a>:</h4>
<p>etc</p>



<a name="153844390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844390">(Aug 19 2016 at 02:32)</a>:</h4>
<p>in the first, the message structures would be constraint profiles on the generic structure. Whereas in the second, you make the message structures explicit</p>



<a name="153844391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844391">(Aug 19 2016 at 02:35)</a>:</h4>
<p>I think that the first approach is superior. I say that because this makes any v2 infrastructure we build more robust against variations from the spec - which are uibiqutious, and because the mappings would be robust across versions, even though it does make the mapping language a little more indirect</p>



<a name="153844392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844392">(Aug 19 2016 at 02:36)</a>:</h4>
<p>this was kind of thinking out loud, but wanted to see if anyone had any opinions on this.</p>



<a name="153844393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Butler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844393">(Aug 19 2016 at 02:39)</a>:</h4>
<p>Seems like the first might make it easier to express the uses of particular Z-segments, which would be nice</p>



<a name="153844394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844394">(Aug 19 2016 at 02:51)</a>:</h4>
<p>yes first option would be more friendly to z segments</p>



<a name="153844395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Royce <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844395">(Aug 19 2016 at 03:20)</a>:</h4>
<p>I prefer the first because it properly expresses a metamodel.  I would have thought that would be more useful.</p>



<a name="153844396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844396">(Aug 19 2016 at 03:28)</a>:</h4>
<p>it may be useful, but it's possible to have both models, and map on the basis of the second </p>



<a name="153844397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844397">(Aug 19 2016 at 03:28)</a>:</h4>
<p>still, I prefer the first</p>



<a name="153844407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844407">(Aug 19 2016 at 05:31)</a>:</h4>
<p>From an OO perspective, the first looks like a class definition, the second an instance of that class. Which one is easier to use for mapping might depend on whether you're mapping to/from another class or another instance artifact - and whether the instances have additional attributes.</p>



<a name="153844409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844409">(Aug 19 2016 at 05:53)</a>:</h4>
<p>well, the instances can't have additional attributes. Not in v2. It is the classical Reference Model/Constraint pattern. In v3 that had multiple layers and you picked which layer you wanted to treat as concrete. </p>



<a name="153844410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844410">(Aug 19 2016 at 05:53)</a>:</h4>
<p>in v2, there's only 2 choices</p>



<a name="153844411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844411">(Aug 19 2016 at 05:53)</a>:</h4>
<p>I suppose there's more, really, because you could define your own profile on the messages and make that concrete....</p>



<a name="153844412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844412">(Aug 19 2016 at 06:18)</a>:</h4>
<p>Looking at my old v2 message readers, I took a 2-stage approach. The first created a generic message object similar to your first model, the second parsed the message elements into recognisable business layer objects - patient, provider, observation, referral, etc. Those handlers work on the segment type which seemed more efficient than being concerned about the structure of the 100+ message types. However, if you're mapping to v2 then, of course, you have to create those structures. Still an each-way bet from me.</p>



<a name="153844462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153844462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153844462">(Aug 19 2016 at 16:46)</a>:</h4>
<p>I think the first is the only thing that's going to support z-messages, which we want to support too.  It'll also easily work across past and future versions.</p>



<a name="153845176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153845176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153845176">(Aug 26 2016 at 00:46)</a>:</h4>
<p>Here is the FHIR logical model for v2 <br>
<a href="/user_uploads/10155/U4qH6IG-FygQdc6uraViAT8_/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/U4qH6IG-FygQdc6uraViAT8_/pasted_image.png" target="_blank" title="pasted_image.png"><img src="/user_uploads/10155/U4qH6IG-FygQdc6uraViAT8_/pasted_image.png"></a></div>



<a name="153845177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153845177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153845177">(Aug 26 2016 at 00:47)</a>:</h4>
<p>credits go to GG.   </p>



<a name="153845178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153845178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153845178">(Aug 26 2016 at 00:54)</a>:</h4>
<p>thx Eric. So that's a candidate. I've generated profiles for all the segments for all the versions. I can send them to any one who's interested. In a couple of days time, I'll work on the data types. and then I'll look at doing standard mappings</p>



<a name="153845179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153845179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153845179">(Aug 26 2016 at 00:55)</a>:</h4>
<p>.component is a reference back to .content</p>



<a name="153845292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153845292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153845292">(Aug 27 2016 at 06:06)</a>:</h4>
<p>I've posted this model <a href="http://healthedatainc.com/go-ftp/v2map/" target="_blank" title="http://healthedatainc.com/go-ftp/v2map/">here</a></p>



<a name="153845293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153845293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153845293">(Aug 27 2016 at 06:08)</a>:</h4>
<p>click on the differential tab</p>



<a name="153845851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153845851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Fallas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153845851">(Aug 30 2016 at 19:42)</a>:</h4>
<p>Grahame - I'd be interested to have a look at those profiles you have generated. I'd be very grateful if you could send me a link.</p>



<a name="153845859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/v2%20%3C--%3E%20Mapping/near/153845859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/v2.20.3C--.3E.20Mapping.html#153845859">(Aug 30 2016 at 20:56)</a>:</h4>
<p>sent</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
