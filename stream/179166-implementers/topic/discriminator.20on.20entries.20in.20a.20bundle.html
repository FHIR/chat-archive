---
layout: page
title: "FHIR Chat  · discriminator on entries in a bundle · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html">discriminator on entries in a bundle</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="191516317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/191516317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Bosman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#191516317">(Mar 23 2020 at 18:26)</a>:</h4>
<p>I am searching for the right kind of discriminator to slice the entries in a bundle profile.<br>
Let's say I want to be certain always one Patient and one Practitioner is given as an entry in a bundle:  this means in my instance I would have an entry with &lt;resource&gt;/&lt;Patient&gt; and one with &lt;resource&gt;/&lt;Practitioner&gt; but how do choose the right discriminator for this?</p>



<a name="191522886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/191522886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#191522886">(Mar 23 2020 at 19:18)</a>:</h4>
<p>type=type, path=entry.resource</p>



<a name="191579655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/191579655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Bosman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#191579655">(Mar 24 2020 at 08:49)</a>:</h4>
<p>Thank you, that pointed me in the right direction! After some trial &amp; error I ended with type=type and path=resource</p>



<a name="192978850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/192978850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Katarina <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#192978850">(Apr 05 2020 at 21:21)</a>:</h4>
<p>Would be the discriminator different when I have two different practitioners in the bundle? One practitioner with meta.profile=A and another with meta.profile=B.</p>



<a name="192986154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/192986154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#192986154">(Apr 06 2020 at 00:50)</a>:</h4>
<p>In general you should be cautious about relying on meta.profile - it's poor practice to reject an instance that meets your constraints but doesn't happen to specifically declare it meets them.  That said, slicing based on resolve().meta.profile should work so long as the referenced resources are in the Bundle.</p>



<a name="202286905"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202286905" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rebecka Hansson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202286905">(Jun 29 2020 at 09:11)</a>:</h4>
<p>After finding this thread I tried the same with the Bundle profile I'm creating. However, I've encountered a few problems.</p>
<p>In Forge, there is no path for resource when selecting the descriminator. Tried to solve this by just typing the path instead and it seems to work for the discriminator. Next, I linked the resource to a profile, which was the only way I could figure out how to make sure the slices was of a specific resource type. This doesn't work, in the xml the value for entry.resource.type continues to be only a generic resource. This means that when implementing this with Hapi the validation of the profile fails.</p>
<p>Is there any other way to do this? I found examples where this seems to work and can't figure out where I go wrong.</p>



<a name="202313674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202313674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202313674">(Jun 29 2020 at 14:08)</a>:</h4>
<p>What exactly are you putting in the discriminator?</p>



<a name="202343452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202343452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rebecka Hansson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202343452">(Jun 29 2020 at 17:32)</a>:</h4>
<p>I am slicing the entry element with Path:resource, Type: type.</p>



<a name="202374065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202374065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202374065">(Jun 29 2020 at 22:08)</a>:</h4>
<p>Try Type: resource.  (There is no 'type' element to check the type of...)</p>



<a name="202398371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202398371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rebecka Hansson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202398371">(Jun 30 2020 at 06:07)</a>:</h4>
<p>I tried that now, it is not possible to select or enter resource as the type in Forge at least.<br>
<a href="/user_uploads/10155/NDmIsLN4G9qm1phy0IJsnCnw/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/NDmIsLN4G9qm1phy0IJsnCnw/image.png" title="image.png"><img src="/user_uploads/10155/NDmIsLN4G9qm1phy0IJsnCnw/image.png"></a></div>



<a name="202556956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202556956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rebecka Hansson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202556956">(Jul 01 2020 at 11:21)</a>:</h4>
<p>The other question is how I set e.g. an Observation as data type for the entry.resource instead of 'Resoucre'. I've seen this in other bundle profiles but can't seem to manage in Forge.<br>
<a href="/user_uploads/10155/aQgBCY5jd1XdyujSIQgRz6gZ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/aQgBCY5jd1XdyujSIQgRz6gZ/image.png" title="image.png"><img src="/user_uploads/10155/aQgBCY5jd1XdyujSIQgRz6gZ/image.png"></a></div>



<a name="202557564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202557564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202557564">(Jul 01 2020 at 11:30)</a>:</h4>
<p><span class="user-mention" data-user-id="259036">@Matthijs van der Wielen</span></p>



<a name="202581235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202581235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthijs van der Wielen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202581235">(Jul 01 2020 at 15:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="309003">Rebecka Hansson</span> <a href="#narrow/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle/near/202398371">said</a>:</p>
<blockquote>
<p>I tried that now, it is not possible to select or enter resource as the type in Forge at least.<br>
<a href="/user_uploads/10155/NDmIsLN4G9qm1phy0IJsnCnw/image.png">image.png</a></p>
</blockquote>
<p>It is possible to do this in Forge, you would have to do this manually as you described. <br>
It would end up look something like this:</p>
<div class="codehilite"><pre><span></span><code>&lt;element id=&quot;Bundle.entry&quot;&gt;
   &lt;path value=&quot;Bundle.entry&quot; /&gt;
    &lt;slicing&gt;
       &lt;discriminator&gt;
          &lt;type value=&quot;type&quot; /&gt;
          &lt;path value=&quot;resource&quot; /&gt;
       &lt;/discriminator&gt;
       &lt;rules value=&quot;open&quot; /&gt;
    &lt;/slicing&gt;
    &lt;min value=&quot;2&quot; /&gt;
&lt;/element&gt;
</code></pre></div>


<p>You could look at <a href="https://simplifier.net/NictizSTU3-Zib2017/Nictiz.IHE.MHD.ProvideDocumentBundle.Minimal/~xml">https://simplifier.net/NictizSTU3-Zib2017/Nictiz.IHE.MHD.ProvideDocumentBundle.Minimal/~xml</a> as an example.</p>



<a name="202625334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202625334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rebecka Hansson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202625334">(Jul 01 2020 at 21:18)</a>:</h4>
<p>Yes! :) It works to do it manually. I think my biggest issue is how I get the type on the resource element do be set as observation or clinicalImpression instead of just resource. The fact that I can´t do this causes validation errors. Actually, I want to accomplish how it looks in the example you sent: </p>
<div class="codehilite"><pre><span></span><code>  &lt;element id=&quot;Bundle.entry:List.resource&quot;&gt;
            &lt;path value=&quot;Bundle.entry.resource&quot; /&gt;
            &lt;min value=&quot;1&quot; /&gt;
            &lt;type&gt;
                &lt;code value=&quot;List&quot; /&gt;
                &lt;profile value=&quot;http://nictiz.nl/fhir/StructureDefinition/IHE.MHD.List&quot; /&gt;
            &lt;/type&gt;
        &lt;/element&gt;
</code></pre></div>


<p>That code value says something else than resource (List). Currently, my profile looks like this:</p>
<div class="codehilite"><pre><span></span><code>        &lt;element id=&quot;Bundle.entry:clinicalImpression.resource&quot;&gt;
            &lt;path value=&quot;Bundle.entry.resource&quot; /&gt;
            &lt;short value=&quot;ClinicalImpression&quot; /&gt;
            &lt;min value=&quot;1&quot; /&gt;
            &lt;type&gt;
                &lt;code value=&quot;Resource&quot; /&gt;
                &lt;profile value=&quot;https://fhir.cambio.se/StructureDefinition/ClinicalImpressionTriageRetts/v1&quot; /&gt;
            &lt;/type&gt;
</code></pre></div>


<p>Is that something I need to do manually as well?</p>



<a name="202695452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202695452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rebecka Hansson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202695452">(Jul 02 2020 at 14:26)</a>:</h4>
<p><span class="user-mention" data-user-id="259036">@Matthijs van der Wielen</span>  Do you have an idea of how to solve my last question? :)</p>



<a name="202776674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202776674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthijs van der Wielen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202776674">(Jul 03 2020 at 07:51)</a>:</h4>
<p><span class="user-mention" data-user-id="309003">@Rebecka Hansson</span> ,<br>
I might be able to help. If you open a bundle, and slice it as in the Nictiz example, under resource you can select Type(s): <a href="/user_uploads/10155/PcI27ETYdpMibVd4N5SjiU_2/image.png">image.png</a> <br>
You can select "List" here, or is your case "Observation". Is this what you are looking for?</p>
<div class="message_inline_image"><a href="/user_uploads/10155/PcI27ETYdpMibVd4N5SjiU_2/image.png" title="image.png"><img src="/user_uploads/10155/PcI27ETYdpMibVd4N5SjiU_2/image.png"></a></div>



<a name="202776960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/202776960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rebecka Hansson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#202776960">(Jul 03 2020 at 07:56)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="259036">@Matthijs van der Wielen</span> ! Yes that's what I'm looking for. However I see that you're working with Forge for STU3 - in which it looks like you can untick 'Resource'. I can't see where that is possible in Forge for R4. Then it only seems like it is possible to add profiles but not to specify the resource type further than 'Resource'.<br>
<a href="/user_uploads/10155/fM2yqZsMPJ8hXbvy0auZe6lI/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/fM2yqZsMPJ8hXbvy0auZe6lI/image.png" title="image.png"><img src="/user_uploads/10155/fM2yqZsMPJ8hXbvy0auZe6lI/image.png"></a></div>



<a name="203483728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/discriminator%20on%20entries%20in%20a%20bundle/near/203483728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthijs van der Wielen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/discriminator.20on.20entries.20in.20a.20bundle.html#203483728">(Jul 10 2020 at 08:54)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="309003">@Rebecka Hansson</span> , with some help from one of my colleagues I found where you can do this in R4. Although it doesn't seem intuitive, you can specify the resource type by defining a "profile" on resource.  Since all other core resources are technically profiles on resource. In the screenshot attached you can see how to define that you can only use "List" in this slice. You can add other canonical URLs to define other options, which can be core resources or local profiles.<br>
<a href="/user_uploads/10155/vIYoGTxsZT9qZmCBfQ-mVc37/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/vIYoGTxsZT9qZmCBfQ-mVc37/image.png" title="image.png"><img src="/user_uploads/10155/vIYoGTxsZT9qZmCBfQ-mVc37/image.png"></a></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
