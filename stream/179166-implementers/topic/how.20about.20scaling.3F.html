---
layout: page
title: "FHIR Chat  · how about scaling? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html">how about scaling?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153920204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153920204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153920204">(Nov 17 2017 at 12:56)</a>:</h4>
<p>I would like to start a discussion about how to make FHIR scale. It's not related to any specific use case - it is simply about horizontal hardcore scaling and shipping events instead of just using queries like crazy, hitting the RESTful servers constantly (we don't want stale clients, right?). If FHIR is to scale, event mechanisms (like using subscription with web sockets, mq, server sent events rest/web-hooks and what not) must be in use - notifying clients about changes in data. Clients will need to set up subscriptions dynamically and needs to be notified whenever that initial set of data changes - when stuff enters (currently supported) and when stuff leaves.</p>
<p>Also, if clients are to detect whether they in fact are stale or not versioning is of paramount importance - and should be used as lamports (<a href="https://en.wikipedia.org/wiki/Lamport_timestamps" target="_blank" title="https://en.wikipedia.org/wiki/Lamport_timestamps">https://en.wikipedia.org/wiki/Lamport_timestamps</a>) or alike. We also need to establish the fact that data cannot change without having its version bumped (this is currently not the case for metadata) because it makes it impossible to detect if data has changed.</p>
<p>I've created two tickets that points towards some requests that seems necessary to me, in order to get closer to something that can eventually offer consistency and scalability.</p>
<p><a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14197" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14197">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14197</a><br>
<a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14198" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14198">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14198</a></p>
<p>Please, join in on this discussion if you would like FHIR to scale and using eventing mechanisms.</p>



<a name="153920205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153920205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153920205">(Nov 17 2017 at 12:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191521">@Michael Christensen</span> please join me on this crusade</p>



<a name="153920207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153920207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153920207">(Nov 17 2017 at 13:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191363">@Vadim Peretokin</span> you're welcome to chip in :)</p>



<a name="153920208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153920208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> shivnath shelake <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153920208">(Nov 17 2017 at 13:10)</a>:</h4>
<p>Hi..<br>
I have c# code in that I created patient with  pat.Id = "12345";<br>
I want to give this patient reference for observation how i can achieve same..<br>
Also in search how i can get the patient related all resource information...<br>
help is greatly appreciated !!</p>



<a name="153920225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153920225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153920225">(Nov 17 2017 at 15:04)</a>:</h4>
<p>hmmm .... I need to look into <a href="http://build.fhir.org/eventdefinition.html" target="_blank" title="http://build.fhir.org/eventdefinition.html">http://build.fhir.org/eventdefinition.html</a> it seems</p>



<a name="153920230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153920230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Calvin Young <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153920230">(Nov 17 2017 at 16:29)</a>:</h4>
<p>Very interested in this topic, as well as the Bulk Data Access proposal. I've run into scaling challenges alongside flexibility challenges--using the query API to its full flexibility (or beyond!) isn't performant at scale, but it's also hard to run performant enough to get less filtered data and handle client-side. Subscriptions seem very promising if developed carefully and implemented widely.</p>



<a name="153920509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153920509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153920509">(Nov 21 2017 at 07:00)</a>:</h4>
<p>+1 to this, while some systems will fit in one server and database, we need to account for horizontal scalability as well</p>



<a name="153920987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153920987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153920987">(Nov 22 2017 at 10:32)</a>:</h4>
<p>I think, transaction level (or consistency level) can be different and specified for each server.</p>



<a name="153920988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153920988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153920988">(Nov 22 2017 at 10:33)</a>:</h4>
<p>Interested. <br>
I may help to define a few different use cases:<br>
1. scaling out to multiple instances of the same FHIR Server ( / RESTful API implementation) on a single database<br>
2. scaling out to multiple database instances (like sharding or replication), still using multiple instances of the same FHIR Server<br>
3. scaling out across different FHIR Servers (or even clients)<br>
I think 1 and 2 can be often be handled by the storage mechanisms underlying the FHIR Server, and at least Vonk keeps no state in the web API layer, so that can be scaled independently. Also, the FHIR Server implementation may assure that changes on metadata don't go unnoticed (Vonk will assign a new version upon an update-interaction no matter what you changed).<br>
With 3 it becomes important to 'replay transactions' somehow as we discussed at the BoF at DevDays. And in this case you cannot rely on all parties detecting changes to metadata that you might want to know about. Or even support versioning at all. How to communicate about the capabilities in this respect? Should that be computable?</p>



<a name="153921120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921120">(Nov 22 2017 at 21:38)</a>:</h4>
<p>The $meta-add operations can be performed on older versions of the resource (often to put a security/privacy tag on them to prevent future access)<br>
This is not replicated through the history mechanism.</p>



<a name="153921130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921130">(Nov 22 2017 at 22:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> - the fact that you can add metadata without bumping the version of the resource as well makes my skin crawl</p>



<a name="153921131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921131">(Nov 22 2017 at 22:44)</a>:</h4>
<p>Unfortunately, for this use-case, its the only way.<br>
and it's the only thing like it in the FHIR spec too.</p>



<a name="153921132"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921132" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921132">(Nov 22 2017 at 22:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> regarding the fact that Vonk does not keep state ... does that also go for the subscription resource? does it mean that if I set up two Vonk servers up against the same database, that they automatically vote on who is to ship out the notification to a client</p>



<a name="153921133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921133">(Nov 22 2017 at 22:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> well lets just hope that no-one finds it important to track changes or handle concurrency when messing with metadata ...<span class="emoji emoji-1f612" title="unamused">:unamused:</span></p>



<a name="153921134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921134">(Nov 22 2017 at 22:49)</a>:</h4>
<p>I guess that was not part of the use case ... <span class="emoji emoji-1f632" title="astonished">:astonished:</span></p>



<a name="153921137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921137">(Nov 22 2017 at 23:24)</a>:</h4>
<p>Should we add a "lastMetaUpdated" to meta (including as a search criteria when querying history)?  That way there'd be a way to retrieve past versions that have been tweaked since the last time you looked.</p>



<a name="153921139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921139">(Nov 22 2017 at 23:31)</a>:</h4>
<p>Or just a note on how to represent the meta change for the history representation</p>



<a name="153921140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921140">(Nov 22 2017 at 23:32)</a>:</h4>
<p>Well, if you don't track when the meta changed - or expose it, it's going to be hard for other systems to figure out what happened.</p>



<a name="153921241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921241">(Nov 23 2017 at 09:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> Currently the subscription evaluation process is part of the Vonk server process, so the notification would be handled by the server that processes the request  triggering it. But I expect the implementation will have several makeovers in the future (since the spec will change on this subject and we will gain experience).</p>



<a name="153921257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921257">(Nov 23 2017 at 10:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> - I'd would favor a logical clock - like Meta.metaVersionId ... for concurrency reasons</p>



<a name="153921258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921258">(Nov 23 2017 at 10:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> - ... I get what you are saying, but the my question relates to parallel Vonk servers against the same db. If a client submits a subscription to one Vonk server and that server goes down, does the other Vonk server then take over the responsibility to send notifications automatically?</p>



<a name="153921322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921322">(Nov 23 2017 at 19:43)</a>:</h4>
<p>Note that versionId isn't necessarily sequential - it can easily be a random GUID or something like that.  The only rule is that it's unique within the scope of the resource id.</p>



<a name="153921338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921338">(Nov 23 2017 at 21:37)</a>:</h4>
<p>what happened to using a sound well proven concept such as lamports?</p>



<a name="153921345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921345">(Nov 23 2017 at 23:53)</a>:</h4>
<p>FHIR systems aren't necessarily built using FHIR-based persistence technologies.  Systems can expose whatever version id they have - in some cases it might even be a generated hash.  The sequential element is lastUpdated, not versionId</p>



<a name="153921453"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921453" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921453">(Nov 24 2017 at 11:30)</a>:</h4>
<p><span class="emoji emoji-1f914" title="thinking face">:thinking_face:</span></p>



<a name="153921480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921480">(Nov 24 2017 at 13:52)</a>:</h4>
<p>that sounds like a bet on true distributed time ... it however requires that all systems are in total sync regarding time and that no two updates arrive at the same time (especially if versionId) - then again ... none of it is required, right?</p>



<a name="153921482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921482">(Nov 24 2017 at 14:08)</a>:</h4>
<p>Versioning is always specific to a single server instance - because that's the scope of the resource id.  If you synchronize data across multiple servers, the version ids could be totally distinct - integers on one server, timestamps on another, guids on another.  There's no time synchronization issues involved.</p>



<a name="153921519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921519">(Nov 24 2017 at 18:16)</a>:</h4>
<p>Well the time used is always the server time. My past results had a time that I use in my next query...</p>



<a name="153921520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921520">(Nov 24 2017 at 18:20)</a>:</h4>
<p>my understanding of the lastUpdated behavior is that we allow servers to have policy on what kind of a change can be excluded. Thus it is policy on if a metadata change will update lastUpdated. right?  There are realistic policies that could exist where almost any element change might be considered a non-change. Less so with clinical data vs metadata. But reasonable policy expectations do exist.  If this is the case then the theoretical problem mentioned here can be 'managed' in an implementation guide or deployment policy.  right?</p>



<a name="153921522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921522">(Nov 24 2017 at 18:25)</a>:</h4>
<p>I think lastUpdated can't change when meta changes because doing so would cause history to become out-of-order.  lastUpdated is the only way to reliably sort history records</p>



<a name="153921579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921579">(Nov 25 2017 at 21:35)</a>:</h4>
<p>Where is it stated that lastUpdated can't change when meta changes?</p>



<a name="153921624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921624">(Nov 27 2017 at 07:57)</a>:</h4>
<blockquote>
<p>my understanding of the lastUpdated behavior is that we allow servers to have policy on what kind of a change can be excluded. Thus it is policy on if a metadata change will update lastUpdated. right?  There are realistic policies that could exist where almost any element change might be considered a non-change. Less so with clinical data vs metadata. But reasonable policy expectations do exist.  If this is the case then the theoretical problem mentioned here can be 'managed' in an implementation guide or deployment policy.  right?</p>
</blockquote>
<p>I agree - I think it might be worth mentioning that the doc could be more clear on some topics here (<a href="http://build.fhir.org/resource.html#Meta" target="_blank" title="http://build.fhir.org/resource.html#Meta">http://build.fhir.org/resource.html#Meta</a>) like what fields are <strong>encouraged</strong> to be updated only by the server (<span class="user-mention" data-user-id="191316">@Grahame Grieve</span>) like versionId and lastUpdated.</p>



<a name="153921625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921625">(Nov 27 2017 at 08:40)</a>:</h4>
<p>sure you can make a task for that</p>



<a name="153921638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921638">(Nov 27 2017 at 12:41)</a>:</h4>
<blockquote>
<p>sure you can make a task for that</p>
</blockquote>
<p>Nevermind ... I found it reading a combination of <a href="http://build.fhir.org/http.html#create" target="_blank" title="http://build.fhir.org/http.html#create">http://build.fhir.org/http.html#create</a> , <a href="http://build.fhir.org/http.html#update" target="_blank" title="http://build.fhir.org/http.html#update">http://build.fhir.org/http.html#update</a> ,  <a href="http://build.fhir.org/http.html#versionaware" target="_blank" title="http://build.fhir.org/http.html#versionaware">http://build.fhir.org/http.html#versionaware</a> and <a href="http://build.fhir.org/resource.html#Meta" target="_blank" title="http://build.fhir.org/resource.html#Meta">http://build.fhir.org/resource.html#Meta</a></p>



<a name="153921642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921642">(Nov 27 2017 at 13:06)</a>:</h4>
<blockquote>
<p>Where is it stated that lastUpdated can't change when meta changes?</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> found it: <a href="http://build.fhir.org/http.html#update" target="_blank" title="http://build.fhir.org/http.html#update">http://build.fhir.org/http.html#update</a></p>



<a name="153921669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921669">(Nov 27 2017 at 17:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Do yo usee utility in adding metaLastUpdated?  I'm not sure how else client systems would know when to grab old history records that have had their meta tweaked.</p>



<a name="153921715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921715">(Nov 27 2017 at 22:42)</a>:</h4>
<p>no there's no way to get them. And I really don't see much value in it. If anything, we should remove the special case $meta operations on old records. I've never heard of anyone using them, only complaints around the special case that they resporesent</p>



<a name="153921756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921756">(Nov 28 2017 at 04:05)</a>:</h4>
<p>Couldn't you query for _history and filter on the history entries whose meta has changed since you last looked?</p>



<a name="153921757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921757">(Nov 28 2017 at 04:06)</a>:</h4>
<p>The only time changing historical records has any use-case is for history and I agree it's unlikely anyone will do that.  Should we say that the security tags on the current record should apply to all historical versions?</p>



<a name="153921828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153921828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153921828">(Nov 28 2017 at 13:32)</a>:</h4>
<p>That is a policy decision. The tag may have been applied for a version specific reason. The tag may have been applied for a broad reason. It is better with security tags to never have implied conduction. But that is a policy, not a model thing. The FHIR model lets you do either policy. Yet if you put a policy into FHIR model, then you forbid the other reasonable policy from being done.</p>



<a name="153922721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153922721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153922721">(Dec 03 2017 at 21:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> I never tried it, but it should. Subscriptions are shared through the Administration database in Vonk, so all instances have access to them.</p>



<a name="153922726"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/how%20about%20scaling%3F/near/153922726" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/how.20about.20scaling.3F.html#153922726">(Dec 03 2017 at 22:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>  let me know if you are sure on this part</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
