---
layout: page
title: "FHIR Chat  · Retrieving Binary resources · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html">Retrieving Binary resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153835862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/153835862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#153835862">(Jun 30 2016 at 11:48)</a>:</h4>
<p>What is the expected behaviour of retrieving binary resources? I thought that if you did not specify a mimetype the binary content would be returned with the mimetype stored within the binary resource - is that correct?</p>
<p>I created a binary resource here <a href="http://spark.furore.com/fhir/Binary/spark160" target="_blank" title="http://spark.furore.com/fhir/Binary/spark160">http://spark.furore.com/fhir/Binary/spark160</a> which is for a PDF file. </p>
<p>I thought that if I did a GET against that URL in a browser I would be returned a PDF file but I don't I get a garbled HTML file.</p>
<p>Not sure whether this is an issue with SPARK or my understanding</p>



<a name="153835867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/153835867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#153835867">(Jun 30 2016 at 12:24)</a>:</h4>
<p>browsers are tricky in this regard. they ask very loosely, and they interpret somewaht idiosyncratically. the first thing to do is to try it in different browsers, and you should also spy in the http traffic and see what the actual return headers say</p>



<a name="153835892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/153835892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#153835892">(Jun 30 2016 at 15:20)</a>:</h4>
<p>No, even if I don't supply a content-type I get back application/xml with a Binary resource, instead of the raw PDF:</p>
<div class="codehilite"><pre>curl -vvv http://spark.furore.com/fhir/Binary/spark160

&lt; Content-Type: application/xml+fhir; charset=utf-8
&lt; Content-Location: Binary/spark160/_history/spark261
&lt; Expires: -1
&lt; Last-Modified: Thu, 30 Jun 2016 11:38:43 GMT
&lt; ETag: W/&quot;spark261&quot;
&lt; Server: Microsoft-IIS/8.5
&lt; X-AspNet-Version: 4.0.30319
&lt; X-Powered-By: ASP.NET
&lt; Date: Thu, 30 Jun 2016 15:20:23 GMT
&lt; Content-Length: 91866
</pre></div>



<a name="153835893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/153835893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#153835893">(Jun 30 2016 at 15:21)</a>:</h4>
<p>This goes against <a href="http://hl7-fhir.github.io/binary.html#rest" target="_blank" title="http://hl7-fhir.github.io/binary.html#rest">the definition</a>:</p>
<blockquote>
<p>Binary resources behave slightly differently to all other resources on the RESTful API. Specifically, when a read request is made for the binary resource that doesn't explicitly specify the FHIR content types "application/xml+fhir" or "application/json+fhir", then the content should be returned using the content type stated in the resource. e.g. if the content type in the resource is "application/pdf", then the content should be returned as a PDF directly.</p>
</blockquote>



<a name="153835895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/153835895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#153835895">(Jun 30 2016 at 15:22)</a>:</h4>
<p>That said, when I do explicitly ask for:</p>
<div class="codehilite"><pre>curl -H &quot;Accept: application/pdf&quot; http://spark.furore.com/fhir/Binary/spark160
</pre></div>


<p>I indeed get a PDF out. So, Spark is capable of returning the PDF, but is (I think!) doing the wrong thing by default.</p>



<a name="153835956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/153835956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#153835956">(Jun 30 2016 at 21:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> looks like the default behaviour is wrong. I better test my own server</p>



<a name="153836005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/153836005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#153836005">(Jul 01 2016 at 03:26)</a>:</h4>
<p>In my server I also include a ContentDisposition header including a filename for the resource with an extension expected for the mimetype. eg application/pdf -&gt; .pdf</p>



<a name="153836006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/153836006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#153836006">(Jul 01 2016 at 03:26)</a>:</h4>
<p>Not in the spec, but helps from the browser perspective.</p>



<a name="153836031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/153836031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#153836031">(Jul 01 2016 at 08:08)</a>:</h4>
<p>I'll raise an issue for Spark to modify this.</p>



<a name="153836171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/153836171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#153836171">(Jul 02 2016 at 16:31)</a>:</h4>
<p>More evidence to support _format. ...  Also, we see Google has had to play special tricks to force web-sites to return html5 rather than Flash; if they are capable, with tricks to support sites that can't...  Very much 'accept' is more of a suggestion than an actual interoperability function.</p>



<a name="154004848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/154004848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#154004848">(Oct 02 2018 at 18:39)</a>:</h4>
<p>My understanding of the Binary resource is that if you perform a "GET" against the resource (with no HTTP Accept headers set) then the response will be the binary object usings its native mime type - is that correct?<br>
I keep looking at various test servers and they return either an XML or JSON Binary resource.</p>



<a name="154004850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/154004850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#154004850">(Oct 02 2018 at 18:41)</a>:</h4>
<p>You're correct, <span class="user-mention" data-user-id="191362">@Richard Kavanagh</span></p>



<a name="154004851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/154004851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#154004851">(Oct 02 2018 at 18:41)</a>:</h4>
<p>I mean, it's supposed to work the way you think it's supposed to work.</p>



<a name="154004858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/154004858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#154004858">(Oct 02 2018 at 18:56)</a>:</h4>
<p>One caution: I know these rules have been clarified as the spec has matured. The latest seems to indicate that there's no hard rule that can be made about the relationship between Accept and what gets returned...</p>



<a name="154004859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/154004859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#154004859">(Oct 02 2018 at 18:56)</a>:</h4>
<p>So it may depend on the version of the spec implemented? And the test server capabilities?</p>



<a name="154004861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/154004861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#154004861">(Oct 02 2018 at 18:57)</a>:</h4>
<p>I think it's fair to say it unpredictable so I'll opt for a _format=xxx variant so at least that gives a defined behaviour<br>
Thanks</p>



<a name="154004909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/154004909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#154004909">(Oct 02 2018 at 20:10)</a>:</h4>
<p>you could make a task to get us to check it's in the validators</p>



<a name="154004945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Retrieving%20Binary%20resources/near/154004945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Retrieving.20Binary.20resources.html#154004945">(Oct 02 2018 at 23:51)</a>:</h4>
<p>Done <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19254" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19254">GF#19254</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
