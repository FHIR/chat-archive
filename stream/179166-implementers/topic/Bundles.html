---
layout: page
title: "FHIR Chat  · Bundles · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html">Bundles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153850701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153850701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153850701">(Sep 26 2016 at 00:12)</a>:</h4>
<p>Would I be correct in understanding that the only bundle types processed upon upload are transaction and batch - the rest are stored as-is just like any other resource?</p>



<a name="153850705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153850705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153850705">(Sep 26 2016 at 00:27)</a>:</h4>
<p>server's discretion how to handle them</p>



<a name="153851053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153851053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153851053">(Sep 28 2016 at 13:22)</a>:</h4>
<p>Interesting question. Makes me think:<br>
If a server receives a document bundle, how does it know whether it is expected to store the document as-is or process the individual resources? There may be use cases for both "persist document" as well as "process document content". But since both go to the same endpoint, how does the server know what to do? Would the latter be an operation, as it potentially involves additional business logic such as mpi lookup?</p>



<a name="153851065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153851065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153851065">(Sep 28 2016 at 14:00)</a>:</h4>
<p>As Grahame has indicated... it is up to the server to decide. Some servers will be functioning as a simple storage system (aka IHE MHD base use-case), where it will just persist the binary as a binary (it will have the DocumentReference as the metadata about that document). Others (and this is fine with MHD too) will persist the binary as a binary, but will also bust it apart into parts. These are not requirements of the Interoperability specification, these would be requirements of the implementation specification. Both (and more) kinds of implementations will be needed in different cases.</p>



<a name="153851092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153851092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153851092">(Sep 28 2016 at 16:34)</a>:</h4>
<p>What if there's a server that needs to do both?</p>
<p>e.g an EHR server with</p>
<ul>
<li>one Client composes Documents from internal resources and the documents posted to the server simply need to be archived.</li>
<li>another Client sends external Documents  to the server that need to be both archived as well as processed into the Patient record</li>
</ul>
<p>How will the server tell these two cases apart if both clients POST to the same endpoint...?  Or is this unlikely to ever happen?</p>



<a name="153851093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153851093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153851093">(Sep 28 2016 at 16:39)</a>:</h4>
<p>It's probably possible to analyze the contend and figure out where stuff came from and whether it is already known to the server or needs to be added. But I guess that's pretty expensive escpecially if the internal documents outweigh the external ones by numbers. <br>
I dunno. <br>
Not a server implementer, just a girl with a vivid imagination.</p>



<a name="153851174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153851174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153851174">(Sep 29 2016 at 02:52)</a>:</h4>
<p>have you read this: <a href="http://hl7-fhir.github.io/documents.html#bundle" target="_blank" title="http://hl7-fhir.github.io/documents.html#bundle">http://hl7-fhir.github.io/documents.html#bundle</a></p>



<a name="153851251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153851251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153851251">(Sep 29 2016 at 14:50)</a>:</h4>
<p>I am not clear on why this duality would exist. If there was a real need for different behaviors, then there would likely be different endpoints. An endpoint has a defined behavior. Or we bring in Operations to identify different behavior. </p>



<a name="153851257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153851257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153851257">(Sep 29 2016 at 15:58)</a>:</h4>
<p>yes that's what the section describes - the different end points</p>



<a name="153851385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153851385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153851385">(Sep 29 2016 at 23:56)</a>:</h4>
<p>Oh! I wasn't aware that document bundles can also go to the basurl. Makes perfect sense to send them there in order to have them processed like transactions/batches. Cool. <img alt=":smiling_face_with_sunglasses:" class="emoji" src="/static/third/gemoji/images/emoji/smiling_face_with_sunglasses.png" title=":smiling_face_with_sunglasses:"> </p>



<a name="153851409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153851409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153851409">(Sep 30 2016 at 03:03)</a>:</h4>
<p>I also found additional guidance at <a href="http://hl7.org/fhir/2016Sep/http.html#other-bundles" target="_blank" title="http://hl7.org/fhir/2016Sep/http.html#other-bundles">http://hl7.org/fhir/2016Sep/http.html#other-bundles</a> that expanded on GG's comment </p>



<a name="153856000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153856000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mat Coolidge  <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153856000">(Nov 08 2016 at 17:36)</a>:</h4>
<p>We are looking to do a query for all patients on a certain hospital list. In the query we want to also provide a list of observation values we want returned. My thought was using a bundle, but I wasnt sure how to structure the query. Any pointers or examples I could check out?</p>



<a name="153856005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153856005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mat Coolidge  <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153856005">(Nov 08 2016 at 17:55)</a>:</h4>
<p>Maybe a better question would be how to model a patient list with included resources (not refs)</p>



<a name="153856006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153856006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mat Coolidge  <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153856006">(Nov 08 2016 at 17:56)</a>:</h4>
<p>would it be a bundle that includes sub bundles?</p>



<a name="153856042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153856042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153856042">(Nov 08 2016 at 20:07)</a>:</h4>
<p>So your base query, you'd be querying against Observation, filtering on the observation values and also filtering on subject.  Your subject would then need to do a "_has" to only include those patients present on the list.  You'd then do an _include to bring back the Observation.subject (i.e. patients) too.  Only downside is that you wouldn't see patients if they had no observations matching your list of codes.</p>



<a name="153856044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153856044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153856044">(Nov 08 2016 at 20:09)</a>:</h4>
<p>In general, we don't do "included lists".  The search response can include references to or from the selected resources, but we wouldn't want to "store" a Bundle that contains a bunch of patients.  You should use the List resource with references and use the query capabilities to include (or not) what you need in your response bundle.</p>



<a name="153856062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153856062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153856062">(Nov 08 2016 at 21:17)</a>:</h4>
<p>there's actually 3 options here:<br>
- a single search with include (unlikely to be quite specific enough)<br>
- a batch that has 2 searches, one with an include - that can be quite specific<br>
- a profile on $everything (extending the ways $everything can be limited)</p>



<a name="153856159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundles/near/153856159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundles.html#153856159">(Nov 09 2016 at 05:50)</a>:</h4>
<p>+1 on the batch using searches to span all the resource types that you're looking for, or the $everything if that works for you</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
