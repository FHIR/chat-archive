---
layout: page
title: "FHIR Chat  · Multi-Tenant FHIR Server · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html">Multi-Tenant FHIR Server</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="180159341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180159341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Paquette <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180159341">(Nov 07 2019 at 18:22)</a>:</h4>
<p>We are looking to build a FHIR server facade in front of an existing multi-tenant system. Clients will be given access to 1 or more tenants to be enforced by standard authorization. When a client wants to create a data object (i.e., a specific FHIR resource), we need the client to provide the desired TenantID to properly insert the new data.  </p>
<p><strong>Is there a recommended approach for providing this TenantID?</strong></p>
<p>We also expect to allow searching across tenants to which they have access. This implies that the TenantID probably needs to reside within the resource.</p>
<p>One thought is to include it as an <code>Identifier</code>. Another is to include it as an <code>Extension</code> in the <code>modifierExtension</code> field (because they are <em>Extensions that cannot be ignored</em>).</p>
<p><strong>Thoughts, ideas, recommendations...</strong></p>
<p>Thanks</p>



<a name="180170424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180170424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180170424">(Nov 07 2019 at 20:08)</a>:</h4>
<p>it seems from your description that you anticipate that the client must know about the multi-tenancy and you depend on it acting correctly in order to enforce proper system behavior?</p>



<a name="180171807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180171807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180171807">(Nov 07 2019 at 20:22)</a>:</h4>
<p>why would a client want to choose the TenantID? This seems to indicate that the client is aware of the backend architecture. If so, then why not just address the backend like one would a multi-tenant system? Each service has their own http root that they build upon. The tenantID is built into the URL root. <br>
What I am confused by is the facade function if the clients need to know tenantID anyway.</p>



<a name="180172301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180172301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180172301">(Nov 07 2019 at 20:27)</a>:</h4>
<p>search across the the tenants... but presumably the tenant cannot be inferred from the context... so the client must know, and generic clients need not apply. If I've read it right, the least worst option is a header functionally like the host: http header</p>



<a name="180175606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180175606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Paquette <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180175606">(Nov 07 2019 at 21:02)</a>:</h4>
<p>Yes, the client will always know the TenantIds (1 or more) to which they have access and will need to "pass in" the desired specific TenantId to the REST API calls. Embedding the TenantId in the "base" URL would work except for the scenario where we want to search across multiple tenants.</p>



<a name="180176957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180176957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180176957">(Nov 07 2019 at 21:18)</a>:</h4>
<p>I would tie the tenant to the user (e.g., a claim in a token) so that tenants cannot trivially see across boundaries.  If you have access to multiple tenants, it could ask as part of the auth process which one(s) you want access to.</p>



<a name="180196763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180196763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180196763">(Nov 08 2019 at 02:14)</a>:</h4>
<p>Do you allow resource references, search, _include, etc across tenants? If so, I am not sure what isolation the tenancy provides. And if not, you might consider making the different tenants visible at different FHIR base URLs.</p>



<a name="180234830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180234830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Paquette <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180234830">(Nov 08 2019 at 14:37)</a>:</h4>
<p>We already include the TenantIDs (1 or more) a user has access to as claims in the auth token to prevent crossing the tenant boundaries. The question is about a case where a user has access to multiple TenantIDs but wants to access specific FHIR endpoints for a single specific tenant. Adding the TenantID in the URL will work in this case but not when I want to search across a subset of Tenants that I have access to (e.g., I have access to TenantIds 1,2,3,4,5 but want to search across TenantIds 2,3,4). To do that search, I need to use an appropriate query parameter. </p>
<p>My understanding is that the query parameter must reference some data element in the resource; hence, my original question. Maybe a better question is can I document (capability statement) the use of a specific query parameter that the endpoint will always understand (TenantID(s)) but does not represent an actual data element within the resource?</p>



<a name="180395038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180395038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Courtenay Farquharson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180395038">(Nov 11 2019 at 03:52)</a>:</h4>
<p>Linking in <a href="#narrow/stream/184604-australia.2Fprimary-care/topic/Nov.202019.20Connectathon/near/180389554" title="#narrow/stream/184604-australia.2Fprimary-care/topic/Nov.202019.20Connectathon/near/180389554">https://chat.fhir.org/#narrow/stream/184604-australia.2Fprimary-care/topic/Nov.202019.20Connectathon/near/180389554</a></p>
<p>Curious as to what the thoughts might be here so far.</p>
<p>I think best case is the claims define the locations you have access to (as you alluded to) and any Id's should then take location into account to ensure uniqueness. Any request to a resource (eg. /Patient) should really search across locations and be seamless to the client. </p>
<p>This doesn't help for writing though.</p>



<a name="180468503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180468503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180468503">(Nov 11 2019 at 23:20)</a>:</h4>
<p>Are the different TenantIds related to any real-world constructs?  Locations, etc?  Or are they purely a technical architecture thing?  I ask because this (clients knowing about tenant ids) sounds like a leaky abstraction.</p>



<a name="180475505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180475505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180475505">(Nov 12 2019 at 02:05)</a>:</h4>
<p>all abstractions are leaky but only some leaks are useful</p>



<a name="180581834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Multi-Tenant%20FHIR%20Server/near/180581834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Multi-Tenant.20FHIR.20Server.html#180581834">(Nov 13 2019 at 01:48)</a>:</h4>
<p><strong>If</strong> it's a leak, I'm looking for the source, but it could always be a (water) feature</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
