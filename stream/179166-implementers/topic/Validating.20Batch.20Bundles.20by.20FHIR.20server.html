---
layout: page
title: "FHIR Chat  · Validating Batch Bundles by FHIR server · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Batch.20Bundles.20by.20FHIR.20server.html">Validating Batch Bundles by FHIR server</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153974947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Batch%20Bundles%20by%20FHIR%20server/near/153974947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zohreh Jabbari <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Batch.20Bundles.20by.20FHIR.20server.html#153974947">(Jul 12 2018 at 15:19)</a>:</h4>
<p>Hi,</p>
<p>I have a question regarding batch bundle execution on a FHIR server. I would appreciate some clarification on this: <br>
(This is the part of spec I am referring to <a href="https://www.hl7.org/fhir/http.html#transaction" target="_blank" title="https://www.hl7.org/fhir/http.html#transaction">https://www.hl7.org/fhir/http.html#transaction</a> &amp; <a href="https://www.hl7.org/fhir/bundle.html#bundle-unique" target="_blank" title="https://www.hl7.org/fhir/bundle.html#bundle-unique">https://www.hl7.org/fhir/bundle.html#bundle-unique</a>)  </p>
<p>Can a batch bundle contain multiple request of the same type for the same resource, e.g. multiple updates for the same resource? and if the answer is no, then should the server:<br>
 - return an invalid bundle error<br>
- or just execute the entries in the correct order and expect the user knows what they are doing</p>
<p>thanks</p>



<a name="153974949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Batch%20Bundles%20by%20FHIR%20server/near/153974949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Batch.20Bundles.20by.20FHIR.20server.html#153974949">(Jul 12 2018 at 15:29)</a>:</h4>
<p>From <a href="http://build.fhir.org/http.html#3.1.0.18.1" target="_blank" title="http://build.fhir.org/http.html#3.1.0.18.1">http://build.fhir.org/http.html#3.1.0.18.1</a>: <code>there SHALL be no interdependencies between the different entries in the Bundle that cause change on the server. The success or failure of one change SHOULD not alter the success or failure or resulting content of another change. Servers SHOULD validate that this is the case</code><br>
Multiple updates on the same resource would violate the SHALL and the first SHOULD.  However, the second SHOULD says you don't have to check.  If you do check, you ought to reject the entire batch, but some systems won't bother doing the pre-processing to check and thus some changes will already have been applied.  Some systems might quit processing the batch as soon as they find a problematic request.  Others might reject the problematic request and keep processing the rest of the entries.</p>



<a name="153974951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Batch%20Bundles%20by%20FHIR%20server/near/153974951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zohreh Jabbari <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Batch.20Bundles.20by.20FHIR.20server.html#153974951">(Jul 12 2018 at 15:37)</a>:</h4>
<p>The example for inter-dependencies in the spec was when an update refers to a resource yet to be created; that makes sense since that could cause a failure. where as multiple updates on the same resource doesn't cause a failure and only create a different outcome. Which is why I wasn't sure if this was considered a dependency</p>



<a name="153974955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Batch%20Bundles%20by%20FHIR%20server/near/153974955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Batch.20Bundles.20by.20FHIR.20server.html#153974955">(Jul 12 2018 at 15:47)</a>:</h4>
<p>Multiple updates on the same object create an ordering dependency - and the text indicates that order should not matter due to the no dependency rule.</p>



<a name="153974956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Batch%20Bundles%20by%20FHIR%20server/near/153974956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Batch.20Bundles.20by.20FHIR.20server.html#153974956">(Jul 12 2018 at 15:48)</a>:</h4>
<p>A server could choose to just apply the updates as it encounters them, but it would be allowed to yell.  I presume the multiple updates in the batch were because you wanted to create mirrored history entries?</p>



<a name="153974971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Batch%20Bundles%20by%20FHIR%20server/near/153974971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zohreh Jabbari <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Batch.20Bundles.20by.20FHIR.20server.html#153974971">(Jul 12 2018 at 17:09)</a>:</h4>
<p>makes sense. thanks for clarifying.</p>
<p>I don't have a specific case for multiple updates on a single record, but I assume that might be a common scenario if user creates a batch from different data sources or when running a migration on the data.</p>



<a name="153974973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Batch%20Bundles%20by%20FHIR%20server/near/153974973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Batch.20Bundles.20by.20FHIR.20server.html#153974973">(Jul 12 2018 at 17:15)</a>:</h4>
<p>Grabbing the latest update should generally be sufficient.  The only thing that wouldn't give you is a history that mirrors the history on another system</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
