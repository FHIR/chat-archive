---
layout: page
title: "FHIR Chat  · slice on a non-immediate child · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html">slice on a non-immediate child</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="230586680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230586680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230586680">(Mar 16 2021 at 20:35)</a>:</h4>
<p>Does a slice discriminator path have to be an immediate child of the sliced element?</p>
<p>You can have this:</p>
<div class="codehilite"><pre><span></span><code>        &lt;slicing&gt;
            &lt;discriminator&gt;
               &lt;type value=&quot;value&quot;/&gt;
               &lt;path value=&quot;someelement&quot;/&gt;
</code></pre></div>
<p>But can you have this?</p>
<div class="codehilite"><pre><span></span><code>         &lt;slicing&gt;
            &lt;discriminator&gt;
               &lt;type value=&quot;value&quot;/&gt;
               &lt;path value=&quot;someelement.coding.code&quot;/&gt;    &lt;!-- possible? --&gt;
</code></pre></div>



<a name="230586997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230586997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230586997">(Mar 16 2021 at 20:37)</a>:</h4>
<p>Yep.  That is fine.  In fact, the <a href="http://hl7.org/fhir/R4/bp.html">BP profile</a> does that...  (Although I would have personally preferred a <code>pattern</code> discriminator on <code>code</code> in the BP profile).</p>



<a name="230587729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230587729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230587729">(Mar 16 2021 at 20:42)</a>:</h4>
<p>cool! My aim is to slice on a codeableConcept but just the code and to leave the display optional. If the whole code is fixed then you force a decision on display, in or out.</p>



<a name="230588842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230588842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230588842">(Mar 16 2021 at 20:50)</a>:</h4>
<p>With code, you should generally slices on both code + system - which means it's actually easier to slice by pattern on the Coding</p>



<a name="230589029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230589029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230589029">(Mar 16 2021 at 20:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191651">@Rik Smithies</span> --  Understood.  If you only care about <code>code</code> then that's a good approach.  But if you care about <code>system</code> and <code>code</code>, then you may want to consider using a <code>pattern</code> discriminator on <code>code</code> and <code>patternCodeableConcept</code> to "set" the required  system/code in the slice.  When you use <code>pattern[x]</code>, the unspecified properties (like <code>display</code>) can be any value (or absent).</p>



<a name="230589444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230589444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230589444">(Mar 16 2021 at 20:54)</a>:</h4>
<p>Caring about 'code' and not 'system' in a Coding is a dangerous thing to do... :)</p>



<a name="230589697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230589697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230589697">(Mar 16 2021 at 20:55)</a>:</h4>
<p>I do care about system just hadn't brought it into the discussion, to keep it simpler :) But its good to know I can slice on both.</p>



<a name="230590160"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230590160" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230590160">(Mar 16 2021 at 20:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> -- if you are discriminating on a <code>CodeableConcept</code> to slice some higher-level array (like <code>Observation.component</code>), wouldn't it be preferable to slice on the <code>code</code> rather than <code>code.coding</code>?  If you slice on <code>code.coding</code> then I think that in the slices you need to put the <code>patternCoding</code> on <code>code.coding</code> -- but then to avoid requiring every instance of that <code>Coding</code> to match the pattern, you also have to introduce a new slicing on <code>code.coding</code>, right?  When given the choice between <code>n</code> slicings and <code>n + 1</code> slicings, I almost always choose <code>n</code>!</p>



<a name="230590161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230590161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230590161">(Mar 16 2021 at 20:58)</a>:</h4>
<p>is there an example of using patternCodeableConcept somewhere?</p>



<a name="230590332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230590332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230590332">(Mar 16 2021 at 20:59)</a>:</h4>
<p>US Core Pediatric BMI: <a href="http://www.hl7.org/fhir/us/core/StructureDefinition-pediatric-bmi-for-age.html">http://www.hl7.org/fhir/us/core/StructureDefinition-pediatric-bmi-for-age.html</a></p>



<a name="230590514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230590514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230590514">(Mar 16 2021 at 21:00)</a>:</h4>
<p>It's not in the context of a slice, but if you're just looking for a <code>patternCodeableConcept</code>, it's in there.</p>



<a name="230590616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230590616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230590616">(Mar 16 2021 at 21:01)</a>:</h4>
<p>thanks, I will try to put the pieces together :-)</p>



<a name="230591273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230591273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230591273">(Mar 16 2021 at 21:05)</a>:</h4>
<p>Here's one from mCODE that slices <code>Observation.component</code> on <code>code</code>.  But there's a lot going on in that profile, so it's easy to get lost in the weeds: <a href="https://build.fhir.org/ig/HL7/fhir-mCODE-ig/StructureDefinition-mcode-comorbidities-elixhauser.html">https://build.fhir.org/ig/HL7/fhir-mCODE-ig/StructureDefinition-mcode-comorbidities-elixhauser.html</a></p>



<a name="230592515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230592515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230592515">(Mar 16 2021 at 21:14)</a>:</h4>
<p>I seem to be able to get what I want by going back to descriminating on the child element itself (not the coding or code) and just putting a patternCodeableConcept on the element, rather than a fixedCodeableConcept. I take it that descriminating on a "patterned" element is allowed, as well on as a "fixed" one. It's a checkable constraint I guess.</p>



<a name="230594187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230594187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230594187">(Mar 16 2021 at 21:28)</a>:</h4>
<p>Slicing on component.code is fine.  Slicing on component.code.coding.code without component.code.coding.system would be problematic.</p>



<a name="230594268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230594268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230594268">(Mar 16 2021 at 21:29)</a>:</h4>
<p>Discriminating on pattern is better than fixed because pattern will ignore differences in extensions, display, etc.</p>



<a name="230594587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230594587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230594587">(Mar 16 2021 at 21:31)</a>:</h4>
<p>But note that in R4 if the slices use <code>pattern[x]</code> then the discriminator type needs to be <code>pattern</code> (as opposed to <code>value</code>, which is what you use if the slices use <code>fixed[x]</code>).</p>



<a name="230594734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/slice%20on%20a%20non-immediate%20child/near/230594734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/slice.20on.20a.20non-immediate.20child.html#230594734">(Mar 16 2021 at 21:33)</a>:</h4>
<p>I believe the validator doesn't care</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
