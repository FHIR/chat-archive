---
layout: page
title: "FHIR Chat  · Proposal to remove :recurse  (GF#13602) · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Proposal.20to.20remove.20.3Arecurse.20.20(GF.2313602).html">Proposal to remove :recurse  (GF#13602)</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153924353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Proposal%20to%20remove%20%3Arecurse%20%20%28GF%2313602%29/near/153924353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Proposal.20to.20remove.20.3Arecurse.20.20(GF.2313602).html#153924353">(Dec 11 2017 at 20:50)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13602" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13602">GF#13602</a> relates to the definition of the :recurse modifier on the _include parameter. After discussion on the FHIR-I call about this, we would like to propose to remove the :recurse modifier and just make this the behavior. </p>
<p>our resasoning is that this is something we have observed people to get tripped up by - even the definition is subtle. People just expect _include to work 'recursively' (though that possibly isn't the best word). And all of the potentially circular cascades where this is relevant (Organization.partOf, Observation.related, ValueSet.import, *.basedOn) are self-limiting (though you could imagine organizations that feel infinitely deep!). </p>
<p>so it seems to us that this more complexity than justified; let's just toast the modifier and make it the default behavior. We'll do that if no one objects.</p>



<a name="153924354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Proposal%20to%20remove%20%3Arecurse%20%20%28GF%2313602%29/near/153924354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Proposal.20to.20remove.20.3Arecurse.20.20(GF.2313602).html#153924354">(Dec 11 2017 at 20:51)</a>:</h4>
<p>Note: this would be a breaking change to a FMM 5 artefact, so we'll need to do more consultation than just here.</p>



<a name="153925860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Proposal%20to%20remove%20%3Arecurse%20%20%28GF%2313602%29/near/153925860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Proposal.20to.20remove.20.3Arecurse.20.20(GF.2313602).html#153925860">(Dec 18 2017 at 09:09)</a>:</h4>
<p>To me it looks like :recurse is a way to "Define a graph of resources to return in a query", without the right semantics to ensure consistent behaviour.<br>
e.g.: What if I ask for:</p>
<div class="codehilite"><pre><span></span>[base]/MedicationRequest?_include=requester&amp;_include=performer&amp;_include:recurse=Patient:general-practitioner.
</pre></div>


<p>Do I ask to include the GP's of the requester, the performer or both?<br>
And does this implicitly limit both includes to Patient as well, like below, or do you just request the GP if the requester/performer happens to be a Patient?</p>
<div class="codehilite"><pre><span></span>[base]/MedicationRequest?_include=requester:Patient&amp;_include=performer:Patient&amp;_include:recurse=Patient:general-practitioner.
</pre></div>


<p>And as for the 'recursive' example in the spec:</p>
<div class="codehilite"><pre><span></span>[base]/Observation?_include:recurse=Observation:related-target&amp;criteria...
</pre></div>


<p>where "The second search asks for the _include based on related parameter to be executed recursively" - but to what depth then? And how am I to determine which _include:recurse is meant to be really recursive and which just to _include one link further down the chain?</p>
<p>I deliberately chose the quote in the first sentence because it comes from GraphDefinition. My take would be: eliminate ':recurse' and specify a GraphDefinition if you want similar functionality.</p>



<a name="153925861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Proposal%20to%20remove%20%3Arecurse%20%20%28GF%2313602%29/near/153925861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Proposal.20to.20remove.20.3Arecurse.20.20(GF.2313602).html#153925861">(Dec 18 2017 at 09:10)</a>:</h4>
<p>Apart from that I would love to hear experiences from people using :recurse this in real world scenarios.</p>



<a name="153925928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Proposal%20to%20remove%20%3Arecurse%20%20%28GF%2313602%29/near/153925928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Proposal.20to.20remove.20.3Arecurse.20.20(GF.2313602).html#153925928">(Dec 18 2017 at 14:07)</a>:</h4>
<p>"specify a GraphDefinition" - that's a big thing to do if you "just want the common simple case".   Question is maybe: is there a common, simple case?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
