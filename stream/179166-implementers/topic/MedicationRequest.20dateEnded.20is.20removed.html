---
layout: page
title: "FHIR Chat  · MedicationRequest dateEnded is removed · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html">MedicationRequest dateEnded is removed</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153881434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881434">(Apr 08 2017 at 02:48)</a>:</h4>
<p>Hey, I went through the changelog and figured out for the field <code>dateEnded/reasonEnded in medicationorder</code> there are no corosponding fields in <code>MedicationRequest</code>. I wanted to know why it has been removed ? How else I am supposed to populate this data ? Let me know if I missed a field which is supposed to be replacement of these fields.</p>



<a name="153881436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881436">(Apr 08 2017 at 03:08)</a>:</h4>
<p>A good place to look is in the <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemBrowse&amp;tracker_id=677" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemBrowse&amp;tracker_id=677">GForge trackers</a>  to see the why something has been changed.   These elements are covered by eventHistory. </p>



<a name="153881437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881437">(Apr 08 2017 at 05:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> I tried looking into that but with content "dateEnded" I couldn't find a similar issue. I am not sure how these should be covered in event history, when you stop a Prescription that is the current state and that should not be part of history.</p>



<a name="153881438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881438">(Apr 08 2017 at 05:16)</a>:</h4>
<p>One Idea could be it could be same as dateWritten of Stopped MedicationRequest, but then I am not sure if there could be a scenario when these two could be different </p>



<a name="153881446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881446">(Apr 08 2017 at 11:32)</a>:</h4>
<p>MedicationRequest.reasonEnded and dateEnded were replaced by the "eventHistory" structure, which was originally going to be a backbone element with status, action, date/time, practitioner, and reason per <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=8442" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=8442">GF#8442</a> (looked like this temporarily <a href="http://hl7.org/fhir/2016Sep/medicationorder.html" target="_blank" title="http://hl7.org/fhir/2016Sep/medicationorder.html">http://hl7.org/fhir/2016Sep/medicationorder.html</a>), but then "eventHistory" morphed into the reference to Provenance as part of workflow alignment with the request pattern, <a href="http://build.fhir.org/request.html" target="_blank" title="http://build.fhir.org/request.html">http://build.fhir.org/request.html</a> per <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10733" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10733">GF#10733</a>. <br>
Personally, I would have preferred it to be inline in the resource instead of relying on Provenance.</p>



<a name="153881447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881447">(Apr 08 2017 at 12:03)</a>:</h4>
<p>Note:  we also have <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12144" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12144">GF#12144</a> approved (but not applied) asking for a profile on Provenance within the Request guidance that will provide examples and documentation on how to use Provenance to represent event history</p>



<a name="153881473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881473">(Apr 08 2017 at 21:12)</a>:</h4>
<p><span class="user-mention" data-user-id="192421">@Mritunjay Dubey</span> You just need to MedicationRequest.status to stopped and MedicationRequest.authoredOn to the stop date and MedicationRequest.reasonCode/reasonReference to the stop reason and then link this MedicationRequest with previous one using MedicationRequest.eventHistory</p>



<a name="153881480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881480">(Apr 08 2017 at 23:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> I will just put what I have got from here<br>
When I create a new MedicationRequest, this is how it will look like</p>
<div class="codehilite"><pre><span></span>MedicationRequest1
         status =&gt; ACTIVE
         authoredon =&gt; somedate
</pre></div>


<p>When I  stop it this is the way it should be populated</p>
<div class="codehilite"><pre><span></span>MedicationRequest1
         status =&gt; ACTIVE
         authoredon =&gt; startdate
MedicationRequest2
         status =&gt; STOPPED
         authoredon =&gt; stoppeddate
         reasonCode =&gt; stopreason
         eventhistory =&gt; Provenance.target=MedicationRequest1
</pre></div>


<p>Correct me if I am wrong</p>



<a name="153881482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881482">(Apr 09 2017 at 02:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> <span class="user-mention" data-user-id="192421">@Mritunjay Dubey</span> I disagree with repurposing those elements (specifically, authoredOn and reasonCode).<br>
For example, the MedicationRequest.authoredOn is explicitly defined as "The date (and perhaps time) when the prescription was <strong>initially</strong> written or authored on"</p>



<a name="153881483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881483">(Apr 09 2017 at 02:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> MedicationRequest.eventHistory actually points to Provenance, not to past MedicationRequest version.  (The Provenance points to a past version.)  You should be able to see the history just from looking at the Provenance:<br>
Provenance.period = stopped date (we'll let this be a dateTime in R4)<br>
Provenance.reason = stopped reason<br>
Provenance.activity =  aborted (which is the code that means stopped)<br>
Provenance.target = past version of the prescription</p>



<a name="153881484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881484">(Apr 09 2017 at 02:04)</a>:</h4>
<p>Agree with <span class="user-mention" data-user-id="191360">@Michelle M Miller</span> that the Precription.authoredOn always represents the date the prescription was written and the reason always represents the reason for the prescription.</p>



<a name="153881490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881490">(Apr 09 2017 at 09:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191403">@Michelle (Moseman) Miller</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Even I felt if I will  use <code>authoredOn</code> as dateStopped, it might be not right. I feel there can be a scenario when a doctor can say stop taking a medication in that case dateStopped and authoredOn will be different dates.</p>



<a name="153881491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881491">(Apr 09 2017 at 09:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Here is what is I am confused about, when you say <code>The Provenance points to a past version</code>, and then you say <code>Provenance.period = stopped date etc</code>. I think past medicationrequest  is the one which was initial requested and the latest is the stopped one. So Ideally it should be <code>stopped.provenance=&gt;intitial.reference</code> because initial is the history of stopped  and if this is the case then we will end up populating these fields to the one which was initially created.</p>



<a name="153881492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881492">(Apr 09 2017 at 09:47)</a>:</h4>
<p>Correct me if I am thinking in wrong direction.</p>



<a name="153881497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881497">(Apr 09 2017 at 15:08)</a>:</h4>
<p><span class="user-mention" data-user-id="192421">@Mritunjay Dubey</span> You're correct that if the most recent change is the "stop", that won't show up in the eventHistory.  Instead, there'll be a Provenance instance that directly points to that version that has the relevant information.  To see all relevant Provenances for a record, you need to do an _include on MedicationRequest.eventHistory and a _revinclude on Provenance.target.  (The latter should generally only give you one record.</p>



<a name="153881498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881498">(Apr 09 2017 at 15:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Sorry I didn’t get last two lines. From what I understood I feel a problem. In our use case most of the times A New medicationorder will be placed and in few cases it will be stopped. After a stop there cannot be a recent state for that order means stopped order will never be a history so there won't be any case it to go as Provenance. So I am not sure how would I populate these fields at all, because these can be populated only in a Provenance.</p>



<a name="153881500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881500">(Apr 09 2017 at 16:12)</a>:</h4>
<p>Every time MedicationRequest gets created or changed in any way, a Provenance record should be created that points to the version of the MedicationRequest that was just created.   So, in the simple case of "create order, stop order", you'll have MedicationRequest v1 (status = active, no eventHistory), Provenance1 pointing to MedicationRequest v1 indicating who created it, when, etc.  Then MedicationRequest v2 (status = stopped, eventHistory pointing to Provenance1), Provenance2 pointing to MedicationRequest v2 with information about when the stop occurred, why, who did it, etc.</p>



<a name="153881501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881501">(Apr 09 2017 at 16:22)</a>:</h4>
<p>ohh do you mean every version of request will have atleast one provinence which will be not directly reffered in the request.eventHistory. This will hold the information about current version of resource. </p>



<a name="153881510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881510">(Apr 09 2017 at 18:12)</a>:</h4>
<p>Yes.  Every version of every resource can (and often should) have a Provenance that captures the details about what changed, who did it and why.  So if tracking that information is needed, Provenance is how it's done.</p>



<a name="153881512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881512">(Apr 09 2017 at 20:50)</a>:</h4>
<p>Given that provenance points to the resource it is tracking, is it possible for it to be contained within the resource?</p>



<a name="153881526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881526">(Apr 10 2017 at 01:31)</a>:</h4>
<p>It should be, but there's an invariant that prevents it at the moment (dom-3).  I've submitted <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13187" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13187">GF#13187</a> to fix this.</p>



<a name="153881533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881533">(Apr 10 2017 at 03:33)</a>:</h4>
<p>I've added a note to your tracker on dom-3, I don't like the constraint either.</p>



<a name="153881600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/MedicationRequest%20dateEnded%20is%20removed/near/153881600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/MedicationRequest.20dateEnded.20is.20removed.html#153881600">(Apr 10 2017 at 14:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191403">@Michelle (Moseman) Miller</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Agree.. That is better than what I proposed. Thanks.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
