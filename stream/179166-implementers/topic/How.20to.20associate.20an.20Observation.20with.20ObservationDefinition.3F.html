---
layout: page
title: "FHIR Chat  · How to associate an Observation with ObservationDefinition? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html">How to associate an Observation with ObservationDefinition?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="238029064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238029064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torbjørn Torsvik <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238029064">(May 09 2021 at 11:20)</a>:</h4>
<p>Hi. I'm new to fhir. </p>
<p>Im trying to map a set of lab results in a legacy database to fhir. Originally, each lab result is associated with a "laboratory test type" (eg. s-haemoglobin) which is again associated with a number of reference ranges (eg. this range applies for patients of  this age, sex an so on).  </p>
<p>The Observation resource (<a href="https://www.hl7.org/fhir/observation.html">https://www.hl7.org/fhir/observation.html</a>) has a field for referenceRange, and even seems to supports listing ranges that arent particulary relevant for the result in the observation (eg "This reference range would have applied if the subject had been 20 years younger"). I have a lot of results and would prefer not having to redeclare reference ranges for every single observation. </p>
<p>From what i can read on this forum, there are different ways for representing more general observation information. One strategy is to have a "parent observation" which stores all the general information I don't want to repeat (and no result), and have all the individual results referenced as observations linked via the parents hasMember field (or childs derivedFrom?). </p>
<p>Alternatively, you could use the new ObservationDefinition (right?).  In the "Boundaries and Relationships" section (<a href="https://www.hl7.org/fhir/observationdefinition.html#8.26.2">https://www.hl7.org/fhir/observationdefinition.html#8.26.2</a>) its stated that it can be referenced in Observation.basedOn. However, I can't find ObservationDefinition listed as a valid reference type in the specs (<a href="https://www.hl7.org/fhir/observation-definitions.html#Observation.basedOn">https://www.hl7.org/fhir/observation-definitions.html#Observation.basedOn</a>). Also, from the description ("A plan, proposal or order that is fulfilled in whole or in part by this event") the basedOn field doesnt really look like a good fit for what I want to use the ObservationDefinition for. </p>
<p>Have I misunderstood what ObservationDefinition is supposed to be used for? How (if ever) do you establish a relationship between Observation and ObservationDefinition?</p>



<a name="238036197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238036197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238036197">(May 09 2021 at 13:26)</a>:</h4>
<p>For compatibility with clients it's quite helpful to populate at least <em>one</em> reference range on lab Observations  (specifically: the one that you applied to this patient, resulting in the Interpretation you're assigning to the result.</p>



<a name="238036342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238036342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238036342">(May 09 2021 at 13:30)</a>:</h4>
<p>For a fuller set of reference ranges you could perhaps use an ObservationDefinition, but it's important within an Observation to describe <em>which range</em> applied in this case.</p>



<a name="238036430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238036430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238036430">(May 09 2021 at 13:31)</a>:</h4>
<p>^^ having written this, I don't see how to designate a specific <code>Observation.referenceRange</code> as "the one we applied in determining this <code>Observation.interpretation</code>". Is there a way <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> ?</p>



<a name="238037830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238037830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238037830">(May 09 2021 at 13:59)</a>:</h4>
<p>Typically, observation ranges are used to trigger specific Observation.interpretation values (low, critical high, etc.)  A single Observation can have multiple interpretations and thus, in theory, can have multiple relevant ranges.   If you wanted to tie them together, we'd need an extension - though you could propose a standard extension for that purpose.  Keep in mind that sometimes knowing what the ranges were that <em>didn't</em> trigger an interpretation is still relevant - e.g. "you're <em>just</em> below the 'high' range".</p>
<p>You can't presume that a package of Observations will always be kept together, nor that the ObservationDefinition will always be available to someone accessing the Observation, so standard practice is to repeat the "relevant" reference ranges on each Observation.  Determination of what's 'relevant' is up to the lab.)  Linking from Observation to ObservationDefinition would be done with 'instantiates', though that's only introduced in R5.  You'd need to use an extension in R4.</p>



<a name="238040579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238040579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238040579">(May 09 2021 at 14:47)</a>:</h4>
<p>Based on this review, I would recommend publishing observations with at least one reference range that is relevant for the given interpretation; if including more, I'd avoid including multiple reference ranges for a given type (e.g., at most one critical range, at most one normal range, and so on).</p>



<a name="238041147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238041147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Torbjørn Torsvik <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238041147">(May 09 2021 at 14:58)</a>:</h4>
<p>Thanks for the replies! Josh Mandel, I'm really enjoying your guided walk through fhir. Thank you McKenzie, I'm looking into R5. </p>
<p>So to sum up. You should add relevant reference ranges to the observations in order to ensure their usefulness as isolated entities, since no context is guaranteed. Optionally, you can also tie them to an ObservationDefinition, either using an extension in R4 or by using the instantiates field in R5. I do feel like reference ranges for tests are valid concepts that should also exist outside the scope of each individual observation. I now assume that ObservationDefinition is a valid resource for storing such information (and also preferable to a hierarchy of observations)?</p>



<a name="238059565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238059565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238059565">(May 09 2021 at 20:32)</a>:</h4>
<p>(Thanks for the shout-out on my video series <span class="user-mention" data-user-id="406522">@Torbjørn Torsvik</span>  -- always feel free to send me a direct message or @-mention me here with any suggestions for topics.)</p>



<a name="238064911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238064911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238064911">(May 09 2021 at 22:00)</a>:</h4>
<p>also see <a href="#narrow/stream/179256-Orders-and.20Observation.20WG/topic/ObservationDefinition.20Questions">https://chat.fhir.org/#narrow/stream/179256-Orders-and.20Observation.20WG/topic/ObservationDefinition.20Questions</a></p>



<a name="238080213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238080213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238080213">(May 10 2021 at 02:49)</a>:</h4>
<p>ObservationDefinition is indeed valid for storing 'definitional' ranges (there are often different ones for different genders, age groups or other circumstances.  I don't know that you'd get an ObservationDefinition that applied to a hierarchy of observations - each observation in a panel would have its own definition, each with its own normal ranges, though there might be a parent definition that defined the grouping of the panel</p>



<a name="238730485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238730485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ravishankar P <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238730485">(May 14 2021 at 07:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> can i get some real examples for StructureMapUtils conversions ??</p>



<a name="238831574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20associate%20an%20Observation%20with%20ObservationDefinition%3F/near/238831574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20associate.20an.20Observation.20with.20ObservationDefinition.3F.html#238831574">(May 14 2021 at 21:20)</a>:</h4>
<p>look in the test cases?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
