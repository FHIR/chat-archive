---
layout: page
title: "FHIR Chat  · $convert persist parameter · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24convert.20persist.20parameter.html">$convert persist parameter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="161038641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24convert%20persist%20parameter/near/161038641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24convert.20persist.20parameter.html#161038641">(Mar 18 2019 at 08:16)</a>:</h4>
<p>While implementing $convert I encountered a pattern where our systems would convert an input format and then immediately send a new request to the FHIR Server to store the output of the operation. This often happens when converting non-FHIR content to FHIR, in cases where $transform is not applicable. My question now is, if a "persist" parameter, like in $document, would be out of scope for this operation? Otherwise, we could - in cases where the output is FHIR - infere the resource type and directly store it at the corresponding endpoint, thus saving a round-trip.</p>



<a name="161088049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24convert%20persist%20parameter/near/161088049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24convert.20persist.20parameter.html#161088049">(Mar 18 2019 at 19:23)</a>:</h4>
<p>post or put?</p>



<a name="161088064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24convert%20persist%20parameter/near/161088064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24convert.20persist.20parameter.html#161088064">(Mar 18 2019 at 19:23)</a>:</h4>
<p>or transaction?</p>



<a name="161088072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24convert%20persist%20parameter/near/161088072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24convert.20persist.20parameter.html#161088072">(Mar 18 2019 at 19:23)</a>:</h4>
<p>I feel as though that's a problem</p>



<a name="161436574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24convert%20persist%20parameter/near/161436574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24convert.20persist.20parameter.html#161436574">(Mar 22 2019 at 10:35)</a>:</h4>
<p>I would imagine that use cases exist for all three POST, PUT, and a transaction depending on your input that you want to convert. For a simple JSON &lt;-&gt; XML conversion a PUT would be in order as the resource most likely already contains an ID. However, when converting non-FHIR content, POST / transaction would depend on whether or not a bundle is produced in the end, or just a single resource.</p>



<a name="161436799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24convert%20persist%20parameter/near/161436799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24convert.20persist.20parameter.html#161436799">(Mar 22 2019 at 10:39)</a>:</h4>
<p>It would be nice if we could harmonize the behaviour. For now I would propose to add the persist parameter to get a practical understanding of what's needed by clients. We could define it as "client indicates that it wants to store the converted resources, it's up to the server to figure out which interaction is needed for it".</p>



<a name="161484338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24convert%20persist%20parameter/near/161484338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24convert.20persist.20parameter.html#161484338">(Mar 22 2019 at 21:10)</a>:</h4>
<p>maybe. but why not just do a direct put or post?</p>



<a name="161680498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24convert%20persist%20parameter/near/161680498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24convert.20persist.20parameter.html#161680498">(Mar 25 2019 at 19:44)</a>:</h4>
<p>In my use case the client executing $convert does not care about the content being returned. It’s just a service accepting transformation request from elsewhere. Therefore returning the content and letting the the client figure out whether PUT or POST is appropriate would result in an „unnecessary“‘ round-trip.</p>
<p>I guess it’s the same reason why there is a persist parameter on $document?</p>



<a name="161681988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24convert%20persist%20parameter/near/161681988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24convert.20persist.20parameter.html#161681988">(Mar 25 2019 at 20:02)</a>:</h4>
<p>no I mean, why wouldn't the client just POST or PUT it in the first place?</p>



<a name="161840819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24convert%20persist%20parameter/near/161840819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24convert.20persist.20parameter.html#161840819">(Mar 27 2019 at 09:12)</a>:</h4>
<p>Ahh, ok.  It is being used to do operations like a) extract information from a PDF and convert it into a resource, b) convert a Mapping language file into a StructureMap. In all cases we want to do transformation of binary / unstructured files for which it would be difficult to produce a StructureMap and call $transform.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
