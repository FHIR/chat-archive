---
layout: page
title: "FHIR Chat  · Choices containing Extensions · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html">Choices containing Extensions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153869269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869269">(Jan 26 2017 at 18:22)</a>:</h4>
<p>I'm creating an extension for which it's value is a choice of other extensions.  Looking at the "Extensibility" page in documentation, <code>valueExtension</code> is not listed under possible types for <code>value[x]</code> -- but in the structure for Extension, it shows <code>*</code> for the <code>value[x]</code> type.  So... am I allowed to use <code>valueExtension</code> in Extension's <code>value[x]</code> to indicate an extension as an option within the choice? If allowed, would I set the type's <code>code</code> to <code>Extension</code> and <code>profile</code> to the extension's URI?</p>



<a name="153869278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869278">(Jan 26 2017 at 18:53)</a>:</h4>
<p>I found the relevant documentation on open types, and it seems that despite the <code>*</code>, there is still a certain set of types allowed, and <code>Extension</code> is not one of them.  So does that mean a choice of extensions needs to be implemented using constraints to ensure only one can be chosen?</p>



<a name="153869280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869280">(Jan 26 2017 at 19:03)</a>:</h4>
<p>The inconsistency should be clarified, that's probably a good tracker.</p>



<a name="153869281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869281">(Jan 26 2017 at 19:03)</a>:</h4>
<p>As far as having an extension that is a choice of extensions, yeah, that's probably just multiple extensions with an invariant.</p>



<a name="153869282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869282">(Jan 26 2017 at 19:04)</a>:</h4>
<p>Where you would put that invariant is a good question.</p>



<a name="153869283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869283">(Jan 26 2017 at 19:05)</a>:</h4>
<p>Seems like you could define an extension, and then specify that each of the possible extensions can be applied as an extension to that extension, that would then give you a place to define the invariant.</p>



<a name="153869296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869296">(Jan 26 2017 at 22:25)</a>:</h4>
<p>Yeah, that's what I was thinking.  I wasn't *liking* it, but I was *thinking* it.  Thanks for the confirmation.</p>



<a name="153869301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869301">(Jan 26 2017 at 22:47)</a>:</h4>
<p>So, couldn't you just define a complex extension? What's the benefit of having the sub-elements defined by extensions as opposed to just defined as elements within a complex extension?</p>



<a name="153869303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869303">(Jan 26 2017 at 22:53)</a>:</h4>
<p>Is this the thread you meant to reply to?  It almost sounds like you're talking about the other thread I just started.  But I'll attempt to answer for both threads.</p>
<p>(1 - This thread) -- It would be nicer to be able to use the value[x] for choices because it's much simpler and more obvious than invariants.<br>
(2 - Other thread) -- I don't want to fully define the sub-extensions inline because that hinders their re-usability.  Now there isn't a way for a system to know for sure that a sub-extension in A represents the same thing as another sub-extension in B.  And now I have to define the same sub-extension twice as well.</p>



<a name="153869402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869402">(Jan 27 2017 at 23:16)</a>:</h4>
<p>You don't even need to have an invariant - just slice on Extension.extension</p>



<a name="153869403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869403">(Jan 27 2017 at 23:17)</a>:</h4>
<p>Or, if you wish, just set Extension.extension to have a value set listing permitted URLs.</p>



<a name="153869470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Choices%20containing%20Extensions/near/153869470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Choices.20containing.20Extensions.html#153869470">(Jan 30 2017 at 13:04)</a>:</h4>
<p>Hi Lloyd.  I was thinking I'd need in invariant because I'd have to set the cardinality low to 0 on all slices of the extension (since a choice implies that any of them might be 0 card) -- but I'd need the invariant to force that one of them must exist in the data.</p>
<p>I hadn't thought about using a value set to list permitted extension URLs.  Now that is an interesting idea!  Thanks for your help.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
