---
layout: page
title: "FHIR Chat  · FHIR validator with STU3 resources · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20validator.20with.20STU3.20resources.html">FHIR validator with STU3 resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="200176759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20validator%20with%20STU3%20resources/near/200176759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ravindra Kondiparthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20validator.20with.20STU3.20resources.html#200176759">(Jun 09 2020 at 02:24)</a>:</h4>
<p>Hi,</p>
<p>Looking for some help with FHIR validator. Any help is appreciated.</p>
<p>I am getting below error when validating resources with FHIR validator.  My top/parent resource have contained resource which in turn has a local reference.</p>
<p><strong>Error</strong><br>
ref-1: SHALL have a contained resource if a local reference is provided ( (url: prac1234; ids: )) [reference.startsWith('#').not() or (reference.substring(1).trace('url') in %resource.contained.id.trace('ids'))]</p>
<p><strong>Example:</strong><br>
{<br>
resourceType:”ExplanationOfBenefit”,<br>
contained:[<br>
{<br>
resourceType:”Practitioner”,<br>
id:”prac1234”<br>
},<br>
{<br>
resourceType:”PractitionerRole”,<br>
practitioner:”#prac1234”<br>
}<br>
]<br>
}</p>
<p>Thanks<br>
Ravi</p>



<a name="200178021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20validator%20with%20STU3%20resources/near/200178021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20validator.20with.20STU3.20resources.html#200178021">(Jun 09 2020 at 02:59)</a>:</h4>
<p>Most likely a bug in the validator, it came up recently: <a href="#narrow/stream/179166-implementers/topic/References.20between.20contained.20resources">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/References.20between.20contained.20resources</a></p>



<a name="200181221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20validator%20with%20STU3%20resources/near/200181221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ravindra Kondiparthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20validator.20with.20STU3.20resources.html#200181221">(Jun 09 2020 at 04:24)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="191912">@Michele Mottini</span></p>



<a name="200223592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20validator%20with%20STU3%20resources/near/200223592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20validator.20with.20STU3.20resources.html#200223592">(Jun 09 2020 at 13:05)</a>:</h4>
<p>...having said that the double-contained resource would make life hard for clients (our will choke on it I am pretty sure)</p>



<a name="200227722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20validator%20with%20STU3%20resources/near/200227722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20validator.20with.20STU3.20resources.html#200227722">(Jun 09 2020 at 13:36)</a>:</h4>
<p>They are not double-contained, are they? They are siblings. Or did you mean the intra-contained reference?</p>



<a name="200231538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20validator%20with%20STU3%20resources/near/200231538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20validator.20with.20STU3.20resources.html#200231538">(Jun 09 2020 at 14:00)</a>:</h4>
<p>I mean that example above - with one contained referencing its sibling contained. Most clients would look in the wrong place to resolve that reference (as the validator is doing)</p>



<a name="200233926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20validator%20with%20STU3%20resources/near/200233926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20validator.20with.20STU3.20resources.html#200233926">(Jun 09 2020 at 14:15)</a>:</h4>
<p>What you're doing is legal according to the spirit of the spec, but illegal according to how we've written an invariant in R4 unfortunately.  We're going to try to fix that for R5.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
