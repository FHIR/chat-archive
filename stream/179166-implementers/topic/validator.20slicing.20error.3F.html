---
layout: page
title: "FHIR Chat  · validator slicing error? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html">validator slicing error?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="272821765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/272821765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#272821765">(Feb 22 2022 at 15:49)</a>:</h4>
<p>I get a lot of "Slicing cannot be evaluated: Profile based discriminators must have a type with a profile", but I don't know what to do.</p>



<a name="272825260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/272825260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#272825260">(Feb 22 2022 at 16:10)</a>:</h4>
<p>Declare the 'type' element in the differential, not just the profile</p>



<a name="272829855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/272829855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#272829855">(Feb 22 2022 at 16:38)</a>:</h4>
<p>I get these errors for STU3 Profiles, was it a hard rule then too?<br>
Other problem is that the profiles are not mine, but from our national institute.</p>



<a name="272832450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/272832450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#272832450">(Feb 22 2022 at 16:54)</a>:</h4>
<p>It has this in the differential element, is that what you mean <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> </p>
<div class="codehilite"><pre><span></span><code>&quot;type&quot;:  [ {
  &quot;code&quot;: &quot;Reference&quot;,
  &quot;targetProfile&quot;: &quot;http://fhir.nl/fhir/StructureDefinition/nl-core-patient&quot;
   }
]
</code></pre></div>



<a name="272833344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/272833344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#272833344">(Feb 22 2022 at 17:00)</a>:</h4>
<p>Yes, that's what I meant.  It may be that in STU3, it only worked with "profile", not "targetProfile"?  I'm not sure...</p>



<a name="272836054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/272836054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#272836054">(Feb 22 2022 at 17:17)</a>:</h4>
<p>If I change the targetProfile to profile I get 3 times the above mentioned error... <span aria-label="flushed" class="emoji emoji-1f633" role="img" title="flushed">:flushed:</span></p>



<a name="272836164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/272836164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#272836164">(Feb 22 2022 at 17:18)</a>:</h4>
<p>I see now, 3 for each type.</p>



<a name="272836331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/272836331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#272836331">(Feb 22 2022 at 17:19)</a>:</h4>
<p>This is the profile: <a href="https://simplifier.net/packages/nictiz.fhir.nl.stu3.zib2017/1.3.6/files/118787">https://simplifier.net/packages/nictiz.fhir.nl.stu3.zib2017/1.3.6/files/118787</a></p>



<a name="272842198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/272842198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#272842198">(Feb 22 2022 at 17:59)</a>:</h4>
<p>Here is how I sliced contained on profile:</p>
<div class="codehilite"><pre><span></span><code>      {
        &quot;id&quot;: &quot;Organization.contained&quot;,
        &quot;path&quot;: &quot;Organization.contained&quot;,
        &quot;slicing&quot;: {
          &quot;discriminator&quot;: [
            {
              &quot;type&quot;: &quot;profile&quot;,
              &quot;path&quot;: &quot;$this&quot;
            }
          ],
          &quot;rules&quot;: &quot;closed&quot;,
          &quot;description&quot;: &quot;The specific resources that are needed for a Establishment organization.&quot;
        },
        &quot;min&quot;: 1
      },
      {
        &quot;id&quot;: &quot;Organization.contained:BusinessOperation&quot;,
        &quot;path&quot;: &quot;Organization.contained&quot;,
        &quot;sliceName&quot;: &quot;BusinessOperation&quot;,
        &quot;min&quot;: 1,
        &quot;max&quot;: &quot;*&quot;,
        &quot;type&quot;: [
          {
            &quot;code&quot;: &quot;HealthcareService&quot;,
            &quot;profile&quot;: [
              &quot;http://hl7.org/fhir/us/spl/StructureDefinition/EstablishmentBusinessOperation&quot;
            ]
          }
        ],
        &quot;mustSupport&quot;: true
      },
      {
        &quot;id&quot;: &quot;Organization.contained:USAgentAffiliation&quot;,
        &quot;path&quot;: &quot;Organization.contained&quot;,
        &quot;sliceName&quot;: &quot;USAgentAffiliation&quot;,
        &quot;min&quot;: 0,
        &quot;max&quot;: &quot;1&quot;,
        &quot;type&quot;: [
          {
            &quot;code&quot;: &quot;OrganizationAffiliation&quot;,
            &quot;profile&quot;: [
              &quot;http://hl7.org/fhir/us/spl/StructureDefinition/USAgentAffiliation&quot;
            ]
          }
        ],
        &quot;mustSupport&quot;: true
      },
      {
        &quot;id&quot;: &quot;Organization.contained:USAgent&quot;,
        &quot;path&quot;: &quot;Organization.contained&quot;,
        &quot;sliceName&quot;: &quot;USAgent&quot;,
        &quot;min&quot;: 0,
        &quot;max&quot;: &quot;1&quot;,
        &quot;type&quot;: [
          {
            &quot;code&quot;: &quot;Organization&quot;,
            &quot;profile&quot;: [
              &quot;http://hl7.org/fhir/us/spl/StructureDefinition/USAgentOrganization&quot;
            ]
          }
        ],
        &quot;mustSupport&quot;: true
      },
      {
        &quot;id&quot;: &quot;Organization.contained:ImporterAffiliation&quot;,
        &quot;path&quot;: &quot;Organization.contained&quot;,
        &quot;sliceName&quot;: &quot;ImporterAffiliation&quot;,
        &quot;min&quot;: 0,
        &quot;max&quot;: &quot;*&quot;,
        &quot;type&quot;: [
          {
            &quot;code&quot;: &quot;OrganizationAffiliation&quot;,
            &quot;profile&quot;: [
              &quot;http://hl7.org/fhir/us/spl/StructureDefinition/ImporterAffiliation&quot;
            ]
          }
        ],
        &quot;mustSupport&quot;: true
      },
      {
        &quot;id&quot;: &quot;Organization.contained:Importer&quot;,
        &quot;path&quot;: &quot;Organization.contained&quot;,
        &quot;sliceName&quot;: &quot;Importer&quot;,
        &quot;min&quot;: 0,
        &quot;max&quot;: &quot;*&quot;,
        &quot;type&quot;: [
          {
            &quot;code&quot;: &quot;Organization&quot;,
            &quot;profile&quot;: [
              &quot;http://hl7.org/fhir/us/spl/StructureDefinition/ImporterOrganization&quot;
            ]
          }
        ],
        &quot;mustSupport&quot;: true
      },
</code></pre></div>



<a name="272842401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/272842401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#272842401">(Feb 22 2022 at 18:00)</a>:</h4>
<p>it might not apply to what you are doing because Contained has resources directly and not via reference.</p>



<a name="272855139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/272855139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#272855139">(Feb 22 2022 at 19:32)</a>:</h4>
<p>I think I get it. This is sliced on entry, which is an array. But the discriminator is of type profile, but the profile is at the "item" attribute.<br>
Don't know what to change to make this work, though :-(</p>
<div class="codehilite"><pre><span></span><code>    &lt;element id=&quot;List.entry&quot;&gt;
      &lt;path value=&quot;List.entry&quot; /&gt;
      &lt;slicing&gt;
        &lt;discriminator&gt;
          &lt;type value=&quot;profile&quot; /&gt;
          &lt;path value=&quot;item.reference.resolve()&quot; /&gt;
        &lt;/discriminator&gt;
        &lt;rules value=&quot;open&quot; /&gt;
      &lt;/slicing&gt;
    &lt;/element&gt;
    &lt;element id=&quot;List.entry:MedicationAgreement&quot;&gt;
      &lt;path value=&quot;List.entry&quot; /&gt;
      &lt;sliceName value=&quot;MedicationAgreement&quot; /&gt;
    &lt;/element&gt;
    &lt;element id=&quot;List.entry:MedicationAgreement.item&quot;&gt;
      &lt;path value=&quot;List.entry.item&quot; /&gt;
      &lt;type&gt;
        &lt;code value=&quot;Reference&quot; /&gt;
        &lt;targetProfile value=&quot;http://nictiz.nl/fhir/StructureDefinition/zib-MedicationAgreement&quot; /&gt;
        &lt;aggregation value=&quot;bundled&quot; /&gt;
      &lt;/type&gt;
    &lt;/element&gt;
</code></pre></div>



<a name="273050022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/273050022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#273050022">(Feb 24 2022 at 05:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191421">@Michael van der Zel</span>  can you put this in a test case? Just an instance that shows the problem. I think that what you have there shouldn't give this error, and there's some problem in the discriminator evaluation somewhere, but just inspecting the code, I'm not sure</p>



<a name="273071899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/273071899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#273071899">(Feb 24 2022 at 10:35)</a>:</h4>
<p>I shall try.</p>



<a name="273275945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/273275945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#273275945">(Feb 25 2022 at 19:44)</a>:</h4>
<p>thanks. fixed next release</p>



<a name="274532254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/274532254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#274532254">(Mar 08 2022 at 12:10)</a>:</h4>
<p>Still getting a lot of "Slicing cannot be evaluated: Could not match discriminator ([system]) for slice Medication.ingredient.item[x]:itemCodeableConcept.coding:ingredientCodeATCCodelijst in profile <a href="http://nictiz.nl/fhir/StructureDefinition/zib-Product">http://nictiz.nl/fhir/StructureDefinition/zib-Product</a> - the discriminator [system] does not have fixed value, binding or existence assertions", but all with the same Profile. Will investigate first.</p>



<a name="274614836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/274614836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Lyn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#274614836">(Mar 08 2022 at 22:09)</a>:</h4>
<p>(deleted)</p>



<a name="274614944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/274614944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Lyn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#274614944">(Mar 08 2022 at 22:10)</a>:</h4>
<p>New to FHIR, but generating an admit notification bundle, and getting errors in <a href="http://simplifier.net">simplifier.net</a> of "unknown symbol 'resolve', and using the java.jar validator, lots of "does not match any known slice" errors.    <br>
To validate, I tried to run the example bundle at <a href="https://hl7.org/fhir/us/davinci-alerts/STU1/Bundle-admit-notification-message-bundle-01.html">https://hl7.org/fhir/us/davinci-alerts/STU1/Bundle-admit-notification-message-bundle-01.html</a> through, and I get the exact same errors.   Has anyone else experienced this?</p>



<a name="274651324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/274651324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael van der Zel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#274651324">(Mar 09 2022 at 07:24)</a>:</h4>
<p>Can you show us the profile? Usually has something to do with the discriminator.</p>



<a name="274670710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/274670710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#274670710">(Mar 09 2022 at 10:52)</a>:</h4>
<p><span class="user-mention" data-user-id="484431">@Jake Lyn</span> The <code>unknown symbol 'resolve'</code> might not mean much, that's on Simplifier's side currently not supporting the <code>resolve()</code> FHIRPath function in validation.<br>
Here is a snippet with that example: <a href="https://simplifier.net/snippet/wardweistra/32">https://simplifier.net/snippet/wardweistra/32</a>. Can you indicate what slices the Java validator complains about?</p>



<a name="274685252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/274685252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Lyn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#274685252">(Mar 09 2022 at 13:15)</a>:</h4>
<p>I'm using the hl7.fhir.us.davinci-alerts profile.  Running that example Ward provided through the java validator, just about every entry gives a slicing warning with the exact same warning (slice 1-8 have this warning, and messageheader.focus[0]).</p>
<p>This element does not match any known slicedefined_in_the_profilehttp://hl7.org/fhir/us/davinci-alerts/StructureDefinition/notifications-bundle<br>
Bundle.entry[1]: discriminator = true and (resource is MessageHeader)</p>
<p>It also gives errors while it's trying to find the "References" for location, subject, individual, etc:<br>
Bundled or contained reference not found within the bundle/resource urn:uuid:06e1f0dd-5fbe-4480-9bb4-6b54ec02d31b</p>
<p>almost seems like it has trouble with urn:uuid references</p>



<a name="275305019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validator%20slicing%20error%3F/near/275305019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validator.20slicing.20error.3F.html#275305019">(Mar 14 2022 at 22:12)</a>:</h4>
<p>what exact parameters are you passing into the validator?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
