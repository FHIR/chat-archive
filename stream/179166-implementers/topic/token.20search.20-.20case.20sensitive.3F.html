---
layout: page
title: "FHIR Chat  · token search - case sensitive? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html">token search - case sensitive?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="269590504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269590504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lital Inghel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269590504">(Jan 27 2022 at 15:39)</a>:</h4>
<p>Should code and code system parameters values be case sensitive?    <br>
It's not very clear from FHIR spec, not sure what should we implement  <br>
<a href="http://hl7.org/fhir/R4/search.html#token">http://hl7.org/fhir/R4/search.html#token</a></p>



<a name="269591515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269591515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269591515">(Jan 27 2022 at 15:46)</a>:</h4>
<p>I’d go for case insensitive</p>



<a name="269591748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269591748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269591748">(Jan 27 2022 at 15:47)</a>:</h4>
<p>It is not required but recommended that server support case insensitive token search.<br>
"When in doubt, servers SHOULD treat tokens in a case-insensitive manner, on the grounds that including undesired data has less safety implications than excluding desired behavior"</p>



<a name="269591874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269591874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269591874">(Jan 27 2022 at 15:48)</a>:</h4>
<p>I remember from earlier discussions that there are some code systems that are case sensitive (whereas others are not), so you'd better beware.</p>



<a name="269592176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269592176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269592176">(Jan 27 2022 at 15:50)</a>:</h4>
<p>Yes, Code system could use <code>CodeSystem.caseSensitive</code> to enforce that.</p>



<a name="269592339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269592339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269592339">(Jan 27 2022 at 15:51)</a>:</h4>
<p>.. which means that a server can't <em>only</em> support case-insentive search, unless one is sure that one would never have to deal with a cases sensitive coding system.</p>



<a name="269593223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269593223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269593223">(Jan 27 2022 at 15:56)</a>:</h4>
<p>Just read this sentence several times: "Match is case sensitive unless the underlying semantics for the context indicate that the token should be interpreted case-insensitively (see, e.g. CodeSystem.caseSensitive)."  This seems suggest that server SHALL treat token as case sensitive unless CodeSystem specifically says <code>CodeSystem.caseSensitive=false</code>. That is contradict to the sentence that "When in doubt, servers SHOULD treat tokens in a case-insensitive manner," ????</p>



<a name="269593354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269593354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269593354">(Jan 27 2022 at 15:57)</a>:</h4>
<p>We just implemented case sensitive and left it at that.</p>



<a name="269593542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269593542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269593542">(Jan 27 2022 at 15:58)</a>:</h4>
<p>So the default of <code>CodeSystem.caseSensitive</code> is true. Hmm, that is not what I thought.</p>



<a name="269610372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269610372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lital Inghel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269610372">(Jan 27 2022 at 17:49)</a>:</h4>
<p>got confused, so better to implement case sensitive as this shall be the default by the IG?</p>



<a name="269618897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269618897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269618897">(Jan 27 2022 at 18:45)</a>:</h4>
<p>I've come across very few instances where case-sensitivity solved a problem rather than created one. Especially where humans may be involved in trying to search for things. </p>
<p>UCUM is the one example I can even think of that has meaningful/necessary case sensitivity, and I'm hard pressed to find examples where there would be meaningful ambiguity if you ignored case on search. 'K' (kelvin) vs 'k' kilo? But those would not be likely used in the same context. Perhaps someone can think of an example where it may bite you?</p>



<a name="269619440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269619440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269619440">(Jan 27 2022 at 18:49)</a>:</h4>
<p>'Ms' mega-second vs 'ms' millisecond maybe? That's quite a few orders of magnitude though.</p>



<a name="269619887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269619887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269619887">(Jan 27 2022 at 18:52)</a>:</h4>
<p>I have not seen any major code system other than UCUM where k and K don't have the same meaning. I'm sure somebody will be able to say, "in the national code system of Latveria D means Dr. Doom and d means doom (yours)." Since we know there is at least one system where case matters, then I think that treating all (unless otherwise known) as case sensitive is the safe route.</p>



<a name="269642729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269642729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269642729">(Jan 27 2022 at 21:43)</a>:</h4>
<p>URIs are always case sensitive.  (So do your best to get the case right.)  However, it's reasonable and desirable for systems to transparently handle case errors.  And anyone who deliberately creates URIs that differ only by case and the difference is semantically meaningful should be taken out behind the barn...</p>



<a name="269642888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269642888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269642888">(Jan 27 2022 at 21:44)</a>:</h4>
<p>mostly true.. but http URIs the hostname is case insensitive.</p>



<a name="269644079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269644079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269644079">(Jan 27 2022 at 21:50)</a>:</h4>
<p>... DNS - it's always DNS.</p>



<a name="269646046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269646046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269646046">(Jan 27 2022 at 22:02)</a>:</h4>
<p>explicitly so: IETF <a href="https://datatracker.ietf.org/doc/html/rfc3986">RFC3986</a> section 3.2.2</p>



<a name="269646097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269646097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269646097">(Jan 27 2022 at 22:02)</a>:</h4>
<p>note that escape (percent encoding) are also case insensitive</p>



<a name="269648325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269648325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269648325">(Jan 27 2022 at 22:16)</a>:</h4>
<p>although the recommendation is to always lowercase the hostnames, and uppercase percent encodings... love that consistency.</p>



<a name="269648606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269648606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269648606">(Jan 27 2022 at 22:18)</a>:</h4>
<p>don't forget that latest discussions have back-slash treated as forward-slash...</p>



<a name="269648646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269648646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269648646">(Jan 27 2022 at 22:18)</a>:</h4>
<p>note these all came to light in securty attacks</p>



<a name="269649189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269649189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269649189">(Jan 27 2022 at 22:23)</a>:</h4>
<p>makes OIDs look better all the time</p>



<a name="269966771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/token%20search%20-%20case%20sensitive%3F/near/269966771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F.html#269966771">(Jan 31 2022 at 00:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191404">John Moehrke</span> <a href="#narrow/stream/179166-implementers/topic/token.20search.20-.20case.20sensitive.3F/near/269649189">said</a>:</p>
<blockquote>
<p>makes OIDs look better all the time</p>
</blockquote>
<p>Let's start a movement!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
