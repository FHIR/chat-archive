---
layout: page
title: "FHIR Chat  · json-schema · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html">json-schema</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153865116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865116">(Dec 30 2016 at 19:07)</a>:</h4>
<p>I'm working on qa issues prior to publishing STU3. One on my list is validating the json-schemas - they are not quite valid right now. </p>



<a name="153865117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865117">(Dec 30 2016 at 19:07)</a>:</h4>
<p>I'm hoping I can get some help with this...</p>



<a name="153865118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865118">(Dec 30 2016 at 19:07)</a>:</h4>
<p>I'm not sure what the id should be for the json schemas; does anyone have any comments?</p>



<a name="153865125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865125">(Dec 30 2016 at 21:24)</a>:</h4>
<p>What id do you mean? Attribute <code>id</code>  in a root object?</p>



<a name="153865126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865126">(Dec 30 2016 at 21:26)</a>:</h4>
<p>It's related to how $ref's are resolved. <a href="https://github.com/json-schema/json-schema/wiki/The-id-keyword" target="_blank" title="https://github.com/json-schema/json-schema/wiki/The-id-keyword">https://github.com/json-schema/json-schema/wiki/The-id-keyword</a></p>



<a name="153865128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865128">(Dec 30 2016 at 21:50)</a>:</h4>
<p>yes, that's the one. how should we use it </p>



<a name="153865130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865130">(Dec 30 2016 at 21:57)</a>:</h4>
<p>it depends on how we are going $ref-erence </p>



<a name="153865131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865131">(Dec 30 2016 at 21:58)</a>:</h4>
<p>one option-  do not use it at all</p>



<a name="153865132"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865132" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865132">(Dec 30 2016 at 22:01)</a>:</h4>
<p>it had been my intent that it would be the canonical reference to the schema - the way we usually do it </p>



<a name="153865133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865133">(Dec 30 2016 at 22:09)</a>:</h4>
<p>most convenient distribution format - put everything in one file - so json schema engine does not need resolve external refs . In   one file we could use json pointers -  #/definitions/Patient</p>



<a name="153865134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865134">(Dec 30 2016 at 22:11)</a>:</h4>
<p>because all resources are cross-referencing (contained element) - and most of engines are eagerly loading all references  - i think, this is right way</p>



<a name="153865135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865135">(Dec 30 2016 at 22:19)</a>:</h4>
<p><a href="https://github.com/json-schema-org/json-schema-spec/issues/66" target="_blank" title="https://github.com/json-schema-org/json-schema-spec/issues/66">https://github.com/json-schema-org/json-schema-spec/issues/66</a> here is a long discussion about problems with $ref resolution - so lets keep it simple </p>



<a name="153865136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865136">(Dec 31 2016 at 00:16)</a>:</h4>
<p>ok that's sort of a persausive argument. </p>



<a name="153865137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865137">(Dec 31 2016 at 00:19)</a>:</h4>
<p>so there's no point generating single schema then. What's the correct schema reference for a type then?</p>



<a name="153865138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865138">(Dec 31 2016 at 03:52)</a>:</h4>
<p>as in, from outside the schema (already using the correct one internally)</p>



<a name="153865144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865144">(Dec 31 2016 at 08:00)</a>:</h4>
<p>Not sure, I understand question.  You could reference by absolute, relative uri (resolved using id as base or if no id - current document location) + fragment ( #id or #/json/pointer). So formula is uri#/json/pointer (referencing by id inside doc is not common for json schema). You could ref like -  datatypes.json#/definitions/HumanName  - like a common logic of links resolution, but where #id replaced by #/json-pointer. We can generate schema per resource/type and use only uri part fo referencing</p>



<a name="153865147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865147">(Dec 31 2016 at 19:27)</a>:</h4>
<p>if I generate schema per resource type, then I need to give them an id. At least experimentally that was true. I'm generating a single schema now, with no id, and it validates all the resources</p>



<a name="153865179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865179">(Jan 01 2017 at 18:31)</a>:</h4>
<p>How do you handle bundle and contained resources (anyOf - is not exactly what we need) and polymorphic elements (again :) We use discriminator to dispatch to specific schema in bundle or in contained (<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#models-with-polymorphism-support" target="_blank" title="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#models-with-polymorphism-support">https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#models-with-polymorphism-support</a>) and introduced new extension for json-schema - exclusiveProperties to describe polymorphic elements.</p>



<a name="153865180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865180">(Jan 01 2017 at 18:35)</a>:</h4>
<p>well, for json-schema I'm generating oneOf. We agreed that I would use the swagger extension for swagger, but I haven't done the swagger generation yet - looks like that will be in Feb</p>



<a name="153865181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153865181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153865181">(Jan 01 2017 at 18:38)</a>:</h4>
<p>We also could add FHIR specific extensions for json-schema - for example binding keyword and reference - to validate codes and references.</p>



<a name="153879948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/json-schema/near/153879948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/json-schema.html#153879948">(Mar 27 2017 at 20:19)</a>:</h4>
<p>Paper about Foundation of JSON-schema - <a href="http://www2016.net/proceedings/proceedings/p263.pdf" target="_blank" title="http://www2016.net/proceedings/proceedings/p263.pdf">http://www2016.net/proceedings/proceedings/p263.pdf</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
