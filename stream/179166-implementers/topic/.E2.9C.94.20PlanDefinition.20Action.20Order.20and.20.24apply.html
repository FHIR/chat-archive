---
layout: page
title: "FHIR Chat  · ✔ PlanDefinition Action Order and $apply · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20PlanDefinition.20Action.20Order.20and.20.24apply.html">✔ PlanDefinition Action Order and $apply</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="265607089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20PlanDefinition%20Action%20Order%20and%20%24apply/near/265607089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20PlanDefinition.20Action.20Order.20and.20.24apply.html#265607089">(Dec 20 2021 at 19:37)</a>:</h4>
<p>When using $apply, does the order of actions as they appear in the PlanDefinition matter? For example, is it expected behaviour that if action 1 appears first followed by action 2 this will result in the same output as $apply acting on a PlanDefinition with action 2 appearing first followed by action 2?</p>



<a name="265611584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20PlanDefinition%20Action%20Order%20and%20%24apply/near/265611584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20PlanDefinition.20Action.20Order.20and.20.24apply.html#265611584">(Dec 20 2021 at 20:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>



<a name="266714207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20PlanDefinition%20Action%20Order%20and%20%24apply/near/266714207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20PlanDefinition.20Action.20Order.20and.20.24apply.html#266714207">(Jan 03 2022 at 17:38)</a>:</h4>
<p>That is how most systems currently process them, however the spec doesn't really specify that. To create true ordering you need to state it explicitly using relatedAction elements. In the eCR IG, we enforce a subset of behaviors in this regard to make processing easier. Specifically, we only allow forward references: <a href="http://build.fhir.org/ig/HL7/case-reporting/electronic_reporting_and_surveillance_distribution_ersd_transaction_and_profiles.html#process">http://build.fhir.org/ig/HL7/case-reporting/electronic_reporting_and_surveillance_distribution_ersd_transaction_and_profiles.html#process</a></p>



<a name="266714218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20PlanDefinition%20Action%20Order%20and%20%24apply/near/266714218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20PlanDefinition.20Action.20Order.20and.20.24apply.html#266714218">(Jan 03 2022 at 17:38)</a>:</h4>
<p><span class="user-mention" data-user-id="401577">@Kyle Thompson</span></p>



<a name="267190502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20PlanDefinition%20Action%20Order%20and%20%24apply/near/267190502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20PlanDefinition.20Action.20Order.20and.20.24apply.html#267190502">(Jan 07 2022 at 13:47)</a>:</h4>
<p>Do you think it would be problematic for a system to assume that permutations of actions in PlanDefinitions should always result in the same output and that if ordering does matter that it should be stated explicitly (as you suggested)?</p>
<p>To me, requiring the system to process actions assuming ordering is explicitly captured as relatedActions, and if it isn't, then to not behave as the ordering doesn't matter makes a lot of sense.</p>



<a name="267201137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20PlanDefinition%20Action%20Order%20and%20%24apply/near/267201137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20PlanDefinition.20Action.20Order.20and.20.24apply.html#267201137">(Jan 07 2022 at 15:22)</a>:</h4>
<p>Yes, the specification should be more clear about that, the PlanDefinition $apply behavior is vague right now, just saying "processing is performed for each action element". In the Workflow subworkgroup, we've been working through mapping PlanDefinition to and from BPMN, and that's helped clarify some of those semantics, and there is the <a href="https://github.com/cqframework/pd-apply">pd-apply</a> that we're using for testing.</p>



<a name="267201217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20PlanDefinition%20Action%20Order%20and%20%24apply/near/267201217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20PlanDefinition.20Action.20Order.20and.20.24apply.html#267201217">(Jan 07 2022 at 15:22)</a>:</h4>
<p>That will result in some proposed changes to the specification to clarify the processing semantics.</p>



<a name="267204585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20PlanDefinition%20Action%20Order%20and%20%24apply/near/267204585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20PlanDefinition.20Action.20Order.20and.20.24apply.html#267204585">(Jan 07 2022 at 15:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="401577">Kyle Thompson</span> has marked this topic as resolved.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
