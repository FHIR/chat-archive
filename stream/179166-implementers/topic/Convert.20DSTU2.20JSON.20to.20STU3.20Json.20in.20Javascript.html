---
layout: page
title: "FHIR Chat  · Convert DSTU2 JSON to STU3 Json in Javascript · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html">Convert DSTU2 JSON to STU3 Json in Javascript</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="156529557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/156529557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Murari Kirankumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#156529557">(Jan 21 2019 at 11:22)</a>:</h4>
<p>As the site implementation, we want to convert the DSTU2 JSON Version to STU3 JSON Version. Can someone suggest me if it is done already or if you have any ideas on how to implement in Javascript?</p>



<a name="156542395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/156542395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#156542395">(Jan 21 2019 at 15:12)</a>:</h4>
<p>StructureMaps to convert between DSTU2 and STU3 (independent of syntax) are published as part of the STU3 spec.  However, I'm not aware of anyone who's implemented the StructureMap $transform operation in Javascript yet.  The FHIRPath engine was only recently implemented.  You could either work on $transform to leverage the existing mappings or use them to inform hand-coded transformations of the things you care about.</p>



<a name="177246552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/177246552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gina <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#177246552">(Oct 03 2019 at 13:58)</a>:</h4>
<p>To sort of piggy back on this question. Is there any tools/engines out there that developers can use to do the translation from DSTU2 to STU3 in Java? Or maybe even a plugin like I see Eclipse has for HL7 V2 to V3 Mapping and Transformation. Thank you in advance!</p>



<a name="177278638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/177278638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#177278638">(Oct 03 2019 at 19:33)</a>:</h4>
<p>Can anyone comment on what the options are to convert DSTU2 to STU3?  I understand that there are StrucutreMaps containing the mappings published with the spec.  Is there tooling that can interpret these and actually perform the conversions?  I'm assuming yet, but having a difficult time finding anything.   Are there other options as well ? Perhaps FHIR Mapping Language (mappings/tooling available)?  Thanks!</p>



<a name="177280890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/177280890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#177280890">(Oct 03 2019 at 19:54)</a>:</h4>
<p>HAPI includes an engine that can run those conversions - see StructureMapUtilities. And it also includes an example for how to run it (it's a little tricky to set up. It's on my todo list with James to can a conversion service that does all that)</p>



<a name="177281604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/177281604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#177281604">(Oct 03 2019 at 20:00)</a>:</h4>
<p>that'd be really cool...</p>



<a name="177289394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/177289394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#177289394">(Oct 03 2019 at 21:19)</a>:</h4>
<p>I think we have a stub somewhere to fill out....</p>



<a name="177716865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/177716865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#177716865">(Oct 09 2019 at 14:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <br>
I'm trying to make sense of this and could use a nudge in the right direction. <br>
My end goal is to be able to convert R2 to R3 resources.   </p>
<p>I am not finding any StrucutreMap resources published with the spec, but do see FML defintions. </p>
<p>In HAPI, I found a StructureMapUtilities.parse(..) method that appears to convert FML into a StructureMap. </p>
<p>I found the StructureMapUtilities.transform(..) method: <br>
public void transform(Object appInfo, Base source, StructureMap map, Base target)<br>
That sort of looks like what I'd need, except the source and target are fixed to a specific package/fhirversion so likely won't work for moving between versions. </p>
<p>I have not found the example mentioned on how to run it. <br>
Can you point me in the right direction and/or clear up any misunderstandings I've stated above?</p>



<a name="177726822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/177726822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#177726822">(Oct 09 2019 at 15:43)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="178240540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/178240540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#178240540">(Oct 15 2019 at 22:23)</a>:</h4>
<p>the class org.hl7.fhir.convertors.R2R3ConversionManager in HAPI brings all this together</p>



<a name="178808022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/178808022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#178808022">(Oct 22 2019 at 23:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  (or others). The R2R3ConversionManager class references this file: <br>
<a href="http://hl7.org/fhir/r2r3maps.zip" target="_blank" title="http://hl7.org/fhir/r2r3maps.zip">http://hl7.org/fhir/r2r3maps.zip</a><br>
I can't access it there, any idea where to get it? </p>
<p>Thanks again.</p>



<a name="178999413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Convert%20DSTU2%20JSON%20to%20STU3%20Json%20in%20Javascript/near/178999413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Convert.20DSTU2.20JSON.20to.20STU3.20Json.20in.20Javascript.html#178999413">(Oct 24 2019 at 21:25)</a>:</h4>
<p>the source is here: <a href="https://github.com/FHIR/interversion" target="_blank" title="https://github.com/FHIR/interversion">https://github.com/FHIR/interversion</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
