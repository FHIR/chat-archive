---
layout: page
title: "FHIR Chat  · ValueCodableConcept in extension · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html">ValueCodableConcept in extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="189466120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189466120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189466120">(Mar 02 2020 at 06:17)</a>:</h4>
<p>Hi,</p>
<p>I came across structure definition which contains this:<br>
{<br>
  "differential": {<br>
    "element": [<br>
      {<br>
        "id": "AllergyIntolerance",<br>
        "path": "AllergyIntolerance"<br>
      },<br>
      {<br>
        "id": "AllergyIntolerance.extension",<br>
        "path": "AllergyIntolerance.extension",<br>
        "slicing": {<br>
          "discriminator": [<br>
            {<br>
              "type": "value",<br>
              "path": "url"<br>
            }<br>
          ],<br>
          "rules": "open"<br>
        }<br>
      },<br>
      {<br>
        "id": "AllergyIntolerance.extension:reasonRefuted",<br>
        "path": "AllergyIntolerance.extension",<br>
        "sliceName": "reasonRefuted",<br>
        "type": [<br>
          {<br>
            "code": "Extension",<br>
            "profile": "<a href="http://hl7.org/fhir/StructureDefinition/allergyintolerance-reasonRefuted" target="_blank" title="http://hl7.org/fhir/StructureDefinition/allergyintolerance-reasonRefuted">http://hl7.org/fhir/StructureDefinition/allergyintolerance-reasonRefuted</a>"<br>
          }<br>
        ]<br>
      },<br>
      {<br>
        "id": "AllergyIntolerance.extension:reasonRefuted.valueCodeableConcept:valueCodeableConcept",<br>
        "path": "AllergyIntolerance.extension.valueCodeableConcept",<br>
        "sliceName": "valueCodeableConcept"<br>
      }<br>
    ]<br>
  }<br>
}</p>
<p>I want to know how the FHIR message Json will look like.<br>
I tried this but it was giving validation error:<br>
  "extension": [<br>
    {<br>
      "url": "<a href="http://hl7.org/fhir/StructureDefinition/allergyintolerance-reasonRefuted" target="_blank" title="http://hl7.org/fhir/StructureDefinition/allergyintolerance-reasonRefuted">http://hl7.org/fhir/StructureDefinition/allergyintolerance-reasonRefuted</a>",<br>
      "value": {</p>
<div class="codehilite"><pre><span></span>    &quot;valueCodeableConcept&quot;: {
      &quot;coding&quot;: [
        {
          &quot;system&quot;: &quot;system&quot;,
          &quot;code&quot;: &quot;code&quot;
        }
      ]
    }
  }
}
</pre></div>


<p>]</p>
<p>Can I get some example on how the data will look like?</p>



<a name="189471374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189471374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abel Stolz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189471374">(Mar 02 2020 at 08:27)</a>:</h4>
<p>This fixes your json. Is this what you intended?</p>
<p>{<br>
    "resourceType": "Extension",<br>
    "url": "<a href="http://hl7.org/fhir/StructureDefinition/allergyintolerance-reasonRefuted" target="_blank" title="http://hl7.org/fhir/StructureDefinition/allergyintolerance-reasonRefuted">http://hl7.org/fhir/StructureDefinition/allergyintolerance-reasonRefuted</a>",<br>
    "valueCodeableConcept": {<br>
    "coding": [<br>
        {<br>
        "system": "system",<br>
        "code": "code"<br>
        }<br>
    ]<br>
    }<br>
}</p>



<a name="189471854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189471854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189471854">(Mar 02 2020 at 08:37)</a>:</h4>
<p>In the structure definition which I have shared there are two ids-<br>
<strong>AllergyIntolerance.extension:reasonRefuted</strong> and  <strong>AllergyIntolerance.extension:reasonRefuted.valueCodeableConcept:valueCodeableConcept</strong>.<br>
AllergyIntolerance.extension:reasonRefuted profile is that of reason refuted which is codeable concept.<br>
So from the json I want to know how both of the IDs are fitting into the structure definition ?<br>
In the json which you have shared there is only one codeable concept.</p>



<a name="189474036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189474036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abel Stolz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189474036">(Mar 02 2020 at 09:17)</a>:</h4>
<p>I am not sure, what you mean by two IDs, but let me guess:<br>
One ID (reasonRefuted) is given by the unique url provided in the extension. The second ID (CodeableConcept) is given by the system and code, which you would have to specify in a real life example instead of "system" and "code". In your example there are both IDs present, as they are in the corrected json.<br>
Am I missing something?</p>



<a name="189475874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189475874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189475874">(Mar 02 2020 at 09:49)</a>:</h4>
<p>If you see structure definition ReasonRefuted has url which is of the type CodeableConcept and Inside reason refuted there is valueCodableConcept which is also of the type Codeable Concept. I am not sure but the example which you gave doesn't contains both codeableConcept. I am still confuse why in the structure definition there is need of putting nested structures as this can be just implemented by giving reasonRefuted and its URL.<br>
Is my understanding correct?</p>



<a name="189483654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189483654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abel Stolz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189483654">(Mar 02 2020 at 11:52)</a>:</h4>
<p>Ok, I think now I understand your question. The url of reasonRefuted is the ID of the extension. That is, it stands for the concept of of "reasonRefuted" in the context of allergy intolerances. The codeable concept still has to be specified, because there might be more than one reason! So the specific reason is coded in the codeable concept and thus needs it's own ID.<br>
I don't know about your extension in the example, but in general this reasoning applies for many extensions.<br>
In conclusion: One ID to specify the concept itself (a class in object oriented programming), one ID to specify the concrete example of the concept (the instance in OO.)<br>
Hope this helps...</p>



<a name="189504738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189504738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189504738">(Mar 02 2020 at 15:59)</a>:</h4>
<p>Expressed another way, the URL for the extension defines the element.  The URL for the code defines the namespace for the concept.  The code might well be from SNOMED - which covers all sorts of things.  You'd need to know the meaning of the 'element' in order to interpret the meaning of the concept appropriately</p>



<a name="189567055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189567055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189567055">(Mar 03 2020 at 06:29)</a>:</h4>
<p><span class="user-mention" data-user-id="256468">@Abel Stolz</span>  <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <br>
Thanks for the explanation. I understood what you have explained but I have seen other examples of structure definitions where there ID was not given. I see only here that separate IDs have been given to extension and the included element.<br>
Is this redundant/given separate ID for more clarity?<br>
Even if separate ID was not given it would have worked as  expected ?</p>



<a name="189567469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189567469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abel Stolz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189567469">(Mar 03 2020 at 06:41)</a>:</h4>
<p>No, the IDs are not redundant.<br>
No, it would not work without separate IDs.</p>



<a name="189569630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189569630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189569630">(Mar 03 2020 at 07:42)</a>:</h4>
<p><span class="user-mention" data-user-id="256468">@Abel Stolz</span>  <br>
Sorry just one more question. There is a structure definition which has following in its differential in extension:</p>
<p>{<br>
        "id" : "AllergyIntolerance.extension:RefutedSign",<br>
        "path" : "AllergyIntolerance.extension",<br>
        "sliceName" : "RefutedSign",<br>
        "max" : "1",<br>
        "type" : [<br>
          {<br>
            "code" : "Extension",<br>
            "profile" : "<a href="https://somesignatureprofile.com" target="_blank" title="https://somesignatureprofile.com">https://somesignatureprofile.com</a>"<br>
          }<br>
}</p>
<p>Here RefutedSign is of the type Signature but here there separate signature is not present.<br>
That's why I was confuse.<br>
Can you tell here why its not required just like in codeableConcept case.<br>
Thanks.</p>



<a name="189570250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189570250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abel Stolz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189570250">(Mar 03 2020 at 07:57)</a>:</h4>
<p>Sorry, I can't tell you. But I don't know the RefutedSign extension. You should look for an explanation in the documentation of the extension...</p>



<a name="189570440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueCodableConcept%20in%20extension/near/189570440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> PS <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueCodableConcept.20in.20extension.html#189570440">(Mar 03 2020 at 08:00)</a>:</h4>
<p>Okay Thanks</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
