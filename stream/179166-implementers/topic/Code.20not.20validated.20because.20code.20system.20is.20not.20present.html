---
layout: page
title: "FHIR Chat  · Code not validated because code system is not present · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Code.20not.20validated.20because.20code.20system.20is.20not.20present.html">Code not validated because code system is not present</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="179436163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Code%20not%20validated%20because%20code%20system%20is%20not%20present/near/179436163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Code.20not.20validated.20because.20code.20system.20is.20not.20present.html#179436163">(Oct 30 2019 at 14:18)</a>:</h4>
<p>Hi, I'm trying to do validation of a Condition-resource. I'm using HAPI 4.0.3 with R4 resources. <br>
If I send in the clinicalStatus below as part of a Condition I want the validator to output an error that the code system is not part of the required value set. But instead I get a warning with the following message: "Code <a href="http://terminology.hl7.org/CodeSystem/condition-clinical/wrong/asd" target="_blank" title="http://terminology.hl7.org/CodeSystem/condition-clinical/wrong/asd">http://terminology.hl7.org/CodeSystem/condition-clinical/wrong/asd</a> was not validated because the code system is not present". Is it possible to get the validator to output an error instead?</p>
<div class="codehilite"><pre><span></span>    &lt;clinicalStatus&gt;
        &lt;coding&gt;
            &lt;system value=&quot;http://terminology.hl7.org/CodeSystem/condition-clinical/wrong&quot;&gt;&lt;/system&gt;
            &lt;code value=&quot;asd&quot;&gt;&lt;/code&gt;
            &lt;display value=&quot;Active&quot;&gt;&lt;/display&gt;
        &lt;/coding&gt;
    &lt;/clinicalStatus&gt;
</pre></div>


<p>If I send in the correct code system but with an invalid code it works as I would expect by outputting an error with the following message: "None of the codes provided are in the value set <a href="http://hl7.org/fhir/ValueSet/condition-clinical|4.0.0" target="_blank" title="http://hl7.org/fhir/ValueSet/condition-clinical|4.0.0">http://hl7.org/fhir/ValueSet/condition-clinical|4.0.0</a> (<a href="http://hl7.org/fhir/ValueSet/condition-clinical" target="_blank" title="http://hl7.org/fhir/ValueSet/condition-clinical">http://hl7.org/fhir/ValueSet/condition-clinical</a>, and a code from this value set is required) (codes = <a href="http://terminology.hl7.org/CodeSystem/condition-clinical#asd" target="_blank" title="http://terminology.hl7.org/CodeSystem/condition-clinical#asd">http://terminology.hl7.org/CodeSystem/condition-clinical#asd</a>)"</p>



<a name="179448399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Code%20not%20validated%20because%20code%20system%20is%20not%20present/near/179448399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Code.20not.20validated.20because.20code.20system.20is.20not.20present.html#179448399">(Oct 30 2019 at 16:07)</a>:</h4>
<p>It suggests that your validator isn't connecting to the terminology server for some reason (or that the terminology server it is connecting to doesn't have access to the code system(s) pointed to by the value set).</p>



<a name="179516226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Code%20not%20validated%20because%20code%20system%20is%20not%20present/near/179516226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Code.20not.20validated.20because.20code.20system.20is.20not.20present.html#179516226">(Oct 31 2019 at 10:01)</a>:</h4>
<p>The validator does have access to the coding system referenced in the value set. The problem is that if someone sends in another coding system, the validator does not reject this. Which means that users can send in whatever coding system they want.</p>



<a name="179516355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Code%20not%20validated%20because%20code%20system%20is%20not%20present/near/179516355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Code.20not.20validated.20because.20code.20system.20is.20not.20present.html#179516355">(Oct 31 2019 at 10:03)</a>:</h4>
<p>can you make it a test case please</p>



<a name="179517658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Code%20not%20validated%20because%20code%20system%20is%20not%20present/near/179517658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Code.20not.20validated.20because.20code.20system.20is.20not.20present.html#179517658">(Oct 31 2019 at 10:19)</a>:</h4>
<p>If I try to validate the following Condition: <a href="https://pastebin.com/93GErvcU" target="_blank" title="https://pastebin.com/93GErvcU">https://pastebin.com/93GErvcU</a> at <a href="https://fhirtest.uhn.ca/" target="_blank" title="https://fhirtest.uhn.ca/">https://fhirtest.uhn.ca/</a>  it returns a warning: "Code <a href="http://terminology.hl7.org/CodeSystem/condition-clinical/wrong-system/notrealcode" target="_blank" title="http://terminology.hl7.org/CodeSystem/condition-clinical/wrong-system/notrealcode">http://terminology.hl7.org/CodeSystem/condition-clinical/wrong-system/notrealcode</a> was not validated because the code system is not present".<br>
But if I change the system of ClinicalStatus to be "<a href="http://terminology.hl7.org/CodeSystem/condition-clinical" target="_blank" title="http://terminology.hl7.org/CodeSystem/condition-clinical">http://terminology.hl7.org/CodeSystem/condition-clinical</a>" (the system in the value set) I get an error that the code is not in the value set.</p>



<a name="179521398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Code%20not%20validated%20because%20code%20system%20is%20not%20present/near/179521398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Code.20not.20validated.20because.20code.20system.20is.20not.20present.html#179521398">(Oct 31 2019 at 11:14)</a>:</h4>
<p>does it behave the same way with the java command line validator? (not that you can test today, it's current broken)</p>



<a name="179521858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Code%20not%20validated%20because%20code%20system%20is%20not%20present/near/179521858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Code.20not.20validated.20because.20code.20system.20is.20not.20present.html#179521858">(Oct 31 2019 at 11:21)</a>:</h4>
<p>This looks like an issue with HAPI's TS as opposed to being a validator issue. That message comes from the TS for sure.</p>
<p><code>Condition.clinicalStatus</code> has a required binding so a non-validatable code should be an error, not an info. I'll turn this into a test case.</p>



<a name="179527977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Code%20not%20validated%20because%20code%20system%20is%20not%20present/near/179527977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Code.20not.20validated.20because.20code.20system.20is.20not.20present.html#179527977">(Oct 31 2019 at 12:54)</a>:</h4>
<p>Using the java command line validator (v 4.0.24-SNAPSHOT), I get an error with the condition in the pastebin: </p>
<blockquote>
<p>Error @ Condition.clinicalStatus (line 6, col19) : None of the codes provided are in the value set <a href="http://hl7.org/fhir/ValueSet/condition-clinical|4.0.0" target="_blank" title="http://hl7.org/fhir/ValueSet/condition-clinical|4.0.0">http://hl7.org/fhir/ValueSet/condition-clinical|4.0.0</a> (<a href="http://hl7.org/fhir/ValueSet/condition-clinical" target="_blank" title="http://hl7.org/fhir/ValueSet/condition-clinical">http://hl7.org/fhir/ValueSet/condition-clinical</a>, and a code from this value set is required) (codes = <a href="http://terminology.hl7.org/CodeSystem/condition-clinical/wrong-system#notrealquote" target="_blank" title="http://terminology.hl7.org/CodeSystem/condition-clinical/wrong-system#notrealquote">http://terminology.hl7.org/CodeSystem/condition-clinical/wrong-system#notrealquote</a></p>
</blockquote>
<p>So that seems correct.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
