---
layout: page
title: "FHIR Chat  · &quot;http://hl7.org/fhirpath/System.String&quot; · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html">&quot;http://hl7.org/fhirpath/System.String&quot;</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="182384024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182384024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182384024">(Dec 02 2019 at 20:06)</a>:</h4>
<p>Is there any documentation about how to read "<a href="http://hl7.org/fhirpath/System.String" target="_blank" title="http://hl7.org/fhirpath/System.String">http://hl7.org/fhirpath/System.String</a>" ?  It seems to hook in to <a href="http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type" target="_blank" title="http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type">http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type</a>, which is described as "Compiler magic", which is quite vague :/</p>



<a name="182384074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182384074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182384074">(Dec 02 2019 at 20:07)</a>:</h4>
<p>I'd love to read a description of how this works and the reasons it exists, it makes 4.0.1 kind of a bear</p>



<a name="182384227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182384227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182384227">(Dec 02 2019 at 20:08)</a>:</h4>
<p>Why, for instance, are id fields no longer typed as ids?  is this explained somewhere?</p>



<a name="182384528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182384528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182384528">(Dec 02 2019 at 20:12)</a>:</h4>
<p>I'm very confused - <a href="https://www.hl7.org/fhir/resource.html" target="_blank" title="https://www.hl7.org/fhir/resource.html">https://www.hl7.org/fhir/resource.html</a> lists id as typed as id, but <a href="https://www.hl7.org/fhir/patient.profile.json.html" target="_blank" title="https://www.hl7.org/fhir/patient.profile.json.html">https://www.hl7.org/fhir/patient.profile.json.html</a> uses "compiler magic" to type it as a "String"</p>



<a name="182388090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182388090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182388090">(Dec 02 2019 at 20:50)</a>:</h4>
<p>so we used to define those special elements (<a href="http://Element.id" target="_blank" title="http://Element.id">Element.id</a>, Extension.url, [PrimitiveType].value) with the FHIR type as their primary type, and extensions defining the actual working type in the different formats. The problem with this was that it wasn't accurate. Those elements don't have .id or .extension, but that declared that they do</p>
<p>With 4.0.1, we have flipped this over; the type is now a system type, without .id or .extension - so we use the FHIRPath types as a conveniently available type. And we declare the conceptual FHIR type in an extension</p>



<a name="182388121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182388121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182388121">(Dec 02 2019 at 20:50)</a>:</h4>
<p>I found that it made things much easier, though I had to go through various pieces of code adapting for this</p>



<a name="182388155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182388155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182388155">(Dec 02 2019 at 20:51)</a>:</h4>
<p>whatever we do, those elements do have compiler magic associated with them</p>



<a name="182389101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182389101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182389101">(Dec 02 2019 at 21:01)</a>:</h4>
<p>Why is it insufficient to specify that the id datatype has extensions and id size zero?</p>



<a name="182389298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182389298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182389298">(Dec 02 2019 at 21:03)</a>:</h4>
<p>Making primitive value fields use a system type makes sense, but it seems weird to have things like patient not be able to use the id data type</p>



<a name="182389524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182389524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182389524">(Dec 02 2019 at 21:05)</a>:</h4>
<blockquote>
<p>it seems weird to have things like patient not be able to use the id data type</p>
</blockquote>
<p>I have no idea what you mean there</p>



<a name="182389544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182389544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182389544">(Dec 02 2019 at 21:05)</a>:</h4>
<p>we could have used constraints, but the vote was to use system types</p>



<a name="182389626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182389626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182389626">(Dec 02 2019 at 21:06)</a>:</h4>
<p>well, given that the "id" primitive type exists, why is <a href="http://patient.id" target="_blank" title="http://patient.id">patient.id</a> not an id? <a href="https://www.hl7.org/fhir/patient.profile.json.html" target="_blank" title="https://www.hl7.org/fhir/patient.profile.json.html">https://www.hl7.org/fhir/patient.profile.json.html</a></p>



<a name="182389729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182389729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182389729">(Dec 02 2019 at 21:07)</a>:</h4>
<p>because that's not an id in the normal sense. If we hadn't changed it, it would be inconsistect</p>



<a name="182389854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182389854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182389854">(Dec 02 2019 at 21:09)</a>:</h4>
<p>so is <a href="https://www.hl7.org/fhir/resource.html" target="_blank" title="https://www.hl7.org/fhir/resource.html">https://www.hl7.org/fhir/resource.html</a> incorrect when it lists the id as an id?</p>



<a name="182391357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182391357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182391357">(Dec 02 2019 at 21:21)</a>:</h4>
<p>no. At least, that was deliberate. The structure definitions define the type precisely. But the detail of the gap between the conceptual FHIR type and the is not considered important for the standard itself, so the presentation is based on the extension</p>



<a name="182391656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182391656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182391656">(Dec 02 2019 at 21:24)</a>:</h4>
<p>I'm not sure what about the spec indicates it's an id - the structure definition says it's a System.String with an extension with code "string"</p>



<a name="182391748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182391748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182391748">(Dec 02 2019 at 21:25)</a>:</h4>
<p>oh. that's just an error then. the extension should very definitely say 'id'</p>



<a name="182391810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182391810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182391810">(Dec 02 2019 at 21:26)</a>:</h4>
<p>it's an error on every single resource!</p>



<a name="182391836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182391836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182391836">(Dec 02 2019 at 21:26)</a>:</h4>
<p>and conceptually, it seems we can no longer say that leaf nodes on resources are fhir datatypes - now it seems leaf nodes on resources can be fhir datatypes OR system primitives - is it written up anywhere why that was considered better than a constraint saying <a href="http://Reasource.id" target="_blank" title="http://Reasource.id">Reasource.id</a> doesn't have any extensions?</p>



<a name="182392670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182392670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182392670">(Dec 02 2019 at 21:35)</a>:</h4>
<blockquote>
<p>it's an error on every single resource!</p>
</blockquote>
<p>Yep, it would be</p>



<a name="182392779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182392779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182392779">(Dec 02 2019 at 21:37)</a>:</h4>
<p>written up.... committee minutes, maybe. And the approving task. WHich according to the history is: <a href="http://jira.hl7.org/browse/FHIR-22493" target="_blank" title="http://jira.hl7.org/browse/FHIR-22493">GF#22493</a></p>



<a name="182392797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182392797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182392797">(Dec 02 2019 at 21:37)</a>:</h4>
<p>but the task is not useful</p>



<a name="182393110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182393110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182393110">(Dec 02 2019 at 21:41)</a>:</h4>
<p>but conceptually, it seems a pretty big hammer to say fhir resources are no longer fundamentally composed of fhir datatypes</p>



<a name="182393281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182393281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182393281">(Dec 02 2019 at 21:43)</a>:</h4>
<p>I guess maybe that was never the case but it was our assumption</p>



<a name="182393404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182393404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182393404">(Dec 02 2019 at 21:44)</a>:</h4>
<p>well, nothing actually changed in the resources</p>



<a name="182393810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182393810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182393810">(Dec 02 2019 at 21:50)</a>:</h4>
<p>Well, what changes is the datatype of "<a href="http://Patient.id" target="_blank" title="http://Patient.id">Patient.id</a>".  Unless the advice is "Just pretend it's typed as the datatype in the extension", in which case it's a bit frustrating that we don't just keep it typed as the type in the extension.</p>



<a name="182393850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182393850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182393850">(Dec 02 2019 at 21:51)</a>:</h4>
<p>the extension is there so that you can choose to pretend that if you want. Obviously it doesn't help that the extension is wrong in those cases.</p>



<a name="182403916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182403916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182403916">(Dec 03 2019 at 00:21)</a>:</h4>
<p>filed <a href="https://jira.hl7.org/browse/FHIR-25262" target="_blank" title="https://jira.hl7.org/browse/FHIR-25262">https://jira.hl7.org/browse/FHIR-25262</a></p>



<a name="182405501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182405501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182405501">(Dec 03 2019 at 00:47)</a>:</h4>
<p>potentially related bug: <a href="http://hl7.org/fhir/xhtml.profile.json.html" target="_blank" title="http://hl7.org/fhir/xhtml.profile.json.html">http://hl7.org/fhir/xhtml.profile.json.html</a> doesn't have any type extension at all for <a href="http://xhtml.id" target="_blank" title="http://xhtml.id">xhtml.id</a></p>



<a name="182406992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182406992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182406992">(Dec 03 2019 at 01:13)</a>:</h4>
<p>hmm, actually, are we sure it <em>should</em> be id?  and not string?  <a href="https://www.hl7.org/fhir/element.html" target="_blank" title="https://www.hl7.org/fhir/element.html">https://www.hl7.org/fhir/element.html</a> has id as a string, and so do primitive types in 4.0.0</p>



<a name="182407012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182407012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182407012">(Dec 03 2019 at 01:13)</a>:</h4>
<p>in other words, I think the thing that is actually wrong might be just <a href="https://www.hl7.org/fhir/resource.html" target="_blank" title="https://www.hl7.org/fhir/resource.html">https://www.hl7.org/fhir/resource.html</a></p>



<a name="182407431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182407431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182407431">(Dec 03 2019 at 01:21)</a>:</h4>
<p>definitely an id</p>



<a name="182407436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182407436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182407436">(Dec 03 2019 at 01:21)</a>:</h4>
<p>element id is definitely a string</p>



<a name="182407457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182407457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182407457">(Dec 03 2019 at 01:21)</a>:</h4>
<p>wait id or string?</p>



<a name="182407556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182407556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182407556">(Dec 03 2019 at 01:23)</a>:</h4>
<p>are you saying <a href="http://Resource.id" target="_blank" title="http://Resource.id">Resource.id</a> is not the same type as <a href="http://Element.id" target="_blank" title="http://Element.id">Element.id</a>?</p>



<a name="182407596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182407596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182407596">(Dec 03 2019 at 01:24)</a>:</h4>
<p><a href="http://Resource.id" target="_blank" title="http://Resource.id">Resource.id</a> is definitely an 'id' conceptually, though it is a System.string in the structure definitions.<br>
<a href="http://Element.id" target="_blank" title="http://Element.id">Element.id</a> is definitely a string conceptually - not subject to the id data type restrictions</p>
<p>So yes: they have different types</p>



<a name="182407691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182407691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182407691">(Dec 03 2019 at 01:25)</a>:</h4>
<p>I see.  ok, so only thing that has to change is what I outlined in <a href="https://jira.hl7.org/browse/FHIR-25262" target="_blank" title="https://jira.hl7.org/browse/FHIR-25262">https://jira.hl7.org/browse/FHIR-25262</a></p>



<a name="182407711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182407711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182407711">(Dec 03 2019 at 01:25)</a>:</h4>
<p>yes I think so</p>



<a name="182416659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182416659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182416659">(Dec 03 2019 at 04:55)</a>:</h4>
<p>There seem to be some more issues with this.</p>



<a name="182416672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182416672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182416672">(Dec 03 2019 at 04:55)</a>:</h4>
<p>not sure yet how widespread, but for instance, <a href="http://hl7.org/fhir/extension-structuredefinition-rdf-type.json.html" target="_blank" title="http://hl7.org/fhir/extension-structuredefinition-rdf-type.json.html">http://hl7.org/fhir/extension-structuredefinition-rdf-type.json.html</a> is incorrect - it is the 4.0.0 version</p>



<a name="182416732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182416732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182416732">(Dec 03 2019 at 04:56)</a>:</h4>
<p>in the 4.0.1 version in the package, the id field has the following type:</p>
<div class="codehilite"><pre><span></span>        &quot;type&quot;:[ 
           { 
              &quot;_code&quot;:{ 
                 &quot;extension&quot;:[ 
                    { 
                       &quot;url&quot;:&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;,
                       &quot;valueString&quot;:&quot;string&quot;
                    },
                    { 
                       &quot;url&quot;:&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type&quot;,
                       &quot;valueString&quot;:&quot;xsd:string&quot;
                    },
                    { 
                       &quot;url&quot;:&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;,
                       &quot;valueString&quot;:&quot;xsd:string&quot;
                    }
                 ]
              }
           }
        ],
</pre></div>



<a name="182416737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182416737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182416737">(Dec 03 2019 at 04:56)</a>:</h4>
<p>this has <em>no code at all</em>!</p>



<a name="182416739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182416739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182416739">(Dec 03 2019 at 04:56)</a>:</h4>
<p>crap where did you find that?</p>



<a name="182416822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182416822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182416822">(Dec 03 2019 at 04:58)</a>:</h4>
<p>the npm package</p>



<a name="182417017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182417017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182417017">(Dec 03 2019 at 05:02)</a>:</h4>
<p>where in the NPM package?</p>



<a name="182417028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182417028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182417028">(Dec 03 2019 at 05:02)</a>:</h4>
<p>again, not sure how widespread yet, but at least<br>
StructureDefinition-structuredefinition-rdf-type.json</p>



<a name="182417227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182417227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182417227">(Dec 03 2019 at 05:07)</a>:</h4>
<p>that shouldn't still exist....</p>



<a name="182417383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182417383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182417383">(Dec 03 2019 at 05:10)</a>:</h4>
<p>presumably same for the json-type and xml-type extensions, they also have the issue</p>



<a name="182417394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182417394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182417394">(Dec 03 2019 at 05:10)</a>:</h4>
<p>presumably same for the json-type and xml-type extensions, they also have the issue</p>



<a name="182417401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182417401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182417401">(Dec 03 2019 at 05:10)</a>:</h4>
<p>I can blacklist those structure definitions and see if anything else fails</p>



<a name="182417549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182417549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182417549">(Dec 03 2019 at 05:14)</a>:</h4>
<p>seems those are the only 3 with the issue</p>



<a name="182425692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182425692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182425692">(Dec 03 2019 at 08:33)</a>:</h4>
<p>good. they aren't part of the spec anymore - they've accidentally appeared in the package because of a file synchronization issue on the web site</p>



<a name="182439957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182439957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182439957">(Dec 03 2019 at 11:55)</a>:</h4>
<p>I am also implementing the new version 4.0.1 and I see that <a href="http://Patient.id" target="_blank" title="http://Patient.id">Patient.id</a> is not of type id but extended. I would have expect those extensions at the datatype id (which they do). Will this be updated in the spec?</p>



<a name="182440297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182440297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182440297">(Dec 03 2019 at 12:00)</a>:</h4>
<p>I didn't follow that - can you try again?</p>



<a name="182442404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182442404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182442404">(Dec 03 2019 at 12:23)</a>:</h4>
<p>I would have expect the following for the structureDefinition of Patient:</p>
<div class="codehilite"><pre><span></span>          &lt;element id=&quot;Patient.id&quot;&gt;
            &lt;path value=&quot;Patient.id&quot; /&gt;
            &lt;short value=&quot;Logical id of this artifact&quot; /&gt;
            &lt;definition value=&quot;The logical id of the resource, as used in the URL for the resource. Once assigned, this value never changes.&quot; /&gt;
            &lt;comment value=&quot;The only time that a resource does not have an id is when it is being submitted to the server using a create operation.&quot; /&gt;
            &lt;min value=&quot;0&quot; /&gt;
            &lt;max value=&quot;1&quot; /&gt;
            &lt;base&gt;
              &lt;path value=&quot;Resource.id&quot; /&gt;
              &lt;min value=&quot;0&quot; /&gt;
              &lt;max value=&quot;1&quot; /&gt;
            &lt;/base&gt;
            &lt;type&gt;
              &lt;code value=&quot;id&quot; /&gt;
            &lt;/type&gt;
            &lt;isModifier value=&quot;false&quot; /&gt;
            &lt;isSummary value=&quot;true&quot; /&gt;
          &lt;/element&gt;
</pre></div>


<p>and not </p>
<div class="codehilite"><pre><span></span>          &lt;element id=&quot;Patient.id&quot;&gt;
            &lt;path value=&quot;Patient.id&quot; /&gt;
            &lt;short value=&quot;Logical id of this artifact&quot; /&gt;
            &lt;definition value=&quot;The logical id of the resource, as used in the URL for the resource. Once assigned, this value never changes.&quot; /&gt;
            &lt;comment value=&quot;The only time that a resource does not have an id is when it is being submitted to the server using a create operation.&quot; /&gt;
            &lt;min value=&quot;0&quot; /&gt;
            &lt;max value=&quot;1&quot; /&gt;
            &lt;base&gt;
              &lt;path value=&quot;Resource.id&quot; /&gt;
              &lt;min value=&quot;0&quot; /&gt;
              &lt;max value=&quot;1&quot; /&gt;
            &lt;/base&gt;
          &lt;!-- Note: special primitive values have a FHIRPath system type. e.g. this is compiler magic (j) --&gt;
            &lt;type&gt;
              &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type&quot;&gt;
                &lt;valueUrl value=&quot;string&quot; /&gt;
              &lt;/extension&gt;
              &lt;code value=&quot;http://hl7.org/fhirpath/System.String&quot; /&gt;
            &lt;/type&gt;
            &lt;isModifier value=&quot;false&quot; /&gt;
            &lt;isSummary value=&quot;true&quot; /&gt;
          &lt;/element&gt;
</pre></div>


<p>So I would expect the datatype of <a href="http://Patient.id" target="_blank" title="http://Patient.id">Patient.id</a> to be of type id and not <a href="http://hl7.org/fhirpath/System.String" target="_blank" title="http://hl7.org/fhirpath/System.String">http://hl7.org/fhirpath/System.String</a>. In the datatype id I expect the compiler magic, which is indeed specified:</p>
<div class="codehilite"><pre><span></span>          &lt;element id=&quot;id.id&quot;&gt;
            &lt;path value=&quot;id.id&quot; /&gt;
            &lt;representation value=&quot;xmlAttr&quot; /&gt;
            &lt;short value=&quot;xml:id (or equivalent in JSON)&quot; /&gt;
            &lt;definition value=&quot;unique id for the element within a resource (for internal references)&quot; /&gt;
            &lt;min value=&quot;0&quot; /&gt;
            &lt;max value=&quot;1&quot; /&gt;
            &lt;base&gt;
              &lt;path value=&quot;Element.id&quot; /&gt;
              &lt;min value=&quot;0&quot; /&gt;
              &lt;max value=&quot;1&quot; /&gt;
            &lt;/base&gt;
          &lt;!-- Note: special primitive values have a FHIRPath system type. e.g. this is compiler magic (h) --&gt;
            &lt;type&gt;
              &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type&quot;&gt;
                &lt;valueUrl value=&quot;string&quot; /&gt;
              &lt;/extension&gt;
              &lt;code value=&quot;http://hl7.org/fhirpath/System.String&quot; /&gt;
            &lt;/type&gt;
            &lt;isModifier value=&quot;false&quot; /&gt;
            &lt;isSummary value=&quot;false&quot; /&gt;
          &lt;/element&gt;
</pre></div>



<a name="182443009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182443009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182443009">(Dec 03 2019 at 12:30)</a>:</h4>
<p>those are saying different things.</p>



<a name="182443108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182443108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182443108">(Dec 03 2019 at 12:31)</a>:</h4>
<p>There's an error here as <span class="user-mention" data-user-id="196561">@Nick George</span> pointed out:</p>
<div class="codehilite"><pre><span></span>      &lt;element id=&quot;Patient.id&quot;&gt;
            &lt;path value=&quot;Patient.id&quot; /&gt;
            &lt;short value=&quot;Logical id of this artifact&quot; /&gt;
            &lt;definition value=&quot;The logical id of the resource, as used in the URL for the resource. Once assigned, this value never changes.&quot; /&gt;
            &lt;comment value=&quot;The only time that a resource does not have an id is when it is being submitted to the server using a create operation.&quot; /&gt;
            &lt;min value=&quot;0&quot; /&gt;
            &lt;max value=&quot;1&quot; /&gt;
            &lt;base&gt;
              &lt;path value=&quot;Resource.id&quot; /&gt;
              &lt;min value=&quot;0&quot; /&gt;
              &lt;max value=&quot;1&quot; /&gt;
            &lt;/base&gt;
          &lt;!-- Note: special primitive values have a FHIRPath system type. e.g. this is compiler magic (j) --&gt;
            &lt;type&gt;
              &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type&quot;&gt;
                &lt;valueUrl value=&quot;id&quot; /&gt;
              &lt;/extension&gt;
              &lt;code value=&quot;http://hl7.org/fhirpath/System.String&quot; /&gt;
            &lt;/type&gt;
            &lt;isModifier value=&quot;false&quot; /&gt;
            &lt;isSummary value=&quot;true&quot; /&gt;
          &lt;/element&gt;
</pre></div>



<a name="182445385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182445385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182445385">(Dec 03 2019 at 12:59)</a>:</h4>
<p>So in the early versions (4.0.0) the compiler magic was at the datatype id level, but now the magic has been moved up a little to the resource level, saying that <a href="http://Patient.id" target="_blank" title="http://Patient.id">Patient.id</a> is of type System.String, but conceptually is an id (solved by the extension <a href="http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type" target="_blank" title="http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type">http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type</a>). Only this extension points now to string instead of id. Is this correct?</p>



<a name="182446631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182446631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182446631">(Dec 03 2019 at 13:16)</a>:</h4>
<p>yes that is correct. The extension pointing to string is wrong</p>



<a name="182446814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182446814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182446814">(Dec 03 2019 at 13:19)</a>:</h4>
<p>Okay, thanks Graham. So this is going to be changed soon in the spec?</p>



<a name="182446923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182446923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182446923">(Dec 03 2019 at 13:20)</a>:</h4>
<p>the extension?</p>



<a name="182446941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182446941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182446941">(Dec 03 2019 at 13:21)</a>:</h4>
<p>yes</p>



<a name="182446987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182446987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182446987">(Dec 03 2019 at 13:21)</a>:</h4>
<p>well, it'll be fixed... I'm not particularly in favor of doing it soon :-(</p>



<a name="182447036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182447036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182447036">(Dec 03 2019 at 13:22)</a>:</h4>
<p>technical corrections consume weeks of my life</p>



<a name="182447099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182447099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Visser <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182447099">(Dec 03 2019 at 13:23)</a>:</h4>
<p>I can imagine. So I have to do some extra compiler magic to get it right in the meantime. No problem</p>



<a name="182468332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182468332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182468332">(Dec 03 2019 at 16:40)</a>:</h4>
<p>worth noting that it affects validation pretty significantly, if basically any string is considered a valid Id in the current version of the spec</p>



<a name="182483615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182483615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182483615">(Dec 03 2019 at 19:04)</a>:</h4>
<p>the java validator checks that directly without dependency on the structure definitions, which is why I didn't notice that mistake</p>



<a name="182560649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182560649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182560649">(Dec 04 2019 at 14:37)</a>:</h4>
<p>Although this is already a lengthy discussion, I also noticed the <a href="http://hl7.org/fhirpath/System.String" target="_blank" title="http://hl7.org/fhirpath/System.String">http://hl7.org/fhirpath/System.String</a> type recently. The ValueSet binding for  ElementDefinition.type.code is <a href="http://www.hl7.org/fhir/valueset-defined-types.html" target="_blank" title="http://www.hl7.org/fhir/valueset-defined-types.html">http://www.hl7.org/fhir/valueset-defined-types.html</a>, which doesn't include <a href="http://hl7.org/fhirpath/System.String" target="_blank" title="http://hl7.org/fhirpath/System.String">http://hl7.org/fhirpath/System.String</a>. However the binding is extensible. But shouldn't a much used code like <a href="http://hl7.org/fhirpath/System.String" target="_blank" title="http://hl7.org/fhirpath/System.String">http://hl7.org/fhirpath/System.String</a> appear in this ValueSet?</p>
<p>Also I haven't really understand why it is useful for implementations to have <a href="http://hl7.org/fhirpath/System.String" target="_blank" title="http://hl7.org/fhirpath/System.String">http://hl7.org/fhirpath/System.String</a> instead of id? Which implementations are that? What is the "compiler magic" referred here?</p>



<a name="182585208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182585208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182585208">(Dec 04 2019 at 18:36)</a>:</h4>
<p>We also ran into this <a href="http://hl7.org/fhirpath/System.String" target="_blank" title="http://hl7.org/fhirpath/System.String">http://hl7.org/fhirpath/System.String</a> oddity while updating to 4.0.1 today.  Is there a JIRA issue for it yet?</p>



<a name="182585460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182585460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182585460">(Dec 04 2019 at 18:38)</a>:</h4>
<p>so far the only known issue is that extension on <a href="http://Resource.id" target="_blank" title="http://Resource.id">Resource.id</a> says "string" not "id"</p>



<a name="182585744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182585744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182585744">(Dec 04 2019 at 18:40)</a>:</h4>
<p>ok, want a JIRA for that?  or its already to be fixed?</p>



<a name="182585893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182585893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182585893">(Dec 04 2019 at 18:42)</a>:</h4>
<p>Clearly I have to revisit the whole discussion. The problem was that the elements in question:</p>
<ul>
<li><a href="http://Element.id" target="_blank" title="http://Element.id">Element.id</a></li>
<li><a href="http://Resource.id" target="_blank" title="http://Resource.id">Resource.id</a></li>
<li>Extension.url</li>
<li>[PrimitiveType].value </li>
</ul>
<p>were all declared to have a FHIR type but they weren't really - you couldn't have an extension or an id on them. </p>
<p>After much discussion, we agreed that we would rework the way we represent them, and define them as having a specific type that actually declares what they are.</p>



<a name="182585944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182585944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182585944">(Dec 04 2019 at 18:42)</a>:</h4>
<p>you could make a JIRA for that, sure</p>



<a name="182586090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182586090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182586090">(Dec 04 2019 at 18:43)</a>:</h4>
<p>well i don't have to.  i just like having something i can track.  assuming its helpful to others as well, I'll do it now</p>



<a name="182587496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182587496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182587496">(Dec 04 2019 at 18:57)</a>:</h4>
<p>OK, I opened     <a href="https://jira.hl7.org/browse/FHIR-25274" target="_blank" title="https://jira.hl7.org/browse/FHIR-25274">FHIR-25274 Resource.id is defined with fhir type string instead of id</a></p>



<a name="182616853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182616853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182616853">(Dec 05 2019 at 00:49)</a>:</h4>
<p>I already filed one: <a href="https://jira.hl7.org/browse/FHIR-25262" target="_blank" title="https://jira.hl7.org/browse/FHIR-25262">https://jira.hl7.org/browse/FHIR-25262</a></p>



<a name="182654531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182654531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182654531">(Dec 05 2019 at 12:32)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Ok now I understand. Up until now I was ignoring extensions on primitive values altogether. So there really was no difference for me.</p>



<a name="182719368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%22http%3A//hl7.org/fhirpath/System.String%22/near/182719368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.22http.3A.2F.2Fhl7.2Eorg.2Ffhirpath.2FSystem.2EString.22.html#182719368">(Dec 06 2019 at 00:43)</a>:</h4>
<blockquote>
<p>I already filed one: <a href="https://jira.hl7.org/browse/FHIR-25262" target="_blank" title="https://jira.hl7.org/browse/FHIR-25262">https://jira.hl7.org/browse/FHIR-25262</a></p>
</blockquote>
<p>My apologies Nick, I asked here before opening 25274 but I should have just searched.  Should I keep mine for just this part?:</p>
<blockquote>
<p>Additionally, it would be very good to write down how this is intended to work. Something like:<br>
1. An element definition with a type code of <a href="http://hl7.org/fhirpath/System.String" target="_blank" title="http://hl7.org/fhirpath/System.String">http://hl7.org/fhirpath/System.String</a> is a string in the underlying system.  For example, in Java this might be the <code>java.lang.String</code> class.<br>
2. When an element is defined to have type <a href="http://hl7.org/fhirpath/System.String" target="_blank" title="http://hl7.org/fhirpath/System.String">http://hl7.org/fhirpath/System.String</a> then it SHOULD include a <a href="http://hl7.org/fhir/extension-structuredefinition-fhir-type.html" target="_blank" title="http://hl7.org/fhir/extension-structuredefinition-fhir-type.html">http://hl7.org/fhir/extension-structuredefinition-fhir-type.html</a> extension and, if included, it SHALL be used to constrain the allowed values of the underlying system string. (and maybe more?)</p>
</blockquote>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
