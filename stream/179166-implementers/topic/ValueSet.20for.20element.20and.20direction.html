---
layout: page
title: "FHIR Chat  · ValueSet for element and direction · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html">ValueSet for element and direction</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153961092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961092">(May 15 2018 at 13:38)</a>:</h4>
<p>In the FHIR Connectathon Clinical Notes track (discussion here: <a href="#narrow/stream/58-connectathon-mgmt/subject/Clinical.20Notes.20Track" title="#narrow/stream/58-connectathon-mgmt/subject/Clinical.20Notes.20Track">https://chat.fhir.org/#narrow/stream/58-connectathon-mgmt/subject/Clinical.20Notes.20Track</a>), we wrestled with an issue that we think will become more prevalent the more common FHIR writes become.</p>



<a name="153961093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961093">(May 15 2018 at 13:39)</a>:</h4>
<p>If a client reads a resource, and an element in the resource has a code the client doesn't know, the client still got the resource.</p>



<a name="153961094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961094">(May 15 2018 at 13:40)</a>:</h4>
<p>This isn't ideal, but the client can work on mapping after the fact or can use the other elements of the resource if that's all the client needs.</p>



<a name="153961097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961097">(May 15 2018 at 13:40)</a>:</h4>
<p>But if a client attempts to write to a server and includes an element with a value the server doesn't know, the server is likely to refuse to file the resource.</p>



<a name="153961099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961099">(May 15 2018 at 13:41)</a>:</h4>
<p>So it's important that a client be able to discover what values the server will accept.</p>



<a name="153961103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961103">(May 15 2018 at 13:43)</a>:</h4>
<p>The two elements we struggled with in the Clinical Notes track were DocumentReference.type and DocumentReference.content.attachment.contentType.</p>



<a name="153961105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961105">(May 15 2018 at 13:45)</a>:</h4>
<p>We could profile our systems, and a client could get the CapabilityStatement to find the StructureDefinition to find the ElementDefinition to find the ValueSet.</p>



<a name="153961106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961106">(May 15 2018 at 13:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> mentioned something like an operation to ask <code>GET /ValueSet/$supported-at?element=DocumentReference.type</code> -- is this a real thing that's been defined before, or just an idea? (And if the latter... did I get the idea right?)</p>



<a name="153961107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961107">(May 15 2018 at 13:48)</a>:</h4>
<p>This approach poses two challenges:<br>
1. Both of the EHRs in the Clinical Notes FHIR Connectathon track support different subsets of MIME for contentType incoming and outgoing. <br>
2. This approach is <em>heavy</em>.  A client needs to hit multiple endpoints just to find out where the ValueSet it needs is.  I fear this would be burdensome to client developers.</p>



<a name="153961108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961108">(May 15 2018 at 13:48)</a>:</h4>
<p>Sorry, comments out of order.</p>



<a name="153961109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961109">(May 15 2018 at 13:49)</a>:</h4>
<p>Yes, <span class="user-mention" data-user-id="191315">@Josh Mandel</span> , that would work perfectly.</p>



<a name="153961110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961110">(May 15 2018 at 13:49)</a>:</h4>
<p>It would also need to accept a direction or interaction type, since the incoming and outgoing ValueSet might not match.</p>



<a name="153961111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961111">(May 15 2018 at 13:50)</a>:</h4>
<p>Do other people like <span class="user-mention" data-user-id="191315">@Josh Mandel</span>'s idea?</p>



<a name="153961113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961113">(May 15 2018 at 13:51)</a>:</h4>
<p>I think it'd need context, like </p>
<div class="codehilite"><pre><span></span>GET /ValueSet/$supported-at?element=DocumentReference.type&amp;action=note.write
</pre></div>


<p>... in the general case, since the same elements will be be used in different contexts/activities</p>



<a name="153961114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961114">(May 15 2018 at 13:51)</a>:</h4>
<p>Hmmm.</p>



<a name="153961115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961115">(May 15 2018 at 13:52)</a>:</h4>
<p>True.</p>



<a name="153961116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961116">(May 15 2018 at 13:52)</a>:</h4>
<p>I mean, maybe not -- but even for reading vs writing notes I'm imagining different types might be supported.</p>



<a name="153961117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961117">(May 15 2018 at 13:52)</a>:</h4>
<p>No, I think you're right.</p>



<a name="153961118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961118">(May 15 2018 at 13:52)</a>:</h4>
<p>If someone is posting an Observation, different codes will be valid for labs or vitals.</p>



<a name="153961120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961120">(May 15 2018 at 13:53)</a>:</h4>
<p>Sure. Pretty quickly we get into a pseudo-profiling language though.</p>



<a name="153961121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961121">(May 15 2018 at 13:53)</a>:</h4>
<p>Would it make sense to have a query parameter for <a href="http://hl7.org/fhir/valueset-type-restful-interaction.html" target="_blank" title="http://hl7.org/fhir/valueset-type-restful-interaction.html">http://hl7.org/fhir/valueset-type-restful-interaction.html</a> and, as needed, another for category or whatever&gt;</p>



<a name="153961122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961122">(May 15 2018 at 13:53)</a>:</h4>
<p>?</p>



<a name="153961123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961123">(May 15 2018 at 13:53)</a>:</h4>
<p>Yeah, I think so.</p>



<a name="153961124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961124">(May 15 2018 at 13:54)</a>:</h4>
<p>I think most of the time, all creates for a resource will accept the same ValueSet all the time for a given element.</p>



<a name="153961126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961126">(May 15 2018 at 13:54)</a>:</h4>
<p>We could start with that and expand it if and when someone needs it.</p>



<a name="153961127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961127">(May 15 2018 at 13:54)</a>:</h4>
<p>Yup.</p>



<a name="153961128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961128">(May 15 2018 at 13:54)</a>:</h4>
<p>I started roughing something out over the weekend: <a href="https://simplifier.net/supportedvalueset/unnamedoperationdefinition" target="_blank" title="https://simplifier.net/supportedvalueset/unnamedoperationdefinition">https://simplifier.net/supportedvalueset/unnamedoperationdefinition</a></p>



<a name="153961134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961134">(May 15 2018 at 13:58)</a>:</h4>
<p>Oh, cool!</p>



<a name="153961135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961135">(May 15 2018 at 13:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191410">@Brett Marquard</span> <span class="user-mention" data-user-id="191358">@Dennis Patterson</span> <span class="user-mention" data-user-id="191914">@Danielle Friend</span> <span class="user-mention" data-user-id="191357">@Andrew Torres</span></p>



<a name="153961137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961137">(May 15 2018 at 13:58)</a>:</h4>
<p>What can I do to make it better?</p>



<a name="153961139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961139">(May 15 2018 at 14:00)</a>:</h4>
<p>Does it make more sense to put the Resource and the element path into the same query parameter?</p>



<a name="153961140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961140">(May 15 2018 at 14:00)</a>:</h4>
<p>Two quick things </p>
<ul>
<li>Deliver on your promise of "Example to come" :-) </li>
<li>Figure out how to make the url not say <code>unnamedoperationdefinition</code></li>
</ul>



<a name="153961141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961141">(May 15 2018 at 14:01)</a>:</h4>
<p>I think combining resource and element path isn't bad, given how pervasively <code>ElementDefinition</code> does this.</p>



<a name="153961142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961142">(May 15 2018 at 14:01)</a>:</h4>
<ul>
<li>Done</li>
<li>Ugh, I know.  I need to figure that out.</li>
</ul>



<a name="153961143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961143">(May 15 2018 at 14:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> do you know how to adjust the <code>unnamedoperationdefinition</code> path segment of <a href="https://simplifier.net/supportedValueSet/unnamedoperationdefinition/~overview" target="_blank" title="https://simplifier.net/supportedValueSet/unnamedoperationdefinition/~overview">https://simplifier.net/supportedValueSet/unnamedoperationdefinition/~overview</a> ?</p>



<a name="153961144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961144">(May 15 2018 at 14:04)</a>:</h4>
<p><a href="https://simplifier.net/supportedvalueset/supported-at" target="_blank" title="https://simplifier.net/supportedvalueset/supported-at">https://simplifier.net/supportedvalueset/supported-at</a></p>



<a name="153961145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961145">(May 15 2018 at 14:04)</a>:</h4>
<p>Figured it out. :)</p>



<a name="153961146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961146">(May 15 2018 at 14:04)</a>:</h4>
<p>Sweet!</p>



<a name="153961147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961147">(May 15 2018 at 14:05)</a>:</h4>
<p>Good that it apparently is discoverable how to do that.</p>



<a name="153961148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Danielle Friend <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961148">(May 15 2018 at 14:06)</a>:</h4>
<p>How do we model the response so that it can support scenarios where there are 0 valuesets found or more than 1 valuesets found?</p>



<a name="153961150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961150">(May 15 2018 at 14:07)</a>:</h4>
<p>Hmm. <span class="user-mention" data-user-id="191914">@Danielle Friend</span> one answer is that you always get one, which may be (in term) composed-of others. But I'd just as soon return a Bundle of 'em.</p>



<a name="153961151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961151">(May 15 2018 at 14:07)</a>:</h4>
<p>I thought about this more, <span class="user-mention" data-user-id="191914">@Danielle Friend</span> .</p>



<a name="153961152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961152">(May 15 2018 at 14:08)</a>:</h4>
<p>Would it be better to return a Bundle or to allow the client to scope the request to make it clear which ValueSet it needs?</p>



<a name="153961153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961153">(May 15 2018 at 14:09)</a>:</h4>
<p>But the answer even for a very specific request could still be "none", or "these two are both good in your context".</p>



<a name="153961154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961154">(May 15 2018 at 14:09)</a>:</h4>
<p>If we accept different values for Observation.code depending on the value in Observation.category, should there be a category parameter?</p>



<a name="153961155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Danielle Friend <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961155">(May 15 2018 at 14:09)</a>:</h4>
<p>I think it would also be valuable to support - give me all valuesets you could return for x resource - not specified by path.</p>



<a name="153961156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961156">(May 15 2018 at 14:09)</a>:</h4>
<p>If two are good in the same context, wouldn't that be one ValueSet?</p>



<a name="153961157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961157">(May 15 2018 at 14:10)</a>:</h4>
<p>The compose can have multiple includes.</p>



<a name="153961158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961158">(May 15 2018 at 14:10)</a>:</h4>
<p>That's what I meant about composed-of -- you can always do that.</p>



<a name="153961159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961159">(May 15 2018 at 14:10)</a>:</h4>
<p>But it may not be the easiest thing to consume.</p>



<a name="153961160"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961160" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961160">(May 15 2018 at 14:10)</a>:</h4>
<p>Hmm.</p>



<a name="153961161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961161">(May 15 2018 at 14:10)</a>:</h4>
<p>Good point.</p>



<a name="153961162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961162">(May 15 2018 at 14:11)</a>:</h4>
<p>Okay, I'm willing to accept that even <em>if</em> I could dismiss this case, there may be others.  And it's easier to make it return a Bundle now than to change it later.</p>



<a name="153961164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Danielle Friend <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961164">(May 15 2018 at 14:11)</a>:</h4>
<p>I think that would be great to try out at a connectathon and get feedback on - all in one valueset of composed of, or separate value sets</p>



<a name="153961166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Danielle Friend <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961166">(May 15 2018 at 14:12)</a>:</h4>
<p>Also, having no results definitely seems likely. I asked for Medication Create.. well thats not supported, we have no valuesets to return. It'd be nice to have this work like a search where you'd get an operation explaining why</p>



<a name="153961170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961170">(May 15 2018 at 14:12)</a>:</h4>
<p>Sounds good.</p>



<a name="153961171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961171">(May 15 2018 at 14:12)</a>:</h4>
<p>I'll change it.</p>



<a name="153961174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961174">(May 15 2018 at 14:14)</a>:</h4>
<p>Would we say something about whether the valuesets should (or shouldn't) be returned in expanded form? (I kind of think we shouldn't say anything -- but it's worth thinking through.)</p>



<a name="153961175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961175">(May 15 2018 at 14:16)</a>:</h4>
<p>Is it true that the client often already knows the few codes it could provide, and thus would just like to check whether any of those codes is acceptable? So add a parameter for a list of codes to check, and not return an entire (possibly large) valueset?</p>



<a name="153961176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961176">(May 15 2018 at 14:17)</a>:</h4>
<p>Yeah -- that almost feels like a different operation though (e.g., <code>$code-supported-at?code=123&amp;element=DocumentReference.type</code> --&gt; Boolean)</p>



<a name="153961177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961177">(May 15 2018 at 14:19)</a>:</h4>
<p>That would feel like a variant of <a href="http://build.fhir.org/valueset-operation-validate-code.html" target="_blank" title="http://build.fhir.org/valueset-operation-validate-code.html">$validate-code</a></p>



<a name="153961180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961180">(May 15 2018 at 14:21)</a>:</h4>
<p>And I meant multiple inputs / outputs: <br>
<code>$code-supported-at?code=123,xyz,bar,foo&amp;element=DocumentReference.type</code> -&gt; <code>xyz,foo</code></p>



<a name="153961182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961182">(May 15 2018 at 14:23)</a>:</h4>
<p>That's an interesting angle <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>.  We hadn't thought of that.</p>



<a name="153961183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961183">(May 15 2018 at 14:23)</a>:</h4>
<p>But I think it's valid.</p>



<a name="153961184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961184">(May 15 2018 at 14:24)</a>:</h4>
<p>There are two use cases I envision for this:</p>



<a name="153961185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961185">(May 15 2018 at 14:24)</a>:</h4>
<p>A. Someone wants to configure a client to work with a given server.  For this, getting the whole ValueSet makes sense.</p>



<a name="153961186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961186">(May 15 2018 at 14:25)</a>:</h4>
<p>B. The client wants to confirm that the server will do what it needs.  For this, your idea makes more sense.</p>



<a name="153961187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961187">(May 15 2018 at 14:25)</a>:</h4>
<p>Variant of B: an early step in automated testing.</p>



<a name="153961191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961191">(May 15 2018 at 14:26)</a>:</h4>
<p>Mmm.  And now I'm thinking of more cases (or variants) for it.  Yeah, I think that's good.</p>



<a name="153961194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961194">(May 15 2018 at 14:26)</a>:</h4>
<p>Loosely connecting to the conversation in the room: is A also doable by specifying a specialized valueset in a profile that the server conforms to?</p>



<a name="153961195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961195">(May 15 2018 at 14:27)</a>:</h4>
<p>Currently, I don't believe so without extensions.</p>



<a name="153961196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961196">(May 15 2018 at 14:28)</a>:</h4>
<p>If a server has two profiles that each define a ValueSet for the same element, the allowed values for that element are the intersection of the ValueSets.</p>



<a name="153961197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961197">(May 15 2018 at 14:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191358">@Dennis Patterson</span>, you found that rule, right?</p>



<a name="153961199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961199">(May 15 2018 at 14:30)</a>:</h4>
<p>"Server has two profiles" or resource.meta.profile mentions 2 profiles?<br>
Server may host 100 profiles for the same resourcetype, and then it would be useful if it could host the superset of the valuesets in the various profiles.</p>



<a name="153961200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961200">(May 15 2018 at 14:31)</a>:</h4>
<p>I do agree btw that calling an operation for A is probably a lot easier for a client.</p>



<a name="153961201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961201">(May 15 2018 at 14:31)</a>:</h4>
<p>And not for (B) ?</p>



<a name="153961202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961202">(May 15 2018 at 14:32)</a>:</h4>
<p>Yes, also for B, I did not even suggest an alternative for B :-)</p>



<a name="153961205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961205">(May 15 2018 at 14:39)</a>:</h4>
<p>If the valueset has 32k concepts (e.g. observation, or some other really large valueset - we have a valuset with employer names that's 88k long) and as such wouldn't want that returned complete from the query.<br>
From a client perspective if I'm trying to render some form of control with this, I'd need to have some form of indication that the potential results size.<br>
And I'd want to know if I should be using $expand to dynamically get my values in a lookahead style interface, or a radio button set, or combo etc.</p>



<a name="153961213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961213">(May 15 2018 at 14:47)</a>:</h4>
<p>That's true. And in other contexts (offline db-populating), full expansion is fine.</p>



<a name="153961214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961214">(May 15 2018 at 14:47)</a>:</h4>
<p><a href="https://simplifier.net/supportedvalueset/code-supported-at" target="_blank" title="https://simplifier.net/supportedvalueset/code-supported-at">https://simplifier.net/supportedvalueset/code-supported-at</a></p>



<a name="153961217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961217">(May 15 2018 at 14:48)</a>:</h4>
<p>That's clever (taking a set in, returning the valid subset). I think you may need support for <code>Coding</code> in addition to <code>Code</code>, for the use cases we've been discussing (e.g. <code>Observation.code</code>, <code>DocumentReference.type</code>).</p>



<a name="153961222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961222">(May 15 2018 at 14:49)</a>:</h4>
<p>It was Christiaan's idea.  :)</p>



<a name="153961226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961226">(May 15 2018 at 14:51)</a>:</h4>
<p>What's the most elegant way to do that, Josh?</p>



<a name="153961227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961227">(May 15 2018 at 14:51)</a>:</h4>
<p>Might take a list of codes in, and a list of codings in... Then put a list of codes out and a list of codings out?</p>



<a name="153961229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961229">(May 15 2018 at 14:52)</a>:</h4>
<p>But then you have to back the input cardinalities off to <code>0..*</code> (from <code>1..*</code>).</p>



<a name="153961231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961231">(May 15 2018 at 14:52)</a>:</h4>
<p>What do we lose by changing it to a string?</p>



<a name="153961235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961235">(May 15 2018 at 14:53)</a>:</h4>
<p>Strings like <code>http://loinc.org|123-4</code> ?</p>



<a name="153961236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961236">(May 15 2018 at 14:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191936">@Michael Donnelly</span>  (to your earlier question)  if you want to have separate profiles to dictate input vs output ValueSets for a field, I came across two issues with specifying this w/conformance.</p>
<p><em>One</em>, if you wanted your CapabilityStatement to list two rest.resource structures for the same resource type (e.g. one for DocumentReference create and one for DocumentReference search/read), the <a href="https://www.hl7.org/fhir/2018May/capabilitystatement-definitions.html#CapabilityStatement.rest.resource" target="_blank" title="https://www.hl7.org/fhir/2018May/capabilitystatement-definitions.html#CapabilityStatement.rest.resource">comment</a> on CapabilityStatement.rest.resource says "Max of one repetition per resource type."</p>
<p><em>Two</em>, <a href="https://www.hl7.org/fhir/2018May/profiling.html#mixing" target="_blank" title="https://www.hl7.org/fhir/2018May/profiling.html#mixing">documentation</a> on supporting multiple profiles says "The impact of supporting two sets of profiles depends on whether resources are being created or consumed. When an application is creating content, it must create content that conforms to both sets of profiles - that is, the intersection of the profiles.".  We're talking about two ValueSets that are currently non-intersecting, so this kind of thing doesn't seem supported.</p>



<a name="153961247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961247">(May 15 2018 at 14:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191358">@Dennis Patterson</span> I don't think these considerations apply to <a href="http://build.fhir.org/capabilitystatement-definitions.html#CapabilityStatement.rest.resource.supportedProfile" target="_blank" title="http://build.fhir.org/capabilitystatement-definitions.html#CapabilityStatement.rest.resource.supportedProfile">CapabilityStatement.rest.resource.supportedProfile</a> though</p>



<a name="153961249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961249">(May 15 2018 at 14:56)</a>:</h4>
<p>What about the first limitation?  Is it valid to express separate profiles for separate actions?</p>



<a name="153961251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961251">(May 15 2018 at 14:56)</a>:</h4>
<p>You can list a set of profiles (e.g. for <code>Observation</code>: vitals + labs) in a single list, in a single <code>CapabilityStatement.rest.resource</code> entry.</p>



<a name="153961252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961252">(May 15 2018 at 14:57)</a>:</h4>
<p>What's the point of having an element that's a code instead of a string in any Resource?  Because in the definition of the Resource you can specify the binding, and clients and servers will know what's supposed to be in there.\</p>



<a name="153961253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961253">(May 15 2018 at 14:58)</a>:</h4>
<p>Yes you can link to multiple StructureDefinitions, but can you specify that they are for different actions?</p>



<a name="153961255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961255">(May 15 2018 at 14:58)</a>:</h4>
<p>In this case, <br>
1. We can't specify a binding in the definition, since it could be anything.<br>
2. The whole purpose of the operation is that we know the code/coding might be wrong.</p>



<a name="153961257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961257">(May 15 2018 at 14:58)</a>:</h4>
<p>Practically that seems fine --  though technically FHIR OperationDefinitions don't provide a way to convey a <code>Coding</code> in a GET parameter, I <em>think</em>.</p>



<a name="153961260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961260">(May 15 2018 at 14:59)</a>:</h4>
<p>Hmm.</p>



<a name="153961261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961261">(May 15 2018 at 14:59)</a>:</h4>
<p>It's like a token search parameter.</p>



<a name="153961265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961265">(May 15 2018 at 15:00)</a>:</h4>
<p>It totally could be like that. I  just don't think we've specified it.</p>



<a name="153961270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961270">(May 15 2018 at 15:00)</a>:</h4>
<p>Yes, we want simple ways to be able to allow consumers to identify what codes are supported for specific fields (for different contexts such as an action).  I'm just trying to find out whether it's possible to advertise this (tell, not just answer).</p>



<a name="153961278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961278">(May 15 2018 at 15:05)</a>:</h4>
<p>Looks like OperationDefinition.parameter.searchType can be token.</p>



<a name="153961286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961286">(May 15 2018 at 15:07)</a>:</h4>
<p>So I changed the type for the "code" parameter to string and added a searchType of token.</p>



<a name="153961287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961287">(May 15 2018 at 15:09)</a>:</h4>
<p>There isn't a way to do that in the value returned, though.</p>



<a name="153961288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961288">(May 15 2018 at 15:09)</a>:</h4>
<p>Should it just have code and coding elements in the response?</p>



<a name="153961289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961289">(May 15 2018 at 15:11)</a>:</h4>
<p>Like this? <a href="https://simplifier.net/supportedvalueset/code-supported-at" target="_blank" title="https://simplifier.net/supportedvalueset/code-supported-at">https://simplifier.net/supportedvalueset/code-supported-at</a></p>



<a name="153961327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961327">(May 15 2018 at 16:33)</a>:</h4>
<p>Sounds to me like the original ask could be defined in the Profile with an read/write extension on the valueset elements.  Hey  <span class="user-mention" data-user-id="191405">@Rob Hausam</span>  have you looked at this issue ... isn't this what the <a href="http://build.fhir.org/terminologycapabilities.html" target="_blank" title="http://build.fhir.org/terminologycapabilities.html">TerminologyCapabilities</a>  supposed to address?</p>



<a name="153961375"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961375" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961375">(May 15 2018 at 21:19)</a>:</h4>
<p>so, this thread jumped ahead a long without me.</p>



<a name="153961377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961377">(May 15 2018 at 21:19)</a>:</h4>
<p>the existing operation that <span class="user-mention" data-user-id="191315">@Josh Mandel</span> originally referred to is</p>



<a name="153961378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961378">(May 15 2018 at 21:20)</a>:</h4>
<p>GET [base]/ValueSet/$expand?context=DocumentReference.type</p>
<p>That is - give me the value set expansion for the value set you use in the context DocumentReference.type</p>



<a name="153961379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961379">(May 15 2018 at 21:21)</a>:</h4>
<p>the idea that there are different value sets for reading or writing is foreign to FHIR so far; neither this operation nor CapabilityStatement considers this as a possibility. And I'm still not sure that I fully understand why the value sets are different</p>



<a name="153961382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961382">(May 15 2018 at 21:24)</a>:</h4>
<p>As I understand For Binary, Server A accepts mimetype x,y and z on a POST but only displays mimetype x on a GET.</p>



<a name="153961383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961383">(May 15 2018 at 21:25)</a>:</h4>
<p>so why is it important to know that it only returns x?</p>



<a name="153961384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961384">(May 15 2018 at 21:25)</a>:</h4>
<p>does the server allow you to ask for a particular format?</p>



<a name="153961402"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961402" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961402">(May 15 2018 at 22:23)</a>:</h4>
<p>Good question.  Knowing what incoming values a server will accept is crucial.  Knowing what values it might return is not as important.</p>



<a name="153961403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961403">(May 15 2018 at 22:25)</a>:</h4>
<p>We've encountered client vendors who want to know all the values they might need to map - all the outgoing values from the server - so they can do the work ahead of time to make sure they'll all work well.</p>



<a name="153961404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961404">(May 15 2018 at 22:25)</a>:</h4>
<p>I'd like to be able to meet that desire of theirs, and I really don't want to mislead them into thinking there's a different set of values they might receive than what they actually could.</p>



<a name="153961406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961406">(May 15 2018 at 22:30)</a>:</h4>
<p>I know you all considered an 'in/out/both' extension on the <code>valueset.concept</code>.  why was that idea discarded?   Cause then is baked into the profile.</p>



<a name="153961408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961408">(May 15 2018 at 23:11)</a>:</h4>
<p>I think both angles are useful.  A way to make it from CapabilityStatement all the way down to the ValueSet, and a way to go back up from an element to the ValueSet.</p>



<a name="153961419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961419">(May 16 2018 at 04:39)</a>:</h4>
<p>so Michael, your operation goes way beyond in/out - is that neecssary?</p>



<a name="153961420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961420">(May 16 2018 at 04:40)</a>:</h4>
<p>GET [base]/ValueSet/$expand?context=DocumentReference.type&amp;operation=read</p>



<a name="153961421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961421">(May 16 2018 at 04:40)</a>:</h4>
<p>we could do that. And default to the superset, I supppose.</p>



<a name="153961463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961463">(May 16 2018 at 07:18)</a>:</h4>
<p>No, I don't think so.  I think we could have incoming (for update, patch, create, and search-type) and outgoing (for read, vread, history-instance, and history-type).  Anyone thing we need more granularity than incoming/outgoing?  <span class="user-mention" data-user-id="191358">@Dennis Patterson</span> <span class="user-mention" data-user-id="191914">@Danielle Friend</span> <span class="user-mention" data-user-id="191410">@Brett Marquard</span> <span class="user-mention" data-user-id="191357">@Andrew Torres</span> <span class="user-mention" data-user-id="191315">@Josh Mandel</span> <span class="user-mention" data-user-id="191864">@Isaac Vetter</span> ?</p>



<a name="153961470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961470">(May 16 2018 at 07:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, is there an existing ValueSet we can use for incoming/outgoing?</p>



<a name="153961471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961471">(May 16 2018 at 07:25)</a>:</h4>
<p>I think inbound vs outbound would meet the need.</p>



<a name="153961472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961472">(May 16 2018 at 07:26)</a>:</h4>
<p>But as discussed above... do we actually want to <em>expand</em> in this use case?</p>



<a name="153961473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961473">(May 16 2018 at 07:26)</a>:</h4>
<p>If so, then this operation looks like a good fit.</p>



<a name="153961474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Danielle Friend <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961474">(May 16 2018 at 07:27)</a>:</h4>
<p>I can't think of a reason we'd need more than in/out.</p>



<a name="153961479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961479">(May 16 2018 at 07:39)</a>:</h4>
<p>Could ValueSet/$expand handle <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>'s case by passing in the value you want to check as a filter?</p>



<a name="153961533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961533">(May 16 2018 at 09:08)</a>:</h4>
<p>No, that would be more like $validate-code but with a context provided I think. But that only allows for 1 input, and essentially true/false as return.</p>



<a name="153961535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961535">(May 16 2018 at 09:08)</a>:</h4>
<p>Ah, makes sense.</p>



<a name="153961550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961550">(May 16 2018 at 09:19)</a>:</h4>
<p>sure $expand does that. You definitely want an expand for this</p>



<a name="153961551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961551">(May 16 2018 at 09:19)</a>:</h4>
<p>there's no an existing value set. I'll see if I can implement this on my server tonight</p>



<a name="153961755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961755">(May 16 2018 at 10:27)</a>:</h4>
<p>TL;DR Patient vs Provider or API limitations may scope inputs narrower than outputs.  Can this be more holistically supported by allowing CapabilityStatement.rest.resource to have separate profiles for inputs vs outputs?</p>
<p>Thought it would be helpful to provide some additional use-case details:</p>
<ul>
<li><em>Patients</em> will usually have a narrower scope of what can be created than <em>Providers</em>.</li>
<li>Providers may have narrower scope of what can be created through FHIR than by native means</li>
</ul>
<p>This can factor in resources such as...<br>
- DocumentReference.content.attachment.contentType - only create documents of certain types.  Cerner and Epic systems transform the content into another type for storage<br>
- Appointment.appointmentType - only support creation of certain appointment types<br>
- Patient race extension - only allow certain races/ethnicities to be written (e.g. clients/customers may only want certain races to be written in their systems going forward)</p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> stated "the idea that there are different value sets for reading or writing is foreign to FHIR so far; neither this operation nor CapabilityStatement considers this as a possibility."  So, the Conformance resources as a whole do not support this.  Since that's the underlying reality, it causes problems when trying to expose this through $expand.</p>
<p>First, introducing an interaction/operation parameter to $expand doesn't agree with the fundamental assumptions of FHIR and creates a mismatch.</p>
<p>Second, from what I've read on $expand, context is <em>recommended</em> to include a StructureDefinition.  The proposal so far removes that in favor of just an element path.  This seems to avoid the issue that separate profiles for inputs/outputs are discouraged.</p>
<p>All in all, we (Cerner and Epic) are wrestling with identifying the best solution, as well.  And, if this is supported first-hand, wanting to be aware of what other implications this has to the spec.  Are there any reasons not to change CapabilityStatement.rest.resource uniqueness from resource type only, to type + interaction?</p>



<a name="153961783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961783">(May 16 2018 at 11:45)</a>:</h4>
<p>Or type+direction.</p>



<a name="153961815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961815">(May 16 2018 at 12:21)</a>:</h4>
<p>well, for those interested, we'll be talking about capability statement this evening. contact me if you're interested.</p>



<a name="153961818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961818">(May 16 2018 at 12:22)</a>:</h4>
<p>I think type+direction is better than type+interaction, but I'm interested to know whether anyone would propose that delete is special again (e.g. I only delete cancelled things...)</p>



<a name="153961920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961920">(May 16 2018 at 14:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191358">@Dennis Patterson</span>:</p>
<blockquote>
<p>First, introducing an interaction/operation parameter to $expand doesn't <br>
agree with the fundamental assumptions of FHIR and creates a mismatch.</p>
</blockquote>
<p>not sure whether you are echoing me or not, and not sure whether you are agreeing or not. I was making a statement about the past, but not necessarily proposing a rule for the future.</p>
<blockquote>
<p>Second, from what I've read on $expand, context is recommended to include <br>
a StructureDefinition. </p>
</blockquote>
<p>You're right; I ducked that part for this purpose, though to be closely following the documentation, I'd have to add an argonaut specification profile url - but I don't know what that is.</p>
<blockquote>
<p>This seems to avoid the issue that separate profiles for inputs/outputs <br>
are discouraged.</p>
</blockquote>
<p>I'm not saying they are discouraged. Just foreign to our work to this point. We'll be talking about this amongst other things tonight</p>



<a name="153961925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961925">(May 16 2018 at 14:07)</a>:</h4>
<p>Delete might well have differences, but that's in the business logic behind it rather than code mapping.  I think we're okay there.</p>



<a name="153961973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153961973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153961973">(May 16 2018 at 15:04)</a>:</h4>
<p>ok, working... just have to upgrade soon</p>



<a name="153962016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962016">(May 16 2018 at 16:02)</a>:</h4>
<p>The profile won't be an Argonaut profile, it'll be for the specific organization in question.  The list of note types, for example, is owned by each organization using Epic or Cerner.</p>



<a name="153962088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962088">(May 16 2018 at 18:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191936">@Michael Donnelly</span> : <a href="http://test.fhir.org/r3/ValueSet/$expand?context=DocumentReference.type&amp;operation=read" target="_blank" title="http://test.fhir.org/r3/ValueSet/$expand?context=DocumentReference.type&amp;operation=read">http://test.fhir.org/r3/ValueSet/$expand?context=DocumentReference.type&amp;operation=read</a></p>



<a name="153962089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962089">(May 16 2018 at 18:30)</a>:</h4>
<p>can't ask the client to figure out the profile URL - they can, but they might as well use the long path to that value set</p>



<a name="153962093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962093">(May 16 2018 at 18:40)</a>:</h4>
<p>and also <a href="http://test.fhir.org/r3/ValueSet/$expand?context=DocumentReference.type&amp;operation=write" target="_blank" title="http://test.fhir.org/r3/ValueSet/$expand?context=DocumentReference.type&amp;operation=write">http://test.fhir.org/r3/ValueSet/$expand?context=DocumentReference.type&amp;operation=write</a></p>



<a name="153962894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962894">(May 16 2018 at 23:16)</a>:</h4>
<p>That looks great, Grahame.</p>



<a name="153962895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962895">(May 16 2018 at 23:17)</a>:</h4>
<p>My remaining concerns are totally nitpicky - functionally this does what we need.</p>



<a name="153962897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962897">(May 16 2018 at 23:18)</a>:</h4>
<p>Should we have a name other than "operation" for the search parameter, since Operator means something in FHIR?  And should we have a ValueSet that doesn't include "read" since that's a thing in REST?  (And also because when you pass a value in for a search, that's incoming but isn't actually writing.)</p>



<a name="153962898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962898">(May 16 2018 at 23:19)</a>:</h4>
<p>I think "incoming" and "outgoing" make sense for the values, but I have no idea for the parameter.</p>



<a name="153962924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962924">(May 17 2018 at 04:28)</a>:</h4>
<p>I considered: mode, interaction, operation, verb, scope</p>



<a name="153962925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962925">(May 17 2018 at 04:29)</a>:</h4>
<p>I'm ok with in/out or incoming/outgoing</p>



<a name="153962926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962926">(May 17 2018 at 04:30)</a>:</h4>
<p>but thinking more generally about this... it's about what you are doing with the element that you named in the context... I'm... searching on it? (context = search parameter?)</p>



<a name="153962954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962954">(May 17 2018 at 07:15)</a>:</h4>
<p>Context feels right.  Is there a way we can use "context" without blowing up the scope of this?</p>



<a name="153962961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962961">(May 17 2018 at 07:18)</a>:</h4>
<p>well, for this, we can scope it exactly how we want... not sure I've understood your question correctly</p>



<a name="153962965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962965">(May 17 2018 at 07:19)</a>:</h4>
<p>I think you've got it right.</p>



<a name="153962971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962971">(May 17 2018 at 07:21)</a>:</h4>
<p>I wouldn't want to take the time now to define every sort of context.  But if we can define context of "incoming" and "outgoing" now and add additional context later as needed, that sounds perfect.</p>



<a name="153962973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962973">(May 17 2018 at 07:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191358">@Dennis Patterson</span> how does this work for you?  <span class="user-mention" data-user-id="191914">@Danielle Friend</span> and I were more concerned about the lookup, and Grahame's $expand works great for that.</p>



<a name="153962974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153962974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153962974">(May 17 2018 at 07:25)</a>:</h4>
<p>What would this look like?  <code>http://fhir.example.org/r3/ValueSet/$expand?context=DocumentReference.type&amp;context=incoming</code> ?</p>



<a name="153963024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963024">(May 17 2018 at 08:16)</a>:</h4>
<p>ValueSet's $expand operation is typically expanding a specific ValueSet, yes? By removing profile from the context parameter, is there ever any ambiguity of what ValueSet should be expanded?  I'm thinking through specific, narrow use-cases, but just trying to make sure the operation holds up for others</p>



<a name="153963029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963029">(May 17 2018 at 08:25)</a>:</h4>
<p>If there's ambiguity, should the server return an error indicating that the client should specify additional context?</p>



<a name="153963076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963076">(May 17 2018 at 09:14)</a>:</h4>
<p>server has to return an error, yes</p>



<a name="153963088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963088">(May 17 2018 at 09:22)</a>:</h4>
<p>we omitted profile, yes. I did that because, in fact, there's no prefixed value that the client could know in advance that they could use, and because if they had to find it, they might as well look up by the long path we first laid out (CapabilityStatement -&gt; StructureDefinition -&gt; ValueSet). Also, none of you indicated that there was any reason to think about different profiles in play on these elements. Hence, just easier to leave it out</p>



<a name="153963113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963113">(May 17 2018 at 09:46)</a>:</h4>
<p>Do we care about a use case where the EHR has a large value set, like "any valid LOINC code" for <code>Observation.code</code>? If so, forcing an expand operation may be undesirable.</p>



<a name="153963676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harald Aamot <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963676">(May 18 2018 at 10:46)</a>:</h4>
<p>Or type+profile.<br>
use case would be to have a profile stating a narrower input than the output (example read certain Document types from cerner, convert them internally and offer profile specifying which content types are possible (broader output ))</p>
<p>if incoming[CREATE] and outcoming[READ] would be used, what about the use cases update/delete?</p>



<a name="153963712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963712">(May 18 2018 at 15:02)</a>:</h4>
<p>Just to clarify, this discussion is about operation on EHR server, not on Terminology Server.</p>



<a name="153963738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963738">(May 18 2018 at 18:45)</a>:</h4>
<p>well, the EHR has the discretion to return that the operation is too costly. The terminology servers routinely do this when the value set exceeds a certain cut-off size.</p>



<a name="153963742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963742">(May 18 2018 at 18:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191506">@Yunwei Wang</span> it's an API; the terminology server could support that on behalf of the EHR</p>



<a name="153963973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963973">(May 21 2018 at 23:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  I am worrying that if one terminology server serves multiple EHR servers, how the terminology server knows the correct context.</p>



<a name="153963975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963975">(May 21 2018 at 23:50)</a>:</h4>
<p>it wouldn't, from that call. that would have to be established in the context.</p>



<a name="153963976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963976">(May 21 2018 at 23:50)</a>:</h4>
<p>I don't think it should be the client's problem....</p>



<a name="153963996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153963996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153963996">(May 22 2018 at 02:05)</a>:</h4>
<p>I don't think this is a client's problem either. Instead, EHR server should be able to map the context to valueset ID and redirect the query to terminology server to expand with the correct id.</p>



<a name="153964017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153964017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153964017">(May 22 2018 at 04:16)</a>:</h4>
<p>which is exactly how my server resolves this one internally</p>



<a name="153967014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Marquard <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967014">(Jun 05 2018 at 09:50)</a>:</h4>
<p>This is a great discussion I am only a few weeks late to -- <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, Acceptable to create a tracker to update the $expand operation? Do we need an indicator on the value set on whether a value set is incoming vs outgoing? I am a little fuzzy how we expect servers to keep track</p>



<a name="153967027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967027">(Jun 05 2018 at 13:12)</a>:</h4>
<p>It would probably be good to discuss this on the terminology stream.  I'm not sure if we want/need an incoming vs outgoing indicator, but it is something that we should consider.</p>



<a name="153967037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967037">(Jun 05 2018 at 13:49)</a>:</h4>
<p>definitely need it for this use case. It would be associated with the element property, not more generally with the value set expansion framework</p>



<a name="153967038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967038">(Jun 05 2018 at 13:49)</a>:</h4>
<p>and yes please create ta task</p>



<a name="153967162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Marquard <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967162">(Jun 05 2018 at 20:37)</a>:</h4>
<p>can you say more about how it would be associated with the element property?</p>



<a name="153967215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967215">(Jun 06 2018 at 03:03)</a>:</h4>
<p>see <a href="http://build.fhir.org/valueset-operation-expand.html" target="_blank" title="http://build.fhir.org/valueset-operation-expand.html">http://build.fhir.org/valueset-operation-expand.html</a> - the context parameter.</p>



<a name="153967216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967216">(Jun 06 2018 at 03:03)</a>:</h4>
<p>would be another parameter that would be used with that parameter</p>



<a name="153967369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Marquard <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967369">(Jun 06 2018 at 14:22)</a>:</h4>
<p>Thanks, I am a little stumped is how a client knows to even ask the question about available write/read options. <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17321" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17321">#GF17321</a></p>



<a name="153967406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967406">(Jun 06 2018 at 15:30)</a>:</h4>
<p>I don't think a client will ask for a valueset at runtime (or, really, workflow time).  Rather, the administrator who sets up a client will use it to configure the client to do what the server needs.</p>



<a name="153967520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Marquard <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967520">(Jun 06 2018 at 18:30)</a>:</h4>
<p>Grahame, did you mean to implement at DocumentReference.context.attachement.contentType instead of DocumentReference.type?</p>



<a name="153967535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967535">(Jun 06 2018 at 19:59)</a>:</h4>
<p>yes my mistake.</p>



<a name="153967536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153967536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153967536">(Jun 06 2018 at 20:00)</a>:</h4>
<p>not sure about the client knowing to ask?</p>



<a name="153968720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153968720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153968720">(Jun 12 2018 at 14:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> it looks you documented the Resolution text of <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17321" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17321">#GF17321</a> from the Vocab meeting yesterday but not the Ballot Resolution.  Should this be Persuasive?  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  <span class="user-mention" data-user-id="191410">@Brett Marquard</span></p>



<a name="153968736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153968736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153968736">(Jun 12 2018 at 16:26)</a>:</h4>
<p>I didn't get to that on the call yesterday, but was going to do that when I included it in the block for the main vocab call - done.</p>



<a name="153983936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153983936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153983936">(Aug 08 2018 at 23:30)</a>:</h4>
<p>There seem to be two reasonable ways to return the list of codes in the ValueSet Resource: under the <strong>compose</strong> element, and under the <strong>expansion</strong> element. </p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , in your example $expand query, the response ValueSet used the <strong>expansion</strong> element (and elements under the expansion)  to return the supported codes <a href="http://test.fhir.org/r3/ValueSet/$expand?context=DocumentReference.type&amp;operation=read" target="_blank" title="http://test.fhir.org/r3/ValueSet/$expand?context=DocumentReference.type&amp;operation=read">http://test.fhir.org/r3/ValueSet/$expand?context=DocumentReference.type&amp;operation=read</a></p>
<p><strong> Is it also reasonable to use the compose element, where you would get a response like this: <a href="/user_uploads/10155/2US7AoM0SsgWCacOaxuxcpyy/valueSetResponse.txt" target="_blank" title="valueSetResponse.txt">valueSetResponse.txt</a>   ?</strong></p>
<p>I wanted to get you guys' opinion because it seemed like the expansion element was made specifically for this operation, however I was not sure if it was necessary. </p>
<p>The ValueSet.Read interaction would return the same resource as the $expand in this case.</p>



<a name="153983938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153983938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153983938">(Aug 08 2018 at 23:43)</a>:</h4>
<p>compose may or may not contain a list of codes, and the list may or may not be correct in any given context.</p>



<a name="153983939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153983939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153983939">(Aug 08 2018 at 23:44)</a>:</h4>
<p>it's the definition of what should be in the value set, given a set of additional rules about context</p>



<a name="153983940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153983940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153983940">(Aug 08 2018 at 23:45)</a>:</h4>
<p>to actually figure out what is in the value set under the applicable rules, some engine evaluates them, and creates a value set with the expansion populated that contains the actual list. So: you should only use the compose element if you're dealing with the rules, not the actual outcome. Sounds to me like you want expansion</p>



<a name="153984316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/153984316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#153984316">(Aug 09 2018 at 17:28)</a>:</h4>
<p>I didn't realize that is what compose meant, and don't really understand how it is useful, but I've updated the response to use the expansion element: <a href="/user_uploads/10155/cWJRySWU1xwf2IuDtNW1kCc3/valueSetResponse2.txt" target="_blank" title="valueSetResponse2.txt">valueSetResponse2.txt</a> </p>
<p>Thanks for clearing that up.</p>



<a name="157033469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157033469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157033469">(Jan 28 2019 at 15:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Following up on this. For the response to an $expand query, I'd return the list of codes/systems under the "expand" element. From your comment above, I am inferring that I would also want to use the "expand" element when doing a read on the ValueSet resource to get a list of codes. Is that correct, or in the case of a Read interaction, would it be appropriate to return the codes under the "compose" element?</p>



<a name="157050729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157050729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157050729">(Jan 28 2019 at 19:25)</a>:</h4>
<p>if you want to get the list of code in a value set, you should always use $expand</p>



<a name="157146616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157146616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157146616">(Jan 29 2019 at 23:03)</a>:</h4>
<p>Read ValueSet returns ValueSet definition. $expand operation returns ValueSet expansion.</p>



<a name="157317677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157317677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157317677">(Jan 31 2019 at 23:47)</a>:</h4>
<p>Makes sense. Another question that affects FHIR more broadly, but is encountered with a ValueSet Expansion: <strong>What do we do if there are too many values in an expansion to return them all at once?</strong> </p>
<p>FHIR has a through guide to paging when the response is a bundle of many resources. But if there is a single resource with thousands of repeating elements, how can we return them all in a single response? This could be an issue for ValueSet.$expand, and we've also seen it with the List resource.</p>



<a name="157317830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157317830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157317830">(Jan 31 2019 at 23:49)</a>:</h4>
<p>you can page through an expansion - check the $expand parameters</p>



<a name="157319087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157319087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157319087">(Feb 01 2019 at 00:13)</a>:</h4>
<p>Ohh, I see; that is convenient. It seems a little weird to pass an integer as the offset as opposed to just using a session ID to just start where you left off from, since the contains elements don't seem like they are supposed to be in any particular order. </p>
<p>I guess the offset could be nice if you are just looking for the last few codes? Is the idea that the client would do a $expand with count=0 to find out if there are any new codes...</p>



<a name="157319158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157319158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157319158">(Feb 01 2019 at 00:14)</a>:</h4>
<p>wait, nvm, because even if they do the $expand?count=0 and find out that there are new codes, it doesn't mean they are added to the end (since they arent ordered), so they will have to expand the whole valueset from the beginning to get the missing codes.</p>



<a name="157319161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157319161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157319161">(Feb 01 2019 at 00:14)</a>:</h4>
<p>The "total" element is the number of codes the server has, not the number of codes returned with this $expand request, right?</p>



<a name="157320803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157320803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157320803">(Feb 01 2019 at 00:49)</a>:</h4>
<p>yes to all that</p>



<a name="157360531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157360531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157360531">(Feb 01 2019 at 15:24)</a>:</h4>
<p>If count = 0, the client is asking how large the expansion is. My understanding is that server returns only the total number.</p>



<a name="157383663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157383663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157383663">(Feb 01 2019 at 20:35)</a>:</h4>
<p>why do we make the client keep track of the count and offset to do paging? It seems like it just adds a level of complexity (sure addition and keeping track of a number is pretty simple, but I'd think it is not needed). </p>
<p>Is there a use case that is not "just give me all the codes" which would benefit from having the offset relate to the number of codes not the number of pages?</p>



<a name="157384001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157384001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157384001">(Feb 01 2019 at 20:40)</a>:</h4>
<p>doing it by page count would force the page count itself to be a reliable agreement. And feedback was that clients to not necessarily want a consistent size for the page. (particularly first to second apge size)</p>



<a name="157385125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157385125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157385125">(Feb 01 2019 at 20:55)</a>:</h4>
<p>What if instead of a page count, you just had a reference to the "next" page, like how other paging works? That would be the easiest because you don't have to keep track of anything. The next URL is just right there in the response. And page size doesn't matter anymore either.</p>



<a name="157385242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157385242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157385242">(Feb 01 2019 at 20:57)</a>:</h4>
<p>well, there's quite some complications here. the server has to keep quite a lot of state for the search based mechanism, in order to get it right. Not all servers do, in fact. We wanted to avoid the need for state in this case</p>



<a name="157387284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157387284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157387284">(Feb 01 2019 at 21:26)</a>:</h4>
<p>What do you mean by <em>the server has to keep quite a bit of state</em>? The server just hasto keep track of the count and the offset. If we expect clients to be able to keep track of these two integers, a server should be able to as well. </p>
<p>Does this make it harder to page with ValueSet than it is to page with any other resource?</p>



<a name="157387868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/157387868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#157387868">(Feb 01 2019 at 21:34)</a>:</h4>
<p>not only does the server have to keep track of count and offset, the server has to reproduce the same result set to apply the offset to. In search, that can be quite problematic. We decided to duck that in value set expansion, and make the client specify the whole search each time, and a window into it</p>



<a name="158387938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/158387938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#158387938">(Feb 12 2019 at 21:13)</a>:</h4>
<blockquote>
<p>not only does the server have to keep track of count and offset, the server has to reproduce the same result set to apply the offset to. </p>
</blockquote>
<p>The rate-determining step here is producing the result set. Keeping track of an extra integer seems super trivial. </p>
<p>Why not just allow the client to pass a parameter that will let the server look up all of the state from the previous complex result set generation instead of just the offset? This could save the server a bunch of time, especially for a potentially costly operation.</p>



<a name="158390813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/158390813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#158390813">(Feb 12 2019 at 21:51)</a>:</h4>
<p>$expand returns one ValueSet resource. Search returns a bundle of resources.</p>



<a name="158398410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/158398410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#158398410">(Feb 12 2019 at 23:40)</a>:</h4>
<p>Right, well $expand returns <em>part of</em> a resource. If there are too many codes in the valueSet, the server can return the first 100 codes and then the Client will have to expand the ValueSet again to see codes 101 through 200. </p>
<p>The debate is: How should this paging of codes within a single ValueSet resource be done. I think we should just have a pointer to the next page of results so we can save the state from the previous expansions. </p>
<p>If the client only passes an "Offset" integer N, (unless the server stores all of the codes in a static table), the server may have to enumerate over the first N codes just to get to the offset spot where they will start. So when the client just wants the 1,000,001st code, the server has to enumerate over the first 1,000,000 codes to get to the last one.</p>



<a name="158409666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/158409666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#158409666">(Feb 13 2019 at 03:28)</a>:</h4>
<p>We save expansion in database. So it is much easier for us if client specifies offset and count.</p>



<a name="158431471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/158431471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#158431471">(Feb 13 2019 at 11:08)</a>:</h4>
<p>but if you do that, you can also add a state parameter that refers to the database record.</p>



<a name="158431567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/158431567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#158431567">(Feb 13 2019 at 11:10)</a>:</h4>
<p>I don't feel strongly about this. I only cache these things transiently, not in the database, but I could use a state parameter. However the technical specification for search paging (using links) doesn't seem so obviously applicable to $expand, since there's no bundle. Probably further discussion on this should be on the terminology stream with the other terminology server authors</p>



<a name="158650189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/158650189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#158650189">(Feb 15 2019 at 21:16)</a>:</h4>
<blockquote>
<p>We save expansion in database. So it is much easier for us if client specifies offset and count.</p>
</blockquote>
<p>I agree that <strong>if</strong> the expansion is stored in an <em>index-able</em> format in the database, or if we cached the whole expansion, it makes sense to just use the offset param. However, not all servers work that way, and the given $expand parameters should not dictate how the server has to store the expansion in their system. We could just cache the entire expansion too, but it could be pretty large, so it'd be cleaner for us to just iterate over codes in the DB.</p>
<p>I'm not suggesting using the "link" in a bundle, since that doesn't make sense for our non-bundle scenario. There should just be a sessionID-esque parameter instead of mandating paging by offset param. This "session ID" (or <em>paging ID</em>)  param could just literally be the offset integer for servers like Yunwei's that are indexed, so nothing would change for them. And it could be a state identifier code for servers that want to iterate from where they last left off (as opposed to from a specific integer index).</p>



<a name="159317821"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/159317821" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#159317821">(Feb 25 2019 at 07:10)</a>:</h4>
<p>The <em>key</em> difference is that a state parameter encodes <em>all</em> the $expand parameters, not just offset &amp; count</p>



<a name="159349980"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/159349980" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colby Seyferth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#159349980">(Feb 25 2019 at 16:22)</a>:</h4>
<p>Isn't that even easier? When would the client want to use a different value for one of the other parameters?</p>



<a name="159382265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ValueSet%20for%20element%20and%20direction/near/159382265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ValueSet.20for.20element.20and.20direction.html#159382265">(Feb 25 2019 at 23:26)</a>:</h4>
<p>can we have this discussion just on the terminology stream?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
