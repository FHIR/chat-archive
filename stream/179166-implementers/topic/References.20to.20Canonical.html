---
layout: page
title: "FHIR Chat  · References to Canonical · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20Canonical.html">References to Canonical</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="181050534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20Canonical/near/181050534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20Canonical.html#181050534">(Nov 18 2019 at 20:02)</a>:</h4>
<p>So, a HAPI FHIR user recently submitted a ticket that highlighted a change that I actually hadn't noticed in R4: <a href="https://github.com/jamesagnew/hapi-fhir/issues/1583" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/issues/1583">https://github.com/jamesagnew/hapi-fhir/issues/1583</a></p>
<p>Essentially, QuestionnaireResponse.questionnaire has now changed from being a <code>reference</code> to being a <code>canonical</code>. Due to HAPI FHIR's current interpretation of canonical, this means that anyone who has a QuestionnaireResponse containing a relative link to a local Questionnaire can no longer search for QR's using a query such as <code>QuestionnaireResponse?questionnaire=Questionnaire/123</code>.</p>
<p>So I'm wondering several things here:</p>
<ul>
<li>Is the intent for canonicals that they should allow local references in addition to full URIs? My read of the spec is that they should not.</li>
<li>Does it make sense for a <code>reference</code> search parameter to point to a <code>canonical</code> type at all? I would have expected a parameter of type <code>uri</code>. The FHIR search page does discuss using reference SPs that point to canonical here ( <a href="http://hl7.org/fhir/search.html#versions" target="_blank" title="http://hl7.org/fhir/search.html#versions">http://hl7.org/fhir/search.html#versions</a> ) but it doesn't explain how this is different from an SP of type URI.. If anything it seems like it duplicates it, and puts the onus on the server to understand whether a reference SP is expected to point to a canonical or a real reference</li>
<li>If references are allows to point to canonical types, is it reasonable for a server to interpret a local reference for what it is and try to a search such as the one above?</li>
</ul>



<a name="181050889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20Canonical/near/181050889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20Canonical.html#181050889">(Nov 18 2019 at 20:06)</a>:</h4>
<ul>
<li>they should not</li>
<li>I'm not sure. I thought we discussed this somewhere..?</li>
<li>reasonable, yes</li>
</ul>



<a name="181060355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20Canonical/near/181060355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20Canonical.html#181060355">(Nov 18 2019 at 21:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> Can you submit a change request for us to clarify this in the spec?  (And figure out what to clarify to :&gt;)</p>



<a name="181329714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20Canonical/near/181329714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20Canonical.html#181329714">(Nov 21 2019 at 17:56)</a>:</h4>
<p>A similar issue is present in Measure/MeasureReport, which has a similar usage pattern as Questionnaire/QuestionnaireResponse.    Honestly, I think it's the first time I ran across a 'canonical' data type during an implementation; or at least the first time it mattered to the project I'm working on.  And I'm here wondering why it's not a typical Reference.   </p>
<p>So... chiming in to request that the spec clarification be broad enough to address usage patterns in some of the other resources, not just Questionnaire/QuestionnaireResponse.</p>



<a name="181580812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20Canonical/near/181580812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20Canonical.html#181580812">(Nov 21 2019 at 20:26)</a>:</h4>
<p>Canonicals are used when there are expected to be identical copies of the resource on numerous servers (possibly including a local one), so you don't want to point to a reference on some remote server far away.  You want to specify a canonical identifier that can be searched on the local system and near-by registries and only resolved by hitting the canonical URL as a last resort.  This is typically used for 'definitional' and infrastructure resources.</p>



<a name="181582441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20Canonical/near/181582441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20Canonical.html#181582441">(Nov 21 2019 at 20:46)</a>:</h4>
<p>they are "fixed" resources instances vs "dynamic"  resource instances...</p>



<a name="181583061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20Canonical/near/181583061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20Canonical.html#181583061">(Nov 21 2019 at 20:53)</a>:</h4>
<p>Sort of.  Definitional resources can be changed - but they're generally only distributed into the wild when solid - at least for a given release version.</p>



<a name="183953186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20Canonical/near/183953186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20Canonical.html#183953186">(Dec 20 2019 at 17:01)</a>:</h4>
<p>In case of Measure/MeasureReport, does that mean that it should not be possible to $evaluate-measure a Measure which has no Measure.url, because MeasureReport.measure is required?</p>



<a name="183986924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20Canonical/near/183986924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20Canonical.html#183986924">(Dec 21 2019 at 00:30)</a>:</h4>
<p>That is my understanding but let me confirm with <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> ?</p>



<a name="183989230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/References%20to%20Canonical/near/183989230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/References.20to.20Canonical.html#183989230">(Dec 21 2019 at 01:26)</a>:</h4>
<p>Yes, that's correct, and the <a href="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition-measure-cqfm.html" target="_blank" title="http://hl7.org/fhir/us/cqfmeasures/StructureDefinition-measure-cqfm.html">cqfm-measure</a> profile in the Quality Measure IG requires <code>url</code> for this reason.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
