---
layout: page
title: "FHIR Chat  · Extensions on Required Codes · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html">Extensions on Required Codes</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153850958"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153850958" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Royce <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153850958">(Sep 28 2016 at 00:21)</a>:</h4>
<p>I need to know how to extend a required value set.  The particular case in mind is <code>AllergyIntolerance.type</code> whose bound value set has only 2 values.  We are currently using a much more sophisticated set of values  such as Allergic reaction, Drug interaction, Food intolerance, Hypersensitivity reaction, Medication side-effect and including levels of immuno-responses &amp;c.  <br>
We have 2 problems:<br>
1. clearly we carry categories of reactions which cannot be described using either value in the required value set (allergy, intolerance); and<br>
2. while the value set provides suitable categories for several of our codes, we want to attach finer-grained codes.</p>



<a name="153850959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153850959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Royce <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153850959">(Sep 28 2016 at 00:28)</a>:</h4>
<p>I'm not too worried about the first problem -- at least, not at this stage -- but I urgently need to know how to add finer-grained codes to the data.  I have thought of 2 options:<br>
1. Add an extension to the <code>AllergyIntolerance.type</code> element inside the <code>code</code> data type.<br>
2. Add an extension to the <code>AllergyIntolerance</code> resource as a whole.<br>
The first seems the better option to me, but I have a further question regarding that: is it legal, if my fine-grained code cannot be satisfactorily categorised by the 2 current values of the value set, to just leave out the actual code value and carry only the extension?  (I suspect not, but if it was, that would solve my first problem too!)</p>



<a name="153850960"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153850960" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Royce <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153850960">(Sep 28 2016 at 00:35)</a>:</h4>
<p>P.S. I assume that there must be something about this in the FHIR documentation. An, admittedly light, scan of the documentation didn't turn anything up, but if it exists, just point me at it and I'll take it from there myself. <img alt=":smiley:" class="emoji" src="/static/third/gemoji/images/emoji/smiley.png" title=":smiley:"> </p>



<a name="153850962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153850962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153850962">(Sep 28 2016 at 01:06)</a>:</h4>
<p>I would use an extension on the AllergyIntolerance resource... sm like   Extension "moretypes"  0..1 type "code" and bind it to your codes. </p>



<a name="153850964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153850964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Royce <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153850964">(Sep 28 2016 at 03:12)</a>:</h4>
<p>This seems to be an easy answer, but the simple truth is that, if we do this, <code>AllergyIntolerance.type</code> will never get populated -- not in practice -- so the extension effectively becomes "we're ignoring your type and using our own" which is <strong>really bad</strong> for interoperability. <img alt=":disappointed:" class="emoji" src="/static/third/gemoji/images/emoji/disappointed.png" title=":disappointed:"> </p>



<a name="153850971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153850971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153850971">(Sep 28 2016 at 03:28)</a>:</h4>
<p>Good practice is to map the codes that you have to the corresponding FHIR attribute and also send the extension.  That's what your profile should enforce to ensure maximum interoperability.  You can't extend required value sets.  </p>



<a name="153850972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153850972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Royce <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153850972">(Sep 28 2016 at 03:30)</a>:</h4>
<p>By "you can't extend required value sets" do you mean we can't add additional values to the set (which I get) or we can't even add an extension on the data type?</p>



<a name="153850973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153850973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153850973">(Sep 28 2016 at 03:31)</a>:</h4>
<p>You can't add to the value set.  You can add an extension on the code data type</p>



<a name="153850978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153850978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Royce <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153850978">(Sep 28 2016 at 03:45)</a>:</h4>
<p>Right.  So is an extension on the <code>code</code> data type the way to go, or should we just add an extension to the <code>AllergyIntolerance</code> resource?</p>



<a name="153850983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153850983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153850983">(Sep 28 2016 at 03:53)</a>:</h4>
<p>In general, nesting extensions beneath the element they're most closely tied to is best practice - they're less likely to get wiped due to another change that way.</p>



<a name="153850998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153850998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Royce <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153850998">(Sep 28 2016 at 05:55)</a>:</h4>
<p>Right so inside the code data type then.  However, here's the rub, what about codes that cannot be properly classified as either "allergy" or "intolerance"?  Can I send the code with just the extension and without the actual code?</p>



<a name="153851033"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153851033" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153851033">(Sep 28 2016 at 08:41)</a>:</h4>
<p>Out of curiosity, which code can you not properly classify as allergy or intolerance? Would that be the drug-drug interaction? I'm wondering whether the <code>AllergyIntolerance</code> resource is the right choice for interactions?</p>



<a name="153851112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153851112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153851112">(Sep 28 2016 at 20:28)</a>:</h4>
<p>I'd be curious about what concepts you're trying to convey because the expectation is those two choices are exhaustive for the intended use of the resource.</p>



<a name="153851127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153851127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153851127">(Sep 28 2016 at 21:22)</a>:</h4>
<p>I'm curious about that, as well.  Since it's the AllergyIntolerance resource, the intent is to classify the type as either "allergy" or "intolerance", and if you are unable to determine that or otherwise choose not to state that, then you omit the element. </p>



<a name="153851148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153851148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Royce <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153851148">(Sep 28 2016 at 22:58)</a>:</h4>
<p>Hmmm ...<br>
So our current model is a model for future propensity of an adverse reaction, so we include items like <strong>idiosyncratic</strong> drug-drug interactions.  We also include temporary reactions such as while the patient is taking warfarin they are "allergic" to aspirin.</p>



<a name="153851171"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153851171" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153851171">(Sep 29 2016 at 02:45)</a>:</h4>
<p>this is defined as not part of an AllergyIntolerance, for purposes of consistency with OpenEHR - consult the scope. </p>



<a name="153851172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153851172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153851172">(Sep 29 2016 at 02:45)</a>:</h4>
<p>that's why you don't find a matching code</p>



<a name="153851182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153851182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen Royce <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153851182">(Sep 29 2016 at 04:11)</a>:</h4>
<p>Okay. So where would such data go?</p>



<a name="153851185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153851185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153851185">(Sep 29 2016 at 04:32)</a>:</h4>
<p>don't know</p>



<a name="153851236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153851236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153851236">(Sep 29 2016 at 09:02)</a>:</h4>
<p>It's interesting though. In general, should we be able to express consequences of one resource with another resource? So if there is a <code>MedicationOrder</code> for warfarin, is there a need to be able to describe an implication for aspirin (and x and y and z and ...)? Typing these words it seems to me that that's Pandora's box and better left to CDS, but that's just me thinking about one use case.</p>



<a name="153851247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Extensions%20on%20Required%20Codes/near/153851247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Extensions.20on.20Required.20Codes.html#153851247">(Sep 29 2016 at 14:35)</a>:</h4>
<p>See DetectedIssue</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
