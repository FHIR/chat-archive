---
layout: page
title: "FHIR Chat  · _has parameters · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_has.20parameters.html">_has parameters</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153884913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_has%20parameters/near/153884913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_has.20parameters.html#153884913">(Apr 17 2017 at 14:28)</a>:</h4>
<p>Hi,</p>
<p>I am working on an app that among other things should be capable of finding patients that have certain conditions. For that I am using queries like <br>
<a href="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003">http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003</a> where 38341003 is the Snomed code for hypertension. This works as expected and I get the following results:<br>
<a href="http://fhirtest.uhn.ca/baseDstu3/Patient" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Patient">http://fhirtest.uhn.ca/baseDstu3/Patient</a> -&gt; 4411 patients total<br>
<a href="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003">http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003</a> -&gt; 283 patients with hypertension<br>
<a href="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=44054006" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=44054006">http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=44054006</a> -&gt; 44 patients with diabetes<br>
<a href="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=417532002" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=417532002">http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=417532002</a> -&gt; 0 patients allergic to fish</p>
<p>Then, if I try to OR those conditions I get the following:<br>
<a href="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003,44054006" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003,44054006">http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003,44054006</a> -&gt; 300 patient with hypertension OR diabetes<br>
<a href="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003,417532002" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003,417532002">http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003,417532002</a> -&gt; 283 patient with hypertension OR fish allergy</p>
<p>That seems correct and obviously some of the patients have both diabetes and hypertension because 300 is less then 283 + 44. The problem is that I cannot AND these conditions properly. For example, if want to find ONLY the patients having both diabetes and hypertension I should do one of these:</p>
<p>Hypertension AND Diabetes:<br>
<a href="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003&amp;_has:Condition:patient:code=44054006" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003&amp;_has:Condition:patient:code=44054006">http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=38341003&amp;_has:Condition:patient:code=44054006</a> -&gt; 283 patients<br>
Diabetes AND Hypertension:<br>
<a href="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=44054006&amp;_has:Condition:patient:code=38341003" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=44054006&amp;_has:Condition:patient:code=38341003">http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=44054006&amp;_has:Condition:patient:code=38341003</a> -&gt; 44 patients</p>
<p>Also Fish Allergy AND Hypertension:<br>
<a href="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=417532002&amp;_has:Condition:patient:code=38341003" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=417532002&amp;_has:Condition:patient:code=38341003">http://fhirtest.uhn.ca/baseDstu3/Patient?_has:Condition:patient:code=417532002&amp;_has:Condition:patient:code=38341003</a> -&gt; 0 patients</p>
<p>I appears that the “_has” parameter can only be used once. However, the documentation states that: multiple _has parameters are allowed (e.g. GET [base]/Patient?_has:Observation:subject:code=123&amp;_has:Observation:subject:code=456). Note that each _has parameter is processed independently of other _has parameters. <br>
And also "The _has parameter provides limited support for reverse chaining…” - what are the limitations?</p>
<p>My question is am I doing it wrong or is it just not working properly? What is the correct way to AND _has parameters?</p>
<p>Thanks,<br>
Vlad</p>



<a name="153884919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_has%20parameters/near/153884919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vladimir Ignatov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_has.20parameters.html#153884919">(Apr 17 2017 at 15:53)</a>:</h4>
<p>I should also mention that currently there is a "broken" patient that messes up many queries. Try this for example: <a href="http://fhirtest.uhn.ca/baseDstu3/Patient?gender=female" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Patient?gender=female">http://fhirtest.uhn.ca/baseDstu3/Patient?gender=female</a></p>



<a name="153887532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_has%20parameters/near/153887532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_has.20parameters.html#153887532">(May 06 2017 at 11:01)</a>:</h4>
<p><span class="user-mention" data-user-id="193731">@Vladimir Ignatov</span> Vlad - just saw this today.  I agree, AND must be supported to cover the majority of _has use cases.  See <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13324" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13324">GF#13324</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
