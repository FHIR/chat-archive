---
layout: page
title: "FHIR Chat  · canonical references · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20references.html">canonical references</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153916572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20references/near/153916572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Spencer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20references.html#153916572">(Oct 28 2017 at 07:14)</a>:</h4>
<p>Vonk seems to canonicalise relative references in incoming resources by prepending the server base url.  Is this behaviour specified anywhere or just at the discretion of the implementer?  (similar to the behaviour for relative urls here, but applies to non-bundled resources: <a href="http://hl7.org/fhir/bundle.html#references" target="_blank" title="http://hl7.org/fhir/bundle.html#references">http://hl7.org/fhir/bundle.html#references</a>)</p>



<a name="153916583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20references/near/153916583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20references.html#153916583">(Oct 28 2017 at 09:10)</a>:</h4>
<p>not specified anywhere as far as I remember</p>



<a name="153916725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20references/near/153916725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20references.html#153916725">(Oct 30 2017 at 08:49)</a>:</h4>
<p>To be precise: we prepend the server base url at request time, on the way out to the client. This way:<br>
- you can directly follow the links, because they are absolute<br>
- it works for different clients addressing Vonk through different urls (e.g. through <a href="http://vonk.intranet.hospital.org" target="_blank" title="http://vonk.intranet.hospital.org">vonk.intranet.hospital.org</a> from within the firewall and through <a href="http://vonk.hospital.org" target="_blank" title="http://vonk.hospital.org">vonk.hospital.org</a> from outside).</p>



<a name="153916765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20references/near/153916765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20references.html#153916765">(Oct 30 2017 at 13:20)</a>:</h4>
<p>We did it like that all the way back from Spark I think....</p>



<a name="153916768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20references/near/153916768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20references.html#153916768">(Oct 30 2017 at 13:22)</a>:</h4>
<p>Not exactly: <br>
- returning absolute links: yes, Spark did that already<br>
- adjust to the viewpoint of the client: Spark had a serverwide setting for it's FHIR endpoint, it could not be adjusted per-request.</p>



<a name="153918808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20references/near/153918808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20references.html#153918808">(Nov 10 2017 at 08:21)</a>:</h4>
<p>I did a port of that in Spark, and I do what you've described in our current server <span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> , however I think this approach has issues if you have a reverse proxy in place.<br>
So where I can, I use relative references (which avoid the problem)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
