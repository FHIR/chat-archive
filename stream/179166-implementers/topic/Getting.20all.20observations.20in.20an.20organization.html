---
layout: page
title: "FHIR Chat  · Getting all observations in an organization · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20all.20observations.20in.20an.20organization.html">Getting all observations in an organization</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="264267666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20all%20observations%20in%20an%20organization/near/264267666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marius Moga <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20all.20observations.20in.20an.20organization.html#264267666">(Dec 09 2021 at 08:08)</a>:</h4>
<p>Hi,<br>
I have a scenario where the Encounter.reasonReference references many Observation, the Task.encounter references  the Encounter and the <br>
Task.owner is either a reference to an Organization or a PractitionerRole. </p>
<p>What I'm trying to do is get all observations of tasks owned by an organization or by an practitioner role who is part of that organization.<br>
For example lets say we have 2 tasks, one owned by Organization Organization/5678 and another owned by PractitionerRole/1234 who is part of Organization/5678. The 2 tasks reference 2 different encounters and each Encounter references a different observation.</p>
<p>This 2 queries work and will return one of the 2 tasks each:</p>
<ul>
<li>Task?owner=Organization/5678 - will return the task owned by the organization</li>
<li>Task?owner.organization=Organization/5678 - will return the task owned by the practitioner role</li>
</ul>
<p>With this I would expect that the next 2 queries to return different observations. Instead they return the same one observation, the one linked to the task owned by the organization:</p>
<ul>
<li>Observation?_has:Encounter:reason-reference:_has:Task:encounter:owner=Organization/5678 - returns observation of task owned by the organization</li>
<li>Observation?_has:Encounter:reason-reference:_has:Task:encounter:owner.organization=Organization/5678 - returns observation of task owned by the organization. Was expecting the other one.</li>
</ul>
<p>Any idea what's wrong here? Maybe I'm are hitting some limitation I'm are not aware of? </p>
<p>I have also tried making the Observation reference an Encounter in Observation.encounter and use this queries:</p>
<ul>
<li>Observation?encounter._has:Task:encounter:owner=Organization/5678 - works and returns the task owned by the organization</li>
<li>Observation?encounter._has:Task:encounter:owner.organization=Organization/5678- fails with "Invalid parameter chain: encounter._has:Task:encounter:owner.organization"</li>
</ul>
<p>So again something about inspecting the owner.organization property seams to not work. I was hoping that by not using an nested revers chain things would be different :)</p>
<p>My question is can I fix this in any way and if not is there a better way of achieving this without changing how things are referenced to much?</p>
<p>Thank you.</p>



<a name="264270560"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20all%20observations%20in%20an%20organization/near/264270560" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20all.20observations.20in.20an.20organization.html#264270560">(Dec 09 2021 at 08:44)</a>:</h4>
<p>Have your tried Observation?encounter._has:Task:encounter:owner:PractitionerRole.organization=Organization/5678 ? If the owner of the Task is a reference to an Organization your search URL will fail, given that Organization doesn't have an 'organization' reference/search parameter.</p>



<a name="264280976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20all%20observations%20in%20an%20organization/near/264280976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marius Moga <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20all.20observations.20in.20an.20organization.html#264280976">(Dec 09 2021 at 10:24)</a>:</h4>
<p>Yes I did try this queries: </p>
<ul>
<li>Observation?encounter._has:Task:encounter:owner:PractitionerRole.organization=Organization/5678 - fails with "Invalid parameter chain: encounter._has:Task:encounter:owner:PractitionerRole.organization"</li>
<li>Observation?_has:Encounter:reason-reference:_has:Task:encounter:owner:PractitionerRole.organization=Organization/5678  - fails with "Unknown parameter name: Task:owner:PractitionerRole"</li>
</ul>
<p>I have tried something like this on other occasions as well and could never specify the type in a reverse chain even in simpler scenarios like:</p>
<ul>
<li>Encounter?_has:Task:encounter:owner:PractitionerRole.organization=Organization/5678  - fails with "Unknown parameter name: Task:owner:PractitionerRole.organization"</li>
</ul>
<p>I have tested all of this with HAPI FHIR  v5.4.1 and v5.6.0 (FHIR R4 on both versions).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
