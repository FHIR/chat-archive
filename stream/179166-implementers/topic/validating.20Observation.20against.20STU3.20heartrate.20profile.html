---
layout: page
title: "FHIR Chat  · validating Observation against STU3 heartrate profile · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html">validating Observation against STU3 heartrate profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="158550575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158550575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158550575">(Feb 14 2019 at 18:11)</a>:</h4>
<p>I get weird results when validating a heartrate observation against the profile <a href="http://hl7.org/fhir/StructureDefinition/heartrate" target="_blank" title="http://hl7.org/fhir/StructureDefinition/heartrate">http://hl7.org/fhir/StructureDefinition/heartrate</a></p>
<div class="codehilite"><pre><span></span>            <span class="nt">&lt;Observation</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;meta&gt;</span>
                    <span class="nt">&lt;profile</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/StructureDefinition/heartrate&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/meta&gt;</span>
                <span class="nt">&lt;identifier&gt;</span>
                    <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://klinikum.rwth-aachen.de/fhir/NamingSystem/observation-identifier&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">&quot;123456789_20180807070127_0002-480a&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/identifier&gt;</span>
                <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;final&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;category&gt;</span>
                    <span class="nt">&lt;coding&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/observation-category&quot;</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;vital-signs&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;/coding&gt;</span>
                <span class="nt">&lt;/category&gt;</span>
                <span class="nt">&lt;code&gt;</span>
                    <span class="nt">&lt;coding&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://loinc.org&quot;</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;8867-4&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;/coding&gt;</span>
                <span class="nt">&lt;/code&gt;</span>
                <span class="nt">&lt;subject&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;Patient/example&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/subject&gt;</span>
                <span class="nt">&lt;effectiveDateTime</span> <span class="na">value=</span><span class="s">&quot;2018-08-07T07:01:27+01:00&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;valueQuantity&gt;</span>
                    <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">&quot;71&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;unit</span> <span class="na">value=</span><span class="s">&quot;/min&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://unitsofmeasure.org&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;/min&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/valueQuantity&gt;</span>
            <span class="nt">&lt;/Observation&gt;</span>
</pre></div>



<a name="158550605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158550605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158550605">(Feb 14 2019 at 18:11)</a>:</h4>
<p><a href="http://hapi.fhir.org/baseDstu3/Observation/$validate" target="_blank" title="http://hapi.fhir.org/baseDstu3/Observation/$validate">http://hapi.fhir.org/baseDstu3/Observation/$validate</a> returns</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;OperationOutcome</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;text&gt;</span>  ... <span class="nt">&lt;/text&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;warning&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;processing&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;diagnostics</span> <span class="na">value=</span><span class="s">&quot;All observations should have a performer&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;Observation&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;error&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;processing&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;diagnostics</span> <span class="na">value=</span><span class="s">&quot;The Coding references a value set, not a code system (&amp;quot;http://loinc.org&amp;quot;)&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;Observation.code.coding&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;error&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;processing&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;diagnostics</span> <span class="na">value=</span><span class="s">&quot;The Coding references a value set, not a code system (&amp;quot;http://loinc.org&amp;quot;)&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;Observation.code.coding&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
<span class="nt">&lt;/OperationOutcome&gt;</span>
</pre></div>



<a name="158550705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158550705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158550705">(Feb 14 2019 at 18:12)</a>:</h4>
<p><a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> returns</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;OperationOutcome</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;text&gt;</span>  ... <span class="nt">&lt;/text&gt;</span>
<span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;error&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;invariant&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;details&gt;</span>
            <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">&quot;If there is no component or related element then either a value[x] or a data absent reason must be present () (component.empty() and related.empty()) implies (dataAbsentReason or value)&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/details&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;Observation&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;expression</span> <span class="na">value=</span><span class="s">&quot;Observation // line 2 col 4)&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;information&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;code-invalid&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;details&gt;</span>
            <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">&quot;None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/observation-category (http://hl7.org/fhir/ValueSet/observation-category, and a code is recommended to come from this value set&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/details&gt;</span>
        <span class="nt">&lt;expression</span> <span class="na">value=</span><span class="s">&quot;Observation.category // line 12 col 5)&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;information&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;informational&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;details&gt;</span>
            <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">&quot;Element coding is unknown or does not match any slice  for profile http://hl7.org/fhir/StructureDefinition/heartrate&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/details&gt;</span>
        <span class="nt">&lt;expression</span> <span class="na">value=</span><span class="s">&quot;Observation.code.coding // line 19 col 6)&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
<span class="nt">&lt;/OperationOutcome&gt;</span>
</pre></div>


<p>EDIT: I get the same response, when I use the original heartrate example from the STU3 Spec</p>



<a name="158552267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158552267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158552267">(Feb 14 2019 at 18:32)</a>:</h4>
<p>POSTing and validating the Observation on my local VONK returns <em>no</em> errors,<br>
however, if the Bundle is nested in a translation Bundle,<br>
I get an error when posting the transaction to the base </p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;OperationOutcome</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;0a53df9e-1eb3-484e-8be9-925625286625&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;meta&gt;</span>
        <span class="nt">&lt;versionId</span> <span class="na">value=</span><span class="s">&quot;c0fe9241-4a9a-455c-aa05-fd0033c07138&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;lastUpdated</span> <span class="na">value=</span><span class="s">&quot;2019-02-14T18:27:21.2483008+00:00&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/meta&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;error&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;invalid&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;details&gt;</span>
            <span class="nt">&lt;coding&gt;</span>
                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/dotnet-api-operation-outcome&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;1008&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/coding&gt;</span>
            <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">&quot;Value is not exactly equal to fixed value &#39;http://loinc.org&#39;&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/details&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;Observation.code[0].coding[0].system[0]&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;error&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;invalid&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;details&gt;</span>
            <span class="nt">&lt;coding&gt;</span>
                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/dotnet-api-operation-outcome&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;1008&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/coding&gt;</span>
            <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">&quot;Value is not exactly equal to fixed value &#39;http://unitsofmeasure.org&#39;&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/details&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;Observation.value[0].system[0]&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;error&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;code-invalid&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;details&gt;</span>
            <span class="nt">&lt;coding&gt;</span>
                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/dotnet-api-operation-outcome&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;6001&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/coding&gt;</span>
            <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">&quot;Code &#39;/min&#39; from system &#39;http://unitsofmeasure.org/&#39; does not exist in valueset &#39;http://hl7.org/fhir/ValueSet/ucum-vitals-common&#39;&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/details&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;Observation.value[0]&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;warning&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;not-supported&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;details&gt;</span>
            <span class="nt">&lt;coding&gt;</span>
                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/dotnet-api-operation-outcome&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;5003&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/coding&gt;</span>
            <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">&quot;Argument is not supported&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/details&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;/Observation&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;warning&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;not-supported&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;details&gt;</span>
            <span class="nt">&lt;coding&gt;</span>
                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/dotnet-api-operation-outcome&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;5003&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/coding&gt;</span>
            <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">&quot;Argument is not supported&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/details&gt;</span>
        <span class="nt">&lt;location</span> <span class="na">value=</span><span class="s">&quot;identifier=http://myorganization.org/fhir/NamingSystem/observation-identifier|123456789_20180807070127_0002-480a&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
<span class="nt">&lt;/OperationOutcome&gt;</span>
</pre></div>


<p>However, if I POST to <code>/Bundle</code> or <code>/Bundle/$validate</code> I get <em>no</em> errors!!??</p>
<p>This is the Bundle:</p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;Bundle</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;fa8f61a2-5335-48f4-adb4-8662801fc49d&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;transaction&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
        <span class="nt">&lt;fullUrl</span> <span class="na">value=</span><span class="s">&quot;urn:uuid:1e6f7d63-7ca8-4b9a-8404-b079796e5988&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;resource&gt;</span>
            <span class="nt">&lt;Patient&gt;</span>

                <span class="nt">&lt;identifier&gt;</span>
                    <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://myorganization.org/fhir/NamingSystem/patient-identifier&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">&quot;123456789&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/identifier&gt;</span>
                <span class="nt">&lt;name&gt;</span>
                    <span class="nt">&lt;family</span> <span class="na">value=</span><span class="s">&quot;N&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;given</span> <span class="na">value=</span><span class="s">&quot;H&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/name&gt;</span>
            <span class="nt">&lt;/Patient&gt;</span>
        <span class="nt">&lt;/resource&gt;</span>
        <span class="nt">&lt;request&gt;</span>
            <span class="nt">&lt;method</span> <span class="na">value=</span><span class="s">&quot;POST&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">&quot;Patient&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;ifNoneExist</span> <span class="na">value=</span><span class="s">&quot;identifier=http://myorganization.org/fhir/NamingSystem/patient-identifier|123456789&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/request&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;entry&gt;</span>
        <span class="nt">&lt;fullUrl</span> <span class="na">value=</span><span class="s">&quot;urn:uuid:98dd7653-a8f6-4e06-907e-f4c1acd36db1&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;resource&gt;</span>
            <span class="nt">&lt;Observation&gt;</span>
                <span class="nt">&lt;meta&gt;</span>
                    <span class="nt">&lt;profile</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/StructureDefinition/heartrate&quot;</span> <span class="nt">/&gt;</span>

                <span class="nt">&lt;/meta&gt;</span>
                <span class="nt">&lt;identifier&gt;</span>
                    <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://myorganization.org/fhir/NamingSystem/observation-identifier&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">&quot;123456789_20180807070127_0002-480a&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/identifier&gt;</span>
                <span class="nt">&lt;status</span> <span class="na">value=</span><span class="s">&quot;final&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;category&gt;</span>
                    <span class="nt">&lt;coding&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/observation-category&quot;</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;vital-signs&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;/coding&gt;</span>
                <span class="nt">&lt;/category&gt;</span>
                <span class="nt">&lt;code&gt;</span>
                    <span class="nt">&lt;coding&gt;</span>
                        <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://loinc.org&quot;</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;8867-4&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;/coding&gt;</span>
                <span class="nt">&lt;/code&gt;</span>
                <span class="nt">&lt;subject&gt;</span>
                    <span class="nt">&lt;reference</span> <span class="na">value=</span><span class="s">&quot;urn:uuid:1e6f7d63-7ca8-4b9a-8404-b079796e5988&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/subject&gt;</span>
                <span class="nt">&lt;effectiveDateTime</span> <span class="na">value=</span><span class="s">&quot;2018-08-07T07:01:27+01:00&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;valueQuantity&gt;</span>
                    <span class="nt">&lt;value</span> <span class="na">value=</span><span class="s">&quot;71&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;unit</span> <span class="na">value=</span><span class="s">&quot;/min&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://unitsofmeasure.org&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;/min&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/valueQuantity&gt;</span>
            <span class="nt">&lt;/Observation&gt;</span>
        <span class="nt">&lt;/resource&gt;</span>
        <span class="nt">&lt;request&gt;</span>
            <span class="nt">&lt;method</span> <span class="na">value=</span><span class="s">&quot;PUT&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;url</span> <span class="na">value=</span><span class="s">&quot;Observation?identifier=http://myorganization.org/fhir/NamingSystem/observation-identifier|123456789_20180807070127_0002-480a&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/request&gt;</span>
    <span class="nt">&lt;/entry&gt;</span>
<span class="nt">&lt;/Bundle&gt;</span>
</pre></div>


<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>  ...?</p>



<a name="158552557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158552557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158552557">(Feb 14 2019 at 18:35)</a>:</h4>
<p>BTW. I can't reproduce on the public VONK endpoint, as all I get from there is </p>
<div class="codehilite"><pre><span></span><span class="nt">&lt;OperationOutcome</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;id</span> <span class="na">value=</span><span class="s">&quot;0be99ef7-2089-4f1b-a884-f2177b9cb085&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;meta&gt;</span>
        <span class="nt">&lt;versionId</span> <span class="na">value=</span><span class="s">&quot;2a066704-9dc6-40c2-ae58-0bf8eeb12d55&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;lastUpdated</span> <span class="na">value=</span><span class="s">&quot;2019-02-14T18:29:50.6780243+00:00&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/meta&gt;</span>
    <span class="nt">&lt;issue&gt;</span>
        <span class="nt">&lt;severity</span> <span class="na">value=</span><span class="s">&quot;error&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;not-supported&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;details&gt;</span>
            <span class="nt">&lt;coding&gt;</span>
                <span class="nt">&lt;system</span> <span class="na">value=</span><span class="s">&quot;http://hl7.org/fhir/dotnet-api-operation-outcome&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;code</span> <span class="na">value=</span><span class="s">&quot;5011&quot;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/coding&gt;</span>
            <span class="nt">&lt;text</span> <span class="na">value=</span><span class="s">&quot;Unable to read resource from body. Content-Type is missing.&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/details&gt;</span>
    <span class="nt">&lt;/issue&gt;</span>
<span class="nt">&lt;/OperationOutcome&gt;</span>
</pre></div>


<p>(that's when validating the Bundle, the Content-Type header <em>is</em> set to application/fhir+xml)</p>
<p>POSTing to base returns <code>&lt;strong&gt; Oops! Something went wrong :( &lt;/strong&gt;</code><br>
I guess the public endpoint doesn't do transactions...?<br>
I'm locally running the default SQLite database, also Version 1.1.0.0</p>



<a name="158552901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158552901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158552901">(Feb 14 2019 at 18:40)</a>:</h4>
<p>I have never seen results all over the place like this O.o<br>
Usually I find at least two servers who agree on their validation results <span aria-label="smirk" class="emoji emoji-1f60f" role="img" title="smirk">:smirk:</span></p>



<a name="158555271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158555271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158555271">(Feb 14 2019 at 19:09)</a>:</h4>
<p>Can you attach your instance for people to test with?</p>



<a name="158556811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158556811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158556811">(Feb 14 2019 at 19:27)</a>:</h4>
<p>Both the Observation and the Bundle are contained higher up in this thread, however, I just realized, I can reproduce the OperationOutcome with the official heartrate example from the STU3 spec:<br>
<a href="http://hl7.org/fhir/STU3/observation-example-heart-rate.xml.html" target="_blank" title="http://hl7.org/fhir/STU3/observation-example-heart-rate.xml.html">http://hl7.org/fhir/STU3/observation-example-heart-rate.xml.html</a></p>



<a name="158556974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158556974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158556974">(Feb 14 2019 at 19:29)</a>:</h4>
<p>FWIW, here's my transaction Bundle: <a href="/user_uploads/10155/weRG3xYTTwMex3hIeOBCMhJp/bundle_heartrate.xml" target="_blank" title="bundle_heartrate.xml">bundle_heartrate.xml</a> <br>
I added in the display values for conde and category, just to rule this out as a possible cause for the errors...</p>



<a name="158557321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158557321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158557321">(Feb 14 2019 at 19:33)</a>:</h4>
<p>However, the issue that  an validation error occurs when posting the Bundle but not when validating it  is unique to VONK<br>
With HAPI it's vice versa: The Bundle is accepted on POST, but the Validation errors (Bundle validation consistent with Observation validation), but I guess that's just because HAPI doesn't do a strict validation against conformance claims on POST</p>



<a name="158557496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158557496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158557496">(Feb 14 2019 at 19:35)</a>:</h4>
<p><a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> fails for both the single Observation AND the posting/validating of the Bundle, due to strict validation on POST.</p>



<a name="158557944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158557944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158557944">(Feb 14 2019 at 19:40)</a>:</h4>
<p>So, bottom line, I think there are two seperate issues here: <br>
1. Grahame's server and HAPI don't validate the instance (not even the offical heartrate example) against the heartrate profile, even thought the instances seem to be correct</p>
<p>2. VONK does validate them, but rejects them when nested in a transaction Bundle and posted to base, even though the Bundle itself validates.</p>



<a name="158560427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158560427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158560427">(Feb 14 2019 at 20:09)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191450">@Simone Heckmann</span>, I recently had a very similar issue with the (STU3) body weight profile failing standard examples (in fact, I think I even saw some of it for the base VitalSign profile), as discussed <a href="#narrow/stream/179177-conformance/topic/Standard.20VitalSigns.20example.20failing.20to.20validate" title="#narrow/stream/179177-conformance/topic/Standard.20VitalSigns.20example.20failing.20to.20validate">in this thread </a>. I had the JAR validator failing with the error you're seeing on <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> - according to Grahame, it is due to an issue with the FHIRPath for the constraint which he will fix in the upcoming technical correction to STU3 (see linked thread). I also got a <em>different</em> error using the online Simplifier validator (which I suppose is the same as in VONK), namely</p>
<blockquote>
<p>Code 'in' from system '<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>' does not exist in valueset '<a href="http://hl7.org/fhir/ValueSet/ucum-vitals-common" target="_blank" title="http://hl7.org/fhir/ValueSet/ucum-vitals-common">http://hl7.org/fhir/ValueSet/ucum-vitals-common</a>'</p>
</blockquote>
<p>Not clear yet where that came from but Michael Rutten pinged Ewout.</p>



<a name="158598353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/validating%20Observation%20against%20STU3%20heartrate%20profile/near/158598353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mirjam Baltus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/validating.20Observation.20against.20STU3.20heartrate.20profile.html#158598353">(Feb 15 2019 at 08:19)</a>:</h4>
<p><span class="user-mention" data-user-id="194703">@Morten Ernebjerg</span>: I am looking into that still, and I think it is a bug in the validator. Will let you know as soon as I find out more.<br>
<span class="user-mention" data-user-id="191450">@Simone Heckmann</span>: I'm looking into your issue with Vonk as well.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
