---
layout: page
title: "FHIR Chat  · PUT to deleted resource location · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/PUT.20to.20deleted.20resource.20location.html">PUT to deleted resource location</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="168413322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/PUT%20to%20deleted%20resource%20location/near/168413322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/PUT.20to.20deleted.20resource.20location.html#168413322">(Jun 18 2019 at 15:40)</a>:</h4>
<p>Is it expected that a server which does not normally allow upsert to a client-defined ID will accept a PUT to the location of a deleted resource?</p>
<p>From the spec language in delete ("Resources that have been deleted may be "brought back to life" by a subsequent update interaction using an HTTP PUT.") and Update as Create ("...to PUT a resource to a location that does not yet exist on the server") it seems like the answer would be yes, but the connection between the two is not quite spelled out. If a deleted resource is considered to be a location that <em>does</em> exist on the server, the wording could state that more explicitly.</p>



<a name="168420480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/PUT%20to%20deleted%20resource%20location/near/168420480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/PUT.20to.20deleted.20resource.20location.html#168420480">(Jun 18 2019 at 17:01)</a>:</h4>
<p>A PUT to the location of a deleted resource is more like an update than an upsert as the record 'exists'.  However, there isn't necessarily an 'expectation'.  Servers that don't permit upserts can choose to support 'undelete' updates.  (And similarly, systems that support upserts could choose for business reasons to prohibit 'undelete' updates.)</p>



<a name="168438612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/PUT%20to%20deleted%20resource%20location/near/168438612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/PUT.20to.20deleted.20resource.20location.html#168438612">(Jun 18 2019 at 17:54)</a>:</h4>
<blockquote>
<p>Servers that don't permit upserts can choose to support 'undelete' updates</p>
</blockquote>
<p>uh? since undelete is supported via 'upsert' I don't know how to make sense of that</p>



<a name="168469617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/PUT%20to%20deleted%20resource%20location/near/168469617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/PUT.20to.20deleted.20resource.20location.html#168469617">(Jun 19 2019 at 01:11)</a>:</h4>
<p>My understanding is that "upsert" means "create if it doesn't exist, update it if it does".  In the case of a deleted record, the record 'exists' - it's just flagged as deleted, so it would always be an update, not an upsert, no?</p>



<a name="168469686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/PUT%20to%20deleted%20resource%20location/near/168469686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/PUT.20to.20deleted.20resource.20location.html#168469686">(Jun 19 2019 at 01:13)</a>:</h4>
<p>well, it's semantics, I guess.</p>



<a name="168470039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/PUT%20to%20deleted%20resource%20location/near/168470039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/PUT.20to.20deleted.20resource.20location.html#168470039">(Jun 19 2019 at 01:22)</a>:</h4>
<p>My point stands I think - someone could prohibit client-assigned ids on a true 'create', but could still allow resurrecting of a deleted resource.  (And could similarly allow client-assigned ids on a create, but (for some reason) prohibit resurrecting deleted resources.  Correct?</p>



<a name="168471941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/PUT%20to%20deleted%20resource%20location/near/168471941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/PUT.20to.20deleted.20resource.20location.html#168471941">(Jun 19 2019 at 02:15)</a>:</h4>
<p>One distinction is about which fields are allowed to vary on an update.  If it's an "upsert", then these wouldn't apply.  If it's an "undelete/update" then I would expect they would.</p>



<a name="168473340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/PUT%20to%20deleted%20resource%20location/near/168473340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/PUT.20to.20deleted.20resource.20location.html#168473340">(Jun 19 2019 at 02:54)</a>:</h4>
<p>True.  And you wouldn't want a delete followed by an undelete to bypass your 'update' rules.  (e.g. changing the patient or prescriber on a MedicationRequest).  In fact, that's probably important enough to call out in the spec.  <span class="user-mention" data-user-id="191343">@Michael Lawley</span>, care to submit a change request? :)</p>



<a name="168474470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/PUT%20to%20deleted%20resource%20location/near/168474470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/PUT.20to.20deleted.20resource.20location.html#168474470">(Jun 19 2019 at 03:31)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22714" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22714">GF#22714</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
