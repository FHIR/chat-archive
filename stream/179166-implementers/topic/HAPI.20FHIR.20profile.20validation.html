---
layout: page
title: "FHIR Chat  · HAPI FHIR profile validation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html">HAPI FHIR profile validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188077472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20profile%20validation/near/188077472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chandan Datta <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html#188077472">(Feb 13 2020 at 04:43)</a>:</h4>
<p>Hi implementation team,</p>
<p>Does anyone  know if HAPI server can validate a profile XML that has errors?</p>
<p>We tried deploying a HAPI JDBC server and posted a StructureDefinition from the AU PD FHIR profile published by [HL7 AU](), and it gave a 201 as shown in the screenshot below. </p>
<p>We were expecting a validation error as replicated by <a href="https://zulip-uploads.s3.amazonaws.com/10155/dGCQabVkQdGcgJexsflAlQoD/pasted_image.png?Signature=RT3cq17pfzyX6%2FDEa9THkodmPhI%3D&amp;Expires=1581568819&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ" target="_blank" title="https://zulip-uploads.s3.amazonaws.com/10155/dGCQabVkQdGcgJexsflAlQoD/pasted_image.png?Signature=RT3cq17pfzyX6%2FDEa9THkodmPhI%3D&amp;Expires=1581568819&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ">Forge</a> and the rule for the elemented-definition is <a href="https://zulip-uploads.s3.amazonaws.com/10155/BSlWqpiD3AVXpCpIkqCttjRo/pasted_image.jpe?Signature=qJVADj5kKozi5ZIT3ZsPFnHVwMY%3D&amp;Expires=1581568800&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ" target="_blank" title="https://zulip-uploads.s3.amazonaws.com/10155/BSlWqpiD3AVXpCpIkqCttjRo/pasted_image.jpe?Signature=qJVADj5kKozi5ZIT3ZsPFnHVwMY%3D&amp;Expires=1581568800&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ">here</a></p>
<div class="message_inline_image"><a href="https://zulip-uploads.s3.amazonaws.com/10155/dGCQabVkQdGcgJexsflAlQoD/pasted_image.png?Signature=RT3cq17pfzyX6%2FDEa9THkodmPhI%3D&amp;Expires=1581568819&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ" target="_blank" title="Forge"><img src="https://zulip-uploads.s3.amazonaws.com/10155/dGCQabVkQdGcgJexsflAlQoD/pasted_image.png?Signature=RT3cq17pfzyX6%2FDEa9THkodmPhI%3D&amp;Expires=1581568819&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ"></a></div><p><a href="/user_uploads/10155/kVPI2E0qMAqJWXrj7eXUe6fD/pasted_image.jpe" target="_blank" title="pasted_image.jpe">pasted image</a><br>
The StructureDefinition-au-pd-healthcareservice.xml we tested can be found <a href="https://github.com/hl7au/au-fhir-pd/blob/pd2019Aug.2/resources/au-pd-healthcareservice.xml" target="_blank" title="https://github.com/hl7au/au-fhir-pd/blob/pd2019Aug.2/resources/au-pd-healthcareservice.xml">here</a></p>
<p>FYI <span class="user-mention" data-user-id="191319">@James Agnew</span></p>



<a name="188125569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20profile%20validation/near/188125569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html#188125569">(Feb 13 2020 at 16:52)</a>:</h4>
<p>I'm not too familiar with HAPI, but the Vonk FHIR server also generally accepts posted FHIR resources without validating them first, as long as they are syntactically correct. However you can configure it to validate every incoming resource too: <a href="http://docs.simplifier.net/vonk/features/prevalidation.html" target="_blank" title="http://docs.simplifier.net/vonk/features/prevalidation.html">http://docs.simplifier.net/vonk/features/prevalidation.html</a>.<br>
Also there's a <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a> stream which might give you a quicker response on HAPI questions.</p>



<a name="188129389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20profile%20validation/near/188129389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html#188129389">(Feb 13 2020 at 17:31)</a>:</h4>
<p><span class="user-mention" data-user-id="192525">@Chandan Datta</span> you have to either:</p>
<ul>
<li>POST to [base]/StructureDefinition/$validate</li>
<li>set: <code>validation.requests.enabled</code>to true in your hapi-fhir-jpaserver-starter/blob/master/src/main/resources/hapi.properties</li>
</ul>



<a name="188129474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20profile%20validation/near/188129474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html#188129474">(Feb 13 2020 at 17:32)</a>:</h4>
<p>by default hapi doesn't validate everything (which is a good default as validation is costly)</p>



<a name="188353870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20profile%20validation/near/188353870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chandan Datta <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html#188353870">(Feb 17 2020 at 05:32)</a>:</h4>
<p>Thanks for the clarification <span class="user-mention" data-user-id="191451">@Patrick Werner</span> . enabling worked - we actually had to change the code - is that the right way or is there an externalised env config that modified should be enough? <br>
<a href="/user_uploads/10155/0JVbGJZ3j-cbeoFMLMg8V56l/pasted_image.jpe" target="_blank" title="pasted_image.jpe">pasted image</a> </p>
<p>Do typical FHIR servers in production usage disable validation? Is there a best practices/tuning guide for the prod usage for HAPI that the community has created because the <a href="https://hapifhir.github.io/hapi-hl7v2/hapi-faq.html#production_use" target="_blank" title="https://hapifhir.github.io/hapi-hl7v2/hapi-faq.html#production_use">FAQs</a> on HAPI FHIR are probably for v2 messaging. </p>
<p>Further as <span class="user-mention" data-user-id="203235">@Ward Weistra</span>  mentioned about Vonk, is there any benchmarking test suite that can be run before production usage such as <a href="https://github.com/FirelyTeam/Wind.Tunnel" target="_blank" title="https://github.com/FirelyTeam/Wind.Tunnel">WindTunnel</a>? </p>
<p><a href="/user_uploads/10155/vJ20UJ6CLOGwv4Jzvpwn5CV8/pasted_image.jpe" target="_blank" title="pasted_image.jpe">pasted image</a><br>
<a href="/user_uploads/10155/BCrNW87ZgJF45ZmlmWGzu3BP/pasted_image.jpe" target="_blank" title="pasted_image.jpe">pasted image</a><br>
<a href="/user_uploads/10155/RAM1YMGZrvP0lv7otWTPDDSs/pasted_image.jpe" target="_blank" title="pasted_image.jpe">pasted image</a></p>



<a name="188357769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20profile%20validation/near/188357769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html#188357769">(Feb 17 2020 at 07:32)</a>:</h4>
<p><span class="user-mention" data-user-id="192525">@Chandan Datta</span> I don't think Windtunnel is specific to Vonk, but rather should work for any FHIR server.<br>
Is that correct <span class="user-mention" data-user-id="191363">@Vadim Peretokin</span> ?</p>



<a name="188361646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20profile%20validation/near/188361646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html#188361646">(Feb 17 2020 at 09:01)</a>:</h4>
<p>That is correct!</p>



<a name="188394773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20profile%20validation/near/188394773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html#188394773">(Feb 17 2020 at 17:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192525">Chandan Datta</span> <a href="#narrow/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation/near/188353870" title="#narrow/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation/near/188353870">said</a>:</p>
<blockquote>
<p>Thanks for the clarification <span class="user-mention silent" data-user-id="191451">Patrick Werner</span> . enabling worked - we actually had to change the code - is that the right way or is there an externalised env config that modified should be enough? </p>
</blockquote>
<p>Did you use the recommended jpaserver-starter? If so you only have to change the parameter here: <a href="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/src/main/resources/hapi.properties" target="_blank" title="https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/src/main/resources/hapi.properties">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/src/main/resources/hapi.properties</a> no need to touch code.</p>



<a name="189083061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20profile%20validation/near/189083061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chandan Datta <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html#189083061">(Feb 26 2020 at 03:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="203235">Ward Weistra</span> <a href="#narrow/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation/near/188357769" title="#narrow/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation/near/188357769">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="192525">Chandan Datta</span> I don't think Windtunnel is specific to Vonk, but rather should work for any FHIR server.<br>
Is that correct <span class="user-mention silent" data-user-id="191363">Vadim Peretokin</span> ?</p>
<p>This is why we at Firely created a performance measurement framework to see how our Vonk measures up one release after another</p>
</blockquote>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> and <span class="user-mention" data-user-id="191363">@Vadim Peretokin</span> , thanks a lot!</p>
<ul>
<li>do we have some docs on the goals of those perf tests in the <a href="https://github.com/FirelyTeam/Wind.Tunnel/tree/master/performance_testscripts" target="_blank" title="https://github.com/FirelyTeam/Wind.Tunnel/tree/master/performance_testscripts">python code</a> and how new developers can add their own performance test? </li>
<li>In terms of comparing implementations, how is the wind tunnel design team thinking of comparing test results across different FHIR server implementations(other than the differences in the hardware)? For example, if the Spark and Vonk implementations are trying to abstract the data store from the devs using their APIs, what would be the numbers for various db implementations that need to be reported? Such as someone choosing between a CosmosDB or a SQL Server.</li>
</ul>



<a name="189100273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20profile%20validation/near/189100273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html#189100273">(Feb 26 2020 at 10:05)</a>:</h4>
<p><span class="user-mention" data-user-id="192525">@Chandan Datta</span> the goals are to simulate more or less realistic scenarios that would happen in real life :) as for adding your own tests, see standard locust documentation: <a href="https://docs.locust.io/en/stable" target="_blank" title="https://docs.locust.io/en/stable">https://docs.locust.io/en/stable</a></p>



<a name="189100347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20profile%20validation/near/189100347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation.html#189100347">(Feb 26 2020 at 10:06)</a>:</h4>
<p>I'm not sure what do you mean with the second question. Ensure you're running the test on comparable hardware, run enough tests and then compare the data.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
