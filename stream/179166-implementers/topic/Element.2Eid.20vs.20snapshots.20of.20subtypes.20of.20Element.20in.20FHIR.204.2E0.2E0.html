---
layout: page
title: "FHIR Chat  · Element.id vs snapshots of subtypes of Element in FHIR 4.0.0 · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20vs.20snapshots.20of.20subtypes.20of.20Element.20in.20FHIR.204.2E0.2E0.html">Element.id vs snapshots of subtypes of Element in FHIR 4.0.0</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="159163921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20vs%20snapshots%20of%20subtypes%20of%20Element%20in%20FHIR%204.0.0/near/159163921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gabriel Bezerra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20vs.20snapshots.20of.20subtypes.20of.20Element.20in.20FHIR.204.2E0.2E0.html#159163921">(Feb 22 2019 at 15:25)</a>:</h4>
<p>Dear all,</p>
<p>In FHIR 4.0.0, <code>Element.id</code> is defined by the following <code>ElementDefinition</code>:</p>
<div class="codehilite"><pre><span></span>        {
          &quot;id&quot; : &quot;Element.id&quot;,
          &quot;path&quot; : &quot;Element.id&quot;,
          &quot;representation&quot; : [&quot;xmlAttr&quot;],
          &quot;short&quot; : &quot;Unique id for inter-element referencing&quot;,
          &quot;definition&quot; : &quot;Unique id for the element within a resource (for internal references). This may be any string value that does
          &quot;min&quot; : 0,
          &quot;max&quot; : &quot;1&quot;,
          &quot;base&quot; : {
            &quot;path&quot; : &quot;Element.id&quot;,
            &quot;min&quot; : 0,
            &quot;max&quot; : &quot;1&quot;
          },
          &quot;type&quot; : [{
            &quot;_code&quot; : {
              &quot;extension&quot; : [{
                &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;,
                &quot;valueString&quot; : &quot;string&quot;
              },
              {
                &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type&quot;,
                &quot;valueString&quot; : &quot;xsd:string&quot;
              },
              {
                &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;,
                &quot;valueString&quot; : &quot;xsd:string&quot;
              }]
            }
          }],
          &quot;isModifier&quot; : false,
          &quot;isSummary&quot; : false,
          &quot;mapping&quot; : [{
            &quot;identity&quot; : &quot;rim&quot;,
            &quot;map&quot; : &quot;n/a&quot;
          }]
        },
</pre></div>


<p>However, when looking into subtypes of <code>Element</code>, one can find the <code>StructureDefinition</code>s have the following shape:</p>
<div class="codehilite"><pre><span></span>  {
    &quot;fullUrl&quot; : &quot;http://hl7.org/fhir/StructureDefinition/BackboneElement&quot;,
    &quot;resource&quot; : {
      &quot;resourceType&quot; : &quot;StructureDefinition&quot;,
      &quot;id&quot; : &quot;BackboneElement&quot;,
      // ...
      &quot;fhirVersion&quot; : &quot;4.0.0&quot;,
      // ...
      &quot;kind&quot; : &quot;complex-type&quot;,
      &quot;abstract&quot; : true,
      &quot;type&quot; : &quot;BackboneElement&quot;,
      &quot;baseDefinition&quot; : &quot;http://hl7.org/fhir/StructureDefinition/Element&quot;,
      &quot;derivation&quot; : &quot;specialization&quot;,
      &quot;snapshot&quot; : {
        &quot;element&quot; : [{
          &quot;id&quot; : &quot;BackboneElement&quot;,
          // ...
        },
        {
          &quot;id&quot; : &quot;BackboneElement.id&quot;,
          &quot;path&quot; : &quot;BackboneElement.id&quot;,
          &quot;representation&quot; : [&quot;xmlAttr&quot;],
          &quot;short&quot; : &quot;Unique id for inter-element referencing&quot;,
          &quot;definition&quot; : &quot;Unique id for the element within a resource (for internal references). This may be any string value that does
          &quot;min&quot; : 0,
          &quot;max&quot; : &quot;1&quot;,
          &quot;base&quot; : {
            &quot;path&quot; : &quot;Element.id&quot;,
            &quot;min&quot; : 0,
            &quot;max&quot; : &quot;1&quot;
          },
          &quot;type&quot; : [{
            &quot;code&quot; : &quot;string&quot;
          }],
          &quot;isModifier&quot; : false,
          &quot;isSummary&quot; : false,
          &quot;mapping&quot; : [{
            &quot;identity&quot; : &quot;rim&quot;,
            &quot;map&quot; : &quot;n/a&quot;
          }]
        },
        {
          &quot;id&quot; : &quot;BackboneElement.extension&quot;,
          // ...
        },
        {
          &quot;id&quot; : &quot;BackboneElement.modifierExtension&quot;,
          // ...
        }]
      },
      &quot;differential&quot; : {
        &quot;element&quot; : [{
          &quot;id&quot; : &quot;BackboneElement&quot;,
          // ...
        },
        {
          &quot;id&quot; : &quot;BackboneElement.modifierExtension&quot;,
          // ...
        }]
      }
</pre></div>


<p>...that is:<br>
- <code>differential</code> does not pose any changes to the <code>id</code> field; and<br>
- <code>snapshot</code> shows an <code>id</code> field whose <code>type</code> is completely different from the definition of the base <code>Element.id</code>.</p>
<p>It also happens with other Elements, like <code>http://hl7.org/fhir/StructureDefinition/string</code>, <code>http://hl7.org/fhir/StructureDefinition/boolean</code> etc.</p>
<p>What is the correct version: the one described by <code>differential</code>, or the one described by <code>snapshot</code>?</p>



<a name="159322658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20vs%20snapshots%20of%20subtypes%20of%20Element%20in%20FHIR%204.0.0/near/159322658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gabriel Bezerra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20vs.20snapshots.20of.20subtypes.20of.20Element.20in.20FHIR.204.2E0.2E0.html#159322658">(Feb 25 2019 at 09:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> -- you usually answer my questions in this regard, maybe you would be interested in this one ^</p>



<a name="159332214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20vs%20snapshots%20of%20subtypes%20of%20Element%20in%20FHIR%204.0.0/near/159332214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20vs.20snapshots.20of.20subtypes.20of.20Element.20in.20FHIR.204.2E0.2E0.html#159332214">(Feb 25 2019 at 12:09)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="196538">@Gabriel Bezerra</span>, looks like you found an error in the official snapshots.<br>
For comparison, here's a fragment from an Observation snapshot, generated by the (R4) FHIR .NET API:</p>
<div class="codehilite"><pre><span></span>&lt;element id=&quot;Observation.referenceRange.id&quot;&gt;
    &lt;path value=&quot;Observation.referenceRange.id&quot; /&gt;
    &lt;representation value=&quot;xmlAttr&quot; /&gt;
    &lt;short value=&quot;Unique id for inter-element referencing&quot; /&gt;
    &lt;definition value=&quot;Unique id for the element within a resource (for internal references). This may be any string value that does not contain spaces.&quot; /&gt;
    &lt;min value=&quot;0&quot; /&gt;
    &lt;max value=&quot;1&quot; /&gt;
    &lt;base&gt;
        &lt;path value=&quot;Element.id&quot; /&gt;
        &lt;min value=&quot;0&quot; /&gt;
        &lt;max value=&quot;1&quot; /&gt;
    &lt;/base&gt;
    &lt;type&gt;
        &lt;code&gt;
            &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;&gt;
                &lt;valueString value=&quot;string&quot; /&gt;
            &lt;/extension&gt;
            &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type&quot;&gt;
                &lt;valueString value=&quot;xsd:string&quot; /&gt;
            &lt;/extension&gt;
            &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;&gt;
                &lt;valueString value=&quot;xsd:string&quot; /&gt;
            &lt;/extension&gt;
        &lt;/code&gt;
    &lt;/type&gt;
    &lt;mapping&gt;
        &lt;identity value=&quot;rim&quot; /&gt;
        &lt;map value=&quot;n/a&quot; /&gt;
    &lt;/mapping&gt;
&lt;/element&gt;
</pre></div>


<p>In this example, you can see that the particular <code>id</code> child element inherits all the constraints (incl. special "compiler magic" extensions) from the <code>Element.id' ElementDefinition node in the core </code>Element` StructureDefinition.</p>



<a name="159332744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20vs%20snapshots%20of%20subtypes%20of%20Element%20in%20FHIR%204.0.0/near/159332744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gabriel Bezerra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20vs.20snapshots.20of.20subtypes.20of.20Element.20in.20FHIR.204.2E0.2E0.html#159332744">(Feb 25 2019 at 12:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> , yes. In that case, when they disagree, which one wins?</p>



<a name="159332956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20vs%20snapshots%20of%20subtypes%20of%20Element%20in%20FHIR%204.0.0/near/159332956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20vs.20snapshots.20of.20subtypes.20of.20Element.20in.20FHIR.204.2E0.2E0.html#159332956">(Feb 25 2019 at 12:22)</a>:</h4>
<p>Malformed data is ambiguous, per definition. FHIR core resource &amp; type definitions should be completely valid. I suggest that you submit a GForge ticket to correct this.</p>



<a name="159332993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20vs%20snapshots%20of%20subtypes%20of%20Element%20in%20FHIR%204.0.0/near/159332993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20vs.20snapshots.20of.20subtypes.20of.20Element.20in.20FHIR.204.2E0.2E0.html#159332993">(Feb 25 2019 at 12:23)</a>:</h4>
<p>In general, a derived profile is only allowed to further constrain the base profile; it is certainly not valid to replace an element type with another, incompatible type.</p>



<a name="159336028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20vs%20snapshots%20of%20subtypes%20of%20Element%20in%20FHIR%204.0.0/near/159336028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gabriel Bezerra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20vs.20snapshots.20of.20subtypes.20of.20Element.20in.20FHIR.204.2E0.2E0.html#159336028">(Feb 25 2019 at 13:16)</a>:</h4>
<p>Ticket submitted in GForge: <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20465" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20465">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20465</a></p>



<a name="159382056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Element.id%20vs%20snapshots%20of%20subtypes%20of%20Element%20in%20FHIR%204.0.0/near/159382056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Element.2Eid.20vs.20snapshots.20of.20subtypes.20of.20Element.20in.20FHIR.204.2E0.2E0.html#159382056">(Feb 25 2019 at 23:23)</a>:</h4>
<p>I'll add it to my list</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
