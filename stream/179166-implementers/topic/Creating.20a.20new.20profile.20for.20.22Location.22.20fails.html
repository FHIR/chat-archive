---
layout: page
title: "FHIR Chat  · Creating a new profile for &quot;Location&quot; fails · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Creating.20a.20new.20profile.20for.20.22Location.22.20fails.html">Creating a new profile for &quot;Location&quot; fails</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="185896977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Creating%20a%20new%20profile%20for%20%22Location%22%20fails/near/185896977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Salecker <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Creating.20a.20new.20profile.20for.20.22Location.22.20fails.html#185896977">(Jan 17 2020 at 08:41)</a>:</h4>
<p>A profile has been created with Forge. Among other things, the Location.physicalType should only allow codes from the valueSet "Physical form of the location"(<a href="http://hl7.org/fhir/ValueSet/location-physical-type" target="_blank" title="http://hl7.org/fhir/ValueSet/location-physical-type">http://hl7.org/fhir/ValueSet/location-physical-type</a>). To do this, only the "Strength" property has been changed from "example" to "required" in the ValueSet binding. The result can be validated on SIMPLIFIER - No Issues. However, under Details, "Location.physicalType" appears "Binding" (unbound)(required).<br>
Problem:<br>
The created StructureDefinition cannot be uploaded to the public VONK. Error: "Instance failed constraint eld-10"provide either a reference or a description (or both)""valueSet.exists() or description.exists()". Apparently a reference to the value set is needed here. The manual entry of a reference e.g.:<br>
&lt;binding&gt;-strength value="required"/&gt; &lt;valueSetReference&gt;-reference value="<a href="http://hl7.org/fhir/ValueSet/location-physical-type" target="_blank" title="http://hl7.org/fhir/ValueSet/location-physical-type">http://hl7.org/fhir/ValueSet/location-physical-type</a>" /&gt;&lt;/valueSetReference&gt;&lt;/binding&gt;<br>
allows uploading to the public VONK, but also results in an error on SIMPLIFIER."Exception: "Internal logic failure: Type checking the data: Encountered unknown element 'valueSetReference' at location 'StructureDefinition.differential[0].element[4].binding[0].valueSetReference[0]' while parsing"<br>
It should also be mentioned that even after successfully uploading the StructureDefinition to the public VONK, the sample resources cannot be validated against the profile:<br>
GET <a href="https://vonk.fire.ly/Location/$validate?profile=http://www.smith.care/fhir/StructureDefinition/HELP_Location" target="_blank" title="https://vonk.fire.ly/Location/$validate?profile=http://www.smith.care/fhir/StructureDefinition/HELP_Location">https://vonk.fire.ly/Location/$validate?profile=http://www.smith.care/fhir/StructureDefinition/HELP_Location</a><br>
Error Code: incomplete<br>
Error Text: "Unable to resolve reference to profile '<a href="http://www.smith.care/fhir/StructureDefinition/HELP_Location" target="_blank" title="http://www.smith.care/fhir/StructureDefinition/HELP_Location">http://www.smith.care/fhir/StructureDefinition/HELP_Location</a>'"<br>
Has anybody any hint how to define the StructureDefinition in a way so that it is required to enter a code of the ValueSet location-physical-type?<br>
(the StructureDefintion of the new Location profile is attached) <a href="/user_uploads/10155/teRH5Tl41Jq9H1BMweyyVzxV/HELP_Location.StructureDefinition_draft.xml" target="_blank" title="HELP_Location.StructureDefinition_draft.xml">HELP_Location.StructureDefinition_draft.xml</a></p>



<a name="185921075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Creating%20a%20new%20profile%20for%20%22Location%22%20fails/near/185921075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Creating.20a.20new.20profile.20for.20.22Location.22.20fails.html#185921075">(Jan 17 2020 at 14:40)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="258995">@Jens Salecker</span> ,</p>
<p>Your profile looks ok! Only adjusting the binding strength in a differential if you don't change the value set is ok.  </p>
<p>It is R4 and it validates against R4: <a href="https://simplifier.net/validate?fhirVersion=R4&amp;scope=simplifier.core.r4~4.0.1&amp;snippetFileId=741" target="_blank" title="https://simplifier.net/validate?fhirVersion=R4&amp;scope=simplifier.core.r4~4.0.1&amp;snippetFileId=741">https://simplifier.net/validate?fhirVersion=R4&amp;scope=simplifier.core.r4~4.0.1&amp;snippetFileId=741</a></p>



<a name="185921147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Creating%20a%20new%20profile%20for%20%22Location%22%20fails/near/185921147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Creating.20a.20new.20profile.20for.20.22Location.22.20fails.html#185921147">(Jan 17 2020 at 14:41)</a>:</h4>
<p>The public Vonk server can handle STU3 and R4 at the same base. Be default this is STU3.  If you add  "fhirVersion=4.0" to the accept header, Vonk will create your profile without complaining.</p>



<a name="185921321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Creating%20a%20new%20profile%20for%20%22Location%22%20fails/near/185921321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Creating.20a.20new.20profile.20for.20.22Location.22.20fails.html#185921321">(Jan 17 2020 at 14:43)</a>:</h4>
<p>If you POST or PUT your profile to the StructureDefinition endpoint, Vonk will store it as any other resource. If you would like to use this for validation purposes, you will need to POST/PUT it to the administration endpoint. More info here: <a href="http://docs.simplifier.net/vonk/administration_api.html" target="_blank" title="http://docs.simplifier.net/vonk/administration_api.html">http://docs.simplifier.net/vonk/administration_api.html</a></p>



<a name="185921513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Creating%20a%20new%20profile%20for%20%22Location%22%20fails/near/185921513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Creating.20a.20new.20profile.20for.20.22Location.22.20fails.html#185921513">(Jan 17 2020 at 14:46)</a>:</h4>
<p>You could also spin up your own Vonk server using a free community license and have a lot of other options on getting your profiles in the administration API - for example with a link to your Simplifier project.  More info in <a href="http://docs.simplifier.net/vonk/features/conformanceresources.html#load-conformance-resources-from-simplifier-net" target="_blank" title="http://docs.simplifier.net/vonk/features/conformanceresources.html#load-conformance-resources-from-simplifier-net">the docs</a> as well.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
