---
layout: page
title: "FHIR Chat  · GROUP BY in FHIR search · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html">GROUP BY in FHIR search</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="199257567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199257567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199257567">(May 30 2020 at 13:44)</a>:</h4>
<p>How to achieve GROUP BY functionality in FHIR search? for example, I have a use case "Get only the latest issued DiagnosticReport resources for all the Patient resources" how can we search with FHIR in such way?</p>



<a name="199257876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199257876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199257876">(May 30 2020 at 13:53)</a>:</h4>
<p>In general you cannot do that. There is the <a href="http://hl7.org/fhir/observation-operation-lastn.html">$lastn </a> operation for Observation that does something like that, but it is not widely implemented</p>



<a name="199310313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199310313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199310313">(May 31 2020 at 15:38)</a>:</h4>
<p>Yes I know about $lastn. <br>
Is there any workaround how could I achieve that?</p>



<a name="199596925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199596925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199596925">(Jun 03 2020 at 09:23)</a>:</h4>
<p>I am thinking to implement this feature this way in my server</p>
<p>/fhir/DiagnosticReport/_search?group-by=subject&amp;select=max:issued</p>
<p>anyone got a better idea?</p>



<a name="199642784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199642784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199642784">(Jun 03 2020 at 16:30)</a>:</h4>
<p>This goes a bit beyond what we've tried to do with the FHIR REST API (and _filter too, for that matter). It's a pretty natural thing to <em>want</em> to express though. I wonder if there's interest in standardizing something like this. (I suspect no.)</p>



<a name="199709937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199709937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199709937">(Jun 04 2020 at 06:35)</a>:</h4>
<p>I have seen an answer on StackOverflow related to my case<br>
<a href="https://stackoverflow.com/questions/50914101/group-by-like-function-in-fhir-search">https://stackoverflow.com/questions/50914101/group-by-like-function-in-fhir-search</a></p>
<p>there is a search query uri in the answer<br>
{{baseurl}}/Observation?device:Device=123&amp;_sort=-_lastUpdated&amp;_count=1</p>
<ol>
<li>
<p>is this -&gt; "_sort=-_lastUpdated" part of the search is standard? I have not found in docs though</p>
</li>
<li>
<p>is _lastUpdated find only the most recently changed resources or also the most recently created resources?</p>
</li>
<li>
<p>if  "_sort=-_lastUpdated" is a standard and _lastUpdated also gets the most recently created resource, <br>
then {{baseurl}}/DiagnosticReport/_search?code=12345&amp;_sort=-_lastUpdated, will find the most recently changed and created resources of code type 12345?</p>
</li>
</ol>



<a name="199711712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199711712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199711712">(Jun 04 2020 at 07:08)</a>:</h4>
<p>_lastUpdated is one of the search parameters that apply to all resources, assuming a server you are using supports this. Have a look at <a href="https://www.hl7.org/fhir/search.html">https://www.hl7.org/fhir/search.html</a>. If a server supports _lastUpdated, it will have a creation date for a new resource.</p>



<a name="199712124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199712124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199712124">(Jun 04 2020 at 07:14)</a>:</h4>
<p>I see, okay so _lastUpdated only works on Resource.meta.lastUpdated.</p>



<a name="199732928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199732928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amrit <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199732928">(Jun 04 2020 at 11:24)</a>:</h4>
<p>Is your question about GROUP BY or finding the latest resource? It is not obvious to me that the two are the same.</p>



<a name="199742178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199742178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199742178">(Jun 04 2020 at 12:58)</a>:</h4>
<p>(not related to the main question, but the <code>/_search</code> segment should not be there - that's for POST searches, not GET ones with the parameters in the URL)</p>



<a name="199743640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199743640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199743640">(Jun 04 2020 at 13:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191912">@Michele Mottini</span>  yes you are right that's a typo. params could be in the body or in the URL. in POST or in GET request respectively.</p>
<p><span class="user-mention" data-user-id="301512">@Amrit</span> (In the context of SQL) The concept of GROUP BY is when you group the records you have to call a function on a field. That function will decide which record will be picked up in the result set. for example, we can SUM(amount) or COUNT(quantity) or MAX(date), MIN(date). So, what I want to achieve is GROUP BY Patient with MAX(issued).</p>



<a name="199826938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199826938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amrit <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199826938">(Jun 05 2020 at 01:01)</a>:</h4>
<p>Ah.. Since there is apparently no grouping in FHIR, you would have to provide a search value for your variable and loop through all possible values. Assuming all relevant search parameters are supported by your server, for your specific use case, the following should work, so long you iterate over all possible logical ids of patients. <br>
GET [base]/DiagnosticReport?_patient=[logical id]&amp;_sort=-issued&amp;_count=1<br>
The above uses the issued date which is more akin to a business version date. You could also use the record version date. So if that's what you need:<br>
GET [base]/DiagnosticReport?_patient=[logical id]&amp;_sort=-_lastUpdated&amp;_count=1</p>



<a name="199839230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GROUP%20BY%20in%20FHIR%20search/near/199839230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GROUP.20BY.20in.20FHIR.20search.html#199839230">(Jun 05 2020 at 06:15)</a>:</h4>
<p><span class="user-mention" data-user-id="301512">@Amrit</span> I need to get DiagnosticReport for all the Patients available, not for just one patient</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
