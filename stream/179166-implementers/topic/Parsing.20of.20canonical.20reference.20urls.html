---
layout: page
title: "FHIR Chat  · Parsing of canonical reference urls · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Parsing.20of.20canonical.20reference.20urls.html">Parsing of canonical reference urls</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="171607903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Parsing%20of%20canonical%20reference%20urls/near/171607903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henk-Jan Meijer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Parsing.20of.20canonical.20reference.20urls.html#171607903">(Jul 24 2019 at 13:55)</a>:</h4>
<p>The <a href="https://www.hl7.org/fhir/references.html#canonical-fragments" target="_blank" title="https://www.hl7.org/fhir/references.html#canonical-fragments">R4 specification</a> gives this example of a canonical URI with fragment:</p>
<div class="codehilite"><pre><span></span>  &lt;valueSet value=&quot;http://fhir.acme.com/Questionnaire/example|1.0#vs1&quot;/&gt;
</pre></div>


<p>Apparently the version segment (<code>|1.0</code>) should go before the fragment part (<code>#vs1</code>). But what if the version would contain a <code>#</code> character? E.g. if I'd like to version my questionnaire <code>2019#1</code>, <code>2019#2</code>, etc. (a bit of a stretch, but not unthinkable). The url would look like this (without fragment):</p>
<div class="codehilite"><pre><span></span>http://fhir.acme.com/Questionnaire/example|2019#1
</pre></div>


<p>How can I parse/interpret those kind of urls unambiguously? I can think of multiple solutions:</p>
<ul>
<li>disallow usage of <code>#</code> in versions</li>
<li>require version segment to be percent-encoded</li>
<li>...</li>
</ul>
<p>But I could not find any documentation on how to handle this in the specs. Did I miss something?</p>



<a name="171626350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Parsing%20of%20canonical%20reference%20urls/near/171626350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Parsing.20of.20canonical.20reference.20urls.html#171626350">(Jul 24 2019 at 17:37)</a>:</h4>
<p>Given that version strings are part of the FHIR API, I guess we need to be stricter around what characters are allowed and define a regex similar to what we've done for <a href="http://Resource.id" target="_blank" title="http://Resource.id">Resource.id</a>.  Can you submit a change request?  We'd need to constrain out (or set an expectation to escape) any #, / and similar characters appearing in the version string.</p>



<a name="171925392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Parsing%20of%20canonical%20reference%20urls/near/171925392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henk-Jan Meijer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Parsing.20of.20canonical.20reference.20urls.html#171925392">(Jul 29 2019 at 07:49)</a>:</h4>
<p>I cannot (yet) submit a change request (account awaiting approval). Happy to do it as soon as I'm allowed.</p>



<a name="171948745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Parsing%20of%20canonical%20reference%20urls/near/171948745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Parsing.20of.20canonical.20reference.20urls.html#171948745">(Jul 29 2019 at 14:12)</a>:</h4>
<p><span class="user-mention" data-user-id="195731">@Henk-Jan Meijer</span> - check your spam folder.  The approval email should have been sent, but you'll need to click the 'activate' link.</p>



<a name="171952041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Parsing%20of%20canonical%20reference%20urls/near/171952041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Henk-Jan Meijer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Parsing.20of.20canonical.20reference.20urls.html#171952041">(Jul 29 2019 at 14:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> thanks, I got the link eventually. Created change request here: <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23011" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23011">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23011</a></p>



<a name="171952708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Parsing%20of%20canonical%20reference%20urls/near/171952708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Parsing.20of.20canonical.20reference.20urls.html#171952708">(Jul 29 2019 at 14:56)</a>:</h4>
<p>thanks</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
