---
layout: page
title: "FHIR Chat  · Resource id&#x27;s in OperationOutcome? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html">Resource id&#x27;s in OperationOutcome?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153935250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20id%27s%20in%20OperationOutcome%3F/near/153935250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Christensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html#153935250">(Feb 05 2018 at 11:36)</a>:</h4>
<p>Without returning the entire resource I was looking at finding a structured way of returning resource id's / resource URLs upon a successful create/update. I thought about putting it  in the location part of an OperationOutcome, likes this:</p>
<p>{<br>
    "resourceType": "OperationOutcome",<br>
    "issue": [<br>
        {<br>
            "severity": "information",<br>
            "code": "informational",<br>
            "diagnostics": "Successfully created resource \"Observation/855807/_history/1\" in 48ms"<br>
            "location": [<br>
              "Observation/855807/_history/1\"<br>
            ]<br>
        }<br>
    ]<br>
}</p>
<p>But location is supposed to be an XPath, so this seems to violate the intent of location? Is there any nice/simple way of achieving this?</p>



<a name="153935338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20id%27s%20in%20OperationOutcome%3F/near/153935338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html#153935338">(Feb 05 2018 at 19:32)</a>:</h4>
<p>"finding a structured way of returning resource id's / resource URLs upon a successful create/update" - why? what ids?</p>



<a name="153935340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20id%27s%20in%20OperationOutcome%3F/near/153935340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html#153935340">(Feb 05 2018 at 19:46)</a>:</h4>
<p>The URL for the version should come back in the location header on both operations - and from that you can extract both the resource id and the version.  (Though on an update, you should already know the resource id going in...)</p>



<a name="153935369"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20id%27s%20in%20OperationOutcome%3F/near/153935369" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html#153935369">(Feb 05 2018 at 22:09)</a>:</h4>
<p>Wouldn't adding the HTTP header Prefer: return=minimal work? (<a href="http://build.fhir.org/http.html#2.21.0.5.2" target="_blank" title="http://build.fhir.org/http.html#2.21.0.5.2">http://build.fhir.org/http.html#2.21.0.5.2</a>)</p>



<a name="153935517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20id%27s%20in%20OperationOutcome%3F/near/153935517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Christensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html#153935517">(Feb 06 2018 at 12:58)</a>:</h4>
<p>Ok, probably should have explained about the context. Appart from supporting REST-based http communication I am building (FHIR based) services that use Apache Kafka as underlying messaging system (but could be any messaging system). So, I may get an incoming message that tells me to create or update a resource (with resource content as payload of the message). When I'm done with this I would like to tell the world, via Kafka, that/if the request succeeded. The listeners on such a message could typically be interested in knowing what resource was created and where to potentially retrieve the content from. Therefore, I was looking at sending out a message with an OperationOutcome as payload and to have this OperationOutcome contain a url for the version of the resource created/updated. From the description of OperationOutcome it wasn't obvious to me how/if this was legal.</p>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> If I do a POST of an observation resource to <a href="http://fhirtest.uhn.ca/baseDstu3/Observation" target="_blank" title="http://fhirtest.uhn.ca/baseDstu3/Observation">http://fhirtest.uhn.ca/baseDstu3/Observation</a> I get:</p>
<p>{<br>
    "resourceType": "OperationOutcome",<br>
    "text": {<br>
        "status": "generated",<br>
        "div": "&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\"0\"&gt;&lt;tr&gt;&lt;td style=\"font-weight: bold;\"&gt;INFORMATION&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Successfully created resource \"Observation/15241/_history/1\" in 3ms&lt;/pre&gt;&lt;/td&gt;\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t&lt;/tr&gt;\n\t\t\t&lt;tr&gt;\n\t\t\t\t&lt;td style=\"font-weight: bold;\"&gt;INFORMATION&lt;/td&gt;\n\t\t\t\t&lt;td&gt;[]&lt;/td&gt;\n\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\t\t&lt;td&gt;&lt;pre&gt;No issues detected during validation&lt;/pre&gt;&lt;/td&gt;\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t&lt;/tr&gt;\n\t\t&lt;/table&gt;\n\t&lt;/div&gt;"<br>
    },<br>
    "issue": [<br>
        {<br>
            "severity": "information",<br>
            "code": "informational",<br>
            "diagnostics": "Successfully created resource \"Observation/15241/_history/1\" in 3ms"<br>
        },<br>
        {<br>
            "severity": "information",<br>
            "code": "informational",<br>
            "diagnostics": "No issues detected during validation"<br>
        }<br>
    ]<br>
}</p>
<p>Are you saying that there ought to be a URL for the version created in a location part of the OperationOutcome?</p>



<a name="153935526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20id%27s%20in%20OperationOutcome%3F/near/153935526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html#153935526">(Feb 06 2018 at 13:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191521">@Michael Christensen</span> - check the HTTP header 'location'. See also <a href="https://www.hl7.org/fhir/http.html#create" target="_blank" title="https://www.hl7.org/fhir/http.html#create">https://www.hl7.org/fhir/http.html#create</a></p>



<a name="153935540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20id%27s%20in%20OperationOutcome%3F/near/153935540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html#153935540">(Feb 06 2018 at 14:11)</a>:</h4>
<p>You could patch the <a href="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/dao/dstu3/FhirResourceDaoDstu3.java" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-jpaserver-base/src/main/java/ca/uhn/fhir/jpa/dao/dstu3/FhirResourceDaoDstu3.java">FhirResourceDaoDstu3</a> (or r4) in the createOperationOutcome and add a value to the location attribute ... given that you use the HAPI FHIR impl.</p>



<a name="153935542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20id%27s%20in%20OperationOutcome%3F/near/153935542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Christensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html#153935542">(Feb 06 2018 at 14:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191427">@Jens Villadsen</span> Ah, that "Location", now I see that <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> meant. Thanks. I will probably just do the same in my Kafka messaging as I am designing these messages with a header and body structure as well.</p>



<a name="153935547"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20id%27s%20in%20OperationOutcome%3F/near/153935547" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html#153935547">(Feb 06 2018 at 16:02)</a>:</h4>
<p>If you are using messaging, why not use FHIR messaging? <a href="http://build.fhir.org/messaging.html" target="_blank" title="http://build.fhir.org/messaging.html">http://build.fhir.org/messaging.html</a></p>



<a name="153935562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20id%27s%20in%20OperationOutcome%3F/near/153935562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html#153935562">(Feb 06 2018 at 18:53)</a>:</h4>
<p>And if all you're doing is asking for a bunch of creates &amp; updates, you might also look at Batch and Transaction, which have a bit less overhead than messaging - and which don't require site-to-site negotiation about message contents, event codes, etc.</p>



<a name="153935736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resource%20id%27s%20in%20OperationOutcome%3F/near/153935736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Christensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resource.20id&#x27;s.20in.20OperationOutcome.3F.html#153935736">(Feb 07 2018 at 09:44)</a>:</h4>
<p>Working on a microservice based infrastructure, very loosely coupled services, event sourcing style messaging. Involves more than just creates and updates and also quite a bit of non-FHIR content. I have had a look at FHIR messaging a while back, but will look again. Thanks.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
