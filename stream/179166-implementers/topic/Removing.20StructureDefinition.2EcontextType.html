---
layout: page
title: "FHIR Chat  · Removing StructureDefinition.contextType · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html">Removing StructureDefinition.contextType</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153941165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941165">(Feb 28 2018 at 15:38)</a>:</h4>
<p>So I had a go at removing this... it's not so easy. There's kind of 2 problems:<br>
- the FHIRPath for type testing is problematic. <br>
- it's much harder for me to build the spec</p>



<a name="153941166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941166">(Feb 28 2018 at 15:39)</a>:</h4>
<p>at the moment, I categorise extensions based on their context type and the string of the context.... it can be<br>
- extension + uri<br>
- type + a type name or a path into a type<br>
- resource + a resource name or a path into a resource.</p>



<a name="153941167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941167">(Feb 28 2018 at 15:41)</a>:</h4>
<p>see:<br>
- contextType = extension:  fhirpath = extension('uri')<br>
- contextType = type: fhirpath = %this is [type], but a path into type... don't know how to do that..<br>
- context type = resource - that's a straight forward fhirpath.... except that I have to process it to decide what possible paths could match, for indexing... I think I can do that... but I haven't tried because the type thing made me scared.</p>



<a name="153941168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941168">(Feb 28 2018 at 15:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> I kept wanting to bring back type... it's so much simpler.... maybe just repeat context type with context</p>



<a name="153941180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941180">(Feb 28 2018 at 15:54)</a>:</h4>
<p>there's a related issue: both ElementDefinition.fixed[x] etc and Extension.value have a type of * - so the same list of possible types... I do not think that this is what we want.</p>



<a name="153941207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941207">(Feb 28 2018 at 16:42)</a>:</h4>
<p>I'm fine with type if it's as part of a pair with context</p>



<a name="153941217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941217">(Feb 28 2018 at 16:54)</a>:</h4>
<blockquote>
<p>but a path into type... don't know how to do that..</p>
</blockquote>
<p>Hmm, the expression would need to verify that some (grand)parent element has the correct datatype, and that the relative path from below that node matches some specific path given by the expression. But (standard) fhirpath has no notion of element types...?</p>



<a name="153941286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941286">(Feb 28 2018 at 21:20)</a>:</h4>
<p>fhirpath does have the notion of element type, but it is hard. And obtuse...</p>



<a name="153941321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941321">(Feb 28 2018 at 23:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191315">@Josh Mandel</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> so I propose to turn it into a repeating pair instead of removing context. And change it a little:<br>
- type = extension, context is a url <br>
- element id = context is an id that matches an <a href="http://elementdefinition.id" target="_blank" title="http://elementdefinition.id">elementdefinition.id</a><br>
- path - context is a FHIRPath</p>



<a name="153941326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941326">(Feb 28 2018 at 23:32)</a>:</h4>
<p>ok</p>



<a name="153941671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941671">(Mar 01 2018 at 23:40)</a>:</h4>
<p>ok. reorganized, and got the build working again.</p>



<a name="153941702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941702">(Mar 02 2018 at 01:56)</a>:</h4>
<p>.... and now it's built.... <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> you can check that</p>



<a name="153941703"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941703" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941703">(Mar 02 2018 at 02:08)</a>:</h4>
<p>Not clear on what I'm being asked to check?</p>



<a name="153941722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941722">(Mar 02 2018 at 07:04)</a>:</h4>
<p>the new set up for StructureDefinition.context: <a href="http://build.fhir.org/structuredefinition-definitions.html#StructureDefinition.context" target="_blank" title="http://build.fhir.org/structuredefinition-definitions.html#StructureDefinition.context">http://build.fhir.org/structuredefinition-definitions.html#StructureDefinition.context</a></p>



<a name="153941774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941774">(Mar 02 2018 at 15:04)</a>:</h4>
<p>The display names for contextType don't match the new codes &amp; definitions</p>



<a name="153941824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941824">(Mar 02 2018 at 20:14)</a>:</h4>
<p>where? look ok to me...</p>



<a name="153941826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941826">(Mar 02 2018 at 20:17)</a>:</h4>
<p>Here: <a href="http://build.fhir.org/valueset-extension-context-type.html" target="_blank" title="http://build.fhir.org/valueset-extension-context-type.html">http://build.fhir.org/valueset-extension-context-type.html</a><br>
element is called Datatype and fhirPath is called Resource</p>



<a name="153941827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941827">(Mar 02 2018 at 20:18)</a>:</h4>
<p>The other question is whether elementId includes the possibility of sliced elementIds or not</p>



<a name="153941828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941828">(Mar 02 2018 at 20:18)</a>:</h4>
<p>(And if not, how is elementId not a subset of fhirPath?)</p>



<a name="153941830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941830">(Mar 02 2018 at 20:28)</a>:</h4>
<p>fixed. it differs from FHIRPath in 3 ways:<br>
- includes slicing identifiers<br>
- can start with a data type<br>
- is limited to a very simple subset</p>



<a name="153941842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941842">(Mar 02 2018 at 21:05)</a>:</h4>
<p>So how do we declare the profile that applies if we're allowing slice names in the Element id?</p>



<a name="153941843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941843">(Mar 02 2018 at 21:05)</a>:</h4>
<p>(And I didn't realize that FHIRPath couldn't start with a data type)</p>



<a name="153941844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941844">(Mar 02 2018 at 21:20)</a>:</h4>
<p>prefix with a profile uri#elementid</p>



<a name="153941858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153941858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153941858">(Mar 02 2018 at 22:45)</a>:</h4>
<p>That's not clear from the description</p>



<a name="153942353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Removing%20StructureDefinition.contextType/near/153942353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Removing.20StructureDefinition.2EcontextType.html#153942353">(Mar 05 2018 at 10:05)</a>:</h4>
<p>Looks good, I'm OK with the proposed change. Let's try to provide detailed description of these rules and preferably some examples in the spec.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
