---
layout: page
title: "FHIR Chat  · Searching against numbers · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html">Searching against numbers</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153944644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/153944644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ivan Dubrov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#153944644">(Mar 14 2018 at 04:09)</a>:</h4>
<p>I'm confused by how prefixes work for numbers in the search.</p>
<p>Is it correct that value "1.9" is "gt1.91"? The range of the value "1.9" would be [1.85, 1.95], which overlaps with the "above" range of "1.91", which is [1.91, +inf).</p>
<p>It sort of awkward that any number would be "greater than" itself, as the range "above" it will always overlap with the range of the number itself, given the definition of the "above" range.</p>
<p>Or maybe I'm mistaken and the "above" range should actually be [1.915, +inf) for the "1.91" rather than [1.91, +inf)?</p>
<p>So, basically, which one is correct for the ranges "below" and "above":<br>
1) (-inf, value] and [value, +inf) <br>
or<br>
2) (-inf, low_value] and [high_value, +inf)<br>
?<br>
(where "low_value" and "high_value" are computed by subtracting/adding 0.(n0)5, where "(n0)" is the right amount of zeroes according to the number scale)</p>



<a name="153944645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/153944645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#153944645">(Mar 14 2018 at 04:15)</a>:</h4>
<p>"Note: Uncertainty does not factor in evaluations. The precision of the numbers is considered arbitrarily high. (The way search parameters operate in resources is not the same as whether two numbers are equal to each other in a mathematical sense)."</p>



<a name="153944649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/153944649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ivan Dubrov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#153944649">(Mar 14 2018 at 04:25)</a>:</h4>
<p>I've read that many times, but still cannot quite grasp it. I understand the part about mathematical sense, sure, but I don't really understand the part "uncertainty does not factor in evaluations".</p>
<p>Similarly, if date is given as just the year, let's say, "2018", what would be the "above" and "below" range for it? Before 2018-01-01T00:00:00 and after 2018-01-01T00:00:00? This is what it looks like according to the specification, but "2000" sort of represents the whole year. Shouldn't  the those ranges be rather "before 2018-01-01T00:00:00" and "after 2018-12-31T23:59:59"?</p>
<p>I feel that this part of the specification is hard to understand without more "interesting" examples (example given uses "2015-08-12T05:23:45" which is not very interesting as it has exact time specified). Also, examples like "1.9 is considered greater than 1.91" would also help as they would clearly demonstrate the point about the mathematical sense.</p>



<a name="153944650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/153944650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#153944650">(Mar 14 2018 at 04:26)</a>:</h4>
<p>so with numbers, when searching, precision does not play a part. 1.91 &gt; 1.9. As is 1.9000000000001</p>



<a name="153944651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/153944651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#153944651">(Mar 14 2018 at 04:27)</a>:</h4>
<p>your search engine should just add 0s to the number till you get to the working precision limit - or behave as if that has happened</p>



<a name="153944652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/153944652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#153944652">(Mar 14 2018 at 04:27)</a>:</h4>
<p>dates the rules are different.</p>



<a name="153944653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/153944653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ivan Dubrov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#153944653">(Mar 14 2018 at 04:30)</a>:</h4>
<p>Ok. Does that mean that for numbers I just use "normal" mathematical operators? Like, a &gt; b when a &gt; b, digit by digit?</p>
<p>What confuses me is that section "The range interpretation is provided for decimals and dates. Searches are always performed on values that are implicitly or explicitly a range.", so I tried to make sense of all those "range" rules for decimals.</p>



<a name="153944654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/153944654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#153944654">(Mar 14 2018 at 04:33)</a>:</h4>
<p>well, those two statements are not compatible with each other</p>



<a name="153944809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/153944809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ivan Dubrov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#153944809">(Mar 14 2018 at 17:11)</a>:</h4>
<p>Let me formulate where I think specification has some issues. Apologies for the long text, but I struggle to make total sense of the specification in this area.</p>
<p>1. There is an inconsistency around number comparisons. One part of the specification calls for "range" semantics ("The range interpretation is provided for decimals and dates. Searches are always performed on values that are implicitly or explicitly a range") and another part of the specification calls for something else ("Uncertainty does not factor in evaluations. The precision of the numbers is considered arbitrarily high").</p>
<p>Based on the previous discussion it seems that for relative comparisons (gt/lt/ge/le) the comparison should be against numbers as they are, without using range semantics. For example, "1.0 &lt; 1.0001" and "1.0001 &gt; 1.0".</p>
<p>It is also not so clear for the equality. For example, when checking value "1.001" against criteria "eq1.0", should it be "true" or "false"? According to the "range" semantics, it should be "true", because range of "1.0" ("0.95" - "1.05") includes range of "1.001" ("1.0005" - "1.0015"). However, according to the "arbitrarily high" precision semantics and the discussion above ("your search engine should just add 0s to the number till you get to the working precision limit - or behave as if that has happened"), it should be "false", as "1.001" != "1.000".</p>
<p>Also, to fully nitpick on this case, this "The precision of the numbers is considered arbitrarily high." is somewhat inconsistent with "The way search parameters operate in resources is not the same as whether two numbers are equal to each other in a mathematical sense". The "mathematical sense" (to me) is exactly about numbers having arbitrary precision (no rounding at all).</p>
<p>2. There is uncertainty around "above" and "below" ranges for the dates. It is not clear what to use as "high" value for the "below" range and "low" value for the "above" range. For example, for the "range above the value" the specification says "The specified value and up". However, it is not clear what is the "value" in this context for dates which are not fully specified (for example, "2015").</p>
<p>Intuitively, I would split into three intervals:</p>
<p>* "below" interval: up to the _minimum_ value ("2015-01-01T00:00:00Z" in case of "2015")<br>
  * "value" interval: from _minimum_ value to the _maximum_ value ("2015-01-01T00:00:00Z" to "2015-12-31T23:59:59" in case of "2015")<br>
  * "above" interval: from the _maximum_ value ("2015-12-31T23:59:59" in case of "2015").</p>
<p>However, I don't think this is what specification says. For both "below" and "above" it does not distinguish between _minimum_ and _maximum_ value and says about the value itself. Which is, again, unclear, what is the value of "2015"? The whole year or just the point in time "2015-01-01T00:00:00"?</p>
<p>3. Finally, the examples provided in the table explaining ranges (<a href="https://build.fhir.org/search.html#prefix" target="_blank" title="https://build.fhir.org/search.html#prefix">https://build.fhir.org/search.html#prefix</a>) are not very helpful as the cases they use are not very interesting. For example, for dates they use date with time for which both _minimum_ and _maximum_ values are the same as the value itself (because it includes month, day and time).</p>
<p>Also, an example for the date "2015-08-12 has a range from 00:00 to 00:00 exclusive" seems to specify an empty range ("00:00 to 00:00 exclusive"). It (probably) should say "2015-08-12 has a range from 2015-08-12T00:00 to 2015-08-13T00:00" (different day, "13").</p>
<p>Hopefully that explains my frustration with the specification. Unfortunately, the discussion above did not help me to understand what is the desired semantics.</p>
<p>I would really appreciate if other implementers point me at tests they have in public access, so I can compare them to each other and to the specification.</p>



<a name="153944842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/153944842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#153944842">(Mar 14 2018 at 19:16)</a>:</h4>
<p>don't know if <span class="user-mention" data-user-id="191319">@James Agnew</span> has tests. I don't have tests for this part in my server. But agree that the specification says 2 incompatible things here</p>



<a name="153950111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/153950111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#153950111">(Apr 03 2018 at 06:57)</a>:</h4>
<p>In Vonk we compare Number searchparams as-is, but the value of Quantities are treated as ranges, accounting for their precision (both the value in the resource and the value in the search). <br>
Given the nature of the searchparams of type number (<a href="http://www.hl7.org/implement/standards/fhir/searchparameter-registry.html" target="_blank" title="http://www.hl7.org/implement/standards/fhir/searchparameter-registry.html">http://www.hl7.org/implement/standards/fhir/searchparameter-registry.html</a>), this seems reasonable for most of them. I'm just not sure about ChargeItem.factor-Override and RiskAssessment.probability.</p>



<a name="157807637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/157807637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#157807637">(Feb 07 2019 at 19:55)</a>:</h4>
<p>I think the spec needs clarification around these cases. It seems that everyone is interpreting it differently. <br>
I've spent hours reading it and am still not certain on some cases. </p>
<p>To illustrate, I set up some tests to see how different servers are handling some cases around searching numbers and ranges. <br>
I could only find three public servers to test against at the time. <br>
For each of these, I created a Condition resource with either the onsetAge or onsetRange set.<br>
Posted to each server, then executed a search to see if the search returned the resource. Then I deleted the resource. </p>
<p>Here are the cases that I ran where various servers behaved differently: </p>
<div class="codehilite"><pre><span></span>*********
  Test age:  age:0.99; searchParam:=eq1.0; found:true; server:HAPI STU3
  Test age:  age:0.99; searchParam:=eq1.0; found:false; server:Aegis STU3
  Test age:  age:0.99; searchParam:=eq1.0; found:true; server:Pyro STU3
*********
  Test age:  age:0.99; searchParam:=ge0.99; found:true; server:HAPI STU3
  Test age:  age:0.99; searchParam:=ge0.99; found:false; server:Aegis STU3
  Test age:  age:0.99; searchParam:=ge0.99; found:true; server:Pyro STU3
*********
Test range:  low:5.0; high:6.0; searchParam:=eq6.0; found:true; server:HAPI STU3
Test range:  low:5.0; high:6.0; searchParam:=eq6.0; found:false; server:Aegis STU3
Test range:  low:5.0; high:6.0; searchParam:=eq6.0; found:false; server:Pyro STU3
*********
Test range:  low:5.0; high:6.0; searchParam:=gt5.999999; found:true; server:HAPI STU3
Test range:  low:5.0; high:6.0; searchParam:=gt5.999999; found:false; server:Aegis STU3
Test range:  low:5.0; high:6.0; searchParam:=gt5.999999; found:false; server:Pyro STU3
*********
Test range:  low:5.0; high:6.0; searchParam:=ge6.0; found:true; server:HAPI STU3
Test range:  low:5.0; high:6.0; searchParam:=ge6.0; found:false; server:Aegis STU3
Test range:  low:5.0; high:6.0; searchParam:=ge6.0; found:false; server:Pyro STU3
</pre></div>


<p>Test details:<br>
For instance, this output:<br>
<strong>Test age:  age:0.99; searchParam:=eq1.0; found:true; server:HAPI STU3</strong></p>
<p>I posted a Condition like: </p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;Condition&quot;,
  &quot;contained&quot;: [
    {
      &quot;resourceType&quot;: &quot;Patient&quot;,
      &quot;id&quot;: &quot;xx1&quot;
    }
  ],
  &quot;identifier&quot;: [
    {
      &quot;system&quot;: &quot;http://example.org/testXX&quot;,
      &quot;value&quot;: &quot;0618b587-a842-4298-af74-d41e6c31df4e&quot;
    }
  ],
  &quot;clinicalStatus&quot;: &quot;inactive&quot;,
  &quot;subject&quot;: {
    &quot;reference&quot;: &quot;#xx1&quot;
  },
  &quot;onsetAge&quot;: {
    &quot;value&quot;: 0.99,
    &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,
    &quot;code&quot;: &quot;{years}&quot;
  }
}
</pre></div>


<p>Then performed a search like:<br>
<strong>{baseurl}/Condition/?identifier=0618b587-a842-4298-af74-d41e6c31df4e&amp;onset-age=eq1.0</strong><br>
Then printed whether the search found the resource or not.</p>



<a name="157835841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/157835841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#157835841">(Feb 08 2019 at 04:51)</a>:</h4>
<p>did you test <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a>?</p>



<a name="157861984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/157861984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#157861984">(Feb 08 2019 at 14:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  - I'm receiving errors POSTing to <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a>.   <br>
At  <a href="http://test.fhir.org/r3" target="_blank" title="http://test.fhir.org/r3">test.fhir.org/r3</a>  and <a href="http://test.fhir.org/r4" target="_blank" title="http://test.fhir.org/r4">test.fhir.org/r4</a>:<br>
<code>500, responseBody-&gt;Not done yet @ TFHIRTextComposer.Compose</code><br>
At the base url <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a>: <br>
<code>404, responseBody-&gt;Document /Condition not found</code></p>
<p>NOTE: I have these tests automated so can add servers and test cases re-compare easily.</p>



<a name="157866742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/157866742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#157866742">(Feb 08 2019 at 15:25)</a>:</h4>
<p>what are you posting?</p>



<a name="157874607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/157874607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#157874607">(Feb 08 2019 at 17:04)</a>:</h4>
<p>Updated results with <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> included: </p>
<div class="codehilite"><pre><span></span>*********
  Test age:  age:0.99; searchParam:=eq1.0; found:true; server:test.fhir.org STU3
  Test age:  age:0.99; searchParam:=eq1.0; found:true; server:HAPI STU3
  Test age:  age:0.99; searchParam:=eq1.0; found:false; server:Aegis STU3
  Test age:  age:0.99; searchParam:=eq1.0; found:true; server:Pyro STU3
*********
  Test age:  age:0.99; searchParam:=ge0.99; found:true; server:test.fhir.org STU3
  Test age:  age:0.99; searchParam:=ge0.99; found:true; server:HAPI STU3
  Test age:  age:0.99; searchParam:=ge0.99; found:false; server:Aegis STU3
  Test age:  age:0.99; searchParam:=ge0.99; found:true; server:Pyro STU3
*********
Test range:  low:5.0; high:6.0; searchParam:=eq5.0; found:false; server:test.fhir.org STU3
Test range:  low:5.0; high:6.0; searchParam:=eq5.0; found:true; server:HAPI STU3
Test range:  low:5.0; high:6.0; searchParam:=eq5.0; found:true; server:Aegis STU3
Test range:  low:5.0; high:6.0; searchParam:=eq5.0; found:true; server:Pyro STU3
*********
Test range:  low:5.0; high:6.0; searchParam:=eq6.0; found:false; server:test.fhir.org STU3
Test range:  low:5.0; high:6.0; searchParam:=eq6.0; found:true; server:HAPI STU3
Test range:  low:5.0; high:6.0; searchParam:=eq6.0; found:false; server:Aegis STU3
Test range:  low:5.0; high:6.0; searchParam:=eq6.0; found:false; server:Pyro STU3
*********
Test range:  low:5.0; high:6.0; searchParam:=gt5.999999; found:true; server:test.fhir.org STU3
Test range:  low:5.0; high:6.0; searchParam:=gt5.999999; found:true; server:HAPI STU3
Test range:  low:5.0; high:6.0; searchParam:=gt5.999999; found:false; server:Aegis STU3
Test range:  low:5.0; high:6.0; searchParam:=gt5.999999; found:false; server:Pyro STU3
*********
Test range:  low:5.0; high:6.0; searchParam:=ge6.0; found:true; server:test.fhir.org STU3
Test range:  low:5.0; high:6.0; searchParam:=ge6.0; found:true; server:HAPI STU3
Test range:  low:5.0; high:6.0; searchParam:=ge6.0; found:false; server:Aegis STU3
Test range:  low:5.0; high:6.0; searchParam:=ge6.0; found:false; server:Pyro STU3
</pre></div>



<a name="157883178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/157883178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#157883178">(Feb 08 2019 at 19:02)</a>:</h4>
<p>After re-reading that part of the search spec I have to agree with <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> - but it's a little bit confusing that significant figures precision applies to eq5.0 =&gt; [4.95,5.05) while the values in the explicit range (low=5.0, high=6.0) are treated with no distinction between setting low=5.0 and low=5.0000000. This confusion is specific to eq/ne against a range target value, I think?</p>



<a name="157884438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/157884438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#157884438">(Feb 08 2019 at 19:18)</a>:</h4>
<p>When we discussed this for eq at the May 2018 WGM (<a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16369" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16369">Gforge #16369</a>) I don't remember whether we discussed ge and le.</p>



<a name="157891426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/157891426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#157891426">(Feb 08 2019 at 20:47)</a>:</h4>
<p>I think <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> has the  "eq" against an explicit target range correct, as per the spec. But I can't say the spec makes intuitive sense to me on this case. <br>
The spec says: <code>the range of the search value fully contains the range of the target value</code><br>
So for this case: <code>Test range:  low:5.0; high:6.0; searchParam:=eq5.0; </code><br>
range of search value = [4.95,5.05)<br>
range of target value = [5.0, 6.0]</p>
<p>So while the search value is within the target range, the (implicit) range of the search value does not fully contain the (explicit) range of the target. And it seems like it rarely would, unless the target range had a fine precision with a relatively narrow range.  </p>
<ul>
<li>Assuming I am reading the spec correctly.</li>
</ul>



<a name="188393541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20numbers/near/188393541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20numbers.html#188393541">(Feb 17 2020 at 17:01)</a>:</h4>
<p>I opened this issue to investigate this further: <a href="https://jira.hl7.org/browse/FHIR-26311" target="_blank" title="https://jira.hl7.org/browse/FHIR-26311">https://jira.hl7.org/browse/FHIR-26311</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
