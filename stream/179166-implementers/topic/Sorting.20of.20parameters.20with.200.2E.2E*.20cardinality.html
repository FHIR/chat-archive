---
layout: page
title: "FHIR Chat  · Sorting of parameters with 0..* cardinality · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html">Sorting of parameters with 0..* cardinality</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154020393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020393">(Nov 22 2018 at 07:01)</a>:</h4>
<p>What should be the behavior if the search parameter in _sort does not have scalar value?<br>
for example: {base}/Patient?_sort=given</p>
<p>the given names of a patient could be multiple so how to sort resources in such condition?</p>



<a name="154020465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020465">(Nov 22 2018 at 13:55)</a>:</h4>
<p>I believe the specifications do not say anything about that. I'd say implementation can do what they like - that would be to use the minimum or maximum of the available values</p>



<a name="154020502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020502">(Nov 22 2018 at 15:42)</a>:</h4>
<p>From the spec: "A search parameter can refer to an element that repeats, and therefore there can be multiple values for a given search parameter for a single resource. In this case, the sort is based on the item in the set of multiple parameters that comes earliest in the specified sort order when ordering the returned resources."</p>



<a name="154020503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020503">(Nov 22 2018 at 15:43)</a>:</h4>
<p>So if you ask to sort by <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a>, then "John Abrams Smith" will come before "Adam George Smith" (on the grounds that "Abrams" comes before "Adam".</p>



<a name="154020504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020504">(Nov 22 2018 at 15:44)</a>:</h4>
<p>If that's not the behavior you want, then you'll need to define custom search parameters that are specific to first name, first middle name, second middle name, etc.</p>



<a name="154020514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020514">(Nov 22 2018 at 16:09)</a>:</h4>
<p>(Sorry, my bad - I should have checked)</p>



<a name="154020518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020518">(Nov 22 2018 at 17:22)</a>:</h4>
<p>I don't think that result is what people would expect, at least for Patient name.</p>



<a name="154020520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020520">(Nov 22 2018 at 17:26)</a>:</h4>
<p>True.  We could propose a change in R5 that where collections are defined as "ordered" (as names are) that the sorting is based on defined order.  Though not sure we can do that when the backward compatibility rules kick in</p>



<a name="154020521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020521">(Nov 22 2018 at 17:32)</a>:</h4>
<p>Add a new sort prefixes &lt; and &gt; for ascending and descending according to server-defined criteria, or according to a "logical" sort order?</p>



<a name="154020522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020522">(Nov 22 2018 at 17:49)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19692" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19692">GF#19692</a></p>



<a name="154020524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020524">(Nov 22 2018 at 17:54)</a>:</h4>
<p>Was more thinking about saying that rather than sorting by the "lowest" element within a collection, if the collection was ordered, then you'd sort by the first element in the collection.</p>



<a name="154020525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020525">(Nov 22 2018 at 17:55)</a>:</h4>
<p>Do we have collections identified as "ordered" vs "non-ordered"?</p>



<a name="154020528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020528">(Nov 22 2018 at 18:06)</a>:</h4>
<p>My thought was that by adding new search prefixes, that trigger the new behavior (which is, perhaps, as you suggest), you could avoid backward compatibility issues.<br>
Am I correct that current behavior is that when sorting by patient given name, not only would you sort by the alphabetically first given name (whether that's first or middle), but also if the patient has multiple names, then you'd sort by the alphabetically first of any given name across any of their names?</p>



<a name="154020532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020532">(Nov 22 2018 at 18:15)</a>:</h4>
<p>Elements now have an orderMeaning element that can be populated if the order has significance.  It doesn't most places, but does for HumanName.given and a few other places.</p>



<a name="154020533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020533">(Nov 22 2018 at 18:17)</a>:</h4>
<p>And yes, as currently defined, if there were multiple names, you would take all of the name parts (including text) that are included by the current search criteria and sort them alphabetically and would then sort the Patient based on the first of those strings</p>



<a name="154020534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154020534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154020534">(Nov 22 2018 at 18:18)</a>:</h4>
<p>Thanks.</p>



<a name="154021722"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154021722" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154021722">(Nov 29 2018 at 16:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> "So if you ask to sort by <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a>, then "John Abrams Smith" will come before "Adam George Smith" (on the grounds that "Abrams" comes before "Adam"."</p>
<p>would you please help me to understand this? how "John Abrams Smith" will come before "Adam George Smith"?</p>
<p>I understand that you have not ordered these two full names as the whole strings but in parts.</p>



<a name="154021735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154021735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154021735">(Nov 29 2018 at 18:12)</a>:</h4>
<p>I'm not Lloyd, but I'll answer for him since he's away.  sorting on <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a> is sorting on all of the name parts of each patient.  His earlier quote pointed out that when a search parameter contains multiple elements (like <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a>), then it uses the earliest element.  So it uses "Abrams" from the first Patient and "Adam" from the second patient and puts "John Abrams Smith" ahead of "Adam George Smith".</p>



<a name="154022040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154022040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Abubakar Ikram <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154022040">(Nov 30 2018 at 06:51)</a>:</h4>
<p><span class="user-mention" data-user-id="192166">@Jean Duteau</span> oh alright, kindly correct me if I am wrong.</p>
<p>So, you are saying that first sort the subparts of the name which are "John", "Abrams" and "Smith" hence, "Abrams" will be on first. Then, do this for the second full name from the second full name "Adam" comes first. So, then sort both full names on basis of "Abrams" and "Adam" which one come first its full name will come first. Am I right?</p>



<a name="154022042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154022042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154022042">(Nov 30 2018 at 07:44)</a>:</h4>
<p>Yep</p>



<a name="154022448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154022448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154022448">(Dec 03 2018 at 10:39)</a>:</h4>
<p>And with Patient name searching, really depends what you're doing here too, if you're doing demographic analysis or other non patient specific searching that makes sense, but if you're looking for a patient, you're more likely to be doing an MPI search where a set of values are applied and the order is based on rank/weighting rather than by name.<br>
And I'd expect there to be a specific name that would be identified as the usual one for sorting, and that depends on the system which way they do that, and other factors in the use case..</p>



<a name="154024329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Sorting%20of%20parameters%20with%200..%2A%20cardinality/near/154024329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Sorting.20of.20parameters.20with.200.2E.2E*.20cardinality.html#154024329">(Dec 11 2018 at 01:51)</a>:</h4>
<p>The challenge is that most collections in FHIR are unordered - so ordering them prior to comparison is necessary.  However, some collections <em>are</em> ordered, and ordering them prior to comparison breaks things.  Unfortunately, we're past the point where we can fix this for R4 - and based on our interversion compatibility rules, it's going to take significant agreement from the community to fix it in R5.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
