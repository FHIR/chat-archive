---
layout: page
title: "FHIR Chat  · Measure CQL Expressions · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Measure.20CQL.20Expressions.html">Measure CQL Expressions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="168681225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Measure%20CQL%20Expressions/near/168681225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Measure.20CQL.20Expressions.html#168681225">(Jun 21 2019 at 13:29)</a>:</h4>
<p>In the <a href="https://www.hl7.org/fhir/measure.html" target="_blank" title="https://www.hl7.org/fhir/measure.html">Measure</a> resource, one can specify criteria via the <a href="https://www.hl7.org/fhir/metadatatypes.html#Expression" target="_blank" title="https://www.hl7.org/fhir/metadatatypes.html#Expression">Expression</a> type. In that Expression type one can use <code>text/cql</code> as language and there is an expression data element.</p>
<p>In all examples I saw, for CQL, the expression data element always used expression names to reference named expressions from the <a href="https://www.hl7.org/fhir/library.html" target="_blank" title="https://www.hl7.org/fhir/library.html">Library</a> resource referenced by the Measure.</p>
<p>I like to use Measure together with $evaluate-measure to evaluate ad-hoc queries. So I would like to put real expressions like <code>AgeInYearsAt(@2013-01-01) &gt;= 16 and AgeInYearsAt(@2013-01-01) &lt; 24</code> in the expression data element. Otherwise I would have to create a separate Library for each ad-hoc query. I would still use a basic Library with some common functions and expression definitions, but I like to be able to evaluate expressions on top of that basic library.</p>
<p>Currently I work on my own implementation. So I can implement support for real expressions. But I wonder whether other implementations would also support real expressions or only references to named expressions.</p>



<a name="168696916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Measure%20CQL%20Expressions/near/168696916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Measure.20CQL.20Expressions.html#168696916">(Jun 21 2019 at 16:47)</a>:</h4>
<p>We had restricted this in STU3 on the grounds that implementations wouldn't have to deal with in-line expressions, they could always just expect that the criteria was a reference to a named expression in the library for the measure. But in R4, we're actively seeking feedback on this. For our implementation, it is still easier to be able to assume the criteria is a reference to an expression in the library, but we are still in the process of updating to R4, so we might change that as we upgrade, especially if it facilitates more ad-hoc measure usage like you are describing.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
