---
layout: page
title: "FHIR Chat  · Validator returns invalid OperationOutcome · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20returns.20invalid.20OperationOutcome.html">Validator returns invalid OperationOutcome</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="201325728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20returns%20invalid%20OperationOutcome/near/201325728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Reece Adamson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20returns.20invalid.20OperationOutcome.html#201325728">(Jun 18 2020 at 21:02)</a>:</h4>
<p>We discovered this while working directly with the <code>ValidationEngine</code> class in Java, but it is reproducible with the Desktop JAR validator.</p>
<p>The HL7 Validator returns an invalid OperationOutcome.  The main issue we noticed is that it does not include an <code>OperationOutcome.issue</code> which has a cardinality of <code>1..1</code> in the base FHIR spec.  I'm not sure if this is related to the lack of suitable codes for OperationOutcomes when reporting successful outcomes which was discussed at DevDays and spawned <a href="https://jira.hl7.org/browse/FHIR-27840?filter=-2">FHIR-27840</a>.</p>
<p>For example trying to validate a simple patient ( e.g. <a href="/user_uploads/10155/FovwKEqbhqw55IVSg5agkmb8/patient.json">patient.json</a> )</p>
<div class="codehilite"><pre><span></span><code>FHIR Validation tool Version <span class="m">5</span>.0.7-SNAPSHOT <span class="o">(</span>Git# 6bc790d98b04<span class="o">)</span>. Built <span class="m">2020</span>-06-07T08:35:37.25+10:00 <span class="o">(</span><span class="m">11</span> days old<span class="o">)</span>
Detected Java version: <span class="m">11</span>.0.7 from /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home on x86_64 <span class="o">(</span>64bit<span class="o">)</span>. 4096MB available
Arguments: patient.json -output out.json
Directories: <span class="nv">Current</span> <span class="o">=</span> /Users/crowleyj/Downloads, Package <span class="nv">Cache</span> <span class="o">=</span> /Users/crowleyj/.fhir/packages
  .. FHIR Version current, definitions from hl7.fhir.r5.core#current
  .. connect to tx server @ http://tx.fhir.org
    <span class="o">(</span>vcurrent<span class="o">)</span>
  .. validate <span class="o">[</span>patient.json<span class="o">]</span>
</code></pre></div>


<p>This provides this operation outcome (<a href="/user_uploads/10155/Oer_6REpc98rpkhCSI0TvT-y/out.json">out.json</a>)</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;resourceType&quot;</span> <span class="p">:</span> <span class="s2">&quot;OperationOutcome&quot;</span><span class="p">,</span>
  <span class="nt">&quot;text&quot;</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;status&quot;</span> <span class="p">:</span> <span class="s2">&quot;extensions&quot;</span><span class="p">,</span>
    <span class="nt">&quot;div&quot;</span> <span class="p">:</span> <span class="s2">&quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;&lt;p&gt;All OK&lt;/p&gt;&lt;/div&gt;&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;extension&quot;</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="nt">&quot;url&quot;</span> <span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/StructureDefinition/operationoutcome-file&quot;</span><span class="p">,</span>
    <span class="nt">&quot;valueString&quot;</span> <span class="p">:</span> <span class="s2">&quot;patient.json&quot;</span>
  <span class="p">}]</span>
</code></pre></div>


<p>Subsequently trying to validate the provided OperationOutcome gives:</p>
<div class="codehilite"><pre><span></span><code>$ java -jar org.hl7.fhir.validator.jar out.json
FHIR Validation tool Version <span class="m">5</span>.0.7-SNAPSHOT <span class="o">(</span>Git# 6bc790d98b04<span class="o">)</span>. Built <span class="m">2020</span>-06-07T08:35:37.25+10:00 <span class="o">(</span><span class="m">11</span> days old<span class="o">)</span>
Detected Java version: <span class="m">11</span>.0.7 from /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home on x86_64 <span class="o">(</span>64bit<span class="o">)</span>. 4096MB available
Arguments: out.json
Directories: <span class="nv">Current</span> <span class="o">=</span> /Users/crowleyj/Downloads, Package <span class="nv">Cache</span> <span class="o">=</span> /Users/crowleyj/.fhir/packages
  .. FHIR Version current, definitions from hl7.fhir.r5.core#current
  .. connect to tx server @ http://tx.fhir.org
    <span class="o">(</span>vcurrent<span class="o">)</span>
  .. validate <span class="o">[</span>out.json<span class="o">]</span>
*FAILURE* validating out.json:  error:2 warn:0 info:1
  Error @ OperationOutcome.extension<span class="o">[</span><span class="m">0</span><span class="o">]</span>.url <span class="o">(</span>line <span class="m">8</span>, col77<span class="o">)</span> : URL value <span class="s2">&quot;http://hl7.org/fhir/StructureDefinition/operationoutcome-file&quot;</span> does not resolve
  Error @ OperationOutcome <span class="o">(</span>line <span class="m">1</span>, col2<span class="o">)</span> : Profile http://hl7.org/fhir/StructureDefinition/OperationOutcome, Element <span class="s1">&#39;OperationOutcome.issue&#39;</span>: minimum <span class="nv">required</span> <span class="o">=</span> <span class="m">1</span>, but only found <span class="m">0</span>
  Information @ OperationOutcome.extension<span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="o">(</span>line <span class="m">7</span>, col19<span class="o">)</span> : Unknown extension http://hl7.org/fhir/StructureDefinition/operationoutcome-file
</code></pre></div>


<p>Let me know if we can help provide further information and, as always, thanks for the hard work on these tools!</p>



<a name="201339088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20returns%20invalid%20OperationOutcome/near/201339088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20returns.20invalid.20OperationOutcome.html#201339088">(Jun 18 2020 at 23:45)</a>:</h4>
<p>oops. I really though I had fixed that. But I missed it somehow. Fixed next release</p>



<a name="201339349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20returns%20invalid%20OperationOutcome/near/201339349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20returns.20invalid.20OperationOutcome.html#201339349">(Jun 18 2020 at 23:48)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="s2">&quot;issue&quot;</span><span class="err">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;severity&quot;</span><span class="p">:</span> <span class="s2">&quot;information&quot;</span><span class="p">,</span>
      <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="s2">&quot;informational&quot;</span><span class="p">,</span>
      <span class="nt">&quot;details&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;All OK&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
</code></pre></div>


<p>From <a href="http://hl7.org/fhir/operationoutcome-example-allok.html">http://hl7.org/fhir/operationoutcome-example-allok.html</a>. Note that "All OK" is subject to internationalization</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
