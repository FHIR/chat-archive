---
layout: page
title: "FHIR Chat  · Searching with _elements and choice types · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html">Searching with _elements and choice types</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="182701446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182701446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182701446">(Dec 05 2019 at 20:43)</a>:</h4>
<p>If I want to search for <code>Observation?_elements=</code> in a query to return <code>Observation</code>s with just the <code>valueQuantity</code> (and not, say, <code>category</code> or other "extraneous" data), <a href="http://build.fhir.org/search.html#elements" target="_blank" title="http://build.fhir.org/search.html#elements">the spec says</a>:</p>
<blockquote>
<p>The _elements parameter consists of a comma-separated list of base element names</p>
</blockquote>
<p>I'm not sure what the base element name is for <code>Observation.valueQuantity</code>. <a href="http://build.fhir.org/observation.profile.json.html" target="_blank" title="http://build.fhir.org/observation.profile.json.html">Official profile</a> suggests <code>value[x]</code> ... but I see variable behavior across references servers.</p>



<a name="182701579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182701579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182701579">(Dec 05 2019 at 20:45)</a>:</h4>
<p>I don't think we ever discussed this</p>



<a name="182701598"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182701598" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182701598">(Dec 05 2019 at 20:45)</a>:</h4>
<p>With HAPI, the following all work: </p>
<ul>
<li><a href="http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=value" target="_blank" title="http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=value">http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=value</a></li>
<li><a href="http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=valueQuantity" target="_blank" title="http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=valueQuantity">http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=valueQuantity</a></li>
<li><a href="http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=valueWhyDoesThisWork" target="_blank" title="http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=valueWhyDoesThisWork">http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=valueWhyDoesThisWork</a>!?</li>
</ul>
<p>But this does't:</p>
<ul>
<li><a href="http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=value[x]" target="_blank" title="http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=value[x]">http://hapi.fhir.org/baseR4/Observation?_format=json&amp;_pretty=true&amp;_elements=value[x]</a></li>
</ul>



<a name="182701674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182701674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182701674">(Dec 05 2019 at 20:46)</a>:</h4>
<p>With Grahame's server, the following do not work:</p>
<ul>
<li><a href="http://test.fhir.org/r4/Observation?_format=json&amp;_pretty=true&amp;_elements=value" target="_blank" title="http://test.fhir.org/r4/Observation?_format=json&amp;_pretty=true&amp;_elements=value">http://test.fhir.org/r4/Observation?_format=json&amp;_pretty=true&amp;_elements=value</a></li>
<li><a href="http://test.fhir.org/r4/Observation?_format=json&amp;_pretty=true&amp;_elements=valueQuantity" target="_blank" title="http://test.fhir.org/r4/Observation?_format=json&amp;_pretty=true&amp;_elements=valueQuantity">http://test.fhir.org/r4/Observation?_format=json&amp;_pretty=true&amp;_elements=valueQuantity</a></li>
<li><a href="http://test.fhir.org/r4/Observation?_format=json&amp;_pretty=true&amp;_elements=value[x]" target="_blank" title="http://test.fhir.org/r4/Observation?_format=json&amp;_pretty=true&amp;_elements=value[x]">http://test.fhir.org/r4/Observation?_format=json&amp;_pretty=true&amp;_elements=value[x]</a></li>
</ul>
<p>(And I can't figure out what does work.)</p>



<a name="182701762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182701762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182701762">(Dec 05 2019 at 20:47)</a>:</h4>
<p>nothing will for value - bug in my code generator</p>



<a name="182701777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182701777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182701777">(Dec 05 2019 at 20:47)</a>:</h4>
<p>OK, I'll add a Jira issue. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> for the record, is there a way to coax your server into returning Observation  via <code>_elements</code> ?</p>



<a name="182701779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182701779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182701779">(Dec 05 2019 at 20:47)</a>:</h4>
<p>Ah, OK.</p>



<a name="182701877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182701877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182701877">(Dec 05 2019 at 20:48)</a>:</h4>
<p>all the other elements should be bound by _summary, but choice elements are not</p>



<a name="182702066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182702066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182702066">(Dec 05 2019 at 20:50)</a>:</h4>
<p>Added <a href="http://jira.hl7.org/browse/FHIR-25279" target="_blank" title="http://jira.hl7.org/browse/FHIR-25279">J#25279</a></p>



<a name="182702106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182702106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182702106">(Dec 05 2019 at 20:50)</a>:</h4>
<p>(This is coming up because I've been noodling on how to express proactive policies about what queries to allow/deny for a given client. )</p>



<a name="182702540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182702540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182702540">(Dec 05 2019 at 20:54)</a>:</h4>
<p><code>_elements=value</code> on our server</p>



<a name="182703222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/182703222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#182703222">(Dec 05 2019 at 21:00)</a>:</h4>
<p>Also _elements=value on GCP. There's no way to ask for valueQuantity specifically and omit other types though, do people want that?</p>



<a name="183029746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20with%20_elements%20and%20choice%20types/near/183029746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20with.20_elements.20and.20choice.20types.html#183029746">(Dec 10 2019 at 05:09)</a>:</h4>
<p>Same on Aidbox. Just reminder  -  Observation.value.x would eliminate this problem. One logical inconsistency brings many anomalies.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
