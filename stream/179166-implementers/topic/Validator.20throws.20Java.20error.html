---
layout: page
title: "FHIR Chat  · Validator throws Java error · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html">Validator throws Java error</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153991634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153991634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153991634">(Aug 29 2018 at 16:04)</a>:</h4>
<p>When I install the "official" validator and try to validate a sample resource, Java throws an error. Here are the details. Any ideas? Java version issue?</p>
<p>PS C:\Program Files\FHIR&gt; ls</p>
<div class="codehilite"><pre><span></span>Directory: C:\Program Files\FHIR
</pre></div>


<p>Mode                LastWriteTime         Length Name<br>
----                -------------         ------ ----<br>
-a----        8/25/2018   3:16 PM          15767 ccda-samp-disc-sum.json<br>
-a----        8/27/2018   4:59 PM       35528413 org.hl7.fhir.validator.jar<br>
-a----        8/29/2018  11:18 AM           3874 pat-ex.xml<br>
-a----        8/29/2018   9:11 AM           3176 pt-123-json.txt<br>
-a----        8/27/2018   4:59 PM           3798 readme.txt<br>
-a----        8/29/2018  11:13 AM           2057 vx-allergy-123.json<br>
-a----        8/29/2018   9:14 AM           5589 vxvista-pt-123.json</p>
<p>PS C:\Program Files\FHIR&gt; java -jar org.hl7.fhir.validator.jar pat-ex.xml -version 3.0<br>
  .. connect to tx server @ <a href="http://tx.fhir.org/r4" target="_blank" title="http://tx.fhir.org/r4">http://tx.fhir.org/r4</a><br>
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space<br>
        at java.util.Arrays.copyOf(Unknown Source)<br>
        at java.lang.AbstractStringBuilder.ensureCapacityInternal(Unknown Source)<br>
        at java.lang.AbstractStringBuilder.append(Unknown Source)<br>
        at java.lang.StringBuilder.append(Unknown Source)<br>
        at org.hl7.fhir.utilities.TextFile.streamToString(TextFile.java:142)<br>
        at org.hl7.fhir.dstu3.formats.JsonParserBase.loadJson(JsonParserBase.java:159)<br>
        at org.hl7.fhir.dstu3.formats.JsonParserBase.parse(JsonParserBase.java:89)<br>
        at org.hl7.fhir.convertors.R3ToR4Loader.loadBundle(R3ToR4Loader.java:37)<br>
        at org.hl7.fhir.r4.context.SimpleWorkerContext.loadFromFileJson(SimpleWorkerContext.java:251)<br>
        at org.hl7.fhir.r4.context.SimpleWorkerContext.loadDefinitionItem(SimpleWorkerContext.java:199)<br>
        at org.hl7.fhir.r4.context.SimpleWorkerContext.fromDefinitions(SimpleWorkerContext.java:191)<br>
        at org.hl7.fhir.r4.validation.ValidationEngine.loadDefinitions(ValidationEngine.java:301)<br>
        at org.hl7.fhir.r4.validation.ValidationEngine.loadInitialDefinitions(ValidationEngine.java:263)<br>
        at org.hl7.fhir.r4.validation.ValidationEngine.&lt;init&gt;(ValidationEngine.java:288)<br>
        at org.hl7.fhir.r4.validation.Validator.main(Validator.java:337)<br>
PS C:\Program Files\FHIR&gt; java -version<br>
java version "1.8.0_181"<br>
Java(TM) SE Runtime Environment (build 1.8.0_181-b13)<br>
Java HotSpot(TM) Client VM (build 25.181-b13, mixed mode)<br>
PS C:\Program Files\FHIR&gt;</p>
<p>Much obliged for any guidance...</p>



<a name="153991635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153991635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153991635">(Aug 29 2018 at 16:07)</a>:</h4>
<p>As the error says, you're running out of memory.  You may need to experiment passing -Xmx parameter to specify the amount of memory.</p>



<a name="153991642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153991642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153991642">(Aug 29 2018 at 16:42)</a>:</h4>
<p>I've specified -Xms and -Xmx values up to 9G (I have ~10G free)... no difference. Would the Java version matter?</p>
<p>PS C:\Program Files\FHIR&gt; java -version<br>
java version "1.8.0_181"<br>
Java(TM) SE Runtime Environment (build 1.8.0_181-b13)<br>
Java HotSpot(TM) Client VM (build 25.181-b13, mixed mode)</p>



<a name="153991645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153991645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153991645">(Aug 29 2018 at 16:56)</a>:</h4>
<p>Can you share your instance?  I won't have a chance to dig into it today, but <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> might.</p>



<a name="153991646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153991646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153991646">(Aug 29 2018 at 17:02)</a>:</h4>
<p>It seems to happen with any instance. I'm just using <a href="http://build.fhir.org//patient-example.xml" target="_blank" title="http://build.fhir.org//patient-example.xml">http://build.fhir.org//patient-example.xml</a>, retrieved like this, as given in the validator documentation example:</p>
<p>wget <a href="http://build.fhir.org//patient-example.xml" target="_blank" title="http://build.fhir.org//patient-example.xml">http://build.fhir.org//patient-example.xml</a> -O pat-ex.xml</p>
<p>Thanks!</p>



<a name="153991649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153991649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153991649">(Aug 29 2018 at 17:04)</a>:</h4>
<p>And by "official" validator, you mean the one from <a href="http://build.fhir.org" target="_blank" title="http://build.fhir.org">http://build.fhir.org</a>?</p>



<a name="153991650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153991650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153991650">(Aug 29 2018 at 17:04)</a>:</h4>
<p>(The 'current' one)</p>



<a name="153991651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153991651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153991651">(Aug 29 2018 at 17:07)</a>:</h4>
<p>Correct.</p>



<a name="153991659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153991659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153991659">(Aug 29 2018 at 17:38)</a>:</h4>
<p>BTW, I'm following the examples at <a href="https://build.fhir.org/validation.html" target="_blank" title="https://build.fhir.org/validation.html">https://build.fhir.org/validation.html</a>.<br>
Also, when I try to validate against a remote resource, this ensues:<br>
PS C:\Users\mhenderson\FHIR&gt; java -jar org.hl7.fhir.validator.jar <a href="http://build.fhir.org///patient-example.html" target="_blank" title="http://build.fhir.org///patient-example.html">http://build.fhir.org///patient-example.html</a> -profile<br>
<a href="http://hl7.org/fhir/StructureDefinition/Patient" target="_blank" title="http://hl7.org/fhir/StructureDefinition/Patient">http://hl7.org/fhir/StructureDefinition/Patient</a><br>
  .. connect to tx server @ <a href="http://tx.fhir.org/r4" target="_blank" title="http://tx.fhir.org/r4">http://tx.fhir.org/r4</a><br>
Exception in thread "main" org.hl7.fhir.exceptions.FHIRException: Unable to resolve the package 'hl7.fhir.core-3.5.0'<br>
        at org.hl7.fhir.utilities.cache.PackageCacheManager.resolvePackage(PackageCacheManager.java:491)<br>
        at org.hl7.fhir.r4.validation.ValidationEngine.resolvePackage(ValidationEngine.java:541)<br>
        at org.hl7.fhir.r4.validation.ValidationEngine.fetchByPackage(ValidationEngine.java:530)<br>
        at org.hl7.fhir.r4.validation.ValidationEngine.loadIgSource(ValidationEngine.java:390)<br>
        at org.hl7.fhir.r4.validation.ValidationEngine.loadDefinitions(ValidationEngine.java:298)<br>
        at org.hl7.fhir.r4.validation.ValidationEngine.loadInitialDefinitions(ValidationEngine.java:263)<br>
        at org.hl7.fhir.r4.validation.ValidationEngine.&lt;init&gt;(ValidationEngine.java:288)<br>
        at org.hl7.fhir.r4.validation.Validator.main(Validator.java:337)</p>



<a name="153991663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153991663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153991663">(Aug 29 2018 at 17:45)</a>:</h4>
<p>Ah.  That's a Grahame issue.  Looks like we need to add an extra step to the "increment version" process.</p>



<a name="153992063"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153992063" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153992063">(Aug 30 2018 at 22:30)</a>:</h4>
<p>memory: make sure you pass -Xmx parameter before the .jar on the command line</p>



<a name="153992064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153992064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153992064">(Aug 30 2018 at 22:30)</a>:</h4>
<p>committing a fix for the definitions now - sorry I missed that.</p>



<a name="153992311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validator%20throws%20Java%20error/near/153992311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike Henderson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validator.20throws.20Java.20error.html#153992311">(Aug 31 2018 at 12:57)</a>:</h4>
<p>The right placement of the -Xmx parameter did the trick; thanks, Grahame and Lloyd!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
