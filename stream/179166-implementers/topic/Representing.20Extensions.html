---
layout: page
title: "FHIR Chat  · Representing Extensions · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html">Representing Extensions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153813896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813896">(Mar 04 2016 at 14:29)</a>:</h4>
<p>Can I perhaps direct your collective attention to a blog post by Marc Hadley, suggesting an alternate method of representing extensions? It is on <a href="http://lightmyfhir.org" target="_blank" title="http://lightmyfhir.org">lightmyfhir.org</a> (<a href="http://lightmyfhir.org/2016/02/26/an-alternate-xml-syntax-for-fhir-extensions" target="_blank" title="http://lightmyfhir.org/2016/02/26/an-alternate-xml-syntax-for-fhir-extensions">http://lightmyfhir.org/2016/02/26/an-alternate-xml-syntax-for-fhir-extensions</a>). I don't know if Marc's suggestion has gotten any eyeballs yet.  The post deals with XML, but we are also preparing a post with a JSON version. Marc did this in response to Grahame's call for feedback (see <a href="http://www.healthintersections.com.au/?p=2467" target="_blank" title="http://www.healthintersections.com.au/?p=2467">http://www.healthintersections.com.au/?p=2467</a>) so I hope some of you will have a look.</p>



<a name="153813900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813900">(Mar 04 2016 at 21:09)</a>:</h4>
<p>Thanks for the link <span class="user-mention" data-user-id="191447">@Mark Kramer</span> ! There was definitely <a href="http://wiki.hl7.org/index.php?title=FHIR_Extensions_Working_Page" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_Extensions_Working_Page">some discussion of namespaces</a> (see "Brian's Thoughts"). I'm interested to see <span class="user-mention" data-user-id="191438">@Marc Hadley</span>'s JSON-focused follow-up.</p>



<a name="153813921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813921">(Mar 05 2016 at 01:06)</a>:</h4>
<p>I do so abominate namespaces, but I will reserve further comment until I've seen the JSON representation</p>



<a name="153813922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813922">(Mar 05 2016 at 01:07)</a>:</h4>
<p>this would also be possible:</p>



<a name="153813923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813923">(Mar 05 2016 at 01:08)</a>:</h4>
<div class="codehilite"><pre>&lt;Patient
    xmlns=&quot;http://hl7.org/fhir&quot;
    xmlns:fhir=&quot;http://hl7.org/fhir&quot;&gt;
  &lt;id value=&quot;patient-example&quot;/&gt;
  ...
  &lt;ct:clinicalTrial
      xmlns:ct=&quot;http://hl7.org/fhir/StructureDefinition/patient-clinicalTrial&quot;
      fhir:isModifier=&quot;false&quot;&gt;
    &lt;ct:NCT xsi:type=&quot;string&quot; value=&quot;NCT01647425&quot;/&gt;
    &lt;ct:Period xsi:type=&quot;Period&quot;&gt;
      &lt;start value=&quot;2012-04-01&quot;/&gt;
      &lt;end value=&quot;2013-09-30&quot;/&gt;
    &lt;/ct:Period&gt;
    &lt;ct:Reason xsi:type=&quot;CodeableConcept&quot;&gt;
      &lt;coding&gt;
        &lt;system value=&quot;http://snomed.info/sct&quot;/&gt;
        &lt;code value=&quot;254637007&quot;/&gt;
        &lt;display value=&quot;NSCLC - Non-small cell lung cancer&quot;/&gt;
      &lt;/coding&gt;
    &lt;/ct:Reason&gt;
  &lt;/ct:clinicalTrial&gt;
  ...
&lt;/Patient&gt;
</pre></div>



<a name="153813924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813924">(Mar 05 2016 at 01:09)</a>:</h4>
<p>And: "Code generation still works, tools like JAXB have no problem with XML schemas that include extensions defined elsewhere"</p>



<a name="153813925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813925">(Mar 05 2016 at 01:10)</a>:</h4>
<p>is that true about lax? jaxb ignores anything in other namespaces, or it just blows up?</p>



<a name="153813926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813926">(Mar 05 2016 at 01:10)</a>:</h4>
<p>what about other code generators? </p>



<a name="153813927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813927">(Mar 05 2016 at 01:12)</a>:</h4>
<p>however, this explicitly breaks my most important requirement as I noted on a task on the original post, which has been ignored: all implementers can read and write all extensions when they generate code</p>



<a name="153813928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813928">(Mar 05 2016 at 01:13)</a>:</h4>
<p>as for: "I don't know if Marc's suggestion has gotten any eyeballs yet" - I hadn't seen it until you posted it here. Should I have seen it from elsewhere? </p>



<a name="153813972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813972">(Mar 05 2016 at 22:34)</a>:</h4>
<p>Grahame, thank you for the feedback. I don't understand what you mean by "breaks my most important requirement...all implementers can read and write all extensions when they generate code."  Can you explain the situation where you envision there being a problem? Why wouldn't they be able to read and write extensions under Marc's proposed representation?</p>



<a name="153813974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813974">(Mar 05 2016 at 23:02)</a>:</h4>
<p>I didn't mean to imply anything, just asking for feedback.</p>



<a name="153813982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153813982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153813982">(Mar 06 2016 at 08:06)</a>:</h4>
<p>hi Mark. In the approach you are proposing, If I generate code from the base schema, I'll lose all the extensions, yes?</p>



<a name="153814178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Prud&#x27;hommeaux <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814178">(Mar 07 2016 at 10:33)</a>:</h4>
<p>Grahame , when you say "generate code from the base schema", do you mean you want to use code that navigates exclusively the vocabulary defined in the schema to serialize extensions?</p>



<a name="153814189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814189">(Mar 07 2016 at 14:44)</a>:</h4>
<p>You wouldn't lose all of the extensions, at least you wouldn't if you were using JAXB. An xsd:any is mapped to a property of type Object[]. That array will be populated with either Element objects or instances of JAXB objects defined in extension schemas that were included in the JAXB context. See the examples here and the documentation of the lax annotation property: <a href="https://jaxb.java.net/nonav/2.1.3/docs/api/javax/xml/bind/annotation/XmlAnyElement.html" target="_blank" title="https://jaxb.java.net/nonav/2.1.3/docs/api/javax/xml/bind/annotation/XmlAnyElement.html">https://jaxb.java.net/nonav/2.1.3/docs/api/javax/xml/bind/annotation/XmlAnyElement.html</a>.</p>



<a name="153814190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814190">(Mar 07 2016 at 14:52)</a>:</h4>
<p>I posted the accompanying proposal for an alternate JSON syntax here: <a href="http://lightmyfhir.org/2016/03/07/an-alternate-json-syntax-for-fhir-extensions/" target="_blank" title="http://lightmyfhir.org/2016/03/07/an-alternate-json-syntax-for-fhir-extensions/">http://lightmyfhir.org/2016/03/07/an-alternate-json-syntax-for-fhir-extensions/</a></p>



<a name="153814192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814192">(Mar 07 2016 at 15:26)</a>:</h4>
<p>Hmm. This is sort of JSON-LD inspired, sure. You say that you have not adopted to JSON LD wholesale, but actually I think what you have proposed  here is not even quite compatible with that specification. Because you are relying on certain implicit behavior  to handle nested complex extensions. So you could not use a JSON LD library out of the box. Is that right?</p>



<a name="153814193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814193">(Mar 07 2016 at 15:41)</a>:</h4>
<p>That's right. Really the only part of JSON-LD used in this proposal is the namespacing of extension names.</p>



<a name="153814194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814194">(Mar 07 2016 at 15:42)</a>:</h4>
<p>That might confuse folks so it might be better to not use @context but rename it to @namespace or some such</p>



<a name="153814213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814213">(Mar 07 2016 at 19:05)</a>:</h4>
<p>note that RDF &lt;&gt; json-ld. We can't use json-ld</p>



<a name="153814214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814214">(Mar 07 2016 at 19:07)</a>:</h4>
<p>what's the scope of @context? There's a reason we studiously avoid manifests in HL7 content - you won't find it anywhere else</p>



<a name="153814215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814215">(Mar 07 2016 at 19:08)</a>:</h4>
<p>this question is a very big deal for me in with regard to this proposal </p>



<a name="153814216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814216">(Mar 07 2016 at 19:08)</a>:</h4>
<p>and relates directly to why we can't use json-ld</p>



<a name="153814217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814217">(Mar 07 2016 at 19:09)</a>:</h4>
<p>note that we could also move the type into the manifest too</p>



<a name="153814269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814269">(Mar 07 2016 at 21:30)</a>:</h4>
<p>anyway, I think you should be narrow, and call this @extension and way that the extension definition applies to siblings of the element on which it is declared, and on all children, but *not* on parents or siblings of parents (e.g. same scope as xml namespaces)</p>



<a name="153814270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814270">(Mar 07 2016 at 21:30)</a>:</h4>
<p>.. and say.. not .. and way... (don't know why I can't edit that one)</p>



<a name="153814278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814278">(Mar 07 2016 at 21:43)</a>:</h4>
<p>Grahame,  agreed. I'd go a bit further and say that definitions do not apply to grandchildren or their descendants. If, e.g. I define a "code" extension that shouldn't apply to any deeper scoped use of that name as those are already defined by the semantics of the parent.</p>



<a name="153814279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814279">(Mar 07 2016 at 21:44)</a>:</h4>
<p>have to repeat the extension definition ad nauseam?</p>



<a name="153814280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814280">(Mar 07 2016 at 21:45)</a>:</h4>
<p>IOW, the @extension just applies to the extensions at this level. If you extend extensions then you need to add in a new @extension to identify the extensions extension.</p>



<a name="153814281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814281">(Mar 07 2016 at 21:46)</a>:</h4>
<p>I'm thinking of the case .. in code system and questionaire .. where concepts contain concepts and questions contain questions</p>



<a name="153814282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814282">(Mar 07 2016 at 21:46)</a>:</h4>
<p>I feel another example coming on...</p>



<a name="153814283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814283">(Mar 07 2016 at 21:46)</a>:</h4>
<p>if you use an extension on a concept, you're likely to use them on contained concepts too </p>



<a name="153814284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814284">(Mar 07 2016 at 21:47)</a>:</h4>
<p>Good point. I think there are pros and cons here.</p>



<a name="153814291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814291">(Mar 07 2016 at 22:02)</a>:</h4>
<p>Maybe we could say that the @extension defines names of extensions but doesn't override existing properties with the same name.</p>



<a name="153814292"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814292" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814292">(Mar 07 2016 at 22:08)</a>:</h4>
<p>yes it sure can't do that. Wonder if there's naming restrictions we would need to ensure that you don't create name clashes</p>



<a name="153814307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814307">(Mar 08 2016 at 01:52)</a>:</h4>
<p>Marc, thinking more about this- I think this has real problems</p>



<a name="153814308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814308">(Mar 08 2016 at 01:52)</a>:</h4>
<div class="codehilite"><pre>patient = {...second example above...}
nct = patient[&quot;patient-clinicalTrial&quot;].NCT.valueString
</pre></div>



<a name="153814310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814310">(Mar 08 2016 at 01:53)</a>:</h4>
<p>only, you can't. you actually have a much worse problem than that the original code  </p>



<a name="153814311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814311">(Mar 08 2016 at 01:55)</a>:</h4>
<div class="codehilite"><pre>patient = {...first example above...}
clinicalTrials = element for name as found in @context @id is &quot;http://hl7.org/fhir/StructureDefinition/patient-clinicalTrial&quot;
nct = nct.clinicalTrails.valueString
</pre></div>



<a name="153814312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814312">(Mar 08 2016 at 01:55)</a>:</h4>
<p>e.g. we would be subsituting looking up the extension for looking up the name gained by looking up the extension. I think this is worse, not better</p>



<a name="153814339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814339">(Mar 08 2016 at 10:57)</a>:</h4>
<p>I just re-read all the blog posts. I think I now understand what you think you mean by 'treat extensions and normal elements the same' and, I'm afraid, you won't be able to treat them the same - and, in fact, you haven't even started to do so. They're different. Sorry</p>



<a name="153814384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814384">(Mar 08 2016 at 12:57)</a>:</h4>
<p>I see what you are getting at, but I still think its better. Compare:</p>



<a name="153814385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814385">(Mar 08 2016 at 12:58)</a>:</h4>
<div class="codehilite"><pre>clinicalTrials = (extension for extension in patient.extension when extension.url is &quot;http://hl7.org/fhir/StructureDefinition/patient-clinicalTrial&quot;)
ncts = (extension for extension in clinicalTrials[0].extension when extension.url is &quot;NCT&quot;)
nct = ncts[0].valueString
</pre></div>



<a name="153814386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814386">(Mar 08 2016 at 12:58)</a>:</h4>
<p>vs</p>



<a name="153814387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814387">(Mar 08 2016 at 12:59)</a>:</h4>
<div class="codehilite"><pre>localname = (localname for localname, defn of patient2[&quot;@context&quot;] when defn[&quot;@id&quot;] is &quot;http://hl7.org/fhir/StructureDefinition/patient-clinicalTrial&quot;)[0]
nct = patient2[localname].NCT.valueString
</pre></div>



<a name="153814388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814388">(Mar 08 2016 at 13:00)</a>:</h4>
<p>so you made complex extensions slightly easier at the price of making simple extensions harder</p>



<a name="153814389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814389">(Mar 08 2016 at 13:00)</a>:</h4>
<p>(the second being the proposed, the first being current)</p>



<a name="153814390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814390">(Mar 08 2016 at 13:01)</a>:</h4>
<p>and it's unsafe, since almost all javascript programmers will refuse to use that method, and just use the 'fixed' name, only it's not fixed, and can't be </p>



<a name="153814392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814392">(Mar 08 2016 at 13:01)</a>:</h4>
<p>Are simple extensions actually harder though? With the current representation you still have to loop over an array looking for the one you want.</p>



<a name="153814395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814395">(Mar 08 2016 at 13:02)</a>:</h4>
<p>here, you have a double loop </p>



<a name="153814396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814396">(Mar 08 2016 at 13:02)</a>:</h4>
<p>to get the name you want. </p>



<a name="153814397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814397">(Mar 08 2016 at 13:02)</a>:</h4>
<p>then use it </p>



<a name="153814398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814398">(Mar 08 2016 at 13:02)</a>:</h4>
<p>as opposed to just looking for the extension you want</p>



<a name="153814399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814399">(Mar 08 2016 at 13:03)</a>:</h4>
<p>There's only one loop</p>



<a name="153814401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814401">(Mar 08 2016 at 13:03)</a>:</h4>
<p>this is much harder than simply using the full extension name as the property, which was roundly rejected when we tried that </p>



<a name="153814406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814406">(Mar 08 2016 at 13:04)</a>:</h4>
<p>The other approach would be to move further away from JSON-LD and invert the extension map to put URI as the key then its just map lookups all the way</p>



<a name="153814408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814408">(Mar 08 2016 at 13:05)</a>:</h4>
<p>I think that's what we tried. As simple as we could. and it got voted down strongly</p>



<a name="153814409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814409">(Mar 08 2016 at 13:05)</a>:</h4>
<p>it wasn't perfect; we still had to deal with modifier extensions. </p>



<a name="153814410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814410">(Mar 08 2016 at 13:05)</a>:</h4>
<p>so I'm skeptical. I think </p>



<a name="153814411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814411">(Mar 08 2016 at 13:05)</a>:</h4>
<p>I included modifiers in my proposal</p>



<a name="153814412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814412">(Mar 08 2016 at 13:05)</a>:</h4>
<p>but lets see other opinions</p>



<a name="153814416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814416">(Mar 08 2016 at 13:06)</a>:</h4>
<p>Example:</p>
<div class="codehilite"><pre>patient = {
  &quot;@extension&quot; : {
    &quot;http://hl7.org/fhir/StructureDefinition/patient-clinicalTrial&quot;: {
      &quot;@localname&quot;: &quot;clinicalTrial&quot;,
      &quot;@isModifier&quot;: false
    }
  }
  &quot;resourceType&quot; : &quot;Patient&quot;,
  &quot;clinicalTrial&quot; : {
    &quot;NCT&quot; : {
      &quot;valueString&quot; : &quot;123456789&quot;
    },
    &quot;period&quot;: { 
      &quot;valuePeriod&quot; : {
         &quot;start&quot; : &quot;2009-03-14&quot; 
      }   
    },
    &quot;reason&quot;: {
      &quot;valueCodeableConcept&quot; : {
          &quot;coding&quot; : {
             &quot;system&quot; : &quot;http://acme.org/codes/general&quot;,
             &quot;code&quot; : &quot;tt14j&quot;
          }
       }
    }
  }
}
</pre></div>



<a name="153814418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814418">(Mar 08 2016 at 13:07)</a>:</h4>
<p>so I still iterate the @extension, which needs to be an array, right? and then find the name then look for then name... why not just iterate the extensions? </p>



<a name="153814420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814420">(Mar 08 2016 at 13:08)</a>:</h4>
<div class="codehilite"><pre>localname = patient[&quot;@extension&quot;][&quot;@localname&quot;]
nct = patient[localname].NCT.valueString
</pre></div>



<a name="153814422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814422">(Mar 08 2016 at 13:09)</a>:</h4>
<p>@extension is an object since the keys are unique</p>



<a name="153814424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814424">(Mar 08 2016 at 13:10)</a>:</h4>
<p>so you can only have one extension on an element at once? </p>



<a name="153814425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814425">(Mar 08 2016 at 13:10)</a>:</h4>
<p>one @extension with multiple children, one per extension</p>



<a name="153814427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814427">(Mar 08 2016 at 13:12)</a>:</h4>
<p>remind me, what happens in javascript, if the extension is not defined, or not present, and you use the code above?</p>



<a name="153814430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814430">(Mar 08 2016 at 13:13)</a>:</h4>
<div class="codehilite"><pre>&quot;@extension&quot; : {
  &quot;http://hl7.org/fhir/StructureDefinition/patient-clinicalTrial&quot;: {
    &quot;@localname&quot;: &quot;clinicalTrial&quot;,
    &quot;@isModifier&quot;: false
  }
  &quot;http://hl7.org/fhir/StructureDefinition/us-core-race&quot;: {
    &quot;@localname&quot;: &quot;race&quot;,
    &quot;@isModifier&quot;: false
  }
}
</pre></div>



<a name="153814435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814435">(Mar 08 2016 at 13:16)</a>:</h4>
<p>Just realized I messed up the code there, should have been:</p>
<div class="codehilite"><pre>localname = patient[&quot;@extension&quot;][&quot;http://hl7.org/fhir/StructureDefinition/patient-clinicalTrial&quot;][&quot;@localname&quot;]
nct = patient[localname].NCT.valueString
</pre></div>



<a name="153814437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814437">(Mar 08 2016 at 13:17)</a>:</h4>
<p>In this code if there's no @extension then you'd get back undefined which would throw a TypeError when you tried to get the local name property</p>



<a name="153814438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814438">(Mar 08 2016 at 13:18)</a>:</h4>
<p>so the code is going to get more complex yet</p>



<a name="153814439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814439">(Mar 08 2016 at 13:18)</a>:</h4>
<p>Same goes for the current representation, I didn't put any error handling in that either</p>



<a name="153814440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814440">(Mar 08 2016 at 13:20)</a>:</h4>
<p>well, the loop form is kind of more tolerant of missing items by it's nature. kind of </p>



<a name="153814441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814441">(Mar 08 2016 at 13:20)</a>:</h4>
<p>I'm still not persauded. but it's sleep time, and so I'll see what others think</p>



<a name="153814444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814444">(Mar 08 2016 at 13:27)</a>:</h4>
<p>Personally I think the loop code is more complicated. A robust implementation has to handle missing and duplicate entries etc. My short code snippet just assumes there is one extension with the right URL and that it has one child extension for NCT (hence the [0] in a couple of places). These would blow the code up if the assumptions failed.</p>



<a name="153814445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814445">(Mar 08 2016 at 13:31)</a>:</h4>
<p>BTW, a more robust code snippet in CoffeeScript:</p>
<div class="codehilite"><pre>localname = patient[&quot;@extension&quot;]?[&quot;http://hl7.org/fhir/StructureDefinition/patient-clinicalTrial&quot;]?[&quot;@localname&quot;]
nct = patient[localname]?.NCT?.valueString
</pre></div>


<p>this yields <code>undefined</code> for <code>nct</code> if anything is missing</p>



<a name="153814456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814456">(Mar 08 2016 at 15:48)</a>:</h4>
<p>Three concerns with the XML approach: <br>
- xs:ANY is going to encourage people to send any XML they can dream up - including attributes and attributes with namespaces and other things that can't be round-tripped to JSON.  We could introduce invariants, but it'd be complicated<br>
- it's harder for people to handle extensions generically.  There are times when you want to take all extensions and store them in a single way or to count them.  (E.g. If you've got narrative that was generated from extensions, you want to quickly scan through all of the extension elements to see which ones you recognize)<br>
- (minor) HL7-defined extensions would need a distinct namespace from the base spec, which makes resolving them to html more complicated</p>
<p>I share Grahame's concerns about the JSON.  I see a lot of implementers taking the easy (wrong) route.</p>



<a name="153814463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814463">(Mar 08 2016 at 18:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> could you give an example of what you mean by invariants in your first bullet above?</p>



<a name="153814466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814466">(Mar 08 2016 at 18:38)</a>:</h4>
<p>Well, we could have an invariant as an xpath that indicated that only specific attributes are allowed.  E.g. context = @*, assertion name=('id', ...)</p>
<p>However, that won't work as a FHIRPath because FHIRPath doesn't distinguish elements and attributes.  So we might actually allow a new element on StructureDefinition to support doing this.</p>



<a name="153814473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814473">(Mar 08 2016 at 18:59)</a>:</h4>
<p>HL7 defined extensions - that's a problem, because they're in the same namespace</p>



<a name="153814474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814474">(Mar 08 2016 at 18:59)</a>:</h4>
<p>I missed that</p>



<a name="153814484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814484">(Mar 08 2016 at 19:11)</a>:</h4>
<p>Do they have to be in the same namespace? Possible to add some kind of ns suffix like /extension ?</p>



<a name="153814485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814485">(Mar 08 2016 at 19:12)</a>:</h4>
<p>no, they're not. scratch that. They are in a differnt namespace (just same root)</p>



<a name="153814491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814491">(Mar 08 2016 at 19:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> does the @context/@extension preamble meet your requirements for identifying extensions in the JSON format? Not sure of the best way to do that for XML, would prefer to avoid a wrapper element if possible.</p>



<a name="153814498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814498">(Mar 08 2016 at 20:53)</a>:</h4>
<p>Easy enough in XPath I guess: <code>/*/*[namespace-uri(.)!="http://hl7.org/fhir"]</code></p>



<a name="153814501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814501">(Mar 08 2016 at 21:02)</a>:</h4>
<p>I think you'd skip one of the /*, because you'd want direct children, but yes, that could work.   @context doesn't work terribly well if it appears as a manifest at the top of the instance.  It would need to be declared inside each node where extensions appear.</p>



<a name="153814502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814502">(Mar 08 2016 at 21:05)</a>:</h4>
<p>The first /* was to match any top level resource. Your use case is to find all extensions at any level or just those at the top level?</p>



<a name="153814503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814503">(Mar 08 2016 at 21:05)</a>:</h4>
<p>The use-case is to find extensions for the current node</p>



<a name="153814504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814504">(Mar 08 2016 at 21:06)</a>:</h4>
<p>so <code>./*[namespace-uri(.)!="http://hl7.org/fhir"]</code> in XPath.</p>



<a name="153814505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814505">(Mar 08 2016 at 21:09)</a>:</h4>
<p>We didn't settle on scoping of @context/@extension, I was advocating for one per level of nesting but Grahame pointed out that would be a pain for extensions to types that nest.</p>



<a name="153814506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814506">(Mar 08 2016 at 21:20)</a>:</h4>
<p>Manifests are a pain in general - they're either all over the place or they aren't in the context where you need them.  Hard to find the right balance.</p>



<a name="153814581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814581">(Mar 09 2016 at 16:27)</a>:</h4>
<p>... or they are out of step with the actual content</p>



<a name="153814582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814582">(Mar 09 2016 at 16:33)</a>:</h4>
<p>Yeah, that can be a challenge too.</p>



<a name="153814595"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814595" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814595">(Mar 09 2016 at 17:22)</a>:</h4>
<p>You have to spell things out for me. I'm assuming you are referring to code generated at design time. At that time, there are no instances of resources, and no instances of extensions, so how can extensions they be lost?  There are StructureDefinitions, but one can't assume a full set. Nonetheless, you can still parse and store whatever comes down the wire under our suggestion. You just don't know what the extensions mean, necessarily. I must be totally missing your point.</p>



<a name="153814599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814599">(Mar 09 2016 at 18:44)</a>:</h4>
<p>The code written for processing an instance needs to be able to  easily find the list of all extensions beneath a particular node.  We have a solution that works for XML.  The solution works for JSON only if the context is declared on every node (including recursive nodes.</p>



<a name="153814601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814601">(Mar 09 2016 at 18:48)</a>:</h4>
<p>One of the concerns with the proposed JSON representation is that the "local name" in JSON is essentially insignificant but naive developers might assume that it is fixed and ignore the mapping to a URI. I'm wondering if the team considered using qualified names to disambiguate local names, e.g.:</p>
<div class="codehilite"><pre>patient = {
  &quot;resourceType&quot; : &quot;Patient&quot;,
  &quot;org.hl7.clinicalTrial&quot; : {
    &quot;@extension&quot;: &quot;http://hl7.org/fhir/StructureDefinition/patient-clinicalTrial&quot;,
    &quot;@isModifier&quot;: false
    &quot;NCT&quot; : {
      &quot;valueString&quot; : &quot;123456789&quot;
    },
    &quot;period&quot;: { 
      &quot;valuePeriod&quot; : {
         &quot;start&quot; : &quot;2009-03-14&quot; 
      }   
    },
    &quot;reason&quot;: {
      &quot;valueCodeableConcept&quot; : {
          &quot;coding&quot; : {
             &quot;system&quot; : &quot;http://acme.org/codes/general&quot;,
             &quot;code&quot; : &quot;tt14j&quot;
          }
       }
    }
  }
}
</pre></div>



<a name="153814602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814602">(Mar 09 2016 at 18:49)</a>:</h4>
<p>The above also breaks up the manifest and puts the extension id as a child of the top level extension (just like you use url in the current representation).</p>



<a name="153814603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814603">(Mar 09 2016 at 18:50)</a>:</h4>
<p>How would you make those globally unique if they weren't a URI?  And why have both?</p>



<a name="153814604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814604">(Mar 09 2016 at 18:50)</a>:</h4>
<p>I used a java-like <code>org.hl7.clinicalTrial</code> but other naming schemes could work just as well.</p>



<a name="153814605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814605">(Mar 09 2016 at 18:51)</a>:</h4>
<p>It seems weird to have two globally unique names</p>



<a name="153814606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814606">(Mar 09 2016 at 18:51)</a>:</h4>
<p>OIDs are globally unique without being URIs...</p>



<a name="153814607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814607">(Mar 09 2016 at 18:51)</a>:</h4>
<p>Right.  But we don't use OIDs</p>



<a name="153814608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814608">(Mar 09 2016 at 18:51)</a>:</h4>
<p>I think you mentioned earlier that developers didn't like using URIs as keys</p>



<a name="153814609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814609">(Mar 09 2016 at 18:52)</a>:</h4>
<p>Right.  They didn't like long strings as keys.</p>



<a name="153814610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814610">(Mar 09 2016 at 18:52)</a>:</h4>
<p>OIDs can be URIs. urn:oid:OID-HERE</p>



<a name="153814611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814611">(Mar 09 2016 at 18:52)</a>:</h4>
<p>And this isn't going to be significantly shorter than the URL and would also be redundant with the URL.</p>



<a name="153814612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814612">(Mar 09 2016 at 18:53)</a>:</h4>
<p><code>org.hl7.clinicalTrial</code> is intended to work like an old, the authority <code>org.hl7</code> is the only org that can use ids starting with that string and is responsible for ensuring uniqueness.</p>



<a name="153814613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814613">(Mar 09 2016 at 18:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191407">@Rick Geimer</span> True, but we discourage doing that.  (And avoid doing it for anything HL7 Int'l is responsible for)</p>



<a name="153814614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814614">(Mar 09 2016 at 18:53)</a>:</h4>
<p>But in general I find my developers like the URIs with somewhat meaningful names. </p>



<a name="153814615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814615">(Mar 09 2016 at 18:54)</a>:</h4>
<p>And it's easier to teach someone to make up a URI for their company's patient IDs or internal codes than it is to ask them to get an OID from HL7. </p>



<a name="153814616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814616">(Mar 09 2016 at 18:54)</a>:</h4>
<p>Especially now that they have to pay for the privilege of an OID once they've wrapped their heads around what it is . . .</p>



<a name="153814617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814617">(Mar 09 2016 at 18:54)</a>:</h4>
<p>I'd actually be OK with using URIs for keys like this:</p>
<div class="codehilite"><pre>patient = {
  &quot;resourceType&quot; : &quot;Patient&quot;,
  &quot;http://hl7.org/fhir/StructureDefinition/patient-clinicalTrial&quot; : {
    &quot;@isModifier&quot;: false
    &quot;NCT&quot; : {
      &quot;valueString&quot; : &quot;123456789&quot;
    },
    &quot;period&quot;: { 
      &quot;valuePeriod&quot; : {
         &quot;start&quot; : &quot;2009-03-14&quot; 
      }   
    },
    &quot;reason&quot;: {
      &quot;valueCodeableConcept&quot; : {
          &quot;coding&quot; : {
             &quot;system&quot; : &quot;http://acme.org/codes/general&quot;,
             &quot;code&quot; : &quot;tt14j&quot;
          }
       }
    }
  }
}
</pre></div>


<p>but I didn't suggest it as I thought that was already rejected</p>



<a name="153814618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814618">(Mar 09 2016 at 18:56)</a>:</h4>
<p>Exactly Lloyd. </p>



<a name="153814620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814620">(Mar 09 2016 at 19:00)</a>:</h4>
<p>If we want a short globally unique name there aren't many alternatives to some kind of naming convention like that used in Java.</p>



<a name="153814636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814636">(Mar 09 2016 at 20:39)</a>:</h4>
<p>Marc - indeed that was already rejected, and I think it's better than your proposal. </p>



<a name="153814637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814637">(Mar 09 2016 at 20:39)</a>:</h4>
<p>which suggests to me that all this discussion is actually moot. :-(</p>



<a name="153814639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814639">(Mar 09 2016 at 20:42)</a>:</h4>
<p>and it wasn't rejected because they were long, but because it deviated from the conceptual model which creates cognitive dissonance. </p>



<a name="153814648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814648">(Mar 09 2016 at 21:01)</a>:</h4>
<p>Grahame, I'm coming to the same conclusion but before I give up can you explain what you mean by "deviated from the conceptual model" - what conceptual model is that, where can I read about it?</p>



<a name="153814770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814770">(Mar 10 2016 at 15:29)</a>:</h4>
<p>Still noodling on this as I'm convinced we can get to a more readable/natural representation that the current one. How about the following:</p>
<div class="codehilite"><pre>{
  &quot;resourceType&quot; : &quot;Patient&quot;,
  &quot;extension&quot; : [
    {
      &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/patient-clinicalTrial&quot;,
      &quot;isModifier&quot;: false
      &quot;NCT&quot; : {
        &quot;valueString&quot; : &quot;123456789&quot;
      },
      &quot;period&quot;: { 
        &quot;valuePeriod&quot; : {
           &quot;start&quot; : &quot;2009-03-14&quot; 
        }   
      },
      &quot;reason&quot;: {
        &quot;valueCodeableConcept&quot; : {
            &quot;coding&quot; : {
               &quot;system&quot; : &quot;http://acme.org/codes/general&quot;,
               &quot;code&quot; : &quot;tt14j&quot;
            }
         }
      }
    }
  ]
}
</pre></div>



<a name="153814771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814771">(Mar 10 2016 at 15:31)</a>:</h4>
<p>This is quite close to the current representation in that all extensions live in an array and are identified by url. The key difference is that the members of a complex extension (e.g. NCT) are first class children of the extension rather than being nested extensions. You could still add nested extensions as you would now but at least code that understands an extension could path into it directly rather than doing a loop comprehension over the nested extensions.</p>



<a name="153814772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814772">(Mar 10 2016 at 15:43)</a>:</h4>
<p>And you'd say: to identify the properties in a complex extension, look for all properties within an extension <strong>other than</strong> <code>url</code>, <code>isModifier</code>, <code>extension</code> and <code>modifierExtension</code>?</p>



<a name="153814774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814774">(Mar 10 2016 at 15:47)</a>:</h4>
<p>You could do that. I was kind of assuming that if you know the extension then you know the properties you are expecting. If you don't know the extension and just want to treat it generically then you can treat all the properties generically.</p>



<a name="153814775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814775">(Mar 10 2016 at 15:53)</a>:</h4>
<p>Agreed, if you "know" the extension you just examine and use the properties you know. That generic treatment is what I was trying to understand/specify.</p>



<a name="153814776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814776">(Mar 10 2016 at 15:54)</a>:</h4>
<p>IOW, if my code knows about the clinical trial extension then it know that there should be an NCT property. Same as if my code knows how to work with Patient resources it knows to expect names and telecoms etc. This is what we meant by treating extensions the same as core elements in our proposed requirements. </p>



<a name="153814777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814777">(Mar 10 2016 at 15:54)</a>:</h4>
<p>i.e. what would the "generic treatment" algorithm look like?</p>



<a name="153814779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814779">(Mar 10 2016 at 15:55)</a>:</h4>
<p>What is your generic treatment algorithm intended to accomplish?</p>



<a name="153814780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814780">(Mar 10 2016 at 16:03)</a>:</h4>
<p>For example, you'd want a generic algorithm that could convert from JSON to XML.</p>



<a name="153814781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814781">(Mar 10 2016 at 16:03)</a>:</h4>
<p>Or one that could display relevant details to a human when you don't know how to compute on an extension. </p>



<a name="153814782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814782">(Mar 10 2016 at 16:11)</a>:</h4>
<p>If we went this route we'd need to figure out the corresponding XML representation. Without giving it too much thought I think we could go with a top level extension element with local name extension and ns URI corresponding to the structure def URL. You'd map properties other than url, isModifier to child elements and map isModifier to an attribute on the extension element.</p>



<a name="153814783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814783">(Mar 10 2016 at 16:12)</a>:</h4>
<p>Yes -- this is the kind of stuff I mean :-)</p>



<a name="153814784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814784">(Mar 10 2016 at 16:13)</a>:</h4>
<p>For human readable display then you can map the JSON to some kind of HTML view of the content, kind of the way Java IDEs display JavaBeans.</p>



<a name="153814785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814785">(Mar 10 2016 at 16:14)</a>:</h4>
<p>Having regular local names rather than URLs would help I think</p>



<a name="153814786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814786">(Mar 10 2016 at 16:16)</a>:</h4>
<p>Quite. I like this, for what it's worth. </p>



<a name="153814787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814787">(Mar 10 2016 at 16:17)</a>:</h4>
<p>How would you distinguish arrays vs. single values?</p>



<a name="153814788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814788">(Mar 10 2016 at 16:17)</a>:</h4>
<p>(In a way that allows round-tripping with XML, "generically").</p>



<a name="153814789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814789">(Mar 10 2016 at 16:19)</a>:</h4>
<p>If the property cardinality is &gt; 1 then always use an array in JSON, use repeating elements in XML.</p>



<a name="153814790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814790">(Mar 10 2016 at 16:20)</a>:</h4>
<p>so if NCT were multivalued then the value would be an array of objects, each with a single valueString property.</p>



<a name="153814803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814803">(Mar 10 2016 at 17:09)</a>:</h4>
<blockquote>
<p>If the property cardinality is &gt; 1 then always use an array in JSON, use repeating elements in XML.</p>
</blockquote>
<p>The concern  with this rule is that you can't tell from the XML how to generate the JSON (you see one element, but maybe it's a repeating list that just happens to have one member in this particular instance).</p>



<a name="153814863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814863">(Mar 10 2016 at 20:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span>  Yes that's an issue. Two alternatives are to always use arrays or to use an array when there is more than one value. The former would be unfortunate if the goal is to make the JSON more natural, the latter adds complexity since code needs to handle both cases whenever a field can have more than one value.</p>



<a name="153814864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814864">(Mar 10 2016 at 20:06)</a>:</h4>
<p>Right. The third option is adding an <code>isArray="true"</code> attribute to the XML.</p>



<a name="153814865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814865">(Mar 10 2016 at 20:07)</a>:</h4>
<p>I would never agree to 'use an array when there is more than one value' - in one short step, you destroy the value proposition completely </p>



<a name="153814866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814866">(Mar 10 2016 at 20:07)</a>:</h4>
<p>When we've discussed this before, we have generally reluctantly come around to adding metadata to xml, but that's going to problematic </p>



<a name="153814867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814867">(Mar 10 2016 at 20:08)</a>:</h4>
<p>I'm not feeling great about the course of this discussion; it seems to me that we haevn't begun to have the kind of wider discussion that would get this through ballot. Irrespective of the technical merits of any of the proposals. </p>



<a name="153814871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814871">(Mar 10 2016 at 20:11)</a>:</h4>
<p>Any suggestions to get wider input? I'd be happy to write up a new blog post that captures the essence of the discussion so far and shows a couple of examples of the latest proposal.</p>



<a name="153814873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814873">(Mar 10 2016 at 20:13)</a>:</h4>
<p>well, we're discussing it here - a very few of us. I've had some out of band comments about the discussion but they haven't indicated that people are afraid of the discussion, just the possible outcome. and we've emailed the list, and you've blogged about it. So there's nothing methodological that we haven't done that we usually do. It's just not getting traction with people</p>



<a name="153814874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814874">(Mar 10 2016 at 20:14)</a>:</h4>
<p>I've done what I can to prod things gently. I could be less gentle, I guess, but I'm not sure it's worth doing that</p>



<a name="153814884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc Hadley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814884">(Mar 10 2016 at 20:38)</a>:</h4>
<p>Looks like there are very few complex extensions currently and for simple extensions I think the current format is OK. It wasn't until we tried to build the first round of CDS extensions with multiple levels of nested extensions that it really occurred to me that a better representation was needed.</p>



<a name="153814885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814885">(Mar 10 2016 at 20:39)</a>:</h4>
<p>+1 I'm with you on this, <span class="user-mention" data-user-id="191438">@Marc Hadley</span> </p>



<a name="153814888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814888">(Mar 10 2016 at 21:10)</a>:</h4>
<p>yes that's not unreasonable. But CDS extensions on Basic weren't really what we designed extensions for</p>



<a name="153814889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814889">(Mar 10 2016 at 21:11)</a>:</h4>
<p>ad-hoc extensions to well understood contents is a totally different ball game to taking basic and building a whole set of stuff on it. I looked at that stuff and winced. But not because of syntax, but because other decisions forced us to that point. </p>



<a name="153814890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814890">(Mar 10 2016 at 21:13)</a>:</h4>
<p>Speaking of extensions, I'm working on a CDS app using FHIR that is planning on using extensions to represent relative timings in Order Sets (where there's structure to when actions should be performed, but the start date / patient isn't known). Is there a particular way you all would recommend structuring that, or do you know if there are any modifications to Timing coming down the pipe?</p>



<a name="153814891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814891">(Mar 10 2016 at 21:13)</a>:</h4>
<p>True, they weren't designed for Basic, but my perception is that there aren't a whole lot of complex extensions out in the wild yet, but I expect that over time there will be. So, fixing complex extensions now  to make them easier and nice forever more makes sense.</p>



<a name="153814893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814893">(Mar 10 2016 at 21:16)</a>:</h4>
<p>There is always proposals to extend the timing data type to make the timing relative to some arbitrary event, but the nature of the event and the linkage vary wildly. So we don't think that putting these details in TIming make sense - we think that this is something that belongs on the context where it is used. At least, that's what I think, and the analysis of reuqirements is certainly wildy variant</p>



<a name="153814894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814894">(Mar 10 2016 at 21:18)</a>:</h4>
<p>jason - maybe.. but I think they are already easy and nice. Or to be more clear, what we have now is a compromise between 'easy and nice' from various perspectives, and it's not clear that the alternatives we've discussed here represent a more optimal approach overall than the current arrangement</p>



<a name="153814899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814899">(Mar 10 2016 at 21:20)</a>:</h4>
<p>@Andrew, we are working on modeling exactly that relationship between elements within the OrderSet resource. Agree with Grahame that the relationships should be stated at the container, rather than on the Timing element directly.</p>



<a name="153814902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814902">(Mar 10 2016 at 21:21)</a>:</h4>
<p>ok, that's good to hear. If you have any examples of what you're thinking so far, or if you have an estimate of the timing (no pun intended) when you think that would be released, it would be great to know</p>



<a name="153814908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814908">(Mar 10 2016 at 21:22)</a>:</h4>
<p>we're hoping that our system will integrate with multiple others, so we can't just make an ad-hoc agreement with one</p>



<a name="153814929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814929">(Mar 10 2016 at 22:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191516">@Andrew Ross</span> I'll get an example over the next few days. Agree about one way to do it, we're putting this in the OrderSet resource itself, it won't be an extension (so it's probably not an appropriate topic for this stream anymore :)).</p>



<a name="153814933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153814933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Ross <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153814933">(Mar 10 2016 at 22:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> awesome :) i appreciate it!</p>



<a name="153815429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153815429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153815429">(Mar 14 2016 at 17:14)</a>:</h4>
<p>I personally did not mind the &gt; year old proposal for Json to have the extension url as the object member name, and I think these discussions have converged on that format again. I was at the meeting (it was the connectathon actually) where that extension format was voted down. I also would not mind having "repeat=yes" attribute or whatever in the xml to make interconversion easier.</p>



<a name="153815440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153815440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153815440">(Mar 14 2016 at 18:15)</a>:</h4>
<p>The main problem I'd have with URLs as object property name is that it "breaks" the JS in JSON, since you can't have property names with <code>/</code> and <code>.</code> in JS.</p>



<a name="153815442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153815442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153815442">(Mar 14 2016 at 18:18)</a>:</h4>
<p>Well, you can't address those properties with the <code>.</code> operation. You can, of course, with quotes, as in :</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;simple&quot;</span><span class="o">:</span> <span class="s2">&quot;as&quot;</span><span class="p">,</span>
  <span class="s2">&quot;can/be&quot;</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">simple</span><span class="p">,</span> <span class="nx">a</span><span class="p">[</span><span class="s2">&quot;can/be&quot;</span><span class="p">]);</span>
</pre></div>


<p>(I know this is already clear to <span class="user-mention" data-user-id="191339">@Pascal Pfiffner</span>. I'm just being explicit/pedantic here.)</p>



<a name="153815443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153815443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153815443">(Mar 14 2016 at 18:20)</a>:</h4>
<p>Agreed, my argument comes purely from a style perspective.</p>



<a name="153815469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Representing%20Extensions/near/153815469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Representing.20Extensions.html#153815469">(Mar 14 2016 at 20:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> - I am not in favour of repeating that just for the sake of it</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
