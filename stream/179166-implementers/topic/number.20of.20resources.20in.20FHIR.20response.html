---
layout: page
title: "FHIR Chat  · number of resources in FHIR response · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html">number of resources in FHIR response</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="265668874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/265668874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lital Inghel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#265668874">(Dec 21 2021 at 10:18)</a>:</h4>
<p>does FHIR IG talks about number of resources that should be part of a response? i mean do we must support count, or paging?</p>



<a name="265670307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/265670307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#265670307">(Dec 21 2021 at 10:35)</a>:</h4>
<p><a href="http://build.fhir.org/search.html#count">http://build.fhir.org/search.html#count</a> is pretty clear on this: servers don't have to support paging, but if they support any search capabilities at all, they SHALL support _count and return the specified max amount of responses.</p>



<a name="265691352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/265691352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#265691352">(Dec 21 2021 at 14:35)</a>:</h4>
<p>More specifically, return <em>no more than</em> the specified max amount of 'matching' resources.  They can return less.  And _count doesn't control the number of _include and _revinclude resources.</p>



<a name="265692688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/265692688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lital Inghel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#265692688">(Dec 21 2021 at 14:47)</a>:</h4>
<p>so _count is a shall? couldn't see that in the IG</p>



<a name="265692863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/265692863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#265692863">(Dec 21 2021 at 14:48)</a>:</h4>
<p>It states "NOTE: This means that all servers that support search or history SHALL support checking the _count parameter. "</p>



<a name="267501425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/267501425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lital Inghel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#267501425">(Jan 10 2022 at 21:18)</a>:</h4>
<p>interesting, I think in R4 (which is the version I'm working on) it has different wording<br>
<a href="/user_uploads/10155/fXQZ87HIL1ZefzQEUT3WTquf/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/fXQZ87HIL1ZefzQEUT3WTquf/image.png" title="image.png"><img src="/user_uploads/10155/fXQZ87HIL1ZefzQEUT3WTquf/image.png"></a></div>



<a name="276347480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276347480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276347480">(Mar 23 2022 at 15:08)</a>:</h4>
<p>does _count specify the max total or the max of the primary search resources? Meaning if I query on X and _include X.references to Y... the resulting bundle will include both X and Y resources. Is _count a limit on X or the limit on X plus Y?</p>



<a name="276347561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276347561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276347561">(Mar 23 2022 at 15:09)</a>:</h4>
<p>just X</p>



<a name="276347661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276347661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276347661">(Mar 23 2022 at 15:09)</a>:</h4>
<p>I like that answer, but am not sure everyone sees it that way.</p>



<a name="276347976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276347976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276347976">(Mar 23 2022 at 15:11)</a>:</h4>
<p>there is no ambiguity, "In the same way, the _count parameter only applies to resources with entry.search.mode = search, and does not include included resources or operation outcomes." from <a href="http://hl7.org/fhir/search.html#count">http://hl7.org/fhir/search.html#count</a></p>



<a name="276348254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276348254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276348254">(Mar 23 2022 at 15:13)</a>:</h4>
<p>ah, the critical statement</p>
<blockquote>
<p>...  and does not include included resources or operation outcomes.</p>
</blockquote>



<a name="276348464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276348464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276348464">(Mar 23 2022 at 15:14)</a>:</h4>
<p>excellent. this is what I was hoping, as it assures paging is by full counts of the primary thing I am searching on.</p>



<a name="276362516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276362516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276362516">(Mar 23 2022 at 16:36)</a>:</h4>
<p>It makes _revinclude super dangerous.  A _count of 100 can still result in a Bundle of 10k+</p>



<a name="276364758"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276364758" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276364758">(Mar 23 2022 at 16:49)</a>:</h4>
<p>understood.</p>



<a name="276368191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276368191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276368191">(Mar 23 2022 at 17:09)</a>:</h4>
<p>yeah revinclude is very tricky - the Google implementation retrieves one page of 100 for each revinclude clause, and then stops because you have to draw the line somewhere and there's no non-arbitrary way to choose</p>



<a name="276387673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276387673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276387673">(Mar 23 2022 at 19:28)</a>:</h4>
<p>I suppose you could return fewer primary resources than count, to account for a very large number of secondary resources, but that only means it works until you run into that one primary resource with thousands of revinclude secondary resources.</p>



<a name="276393918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276393918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276393918">(Mar 23 2022 at 20:18)</a>:</h4>
<p>that is what I was trying to make very clear. systems that return less than _count of the primary will make paging not functional.</p>



<a name="276405312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276405312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276405312">(Mar 23 2022 at 21:48)</a>:</h4>
<p>Return less that _count is ok, it is explicitly called out in the specs '...but may return less than the client requested.'</p>



<a name="276421862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276421862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276421862">(Mar 24 2022 at 00:55)</a>:</h4>
<p>Returning less than _count won't break pagination - the client has to trust that the next link provided by the server is appropriate for the actual page size.</p>



<a name="276471412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276471412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276471412">(Mar 24 2022 at 12:59)</a>:</h4>
<p>well, if the UI is fixed at 10 entries, and you return 9... that does, in my view, break pagination. I asked for 10 because I have a UI that shows 10.</p>



<a name="276471621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276471621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276471621">(Mar 24 2022 at 13:00)</a>:</h4>
<p>The _count is the way I can tell the server that I really want 10... I get that there can be exceptions, but I think it is better to put the hard-problem on the server.</p>



<a name="276471704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276471704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276471704">(Mar 24 2022 at 13:00)</a>:</h4>
<p>an ask for _count of 10 really should be strongly urged to return 10 (except, clearly, for the last page).</p>



<a name="276479459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276479459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276479459">(Mar 24 2022 at 14:02)</a>:</h4>
<p>I doubt many implementations will arbitrarily return you 9 resources when you request 10, but many may cap you at say 100 were you to request _count=1000000. The server needs to protect itself from overruns.</p>



<a name="276484462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276484462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276484462">(Mar 24 2022 at 14:37)</a>:</h4>
<p>Correct. In practice the returned page size is max(client-side _count, server-side page max size). That's also what the FHIR spec defines. <br>
If as a client you assume that a server will always return 10 hits, you'll be in for a surprise..</p>



<a name="276500385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276500385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276500385">(Mar 24 2022 at 16:18)</a>:</h4>
<p>not saying that exceptions won't be appropriately handled.. just wanted to make clear that the requested _count is first the count of primary resources (vs requested _include/_revinclude additions), and second that the server is expected to fill out _count sized pages when possible. - if these were not true, then I would question why we have a _count parameter at all.</p>



<a name="276500741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276500741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276500741">(Mar 24 2022 at 16:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191372">René Spronk</span> <a href="#narrow/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response/near/276484462">said</a>:</p>
<blockquote>
<p>Correct. In practice the returned page size is max(client-side _count, server-side page max size). That's also what the FHIR spec defines. </p>
</blockquote>
<p>Isn't that <code>min(client-side _count, server-side page max size). </code>?</p>



<a name="276501541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276501541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276501541">(Mar 24 2022 at 16:26)</a>:</h4>
<p>the number of Resources in a search set can be larger than _count... in that the primary resources would not be more than _count.</p>



<a name="276501578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276501578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276501578">(Mar 24 2022 at 16:26)</a>:</h4>
<p>I don't think there is anything about the min.</p>



<a name="276501741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276501741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276501741">(Mar 24 2022 at 16:27)</a>:</h4>
<p>I meant the number of primary resources returned is the smallest of of client-side count, server-side page max, and actual number of matches.</p>



<a name="276502371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276502371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276502371">(Mar 24 2022 at 16:31)</a>:</h4>
<p>_count says "don't give me more than this".  The server is <em>always</em> allowed to send you less, and is under no obligation to try to provide the number you asked for.</p>



<a name="276514370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/number%20of%20resources%20in%20FHIR%20response/near/276514370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/number.20of.20resources.20in.20FHIR.20response.html#276514370">(Mar 24 2022 at 17:45)</a>:</h4>
<p>An example for sending less that client-requested _count ---- Imagine the result set in the bundle was a set of VERY large Binary resources; the server may choose to optimize the number of these it sends to minimize it's internal memory footprint, and/or HTTP transfer payload, etc.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
