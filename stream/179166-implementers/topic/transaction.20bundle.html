---
layout: page
title: "FHIR Chat  · transaction bundle · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html">transaction bundle</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="197512445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197512445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197512445">(May 14 2020 at 07:03)</a>:</h4>
<p>Can I use a transaction bundle to do "Delete all the observations about this patient first, then create this new observation" ?</p>



<a name="197512449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197512449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197512449">(May 14 2020 at 07:03)</a>:</h4>
<p>the spec seems to say so...</p>



<a name="197519542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197519542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197519542">(May 14 2020 at 07:44)</a>:</h4>
<p>yes. DELETEs will be processed before POSTs.</p>



<a name="197520530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197520530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197520530">(May 14 2020 at 07:57)</a>:</h4>
<p>Cool. And do the servers support POSTing a transaction and watch magic happen?</p>



<a name="197553675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197553675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197553675">(May 14 2020 at 13:30)</a>:</h4>
<p><em>Some</em> servers do.  As always, depends on the server...</p>



<a name="197562201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197562201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197562201">(May 14 2020 at 14:21)</a>:</h4>
<p>Should this work then?<br>
Work= create a patient after trying to delete it</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;Bundle&quot;,
  &quot;type&quot;: &quot;transaction&quot;,
  &quot;entry&quot;: [
    {
    &quot;fullUrl&quot;: &quot;http://test.fhir.org/r4/Patient/159&quot;,
      &quot;resource&quot;: {
        &quot;resourceType&quot;: &quot;Patient&quot;,
        &quot;id&quot;: &quot;159&quot;,
        &quot;name&quot;: [
          {
            &quot;use&quot;: &quot;official&quot;,
            &quot;family&quot;: &quot;Larssonsson&quot;,
            &quot;given&quot;: [
              &quot;Axel&quot;
            ]
          }
        ],
        &quot;gender&quot;: &quot;male&quot;
      },
      &quot;request&quot;: {
        &quot;method&quot;: &quot;PUT&quot;,
        &quot;url&quot;: &quot;Patient/159&quot;
      }
    },
    {
      &quot;request&quot;: {
        &quot;method&quot;: &quot;DELETE&quot;,
        &quot;url&quot;: &quot;Patient/159&quot;
      }
    }
  ]
}
</code></pre></div>



<a name="197562264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197562264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197562264">(May 14 2020 at 14:21)</a>:</h4>
<p>Hapi is not hapi with it. <a href="http://test.fhir.org">test.fhir.org</a> neither (but I am debugging that)</p>



<a name="197562846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197562846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197562846">(May 14 2020 at 14:26)</a>:</h4>
<p>no, a resource identity (Patient/159 in this case) can only appear once in a transaction</p>



<a name="197563107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197563107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197563107">(May 14 2020 at 14:29)</a>:</h4>
<p>ah great</p>



<a name="197563629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197563629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197563629">(May 14 2020 at 14:33)</a>:</h4>
<p>one question: if you are talking about HAPI, can we do $expunge in a transaction? I want to really delete patient 159</p>



<a name="197564702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197564702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197564702">(May 14 2020 at 14:40)</a>:</h4>
<p>that's a good question, I can't answer for hapi but the equivalent on Google doesn't allow that - does anyone allow extended $operations in transactions in general?</p>



<a name="197582716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197582716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197582716">(May 14 2020 at 16:39)</a>:</h4>
<p>wouldn't that require some sort of defined arbitrary order between execution of operations?</p>



<a name="197583670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197583670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197583670">(May 14 2020 at 16:45)</a>:</h4>
<p>Actually - <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I can't seem to find any order for processing of operations on <a href="https://www.hl7.org/fhir/http.html#transaction">https://www.hl7.org/fhir/http.html#transaction</a>. Couldn't/shouldn't such an order actually be defined in the capability statement - if needed that is? I Guess <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> would like the $expunge executed deterministically</p>



<a name="197588594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197588594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197588594">(May 14 2020 at 17:19)</a>:</h4>
<p>And maybe there's a note somewhere missing that while there is a order, it can be manipulated for at least search given that the search is conducted using POST mode, which then in turn would let you process your search using POST which in turn means that you probably bypass the intended ordering. <span class="user-mention" data-user-id="191372">@René Spronk</span> would you know something about that?</p>



<a name="197603670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197603670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197603670">(May 14 2020 at 19:09)</a>:</h4>
<blockquote>
<p>I can't seem to find any order for processing of operations on <a href="https://www.hl7.org/fhir/http.html#transaction">https://www.hl7.org/fhir/http.html#transaction</a></p>
</blockquote>
<p>by POST/GET - isn't that enough?</p>



<a name="197613877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197613877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197613877">(May 14 2020 at 20:32)</a>:</h4>
<p>Regarding search: maybe it is enough. I was just wondering if it could cause some trouble doing the search using POST in a transaction</p>



<a name="197613929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197613929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197613929">(May 14 2020 at 20:32)</a>:</h4>
<p>well, you get some confusing results - you could do the same search twice and get different results</p>



<a name="197613989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197613989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197613989">(May 14 2020 at 20:33)</a>:</h4>
<p>yes - that is definitely one outcome</p>



<a name="197614226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197614226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197614226">(May 14 2020 at 20:35)</a>:</h4>
<p>that also goes for idempotent operations I guess - since they can be executed as both POST and GET</p>



<a name="197615080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197615080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197615080">(May 14 2020 at 20:42)</a>:</h4>
<p>the other thing regarding operations would be if order should be defined across operations. I guess that is probably a bit out of scope since there's order between resources themselves: eg. no rule states that POST /Encounter should be executed before POST /Observation. But with operations it might be a bit more tricky: eg. it might be nice to always have $operationAAA executed before $operationXYZ within a transaction to have the operation execution run deterministically - but no such order or definition of it exists AFAIK.</p>



<a name="197615271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197615271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197615271">(May 14 2020 at 20:43)</a>:</h4>
<p>I think it'll have to be literal order</p>



<a name="197615523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197615523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197615523">(May 14 2020 at 20:45)</a>:</h4>
<p>that isn't stated anywhere is it?</p>



<a name="197615638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197615638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197615638">(May 14 2020 at 20:46)</a>:</h4>
<p>it could also have been a property on operationDefinition?</p>



<a name="197615735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197615735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197615735">(May 14 2020 at 20:47)</a>:</h4>
<p>no it's not stated and maybe but I don't know how it would work</p>



<a name="197643229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197643229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197643229">(May 15 2020 at 02:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> Operations are allowed as part of a transaction</p>



<a name="197656378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/transaction%20bundle/near/197656378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/transaction.20bundle.html#197656378">(May 15 2020 at 07:35)</a>:</h4>
<p>I guess literal will do for now - adding that piece of doc might be useful though it is not critical for me now  ;)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
