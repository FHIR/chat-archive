---
layout: page
title: "FHIR Chat  · Use of id and identifier · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html">Use of id and identifier</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="191710081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191710081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Grundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191710081">(Mar 25 2020 at 08:04)</a>:</h4>
<p>We are communicating observations between two systems, where both systems will have their unique instance of each observation, each with it's own internal id. </p>
<p>What is the best way of communicating the ids across the systems? Should we only use <a href="http://resource.id" title="http://resource.id">resource.id</a>, or should we in addition also use observation.identifier? Each system will need to know the other systems internal id for mapping purposes I guess. But is it better to always communicate the internal id  also as an identifier so we get the identifier.system so it is possible to know from which system the id comes?</p>
<p>This seems like a common situation, so looking for some  general strategy. Any recommendations?</p>



<a name="191757907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191757907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191757907">(Mar 25 2020 at 14:59)</a>:</h4>
<p><a href="http://Resource.id" title="http://Resource.id">Resource.id</a> is for the RESTful 'key'.  If the instance isn't exposed RESTfully, then use [resource].identifier.</p>



<a name="191758081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191758081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191758081">(Mar 25 2020 at 15:00)</a>:</h4>
<p><a href="http://Resource.id" title="http://Resource.id">Resource.id</a> is only unique in the context of a known base URL - and if you're not using REST, you don't know the base URL.</p>



<a name="191759906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191759906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191759906">(Mar 25 2020 at 15:11)</a>:</h4>
<p>(deleted)</p>



<a name="191760023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191760023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191760023">(Mar 25 2020 at 15:12)</a>:</h4>
<p>The draft $import spec handles this by putting the source system in meta.source, but doesn't have a good place to put the ID so it adds an identifier extension on meta with system=[input source URI] and identifier=[resource type]/[ID on other system].</p>
<p>There are lots of things not yet resolved with this idea, for example should it track multiple sources? How to represent source systems that aren't fhir, like the output of an ETL from a non-fhir source? Do we need a field on meta in R5 and if so should it replace or extend meta.source?</p>



<a name="191760193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191760193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191760193">(Mar 25 2020 at 15:13)</a>:</h4>
<blockquote>
<p><a href="http://Resource.id" title="http://Resource.id">Resource.id</a> is for the RESTful 'key'. If the instance isn't exposed RESTfully, then use [resource].identifier.</p>
</blockquote>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> this advice doesn't match what I would have said. Have we published it as guidance somewhere?</p>



<a name="191760299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191760299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191760299">(Mar 25 2020 at 15:13)</a>:</h4>
<p>(Er, I'm thinking primarily about reference.value vs reference.identifier when pointing from one resource to another -- the question is closely related)</p>



<a name="191760995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191760995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191760995">(Mar 25 2020 at 15:17)</a>:</h4>
<p>Seems when there are multiple sources, this is a use-case where Provenance should be brought in.</p>



<a name="191761023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191761023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191761023">(Mar 25 2020 at 15:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> I don't know - what would you have said?</p>



<a name="191761212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191761212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191761212">(Mar 25 2020 at 15:18)</a>:</h4>
<p>it would be good to have a consistent way for someone importing original data from somewhere else, so that someone downstream knows that the copy they are looking at is not original and can easily find the original id. Otherwise we will be creating a de-duplication problem</p>



<a name="191761524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191761524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191761524">(Mar 25 2020 at 15:19)</a>:</h4>
<p>This de-duplication problem was one of my thoughts with the proposals from DaVinci for providing a patient copies of the data that the payer has, while the provider is also providing that very same data. The app the patient is using should have a deterministic way to de-duplicate</p>



<a name="191761708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191761708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191761708">(Mar 25 2020 at 15:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> This came up in discussion on the "saner ig" and I wrote: <a href="https://github.com/AudaciousInquiry/saner-ig/issues/14" title="https://github.com/AudaciousInquiry/saner-ig/issues/14">https://github.com/AudaciousInquiry/saner-ig/issues/14</a> (basically: I think using reference.value is the best, most general practice)</p>



<a name="191763465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191763465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191763465">(Mar 25 2020 at 15:29)</a>:</h4>
<p>The question wasn't about referencing, it was about the identity of the instance itself.  If you're referencing another resource, you can only use reference.value if the resource either has a URL where it can be reached usefully or if it's in the same Bundle as the referencing resource (and if not RESTfully available, you're stuck using urn:uuid:)</p>



<a name="191763642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191763642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191763642">(Mar 25 2020 at 15:30)</a>:</h4>
<p>(Or you can use Reference.identifier, but in that case, there's no expectation for resolution of the references when querying or performing other operations)</p>



<a name="191764037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191764037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191764037">(Mar 25 2020 at 15:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197072">Paul Church</span> <a href="#narrow/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier/near/191760023" title="#narrow/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier/near/191760023">said</a>:</p>
<blockquote>
<p>The draft $import spec handles this by putting the source system in meta.source, but doesn't have a good place to put the ID so it adds an identifier extension on meta with system=[input source URI] and identifier=[resource type]/[ID on other system].</p>
<p>There are lots of things not yet resolved with this idea, for example should it track multiple sources? How to represent source systems that aren't fhir, like the output of an ETL from a non-fhir source? Do we need a field on meta in R5 and if so should it replace or extend meta.source?</p>
</blockquote>
<p>I understood the use of meta.source was to put the original root URI here, and keep the same id value within the importing system. If you keep the same id value, then you only need to know the original root URI to be able to re-discover the original. This however means an importing system must be able to use the original id value.</p>



<a name="191764077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191764077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191764077">(Mar 25 2020 at 15:33)</a>:</h4>
<p>My point here is that any time you're able to populate <code>Reference.identifier</code> you could instead populate <code>Reference.value</code> with a contained resource (that conveys the identifier, and maybe extra details too. So IGs that require Reference.identifier are going to lead to more brittle exchange (since you just have to cross your fingers and assume that the receiving party knows what to do with this thing).</p>



<a name="191764192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191764192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191764192">(Mar 25 2020 at 15:33)</a>:</h4>
<blockquote>
<p>I understood the use of meta.source was to put the original root URI here, and keep the same id value within the importing system. </p>
</blockquote>
<p>Unfortunately (in my view) we discussed and decided to leave the meaning/interpretation of Meta.source pretty wide open. Which means different IGs can establish different (and conflicting) conventions.</p>



<a name="191764313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191764313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191764313">(Mar 25 2020 at 15:34)</a>:</h4>
<p>(It is <code>Reference.reference</code>)</p>



<a name="191764329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191764329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191764329">(Mar 25 2020 at 15:34)</a>:</h4>
<p>yup, hence why I am concerned about the proliferation of de-duplication problem</p>



<a name="191764362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191764362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191764362">(Mar 25 2020 at 15:34)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-20906" title="http://jira.hl7.org/browse/FHIR-20906">FHIR#20906</a> is the context here, for those who didn't follow.</p>



<a name="191764485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191764485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191764485">(Mar 25 2020 at 15:35)</a>:</h4>
<p>And <a href="http://jira.hl7.org/browse/FHIR-20688" title="http://jira.hl7.org/browse/FHIR-20688">FHIR#20688</a>.</p>



<a name="191765890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191765890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191765890">(Mar 25 2020 at 15:43)</a>:</h4>
<p>A contained resource is appropriate if you're dealing with something that's not stand-alone.  Otherwise, no reason to make it contained.  (There's no expectation that receivers will un-contain on receipt).  If you want linkages retained and you don't have REST, you either need to transmit all the linked content in a single bundle or you're relying on non-standard processing to resolve identifiers</p>



<a name="191774700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191774700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191774700">(Mar 25 2020 at 16:35)</a>:</h4>
<p>.identifier is intended to convey business identifiers (site-independent identifiers) while .id is intended to convey a site-dependent identifier. So for the original question on this thread, if the originating system can also assign a .identifier then both systems would have their own .id and the same .identifier on their resource instances.</p>
<p>.reference.value refers to a .id while .reference.identifier refers to a .identifier.</p>



<a name="191781049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191781049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191781049">(Mar 25 2020 at 17:16)</a>:</h4>
<p>.reference.value refers to a <em>URI</em> (of which a component is the .id).  The URI must either be a RESTful URL or a urn:uuid: in the context of a Bundle</p>



<a name="191781137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/191781137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#191781137">(Mar 25 2020 at 17:17)</a>:</h4>
<p>site-dependent identifiers can still be sent using .identifier</p>



<a name="192008546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/192008546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Grundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#192008546">(Mar 27 2020 at 12:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191430">Paul Knapp</span> <a href="#narrow/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier/near/191774700" title="#narrow/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier/near/191774700">said</a>:</p>
<blockquote>
<p>.identifier is intended to convey business identifiers (site-independent identifiers) while .id is intended to convey a site-dependent identifier. So for the original question on this thread, if the originating system can also assign a .identifier then both systems would have their own .id and the same .identifier on their resource instances.</p>
<p>.reference.value refers to a .id while .reference.identifier refers to a .identifier.</p>
</blockquote>
<p>Would you say it is good practice to always include .identifier in addition to the .id, e.g. by having your own system namespace?. Then if it is persisted in another system, they could also persist that .identifier with their instance, and if they expose the same logical resource (their instance), they would include their .id, plus their .identifier and the original systems .identifier? Or is it only the originating system's .identifier that should be populated? The latter comes with the benefit of knowing where the "master" (which I assume could be useful).</p>



<a name="192020441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/192020441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#192020441">(Mar 27 2020 at 13:59)</a>:</h4>
<ol>
<li>It's always good practice to include .identifier in a resource instance.</li>
<li>If a resource is persisted in another system, it becomes it's own instance. Unless you have some specific business rules that keep the two instances of the resource in sync, they will diverge and are not the same thing. In such cases it is probably better for the "second" instance to use a ".basedOn" or ".partOf" reference to the original resource (when possible).</li>
<li>using the same .identifier on two different instances of a resource needs to be considered on a case-by-case basis. Using it as an indication of where the original resource originated is overloading the meaning of .identifier, there are probably better ways to indicate that.</li>
</ol>



<a name="192024533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Use%20of%20id%20and%20identifier/near/192024533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Use.20of.20id.20and.20identifier.html#192024533">(Mar 27 2020 at 14:26)</a>:</h4>
<p>"basedOn" and "partOf" would be appropriate if the record represents a distinct business object.  If you have 3 different systems tracking a given prescription, they shouldn't use 'basedOn' to point to each other unless one of them is clearly a distinct object (e.g. a pharmacy 'encoded' representation of the original order).  If you have multiple copies of an encounter, order, allergy, etc. on different systems they typically won't have any relationships to each other - though Provenance and/or Linkage might be used to indicate derivation relationships or assertions as to which is primary/source-of-truth.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
