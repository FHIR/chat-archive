---
layout: page
title: "FHIR Chat  · Polymorphic elements · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html">Polymorphic elements</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153862347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862347">(Dec 08 2016 at 15:25)</a>:</h4>
<p>And again about polymorphic elements wire format:</p>
<ul>
<li>impossible to have collection of different types (without realistic reason, just because format)</li>
<li>problematic validation (it's not so simple to express exclusiveness &amp; required elements)</li>
</ul>
<div class="codehilite"><pre>// what we have
{ valueNumber:  42, valueString: &quot;some&quot;}

// how it could be
{value: {type: &quot;number&quot;, value: 42}}
// this isomorphic to  {resourceType: &quot;....&quot;} solution, or we could use something like @type for both :)

// if it&#39;s collection
{value: [{type: &quot;number&quot;, value: 5}, {type: &quot;string&quot;, value: &quot;some&quot;}]}
</pre></div>



<a name="153862367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862367">(Dec 08 2016 at 17:38)</a>:</h4>
<p>Not 100% sure what the question is here, but it really just depends on your database.  MongoDB can certainly handle collections of different resource types.  You could even have an index on the <code>resourceType</code> field, for fast collapse/lookup of resources.  It wouldn't be the most efficient lookup ever, but would be perfectly fine for inbound queues and caches.  </p>
<p>Schema validation is another area where it just depends on your implementation.  We're using a schema constructed called SimpleSchema, which supports nested schemas, schema extensions, and partial schemas.  So we constructed a BaseSchema and MetaSchema, which all of our other resource schemas inherit from.  So, if we want to validate on a set of required elements, plus a base schema, we can do so.  </p>
<p>That being said, we were careful not to bake the schema validation into the  database itself.   MongoDB, NoSQL, and all that.   </p>



<a name="153862381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862381">(Dec 08 2016 at 19:06)</a>:</h4>
<p>We used to be able to do that, back when we had the format for primitive types as :</p>
<div class="codehilite"><pre>&quot;code&quot;: {
  &quot;value&quot; : &quot;xxxx&quot;,
  &quot;extension&quot; : {
  }
}
</pre></div>



<a name="153862382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862382">(Dec 08 2016 at 19:07)</a>:</h4>
<p>instead of </p>
<div class="codehilite"><pre>&quot;code&quot; : &quot;xxxx&quot;,
&quot;code_&quot; : {
}
</pre></div>



<a name="153862383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862383">(Dec 08 2016 at 19:07)</a>:</h4>
<p>but we continually had implementers come to us and say "you guys just don't even understand JSON do you. It's just not xml"</p>



<a name="153862384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862384">(Dec 08 2016 at 19:08)</a>:</h4>
<p>so eventually we bowed to the pressure and went to the split representation. We knew, when we did this, that it would mean no polymorphic collections</p>



<a name="153862385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862385">(Dec 08 2016 at 19:08)</a>:</h4>
<p>from my point of view, this was a step backwards. But it's not going to change now</p>



<a name="153862398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862398">(Dec 08 2016 at 19:33)</a>:</h4>
<p>For json purists we could use something like this: <code>{type: "string", string: "...value..."}, {type: "date", date: "...value..."}</code></p>



<a name="153862400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862400">(Dec 08 2016 at 19:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> might want to comment but changing the name of "value" to the name of the type wasn't going to do it. </p>



<a name="153862407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862407">(Dec 08 2016 at 19:38)</a>:</h4>
<p>Changing value to datetype could simplify fhir/fluent path expressions and will play well with db indexes - so every type has it's own path</p>



<a name="153862408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862408">(Dec 08 2016 at 19:39)</a>:</h4>
<p>and it looks uniform with <code>{resourceType: "...."}</code> polymorphism</p>



<a name="153862409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862409">(Dec 08 2016 at 19:40)</a>:</h4>
<p>let say <code>{dataType: ".....", ...}</code> :)</p>



<a name="153862411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862411">(Dec 08 2016 at 19:41)</a>:</h4>
<p>it wouldn't change fhirpath at all. but it would complicate navigation of the json where you just wanted to value, irrespective of the type. e.g. string, integer, boolean, uri, I don't care</p>



<a name="153862413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862413">(Dec 08 2016 at 19:41)</a>:</h4>
<p>Looking back at all of the pain this has caused,  I certainly can't say that I'm happy with where we've landed. Extensible primitives with our current json representation is hard for everyone. </p>



<a name="153862416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862416">(Dec 08 2016 at 19:42)</a>:</h4>
<p>But yeah, calling the property <code>value</code> vs <code>dateTime</code> (or whatever) doesn't seem to matter much to me. </p>



<a name="153862417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862417">(Dec 08 2016 at 19:43)</a>:</h4>
<p>It matters for example for elasticsearch :)</p>



<a name="153862419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862419">(Dec 08 2016 at 19:43)</a>:</h4>
<p>Anyway, @<strong>nicola (RIO)</strong>'s comments were about polymorphic elements, not about standalone primitive values. </p>



<a name="153862420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862420">(Dec 08 2016 at 19:44)</a>:</h4>
<p>and fhirpath "element.date" vs "element(type=date).value</p>



<a name="153862421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862421">(Dec 08 2016 at 19:44)</a>:</h4>
<p>they're related</p>



<a name="153862422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862422">(Dec 08 2016 at 19:44)</a>:</h4>
<p>I think, extending primitives is bad idea by themself :)</p>



<a name="153862423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862423">(Dec 08 2016 at 19:44)</a>:</h4>
<p>They could be. But even pre-DSTU1,  we disallowed polymorphic lists, no? </p>



<a name="153862424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862424">(Dec 08 2016 at 19:44)</a>:</h4>
<p>I's like OOP of brain :)</p>



<a name="153862426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862426">(Dec 08 2016 at 19:45)</a>:</h4>
<p>@<strong>nicola (RIO)</strong> yes, that's my perspective too. </p>



<a name="153862427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862427">(Dec 08 2016 at 19:45)</a>:</h4>
<p>(I mean, about extensions on primitives. I don't know what "OOP of brain"  means :)) </p>



<a name="153862428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862428">(Dec 08 2016 at 19:46)</a>:</h4>
<p>yes, we never allowed it. But I always knew that we could allow it if we really needed to, but we just had to define our own equivalent of xsi:type (with all the pain that it cases, along with defining something of our own). but once we made the json change, that was no longer an option</p>



<a name="153862429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862429">(Dec 08 2016 at 19:46)</a>:</h4>
<p>You could always create custom extension for additional info, instead "extending primitives" :)</p>



<a name="153862431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862431">(Dec 08 2016 at 19:47)</a>:</h4>
<p>Yeah, I'm thinking about doing that in the use cases I  have. </p>



<a name="153862432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862432">(Dec 08 2016 at 19:48)</a>:</h4>
<p>about 5% of our extensions are on primitive types. And in most of those cases, saying to put the extension on the parent not the child would just create confusion. </p>



<a name="153862433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862433">(Dec 08 2016 at 19:48)</a>:</h4>
<p>I think the name "primitive" means it's not extendable</p>



<a name="153862434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862434">(Dec 08 2016 at 19:49)</a>:</h4>
<p>i.e. not complex</p>



<a name="153862435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862435">(Dec 08 2016 at 19:51)</a>:</h4>
<p>We have polymorphic lists in Bundle.entry, do we?</p>



<a name="153862436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862436">(Dec 08 2016 at 19:51)</a>:</h4>
<p>yes,f or resource type</p>



<a name="153862438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862438">(Dec 08 2016 at 19:53)</a>:</h4>
<p>I do not see essential difference with polymorphic lists for elements</p>



<a name="153862439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862439">(Dec 08 2016 at 19:55)</a>:</h4>
<p>no, perhaps not. But perhaps you could comment about where in particular the resource content models are wrong because of this rule</p>



<a name="153862440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862440">(Dec 08 2016 at 19:57)</a>:</h4>
<p>We just have a lot of bugs and confusion with [x], that's why i've started this discussion :)</p>



<a name="153862442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862442">(Dec 08 2016 at 19:58)</a>:</h4>
<p>we'd still have a lot of bugs. That's definitely a case of moving the deckchairs around</p>



<a name="153862443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862443">(Dec 08 2016 at 20:01)</a>:</h4>
<p>Usually when concepts are fuzzy - you've got a lot frustration. Simple &amp; concise one always better :)</p>



<a name="153862447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862447">(Dec 08 2016 at 20:19)</a>:</h4>
<p>Is the burden of the 'confusion' for 5% of the extensions worth the burden for accomodating extensions on primatives? I'd think not. I think you'd consider an extension in the parent to either add an element or override an existing element.</p>



<a name="153862449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862449">(Dec 08 2016 at 20:38)</a>:</h4>
<p>you haven't really considered all of the ways this plays out. if you 'decorate' a primitive with an extension, by putting it somewhere else, you're taken a step back - you're still going to need to consider the extension, but no it's not even in the right place. You stll haven't dealt with the actual problem, which is that there *are* extensions on primitive types</p>



<a name="153862452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862452">(Dec 08 2016 at 20:47)</a>:</h4>
<p>Well, it's not in the 'right place' in json and we seem to be coping with that. So your concern is that you have a business need to replace or augment the concept with a different or richer thing - is that really the same concept?</p>



<a name="153862453"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862453" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862453">(Dec 08 2016 at 20:50)</a>:</h4>
<p>If the use case is that normally the concept foo can be represented by a primative but sometimes you need a complex to be used then adding fooComplex as an extension on the parent would not seem confusing.  </p>



<a name="153862455"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862455" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862455">(Dec 08 2016 at 20:51)</a>:</h4>
<p>unless it repeats. And in json it works as well as a millipede with a wooden leg, really. </p>



<a name="153862456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862456">(Dec 08 2016 at 20:52)</a>:</h4>
<p>I expect that this would lead to less reuse of purely generic extensions and more element-specific extensions but that would further help reduce confusion.</p>



<a name="153862457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862457">(Dec 08 2016 at 20:52)</a>:</h4>
<p>have you looked at the extensions we have on primitives? </p>



<a name="153862458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862458">(Dec 08 2016 at 20:53)</a>:</h4>
<p>Unless it repeats, you mean it has a cardinality greater than 1 or that there are several places where the same generic extention may apply?</p>



<a name="153862459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862459">(Dec 08 2016 at 20:54)</a>:</h4>
<p>No I was just starting to skim through the extensions. But certainly the 21090 extensions, not sure which may apply to primatives, could be cast as extensions which augment or overide a spcific element.</p>



<a name="153862460"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862460" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862460">(Dec 08 2016 at 20:55)</a>:</h4>
<p>most of them, it would not be very cool to permutate the extension identity with the element identity. </p>



<a name="153862461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862461">(Dec 08 2016 at 20:59)</a>:</h4>
<p>Then you could add an optional element to extension to indicate the element being extended: use referencing rather than positioning to provide context. On one level it makes things harder but I think it may slightly increase point complexity while overall reducing complexity.</p>



<a name="153862462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862462">(Dec 08 2016 at 20:59)</a>:</h4>
<p>We could explore Tuesday Q1 in ITS in San Antonio. I think we need to stand up some examples to really assess the pros and cons.</p>



<a name="153862463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862463">(Dec 08 2016 at 21:01)</a>:</h4>
<p>we could just put all the extensions in the root of the element, and refer to the context by :id. </p>



<a name="153862464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862464">(Dec 08 2016 at 21:01)</a>:</h4>
<p>that was my preferred approach for a long time. a bitch to serialise properly</p>



<a name="153862465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862465">(Dec 08 2016 at 21:02)</a>:</h4>
<p>root of the resource or at nodes?</p>



<a name="153862466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862466">(Dec 08 2016 at 21:02)</a>:</h4>
<p>yes resource, that's what I meant</p>



<a name="153862467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862467">(Dec 08 2016 at 21:02)</a>:</h4>
<p>ok, so literally a bag and a map</p>



<a name="153862468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862468">(Dec 08 2016 at 21:04)</a>:</h4>
<p>I'm not championing any particular solution, but I think that not extending primatives is important, and if we are going to make that change that we should make it soon - not in haste but soon.</p>



<a name="153862469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862469">(Dec 08 2016 at 21:04)</a>:</h4>
<p>well, we aren't making it for STU3. that's for sure. </p>



<a name="153862470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862470">(Dec 08 2016 at 21:08)</a>:</h4>
<p>I don't have any extensions I'm using which are applied to primatives so I'd need to refresh on what the impacts are of losing the context. We could point to an id attribute in xml on the primative, but in json what would we do - privide the path? or inject a marker element and point to it?</p>



<a name="153862471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862471">(Dec 08 2016 at 21:10)</a>:</h4>
<p>well, this is the cool thing - in json, we'd need an id. So we could change the representation of the primitive to </p>
<div class="codehilite"><pre>&quot;code&quot; : {
  &quot;id&quot; : &quot;x2&quot;,
  &quot;value&quot; : &quot;xxxx&quot;
}
</pre></div>



<a name="153862472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862472">(Dec 08 2016 at 21:10)</a>:</h4>
<p>it would mean you would need to pre-process to serialize and deserialize but I this we are there already so it is just changing what you are doing.</p>



<a name="153862473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862473">(Dec 08 2016 at 21:10)</a>:</h4>
<p>that way, we could move extensions out to the root of the resource so we didn't need to have a complex primitive, and we could just have "code": "xxxx"</p>



<a name="153862474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862474">(Dec 08 2016 at 21:10)</a>:</h4>
<p>;-)</p>



<a name="153862475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862475">(Dec 08 2016 at 21:11)</a>:</h4>
<p>honestly, I prefer the json-ld format. it's more verbose, yes, but it's brutally simple. </p>



<a name="153862476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862476">(Dec 08 2016 at 21:11)</a>:</h4>
<p>Alternately we could get rid of primatives and make all data types complex which may contain complex or primatives - just a thought.</p>



<a name="153862477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862477">(Dec 08 2016 at 21:11)</a>:</h4>
<p>you don't have to pre-process right now</p>



<a name="153862478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862478">(Dec 08 2016 at 21:12)</a>:</h4>
<p>in effect, all data types are complex that contain primitive values right now. You're just mocving deck chairs around</p>



<a name="153862479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862479">(Dec 08 2016 at 21:14)</a>:</h4>
<p>No, integer is: &lt;foo value="int"/&gt; or foo: int - how is that already complex?</p>



<a name="153862480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862480">(Dec 08 2016 at 21:15)</a>:</h4>
<p>Yes we are moving the chairs, but that is what you do with chairs to make them efficient for the purpose</p>



<a name="153862481"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862481" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862481">(Dec 08 2016 at 21:17)</a>:</h4>
<p>integer is already complex because it has an id and extensions. The value is not. This is crystal clear in the structure definitions / typing system, and in the XML,  and RDF. </p>



<a name="153862482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862482">(Dec 08 2016 at 21:17)</a>:</h4>
<p>it's only the json format that complicates things by trying to simplify things</p>



<a name="153862483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862483">(Dec 08 2016 at 21:18)</a>:</h4>
<p>It's 00:16 so I'm going to crash, but I think a lot of people would appreciate a solution so that we didn't extend primatives directly.</p>



<a name="153862484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862484">(Dec 08 2016 at 21:18)</a>:</h4>
<p>a lot of people would appreciate not having extensions. Until they see the alternative</p>



<a name="153862485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862485">(Dec 08 2016 at 21:19)</a>:</h4>
<p>Agreed - xml isn't dealing with the same 'primative' as json - and that has ramifications.</p>



<a name="153862486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862486">(Dec 08 2016 at 21:21)</a>:</h4>
<p>Actually I think a lot see the need for extensions and for them not to get out-of-hand like Z segments. The 2 pushbacks I hear are them being applied to primatives and their perceived overuse.</p>



<a name="153862504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862504">(Dec 08 2016 at 21:45)</a>:</h4>
<p>I'm not sure the json ld is nearly as simple as you describe. At least: do you expect it to be parsed according to json ld semantics? Should apps know how to parse general json-ld graphs, or is the precise layout in the FHIR examples what's required? Would apps recognize a flattened representation of the same graph (all nodes moved to the top) as equivalent? What about renaming the prefixes to arbitrary new values (as for namespaces in xml)? </p>



<a name="153862506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862506">(Dec 08 2016 at 21:49)</a>:</h4>
<p>1. yes, it should be able to be, but I'm suspicious that polymorphism isn't right. <span class="user-mention" data-user-id="192267">@Eric Prud'hommeaux</span> says I shouldn't worry about that<br>
2. I don't know the answer<br>
3. I don't whether they would. Should they? I don't know. I think it depends whether they use json-ld pattern for reading it, or just read it directly<br>
4. what prefixes? I don't think we have any in json-ld</p>



<a name="153862523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862523">(Dec 08 2016 at 23:16)</a>:</h4>
<p><a href="http://build.fhir.org/observation-example-TPMT-haplotype-two.html" target="_blank" title="http://build.fhir.org/observation-example-TPMT-haplotype-two.html">http://build.fhir.org/observation-example-TPMT-haplotype-two.html</a> has two "@context" properties (!) which is an error </p>



<a name="153862524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862524">(Dec 08 2016 at 23:18)</a>:</h4>
<p>no that's very useful is it</p>



<a name="153862525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862525">(Dec 08 2016 at 23:18)</a>:</h4>
<p>typo. the second is supposed to be @id</p>



<a name="153862526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862526">(Dec 08 2016 at 23:18)</a>:</h4>
<p>We don't have prefixes but a bunch of properties defined in our contexts like <a href="http://build.fhir.org/Observation.jsonld" target="_blank" title="http://build.fhir.org/Observation.jsonld">http://build.fhir.org/Observation.jsonld</a> and in theory one of could give these fields any name one liked, and client should understand that they mean the same </p>



<a name="153862527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862527">(Dec 08 2016 at 23:19)</a>:</h4>
<p>by remapping in the definition? But how, when we publish the definitions, and the @context must refer to our definition?</p>



<a name="153862528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862528">(Dec 08 2016 at 23:19)</a>:</h4>
<p>Also, the reference to a contact is wrong because this context only to find properties about observation and does not define the rest of the properties that are used</p>



<a name="153862529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862529">(Dec 08 2016 at 23:20)</a>:</h4>
<p>In general in a Json LD file, you could change the contact and rename properties. I client would recognize that the file has the same meaning by expanding the properties to full Uris.</p>



<a name="153862530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862530">(Dec 08 2016 at 23:20)</a>:</h4>
<p>Something tells me we are not proposing using Json LD in this way.</p>



<a name="153862531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862531">(Dec 08 2016 at 23:20)</a>:</h4>
<p>.... no I don't understand that one</p>



<a name="153862532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862532">(Dec 08 2016 at 23:20)</a>:</h4>
<p>But I'm not sure we have captured a clear explanation of how we are using it.</p>



<a name="153862533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862533">(Dec 08 2016 at 23:21)</a>:</h4>
<p>we haven't captured that at all. You won't find any write up of any of this, just the examples and the jsonld definitions</p>



<a name="153862534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862534">(Dec 08 2016 at 23:21)</a>:</h4>
<p>In theory every property name can be expanded to its full URI by looking things up in the context. You could replace the instance data with a new copy where each property that was a full URI. That file that have the same meaning as the current instance data.</p>



<a name="153862535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862535">(Dec 08 2016 at 23:21)</a>:</h4>
<p>yes indeed, but that requires different @context definitions. which we don't provide</p>



<a name="153862536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862536">(Dec 08 2016 at 23:23)</a>:</h4>
<p>What I am saying is that if we are using Json LD, and we expect clients to understand json-ld semantics, then we should expect clients to understand a payload like the one I just described.</p>



<a name="153862537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862537">(Dec 08 2016 at 23:23)</a>:</h4>
<p>If not, we need to explain what we *do* expect </p>



<a name="153862538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862538">(Dec 08 2016 at 23:24)</a>:</h4>
<p>umm, I'm not sure how. Perhaps you could explain how that would work with an actual example</p>



<a name="153862539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862539">(Dec 08 2016 at 23:24)</a>:</h4>
<p>But in any case, this is the kind of thing I mean when we talk about the Simplicity of the format. One variant of the payload might look simple while another might look complex. And they both have the same meaning.</p>



<a name="153862540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862540">(Dec 08 2016 at 23:24)</a>:</h4>
<p>and I mean, an actual resource. Cause I understand how that works in principle, but I believe that we eliminate much of this by fixing the value of @context</p>



<a name="153862541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862541">(Dec 08 2016 at 23:25)</a>:</h4>
<p>If you want to see an example, you can put one of the current resources into the sandbox at <a href="http://jsonld.org" target="_blank" title="http://jsonld.org">jsonld.org</a> and click "expand". I will share link when I'm at a computer.</p>



<a name="153862542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862542">(Dec 08 2016 at 23:25)</a>:</h4>
<p>I don't believe that will show me an example of what you're talking about</p>



<a name="153862543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862543">(Dec 08 2016 at 23:26)</a>:</h4>
<p>for a start it doesn't work... I broke something...</p>



<a name="153862544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862544">(Dec 08 2016 at 23:28)</a>:</h4>
<p>but that will show me the transform from one particular input to a canonical representation. And there could be other inputs that lead to the same canonical representation  - in theory. But by locking down @context, we prohibit that, no?</p>



<a name="153862561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862561">(Dec 09 2016 at 00:08)</a>:</h4>
<p>A context is just a way to list a bunch of shortcuts that you are allowed to use. A given document can always expand everything fully and ignore those shortcuts even though they are available.</p>



<a name="153862648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862648">(Dec 09 2016 at 07:23)</a>:</h4>
<p>As I understand json-ld it's just json representation of RDF, where attributes are URIs and this approach is similar to what we've discussed for extension with embedded schema and extensions as key/value instead collection. I like it, because there is no difference between FHIR core elements and extensions.</p>



<a name="153862659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862659">(Dec 09 2016 at 09:26)</a>:</h4>
<p>umm, no. not quite, I didn't see a way to pull off making them all the same, but happy to talk about ideas there</p>



<a name="153862691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153862691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153862691">(Dec 09 2016 at 12:56)</a>:</h4>
<p>I mean something like this:</p>
<div class="codehilite"><pre>{                                                                                                                                               
  $schema: {      // or @context                                                                                                                                                        
    race: {url: &quot;http://hl7.org/fhir/StructureDefinition/us-core-race&quot;, type: &#39;CodeableConcept&#39;},                                               
    name: {url: &quot;fhir&quot;, type: &quot;HumanName&quot;, collection: true}                                               
  },                                                                                                                                                                                                                                                      
  race: {coding: ....},  // extension
  name: [...names....]      // core element                                                                                                                                                                                                                                                                                                                                                               
}     
````
</pre></div>



<a name="153863200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Polymorphic%20elements/near/153863200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Polymorphic.20elements.html#153863200">(Dec 13 2016 at 11:00)</a>:</h4>
<p>You could make extensions just the same as regular elements, but you lose your trivial mapping back/forth with FHIR's other serialization formats. Sticking them all behind an "extension" property keeps this mapping very straightforward (but gives less idiomatic rdf).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
