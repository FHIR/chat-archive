---
layout: page
title: "FHIR Chat  · operation in CapabilityStatement · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/operation.20in.20CapabilityStatement.html">operation in CapabilityStatement</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="274735409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/operation%20in%20CapabilityStatement/near/274735409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/operation.20in.20CapabilityStatement.html#274735409">(Mar 09 2022 at 18:59)</a>:</h4>
<p>An implementer asked us a question about operation in CS which I think it worth some discussion here. Let's say an IG says that server SHALL support $validate operation on Patient in its "requirements" CS</p>
<div class="codehilite"><pre><span></span><code>{
          &quot;type&quot; : &quot;Patient&quot;,
          &quot;operation&quot; : [
            {
              &quot;extension&quot; : [
                {
                  &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/capabilitystatement-expectation&quot;,
                  &quot;valueCode&quot; : &quot;SHALL&quot;
                }
              ],
              &quot;name&quot; : &quot;validate&quot;,
              &quot;definition&quot; : &quot;http://hl7.org/fhir/OperationDefinition/Resource-validate&quot;
            }
          ]
        },
</code></pre></div>
<p>The <code>validate</code> operation has three optional input parameter. One of them is <code>profile</code><br>
A server implementation, (Server A), decides that it does not support <code>profile</code> input parameter.<br>
Questions</p>
<ol>
<li>If ServerA adds base validate operation in its instance kind CS </li>
</ol>
<div class="codehilite"><pre><span></span><code>              &quot;name&quot; : &quot;validate&quot;,
              &quot;definition&quot; : &quot;http://hl7.org/fhir/OperationDefinition/Resource-validate&quot;
</code></pre></div>
<p>Does that mean ServerA support all three input parameters? Or ServerA MAY ignore any optional parameter it does support?<br>
The problem for "ignore any optional parameter" is that client may expect server validating resource using profile uri provided while server actually does something different.</p>
<ol start="2">
<li>If ServerA create a constrained definition based on base validate operation with profile parameter as [0..0], </li>
</ol>
<div class="codehilite"><pre><span></span><code>              &quot;name&quot; : &quot;validate&quot;,
              &quot;definition&quot; : &quot;http://my-server/OperationDefinition/Resource-my-validate&quot;
</code></pre></div>
<p>Should this be ok considering the requirement CS in IG has different name/definition pair</p>
<ol start="3">
<li>Based on #2, in CS, implementer can specify a resource with multiple <code>targetProfile</code> but cannot specify an operation with multiple definitions. Should we consider add <code>CS.rest.resource.operation.targetDefinition [0..*] </code> to address this?</li>
</ol>



<a name="274735794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/operation%20in%20CapabilityStatement/near/274735794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/operation.20in.20CapabilityStatement.html#274735794">(Mar 09 2022 at 19:01)</a>:</h4>
<p>Servers are allowed to invoke business rules on any operation.  Ignoring parameters should only be done if it's safe to do so.  Yelling is better.  Also, it might be best to define a refined OperationDefinition that reflects exactly what the system does support that's derived from the original OperationDefinition</p>



<a name="274742109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/operation%20in%20CapabilityStatement/near/274742109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/operation.20in.20CapabilityStatement.html#274742109">(Mar 09 2022 at 19:46)</a>:</h4>
<p>Thanks Lloyd, how about question 2 and 3?</p>



<a name="274749378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/operation%20in%20CapabilityStatement/near/274749378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/operation.20in.20CapabilityStatement.html#274749378">(Mar 09 2022 at 20:41)</a>:</h4>
<p>The rules around multiple combinations of allowed parameters for an Operation are handled in the input profile with invariants.  No need for multiple OperationDefinitions.  It's definitely possible for a derived profile to constrain cardinality.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
