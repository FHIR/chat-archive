---
layout: page
title: "FHIR Chat  · references in bundles · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/references.20in.20bundles.html">references in bundles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153978261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/references%20in%20bundles/near/153978261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/references.20in.20bundles.html#153978261">(Jul 26 2018 at 10:07)</a>:</h4>
<p>Context: <a href="http://build.fhir.org/bundle.html#references" target="_blank" title="http://build.fhir.org/bundle.html#references">http://build.fhir.org/bundle.html#references</a> - this doesn't fully detail the required behavior of a server. </p>
<p>If server A sends a Patient &amp; Observation transaction bundle to B, 2 POSTs, then the fullURLs of the patient and the observation will be (as an example) <a href="http://a.org/Patient/1" target="_blank" title="http://a.org/Patient/1">a.org/Patient/1</a> and <a href="http://a.org/Observation/7" target="_blank" title="http://a.org/Observation/7">a.org/Observation/7</a>. The reference from the Observation resource to the Patient resource will be to  <a href="http://a.org/Patient/1" target="_blank" title="http://a.org/Patient/1">a.org/Patient/1</a>.<br>
Question: should server B, when it stores the resources contained in this transaction bundle, replace the reference <a href="http://a.org/Patient/1" target="_blank" title="http://a.org/Patient/1">a.org/Patient/1</a> with a reference to its own copy of that patient resource on server B, given that the Patient with that same fullURL was also contained in the transaction bundle ?</p>
<p>(System A can force this behavior by just using UUIDs instead of URLs, but that's not the question)</p>



<a name="153978278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/references%20in%20bundles/near/153978278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/references.20in.20bundles.html#153978278">(Jul 26 2018 at 11:20)</a>:</h4>
<p>I think yes. <br>
The text in the references paragraph states that server first tries to resolve the reference within the bundle, and hence arrives at the Patient/1 in the bundle. That Patient/1 is created on server B first, so the reference from Observation/7 must be replaced. ("If the server assigns a new id to any resource in the bundle as part of the processing rules above, it SHALL also update any references to that resource in the same bundle as they are processed. " - from <a href="http://build.fhir.org/http.html#transaction" target="_blank" title="http://build.fhir.org/http.html#transaction">http://build.fhir.org/http.html#transaction</a>)</p>



<a name="153978290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/references%20in%20bundles/near/153978290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/references.20in.20bundles.html#153978290">(Jul 26 2018 at 11:42)</a>:</h4>
<p>Agree - <a href="http://build.fhir.org/http.html#3.1.0.18.2" target="_blank" title="http://build.fhir.org/http.html#3.1.0.18.2">http://build.fhir.org/http.html#3.1.0.18.2</a> does answer the issue.</p>



<a name="153978295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/references%20in%20bundles/near/153978295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/references.20in.20bundles.html#153978295">(Jul 26 2018 at 11:48)</a>:</h4>
<p>Dank voor het melden. Stuur je de transactie waarmee je dat getest hebt mee?<br>
Noot: er is een al bekende beperking op de volgorde in transacties: <a href="http://docs.simplifier.net/vonk/features/restful_api.html#transaction" target="_blank" title="http://docs.simplifier.net/vonk/features/restful_api.html#transaction">http://docs.simplifier.net/vonk/features/restful_api.html#transaction</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
