---
layout: page
title: "FHIR Chat  · Documents · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html">Documents</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="174805235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Documents/near/174805235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Chapman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html#174805235">(Sep 03 2019 at 16:32)</a>:</h4>
<p>I want to send a message with DocumentReferences and then build services that the client can call to retrieve the actual documents.  I would have services to retrieve CDA documents as well as other binary documents.  I'm looking for the most efficient way to implement the services.  The binary resource uses base64 in the resource which is not cool.  Is it compliant to simply return the raw binary with the appropriate mime type or is there a better way?  What if I want to return meta data about the document, but also return the raw binary content as well, how would one go about doing that?</p>



<a name="174805592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Documents/near/174805592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html#174805592">(Sep 03 2019 at 16:37)</a>:</h4>
<p>this is described here: <a href="https://www.hl7.org/fhir/binary.html#rest" target="_blank" title="https://www.hl7.org/fhir/binary.html#rest">https://www.hl7.org/fhir/binary.html#rest</a></p>



<a name="174805680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Documents/near/174805680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html#174805680">(Sep 03 2019 at 16:38)</a>:</h4>
<p>So if you have a GET request with a non-fhir mime type as accept, it is fine to directly return the binary</p>



<a name="174806333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Documents/near/174806333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html#174806333">(Sep 03 2019 at 16:45)</a>:</h4>
<p>You should also look to the IHE Implementation Guide on this topic -- MHD. <br>
Note when you GET a binary the http negotiate is used to enable retrieval of formats other than FHIR wrapped (base64 encoded). Thus if you include in your GET on the binary that you prefer cda format, the server is free to provide it in that format (aka without the FHIR Binary wrapping and thus the base64 encoding).<br>
BUT if you insist on using FHIR then it must be wrapped in a FHIR friendly Resource, ie the Binary Resource.</p>



<a name="174806468"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Documents/near/174806468" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeremy Chapman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html#174806468">(Sep 03 2019 at 16:46)</a>:</h4>
<p>So in that approach would you have a separate service to get the raw contents, and one to return meta data about the document?</p>



<a name="174807032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Documents/near/174807032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html#174807032">(Sep 03 2019 at 16:52)</a>:</h4>
<p>the meta about a CDA document would be a DocumentReference Resource pointing to the CDA doc</p>



<a name="174807273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Documents/near/174807273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html#174807273">(Sep 03 2019 at 16:54)</a>:</h4>
<p>Right the metadata is the DocumentReference resource.... It is possible that the Binary is held on a different server. This is why the DocumentReference.content.attachment.url is a "url"... thus allowing the Binary to be anywhere.</p>



<a name="174807411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Documents/near/174807411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html#174807411">(Sep 03 2019 at 16:56)</a>:</h4>
<p>now, in the case of publishing... often a publishing workflow (and true in MHD) the publishing is a Transaction that includes both the DocumentReference and the Binary such that the receiving service is expected to persist them. In this case it is common for the Binary and the DocumentReference to be maintained on the same server. This arrangement is not manditory, just a common setting for publication using a FHIR transaction.</p>



<a name="174807563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Documents/near/174807563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html#174807563">(Sep 03 2019 at 16:58)</a>:</h4>
<p><a href="https://healthcaresecprivacy.blogspot.com/2015/03/what-is-mhd-beyond-xds-on-fhir.html" target="_blank" title="https://healthcaresecprivacy.blogspot.com/2015/03/what-is-mhd-beyond-xds-on-fhir.html">https://healthcaresecprivacy.blogspot.com/2015/03/what-is-mhd-beyond-xds-on-fhir.html</a></p>



<a name="174812235"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Documents/near/174812235" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Grey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html#174812235">(Sep 03 2019 at 17:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span>  <span class="user-mention" data-user-id="191451">@Patrick Werner</span>  If I wanted to include say a pdf document within a FHIR Doc bundle, should I use DocumentReference.content.attachment.data to include the pdf or should we be storing the pdf within the binary resource and referencing it from DocumentReference?  The pdf would be generated by us and would not need to be referenced to another server.</p>



<a name="174812865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Documents/near/174812865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Documents.html#174812865">(Sep 03 2019 at 17:52)</a>:</h4>
<p>There is no singular answer. The attachment.data is there for those that want to embed the data within the attachment. But the attachment.url is there for those that want to use the power of a URL... I prefer the URL method for the above stated reasons of being able to use the http negotiate methods to retrieve the PDF in native format, not forcing the recipient to un-base64.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
