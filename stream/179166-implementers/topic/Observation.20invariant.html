---
layout: page
title: "FHIR Chat  · Observation invariant · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Observation.20invariant.html">Observation invariant</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="273278716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Observation%20invariant/near/273278716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Observation.20invariant.html#273278716">(Feb 25 2022 at 20:10)</a>:</h4>
<p>Looking at <a href="https://build.fhir.org/observation.html#invs">Observation obs-6</a>, I notice that the invariant doesn't touch on cover component.value[x] or hasMember, nor does it matter what the status of the observation is (and thus, a registered or entered-in-error Observation must have a value or have a DAR). What is the logic for why these were left out?</p>
<p>I recall talk of an extension that could be used to convey an attachment as an Observation "value". I can't locate the extension in R4 right now, but how does that work with the above invariant logic? Is the extension on Observation or on an Observation.value[x] (and if so, which type)?</p>



<a name="273282451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Observation%20invariant/near/273282451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Observation.20invariant.html#273282451">(Feb 25 2022 at 20:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> <span class="user-mention" data-user-id="191689">@Hans Buitendijk</span></p>



<a name="273508675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Observation%20invariant/near/273508675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Observation.20invariant.html#273508675">(Feb 28 2022 at 15:45)</a>:</h4>
<p>use the R5 or R3 valueAttachment element as an extension on Observation</p>



<a name="273510094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Observation%20invariant/near/273510094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Observation.20invariant.html#273510094">(Feb 28 2022 at 15:53)</a>:</h4>
<blockquote>
<p>What is the logic for why these were left out?</p>
</blockquote>
<p>made it simple as possible.    Note  only constrains when the DAR elelment can be used.    Little value in trying to anticipate a bunch of edge cases here.</p>



<a name="273512507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Observation%20invariant/near/273512507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Observation.20invariant.html#273512507">(Feb 28 2022 at 16:07)</a>:</h4>
<p>Actually, with invariants, you need to anticipate <em>all</em> edge cases.  However, in this case, I don't think status needs to be taken into account.  The invariant as written <em>would</em> allow a DAR on a blood pressure with component systolic and diastolics.  It would also allow a DAR on a blood panel.  However, I think having a DAR when you have components is still legit.  For example, you might indicate that you don't have a result of a susceptibility test to drug X.  It <em>might</em> be reasonable to have a parent with members with a DAR, though it would be good to know what the use-case for that is.</p>



<a name="273513001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Observation%20invariant/near/273513001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Observation.20invariant.html#273513001">(Feb 28 2022 at 16:10)</a>:</h4>
<p>So the invariant basically says "you can't have a DAR if you have a value" rather than "if you don't have a value, you need a DAR"? OK.</p>



<a name="275488426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Observation%20invariant/near/275488426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giantape <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Observation.20invariant.html#275488426">(Mar 16 2022 at 09:59)</a>:</h4>
<p>Hi everyone. i like to implement kind of patient's diary. did you guys have any suggestions to me which resources the best to handle this usecase?<br>
i found this article <a href="http://community.fhir.org/t/what-is-the-best-resource-to-represent-a-patients-diary-or-note/215/2">http://community.fhir.org/t/what-is-the-best-resource-to-represent-a-patients-diary-or-note/215/2</a> <br>
but still not clear if it still the right choise.  it wroten in 2016.</p>
<p>thank you for any advice.</p>



<a name="275513656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Observation%20invariant/near/275513656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Observation.20invariant.html#275513656">(Mar 16 2022 at 13:58)</a>:</h4>
<p>Observation would probably be the best way to capture individual entries.  If you're capturing specific discrete data each day, you could also group them with a parent Observation and hasMember.</p>



<a name="278710580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Observation%20invariant/near/278710580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aly Khalifa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Observation.20invariant.html#278710580">(Apr 12 2022 at 15:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  - I'd like to profile the Observation resource, where having an invariant that requires the subject.identifier and/or specimen.identifier is present. Is this possible? where I could read more about developing this invariant, if this is possible? I checked <a href="https://hl7.org/fhir/uv/shorthand/reference.html">https://hl7.org/fhir/uv/shorthand/reference.html</a>, is there additional documentation? Thanks</p>



<a name="278716477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Observation%20invariant/near/278716477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Observation.20invariant.html#278716477">(Apr 12 2022 at 16:20)</a>:</h4>
<p>Invariants are expressed using <a href="http://hl7.org/fhirpath">FHIRPath</a>.  In this case, it would simply be <code>subject.identifier.exists() or specimen.identifier.exists()</code><br>
Note that this invariant wouldn't be satisfied if you had subject.reference or specimen.reference instead of identifier - and having reference is both more common and preferred than having .identifier, so make sure that's the constraint you really want.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
