---
layout: page
title: "FHIR Chat  · Vonk allows POST with empty strings · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html">Vonk allows POST with empty strings</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="165337533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165337533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Lindblad <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165337533">(May 10 2019 at 13:50)</a>:</h4>
<p>Hello again,</p>
<p>I find that when using Vonk it is possible to POST empty strings. For example if i post a CodeSystem containing 1 'concept' i can set 'code' and 'display' to a value of choice but then leave 'definition' empty -&gt; (""). </p>
<p>I find this problematic because when i want call the VONK in C# i use the HL7.Fhir nuget to parse the response returned from VONK to a FHIR resource it gives me format exceptions such as ("The attribute 'value' in element 'definition' has an empty value, which is not allowed."). Shouldnt Vonk not allow POST of resources containing empty strings to be more compatible with the HL7 Nuget package validation(or the opposite) or is this a deliberate decision from Vonk to allow empty strings?</p>
<p>I also found this applicable on some attributes on ValueSet.</p>
<p>One could argue you dont want to post empty strings in the first place, but i just happened to find myself in this situation(dont ask how) so thought it might be of interest.</p>



<a name="165339417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165339417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165339417">(May 10 2019 at 14:16)</a>:</h4>
<p>CodeSystem.concept.description has [0..1] in FHIR base profile so empty definition should be valid  unless other profile is used.</p>



<a name="165341367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165341367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Lindblad <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165341367">(May 10 2019 at 14:39)</a>:</h4>
<blockquote>
<p>CodeSystem.concept.description has [0..1] in FHIR base profile so empty definition should be valid  unless other profile is used.</p>
</blockquote>
<p>My guess is that an empty string in defintion still counts as 1. I mean its a difference between "definition": "" and no defintion at all. So if one declare they have a defintion it must have a value?</p>



<a name="165353617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165353617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165353617">(May 10 2019 at 17:14)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="196371">@Jakob Lindblad</span> Thanks for reaching out, of course we want to help you to get out of this situation! First of all, empty strings are never a valid value in FHIR, even if the underlying element specifies a cardinality of [0..1]. Therefore, Vonk should accept such a CodeSystem but ignore the empty element. It is definitely not a choice of Vonk to allow it. I assume that you are using the latest version of Vonk (2.0.1)? Could you share one of the ValueSets and CodeSystems? Are you posting the resources against the regular FHIR endpoint or against the administration endpoint?</p>



<a name="165373119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165373119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165373119">(May 10 2019 at 21:36)</a>:</h4>
<p>Hi Jakob, in the mean time, there is a setting in the FhirClient.ParserSettings.PermissiveParsing that you can set to 'true' - the parser will then ignore such empty strings.</p>



<a name="165373237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165373237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165373237">(May 10 2019 at 21:39)</a>:</h4>
<p>I know it is an explicit choice from the Vonk developers to be lenient in what they accept.  If you run your own copy of Vonk, this behaviour is configurable.</p>



<a name="165373335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165373335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165373335">(May 10 2019 at 21:40)</a>:</h4>
<p>See this <a href="http://docs.simplifier.net/vonk/features/prevalidation.html#validating-incoming-resources" target="_blank" title="http://docs.simplifier.net/vonk/features/prevalidation.html#validating-incoming-resources">documentation page</a></p>



<a name="165517780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165517780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Lindblad <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165517780">(May 13 2019 at 11:05)</a>:</h4>
<blockquote>
<p>Hi <span class="user-mention silent" data-user-id="196371">Jakob Lindblad</span> Thanks for reaching out, of course we want to help you to get out of this situation! First of all, empty strings are never a valid value in FHIR, even if the underlying element specifies a cardinality of [0..1]. Therefore, Vonk should accept such a CodeSystem but ignore the empty element. It is definitely not a choice of Vonk to allow it. I assume that you are using the latest version of Vonk (2.0.1)? Could you share one of the ValueSets and CodeSystems? Are you posting the resources against the regular FHIR endpoint or against the administration endpoint?</p>
</blockquote>
<p>It seems like im using Vonk 1.0.0. (If that is what software.version referes to in /metadata) so might not be the same result when using Vonk 2.0.1 i guess. Im posting against the regular FHIR endpoint. <br>
Here is an example of a CodeSystem i can post with empty defintion:<br>
{<br>
    "resourceType": "CodeSystem",<br>
    "meta": {<br>
        "versionId": "ec7a5291-c366-4b4f-a496-c6589b813203",<br>
        "lastUpdated": "2019-05-10T13:43:15.039+00:00"<br>
    },<br>
    "url": "testtest",<br>
    "identifier": {<br>
        "system": "dsada",<br>
        "value": "dsada"<br>
    },<br>
    "version": "1",<br>
    "name": "ett test",<br>
    "title": "dsadadad",<br>
    "status": "active",<br>
    "experimental": true,<br>
    "date": "2019-05-08T11:49:50.300Z",<br>
    "publisher": "testtest",<br>
    "contact": [<br>
        {<br>
            "name": "adsadad",<br>
            "telecom": [<br>
                {<br>
                    "system": "phone",<br>
                    "value": "dsadadad"<br>
                }<br>
            ]<br>
        }<br>
    ],<br>
    "description": "testtest",<br>
    "purpose": "gsgsg",<br>
    "copyright": "testtest",<br>
    "caseSensitive": true,<br>
    "hierarchyMeaning": "is-a",<br>
    "content": "example",<br>
    "concept": [<br>
        {<br>
            "code": "2",<br>
            "display": "två",<br>
            "concept": [<br>
                {<br>
                    "code": "4",<br>
                    "display": "fyra",<br>
                    "definition" : ""<br>
                }<br>
            ]<br>
        },<br>
        {<br>
            "code": "1",<br>
            "display": "ett",<br>
            "concept": [<br>
                {<br>
                    "code": "3",<br>
                    "display": "tre"<br>
                }<br>
            ]<br>
        }<br>
    ]<br>
}</p>



<a name="165517975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165517975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Lindblad <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165517975">(May 13 2019 at 11:08)</a>:</h4>
<blockquote>
<p>Hi Jakob, in the mean time, there is a setting in the FhirClient.ParserSettings.PermissiveParsing that you can set to 'true' - the parser will then ignore such empty strings.</p>
</blockquote>
<p>This solved the problem but im guessing that settting PermissiveParsing = true will ignore other validations concerning data structure etc?</p>



<a name="165540471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165540471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165540471">(May 13 2019 at 15:44)</a>:</h4>
<p>Would it be a possibility for you to try upgrading? The issue seems to be fixed in the latest release, I can't reproduce the behaviour against the public Vonk endpoint.</p>



<a name="165540679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165540679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165540679">(May 13 2019 at 15:46)</a>:</h4>
<p>And yes, PermissiveParsing will be a bit more lenient to some data structures. The documentation page that Ewout mentioned above describes a few things that are accepted with PermissiveParsing.</p>



<a name="165689264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Vonk%20allows%20POST%20with%20empty%20strings/near/165689264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakob Lindblad <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Vonk.20allows.20POST.20with.20empty.20strings.html#165689264">(May 15 2019 at 06:06)</a>:</h4>
<blockquote>
<p>Would it be a possibility for you to try upgrading? The issue seems to be fixed in the latest release, I can't reproduce the behaviour against the public Vonk endpoint.</p>
</blockquote>
<p>I can upgrade. Thank you for the support :-)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
