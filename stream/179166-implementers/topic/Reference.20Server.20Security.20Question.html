---
layout: page
title: "FHIR Chat  · Reference Server Security Question · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html">Reference Server Security Question</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153899019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899019">(Jul 28 2017 at 10:01)</a>:</h4>
<p>I have a security question which only makes sense in the context of  the reference server. Repeat: I'm not asking about how security works or should work in a real system.</p>



<a name="153899023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899023">(Jul 28 2017 at 10:03)</a>:</h4>
<p>as a background to my question, my server can now pick up on SSL certificates and JWT bearer tokens to identify the client software and user making a request. And potentially, the server could respond differently depending on whether certificates or JWTs are provided in the request. Of course, I can simply deny access, but for testing purposes I would like to respond differently - and I have real contexts in which users would like to demonstrate how this makes a difference on the API</p>



<a name="153899025"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899025" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899025">(Jul 28 2017 at 10:04)</a>:</h4>
<p>so I could say, for instance, that if some resources are marked accordingly, they are only visible to users who have authenticated, where as others are not.</p>



<a name="153899026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899026">(Jul 28 2017 at 10:04)</a>:</h4>
<p>say, using some kind of tag, or security label</p>



<a name="153899028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899028">(Jul 28 2017 at 10:06)</a>:</h4>
<p>I'm thinking about this now - anyone have suggestions about how to do this? however it's done, clients need to have access to manage it</p>



<a name="153899134"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899134" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899134">(Jul 28 2017 at 12:10)</a>:</h4>
<p>So the difference between identity as asserted by a certificate authenticated through client-side TLS certificate; is just an identity. Much like various identities asserted by a security token issued by an OAuth authority. With further variability given a set of OAuth authorities, or certificate authorities (Not all authorities need be treated the same). Also various types of roles/purposeOfUse/settings that would be attributes within security tokens and certificates..... These are clear these are all equally possible vectors, right? That is to say a certificate token, vs OAuth token, vs SAML token, vs Kerberos token, vs XYZ token; all have internal attributes about the identity, context, and all are asserted to by an authority which has some level of trust, authority, context.....</p>



<a name="153899135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899135">(Jul 28 2017 at 12:13)</a>:</h4>
<p>FHIR Resources have security tags, to differentiate through various data vectors the kind of rules that would be applicable. The FHIR Resource types would also be a vector through rules space. As well as relationships to focused Resources like Provider (authorship, workflow), and Patient (subject). ... Thus Data Vectors</p>



<a name="153899136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899136">(Jul 28 2017 at 12:13)</a>:</h4>
<p>Lastly Patient consent provides vectors that express the patients rules.</p>



<a name="153899137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899137">(Jul 28 2017 at 12:13)</a>:</h4>
<p>I expect all this is understood by YOU... I am just putting it there so that it is agreed basics.</p>



<a name="153899138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899138">(Jul 28 2017 at 12:16)</a>:</h4>
<p>Is your question a question specific to FHIR? Or best-practice in 'Reference Implementation' of access control?</p>



<a name="153899140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899140">(Jul 28 2017 at 12:20)</a>:</h4>
<p>specific to my server - within that set of possibilities, what's a simple policy I could enforce in the decision engine, such that it allows clients to demonstrate usefully and consistently the effect of different levels of authentication to the server</p>



<a name="153899141"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899141" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899141">(Jul 28 2017 at 12:20)</a>:</h4>
<p>my server is... unusual... in that it's sole purpose in life is to serve the FHIR community</p>



<a name="153899163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899163">(Jul 28 2017 at 12:40)</a>:</h4>
<p>So, how about enabling READ only for the Resources that make up a Provider Directory; when client authenticated via certificate. That is this level of authentication doesn't get any Patient data, but does get useful data. (Actually this is a useful policy for anonymous)</p>



<a name="153899164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899164">(Jul 28 2017 at 12:43)</a>:</h4>
<p>so a simple policy that if you don't authenticate at all, you don't get any resources in the patient compartment</p>



<a name="153899165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899165">(Jul 28 2017 at 12:43)</a>:</h4>
<p>yes, but that would be anonymous... not what you asked for</p>



<a name="153899166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899166">(Jul 28 2017 at 12:44)</a>:</h4>
<p>Or, given that mutual-auth-TLS would be most common in organization-to-organization; access to the Financial Management resources is only allowed through this ... an OAuth token not allowed access to FM resources.</p>



<a name="153899168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899168">(Jul 28 2017 at 12:45)</a>:</h4>
<p>actually it could be:<br>
- no authentication = nothing<br>
- client authentication with user authentication - everything not in a patient compartmnet</p>



<a name="153899169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899169">(Jul 28 2017 at 12:46)</a>:</h4>
<p>Or, (privacy advocate hat off) cert gives FULL access regardless of consent status; oauth access must follow consent enforcement.</p>



<a name="153899173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899173">(Jul 28 2017 at 12:47)</a>:</h4>
<p>what is "client authentication with user authentication"?  I was expecting certificates to be system (organization) identity claims authenticated using TLS... so would not be 'user'</p>



<a name="153899174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899174">(Jul 28 2017 at 12:50)</a>:</h4>
<p>SSL certs, yes, that's exactly right. but a client may choose to provide a user assertion as an openID Connect JWT in the HTTP authorization header, which my server will take not of</p>



<a name="153899175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899175">(Jul 28 2017 at 12:50)</a>:</h4>
<p>and also, I have an openID Connect JWT from the OAuth process</p>



<a name="153899176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899176">(Jul 28 2017 at 12:51)</a>:</h4>
<p>so in either case, I have an authenticated user, as well as authenticated server software</p>



<a name="153899182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899182">(Jul 28 2017 at 12:55)</a>:</h4>
<p>okay, yes... both levels are possible, they are independent but clearly related. So the most trustworthy would be when systems authenticate mutually at TLS level, and also a OpenID Connect JWT at the user level... --</p>



<a name="153899185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899185">(Jul 28 2017 at 12:57)</a>:</h4>
<p>Another policy space that is related is where the access policy is dependent on the transport security. Such that for any given user, they might get different access depending on the transport between them and the data. Common example is when Dr Bob is in the hospital, he has highest access; but when Dr Bob is out on the golf course, using his own cellular phone (not corporate black phone) he gets lesser access. This lesser access is usally just readonly vs full read/write access... but might also be access to the most sensitive data is blocked when the pathway is not trustable enough to carry the most sensitive data.</p>



<a name="153899186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899186">(Jul 28 2017 at 12:58)</a>:</h4>
<p>well, my simple equivalent of that is that if non-SSL interface is running, user can't authenticate at all</p>



<a name="153899187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899187">(Jul 28 2017 at 12:58)</a>:</h4>
<p>at least, not on the non-SSL interface</p>



<a name="153899189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899189">(Jul 28 2017 at 13:00)</a>:</h4>
<p>Yup, that is a good one... not good to trust a user token sent over non secure channel (past lesson learned: firesheep, not having anything to do with FHIR)</p>



<a name="153899305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20Server%20Security%20Question/near/153899305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Kreth <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20Server.20Security.20Question.html#153899305">(Jul 28 2017 at 19:04)</a>:</h4>
<p>Grahame, my team is in a similar position in that we are implementing our FHIR services for internal use by other solution development teams in the company.  We are securing access to each FHIR service endpoints with an API Manager that can load balance across many VM's.  Access requires a bearer token issued by the API mgr's storefront.  We have it set so anyone can request access to our sandbox environment, but access to production services requires an approval / certification process (simple if you only need GET / SEARCH access, more in depth for POST/PUT/DELETE).  These access tokens are issued to "trusted" systems/applications.  End-user identity is required for most access and will be passed along as JWT and captured in all audits logs.  We leave user authentication/authorization (and creation of the JWT token) up the trusted client system.  We are toying with idea of a XAMCL server to enable a centralized authorization point, but that'd be a big hurdle for us.  BTW, all traffic between servers is https and gated through internal firewalls.  FYI, we are using WSO2's APIMgr.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
