---
layout: page
title: "FHIR Chat  · client responsibilities on reading merged patients · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html">client responsibilities on reading merged patients</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153843137"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843137" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843137">(Aug 09 2016 at 07:50)</a>:</h4>
<p>I'm not sure if this has been discussed before... (.. if so, please point me to it..)<br>
After reading up on the proposed procedure for merging a patient (by setting a "replace" link from  the inactive to the active patient), I realized that this means that all responsibilities for displaying the correct patient information to the user, lies on the client implementation.<br>
Meaning whenever a client reads a Patient resource, it SHOULD check if there is a replace link (at least if the read patient is inactive) and either display the active patient instead or at least show a warning to the user, indicating that this patient has been merged.</p>
<p>Is that correct? If so, I'm afraid the specification as is does not sufficently inform client implementers of this responsibility...</p>



<a name="153843138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843138">(Aug 09 2016 at 08:02)</a>:</h4>
<p>what do you think would be sufficiently informing? </p>



<a name="153843139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843139">(Aug 09 2016 at 08:02)</a>:</h4>
<p>I have just added a note about this to the implementer's safety checklist</p>



<a name="153843142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843142">(Aug 09 2016 at 08:05)</a>:</h4>
<p>...maybe a sentence containing the verb "should" in this chapter: <a href="https://www.hl7.org/fhir/patient.html#links" target="_blank" title="https://www.hl7.org/fhir/patient.html#links">https://www.hl7.org/fhir/patient.html#links</a><br>
But safety notes are presumeably a better place to give client implementer a heads up about this.</p>



<a name="153843143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843143">(Aug 09 2016 at 08:06)</a>:</h4>
<p>well I think the section is clear, but it may not be pointed enough... </p>



<a name="153843144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843144">(Aug 09 2016 at 08:08)</a>:</h4>
<p>you could create a task to this effect. The note in the safety check list mightn't go for enough either</p>



<a name="153843145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843145">(Aug 09 2016 at 08:09)</a>:</h4>
<p>"My system ensures checks for patient links (and/or merges) and handles data that is linked to patients accordingly"</p>



<a name="153843146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843146">(Aug 09 2016 at 08:10)</a>:</h4>
<p>Maybe the place where it's most likely to get the reader's attention would be here:<br>
<a href="/user_uploads/10155/ngIny6bs6bnveT6DE18RPJS5/pasted_image.png" target="_blank" title="/user_uploads/10155/ngIny6bs6bnveT6DE18RPJS5/pasted_image.png">pasted image</a> <br>
By adding a Cave to the active flag that says: "whenever you read an inactive patient: pay attention to the patient.link - it may have been replaced!" <br>
?</p>
<div class="message_inline_image"><a href="/user_uploads/10155/ngIny6bs6bnveT6DE18RPJS5/pasted_image.png" target="_blank" title="/user_uploads/10155/ngIny6bs6bnveT6DE18RPJS5/pasted_image.png"><img src="/user_uploads/10155/ngIny6bs6bnveT6DE18RPJS5/pasted_image.png"></a></div>



<a name="153843147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843147">(Aug 09 2016 at 08:20)</a>:</h4>
<p>I think that would be a good task to create</p>



<a name="153843148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843148">(Aug 09 2016 at 08:21)</a>:</h4>
<p>though I think that this is something that comes naturally to an experienced healthcare app developer, and there's almost nothing we could say that would make any difference to a novice</p>



<a name="153843149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843149">(Aug 09 2016 at 08:21)</a>:</h4>
<p>my experience is that eyes glaze over when you try to explain this </p>



<a name="153843152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843152">(Aug 09 2016 at 08:48)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10434" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10434">GF#10434</a></p>



<a name="153843403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843403">(Aug 10 2016 at 19:14)</a>:</h4>
<p>Concering this issue with GET/SEARCH on merged records: <a href="http://wiki.hl7.org/index.php?title=FHIR_Specification_Feedback_(DSTU_2)" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_Specification_Feedback_(DSTU_2)">http://wiki.hl7.org/index.php?title=FHIR_Specification_Feedback_(DSTU_2)</a></p>
<p>I was thinking about how to implement the V2 merge event as a FHIR transaction and came up with this:</p>
<p>Whenever I receive a V2 merge message, I update the merged Patient A by setting it inactive and adding the replace link to the master Patient B.<br>
But I'd also add the master Patient's identifier to the merged Patient's identifier list.</p>
<p>This way a client may miss the information still linked to A when performing a search  as /Observation?patient=B<br>
But when searching by identifier (e.g. Observation?patient.identifier=12345) it will always be able to retrieve a complete list.</p>
<p>The downside would be that a search for /Patient?identifier=12345 would return two Resources, even though identifiers would be expected to be unique, however only one of there resources would be set to "active".</p>
<p>Does that make sense?</p>



<a name="153843404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843404">(Aug 10 2016 at 19:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191372">@René Spronk</span> : You wrote the above mentioned comment on the issue with search/get... what do you think?</p>



<a name="153843411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843411">(Aug 10 2016 at 20:06)</a>:</h4>
<p>i would have thought in that uery you would have also selected to only retrieve the active patients, which would filter that one out</p>



<a name="153843419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843419">(Aug 10 2016 at 20:19)</a>:</h4>
<p>Agree with Brian, but the overall pattern makes sense</p>



<a name="153843561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843561">(Aug 11 2016 at 07:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> my thoughts exacly (otherwise my beloved conditional PUT/POST/references would blow up in my face)</p>



<a name="153843566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843566">(Aug 11 2016 at 13:21)</a>:</h4>
<p>aaaand... they do blow up after all!</p>
<p>At least for the ORU-Message scenario, when I try to link an Observation to a Patient by adding a conditional POST on the Patient to the transaction.<br>
If the if-none-exist-condition is Patient?identifier=1234, the transaction fails on  the active Patient, because the criteria returns 2 results.<br>
If I set the condition to Patient?identifier=1234&amp;active=true, it'll work for the active Patient.<br>
However, if the ORU message delivers an Observation for the inactive merged Patient (that happens, unfortunately),<br>
the condition Patient?identifier=1234&amp;active=true will return no results and the conditional POST would subsequently create a new Patient with the identifier 1234. So all subsequent ADT updates on this Patient would fail because now there are two active Patients with the same identifier.</p>
<p>This scenario only works, if the Observations are linked using conditional References with Observation.subject=Patient?identifier=1234&amp;active=true, because these don't create new resources in case of a no-match.<br>
In this case the Transaction would succeed linking the Observation to an active Patient and fail if the targeted Patient was inactive/merged. (Which I guess is ok in most use cases. Most EHR systems I know reject messages for merged patients... </p>



<a name="153843600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843600">(Aug 11 2016 at 15:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191450">@Simone Heckmann</span> this is why it is important to resolve links within the patient itself. </p>



<a name="153843601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843601">(Aug 11 2016 at 15:40)</a>:</h4>
<p>consider a mature system where you have a lot of clinical data referencing a particular patient record that is then merged into another patient record. if a system cannot resolve the link from the original patient to the survivor, your only other option is to update all references. and that won't scale.</p>



<a name="153843602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843602">(Aug 11 2016 at 15:45)</a>:</h4>
<p>True. But what if the client queries for all Observations for Patient/123 (assuming there's another Patient/456 that has been merged and linked to Patient/123) How does the Client know that Patient/456's clinical data has to be retrieved as well? There is no link from Patient/123 pointing at Patient/456! Only vice versa.</p>



<a name="153843603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843603">(Aug 11 2016 at 15:48)</a>:</h4>
<p>If the Client "enters" through the wrong Patient/456, it  will find the Patient inactive and a reference to the current Patient resource.<br>
But Clients entering through the correct Patient imho have no reason to suspect that ther's another Patient Resource holding significant information for this Patient.</p>



<a name="153843604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843604">(Aug 11 2016 at 15:51)</a>:</h4>
<p>Right .... as a part of a merge transaction, you could add a "seealso" link from Patient/123 to Patient/456. That's why I feel creating and resolving links are the responsibility of a server.</p>



<a name="153843605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843605">(Aug 11 2016 at 15:52)</a>:</h4>
<p>In that same merge transaction, the server woud also create a "replace" link from Patient/456 back to Patient/123.</p>



<a name="153843606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843606">(Aug 11 2016 at 15:53)</a>:</h4>
<p>And it thus becomes the responsibility of the server responding to queries to interrogate those links when gathering referenced clinical resources.</p>



<a name="153843607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843607">(Aug 11 2016 at 15:53)</a>:</h4>
<p>Yes, but it is nowhere specified that a merge should also create a "see also" link from Patient/123 to Patient/456, or does it?</p>



<a name="153843608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843608">(Aug 11 2016 at 15:54)</a>:</h4>
<p>Maybe it should. ;)</p>



<a name="153843609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843609">(Aug 11 2016 at 15:54)</a>:</h4>
<p>Brian will weigh in, I hope, when Oz wakes up.</p>



<a name="153843610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843610">(Aug 11 2016 at 15:55)</a>:</h4>
<p>The link type description for "see also" states that <br>
<code>This link does not indicate any relative importance of the resources concerned, 
and both should be regarded as equally valid.</code> <br>
which does not apply to a merge</p>



<a name="153843611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843611">(Aug 11 2016 at 15:56)</a>:</h4>
<p>k ... how about "refer", that might be better.</p>



<a name="153843612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843612">(Aug 11 2016 at 15:57)</a>:</h4>
<p>Nope. Wrong direction.</p>



<a name="153843613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843613">(Aug 11 2016 at 15:57)</a>:</h4>
<p>also, the spec does say that how merges or linking is handled is still not set and implementer feedback is welcome. </p>



<a name="153843614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843614">(Aug 11 2016 at 15:57)</a>:</h4>
<p>...and that's what we're doing right here :D</p>



<a name="153843615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843615">(Aug 11 2016 at 15:57)</a>:</h4>
<p>you're confusing me with facts. ok ...</p>



<a name="153843616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843616">(Aug 11 2016 at 15:58)</a>:</h4>
<p>maybe we need a new item here that satisfies this use case.</p>



<a name="153843617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843617">(Aug 11 2016 at 15:58)</a>:</h4>
<p>a link type that sez "replaced"</p>



<a name="153843618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843618">(Aug 11 2016 at 15:58)</a>:</h4>
<p>or "replacedBy"</p>



<a name="153843619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843619">(Aug 11 2016 at 16:01)</a>:</h4>
<p>..or maybe just slightly adapt the "see also" description..</p>



<a name="153843620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843620">(Aug 11 2016 at 16:02)</a>:</h4>
<p>that's better ... "seealso" should work here.</p>



<a name="153843621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843621">(Aug 11 2016 at 16:03)</a>:</h4>
<p>It could work for the surviving record. As you say, maybe just updating the description a bit to indicate this is how it might be used in a classic merge scenario.</p>



<a name="153843622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843622">(Aug 11 2016 at 16:08)</a>:</h4>
<p>But then it should be emphasized even  more that clients ALWAYS need to look at the links, not only if the Patient is inactive!<br>
And I still wonder whether to (additionally) stick to my idea of adding the current business identifier to the merged patient's identifier list, otherwise there is no way a client can get the Patient's complete record in one query.</p>



<a name="153843628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843628">(Aug 11 2016 at 17:57)</a>:</h4>
<p>If you were implementing this with strict adherence to REST, I could see a server responding with a redirect for a patient that has been merged - a 301 response with a link to the surviving patient resource in the Location header. not sure this point has gotten much discussion.</p>



<a name="153843630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843630">(Aug 11 2016 at 18:02)</a>:</h4>
<p>Nice. But still only half of the solution.</p>



<a name="153843638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843638">(Aug 11 2016 at 18:21)</a>:</h4>
<p>(deleted)</p>



<a name="153843639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843639">(Aug 11 2016 at 18:25)</a>:</h4>
<p>(deleted)</p>



<a name="153843674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843674">(Aug 11 2016 at 20:32)</a>:</h4>
<p>Ok, after client dereferences that 301 location and submits a new request the server would find relationship back to inactive merged patient record and gather all the data referenced from both patient records. Maybe an outcome message would help as explanation that response includes “linked” data?</p>



<a name="153843694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843694">(Aug 11 2016 at 22:08)</a>:</h4>
<p>Yes, this is the part that we are looking for implementer feedback on.<br>
I agree that this is highly likely that we would want to make this a server responsibility.<br>
Using the redirect approach, the implication on the observations that reference the old patient need to be considered.<br>
(Should they be re-written as art of the return?)<br>
However there is another situation where the link references a record in a distributed system, but that's a story for another time.</p>



<a name="153843707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843707">(Aug 11 2016 at 23:26)</a>:</h4>
<p>I would like more proscription on this matter in the spec, but getting agreement around this area is *very hard work* </p>



<a name="153843858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843858">(Aug 12 2016 at 21:20)</a>:</h4>
<p>I do think that there's grounds for a $merge and/or $link operation to ask a server to do all the merging server side. This is particularly  appropriate given that a client may not have access to all the data linked to a patient even though they have the right to merge the patient. I think we should make a task asking PA to define one. But it's certainly a challenge to figure out how it would work</p>



<a name="153843867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843867">(Aug 12 2016 at 22:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> I would leave the patient references as they were in the response. And if a client requested that "old" patient record, well, the same server logic would result in the surviving patient record being returned via a 301 redirect.</p>



<a name="153843869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153843869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153843869">(Aug 13 2016 at 00:26)</a>:</h4>
<p>Would be interesting to implement the $unmerge as a rollback looking through the history via an auditevent that touched all the things.<br>
Not something that could have been done without these other bits. Just a thought.</p>



<a name="153844314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153844314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Bernhardt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153844314">(Aug 18 2016 at 15:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> $unmerge makes sense, but I would argue that it would only remove the links between the originally "merged” Patient records. Leaving the original references to clinical data as they are during merge makes this simple to revert the "merge". I know from hard experience that merging related data is prohibitively difficult to untangle.</p>



<a name="153844331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/client%20responsibilities%20on%20reading%20merged%20patients/near/153844331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/client.20responsibilities.20on.20reading.20merged.20patients.html#153844331">(Aug 18 2016 at 18:56)</a>:</h4>
<p>yep. it's not too hard to unmerge after a merge until any new changes are made after the merge. After that, it's just a mess, and humans can't usually figure it out. My recommendation when people ask is not to try for unmerge. When you get to that point, you should just build new records afresh. Not that easy either. all options are bad</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
