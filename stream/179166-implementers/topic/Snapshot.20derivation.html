---
layout: page
title: "FHIR Chat  · Snapshot derivation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html">Snapshot derivation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153824577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153824577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Carlson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153824577">(May 04 2016 at 19:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , there appears to be a bug in the snapshot derivation computed by your server. I am using the /StructureDefinition/$snapshot operation.  As a test, I took the bp.profile.xml file from May 2016 build, deleted the &lt;snapshot&gt;, and POSTed to your server to compute and return with snapshot.  It returns without error, but misses  &lt;fixedUri&gt; from the differential when computing the snapshot. E.g., see Observation.code.coding.system</p>



<a name="153824578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153824578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Carlson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153824578">(May 04 2016 at 19:27)</a>:</h4>
<p>Also, do any other servers implement the /StructureDefinition/$snapshot operation?</p>



<a name="153827976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153827976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Carlson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153827976">(May 16 2016 at 15:00)</a>:</h4>
<p>Grahame, now that HL7 is over, following up on this report of a bug in your $snapshot derivation, still appears in current server.  Also interested if any other servers are implementing StructureDefinition/$snapshot operation?</p>



<a name="153827977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153827977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153827977">(May 16 2016 at 15:01)</a>:</h4>
<p>Hi Dave - I'm working on what a "correct" snapshot should be.  Currently, only Grahame's server exposes $snapshot.  Ewout will add to Spark shortly.</p>



<a name="153827978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153827978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153827978">(May 16 2016 at 15:02)</a>:</h4>
<p>Not sure about HAPI (<span class="user-mention" data-user-id="191319">@James Agnew</span> )?</p>



<a name="153827982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153827982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153827982">(May 16 2016 at 15:19)</a>:</h4>
<p>Hapi doesn't yet, but will soon.... </p>



<a name="153827984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153827984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Carlson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153827984">(May 16 2016 at 15:46)</a>:</h4>
<p>Thanks Chris and James.  I enthusiastically agree that we need a complete, documented specification for how a snapshot is computed from differentials.  Without that, we are assured of incompatible results.  I need this for my work on using MDHT UML tooling  to design FHIR profiles.  I currently export structure definitions from UML with differentials.  For now, I am using Grahame's $snapshot operation to validate and and complete generated profiles.</p>



<a name="153827985"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153827985" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153827985">(May 16 2016 at 15:47)</a>:</h4>
<p>See this stream for more info: <a href="https://chat.fhir.org/#narrow/stream/implementers/subject/Typing.20in.20FHIR" target="_blank" title="https://chat.fhir.org/#narrow/stream/implementers/subject/Typing.20in.20FHIR">https://chat.fhir.org/#narrow/stream/implementers/subject/Typing.20in.20FHIR</a></p>



<a name="153827987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153827987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Carlson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153827987">(May 16 2016 at 15:48)</a>:</h4>
<p>I saw the wiki page that Grahame posted on FHIR typing prior to HL7, but will review this stream again, thx.</p>



<a name="153828000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828000">(May 16 2016 at 17:35)</a>:</h4>
<p>My understanding is that Ewout and Chris were going to write up typing, and use what I wrote as an input. </p>



<a name="153828001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828001">(May 16 2016 at 17:36)</a>:</h4>
<p>Further I am waiting for Ewout to drive more alignment on snapshot generation. </p>



<a name="153828002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828002">(May 16 2016 at 17:36)</a>:</h4>
<p>Yes - in the works.</p>



<a name="153828003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828003">(May 16 2016 at 17:36)</a>:</h4>
<p>finally, have you seen the snapshot generation tests? </p>



<a name="153828005"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828005" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828005">(May 16 2016 at 17:38)</a>:</h4>
<p>Where are the tests?</p>



<a name="153828008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828008">(May 16 2016 at 17:51)</a>:</h4>
<p>class ProfileUtilitiesTests in the reference implementation</p>



<a name="153828571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828571">(May 19 2016 at 09:32)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="197476">@Dave Carlson</span>, yes, we worked on this for a period of time to make sure the output of Forge is consistent with what Grahame's tooling expects as input. It's slow work since changes to the output, requires Grahame to change stuff further on in the tooling chain. Other priorities took over (and stuff seemed to work good enough ;-), but now we have Grahame, Chris, us and you being dependent on this (and not only Grahame and me), it's time to pick this up again....</p>



<a name="153828572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828572">(May 19 2016 at 09:33)</a>:</h4>
<p>The way we started out is by running our snapshot generator on all differentials in the spec (all differentials from the provided IGs in the FHIR spec) and then comparing the snapshots.</p>



<a name="153828573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828573">(May 19 2016 at 09:34)</a>:</h4>
<p>We could try that for Chris' and mine now, and see what happens. Then again, I am still working on DSTU2 (since that's "production" level for us), and I don't know whether it makes sense for Grahame to invest time to improve the DSTU2 snapshot generator anymore.</p>



<a name="153828574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828574">(May 19 2016 at 09:34)</a>:</h4>
<p>So, should we make this work on DSTU2 or STU3?</p>



<a name="153828774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828774">(May 19 2016 at 21:16)</a>:</h4>
<p>well, we need to make this work in STU3, but I don't mind working on it in DSTU2 as well. </p>



<a name="153828775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828775">(May 19 2016 at 21:16)</a>:</h4>
<p>we should start with the fixed tests, and make sure everyone passes the unit tests. Then we can build from there</p>



<a name="153828858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828858">(May 20 2016 at 13:23)</a>:</h4>
<p>I've published a set of profiles with what I believe to be correct snapshots here: <a href="https://github.com/chrisgrenz/FHIR-Primer" target="_blank" title="https://github.com/chrisgrenz/FHIR-Primer">https://github.com/chrisgrenz/FHIR-Primer</a></p>



<a name="153828859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828859">(May 20 2016 at 13:23)</a>:</h4>
<p>There are branches for the different versions.</p>



<a name="153828860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Snapshot%20derivation/near/153828860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Snapshot.20derivation.html#153828860">(May 20 2016 at 13:25)</a>:</h4>
<p>The wiki has some information about how to determine what to merge.  Note that this is my interpretation at this point and not an official stance.  <a href="https://github.com/chrisgrenz/FHIR-Primer/wiki/Snapshots-Determining-Refines" target="_blank" title="https://github.com/chrisgrenz/FHIR-Primer/wiki/Snapshots-Determining-Refines">https://github.com/chrisgrenz/FHIR-Primer/wiki/Snapshots-Determining-Refines</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
