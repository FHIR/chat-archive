---
layout: page
title: "FHIR Chat  · Profile on Bundle or Composition or both · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html">Profile on Bundle or Composition or both</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153868781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868781">(Jan 23 2017 at 13:12)</a>:</h4>
<p>Hi. We're working on a Composition Bundle for spirometry and we're wondering what to profile. Bundle, Composition or both. Looking through the C-CDA on FHIR specs it seems that only the Composition was profiled, but that seems to leave a gap at Bundle level. Any advice appreciated.</p>



<a name="153868782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868782">(Jan 23 2017 at 13:14)</a>:</h4>
<p>What do you mean by "leave a gap at Bundle level"?</p>



<a name="153868783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868783">(Jan 23 2017 at 13:15)</a>:</h4>
<p>without a Bundle profile, I can send a Bundle with a different Composition, of a different Bundle.type etc.</p>



<a name="153868784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868784">(Jan 23 2017 at 13:22)</a>:</h4>
<p>Why? You could specify multiple profiles in <a href="http://www.hl7.org/FHIR/elementdefinition-definitions.html#ElementDefinition.type.profile" target="_blank" title="http://www.hl7.org/FHIR/elementdefinition-definitions.html#ElementDefinition.type.profile">http://www.hl7.org/FHIR/elementdefinition-definitions.html#ElementDefinition.type.profile</a>, including one for a Bundle</p>



<a name="153868785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868785">(Jan 23 2017 at 13:23)</a>:</h4>
<p>Question is whether or not to create a profile for Bundle at all, not howto when I do :-) So you are advising me to create a Bundle profile here?</p>



<a name="153868786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868786">(Jan 23 2017 at 13:24)</a>:</h4>
<p>Nope. I didn't understand your original question and now I understand that you saw a flaw with their profile</p>



<a name="153868787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868787">(Jan 23 2017 at 13:25)</a>:</h4>
<p>I'd go for a Composition as well, but I don't know your data model...</p>



<a name="153868788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868788">(Jan 23 2017 at 14:39)</a>:</h4>
<p>So you would not profile the bundle to reference the composition profile explicitly.</p>



<a name="153868791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868791">(Jan 23 2017 at 14:53)</a>:</h4>
<p>I'd profile the reference for a composition or the resource for a bundle either way. Though putting a bundle into a composition to begin with seems redundant to me, but perhaps your data model dictates that's the best.</p>



<a name="153868792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868792">(Jan 23 2017 at 14:58)</a>:</h4>
<p>No, we're not reading eachother well :-) This is the thing:</p>
<p>Bundle<br>
Bundle.entry.resource.Composition<br>
Bundle.entry.resource.Observation (panel)<br>
Bundle.entry.resource.Observation (FEV1 observation)<br>
Bundle.entry.resource.Observation (0..* other panel observations)<br>
Bundle.entry.resource.Organization (producer)<br>
Bundle.entry.resource.Patient<br>
...</p>
<p>Composition profile will tell me what other spirometry panel resources I need/can have. So at minimum I need a Composition profile. But... Composition is not the entry resource: Bundle is. So: without a Bundle profile, I need to inspect the Bundle.type and Bundle.entry.resource.Composition.meta.profile before I know what validation/processing I need to load.</p>



<a name="153868793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868793">(Jan 23 2017 at 15:07)</a>:</h4>
<p>Ack, sorry, the error is on my part and I see what you mean now. Creating a profile on Bundle would be a nice solution to this, agreed. It would cover off both identification at runtime and constraint validation.</p>



<a name="153868795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868795">(Jan 23 2017 at 15:57)</a>:</h4>
<p>That's what I thought, but then I found that C-CDA on FHIR did not do this and I starting doubting</p>



<a name="153868801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868801">(Jan 23 2017 at 16:14)</a>:</h4>
<p>You don't really need to profile the entries in the Bundle beyond the first as you can (and should) use the "aggregation" property on your various Reference elements to flag what should be in the bundle vs. not.  So a single generic profile for FHIR documents (we should probably do that at the international level) plus a more restrictive profile that says "this document instance must have a Composition that complies with profile X" should be sufficient.</p>



<a name="153868803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868803">(Jan 23 2017 at 16:20)</a>:</h4>
<p>Would StrucDoc be open for defining such an international profile? It would be nice indeed</p>



<a name="153868804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868804">(Jan 23 2017 at 16:26)</a>:</h4>
<p>Just checking: is it possible to leave open at panel level whether or not stuff is bundled, and specify at Bundle or Composition level that all immediate references and references in references shall be bundled? The only way to specify that in my mind is an invariant, right?</p>



<a name="153868813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868813">(Jan 23 2017 at 17:36)</a>:</h4>
<p>Hi Alexander,</p>



<a name="153868814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868814">(Jan 23 2017 at 17:37)</a>:</h4>
<p>The base document profile would presumably enforce that the core composition references would be within the Bundle.  No need to use an invariant.  I'm not clear on whether references inside extensions on Composition must be in the bundle too.</p>



<a name="153868838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profile%20on%20Bundle%20or%20Composition%20or%20both/near/153868838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profile.20on.20Bundle.20or.20Composition.20or.20both.html#153868838">(Jan 23 2017 at 20:41)</a>:</h4>
<p>This might be me but I'm not reading that <a href="http://build.fhir.org/elementdefinition-definitions.html#ElementDefinition.type.aggregation" target="_blank" title="http://build.fhir.org/elementdefinition-definitions.html#ElementDefinition.type.aggregation">http://build.fhir.org/elementdefinition-definitions.html#ElementDefinition.type.aggregation</a> is a recursive statement. I.e. it would control the current reference, but I do not read that if the referred resource in turn contains references, that these also shall be bundled. If that is the intention then a tracker item for clarification is in order</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
