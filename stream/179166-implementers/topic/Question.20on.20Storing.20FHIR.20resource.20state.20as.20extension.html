---
layout: page
title: "FHIR Chat  · Question on Storing FHIR resource state as extension · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html">Question on Storing FHIR resource state as extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="186025929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186025929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nath <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186025929">(Jan 19 2020 at 05:09)</a>:</h4>
<p>Hello Friends,<br>
   I have a webapp UI which accepts input from the user for 2 or more observation resources and when "Save" button clicked updates the FHIR resource /observation. The requirement is that I need to track each save operation like a history say save1. i.e. each save operation involve storing /observation resource1 version1, /observation resource2  version1 . Lets say the user updated 3 times, we have save1, save2, save3 in the history. <br>
Now the user choose save2, I should display save2 corresponding /observation resource values in UI. <br>
My question is what is the best place to store the save history information. </p>
<p>I am thinking to store the history object in Patient resource as an extension. Is this approach correct ?. <br>
Is any other resource will be better and how should I store it i.e. extension etc.. ?<br>
Could you please give me some ideas?. <br>
thanks <br>
Nath</p>



<a name="186027482"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186027482" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186027482">(Jan 19 2020 at 06:07)</a>:</h4>
<p>Why wouldn't you just use the built in history capability and store each version?  If the version 'chooses' save 2, then create version 4 which is a mirror of what version 2 was.</p>



<a name="186043163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186043163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nath <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186043163">(Jan 19 2020 at 14:54)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> . I assume when you said "builtin history", this is the history for each resource. Right?.  The issue here is that UI Panel contains not just one single resource. UI Panel contains 2 or more observation/encounter/procedure etc.. resources and at the end there is a button "Save". For example, UI has 2 resources R1 and R2. Now when "Save" button clicked, both R1 and R2 is saved. So, somewhere I should store "Save1"  which represents the version that was saved for each resource. So, this is storing version history for group of resources where resource can be anything encounter or procedure or observation.. Hope this clarifies.</p>



<a name="186046685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186046685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186046685">(Jan 19 2020 at 16:44)</a>:</h4>
<p>Saving the history through an extension seems to be bad practice. Why you don't just use a Bundle to point to your UI Components?<br>
Then you can  choose a Version of the Bundle and this version has version aware links to the actual resources.</p>



<a name="186050156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186050156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nath <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186050156">(Jan 19 2020 at 18:29)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="191451">@Patrick Werner</span> . Sorry I am new to FHIR and with limited knowlege I had, for some reason I thought bundle was not persisted in the storage.The reason being that I saw bundle usage more in search where returnBundle(..) so I always thought its a wrapper resource to return search results. If bundle is like any other resource persisted, then I can use the bundle and version. thanks all for your kind help.</p>



<a name="186050254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186050254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186050254">(Jan 19 2020 at 18:32)</a>:</h4>
<p>Bundle or List are possibilities.  Bundles aren't persisted when submitting a transaction or messages, but they're certainly stored when you use them for Bundles or Collections.  Whether you choose to use Bundle or List depends on whether you want the versions to be contained or not</p>



<a name="186050255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186050255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186050255">(Jan 19 2020 at 18:32)</a>:</h4>
<p>Oh i made a mistake in my last post. I meant the Composition Resource</p>



<a name="186050277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186050277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186050277">(Jan 19 2020 at 18:33)</a>:</h4>
<p>You could use it to point to the relevant resources. Or as Lloyd mentioned a List resource. Both will provide better searchability as your resources are not „hidden“ behind a Bundle</p>



<a name="186056098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186056098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nath <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186056098">(Jan 19 2020 at 21:09)</a>:</h4>
<p>thank you so much <span class="user-mention" data-user-id="191451">@Patrick Werner</span> and <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> for your kind help and idea. truly appreciate it.  I looked at Composition and List. </p>
<p>I looked at List  and that seems to contain entry array <br>
 "entry" : [{ // C? Entries in the list<br>
    "flag" : { CodeableConcept }, // Status/Workflow information about this item<br>
    "deleted" : &lt;boolean&gt;, // C? If this item is actually marked as deleted<br>
    "date" : "&lt;dateTime&gt;", // When item added to list<br>
    "item" : { Reference(Any) } // R!  Actual entry<br>
  }],<br>
Composition seem to contain sections array. </p>
<p>Is FHIR Composition more like OO composition (i.e. lifetime of contained depends on the container)?<br>
Sorry still not able to understand difference between List vs Composition vs Bundle . </p>
<p>Can you please kindly elaborate this line "Whether you choose to use Bundle or List depends on whether you want the versions to be contained or not". <br>
 I would like the versions of the contained resources stored in either List or Composition. So, which resource contains versions? Is it List or Bundle or Composition</p>



<a name="186062299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186062299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186062299">(Jan 19 2020 at 23:28)</a>:</h4>
<p>List is a flat collection with optional ordering.  Composition is a hierarchical ordering with tight control over rendering, typically used for creating documents.  Both of them organize by referencing their content, not packaging it directly.  Bundle is a physical organizer.  It has no meaning of its own, but it allows packaging of resources to ship them around as a group.  A FHIR document is actually a FHIR Bundle that starts with a Composition resource (that defines the hierarchy and the rendering) along with whatever other resources are relevant.</p>



<a name="186065459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186065459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nath <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186065459">(Jan 20 2020 at 00:50)</a>:</h4>
<p>thank you so much <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  for explaining and it helped me choose the type.</p>



<a name="186079001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186079001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186079001">(Jan 20 2020 at 07:31)</a>:</h4>
<p>Why not use <a href="http://build.fhir.org/provenance.html" target="_blank" title="http://build.fhir.org/provenance.html">Provenance</a> here?</p>



<a name="186114912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Question%20on%20Storing%20FHIR%20resource%20state%20as%20extension/near/186114912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nath <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Question.20on.20Storing.20FHIR.20resource.20state.20as.20extension.html#186114912">(Jan 20 2020 at 16:16)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="191682">@Richard Townley-O'Neill</span> . Seems like Provenance resource is a better choice. Let me read up more.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
