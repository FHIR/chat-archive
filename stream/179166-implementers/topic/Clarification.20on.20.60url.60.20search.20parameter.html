---
layout: page
title: "FHIR Chat  · Clarification on `url` search parameter · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html">Clarification on `url` search parameter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="249766937"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249766937" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249766937">(Aug 17 2021 at 19:30)</a>:</h4>
<p><a href="https://build.fhir.org/search.html#uri">https://build.fhir.org/search.html#uri</a> contains a section on <code>uri</code> parameters that says:</p>
<blockquote>
<p>Note that for uri parameters that refer to the Canonical URLs of the conformance and knowledge resources (e.g. StructureDefinition, ValueSet, PlanDefinition etc), servers SHOULD support searching by canonical references, and SHOULD support automatically detecting a |[version] portion as part of the search parameter, and interpreting that portion as a search on the version.</p>
</blockquote>
<p>I think that is saying that servers should automatically handle <code>ValueSet?url=http://acme.org/fhir/ValueSet/123%7C1.0.0</code> the same as <code>ValueSet?url=http://acme.org/fhir/ValueSet/123&amp;version=1.0.0</code>.</p>
<ol>
<li>Am I interpreting the spec right?</li>
<li>Why recommend this special behavior for this one search parameter or type <code>uri</code> and is there anything in their SearchParameter definitions to indicate their special-ness?</li>
</ol>



<a name="249768024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249768024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249768024">(Aug 17 2021 at 19:36)</a>:</h4>
<p>The other interpretation I could imagine for this text is that its actually referring to uri search parameter which target canonical references (like the <code>_profile</code> search parameter).  This interpretation makes a lot more sense to me, but the preceding text in this latest draft seems to favor the other interpretation:</p>
<blockquote>
<p>The search type <code>uri</code> is used with elements of type uri and url. The type <code>reference</code> is used for the types Reference and canonical.</p>
</blockquote>



<a name="249774962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249774962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249774962">(Aug 17 2021 at 20:32)</a>:</h4>
<p>We say something similar at <a href="https://build.fhir.org/search.html#versions">https://build.fhir.org/search.html#versions</a> --</p>
<blockquote>
<p>For canonical references, servers SHOULD support searching by Canonical URLs, and SHOULD support automatically detecting a |[version] portion as part of the search parameter and interpreting that portion as a search on the business version of the target resource. </p>
</blockquote>
<p>But I agree <span class="user-mention" data-user-id="191676">@Lee Surprenant</span>:  for <code>uri</code>, how do you know when to apply this logic?<del> It seems like you can't know to apply this logic based on the search param definition itself; rather, the logic depends on the <em>value</em> supplied. But how do you tell if a uri parameter "refers to the Canonical URLs of the conformance and knowledge resources"? This is an open set. Maybe you just... see if refer to the canonical URL of a conformance/knowledge resource <em>that your servers supports in some way</em>?</del></p>



<a name="249775086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249775086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249775086">(Aug 17 2021 at 20:33)</a>:</h4>
<p>I'm looking for examples to understand where this might apply... but yours (<code>?url=</code>) is the best I can find. Maybe it's the only one?</p>



<a name="249775448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249775448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249775448">(Aug 17 2021 at 20:36)</a>:</h4>
<p>OK, I guess:</p>
<blockquote>
<p>for uri parameters that refer to the Canonical URLs of the conformance and knowledge resources</p>
</blockquote>
<p>Just essentially means: "search parameters of type 'uri' that index some instance of <a href="http://build.fhir.org/definition-definitions.html#Definition.url">http://build.fhir.org/definition-definitions.html#Definition.url</a> or <a href="http://build.fhir.org/canonicalresource-definitions.html#CanonicalResource.url">http://build.fhir.org/canonicalresource-definitions.html#CanonicalResource.url</a>"</p>



<a name="249775501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249775501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249775501">(Aug 17 2021 at 20:36)</a>:</h4>
<p>Agreed it'd be really nice to mark these SearchParameters with some indication of their special-ness.</p>



<a name="249775561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249775561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249775561">(Aug 17 2021 at 20:37)</a>:</h4>
<p>i'm not even sure i understand why that would be needed.  can't clients just use the <code>url=&amp;version=</code> variant?</p>



<a name="249775668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249775668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249775668">(Aug 17 2021 at 20:38)</a>:</h4>
<p>like i said the interpretation that makes more sense to me would be if it applied to uri search parameters which target elements of type canonical, because there we actually do need this kind of behavior to be smart about the version</p>



<a name="249775738"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249775738" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249775738">(Aug 17 2021 at 20:39)</a>:</h4>
<p>are you pretty sure its about params like <code>ValueSet?url=</code> and not <code>[Resource]?_profile=</code> ?</p>



<a name="249775754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249775754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249775754">(Aug 17 2021 at 20:39)</a>:</h4>
<blockquote>
<p>Lee Surprenant: i'm not even sure i understand why that would be needed. can't clients just use the url=&amp;version= variant?</p>
</blockquote>
<p>I totally agree with this point, and the examples at <a href="https://www.hl7.org/fhir/references.html#canonical">https://www.hl7.org/fhir/references.html#canonical</a> corroborate</p>



<a name="249775941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249775941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249775941">(Aug 17 2021 at 20:41)</a>:</h4>
<blockquote>
<p>Lee Surprenant: are you pretty sure its about params like ValueSet?url= and not [Resource]?_profile= ?</p>
</blockquote>
<p>No. I'm just reading like you; I don't understand the intent here.</p>



<a name="249775970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249775970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249775970">(Aug 17 2021 at 20:41)</a>:</h4>
<p>ok, great.  i'm glad its not just me :-)</p>



<a name="249776152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249776152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249776152">(Aug 17 2021 at 20:43)</a>:</h4>
<p>Do you know why <code>_profile</code> SearchParam is of type <code>uri</code> instead of <code>reference</code>? </p>
<p><a href="/user_uploads/10155/D2Iy6yROsL3g51QMMuVDeXjz/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/D2Iy6yROsL3g51QMMuVDeXjz/image.png" title="image.png"><img src="/user_uploads/10155/D2Iy6yROsL3g51QMMuVDeXjz/image.png"></a></div><p>at <a href="http://build.fhir.org/search.html#table">http://build.fhir.org/search.html#table</a> documents that this is expected, but I can't tell/recall why.</p>



<a name="249776416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249776416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249776416">(Aug 17 2021 at 20:45)</a>:</h4>
<p><a href="https://jira.hl7.org/browse/FHIR-30514">https://jira.hl7.org/browse/FHIR-30514</a></p>



<a name="249776494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249776494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249776494">(Aug 17 2021 at 20:46)</a>:</h4>
<p>I just left a comment to similar effect on this "applied" jira issue</p>



<a name="249776533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249776533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249776533">(Aug 17 2021 at 20:46)</a>:</h4>
<blockquote>
<p>The other interpretation I could imagine for this text is that its actually referring to uri search parameter which target canonical references (like the _profile search parameter). This interpretation makes a lot more sense to me...</p>
</blockquote>
<p>Reviewing up to this point: I agree. I think </p>
<blockquote>
<p>The search type uri is used with elements of type uri and url.</p>
</blockquote>
<p>should say</p>
<blockquote>
<p>The search type uri is used with elements of type uri, [url,??] and canonical.</p>
</blockquote>
<p>to match the table and current usage.~~</p>



<a name="249776621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249776621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249776621">(Aug 17 2021 at 20:47)</a>:</h4>
<p>My current opinion:</p>
<ul>
<li>_profile should be of type <code>reference</code></li>
<li>the language about handling certain uri parameters specially should be stricken</li>
</ul>



<a name="249776705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249776705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249776705">(Aug 17 2021 at 20:48)</a>:</h4>
<p>Phew, this is fun. I agree, based on the resolution of <a href="http://jira.hl7.org/browse/FHIR-30514">FHIR-30514</a></p>



<a name="249776746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249776746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249776746">(Aug 17 2021 at 20:48)</a>:</h4>
<p>yes, definitely didn't intend to go down this rabbit hole today :-)</p>



<a name="249776865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249776865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249776865">(Aug 17 2021 at 20:49)</a>:</h4>
<p>One more addition to your current opinion: the "Y" in that table I screenshotted should be erased.</p>



<a name="249777018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249777018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249777018">(Aug 17 2021 at 20:50)</a>:</h4>
<p>yes, I agree</p>



<a name="249777297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249777297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249777297">(Aug 17 2021 at 20:53)</a>:</h4>
<p>I'll submit a Jira issue to capture these, since we might not review all the notes on an already applied isssue.</p>



<a name="249777381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249777381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249777381">(Aug 17 2021 at 20:54)</a>:</h4>
<p>thanks, that will be great.  i was gonna see if anyone can explain what we're missing first, but i think a ticket is smart so we don't forget</p>



<a name="249777614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249777614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249777614">(Aug 17 2021 at 20:56)</a>:</h4>
<p>Probably also relevant is <a href="http://jira.hl7.org/browse/FHIR-30697">FHIR#30697</a> .<br>
edit: note that this has actually been voted on, but not updated (I put a note in the FHIR-I stream).</p>



<a name="249777861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/249777861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#249777861">(Aug 17 2021 at 20:58)</a>:</h4>
<p>Submitted <a href="http://jira.hl7.org/browse/FHIR-33203">FHIR-33203</a> -- though I'll note it assumes that other than _profile, there's nowhere <em>else</em> that a uri-type searchparam is used to index a canonical-type element.</p>



<a name="251823205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/251823205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#251823205">(Sep 03 2021 at 05:01)</a>:</h4>
<p>One question I have directly related to this is how can we "resolve" a canonical with versioning rules through the API?<br>
(desiring just the relevant resource, not all versions, and latest if not specified)</p>



<a name="251865331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/251865331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#251865331">(Sep 03 2021 at 11:29)</a>:</h4>
<p>Sorry Brian, I'm not quite clear what you mean</p>



<a name="251865925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/251865925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#251865925">(Sep 03 2021 at 11:35)</a>:</h4>
<p>Maybe you mean as a client you have a resource that has a canonical reference to a definitional resource and now you want to just go "read" that resource from somewhere?<br>
I think you have two options in such cases:  go try to look it up in some registry OR try searching for it on a FHIR server (is there a difference?)<br>
If we went with the proposal in <a href="http://jira.hl7.org/browse/FHIR-33203">FHIR-33203</a> then to look it up on a FHIR server the client would need to be able to parse the canonical url into is url and version parts so it can do a search like <code>GET [definitionalResourceType]?url=xx&amp;version=yy</code>.</p>



<a name="252126642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/252126642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#252126642">(Sep 06 2021 at 04:54)</a>:</h4>
<p>Is the lookup in some registry different to searching on the FHIR server - is there a defined way for that?<br>
If there is no version in the canonical, then you just search for that, then all versions will be returned, not just the latest active one (or whatever the rules should be)</p>



<a name="252127884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/252127884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#252127884">(Sep 06 2021 at 05:17)</a>:</h4>
<p>Having the spec define how to resolve canonicals by a server, and not just general search to make the server do the hard work rather than the client is desirable...</p>



<a name="252161232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/252161232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hank Lenzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#252161232">(Sep 06 2021 at 11:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> <br>
If I understood you correctly, you want to either take a look at what the "Content-Location" header of your GET request says, to see version history: <br>
❯ curl -v -H "Content-Location" <a href="http://fhir.hl7fundamentals.org/r4/Patient/500">http://fhir.hl7fundamentals.org/r4/Patient/500</a></p>
<ul>
<li>Trying 34.220.222.151:80...</li>
<li>TCP_NODELAY set</li>
<li>
<p>Connected to <a href="http://fhir.hl7fundamentals.org">fhir.hl7fundamentals.org</a> (34.220.222.151) port 80 (#0)</p>
<blockquote>
<p>GET /r4/Patient/500 HTTP/1.1<br>
Host: <a href="http://fhir.hl7fundamentals.org">fhir.hl7fundamentals.org</a><br>
User-Agent: curl/7.68.0<br>
Accept: <em>/</em></p>
</blockquote>
</li>
<li>
<p>Mark bundle as not supporting multiuse<br>
&lt; HTTP/1.1 200 OK<br>
&lt; X-Powered-By: HAPI FHIR 3.7.0-SNAPSHOT REST Server (FHIR Server; FHIR 4.0.0/R4)<br>
&lt; ETag: W/"18"<br>
&lt; Content-Location: <a href="http://fhir.hl7fundamentals.org/r4/Patient/500/_history/18">http://fhir.hl7fundamentals.org/r4/Patient/500/_history/18</a></p>
</li>
</ul>
<p>OR<br>
you want to tweek te search parameters, as described in: <a href="https://hl7.org/fhir/r4/search.html">https://hl7.org/fhir/r4/search.html</a><br>
HTH</p>



<a name="263073203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263073203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263073203">(Nov 29 2021 at 21:59)</a>:</h4>
<p>I wound up withdrawing <a href="http://jira.hl7.org/browse/FHIR-33203">FHIR-33203</a> because the core change to the type of _profile in <a href="https://build.fhir.org/resource.html#search">https://build.fhir.org/resource.html#search</a> <em>was applied</em> (... a couple of  months after being marked as applied :-)).</p>
<p>That said, I'm still unclear on why the "url" search params like</p>
<div class="codehilite"><pre><span></span><code>GET /ValueSet?url=https://myvs.example.org
</code></pre></div>

<p>are defined with <code>SearchParameter.type</code> of <code>uri</code> instead of <code>referenence</code>. <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> do you remember the rationale for this?</p>



<a name="263080810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263080810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263080810">(Nov 29 2021 at 23:11)</a>:</h4>
<p>If you're searching by the URL property of ValueSet, there's no reference to resolve.  You're just searching by the string property.  In theory, you might want to use the 'above' or 'below' search modifiers.  E.g. "Find me all valuesets with a url base of <a href="http://hl7.org">http://hl7.org</a>"</p>



<a name="263080922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263080922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263080922">(Nov 29 2021 at 23:12)</a>:</h4>
<p>With reference, you're chasing a reference (canonical or Reference) to some other resource and things like 'identifier' come into play.</p>



<a name="263091787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263091787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263091787">(Nov 30 2021 at 01:28)</a>:</h4>
<p>But we explicitly want things like piped version number syntax  to work here, and that syntax is defined  on reference type search parameters...  Put another way, why is "_profile"  a reference  when other canonicals are not?</p>



<a name="263094464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263094464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263094464">(Nov 30 2021 at 02:16)</a>:</h4>
<p>No, we don't.  It <em>can't</em> be used here.  The ValueSet.url isn't of type 'canonical'.  If you want to search for a ValueSet by url + version, then you need to do it this way: ValueSet?url=http://foo&amp;version=bar</p>



<a name="263094535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263094535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263094535">(Nov 30 2021 at 02:17)</a>:</h4>
<p>On the other hand, you can do this: StructureDefinition.valueset=http://foo|bar</p>



<a name="263094587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263094587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263094587">(Nov 30 2021 at 02:18)</a>:</h4>
<p>That's because StructureDefinition.snapshot.element.binding.valueset has a type of canonical, not a type of uri.</p>



<a name="263096353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263096353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263096353">(Nov 30 2021 at 02:54)</a>:</h4>
<p>I'm not entirely sure we don't want it work, but it certainly doesn't, and making it work would have pain, for sure. I'd vote against it as a server implementer</p>



<a name="263100602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263100602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263100602">(Nov 30 2021 at 04:25)</a>:</h4>
<blockquote>
<p>it can't be used here</p>
</blockquote>
<p>Gah, sorry for the confusion about canonical (I jumped back into this thread after a related subject arose on FHIR-I call today without reminding myself what I was talking about!). But for uri type search parameters we do say:</p>
<blockquote>
<p>Note that for uri parameters that refer to the Canonical URLs of the conformance and knowledge resources (e.g. StructureDefinition, ValueSet, PlanDefinition etc), servers SHOULD support searching by canonical references, and SHOULD support automatically detecting a |[version] portion</p>
</blockquote>
<p>at <a href="http://build.fhir.org/search.html#uri">http://build.fhir.org/search.html#uri</a> -- which suggests that <code>GET ValueSet?url=http://foo|v1</code>  "SHOULD" work. If it's unreliable and even Grahame would vote against supporting this and we have a workaround, it sure seems like we should eliminate this guidance</p>



<a name="263151510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263151510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263151510">(Nov 30 2021 at 14:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> can you raise a tracker item?</p>



<a name="263191173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263191173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263191173">(Nov 30 2021 at 18:55)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-34398">FHIR-34398</a></p>



<a name="263215672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Clarification%20on%20%60url%60%20search%20parameter/near/263215672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Clarification.20on.20.60url.60.20search.20parameter.html#263215672">(Nov 30 2021 at 22:06)</a>:</h4>
<p>What about this part of <a href="http://jira.hl7.org/browse/FHIR-33203">FHIR#33203</a> ?</p>
<ul>
<li>The "Y" indicating that URIs can be used to index "canonical" elements should be removed from the "Cross-map between search parameter types and Data types:" table at <a href="http://build.fhir.org/search.html#table">http://build.fhir.org/search.html#table</a></li>
</ul>
<p>Did we ever find a case where a search parameter of type uri is used to index an element of type canonical?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
