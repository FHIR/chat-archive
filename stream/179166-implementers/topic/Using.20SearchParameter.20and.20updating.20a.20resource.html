---
layout: page
title: "FHIR Chat  · Using SearchParameter and updating a resource · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20SearchParameter.20and.20updating.20a.20resource.html">Using SearchParameter and updating a resource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="270572182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20SearchParameter%20and%20updating%20a%20resource/near/270572182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Atterberry <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20SearchParameter.20and.20updating.20a.20resource.html#270572182">(Feb 03 2022 at 16:01)</a>:</h4>
<p>I'm using the following SearchParameter to eliminate duplicate Identifiers for a Patient resource.  It works fine until I try to update that resource using the identifier as part of the PUT command with URL <a href="http://localhost:3111/myfhir/Patient?identifier=urn:uuid:555|26828F0386673">http://localhost:3111/myfhir/Patient?identifier=urn:uuid:555|26828F0386673</a>. An error is returned</p>
<p>Can not create resource of type Patient as it would create a duplicate unique index matching query: Patient?identifier=urn%3Auuid%3A555%7C26828F0386673 (existing index belongs to Patient/391494aa-0cba-4e88-85c8-7539a5e9506f, new unique index created by SearchParameter/11d73d9c-b13a-4f70-9e7d-a7a916d80765)</p>
<p>If I use the id for the patient directly the update of the resource  works fine. <a href="http://localhost:3111/myfhir/Patient/391494aa-0cba-4e88-85c8-7539a5e9506f">http://localhost:3111/myfhir/Patient/391494aa-0cba-4e88-85c8-7539a5e9506f</a>.</p>
<p>Once I use a SearchParameter does that mean I can't use the identifier for the update?  What am I missing?</p>
<p>It's worth noting that in the HFJ_IDX_CMP_STRING_UNIQ table the IDX_STRING column always has an entry like Patient?identifier=urn%3Auuid%3A555%7C26828F0386673 no matter if the SearchParameter expression is Patient.identifier or Patient.identifer.value</p>
<p>Thanks.</p>
<p>The SearchParameter looks like:<br>
{<br>
"resourceType": "SearchParameter",<br>
"meta": {<br>
"lastUpdated": "2021-05-02T10:43:02.162-04:00",<br>
"tag": [ {<br>
"system": "<a href="https://my.health.com/x/Onc1C">https://my.health.com/x/Onc1C</a>",<br>
"code": "34a800fa-bba9-4cb9-77ed-0aa4d0eecef2",<br>
"display": "FHIR Implementation Team"<br>
} ]<br>
},<br>
"extension": [<br>
{<br>
"url": "<a href="http://hapifhir.io/fhir/StructureDefinition/sp-unique">http://hapifhir.io/fhir/StructureDefinition/sp-unique</a>",<br>
"valueBoolean": true<br>
}<br>
],<br>
"url": "<a href="http://health.com/fhir/SearchParameter/uniq-patient-identifier">http://health.com/fhir/SearchParameter/uniq-patient-identifier</a>",<br>
"name": "unique-patient-identifier",<br>
"status": "active",<br>
"description": "A unique patient identifier",<br>
"code": "unique-patient-identifier",<br>
"base": [<br>
"Patient"<br>
],<br>
"type": "token",<br>
"expression": "Patient",<br>
"component": [<br>
{<br>
"definition": "<a href="http://hl7.org/fhir/SearchParameter/patient-identifier">http://hl7.org/fhir/SearchParameter/patient-identifier</a>",<br>
"expression": "Patient.identifier"<br>
}<br>
]<br>
}</p>



<a name="270578381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20SearchParameter%20and%20updating%20a%20resource/near/270578381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20SearchParameter.20and.20updating.20a.20resource.html#270578381">(Feb 03 2022 at 16:40)</a>:</h4>
<p>This sounds like a server-specific question.  Are you using HAPI, .NET, something else?</p>



<a name="270615038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20SearchParameter%20and%20updating%20a%20resource/near/270615038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Atterberry <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20SearchParameter.20and.20updating.20a.20resource.html#270615038">(Feb 03 2022 at 20:45)</a>:</h4>
<p>Using HAPI FHIR Java on version 5.4.0</p>



<a name="270615122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20SearchParameter%20and%20updating%20a%20resource/near/270615122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20SearchParameter.20and.20updating.20a.20resource.html#270615122">(Feb 03 2022 at 20:46)</a>:</h4>
<p>sounds like a question for <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a></p>



<a name="270615151"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20SearchParameter%20and%20updating%20a%20resource/near/270615151" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Atterberry <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20SearchParameter.20and.20updating.20a.20resource.html#270615151">(Feb 03 2022 at 20:46)</a>:</h4>
<p>ok.  I'll post there</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
