---
layout: page
title: "FHIR Chat  · http &amp; https Resource references · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html">http &amp; https Resource references</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153896015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896015">(Jul 04 2017 at 13:19)</a>:</h4>
<p>I just added https to my FHIR server endpoint and it got me thinking about the references between resources. If I have an Observation resource that references a Patient resource using the subject property, and I use an absolute reference, e.g. <code>https://SomeServer/fhir/Patient/100</code>, when searching for Observation resources with a particular subject URI should a server return matches for both http &amp; https? So that would be, should this search:<br>
<code>https://SomeServer/fhir/Observation?subject=https://SomeServer/fhir/Patient/100</code><br>
return Observation resources with a subject of <code>http://SomeServer/fhir/Patient/100</code> as well as resource with <code>https://SomeServer/fhir/Patient/100</code></p>



<a name="153896051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896051">(Jul 05 2017 at 05:43)</a>:</h4>
<p>difficult question. </p>



<a name="153896052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896052">(Jul 05 2017 at 05:44)</a>:</h4>
<p>we've said that those references can't reference different resources, so that would argue that the you should resolve them</p>



<a name="153896053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896053">(Jul 05 2017 at 05:44)</a>:</h4>
<p>My server knows what it is, and while internally referencing removes the absoluteness off there.</p>



<a name="153896054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896054">(Jul 05 2017 at 05:44)</a>:</h4>
<p>(as in knows its own base URLs, so can strip the prefixes to make them relative)</p>



<a name="153896085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896085">(Jul 05 2017 at 13:33)</a>:</h4>
<p>the FHIR spec says this for URI search "The uri parameter refers to a URI (RFC 3986 ) element. Matches are precise (e.g. case, accent, and escape) sensitive, and the entire URI must match."</p>



<a name="153896086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896086">(Jul 05 2017 at 13:39)</a>:</h4>
<p>Which then means that this search <code>https://SomeServer/fhir/Observation?subject=https://SomeServer/fhir/Patient/100</code> would only return the subjects with a 'https' and yet this search  <code>https://SomeServer/fhir/Observation?subject=Patient/100</code>would return both <code>https</code> and 'http'. I think that is reasonable although a little unintuitive. Doing this meets all the rules I can find in the spec.</p>



<a name="153896087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896087">(Jul 05 2017 at 13:50)</a>:</h4>
<p>see the http(s) text <a href="http://build.fhir.org/http.html#general" target="_blank" title="http://build.fhir.org/http.html#general">http://build.fhir.org/http.html#general</a> </p>



<a name="153896088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896088">(Jul 05 2017 at 13:51)</a>:</h4>
<p>generally you are asking more of a policy question, than a specification question. Meaning Policy will decide to never publish anything under http; but it might allow queries to ask about http and interpret those queries as if they were https. Hopefully Policy will not ever allow non secure things.</p>



<a name="153896090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896090">(Jul 05 2017 at 14:46)</a>:</h4>
<p>Thanks, John that is a good reference on the topic.  It somewhat contradicts the reference I posted above from the URI search. On policy, it's difficult to control content created outside of one's policy boundary. Sure I can have a policy that my server only operates on https but it's harder to mandate that the content I consume never references content outside of my boundary on http. I may have a resource with a reference to an Organization resource in another FHIR server completely outside of my policy controls. I think I'm now leaning towards ignoring the schema on all base url's for search, just match from <code>://</code> forward, except for <code>urn:oid</code> and <code>urn:oid</code>. </p>



<a name="153896094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896094">(Jul 05 2017 at 16:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191391">@Angus Millar</span> Can you submit a change request for us to clarify the language?</p>



<a name="153896145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cooper Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896145">(Jul 05 2017 at 21:14)</a>:</h4>
<p>Another related practical problem that we've run into is that the "service base URL" that the FHIR server knows itself as may be different than what the FHIR client knows the server as (not just http vs. https, but also the host and base-path).  For example when reverse proxies and re-write rules are in place in a DMZ that separates a protected FHIR server from a client on the public internet.   Our challenge has been that in order to make references resolvable by the FHIR client, references need to be relative to the reverse proxy "service base URL", which may not be the same as the FHIR server "service base URL".  </p>
<p>http vs. https seems like a subset of this problem that can be caused in real life by TLS termination proxies, for example. </p>
<p>Not entirely sure this is something for the FHIR standard to tackle, but it's definitely a pain point for us, and related to the http vs. https thing, so I figured I'd mention it.</p>



<a name="153896155"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/http%20%26%20https%20Resource%20references/near/153896155" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/http.20.26.20https.20Resource.20references.html#153896155">(Jul 05 2017 at 22:20)</a>:</h4>
<p>Ouch, thanks for that Cooper, certainly another dynamic to consider. At first glance it looks like the server need to inspect the request headers for: <code>HTTP_X_ORIGINAL_URL</code> – this server variable contains the original URL in decoded format; and <br>
<code>UNENCODED_URL</code> – this server variable contains the original URL exactly as it was requested by a Web client, with all original encoding preserved. </p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
