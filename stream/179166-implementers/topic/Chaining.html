---
layout: page
title: "FHIR Chat  · Chaining · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html">Chaining</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="271146293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271146293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amy Abraham <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271146293">(Feb 08 2022 at 15:41)</a>:</h4>
<p>Re: <a href="http://www.hl7.org/fhir/search.html#chaining">http://www.hl7.org/fhir/search.html#chaining</a></p>
<p>In this example GET Patient?general-practitioner.name=Joe&amp;general-practitioner.address-state=MN ; where an '&amp;' is used, the description states 'may return Patients cared for by Joe from CA and Jane from MN: no one practitioner need satisfy both conditions. E.g. the chains are evaluated separately.' ; </p>
<p>Is this a mistake, shouldnt '&amp;' mean all the criteria's should be met ?</p>



<a name="271148809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271148809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271148809">(Feb 08 2022 at 15:59)</a>:</h4>
<p>It's not a mistake, the wording is correct.</p>



<a name="271149019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271149019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271149019">(Feb 08 2022 at 16:00)</a>:</h4>
<p>All criteria are indeed met - (Patients that have PCP Joe) and (Patients that have a PCP in MN).</p>



<a name="271152427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271152427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271152427">(Feb 08 2022 at 16:22)</a>:</h4>
<p>That would be OR-logic, not AND-logic. I guess you need to think of the '&amp;' here as not an AND, rather just a HTTP parameter separator character. I'm not sure though why chains are evaluated with OR-logic. Perhaps to simplify implementations?</p>



<a name="271152539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271152539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271152539">(Feb 08 2022 at 16:22)</a>:</h4>
<p>It is an AND. Chains are not evaluated with OR logic.</p>



<a name="271153408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271153408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271153408">(Feb 08 2022 at 16:29)</a>:</h4>
<p><strong>GET Patient?general-practitioner.name=Joe&amp;general-practitioner.address-state=MN</strong></p>
<p>In SQL if I have a 'general-practitioner' table with 'name' and 'address-state' columns. </p>
<p>*SELECT * FROM general-practitioner WHERE name = 'Joe' AND address-state = 'MN'*<br>
would not return Jane from MN. </p>
<p>What am I missing?</p>



<a name="271153939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271153939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271153939">(Feb 08 2022 at 16:33)</a>:</h4>
<p>We're not selecting from general-practitioner. We're selecting from patient, and each patient might have multiple general-practitioner references. The chain clauses can match different references on the same patient, which satisfies the AND despite not having any single general-practitioner that satisfies both.</p>



<a name="271154109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271154109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271154109">(Feb 08 2022 at 16:34)</a>:</h4>
<p>For outgoing references with max cardinality 1 this problem doesn't exist.</p>



<a name="271155051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271155051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271155051">(Feb 08 2022 at 16:41)</a>:</h4>
<p>I think this is a language parsing challenge. The sentence "may return Patients cared for by Joe from CA and Jane from MN" is indicating that a <em>single</em> patient that has a practitioner 'Joe' in CA <em>and</em> a practitioner 'Jane' from MN would still meet the requirements.</p>
<p>E.g., the 'and' is applied to the set the root level instead of inside the chain.</p>
<p>(edit: see: 'garden path sentence' =)</p>



<a name="271155492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271155492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amy Abraham <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271155492">(Feb 08 2022 at 16:44)</a>:</h4>
<p>Thanks all</p>



<a name="271157179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271157179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271157179">(Feb 08 2022 at 16:56)</a>:</h4>
<p>Just to complete the SQL analogy, it works out logically to something similar to this and Paul and Gino are correct. </p>
<p>*SELECT * FROM Patient pat<br>
WHERE EXISTS (select * from general_practitioner gp where <a href="http://gp.name">gp.name</a> = 'Joe' and gp.patient_id = <a href="http://pat.id">pat.id</a>)<br>
  AND EXISTS (select * from general_practitioner gp where gp.state = 'MN' and gp.patient_id = pat.id)*</p>



<a name="271158731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271158731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271158731">(Feb 08 2022 at 17:06)</a>:</h4>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span> maybe if you're doing any rewriting in this area we could make it clearer that this caveat applies to repeated outgoing references? This question seems to come up a lot.</p>



<a name="271160810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271160810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271160810">(Feb 08 2022 at 17:21)</a>:</h4>
<p>Yep, I added a note.  Hopefully have a completed pass to start reviewing soon, but I discovered the search 'page' is more like the search 'short book'  =)</p>



<a name="271161811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271161811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271161811">(Feb 08 2022 at 17:27)</a>:</h4>
<p>The reference goes from patient to practitioner, so more like:</p>
<div class="codehilite"><pre><span></span><code>SELECT * FROM Patient pat
WHERE EXISTS (select * from practitioner gp where gp.name = &#39;Joe&#39; and gp.id = pat.generalpractitioner_id)
AND EXISTS (select * from practitioner gp where gp.state = &#39;MN&#39; and gp.id = pat.generalpractitioner_id)
</code></pre></div>
<p>(but same idea)</p>



<a name="271238410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271238410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271238410">(Feb 09 2022 at 07:08)</a>:</h4>
<p>.. so by changing the focus of the search, Practitioner?name=Joe&amp;state=MN&amp;_revinclude=Patient:practitioner (not the correct parameter names, but you get the gist) it'd be a true AND on the Practitioner resource, and it would return the Patients that have Joe-in-MN as their PCP/GP.</p>



<a name="271241270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271241270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Krishna Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271241270">(Feb 09 2022 at 07:55)</a>:</h4>
<p>I am getting oauth2 error on epic it was working before but now not working</p>



<a name="271241359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271241359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Krishna Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271241359">(Feb 09 2022 at 07:56)</a>:</h4>
<p>I am sending the payload below:</p>
<div class="codehilite"><pre><span></span><code>FHIR.oauth2.authorize({
      &#39;client_id&#39;: &#39;f3174bc9-02d2-4637-a612-9166b3b3aa93&#39;,
      &#39;scope&#39;:  &#39;patient.read, patient.search, observation.read, observation.search&#39;,
      &#39;redirect_uri&#39;: &#39;http://localhost:3000&#39;,
    &#39;iss&#39;: &#39;https://fhir.epic.com/interconnect-fhir-oauth/api/FHIR/R4/&#39;
    })
</code></pre></div>



<a name="271289517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Chaining/near/271289517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Chaining.html#271289517">(Feb 09 2022 at 14:54)</a>:</h4>
<p>Epic issues are best resolved by reaching out to <a href="mailto:open@epic.com">open@epic.com</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
