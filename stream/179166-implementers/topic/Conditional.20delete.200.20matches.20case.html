---
layout: page
title: "FHIR Chat  · Conditional delete 0 matches case · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Conditional.20delete.200.20matches.20case.html">Conditional delete 0 matches case</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="154010983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Conditional%20delete%200%20matches%20case/near/154010983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Tropin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Conditional.20delete.200.20matches.20case.html#154010983">(Oct 22 2018 at 14:53)</a>:</h4>
<p><a href="https://www.hl7.org/fhir/http.html#2.21.0.13.1" target="_blank" title="https://www.hl7.org/fhir/http.html#2.21.0.13.1">https://www.hl7.org/fhir/http.html#2.21.0.13.1</a></p>
<blockquote>
<p>No matches or One Match: The server performs an ordinary delete on the matching resource</p>
</blockquote>
<p>What does it mean to do ordinary delete for No matches? As I understand, ordinary delete can be done only by resource id. No matches - no id.</p>



<a name="154011049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Conditional%20delete%200%20matches%20case/near/154011049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Tropin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Conditional.20delete.200.20matches.20case.html#154011049">(Oct 22 2018 at 15:50)</a>:</h4>
<p>Checked reference fhir server implementation.</p>
<p>Conditional delete:<br>
1. Search returns 0 resources (no such resource) | server respond with 404<br>
2. Search returns 0 resources (resource was deleted) | server respond with 404<br>
3. Search returns 1 resource (resource exists) | server respond with 204</p>
<p>Delete:<br>
1. invalid id (no such resource) | server respond with 404<br>
2. valid id (resource was deleted) | server respond with 204<br>
3. valid id (resource exists) | server respond with 204</p>
<p>I think that delete MUST return 404 to be consistent with conditional delete. </p>
<p>I didn't find any recommendations about status code for case #2 for delete operation in http rfc.<br>
Also 204 for second case makes it indistinguishable from third case.</p>
<p>The only thing I found is idempotence property:</p>
<blockquote>
<p>Methods can also have the property of "idempotence" in that (aside<br>
  from error or expiration issues) the side-effects of N &gt; 0 identical<br>
  requests is the same as for a single request. The methods GET, HEAD,<br>
  PUT and DELETE share this property.<br>
It tells, that side-effect (deletion of resource performed ones),<br>
but doesn't tell anything about response code, as I understand it can vary.</p>
</blockquote>
<p>And last point: how server can respond with 204 on consequent delete if it doesn't support versioning of resources and performs actual delete? </p>
<p>Why such decision was made (responde with 204 on consequent delete)? <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <br>
I need clarification for deeper understanding to make our implementation of fhir server better.</p>



<a name="154011149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Conditional%20delete%200%20matches%20case/near/154011149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Conditional.20delete.200.20matches.20case.html#154011149">(Oct 22 2018 at 19:01)</a>:</h4>
<p>well, I guess our intent is that if there's no resources that match the id, then delete is assumed to true, like if there's a single match. so should return a 200/202/204. can you make a gForge to clarify that - it's not clear</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
