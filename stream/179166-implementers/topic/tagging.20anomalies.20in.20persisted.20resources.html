---
layout: page
title: "FHIR Chat  · tagging anomalies in persisted resources · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html">tagging anomalies in persisted resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="223132282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223132282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223132282">(Jan 18 2021 at 15:15)</a>:</h4>
<p>If a server receives a FHIR resource, and it detects anomalies, (but business rules require one to persist that resource anyway), how would one flag that resource and identify the issues found? meta I guess ..</p>



<a name="223136880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223136880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223136880">(Jan 18 2021 at 15:53)</a>:</h4>
<p>would most applications notice a meta tag?   There is one for .meta.security = #UNCERTREL or #UNRELIABLE  --- see this valueset <a href="http://hl7.org/fhir/v3/SecurityIntegrityObservationValue/vs.html">http://hl7.org/fhir/v3/SecurityIntegrityObservationValue/vs.html</a></p>



<a name="223137222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223137222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223137222">(Jan 18 2021 at 15:56)</a>:</h4>
<p>What do you mean by "anomalies" and "receive"? If you mean a POST of a resource, my understanding is that the server is responsible to create a <strong>valid</strong> instance of the resource, and if that is different than what was POSTed, it is perfectly fine.</p>



<a name="223137231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223137231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223137231">(Jan 18 2021 at 15:56)</a>:</h4>
<p>_most servers do not store data as FHIR_</p>



<a name="223137605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223137605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223137605">(Jan 18 2021 at 16:00)</a>:</h4>
<p>Provenance can clearly be used to show any corrections of the anomalies that were fixed during import. But it would be a poor solution for pointing out anomalies that one left in the imported resource.</p>



<a name="223141307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223141307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223141307">(Jan 18 2021 at 16:31)</a>:</h4>
<p>There may be very good business reasons for storing that that is known to be either unreliable or incomplete - would you for instance refuse a FHIR based set of resources from another hospital if the patient is currently in your ER department? Better to flag is as 'problematic data', one can always attempt to fix any issues at some later point in time.</p>



<a name="223142732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223142732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223142732">(Jan 18 2021 at 16:45)</a>:</h4>
<p>I am not disagreeing that there are good business reasons to <strong>handle</strong> unreliable or incomplete resources. I think it is important to determine what is to best way to <strong>handle</strong> them in different situations.  Again, if there is a POST of a resource to a valid endpoint, the server is expected to provide the resource for subsequent GETs, and insisting that it must be capable of providing <strong>invalid</strong> resource instances is not reasonable.</p>
<p>The use case you are providing, however, is unlikely to result in a POST. If the patient is currently in your ER department, the anomalous resource is most likely in a bundle of type "searchset". The question now becomes, what should I do if I get a searchset where one or more resources is "anomalous"?</p>
<p>Is this a valid reduction of your initial question?</p>



<a name="223143278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223143278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223143278">(Jan 18 2021 at 16:51)</a>:</h4>
<p>effectively that's the same problem, but yes, it could also be a searchset. And one can support subsequent GETs, with label to indicate that ihe data doesn't follow normal quality guidelines. Servers are likely to receive data from clients that may, or may not, be conformant to one or more known/unknown profiles. (Yes one can agree to only support a limited set of profiles, but this severely limits ones options)</p>



<a name="223146027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223146027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223146027">(Jan 18 2021 at 17:18)</a>:</h4>
<p>That is why I asked what the definition of "anomalous" is. If it means "non-conformant for a particular profile", but still a valid resource according to the base specification, then the question becomes, "how do I tag a resource as not conformant to my declared capability statement?"</p>
<p>Is that a fair description?</p>
<p>Even then, I think this can only go as far as an optional capability, and not the expectation that any particular FHIR server would serve resources that do not correspond to their capability statement. So you have the secondary question, if the server changes the data to fit their capability statement, how can they indicate what the original data was (John suggests provenance).</p>



<a name="223194568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223194568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223194568">(Jan 19 2021 at 07:35)</a>:</h4>
<p>Definitely provenance. But that wasn't the focus of my question: if a server is bound to a specific set of business rules, and hence an x number of FHIR profiles, and it receives/ingests something that doesn't conform, and can't be automatically made to conform, how would on (as a FHIR server) identify that 'please note, fields x, y and z are non-conformant', so the data can be patched during a subsequent human review process? A security tag would indicate unreliability/incompleteness, but it wouldn't tag fields x, y and z.</p>



<a name="223225113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223225113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223225113">(Jan 19 2021 at 13:26)</a>:</h4>
<p>Given the conditions you have outlined, I would expect it to reject that data.     I recommend Postel's Law be applied rather than rejecting.</p>



<a name="223252059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/223252059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Schneider <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#223252059">(Jan 19 2021 at 16:29)</a>:</h4>
<p>It might be possible to express the human review and data patching process as a workflow.</p>



<a name="243017761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/243017761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Mahoney <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#243017761">(Jun 17 2021 at 13:34)</a>:</h4>
<p>How to know if a code system (and resulting valueset) is case sensitive?<br>
The valueset I am trying to use is the All-languages <a href="http://hl7.org/fhir/R4/valueset-all-languages.html">http://hl7.org/fhir/R4/valueset-all-languages.html</a>.<br>
<a href="https://www.hl7.org/fhir/valueset.html">https://www.hl7.org/fhir/valueset.html</a>  says to check the underlying code system. But I can find the underlying code system.<br>
When I check <a href="https://www.rfc-editor.org/rfc/rfc5646.txt">https://www.rfc-editor.org/rfc/rfc5646.txt</a><br>
it has the text: "Modified the text in Section 2.1 to place more emphasis on the<br>
      fact that language tags are not case sensitive."</p>
<p>Does that confirm it is not case sensitive?</p>



<a name="243067510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/tagging%20anomalies%20in%20persisted%20resources/near/243067510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/tagging.20anomalies.20in.20persisted.20resources.html#243067510">(Jun 17 2021 at 19:03)</a>:</h4>
<p>I'd treat that with caution - write language tags in the correct case, and be careful to do so, but not assume all systems will when reading tags</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
