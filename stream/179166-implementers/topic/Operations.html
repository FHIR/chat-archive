---
layout: page
title: "FHIR Chat  · Operations · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html">Operations</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153818159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818159">(Mar 25 2016 at 21:31)</a>:</h4>
<p>If I define an Operation via its <code>OperationDefinition</code> as having a parameter of type <code>token</code>, am I allowed to invoke that operation via a Parameters resource? If so, how does the resource look?</p>



<a name="153818167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818167">(Mar 25 2016 at 22:01)</a>:</h4>
<p>It's a string type. Current build makes this clear as of 48 hours ago</p>



<a name="153818169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818169">(Mar 25 2016 at 22:03)</a>:</h4>
<p>Ahhhhh right, suddenly I remember the FHIR-I discussion where this was decided. Thanks!</p>



<a name="153818243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818243">(Mar 26 2016 at 15:17)</a>:</h4>
<p>Ok, I'm putting support for this into HAPI now.</p>
<p>Is it reasonable to assume that if an operation uses a token named <code>foo</code>, it's ok to invoke it with a qualifier, such as <code>$myoperation?foo:below=http://system|value</code></p>
<p>If so, what about when invoking it via the parmeters resource? Ie, is it ok for the Parameters resource to have a part named <code>foo:below</code> even though the definition defined the part as being called <code>foo</code>?</p>



<a name="153818250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818250">(Mar 26 2016 at 15:28)</a>:</h4>
<p>That would be a surprising result to me, at least. </p>



<a name="153818251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818251">(Mar 26 2016 at 15:30)</a>:</h4>
<p>But I never understood <a href="https://chat.fhir.org/#narrow/stream/implementers/subject/OperationDefinition.2Eparameter.2EsearchType/near/7336" target="_blank" title="https://chat.fhir.org/#narrow/stream/implementers/subject/OperationDefinition.2Eparameter.2EsearchType/near/7336">https://chat.fhir.org/#narrow/stream/implementers/subject/OperationDefinition.2Eparameter.2EsearchType/near/7336</a> (and I don't think anyone provided an example to clarify). </p>



<a name="153818252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818252">(Mar 26 2016 at 15:32)</a>:</h4>
<p>Yeah, agreed. Don't know that I see any obvious better ways though.</p>
<ul>
<li>Define an extension for the qualifier</li>
<li>Disallow qualifiers when invoking by Parameters</li>
<li>Add another field to Parameters for the qualifier</li>
</ul>



<a name="153818253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818253">(Mar 26 2016 at 15:36)</a>:</h4>
<p>Yeah, I think your question goes hand in hand with this one. Is there a way of merging streams? :)</p>
<p>The <a href="http://hl7-fhir.github.io/operationdefinition-definitions.html#OperationDefinition.parameter.searchType" target="_blank" title="http://hl7-fhir.github.io/operationdefinition-definitions.html#OperationDefinition.parameter.searchType">invariant</a> on <code>OperationDefinition.parameter.searchType</code> does agree with Grahame's answer above though. If an operation uses a search parameter, the <code>OperationDefinition.parameter.type</code> has to be <code>string</code> or <code>(missing)</code></p>



<a name="153818254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818254">(Mar 26 2016 at 15:37)</a>:</h4>
<p>So.. I guess the part in OperationDefinition makes sense to me, but I think we still have work to do in terms of explaining how qualifiers work with this.</p>



<a name="153818256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818256">(Mar 26 2016 at 15:51)</a>:</h4>
<p>(You can rename topics...) But anyway: my question was whether there is an example of how "searchType" is used. I didn't see it in the examples but may have missed it. If you understand this James maybe you can help explain it to me. </p>



<a name="153818259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818259">(Mar 26 2016 at 16:05)</a>:</h4>
<p>I don't know of any examples yet, but I do remember the discussion on FHIR-I well at least.</p>
<p>The idea is that for some people it might be useful to define operations where the parameter parts are search parameters. I guess the obvious use case for that would be for operations that are basically specialized searches, since that was you can make the URLs have the same semantics as other searches.</p>
<p>In this case, you'd set <code>type</code> to <code>string</code> and <code>searchType</code> would be set to <code>token</code> or <code>date</code> or whatever. E.g from the unit test I'm writing as we speak:</p>
<div class="codehilite"><pre>   <span class="nt">&lt;parameter&gt;</span>
      <span class="nt">&lt;name</span> <span class="na">value=</span><span class="s">&quot;valtok&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;use</span> <span class="na">value=</span><span class="s">&quot;in&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;min</span> <span class="na">value=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;max</span> <span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;type</span> <span class="na">value=</span><span class="s">&quot;string&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;searchType</span> <span class="na">value=</span><span class="s">&quot;token&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/parameter&gt;</span>
</pre></div>



<a name="153818261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818261">(Mar 26 2016 at 16:19)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9770" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9770">tracker filed</a> to clarify this</p>



<a name="153818262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818262">(Mar 26 2016 at 16:19)</a>:</h4>
<p>I see, thanks! I guess I would argue for making this a get-only feature. Failing that, then  using x-www-urlencoded for POST, to stay parallel with normal search. Failing that, adding a "modifier" to params. </p>



<a name="153818263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818263">(Mar 26 2016 at 16:21)</a>:</h4>
<p>(BTW what you call "qualifiers" FHIR calls "modifiers".) </p>



<a name="153818264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818264">(Mar 26 2016 at 16:22)</a>:</h4>
<p>Ugh yes, bad habit. HAPI named them that before FHIR gave them a name :)</p>



<a name="153818277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818277">(Mar 26 2016 at 20:01)</a>:</h4>
<p>Josh - <a href="https://hl7-fhir.github.io/patient-operations.html#match" target="_blank" title="https://hl7-fhir.github.io/patient-operations.html#match">https://hl7-fhir.github.io/patient-operations.html#match</a> though I see I have a red rendering problem there</p>



<a name="153818278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153818278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153818278">(Mar 26 2016 at 20:01)</a>:</h4>
<p>agree that how to do modifiers is unresolved</p>



<a name="153832450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153832450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153832450">(Jun 11 2016 at 19:16)</a>:</h4>
<p>And now, a new OperationDefinition question, per a <a href="https://github.com/jamesagnew/hapi-fhir/issues/379" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/issues/379">HAPI ticket</a> raised by <span class="user-mention" data-user-id="191343">@Michael Lawley</span> </p>
<p>The definition of <code>OperationDefinition.instance</code> is "Indicates whether this operation can be invoked on a particular instance of one of the given types.". Given the word "can", I take this to mean that:</p>
<ul>
<li>a value of <code>true</code> means the operation can be applied at both the type and instance level</li>
<li>a value of <code>false</code> means that the operation can be applied at the type level</li>
<li>there is no way of indicating that the resource can only be applied at the instance level</li>
</ul>
<p>Does my interpretation make sense? Is this a problem?</p>



<a name="153832451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153832451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153832451">(Jun 11 2016 at 19:17)</a>:</h4>
<p>I do note that Grahame's server exposes only a single OperationDefinition for the <code>validate</code> operation, presumably covering both the type and instance variants. This seems to confirm my interpretation..</p>



<a name="153832597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153832597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153832597">(Jun 13 2016 at 23:16)</a>:</h4>
<p>makes sense to me :)<br>
It would make more sense to me to separate the definition into two, one for type level and one for instance level because they often have parameters that make sense only in one invocation context and currently the only way to determine this (AFAIK) is to read the text</p>



<a name="153832629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153832629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153832629">(Jun 13 2016 at 23:34)</a>:</h4>
<p>I don't know about separating the definition into 2. While it serve some forms of computation better, it doubt it would be better overall. </p>



<a name="153832630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153832630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153832630">(Jun 13 2016 at 23:34)</a>:</h4>
<p>but there is a common pattern where the operation works at either type or instance, and some parameters are proxies for 'the identity of the thing' </p>



<a name="153832714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153832714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153832714">(Jun 14 2016 at 06:55)</a>:</h4>
<p>Conformance has Rest 0-* with mode (client | server) allowing to differentiate capabilities for the two modes. Would something like that be useful for OperationDefinition? Differentiation on OperationDefinition should be limited to a small set of properties, maybe just parameters. Otherwise it would effectively still be split into 2, albeit in one Resource then.</p>



<a name="153832785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153832785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153832785">(Jun 14 2016 at 17:58)</a>:</h4>
<p>IMO we probably don't need anything fancy here. One more boolean that indicates that the operation can be invoked at the type level would allow for this to be unambiguous.</p>



<a name="153832825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153832825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153832825">(Jun 14 2016 at 23:36)</a>:</h4>
<p>yes it's clearly appropriate to do at least that. </p>



<a name="153849864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153849864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153849864">(Sep 20 2016 at 13:51)</a>:</h4>
<p><a href="http://hl7-fhir.github.io/operations.html#executing" target="_blank" title="http://hl7-fhir.github.io/operations.html#executing">http://hl7-fhir.github.io/operations.html#executing</a> indicates that:</p>
<blockquote>
<p>Some Operations with primitive input types and a single Resource output parameter named 'return' can be invoked using a GET directly, with parameters as HTTP URL parameters.</p>
</blockquote>
<p>Do/should we have an equivalent "nice syntax" for inputs -- that is, allowing clients to just pass in a single resource, rather than a<code>Parameters</code>?</p>



<a name="153849874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153849874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153849874">(Sep 20 2016 at 14:03)</a>:</h4>
<p>we do</p>



<a name="153849875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153849875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153849875">(Sep 20 2016 at 14:03)</a>:</h4>
<p>Can you show me where?</p>



<a name="153849876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153849876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153849876">(Sep 20 2016 at 14:04)</a>:</h4>
<p>"If the only parameter to the operation is a resource, then the operation can also executed by a POST with that parameter as the body of the request." </p>



<a name="153849877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153849877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153849877">(Sep 20 2016 at 14:04)</a>:</h4>
<p><a href="http://hl7-fhir.github.io//operations.html#request" target="_blank" title="http://hl7-fhir.github.io//operations.html#request">http://hl7-fhir.github.io//operations.html#request</a></p>



<a name="153849878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153849878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153849878">(Sep 20 2016 at 14:04)</a>:</h4>
<p>Thanks! So it's up to the client to decide, and a server needs to support both ways?</p>



<a name="153849879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153849879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153849879">(Sep 20 2016 at 14:05)</a>:</h4>
<p>pretty much, yes</p>



<a name="153849880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153849880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153849880">(Sep 20 2016 at 14:07)</a>:</h4>
<p>Got it. And re:</p>
<blockquote>
<p>If the only parameter to the operation is a resource</p>
</blockquote>
<p>Is there a reason we can't take in (complex) datatypes this way, too?</p>



<a name="153849883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153849883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153849883">(Sep 20 2016 at 14:10)</a>:</h4>
<p>it simplifies all the implementations greatly - wrap it in a resource wrapper - use Parameters</p>



<a name="153850039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153850039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153850039">(Sep 20 2016 at 20:30)</a>:</h4>
<p>That text might be a little ambiguous - does it mean "the only declared parameter" (in the op definition) or does it mean "the only actual parameter" (in a specific invocation)?  It's the latter, I know, but the wording could be more explicit.</p>



<a name="153850047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153850047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153850047">(Sep 20 2016 at 21:39)</a>:</h4>
<p>do you want to make a task to clarify the wording?</p>



<a name="153850054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153850054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153850054">(Sep 21 2016 at 00:59)</a>:</h4>
<p>Done <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12070" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12070">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12070</a></p>



<a name="153850072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153850072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153850072">(Sep 21 2016 at 10:17)</a>:</h4>
<p>thx</p>



<a name="153894308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153894308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mounika <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153894308">(Jun 19 2017 at 06:59)</a>:</h4>
<p>Hi all,  We are using HAPI-FHIR server and perfoming some operations like  ActivityDefinition/[id]/$apply, CapabilityStatement/$subset, CapabilityStatement/$implements , CodeSystem/$lookup, CodeSystem/$subsumes , CodeSystem/$compose, Composition/$document.I want to know whether the HAPI-FHIR server is supports these operations or not? If yes how?</p>



<a name="153954750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153954750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153954750">(Apr 27 2018 at 09:45)</a>:</h4>
<p>Is there any hard rule that $Operations cannot occur on the DELETE verb? In my case, I have created an operation for the users (admin users) to load into the server CompartmentDefinition resources. That operation looks like this: <code>POST [base]/CompartmentDefinition$x-setcompartment</code> and takes a single CompartmentDefinition resource. It checks its validity and then make it an active Compatment on the server. This then begs the question how do they remove that active Compartment from the server. I feel like I want to implement another operation using the DELETE verb, something like <code>DELETE [base]/CompartmentDefinition$x-delete-compartment?code=Patient</code>, which removes the active compartment from the server. It that allowed?</p>



<a name="153954866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153954866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153954866">(Apr 27 2018 at 23:23)</a>:</h4>
<p>well, here's how i'd think about:</p>



<a name="153954867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153954867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153954867">(Apr 27 2018 at 23:24)</a>:</h4>
<ul>
<li>POST/PUT the compartment to the server</li>
<li>so now it's [base]/Compartment/[the-id]</li>
<li>operation: [base]/Compartment/[the-id] /$set-active</li>
<li>now the compartment is good to go. maybe tagged by the server so you know it's active</li>
<li>operation: [base]/Compartment/[the-id] /$set-inactive</li>
<li>DELETE [base]/Compartment/[the-id]</li>
</ul>



<a name="153954868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153954868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153954868">(Apr 27 2018 at 23:24)</a>:</h4>
<p>I can't imagine what it means to 'set a compartment active'</p>



<a name="153954876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153954876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153954876">(Apr 28 2018 at 02:49)</a>:</h4>
<p>Thanks Grahame, I understand you view and had considered it. I was concerned that haveing the server active CompartmentDefiniton resource in the general resource repository ran the risk of it being modified without the awareness of the consequences of that modification on the active server compartment. Would I be correct in thinking that your view is that any PUT, DELETE on that resource would be applied to the server active Compartment without calling $set-active again?</p>



<a name="153954877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153954877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153954877">(Apr 28 2018 at 03:47)</a>:</h4>
<p>I'd probably refuse to change it if it was active</p>



<a name="153955170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153955170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153955170">(May 01 2018 at 08:01)</a>:</h4>
<p>It is for such reasons that Vonk has a separate /administration endpoint. If you change resources there, you change the behaviour of Vonk.<br>
Although Vonk does not provide an operation like the one <span class="user-mention" data-user-id="191391">@Angus Millar</span> describes. A compartment is conveyed per request, based on the compartment in the url ('compartment search') or in the authorization token.<br>
I'm curious what the usecase is set a CompartmentDefinition to active for the server as a whole.</p>



<a name="153955323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153955323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Angus Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153955323">(May 02 2018 at 01:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>  I think we are doing something similar.  On the first install, my server begins its life with no active Compartments. That means users can not do a search as follows <code>[base]/Patient/[id]//Observation?identifier=http://acme.com/lab/reports/Observations|obs00000006</code>. That search would return an error of "No active Patient Compartment exist in this server.". Yet if the user adds a CompartmentDefinition resource to the server at the endpoint <code>[base]/CompartmentDefinition/10</code> and then calls an Operation I have defined call <code>$x-set-CompartmentDefinition-active</code> and called like this <code>[base]//CompartmentDefinition/10/$x-set-CompartmentDefinition-active</code> the server then processes that CompartmentDefinition resource with the id=10, checking it is valid, and then sets it as Active in the server. Active here meaning that now the search <code>[base]/Patient/[id]//Observation?identifier=http://acme.com/lab/reports/Observations|obs00000006</code> will work.</p>



<a name="153955373"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153955373" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153955373">(May 02 2018 at 12:12)</a>:</h4>
<p>Ah, I get it. Similar indeed. But to Vonk not the $x-set-CompartmentDefinition-active is the trigger but the fact that it is posted to the [base]/administration/CompartmentDefinition instead of the normal [base]/CompartmentDefinition.</p>



<a name="153955466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Operations/near/153955466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Operations.html#153955466">(May 02 2018 at 20:03)</a>:</h4>
<p>I would use the same operation with one input parameter for the status: boolean isDelete := true | false</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
