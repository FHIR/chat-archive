---
layout: page
title: "FHIR Chat  · bdl-8 when no &quot;fullUrl&quot; · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html">bdl-8 when no &quot;fullUrl&quot;</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153979739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153979739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George Leontiev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153979739">(Jul 31 2018 at 16:21)</a>:</h4>
<p>Hi, first question here so let me know if I am in the wrong place:<br>
I'm implementing FHIRPath and running into an issue with the bdl-8 constraint on bundle: <a href="https://www.hl7.org/fhir/bundle.html" target="_blank" title="https://www.hl7.org/fhir/bundle.html">https://www.hl7.org/fhir/bundle.html</a><br>
<code>fullUrl</code> is optional, so <code>contains('/_history/')</code> may propagate the empty result, which <code>.not()</code> also propagates, so the constraint returns <code>{}</code>. <br>
Does <code>{}</code> mean the constraint passes? Or is the FHIRPath incorrect? or am I missing something?</p>



<a name="153979741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153979741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153979741">(Jul 31 2018 at 16:27)</a>:</h4>
<p>Yes, empty in a constraint means it passes, in the same way that null in a check constraint in SQL passes.</p>



<a name="153979742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153979742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George Leontiev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153979742">(Jul 31 2018 at 16:29)</a>:</h4>
<p>OK Thanks!</p>



<a name="153980098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153980098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153980098">(Aug 01 2018 at 08:40)</a>:</h4>
<p>FYI: bdl-8 will be dropped in R4.</p>



<a name="153998027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153998027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153998027">(Sep 19 2018 at 08:43)</a>:</h4>
<blockquote>
<p>FYI: bdl-8 will be dropped in R4.</p>
</blockquote>
<p>At least, I thought so after the Cologne WGM. But I am confused by two related GForge items:<br>
<a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17251&amp;start=0" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17251&amp;start=0">17251</a>: Decided in Cologne to revoke the restriction all together. <br>
<a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16518&amp;start=0" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16518&amp;start=0">16518</a>: No defined use-case and prohibiting it simplifies implementations.  If you have a use-case, feel free to submit a separate change request describing it.  We don't feel it's appropriate to make a statement about the rationale in the spec.<br>
And in the latest build, <a href="http://build.fhir.org/bundle.html#invs" target="_blank" title="http://build.fhir.org/bundle.html#invs">bdl-8</a> is still in.</p>
<p>So what is the verdict?</p>



<a name="153998075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153998075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153998075">(Sep 19 2018 at 13:27)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="153998887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153998887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153998887">(Sep 21 2018 at 03:11)</a>:</h4>
<p>oh so my comment is a little misleading.. </p>
<blockquote>
<p>It cannot be the non-version logical id ([base]/Patient/123), because that would result in duplicate fullUrls.</p>
</blockquote>
<p>That's what we revoked altogether</p>



<a name="153998925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153998925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153998925">(Sep 21 2018 at 07:34)</a>:</h4>
<p>You mean that duplicate fullUrls are allowed? And only in a history bundle I presume?</p>



<a name="153998928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153998928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153998928">(Sep 21 2018 at 07:41)</a>:</h4>
<p>no in any bundle</p>



<a name="153998929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153998929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153998929">(Sep 21 2018 at 07:41)</a>:</h4>
<p>it might not make sense... but it might.</p>



<a name="153999226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153999226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153999226">(Sep 22 2018 at 01:34)</a>:</h4>
<p>bdl-7 is also related to this issue when the Bundle is history. The problem is when the history contains entries for deleted versions of the resource. The expression will fail because the entry.resource is not present.</p>
<div class="codehilite"><pre><span></span>bdl-7 expression: entry.where(fullUrl.exists()).select(fullUrl&amp;resource.meta.versionId).isDistinct()
</pre></div>



<a name="153999624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/bdl-8%20when%20no%20%22fullUrl%22/near/153999624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/bdl-8.20when.20no.20.22fullUrl.22.html#153999624">(Sep 24 2018 at 22:18)</a>:</h4>
<p>can you make a task for this?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
