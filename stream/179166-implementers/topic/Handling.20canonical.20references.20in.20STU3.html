---
layout: page
title: "FHIR Chat  · Handling canonical references in STU3 · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20canonical.20references.20in.20STU3.html">Handling canonical references in STU3</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="256413626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20canonical%20references%20in%20STU3/near/256413626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20canonical.20references.20in.20STU3.html#256413626">(Oct 06 2021 at 13:46)</a>:</h4>
<p>I appreciate canonical referenced did not appear until FHIR R4 but from a backwards-compatibility perspective, I'm trying to work out what the expected behaviour would be from an STU3 FHIR server when it encounters one.</p>
<p>Currently on the Firely Vonk server if you post an STU3 reference with a canonical URL construct the response does not look correct to me.</p>
<p>So for example posting the following</p>
<p><a href="/user_uploads/10155/w0dU_HfoRlEwBGb1A1Pi4W4Q/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/w0dU_HfoRlEwBGb1A1Pi4W4Q/image.png" title="image.png"><img src="/user_uploads/10155/w0dU_HfoRlEwBGb1A1Pi4W4Q/image.png"></a></div><p>Yields the following</p>
<p><a href="/user_uploads/10155/LAjQXsjE6q2-luBOVmPuHNMZ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/LAjQXsjE6q2-luBOVmPuHNMZ/image.png" title="image.png"><img src="/user_uploads/10155/LAjQXsjE6q2-luBOVmPuHNMZ/image.png"></a></div><p>The canonical references have been interpreted as relative URLs rather than absolute URLs- is that the correct behaviour?</p>



<a name="256740348"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20canonical%20references%20in%20STU3/near/256740348" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthijs van der Wielen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20canonical.20references.20in.20STU3.html#256740348">(Oct 08 2021 at 13:36)</a>:</h4>
<p>When looking in to this it seems to be caused by the use of pipe versioning in the reference. When you remove the |33 the reference is stored correctly. I am not sure why the pipe versioning is include in the reference, but Firely Server does seem to handle this incorrectly. The pipe version should not influence the behavior and should be ignored.</p>



<a name="256765485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20canonical%20references%20in%20STU3/near/256765485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20canonical.20references.20in.20STU3.html#256765485">(Oct 08 2021 at 16:24)</a>:</h4>
<p>I don't think you can use the piping mechanism with a contained reference.  A contained reference is absolute and can't be further qualified.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
