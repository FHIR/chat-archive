---
layout: page
title: "FHIR Chat  · FHIR DSTU2 to STU3 converter · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html">FHIR DSTU2 to STU3 converter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153870372"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870372" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Chung <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870372">(Feb 06 2017 at 20:31)</a>:</h4>
<p>Does anyone have code to convert DSTU2 observations to STU3?  I will be using this for a Himss demo.  </p>



<a name="153870373"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870373" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870373">(Feb 06 2017 at 20:36)</a>:</h4>
<p>there's code in the Java reference implementation - see org.hl7.fhir.convertors.VersionConvertor_10_20. </p>



<a name="153870379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Chung <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870379">(Feb 06 2017 at 21:26)</a>:</h4>
<p>That is awesome.  Thanks!</p>



<a name="153870436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870436">(Feb 07 2017 at 08:15)</a>:</h4>
<p>I'm looking at converting DSTU2 to STU3 as well - is that the only tool available (not that it's a problem), or are there any others as well?</p>



<a name="153870439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870439">(Feb 07 2017 at 08:38)</a>:</h4>
<p>the only other option I know of, which is actually more reliable, is the R2/R3 conversion scripts - but using these requires more infrastructure which is not in place right now</p>



<a name="153870440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870440">(Feb 07 2017 at 08:38)</a>:</h4>
<p>a to do for me</p>



<a name="153870441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870441">(Feb 07 2017 at 08:38)</a>:</h4>
<p>Do those scripts use these maps? <a href="https://github.com/hl7-fhir/fhir-svn/blob/master/implementations/r2maps/R2toR3/Account.map" target="_blank" title="https://github.com/hl7-fhir/fhir-svn/blob/master/implementations/r2maps/R2toR3/Account.map">https://github.com/hl7-fhir/fhir-svn/blob/master/implementations/r2maps/R2toR3/Account.map</a></p>



<a name="153870444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870444">(Feb 07 2017 at 08:42)</a>:</h4>
<p>yes that's the scripts I was referring to </p>



<a name="153870445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870445">(Feb 07 2017 at 08:42)</a>:</h4>
<p>Ah man, I got pretty excited about getting to use those. How much more is needed to make them work?</p>



<a name="153870461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870461">(Feb 07 2017 at 10:28)</a>:</h4>
<p>well, they work (or they worked 4 weeks ago, and I will need to reviist them), and the code to make them work is in the unit tests for the java reference implementation - but that's the only place and it's not wrapped it elsewehre in a nice reusable form</p>



<a name="153870462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870462">(Feb 07 2017 at 10:30)</a>:</h4>
<p>Sounds similar to VersionConvertor_10_20.convertResource which I've just finished grasping (haven't tried running yet though)</p>



<a name="153870463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870463">(Feb 07 2017 at 10:31)</a>:</h4>
<p>that doesn't require any infrastructure. You just parse the resource, convert it, and then save it. </p>



<a name="153870464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870464">(Feb 07 2017 at 10:31)</a>:</h4>
<p>the maps require an IWorkerContext, which means you need definitions.x.zip</p>



<a name="153870465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870465">(Feb 07 2017 at 10:32)</a>:</h4>
<p>Aah, okay. I'll try the convertResource first then</p>



<a name="153870744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Chung <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870744">(Feb 08 2017 at 17:04)</a>:</h4>
<p>Is there a way to convert the FHIR objects to JSON?  I noticed the FHIR-SVN library uses its own DSTU2 and DSTU3 structures.  </p>



<a name="153870748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Chung <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870748">(Feb 08 2017 at 18:05)</a>:</h4>
<p>Oh I think I found the answer.  I didn't see the JsonParser class.  </p>



<a name="153870765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870765">(Feb 08 2017 at 19:52)</a>:</h4>
<p>Are these projects exported as gradle/maven projects at all? I got an all-Eclipse build working, but a gradle project would be nicer</p>



<a name="153870775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Chung <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870775">(Feb 08 2017 at 22:27)</a>:</h4>
<p>I would like it as a maven project.  I added jar commands to the ant build files to create jars.  Then added them to my maven project.  </p>



<a name="153870776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Chung <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870776">(Feb 08 2017 at 22:28)</a>:</h4>
<p>Is there a conversion for MedicationAdministration?  I was able to find conversions for others except for that one.  </p>



<a name="153870790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870790">(Feb 09 2017 at 00:56)</a>:</h4>
<p>My hope is to get these into HAPI sometime soon, at which point they'll be available as Maven artifacts and kept up to date that way..</p>



<a name="153870791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Chung <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870791">(Feb 09 2017 at 00:59)</a>:</h4>
<p>So far I have tried Device, Location, Observation, and Patient which have converted successfully.  I'm hoping for MedicationAdministration.  </p>



<a name="153870808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870808">(Feb 09 2017 at 03:54)</a>:</h4>
<p>yes it's my intent that the maven etc distro is as part of HAPI </p>



<a name="153870819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870819">(Feb 09 2017 at 07:26)</a>:</h4>
<p><span class="user-mention" data-user-id="193379">@Jeff Chung</span> Yeah it seems to be missing, but Grahame did make a map in <a href="https://github.com/hl7-fhir/fhir-svn/blob/master/implementations/r2maps/R2toR3/MedicationAdministration.map" target="_blank" title="https://github.com/hl7-fhir/fhir-svn/blob/master/implementations/r2maps/R2toR3/MedicationAdministration.map">https://github.com/hl7-fhir/fhir-svn/blob/master/implementations/r2maps/R2toR3/MedicationAdministration.map</a>. So if you want to pull out the infrastructure for running those from the unit tests...</p>



<a name="153870889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Chung <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870889">(Feb 09 2017 at 18:12)</a>:</h4>
<p>Thanks Vadim</p>



<a name="153870971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153870971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153870971">(Feb 10 2017 at 12:20)</a>:</h4>
<p>For StructureDefinition, VersionConvertor_10_20 converter mostly works well, but it misses putting the @id on elements in a few spots - is it expecting some values to be present in the DSTU2 StrucDef, or should I patch it for the cases it's missing?</p>



<a name="153871040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153871040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153871040">(Feb 10 2017 at 20:59)</a>:</h4>
<p>If it's not working, then patching or a change request may be necessary</p>



<a name="153871058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153871058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153871058">(Feb 10 2017 at 22:46)</a>:</h4>
<p>the algorithm for @id changed a lot between STU2 and STU3. I didn't try and get them right in the converter - I expect to use ProfileUtilities.setElementIds after the conversion</p>



<a name="153871089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153871089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153871089">(Feb 11 2017 at 12:54)</a>:</h4>
<p><a href="https://github.com/hl7-fhir/fhir-svn/blob/master/implementations/java/org.hl7.fhir.dstu3/src/org/hl7/fhir/dstu3/conformance/ProfileUtilities.java#L2771" target="_blank" title="https://github.com/hl7-fhir/fhir-svn/blob/master/implementations/java/org.hl7.fhir.dstu3/src/org/hl7/fhir/dstu3/conformance/ProfileUtilities.java#L2771">ProfileUtilities.setIds</a>? I'll give it a go, looks like the right thing.</p>



<a name="153871193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153871193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153871193">(Feb 13 2017 at 10:06)</a>:</h4>
<p>I'm getting ids like MedicationStatement:m1prescribing.effectivePeriod.start:starttidspunkt. The colons look nice and I can make sense of them - just checking that's the expected output?</p>



<a name="153871198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153871198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153871198">(Feb 13 2017 at 10:26)</a>:</h4>
<p>yes</p>



<a name="153871199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153871199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153871199">(Feb 13 2017 at 10:26)</a>:</h4>
<p>Great thanks.</p>



<a name="153871220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153871220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153871220">(Feb 13 2017 at 14:08)</a>:</h4>
<p>It's sticking sliceName on all elements - is that a big deal outside of slices? The sliceName is also what was the <a href="http://ElementDefinition.name" target="_blank" title="http://ElementDefinition.name">ElementDefinition.name</a> before, whose value wasn't constrained before - and sliceName now needs to follow a regex. Is there a method to strip invalid characters or should I do that as post-processing?</p>



<a name="153871225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153871225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153871225">(Feb 13 2017 at 15:02)</a>:</h4>
<p>Nevermind, it's an issue with the <a href="http://build.fhir.org/definitions-r2.xml.zip" target="_blank" title="http://build.fhir.org/definitions-r2.xml.zip">http://build.fhir.org/definitions-r2.xml.zip</a>, it has names on everything.</p>



<a name="153871248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153871248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153871248">(Feb 13 2017 at 19:22)</a>:</h4>
<p>then it's wrong. </p>



<a name="153876172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153876172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153876172">(Mar 13 2017 at 12:46)</a>:</h4>
<p>Hey guys, how can I try these scripts ? which maven artifact will contain these ?</p>



<a name="153876266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153876266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153876266">(Mar 13 2017 at 20:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> - can we get the R2 / R3 converter code into HAPI?</p>



<a name="153876286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153876286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153876286">(Mar 13 2017 at 20:53)</a>:</h4>
<p>very soon! :)</p>
<p>It's in a git branch right now, will be moved into master and deployed as a snapshot within probably the next 24 hours. The only holdup has been getting the validator updated. The 1.9.0 round of model changes broke a lot of HAPI's unit tests so it's taken a while to get those running. I actually just finally finished that work this morning.</p>



<a name="153876672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153876672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Hyland <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153876672">(Mar 14 2017 at 18:53)</a>:</h4>
<p>Seems to me that this approach to consider a DSTU2 to STU3 converter is not a simple translation or mapping exercise.  Sure you can force DSTU2 resources to be STU 3 (and vice-versa) - but this will not work in all (FHIR Resource or Profile type) cases and with all situations without incuring some type of "data-loss" or potential "data-coruption".  A simple mapping exercise we used to test out conversion includes the following exercise Example-A (v1.0) converted to Example-B (v2.0), followed by Example-B (v2.0) converted to Example-C (v1.0) (same format as Example-A) - if Example-A and Example-C are the same your conversion works (with no data-loss).  I would want to ensure folks understand these challenges - unless I am missing something (which has been known to happen - on occassion).</p>



<a name="153876673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153876673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153876673">(Mar 14 2017 at 19:13)</a>:</h4>
<p>you could read the introduction at <a href="http://build.fhir.org/r2maps.html" target="_blank" title="http://build.fhir.org/r2maps.html">http://build.fhir.org/r2maps.html</a></p>



<a name="153876847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153876847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153876847">(Mar 15 2017 at 06:06)</a>:</h4>
<p>Are there any plans for R2:ValueSet &lt;-&gt; R3:CodeSystem?</p>



<a name="153877024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153877024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153877024">(Mar 15 2017 at 19:07)</a>:</h4>
<p>that works. ValueSets with an inline code system are converted to a value set and a code system</p>



<a name="153877142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153877142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153877142">(Mar 15 2017 at 23:27)</a>:</h4>
<p>ah, good.  it's just not clear from the table of conversions</p>



<a name="153877634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153877634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153877634">(Mar 17 2017 at 06:07)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191319">@James Agnew</span> , As you mentioned on 14th march, the converters will be out as a snapshot. Are they already published ? If yes, where can I find them? Is this a separate artifact or part of an existing one</p>



<a name="153877781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153877781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153877781">(Mar 17 2017 at 13:21)</a>:</h4>
<p>Hey, for now I am building myself and using the jar in my project, just to test out. I got a problem, since MedicationOrder is renamed to MedicationRequest how I am supposed to convert a bundle having MedicationOrder.</p>



<a name="153877782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153877782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153877782">(Mar 17 2017 at 13:22)</a>:</h4>
<p>Right now I am getting an error <code>Unknown resource MedicationOrder</code> ?</p>



<a name="153878101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153878101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153878101">(Mar 19 2017 at 09:17)</a>:</h4>
<p>Any ideas about above? I am getting same error for <code>MedicationOrder</code> and <code>DiagnosticOrder</code>. Though I didn't see on fhir-build-diff that<code>DiagnosticOrder</code> is replaced by which resource.</p>



<a name="153878178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153878178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153878178">(Mar 19 2017 at 10:42)</a>:</h4>
<p>It sounds like there's something wrong with your loading conditions. </p>



<a name="153878179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153878179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153878179">(Mar 19 2017 at 10:42)</a>:</h4>
<p>how are you loading?</p>



<a name="153878206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153878206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153878206">(Mar 19 2017 at 12:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , This is the code which I have written </p>
<p><code>r2ToR3Loader.loadBundle(fileInputStream, false)
String s1 = FhirContext.forDstu3().newXmlParser().encodeResourceToString(bundle);</code></p>
<p>It works for fileInputStream containing Immunization/Condition/Procedure/Observation/DiagnosticReport/FamilyHistory/ProcedureRequest, but it fails for DiagnosticOrder/MedicationOrder. I suspect it might be because these are deleted in STU3.</p>



<a name="153878263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153878263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153878263">(Mar 19 2017 at 19:38)</a>:</h4>
<p>how did you prepare you r2tor3Loader?</p>



<a name="153878399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153878399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153878399">(Mar 20 2017 at 02:57)</a>:</h4>
<p>I had checkout svn source and built the jar. I found only one way to prepare <code>r2ToR3Loader</code> which is <code>R2ToR3Loader r2ToR3Loader = new R2ToR3Loader();</code> and after that above lines are called.</p>



<a name="153878461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153878461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153878461">(Mar 20 2017 at 04:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I think one possible reason could be I tried to use these as my dependencies </p>
<p><code>compile ("ca.uhn.hapi.fhir:hapi-fhir-base:2.1")
    compile ("ca.uhn.hapi.fhir:hapi-fhir-structures-dstu3:2.1")
    compile ("ca.uhn.hapi.fhir:hapi-fhir-structures-hl7org-dstu3:2.1")
    compile files('lib/org.hl7.fhir.igpublisher.jar')</code></p>
<p><code>org.hl7.fhir.igpublisher.jar</code> is the latest which I built rest I am getting from maven. Which might be the cause, I will try to get snapshots of above thing as well</p>



<a name="153878462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153878462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153878462">(Mar 20 2017 at 04:38)</a>:</h4>
<p>Even this didn't help.</p>



<a name="153878464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153878464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153878464">(Mar 20 2017 at 04:58)</a>:</h4>
<p>I looked at this page as well, <a href="http://build.fhir.org/r2maps.html" target="_blank" title="http://build.fhir.org/r2maps.html">http://build.fhir.org/r2maps.html</a>. Even this doesn't talk about <code>DiagnosticOrder</code> and <code>MedicationOrder</code>.</p>



<a name="153878467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153878467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153878467">(Mar 20 2017 at 05:09)</a>:</h4>
<p>I will have time to look at this in 48 hours or so, once Release 3 is out</p>



<a name="153880028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880028">(Mar 28 2017 at 06:00)</a>:</h4>
<p>Hey guys any updates on this.</p>



<a name="153880215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880215">(Mar 29 2017 at 06:18)</a>:</h4>
<p>One new question, since codesystem and Valueset will be two different systems now. How I am supposed to reffer a CodeSystem from valueset ? </p>



<a name="153880216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880216">(Mar 29 2017 at 06:30)</a>:</h4>
<p>You can include a CodeSystem in a ValueSet  with compose/include (see <a href="https://www.hl7.org/fhir/valueset.html" target="_blank" title="https://www.hl7.org/fhir/valueset.html">https://www.hl7.org/fhir/valueset.html</a>) e.g.</p>
<div class="codehilite"><pre> &lt;compose&gt;
    &lt;include&gt;
      &lt;system
              value=&quot;http://..../&gt;
    &lt;/include&gt;
</pre></div>



<a name="153880218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880218">(Mar 29 2017 at 06:51)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191478">@Oliver Egger</span>, Thanks for the response.  I just converted a valueset having an inline <code>codeSystem</code> with R2-&gt;R3 converter. I just got below after conversion this is the extra part we got</p>
<div class="codehilite"><pre><span></span>&lt;compose&gt;
        &lt;include&gt;
            &lt;system value=&quot;http://acme.com/config/fhir/codesystems/cholesterol&quot;/&gt;
        &lt;/include&gt;
    &lt;/compose&gt;
</pre></div>


<p>And in R2 was as below</p>
<div class="codehilite"><pre><span></span>    &lt;codeSystem&gt;
        &lt;system value=&quot;http://acme.com/config/fhir/codesystems/cholesterol&quot;/&gt;
        &lt;version value=&quot;4.2.3&quot;/&gt;
        &lt;caseSensitive value=&quot;true&quot;/&gt;
        &lt;concept&gt;
            &lt;code value=&quot;chol&quot;/&gt;
            &lt;display value=&quot;SChol&quot;/&gt;
            &lt;definition value=&quot;Serum Cholesterol&quot;/&gt;
            &lt;designation&gt;
                &lt;use&gt;
                    &lt;system value=&quot;http://acme.com/config/fhir/codesystems/internal&quot;/&gt;
                    &lt;code value=&quot;internal-label&quot;/&gt;
                &lt;/use&gt;
                &lt;value value=&quot;Obdurate Labs uses this with both kinds of units...&quot;/&gt;
            &lt;/designation&gt;
        &lt;/concept&gt;
    &lt;/codeSystem&gt;
</pre></div>


<p>I am not sure why others are not populated.</p>



<a name="153880219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880219">(Mar 29 2017 at 06:54)</a>:</h4>
<p>If I remember corectly <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> mentioned <code> ValueSets with an inline code system are converted to a value set and a code system</code>.</p>



<a name="153880226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880226">(Mar 29 2017 at 08:48)</a>:</h4>
<p>Why is written "codesystems" in R2, should I not be CodeSystem?  In the R2R3 map it looks like that a CodeSystem is generated: <a href="http://build.fhir.org/valueset-version-maps.html" target="_blank" title="http://build.fhir.org/valueset-version-maps.html">http://build.fhir.org/valueset-version-maps.html</a> <a href="http://build.fhir.org/mapping-language.html" target="_blank" title="http://build.fhir.org/mapping-language.html">http://build.fhir.org/mapping-language.html</a> (ValueSet-codeSystem" : for src.codeSystem as vs0 make create("CodeSystem") as vt0 then codeSystem(src, tgt, vs0, vt0))</p>



<a name="153880230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880230">(Mar 29 2017 at 09:48)</a>:</h4>
<p>Hey thanks! One new question now ? I just tried converting  a bundle with DiagnosticOrder. The performer element is missing from the output bundles.</p>
<div class="codehilite"><pre>      &lt;performer&gt;
            &lt;reference value=&quot;http://localhost:9997/providers/19.json&quot;/&gt;
      &lt;/performer&gt;
</pre></div>


<p>This is what input file contains. The output file doesn’t have anything called performer.</p>



<a name="153880322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880322">(Mar 29 2017 at 20:05)</a>:</h4>
<p>where is performer defined?</p>



<a name="153880349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880349">(Mar 30 2017 at 03:34)</a>:</h4>
<p>This is what my original xml looks like </p>
<div class="codehilite"><pre>                &lt;DiagnosticReport xmlns=&quot;http://hl7.org/fhir&quot;&gt;
                &lt;id value=&quot;86571847-d982-4af9-887c-ee8d0fccfde5&quot;/&gt;
                &lt;code&gt;
                    &lt;coding&gt;
                        &lt;system value=&quot;http://localhost:9997/openmrs/ws/rest/v1/tr/concepts/07a9e3a1-5206-11e5-ae6d-0050568225ca&quot;/&gt;
                        &lt;code value=&quot;07a9e3a1-5206-11e5-ae6d-0050568225ca&quot;/&gt;
                        &lt;display value=&quot;Hemoglobin [Mass/volume] in Blood&quot;/&gt;
                    &lt;/coding&gt;
                &lt;/code&gt;
                &lt;status value=&quot;final&quot;/&gt;
                &lt;issued value=&quot;2015-09-04T15:17:08.000+05:30&quot;/&gt;
                &lt;subject&gt;
                    &lt;reference value=&quot;http://localhost:9997/api/default/patients/98001046534&quot;/&gt;
                    &lt;display value=&quot;98001046534&quot;/&gt;
                &lt;/subject&gt;
                &lt;performer&gt;
                    &lt;reference value=&quot;http://localhost:9997/providers/19.json&quot;/&gt;
                &lt;/performer&gt;
                &lt;encounter&gt;
                    &lt;reference value=&quot;urn:uuid:cfd88241-3af9-4f5b-892a-980a70506f20&quot;/&gt;
                &lt;/encounter&gt;
                &lt;identifier&gt;
                    &lt;value value=&quot;urn:uuid:86571847-d982-4af9-887c-ee8d0fccfde5&quot;/&gt;
                &lt;/identifier&gt;
                &lt;request&gt;
                    &lt;reference value=&quot;http://172.18.46.156:8081/patients/98001046534/encounters/5c2714ce-3b5a-43e3-afd8-50fbb4c32fa4&quot;/&gt;
                &lt;/request&gt;
                &lt;effectiveDateTime value=&quot;2015-09-04T15:15:17.000+05:30&quot;/&gt;
                &lt;result&gt;
                    &lt;reference value=&quot;urn:uuid:b0a674b5-486a-4975-af43-60fe74b6ed8e&quot;/&gt;
                &lt;/result&gt;
            &lt;/DiagnosticReport&gt;
</pre></div>


<p>If you see there is a performer field. Below is the converted xml which doesn't have performer field. </p>
<div class="codehilite"><pre>            &lt;DiagnosticReport xmlns=&quot;http://hl7.org/fhir&quot;&gt;
                &lt;id value=&quot;86571847-d982-4af9-887c-ee8d0fccfde5&quot;/&gt;
                &lt;identifier&gt;
                    &lt;value value=&quot;urn:uuid:86571847-d982-4af9-887c-ee8d0fccfde5&quot;/&gt;
                &lt;/identifier&gt;
                &lt;status value=&quot;final&quot;/&gt;
                &lt;code&gt;
                    &lt;coding&gt;
                        &lt;system value=&quot;http://localhost:9997/openmrs/ws/rest/v1/tr/concepts/07a9e3a1-5206-11e5-ae6d-0050568225ca&quot;/&gt;
                        &lt;code value=&quot;07a9e3a1-5206-11e5-ae6d-0050568225ca&quot;/&gt;
                        &lt;display value=&quot;Hemoglobin [Mass/volume] in Blood&quot;/&gt;
                        &lt;userSelected value=&quot;false&quot;/&gt;
                    &lt;/coding&gt;
                &lt;/code&gt;
                &lt;subject&gt;
                    &lt;reference value=&quot;http://localhost:9997/api/default/patients/98001046534&quot;/&gt;
                    &lt;display value=&quot;98001046534&quot;/&gt;
                &lt;/subject&gt;
                &lt;context&gt;
                    &lt;reference value=&quot;urn:uuid:cfd88241-3af9-4f5b-892a-980a70506f20&quot;/&gt;
                &lt;/context&gt;
                &lt;effectiveDateTime value=&quot;2015-09-04T15:15:17+05:30&quot;/&gt;
                &lt;issued value=&quot;2015-09-04T15:17:08.000+05:30&quot;/&gt;
                &lt;result&gt;
                    &lt;reference value=&quot;urn:uuid:b0a674b5-486a-4975-af43-60fe74b6ed8e&quot;/&gt;
                &lt;/result&gt;
            &lt;/DiagnosticReport&gt;
</pre></div>



<a name="153880350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880350">(Mar 30 2017 at 03:39)</a>:</h4>
<p>I am converting this as <code>r2ToR3Loader.loadBundle(fileInputStream, false)</code>. I have build the <code>igpublisher.jar</code> from my local checked out svn copy which has the latest build from 29th march, <br>
`r11865 | grahameg | 2017-03-29 07:40:03 +0530 (Wed, 29 Mar 2017) | 1 line</p>
<p>update vsCache`</p>



<a name="153880351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880351">(Mar 30 2017 at 03:56)</a>:</h4>
<p>I just checked the code, these lines are commented out, not sure why</p>
<div class="codehilite"><pre>//    tgt.setPerformer(convertReference(src.getPerformer()));
//    for (org.hl7.fhir.dstu2.model.Reference t : src.getRequest())
//      tgt.addRequest(convertReference(t));
</pre></div>



<a name="153880388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880388">(Mar 30 2017 at 10:21)</a>:</h4>
<p>Any idea about above, Even I found out we are not converting <code>MedicationOrder</code> and <code>DiagnosticOrder</code>. The <code>VersionConvertor_10_30.convertResource()</code> are doesn't check for these two resources.</p>



<a name="153880569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880569">(Mar 31 2017 at 04:15)</a>:</h4>
<p>Hey guys any idea about above. If we are not converting above two Resources can we not throw an error. Right now if there is a bundle with <code>Encounter, Condition and MedicationOrder</code> it fails to convert the whole bundle itself because the medicationorder is unknown.</p>



<a name="153880696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880696">(Apr 03 2017 at 02:22)</a>:</h4>
<p>so i</p>



<a name="153880697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880697">(Apr 03 2017 at 02:22)</a>:</h4>
<p>so I'll have time to look at this stuff this week.</p>



<a name="153880698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880698">(Apr 03 2017 at 02:23)</a>:</h4>
<p>note that there are 2 different conversion routines: the java one, and the mapping language one. </p>



<a name="153880700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880700">(Apr 03 2017 at 02:24)</a>:</h4>
<p>going forward, the java one is only really supported for conformance resources, unless someone else wants to take that on. The mapping langauge one is what I intend to invest in from now on. Which is the one your invocation code relates to. I had a quick look at performer, and the mapping language looks all right to me</p>



<a name="153880723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880723">(Apr 03 2017 at 03:56)</a>:</h4>
<p>We are using the Java library which is published in <code>igpublisher.jar</code>. As you said *The mapping langauge one is what I intend to invest in from now on*,  Does this mean if there are any missing parts we will have to do that manually in java code by following scripts ?</p>



<a name="153880725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880725">(Apr 03 2017 at 03:59)</a>:</h4>
<p>there's the Java library that does the actual conversion directly, and there's the java library that implements the mapping language, and uses the mapping language files published in the spec. </p>



<a name="153880726"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880726" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880726">(Apr 03 2017 at 03:59)</a>:</h4>
<p>the first is only maintained for the conformance resources (though I didn't bother removing the other reosurces in case someone wnated to own that).</p>



<a name="153880727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880727">(Apr 03 2017 at 04:00)</a>:</h4>
<p>the second is what I think you are using </p>



<a name="153880731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880731">(Apr 03 2017 at 04:02)</a>:</h4>
<p>yeah!</p>



<a name="153880732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880732">(Apr 03 2017 at 04:05)</a>:</h4>
<p>so I think we want to sort out this so that there's an easy to run it, which we don't have now. how are you running? as a java class, or as a jar?</p>



<a name="153880733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880733">(Apr 03 2017 at 04:06)</a>:</h4>
<p>We have added <code>igpublisher.jar</code> as a dependncy to project and then invoking <code>R2ToR3Loader</code> with DSTU2 bundles.</p>



<a name="153880741"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880741" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880741">(Apr 03 2017 at 04:22)</a>:</h4>
<p>ok, so I will add a new class for this </p>



<a name="153880746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880746">(Apr 03 2017 at 04:40)</a>:</h4>
<p>I think I am missing something. What is happening now <code>R2ToR3Loader</code> is working. Internally it calls <code>VersionConvertor_10_30</code> which is not taking care of few things <br>
1) <code>DiagnosticOrder</code><br>
2) <code>MedicationOrder</code> there is below commented line I found in java code </p>
<div class="codehilite"><pre>//    if (src instanceof org.hl7.fhir.dstu2.model.MedicationOrder)
//      return convertMedicationOrder((org.hl7.fhir.dstu2.model.MedicationOrder) src);
</pre></div>


<p>3) Performer for DiagnosticReport.<br>
4) <code>FamilyMemberHistory.condition.onset</code> thing is changed from <code>onsetQuantity</code> to <code>onsetAge</code>. I think the mapping-scripts/java-code is not taking care of this.</p>



<a name="153880748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880748">(Apr 03 2017 at 04:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> As you said "so I will add a new class for this" what this new class will be doing ? I am a bit confused.</p>



<a name="153880767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880767">(Apr 03 2017 at 09:41)</a>:</h4>
<p>yes. so you're using the java conversion code directly, but not using it the way I expected it to be used. The conversion code isn't supported anymore. </p>



<a name="153880768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880768">(Apr 03 2017 at 09:41)</a>:</h4>
<p>I'll add a new class for you that makes it easy for you to use the right way</p>



<a name="153880769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880769">(Apr 03 2017 at 09:44)</a>:</h4>
<p>Okay! After adding the new class will the above issues be fixed ?</p>



<a name="153880772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880772">(Apr 03 2017 at 10:01)</a>:</h4>
<p>well, we'll have to see</p>



<a name="153880774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880774">(Apr 03 2017 at 10:08)</a>:</h4>
<p>By when can we expect this class to be there? If it is checked in SVN I can pull and build it locally as well.</p>



<a name="153880782"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880782" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880782">(Apr 03 2017 at 11:24)</a>:</h4>
<p>see org.hl7.fhir.convertors.R2R3ConversionManager</p>



<a name="153880786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880786">(Apr 03 2017 at 11:30)</a>:</h4>
<p>Hey We just checked out latest code base. There is this new file, but We are not sure how to use this one. Right now what we were doing calling <code>r2ToR3Loader.loadBundle()</code> and it was doing things in expected way. The new class has not implemented anything.</p>



<a name="153880787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880787">(Apr 03 2017 at 11:31)</a>:</h4>
<p>I am not sure how to go forward about it. </p>



<a name="153880788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880788">(Apr 03 2017 at 11:31)</a>:</h4>
<p>no at present it's just the interface. See the notes at the head for how you would use it. I'll work on the implementtation</p>



<a name="153880942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880942">(Apr 05 2017 at 05:10)</a>:</h4>
<p>We tried these scripts. It is converting MedicationOrder as well now, didn't check deep though yet. We found below things are failing<br>
1) Condition notes are not converted<br>
2) DiagnosticRepoet Performer are not converted<br>
3) FamilyMemberHistory condition onset is not converted. shouln't it rename &lt;onsetQuantity&gt; tags to &lt;onsetAge&gt; tag. While comparing I got both datatypes are Age but the tag name is changed.<br>
4) ProcedureRequest with status request is throwing an error. I feel it has to be taken care in converter only, because outside I won't have control over it. I can't change these in DSTU2 bundle since the new status won't be available. As soon as it reaches to converter it fails saying the old status is unknown in STU3.</p>



<a name="153880944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880944">(Apr 05 2017 at 05:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> <span class="user-mention" data-user-id="191401">@Eric Haas</span> DiagnosticReport.performer is not converted becaue neither of you answered my question about this while I was working on the conversions. I don't have a clue how to understand the new DiagnosticReport.performer as compared to the old</p>



<a name="153880945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880945">(Apr 05 2017 at 05:21)</a>:</h4>
<p>Condition.notes - I overlooked this, and I don't know why </p>



<a name="153880946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880946">(Apr 05 2017 at 05:21)</a>:</h4>
<p>fixed, will update the posted scripts soon</p>



<a name="153880947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880947">(Apr 05 2017 at 05:57)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> any idea about the last two ? We just found a new issue, Condition with clinical status as active is not getting converted. </p>



<a name="153880948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880948">(Apr 05 2017 at 06:11)</a>:</h4>
<p>What I was thinking while analysisng DiagnosticReport.performer change. Initially it had performer with reference to (Organization/Practitioner). Now it has a performer.actor with same reference. We can populate the stu3 diagnosticreport.performer.actor same as dstu2 diagnosticreport.performer.</p>



<a name="153880949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880949">(Apr 05 2017 at 06:13)</a>:</h4>
<p>The stu3 diagnosticreport.performer.role information cannot be populated because this information doesn't exist in older structures. And it cannot be put default also because it has an example binding. That's what I was thinking.</p>



<a name="153880959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880959">(Apr 05 2017 at 09:58)</a>:</h4>
<p>Hey guys, The converters are failing for converting the DiagnosticOrder having more than one Item. Why are we restricting it to be only one?  How should this be fixed ?</p>



<a name="153880967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880967">(Apr 05 2017 at 12:40)</a>:</h4>
<p>Hello guys, I will just put what We have got today.</p>
<div class="codehilite"><pre>1) Condition notes are not converted.

2) Condition with clinical status &quot;active&quot; is converted to clinical status null.

3) FamilyMemberHistory condition onset is not converted. Ideally it should rename &lt;onsetQuantity&gt; tags to &lt;onsetAge&gt; tag. While comparing I got both has datatype as Age but the tag name is changed.

4) ProcedureRequest with status &quot;requested&quot; is throwing an error. It should map all existing status to one of the new status. I feel it has to be taken care in converter only, because outside I won&#39;t have control over it. I can&#39;t change these in DSTU2 bundle since the new status won&#39;t be available. As soon as it reaches to converter it fails saying the old status is unknown in STU3.

5) MedicationRequest.dosageInstruction.timing.repeat.boundsQuantity is not getting converted. Ideally it should rename &lt;boundsQuantity&gt; tags to &lt;boundsDuration&gt; tag. While comparing I got both has datatype as Duration but the tag name is changed.

6) DiagnosticRepoet Performer is not converted. (What I was thinking while analyzing DiagnosticReport.performer change. Initially, it had the performer with reference to (Organization/Practitioner). Now it has a performer.actor with the same reference. We can populate the stu3 diagnosticreport.performer.actor same as dstu2 diagnosticreport.performer.)

7) The DiagnosticOrder with more than one Item is failing. Why are we restricting it to be only one? How should this be fixed?

8) The MedicationOrder dateEnded is not present in MedicationRequest. What is the idea behind removing it ? I couldn’t find a similar field.
</pre></div>



<a name="153880996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880996">(Apr 05 2017 at 15:47)</a>:</h4>
<p>R3 performer = R2 performer when R3 performer.role = AUTauthor (originator).    R3 performer could be some other role as well and &lt;&gt; R3 performer.  Probably need to create a tracker to change the binding  to the v3 codes and binding strength to extensible <span class="user-mention" data-user-id="191405">@Rob Hausam</span>  what do you think?</p>



<a name="153880997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153880997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153880997">(Apr 05 2017 at 15:53)</a>:</h4>
<p>ProcedureRequest is for a single item.   See how composite requests are handled <a href="http://hl7.org/fhir/STU3/request.html#compound" target="_blank" title="http://hl7.org/fhir/STU3/request.html#compound">here</a></p>



<a name="153881023"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153881023" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153881023">(Apr 05 2017 at 17:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span>  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Yes, that's along the lines of what I was expecting to be able to do with DR.performer.role.  The current binding to the performer-role value set doesn't work for that (or at least doesn't provide an example for it), but changing it as you suggest I think would make sense.  I think we could have some discussion as to whether we should make it extensible and whether it should be V3 codes or a FHIR mapping to V3 (or something else).</p>



<a name="153881073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153881073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153881073">(Apr 06 2017 at 06:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> <span class="user-mention" data-user-id="191401">@Eric Haas</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, thanks for the help. Right now is there a way to tell ignore the errors in the conversion. Like in issues mentioned above the 4th and 7th are throwing an error. Which causes the whole bundle to fail.</p>



<a name="153881215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153881215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153881215">(Apr 07 2017 at 02:39)</a>:</h4>
<p>Hey guys, any updates on above.</p>



<a name="153881216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153881216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153881216">(Apr 07 2017 at 02:43)</a>:</h4>
<p>I meant is it possible anyway to ignore errors while converting, and convert them in my code.</p>



<a name="153881219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153881219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153881219">(Apr 07 2017 at 02:56)</a>:</h4>
<p>The above will be userful while converting something like Diagnostic Order with multiple Items, since the converter expects just one Item per DiagnosticOrder.</p>



<a name="153881225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153881225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153881225">(Apr 07 2017 at 03:23)</a>:</h4>
<p>this is on my list to get to - but I have a lot of things to work on</p>



<a name="153881226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153881226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153881226">(Apr 07 2017 at 03:43)</a>:</h4>
<p>ohhh okey! I wanted to know will something like this will be possible.</p>



<a name="153881495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153881495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153881495">(Apr 09 2017 at 11:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> is there any workaround of above as of now ?</p>



<a name="153881518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153881518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153881518">(Apr 09 2017 at 21:46)</a>:</h4>
<p>not right now. Hoping to get to it this week, but I'm not keeping up right now</p>



<a name="153885106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153885106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153885106">(Apr 19 2017 at 12:27)</a>:</h4>
<p>ok this is on my list for tomorrow (pinging this to get it back to the top of the topic list)</p>



<a name="153886914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153886914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153886914">(May 04 2017 at 03:49)</a>:</h4>
<p>Hello guys, is converter it not being published as a maven artifact? Right now I am using it as a jar file dependency for my project but I want to avoid it becasue it is causing conflicts with lot of other libraries.</p>



<a name="153886915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153886915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153886915">(May 04 2017 at 03:53)</a>:</h4>
<p>it should be released via HAPI for maven use. I thought that would have happened by now <span class="user-mention" data-user-id="191319">@James Agnew</span></p>



<a name="153886917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153886917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153886917">(May 04 2017 at 03:59)</a>:</h4>
<p>Yeah I gave a try but I was thinking of using <code>R2R3ConversionManager</code> class which comes with just <code>igpublisher.jar</code> file. The same doesn't come with hapi-fhir-converter. I was just checking if this is also published as part of some artifact.</p>



<a name="153886918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153886918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153886918">(May 04 2017 at 04:00)</a>:</h4>
<p>that is what is supposed to come with HAPI now</p>



<a name="153886919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153886919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153886919">(May 04 2017 at 04:01)</a>:</h4>
<p>Do you mean even <code>R2R3ConversionManager</code> is supposed to come with HAPI in latest release ?</p>



<a name="153886920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153886920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153886920">(May 04 2017 at 04:01)</a>:</h4>
<p>yes</p>



<a name="153886921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153886921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153886921">(May 04 2017 at 04:04)</a>:</h4>
<p>Well, Then <span class="user-mention" data-user-id="191319">@James Agnew</span> will be able to answer. I don't see it in their latest artifact on maven <code>hapi-converter-2.4</code>, neither it's in hapi-fhir github on master, so I can expect it to come as a snapshot.</p>



<a name="153886972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153886972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153886972">(May 04 2017 at 10:04)</a>:</h4>
<p>At this point we have the java converters bundled into HAPI, but not yet the <code>R2R3ConversionManager</code> one. I tried really hard to get this into HAPI 2.4, but wasn't able to. The main reason for this is that R2R3ConversionManager has a dependency on the RI parsers, which don't ship with HAPI. I need to spend some time untangling the co-depoendencies between R2R3ConversionManager and other parts of the RI and I haven't been able to find the bandwidth to do that yet.</p>
<p>Help obviously welcomed if anyone wants to join into this effort.</p>



<a name="153886999"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153886999" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153886999">(May 04 2017 at 12:29)</a>:</h4>
<p>hmm. I'll have a look at that</p>



<a name="153887000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153887000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153887000">(May 04 2017 at 12:29)</a>:</h4>
<p>but i absolutely need the  elementmodel parsers. Is that a problem?</p>



<a name="153887003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153887003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mritunjay Dubey <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153887003">(May 04 2017 at 12:34)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="191319">@James Agnew</span> thanks for the reply. The problem I am facing right now is becasue hapi artifacts have same classname as well as package name but the code is not  same.</p>
<p>For Example :- <a href="https://github.com/hl7-fhir/fhir-svn/blob/master/implementations/java/org.hl7.fhir.utilities/src/org/hl7/fhir/utilities/xhtml/XhtmlParser.java" target="_blank" title="https://github.com/hl7-fhir/fhir-svn/blob/master/implementations/java/org.hl7.fhir.utilities/src/org/hl7/fhir/utilities/xhtml/XhtmlParser.java">https://github.com/hl7-fhir/fhir-svn/blob/master/implementations/java/org.hl7.fhir.utilities/src/org/hl7/fhir/utilities/xhtml/XhtmlParser.java</a> and <a href="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-base/src/main/java/org/hl7/fhir/utilities/xhtml/XhtmlParser.java" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-base/src/main/java/org/hl7/fhir/utilities/xhtml/XhtmlParser.java">https://github.com/jamesagnew/hapi-fhir/blob/master/hapi-fhir-base/src/main/java/org/hl7/fhir/utilities/xhtml/XhtmlParser.java</a>, both have same package and class name, but in hl7-fhir file has a method <code>public XhtmlNode parseHtmlNode(XmlPullParser xpp)</code> which is not present in the file from hapi-fhir. same problem with <code>XmlParserBase#loadXml(InputStream stream)</code>. </p>
<p>I am not able to get a way out because I need to import <code>igpublisher.jar</code> which has code from <code>hl7-fhir</code> and I need to do some modification in the resources for that I need <code>hapi-stu3</code> and <code>hapi-stu2</code> structures artifact as well. Which ends up in incompatible code.</p>



<a name="153887014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153887014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153887014">(May 04 2017 at 12:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> no, the elementmodel parsers are no issue, we bundle those already.</p>
<p><span class="user-mention" data-user-id="192421">@Mritunjay Dubey</span> yeah, there is no way to use the RI stuff and HAPI on the same classpath. HAPI contains modifications to the RI, including stripping out the XmlPullParser as well as a few other dependencies on libraries that are either not needed or that have questionable licenses. I've been slowly rationalizing all of this, but it's a gradual process.</p>



<a name="153887015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153887015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153887015">(May 04 2017 at 12:38)</a>:</h4>
<p>let's talk through this in Madrid</p>



<a name="153887017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153887017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153887017">(May 04 2017 at 12:38)</a>:</h4>
<p>..that is to say, you can't use an RI JAR like igpublisher in the same JVM as HAPI. You can absolutely use RI classes that are included with HAPI of course :)</p>



<a name="153887018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153887018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153887018">(May 04 2017 at 12:39)</a>:</h4>
<p>Sounds good. </p>



<a name="153887020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153887020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153887020">(May 04 2017 at 12:40)</a>:</h4>
<p>Is there any chance of us putting the igpublisher into Maven?  (Question from a client)</p>



<a name="153887022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/153887022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#153887022">(May 04 2017 at 12:44)</a>:</h4>
<p>there's a chance. If someone does it or pays me to do it. </p>



<a name="154000091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/154000091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#154000091">(Sep 26 2018 at 18:53)</a>:</h4>
<p>Can someone summarize the current options for converting DSTU2 or DSTU2.1 resources to STU3?  The converters bundled with HAPI appear to only address the conformance resources (at least the 2.1 converters do).  I assume the R2R3ConversionManager piece has not made it into HAPI? Thanks!</p>



<a name="177075521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/177075521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Craig McClendon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#177075521">(Oct 01 2019 at 17:02)</a>:</h4>
<p>DELETE POST - answered above.</p>



<a name="200231720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/200231720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mridul Sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#200231720">(Jun 09 2020 at 14:01)</a>:</h4>
<p>Hello all, we recently upgraded spark FHIR DSTU2 version and getting error "Mongo document contains invalid BSON to parse" with existing data while migrating to new version. Please share your experience if any faced such issue or any recommendation how it can be addressed.</p>
<p>Will it work fine if we migrate directly to STU3? <br>
We also moved infrastructure from Azure to AWS, Windows to Linux  not sure if that is affecting it some way.</p>
<p>Please share your thoughts.</p>



<a name="200234034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/200234034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#200234034">(Jun 09 2020 at 14:16)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span></p>



<a name="200234997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/200234997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#200234997">(Jun 09 2020 at 14:22)</a>:</h4>
<p>Perhaps <span class="user-mention" data-user-id="192710">@Kenneth Myhra</span> knows</p>



<a name="200238094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/200238094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#200238094">(Jun 09 2020 at 14:41)</a>:</h4>
<p><span class="user-mention" data-user-id="310318">@Mridul Sharma</span>  when was the last time you upgraded Spark? If it has been a while it could be that you need to run the RemoveDuplicateId.js script to remove a Id-field that caused trouble in newer versions of MongoDB. <a href="https://github.com/FirelyTeam/spark/tree/master/scripts">https://github.com/FirelyTeam/spark/tree/master/scripts</a></p>
<p>Also, is there an inner exception that contains some more information you could share?</p>



<a name="200239435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/200239435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mridul Sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#200239435">(Jun 09 2020 at 14:49)</a>:</h4>
<p><span class="user-mention" data-user-id="192710">@Kenneth Myhra</span> thanks for your response. We will follow your suggestion.</p>
<p>Actually Spark FHIR DSTU2 version we were using is from 2017 and it was never upgraded, below is the inner exception.</p>
<p>{<br>
  "resourceType": "OperationOutcome",<br>
  "issue": [<br>
    {<br>
     "severity": "error",<br>
      "diagnostics": "InvalidOperationException: Mongo document contains invalid BSON to parse."<br>
    },<br>
    {<br>
      "severity": "error",<br>
      "diagnostics": "FormatException: Type checking the data: Encountered unknown element 'Id' at location 'Resource.Id[0]' while parsing"<br>
    }<br>
  ]<br>
}</p>



<a name="200239594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/200239594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#200239594">(Jun 09 2020 at 14:50)</a>:</h4>
<p>Yep, you will need to run the mentioned script. But as always back-up before you do so :)</p>



<a name="200239967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/200239967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mridul Sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#200239967">(Jun 09 2020 at 14:52)</a>:</h4>
<p>Sure, let me try it.</p>



<a name="200240182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/200240182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#200240182">(Jun 09 2020 at 14:53)</a>:</h4>
<p>And to answer your other question. Since the resources are stored as JSON and in DSTU2 format in MongoDB you would need to run a migration process to convert them to STU3</p>



<a name="200241621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/200241621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mridul Sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#200241621">(Jun 09 2020 at 15:01)</a>:</h4>
<p>Sure <span class="user-mention" data-user-id="192710">@Kenneth Myhra</span>   will run migration process, any recommendation / best practices or any ready to use tool which can be make this process smooth for us?</p>



<a name="200243826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/200243826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kenneth Myhra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#200243826">(Jun 09 2020 at 15:14)</a>:</h4>
<p><span class="user-mention" data-user-id="310318">@Mridul Sharma</span>  There are some tools in the HL7 FHIR specification that can do this for you, that is actually how resources in the specification are transferred from one version to the next. In a production system it will need some kind manual  supervision  to make sure you do not loose data when converting from one version to another.</p>
<p>The tool mentioned uses the <a href="http://hl7.org/fhir/mapping-language.html">mapping language</a>. You can see maps under the diff section on each resources in the FHIR specifcaion, like this for DocumentReference <a href="http://hl7.org/fhir/documentreference-version-maps.html">http://hl7.org/fhir/documentreference-version-maps.html</a></p>
<p>Depending on how many resource types you are currently using it could be trivial to just code the conversion yourself in your favorite language.</p>



<a name="200244637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20DSTU2%20to%20STU3%20converter/near/200244637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mridul Sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20DSTU2.20to.20STU3.20converter.html#200244637">(Jun 09 2020 at 15:19)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="192710">@Kenneth Myhra</span> , will explore these options.<br>
I really appreciate your help.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
