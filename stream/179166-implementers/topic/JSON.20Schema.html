---
layout: page
title: "FHIR Chat  · JSON Schema · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html">JSON Schema</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153828897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153828897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153828897">(May 21 2016 at 01:14)</a>:</h4>
<p>I have committed a draft JSON schema for all resources and data types. I haven't tested it - the java options for enforcing JSON schema don't seem very attractive - one requires Java 1.8, and one it not maintained. I'm open to suggestions for testing the JSON schemas as part of the build</p>



<a name="153829114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153829114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153829114">(May 22 2016 at 15:35)</a>:</h4>
<p>Is requiring Java 1.8 a problem?</p>



<a name="153829136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153829136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153829136">(May 22 2016 at 22:32)</a>:</h4>
<p>1.7 hasn't had any security updates for about a year now</p>



<a name="153829147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153829147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153829147">(May 23 2016 at 01:00)</a>:</h4>
<p>Don't know. I'm pretty conservative about this. Past experience is that if I make the build dependent on a new version of java, it's going to create heaps of work for me</p>



<a name="153855636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153855636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153855636">(Nov 06 2016 at 10:46)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  some notes about JSON schema  coming with FHIR build:</p>
<ul>
<li>Separate schemata is generated for nested elements (like Patient_Link etc), but JSON schema support nested declarations, which is more idiomatic.   </li>
<li>Using "oneOf" for validating Bundle and/or contained resources is slightly wrong semantically, we use JSON schema extension from Swagger - "descriminator" (<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#fixed-fields-13" target="_blank" title="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#fixed-fields-13">https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#fixed-fields-13</a>) . </li>
<li>We also were able to extend JSON schema to support validation of  ValueSets and Referential integrity.  <br>
Such extensions is quite simple and we could extend popular JSON schema engines for them.</li>
</ul>
<p>In aidbox we would  like to provide  Swagger API to FHIR server  and would like to actively collaborate on JSON schema and Swagger support in FHIR (let's discuss it in Amsterdam :)</p>



<a name="153855637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153855637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153855637">(Nov 06 2016 at 10:50)</a>:</h4>
<p>ok sure let's talk about that in DevDays</p>



<a name="153864465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153864465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153864465">(Dec 21 2016 at 02:00)</a>:</h4>
<p>Hey all. We're currently trying to use schema.json files to provide the validation for our content. I'm running into errors related to looping schemas. </p>
<p>fatal: validation loop: schema "file:/home/.../definitions/DomainResource.schema.json#/definitions/DomainResource/allOf/0" visited twice for pointer "/contained/0" of validated instance</p>
<p>The error is thrown by anything with a "contained" non-empty array</p>



<a name="153864467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153864467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153864467">(Dec 21 2016 at 02:19)</a>:</h4>
<p>e.g. everything. In which case, you need the single json schema fhir.schema.json</p>



<a name="153864472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153864472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153864472">(Dec 21 2016 at 03:10)</a>:</h4>
<p>I'm not sure I understand how this would help. It seems to me that this would still lead to some recursive validation.</p>



<a name="153864473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153864473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153864473">(Dec 21 2016 at 03:16)</a>:</h4>
<p>typically, this is a problem because there's a library trying to resolve all the library references before starting to do type based reasoning. </p>



<a name="153864474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153864474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153864474">(Dec 21 2016 at 03:16)</a>:</h4>
<p>there's not much likelihood of running into a schema library that doesn't allow types to reference each other</p>



<a name="153864476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153864476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153864476">(Dec 21 2016 at 03:18)</a>:</h4>
<p>But for the that do try to resolve references first then this would not work...?</p>



<a name="153864477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153864477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153864477">(Dec 21 2016 at 03:21)</a>:</h4>
<p>that's why there's a single schema that contains everything - for those tools. </p>



<a name="153884824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ville Lindholm <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884824">(Apr 15 2017 at 07:14)</a>:</h4>
<p>Hi! I downloaded the STU3 JSON Schema files so that I can validate a QuestionnaireResponse in a Node backend service. (I use the ajv module for the validation.) It seems that the schema files use an inconsistent referencing method. Each resource id is of the form "<a href="http://hl7.org/fhir/json-schema/SomeResource" target="_blank" title="http://hl7.org/fhir/json-schema/SomeResource">http://hl7.org/fhir/json-schema/SomeResource</a>" but when referencing resources with "$ref" the schema files use "SomeResource.schema.json#/definitions/SomeResource". I had a chat with the ajv package maintainer and this is apparently not valid JSON Schema. Either the id should end with "SomeResource.schema.json" or the $ref should use "SomeResource#/definitions/...". As things stand now, ajv can't follow the references unless a custom mapping is provided to "rename" the id.</p>



<a name="153884825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ville Lindholm <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884825">(Apr 15 2017 at 07:15)</a>:</h4>
<p>SomeResource.schema.json is also the file name, but JSON Schema references don't really know about file names apparently.</p>



<a name="153884826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ville Lindholm <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884826">(Apr 15 2017 at 07:18)</a>:</h4>
<p>I thought about providing  patch for this but couldn't find the schema files in SVN :D</p>



<a name="153884827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ville Lindholm <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884827">(Apr 15 2017 at 07:19)</a>:</h4>
<p>Oh, and as a mini bug report, the stu3 home page link to this chat actually links to "<a href="http://char.fhir.org" target="_blank" title="http://char.fhir.org">char.fhir.org</a>" ;)</p>



<a name="153884838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884838">(Apr 15 2017 at 20:27)</a>:</h4>
<p>thx. can you createa a gForge task for this - see <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemBrowse&amp;tracker_id=677" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemBrowse&amp;tracker_id=677">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemBrowse&amp;tracker_id=677</a></p>



<a name="153884839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884839">(Apr 15 2017 at 20:27)</a>:</h4>
<p>and which schema are you using? the single schema file, or the per-resource schema?</p>



<a name="153884876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884876">(Apr 16 2017 at 21:39)</a>:</h4>
<p><span class="user-mention" data-user-id="193725">@Ville Lindholm</span> - can you put me in contact with the author of the tool? thanks</p>



<a name="153884878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884878">(Apr 16 2017 at 21:43)</a>:</h4>
<p>and also try this set of json schema:</p>



<a name="153884879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884879">(Apr 16 2017 at 21:51)</a>:</h4>
<p><a href="/user_uploads/10155/LgjiiS-0VnNoBo1QigGaXQuL/fhir.schema.json.zip" target="_blank" title="fhir.schema.json.zip">fhir.schema.json.zip</a> </p>



<a name="153884896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ville Lindholm <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884896">(Apr 17 2017 at 09:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Sure, the ajv project has a chat similar to this one on gitter: <a href="https://gitter.im/ajv-validator/ajv" target="_blank" title="https://gitter.im/ajv-validator/ajv">https://gitter.im/ajv-validator/ajv</a> and the person I spoke to was epoberezkin. The new schema package you provided looks like it should work!</p>



<a name="153884897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ville Lindholm <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884897">(Apr 17 2017 at 09:01)</a>:</h4>
<p>I was using the per-resource schemas to optimize things a bit</p>



<a name="153884900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ville Lindholm <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884900">(Apr 17 2017 at 10:05)</a>:</h4>
<p>So to summarize, dropping .schema.json from refs is the quickest fix. If you want to host the files so that the URIs become actual downloadable files the filenames should also drop the .schema.json extension OR the web server should map Element -&gt; Element.schema.json</p>



<a name="153884901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ville Lindholm <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884901">(Apr 17 2017 at 10:06)</a>:</h4>
<p>i.e. the zip file above works</p>



<a name="153884902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ville Lindholm <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884902">(Apr 17 2017 at 10:06)</a>:</h4>
<p>but tools that automatically resolve the ID with HTTP won't get the file at the moment</p>



<a name="153884929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153884929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153884929">(Apr 17 2017 at 21:15)</a>:</h4>
<p>Perhaps I should generate the schema twice with both sorts of references?</p>



<a name="153895410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153895410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153895410">(Jun 28 2017 at 12:43)</a>:</h4>
<p><span class="user-mention" data-user-id="193725">@Ville Lindholm</span> - I have updated all the redirections on the web site for JSON schema. Interested to know if I've fixed it any. But generally, the JSON schema problem looks intractable to me - $ref is critical to any JSON scheam for FHIR, and the tools are all over the place on it</p>



<a name="153924393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153924393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153924393">(Dec 11 2017 at 23:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- Im currently working on a tool that'd make use of these json schemas taken from the downloads page. Are these kept up to date automatically? Is there a better source? </p>
<p>Just as a note, since the link does not offer any sort of cache related headers I'll probably have to download the zip every time and maybe use the hash to check whether I already have the latest ones. Any advise is appreciated.</p>



<a name="153924417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153924417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153924417">(Dec 12 2017 at 05:45)</a>:</h4>
<p>those are the best, and they are generated on the fly. What kind of cache related headers are you talking about? (that's a standard IIS server there)</p>



<a name="153924530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153924530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153924530">(Dec 12 2017 at 16:16)</a>:</h4>
<p>I ask because the files within the zip are dated to April of this year. And some ETag functionality would be great, if we'd send an If-None-Match and get a 304 if we already have the latest zip then we wouldn't download the file again.</p>



<a name="153931584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153931584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153931584">(Jan 27 2018 at 23:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span></p>



<a name="153931635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153931635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153931635">(Jan 28 2018 at 03:18)</a>:</h4>
<p>Here is discriminator from latest OpenAPI - <a href="https://swagger.io/docs/specification/data-models/inheritance-and-polymorphism/" target="_blank" title="https://swagger.io/docs/specification/data-models/inheritance-and-polymorphism/">https://swagger.io/docs/specification/data-models/inheritance-and-polymorphism/</a></p>



<a name="153931636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153931636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153931636">(Jan 28 2018 at 03:20)</a>:</h4>
<p><a href="https://swagger.io/specification/#discriminatorObject" target="_blank" title="https://swagger.io/specification/#discriminatorObject">https://swagger.io/specification/#discriminatorObject</a></p>



<a name="153984007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153984007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153984007">(Aug 09 2018 at 03:42)</a>:</h4>
<p>One of the reasons we are having problems with json schema is because the Java json schema validator doesn't seem to be very conformant. So I'm going to try changing the json schema validation library that we're using in the build to check the json schema. The question is, what library? It needs to be able to run from java code, and needs to run without extensive set up requirements on windows, mac, linux.</p>



<a name="153984008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153984008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153984008">(Aug 09 2018 at 03:43)</a>:</h4>
<p>the other question is: I validate it by running every <em>valid</em> instance through the schema. But I don't have a library of invalid instances. But the candidate normative resources are stable enough to make it worth investing in that now - if any one wants to volunteer</p>



<a name="153987261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153987261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153987261">(Aug 16 2018 at 01:00)</a>:</h4>
<p>... back to this....</p>



<a name="153987262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153987262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153987262">(Aug 16 2018 at 01:00)</a>:</h4>
<p>here's a json schema, a little test case derived from the fhir json schema:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;$schema&quot;</span><span class="p">:</span> <span class="s2">&quot;http://json-schema.org/draft-06/schema#&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;http://hl7.org/fhir/test-json-schema/3.4&quot;</span><span class="p">,</span>
  <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;for unit tests&quot;</span><span class="p">,</span>
  <span class="nt">&quot;discriminator&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;propertyName&quot;</span><span class="p">:</span> <span class="s2">&quot;resourceType&quot;</span><span class="p">,</span>
    <span class="nt">&quot;mapping&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;A&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/A&quot;</span><span class="p">,</span>
      <span class="nt">&quot;B&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/B&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;oneOf&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/A&quot;</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/B&quot;</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">&quot;definitions&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;boolean&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;^true|false$&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;^[A-Za-z0-9\\-\\.]{1,64}$&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;integer&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;^-?([0]|([1-9][0-9]*))$&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;string&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;^[ \\r\\n\\t\\S]+$&quot;</span><span class="p">,</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;Element&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/string&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="nt">&quot;Coding&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/string&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;system&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/string&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/string&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/string&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;display&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/string&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;userSelected&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/boolean&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="nt">&quot;A&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;const&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/id&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;resourceType&quot;</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;B&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;resourceType&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;const&quot;</span><span class="p">:</span> <span class="s2">&quot;B&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;code&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/id&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;string&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/string&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;integer&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/integer&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;boolean&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/boolean&quot;</span>
        <span class="p">}</span>

      <span class="p">},</span>
      <span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;resourceType&quot;</span><span class="p">,</span> <span class="s2">&quot;code&quot;</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>



<a name="153987263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153987263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153987263">(Aug 16 2018 at 01:01)</a>:</h4>
<p>here's a little sample instance that's valid - I believe - against that schema:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;resourceType&quot;</span> <span class="p">:</span> <span class="s2">&quot;A&quot;</span>
<span class="p">}</span>
</pre></div>



<a name="153987264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153987264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153987264">(Aug 16 2018 at 01:02)</a>:</h4>
<p>of the json schema engines I've tried, 3 of 6 think that's valid. ! of the 3 that failed at least reported that they don't support the 'const' keyword (guaranteed fail) but didn't comment on the schema version. the other 2 simply reported some variant of :</p>
<div class="codehilite"><pre><span></span>2 subschemas matched instead of one
</pre></div>


<p>.. indicating that they don't support one of the key words...</p>



<a name="153987265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153987265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153987265">(Aug 16 2018 at 01:03)</a>:</h4>
<p>.... I really don't like JSON schema much....</p>



<a name="153987266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153987266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153987266">(Aug 16 2018 at 01:03)</a>:</h4>
<p>the java engine is one that fails :-(</p>



<a name="153987270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153987270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153987270">(Aug 16 2018 at 01:08)</a>:</h4>
<p><a href="https://github.com/everit-org/json-schema/issues/205" target="_blank" title="https://github.com/everit-org/json-schema/issues/205">https://github.com/everit-org/json-schema/issues/205</a></p>



<a name="153991698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153991698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Lind <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153991698">(Aug 29 2018 at 20:54)</a>:</h4>
<p>I like the new flattened out JSON schema in a single file, but I noticed the _id property is no longer present. Is this intentional? Isn't _id needed to hold extensions to the id element?</p>



<a name="153991747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153991747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153991747">(Aug 29 2018 at 22:57)</a>:</h4>
<p>That property would be for the XML id attribute, and is a great question on extending the Id element in Json. Not sure if that's come up before.</p>
<div class="codehilite"><pre><span></span>&lt;Patient xmlns=&quot;http://hl7.org/fhir&quot;&gt;
  &lt;id id=&quot;2&quot; value=&quot;5&quot;&gt;
    &lt;extension url=&quot;ext-url&quot;&gt;
      &lt;valueCode value=&quot;3&quot; /&gt;
    &lt;/extension&gt;
  &lt;/id&gt;
</pre></div>


<p>is represented in JSON as</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;Patient&quot;,
  &quot;id&quot;: &quot;5&quot;,
  &quot;_id&quot;: {
    &quot;id&quot;: &quot;2&quot;,
    &quot;extension&quot;: [
      {
        &quot;url&quot;: &quot;ext-url&quot;,
        &quot;valueCode&quot;: &quot;3&quot;
      }
    ]
  },
</pre></div>



<a name="153991844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153991844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153991844">(Aug 30 2018 at 09:07)</a>:</h4>
<p>my eyes are bleeding :(</p>



<a name="153991846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153991846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153991846">(Aug 30 2018 at 09:09)</a>:</h4>
<p>Here was a long discussion - <a href="#narrow/stream/4-implementers/topic/JSON.20Format.20for.20Primitives.20.26.20extensions" title="#narrow/stream/4-implementers/topic/JSON.20Format.20for.20Primitives.20.26.20extensions">https://chat.fhir.org/#narrow/stream/4-implementers/topic/JSON.20Format.20for.20Primitives.20.26.20extensions</a></p>



<a name="153991990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153991990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Lind <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153991990">(Aug 30 2018 at 19:17)</a>:</h4>
<p>I looked through the long conversation, but still don't understand why "_id" existed in the 3.2.0 schema, but is not in the 3.3.0 schema.</p>



<a name="153992074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153992074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153992074">(Aug 30 2018 at 22:42)</a>:</h4>
<p>when would you use _id?</p>



<a name="153992075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153992075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153992075">(Aug 30 2018 at 22:42)</a>:</h4>
<p>I think Nicola is right about the reference</p>



<a name="153992076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153992076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153992076">(Aug 30 2018 at 22:42)</a>:</h4>
<p>we decided you can't extend the id, and so I didn't generate that</p>



<a name="153992465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153992465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrik Sundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153992465">(Sep 01 2018 at 01:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  where in the spec is the decision that id can not have extensions written up? i don't see it here: <a href="http://build.fhir.org/id.profile.json.html" target="_blank" title="http://build.fhir.org/id.profile.json.html">http://build.fhir.org/id.profile.json.html</a>, here <a href="http://build.fhir.org/element.profile.json.html" target="_blank" title="http://build.fhir.org/element.profile.json.html">http://build.fhir.org/element.profile.json.html</a> or here <a href="http://build.fhir.org/resource.profile.json.html" target="_blank" title="http://build.fhir.org/resource.profile.json.html">http://build.fhir.org/resource.profile.json.html</a> ?</p>



<a name="153992608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/153992608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#153992608">(Sep 01 2018 at 20:32)</a>:</h4>
<p>it would appear that we don't say it anywhere</p>



<a name="154017392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154017392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Taylor <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154017392">(Nov 10 2018 at 16:00)</a>:</h4>
<p>Hello everyone,</p>



<a name="154017393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154017393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Taylor <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154017393">(Nov 10 2018 at 16:05)</a>:</h4>
<p>Let's try this again. We are working to implement a FHIR product offering based on the HAPI FHIR specification. We are now focused on providing functionality for JSON resources. Can you please let me know if the FHIR community has established a best practice or policy regarding JSON validation? Is the plan to use JSON schemas?  Thank you, Jim</p>



<a name="154017394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154017394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154017394">(Nov 10 2018 at 16:40)</a>:</h4>
<p>Best practice is to use the Java validator - it can test FHIRPath constraints, do terminology validation and other things that JSON schema (and XML schema + Schematron) can't do.  It also works for JSON, XML, RDF and any other syntaxes that might be supported going forward.</p>



<a name="154017440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154017440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154017440">(Nov 11 2018 at 08:24)</a>:</h4>
<p>In aidbox we use json schema as a primary validation tool. There is official JSON schema (<a href="https://www.hl7.org/fhir/downloads.html" target="_blank" title="https://www.hl7.org/fhir/downloads.html">https://www.hl7.org/fhir/downloads.html</a>). To do proper validation we extend  JSON schema with additional keys - for example to validate valueset's bindings or references).  If you interested - we can share our ideas and artefacts.</p>



<a name="154017441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154017441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154017441">(Nov 11 2018 at 08:32)</a>:</h4>
<p>And in the Meteor ecosystem, we've packaged up the JSON schemas that Nicola is referring to above, and tried to provide various validators, including SimpleSchema, simpl-schema, and Ajv.  We recently completed both DSTU2 and STU3 of the Argonaut resources, and should have an update for that package by the end of the year.  </p>
<p><a href="https://www.npmjs.com/package/fhir-schemas" target="_blank" title="https://www.npmjs.com/package/fhir-schemas">https://www.npmjs.com/package/fhir-schemas</a></p>



<a name="154018647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154018647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154018647">(Nov 15 2018 at 00:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191678">@Abigail Watson</span> curious: how do you keep this project synched with the evolving specs? Is it a manual process?</p>



<a name="154018648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154018648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154018648">(Nov 15 2018 at 00:54)</a>:</h4>
<p>For the time being yes.  A few years from now, I thoroughly expect it to all get automated.  But until the patterns are sorted out for what is actually needed, it's all manual.</p>



<a name="154057676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154057676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154057676">(Dec 30 2018 at 20:52)</a>:</h4>
<p>Question about JSON schemas for each resource</p>



<a name="154057681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154057681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154057681">(Dec 30 2018 at 20:53)</a>:</h4>
<p>(see <a href="https://chat.fhir.org/#narrow/stream/179240-Announcements/subject/R4.20release.20is.20happening" target="_blank" title="https://chat.fhir.org/#narrow/stream/179240-Announcements/subject/R4.20release.20is.20happening">https://chat.fhir.org/#narrow/stream/179240-Announcements/subject/R4.20release.20is.20happening</a>)</p>



<a name="154057725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154057725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154057725">(Dec 30 2018 at 20:54)</a>:</h4>
<p>The syntax for referring between schemas is not well supported by JSON schema tools. There's question about the relationship between the logical and literal URLs, and I couldn't get it working at all.</p>



<a name="154057727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154057727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154057727">(Dec 30 2018 at 20:54)</a>:</h4>
<p>Further, there's no tooling benefit to separating them, since any tools must resolve all of them.</p>



<a name="154057736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154057736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154057736">(Dec 30 2018 at 20:55)</a>:</h4>
<p>Given that, and the extreme difficulty that JSON schema represents, We only support a single schema</p>



<a name="154058486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154058486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154058486">(Dec 30 2018 at 21:23)</a>:</h4>
<p>Meaning that we only provide a schema for the "current" release of FHIR and abandon schemas for prior versions?</p>



<a name="154059655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154059655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154059655">(Dec 30 2018 at 22:04)</a>:</h4>
<p>I'm not sure what you mean by abandoning.</p>



<a name="154060540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154060540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154060540">(Dec 30 2018 at 22:35)</a>:</h4>
<p>The original query was about the disappearance of the JSON schemas at the STU3 endpoint.  You said that was intentional - by which I presume the intention is that right now we will only support a JSON schema for R4.  And presumably when R5 is published, we'll cease supporting the JSON schema for R4.  I'm confused why we need to do that for JSON when we don't do the same for XML.</p>



<a name="154060631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154060631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154060631">(Dec 30 2018 at 22:38)</a>:</h4>
<p>you misread it. The query was why R4 is different to R3. Nothing was removed from the published R3</p>



<a name="154061912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154061912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154061912">(Dec 30 2018 at 23:24)</a>:</h4>
<p>k</p>



<a name="154085259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154085259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154085259">(Dec 31 2018 at 13:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  - in the past I've had problems with Newtonsoft's JSchema implementation not being able to resolve even the internal #ref's in the FHIR JSON Schema.   I'll have to try this again with the R4 JSON to see if it works any better.   (I end up manually cutting a specific resource's schema from the 'full schema', e.g. Patient, and then have to also remove the references to the FHIR data types, not ideal but that's what I was able to get working.   I guess this suggests that I should revisit that [and report back here what I find].</p>



<a name="154142355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154142355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154142355">(Jan 01 2019 at 20:41)</a>:</h4>
<p>sure let me know</p>



<a name="154656421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154656421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> anay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154656421">(Jan 08 2019 at 16:30)</a>:</h4>
<p>"egvs": [<br>
    {<br>
      "systemTime": "2018-02-06T09:12:35",<br>
      "displayTime": "2018-02-06T01:12:35",<br>
      "value": 122,<br>
      "realtimeValue": 121,<br>
      "smoothedValue": 122,<br>
      "status": null,<br>
      "trend": "flat",<br>
      "trendRate": -0.5<br>
    }]<br>
I want to add the above json into an observation , I was able to add "egvs" how do I create extensions to an extension...</p>



<a name="154657095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154657095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154657095">(Jan 08 2019 at 16:40)</a>:</h4>
<p>The preferred solution to send that information would be to break out all of the elements into separate Observation components (with the possible exception of systemTime which should presumably correspond to Observation.effectiveTime)</p>



<a name="154659159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154659159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> anay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154659159">(Jan 08 2019 at 17:04)</a>:</h4>
<blockquote>
<p>The preferred solution to send that information would be to break out all of the elements into separate Observation components (with the possible exception of systemTime which should presumably correspond to Observation.effectiveTime)</p>
</blockquote>
<p>So how Do I create custom properties like trend and trend rate realtime and smoothedvalue ?</p>



<a name="154662688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154662688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154662688">(Jan 08 2019 at 17:53)</a>:</h4>
<p>They're not custom properties - they're Observation components.  You'd have one component for the realtime value, one component for the smoothed value, etc.  Each would have a component.code and a component.value</p>



<a name="154675382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154675382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> anay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154675382">(Jan 08 2019 at 20:40)</a>:</h4>
<blockquote>
<p>They're not custom properties - they're Observation components.  You'd have one component for the realtime value, one component for the smoothed value, etc.  Each would have a component.code and a component.value</p>
</blockquote>
<p>I wanted to apply some fixed string values on the trend rate  based on the  value, do i apply some kind of constraints in this case?<br>
 "doubleUp"<br>
+3 ≤ trendRate ≤ +8<br>
"singleUp"<br>
+2 ≤ trendRate &lt; +3</p>



<a name="154679507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154679507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154679507">(Jan 08 2019 at 21:41)</a>:</h4>
<p>Are you talking about constraining what's allowed to appear in a given Observation?  If so, yes you could enforce those sort of constraints with a profile</p>



<a name="154999628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154999628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154999628">(Jan 12 2019 at 21:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191529">@Corey Spears</span> here's a present for you</p>



<a name="154999635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154999635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154999635">(Jan 12 2019 at 21:02)</a>:</h4>
<p><a href="/user_uploads/10155/3iDuw_lYzNfgjHPiywCLJ0Yf/modular-json-schemas.zip" target="_blank" title="modular-json-schemas.zip">modular-json-schemas.zip</a></p>



<a name="154999696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154999696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rajesh Garlapati <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154999696">(Jan 12 2019 at 21:04)</a>:</h4>
<p>Grahame, It seems you sent to wrong person.</p>



<a name="154999773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/154999773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#154999773">(Jan 12 2019 at 21:07)</a>:</h4>
<p>no was public on purpose, though Corey asked for it</p>



<a name="157600788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/157600788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Ghezzi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#157600788">(Feb 05 2019 at 11:55)</a>:</h4>
<blockquote>
<p><a href="/user_uploads/10155/3iDuw_lYzNfgjHPiywCLJ0Yf/modular-json-schemas.zip" target="_blank" title="modular-json-schemas.zip">modular-json-schemas.zip</a></p>
</blockquote>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> where is the definition for the id.schema.json, present in resources like Patient and Observation. Should it be a primitive type or there is also a schema as the identifier? I couldn't find it. Thanks</p>



<a name="157600848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/157600848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#157600848">(Feb 05 2019 at 11:56)</a>:</h4>
<p>I don't know</p>



<a name="157739541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/157739541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#157739541">(Feb 07 2019 at 00:09)</a>:</h4>
<p>it looks like I missed all the primitive types</p>



<a name="157739598"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/157739598" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#157739598">(Feb 07 2019 at 00:10)</a>:</h4>
<p>I'm overloaded... but the solution is for someone to pull them out of the single json schema</p>



<a name="180983015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/180983015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shinji KOBAYASHI <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#180983015">(Nov 18 2019 at 02:22)</a>:</h4>
<p>I found trivial bugs in JSON Schema of MedicationRequest resource(line 36691-36693 in fhir.schema.json, that fails to mandate "status" and "intent". In the official document, their cardinality is 1..1 and XML schema set minOccurs="1".</p>



<a name="180984254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/180984254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shinji KOBAYASHI <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#180984254">(Nov 18 2019 at 02:56)</a>:</h4>
<p>Two more, the JSON Schema of MessageHeader also fails to mandate "endopoint" in Source and Destination elements. Where should I send pull requests?<br>
<a href="https://github.com/skoba/HL7-FHIR-JP-WG/commit/16036ea3906e03619ca77801acd022cae17955d6#diff-c907b9dd199507218860e113d7ee51b4" target="_blank" title="https://github.com/skoba/HL7-FHIR-JP-WG/commit/16036ea3906e03619ca77801acd022cae17955d6#diff-c907b9dd199507218860e113d7ee51b4">https://github.com/skoba/HL7-FHIR-JP-WG/commit/16036ea3906e03619ca77801acd022cae17955d6#diff-c907b9dd199507218860e113d7ee51b4</a></p>



<a name="180984271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/180984271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shinji KOBAYASHI <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#180984271">(Nov 18 2019 at 02:57)</a>:</h4>
<p><a href="https://github.com/skoba/HL7-FHIR-JP-WG/commit/8906e7293cba916fee74ace1f9f6ea4570d943de#diff-c907b9dd199507218860e113d7ee51b4" target="_blank" title="https://github.com/skoba/HL7-FHIR-JP-WG/commit/8906e7293cba916fee74ace1f9f6ea4570d943de#diff-c907b9dd199507218860e113d7ee51b4">https://github.com/skoba/HL7-FHIR-JP-WG/commit/8906e7293cba916fee74ace1f9f6ea4570d943de#diff-c907b9dd199507218860e113d7ee51b4</a></p>



<a name="180995990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/180995990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#180995990">(Nov 18 2019 at 08:28)</a>:</h4>
<p>since this is generated, I'll have to debug this, and since it's generated, whatever pattern it is will be consistent in lots of places</p>



<a name="181001791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/181001791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shinji KOBAYASHI <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#181001791">(Nov 18 2019 at 10:07)</a>:</h4>
<p>I guess so. Cardinality conversion seems loose.</p>



<a name="182172437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/182172437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#182172437">(Nov 29 2019 at 12:09)</a>:</h4>
<p>Actually, <span class="user-mention" data-user-id="235584">@Shinji KOBAYASHI</span> this is deliberate; the way the json format works means that primitive elements can be present in either format - eg. status or _status. So we can't make status required</p>



<a name="191664032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/191664032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chidamber Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#191664032">(Mar 24 2020 at 19:57)</a>:</h4>
<p>Hi <br>
An observation : The schema downloaded from <a href="http://build.fhir.org/fhir.schema.json.zip" target="_blank" title="http://build.fhir.org/fhir.schema.json.zip">http://build.fhir.org/fhir.schema.json.zip</a> has 'id' defined in 'definition.coding' while FHIR website doesn't mention any id for 'coding' datatype.<br>
Any thoughts ?<br>
<span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="191664261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/191664261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#191664261">(Mar 24 2020 at 19:58)</a>:</h4>
<p>It's inherited from Element</p>



<a name="191665531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/191665531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chidamber Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#191665531">(Mar 24 2020 at 20:10)</a>:</h4>
<p>Oh yeah! missed it. Thanks <span class="user-mention" data-user-id="191912">@Michele Mottini</span>  :)</p>



<a name="191872691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/191872691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chidamber Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#191872691">(Mar 26 2020 at 11:53)</a>:</h4>
<p>Hi <br>
I wanted to check if JSON schema also suggests about cardinality of elements ? I could see "type":"array" for some elements but what about elements with cardinality 1..1  ? How those are suggested in the JSON schema ?</p>



<a name="191890915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/191890915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#191890915">(Mar 26 2020 at 14:20)</a>:</h4>
<p>If something isn't an array, then it can't repeat...</p>



<a name="191988761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/191988761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chidamber Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#191988761">(Mar 27 2020 at 08:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179166-implementers/topic/JSON.20Schema/near/191890915" title="#narrow/stream/179166-implementers/topic/JSON.20Schema/near/191890915">said</a>:</p>
<blockquote>
<p>If something isn't an array, then it can't repeat...</p>
</blockquote>
<p>Hi  <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  If something isn't array, then it could be 0..1 or 1..1 ? How is that distinguished in JSON schema ?</p>



<a name="192022518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/192022518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#192022518">(Mar 27 2020 at 14:13)</a>:</h4>
<p>They're declared towards the bottom as required.  E.g.<br>
      "required": [<br>
        "code",<br>
        "resourceType"<br>
      ]</p>



<a name="192022778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/192022778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#192022778">(Mar 27 2020 at 14:15)</a>:</h4>
<p>Note that simple types (e.g. Observation.status) can't be enforced this way because there's a choice of having "status" or "_status", so neither are 'required', even though you must have one of the two.</p>



<a name="192107653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/192107653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chidamber Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#192107653">(Mar 28 2020 at 05:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179166-implementers/topic/JSON.20schema/near/192022778" title="#narrow/stream/179166-implementers/topic/JSON.20schema/near/192022778">said</a>:</p>
<blockquote>
<p>Note that simple types (e.g. Observation.status) can't be enforced this way because there's a choice of having "status" or "_status", so neither are 'required', even though you must have one of the two.</p>
</blockquote>
<p>Got it ! <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Thanks</p>



<a name="193013944"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/193013944" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chidamber Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#193013944">(Apr 06 2020 at 09:08)</a>:</h4>
<p>Hello guys!<br>
I have been going through the JSON schema downloaded from <a href="http://build.fhir.org/fhir.schema.json.zip" title="http://build.fhir.org/fhir.schema.json.zip">http://build.fhir.org/fhir.schema.json.zip</a> and noticed that 'Narrative' has only one required key, which is 'div'. While, the html page <a href="http://build.fhir.org/narrative.html#Narrative" title="http://build.fhir.org/narrative.html#Narrative">http://build.fhir.org/narrative.html#Narrative</a> says both 'status' and 'div' are required.</p>
<p>Thoughts ?</p>



<a name="193014339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/193014339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#193014339">(Apr 06 2020 at 09:12)</a>:</h4>
<p>This is very much an FAQ. status is required but may appear in the JSON as either status or _status - there's another section of the JSON schema that requires oneOf  these to be present</p>



<a name="193168899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/193168899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chidamber Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#193168899">(Apr 07 2020 at 10:55)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <br>
I could find two sections JSONschema.OneOf and JSONschema.definitions.ResourceList.oneOf. None of these specifies that status may appear as either status or _status.  Could you please point me to the right section?</p>



<a name="193650232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/193650232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chidamber Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#193650232">(Apr 11 2020 at 09:01)</a>:</h4>
<p>Hi <br>
I have been going through JSON schema and noticed that Patient.deceasedDateTime has 'type:string'. <br>
Shouldn't there be a child here as   "$ref": "#/definitions/dateTime" ? after all , it's primitive data type is dateTime .</p>



<a name="193651126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/193651126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chidamber Kumar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#193651126">(Apr 11 2020 at 09:22)</a>:</h4>
<p>(deleted)</p>



<a name="193662813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/193662813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#193662813">(Apr 11 2020 at 14:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="241317736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/241317736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> T M <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#241317736">(Jun 02 2021 at 20:48)</a>:</h4>
<p>Hi everyone. We're using JSON Schema for FHIR. It works well on validation, but the error messages are very hard to figure out. It looks like the JSON Schema was written with draft 6 and Swagger in mind. The issue is the giant oneOf, which attempts to validate against all resource types. Swagger supports discriminator, but JSON Schema does not. JSON Schema draft 7 supports if/then/else, where maybe we could map subschemas by resource type and get much better error messages, and possibly faster performance. Has anyone tried this?</p>



<a name="241321943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/241321943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#241321943">(Jun 02 2021 at 21:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="241334003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/241334003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#241334003">(Jun 02 2021 at 23:51)</a>:</h4>
<p>I haven't truid if/then/else and I'm interested in how it would be different if someone wants to try it. but don't think we'll ever get a really good outcome. and Swagger is more important than json schema 7, I think</p>



<a name="241596761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/241596761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> T M <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#241596761">(Jun 04 2021 at 21:46)</a>:</h4>
<p>Is there a good way to validate with swagger in Python? We just want to see if we have valid FHIR or not in a dictionary. We're trying to work entirely with Python. We use the full Java validator as a manual step here and there, but the jsonschema is extremely useful.</p>



<a name="241606123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/241606123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#241606123">(Jun 05 2021 at 00:15)</a>:</h4>
<p>check out the <a href="https://pypi.org/project/fhir.resources/">fhir.resources</a> library with fastAPI it uses pydantic and is natural fit for fastAPI and swagger.</p>



<a name="242000721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/JSON%20Schema/near/242000721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> T M <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/JSON.20Schema.html#242000721">(Jun 08 2021 at 23:30)</a>:</h4>
<p>Those error messages are a lot cleaner. It doesn't seem to validate types, though. Like I can change a 3 to a "3" and it doesn't complain. Will keep looking at it. Thank you, Eric.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
