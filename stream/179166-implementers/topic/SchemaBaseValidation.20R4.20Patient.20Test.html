---
layout: page
title: "FHIR Chat  · SchemaBaseValidation R4 Patient Test · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SchemaBaseValidation.20R4.20Patient.20Test.html">SchemaBaseValidation R4 Patient Test</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="159646214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SchemaBaseValidation%20R4%20Patient%20Test/near/159646214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vineet gandhi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SchemaBaseValidation.20R4.20Patient.20Test.html#159646214">(Feb 28 2019 at 19:54)</a>:</h4>
<p>Okay..Do we have a unit test doc which contains some test cases for a Patient record json/xml ?</p>



<a name="159646618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SchemaBaseValidation%20R4%20Patient%20Test/near/159646618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SchemaBaseValidation.20R4.20Patient.20Test.html#159646618">(Feb 28 2019 at 19:58)</a>:</h4>
<p>With a purpose of testing what?<br>
We don't have tests that check schema validation because we're pretty confident about how that works.</p>



<a name="159647487"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SchemaBaseValidation%20R4%20Patient%20Test/near/159647487" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vineet gandhi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SchemaBaseValidation.20R4.20Patient.20Test.html#159647487">(Feb 28 2019 at 20:07)</a>:</h4>
<blockquote>
<p>With a purpose of testing what?<br>
We don't have tests that check schema validation because we're pretty confident about how that works.</p>
</blockquote>
<p>Let me clear my requirement first.<br>
I have FHIR patient json coming like below :<br>
<a href="https://www.hl7.org/fhir/patient-example-f001-pieter.json.html" target="_blank" title="https://www.hl7.org/fhir/patient-example-f001-pieter.json.html">https://www.hl7.org/fhir/patient-example-f001-pieter.json.html</a></p>
<p>Now I wanted to validate the record. So I am using SchemaBaseValidation module which intern uses fhir-single.xsd.<br>
Question :<br>
1. What are some possible rules in xsd? I found two like max length of "Id" can't me more then 64 and Gender can't be any string.<br>
2. Sample java code of using schema validation in java.(Junits can be helpful).<br>
3. We have like 50 threads accessing parallel the below code <br>
<code>                FhirValidator validator = context.newValidator();
                 IValidatorModule module1 = new SchemaBaseValidator(context);
                 validator.registerValidatorModule(module1);
                 ValidationResult result = validator.validateWithResult(value);
</code></p>
<p>Is there a way we can improve the throughput?. Currently on average it takes around 900 ms per record which is expensive for our requirement</p>



<a name="159651483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SchemaBaseValidation%20R4%20Patient%20Test/near/159651483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SchemaBaseValidation.20R4.20Patient.20Test.html#159651483">(Feb 28 2019 at 20:57)</a>:</h4>
<p>1. You can read through the schema to see all of the rules, so it's not clear why you're asking for possible rules here<br>
2. There's nothing specific about schema validation to FHIR - you should be able to find sample code for doing schema validation with Java with a Google search or on Stack Overflow.  If you want, you can dig into the validator code on the HAPI FHIR reference implementation<br>
3. You may want to write your own thread-safe validator that loads the schema into memory once and then just parses and reads the XML.  That said, there's a limit to how fast schema validation can be</p>



<a name="159704240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SchemaBaseValidation%20R4%20Patient%20Test/near/159704240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SchemaBaseValidation.20R4.20Patient.20Test.html#159704240">(Mar 01 2019 at 11:44)</a>:</h4>
<p>why don't you just use on the normal FHIR validators that is much more effective than the schema validator?</p>



<a name="159707376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SchemaBaseValidation%20R4%20Patient%20Test/near/159707376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> vineet gandhi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SchemaBaseValidation.20R4.20Patient.20Test.html#159707376">(Mar 01 2019 at 12:25)</a>:</h4>
<p>Can u explain more?What is a normal validator.</p>



<a name="159718015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SchemaBaseValidation%20R4%20Patient%20Test/near/159718015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SchemaBaseValidation.20R4.20Patient.20Test.html#159718015">(Mar 01 2019 at 14:27)</a>:</h4>
<p>you can start by  reading about it here:  <a href="http://build.fhir.org/validation.html" target="_blank" title="http://build.fhir.org/validation.html">http://build.fhir.org/validation.html</a></p>



<a name="159734603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SchemaBaseValidation%20R4%20Patient%20Test/near/159734603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SchemaBaseValidation.20R4.20Patient.20Test.html#159734603">(Mar 01 2019 at 18:04)</a>:</h4>
<p>The "normal validator" may not address his performance issue.</p>



<a name="159738418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SchemaBaseValidation%20R4%20Patient%20Test/near/159738418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SchemaBaseValidation.20R4.20Patient.20Test.html#159738418">(Mar 01 2019 at 18:47)</a>:</h4>
<p>there's no hint in the sample code for me as to whether we're talking java or C#. But 900ms is about what I'd expect from schema validation</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
