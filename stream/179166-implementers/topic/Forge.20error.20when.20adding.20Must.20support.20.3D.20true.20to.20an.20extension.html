---
layout: page
title: "FHIR Chat  · Forge error when adding Must support = true to an extension · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension.html">Forge error when adding Must support = true to an extension</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153950422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%20error%20when%20adding%20Must%20support%20%3D%20true%20to%20an%20extension/near/153950422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David McKillop <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension.html#153950422">(Apr 04 2018 at 02:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span>  when setting "Must support" to be true on an extension  ie "accuracyIndicator" refer to:<br>
<a href="/user_uploads/10155/g12nnXkXf_z02GlDZkxcW14I/CIFMM-1261-no-must-support-20180404.JPG" target="_blank" title="CIFMM-1261-no-must-support-20180404.JPG">CIFMM-1261-no-must-support-20180404.JPG</a> <br>
and then save the change, Forge gives the following error when you try to re-open the file:</p>
<div class="message_inline_image"><a href="/user_uploads/10155/g12nnXkXf_z02GlDZkxcW14I/CIFMM-1261-no-must-support-20180404.JPG" target="_blank" title="CIFMM-1261-no-must-support-20180404.JPG"><img src="/user_uploads/10155/g12nnXkXf_z02GlDZkxcW14I/CIFMM-1261-no-must-support-20180404.JPG"></a></div><p><a href="/user_uploads/10155/ferF86v-NiAnm2M97IkPjScN/CIFMM-1261-must-support-20180404.JPG" target="_blank" title="CIFMM-1261-must-support-20180404.JPG">CIFMM-1261-must-support-20180404.JPG</a> <br>
The presence of the following code gives the error :</p>
<div class="message_inline_image"><a href="/user_uploads/10155/ferF86v-NiAnm2M97IkPjScN/CIFMM-1261-must-support-20180404.JPG" target="_blank" title="CIFMM-1261-must-support-20180404.JPG"><img src="/user_uploads/10155/ferF86v-NiAnm2M97IkPjScN/CIFMM-1261-must-support-20180404.JPG"></a></div><div class="codehilite"><pre><span></span>    &lt;element id=&quot;Patient.deceased[x].deceased[x]:deceasedDateTime.extension:accuracyIndicator&quot;&gt;
      &lt;path value=&quot;Patient.deceasedDateTime.extension&quot; /&gt;
      &lt;sliceName value=&quot;accuracyIndicator&quot; /&gt;
      &lt;mustSupport value=&quot;true&quot; /&gt;
    &lt;/element&gt;
</pre></div>


<p>Any suggestions on how to resolve this or is it a bug?  Thanks for your assistance.</p>



<a name="153950486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%20error%20when%20adding%20Must%20support%20%3D%20true%20to%20an%20extension/near/153950486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David McKillop <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension.html#153950486">(Apr 04 2018 at 05:17)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span>  further to the above - it seems that when there is a "choice" data element rather than an extension that is the issue - refer to the attached where birthDate.accuracyIndicator has "Must support" = true and doesn't cause an error; where as when deceased[x].deceasedDateTime.accuracyIndicator has "Must support" = true this causes an error when re-opening the file.<br>
Your thoughts?<a href="/user_uploads/10155/CPT1qJDE91BiJXo2nXKSF3Sw/CIFMM-1261-choice-20180404.JPG" target="_blank" title="CIFMM-1261-choice-20180404.JPG">CIFMM-1261-choice-20180404.JPG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/CPT1qJDE91BiJXo2nXKSF3Sw/CIFMM-1261-choice-20180404.JPG" target="_blank" title="CIFMM-1261-choice-20180404.JPG"><img src="/user_uploads/10155/CPT1qJDE91BiJXo2nXKSF3Sw/CIFMM-1261-choice-20180404.JPG"></a></div>



<a name="153950522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%20error%20when%20adding%20Must%20support%20%3D%20true%20to%20an%20extension/near/153950522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension.html#153950522">(Apr 04 2018 at 08:02)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192323">@David McKillop</span>, could you please send me the extension profile, so I can try to reproduce?</p>



<a name="153950777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%20error%20when%20adding%20Must%20support%20%3D%20true%20to%20an%20extension/near/153950777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David McKillop <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension.html#153950777">(Apr 04 2018 at 22:38)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191336">@Michel Rutten</span> ,  our patient profile is derived from an HL7 Australia profile (<span class="user-mention" data-user-id="191368">@Brett Esler</span> )  which includes the extension for date accuracy indicator which can be found at:<br>
<a href="https://github.com/hl7au/au-fhir-base/blob/master/resources/structuredefinition-date-accuracy-indicator.xml" target="_blank" title="https://github.com/hl7au/au-fhir-base/blob/master/resources/structuredefinition-date-accuracy-indicator.xml">https://github.com/hl7au/au-fhir-base/blob/master/resources/structuredefinition-date-accuracy-indicator.xml</a><br>
If you need any further information, please let me know.<br>
Thanks for your assistance with this - greatly appreciated.</p>



<a name="153950847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%20error%20when%20adding%20Must%20support%20%3D%20true%20to%20an%20extension/near/153950847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David McKillop <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension.html#153950847">(Apr 05 2018 at 06:00)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191336">@Michel Rutten</span>  further to the previous information, when "Must support" is set to true on the element deceased.date-accuracy-indicator   the IG Publisher runs and produces the desired output - refer to the attached:<br>
<a href="/user_uploads/10155/Iw0uvqf8WgNXIV2sI2gYebHK/CIFMM-1261-all-must-support-20180405.JPG" target="_blank" title="CIFMM-1261-all-must-support-20180405.JPG">CIFMM-1261-all-must-support-20180405.JPG</a> <br>
the issue is that Forge gives the error when trying to re-open the file.  I hope this helps.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/Iw0uvqf8WgNXIV2sI2gYebHK/CIFMM-1261-all-must-support-20180405.JPG" target="_blank" title="CIFMM-1261-all-must-support-20180405.JPG"><img src="/user_uploads/10155/Iw0uvqf8WgNXIV2sI2gYebHK/CIFMM-1261-all-must-support-20180405.JPG"></a></div>



<a name="153951428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%20error%20when%20adding%20Must%20support%20%3D%20true%20to%20an%20extension/near/153951428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension.html#153951428">(Apr 09 2018 at 09:41)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192323">@David McKillop</span>, I created a Patient profile with type slice on deceased[x], then added accuracy extension to deceasedDateTime slice and enabled MustSupport. I cannot seem to reproduce the issue (using latest Forge release 18.2.1), Forge re-loads the profile without any warnings:<br>
<a href="/user_uploads/10155/kNdsOG_HDrahsu6hNvlT0Sh5/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> <br>
Here's the generated profile xml:</p>
<div class="message_inline_image"><a href="/user_uploads/10155/kNdsOG_HDrahsu6hNvlT0Sh5/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/kNdsOG_HDrahsu6hNvlT0Sh5/pasted_image.png"></a></div><div class="codehilite"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;StructureDefinition xmlns=&quot;http://hl7.org/fhir&quot;&gt;
  &lt;url value=&quot;http://example.org/fhir/StructureDefinition/PatientWithDeceasedExtension&quot; /&gt;
  &lt;name value=&quot;PatientWithDeceasedExtension&quot; /&gt;
  &lt;status value=&quot;draft&quot; /&gt;
  &lt;fhirVersion value=&quot;3.0.1&quot; /&gt;
  &lt;kind value=&quot;resource&quot; /&gt;
  &lt;abstract value=&quot;false&quot; /&gt;
  &lt;type value=&quot;Patient&quot; /&gt;
  &lt;baseDefinition value=&quot;http://hl7.org/fhir/StructureDefinition/Patient&quot; /&gt;
  &lt;derivation value=&quot;constraint&quot; /&gt;
  &lt;differential&gt;
    &lt;element id=&quot;Patient.deceased[x]&quot;&gt;
      &lt;path value=&quot;Patient.deceased[x]&quot; /&gt;
      &lt;slicing&gt;
        &lt;discriminator&gt;
          &lt;type value=&quot;type&quot; /&gt;
          &lt;path value=&quot;$this&quot; /&gt;
        &lt;/discriminator&gt;
        &lt;rules value=&quot;open&quot; /&gt;
      &lt;/slicing&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Patient.deceased[x]:deceasedBoolean&quot;&gt;
      &lt;path value=&quot;Patient.deceased[x]&quot; /&gt;
      &lt;sliceName value=&quot;deceasedBoolean&quot; /&gt;
      &lt;type&gt;
        &lt;code value=&quot;boolean&quot; /&gt;
      &lt;/type&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Patient.deceased[x]:deceasedDateTime&quot;&gt;
      &lt;path value=&quot;Patient.deceased[x]&quot; /&gt;
      &lt;sliceName value=&quot;deceasedDateTime&quot; /&gt;
      &lt;type&gt;
        &lt;code value=&quot;dateTime&quot; /&gt;
      &lt;/type&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Patient.deceased[x]:deceasedDateTime.extension&quot;&gt;
      &lt;path value=&quot;Patient.deceased[x].extension&quot; /&gt;
      &lt;slicing&gt;
        &lt;discriminator&gt;
          &lt;type value=&quot;value&quot; /&gt;
          &lt;path value=&quot;url&quot; /&gt;
        &lt;/discriminator&gt;
        &lt;rules value=&quot;open&quot; /&gt;
      &lt;/slicing&gt;
    &lt;/element&gt;
    &lt;element id=&quot;Patient.deceased[x]:deceasedDateTime.extension:accuracy&quot;&gt;
      &lt;path value=&quot;Patient.deceased[x].extension&quot; /&gt;
      &lt;sliceName value=&quot;accuracy&quot; /&gt;
      &lt;type&gt;
        &lt;code value=&quot;Extension&quot; /&gt;
        &lt;profile value=&quot;http://hl7.org.au/fhir/StructureDefinition/date-accuracy-indicator&quot; /&gt;
      &lt;/type&gt;
      &lt;mustSupport value=&quot;true&quot; /&gt;
    &lt;/element&gt;
  &lt;/differential&gt;
&lt;/StructureDefinition&gt;
</pre></div>


<p>Note: in your post above, you mention an element with path "Patient.deceased[x].deceased[x]:deceasedDateTime.extension:accuracyIndicator", however this path is incorrect; the "deceased[x]" segment should not be repeating. Maybe this is causing the reported issues?</p>



<a name="153951590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%20error%20when%20adding%20Must%20support%20%3D%20true%20to%20an%20extension/near/153951590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David McKillop <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension.html#153951590">(Apr 10 2018 at 03:11)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191336">@Michel Rutten</span>  - thanks for looking into this.  In your testing above the "Must support" flag = true is only on "Patient.deceased[x]:deceasedDateTime.extension:accuracy".   I've forwarded you 2 emails of some of the troubleshooting that's been done when all of the data elements in the :deceased[x]" group with/without Patient.deceased[x]:deceasedDateTime.extension:accuracy are flagged with Must support  =true.  I hope this helps.<br>
Cheers D. Mc</p>



<a name="153951656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%20error%20when%20adding%20Must%20support%20%3D%20true%20to%20an%20extension/near/153951656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.20error.20when.20adding.20Must.20support.20.3D.20true.20to.20an.20extension.html#153951656">(Apr 10 2018 at 15:05)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192323">@David McKillop</span>, thank you for reporting this issue and providing useful feedback. I've analyzed the issue and responded via e-mail.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
