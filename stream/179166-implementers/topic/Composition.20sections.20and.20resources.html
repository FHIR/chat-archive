---
layout: page
title: "FHIR Chat  · Composition sections and resources · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html">Composition sections and resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="184545642"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184545642" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Koch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184545642">(Dec 31 2019 at 14:05)</a>:</h4>
<p>Is there a way to properly model a document (using the Composition resource) with a section that has text, a questionnaire resource, and then more text? This would be analogous to a document with a section that has some narrative text, a questionnaire, and then some more text. Is this possible? This is as close as I've been able to get, but this only allows text at the "top":</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;Bundle&quot;,
  &quot;type&quot;: &quot;document&quot;,
  &quot;entry&quot;: [
    {
      &quot;resource&quot;: {
        &quot;resourceType&quot;: &quot;Composition&quot;,
        &quot;text&quot;: {
          &quot;status&quot;: &quot;generated&quot;,
          &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;&lt;a name=&#39;mm&#39;/&gt;&lt;/div&gt;&quot;
        },
        &quot;id&quot;: &quot;cf-1577800395586&quot;,
        &quot;section&quot;: [
          {
            &quot;title&quot;: &quot;Section 1&quot;,
            &quot;text&quot;: {
              &quot;status&quot;: &quot;additional&quot;,
              &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;&lt;h2 class=\&quot;md\&quot;  id=\&quot;teststuffhere\&quot;&gt;Test Stuff here&lt;/h2&gt;\n&lt;p&gt;Paragraph HTML.&lt;/p&gt;&lt;/div&gt;&quot;
            },
            &quot;entry&quot;: [
              {
                &quot;reference&quot;: &quot;Questionnaire/cf-1577800630025&quot;
              }
            ],
            &quot;code&quot;: {
              &quot;coding&quot;: [
                {
                  &quot;system&quot;: &quot;http://loinc.org&quot;,
                  &quot;code&quot;: &quot;18776-5&quot;,
                  &quot;display&quot;: &quot;Plan of care note&quot;
                }
              ]
            }
          }
        ]
      }
    },
    {
      &quot;resource&quot;: {
        &quot;resourceType&quot;: &quot;Questionnaire&quot;,
        &quot;text&quot;: {
          &quot;status&quot;: &quot;generated&quot;,
          &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;Family Related Questions&lt;a name=&#39;mm&#39;/&gt;&lt;/div&gt;&quot;
        },
        &quot;id&quot;: &quot;cf-1577800630025&quot;
      }
    }
  ],
  &quot;id&quot;: &quot;cf-1577800382507&quot;
}
</pre></div>



<a name="184546359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184546359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184546359">(Dec 31 2019 at 14:23)</a>:</h4>
<blockquote>
<p>a section that has text, a questionnaire resource, and then more text? This would be analogous to a document with a section that has some narrative text, a questionnaire, and then some more text. </p>
</blockquote>
<p>is "text" fixed text? Is it plain text, markdown...?</p>



<a name="184546497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184546497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184546497">(Dec 31 2019 at 14:26)</a>:</h4>
<p>if it's fixed text (like a standard form header), perhaps Binary would be an option.</p>



<a name="184547949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184547949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Koch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184547949">(Dec 31 2019 at 15:00)</a>:</h4>
<p>In our case it is HTML, authored by a staff member. When you say Binary, does that mean we'd just add additional Binary resources?</p>



<a name="184548728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184548728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184548728">(Dec 31 2019 at 15:15)</a>:</h4>
<p>Yes, resources of type Binary</p>



<a name="184548751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184548751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Koch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184548751">(Dec 31 2019 at 15:16)</a>:</h4>
<p>Neat. I can look into that, although the Binary type indicates you have to Base64 encode the content...</p>



<a name="184548844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184548844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184548844">(Dec 31 2019 at 15:17)</a>:</h4>
<p>yeah... I am not sure if there is a resource like Annotation or something.. That could also be useful, but I didn't find it so I presume we don't have it.</p>



<a name="184548869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184548869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Koch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184548869">(Dec 31 2019 at 15:17)</a>:</h4>
<p>It might not be so bad to have to encode the content, the client would just need to have to unpack it/decode it once received.</p>



<a name="184549106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184549106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184549106">(Dec 31 2019 at 15:22)</a>:</h4>
<p>Should be easy to decode in any language. Perhaps I should have challenged a bit the requirement just to make sure the scope is clear to me: do you really need the text to be sent as an additional resource? I presume you considered that, but doesn't hurt to check the source for your requirements.</p>



<a name="184549261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184549261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Koch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184549261">(Dec 31 2019 at 15:26)</a>:</h4>
<p>I don't think we need the text as an additional resource, it's more about the fact that when looking at our existing document structures, there are plenty with clearly defined "sections" that have text interspersed with other content like images and questionnaires. To me, it makes sense to fully qualify the questionnaires and possibly the images, but I don't see a clean way to then allow for more text "in between." - does this make sense?</p>



<a name="184550527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184550527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Koch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184550527">(Dec 31 2019 at 15:55)</a>:</h4>
<p>Here's an updated JSON snippet, including a questionnaire and a binary resource for more textual content, base64 encoded. This seems like it might work:</p>
<div class="codehilite"><pre><span></span>{
  &quot;resourceType&quot;: &quot;Bundle&quot;,
  &quot;id&quot;: &quot;cf-1577800382507&quot;,
  &quot;type&quot;: &quot;document&quot;,
  &quot;entry&quot;: [
    {
      &quot;resource&quot;: {
        &quot;resourceType&quot;: &quot;Composition&quot;,
        &quot;text&quot;: {
          &quot;status&quot;: &quot;generated&quot;,
          &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;&lt;a name=&#39;mm&#39;/&gt;&lt;/div&gt;&quot;
        },
        &quot;id&quot;: &quot;cf-1577800395586&quot;,
        &quot;section&quot;: [
          {
            &quot;title&quot;: &quot;Section 1&quot;,
            &quot;text&quot;: {
              &quot;status&quot;: &quot;additional&quot;,
              &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;&lt;h2 class=\&quot;md\&quot;  id=\&quot;teststuffhere\&quot;&gt;Test Stuff here&lt;/h2&gt;\n&lt;p&gt;Paragraph HTML.&lt;/p&gt;&lt;/div&gt;&quot;
            },
            &quot;entry&quot;: [
              {
                &quot;reference&quot;: &quot;Questionnaire/cf-1577800630025&quot;
              },
              {
                &quot;reference&quot;: &quot;Binary/cf-1577804877200&quot;
              }
            ],
            &quot;code&quot;: {
              &quot;coding&quot;: [
                {
                  &quot;system&quot;: &quot;http://loinc.org&quot;,
                  &quot;code&quot;: &quot;18776-5&quot;,
                  &quot;display&quot;: &quot;Plan of care note&quot;
                }
              ]
            }
          }
        ]
      }
    },
    {
      &quot;resource&quot;: {
        &quot;resourceType&quot;: &quot;Binary&quot;,
        &quot;text&quot;: {
          &quot;status&quot;: &quot;generated&quot;,
          &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;More text goes here&lt;a name=&#39;mm&#39;/&gt;&lt;/div&gt;&quot;
        },
        &quot;contentType&quot;: &quot;text/html&quot;,
        &quot;data&quot;: &quot;KJBNSFKJ8398y238djnjdfi9&quot;,
        &quot;id&quot;: &quot;cf-1577804877200&quot;
      }
    },
    {
      &quot;resource&quot;: {
        &quot;resourceType&quot;: &quot;Questionnaire&quot;,
        &quot;text&quot;: {
          &quot;status&quot;: &quot;generated&quot;,
          &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;Family Related Questions&lt;a name=&#39;mm&#39;/&gt;&lt;/div&gt;&quot;
        },
        &quot;id&quot;: &quot;cf-1577800630025&quot;,
        &quot;title&quot;: &quot;Family Information&quot;,
        &quot;version&quot;: &quot;1&quot;
      }
    }
  ]
}
</pre></div>



<a name="184561230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184561230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184561230">(Dec 31 2019 at 19:22)</a>:</h4>
<p>note that although the binary content within the Binary resource must be base64 encoded... when one does a GET on the Binary, the http negotiate is used such that if the http negotiate allows the native mime-type then the native mime-type will be returned in the http response. Thus Binary requirement to base64 encode is only a burden when forcing FHIR mime-types.</p>



<a name="184561267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184561267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184561267">(Dec 31 2019 at 19:23)</a>:</h4>
<p>or when accessing it as a bundle. but you have to escape or base64 it either way... I think it's not that much different</p>



<a name="184603763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184603763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Koch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184603763">(Jan 01 2020 at 16:12)</a>:</h4>
<p>Thanks all. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> does this seem like it would work, given the snippet here?</p>



<a name="184610015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184610015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184610015">(Jan 01 2020 at 19:21)</a>:</h4>
<p>yes</p>



<a name="184751662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20sections%20and%20resources/near/184751662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20sections.20and.20resources.html#184751662">(Jan 03 2020 at 17:32)</a>:</h4>
<p>Rendering of a document will render the narrative for the section.  If you want to have a rendering of certain text, then the questionnaire response, then additional text, you'll have to go with sub-sections.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
