---
layout: page
title: "FHIR Chat  · fullURLs in a transaction response Bundle · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fullURLs.20in.20a.20transaction.20response.20Bundle.html">fullURLs in a transaction response Bundle</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="202752287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fullURLs%20in%20a%20transaction%20response%20Bundle/near/202752287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gou Masuda <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fullURLs.20in.20a.20transaction.20response.20Bundle.html#202752287">(Jul 02 2020 at 22:40)</a>:</h4>
<p>Hello,  I need some help about fullURLs in a transaction-response Bundle.</p>
<p>The FHIR spec says,<br>
2.36.4 Resource URL &amp; Uniqueness rules in a bundle.<br>
A given version of a resource SHALL only appear once in each Bundle. </p>
<p>And the conformance rule "bdl-7" says that <br>
"FullUrl must be unique in a bundle, or else entries with the same fullUrl must have different meta.versionId (except in history bundles)"</p>
<p>Does it apply to transaction response Bundle?</p>
<p>When I have a transaction bundle which updates a Patient resource and then reads the Patient,<br>
my understanding is that the response bundle includes two Patient resources <br>
with same fullURL and same meta.versionId. </p>
<p>Does it break the conformance rule bdl-7? <br>
Is my understanding correct ? </p>
<p>Thanks.</p>



<a name="202754087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fullURLs%20in%20a%20transaction%20response%20Bundle/near/202754087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fullURLs.20in.20a.20transaction.20response.20Bundle.html#202754087">(Jul 02 2020 at 23:07)</a>:</h4>
<p>Why would you do an update and a read in the same transaction - given that the update will implicitly give you a read response - at least if you ask it to?  In any event, yes, this would violate the constraint and create an invalid instance.</p>



<a name="202851974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fullURLs%20in%20a%20transaction%20response%20Bundle/near/202851974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gou Masuda <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fullURLs.20in.20a.20transaction.20response.20Bundle.html#202851974">(Jul 04 2020 at 02:26)</a>:</h4>
<p>Thank you for your reply. </p>
<p>We are currently implementing a FHIR server. When implementing its transaction bundle processing, I was wondering how we should implement the rules stated in the spec 2.36.4.</p>
<p>This example is just an example for illustration. I've read your answer and understand that it is unusual case.<br>
When the server receives such a transaction Bundle, should the server return an invalid Bundle response ?<br>
Or should it return an error?</p>
<p>Thanks.</p>



<a name="202853979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fullURLs%20in%20a%20transaction%20response%20Bundle/near/202853979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fullURLs.20in.20a.20transaction.20response.20Bundle.html#202853979">(Jul 04 2020 at 03:31)</a>:</h4>
<p>It would be best to return an error - returning an invalid instance would make the server non-conformant.  If you like, you can submit a change request and we can explore documenting this edge case in the spec.</p>



<a name="203059045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fullURLs%20in%20a%20transaction%20response%20Bundle/near/203059045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gou Masuda <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fullURLs.20in.20a.20transaction.20response.20Bundle.html#203059045">(Jul 07 2020 at 01:21)</a>:</h4>
<p>Thank you for your suggestion. Following your advice, we 'll choose to return an error instead of an invalid response.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
