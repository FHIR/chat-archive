---
layout: page
title: "FHIR Chat  · Reference to _history in STU3 · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20to.20_history.20in.20STU3.html">Reference to _history in STU3</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="159613773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20to%20_history%20in%20STU3/near/159613773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20to.20_history.20in.20STU3.html#159613773">(Feb 28 2019 at 13:26)</a>:</h4>
<p>The R4 documentation ( <a href="https://www.hl7.org/fhir/references.html#literal" target="_blank" title="https://www.hl7.org/fhir/references.html#literal">https://www.hl7.org/fhir/references.html#literal</a> ) says:<br>
"<br>
References can be version specific - that is, a reference may point to a specific version of a resource. e.g.:</p>
<div class="codehilite"><pre><span></span>  &lt;target&gt;
    &lt;reference value=&quot;http://example.org/fhir/Observation/1x2/_history/2&quot; /&gt;
  &lt;/target&gt;
</pre></div>


<p>"</p>
<p>This paragraph does not exist in STU3, but the Regex there allows to have the same ".../_history/2" reference.</p>
<p>However, using a HAPI STU3 endpoint, and POSTing a transaction Bundle containing</p>
<div class="codehilite"><pre><span></span>&lt;Observation&gt;
    ...
    &lt;reference value=&quot;Patient/2/_history/1&quot;/&gt;
    ...
&lt;/Observation&gt;
&lt;request&gt;
    &lt;method value=&quot;POST&quot;/&gt;
    ...
&lt;/request&gt;
</pre></div>


<p>the resulting Observation will cut the history part of the reference and only contain</p>
<div class="codehilite"><pre><span></span>&lt;reference value=&quot;Patient/2&quot;/&gt;
</pre></div>


<p>Is this correct according to the STU3 spec, is it a bug/missing feature in HAPI or am I overlooking something?</p>



<a name="159624629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20to%20_history%20in%20STU3/near/159624629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20to.20_history.20in.20STU3.html#159624629">(Feb 28 2019 at 15:42)</a>:</h4>
<p>Being able to point to specific versions has existed at least as far back as DSTU2.  <span class="user-mention" data-user-id="191319">@James Agnew</span> ?</p>



<a name="159904021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20to%20_history%20in%20STU3/near/159904021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Maximilian Reith <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20to.20_history.20in.20STU3.html#159904021">(Mar 04 2019 at 11:08)</a>:</h4>
<p>You need to enable versioned references explicit...http://hapifhir.io/doc_resource_references.html#_toc_versioned_references</p>



<a name="159904892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20to%20_history%20in%20STU3/near/159904892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20to.20_history.20in.20STU3.html#159904892">(Mar 04 2019 at 11:21)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
