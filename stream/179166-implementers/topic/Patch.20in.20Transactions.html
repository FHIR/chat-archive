---
layout: page
title: "FHIR Chat  · Patch in Transactions · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html">Patch in Transactions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153930735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> emilio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930735">(Jan 25 2018 at 19:45)</a>:</h4>
<p>Is there a way to include patch operations in the JSON-patch fromat inside transactions?<br>
I see that using  the FHIRPath Patch is valid (although I couldn't find any examples of its being used in transaction) but I'm implementing a server in Javascript and XML is a very tedious format to handle. <br>
Is there a way to encode FHIRPath Patch in JSON?</p>



<a name="153930765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930765">(Jan 25 2018 at 20:40)</a>:</h4>
<p>Just making sure you know you can use either JSON or XML for the <a href="http://build.fhir.org/formats.html" target="_blank" title="http://build.fhir.org/formats.html">wire format</a></p>



<a name="153930766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930766">(Jan 25 2018 at 20:41)</a>:</h4>
<p>Patch in JSON is described here: <a href="http://build.fhir.org/http.html" target="_blank" title="http://build.fhir.org/http.html">http://build.fhir.org/http.html</a></p>



<a name="153930767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> emilio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930767">(Jan 25 2018 at 20:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span>  But how would you make a FHIRPath patch in JSON? I can't find an example.</p>



<a name="153930768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> emilio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930768">(Jan 25 2018 at 20:46)</a>:</h4>
<p>And yes, I saw what is written about Patch and JSON-Patch in  <a href="http://build.fhir.org/http.html" target="_blank" title="http://build.fhir.org/http.html">http://build.fhir.org/http.html</a> but I'm interested in Patch as part of a transaction, where, as I understand, json-patch is not valid.</p>



<a name="153930769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930769">(Jan 25 2018 at 20:51)</a>:</h4>
<p>I did a paper example here-: <a href="https://argonautproject.github.io/scheduling/patient-scheduling.html#examples-1" target="_blank" title="https://argonautproject.github.io/scheduling/patient-scheduling.html#examples-1">https://argonautproject.github.io/scheduling/patient-scheduling.html#examples-1</a></p>
<p>I did test it out on the hapi test server.</p>



<a name="153930770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930770">(Jan 25 2018 at 20:52)</a>:</h4>
<p>not sure about Patch in transactions - good question</p>



<a name="153930771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> emilio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930771">(Jan 25 2018 at 20:57)</a>:</h4>
<p>Yes, What you have in that example is clear to me, I mean, the fact that you can PATCH with either json-patch or fhirPath.  <br>
My questions are: <br>
1) Is it valid to use json-patch in a transaction?<br>
2) Is it valid to use fhirPath Patch in a transaction?<br>
3) How do you encode a fhirPath Patch in JSON (and use it in a transaction)?</p>



<a name="153930794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930794">(Jan 26 2018 at 00:48)</a>:</h4>
<p>it is not valid to use json-patch in a transaction</p>



<a name="153930795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930795">(Jan 26 2018 at 00:49)</a>:</h4>
<p>it is valid to use a fhirpath patch in a transaction - see <a href="http://build.fhir.org/fhirpatch.html" target="_blank" title="http://build.fhir.org/fhirpatch.html">http://build.fhir.org/fhirpatch.html</a> for an example fhirpath patch</p>



<a name="153930799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> emilio <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930799">(Jan 26 2018 at 01:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Thanks, but what about my third question (fhirPath Patch as JSON)?</p>



<a name="153930801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930801">(Jan 26 2018 at 02:27)</a>:</h4>
<p>well, it would be the json equivalent of the xml form in that link</p>



<a name="153930802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153930802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153930802">(Jan 26 2018 at 02:28)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;resourceType&quot;</span> <span class="p">:</span> <span class="s2">&quot;Parameters&quot;</span><span class="p">,</span>
  <span class="nt">&quot;parameter&quot;</span> <span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;operation&quot;</span><span class="p">,</span>
      <span class="nt">&quot;part&quot;</span> <span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span>
          <span class="nt">&quot;valueCode&quot;</span> <span class="p">:</span> <span class="s2">&quot;add&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;path&quot;</span><span class="p">,</span>
          <span class="nt">&quot;valueString&quot;</span> <span class="p">:</span> <span class="s2">&quot;Patient&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
          <span class="nt">&quot;valueString&quot;</span> <span class="p">:</span> <span class="s2">&quot;birthDate&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span>
          <span class="nt">&quot;valueDate&quot;</span> <span class="p">:</span> <span class="s2">&quot;1930-01-01&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>



<a name="153999926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/153999926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Calderero <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#153999926">(Sep 26 2018 at 12:48)</a>:</h4>
<p>Additional question regarding this.</p>
<p>I'm looking at <a href="http://build.fhir.org/http.html#trules" target="_blank" title="http://build.fhir.org/http.html#trules">http://build.fhir.org/http.html#trules</a> and I don't see the order at which PATCH interactions should be executed (e.g. after POSTs, PUTs, or ?). Is there some guidance?</p>



<a name="154000006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/154000006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#154000006">(Sep 26 2018 at 16:06)</a>:</h4>
<p>Sounds like a good thing to raise as a change request.</p>



<a name="154000174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/154000174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Calderero <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#154000174">(Sep 27 2018 at 01:09)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18300" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18300">GF#18300</a>. Thanks.</p>



<a name="154006249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/154006249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Calderero <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#154006249">(Oct 05 2018 at 12:41)</a>:</h4>
<p>Does STU3 provide support for putting PATCH operations in a batch/transaction interaction?</p>
<p>My assumption is no.</p>
<p>Even though <a href="http://hl7.org/fhir/STU3/http.html#patch" target="_blank" title="http://hl7.org/fhir/STU3/http.html#patch">http://hl7.org/fhir/STU3/http.html#patch</a> says at the very end that PATCH is supported for batch and interaction transactions, you actually cannot build a STU3 batch or transaction bundle with a PATCH request in it because <a href="http://hl7.org/fhir/STU3/valueset-http-verb.html" target="_blank" title="http://hl7.org/fhir/STU3/valueset-http-verb.html">http://hl7.org/fhir/STU3/valueset-http-verb.html</a> doesn't list out PATCH, and the binding on <a href="http://hl7.org/fhir/STU3/bundle-definitions.html#Bundle.entry.request.method" target="_blank" title="http://hl7.org/fhir/STU3/bundle-definitions.html#Bundle.entry.request.method">http://hl7.org/fhir/STU3/bundle-definitions.html#Bundle.entry.request.method</a> is required.</p>
<p>Is my interpretation correct? We have to use R4 to be able to use PATCH in a batch/transaction bundle?</p>



<a name="154006251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/154006251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#154006251">(Oct 05 2018 at 12:43)</a>:</h4>
<p>The way I'd phrase is is that the R3 behavior is "undefined".  Systems can certainly choose to support it, but can't count on it being supported.</p>



<a name="154006254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/154006254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Calderero <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#154006254">(Oct 05 2018 at 12:52)</a>:</h4>
<p>We're using HAPI and my understanding is the STU3 definitions of its classes are generated. We could certainly fork it and add the necessary enums to HTTPVerb, but we'd rather not do that if we can avoid it.</p>
<p>I'm guessing my real question is is STU3 set in stone, or can it be updated via an errata (like for this one)? It would be nice if this were possible (it would make it look more official) and then perhaps it would flow down to the definitions HAPI uses for autogenerating the classes.</p>



<a name="154006264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/154006264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#154006264">(Oct 05 2018 at 13:10)</a>:</h4>
<p>STU 3 is more or less set in stone.  Updating it requires a <em>large</em> number of person-hours and there are also rules about what changes can retroactively be made to a balloted specification.  Thus in the past we've only done it when either a tooling issue meant that some of the artifacts where technically non-useable or when there was a serious security hole - and even then, we made the bare minimum change possible.  This change would be the introduction of new capability and thus a "substantive change" which is prohibited under HL7's rules.  While implementers are free to pre-adopt conventions from future releases (and implementation guides could theoretically mandate that), past releases won't be changed.</p>



<a name="154006346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/154006346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#154006346">(Oct 05 2018 at 15:00)</a>:</h4>
<p>Had this been resolved in R4?</p>



<a name="154006350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/154006350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#154006350">(Oct 05 2018 at 15:19)</a>:</h4>
<p>Yes.  We approved a change request around this to clarify it at this WGM.</p>



<a name="154006399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Patch%20in%20Transactions/near/154006399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Patch.20in.20Transactions.html#154006399">(Oct 05 2018 at 16:47)</a>:</h4>
<p>Thanks, I just checked too connectivity getting limited now.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
