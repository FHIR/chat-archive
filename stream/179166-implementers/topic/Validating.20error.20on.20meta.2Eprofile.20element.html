---
layout: page
title: "FHIR Chat  · Validating error on meta.profile element · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html">Validating error on meta.profile element</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="222059391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20error%20on%20meta.profile%20element/near/222059391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cees de Jonge <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html#222059391">(Jan 08 2021 at 10:59)</a>:</h4>
<p>In our profiles (structuredefinitions) we sometimes populate the "meta.profile" element to claim resource conformance.<br>
In the latest Validator (5.2.13) we get an error like:<br>
        refers to a resource that has the wrong type. Found StructureDefinition expecting one of []<br>
I am wondering if this is correct, as the definition states the canonical should refer to a resource of type  StructureDefinition</p>



<a name="222076324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20error%20on%20meta.profile%20element/near/222076324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html#222076324">(Jan 08 2021 at 14:14)</a>:</h4>
<p>StructureDefinition.meta.profile would have to be a profile on StructureDefinition.  If you want to identify the profile that your profile is based on, you need to use StructureDefinition.baseDefinition.</p>



<a name="222076380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20error%20on%20meta.profile%20element/near/222076380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html#222076380">(Jan 08 2021 at 14:15)</a>:</h4>
<p>What exactly are you sending?</p>



<a name="222266495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20error%20on%20meta.profile%20element/near/222266495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cees de Jonge <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html#222266495">(Jan 11 2021 at 07:32)</a>:</h4>
<p>We are putting indeed the url of a profile on StructureDefinition. This StructureDefinition (profile) we created ourselves and it validates.<br>
Also, if we replace meta.profile with the baseDefinition of the mentioned profile, for example: "<a href="http://hl7.org/fhir/StructureDefinition/DetectedIssue">http://hl7.org/fhir/StructureDefinition/DetectedIssue</a>", we get the same error.</p>



<a name="222313550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20error%20on%20meta.profile%20element/near/222313550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html#222313550">(Jan 11 2021 at 15:42)</a>:</h4>
<p>Can you post exactly what your meta looks like and your error looks like?</p>



<a name="222400347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20error%20on%20meta.profile%20element/near/222400347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cees de Jonge <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html#222400347">(Jan 12 2021 at 07:52)</a>:</h4>
<p><a href="/user_uploads/10155/fMNHeyXS4rNy0gJn1Sa72Tq2/ILSDetectedIssue.structuredefinition.xml">ILSDetectedIssue.structuredefinition.xml</a> <a href="/user_uploads/10155/5EupZD1ILsYcnFAxHia50DXN/PHMDetectedIssue.structuredefinition.xml">PHMDetectedIssue.structuredefinition.xml</a> </p>
<p>When we run:</p>
<blockquote>
<p>java -jar ../validator-cli.jar -version 4.0 PHMDetectedIssue.structuredefinition.xml -ig .</p>
</blockquote>
<p>The validator produces:</p>
<blockquote>
<p>FHIR Validation tool Version 5.2.13 (Git# 5f67b5bad03d). Built 2020-12-24T05:16:59.673Z (19 days old)<br>
  Java:   14.0.1 from /Library/Java/JavaVirtualMachines/openjdk-14.0.1.jdk/Contents/Home on x86_64 (64bit). 4096MB available<br>
  Paths:  Current = /Users/nlv09090/Projects/ILS/Zulip/meta.profile, Package Cache = /Users/nlv09090/.fhir/packages<br>
  Params: -version 4.0 PHMDetectedIssue.structuredefinition.xml -ig .<br>
Loading<br>
  Load FHIR v4.0 from hl7.fhir.r4.core#4.0.1 - 4575 resources (00:05.0524)<br>
  Load hl7.terminology#2.0.0 - 3749 resources (00:01.0060)<br>
  Terminology server <a href="http://tx.fhir.org">http://tx.fhir.org</a> - Version 1.9.369 (00:03.0049)<br>
  Load . - 2 resources (00:00.0036)<br>
  Get set...  go (00:00.0071)<br>
Validating<br>
  Validate PHMDetectedIssue.structuredefinition.xml 00:00.0354<br>
Done. Times: Loading: 00:10.0213, validation: 00:00.0355</p>
<p><em>FAILURE</em>: 1 errors, 0 warnings, 0 notes<br>
  Error @ StructureDefinition.differential.element[1].fixed.ofType(canonical) (line 34, col154) : Canonical URL '<a href="https://www.fhir.philips.com/4.0/StructureDefinition/populationHealthManagement/common/detectedIssue-v1/PHMDetectedIssue">https://www.fhir.philips.com/4.0/StructureDefinition/populationHealthManagement/common/detectedIssue-v1/PHMDetectedIssue</a>' refers to a resource that has the wrong type. Found StructureDefinition expecting one of []</p>
</blockquote>
<p>I assume letting meta.profile pointing to itself does not make a difference.</p>



<a name="222461724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20error%20on%20meta.profile%20element/near/222461724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html#222461724">(Jan 12 2021 at 17:01)</a>:</h4>
<p>Hmm.  What you have seems right to me.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="223202202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20error%20on%20meta.profile%20element/near/223202202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cees de Jonge <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html#223202202">(Jan 19 2021 at 09:17)</a>:</h4>
<p><a href="/user_uploads/10155/2voCLhV1pcFzyNHGjv-MSWXg/VitalSign-HL7.structuredefinition.xml">VitalSign-HL7.structuredefinition.xml</a> <a href="/user_uploads/10155/npdRmfQj5Yw8atBu7obl-bN_/VitalSign.structuredefinition.xml">VitalSign.structuredefinition.xml</a> <a href="/user_uploads/10155/JP93VH_EO5cmbnYqQ7Cm_PX3/VitalSign-claim.structuredefinition.xml">VitalSign-claim.structuredefinition.xml</a> </p>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <br>
Maybe it is not how "meta.profile" is intended, but would it not be great if it could be used to register and validate claims of derived-profiles?<br>
Included an example how we (would) use it, but a recent validator errors on it:</p>
<blockquote>
<p>FHIR Validation tool Version 5.2.16 (Git# f815bc8fb8f0). Built 2021-01-14T22:39:23.297Z (4 days old)<br>
  Java:   14.0.1 from /Library/Java/JavaVirtualMachines/openjdk-14.0.1.jdk/Contents/Home on x86_64 (64bit). 4096MB available<br>
  Paths:  Current = /Users/nlv09090/Projects/ILS/validate/meta.profile-test, Package Cache = /Users/nlv09090/.fhir/packages<br>
  Params: VitalSign-HL7.structuredefinition.xml VitalSign-claim.structuredefinition.xml VitalSign.structuredefinition.xml -version 4.0 -ig .<br>
Loading<br>
  Load FHIR v4.0 from hl7.fhir.r4.core#4.0.1 - 4575 resources (00:04.0309)<br>
  Load hl7.terminology#2.0.0 - 3749 resources (00:01.0063)<br>
  Terminology server <a href="http://tx.fhir.org">http://tx.fhir.org</a> - Version 1.9.369 (00:01.0327)<br>
  Load . - 3 resources (00:00.0051)<br>
  Get set...  go (00:00.0088)<br>
Validating<br>
  Validate VitalSign-HL7.structuredefinition.xml 00:00.0324<br>
  Validate VitalSign-claim.structuredefinition.xml 00:00.0082<br>
  Validate VitalSign.structuredefinition.xml 00:00.0054<br>
Done. Times: Loading: 00:07.0078, validation: 00:00.0463 (#3)</p>
<p>-- VitalSign-HL7.structuredefinition.xml ---------------------------------------------<br>
Success: 0 errors, 0 warnings, 1 notes<br>
  Information @ ?? : All OK</p>
<hr>
<p>-- VitalSign-claim.structuredefinition.xml -----------------------------------------------<br>
<em>FAILURE</em>: 1 errors, 0 warnings, 0 notes<br>
  Error @ StructureDefinition.differential.element[0].fixed.ofType(canonical) (line 19, col84) : Canonical URL '<a href="http://hl7.org/fhir/StructureDefinition/vitalsigns">http://hl7.org/fhir/StructureDefinition/vitalsigns</a>' refers to a resource that has the wrong type. Found StructureDefinition expecting one of []</p>
<hr>
<p>-- VitalSign.structuredefinition.xml -----------------------------------------<br>
Success: 0 errors, 0 warnings, 1 notes<br>
  Information @ ?? : All OK</p>
<hr>
</blockquote>



<a name="223242304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20error%20on%20meta.profile%20element/near/223242304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html#223242304">(Jan 19 2021 at 15:26)</a>:</h4>
<p>To indicate that one profile is derived from another profile, you use StructureDefinition.baseDefinition</p>



<a name="224004464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20error%20on%20meta.profile%20element/near/224004464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cees de Jonge <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html#224004464">(Jan 26 2021 at 07:25)</a>:</h4>
<p>Sure.<br>
I was hoping the meta.profile could be a way to register conformance claims to other existing derived-profiles. I think this is something more people are interested in. Down the road this could maybe be used to validate these claims.<br>
From what I understand now is that we must not and should not use the meta.profile in derived profiles?</p>



<a name="224045983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20error%20on%20meta.profile%20element/near/224045983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20error.20on.20meta.2Eprofile.20element.html#224045983">(Jan 26 2021 at 14:28)</a>:</h4>
<p>meta.profile on a StructureDefinition would indicate a profile <em>on</em> StructureDefinition.  E.g. one that says that short definitions are mandatory or invariants are prohibited.  I.e. it's rules for profiling, not an indication of profile relationships.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
