---
layout: page
title: "FHIR Chat  · Questionnaire enableWhen with answerString · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20enableWhen.20with.20answerString.html">Questionnaire enableWhen with answerString</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="247220968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20enableWhen%20with%20answerString/near/247220968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fran del Río <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20enableWhen.20with.20answerString.html#247220968">(Jul 26 2021 at 15:45)</a>:</h4>
<p>Hi all. What's the correct JSON format for "enableWhen" with answerString value in Questionnaire resource?  Depends it of item type? Can you give an example?</p>
<p>It doesn't work form me:</p>
<div class="codehilite"><pre><span></span><code>  &quot;item&quot;: [{
    &quot;linkId&quot;: &quot;1&quot;,
  &quot;text&quot;: &quot;Sub-Item&quot;,
  &quot;type&quot;: &quot;string&quot;,
  &quot;enableWhen&quot;: [
    {
      &quot;question&quot;: &quot;4&quot;,
      &quot;operator&quot;: &quot;=&quot;,
      &quot;answerString&quot;: &quot;answerString example&quot;
    }
  ]
  }]
</code></pre></div>

<p>the return through hapi was:</p>
<p>"type": "string",<br>
                    "enableWhen": [<br>
                        {<br>
                            "question": "4",<br>
                            "operator": "="<br>
                        }<br>
                    ]</p>
<p>without answerString  :(</p>



<a name="247233049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20enableWhen%20with%20answerString/near/247233049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20enableWhen.20with.20answerString.html#247233049">(Jul 26 2021 at 17:18)</a>:</h4>
<p>The syntax looks right to me (though using enableWhen with strings seems odd - hopefully you're constraining the allowed values with answerOption?  <span class="user-mention" data-user-id="191319">@James Agnew</span> - ideas what HAPI is doing here?</p>



<a name="247233704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20enableWhen%20with%20answerString/near/247233704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20enableWhen.20with.20answerString.html#247233704">(Jul 26 2021 at 17:23)</a>:</h4>
<p>Looks right to me. What happens if you POST it to <code>/Questionnaire/$validate</code>?</p>



<a name="247241762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20enableWhen%20with%20answerString/near/247241762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fran del Río <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20enableWhen.20with.20answerString.html#247241762">(Jul 26 2021 at 18:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191319">James Agnew</span> <a href="#narrow/stream/179166-implementers/topic/Questionnaire.20enableWhen.20with.20answerString/near/247233704">said</a>:</p>
<blockquote>
<p>Looks right to me. What happens if you POST it to <code>/Questionnaire/$validate</code>?</p>
</blockquote>
<p>Hi Lloyd &amp; James. No errors about enableWhen, only some warnings about missing system in valueCodings.<br>
I'm attaching example json used on $validate. Can you see something wrong?</p>
<p><a href="/user_uploads/10155/dD--c9tKR4qcOEegm8MSQH6T/Quest-enableWhen.json">Quest-enableWhen.json</a></p>



<a name="247243026"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20enableWhen%20with%20answerString/near/247243026" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20enableWhen.20with.20answerString.html#247243026">(Jul 26 2021 at 18:32)</a>:</h4>
<p>I just uploaded that to the HAPI FHIR public server and it stores it correctly. See: <a href="http://hapi.fhir.org/baseR4/Questionnaire/EW#L52">http://hapi.fhir.org/baseR4/Questionnaire/EW#L52</a></p>
<p>Maybe check that you aren't using an outdated version of HAPI or the wrong version of the FHIR models?</p>



<a name="247348383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20enableWhen%20with%20answerString/near/247348383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fran del Río <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20enableWhen.20with.20answerString.html#247348383">(Jul 27 2021 at 15:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191319">James Agnew</span> <a href="#narrow/stream/179166-implementers/topic/Questionnaire.20enableWhen.20with.20answerString/near/247243026">said</a>:</p>
<blockquote>
<p>I just uploaded that to the HAPI FHIR public server and it stores it correctly. See: <a href="http://hapi.fhir.org/baseR4/Questionnaire/EW#L52">http://hapi.fhir.org/baseR4/Questionnaire/EW#L52</a></p>
<p>Maybe check that you aren't using an outdated version of HAPI or the wrong version of the FHIR models?</p>
</blockquote>
<p>Thanks again. </p>
<p><em>Solved!</em>   I was returning a struct from my app to hapi, instead of a JSON string. Rarely were some labels omitted for this.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
