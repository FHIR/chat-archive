---
layout: page
title: "FHIR Chat  · Validating Behind a Proxy · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Behind.20a.20Proxy.html">Validating Behind a Proxy</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="213826558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Behind%20a%20Proxy/near/213826558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Behind.20a.20Proxy.html#213826558">(Oct 19 2020 at 18:31)</a>:</h4>
<p>I'm trying to run the FHIR Validator 5.1.17 behind a proxy server. While I can access the packages just fine (hl7.fhir.r4.core#4.0.1), I can't access the terminology server (<a href="http://tx.fhir.org">http://tx.fhir.org</a>). For the packages, proxy negotiation settles on NTLM as the authentication method. However, the terminology server request doesn't provide any authentication information. Does anyone have any clue what is happening or how I can get this working?</p>
<p>Thanks ... Charlie</p>



<a name="213829572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Behind%20a%20Proxy/near/213829572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Behind.20a.20Proxy.html#213829572">(Oct 19 2020 at 18:56)</a>:</h4>
<p>I think it is very unlikely that there is any use of NTLM in the validating process. Unless we are talking about the some kind of npm authentication?</p>



<a name="213833140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Behind%20a%20Proxy/near/213833140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Behind.20a.20Proxy.html#213833140">(Oct 19 2020 at 19:27)</a>:</h4>
<p>Yes, it is in the process of authenticating to the proxy server. I can see the headers in WireShark.</p>



<a name="213844752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Behind%20a%20Proxy/near/213844752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Behind.20a.20Proxy.html#213844752">(Oct 19 2020 at 20:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="213849764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Behind%20a%20Proxy/near/213849764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Behind.20a.20Proxy.html#213849764">(Oct 19 2020 at 21:38)</a>:</h4>
<p>This is command I run ...<br>
cygdrive/c/Program\ Files/Common\ Files/Oracle/Java/javapath/java -Dhttp.proxyHost=proxy -Dhttp.proxyPort=9119 -jar ./validator_cli.jar -version 4.0  FullUrl.json</p>
<p>I have confirmed that the starting text that appears in the stacktrace is from our proxy server. I also used WireShark to view the exchange and saw Proxy-authentication : NTLM ...  in the HTTP headers to get the package, but not in the call to the terminology server.</p>
<p>And here are the results ...<br>
 FHIR Validation tool Version 5.1.17 (Git# 44f7dca1c794). Built 2020-10-14T20:04:32.293Z (4 days old)<br>
  Java:   11.0.8 from C:\Program Files\Java\jdk11 on amd64 (64bit). 2048MB available<br>
  Paths:  Current = XXX, Package Cache = C:\Users\XXX\.fhir\packages<br>
  Params: -version 4.0 FullUrl.json<br>
Loading<br>
  Load FHIR v4.0 from hl7.fhir.r4.core#4.0.1Installing hl7.fhir.r4.core#4.0.1 to the package cache<br>
  Fetching:....................................................................................................<br>
  Installing: .................................................................................................... done.<br>
Installing hl7.fhir.xver-extensions#0.0.4 to the package cache<br>
  Fetching:<br>
  Installing:  done.</p>
<ul>
<li>4575 resources (01:45.0217)<br>
  Terminology server <a href="http://tx.fhir.orgException">http://tx.fhir.orgException</a> in thread "main" org.hl7.fhir.exceptions.FHIRException: Unable to connect to terminology server. Use parameter '-tx n/a' to run without using terminology services to validate LOINC, SNOMED, ICD-X etc. Error = Error parsing response message: only whitespace content allowed before start tag and not A (position: START_DOCUMENT seen &lt;!--Title--&gt;\nA... @2:2)<br>
        at org.hl7.fhir.r5.context.SimpleWorkerContext.connectToTSServer(SimpleWorkerContext.java:303)<br>
        at org.hl7.fhir.validation.ValidationEngine.connectToTSServer(ValidationEngine.java:1033)<br>
        at org.hl7.fhir.validation.ValidationEngine.setTerminologyServer(ValidationEngine.java:407)<br>
        at org.hl7.fhir.validation.cli.services.ValidationService.getValidator(ValidationService.java:209)<br>
        at org.hl7.fhir.validation.Validator.main(Validator.java:190)<br>
Caused by: org.hl7.fhir.r5.utils.client.EFhirClientException: Error parsing response message: only whitespace content allowed before start tag and not A (position: START_DOCUMENT seen &lt;!--Title--&gt;\nA... @2:2)<br>
        at org.hl7.fhir.r5.utils.client.ClientUtils.unmarshalReference(ClientUtils.java:378)<br>
        at org.hl7.fhir.r5.utils.client.ClientUtils.issueResourceRequest(ClientUtils.java:242)<br>
        at org.hl7.fhir.r5.utils.client.ClientUtils.issueResourceRequest(ClientUtils.java:224)<br>
        at org.hl7.fhir.r5.utils.client.ClientUtils.issueResourceRequest(ClientUtils.java:215)<br>
        at org.hl7.fhir.r5.utils.client.ClientUtils.issueGetResourceRequest(ClientUtils.java:151)<br>
        at org.hl7.fhir.r5.utils.client.FHIRToolingClient.getCapabilitiesStatementQuick(FHIRToolingClient.java:185)<br>
        at org.hl7.fhir.convertors.txClient.TerminologyClientR5.getCapabilitiesStatementQuick(TerminologyClientR5.java:95)<br>
        at org.hl7.fhir.r5.context.SimpleWorkerContext.connectToTSServer(SimpleWorkerContext.java:299)<br>
        ... 4 more<br>
Caused by: org.hl7.fhir.exceptions.FHIRFormatError: only whitespace content allowed before start tag and not A (position: START_DOCUMENT seen &lt;!--Title--&gt;\nA... @2:2)<br>
        at org.hl7.fhir.r5.formats.XmlParserBase.parse(XmlParserBase.java:122)<br>
        at org.hl7.fhir.r5.formats.ParserBase.parse(ParserBase.java:61)<br>
        at org.hl7.fhir.r5.utils.client.ClientUtils.unmarshalReference(ClientUtils.java:371)<br>
        ... 11 more<br>
Caused by: org.xmlpull.v1.XmlPullParserException: only whitespace content allowed before start tag and not A (position: START_DOCUMENT seen &lt;!--Title--&gt;\nA... @2:2)<br>
        at org.xmlpull.mxp1.MXParser.parseProlog(MXParser.java:1519)<br>
        at org.xmlpull.mxp1.MXParser.nextImpl(MXParser.java:1395)<br>
        at org.xmlpull.mxp1.MXParser.next(MXParser.java:1093)<br>
        at org.hl7.fhir.r5.formats.XmlParserBase.next(XmlParserBase.java:232)<br>
        at org.hl7.fhir.r5.formats.XmlParserBase.loadXml(XmlParserBase.java:222)<br>
        at org.hl7.fhir.r5.formats.XmlParserBase.parse(XmlParserBase.java:119)<br>
        ... 13 more</li>
</ul>



<a name="213992833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Behind%20a%20Proxy/near/213992833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Behind.20a.20Proxy.html#213992833">(Oct 20 2020 at 23:43)</a>:</h4>
<p>make a github issue for this. I'll have to figure out whether there's anything I can do about it</p>



<a name="214082450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Behind%20a%20Proxy/near/214082450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Behind.20a.20Proxy.html#214082450">(Oct 21 2020 at 17:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I see that there is an issue open for the Validator and proxies (<a href="https://github.com/hapifhir/org.hl7.fhir.core/issues/204">https://github.com/hapifhir/org.hl7.fhir.core/issues/204</a>). Should I open a more specific one regarding the terminology server?</p>



<a name="214102047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Behind%20a%20Proxy/near/214102047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Behind.20a.20Proxy.html#214102047">(Oct 21 2020 at 19:27)</a>:</h4>
<p>make a comment against that task</p>



<a name="214114716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validating%20Behind%20a%20Proxy/near/214114716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charlie Filkins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validating.20Behind.20a.20Proxy.html#214114716">(Oct 21 2020 at 21:05)</a>:</h4>
<p>Comment written.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
