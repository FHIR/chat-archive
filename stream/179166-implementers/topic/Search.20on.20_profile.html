---
layout: page
title: "FHIR Chat  · Search on _profile · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html">Search on _profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="223455989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/223455989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Kowitz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#223455989">(Jan 21 2021 at 00:24)</a>:</h4>
<p>I'm looking to ask a clarifying question when searching on _profile in R4, Given the Model type is Canonical and the Search Parameter type is Uri.<br>
If I had: meta.profile=http://example.com|5#abc, should I be able to find this with _profile=http://example.com or _profile=http://example.com|5 or _profile=http://example.com#abc. Or should the Uri search type on Canonical just be treated like the same as where the Model Type is Uri/Url?</p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="223457733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/223457733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Kowitz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#223457733">(Jan 21 2021 at 00:52)</a>:</h4>
<p>Playing around with other servers, if I use "http://example.com|5#abc" as the profile:</p>
<ul>
<li>HAPI I need to encode the string "http%3A%2F%2Fexample.com%7C5%23abc" exactly to find the resource</li>
<li>Vonk seems to always ignore the Canonical parts (|5#abc) so will find the Uri portion "<a href="http://example.com">http://example.com</a>" no matter what comes after in the search string</li>
</ul>



<a name="223462251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/223462251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#223462251">(Jan 21 2021 at 02:10)</a>:</h4>
<p>I'm not sure</p>



<a name="223568800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/223568800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#223568800">(Jan 21 2021 at 20:53)</a>:</h4>
<p>Well, this is annoying  =)...</p>
<p>Starting with the <a href="https://www.hl7.org/fhir/search.html#profile">_profile search parameter</a>, it appears to be defined as a <a href="https://www.hl7.org/fhir/search.html#reference">reference</a> type parameter.</p>
<p>The <a href="https://www.hl7.org/fhir/search.html#versions">References and Versions</a> section specifies that references to canonicals can have versions specified with the <code>|</code>.</p>
<p>Additional guidance can then be found in the <a href="https://www.hl7.org/fhir/references.html#canonical">versions section of the references page</a>.  Since the <code>meta.profile</code> is a reference to a canonical of a <code>Structure Definition</code> (which is in the list), I'd say this is the "most authoritative" section of the spec.</p>
<p>So, my (un-authoritative) reading would be that:</p>
<ul>
<li>versioned search should be allowed with the <code>|</code> character</li>
<li>generally the <code>|</code> character should be url encoded to <code>%7C</code> - I cannot seem to find an RFC that lists it as a reserved character, but most url encode methods do the conversion (note that FHIR guidance for servers is to accept either encoded or not)</li>
<li>a query without a version should start with the highest version of the resource and work backwards to look for a match (note that partial versions are also allowed, <code>5</code> would match <code>5.1</code> or <code>5.0</code>)</li>
<li><del>I can't find any guidance about mixing the <code>|</code> and the <code>#</code> segments (nor any examples)... so <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span>  on that piece</del></li>
</ul>
<p>Edit: I did find:<br>
<code> &lt;valueSet value="http://fhir.acme.com/Questionnaire/example|1.0#vs1"/&gt;</code>: This is a reference to the value set with id "vs1" in version 1.0 of the identified questionnaire. The common case for this is internal references.</p>
<p>So, that looks valid too.</p>



<a name="223576907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/223576907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brendan Kowitz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#223576907">(Jan 21 2021 at 22:01)</a>:</h4>
<p><span class="user-mention" data-user-id="222054">@Gino Canessa</span>, yes, I didn't cover ModelType Canonical =&gt; Search Type Reference searches, the logic here is more complex for sure.<br>
That same page (<a href="https://www.hl7.org/fhir/resource.html#search">https://www.hl7.org/fhir/resource.html#search</a>) also has _profile's search type being a uri.<br>
Some relationships (QuestionnaireResponse.questionnaire) are defined where the search type is Reference</p>



<a name="223581079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/223581079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#223581079">(Jan 21 2021 at 22:37)</a>:</h4>
<p>Yep, that's definitely a conflict.  I'll file a ticket to bring up at FHIR-I, unless <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , or anyone else wants to jump in with something.</p>



<a name="223582206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/223582206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#223582206">(Jan 21 2021 at 22:49)</a>:</h4>
<p>As a note, I can see that it used to be listed on that page as a <code>reference</code> type (e.g., in <a href="http://hl7.org/fhir/2018Dec/resource.html#search">3.5a.0</a>).  I'm not going to try and find the commit that changed it to sort it out now though.</p>



<a name="223582596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/223582596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#223582596">(Jan 21 2021 at 22:53)</a>:</h4>
<p>Created <a href="http://jira.hl7.org/browse/FHIR-30514">FHIR#30514</a> .</p>



<a name="242946737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/242946737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruth berge <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#242946737">(Jun 16 2021 at 21:38)</a>:</h4>
<p>If my Account resource is defined with a meta.profile "<a href="http://hl7.org/fhir/us/xxx/StructureDefinition/specialgrouping">http://hl7.org/fhir/us/xxx/StructureDefinition/specialgrouping</a>" and I want to search for all resources with that profile?   GET [base]/Account?_profile=http://hl7.org/fhir/us/xxx/StructureDefinition/specialgrouping<br>
Should that be all I need to do?  Is there some other set up?  Do I need to define the profile in the structure definition?</p>



<a name="242948836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/242948836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#242948836">(Jun 16 2021 at 22:00)</a>:</h4>
<p>That's it, according to the base specification. If your server supports search with this parameter, it should find all the accounts tagged in this way.</p>



<a name="243043236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/243043236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruth berge <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#243043236">(Jun 17 2021 at 16:15)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191315">@Josh Mandel</span> , but this doesn't work on my server so if the community is telling me I've read it right, then I will report the issue to the vendor</p>



<a name="243974293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20on%20_profile/near/243974293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20on.20_profile.html#243974293">(Jun 25 2021 at 21:40)</a>:</h4>
<p>Servers aren't required to support _profile at all and may also have limitations on which profiles they support tracking and searching against.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
