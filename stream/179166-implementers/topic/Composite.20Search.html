---
layout: page
title: "FHIR Chat  · Composite Search · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html">Composite Search</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="222349948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222349948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222349948">(Jan 11 2021 at 20:01)</a>:</h4>
<p>At <a href="http://build.fhir.org/search.html#combining">http://build.fhir.org/search.html#combining</a>, there is example of composite search with multiple parameters <code>GET [base]/Group?characteristic-value=gender$mixed,owner$Eve</code>. Is this returns <code>gender=mixed OR owner=Eve</code> or <code>gender=mixed AND owner=Eve</code>?</p>



<a name="222357277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222357277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222357277">(Jan 11 2021 at 20:59)</a>:</h4>
<p>Hmm, found an old post <a href="#narrow/stream/179166-implementers/topic/Search.20with.20OR.20parameters">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Search.20with.20OR.20parameters</a> which indicate this is OR logic. <br>
I think for AND, I have to say</p>
<div class="codehilite"><pre><span></span><code> [base]/Group?characteristic-value=gender$mixed&amp;characteristic-value=owner$Eve
</code></pre></div>
<p>Is that correct?</p>



<a name="222443583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222443583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222443583">(Jan 12 2021 at 15:08)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191372">@René Spronk</span> . Then the next question is how do I put that AND logic into chaining search. Ex, I would like to get all Conditions for a group that have both mixed gender AND owned by Eve?</p>
<div class="codehilite"><pre><span></span><code>GET [base]/Condition?subject:Group.characteristic-value=gender$mixed&amp;subject:Group.characteristic-value=owner$Eve
</code></pre></div>
<p>Is this correct? Or that returns union of Conditions from two separate groups<br>
I am little bit confused by the comments that </p>
<blockquote>
<p>Note that chained parameters are applied independently to the target resource</p>
</blockquote>



<a name="222446874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222446874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222446874">(Jan 12 2021 at 15:29)</a>:</h4>
<p>You may have to test this - there are some edge cases where the logic works in unexpected ways. I'm unable to make a definite statement either way. <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> ?</p>



<a name="222463104"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222463104" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222463104">(Jan 12 2021 at 17:09)</a>:</h4>
<p>Each search criteria separated by &amp; is evaluated independently.  If you want multiple conditions to hold on a chained resource, you need one of the following approaches:</p>
<ul>
<li>a composite search criteria on the target resource (e.g. code-value-x on Observation) or you need to look</li>
<li>use _filter or graphql</li>
<li>break it into multiple queries</li>
</ul>



<a name="222464933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222464933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222464933">(Jan 12 2021 at 17:21)</a>:</h4>
<p>I am trying to figure out the logic behind this.<br>
<code>Patient?language=FR&amp;language=EN</code> is an INTERSECTION of two criteria (Patient speak both FR and EN)<br>
<code>Patient?general-practitioner.name=Joe&amp;general-practitioner.address-state=MN</code> is an UNION of the two critera<br>
Why there is such difference?</p>



<a name="222465464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222465464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222465464">(Jan 12 2021 at 17:25)</a>:</h4>
<p>Both criteria are 'and'. The difference is that the 'and' is outside the join, not inside, so the 'general-practitioner' is not necessarily matching the same one in both clauses.</p>



<a name="222466346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222466346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222466346">(Jan 12 2021 at 17:31)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="197072">@Paul Church</span> Can you explain a little bit more? That has confused me for a long time.</p>



<a name="222466484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222466484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222466484">(Jan 12 2021 at 17:32)</a>:</h4>
<p>FHIR search doesn't have a way to express <code>Patient?general-practitioner.(name=Joe&amp;address-state=MN)</code></p>



<a name="222466523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222466523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222466523">(Jan 12 2021 at 17:33)</a>:</h4>
<p>(leaving aside alternate query formats like _filter)</p>



<a name="222466622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222466622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222466622">(Jan 12 2021 at 17:33)</a>:</h4>
<p>If general-practitioner had only one value, then it would be the same.</p>



<a name="222474289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222474289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222474289">(Jan 12 2021 at 18:29)</a>:</h4>
<p>The intersection is "Patients who have a GP with a name of Joe" and "Patients who have a GP with an address in Minnesota", not "Patients who have a GP whose name is Joe and address is in Minnesota"</p>



<a name="222474390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222474390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222474390">(Jan 12 2021 at 18:30)</a>:</h4>
<p>Because patients can have multiple GPs, the reality of that difference can have a significant impact on results</p>



<a name="222474572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222474572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222474572">(Jan 12 2021 at 18:31)</a>:</h4>
<p>What I am trying to understand is:<br>
We know that <code>Patient?language=FR&amp;language=EN</code> results {Patient?language=FR} INTERSECT {Patient?Language=EN}<br>
then why <code>Patient?general-practitioner.name=Joe&amp;general-practitioner.address-state=MN</code> does NOT result as {Patient?general-practitioner.name=Joe} INTERSECT {Patient?general-practitioner.address-state=MN}<br>
Is there anything that I missed here?</p>



<a name="222474684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222474684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222474684">(Jan 12 2021 at 18:32)</a>:</h4>
<p>it does result in that intersection</p>



<a name="222474936"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222474936" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222474936">(Jan 12 2021 at 18:34)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> The last sentence is what I missed! A patient could have multiple GP.</p>



<a name="222476756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222476756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222476756">(Jan 12 2021 at 18:47)</a>:</h4>
<p>Though this does not address the problem on my hand. I need to find conditions for a certain group and each group has multiple characteristics, such as "gender=male, age in [21,30], location=Chicago". I need to find a way to do the search. Looks like I have to create an operation to do that.</p>



<a name="222486916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222486916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222486916">(Jan 12 2021 at 20:05)</a>:</h4>
<p>It's that or _filter or graphql or multiple queries</p>



<a name="222500469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222500469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222500469">(Jan 12 2021 at 21:57)</a>:</h4>
<p>Another question, the Group.characteristic search parameter is token type. How do I search CodeableConcept with only text, like</p>
<div class="codehilite"><pre><span></span><code>    &quot;code&quot;:[
      &quot;text&quot;: &quot;gender&quot;
    ]
</code></pre></div>



<a name="222532810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222532810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222532810">(Jan 13 2021 at 04:39)</a>:</h4>
<p>the 'text' qualifier is supported on token search parameters</p>



<a name="222532819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/222532819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#222532819">(Jan 13 2021 at 04:39)</a>:</h4>
<p>so <code>foo:text=gender</code></p>



<a name="244448203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244448203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chetan Jain <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244448203">(Jun 30 2021 at 16:08)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Could you provide some example or do we have any public server available which supports _filter and which we can explore?  Thanks!!</p>



<a name="244467638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244467638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244467638">(Jun 30 2021 at 18:25)</a>:</h4>
<p><a href="http://test.fhir.org">test.fhir.org</a> supports _filter.</p>



<a name="244535070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244535070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chetan Jain <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244535070">(Jul 01 2021 at 08:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  <a href="http://test.fhir.org">test.fhir.org</a> seems to be down.</p>



<a name="244549802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244549802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244549802">(Jul 01 2021 at 11:10)</a>:</h4>
<p>Yup, it's down - see <a href="https://stats.uptimerobot.com/9DArDu1Jo">https://stats.uptimerobot.com/9DArDu1Jo</a> for stats.</p>



<a name="244579060"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244579060" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244579060">(Jul 01 2021 at 14:52)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="244579827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244579827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244579827">(Jul 01 2021 at 14:57)</a>:</h4>
<p>on it</p>



<a name="244580176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244580176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244580176">(Jul 01 2021 at 14:59)</a>:</h4>
<p>it'</p>



<a name="244580202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244580202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244580202">(Jul 01 2021 at 15:00)</a>:</h4>
<p>it doesn't appear to be down for me</p>



<a name="244580257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244580257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244580257">(Jul 01 2021 at 15:00)</a>:</h4>
<p><a href="http://test.fhir.org/">http://test.fhir.org/</a></p>



<a name="244580328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244580328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244580328">(Jul 01 2021 at 15:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> did you or someone else reset it?</p>



<a name="244617213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244617213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244617213">(Jul 01 2021 at 19:45)</a>:</h4>
<p>I didn't do anything</p>



<a name="244617383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composite%20Search/near/244617383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composite.20Search.html#244617383">(Jul 01 2021 at 19:47)</a>:</h4>
<p>I did</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
