---
layout: page
title: "FHIR Chat  · Custom Search Across Resource Types · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Custom.20Search.20Across.20Resource.20Types.html">Custom Search Across Resource Types</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153901683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Custom%20Search%20Across%20Resource%20Types/near/153901683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Broadbent <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Custom.20Search.20Across.20Resource.20Types.html#153901683">(Aug 10 2017 at 16:59)</a>:</h4>
<p>Hey all,  is there a way to author a single search parameter which performs the same search on different resource types?  </p>
<p>E.g. I have an extension which references an organisation, where the organisation acts as the custodians for the data.  The data can in theory be any resource type which can have extensions added to them.</p>
<p>It looks like you can set the 'base' property of SearchParameter to be multiple things.  Is the best way to just list all resource types?  If so, what would the search expression look like?  All the examples I've seen so far are scoped to a single resource type, so the expression usually looks like this: Basic.extension('url').</p>
<p>The documentation has a section on it under 'SearchParameter on Extensions':<br>
<a href="https://www.hl7.org/fhir/searchparameter.html#srch" target="_blank" title="https://www.hl7.org/fhir/searchparameter.html#srch">https://www.hl7.org/fhir/searchparameter.html#srch</a></p>
<p>Where it states that multiple resource searches should use the base 'DomainResource', and that the xpath should be set to the extension url.  However it doesn't say what you're supposed to do with the expression.  If you omit the expression (in HAPI at least), the server returns an error.</p>



<a name="153901805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Custom%20Search%20Across%20Resource%20Types/near/153901805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Custom.20Search.20Across.20Resource.20Types.html#153901805">(Aug 10 2017 at 21:25)</a>:</h4>
<p>use a FHIRPath expression. Here's an example:</p>



<a name="153901806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Custom%20Search%20Across%20Resource%20Types/near/153901806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Custom.20Search.20Across.20Resource.20Types.html#153901806">(Aug 10 2017 at 21:27)</a>:</h4>
<p>FamilyMemberHistory.condition.code | DeviceRequest.code.as(CodeableConcept) | AllergyIntolerance.code | AllergyIntolerance.reaction.substance | Procedure.code | List.code | ProcedureRequest.code | Observation.code | DiagnosticReport.code | Condition.code</p>



<a name="153901807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Custom%20Search%20Across%20Resource%20Types/near/153901807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Custom.20Search.20Across.20Resource.20Types.html#153901807">(Aug 10 2017 at 21:27)</a>:</h4>
<p>see <a href="http://hl7.org/fhir/searchparameter-registry.html" target="_blank" title="http://hl7.org/fhir/searchparameter-registry.html">http://hl7.org/fhir/searchparameter-registry.html</a></p>



<a name="153902079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Custom%20Search%20Across%20Resource%20Types/near/153902079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Broadbent <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Custom.20Search.20Across.20Resource.20Types.html#153902079">(Aug 11 2017 at 09:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Thanks for your response.</p>
<p>Sorry but I'm having a little trouble understanding your example, do you mean that string would be the value of the 'expression' node?  I've just tried uploading the following, but I get an error that 'All paths in a single SearchParameter must match the same resource type'.</p>
<p>&lt;SearchParameter xmlns="<a href="http://hl7.org/fhir" target="_blank" title="http://hl7.org/fhir">http://hl7.org/fhir</a>"&gt;<br>
    &lt;name value="Annotation"/&gt;<br>
    &lt;status value="active"/&gt;<br>
    &lt;code value="annotation"/&gt;<br>
    &lt;base value="DomainResource"/&gt;<br>
    &lt;type value="reference"/&gt;<br>
    &lt;expression value="Basic.extension('http://www.elabdev.org/StructureDefinition/AnnotationRef')|Patient.extension('http://www.elabdev.org/StructureDefinition/AnnotationRef')"/&gt;<br>
    &lt;xpathUsage value="normal"/&gt;<br>
 &lt;/SearchParameter&gt;</p>



<a name="153902124"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Custom%20Search%20Across%20Resource%20Types/near/153902124" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Custom.20Search.20Across.20Resource.20Types.html#153902124">(Aug 11 2017 at 11:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> - this looks like an issue in HAPI one way or another</p>



<a name="153902145"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Custom%20Search%20Across%20Resource%20Types/near/153902145" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Custom.20Search.20Across.20Resource.20Types.html#153902145">(Aug 11 2017 at 12:23)</a>:</h4>
<p>Agreed.</p>
<p><span class="user-mention" data-user-id="192995">@Andrew Broadbent</span> can you file a bug in the HAPI FHIR issue tracker about this?</p>



<a name="153902146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Custom%20Search%20Across%20Resource%20Types/near/153902146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Broadbent <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Custom.20Search.20Across.20Resource.20Types.html#153902146">(Aug 11 2017 at 12:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span>  Sure no problem.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
