---
layout: page
title: "FHIR Chat  · Inline Contained resources? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html">Inline Contained resources?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153855458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153855458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153855458">(Nov 04 2016 at 05:14)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=6800" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=6800">GF#6800</a> - any comments on this task?</p>



<a name="153855459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153855459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153855459">(Nov 04 2016 at 06:00)</a>:</h4>
<p>This is very convenient. I think, it could be used for representation not only contained but any referenced resources (for example when you do search with _include/_revinclude). In aidbox we decided to implement special parameter in operations, which makes server inline all resolvable refs in bundle/resource. </p>



<a name="153855461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153855461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153855461">(Nov 04 2016 at 06:12)</a>:</h4>
<p>have you looked at the _history operation? that's pretty much what it is </p>



<a name="153855462"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153855462" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153855462">(Nov 04 2016 at 06:14)</a>:</h4>
<p><span class="user-mention" data-user-email="grahame@healthintersections.com.au">@Grahame Grieve</span> Is this message related to transaction log?</p>



<a name="153855465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153855465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153855465">(Nov 04 2016 at 06:20)</a>:</h4>
<p>yes oops</p>



<a name="153855644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153855644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153855644">(Nov 06 2016 at 14:57)</a>:</h4>
<p>I'm not a fan of inlined contained resources because you still have to handle resolution if the contained resource is referenced from multiple places.  It also makes finding where a referenced resource lives much harder if there can be multiple references.  And it would provide a reason for some to abuse containment because they like nesting.</p>



<a name="153855670"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153855670" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153855670">(Nov 06 2016 at 22:28)</a>:</h4>
<p>but references from multiple places is very definitely an edge case </p>



<a name="153855735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153855735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153855735">(Nov 07 2016 at 11:45)</a>:</h4>
<p>So instead of:</p>
<p>&lt;Resource&gt;<br>
  ...<br>
  &lt;patient reference="uri"/&gt;<br>
  ...<br>
&lt;/Resource&gt;</p>
<p>we'd have </p>
<p>&lt;Resource&gt;<br>
  ...<br>
  &lt;patient&gt;<br>
     ....<br>
     &lt;birthdate value="2001-04-18"&gt;<br>
     ....<br>
  &lt;/patient&gt;<br>
  ...<br>
&lt;/Resource&gt;    </p>



<a name="153855749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153855749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153855749">(Nov 07 2016 at 12:07)</a>:</h4>
<p>yes</p>



<a name="153855855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153855855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153855855">(Nov 08 2016 at 02:58)</a>:</h4>
<p>References from multiple places is certainly an edge case, but it's one that can't be ruled out and that systems will therefore need to support - which takes away much of the benefit of inlining and adds significant complexity.</p>



<a name="153856287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856287">(Nov 10 2016 at 07:56)</a>:</h4>
<p>If you are doing resource inlining why wouldn't it be inlined everywhere it is referenced?</p>



<a name="153856365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856365">(Nov 10 2016 at 19:02)</a>:</h4>
<p>size? logical fact?</p>



<a name="153856386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856386">(Nov 10 2016 at 20:17)</a>:</h4>
<p>Looping? :)</p>



<a name="153856518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Knee <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856518">(Nov 11 2016 at 12:58)</a>:</h4>
<p>&lt;Flag&gt;<br>
                &lt;id value="7cb73a48-090d-469a-a2b2-04f1e6b11ea3"/&gt;<br>
                &lt;meta&gt;<br>
                    &lt;profile value="http://fhir.nhs.net/StructureDefinition/spine-ris-flag-1-0"/&gt;<br>
                &lt;/meta&gt;<br>
                &lt;!--contained patient resource--&gt;<br>
                &lt;contained&gt;<br>
                    &lt;Patient&gt;<br>
                        &lt;id value="20daadee-26e1-4d6a-9e6a-7f4af9b58877"/&gt;<br>
                        &lt;meta&gt;<br>
                            &lt;profile value="http://fhir.nhs.net/StructureDefinition/spine-ris-patient-1-0"/&gt;<br>
                        &lt;/meta&gt;<br>
                        &lt;identifier&gt;<br>
                            &lt;system value="http://fhir.nhs.net/Id/nhs-number"/&gt;<br>
                            &lt;value value="1234567890"/&gt;<br>
                        &lt;/identifier&gt;<br>
                        &lt;!--DOB added--&gt;<br>
                        &lt;birthDate value="2005-01-01"/&gt;<br>
                        &lt;!--GP Organization referenced.--&gt;<br>
                        &lt;careProvider&gt;<br>
                            &lt;reference value="#79600119-ebaf-4362-bb89-d473a33b1675"/&gt;<br>
                        &lt;/careProvider&gt;<br>
                    &lt;/Patient&gt;<br>
                &lt;/contained&gt;<br>
                &lt;!--sibling contained GP Organization resource--&gt;<br>
                &lt;contained&gt;<br>
                    &lt;Organization&gt;<br>
                        &lt;id value="79600119-ebaf-4362-bb89-d473a33b1675"/&gt;<br>
                        &lt;meta&gt;<br>
                            &lt;profile value="http://fhir.nhs.net/StructureDefinition/gpconnect-organization-1"/&gt;<br>
                        &lt;/meta&gt;<br>
                        &lt;identifier&gt;<br>
                            &lt;system value="http://fhir.nhs.net/Id/ods-organization-code"/&gt;<br>
                            &lt;!--GP Practice Code--&gt;<br>
                            &lt;value value="B86022"/&gt;<br>
                        &lt;/identifier&gt;<br>
                        &lt;!--GP Practice Name--&gt;<br>
                        &lt;name value="Wood Town GP practice"/&gt;<br>
                    &lt;/Organization&gt;<br>
                &lt;/contained&gt;<br>
                &lt;status value="active"/&gt;<br>
                &lt;period&gt;<br>
                    &lt;start value="2015-02-04"/&gt;<br>
                &lt;/period&gt;<br>
                &lt;subject&gt;<br>
                    &lt;reference value="#20daadee-26e1-4d6a-9e6a-7f4af9b58877"/&gt;<br>
                &lt;/subject&gt;<br>
                &lt;code&gt;<br>
                    &lt;coding&gt;<br>
                        &lt;system value="http://fhir.nhs.net/ValueSet/risk-indicator-type-1-0"/&gt;<br>
                        &lt;code value="FGM"/&gt;<br>
                    &lt;/coding&gt;<br>
                &lt;/code&gt;<br>
            &lt;/Flag&gt;</p>



<a name="153856519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Knee <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856519">(Nov 11 2016 at 13:04)</a>:</h4>
<p>Question relating to example Flag resource just posted. Can a resource contain 2 sibling resources with an internal reference from one contained sibling to the 2nd  contained sibling resource? See example. I think this is legal based on FHIR standard 'A contained resource SHALL only be included in a resource if something in that resource (potentially another contained resource) has a reference to it'. Can anyone confirm this is legal FHIR? Thanks</p>



<a name="153856526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856526">(Nov 11 2016 at 13:55)</a>:</h4>
<p><span class="user-mention" data-user-id="192515">@Simon Knee</span> Yes, that's legal.  Contained resources can point to each other</p>



<a name="153856581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856581">(Nov 11 2016 at 18:29)</a>:</h4>
<p><span class="user-mention" data-user-id="192515">@Simon Knee</span> but if you follow NRLS project that contained Patient resource isn't needed. </p>



<a name="153856582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856582">(Nov 11 2016 at 18:29)</a>:</h4>
<p>&lt;Flag&gt;<br>
&lt;Subject value="<a href="https://pds.proxy.nhs.net/Patient/1234567890" target="_blank" title="https://pds.proxy.nhs.net/Patient/1234567890">https://pds.proxy.nhs.net/Patient/1234567890</a>" /&gt;<br>
&lt;code&gt;<br>
&lt;coding&gt;<br>
&lt;system value="http://fhir.nhs.net/ValueSet/risk-indicator-type-1-0"/&gt;<br>
&lt;code value="FGM"/&gt;<br>
&lt;/coding&gt;<br>
&lt;/code&gt;<br>
&lt;/Flag&gt;</p>



<a name="153856594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856594">(Nov 11 2016 at 19:42)</a>:</h4>
<p>That isn't a valid construction, would need to be:<br>
&lt;Flag&gt;<br>
   &lt;status value="active"/&gt;<br>
   &lt;subject&gt;<br>
      &lt;reference value="https://pds.proxy.nhs.net/Patient/1234567890"/&gt;<br>
   &lt;/subject&gt;<br>
   &lt;code&gt;<br>
      ....<br>
   &lt;/code&gt;<br>
&lt;/Flag&gt;</p>



<a name="153856597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856597">(Nov 11 2016 at 19:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> So is your view that rather than placing one instance of all contained resources in 'contained' inlined means that we place one instance in a place of use with all other places of use using a local reference? Then rather than building an internal reference table of the contained resources directly from 'contained' we would first have to preprocess the entire tree to build the table of contained resources from the supplied instance. More work and no real space or complexity saving.</p>



<a name="153856607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856607">(Nov 11 2016 at 20:40)</a>:</h4>
<p>inlining contained resources certainly makes reference resolution much more complicated if you're still going to allow references to contained resources. yes</p>



<a name="153856608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856608">(Nov 11 2016 at 20:42)</a>:</h4>
<p>note that this was discussed on the FHIR-I call, and the task was closed. The outcome of our discussion is that inlining contained resources would create many issues, and the practical issues here are not strong. We will work on better aggregation approaches across the RESTful API to reduce the interest in containing resources that don't need to be contained (slightly different issue, but causally related)</p>



<a name="153856681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856681">(Nov 12 2016 at 17:32)</a>:</h4>
<p>Thanks that would be very useful. I'm noticing a increasing number of cases where HL7v3 is being converted to FHIR verbatim and so including a lot of unnecessary information.</p>



<a name="153856709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856709">(Nov 13 2016 at 10:57)</a>:</h4>
<p>that's an occupational hazard in v3 countries. In my country, you'd replace 'v3' with 'cda'</p>



<a name="153856831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Knee <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856831">(Nov 14 2016 at 10:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Thanks for quick FHIR response. </p>



<a name="153856832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simon Knee <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856832">(Nov 14 2016 at 10:06)</a>:</h4>
<p><span class="user-mention" data-user-id="194909">@Kevin Mayfield</span> the example I included was for the FGM messaging interface. I understand the e-RS project were discussing using inline contained resources - did this get agreement?</p>



<a name="153856834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Inline%20Contained%20resources%3F/near/153856834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Inline.20Contained.20resources.3F.html#153856834">(Nov 14 2016 at 10:56)</a>:</h4>
<p><span class="user-mention" data-user-id="192515">@Simon Knee</span>   It is at the moment. We've not officially fed back comment though. The main issue for us is it's differences from NRLS version of DocumentReference. We will probably have to convert e-RS DocumentReference to SNOMED and remove the inline resources (or convert the NRLS version). </p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
