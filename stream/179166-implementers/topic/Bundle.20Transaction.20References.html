---
layout: page
title: "FHIR Chat  · Bundle Transaction References · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html">Bundle Transaction References</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153860262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860262">(Dec 04 2016 at 22:45)</a>:</h4>
<p>Let's say I want to submit several DiagnosticRequests grouped by RequisitionId. </p>
<p>I build a Transaction Bundle where I have all the DiagReqs all with the same RequisitionId and each entry with Request = POST. Everything in order so far. </p>
<p>Now according to <a href="http://build.fhir.org/request.html#requisitionid" target="_blank" title="http://build.fhir.org/request.html#requisitionid">http://build.fhir.org/request.html#requisitionid</a> "common information (patient/practitioner/authoredOn) can be seen by examining any of the Request instances that share that requisitionId" so I put a contained patient in every DiagReq. </p>
<p>Could I add a Patient entry on the bundle without specifying that it be part of the transaction, but only as a common resource to other entries in the bundle?</p>



<a name="153860263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860263">(Dec 04 2016 at 22:57)</a>:</h4>
<p>Assume you mean a pateint resource... yes</p>



<a name="153860265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860265">(Dec 04 2016 at 23:07)</a>:</h4>
<p>Yes, a Patient resource. Great, thanks. </p>



<a name="153860266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860266">(Dec 04 2016 at 23:07)</a>:</h4>
<p>Now, when I add that patient to the bundle, can I still keep the type as Transaction or does it change to Collection? I ask because <a href="http://build.fhir.org/bundle.html#transaction" target="_blank" title="http://build.fhir.org/bundle.html#transaction">http://build.fhir.org/bundle.html#transaction</a> says that if I don't include a Request for an entry "server must infer whether this is a create or an update"</p>



<a name="153860267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860267">(Dec 04 2016 at 23:08)</a>:</h4>
<p>And I don't want that Patient to be created or updated, just serves the purpose of a reference to multiple other entries.</p>



<a name="153860272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860272">(Dec 04 2016 at 23:15)</a>:</h4>
<p>you need to read about conditional creates. </p>



<a name="153860289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860289">(Dec 04 2016 at 23:45)</a>:</h4>
<p>I think I understand how conditional actions work, the thing is that in this scenario for example I'm putting a Patient entry to serve as a reference for all other entries because I don't have a Patient resource. I guess I could return something like "404 Not Found - resource type not supported, or not a FHIR end-point" according to <a href="http://build.fhir.org/http.html#create" target="_blank" title="http://build.fhir.org/http.html#create">http://build.fhir.org/http.html#create</a> but I'd rather not have to deal with that if possible.</p>



<a name="153860293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860293">(Dec 04 2016 at 23:58)</a>:</h4>
<p>I'm not sure what you mean by patient entry vs patient resource in that sentence</p>



<a name="153860296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860296">(Dec 05 2016 at 00:02)</a>:</h4>
<p>The bundle has 2 diagnosticRequests entries,  both of those requests have the same patient subject. Since I don't support a patient/ resource I'm putting the entire patient inside a container on each diagReq.</p>



<a name="153860297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860297">(Dec 05 2016 at 00:02)</a>:</h4>
<p>What I want to do is add another entry to the bundle that the diagRequests reference using <a href="http://build.fhir.org/bundle.html#references" target="_blank" title="http://build.fhir.org/bundle.html#references">http://build.fhir.org/bundle.html#references</a></p>



<a name="153860298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860298">(Dec 05 2016 at 00:03)</a>:</h4>
<p>My question is that I want the bundle to be a transaction that only encompasses the diagRequests.</p>



<a name="153860300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860300">(Dec 05 2016 at 00:04)</a>:</h4>
<p>if you're using contained patient resources, then every request will have to contain the same patient resource</p>



<a name="153860303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860303">(Dec 05 2016 at 00:09)</a>:</h4>
<p>Ok, that contradicts what <span class="user-mention" data-user-id="191401">@Eric Haas</span> said earlier. </p>
<p><a href="http://build.fhir.org/bundle.html#references" target="_blank" title="http://build.fhir.org/bundle.html#references">http://build.fhir.org/bundle.html#references</a> allows me to reference a Patient bundle entry from within DiagReqs entries. What makes it a little confusing is that I only want the DiagReqs to be part of the transaction. The Patient bundle entry is just a convenience so that I don't have to repeat the same patient within every Req.</p>



<a name="153860304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860304">(Dec 05 2016 at 00:10)</a>:</h4>
<p>I don't think it was clear that you were talking about contained resources when Eric answered</p>



<a name="153860307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860307">(Dec 05 2016 at 00:12)</a>:</h4>
<p>Oh</p>



<a name="153860309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860309">(Dec 05 2016 at 00:13)</a>:</h4>
<p>I don't quite understand yet.<br>
- if you have contained patient resources, then each resource has to have it's own contained patient resource<br>
- if you know the patient, then you can just put the patient by reference in each request, and there's no need to include the patient resource in the transaction at all<br>
- if the pateint might not exist, then you have to haev it in the transaction</p>



<a name="153860328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860328">(Dec 05 2016 at 00:19)</a>:</h4>
<p>So we don't keep track of patients. Patient is only valid within the context of the DiagReq that references it. </p>
<p>So I already modeled a bundle that has multiple Reqs (associated by same RequisitionId) that each contain the same patient resource. What I was looking for is a way to avoid repeating that information in every req. Because of the way requests are grouped I might end up receiving a bundle of 10 requests all containing the same repeated info (Patient, Coverage for those DiagReqs)</p>



<a name="153860329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860329">(Dec 05 2016 at 00:20)</a>:</h4>
<p>I thought adding an extra Patient bundle entry might solve this for us.</p>



<a name="153860334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860334">(Dec 05 2016 at 00:23)</a>:</h4>
<p>no, there's no way to resolve this if you're using contained patient resources. Whenever a system processes any of the DR resources, it will have to find the patient. A contained resource is saying, 'there's no way to do identify the patient such that you can look somewhere else' </p>



<a name="153860335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860335">(Dec 05 2016 at 00:23)</a>:</h4>
<p>Size of each bundle could get unnecessarily big</p>



<a name="153860336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860336">(Dec 05 2016 at 00:23)</a>:</h4>
<p>if you're actually able to identify the patient, but just avoiding doing so to save work, what you are discovering is that you can only move complexity around, you can't make it go away</p>



<a name="153860339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860339">(Dec 05 2016 at 00:29)</a>:</h4>
<p>I cannot identify the patient outside of those requests, but I could identify it within the bundle then that would save me space and some complexity. Even if end up not persisting the Patient independently.</p>



<a name="153860341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860341">(Dec 05 2016 at 00:30)</a>:</h4>
<p>I looked at <a href="http://build.fhir.org/requestgroup.html" target="_blank" title="http://build.fhir.org/requestgroup.html">http://build.fhir.org/requestgroup.html</a> but it doesn't seem like it would help.</p>



<a name="153860343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860343">(Dec 05 2016 at 00:31)</a>:</h4>
<p>you can't, and that's deliberate. You could save your self complexity, but you're just handing it on a magnified format to downstream systems. </p>



<a name="153860344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860344">(Dec 05 2016 at 00:32)</a>:</h4>
<p>if you want to use contained patients, you'll have to repeat it in each separatable bit</p>



<a name="153860347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860347">(Dec 05 2016 at 00:36)</a>:</h4>
<p>Understood. I appreciate your help. I'll present an example to our client, but we'll probably just come up with our own model and not use FHIR for this use case. I think the root of this is having to separate Requests.</p>



<a name="153860352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860352">(Dec 05 2016 at 00:46)</a>:</h4>
<p><a href="/user_uploads/10155/J8hXTVPokVQrKX9x8JmJ4Ifm/bundleRef.json" target="_blank" title="bundleRef.json">bundleRef.json</a> <a href="/user_uploads/10155/Ak7DQHi9ZWkKd-mrpFNOR9o7/containedRef.json" target="_blank" title="containedRef.json">containedRef.json</a> </p>



<a name="153860353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860353">(Dec 05 2016 at 00:46)</a>:</h4>
<p>Those are the 2 different approaches, and so to confirm only containedRef.json is valid?</p>



<a name="153860355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860355">(Dec 05 2016 at 00:55)</a>:</h4>
<p>bundleRef.json looks valid to me. But you've said that you don't want to create or reference a patient. I don't understand what you really want with the patient resource. Is there definitive resource that describes the patient?</p>



<a name="153860356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860356">(Dec 05 2016 at 00:55)</a>:</h4>
<p>you look like you have enough identification to properly identify the patient resource</p>



<a name="153860362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860362">(Dec 05 2016 at 01:18)</a>:</h4>
<p>A practitioner submits several orders to our system, the orders form asks for the patient info. So at that point all we have is N number of orders an the info of the patient, not a link to their system patient resource.</p>



<a name="153860363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860363">(Dec 05 2016 at 01:20)</a>:</h4>
<p>To translate to fhir dstu 2 we would make 1 diagOrder and contain the patient within. Add all the separate orders in the item array and we don't have to repeat anything.</p>



<a name="153860364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860364">(Dec 05 2016 at 01:20)</a>:</h4>
<p>For dstu 3 there doesn't seem a way to not repeat some things because of the need to separate diagReqs</p>



<a name="153860657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860657">(Dec 05 2016 at 13:31)</a>:</h4>
<p>Are you meaning "Contained", or simply "within the Bundle"? It seems the conversation is speaking past eachother. "Contained" is a specific word. You are speaking of an environment without a coordinaed Patient Registry; yet everyone seems to be able to describe (create a Patient object) the patients in a close-enough way. Such that a recipient can look at that, search their local Patient registry, and 'fixup' the content of the Bundle. Right?</p>



<a name="153860665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860665">(Dec 05 2016 at 14:42)</a>:</h4>
<p>We don't have a patient registry. The only information we have about patient is persisted as part of the diag order.</p>



<a name="153860666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860666">(Dec 05 2016 at 14:43)</a>:</h4>
<p>Let's put those approaches behind for a sec.</p>



<a name="153860668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860668">(Dec 05 2016 at 14:45)</a>:</h4>
<p>I have to support an use case where someone sends me N amount of diag orders and the patient info. N orders, 1 patient info.</p>



<a name="153860669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860669">(Dec 05 2016 at 14:45)</a>:</h4>
<p>How would I go about it?</p>



<a name="153860675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860675">(Dec 05 2016 at 14:58)</a>:</h4>
<p>using conditional create - in the Bundle is the Patient and Order. The Order points at the Patient. The recipient 'conditionally' discovers that the Patient is already known, so it just fixes up the references in the Order and doesn't create a new Patient, but does create a new Order. If it is a patient not found, it will create a patient based on the Patient in the Bundle. This is NOT using the FHIR contained concept, this is conditional-create.  <a href="http://build.fhir.org/http.html#cond-update" target="_blank" title="http://build.fhir.org/http.html#cond-update">http://build.fhir.org/http.html#cond-update</a></p>



<a name="153860676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860676">(Dec 05 2016 at 15:02)</a>:</h4>
<p>wrong link.. <a href="http://build.fhir.org/http.html#ccreate" target="_blank" title="http://build.fhir.org/http.html#ccreate">http://build.fhir.org/http.html#ccreate</a></p>



<a name="153860677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860677">(Dec 05 2016 at 15:02)</a>:</h4>
<p>I think this should work for you... right? I think this is a proper use of this...</p>



<a name="153860680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860680">(Dec 05 2016 at 15:08)</a>:</h4>
<p>OK yes, this would definitely work for us. Now, the catch is that we don't have a Patient/ resource.</p>



<a name="153860682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860682">(Dec 05 2016 at 15:09)</a>:</h4>
<p>Main want for putting the Patient in the bundle is so that it's not repeated in each request in the bundle, making the payload over the wire unnecessarily big.</p>



<a name="153860684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860684">(Dec 05 2016 at 15:12)</a>:</h4>
<p>Could I put it in the bundle even if at my end I don't do anything with it other than to persist it within the order?</p>



<a name="153860685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860685">(Dec 05 2016 at 15:12)</a>:</h4>
<p>Man... this would be simple if Requests hadn't been split.</p>



<a name="153860687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860687">(Dec 05 2016 at 15:17)</a>:</h4>
<p>You are the sending side? As I  indicated, you put what you know as the patient into the Bundle with the Order... Or are you the receiving side? For which you need to have some kind of patient registry, even if it is not a FHIR based registry... right?   I don't understand the difficulty.  It is certainly going to need to go in each Bundle... The only solution there, is as Grahame indicated, there needs to be a patient registry (or set of them) that can hold a persistent resource that everyone involved can reference and use.</p>



<a name="153860688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860688">(Dec 05 2016 at 15:18)</a>:</h4>
<p>We are the receiving side, and we don't a have a patient registry.</p>



<a name="153860689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860689">(Dec 05 2016 at 15:19)</a>:</h4>
<p>We only receives orders from practitioners, patient info doesn't matter outside the set of orders received.</p>



<a name="153860690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860690">(Dec 05 2016 at 15:19)</a>:</h4>
<p>Okay.. so then why do you care to have the sender tell you who the patient is? I presume there is some reason to know who the patient is for each Order.</p>



<a name="153860691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevan Riley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860691">(Dec 05 2016 at 15:20)</a>:</h4>
<p>Why can you not store the pat information you have as a Pat Resource, and link to it (using the conditional create to creat as needed)?  This would be for the scop of your Diag Reports and not an authoritative source for pat information outside of that scope.</p>



<a name="153860694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860694">(Dec 05 2016 at 15:21)</a>:</h4>
<p>For billing and shipping purposes. The practitioner orders 3 tests to be performed on patient x (so they send us the patient info) we need to send some sample collection devices to the patient address then run the tests and report to the practitioner. After those actions I no longer care for that patient or its info.</p>



<a name="153860695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860695">(Dec 05 2016 at 15:21)</a>:</h4>
<p>Do you eventually pass the order on to others? As an intermediary, you would have some responsibility for some persistence... even if you used the same condiditional-create trick... internal to your system just keeping the Order and Patent together.   If you are the end of the communications, then I would understand why Contained is interesting as it would work for you. The question comes if you are not the end of the Order communication</p>



<a name="153860696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860696">(Dec 05 2016 at 15:22)</a>:</h4>
<p>If that person ended up going to another Dr and they ordered some tests for us we'd repeat the entire process and that's the expectation</p>



<a name="153860697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860697">(Dec 05 2016 at 15:22)</a>:</h4>
<p>Yes, we are the ones that perform the N amount of orders.</p>



<a name="153860698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860698">(Dec 05 2016 at 15:23)</a>:</h4>
<p>okay, so you 'forget' the Patient in your registry after closing the loop... that is your choice too... nothing demands you remember for infinity.</p>



<a name="153860699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860699">(Dec 05 2016 at 15:23)</a>:</h4>
<p>Right ok. So I could bring in the Patient as part of the bundle, the sender thinks that I might be persisting it as its own resource but I'm really not. And that would be ok.</p>



<a name="153860700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860700">(Dec 05 2016 at 15:24)</a>:</h4>
<p>Is that what you're proposing?</p>



<a name="153860701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860701">(Dec 05 2016 at 15:24)</a>:</h4>
<p>it is common for servers to do purge operations occationally... your SOP simply has a very short purge cycle.</p>



<a name="153860702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860702">(Dec 05 2016 at 15:24)</a>:</h4>
<p>Gotcha</p>



<a name="153860703"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860703" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860703">(Dec 05 2016 at 15:25)</a>:</h4>
<p>you are sending the Order back to the originator, right? So they would like your response to reference the patient THEY declared... right? So really your Patient Registry is just a shadow of all your clients; not really a Patient Registry. This was not clear originally.</p>



<a name="153860704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860704">(Dec 05 2016 at 15:29)</a>:</h4>
<p>perspective is important. I originally understood you to be describing your  situation as the sender of the message, not the recipient. I understood that the sender didn't have a patient registry, but it is you as the recipient that doesn't want to have a patient registry. Is it true that your senders do have their own patient registries? </p>



<a name="153860708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860708">(Dec 05 2016 at 15:37)</a>:</h4>
<p>Well... First, thanks for your attention and help on this use case.</p>
<p>The practitioner sends me the tests they want to run and the patient info, so that I know who to send the collection devices and whom I might charge. What I care for internally is an order that has many tests that they want to run, the prac that ordered them, and the patient the tests are for. When the loop is closed on my end, the Report I send will reference the patient on their system because they do have that registry and they did send the ID with their original payload.</p>
<p>I can't just use a reference to their registry for our operations because it's not a publicly available system, whenever I have to ship something that info needs to be availabe. On DSTU2 DiagnosticOrder was pretty much what we want, an order with line items inside it. In that case we'd ask the practitioner to send the Patient contained within that order and that Order would be self sufficient and have all the info we need. We'd persist it like that. With the new version we have separate DiagnosticRequests (Line items) that are grouped together some other way. Here is where things become difficult.</p>



<a name="153860710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860710">(Dec 05 2016 at 15:41)</a>:</h4>
<p>I'm looking at <a href="http://build.fhir.org/requestgroup.html" target="_blank" title="http://build.fhir.org/requestgroup.html">http://build.fhir.org/requestgroup.html</a> but it seems incomplete... Maybe I'm mis-reading something</p>



<a name="153860737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860737">(Dec 05 2016 at 16:36)</a>:</h4>
<p>A RequestGroup would allow you to put multiple DiagnosticRequests together, but request group is intended for cases where there may be optionality or relationships between the requests that are important.</p>



<a name="153860739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860739">(Dec 05 2016 at 16:37)</a>:</h4>
<p>It seems incomplete because it is in the middle of reconciliation. Though all substantive changes have been applied, there are still documentation changes that need to be made.</p>



<a name="153860740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860740">(Dec 05 2016 at 16:42)</a>:</h4>
<p>Yeah OK. From what I read it did not seem aligned with my use case. I think <span class="user-mention" data-user-id="191404">@John Moehrke</span> helped distill the core issue, but I'm still not 100% on how to tackle it...</p>



<a name="153860742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860742">(Dec 05 2016 at 16:46)</a>:</h4>
<p>I'm thinkin Graham's statement that I have to contain the shared information in each Request might be the only way to go. Which might not be acceptable unfortunately.</p>



<a name="153860755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860755">(Dec 05 2016 at 17:24)</a>:</h4>
<p>I think Grahame was speaking of "Contained". THat is where you put the content of Patient inside Order. With "Contained" neither you nor the sender can EVER remove the Patient information, even if you or they have a real Patient registry. The "Contained" Patient must stay inside the Order. This presents real problems for a system that has both Patient and Order as RESTful implementations.</p>



<a name="153860756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860756">(Dec 05 2016 at 17:28)</a>:</h4>
<p>So what do you recommend? We don't have Patient and Order.</p>



<a name="153860761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860761">(Dec 05 2016 at 17:32)</a>:</h4>
<p>I am trying to get clear that there are two totally different things: "Contained" is a copy of Patient inside Order, and can't be disconnected. "In the Bundle" with reference from Order to Patient; is more flexible. My recommendation is "In the Bundle", as I pointed out before. It is just not the same thing as "Contained".</p>



<a name="153860763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860763">(Dec 05 2016 at 17:33)</a>:</h4>
<p>Both are very valuable concepts... I have used both in the Profiling work I have done. </p>



<a name="153860769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860769">(Dec 05 2016 at 18:02)</a>:</h4>
<p>I understand the differe, and I agree, "In the bundle" is what I'd prefer. But doesn't that force us to create a /Patient/ resource? Even if short-lived.</p>



<a name="153860843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860843">(Dec 05 2016 at 19:49)</a>:</h4>
<p>I read this thread, and I don't understand your rigid statement that you don't have a Paitent resource. I was product lead for an application that did exactly what your doing in my last job before FHIR, and if I tried to implement all that functionality without a table of patients, my product would be a mess, and I would have the same problems you're having as well. So I assume that you do have a patient record, to link tests by patient. </p>



<a name="153860846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860846">(Dec 05 2016 at 19:50)</a>:</h4>
<p>in which case, why not have a patient end point? Your insistence that you don't have proper patient support is creating problems because you don't have proper support for patient</p>



<a name="153860880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860880">(Dec 05 2016 at 20:12)</a>:</h4>
<p>We can consider implementing one, and I'll bring it up. But it seems to me that we'd be doing so just for the sake of FHIR. FHIR DSTU3 to be specific.</p>



<a name="153860885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860885">(Dec 05 2016 at 20:15)</a>:</h4>
<p>Our FHIRless model would be a order with several tests, the patient name and address, and that's it.</p>



<a name="153860965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153860965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153860965">(Dec 05 2016 at 21:04)</a>:</h4>
<p>but you have a patient table, no? </p>



<a name="153861072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861072">(Dec 05 2016 at 23:34)</a>:</h4>
<p>Actually we don't. Just remembered something from our overall design. </p>



<a name="153861073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861073">(Dec 05 2016 at 23:36)</a>:</h4>
<p>What we're building is an API front for an existing back end system that handles these orders. We're building this API to be consumed by other services and figured we will use this one to start adoptin FHIR. </p>



<a name="153861074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861074">(Dec 05 2016 at 23:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> this is where the request group thing doesn't work so well</p>



<a name="153861075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861075">(Dec 05 2016 at 23:37)</a>:</h4>
<p>So the API that we're building in theory should take &lt;whatever FHIR model we decide&gt; and translate it into the backend system model</p>



<a name="153861076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861076">(Dec 05 2016 at 23:37)</a>:</h4>
<p>the only way to make this work neatly is to make the API work the way your data model works:<br>
- a single grouping request<br>
- each item is a contained resource<br>
- there's a single contained patient that all the contained resources reference</p>



<a name="153861077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861077">(Dec 05 2016 at 23:38)</a>:</h4>
<p>Which is something like what I've stated before: order {practitionerRequester, testsToBePerformed, patientToSendSampleContainersTo}</p>



<a name="153861078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861078">(Dec 05 2016 at 23:38)</a>:</h4>
<p>Yes!</p>



<a name="153861079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861079">(Dec 05 2016 at 23:38)</a>:</h4>
<p>Exactly what we thought we had with DiagnosticOrder from DSTU 2</p>



<a name="153861081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861081">(Dec 05 2016 at 23:39)</a>:</h4>
<p>well, there's a redirection point been introduced, so it's a little more verbose. I think </p>



<a name="153861082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861082">(Dec 05 2016 at 23:39)</a>:</h4>
<p>How do you imagine we could do this with individual DiagRequests</p>



<a name="153861083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861083">(Dec 05 2016 at 23:39)</a>:</h4>
<p>?</p>



<a name="153861084"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861084" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861084">(Dec 05 2016 at 23:42)</a>:</h4>
<div class="codehilite"><pre>RequestGroup
   contained
     patient details * 1
     DiagnosticRequest * n for each item
        status
        intent
        code
        subject - reference to contained patient
  identifier - id for request
  subject - reference to contained patient
</pre></div>



<a name="153861085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861085">(Dec 05 2016 at 23:42)</a>:</h4>
<p>It seems to me that we could still do something like expect bundles with: 1 patient, 1 practitioner, N diagRequests all referencing the previous. Our API would aggregate all of this into what the backend takes and call it a day. No?</p>



<a name="153861086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861086">(Dec 05 2016 at 23:43)</a>:</h4>
<p>Oh I see...</p>



<a name="153861087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861087">(Dec 05 2016 at 23:44)</a>:</h4>
<p>So you suggest we put the individual diagReqs contained within the group. I thought that's what the "action" element was for, and it just seemed off...</p>



<a name="153861088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861088">(Dec 05 2016 at 23:46)</a>:</h4>
<p>which action element?</p>



<a name="153861089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861089">(Dec 05 2016 at 23:46)</a>:</h4>
<p><a href="http://build.fhir.org/requestgroup-definitions.html#RequestGroup.action" target="_blank" title="http://build.fhir.org/requestgroup-definitions.html#RequestGroup.action">http://build.fhir.org/requestgroup-definitions.html#RequestGroup.action</a></p>



<a name="153861090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861090">(Dec 05 2016 at 23:46)</a>:</h4>
<p>In the RequestGroup, you'd have to do that, otherwise your resource wouldn't reference all the contained resources.</p>



<a name="153861091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861091">(Dec 05 2016 at 23:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> I'm not sure I follow</p>



<a name="153861092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861092">(Dec 05 2016 at 23:47)</a>:</h4>
<p>yes, you'd have to reference each of the contained diagnosticRequest resources in RequestGroup.action.resource</p>



<a name="153861093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861093">(Dec 05 2016 at 23:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> should requestGroup be in workflow module?</p>



<a name="153861094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861094">(Dec 05 2016 at 23:49)</a>:</h4>
<p>There are several comments related to that question. Feedback from CDS was that it's hard to talk about it without all the context from either direction, so that regardless of what module it's in, you'd need explanatory and cross-referencing text in both.</p>



<a name="153861095"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861095" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861095">(Dec 05 2016 at 23:49)</a>:</h4>
<p>Hehe ok so requestGroup.action.resource -&gt; requestGroup.contained.[n]diagRequest<br>
and requestGroup.contained.[n]diagRequest.subject -&gt; requestGroup.contained.patient</p>



<a name="153861096"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861096" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861096">(Dec 05 2016 at 23:49)</a>:</h4>
<p>yes</p>



<a name="153861097"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861097" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861097">(Dec 05 2016 at 23:49)</a>:</h4>
<p>Think I got it.</p>



<a name="153861098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861098">(Dec 05 2016 at 23:50)</a>:</h4>
<p>RequestGroup is intended for grouping a bunch of pieces together that are interdependent - and it becomes the only request that has a status.  To just group things together and say "these are part of the same lab order", you'd use requisition id or Task.</p>



<a name="153861099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861099">(Dec 05 2016 at 23:51)</a>:</h4>
<p>Personally what's your take on using this approach? RequestGroup seems somewhat subject to change in the near future.</p>



<a name="153861100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861100">(Dec 05 2016 at 23:52)</a>:</h4>
<p>Well... Already kinda went down the path of using RequisitionId but then it seems I kinda HAVE to have a /Patient/ resource for it to work neatly.</p>



<a name="153861101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861101">(Dec 05 2016 at 23:53)</a>:</h4>
<p>I would recommend to use a grouping id, not RequestGroup, but the lack of a coherent patient infrastructure pushes you away from that, since you link patient to the requsest group, not the request items. The consequence of this is that maintaining the links at the item level is very verbose </p>



<a name="153861102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861102">(Dec 05 2016 at 23:55)</a>:</h4>
<p>Just commenting on this: "RequestGroup seems somewhat subject to change in the near future." Our intent is to keep these structures stable for at least the coming year, as described in the clinical reasoning module roadmap.</p>



<a name="153861105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861105">(Dec 05 2016 at 23:57)</a>:</h4>
<p>What if accept something like what I shared earlier:  <a href="https://chat.fhir.org/user_uploads/10155/J8hXTVPokVQrKX9x8JmJ4Ifm/bundleRef.json" target="_blank" title="bundleRef.json">https://chat.fhir.org/user_uploads/10155/J8hXTVPokVQrKX9x8JmJ4Ifm/bundleRef.json</a> and I just aggregate it all into what our backend accepts. I guess what's wrong about it is that I'm giving the calling service the impression that I'm actually creating an identifiable patient in my system, right?</p>



<a name="153861106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861106">(Dec 05 2016 at 23:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> understood</p>



<a name="153861120"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861120" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Neil Grooby <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861120">(Dec 06 2016 at 00:39)</a>:</h4>
<p>We have a very similar use case to <span class="user-mention" data-user-id="193086">@Jose Montoya</span>  and used Task as a container resource for this. We don't have the interdependences.</p>



<a name="153861127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861127">(Dec 06 2016 at 03:05)</a>:</h4>
<p><span class="user-mention" data-user-id="192826">@Neil Grooby</span> so you had a /task/ resource where other systems posted a completely composed task?</p>



<a name="153861128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861128">(Dec 06 2016 at 03:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> don't know if you saw my msg earlier. What are the cons or impeding reasons not to do something like <a href="user_uploads/10155/J8hXTVPokVQrKX9x8JmJ4Ifm/bundleRef.json" target="_blank" title="user_uploads/10155/J8hXTVPokVQrKX9x8JmJ4Ifm/bundleRef.json">https://chat.fhir.org/user_uploads/10155/J8hXTVPokVQrKX9x8JmJ4Ifm/bundleRef.json</a> and aggregate it all into our backend system model?</p>



<a name="153861176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861176">(Dec 06 2016 at 09:46)</a>:</h4>
<p>Perhaps as a Collection rather than a Transaction since the action is implicit in the endpoint? You aren't asking the receive to CRUD but to 'here - have this'.</p>



<a name="153861204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861204">(Dec 06 2016 at 14:20)</a>:</h4>
<p>It depends what you expect to be able to query later</p>



<a name="153861208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861208">(Dec 06 2016 at 14:38)</a>:</h4>
<p>Yes ok! I think this was part of my original post on this stream. If I switch to a collection including the patient doesn't require that I persist it.</p>



<a name="153861209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861209">(Dec 06 2016 at 14:38)</a>:</h4>
<p>?</p>



<a name="153861210"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861210" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861210">(Dec 06 2016 at 14:39)</a>:</h4>
<p>Yeah so basically I'd like to receive a few things but I'll decide what I persist and what I don't.</p>



<a name="153861211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861211">(Dec 06 2016 at 14:40)</a>:</h4>
<p>We're not expected to be queried for patients.</p>



<a name="153861213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861213">(Dec 06 2016 at 14:43)</a>:</h4>
<p>Or ideally in a transaction a way to say hey Post these things but these others not... Or even if I include the patient as a Post but end up not persisting it independently.</p>



<a name="153861243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861243">(Dec 06 2016 at 15:55)</a>:</h4>
<p>If you're expected to be queried for DiagnosticRequests, then receiving a "Collection" Bundle would not result in DiagnosticRequests being independently available for query.  Do note that I think it's legitimate for you to support querying against DiagnosticRequest and supporting _include on DiagnosticRequest.subject, but not supporting direct query on the Patient endpoint</p>



<a name="153861244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861244">(Dec 06 2016 at 15:57)</a>:</h4>
<p>Yes, we would like the approach to support querying requests.</p>



<a name="153861245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861245">(Dec 06 2016 at 16:02)</a>:</h4>
<p>So I guess at the end of the day my options are 2: <br>
1- Implement /Patient/ to first create the patient and reference them from the DiagRequests. <br>
2- Contain the patient in every DiagRequest.</p>



<a name="153861271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861271">(Dec 06 2016 at 19:32)</a>:</h4>
<p>you do have the 3rd option of representing the patient as an identified resource, and then unidentifying it when processing. But as Paul said, that's not really RESTful CRUD. So for best alignment, I'd make it a message, and add a MessageHeader with your own event type. Then it would be crystal clear...</p>



<a name="153861306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861306">(Dec 06 2016 at 21:15)</a>:</h4>
<p>I will now look at Messages. As it stands, is this accurate to our options?</p>



<a name="153861307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Montoya <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861307">(Dec 06 2016 at 21:15)</a>:</h4>
<p>1- /Patient/: We receive a transaction bundle with 1x Patient, N diagRequests. We persist the patient and diagRequests reference that independent patient.</p>
<p>2- "Contained": We receive a transaction bundle with N diagRequests each containing the same patient.</p>
<p>3- Collection: We receive a collection bundle with 1x Patient, N diagRequests. The calling system can not infer what we're doing with the resources. We decide that we're persisting in our own model and not follow CRUD.</p>
<p>4- Message: To be researched.</p>



<a name="153861313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153861313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Neil Grooby <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153861313">(Dec 06 2016 at 22:17)</a>:</h4>
<p><span class="user-mention" data-user-id="193086">@Jose Montoya</span>  - yes, we have other systems (3rd parties) who need us to perform services (might be to get a file copy from a practitioner, blood tests etc). We were originally looking at Order but after asking here, it was identified that Order was being depreciated and that Task would be appropriate.</p>



<a name="153862214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20Transaction%20References/near/153862214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Knapp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20Transaction.20References.html#153862214">(Dec 08 2016 at 10:08)</a>:</h4>
<p><span class="user-mention" data-user-id="193086">@Jose Montoya</span> Message would be: We receive a message bundle with 1x Messageheader, 1x Patient, N diagRequests.</p>
<p>The 'tricky bit' is that you have N diagRequests. What is your intended business behaviour if one of those requests in invalid - reject the one or reject them all? If the former then you should have made this a batch bundle containing multiple single-instance messages or standalone resources, if the latter then a message bundle where MessageHeader.data points to multiple resources (Nx diagRequest) can work if you ignore the langauge about 'focal resources' and each diagRequest would refer to the 1x Patient which would appear as a peer to MessageHeader in the bundle.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
