---
layout: page
title: "FHIR Chat  · RESTful create and processing differences · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html">RESTful create and processing differences</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="262981641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/262981641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#262981641">(Nov 29 2021 at 09:06)</a>:</h4>
<p>We have situations where BloodPressure is sent as 1 Observation with systolic/diastolic components to a system that cannot handle that this way and needs to split that up into 1 systolic and 1 diastolic Observation. How would such a system respond to a create request? Can you respond with 2 HTTP 201 statuses each carrying the Location/ETag of the thing that is created? If the create came in a Bundle you could do that.</p>
<p>Or is this a clear sign that RESTful is not the answer?</p>



<a name="262982984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/262982984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#262982984">(Nov 29 2021 at 09:20)</a>:</h4>
<p>REST is client driven orchestration, so IMHO the server should refuse the create (422), the Observation being submitted is not conformant to its profiles. The server could expose an operation to do the conversion, this could then be used by a client.  Or the client would have to convert before doing (a bundled) create. <br>
Note that a server could just store the  bloodpressure observation (or fake that it is storing), respond with one single 201 created, and subsequently split that observation into two other observations (and delete the non-splitted/original version of the observation). A  server doesn't have to guarantee the availability of resources for which it has sent a 201.  Not a very nice solution, but IMHO technically correct given the specs.</p>



<a name="262983177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/262983177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#262983177">(Nov 29 2021 at 09:22)</a>:</h4>
<p>So how would a server that responds with 201 but then not actually stores it that way, deal with the SHALL on sending <a href="http://hl7.org/fhir/http.html#create">Location/ETag</a> in the FHIR http spec for create?</p>



<a name="262983319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/262983319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#262983319">(Nov 29 2021 at 09:24)</a>:</h4>
<p>Would it be accepted send just 'something', as long as you guarantee it does not lead to anything else, but just dead-ends in a 404 if you were ever to do a read on that Location?</p>



<a name="262983635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/262983635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#262983635">(Nov 29 2021 at 09:27)</a>:</h4>
<p>Note that on this infrastructure we mostly do query, not read. So having to support a read here, is not the first requirement.</p>



<a name="262984714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/262984714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#262984714">(Nov 29 2021 at 09:38)</a>:</h4>
<p>contained resources?</p>



<a name="262986428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/262986428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#262986428">(Nov 29 2021 at 09:55)</a>:</h4>
<p>Not sure what you ask, but the create is done with an Observation with 2 components. One systolic, one diastolic. The persistence happens in a non-FHIR store in what could be retrieved through query as 2 separate Observations.</p>
<p>Are you asking about Observation.contained in the initial Observation or are you suggesting a pseudo Observation as response to the create that holds the the two actual Observations as contained resources?</p>



<a name="262988943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/262988943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#262988943">(Nov 29 2021 at 10:18)</a>:</h4>
<p>"Would it be accepted send just 'something', as long as you guarantee it does not lead to anything else, but just dead-ends in a 404 if you were ever to do a read on that Location?" - to me, a server could indeed do this. In such cases a client would have to assume that although a resource may have existed at that location, that such a resource no longer exists. What business rules a server have for deleting a resource is up to the server, and when that server executes that business logic (after a millisecond, or a year) is also up to a server.</p>



<a name="262991363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/262991363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#262991363">(Nov 29 2021 at 10:42)</a>:</h4>
<p>I think I can work with that. Somehow though, I feel we need to rewrite future creation requests towards operations or messaging. The RESTful paradigm and the last 30 years of messaging + over 15 years of V3 does not compute too well.</p>



<a name="263050259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/263050259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#263050259">(Nov 29 2021 at 18:38)</a>:</h4>
<p>Can you send an OperationOutcome with the 201 to show the resources as they were actually created?</p>



<a name="263081093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/263081093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#263081093">(Nov 29 2021 at 23:14)</a>:</h4>
<p>Is your question whether or not the spec allows that or if the server potentially could?</p>



<a name="275821042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/275821042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#275821042">(Mar 18 2022 at 15:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191375">@Alexander Henket</span>  <span class="user-mention" data-user-id="192685">@Vassil Peytchev</span>  I don't believe an OperationOutcome can accompany a 201, but would be interested to hear otherwise.</p>
<p>Old thread, but I have a somewhat similar issue: <br>
Client sends an Encounter as a POST. This is saved and also triggers business logic that causes the sever to reflexively create an EpisodeOfCare. The EpisodeOfCare is not directly related to the Encounter however, but some other care that will happen later (by someone else).<br>
The issue is how to notify the client of the id of that new EpisodeOfCare. OperationOutcome does not seem to be possible. The likely solution is to put a reference to the EpisodeOfCare into the newly saved Encounter (probably as an extension, since it is "an" EpisodeOfCare and not "the" EpisodeOfCare for that encounter). <br>
This id is a like a second return value, and not a permanent feature of the Encounter (and would likely be erased if the client PUT the Encounter again). <br>
Alternatively the client could just do a search for the new EpisodeOfCare, but I would prefer a positive statement of the id to be returned from the Create.</p>



<a name="275823182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/275823182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#275823182">(Mar 18 2022 at 16:02)</a>:</h4>
<p>an event? via a subscription</p>



<a name="275826017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/275826017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#275826017">(Mar 18 2022 at 16:19)</a>:</h4>
<p>The HTTP response contains 'what the server has done' - if it creates 2 resources as a result of a post of 1 resource, shouldn't the response then be a Bundle with 2 resources in it? This stretches REST to its limits, but kind of fits with FHIR. Question to the REST pundits whether this is a no-go in principle.</p>
<p>If the Encounter (if it's the only thing in the response) in the response has populated a reference to the newly created EpisodeOfCare, that minimalistically serves as a notification. The client could also subscribe to new EpisodeOfCares (where the client e.g. is part of the associated careTeam), to have a more explicit notification.</p>



<a name="275832081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/275832081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#275832081">(Mar 18 2022 at 16:57)</a>:</h4>
<p>You can request that the create returns OperationOutcome but getting the actual resource in return is not supported behaviour.  To get an OperationOutcome, just specify it as per: <a href="https://www.hl7.org/fhir/http.html#ops">https://www.hl7.org/fhir/http.html#ops</a></p>
<p>That's a preference, not a hard requirement, though.</p>



<a name="275832732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/275832732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#275832732">(Mar 18 2022 at 17:01)</a>:</h4>
<p>but I think that is instead of the created Encounter resource not as well as it. Ideal behaviour is to receive the original created resource, plus something else.</p>



<a name="275832991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/275832991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#275832991">(Mar 18 2022 at 17:03)</a>:</h4>
<p>An OperationOutcome with 2 resource references would work, but it makes the first part of the create work differently, which is not ideal.</p>



<a name="275849723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/275849723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#275849723">(Mar 18 2022 at 19:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191651">Rik Smithies</span> <a href="#narrow/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences/near/275832991">said</a>:</p>
<blockquote>
<p>An OperationOutcome with 2 resource references would work, but it makes the first part of the create work differently, which is not ideal.</p>
</blockquote>
<p>Which first part of the create?</p>
<p>In general, for presented use case (a create of Encounter also creates an EpisodeOfCare not linked to the created Encounter) I see three possible paths:</p>
<ol>
<li>In the case where the server always executes this business logic, the IG specifies that the client must always add the preference of getting an OperationOutcome as the response of the Encounter create, and the OperationOutcome contains the references to both the Encounter and the EpisodeOfCare</li>
<li>In the case where you want to describe the business logic as a service, so that it can be implemented by various servers in addition to a simple Encounter create, then you define an operation.</li>
<li>In the case where the business logic is part of multi-step workflow where the state is represented via a Task resource, the output of the Task can point to the two resources</li>
</ol>



<a name="275914897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RESTful%20create%20and%20processing%20differences/near/275914897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RESTful.20create.20and.20processing.20differences.html#275914897">(Mar 19 2022 at 15:13)</a>:</h4>
<p><span class="user-mention" data-user-id="192685">@Vassil Peytchev</span> ~Which first part of the create?</p>
<p>The part where the client directly causes an Encounter to be created.</p>
<p>If on most systems that gives 201 and echoes back a created resource with an id filled in (and headers), it would be unhelpful if that changed just because some other additional process happens on one server, some or all of the time. </p>
<p>The convenience of being told about that should ideally not come with inconvenience of having to work in some special mode. </p>
<p>This makes 1 and 2 less attractive. For 3 there is no Task anticipated.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
