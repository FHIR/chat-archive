---
layout: page
title: "FHIR Chat  · URL encoding  search modifiers in AWS · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/URL.20encoding.20.20search.20modifiers.20in.20AWS.html">URL encoding  search modifiers in AWS</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153927577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/URL%20encoding%20%20search%20modifiers%20in%20AWS/near/153927577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Carter <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/URL.20encoding.20.20search.20modifiers.20in.20AWS.html#153927577">(Jan 03 2018 at 23:26)</a>:</h4>
<p>We are experiencing a problem using AWS API Gateway and the FHIR standard for search modifiers. We are trying to support the 'exact' and 'contains' modifiers for string search terms. So, we want to be able to search in the following way:</p>
<p><a href="http://fhir.example.com/ParactitionerRole?practitioner.family:exact=smith" target="_blank" title="http://fhir.example.com/ParactitionerRole?practitioner.family:exact=smith">http://fhir.example.com/ParactitionerRole?practitioner.family:exact=smith</a></p>
<p>However, the colon character between the parameter and the modifier is giving us problems and seems not to be supported by the AWS API Gateway that we are using to serve our API.</p>
<p>Has anyone else come across this issue?</p>



<a name="153927579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/URL%20encoding%20%20search%20modifiers%20in%20AWS/near/153927579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Tuzzolino <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/URL.20encoding.20.20search.20modifiers.20in.20AWS.html#153927579">(Jan 04 2018 at 00:46)</a>:</h4>
<p>This is us trying to meet the requirements of string-based search as defined here: <a href="https://www.hl7.org/fhir/search.html#string" target="_blank" title="https://www.hl7.org/fhir/search.html#string">https://www.hl7.org/fhir/search.html#string</a> <br>
There is no problem with the default prefix based search behaviour. Rather the problem arises when introducing the colons for search modifiers. </p>
<p>Some further information is that Amazon has got back to us saying that colons are not permitted under a query parameter name due to it being a reserved character as per <a href="https://tools.ietf.org/html/rfc3986#section-2.2" target="_blank" title="https://tools.ietf.org/html/rfc3986#section-2.2">https://tools.ietf.org/html/rfc3986#section-2.2</a> </p>
<p>There is no problem putting a colon in the value of a query parameter, rather it's a problem with having them as a part of the query parameter name itself. </p>
<p>Example for valid/invalid query param names for AWS API Gateway: <br>
<code>practitioner.given</code> --&gt; <code>VALID</code><br>
<code>practitioner.given:exact</code> --&gt; <code>INVALID</code><br>
<code>practitioner.given:contains</code> --&gt; <code>INVALID</code></p>



<a name="153927585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/URL%20encoding%20%20search%20modifiers%20in%20AWS/near/153927585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/URL.20encoding.20.20search.20modifiers.20in.20AWS.html#153927585">(Jan 04 2018 at 01:48)</a>:</h4>
<p>You'll need to escape them - all URL characters in the search portion of the string need to be escaped when necessary.  So for ":", you'll need to use <code>%3A</code></p>



<a name="153927586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/URL%20encoding%20%20search%20modifiers%20in%20AWS/near/153927586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Tuzzolino <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/URL.20encoding.20.20search.20modifiers.20in.20AWS.html#153927586">(Jan 04 2018 at 01:59)</a>:</h4>
<p>Is anyone doing this through exposing their API through AWS API Gateway? </p>
<p>Since you have to explicitly tell the gateway which parameters you are expecting, it complains upon entry: </p>
<p>This happens with both <code>:</code> and <code>%3A</code> because colons and percentages are not valid characters. <br>
It's looking like something we need to bring back to Amazon.</p>
<p><a href="/user_uploads/10155/qxMvjAShXiZTH_hVtgiMb83g/image.png" target="_blank" title="image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/qxMvjAShXiZTH_hVtgiMb83g/image.png" target="_blank" title="image.png"><img src="/user_uploads/10155/qxMvjAShXiZTH_hVtgiMb83g/image.png"></a></div>



<a name="153927593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/URL%20encoding%20%20search%20modifiers%20in%20AWS/near/153927593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/URL.20encoding.20.20search.20modifiers.20in.20AWS.html#153927593">(Jan 04 2018 at 07:26)</a>:</h4>
<p>my read of that section (again) is that percent encoding is ok. I don't know where it says that parameters are URL components or subcomponents that can't contain ":" ("URI producing applications should percent-encode data octets that correspond to characters in the reserved set unless these characters are specifically allowed by the URI scheme to represent data in that component")</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
