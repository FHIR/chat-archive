---
layout: page
title: "FHIR Chat  · CDS Hooks, &#x27;asynchr.&#x27; reply · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html">CDS Hooks, &#x27;asynchr.&#x27; reply</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153903547"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903547" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bart van der Worp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903547">(Aug 24 2017 at 12:38)</a>:</h4>
<p>We would like to implement this use-case with CDS Hooks.<br>
- CDS request for starting of a calculation.<br>
- Returning the result of this calculation.</p>
<p>Quite basic, but the calculation takes a long time, typical several minutes.<br>
I don't think that sending the response after finishing the calculation is good practice.<br>
So the idea is to send a CDS response after basic intake of pre-fetched data with intake status.<br>
After the calculation is completed, it is then needed to push the result.<br>
The only way within CDS Hook context I see is mis-use a pre-fetch cycle to push the result.<br>
Not good practice either as seen from standpoint of consistent standard use, but already somewhat better from general perspective ...<br>
Polling using a second CDS request is something I would not like at all.</p>
<p>Please advice. Am I missing or misinterpreting something?</p>
<p>Thanks in advance, Bart.</p>



<a name="153903548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903548">(Aug 24 2017 at 12:39)</a>:</h4>
<p>is this actually a cds-hooks thing? as in, integrated with the UI? What does the flow look like from the user's perspective?</p>



<a name="153903549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bart van der Worp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903549">(Aug 24 2017 at 12:44)</a>:</h4>
<p>Yes, the result is a link to the result. As such a normal CDS use as far as I understand. The point is the very long elapsed time of the calculation.<br>
More detailed consideration would be to send the link already in the first reply, it is known then, but we would also like to synchronize the end of the calculation. This could also result in error status that the caller system needs to know, so that's beyond only presenting it.</p>



<a name="153903550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903550">(Aug 24 2017 at 12:46)</a>:</h4>
<p>It's a good use case, and not one the current CDS Hooks spec supports very well. You've identified one workaround, which is a forward pointer to a result that can be generated right away, even before the result is available. Users can click the link and see a page that you host to indicate status and, when available, the final result.</p>



<a name="153903551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903551">(Aug 24 2017 at 12:48)</a>:</h4>
<p>Thinking about how the spec would need to change to accommodate this use case better: we could say something like 1) response cards can contain a "pollAgainAfter" interval and perhaps a "pollAgainUrl" that would return a replacement card when content was available, or 2) the EHR could host an endpoint specifically for asynchronous results, and the external service could push to that endpoint when ready.</p>



<a name="153903558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bart van der Worp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903558">(Aug 24 2017 at 12:56)</a>:</h4>
<p>I would prefer 2) in our current case, but both seem feasible I guess.<br>
We need to proceed, so for the time being we could mis-use the pre-fetch for pushing the result as a work around?<br>
We could arrange a special FHIR 'resource' to create an endpoint to push the result to.<br>
And ofcoarse, this needs to discussed clearly in detail with the builders of the requesting system.</p>



<a name="153903561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903561">(Aug 24 2017 at 12:59)</a>:</h4>
<p>I'm not sure I follow what you mean about prefetch... prefetch is a way to send data from the EHR to a CDS Service, but you're talking about returning data from the CDS Service to the EHR.</p>



<a name="153903562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bart van der Worp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903562">(Aug 24 2017 at 13:01)</a>:</h4>
<p>Yes, but pre-fetch is initiated by the CDS service as I understand and as such could be mis-used as a push by posting our result in stead of or added to the standard content of the pre-fetch request?</p>



<a name="153903563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bart van der Worp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903563">(Aug 24 2017 at 13:02)</a>:</h4>
<p>(deleted)</p>



<a name="153903564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903564">(Aug 24 2017 at 13:03)</a>:</h4>
<p>(You can edit a previous post by hitting the left arrow, or clickinging the post and choosing "Edit".)</p>



<a name="153903565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bart van der Worp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903565">(Aug 24 2017 at 13:04)</a>:</h4>
<p>Thanks!</p>



<a name="153903566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903566">(Aug 24 2017 at 13:04)</a>:</h4>
<p>(sure!)</p>



<a name="153903567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903567">(Aug 24 2017 at 13:04)</a>:</h4>
<p>I don't follow what you're saying — pre-fetch is initiated by the EHR (based on a client's static, configuration-time settings).</p>



<a name="153903568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903568">(Aug 24 2017 at 13:05)</a>:</h4>
<p>BTW this may be a better topic for <a href="https://chat.fhir.org/#narrow/stream/cds-hooks" target="_blank" title="https://chat.fhir.org/#narrow/stream/cds-hooks">https://chat.fhir.org/#narrow/stream/cds-hooks</a></p>



<a name="153903569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bart van der Worp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903569">(Aug 24 2017 at 13:05)</a>:</h4>
<p>(deleted)</p>



<a name="153903571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bart van der Worp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903571">(Aug 24 2017 at 13:16)</a>:</h4>
<p>I mixed terminology ...<br>
The CDS request contains pre-fetched data. This is not what I mean.<br>
The CDS request also contains a EHR FHIR server URL that can be used to ad-hoc request additional data from the EHR. This is what I erroneously called 'prefetch' ...<br>
We could use this URL to push the result from the CDS service to the EHR as a temporary workaround.</p>



<a name="153903580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bart van der Worp <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903580">(Aug 24 2017 at 14:38)</a>:</h4>
<p>Can an admin move this topic to cds-hooks please?</p>



<a name="153903581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/CDS%20Hooks%2C%20%27asynchr.%27%20reply/near/153903581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/CDS.20Hooks.2C.20&#x27;asynchr.2E&#x27;.20reply.html#153903581">(Aug 24 2017 at 14:44)</a>:</h4>
<p>Topics don't move, but we can pick up the convo there :-)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
