---
layout: page
title: "FHIR Chat  · Searching for a field value for queried parameter · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html">Searching for a field value for queried parameter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="172856254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172856254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike C. <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172856254">(Aug 09 2019 at 14:36)</a>:</h4>
<p>Good Day FHIR Folks,</p>
<p>I am having a bit of difficulty creating the correct endpoint for my GET request to our FHIR API,</p>
<p>My goal in a very general sense is to call for all Resources that are related to one other specific Resource's id, and only when a certain Element in that resource matches a certain value.</p>
<p>Specifically, I want to find all Encounter resources that are tied to one specific Patient, and only when those Encounters for that Patient were for a specific year (the Element object is "period" with two fields within it, "start" and "end").  </p>
<p>I have tried the following endpoints to obtain this desired result, with no luck:</p>
<p>https://[Base URL]/Encounter?_patient=Patient/###########&amp;?_period.start=2011-09-18T19:05:01-04:00</p>
<p>https://[Base URL]/Encounter?_patient=Patient/###########&amp;?_period=2011-09-18T19:05:01-04:00</p>
<p>https://[Base URL]/Encounter?_patient=Patient/###########&amp;period=2011-09-18T19:05:01-04:00</p>
<p>https://[Base URL]/Encounter?_patient=Patient/###########?given:contains=2011-09-18T19:05:01-04:00</p>
<p>https://[Base URL]/Encounter?_patient=Patient/###########?contains=2011-09-18T19:05:01-04:00</p>
<p>https://[Base URL]/Encounter?_patient=Patient/###########&amp;period?given:contains=2011-09-18T19:05:01-04:00</p>
<p>When send a Get to these endpoints, I am not given the one value that I am testing for, but rather a bundle of all Encounters regardless of matching period-value.</p>
<p>I am looking on the HL7 documentation here for "search" but I can't seem to find what I need, any points in the right direction would be greatly appreciated!!</p>



<a name="172862525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172862525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172862525">(Aug 09 2019 at 15:53)</a>:</h4>
<p>No underscore - <code>...Encounter?patient=....</code></p>



<a name="172862603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172862603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172862603">(Aug 09 2019 at 15:54)</a>:</h4>
<p>https://[Base URL]/Encounter?patient=123&amp;period=2011-09-18</p>



<a name="172862635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172862635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172862635">(Aug 09 2019 at 15:54)</a>:</h4>
<p>So only ever one "?", multiple parameters separated by &amp;</p>



<a name="172862712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172862712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172862712">(Aug 09 2019 at 15:55)</a>:</h4>
<p>:contains isn't an allowed qualifier for period</p>



<a name="172864773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172864773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike C. <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172864773">(Aug 09 2019 at 16:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191912">@Michele Mottini</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Thank you for the replies gentlemen! I appreciate your help.</p>



<a name="172870316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172870316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike C. <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172870316">(Aug 09 2019 at 17:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  <span class="user-mention" data-user-id="191912">@Michele Mottini</span> </p>
<blockquote>
<p>https://[Base URL]/Encounter?patient=123&amp;period=2011-09-18</p>
</blockquote>
<p>Understood - branching off this, my question would be: is it possible to search for only part of the value in the period field? Essentially, doing a "string slice" of the total value (2011-09-18T19:05:01-04:00 is how the dates are formatted in this field for every Encounter), such that I could search for only the first four characters of the period.start value? </p>
<p>Basically, I want to be able to search for all Encounter resources that begin with a certain year (the first four characters in that string). Since it's not practical, in my use-case, to search for the entire long dateTime object, I want to just search for the all Encounter objects based on a year input i.e. "2011"</p>
<p>I  would think that the ':contains' parameter would be the logical solution to this, but I know you said that ':contains' is not an allowed qualifier for the period Element, so would there be any way of achieving this another way?</p>



<a name="172876070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172876070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172876070">(Aug 09 2019 at 18:27)</a>:</h4>
<p>You aren't searching against the characters, you're searching against the math :)  Searches against periods are based on set math of the range of the search term (determined by its precision) and the range of the period (including its precision).  So if you search for period=2011, that will find any records that have a period that overlap the period of 2011-01-01T00:00:00 to 2011-12-31T23:59:59.</p>



<a name="172876787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172876787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172876787">(Aug 09 2019 at 18:32)</a>:</h4>
<p>...isn't it contains, not overlap?</p>



<a name="172876998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172876998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172876998">(Aug 09 2019 at 18:35)</a>:</h4>
<p>Overlap</p>



<a name="172877051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172877051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172877051">(Aug 09 2019 at 18:35)</a>:</h4>
<p>Something that started 2011-12-31T23:59:58 and lasted 10 days into 2012 would be returned by a query of period=2011</p>



<a name="172878977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172878977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike C. <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172878977">(Aug 09 2019 at 18:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , thanks for the suggestion. I tried to use period=2011 as a query parameter but Postman still returns all encounters, basically not filtering by year 2011. Am I missing something?</p>



<a name="172882929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172882929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172882929">(Aug 09 2019 at 19:44)</a>:</h4>
<p>Actually, looks like 'period' isn't a valid search parameter.  It should be 'date'.  (You can look at the 'self' link to see what query the server actually executed - any parameters not listed it doesn't support or might not even be valid.)</p>



<a name="172888353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172888353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mike C. <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172888353">(Aug 09 2019 at 20:57)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , that's the ticket I needed. Appreciate your and <span class="user-mention" data-user-id="191912">@Michele Mottini</span> 's help today. Have a great weekend.</p>



<a name="172989976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172989976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172989976">(Aug 12 2019 at 00:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I think the 'self' link section and   <a href="http://build.fhir.org/search.html#errors" target="_blank" title="http://build.fhir.org/search.html#errors">handling errors</a> appear related enough to be merged or at least adjacent? instead of at opposite ends of the page</p>



<a name="172994368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/172994368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#172994368">(Aug 12 2019 at 03:06)</a>:</h4>
<p>Change request :)</p>



<a name="178560497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/178560497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#178560497">(Oct 19 2019 at 19:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  not sure why searching by <code>date</code> instead of <code>period.start</code> and <code>period.end</code> .  Some client need to get all encounter fisnishing before and exact date. Searching by <code>date</code> looks quite unprecise. <br>
Also there is no way to <code>_sort</code> by end/start.<br>
Any thought ?</p>



<a name="178571938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/178571938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#178571938">(Oct 20 2019 at 01:47)</a>:</h4>
<p>Searching by date allows you to find elements that overlap a particular period.  You can use le and/or ge to define the boundaries of the period you're looking for matches with and can then look for records that overlap with those boundaries.  So far no one's mentioned the ability to sort by period - agree that's something that's a reasonable thing to want to do.  <span class="user-mention" data-user-id="213944">@natus</span> would you be willing to submit a change request?</p>



<a name="178585445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/178585445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#178585445">(Oct 20 2019 at 09:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I have two use cases:<br>
- search for all encounter who have missing end-date, OR end-date between x and y <br>
- sort them by start date.</p>
<p>Ok to submit a change request for both. but please discuss before the content of the change.</p>
<p>Proposal 1:</p>
<div class="codehilite"><pre><span></span>Encounter?period=2019 //equivalent to actual date
Encounter?period.start=2019
Encounter?period.start:lt=2020-02&amp;period.end:gt=2017
Encounter?period.end:missing=true
Encounter?_sort=period.start
</pre></div>


<p>Proposal 2:</p>
<div class="codehilite"><pre><span></span>Encounter?date=2019 // no broken change
Encounter?start-date=2019
Encounter?start-date:lt=2020-02&amp;start-date:gt=2017
Encounter?end-date:missing=false
Encounter?_sort=-start-date
</pre></div>



<a name="178598524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/178598524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#178598524">(Oct 20 2019 at 16:04)</a>:</h4>
<p>It would have to be the second.  "." is used for chaining and isn't allowed in the names of a search criteria</p>



<a name="178689584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/178689584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#178689584">(Oct 21 2019 at 19:35)</a>:</h4>
<p>ok. I guess I did the request in hl7gforce. I am unsure because the process has been tricky</p>



<a name="178692991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20for%20a%20field%20value%20for%20queried%20parameter/near/178692991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20for.20a.20field.20value.20for.20queried.20parameter.html#178692991">(Oct 21 2019 at 20:07)</a>:</h4>
<p>Yup.  <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25037" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25037">GF#25037</a> looks good.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
