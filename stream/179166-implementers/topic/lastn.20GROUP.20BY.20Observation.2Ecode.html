---
layout: page
title: "FHIR Chat  · lastn GROUP BY Observation.code · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/lastn.20GROUP.20BY.20Observation.2Ecode.html">lastn GROUP BY Observation.code</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="177065206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/lastn%20GROUP%20BY%20Observation.code/near/177065206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xiaocheng Luan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/lastn.20GROUP.20BY.20Observation.2Ecode.html#177065206">(Oct 01 2019 at 15:17)</a>:</h4>
<p>Per spec (3rd bullet point under "GROUP BY"):</p>
<ul>
<li>"For codes with translations (multiple codings), the code translations are assumed to be equal and the grouping by code SHALL follow the transitive property of equality."<br>
It seems this allows any observation resource(s) to define equality relationship between codings for the purpose of lastn? For example, an observation record from Hospital A has coding [C1, C2], another record from Dr. B's office has coding [C1, C3], and the spec seems to suggest, for the purpose of lastn operation, C1==C2==C3? I must be missing something otherwise the slope is simply too slippery?</li>
</ul>



<a name="177065661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/lastn%20GROUP%20BY%20Observation.code/near/177065661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/lastn.20GROUP.20BY.20Observation.2Ecode.html#177065661">(Oct 01 2019 at 15:22)</a>:</h4>
<p>nope you are not missing anything and it is slippery.  how else would you do it?</p>



<a name="177084729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/lastn%20GROUP%20BY%20Observation.code/near/177084729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xiaocheng Luan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/lastn.20GROUP.20BY.20Observation.2Ecode.html#177084729">(Oct 01 2019 at 18:38)</a>:</h4>
<p>I would think allowing an observation to appear under multiple coding groups may not be as bad as it sounds, at least everything is still "consistent" with the data, and much can still be done by the client afterwards. The biggest problem with the current spec is that one coding error, or loose coding, or even perfectly correct coding with different levels of angularities could easily throw the whole thing off in unexpected ways. The assumption of equality between codings within a code is already shaky; the transitivity just amplifies it and I don't see a boundary. On top of that, it's challenging to implement, too, it's a dynamic equivalence system.</p>



<a name="177096768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/lastn%20GROUP%20BY%20Observation.code/near/177096768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/lastn.20GROUP.20BY.20Observation.2Ecode.html#177096768">(Oct 01 2019 at 20:48)</a>:</h4>
<p>yes all that. But as Eric says, what else can be done?</p>



<a name="177165621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/lastn%20GROUP%20BY%20Observation.code/near/177165621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Xiaocheng Luan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/lastn.20GROUP.20BY.20Observation.2Ecode.html#177165621">(Oct 02 2019 at 16:14)</a>:</h4>
<p>Is there anything that has to be done? As an "outsider" (of healthcare), I think simply grouping by unique coding (system-code pair) might work, though not ideal? Yes, then an observation with multiple coding may fall under more than one groups (duplicates), but I think it's more of an annoyance than an error.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
