---
layout: page
title: "FHIR Chat  · HAPI FHIR - versioned references · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20-.20versioned.20references.html">HAPI FHIR - versioned references</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153999404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20-%20versioned%20references/near/153999404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Stigsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20-.20versioned.20references.html#153999404">(Sep 24 2018 at 09:57)</a>:</h4>
<p>Hi there implementers<br>
Hope you can help.<br>
We need help with versions being stripped from AudiEvent entitiy references.</p>
<p>We are using a HAPI FHIR client version 3.4 to access a HAPI FHIR server (3.1)<br>
We can not get the <em>AuditEvent.entity.reference</em> to store the version of the resource being accessed.<br>
We are setting the reference like <em>"CarePlan/12345/_history/5"</em> <br>
And this is what goes over the wire.<br>
But the server only seams to store the Id ie. we only get <em>"CarePlan/12345"</em> when reading the AuditEvent<br>
We have tried to set the <strong>setDontStripVersionsFromReferencesAtPaths</strong> on the parser configuration after creating the context...but no success.<br>
context.getParserOptions()<br>
                    .setDontStripVersionsFromReferencesAtPaths("AuditEvent.entity.reference");</p>



<a name="153999433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20-%20versioned%20references/near/153999433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20-.20versioned.20references.html#153999433">(Sep 24 2018 at 14:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> ?</p>



<a name="153999467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20-%20versioned%20references/near/153999467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20-.20versioned.20references.html#153999467">(Sep 24 2018 at 16:53)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="194988">@Thomas Stigsen</span> ,</p>
<p>Have you set the <code>setDontStripVersionsFromReferencesAtPaths</code> setting on the contexts on both the server and the client? This certainly should work.</p>
<p>One other thing to try would be to register a LoggingInterceptor on your client (or on your server) to log the payload just to verify that the version is actually being transmitted (this would confirm that youhave the syntax right in your argument to setDontStripVersionsFromReferencesAtPaths)</p>



<a name="154000946"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%20-%20versioned%20references/near/154000946" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Stigsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.20-.20versioned.20references.html#154000946">(Sep 28 2018 at 09:53)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191319">@James Agnew</span> <br>
Thank you for the answer.<br>
I can see in the log that we do decorate the ID's with the version.<br>
So it must be the target FHIR server that is missing the <code>setDontStripVersionsFromReferencesAtPaths</code> in the configuration.<br>
Well get that fixed :-)<br>
Thanks - and have a great weekend</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
