---
layout: page
title: "FHIR Chat  · Forge 16.5 for STU3 · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html">Forge 16.5 for STU3</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153902772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153902772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153902772">(Aug 18 2017 at 15:13)</a>:</h4>
<p>Forge 16.5 for STU3 is now available for download from <a href="https://simplifier.net/forge" target="_blank" title="https://simplifier.net/forge">https://simplifier.net/forge</a>.</p>
<p>This new release fixes some issues reported by the community and also introduces a couple of usability improvements. All users are encouraged to update to the current version.</p>
<p>FHIR API Improvements:</p>
<ul>
<li>Update the FHIR .NET API library to 0.93.5-beta6</li>
<li>Stability improvements for DirectorySource</li>
<li>Handle bug in SimpleQuantity core datatype definition</li>
</ul>
<p>Features:</p>
<ul>
<li>NEW! Automatically initialize default slicing discriminator for type slices</li>
<li>NEW! FHIR Path expression validation</li>
</ul>
<p>Bug fixes:</p>
<ul>
<li>EXPERIMENTAL! Improved matching of base element types</li>
<li>Serialize constraints on meta.security.* and meta.tag.* elements to differential in proper order</li>
<li>eld-16 sliceName validation</li>
<li>Explicitly remove old child constraints after updating element type</li>
<li>Import resources from FHIR server and/or Simplifier</li>
<li>Fix broken hyperlink to Furore news page on Simplifier</li>
</ul>
<p>Detailed release notes: <a href="https://simplifier.net/ui/OrganizationNews/Show?id=34" target="_blank" title="https://simplifier.net/ui/OrganizationNews/Show?id=34">https://simplifier.net/ui/OrganizationNews/Show?id=34</a></p>
<p>If you discover any issues or want to submit a feature request, please contact us.</p>
<p>Happy profiling!</p>
<p>Michel Rutten</p>



<a name="153903381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Munro <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903381">(Aug 23 2017 at 11:08)</a>:</h4>
<blockquote>
<p>Forge 16.5 for STU3 is now available for download from <a href="https://simplifier.net/forge" target="_blank" title="https://simplifier.net/forge">https://simplifier.net/forge</a>.</p>
<p>This new release fixes some issues reported by the community and also introduces a couple of usability improvements. All users are encouraged to update to the current version.</p>
<p>FHIR API Improvements:</p>
<ul>
<li>Update the FHIR .NET API library to 0.93.5-beta6</li>
<li>Stability improvements for DirectorySource</li>
<li>Handle bug in SimpleQuantity core datatype definition</li>
</ul>
<p>Features:</p>
<ul>
<li>NEW! Automatically initialize default slicing discriminator for type slices</li>
<li>NEW! FHIR Path expression validation</li>
</ul>
<p>Bug fixes:</p>
<ul>
<li>EXPERIMENTAL! Improved matching of base element types</li>
<li>Serialize constraints on meta.security.* and meta.tag.* elements to differential in proper order</li>
<li>eld-16 sliceName validation</li>
<li>Explicitly remove old child constraints after updating element type</li>
<li>Import resources from FHIR server and/or Simplifier</li>
<li>Fix broken hyperlink to Furore news page on Simplifier</li>
</ul>
<p>Detailed release notes: <a href="https://simplifier.net/ui/OrganizationNews/Show?id=34" target="_blank" title="https://simplifier.net/ui/OrganizationNews/Show?id=34">https://simplifier.net/ui/OrganizationNews/Show?id=34</a></p>
<p>If you discover any issues or want to submit a feature request, please contact us.</p>
<p>Happy profiling!</p>
<p>Michel Rutten</p>
</blockquote>
<p>I've just created an extension in forge and run it through the validator and I get an warning</p>
<p>Overall result: SUCCESS</p>
<p>[WARNING] Evaluation of FhirPath for constraint 'eld-16' failed: Invocation of 'binary.or' failed: Invocation of 'matches' failed: parsing "^[a-zA-Z0-9\-\_]+$" - Unrecognized escape sequence \_. (at StructureDefinition.differential[0].element[1])</p>
<p>Validation run took 53 miliseconds</p>
<p>&lt;differential&gt;<br>
 &lt;element id="Extension.url"&gt;<br>
&lt;path value="Extension.url"/&gt;<br>
&lt;fixedUri value="http://www.eldbdev.org/StructureDefinition/MyExtension"/&gt;<br>
&lt;/element&gt;<br>
 &lt;element id="Extension.value[x]:valueString"&gt;<br>
&lt;path value="Extension.valueString"/&gt;<br>
&lt;sliceName value="valueString"/&gt;<br>
 &lt;type&gt;<br>
&lt;code value="string"/&gt;<br>
&lt;/type&gt;<br>
&lt;/element&gt;<br>
&lt;/differential&gt;</p>
<p>Is this an error in the underlying validator rather than the extension? An incorrectly copied regular expression?</p>



<a name="153903382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903382">(Aug 23 2017 at 11:30)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193298">@Chris Munro</span>, apparently the current regex on element id rejects the "[" and "]" brackets.<br>
Per convention, the standard element id for polymorphic elements is always generated from the original element name, e.g. "value[x]". We agreed on this format during the Madrid WGM.<br>
So I guess the element id regex should be updated to also accept "[]" characters.<br>
Maybe you can submit an issue to GForge?</p>



<a name="153903386"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903386" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Munro <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903386">(Aug 23 2017 at 12:48)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191336">@Michel Rutten</span> for the reply- I know that the warning is safe to ignore now.</p>



<a name="153903387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903387">(Aug 23 2017 at 12:52)</a>:</h4>
<p>Did you already submit a GForge issue, or shall I take care of it?</p>



<a name="153903388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Munro <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903388">(Aug 23 2017 at 12:54)</a>:</h4>
<blockquote>
<p>Did you already submit a GForge issue, or shall I take care of it?</p>
</blockquote>
<p>No, I haven't used GForge before so if you could do that it would be great, thanks</p>



<a name="153903396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903396">(Aug 23 2017 at 13:21)</a>:</h4>
<p>Done: #13769<br>
<a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13769" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13769">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13769</a></p>



<a name="153903404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Munro <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903404">(Aug 23 2017 at 13:32)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191336">@Michel Rutten</span> </p>
<p>I've noticed that even with &lt;sliceName value="Test"/&gt;</p>
<p>I still get a warning of <br>
[WARNING] Evaluation of FhirPath for constraint 'eld-16' failed: Invocation of 'binary.or' failed: Invocation of 'matches' failed: parsing "^[a-zA-Z0-9\-\_]+$" - Unrecognized escape sequence \_. (at StructureDefinition.differential[0].element[6])</p>
<p>This looks to be because in the spec there are escape characters (<a href="https://www.hl7.org/fhir/elementdefinition-definitions.html" target="_blank" title="https://www.hl7.org/fhir/elementdefinition-definitions.html">https://www.hl7.org/fhir/elementdefinition-definitions.html</a>) :</p>
<p>eld-16: sliceName must be composed of proper tokens separated by "/" (expression : sliceName.empty() or sliceName.matches('^[a-zA-Z0-9\\/\\-\\_]+$'), xpath: not(exists(f:sliceName/@value)) or matches(f:sliceName/@value, '^[a-zA-Z0-9\\/\\-\\_]+$'))</p>
<p>and the way java/c# process the escaped character in the regular expression?</p>



<a name="153903407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903407">(Aug 23 2017 at 13:46)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193298">@Chris Munro</span>, this has been fixed in release 16.5. I recommend you update to the latest version.<br>
Originally, I literally copied the regex from the spec to C# code. But as you discovered, character escaping rules are different. The current release should fix that.</p>



<a name="153903410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903410">(Aug 23 2017 at 14:09)</a>:</h4>
<p>BTW Are you referring to the .NET Validator or the Java validator?</p>



<a name="153903411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Munro <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903411">(Aug 23 2017 at 14:10)</a>:</h4>
<p>Yes it's fine in forge, but in simplifier there is still an error showing once you load in the profile from forge and the same for the C# API validator I'm not sure about the java one though</p>



<a name="153903413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903413">(Aug 23 2017 at 14:25)</a>:</h4>
<p>OK thanks for the feedback. We'll have to fix this in the API.</p>



<a name="153903414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903414">(Aug 23 2017 at 14:28)</a>:</h4>
<p><a href="https://github.com/ewoutkramer/fhir-net-api/issues/413" target="_blank" title="https://github.com/ewoutkramer/fhir-net-api/issues/413">https://github.com/ewoutkramer/fhir-net-api/issues/413</a></p>



<a name="153903416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903416">(Aug 23 2017 at 14:34)</a>:</h4>
<p>Funny this shows up here and now - it means our unit-test that checks all fhirpath statements must have missed this.</p>



<a name="153903418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903418">(Aug 23 2017 at 15:00)</a>:</h4>
<p>It seems that on its way from the FHIRPath expression in the StructureDefinition for ElementDefinition to the FHIRPath validator, the double backslashes get unescaped.  <span class="user-mention" data-user-id="193298">@Chris Munro</span>, did the message on your screen really have  <code>\_</code> in the pattern or had it <code>\\_</code> ?  Just to make sure Zulip did not mess things up ;-)</p>



<a name="153903419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903419">(Aug 23 2017 at 15:01)</a>:</h4>
<p>(BTW in Zulip you can click a message and "view source" to see how it was initially entered.)</p>



<a name="153903420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Munro <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903420">(Aug 23 2017 at 15:01)</a>:</h4>
<p><a href="/user_uploads/10155/mOCVxUnwNu0xRRUFBAvThAms/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/mOCVxUnwNu0xRRUFBAvThAms/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/mOCVxUnwNu0xRRUFBAvThAms/pasted_image.png"></a></div>



<a name="153903421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903421">(Aug 23 2017 at 15:03)</a>:</h4>
<p>And from the <a href="https://www.hl7.org/fhir/elementdefinition-definitions.html" target="_blank" title="https://www.hl7.org/fhir/elementdefinition-definitions.html">FHIR spec</a>:</p>
<p><a href="/user_uploads/10155/FpezRlXgVrtAnFU_7MX0FfL8/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/FpezRlXgVrtAnFU_7MX0FfL8/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/FpezRlXgVrtAnFU_7MX0FfL8/pasted_image.png"></a></div>



<a name="153903500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903500">(Aug 24 2017 at 11:02)</a>:</h4>
<p>Ok, so I think I found the culprit. I was assuming my FHIRPath parser complained about the unrecognized escape sequence, but in fact it is the .NET regex evaluator that is called in the end. It will not accept <code>\_</code> as an escape sequence, and from what I find (superficially) in Google, it's right not to accept it. <code>\/</code> and <code>\-</code> are fine, but <code>\_</code> is not....</p>



<a name="153903501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903501">(Aug 24 2017 at 11:03)</a>:</h4>
<blockquote>
<p>For PCRE, and most other so-called Perl-compatible flavors, escape these outside character classes:<br>
.^$*+?()[{\|<br>
and these inside character classes:<br>
^-]\<br>
For POSIX extended regexes (ERE), escape these outside character classes (same as PCRE):<br>
.^$*+?()[{\|<br>
Escaping any other characters is an error with POSIX ERE.</p>
</blockquote>



<a name="153903503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903503">(Aug 24 2017 at 11:03)</a>:</h4>
<p>(note that last sentence, it's from <a href="https://stackoverflow.com/questions/399078/what-special-characters-must-be-escaped-in-regular-expressions" target="_blank" title="https://stackoverflow.com/questions/399078/what-special-characters-must-be-escaped-in-regular-expressions">https://stackoverflow.com/questions/399078/what-special-characters-must-be-escaped-in-regular-expressions</a>)</p>



<a name="153903523"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Forge%2016.5%20for%20STU3/near/153903523" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Forge.2016.2E5.20for.20STU3.html#153903523">(Aug 24 2017 at 11:17)</a>:</h4>
<p>Created a tracker item: <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13771" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13771">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13771</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
