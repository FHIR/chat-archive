---
layout: page
title: "FHIR Chat  · version conversion - VersionConvertor_40_50 · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html">version conversion - VersionConvertor_40_50</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="246700643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246700643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246700643">(Jul 21 2021 at 10:13)</a>:</h4>
<p><a href="https://www.hl7.org/fhir/versions.html#extensions">https://www.hl7.org/fhir/versions.html#extensions</a> describes how _"any element defined in any version of FHIR is automatically assigned an extension URL that uniquely identifies the element and can be used in the relevant FHIR version"_</p>
<p>So I've just used the VersionConvertor_40_50.convertResource to turn an R5 ValueSet into an R4 ValueSet and did not get what I expected:<br>
Input:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"ValueSet"</span><span class="p">,</span>
  <span class="nt">"expansion"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"contains"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
      <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"urn:abc-123"</span><span class="p">,</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"dummy code"</span><span class="p">,</span>
      <span class="nt">"property"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
        <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"stringProp"</span><span class="p">,</span>
        <span class="nt">"valueString"</span><span class="p">:</span> <span class="s2">"string value"</span>
      <span class="p">},</span> <span class="p">{</span>
        <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"booleanProp"</span><span class="p">,</span>
        <span class="nt">"valueBoolean"</span><span class="p">:</span> <span class="kc">true</span>
      <span class="p">},</span> <span class="p">{</span>
        <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"decimalProp"</span><span class="p">,</span>
        <span class="nt">"valueDecimal"</span><span class="p">:</span> <span class="mf">3.1415926</span>
      <span class="p">}</span> <span class="p">]</span>
    <span class="p">}</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"ValueSet"</span><span class="p">,</span>
  <span class="nt">"expansion"</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">"contains"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span>
      <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"urn:abc-123"</span><span class="p">,</span>
      <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"dummy code"</span>
    <span class="p">}</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Where has that add-in-R5 <code>property</code> element gone?  I was expecting that additional elements would be rendered as extensions on the older resource?</p>



<a name="246731042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246731042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246731042">(Jul 21 2021 at 14:55)</a>:</h4>
<p>The conversion code is manually written.  Feel free to submit an issue, or better yet, a pull request :)</p>



<a name="246782002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246782002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246782002">(Jul 21 2021 at 21:27)</a>:</h4>
<p>Fair enough :-)</p>
<p>When I see this:</p>
<div class="codehilite" data-code-language="Java"><pre><span></span><code><span class="c1">// Generated on Sun, Feb 24, 2019 11:37+1100 for FHIR v4.0.0</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ValueSet40_50</span> <span class="kd">extends</span> <span class="n">VersionConvertor_40_50</span> <span class="p">{</span>
</code></pre></div>
<p>what is it generated from and how?</p>



<a name="246783663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246783663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246783663">(Jul 21 2021 at 21:44)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span></p>



<a name="246784732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246784732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246784732">(Jul 21 2021 at 21:55)</a>:</h4>
<p>It's not generated, it's manually written code.</p>



<a name="246784796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246784796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246784796">(Jul 21 2021 at 21:56)</a>:</h4>
<p>I'mk actually in the process of a giant overhaul right now of the convertors to include more controls for users</p>



<a name="246785714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246785714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246785714">(Jul 21 2021 at 22:03)</a>:</h4>
<p>being able to override or otherwise intercept all those conversion methods would be a great option</p>



<a name="246786646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246786646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246786646">(Jul 21 2021 at 22:11)</a>:</h4>
<p>It is in the works right now</p>



<a name="246786663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246786663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246786663">(Jul 21 2021 at 22:11)</a>:</h4>
<p>but it is a MASSIVE overhaul</p>



<a name="246786784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246786784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246786784">(Jul 21 2021 at 22:12)</a>:</h4>
<p>right now the first stage will be to allow users to custom handle extensions based on path, in addition to providing the ability to override resource conversion altogether for certain types if they want</p>



<a name="246786799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246786799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246786799">(Jul 21 2021 at 22:12)</a>:</h4>
<p>there are a few open github issues on this</p>



<a name="246786818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/version%20conversion%20-%20VersionConvertor_40_50/near/246786818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/version.20conversion.20-.20VersionConvertor_40_50.html#246786818">(Jul 21 2021 at 22:13)</a>:</h4>
<p>I'm planning to close them all with one big commit</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
