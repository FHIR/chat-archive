---
layout: page
title: "FHIR Chat  · FHIR Version extension URIs · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html">FHIR Version extension URIs</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="269063018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/269063018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#269063018">(Jan 24 2022 at 05:58)</a>:</h4>
<p>This section of the FHIR spec: <a href="http://build.fhir.org/versions.html#extensions">http://build.fhir.org/versions.html#extensions</a> describes / defines how to use URIs of the form <code>http://hl7.org/fhir/[version]/StructureDefinition/extension-[Path]</code> to reference elements from an arbitrary FHIR Version as an extension element.</p>
<p>It also states:</p>
<blockquote>
<p>The [Path] is actually the <a href="http://ElementDefinition.id">ElementDefinition.id</a> from the relevant StructureDefinition for the element.</p>
</blockquote>
<p>However, the <a href="http://ElementDefinition.id">ElementDefinition.id</a> I wish to refer to ends with <code>.value[x]</code> which contains the characters "[" and "]" which are not permitted in a URI.</p>
<p>Should I instead be %-encoding these values leading to an extension looking like:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code>  <span class="nt">"extension"</span><span class="p">:</span> <span class="p">[{</span>
    <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"http://hl7.org/fhir/5.0/StructureDefinition/extension-ConceptMap.group.element.target.dependsOn.value%5Bx%5D"</span><span class="p">,</span>
    <span class="nt">"valueDateTime"</span><span class="p">:</span> <span class="s2">"2015-03-13"</span>
  <span class="p">}]</span>
</code></pre></div>



<a name="269097277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/269097277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#269097277">(Jan 24 2022 at 12:23)</a>:</h4>
<p>I think they were replaced with _ but I'm not 100% sure, I'll see if I can dig something out as reference material</p>



<a name="269206110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/269206110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#269206110">(Jan 25 2022 at 03:42)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> , _ would be good because %-encoding introduces variability around case (%5b %5B etc)</p>



<a name="269208043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/269208043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#269208043">(Jan 25 2022 at 04:17)</a>:</h4>
<p>The other question I have about this relates to what should be done in the case of a "sibling" element that is defined in terms of another element via a contentReference.  In my case, <code>ConceptMap.group.element.target.product</code> is defined by reference to <code>ConceptMap.group.element.target.dependsOn</code>, so does this imply correspondingly re-based element Paths/Ids?</p>



<a name="269208054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/269208054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#269208054">(Jan 25 2022 at 04:17)</a>:</h4>
<p><a href="/user_uploads/10155/qmYO0ltKJ9MVbaW3Ki6ExUxk/image.png">image.png</a> <br>
Yup, underscore.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/qmYO0ltKJ9MVbaW3Ki6ExUxk/image.png" title="image.png"><img src="/user_uploads/10155/qmYO0ltKJ9MVbaW3Ki6ExUxk/image.png"></a></div>



<a name="269208287"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/269208287" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#269208287">(Jan 25 2022 at 04:22)</a>:</h4>
<p>Great, so:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="w">  </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://hl7.org/fhir/5.0/StructureDefinition/extension-ConceptMap.group.element.target.dependsOn.value_x_"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"valueDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-13"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
</code></pre></div>
<p>and</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="w">  </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://hl7.org/fhir/5.0/StructureDefinition/extension-ConceptMap.group.element.target.product.value_x_"</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">"valueDateTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-13"</span><span class="w"></span>
<span class="w">  </span><span class="p">}]</span><span class="w"></span>
</code></pre></div>



<a name="269539110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/269539110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#269539110">(Jan 27 2022 at 08:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> is that underscore replacement approach documented somewhere in the spec?</p>



<a name="269543870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/269543870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#269543870">(Jan 27 2022 at 09:18)</a>:</h4>
<p>I don't remember.</p>



<a name="272344122"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/272344122" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#272344122">(Feb 18 2022 at 00:27)</a>:</h4>
<p>I've now tried running the latest command line validator on a ValueSet resource containing one of these extensions and it "doesn't work".<br>
The input included:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="w">        </span><span class="nt">"contains"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://hl7.org/fhir/5.0/StructureDefinition/extension-ValueSet.expansion.contains.property"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inactive"</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value[x]"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"valueBoolean"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://hl7.org/fhir/5.0/StructureDefinition/extension-ValueSet.expansion.contains.property"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"parent"</span><span class="w"></span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value_x_"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"302168000"</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w"></span>
<span class="w">        </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://snomed.info/sct"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74400008"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Appendicitis"</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w"></span>
</code></pre></div>
<p>and it accepts the <code>value[x]</code> (which includes the URI-invalid characters '[' and ']'), but rejects <code>value_x_</code></p>
<div class="codehilite"><pre><span></span><code>FHIR Validation tool Version 5.6.34 (Git# edd2c43e64b7). Built 2022-02-16T14:24:56.912Z (33 hours old)
  Java:   11.0.11 from /Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home on aarch64 (64bit). 8192MB available
  Paths:  Current = /Users/law223/Documents/SRC/ontoserver4, Package Cache = /Users/law223/.fhir/packages
  Params: -version 4.0 /tmp/vs.json
Loading
  Load FHIR v4.0 from hl7.fhir.r4.core#4.0.1 - 4575 resources (00:02.0868)
  Load hl7.terminology#3.0.0 - 3795 resources (00:01.0289)
  Terminology server http://tx.fhir.org - Version 2.0.12-SNAPSHOT (00:02.0789)
  Get set...  go (00:00.0067)
Validating
  Validate /tmp/vs.json   ..Detect format for /tmp/vs.json
Internal error in location for message: &#39;Error @1, 1: Premature ExpressionNode termination at unexpected token &quot;[&quot;&#39;, loc = &#39;ValueSet.expansion.contains[0].extension[1].extension[1][url=&#39;value_x_&#39;]&#39;, err = &#39;Sub-extension url &#39;value_x_&#39; is not defined by the Extension http://hl7.org/fhir/5.0/StructureDefinition/extension-ValueSet.expansion.contains.property&#39;
 00:02.0549
Done. Times: Loading: 00:07.0143, validation: 00:02.0549. Memory = 845Mb

*FAILURE*: 1 errors, 0 warnings, 1 notes
  Error @ ValueSet.expansion.contains[0].extension[1].extension[1][url=&#39;value_x_&#39;] (line 40, col7): Sub-extension url &#39;value_x_&#39; is not defined by the Extension http://hl7.org/fhir/5.0/StructureDefinition/extension-ValueSet.expansion.contains.property
  Information @ ValueSet.expansion.contains[0].extension[1].extension[1] (line 40, col7): This element does not match any known slice defined in the profile http://hl7.org/fhir/5.0/StructureDefinition/extension-ValueSet.expansion.contains.property
</code></pre></div>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> this looks like a tooling error?</p>



<a name="272348174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/272348174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#272348174">(Feb 18 2022 at 01:23)</a>:</h4>
<p>it should be just <code>value</code> according to decision made by FHIR-I</p>



<a name="272348334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/272348334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#272348334">(Feb 18 2022 at 01:25)</a>:</h4>
<p>Which also gives an error:</p>
<div class="codehilite"><pre><span></span><code>Internal error in location for message: &#39;Error @1, 1: Premature ExpressionNode termination at unexpected token &quot;[&quot;&#39;, loc = &#39;ValueSet.expansion.contains[0].extension[0].extension[1][url=&#39;value&#39;]&#39;, err = &#39;Sub-extension url &#39;value&#39; is not defined by the Extension http://hl7.org/fhir/5.0/StructureDefinition/extension-ValueSet.expansion.contains.property&#39;
Internal error in location for message: &#39;Error @1, 1: Premature ExpressionNode termination at unexpected token &quot;[&quot;&#39;, loc = &#39;ValueSet.expansion.contains[0].extension[1].extension[1][url=&#39;value&#39;]&#39;, err = &#39;Sub-extension url &#39;value&#39; is not defined by the Extension http://hl7.org/fhir/5.0/StructureDefinition/extension-ValueSet.expansion.contains.property&#39;
</code></pre></div>



<a name="272349232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/272349232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#272349232">(Feb 18 2022 at 01:39)</a>:</h4>
<p>I'm also running into questions with elements defined by content reference e.g.,</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="w">  </span><span class="nt">"ConceptMap.group.element.target.product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="s2">"@ConceptMap.group.element.target.dependsOn"</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">},</span><span class="w"></span>
</code></pre></div>
<p>the URI <code>http://hl7.org/fhir/5.0/StructureDefinition/extension-ConceptMap.group.element.target.product.value[x]</code> is rejected, and if I instead attempt to use <code>http://hl7.org/fhir/5.0/StructureDefinition/extension-ConceptMap.group.element.target.product</code> with a nested extension for the <code>value[x]</code> part, then the validator throws <code>org.hl7.fhir.exceptions.DefinitionException</code></p>
<div class="codehilite"><pre><span></span><code>Validation Infrastructure fail validating /tmp/cm.json: StructureDefinition http://hl7.org/fhir/5.0/StructureDefinition/extension-ConceptMap.group.element.target.product at Extension.value[x]: illegal constrained type @ConceptMap.group.element.target.dependsOn from base64Binary, boolean, canonical, code, date, dateTime, decimal, id, instant, integer, markdown, oid, positiveInt, string, time, unsignedInt, uri, url, uuid, Address, Age, Annotation, Attachment, CodeableConcept, Coding, ContactPoint, Count, Distance, Duration, HumanName, Identifier, Money, Period, Quantity, Range, Ratio, Reference, SampledData, Signature, Timing, ContactDetail, Contributor, DataRequirement, Expression, ParameterDefinition, RelatedArtifact, TriggerDefinition, UsageContext, Dosage, Meta in http://hl7.org/fhir/StructureDefinition/Extension
Exception in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: org.hl7.fhir.exceptions.DefinitionException: StructureDefinition http://hl7.org/fhir/5.0/StructureDefinition/extension-ConceptMap.group.element.target.product at Extension.value[x]: illegal constrained type @ConceptMap.group.element.target.dependsOn from base64Binary, boolean, canonical, code, date, dateTime, decimal, id, instant, integer, markdown, oid, positiveInt, string, time, unsignedInt, uri, url, uuid, Address, Age, Annotation, Attachment, CodeableConcept, Coding, ContactPoint, Count, Distance, Duration, HumanName, Identifier, Money, Period, Quantity, Range, Ratio, Reference, SampledData, Signature, Timing, ContactDetail, Contributor, DataRequirement, Expression, ParameterDefinition, RelatedArtifact, TriggerDefinition, UsageContext, Dosage, Meta in http://hl7.org/fhir/StructureDefinition/Extension
    at org.hl7.fhir.validation.ValidationEngine.validate(ValidationEngine.java:419)
    at org.hl7.fhir.validation.cli.services.ValidationService.validateSources(ValidationService.java:106)
    at org.hl7.fhir.validation.ValidatorCli.doValidation(ValidatorCli.java:279)
    at org.hl7.fhir.validation.ValidatorCli.main(ValidatorCli.java:164)
Caused by: org.hl7.fhir.exceptions.DefinitionException: StructureDefinition http://hl7.org/fhir/5.0/StructureDefinition/extension-ConceptMap.group.element.target.product at Extension.value[x]: illegal constrained type @ConceptMap.group.element.target.dependsOn from base64Binary, boolean, canonical, code, date, dateTime, decimal, id, instant, integer, markdown, oid, positiveInt, string, time, unsignedInt, uri, url, uuid, Address, Age, Annotation, Attachment, CodeableConcept, Coding, ContactPoint, Count, Distance, Duration, HumanName, Identifier, Money, Period, Quantity, Range, Ratio, Reference, SampledData, Signature, Timing, ContactDetail, Contributor, DataRequirement, Expression, ParameterDefinition, RelatedArtifact, TriggerDefinition, UsageContext, Dosage, Meta in http://hl7.org/fhir/StructureDefinition/Extension
    at org.hl7.fhir.r5.conformance.ProfileUtilities.checkTypeDerivation(ProfileUtilities.java:3199)
    at org.hl7.fhir.r5.conformance.ProfileUtilities.updateFromDefinition(ProfileUtilities.java:3056)
    at org.hl7.fhir.r5.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:1230)
    at org.hl7.fhir.r5.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:1094)
    at org.hl7.fhir.r5.conformance.ProfileUtilities.generateSnapshot(ProfileUtilities.java:658)
    at org.hl7.fhir.r5.context.SimpleWorkerContext.generateSnapshot(SimpleWorkerContext.java:816)
    at org.hl7.fhir.r5.context.SimpleWorkerContext.generateSnapshot(SimpleWorkerContext.java:786)
    at org.hl7.fhir.validation.BaseValidator.getXverExt(BaseValidator.java:1010)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkExtension(InstanceValidator.java:1680)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:5012)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4861)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4813)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:5035)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4861)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4813)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:5035)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4861)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4813)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:5035)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4861)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4813)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:5035)
    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4861)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4813)
    at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:4503)
    at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:4366)
    at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:5637)
    at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:763)
    at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:611)
    at org.hl7.fhir.validation.ValidationEngine.validate(ValidationEngine.java:441)
    at org.hl7.fhir.validation.ValidationEngine.validate(ValidationEngine.java:411)
    ... 3 more
</code></pre></div>



<a name="272743637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/272743637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#272743637">(Feb 21 2022 at 23:11)</a>:</h4>
<p>Based on current behaviour of the validator, it seems that I should be using <code>http://hl7.org/fhir/5.0/StructureDefinition/extension-ConceptMap.group.element.target.dependsOn.value</code> in the context of <code>target.product</code>.<br>
Does this seem correct <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> ?</p>



<a name="272747912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/272747912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#272747912">(Feb 22 2022 at 00:28)</a>:</h4>
<p>on my todo list</p>



<a name="272752048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/272752048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#272752048">(Feb 22 2022 at 01:52)</a>:</h4>
<p>which bit ? At the moment I just need clarity on what the extension URI should be so I can push out a stable release for a customer</p>



<a name="273611828"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/273611828" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#273611828">(Mar 01 2022 at 09:31)</a>:</h4>
<p>hey <span class="user-mention" data-user-id="191343">@Michael Lawley</span> just getting to this now (sorry). Quoting from <a href="https://jira.hl7.org/browse/FHIR-31348">https://jira.hl7.org/browse/FHIR-31348</a>:</p>
<blockquote>
<p>Will clarify that when referencing a polymorphic type, the extension URL is always for the base element.  E.g. "<a href="http://hl7.org/fhir/5.0/StructureDefinition/extension-Observation.value">http://hl7.org/fhir/5.0/StructureDefinition/extension-Observation.value</a>".  This is true even if the referenced element already exists in the version referencing the extension and only one or two 'distinct' polymorphic types are trying to be referenced. </p>
</blockquote>
<p>Therefore, this is correct:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="w">  </span><span class="nt">"expansion"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">"contains"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">      </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">          </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://hl7.org/fhir/5.0/StructureDefinition/extension-ValueSet.expansion.contains.property"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inactive"</span><span class="w"></span>
<span class="w">              </span><span class="p">},</span><span class="w"></span>
<span class="w">              </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"valueBoolean"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"></span>
<span class="w">              </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">          </span><span class="p">},</span><span class="w"></span>
<span class="w">          </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://hl7.org/fhir/5.0/StructureDefinition/extension-ValueSet.expansion.contains.property"</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="nt">"extension"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">              </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"code"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"parent"</span><span class="w"></span>
<span class="w">              </span><span class="p">},</span><span class="w"></span>
<span class="w">              </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value"</span><span class="p">,</span><span class="w"></span>
<span class="w">                </span><span class="nt">"valueCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"302168000"</span><span class="w"></span>
<span class="w">              </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">          </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">],</span><span class="w"></span>
<span class="w">        </span><span class="nt">"system"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://snomed.info/sct"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"74400008"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="nt">"display"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Appendicitis"</span><span class="w"></span>
<span class="w">      </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="273611861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/273611861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#273611861">(Mar 01 2022 at 09:31)</a>:</h4>
<p>the next release of the validator will call that valid (bug in the current one, nothing can be valid)</p>



<a name="273615522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Version%20extension%20URIs/near/273615522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Version.20extension.20URIs.html#273615522">(Mar 01 2022 at 10:02)</a>:</h4>
<p>Awesome, that's very helpful!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
