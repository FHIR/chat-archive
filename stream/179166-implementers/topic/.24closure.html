---
layout: page
title: "FHIR Chat  · $closure · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html">$closure</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153876624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876624">(Mar 14 2017 at 15:18)</a>:</h4>
<p>Who's got $closure implemented on a server with SNOMED and LOINC loaded?  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> 's responds but without content (unless I'm doing it wrong...):</p>
<div class="codehilite"><pre><span></span>POST
{
  &quot;resourceType&quot; : &quot;Parameters&quot;,
  &quot;parameter&quot; : [{
    &quot;name&quot; : &quot;name&quot;,
    &quot;valueString&quot; : &quot;eaab9a21-db9a-45e0-a400-0075eb19f790&quot;
  }, {
    &quot;name&quot; : &quot;concept&quot;,
    &quot;valueCoding&quot; : {
       &quot;system&quot; : &quot;http://snomed.info/sct&quot;,
       &quot;code&quot; : &quot;44054006&quot;
    }
  }]
}
</pre></div>



<a name="153876625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876625">(Mar 14 2017 at 15:19)</a>:</h4>
<p>Returns a 200 and an empty ConceptMAp</p>



<a name="153876626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876626">(Mar 14 2017 at 15:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> ?</p>



<a name="153876627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876627">(Mar 14 2017 at 15:22)</a>:</h4>
<p>I think either <span class="user-mention" data-user-id="191343">@Michael Lawley</span> and/or <span class="user-mention" data-user-id="191364">@Peter Jordan</span> have implemented it?  I may not be remembering exactly (there could be some others).  We can see what they have to say, and I can check further.</p>



<a name="153876677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876677">(Mar 14 2017 at 19:16)</a>:</h4>
<p>yes it's implemented </p>



<a name="153876678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876678">(Mar 14 2017 at 19:17)</a>:</h4>
<p>the first time you use a UUID as a name, you'll get an empty closure because it's the first entry into the table </p>



<a name="153876679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876679">(Mar 14 2017 at 19:19)</a>:</h4>
<p>did Michael and/or Peter also implement it? </p>



<a name="153876681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876681">(Mar 14 2017 at 19:21)</a>:</h4>
<p>yes Michael did. I know Peter was testing but don't remember him ever saying 'done'</p>



<a name="153876701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876701">(Mar 14 2017 at 20:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I'm following the instructions (I think) - initialize the table with a UUID - 200 OK.  Then POST with codings to add codes and return the closure...  I get a 200 OK from that operation as well, but an empty ConceptMap resource</p>



<a name="153876703"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876703" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876703">(Mar 14 2017 at 20:36)</a>:</h4>
<p>are there relationships? what is your posting sequence?</p>



<a name="153876704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876704">(Mar 14 2017 at 20:36)</a>:</h4>
<p>Sadly, still on my 'to do' list. Hope to complete on time for Madrid. Think Apelon might also have done this.</p>



<a name="153876705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876705">(Mar 14 2017 at 20:36)</a>:</h4>
<div class="codehilite"><pre>
</pre></div>



<a name="153876706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876706">(Mar 14 2017 at 20:38)</a>:</h4>
<div class="codehilite"><pre>POST /$closure
{
  &quot;resourceType&quot; : &quot;Parameters&quot;,
  &quot;parameter&quot; : [{
    &quot;name&quot; : &quot;name&quot;,
    &quot;valueString&quot; : &quot;eaab9a21-db9a-45e0-a400-0075eb19f790&quot;
  }
}
</pre></div>


<p>Returns a 200 OK - table initialized.  Then:</p>
<div class="codehilite"><pre>POST /$clousure
{
  &quot;resourceType&quot; : &quot;Parameters&quot;,
  &quot;parameter&quot; : [{
    &quot;name&quot; : &quot;name&quot;,
    &quot;valueString&quot; : &quot;eaab9a21-db9a-45e0-a400-0075eb19f790&quot;
  }, {
    &quot;name&quot; : &quot;concept&quot;,
    &quot;valueCoding&quot; : {
       &quot;system&quot; : &quot;http://snomed.info/sct&quot;,
       &quot;code&quot; : &quot;44054006&quot;
    }
  }]
}
</pre></div>


<p>returns a 200 OK with:</p>
<div class="codehilite"><pre>{
  &quot;resourceType&quot;: &quot;ConceptMap&quot;,
  &quot;id&quot;: &quot;40370ab0-de1c-47e1-8d59-e742749a6286&quot;,
  &quot;version&quot;: &quot;4&quot;,
  &quot;name&quot;: &quot;Updates for Closure Table eaab9a21-db9a-45e0-a400-0075eb19f790&quot;,
  &quot;status&quot;: &quot;active&quot;,
  &quot;experimental&quot;: true,
  &quot;date&quot;: &quot;2017-03-14T15:10:03Z&quot;
}
</pre></div>



<a name="153876707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876707">(Mar 14 2017 at 20:38)</a>:</h4>
<p>I never get any concepts back in the ConceptMap</p>



<a name="153876709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876709">(Mar 14 2017 at 20:43)</a>:</h4>
<p>so that's what's expected. You created a closure table. Then you entered a code in it. </p>



<a name="153876710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876710">(Mar 14 2017 at 20:43)</a>:</h4>
<p>at that point, there's only one snomed concept in the closure table, so there's no relationships generated</p>



<a name="153876713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876713">(Mar 14 2017 at 21:17)</a>:</h4>
<p>Confused - I want a closure of all codes above/below that code.  Isn't that the point?</p>



<a name="153876714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876714">(Mar 14 2017 at 21:17)</a>:</h4>
<p>no. read the doco again. maintaining a closure table is something different</p>



<a name="153876728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876728">(Mar 14 2017 at 21:51)</a>:</h4>
<p>It's building a transitive closure, yes?</p>



<a name="153876729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876729">(Mar 14 2017 at 21:53)</a>:</h4>
<p>So, if:</p>
<div class="codehilite"><pre>     A
    /   \
  B     C
 / \      / \
D E     F G
</pre></div>


<p>then you'll have A-&gt;B, A-&gt;D, A-&gt;E, etc. for all possible routes (10 total in this case neglecting self-reference)</p>



<a name="153876730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876730">(Mar 14 2017 at 21:57)</a>:</h4>
<p>So how do I get all 10 in this case? Do I have to enter all 10 codes? Seems...painful.</p>



<a name="153876734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876734">(Mar 14 2017 at 22:17)</a>:</h4>
<p>ok...got it working by adding codes at both ends - not what I was expecting, but I'm probably underestimating the volumes for SNOMED.</p>



<a name="153876764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876764">(Mar 15 2017 at 00:39)</a>:</h4>
<p>if you just want parents or chlidren, you can define a value set to expand for that. </p>



<a name="153876765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876765">(Mar 15 2017 at 00:39)</a>:</h4>
<p>maintaining a closure table is done like this so that it can handle expressions, version changes, translations etc on the terminology server side</p>



<a name="153876787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%24closure/near/153876787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.24closure.html#153876787">(Mar 15 2017 at 01:57)</a>:</h4>
<p>Yes, we've implemented <code>$closure</code>.<br>
The way to think of it is that it gives you (incrementally) the transitive closure of all the concepts you've added to it.  Zero or one concepts can only give you zero edges :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
