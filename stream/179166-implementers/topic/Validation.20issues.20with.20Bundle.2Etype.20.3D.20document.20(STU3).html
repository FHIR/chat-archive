---
layout: page
title: "FHIR Chat  · Validation issues with Bundle.type = document (STU3) · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20issues.20with.20Bundle.2Etype.20.3D.20document.20(STU3).html">Validation issues with Bundle.type = document (STU3)</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="177320018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20issues%20with%20Bundle.type%20%3D%20document%20%28STU3%29/near/177320018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rui Leite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20issues.20with.20Bundle.2Etype.20.3D.20document.20(STU3).html#177320018">(Oct 04 2019 at 08:38)</a>:</h4>
<p>Good morning,</p>
<p>We found an issue when validating a bundle message, with type=document. (we tried 2 validators: Public HAPI STU3 Server and Grahames STU3 server)</p>
<p>All the references inside the Composition resource (1st entry) are not validated(we have several references  to Practitioner Resources, and those resources do not have any entry).</p>
<p>We expected the Validator to return error, because there weren't any resources referenced.<br>
But instead we've got just warnings about other stuff.</p>
<p>Is this a bug or are we doing something wrong?</p>
<p>Thanks in Advance,<br>
Rui</p>



<a name="177327100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20issues%20with%20Bundle.type%20%3D%20document%20%28STU3%29/near/177327100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20issues.20with.20Bundle.2Etype.20.3D.20document.20(STU3).html#177327100">(Oct 04 2019 at 10:31)</a>:</h4>
<p>can you provide an example I can add to the validator tests?</p>



<a name="177355395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20issues%20with%20Bundle.type%20%3D%20document%20%28STU3%29/near/177355395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rui Leite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20issues.20with.20Bundle.2Etype.20.3D.20document.20(STU3).html#177355395">(Oct 04 2019 at 16:25)</a>:</h4>
<p>Sure, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> </p>
<p>Some notes: We had to add the resource Patient for the Composition.subject to pass through the validator.</p>
<p>On a side note:<br>
We have some doubts on the FHIR specification about the Composition Resource and the Composition.section.emptyReason:</p>
<p>+ A section must at least one of text, entries, or sub-sections<br>
+ A section can only have an emptyReason if it is empty</p>
<p>The definition of "empty" can be vague because:<br>
<strong><em>Definition: If the section is empty, why the list is empty. An empty section typically has some text explaining the empty reason.</em></strong><br>
The Composition.section can't have entries(?):<br>
Composition.section.entry: <strong><em>If there are no entries in the list, an emptyReason SHOULD be provided.</em></strong></p>
<p>A section with emptyReason has no sub-sections(?).</p>
<p>So a Composition.section.text <em>SHALL</em> exist?</p>
<p>Thanks.<br>
Here's the message:<br>
<a href="/user_uploads/10155/UNFqM1x49bw-mVtFxAwgQjfI/Bundle.document.json" target="_blank" title="Bundle.document.json">Bundle.document.json</a></p>



<a name="179016876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20issues%20with%20Bundle.type%20%3D%20document%20%28STU3%29/near/179016876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20issues.20with.20Bundle.2Etype.20.3D.20document.20(STU3).html#179016876">(Oct 25 2019 at 02:22)</a>:</h4>
<p>ok fixed next release - 68 errors from that bundle now.</p>



<a name="179016930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20issues%20with%20Bundle.type%20%3D%20document%20%28STU3%29/near/179016930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20issues.20with.20Bundle.2Etype.20.3D.20document.20(STU3).html#179016930">(Oct 25 2019 at 02:24)</a>:</h4>
<p>"A section can only have an emptyReason if it is empty" - that is, if there is no entries. I'm not sure about sub-sections. As you say, typically there will be a narative explaining the empty reason. You could create a task to clarify this</p>



<a name="207240366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20issues%20with%20Bundle.type%20%3D%20document%20%28STU3%29/near/207240366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20issues.20with.20Bundle.2Etype.20.3D.20document.20(STU3).html#207240366">(Aug 18 2020 at 09:38)</a>:</h4>
<p>Just came up in the german stream: cmp-1 on composition is: <code>text.exists() or entry.exists() or section.exists()</code> which doesn't work if it is empty with an empty reason. So cmp-1 should be: <code>text.exists() or entry.exists() or section.exists() or emptyReason.exists()</code></p>



<a name="207240370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20issues%20with%20Bundle.type%20%3D%20document%20%28STU3%29/near/207240370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20issues.20with.20Bundle.2Etype.20.3D.20document.20(STU3).html#207240370">(Aug 18 2020 at 09:38)</a>:</h4>
<p>right?</p>



<a name="207247827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20issues%20with%20Bundle.type%20%3D%20document%20%28STU3%29/near/207247827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20issues.20with.20Bundle.2Etype.20.3D.20document.20(STU3).html#207247827">(Aug 18 2020 at 11:23)</a>:</h4>
<p>I agree</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
