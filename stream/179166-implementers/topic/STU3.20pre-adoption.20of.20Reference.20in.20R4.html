---
layout: page
title: "FHIR Chat  · STU3 pre-adoption of Reference in R4 · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html">STU3 pre-adoption of Reference in R4</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="214203982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/STU3%20pre-adoption%20of%20Reference%20in%20R4/near/214203982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html#214203982">(Oct 22 2020 at 15:30)</a>:</h4>
<p>I have a STU3 API that wants to be able to use HealthcareService as the recipient and sender of a Communication. This has been added for Communication in R4. What's the best way to achieve this (other than going to R4!). Is it to create an extension (but that might look a bit odd as you'd have a different concept name - "senderExtension" to the actual concept name "sender"). Is there a good pre-adoption route for adding references?</p>



<a name="214205219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/STU3%20pre-adoption%20of%20Reference%20in%20R4/near/214205219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html#214205219">(Oct 22 2020 at 15:39)</a>:</h4>
<p>There is a standard way to create extensions to back-port elements: <a href="http://hl7.org/fhir/r4/versions.html#extensions">http://hl7.org/fhir/r4/versions.html#extensions</a></p>



<a name="214554875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/STU3%20pre-adoption%20of%20Reference%20in%20R4/near/214554875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html#214554875">(Oct 26 2020 at 10:09)</a>:</h4>
<p>Michele - thanks for the link. My issue isn't about elements that missing from STU3, but additional choices on a Reference. Its a bit like the STU3 issue didn't have many references to PractitionerRole (which were put in for R4). So I guess I'll have to create an extension for a STU3 Communication to be able to have a HealthcareService reference for sender &amp; recipient. Just seems a bit of a shame to complicate the profile in this way to add in extra choices in the References!</p>



<a name="214574466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/STU3%20pre-adoption%20of%20Reference%20in%20R4/near/214574466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html#214574466">(Oct 26 2020 at 13:43)</a>:</h4>
<p>Ah I see, sorry I misread it</p>



<a name="214596370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/STU3%20pre-adoption%20of%20Reference%20in%20R4/near/214596370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html#214596370">(Oct 26 2020 at 16:19)</a>:</h4>
<p><span class="user-mention" data-user-id="192158">@Dave Barnet</span>  A pattern for this was mentioned lately on an FHIR-I call. <br>
Instead of adding a new extension to replace the attribute ("e.g. mySender"), you can use the existing reference (sender) and just not have a value in it. <br>
And then you put an extension for the new type in there. If I remember correctly, this "empty" reference is ok (that was the surprising part, for me), and it is closer to the original meaning.</p>



<a name="214601138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/STU3%20pre-adoption%20of%20Reference%20in%20R4/near/214601138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html#214601138">(Oct 26 2020 at 16:50)</a>:</h4>
<p>On the page <a href="http://hl7.org/fhir/stu3/references.html">http://hl7.org/fhir/stu3/references.html</a> it does say "At least one of reference, identifier and display SHALL be present (unless an extension is provided)." So Something like <br>
&lt;sender&gt;<br>
    &lt;extension url="<a href="https://fhir.nhs.uk/STU3/StructureDefinition/Extension-RefHealthcareService">https://fhir.nhs.uk/STU3/StructureDefinition/Extension-RefHealthcareService</a>"&gt;<br>
        &lt;valueReference&gt;<br>
             &lt;reference value="HealthcareServicePatient/ABC123" /&gt;<br>
        &lt;/valueReference<br>
    &lt;/extension&gt;<br>
&lt;/sender&gt;</p>
<p>That works for me!</p>



<a name="214666550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/STU3%20pre-adoption%20of%20Reference%20in%20R4/near/214666550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html#214666550">(Oct 27 2020 at 07:07)</a>:</h4>
<p>Not sure I agree with this. I'm not sure of the scenario here but I'm seeing this as MessageHeader. </p>
<p>In that case I have scenarios where HealthcareService is a legitimate Sender and Receiver, more so the Recipient </p>
<p>Should MessageHeader be similar to CommunicationRequest and HealthcareService (and CareTeam) is a valid receiver? (and maybe requester/sender)</p>



<a name="214667142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/STU3%20pre-adoption%20of%20Reference%20in%20R4/near/214667142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html#214667142">(Oct 27 2020 at 07:19)</a>:</h4>
<p>On a side note. From a UK perspective and messaging. </p>
<p>I'm not sure it would be practical to send 'extranet' messages using PractitionerRole and HealthcareService, that expects internal organisation knowledge. <br>
For intranet messages HealthcareService and PractitionerRole may be more practical. </p>
<p>For pragmatic reasons it may be desirable to send pairs of references, Organisation+HealthcareService or Practitioner+PractitionerRole. Messaging infrastructure can handle what it understands.</p>



<a name="214696841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/STU3%20pre-adoption%20of%20Reference%20in%20R4/near/214696841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html#214696841">(Oct 27 2020 at 13:14)</a>:</h4>
<p>Right.  You shouldn't use Communication to serve the place of MessageHeader in messaging.  If you must use messaging, then use  messaging.  (Though it's better still to use REST from an interoperability/less negotiation/better re-use perspective.)</p>



<a name="214796295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/STU3%20pre-adoption%20of%20Reference%20in%20R4/near/214796295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html#214796295">(Oct 28 2020 at 04:56)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> nobody is suggesting that. If we are messaging within an organisation, sending to/from services/clinics seems reasonable.</p>



<a name="214797299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/STU3%20pre-adoption%20of%20Reference%20in%20R4/near/214797299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/STU3.20pre-adoption.20of.20Reference.20in.20R4.html#214797299">(Oct 28 2020 at 05:23)</a>:</h4>
<p>I'm sorry, I misread the thread when responding.  It's reasonable to ask that MessageHeader support HealthCareService.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
