---
layout: page
title: "FHIR Chat  · about canonical data type · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html">about canonical data type</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="190248461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190248461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Calderero <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190248461">(Mar 11 2020 at 03:45)</a>:</h4>
<p>Hi All,</p>
<p>I'm trying to confirm whether or not the canonical data type (i.e. <a href="http://build.fhir.org/datatypes.html#canonical" target="_blank" title="http://build.fhir.org/datatypes.html#canonical">http://build.fhir.org/datatypes.html#canonical</a>) can contain a relative url or it should  be an absolute url always. It seems odd to me for a canonical to contain a relative url, as in this example: <a href="http://build.fhir.org/questionnaireresponse-example-ussg-fht-answers.json.html" target="_blank" title="http://build.fhir.org/questionnaireresponse-example-ussg-fht-answers.json.html">http://build.fhir.org/questionnaireresponse-example-ussg-fht-answers.json.html</a></p>
<p>In that example, the QuestionnaireResponse seems to point to the Questionnaire resource id itself and not to its url.</p>



<a name="190248516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190248516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190248516">(Mar 11 2020 at 03:46)</a>:</h4>
<p><a href="http://hl7.org/fhir/references.html#canonical-fragments" target="_blank" title="http://hl7.org/fhir/references.html#canonical-fragments">http://hl7.org/fhir/references.html#canonical-fragments</a></p>



<a name="190248929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190248929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Calderero <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190248929">(Mar 11 2020 at 03:58)</a>:</h4>
<p>Sorry I don't understand. The QuestionnaireResponse points to an external Questionnaire, not to an internal one</p>
<div class="codehilite"><pre><span></span>&quot;questionnaire&quot;: &quot;Questionnaire/ussg-fht&quot;
</pre></div>


<p>Assuming the referenced Questionnaire has the definition:</p>
<div class="codehilite"><pre><span></span>&quot;url&quot;: &quot;http://abc&quot;,
&quot;version&quot;: &quot;1&quot;
</pre></div>


<p>I was expecting the QuestionnaireResponse <code>questionnaire</code> property to contain</p>
<div class="codehilite"><pre><span></span>&quot;questionnaire&quot;: &quot;http://abc&quot;
</pre></div>


<p>or</p>
<div class="codehilite"><pre><span></span>&quot;questionnaire&quot;: &quot;http://abc|1&quot;
</pre></div>



<a name="190248941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190248941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190248941">(Mar 11 2020 at 03:59)</a>:</h4>
<p>then you're right.</p>



<a name="190249067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190249067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Calderero <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190249067">(Mar 11 2020 at 04:03)</a>:</h4>
<p>So the example QuestionnaireResponse is wrong? Or is a <code>canonical</code> property allowed to contain relative url references to other resources by their resource id? If yes, what are those cases?</p>



<a name="190249143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190249143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190249143">(Mar 11 2020 at 04:04)</a>:</h4>
<p>example is wrong</p>



<a name="190249153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190249153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190249153">(Mar 11 2020 at 04:05)</a>:</h4>
<p>only case where relative urls are allowed is references to contained resources</p>



<a name="190251780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190251780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Calderero <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190251780">(Mar 11 2020 at 05:32)</a>:</h4>
<p>Thanks.</p>
<p>Some more questions: Suppose I have the following Questionnaire:</p>
<div class="codehilite"><pre><span></span>id: xyz
url: http://abc
version: 1
name: myquestion
</pre></div>


<p>and QuestionnaireResponse:</p>
<div class="codehilite"><pre><span></span>id: qr1
questionnaire: &quot;http://abc&quot;
</pre></div>


<p>I suppose the following searches would work and return me QuestionnaireResponse with resource id qr1?</p>
<div class="codehilite"><pre><span></span>[baseurl]/QuestionnaireResponse?questionnaire=Questionnaire/xyz
</pre></div>


<div class="codehilite"><pre><span></span>[baseurl]/QuestionnaireResponse?questionnaire.name=myquestion
</pre></div>


<div class="codehilite"><pre><span></span>[baseurl]/QuestionnaireResponse?questionnaire=http://abc
</pre></div>


<div class="codehilite"><pre><span></span>[baseurl]/QuestionnaireResponse?questionnaire=http://abc|1
</pre></div>



<a name="190252192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190252192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190252192">(Mar 11 2020 at 05:47)</a>:</h4>
<p>2 and 3 yes. I don't think that #1 works, and #4 is not right</p>



<a name="190272425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190272425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190272425">(Mar 11 2020 at 11:43)</a>:</h4>
<p>[deleted] my mistake</p>



<a name="190272906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190272906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190272906">(Mar 11 2020 at 11:51)</a>:</h4>
<p><a href="https://www.hl7.org/fhir/search.html" target="_blank" title="https://www.hl7.org/fhir/search.html">https://www.hl7.org/fhir/search.html</a> says:</p>
<blockquote>
<p>For canonical references, servers SHOULD support searching by Canonical URLs, and SHOULD support automatically detecting a |[version] portion as part of the search parameter and interpreting that portion as a search on the business version of the target resource.</p>
</blockquote>



<a name="190272989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190272989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190272989">(Mar 11 2020 at 11:52)</a>:</h4>
<p>so it seems like #4 SHOULD work on some servers, although I'm not sure why the spec has a SHOULD here...</p>



<a name="190286322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190286322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190286322">(Mar 11 2020 at 14:23)</a>:</h4>
<p>Agree that #4 looks like it should work.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, what's wrong with it?<br>
Note that #2 is suspect because there's no requirement that <a href="http://Questionnaire.name" target="_blank" title="http://Questionnaire.name">Questionnaire.name</a> be unique - within any context.</p>



<a name="190324139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190324139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190324139">(Mar 11 2020 at 19:54)</a>:</h4>
<p>whats' wrong with 4 is that I don't think there's any assigned meaning to using a versioned canonical reference in a reference like that</p>



<a name="190340076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190340076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190340076">(Mar 11 2020 at 22:43)</a>:</h4>
<p>So we haven't defined search for versioned canonical URLs?</p>



<a name="190340092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190340092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190340092">(Mar 11 2020 at 22:43)</a>:</h4>
<p>Is that something we can/should do?</p>



<a name="190340535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/190340535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#190340535">(Mar 11 2020 at 22:48)</a>:</h4>
<p>we have on the url itself, but not if it's a reference like that</p>



<a name="191268065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/191268065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guillermo Rdguez Glez <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#191268065">(Mar 20 2020 at 16:36)</a>:</h4>
<p>We are building an ordering platform for lab tests, allowing practitioner to order tests from Quest Diagnostics, LabCorp and others.<br>
We are following the <a href="https://build.fhir.org/ig/HL7/fhir-order-catalog/labservices.html" target="_blank" title="https://build.fhir.org/ig/HL7/fhir-order-catalog/labservices.html">IG</a> to model our catalogs but encountered a problem when trying to create a link between the PlanDefinition (service) and the ActivityDefinition (procedure):<br>
The link is made using a canonical reference. This poses a problem since we are using Quest’s masterfile and the links between services and procedures are local references, we are not sure whose responsibility is it to create those urls nor what rules should we follow. If they were regular references it would be easy, we just map the masterfile to PlanDefinitions and ActivityDefinitions, but as it is, we don’t know what the links should be.<br>
The examples in the IG use local references and according to <a href="#narrow/stream/179166-implementers/topic/about.20canonical.20data.20type/near/190249143" title="#narrow/stream/179166-implementers/topic/about.20canonical.20data.20type/near/190249143">Grahame</a> those are wrong.<br>
Can you please show us an example of a proper canonical url for a case like the ones in the IG examples or point us in the right direction?<br>
Thanks in advance</p>



<a name="191272844"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/191272844" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#191272844">(Mar 20 2020 at 17:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>



<a name="191309315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/191309315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#191309315">(Mar 20 2020 at 22:12)</a>:</h4>
<p>So the canonical is a global, version-stable identifier for the artifact. Here's an example of a <a href="http://build.fhir.org/ig/HL7/cqf-recommendations/PlanDefinition-anc-contact-schedule.html" target="_blank" title="http://build.fhir.org/ig/HL7/cqf-recommendations/PlanDefinition-anc-contact-schedule.html">WHO Antenatal Care Contact Schedule</a> referencing a <a href="http://build.fhir.org/ig/HL7/cqf-recommendations/PlanDefinition-anc-contact.html" target="_blank" title="http://build.fhir.org/ig/HL7/cqf-recommendations/PlanDefinition-anc-contact.html">Contact Plan Definition</a>. I would think in this case the canonical's would be the base URL of the steward (Quest) + <code>/PlanDefinition/&lt;name&gt;</code>, or <code>/ActivityDefinition/name</code>, and then when you reference, if it's a version-independent reference, just the canonical, if it's a version-specific reference, then <code>&lt;canonical&gt;|&lt;version&gt;</code>.</p>



<a name="191482921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/191482921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guillermo Rdguez Glez <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#191482921">(Mar 23 2020 at 14:45)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> ,  in the case of Quest, it defines different CDC per labsite(TMP, MIA, NEL, ...), with lab services identifiers that may or may not match across other labsites, so, I am not sure including labsite code in the canonical url may be a good idea because it becomes too specific(not global for quest procedures), nor using the identifier when same procedure may have different identifiers on different labsites.</p>
<p>Example:<br>
Panel: 10010<br>
Name: TORCH PANEL, CONVALESCENT<br>
LabSite: NEL </p>
<p>what should be an accurate canonical url for this case?</p>
<p><code>http://www.questdiagnostics.com/ActivityDefinition/10010</code><br>
or<br>
<code>http://www.questdiagnostics.com/NEL/ActivityDefinition/10010</code></p>
<p>keep in mind each Quest lab service identifier is labsite specific, each labsite manages its lab services catalog, so, we can say, Quest needs labsite in addition to lab service identifier in order to unambiguously resolve labservice.</p>
<p>Thank you for helping, in advance!</p>



<a name="191668705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/191668705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guillermo Rdguez Glez <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#191668705">(Mar 24 2020 at 20:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  can you help me on that <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span> please?</p>



<a name="191952156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/191952156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Muir <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#191952156">(Mar 26 2020 at 21:34)</a>:</h4>
<p>I defer to Bryn, but adding a comment.   As you have noted, labs need unique identifiers for their test panels and components since LOINC , CPT, etc are not specific enough, but that identifier will vary across Quest sub lab entities/locations.   Also the Name would not  be consistent across different sub lab entities.  As a suggestion ,consider <a href="http://www.questdiagnostics.com/ActivityDefinition/NEL/10010" title="http://www.questdiagnostics.com/ActivityDefinition/NEL/10010">http://www.questdiagnostics.com/ActivityDefinition/NEL/10010</a> where ActivityDefinition could be LOINC  rather  than just name (since need to consider units such as mass/volume vs Moles/volume, etc).  Thus searching for a specific LOINC could pull irrespective of LAB entity (NEL 3 char identifier)  and yet have  have the required unique ID.</p>



<a name="192069040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/192069040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guillermo Rdguez Glez <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#192069040">(Mar 27 2020 at 19:30)</a>:</h4>
<p><span class="user-mention" data-user-id="195980">@Peter Muir</span> I don't understand if you are actually recommending to avoid using LOINC or recommending it. I am so sorry <span aria-label="disappointed" class="emoji emoji-1f61e" role="img" title="disappointed">:disappointed:</span> .  Or are you recommending using both, LOINC(when available) and specific LAB identifier? Notice  10010 is the lab service identifier inside specific LAB. What do you mean with name? I don't understand if you are recommending to change "ActivityDefinitin" with a LOINC, or LAB/quest-id combination at all. Who am I supposed to use LOINC in order to compose an accurate ActivityDefinition canonical url. Should I keep a separate catalog for each specific quest lab(NEL, MIA, ...). I really appreciate your help. Thanks in advance.</p>



<a name="192083458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/about%20canonical%20data%20type/near/192083458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/about.20canonical.20data.20type.html#192083458">(Mar 27 2020 at 21:36)</a>:</h4>
<p>For canonicals managed by Quest, I'd use the Quest ids, not LOINC.  It's entirely possible that Quest might have multiple ActivityDefinitions (with different codes) that share the same LOINC value.  And of course there might be some that that won't have a corresponding LOINC code at all.  In theory, LOINC might eventually define ActivityDefinitions themselves (which of course would have canonicals based on the LOINC codes).  The Quest ActivityDefinitions could point to those using the 'instantiates' property.  In the meantime, they can also link to the relevant LOINC using one of the codings in ActivityDefinition.code.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
