---
layout: page
title: "FHIR Chat  · A JSON format with ordered &quot;keys&quot; · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/A.20JSON.20format.20with.20ordered.20.22keys.22.html">A JSON format with ordered &quot;keys&quot;</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="155277243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/A%20JSON%20format%20with%20ordered%20%22keys%22/near/155277243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/A.20JSON.20format.20with.20ordered.20.22keys.22.html#155277243">(Jan 16 2019 at 18:48)</a>:</h4>
<p>At the connectathon, there was a breakout session in which discussion briefly digressed to an unrelated problem of parsing extremely large FHIR resources from JSON, in which the keys are unordered, which can cause processing of the parsed resource (if using a streaming parser) to be less efficient than it would be if the order of the keys could be specified and fixed.  There was no serious suggestion of changing the format, but I got to thinking about it anyway, and it occurred to me if such an opportunity presented itself at some point in the future (which I gather is not likely now that R4 is out), one could constrain the order of the elements by using an array.  Instead of having the JSON for a resource look like:</p>
<div class="codehilite"><pre><span></span>{
   key1: value1,
   key2: value2,
   key3: value3
}
</pre></div>


<p>One could have:</p>
<div class="codehilite"><pre><span></span>[
  {key1: value1},
  {key2: value2},
  {key3: value3}
]
</pre></div>


<p>...in which case the order of the keys would be guaranteed when serialized, and presumably the order could then be required in the resource definition.</p>



<a name="155293746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/A%20JSON%20format%20with%20ordered%20%22keys%22/near/155293746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/A.20JSON.20format.20with.20ordered.20.22keys.22.html#155293746">(Jan 16 2019 at 22:23)</a>:</h4>
<p>do not think, we should simulate xml :)   </p>
<p>but some tricks can be done to improve streaming processing support:</p>
<ul>
<li>define  ndjson format for search responses etc</li>
<li>use something like rails root_in_json parameter  - <a href="https://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html" target="_blank" title="https://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html">https://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html</a></li>
</ul>



<a name="155293959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/A%20JSON%20format%20with%20ordered%20%22keys%22/near/155293959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/A.20JSON.20format.20with.20ordered.20.22keys.22.html#155293959">(Jan 16 2019 at 22:26)</a>:</h4>
<p>ndjson support:</p>
<div class="codehilite"><pre><span></span>GET /Patient?_format=ndjson

{resourceType: &quot;Bundle&quot;,  totla: ...}
{rt: Patient ....}
{rt: Patient ...}
....

``
</pre></div>



<a name="155294029"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/A%20JSON%20format%20with%20ordered%20%22keys%22/near/155294029" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/A.20JSON.20format.20with.20ordered.20.22keys.22.html#155294029">(Jan 16 2019 at 22:27)</a>:</h4>
<p>meta outside how RoR do:</p>
<div class="codehilite"><pre><span></span>{Patient: {resourcebody}}
{Encounter: {resourcebody}}
{Practitioner: {resourcebody}}
</pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
