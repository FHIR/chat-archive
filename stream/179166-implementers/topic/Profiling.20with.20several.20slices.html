---
layout: page
title: "FHIR Chat  · Profiling with several slices · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html">Profiling with several slices</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="174965982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174965982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174965982">(Sep 05 2019 at 11:56)</a>:</h4>
<p>Dear community. <br>
I have a problem with slicing. We made a profile on observations for woundsize with several components (length, width, depth and area). These components we want to code with loinc and e.g. snomed ct. Therefore we did not only slice the component, but also the coding in the components (see <a href="https://simplifier.net/posithera/positherawoundsize" target="_blank" title="https://simplifier.net/posithera/positherawoundsize">https://simplifier.net/posithera/positherawoundsize</a>). <br>
For the slices we need a discriminator. We chose "code.coding.code" for components, which is now not applicable due to the slice on coding. <br>
Now we are unsure how to solve this problem. Has anyone an idea to cope with such a situation? Thanks in advance!</p>



<a name="174970877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174970877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174970877">(Sep 05 2019 at 13:03)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="196115">@Mareike Przysucha</span> -- I think the recommended way forward now would be to use <code>pattern[x]</code> to fix the codes within the component slices.  Then you only have one level of slicing.  There was actually some recent discussion regarding how best to fix codes (slice+fixed[x] vs. pattern[x]) here: <a href="#narrow/stream/179166-implementers/topic/Fixed.20Code.20vs.20Pattern" title="#narrow/stream/179166-implementers/topic/Fixed.20Code.20vs.20Pattern">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Fixed.20Code.20vs.20Pattern</a> (note, it went off-topic toward the end, so read from the top).</p>



<a name="174971016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174971016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174971016">(Sep 05 2019 at 13:04)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191469">@Chris Moesel</span> . thanks for your reply, I will read the recommended topic.</p>



<a name="174971230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174971230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174971230">(Sep 05 2019 at 13:07)</a>:</h4>
<p>Note that discriminator paths are relative to the sliced element:<br>
<a href="http://hl7.org/fhir/profiling.html#discriminator" target="_blank" title="http://hl7.org/fhir/profiling.html#discriminator">http://hl7.org/fhir/profiling.html#discriminator</a><br>
In this case, you would probably like to discriminate on <code>system</code>, not on <code>code</code>.</p>



<a name="174971324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174971324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174971324">(Sep 05 2019 at 13:08)</a>:</h4>
<p>There's a bit of back and forth in the topic -- so it's a kind of bumpy ride -- but the end result is to use <code>pattern[x]</code> to fix Coding and CodeableConcept types.</p>



<a name="174971565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174971565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174971565">(Sep 05 2019 at 13:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> -- if they're trying to discriminate components based on the fixed code in the component, then I think they'd actually want to discriminate on <code>code.coding.code</code> <em>and</em> <code>code.coding.system</code>, wouldn't they?</p>



<a name="174971687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174971687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174971687">(Sep 05 2019 at 13:12)</a>:</h4>
<p>Correct. Nested slices would use a short(er) discriminator path. Apologies if I understood incorrectly.</p>



<a name="174978710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174978710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174978710">(Sep 05 2019 at 14:26)</a>:</h4>
<p>That drives me to the next Part. I've never worked with patterns before. So I am unsure how it can solve my problem... I am sorry that I don't know. Probably I am just too stupid to use Forge in this context.</p>
<p>I also don't know if the composition of "code" and "system" will do the job as we have 8 pairs (4 component slices x 2 code systems [LOINC and SNOMED]), and two of them identifying the same component. Probably a fixed "text" with minimum cardinality "1"?</p>



<a name="174984733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174984733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174984733">(Sep 05 2019 at 15:27)</a>:</h4>
<p><span class="user-mention" data-user-id="196115">@Mareike Przysucha</span> I'm not sure what you mean by "two of them identifying the same component"?  I looked at the Simplifier link, but maybe you can point out specific examples?  I agree with Chris and Michel that likely pattern is going to be the best approach to take, but if you do have requirements that you know or think that it can't meet, that would be good to know and further explore.</p>



<a name="174984912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174984912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174984912">(Sep 05 2019 at 15:28)</a>:</h4>
<p>With pattern, if you wanted to, you could define a pattern that included two codings - one from LOINC and one from SNOMED if that's what you really wanted (though be aware that it then wouldn't match if the instance only had a coding match from one of those two code systems).</p>



<a name="174993003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174993003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174993003">(Sep 05 2019 at 16:53)</a>:</h4>
<blockquote>
<p>That drives me to the next Part. I've never worked with patterns before. So I am unsure how it can solve my problem...<br>
I <em>thought</em> your problem had to do with multiple levels of slicing; in which case, using a pattern to fix the code means you <em>don't</em> have to slice <code>coding</code> anymore (so now you only have one level of slicing).  If I misunderstood the problem, I apologize!</p>
</blockquote>
<p>I somehow missed that you were using a LOINC code and a SNOMED code <em>together</em> for each component's <code>code</code> property.  If you want to enforce that they <em>both</em> must be there, then <code>pattern[x]</code> still seems the appropriate choice.  If you want to enforce that <em>either</em> the LOINC code <em>or</em> the SNOMED code is there, then the best approach may be to define value sets grouping the like codes and bind to those -- although <span class="user-mention" data-user-id="191405">@Rob Hausam</span> is better qualified than I am to comment on that.</p>



<a name="174995548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174995548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174995548">(Sep 05 2019 at 17:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> What I meant was, that e.g. LOINC-Code 39126-8 and SNOMED CT-Code 401238003 both code the wound length. Probably I expressed myself a little bit confusing.</p>



<a name="174995718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174995718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174995718">(Sep 05 2019 at 17:20)</a>:</h4>
<p>The loinc code shall be mandatory, the snomed ct code or other codes shall be optional. Probably this makes it easier.</p>



<a name="174996692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174996692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174996692">(Sep 05 2019 at 17:30)</a>:</h4>
<p>Would the SNOMED codes be captured as components or values?</p>



<a name="174996959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174996959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174996959">(Sep 05 2019 at 17:33)</a>:</h4>
<p>in case this might help: <a href="https://simplifier.net/posithera/observation-example" target="_blank" title="https://simplifier.net/posithera/observation-example">https://simplifier.net/posithera/observation-example</a> is an example how we think an observation might look.</p>



<a name="174997579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174997579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174997579">(Sep 05 2019 at 17:40)</a>:</h4>
<p>Ok.  And the LOINCs are mandatory.  The SNOMEDs are optional.  Do you need to mention the SNOMEDs at all in the profile?  The base rule is that implementers are free to send whatever SNOMED or other codes they like in addition to the 'mandated' code used for slicing.  Unless there's some sort of rule around conformance expectations you want a validator to test, it's probably simplest to not talk to the SNOMED at all or just mention the recommended/preferred SNOMED code it in a comment rather than doing a bunch of complicated profile work that'll make the profile harder to read.  Only add complexity if it makes a difference from a tooling/validation perspective.</p>



<a name="174998280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/174998280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#174998280">(Sep 05 2019 at 17:47)</a>:</h4>
<p>It was an idea of one of my colleagues who wanted to show that we can have several codings (LOINC, SNOMED, one of our cooperators in a project) and that we can say which codes to use for each CodeSystem.</p>



<a name="175001718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/175001718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#175001718">(Sep 05 2019 at 18:25)</a>:</h4>
<p>You can show that in examples and provide guidance in text.  That keeps the profiles 'easy'.  If you're going to encode it in the profiles, there should be a validation reason for doing it - because it's going to make them harder to read/understand.  That said, you can certainly do it.</p>



<a name="175001838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Profiling%20with%20several%20slices/near/175001838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mareike Przysucha <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Profiling.20with.20several.20slices.html#175001838">(Sep 05 2019 at 18:26)</a>:</h4>
<p>Thanks. Then I will change the profile accordingly and provide the example in the implementation guide. Thank you all for your help!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
