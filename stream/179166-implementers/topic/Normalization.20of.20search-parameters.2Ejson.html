---
layout: page
title: "FHIR Chat  · Normalization of search-parameters.json · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html">Normalization of search-parameters.json</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153988565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jaime Olivares <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988565">(Aug 17 2018 at 20:55)</a>:</h4>
<p>We are using search-parameters.json as a base for generating search filter pages in the UI. So far so good with one exception. I will use the following case, trimmed for the sake of simplicity:</p>
<div class="codehilite"><pre><span></span>      &quot;resource&quot; : {
          &quot;resourceType&quot; : &quot;SearchParameter&quot;,
          &quot;id&quot; : &quot;medications-code&quot;,
          &quot;url&quot; : &quot;http://hl7.org/fhir/SearchParameter/medications-code&quot;,
          &quot;name&quot; : &quot;code&quot;,
          &quot;date&quot; : &quot;2018-07-05T19:08:58+00:00&quot;,
          &quot;description&quot; : &quot;Multiple Resources: \r\n\r\n* [Medication](medication.html): Codes that identify this medication\r\n* [MedicationRequest](medicationrequest.html): Return prescriptions of this medication code\r\n* [MedicationAdministration](medicationadministration.html): Return administrations of this medication code\r\n* [MedicationStatement](medicationstatement.html): Return statements of this medication code\r\n* [MedicationDispense](medicationdispense.html): Returns dispenses of this medicine code\r\n&quot;,
          &quot;code&quot; : &quot;code&quot;,
          &quot;base&quot; : [&quot;Medication&quot;,
              &quot;MedicationRequest&quot;,
              &quot;MedicationAdministration&quot;,
              &quot;MedicationStatement&quot;,
              &quot;MedicationDispense&quot;],
          &quot;type&quot; : &quot;token&quot;,
          &quot;expression&quot; : &quot;Medication.code | MedicationRequest.medication.as(CodeableConcept) | MedicationAdministration.medication.as(CodeableConcept) | MedicationStatement.medication.as(CodeableConcept) | MedicationDispense.medication.as(CodeableConcept)&quot;,
          &quot;xpath&quot; : &quot;f:Medication/f:code | f:MedicationRequest/f:medicationCodeableConcept | f:MedicationAdministration/f:medicationCodeableConcept | f:MedicationStatement/f:medicationCodeableConcept | f:MedicationDispense/f:medicationCodeableConcept | f:MedicationStatement/f:medicationCodeableConcept | f:MedicationRequest/f:medicationCodeableConcept | f:MedicationDispense/f:medicationCodeableConcept | f:MedicationAdministration/f:medicationCodeableConcept&quot;,
          &quot;xpathUsage&quot; : &quot;normal&quot;
      }
</pre></div>


<p>Here the parameter <code>medications-code</code> can be applied to several resource types,  as detailed in the <code>.base</code> <strong>array</strong>. Now the way  as <code>.description</code>, <code>.expression</code>and <code>.xpath</code>are formatted is inconsistent and not machine-friendly. I would easier and safer to process if they are arrays rather than using \n and pipe separators.</p>



<a name="153988567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988567">(Aug 17 2018 at 20:57)</a>:</h4>
<p>.expression and .xpath are both valid expressions that don't need any more processing than running in either and xpath or a fhirpath engine</p>



<a name="153988570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jaime Olivares <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988570">(Aug 17 2018 at 21:02)</a>:</h4>
<p>I am focusing on the way they are formatted (with pipe) rather than a more json-ish way (array or even object), which is easier to consume. Now, regarding your comment that "don't need any more processing than for xpath or fhirpath", that's excluding  implementers looking for mining that information in new ways, and not only for the use-cases you have already considered.</p>



<a name="153988571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988571">(Aug 17 2018 at 21:04)</a>:</h4>
<p>XPath and FHIRPath are languages.  The FHIR spec doesn't control how they look.  There's nothing "JSON" about them.  XPath doesn't even run on JSON instances...</p>



<a name="153988572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988572">(Aug 17 2018 at 21:04)</a>:</h4>
<p>ok what kind of uses do you have in mind?</p>



<a name="153988575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jaime Olivares <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988575">(Aug 17 2018 at 21:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  We already do it: We use this file as an input for a form generator 'Filter Form' based on the resource type. It works pretty well.</p>



<a name="153988577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988577">(Aug 17 2018 at 21:07)</a>:</h4>
<p>well, I do that too; that's an expected use. so I see the issue with description, which I don't mine into the form. but not the xpath or expression</p>



<a name="153988578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jaime Olivares <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988578">(Aug 17 2018 at 21:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> the json file can contain the information in any format. it can be x-path or fhirpath or <strong>something more agnostic</strong>. The array would  be more agnostic.<br>
Regarding the <code>description</code>, I guest that verbose format does'n t correspond to any 'language'.</p>



<a name="153988579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jaime Olivares <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988579">(Aug 17 2018 at 21:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> OK, let's start with <code>description</code>, I don't think it is defendable. Where would you show such a big text? It can be split into individual descriptions for each resource type.</p>



<a name="153988581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988581">(Aug 17 2018 at 21:11)</a>:</h4>
<p>well, for form use, no, it's not suitable. It's documentation of the search parameter as a whole. I'm just looking at search parameter thinking about this</p>



<a name="153988582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988582">(Aug 17 2018 at 21:13)</a>:</h4>
<p>The markdown in these cases is highly controlled (all generated) so you can parse it. but that's pretty yuck. I could generate it differently to make it easier to parse but then it doesn't present nicely, and it's still yuck.</p>



<a name="153988583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988583">(Aug 17 2018 at 21:13)</a>:</h4>
<p>it's too late to add something to search parameter itself, but I could generate an extension for this</p>



<a name="153988584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jaime Olivares <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988584">(Aug 17 2018 at 21:14)</a>:</h4>
<p>It can be an array of markdowns. Everybody happy.</p>



<a name="153988585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988585">(Aug 17 2018 at 21:15)</a>:</h4>
<p>you'd still have to parse each to figure out which one you wanted.</p>



<a name="153988586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jaime Olivares <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988586">(Aug 17 2018 at 21:16)</a>:</h4>
<p>I see two alternatives: An array with the size and order of the <code>.base</code> array, or an object with key=resourcetype, value=description_markdown</p>



<a name="153988627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988627">(Aug 17 2018 at 22:13)</a>:</h4>
<p>An additional extension for "Label" would be useful for that to explicitly indicate that its a user interface label for the field.</p>



<a name="153988629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988629">(Aug 17 2018 at 22:15)</a>:</h4>
<p>I don't expect you'd need anything else?<br>
(some of the servers generically implement their search systems based on the existing data - with the exception of the geo location stuff)<br>
Apart from choosing a specific UI label for the field(s) the only part not present is the layout/ordering, and don't know that is something that the server is responsible for. But could just assume that its the order on the capability statement.</p>



<a name="153988632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153988632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153988632">(Aug 17 2018 at 22:19)</a>:</h4>
<p>that's how I render them</p>



<a name="153989420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Normalization%20of%20search-parameters.json/near/153989420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jaime Olivares <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Normalization.20of.20search-parameters.2Ejson.html#153989420">(Aug 20 2018 at 04:09)</a>:</h4>
<p>Please let me know if I can help on this.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
