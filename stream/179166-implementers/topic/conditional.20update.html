---
layout: page
title: "FHIR Chat  · conditional update · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html">conditional update</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153957267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957267">(May 09 2018 at 15:58)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="*">@all</span> </p>
<p>The conditional update section of the spec says: "The server performs a create interaction" when there is no match, does this mean we should always create the resource regardless whether the server doesn't allow creation through normal update?</p>
<p>If yes, it might be a bit confusing for customers since update and conditional update have different behaviors, especially when the server has a global configuration for that.<br>
If no, how are clients supposed to create or update through the transaction API without knowing whether the resource exists or not?</p>
<p>Thanks!<br>
Jie</p>



<a name="153957272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957272">(May 09 2018 at 16:04)</a>:</h4>
<p>Oops sorry for @ing all. Didn't see Lloyd's message earlier.</p>



<a name="153957319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957319">(May 09 2018 at 18:01)</a>:</h4>
<p>You would only allow the create if you normally allow creates.  If you'd like to submit a change request, we can clarify that in the spec.</p>



<a name="153957332"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957332" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957332">(May 09 2018 at 18:36)</a>:</h4>
<p>Thanks Lloyd, this is what I expected. A followup question I have is, how are clients supposed to create or update a resource depending on whether the resource already exists (i.e. create the resource if it doesn't exist, update it otherwise) through the transaction API? From the transaction bundle example here: <a href="http://hl7.org/fhir/bundle-transaction.json.html" target="_blank" title="http://hl7.org/fhir/bundle-transaction.json.html">http://hl7.org/fhir/bundle-transaction.json.html</a>, I see that the patient with identifier 234234 appears in a conditional create as well as a conditional update entry, is this the canonical way to handle the issue?</p>



<a name="153957334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957334">(May 09 2018 at 18:37)</a>:</h4>
<p>Assuming server disables create through update of course.</p>



<a name="153957338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957338">(May 09 2018 at 18:38)</a>:</h4>
<p>BTW, where do I submit a change request?</p>



<a name="153957340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957340">(May 09 2018 at 18:39)</a>:</h4>
<p>For change requests, there's a link at the bottom of every page in the spec that says "propose a change".  You'll need to do a 1-time registration and we'll confirm you're a real human.  After that, you can submit requests at will :)</p>



<a name="153957343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957343">(May 09 2018 at 18:39)</a>:</h4>
<p>Conditional create and conditional update is the only way if you don't have the ability to assign the resource id.</p>



<a name="153957349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957349">(May 09 2018 at 18:45)</a>:</h4>
<p>Thanks!</p>



<a name="153957420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957420">(May 09 2018 at 20:13)</a>:</h4>
<p>FYI, change request created: <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16549&amp;start=10175" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16549&amp;start=10175">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16549&amp;start=10175</a></p>



<a name="153957428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957428">(May 09 2018 at 20:53)</a>:</h4>
<p>Thanks</p>



<a name="153957518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957518">(May 10 2018 at 12:00)</a>:</h4>
<p>Jie, sounds like you simply want to use the normal UPDATE (aka http POST). <a href="http://build.fhir.org/http.html#update" target="_blank" title="http://build.fhir.org/http.html#update">http://build.fhir.org/http.html#update</a>   Can you describe your use-case need in more detail?</p>



<a name="153957617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153957617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jie Fan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153957617">(May 10 2018 at 14:47)</a>:</h4>
<p>Hi John, I am doing HL7v2 -&gt; FHIR conversion, update wouldn't work because the client doesn't know if the resource already exists on the server (thus the resource id, given our server disables create through update).</p>



<a name="153989579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153989579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ray Cai <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153989579">(Aug 20 2018 at 17:23)</a>:</h4>
<p>Hi, I have a question regarding the transaction bundle example posted above, in the example the identifier 234234 is used twice but according to the spec(<a href="https://www.hl7.org/fhir/bundle.html#bundle-unique" target="_blank" title="https://www.hl7.org/fhir/bundle.html#bundle-unique">https://www.hl7.org/fhir/bundle.html#bundle-unique</a>) no duplicates are allowed in transaction bundle. The example seems to conflict with the spec. Is this an error in the example?</p>



<a name="153989662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153989662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153989662">(Aug 20 2018 at 21:08)</a>:</h4>
<p>I think it is  in R3, yes - it really doesn't make sense to do a create and an update on the same resource in the same transaction.</p>



<a name="153989815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153989815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ray Cai <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153989815">(Aug 21 2018 at 15:22)</a>:</h4>
<p>Thanks Grahame, but if it's not allowed to do a create and an update on the same resource in the same transaction, then back to Jie's question above:<br>
how are clients supposed to create or update through the transaction API without knowing whether the resource exists or not, given that the server disables create through update?</p>



<a name="153989870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/153989870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#153989870">(Aug 21 2018 at 20:42)</a>:</h4>
<p>probably not able to happen?</p>



<a name="161693178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/161693178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Julia Davis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#161693178">(Mar 25 2019 at 22:16)</a>:</h4>
<p><span class="user-mention" data-user-id="192758">@Craig Newman</span>  Hi Craig, I would love to join. I am currently involved in a few projects including ADT, pathology, pharmacy, medications management and OHC, all of which will involve a level of mapping HL7 V2 into the appropriate FHIR resources.<br>
Many thanks<br>
Julia</p>



<a name="179172152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/179172152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#179172152">(Oct 27 2019 at 13:56)</a>:</h4>
<p>As I understand it, if I do a <em>conditional</em> update, I shall  NOT enter a logical id. If I do an update, I shall enter a logical id. Is this correct?</p>



<a name="179172284"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/179172284" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#179172284">(Oct 27 2019 at 14:00)</a>:</h4>
<p>Correct</p>



<a name="179172296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/conditional%20update/near/179172296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/conditional.20update.html#179172296">(Oct 27 2019 at 14:00)</a>:</h4>
<blockquote>
<p>Correct</p>
</blockquote>
<p>Thanks! Love a concrete statement!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
