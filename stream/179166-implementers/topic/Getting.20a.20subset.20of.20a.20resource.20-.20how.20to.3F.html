---
layout: page
title: "FHIR Chat  · Getting a subset of a resource - how to? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html">Getting a subset of a resource - how to?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153850754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850754">(Sep 26 2016 at 10:44)</a>:</h4>
<p>Hi<br>
We have modeled an Appointment with standard CRUD operations.<br>
Now we are faced with the following customer-request: "Please let us read the appointment and its managing organization at a patient with some specific search criteria but let us only get a small subset of the attributes at the appointment and the organization".<br>
I see 2 different FHIR-solutions for this:<br>
1) Use the existing FHIR-resources and define a namedQuery for Appointment which defines 1) the search criteria, 2) to include organization, 3) which attributes to be returned for both appointment and org.<br>
The attributes of the appointment will be minimal (even without mandatory attributes). This removal of attributes for the appointment corresponds to the elements-search (<a href="https://www.hl7.org/fhir/search.html#elements" target="_blank" title="https://www.hl7.org/fhir/search.html#elements">https://www.hl7.org/fhir/search.html#elements</a>), but it goes against the should-recommendation for mandatory attributes. The removal of attributes of the related organization is (as far as I can see) currently not supported via a normal search.<br>
2) Create new resources for the Appointment and Organization - Appointment2 and Organization2 (for this issue we could give them meaningful names). Only GET-operations will be supported for these resources. The resources will basically be new domain resources as we will not include mandatory attributes from Appointment.<br>
A search for Appointment2 at a patient could include the special search criteria (but we could also make a named query for this).<br>
--<br>
I prefer 1) because of its simplicity (and we will probably get similar demands in the future) and its correctness: You are in fact getting a appointment resource returned (just with a limited list of attributes).<br>
I don't like 2) - it doesn't feel right - Appointment2 is not a different kind of appointment - it is just providing a limited view of this attributes. <br>
NB: A 3rd solution would be to choose a non-FHIR solution for this, and “just” make a dedicated REST-service.</p>
<p>Any guidance from you guys?</p>
<p>(The exact issue is that the current Appointment must include new information, and we also have a appointment-template which must be taken into account - but I think this is beside the point for my question)</p>



<a name="153850755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850755">(Sep 26 2016 at 11:08)</a>:</h4>
<p>Can the question be narrowed down to: When to redefine an already existing resource (facing the issue of maintaining AppointmentEx1 and AppointmentEx2 endpoint and definitions) and when to reuse and extend an existing resource?</p>



<a name="153850756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850756">(Sep 26 2016 at 11:42)</a>:</h4>
<p>haev you looked at hte _elements parameter? sounds like what you are looking for</p>



<a name="153850761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850761">(Sep 26 2016 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>: yes, the _elements parameter is mentioned in solution 1), but it means I'll go against the recommendations.<br>
<span class="user-mention" data-user-id="191427">@Jens Villadsen</span>: Yes,  that is certainly a part of it - but if I only put it like that then _elements is the answer (apart from the "should"-recommendation). For my case there is more to it.</p>



<a name="153850765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850765">(Sep 26 2016 at 16:21)</a>:</h4>
<p>why would you go against the recommendations? </p>



<a name="153850847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850847">(Sep 27 2016 at 06:01)</a>:</h4>
<p>because FHIR says "Servers SHOULD always return mandatory elements " (<a href="https://www.hl7.org/fhir/search.html#elements" target="_blank" title="https://www.hl7.org/fhir/search.html#elements">https://www.hl7.org/fhir/search.html#elements</a>), and the customer only wants a very small subset of the apointment</p>



<a name="153850858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850858">(Sep 27 2016 at 08:04)</a>:</h4>
<p>which mandatory elements do they not want back?</p>



<a name="153850879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850879">(Sep 27 2016 at 12:39)</a>:</h4>
<p>The only mandatory elements are status and participant. Seems strange not to want them.</p>



<a name="153850880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850880">(Sep 27 2016 at 12:40)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192120">@Allan Bro Hansen</span> .  Sounds like you'd benefit from <a href="https://github.com/chrisgrenz/FHIR-Primer/wiki/Profile-Governed-API" target="_blank" title="https://github.com/chrisgrenz/FHIR-Primer/wiki/Profile-Governed-API">Profile Governed APIs</a> which is something I'm working on formalizing (<a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10000" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10000">GF#10000</a>).  This particular use case would be covered by <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=8806" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=8806">GF#8806</a>.  It's not standard yet, but I'm trying to build the use cases.</p>



<a name="153850898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850898">(Sep 27 2016 at 13:48)</a>:</h4>
<p>We have more mandatory elements than the ones defined by FHIR.<br>
For our appointment-resource the unwanted mandatory elements becomes the status, an extra sub-status (extension), an elective flag (extension), a location participant, a practitioner participant, a patient participant and to some extend the startTime (if you consider this as "mandatory" for a booked appointment).<br>
The appointment should only contain the planned arrival date time and the planned arrival place, a reference to the managing organization and a reference to an appointment template. (the patient participants could be included but is not needed since the patient is the main search criteria).</p>



<a name="153850904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850904">(Sep 27 2016 at 13:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> : Yes, the "Profile Governed API" addresses it. Although I think I'm pretty close using the namedQuery (with _elements behavior) approach.</p>



<a name="153850907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850907">(Sep 27 2016 at 14:09)</a>:</h4>
<p>"namedQuery"?  Do you only need to read a subset of elements, or write them as well?</p>



<a name="153850910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850910">(Sep 27 2016 at 14:19)</a>:</h4>
<p>only read is needed</p>



<a name="153850914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850914">(Sep 27 2016 at 14:59)</a>:</h4>
<p>how come you don't need status? I would think that wasn't inappropriate, at least. Agree that _elements doesn't deal with repeating participants. That does point you towards a heavier weight solution like Chris's one. But from FHIR pov, it's not aa problem to use a different profile for your read/write operations from that for the outcome of a search</p>



<a name="153850926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850926">(Sep 27 2016 at 16:29)</a>:</h4>
<p>I forgot to mention that status is also one of the search criteria - and I guess it wouldn't be a problem to include it. The _elements part has really gotten the focus which seems to confirm that solution1 is the best way to go with the current toolbox in FHIR (meaning without "Profile Governed API" or similar add-ons).  </p>



<a name="153850933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153850933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153850933">(Sep 27 2016 at 18:57)</a>:</h4>
<p>so I think the best option for you might be to add a special parameter to indicate a restricted set of data to return for restricting to just the patient participant</p>



<a name="153851041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153851041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153851041">(Sep 28 2016 at 11:02)</a>:</h4>
<p>yes, if the task was only to return a restricted dataset. Given the "special searchCriteria"-demand I guess the special parameter is just an implicit part of using the namedQuery.</p>



<a name="153851068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153851068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153851068">(Sep 28 2016 at 14:08)</a>:</h4>
<p>How about the use of the _elements query parameter?  <a href="http://hl7-fhir.github.io/search.html#elements" target="_blank" title="http://hl7-fhir.github.io/search.html#elements">http://hl7-fhir.github.io/search.html#elements</a></p>



<a name="153851232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153851232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153851232">(Sep 29 2016 at 08:07)</a>:</h4>
<p>I do intend to use the _elements way of doing it. I just want it to be an implicit part of the namedQuery.<br>
So I do:<br>
Appointment?_query=MyNamedQuery&amp;patientIdentifier=myPatientIdToken<br>
And only return a subset of appointment and related entities (also only only subsets of related entities)<br>
And I do not do:<br>
Appointment?_query=MyNamedQuery&amp;patientIidentifier=myPatientIdToken&amp;_elements=appointmentElement1,appointmentElement2<br>
In which case I should validate appointmentElement1,appointmentElement2, and still include subsets of appointment related entities.</p>



<a name="153851255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153851255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153851255">(Sep 29 2016 at 15:54)</a>:</h4>
<p>I think you don't need to be explicit about _elements if you define your own named query like that. In fact, I wouldn't do it, because saying to use _elements as well creates ambiguity since the named query overlaps with it</p>



<a name="153851342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153851342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Allan Bro Hansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153851342">(Sep 29 2016 at 21:31)</a>:</h4>
<p>Yes, exactly</p>



<a name="153852681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Getting%20a%20subset%20of%20a%20resource%20-%20how%20to%3F/near/153852681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Getting.20a.20subset.20of.20a.20resource.20-.20how.20to.3F.html#153852681">(Oct 12 2016 at 09:50)</a>:</h4>
<p>We've also implemented non standard _mask parameter: </p>
<div class="codehilite"><pre>{
   birthDate: true,
   name: { given: true },
 }
</pre></div>


<p>And have some ideas how to introduce functions like showing part of identifiers, specific items in collections etc</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
