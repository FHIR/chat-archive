---
layout: page
title: "FHIR Chat  · Security Problem · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html">Security Problem</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153914243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914243">(Oct 17 2017 at 02:17)</a>:</h4>
<p>I've run into a security issue I'm interested in opinions on</p>



<a name="153914245"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914245" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914245">(Oct 17 2017 at 02:18)</a>:</h4>
<p>say that you have a server that allows a client to PUT to a new location</p>



<a name="153914246"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914246" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914246">(Oct 17 2017 at 02:19)</a>:</h4>
<p>(some servers allow this - it's a valid option for some use cases)</p>



<a name="153914247"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914247" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914247">(Oct 17 2017 at 02:19)</a>:</h4>
<p>now, a server is serving a client with a user session - e.g. from Smart on FHIR - that is restricted to only resources linked with one patient</p>



<a name="153914248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914248">(Oct 17 2017 at 02:20)</a>:</h4>
<p>and this client PUTs a new resource to a location that is already in use for another patient</p>



<a name="153914249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914249">(Oct 17 2017 at 02:20)</a>:</h4>
<p>If its already in use, its not a new resource?</p>



<a name="153914250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914250">(Oct 17 2017 at 02:23)</a>:</h4>
<p>no, but as far as the  client is concerned it is, because if they do a GET on that location, they'll geta 404 not found</p>



<a name="153914251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914251">(Oct 17 2017 at 02:24)</a>:</h4>
<p>Why do they get a 404 and not a 401?</p>



<a name="153914252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914252">(Oct 17 2017 at 02:25)</a>:</h4>
<p>or 403...</p>



<a name="153914253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914253">(Oct 17 2017 at 02:30)</a>:</h4>
<p>see <a href="http://hl7.org/fhir/security.html#AccessDenied" target="_blank" title="http://hl7.org/fhir/security.html#AccessDenied">http://hl7.org/fhir/security.html#AccessDenied</a></p>



<a name="153914254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914254">(Oct 17 2017 at 02:31)</a>:</h4>
<p>and the question really relates to this section - you can't return a 404 if the operation is PUT POST DELETE</p>



<a name="153914255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914255">(Oct 17 2017 at 02:31)</a>:</h4>
<p>so I'm interested in <span class="user-mention" data-user-id="191404">@John Moehrke</span> opinions</p>



<a name="153914289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914289">(Oct 17 2017 at 03:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191407">@Rick Geimer</span> there's an impact to SD from this as well - what should a server do if a client requests for a document to be generated, and the user doesn't have the rights to all the resources they're asking for? fail gracefully, or blow up?</p>



<a name="153914296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914296">(Oct 17 2017 at 03:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> - This is an interesting scenario. I understand the concept but do you have a concrete example of a URI that the client decides with their PUT that would already exist (but not visible to them for security purposes)</p>



<a name="153914299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914299">(Oct 17 2017 at 03:28)</a>:</h4>
<p>well, I'm testing with this now. PUT [base]/Observation/1 where Observation/1 already exists, and is assocaited with Patient/example, but the client session is restricted to Patient/1</p>



<a name="153914302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914302">(Oct 17 2017 at 03:34)</a>:</h4>
<p>I cannot think of a status that doesn't allow the client to use PUT to determine the existence of a resource</p>



<a name="153914304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914304">(Oct 17 2017 at 03:37)</a>:</h4>
<p>If we return anything other than a 2xx response the client can simply retry the PUT with a different id and if it succeeds, they know a resource exists at the other id</p>



<a name="153914305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914305">(Oct 17 2017 at 03:37)</a>:</h4>
<p>no indeed. that's kind of my point. I couldn't think of one either. Wanted to check I hadn't overlooked anything. Especially since security made such a big deal about this</p>



<a name="153914306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914306">(Oct 17 2017 at 03:38)</a>:</h4>
<p>I think we need to add a note to that section about the 404 supression only working for get not the other operations</p>



<a name="153914307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914307">(Oct 17 2017 at 03:38)</a>:</h4>
<p>However, I think PUT with some URI id that can collide easily is a bad idea</p>



<a name="153914308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914308">(Oct 17 2017 at 03:39)</a>:</h4>
<p>405 doesn't work?</p>



<a name="153914309"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914309" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914309">(Oct 17 2017 at 03:39)</a>:</h4>
<p>i guess its no better than 403 in terms of concealing the id space</p>



<a name="153914310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914310">(Oct 17 2017 at 03:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191376">@Jim Steel</span> - No. The server on a 405 must respond with the allow methods on that URI and if the user is not authorized, they will get no methods. This now leaks that the resource exists</p>



<a name="153914311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914311">(Oct 17 2017 at 03:40)</a>:</h4>
<p>I chose simple ids for ease of testing and description. In production, you'd expect to use UUIDs and this would be very unlikely.. unless we think about malicious use, say, on a patient portal</p>



<a name="153914312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914312">(Oct 17 2017 at 03:41)</a>:</h4>
<p>Really, anything than a 2xx reveals the existence of the resource (if the error can be resolved by simply replaying the tx with a different id)</p>



<a name="153914313"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914313" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914313">(Oct 17 2017 at 03:41)</a>:</h4>
<p>there's no way to stop leakage if write is allowed. What do you do about this?</p>



<a name="153914314"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914314" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914314">(Oct 17 2017 at 03:41)</a>:</h4>
<p>I can't see any around it. at the end of the day, the client must be able to attempt to create, and be told whether or not it was successful</p>



<a name="153914315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914315">(Oct 17 2017 at 03:41)</a>:</h4>
<p>Don't allow PUT?</p>



<a name="153914316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914316">(Oct 17 2017 at 03:41)</a>:</h4>
<p>though leaking that a resource you can't see exists doesn't really mean anything</p>



<a name="153914317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914317">(Oct 17 2017 at 03:41)</a>:</h4>
<p>This problem doesn't exist for POST</p>



<a name="153914318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914318">(Oct 17 2017 at 03:41)</a>:</h4>
<p>no, but do you allow updating a resource? then you allow a PUT</p>



<a name="153914319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914319">(Oct 17 2017 at 03:42)</a>:</h4>
<p>Yeah, you're not leaking the resources themselves, only their ids (and then only by guesswork, not in the form of a list</p>



<a name="153914320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914320">(Oct 17 2017 at 03:43)</a>:</h4>
<p>True, leaking a resource URI is less bad than the full resource. Leaking resource URIs is really bad when the URI itself tells you information (eg, /patients/123/hiv-results/456 &lt;--not FHIR but you get the example)</p>



<a name="153914321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914321">(Oct 17 2017 at 03:44)</a>:</h4>
<p>In REST, POST can be used to update a resource; you don't have to use PUT</p>



<a name="153914322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914322">(Oct 17 2017 at 03:44)</a>:</h4>
<p>yes. but in practice, sensitive resources will not have semantic ids (unlike conformance resources which might)</p>



<a name="153914323"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914323" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914323">(Oct 17 2017 at 03:44)</a>:</h4>
<p>Agreed</p>



<a name="153914324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914324">(Oct 17 2017 at 03:44)</a>:</h4>
<p>it doesn't matter if you use POST or PUT to a known resource.</p>



<a name="153914325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914325">(Oct 17 2017 at 03:47)</a>:</h4>
<p>I was thinking of POSTing to the collection (eg, /thing) rather than the resource (/thing/123)</p>



<a name="153914326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Shekleton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914326">(Oct 17 2017 at 03:47)</a>:</h4>
<p>But I guess if you don't have access to view the entire collection (/thing) now we're back to the initial problem</p>



<a name="153914327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914327">(Oct 17 2017 at 03:48)</a>:</h4>
<p>yep</p>



<a name="153914328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914328">(Oct 17 2017 at 03:49)</a>:</h4>
<p>it's a little easier if you say that you can't PUT or POST to a resource that doesn't exist; then you can always say 'not found' if there's no access.</p>



<a name="153914424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914424">(Oct 17 2017 at 13:54)</a>:</h4>
<p>In my implementation I chose to return 401 Unauthorized. And a TODO: "Check whether this leaks too much information on existing resources to the user.", so I would have come to the same question as you Grahame :-)<br>
And how about 409 Conflict?</p>



<a name="153914425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914425">(Oct 17 2017 at 13:55)</a>:</h4>
<p>Presuming that the id in itself does not leak information.</p>



<a name="153914430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914430">(Oct 17 2017 at 14:07)</a>:</h4>
<p>Well, if you're hitting up the local HIV clinic for [base]/Patient/[known patient id]/Condition/[search the possible identifier space], that may be leaking more information than is safe.  Granted, it's dependent on knowing the patient id, so if that risk is managed, so is the leaking.  In general, compartments allow for the possibility of greater leaking, so they should be used cautiously.</p>



<a name="153914520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914520">(Oct 17 2017 at 21:50)</a>:</h4>
<p>I think we should add a note in the security section, and a cross reference in the section about allowing PUT to a new location</p>



<a name="153914753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914753">(Oct 18 2017 at 18:34)</a>:</h4>
<p>just catching up... and you all seem to have come to the understanding. The guidance on authorization failure codes is intended to provide security considerations, it is not demanding any specific policy. If your risk assessment allows exposing 'some' information, because the benefit of that error code; then you are free to make that policy decision. We are just trying to warn the reader, especially clients that sometimes they might not get as specific of an error code because of security policy reasons.     The space you all have zeroed in on is a user/system that is Authorized to PUT, but is somehow not trusted to see a collision. This is a very small exposure to a client that you know, and have a high trust for. As was also said, there are usecases for trusting a POST, while not trusting for anything else; thus trusting POST would be less risk than PUT.</p>



<a name="153914754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153914754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153914754">(Oct 18 2017 at 18:36)</a>:</h4>
<p>Im happy for someone to recommend improvements of the text based on this thread. I however am not clear what that might be, without also taking up many paragraphs to explain the specific case.</p>



<a name="153915239"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153915239" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153915239">(Oct 22 2017 at 20:14)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14072" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14072">GF#14072</a></p>



<a name="153918046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153918046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153918046">(Nov 07 2017 at 17:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Getting back to this a bit late. Let's use the use case of someone with HIV as a Condition and someone without permission tries to access the document. In CDA we would probably represent this by including a Problem Observation where everything is nulled out (@nullFlavor = MSK or something similar), but the rest of the document would show as usual. Not sure how we would represent this in FHIR though. Generate the document and include the reference to the resource but not copy it into the bundle? That way someone with proper permissions could theoretically retrieve it later, but how do we flag that it was omitted for privacy/permission reasons?</p>



<a name="153918052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153918052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153918052">(Nov 07 2017 at 18:19)</a>:</h4>
<p>Provided that the user has some rights, that is enough rights to know that they got a redacted object... (See  <a href="http://build.fhir.org/security.html#AccessDenied" target="_blank" title="http://build.fhir.org/security.html#AccessDenied">http://build.fhir.org/security.html#AccessDenied</a> )  Then the object can be tagged as REDACT or some other appropriate tag <a href="http://build.fhir.org/v3/ActCode/cs.html#v3-ActCode-REDACT" target="_blank" title="http://build.fhir.org/v3/ActCode/cs.html#v3-ActCode-REDACT">http://build.fhir.org/v3/ActCode/cs.html#v3-ActCode-REDACT</a></p>



<a name="153918118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153918118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153918118">(Nov 08 2017 at 00:32)</a>:</h4>
<p>sure or you could use the masked data absent reason.</p>



<a name="153918119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153918119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153918119">(Nov 08 2017 at 00:32)</a>:</h4>
<p>But in most cases, the ruling is that you can't tell people about the information they don't know because knowing it is there is enough to infer what is being kept from view anyway</p>



<a name="153918191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153918191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153918191">(Nov 08 2017 at 14:44)</a>:</h4>
<p>Grahame, there are plenty of policies that would agree with you, but there are other policies that allow for letting the user know that they have not received everything. A well known example is the one that precedes a 'break-glass' opportunity. Where the user gets only "N" Normal data, with an indication that break-glass would reveal more information. They make the determination that within-policy they are correct in declaring a break-glass emergency, they indicate they are breaking-glass, they get "R" Restricted data too.. Also, their broken-glass is recorded in an audit log, the Privacy and Safety office review that, and either praise the clinician for saving a life or punish them for violating policy.</p>



<a name="153918203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Security%20Problem/near/153918203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Security.20Problem.html#153918203">(Nov 08 2017 at 15:16)</a>:</h4>
<p>In our system, we usually tell them anytime they may have additional information, even if they wouldn't always. EG: we know they don't have access to all facilities, even if the patient doesn't have data at those facilities. When they break the glass, they may not actually get more info</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
