---
layout: page
title: "FHIR Chat  · FHIRPath Implementation skip System.Date · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate.html">FHIRPath Implementation skip System.Date</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="211274646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Implementation%20skip%20System.Date/near/211274646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate.html#211274646">(Sep 25 2020 at 15:38)</a>:</h4>
<p>In FHIRPath we have the two system types, Date and DateTime. Both can handle year, year month and date precision. Date will implicitly convert to DateTime. So a Date 2020 should be equal to a DateTime 2020 because of this implicit conversion. </p>
<p>The <a href="https://github.com/HL7/fhirpath.js">JavaScript implementation</a> seems to have no Date type. I was not able to construct one. <code>@2021-01-01.type()</code> results in DateTime. Furthermore the conversion table from primitive FHIR types to FHIRPath system types, also doesn't use the Date type: <a href="https://www.hl7.org/fhir/fhirpath.html#types">https://www.hl7.org/fhir/fhirpath.html#types</a> Here FHIR.date, FHIR.dateTime, FHIR.instant are all converted to DateTime.</p>
<p>If a FHIRPath implementation skips the Date type altogether, it seems that this would only be perceivable through reflection and the is-operator.</p>
<p>My question: Do I have overlooked something or would it be save for an implementation to skip the Date type?</p>
<p>At the end, if the Date type has no value, wouldn't it be better to eliminate it from the FHIRPath spec?</p>



<a name="211275153"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Implementation%20skip%20System.Date/near/211275153" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate.html#211275153">(Sep 25 2020 at 15:42)</a>:</h4>
<p>you might try asking on <a class="stream" data-stream-id="179169" href="/#narrow/stream/179169-javascript">#javascript</a> if no one answers here? (give it a day...)  (<span class="user-mention" data-user-id="195344">@Paul Lynch</span>)</p>



<a name="211276270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Implementation%20skip%20System.Date/near/211276270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate.html#211276270">(Sep 25 2020 at 15:52)</a>:</h4>
<p>Also the FHIRPath parser of <a href="https://github.com/cqframework/clinical_quality_language">https://github.com/cqframework/clinical_quality_language</a> has only a DateTime literal and no Date literal. So @2020 is parsed as DateTime literal. According the spec @2020T should be a DateTime literal and @2020 should be a Date literal. <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>



<a name="211279628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Implementation%20skip%20System.Date/near/211279628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate.html#211279628">(Sep 25 2020 at 16:18)</a>:</h4>
<p><span class="user-mention" data-user-id="197470">@Alexander Kiel</span> , I've just verified the translator has a Date literal, it has since the Date type was introduced in CQL STU3. Can you tell me where you're seeing the CQL parser return a DateTime for a Date literal? That would definitely be a bug if it's behaving that way.</p>



<a name="211279779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Implementation%20skip%20System.Date/near/211279779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate.html#211279779">(Sep 25 2020 at 16:19)</a>:</h4>
<p>I agree that FHIR.date should map to Date, that looks like just an oversight because that table was built before the Date type existed, can you log a tracker for that?</p>



<a name="211287002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Implementation%20skip%20System.Date/near/211287002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Lynch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate.html#211287002">(Sep 25 2020 at 17:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197470">Alexander Kiel</span> <a href="#narrow/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate/near/211274646">said</a>:</p>
<blockquote>
<p>The <a href="https://github.com/HL7/fhirpath.js">JavaScript implementation</a> seems to have no Date type. I was not able to construct one. <code>@2021-01-01.type()</code> results in DateTime. Furthermore the conversion table from primitive FHIR types to FHIRPath system types, also doesn't use the Date type: <a href="https://www.hl7.org/fhir/fhirpath.html#types">https://www.hl7.org/fhir/fhirpath.html#types</a> Here FHIR.date, FHIR.dateTime, FHIR.instant are all converted to DateTime.</p>
</blockquote>
<p>fhirpath.js was originally written for the previous version of the FHIRPath specification, which did not have a Date type.  We are stilling working on completing support for the current FHIRPath specification.  How important is support for the Date type in fhirpath.js to you?  If you are not just exploring, but actually need it, I could try to prioritize it.</p>
<p>BTW, although I am subscribed to implementers, I usually ignore it for lack of time.  A better stream to raise questions about the FHIRPath spec would be the fhirpath stream, and there is also a fhirpath.js stream for fhirpath.js (though questions about fhirpath.js also get asked on the fhirpath stream).</p>



<a name="211355917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Implementation%20skip%20System.Date/near/211355917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate.html#211355917">(Sep 26 2020 at 11:30)</a>:</h4>
<p><span class="user-mention" data-user-id="195344">@Paul Lynch</span> I don't need the Date type in fhirpath.js. I just explore other implementations in order to decide wether I should implement the Date type in my Clojure implementation used for the Blaze server.</p>
<p>Thanks for pointing me to the fhirpath stream. I will ask further questions there.</p>



<a name="211356454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Implementation%20skip%20System.Date/near/211356454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate.html#211356454">(Sep 26 2020 at 11:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> I saw the lack of a Date type in the org.cqframework.cql.gen.fhirpathParser in version 1.4.9. You added the Date type with <a href="https://github.com/cqframework/clinical_quality_language/commit/8e1ca7d1d6cedee98090a7acfe214e60389cdb48">https://github.com/cqframework/clinical_quality_language/commit/8e1ca7d1d6cedee98090a7acfe214e60389cdb48</a>. So it will arrive with 1.5 or do you plan a back port in 1.4? </p>
<p>I raised the issue <a href="http://jira.hl7.org/browse/FHIR-28617">FHIR#28617</a> for the translation table.</p>



<a name="211371888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Implementation%20skip%20System.Date/near/211371888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate.html#211371888">(Sep 26 2020 at 18:01)</a>:</h4>
<p><span class="user-mention" data-user-id="197470">@Alexander Kiel</span> , if you need it in the 1.4 translator, we can pull that in, submit a Github issue. I'll note though that as of the current 1.5.0-SNAPSHOT, the translator is multi-version, there is a compatibilityLevel option that you can use to indicate what version of CQL you want to translate, and it works for the 1.3, 1.4, and 1.5 versions.</p>



<a name="211372562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Implementation%20skip%20System.Date/near/211372562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Implementation.20skip.20System.2EDate.html#211372562">(Sep 26 2020 at 18:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> Thanks, I'll first see if I really need it.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
