---
layout: page
title: "FHIR Chat  · Is an OperationOutcome expected with a 401/403? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html">Is an OperationOutcome expected with a 401/403?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="221640306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221640306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221640306">(Jan 05 2021 at 12:25)</a>:</h4>
<p>Does the FHIR spec require the return of an OperationOutcome when a search is performed with incorrect authorization? Considering these specs, <a href="http://hl7.org/fhir/http.html#search">http://hl7.org/fhir/http.html#search</a> : <em>“If the search fails (cannot be executed, not that there are no matches), the return value return value SHALL be a status code 4xx or 5xx with an OperationOutcome.”</em> </p>
<p>Perhaps that's me interpreting this to literal, as in <a href="https://www.hl7.org/fhir/http.html#Status-Codes">https://www.hl7.org/fhir/http.html#Status-Codes</a> it is stated this an OperationOutome is not always required.</p>



<a name="221641290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221641290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221641290">(Jan 05 2021 at 12:37)</a>:</h4>
<p>At the very least it's a SHOULD, and from a error handling perspective I can certainly see why a SHALL is in order. The alternative is that one only receives a HTTP status code, which is too minimalistic for most purposes.</p>



<a name="221643733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221643733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221643733">(Jan 05 2021 at 13:08)</a>:</h4>
<p>The argumentation for not returning a OperationOutcome would be that it will likely not contain additional information next to the HTTP status code and the authorization checks might be performed by a generic security framework before the FHIR server is given the request. Which are two valid points I guess. I am however a little confused by the expectations of the FHIR spec about this.</p>



<a name="221651639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221651639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221651639">(Jan 05 2021 at 14:30)</a>:</h4>
<p>At least the NHS is pretty clear about this: <a href="https://nhsconnect.github.io/FHIR-SpineCore/resources_error_handling.html">https://nhsconnect.github.io/FHIR-SpineCore/resources_error_handling.html</a> "In the event of an error, provider systems SHALL respond by providing an OperationOutcome resource"</p>



<a name="221654511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221654511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221654511">(Jan 05 2021 at 14:53)</a>:</h4>
<p>I think that while it says it is not always required, in this case - it is.</p>



<a name="221659802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221659802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221659802">(Jan 05 2021 at 15:34)</a>:</h4>
<p>SHALL is too strong for exactly the reason Ardon states: permission checks could be done by non-FHIR subsystems that do not know anything about FHIR</p>



<a name="221660062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221660062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221660062">(Jan 05 2021 at 15:36)</a>:</h4>
<p>...and a 401 or 403 are already pretty explanatory on their own</p>



<a name="221661179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221661179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221661179">(Jan 05 2021 at 15:44)</a>:</h4>
<p>for non-FHIR aware systems, RFC 7807 would apply .. especially if there was no Accept header which indicated support for FHIR.</p>



<a name="221662306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221662306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221662306">(Jan 05 2021 at 15:53)</a>:</h4>
<p>Certainly we should clarify the wording.  Can you submit a change request?</p>



<a name="221668733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221668733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221668733">(Jan 05 2021 at 16:36)</a>:</h4>
<p>I would happily create a ticket. But I am not completely sure if the consensus is to make it more clear that an OperationOutome is expected or not.</p>



<a name="221669577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221669577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221669577">(Jan 05 2021 at 16:43)</a>:</h4>
<p>The work group will need to decide.  My opinion is that there's no reason to force an OperationOutcome to be provided</p>



<a name="221674068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221674068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ardon Toonstra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221674068">(Jan 05 2021 at 17:16)</a>:</h4>
<p>Done: <a href="https://jira.hl7.org/browse/FHIR-30240">https://jira.hl7.org/browse/FHIR-30240</a></p>



<a name="221700954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/221700954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#221700954">(Jan 05 2021 at 21:01)</a>:</h4>
<p>certainly the intent is that <em>if a resource is returned,</em> it SHALL be an operation outcome</p>



<a name="222045537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/222045537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Oemig <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#222045537">(Jan 08 2021 at 07:51)</a>:</h4>
<p>With the original request you are approaching a FHIR endpoint. Even if a preprocessing security check fails what is the reason for not drafting a proper FHIR result if we are looking for FHIR conformance?</p>



<a name="222077983"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/222077983" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#222077983">(Jan 08 2021 at 14:28)</a>:</h4>
<p>It only makes sense to return a resource if you've got something useful to say.  Quite often when the issue is a security violation, it's good practice to say as little as possible - to provide minimal surface area for an attacker to probe.  So if the only information you want to convey back to the client is "you don't have permission", then there's no value in sending anything other than a bare 403.</p>



<a name="222083707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/222083707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#222083707">(Jan 08 2021 at 15:17)</a>:</h4>
<blockquote>
<p>what is the reason for not drafting a proper FHIR result </p>
</blockquote>
<p>That the pre-processing system doing the security checks does not know anything about FHIR</p>



<a name="222084154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/222084154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#222084154">(Jan 08 2021 at 15:20)</a>:</h4>
<p>yes,  common in cloud systems TLS and OAuth are handled (to some degree) by dedicated general IT systems. THEY will not understand FHIR.</p>



<a name="222084214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/222084214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#222084214">(Jan 08 2021 at 15:21)</a>:</h4>
<p>they don't need to understand FHIR to reject the request for security reasons</p>



<a name="222084275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/222084275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#222084275">(Jan 08 2021 at 15:21)</a>:</h4>
<p>load ballancing also... not FHIR knowledgable</p>



<a name="222084295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/222084295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#222084295">(Jan 08 2021 at 15:21)</a>:</h4>
<p>thus clients need to be told that sometimes failures will be reported without a OperationOutcome</p>



<a name="222107649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/222107649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#222107649">(Jan 08 2021 at 18:25)</a>:</h4>
<p>Absolutely, the clients always have to expect that occasionally they are not going to get an operation outcome resource. Based on network configuration with proxies, custom DNS, custom routes and gateways, it's entirely possible that the client will receive a 200 or any other https status with no body at all. But in the examples of a LB or authentication processors, it's likely they have the ability to return custom pages (resources) for any status. </p>
<p>In short: The client should always prepare for the situation that they might not get a resource. The servers should do their best to always return a resource (error or otherwise).</p>



<a name="222114794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Is%20an%20OperationOutcome%20expected%20with%20a%20401/403%3F/near/222114794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Is.20an.20OperationOutcome.20expected.20with.20a.20401.2F403.3F.html#222114794">(Jan 08 2021 at 19:27)</a>:</h4>
<p>They should return a resource <em>if</em> they have something useful to say.  Returning an OperationOutcome that doesn't communicate anything more than the HTTP code is unnecessary overhead.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
