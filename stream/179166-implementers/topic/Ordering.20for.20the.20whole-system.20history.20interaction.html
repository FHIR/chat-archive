---
layout: page
title: "FHIR Chat  · Ordering for the whole-system history interaction · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Ordering.20for.20the.20whole-system.20history.20interaction.html">Ordering for the whole-system history interaction</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="230511972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Ordering%20for%20the%20whole-system%20history%20interaction/near/230511972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Ordering.20for.20the.20whole-system.20history.20interaction.html#230511972">(Mar 16 2021 at 13:32)</a>:</h4>
<p><a href="http://build.fhir.org/http.html#history">http://build.fhir.org/http.html#history</a> says</p>
<blockquote>
<p>The return content is a Bundle with type set to history containing the specified version history, sorted with oldest versions last, and including deleted resources.</p>
</blockquote>
<p>Does that sort ordering apply to just the resources on a single page, or also to the overall order of the pages?<br>
Is a request like <code>GET [base]/_history</code> required to return the latest changes, or is it valid for that to return the oldest changes in the system?<br>
Does the <code>next</code> link need to page backward in time, or is it valid for <code>next</code> to go forward in time?</p>



<a name="230515047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Ordering%20for%20the%20whole-system%20history%20interaction/near/230515047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Ordering.20for.20the.20whole-system.20history.20interaction.html#230515047">(Mar 16 2021 at 13:53)</a>:</h4>
<p>It applies to overall order of pages.  'next' would go backward in time.</p>



<a name="230515353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Ordering%20for%20the%20whole-system%20history%20interaction/near/230515353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Ordering.20for.20the.20whole-system.20history.20interaction.html#230515353">(Mar 16 2021 at 13:55)</a>:</h4>
<p>(It also applies within a page)</p>



<a name="230518562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Ordering%20for%20the%20whole-system%20history%20interaction/near/230518562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robin Arnold <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Ordering.20for.20the.20whole-system.20history.20interaction.html#230518562">(Mar 16 2021 at 14:13)</a>:</h4>
<p>The spec states "The history interaction can be used to set up a subscription from one system to another, so that resources are synchronized between them". This is problematic using pages going back in time. To sync, systems need to roll forward in time order. Consider a scenario where there's an outage and a large gap appears between the state of two systems. In order to fill that gap, the client system would need to hit the last page (oldest change first) and walk the timeline forward. Paging like this is impractical when the ingestion rate is high and potentially continuous. It is particularly expensive on the server side.</p>



<a name="230525320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Ordering%20for%20the%20whole-system%20history%20interaction/near/230525320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Ordering.20for.20the.20whole-system.20history.20interaction.html#230525320">(Mar 16 2021 at 14:49)</a>:</h4>
<p>Hmm.  That's a really good point.  The needs for synchronization (oldest to newest) and the needs for a user who's browsing history (which typically is newest to oldest) aren't the same.  Given that this is now normative, I guess the solution for synchronization is to run the query and use the 'last' link to get the oldest page and then navigate the result set using the 'previous' link.  It's not ideal, but at this point, it's the best we can do for prior releases.  For future releases, we could introduce the notion of allowing a sort parameter that would allow you to override the default behavior.  Do you want to submit a change request?</p>



<a name="230526404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Ordering%20for%20the%20whole-system%20history%20interaction/near/230526404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Ordering.20for.20the.20whole-system.20history.20interaction.html#230526404">(Mar 16 2021 at 14:55)</a>:</h4>
<p>thanks Lloyd.  FWIW, thats basically just what I had in mind (we are trying to support a "changes" feed that moves forward in time and I wanted to re-use the _history endpoint for it)</p>



<a name="230526776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Ordering%20for%20the%20whole-system%20history%20interaction/near/230526776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Ordering.20for.20the.20whole-system.20history.20interaction.html#230526776">(Mar 16 2021 at 14:57)</a>:</h4>
<p>either robin or I will open a change request for the introducing a <code>_sort</code> parameter (and I think we'll prototype this on our end as well)</p>



<a name="233355378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Ordering%20for%20the%20whole-system%20history%20interaction/near/233355378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Ordering.20for.20the.20whole-system.20history.20interaction.html#233355378">(Apr 06 2021 at 17:06)</a>:</h4>
<p>Finally got around to creating this one:  <a href="https://jira.hl7.org/browse/FHIR-31709">https://jira.hl7.org/browse/FHIR-31709</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
