---
layout: page
title: "FHIR Chat  · ONC Cert g.10: Multiple profiles in one resource · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ONC.20Cert.20g.2E10.3A.20Multiple.20profiles.20in.20one.20resource.html">ONC Cert g.10: Multiple profiles in one resource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="266236610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ONC%20Cert%20g.10%3A%20Multiple%20profiles%20in%20one%20resource/near/266236610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Tam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ONC.20Cert.20g.2E10.3A.20Multiple.20profiles.20in.20one.20resource.html#266236610">(Dec 28 2021 at 06:56)</a>:</h4>
<p>In the ONC Certification (g)(10) testing, we are seeing multiple profiles in a single resource in the Inferno tool's test data. This is causing the validation criteria on our FHIR server to fail, as we were not expecting a resource with multiple profiles.</p>
<p>Couple questions<br>
1) Do we expect to see a resource tied to multiple profiles in real life? I didn't think so, as there could be conflicts between two profiles, and even if there weren't, wouldn't you just go with the more restrictive profile?<br>
2) If this is expected in real-life, how did you program your FHIR server to validate a resource against multiple profiles?<br>
3) If this is not expected in real-life, how did you end up passing the Inferno tests? Did you simply assume that the data in the Inferno test should be taken as-is, and did you simply shut off validation checks when running the Inferno tests?</p>
<p>Example from the Inferno test data -- notice that the "profile" data element contains two listings:<br>
{<br>
      "fullUrl": "urn:uuid:76e297f9-9269-5b73-28d0-03a035bcd08c",<br>
      "resource": {<br>
        "resourceType": "Observation",<br>
        "id": "76e297f9-9269-5b73-28d0-03a035bcd08c",<br>
        "meta": {<br>
          "profile": [<br>
            "<a href="http://hl7.org/fhir/StructureDefinition/bodyheight">http://hl7.org/fhir/StructureDefinition/bodyheight</a>",<br>
            "<a href="http://hl7.org/fhir/StructureDefinition/vitalsigns">http://hl7.org/fhir/StructureDefinition/vitalsigns</a>"<br>
          ]<br>
        },</p>
<p><span class="user-mention" data-user-id="451899">@Anna Liu</span></p>



<a name="266281098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ONC%20Cert%20g.10%3A%20Multiple%20profiles%20in%20one%20resource/near/266281098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ONC.20Cert.20g.2E10.3A.20Multiple.20profiles.20in.20one.20resource.html#266281098">(Dec 28 2021 at 18:34)</a>:</h4>
<p>I think there are two independent issues here:</p>
<ol>
<li>Tying validation to meta.profile - while meta.profile can be used as an indicator of what profile requirements are met by the resource, it should not drive validation, or constrain the number of profiles a resource may satisfy</li>
<li>Resources are expected to be valid with respect to multiple profiles, regardless of the presence of meta.profile.</li>
</ol>



<a name="266281267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ONC%20Cert%20g.10%3A%20Multiple%20profiles%20in%20one%20resource/near/266281267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ONC.20Cert.20g.2E10.3A.20Multiple.20profiles.20in.20one.20resource.html#266281267">(Dec 28 2021 at 18:36)</a>:</h4>
<p>I'm surprised that this is even a question - of course a resource could be tied to multiple profiles. If the server is feeling very helpful it could validate against a whole library of profiles and tag every one that fits.</p>



<a name="266283529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ONC%20Cert%20g.10%3A%20Multiple%20profiles%20in%20one%20resource/near/266283529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Tam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ONC.20Cert.20g.2E10.3A.20Multiple.20profiles.20in.20one.20resource.html#266283529">(Dec 28 2021 at 19:05)</a>:</h4>
<p>Thanks Paul, can you tell me more about when a resource would be tied to multiple profiles in real life? How have you come across this?</p>



<a name="266284191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ONC%20Cert%20g.10%3A%20Multiple%20profiles%20in%20one%20resource/near/266284191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ONC.20Cert.20g.2E10.3A.20Multiple.20profiles.20in.20one.20resource.html#266284191">(Dec 28 2021 at 19:15)</a>:</h4>
<p>For starters you get profiles derived from things like US Core, so resources would generally conform to both US Core and the more narrow profile. There can be multiple versions of profiles, so meta.profile might list the versions explicitly if the resource is valid across more than one.</p>
<p>In general I don't think of specific profiles at all. Someone could come along and author a new one tomorrow that breaks previous assumptions about what is "in the wild". It's just a tool.</p>



<a name="266286271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ONC%20Cert%20g.10%3A%20Multiple%20profiles%20in%20one%20resource/near/266286271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ONC.20Cert.20g.2E10.3A.20Multiple.20profiles.20in.20one.20resource.html#266286271">(Dec 28 2021 at 19:44)</a>:</h4>
<p>in addition to the point Paul makes. I have also seen institution defined profiles that are derived off of FHIR-Core Vital-Signs or US-Core profiles, in some cases with divergent expectations (not invalid, but specifically different).</p>



<a name="266290175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ONC%20Cert%20g.10%3A%20Multiple%20profiles%20in%20one%20resource/near/266290175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Tam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ONC.20Cert.20g.2E10.3A.20Multiple.20profiles.20in.20one.20resource.html#266290175">(Dec 28 2021 at 20:34)</a>:</h4>
<p>I think I see my misunderstanding. </p>
<p>I previously believed that having two profiles listed in the "profile" data element meant that you had to satisfy all requirements of each profile simultaneously. In my example above, I believed that I had to simultaneously allow all the vital signs LOINCs in the code element, and also only allow the body weight LOINC, which sounded paradoxical to me.</p>
<p>Instead, it sounds like a resource should conform to any individual profiles listed in the "profile" data element. So in my above example, I could easily have an Observation resource that conformed to height, but also to the looser vital signs profile (as the height LOINC of 8302-2 is included in the list of vital signs LOINCs).</p>
<p>Thanks for explaining this -- this makes a lot more sense now -- and my group will adjust our validation rules based on this info. </p>
<p>Really appreciate the explanation. Thanks all.</p>
<p>-Dan</p>



<a name="266346387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ONC%20Cert%20g.10%3A%20Multiple%20profiles%20in%20one%20resource/near/266346387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ONC.20Cert.20g.2E10.3A.20Multiple.20profiles.20in.20one.20resource.html#266346387">(Dec 29 2021 at 13:35)</a>:</h4>
<blockquote>
<p>In the ONC Certification (g)(10) testing, we are seeing multiple profiles in a single resource in the Inferno tool's test data.</p>
</blockquote>
<p>I would like to clarify that Inferno does not provide test data. Additionally, Inferno contains a separate sequence of tests for each required profile. Within one of those sequences, resources are validated against that sequence's profile, not the the profiles specified in <code>meta.profile</code>. If you encounter cases where Inferno seems to be validating a resource against a different profile, please let us know.</p>



<a name="266423787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ONC%20Cert%20g.10%3A%20Multiple%20profiles%20in%20one%20resource/near/266423787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ONC.20Cert.20g.2E10.3A.20Multiple.20profiles.20in.20one.20resource.html#266423787">(Dec 30 2021 at 12:06)</a>:</h4>
<p>I could create a Patient resource with no meta.profile entries that satisfied many different companies profiles of Patient. No problem. I could even list in meta.profile several of them. I would be claiming that it did satisfy every one of the listed profiles.</p>



<a name="266651870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/ONC%20Cert%20g.10%3A%20Multiple%20profiles%20in%20one%20resource/near/266651870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/ONC.20Cert.20g.2E10.3A.20Multiple.20profiles.20in.20one.20resource.html#266651870">(Jan 03 2022 at 05:00)</a>:</h4>
<p>Programming a server to validate against multiple profiles is pretty easy - take the code you use to validate against one profile and run it repeatedly, iterating for each profile.  Where you run into problems is if you have decision logic that drives off profile declaration - which is why you generally shouldn't do that.  Drive logic off explicit elements in the data, not what profiles the instance does or doesn't declare.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
