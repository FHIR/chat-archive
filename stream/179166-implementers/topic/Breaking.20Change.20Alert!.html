---
layout: page
title: "FHIR Chat  · Breaking Change Alert! · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html">Breaking Change Alert!</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153817534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817534">(Mar 23 2016 at 06:13)</a>:</h4>
<p>Task 8779 (<a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=8779&amp;start=50" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=8779&amp;start=50">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=8779&amp;start=50</a>) says that the result of a conditional delete that fails should be changed from a 404 to a 204. </p>



<a name="153817535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817535">(Mar 23 2016 at 06:13)</a>:</h4>
<p>it also says: "Since this is a breaking change we will consult the community about this change."</p>



<a name="153817536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817536">(Mar 23 2016 at 06:13)</a>:</h4>
<p>well, here you go, being consulted</p>



<a name="153817540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817540">(Mar 23 2016 at 06:15)</a>:</h4>
<p>I have a problem with this - it's the only way to find out whether a delete happened or not. It was deliberately different so you could tell whether it succeeded or not</p>



<a name="153817541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817541">(Mar 23 2016 at 06:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> - comment from you...</p>



<a name="153817597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817597">(Mar 23 2016 at 09:16)</a>:</h4>
<p>I'd say it succeeded if all matching resources were deleted. The fact that there were 0 or 100 matches doesn't change the fact that it was a success.</p>
<p>Is there a use case for wanting to do a conditional delete but needing to know that it didn't find any matches? The use case for the opposite is Simone's work around turning V2 messages with allergy lists into transactions, which seems valid to me</p>



<a name="153817616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817616">(Mar 23 2016 at 10:16)</a>:</h4>
<p>Well, I think that users see a comfort factor in knowing that something was deleted or not. They know whether they got the Target details correct</p>



<a name="153817638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817638">(Mar 23 2016 at 12:10)</a>:</h4>
<p>Let's recap... is the proposal this?<br>
<strong>Conditional Delete</strong></p>
<ul>
<li><strong>No Matches</strong> Server returns <code>204 No Content</code></li>
<li><strong>One Match</strong> Server deletes the match and returns <code>204 No Content</code></li>
<li><strong>Multiple Matches</strong> Server returns <code>412 Precondition Failed</code></li>
</ul>
<p>In this case, you can't differentiate between no match and one match.</p>



<a name="153817640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817640">(Mar 23 2016 at 12:12)</a>:</h4>
<p>yes that's the proposal. One of the goals of introducing conditional delete was to allow a client to know whether delete happened or not. transactionally. (as opposed to simple delete). THis proposal would mean you couldn't find at that way either </p>



<a name="153817669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817669">(Mar 23 2016 at 15:24)</a>:</h4>
<p>I'd agree that a <strong>no matches</strong> should not be an error, i.e. <code>&lt; 400</code>. From a client perspective I don't think I'd care how many things were deleted (even if zero) since I just want to be sure they are gone in case they are there. If I get a 404 I'm assuming something went wrong, I'd handle the error simply to discover that nothing needed to be deleted.<br>
Otherwise, if I cared, I could first search for them and then individually delete them. Or an <code>OperationOutcome</code> could be returned?</p>



<a name="153817711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817711">(Mar 23 2016 at 19:14)</a>:</h4>
<p>Pascal, that is not transactionally safe. If you simply want to delete, you can use the normal delete operation, that works as you say. Conditional delete was imagined as a way to find out whether you deleted or not</p>



<a name="153817712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817712">(Mar 23 2016 at 19:14)</a>:</h4>
<p>I suppose we could profile OperationOutcome, yes. but it seems ways more complex. </p>



<a name="153817713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817713">(Mar 23 2016 at 19:14)</a>:</h4>
<p>I'm not sure what the driver for this change is?</p>



<a name="153817811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817811">(Mar 23 2016 at 21:01)</a>:</h4>
<p>I guess I interpreted the target use case for the conditional delete wrong, then. The change request mentions “This means that you can't have a transaction which deletes a collection of AllergyIntolerances for a patient and replaces it with a new list”. I can see how in this case a <code>404</code> is suboptimal.<br>
I'd have thought along the same lines, e.g. an app that for whatever reason needs to replace a month's worth of glucose readings with values from another source. I'd see how you can do a conditional delete and don't actually care whether zero or 1,345 readings were deleted, you just want to be sure all those are gone.<br>
If the idea is to only delete one certain resource I'd go the other route and search for it first, then delete if it exists. I'm probably missing a common use case for this envisioned conditional delete, one match and you need to know whether this one match was deleted.</p>



<a name="153817814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817814">(Mar 23 2016 at 21:10)</a>:</h4>
<p>"earch for it first, then delete if it exists" - transactional problem.</p>



<a name="153817818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817818">(Mar 23 2016 at 21:12)</a>:</h4>
<p>I don't understand why 404 means you can't do that </p>



<a name="153817921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817921">(Mar 24 2016 at 14:06)</a>:</h4>
<p>If a client wants to purge and replace Items in one transaction as Pascal describes, the fact that there was nothing to purge shouldn't cause the transaction to fail. The client would still want the new items to be added. I think the "purge and replace"-scenario is going to be very common. That's also why we changed the sequence of the transaction processing to DELETE-POST-PUT-GET . </p>



<a name="153817940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817940">(Mar 24 2016 at 18:29)</a>:</h4>
<p>Ok. So a 404 means transaction fail... I'll think about that </p>



<a name="153817953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153817953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153817953">(Mar 24 2016 at 19:52)</a>:</h4>
<p>need a 209 deleted...</p>



<a name="153818064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153818064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153818064">(Mar 25 2016 at 12:41)</a>:</h4>
<p>Too bad there is no <code>2xx No Change</code> nor the <code>209 Deleted</code> indeed. Could change to a <code>200 OK</code> and an <code>OperationOutcome</code> if one absolutely must know what was deleted, which I think is mostly needed when only 1 resource should be deleted, so one could just as well do a get/search first, then a delete.<br>
I still think _conditional delete_ is for “delete anything that matches and let me continue”, so <code>204 No Content</code> sounds good to me. If you need to know what was deleted, do a search and the standard _delete_. But my view is heavily biased on client side flows.</p>



<a name="153818105"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153818105" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153818105">(Mar 25 2016 at 17:15)</a>:</h4>
<p>Search and delete has transactional problems</p>



<a name="153818106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153818106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153818106">(Mar 25 2016 at 17:15)</a>:</h4>
<p>Right, best case you'll get optimisitic concurrency failures, worst case, deadlocks.</p>



<a name="153818107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153818107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153818107">(Mar 25 2016 at 17:16)</a>:</h4>
<p>Best case it'll work! You're a pessimist?..</p>



<a name="153818158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153818158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153818158">(Mar 25 2016 at 21:27)</a>:</h4>
<p>Back online after a few days of spotty wifi.. Could we solve this with a code in the OperationOutcome returned by the server? Like, the server could return an OO with a code of "MSG_NO_MATCH" if it didn't find anything to delete.</p>



<a name="153818168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153818168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153818168">(Mar 25 2016 at 22:03)</a>:</h4>
<p>We could. For me, it raises the question of defining content specific error magic values. There's been several other use cases for this, and I'm starting to see them in implementation guides. I don't know whether we should get I to that or not</p>



<a name="153818170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153818170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153818170">(Mar 25 2016 at 22:07)</a>:</h4>
<p>Well, I mean it's kind of splitting hairs but to me this isn't an error condition.. It's just a clarification about the success.</p>
<p>I would see "just delete anything that matches this search and I don't care how many that is" as the most likely way this would be used...</p>



<a name="153818177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Breaking%20Change%20Alert%21/near/153818177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Breaking.20Change.20Alert!.html#153818177">(Mar 26 2016 at 00:34)</a>:</h4>
<p>Agree. Error wasn't the right word. Special magic values for OperationOutcome.issue.details</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
