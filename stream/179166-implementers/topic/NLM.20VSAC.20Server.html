---
layout: page
title: "FHIR Chat  · NLM VSAC Server · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html">NLM VSAC Server</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="213459691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/213459691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Nielsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#213459691">(Oct 15 2020 at 17:29)</a>:</h4>
<p>How does everyone think resolving VSAC value sets and code systems should work, architecturally?   Obviously the NLM servers (both FHIR and REST API) are the source of truth for these value sets ... but can or should they be asked to handle requests from all the installed FHIR servers in the world?    Are the NLM servers behind a CDN (thus spreading the load)?   Should everyone use a prescribed caching design?  What do people do now?</p>



<a name="213474074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/213474074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#213474074">(Oct 15 2020 at 19:13)</a>:</h4>
<p>They certainly should not be used from production systems. The lack of a SLA should ensure that, but NLM should state that somewhere.</p>



<a name="213474373"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/213474373" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#213474373">(Oct 15 2020 at 19:16)</a>:</h4>
<p>we distribute an NPM package containing the value sets from the authoritative source so systems don't need to hit the NLM servers directly</p>



<a name="213477986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/213477986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Nielsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#213477986">(Oct 15 2020 at 19:45)</a>:</h4>
<p>Where can I get that NLM package?</p>



<a name="213478012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/213478012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Nielsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#213478012">(Oct 15 2020 at 19:45)</a>:</h4>
<p>And that only works for intensional value sets, right?</p>



<a name="213489365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/213489365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#213489365">(Oct 15 2020 at 21:19)</a>:</h4>
<p>the package contains all the value sets, intensional or not. FHIR servers should be able to work with both. The package is here: <a href="http://fhir.org/packages/us.nlm.vsac/">http://fhir.org/packages/us.nlm.vsac/</a>  (I really need to put an HTML interface there...)</p>



<a name="214122941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/214122941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Nielsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#214122941">(Oct 21 2020 at 22:27)</a>:</h4>
<p>Grahame, a quick question.   I downloaded the package.tgz file from the web site you referenced, and unpacked it.  I was playing around and checking references to other ValueSets inside the ValueSets in that file, and found that some of them (well, actually 190) weren't in the package ... but the ValueSet URIs start with <a href="http://cts.nlm.nih.gov/fhir/ValueSet/">http://cts.nlm.nih.gov/fhir/ValueSet/</a> and when I look on the VSAC web site, they seem to be valid.</p>
<p>For example, ValueSet 2.16.840.1.113883.3.666.5.2316 is referenced by 2.16.840.1.113883.3.666.5.696 and 2.16.840.1.113883.3.666.5.2256 ... but is not included in the package.tgz file.</p>
<p>Should it (and the others) have been included in the file?  Or do I need to go somewhere else to get the definition of that ValueSet?</p>
<p>(Happy to send you the full list .. but thought I would ask first).</p>
<p>Thanks,<br>
Robert</p>



<a name="214126060"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/214126060" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#214126060">(Oct 21 2020 at 23:06)</a>:</h4>
<p>it should be in there. I don't know why it isn't?</p>



<a name="214656399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/214656399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#214656399">(Oct 27 2020 at 02:51)</a>:</h4>
<p><span class="user-mention" data-user-id="191503">@Robert McClure</span> is this one of the intentional value sets?</p>



<a name="214708567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/214708567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gay Dolin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#214708567">(Oct 27 2020 at 14:41)</a>:</h4>
<p>2.16.840.1.113883.3.666.5.696 (Any infection) is a grouping value set containing.                                                                                                      2.16.840.1.113883.3.666.5.903 Any Infection ICD10CM<br>
2.16.840.1.113883.3.666.5.902   Any Infection ICD9CM<br>
2.16.840.1.113883.3.666.5.2316 Any Infection SNOMED CT<br>
<em>All of these are extensional sets, NOT intensional ones.</em> So, that is not the cause. Do intensional sets typically cause this retrieval issue STILL?</p>



<a name="214714300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/214714300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#214714300">(Oct 27 2020 at 15:16)</a>:</h4>
<p>As Gay noted, these are not intensional, and they exist in the published space (all member value sets must be also published to get included in a grouper.) Given the approach you took to generate the package I don't know why those did not get included.</p>
<p>I'm compelled to note that VSAC does require a <a href="https://www.nlm.nih.gov/vsac/support/usingvsac/requestumlslicense.html">free license</a> to gain access to the value sets. While there is no explicit (that I can find) noted prohibition of redistribution of VSAC content, VSAC use falls under the UMLS license and <a href="https://www.nlm.nih.gov/research/umls/knowledge_sources/metathesaurus/release/license_agreement.html">that license</a> in section 3 and 12 does prohibit redistribution of "subsets" or derivative works. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> should confirm the package you've made available is in compliance with the UMLS license or is covered by a different agreement.</p>



<a name="215046796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215046796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215046796">(Oct 30 2020 at 00:58)</a>:</h4>
<p>no there's no different agreement. I'm going to withdraw it and require everyone to provide an APIKey to use VSAC value sets</p>



<a name="215048541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215048541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215048541">(Oct 30 2020 at 01:39)</a>:</h4>
<p>won't that effectively mean that no one can reference NLM VSAC value sets in their implementation guides?  How would it work if I wanted to and needed to provide an APIKey?</p>



<a name="215051636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215051636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215051636">(Oct 30 2020 at 02:47)</a>:</h4>
<p>you'll have to register with NLM for an APIKey. Then you'll have to put the key in a local configuration file, so that the IG Publisher has a copy. The ci-build and publication machines will use my own personal APIKey for their builds</p>



<a name="215055715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215055715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gay Dolin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215055715">(Oct 30 2020 at 04:18)</a>:</h4>
<p>FYI: <span class="user-mention" data-user-id="191410">@Brett Marquard</span>  <span class="user-mention" data-user-id="191401">@Eric Haas</span></p>



<a name="215056967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215056967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215056967">(Oct 30 2020 at 04:55)</a>:</h4>
<p>Ah understood.</p>



<a name="215126485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215126485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Nielsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215126485">(Oct 30 2020 at 17:31)</a>:</h4>
<p>So Grahame, you still think it is a good and proper thing to download the ValueSet definitions and use them locally (with the understanding that they become stale after a while), right?   Or is the proper way to handle ValueSets defined by VSAC to always contact the VSAC API ... every FHIR request?   I would think not (and of course there would be caching).  But I would like your opinion.</p>



<a name="215126637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215126637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Nielsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215126637">(Oct 30 2020 at 17:33)</a>:</h4>
<p>And I suppose I could just contact the VSAC server and cache the definitions of the 190 or so that are missing from the package.  Not sure how much of a load that would even be.</p>



<a name="215159672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215159672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215159672">(Oct 30 2020 at 22:51)</a>:</h4>
<p>OK so catching up here.  What I hear is if we intend to use VSAC where we can  (and we do) we need to:</p>
<ol>
<li>get an API Key </li>
<li>add it the fhir.ini file so we can see the VSAC terminology in our local builds</li>
<li>when we push it to the auto-publisher it will still work</li>
</ol>



<a name="215358238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215358238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Marquard <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215358238">(Nov 02 2020 at 18:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  do you have an example fhir.ini with a fake key populated for us to follow?</p>



<a name="215361696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215361696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215361696">(Nov 02 2020 at 18:53)</a>:</h4>
<p>It is likely not in fhir.ini, as that is tracked in git. Grahame wrote "a local configuration file".</p>



<a name="215363302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215363302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215363302">(Nov 02 2020 at 19:05)</a>:</h4>
<p>Yes whatever it is ... where is is documented/and  an example so I can get started?</p>



<a name="215368506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215368506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215368506">(Nov 02 2020 at 19:40)</a>:</h4>
<p>I am assuming that there will be an announcement, with documentation, when the change will take place. It is pretty clear how it will work, isn't it?<br>
Maybe we can give Grahame some time to flesh it out, especially if the API may be still in a fine-tuning stage.</p>
<p>I appreciate the "early access" running commentary on things to come.</p>



<a name="215368727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215368727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215368727">(Nov 02 2020 at 19:42)</a>:</h4>
<blockquote>
<p>Or is the proper way to handle ValueSets defined by VSAC to always contact the VSAC API ... every FHIR request?</p>
</blockquote>
<p>My understanding is that the VSAC API will be contacted when an IG is being built and published. The use of the IG would not require contacting the VSAC API.</p>



<a name="215372291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215372291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215372291">(Nov 02 2020 at 20:15)</a>:</h4>
<p>Here is the technical documentation for the <a href="https://documentation.uts.nlm.nih.gov/rest/authentication.html">UMLS REST API</a> that beginning Jan1, 2021 all NLM API will require. As has always been a characteristic for NLM API use, this also expects a specific user's credentials. As it stands, any access will need to generate the ticket with <em>their own UMLS API Key</em>. This is not "being fine tuned," it is set and has been operational for months. </p>
<p>Of particular note <span class="user-mention" data-user-id="192685">@Vassil Peytchev</span> is that use of an IG <strong>absolutely</strong> will be under the requirement that the user meets the requirements of the UMLS license. This is the same for all HL7 artifacts: IE: any user of an IG <strong>MUST</strong> satisfy the IP requirements for any terminology utilized by the user in implementing the IG.</p>



<a name="215373377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215373377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215373377">(Nov 02 2020 at 20:24)</a>:</h4>
<p>My point was that the <em>IP requirements for using VSAC value sets</em> is not equivalent to <em>requiring the use the UMLS REST API</em> when there is a code placed in a FHIR resource, which a system is returning as a result of a FHIR RESTful GET or search.</p>



<a name="215376076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215376076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215376076">(Nov 02 2020 at 20:44)</a>:</h4>
<p>I have not yet done this - I was just getting the external requirements in place for when I do it</p>



<a name="215376101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215376101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215376101">(Nov 02 2020 at 20:44)</a>:</h4>
<p>I will give doco when I do. For now, you still have to use the VSAC package</p>



<a name="215377148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215377148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215377148">(Nov 02 2020 at 20:53)</a>:</h4>
<p>I am eager to use VSAC in US Core and my question is specific to local builds where I put the basic authentication stuff:</p>
<ul>
<li>Will this be available near term and  within the ballot deadline</li>
<li>Is the VSAC package approach = dependency in the IG resource?</li>
</ul>



<a name="215377887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/NLM%20VSAC%20Server/near/215377887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/NLM.20VSAC.20Server.html#215377887">(Nov 02 2020 at 20:59)</a>:</h4>
<p>yes for now, do it as a dependency.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
