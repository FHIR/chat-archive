---
layout: page
title: "FHIR Chat  · Promoting contained resources to standalone · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html">Promoting contained resources to standalone</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="185521045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185521045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185521045">(Jan 13 2020 at 18:27)</a>:</h4>
<p>I haven't seen this scenario explicitly called out in <a href="http://hl7.org/fhir/references.html#contained" target="_blank" title="http://hl7.org/fhir/references.html#contained">http://hl7.org/fhir/references.html#contained</a> : if a client creates a resource that contains another resource via POST, is it the server's call whether it pulls out the contained resource and creates a standalone resource for it (updating the reference of course) or should a server not decide that by itself and always leave contained resources as they are? Should we call out the preference and/or guidance on this scenario to the spec?</p>



<a name="185530612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185530612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185530612">(Jan 13 2020 at 19:53)</a>:</h4>
<p>if the client has provided a contained resource correctly - because there's not enough information to identify the contained resource - it would be futile and inappropriate to try to pull it out</p>



<a name="185530911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185530911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185530911">(Jan 13 2020 at 19:56)</a>:</h4>
<p>Can you elaborate? What determines there is or isn't enough information? If the contained resource had an identifier and others fields that the server determined could become standalone, wouldn't it be up to the server?</p>



<a name="185531310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185531310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185531310">(Jan 13 2020 at 20:00)</a>:</h4>
<p>If the contained resource has enough information to be stand alone, then it shouldn't have been sent as contained in the first place.</p>



<a name="185531356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185531356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185531356">(Jan 13 2020 at 20:00)</a>:</h4>
<p>'contained' isn't an expedient way to send multiple resources at once.  It's a mechanism for sending resources that <em>cannot</em> live independently from their container.</p>



<a name="185531391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185531391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185531391">(Jan 13 2020 at 20:01)</a>:</h4>
<p>If you want a convenient way to send multiple resources in a single call, use a batch or transaction Bundle.</p>



<a name="185531448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185531448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185531448">(Jan 13 2020 at 20:01)</a>:</h4>
<p>contained resources really shouldn't contain an identifier. that would be a clear marker for someone abusing contained resources</p>



<a name="185531638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185531638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185531638">(Jan 13 2020 at 20:03)</a>:</h4>
<p>Would it be safe to say: The mechanism by which an additional resource can be sent would be up to the individual servers to decide.</p>



<a name="185531824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185531824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185531824">(Jan 13 2020 at 20:05)</a>:</h4>
<p>the mechanism?</p>



<a name="185532115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185532115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185532115">(Jan 13 2020 at 20:08)</a>:</h4>
<p>Batch vs post vs operation as an example.</p>



<a name="185532356"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185532356" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185532356">(Jan 13 2020 at 20:10)</a>:</h4>
<p>well, it can be up to individual servers, or it may be specified in some IG</p>



<a name="185532379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185532379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185532379">(Jan 13 2020 at 20:10)</a>:</h4>
<p>or it may be implied by the rules in the specification</p>



<a name="185532452"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185532452" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185532452">(Jan 13 2020 at 20:11)</a>:</h4>
<p>Fair enough. Then it really is up to the IG/Server to decide how handle the situation then.</p>



<a name="185532491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185532491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185532491">(Jan 13 2020 at 20:12)</a>:</h4>
<p>Example would be serviceprovider on encounter.</p>



<a name="185532815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185532815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185532815">(Jan 13 2020 at 20:15)</a>:</h4>
<p>The client may have a name/identifier for an organization, but nothing else. The server may deem that is sufficient for a standalone resource. Since organization (and many FHIR resources) doesn't require any fields, I thought the comment determining sufficient data was interesting because there isn't much required in that example. So one server may say post the organization first, another may say batch, and another may something else.</p>



<a name="185538558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185538558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185538558">(Jan 13 2020 at 21:16)</a>:</h4>
<p>in principle you are correct. The server is always on slippery ground when it's double thinking the client, but there's circumstances in which it can be known to be safe.</p>



<a name="185540945"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185540945" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185540945">(Jan 13 2020 at 21:42)</a>:</h4>
<p>Our server (as many other I am sure) has no concept of contained resources, so if we receive such a thing the options are either reject or try to convert the contained into a 'proper' stand alone resource - and we do both depending on the case</p>



<a name="185543865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185543865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185543865">(Jan 13 2020 at 22:15)</a>:</h4>
<p>That is the type of behavior I would have thought would have been "standard", but in the case where you create a resource, what do you respond with on a subsequent get of the resource? Still the contained, or using the reference datatype you reference the "real" resource?</p>



<a name="185544316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185544316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185544316">(Jan 13 2020 at 22:20)</a>:</h4>
<p>the second</p>



<a name="185544373"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185544373" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Drew Torres <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185544373">(Jan 13 2020 at 22:21)</a>:</h4>
<p>That is what I would expect as well.</p>



<a name="185544831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185544831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185544831">(Jan 13 2020 at 22:26)</a>:</h4>
<p>Clients sending resource A that contains resource B should generally expect to get back what they submit.  And they should expect that querying directly for B won't return anything (unless they use an advanced search mechanism that isn't widely supported).  If the server that receives A happens to be able to figure out how to get B to stand alone, they're permitted - but not required to break it out and store it as an independent resource - or change the link to be an existing standard resource.  (Just as they're permitted to change other data in the received resource based on 'special' knowledge or business rules they might have.)  Any system that makes such changes must be aware that doing so may invalidate any digital signatures present in the instance or elsewhere that refer to the resource.</p>



<a name="185544996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185544996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185544996">(Jan 13 2020 at 22:28)</a>:</h4>
<p>Yes, in the cases where we process a contained resource we convert it to a stand-alone one, and that's what the client would see - a separate resource, no longer a contained one</p>



<a name="185546830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185546830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185546830">(Jan 13 2020 at 22:52)</a>:</h4>
<p>What does the client see in the response to the create when that conversion happens? It seems to me you can only return one resource at that point, even if multiple full resources were created.</p>



<a name="185547161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185547161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185547161">(Jan 13 2020 at 22:56)</a>:</h4>
<p>You would see what was stored in the 'created' resource (if you get back a copy) or warning messages about what changes occurred if you don't.  If a contained reference got changed to a 'real' resource, you'd see the reference to whatever was pointed to (whether a newly created instance or something that existed before).</p>



<a name="185547172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185547172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185547172">(Jan 13 2020 at 22:57)</a>:</h4>
<p>right. you see the focus resource returned as the server accepted it. Which means, in this case, the contained resources removed, and the references updated to the new location of the resource that was contained when submitted by the client</p>



<a name="185556574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185556574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185556574">(Jan 14 2020 at 01:22)</a>:</h4>
<p>On a subsequent PUT operation, I am assuming the server will update both the focus resources and newly created ones?</p>



<a name="185574038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185574038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185574038">(Jan 14 2020 at 08:29)</a>:</h4>
<p>Note that a contained resources could be promoted to a stand-alone one at any point in time, not just when the resource is posted.</p>



<a name="185684735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185684735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185684735">(Jan 15 2020 at 10:18)</a>:</h4>
<p>That's fun in the update. Was that an update to the existing, or a new one altogether. If you remove the reference and contained, does the server remember to cleanup the separate resource that is no pinger referenced?<br>
Lots of fun little gotchas. Just like patient contacts in v2 adt messages.</p>



<a name="185685064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Promoting%20contained%20resources%20to%20standalone/near/185685064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Promoting.20contained.20resources.20to.20standalone.html#185685064">(Jan 15 2020 at 10:23)</a>:</h4>
<p>Given that a contained resource doesn't have an identifier, one would have to assume some sort of 'snapshot' behaviour on the part of the client. But containment is not about grouping for the 'sole reason of grouping', so FHIR doesn't see snapshot as a valid behavior on the part of the client when containing resources. <br>
If Client A sends a resource to a server, then who knows what other clients, or the server based on its own logic, will do/modify/delete that resource? There can't be any expectation on behalf of A that the server will leave "their" resource alone, unless there is some explicit agreement between a server and a client prior to the post by A of a resource.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
