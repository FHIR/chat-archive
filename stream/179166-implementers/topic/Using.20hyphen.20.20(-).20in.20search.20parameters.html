---
layout: page
title: "FHIR Chat  · Using hyphen  (-) in search parameters · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html">Using hyphen  (-) in search parameters</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153900810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153900810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Omar El-Begawy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153900810">(Aug 08 2017 at 07:02)</a>:</h4>
<p>Hi, the latest version of FHIR uses hyphens in the search parameters of some profiles, e.g. Patient has address-city and general-practitioner. However, using hyphens in query parameters does not follow the RFC6570 specification. Libraries that follow this specification strictly will give an error message when they encounter a query with a hyphen, e.g. this library <a href="https://github.com/grncdr/uri-template" target="_blank" title="https://github.com/grncdr/uri-template">https://github.com/grncdr/uri-template</a> . Is there a way to update the FHIR specification to follow the URI specification? This affects how data models are constructed and REST queries that implementations can make.</p>



<a name="153900848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153900848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153900848">(Aug 08 2017 at 08:46)</a>:</h4>
<p>does rfc 6570 matter?</p>



<a name="153900858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153900858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153900858">(Aug 08 2017 at 09:01)</a>:</h4>
<p>since when is a hyphen not allowed in an URI ?<br>
I don't see that anywhere</p>



<a name="153900865"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153900865" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153900865">(Aug 08 2017 at 10:17)</a>:</h4>
<p>My understanding is that 6750 simply provides an additional syntax to express some queries. And in that additional syntax hyphens are not part of the syntax. URIs allow hyphens, but RFC6750-formatted queries (they call them "URI templates" do not. If that is correct, I'd say the question is: do we want to provide additional rfc 6750 syntax ? It does not affect current specification IMO. I may be wrong.</p>



<a name="153900887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153900887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Omar El-Begawy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153900887">(Aug 08 2017 at 12:38)</a>:</h4>
<p>We are testing our API implementation with REST requests, but the test tool uses a validation library which considers query parameters with hyphens to be malformed. We found that the reason was that they did not conform to RFC6570.</p>
<p>This could be a problem also with other tools that closely follow RFC 6570.</p>
<p>URIs can take many different forms, some even arbitrary ones. RFC 6570 is an attempt to standardize their formats and make them well-formed.</p>
<p>Here is the specification: <a href="https://tools.ietf.org/html/rfc6570" target="_blank" title="https://tools.ietf.org/html/rfc6570">https://tools.ietf.org/html/rfc6570</a><br>
A list of implementations: <a href="https://code.google.com/archive/p/uri-templates/wikis/Implementations.wiki" target="_blank" title="https://code.google.com/archive/p/uri-templates/wikis/Implementations.wiki">https://code.google.com/archive/p/uri-templates/wikis/Implementations.wiki</a></p>



<a name="153900950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153900950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153900950">(Aug 08 2017 at 14:42)</a>:</h4>
<p>what is recommmended instead of hyphens?</p>



<a name="153901085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153901085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Omar El-Begawy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153901085">(Aug 09 2017 at 05:25)</a>:</h4>
<p>The spec gives these:</p>
<div class="codehilite"><pre><span></span> varchar       =  ALPHA / DIGIT / &quot;_&quot; / pct-encoded
</pre></div>


<p>where</p>
<div class="codehilite"><pre><span></span> ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
 DIGIT          =  %x30-39             ; 0-9
 pct-encoded    =  &quot;%&quot; HEXDIG HEXDIG
 HEXDIG         =  DIGIT / &quot;A&quot; / &quot;B&quot; / &quot;C&quot; / &quot;D&quot; / &quot;E&quot; / &quot;F&quot;
                   ; case-insensitive
</pre></div>


<p>I'd say it's up to you to select from this set.</p>
<p>I saw that you had camelcasing at some point. What happened to that?</p>



<a name="153901378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153901378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153901378">(Aug 09 2017 at 22:57)</a>:</h4>
<p>we had a mix of camel casing and hyphens. We standardised on hyphens.</p>



<a name="153901379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153901379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153901379">(Aug 09 2017 at 22:58)</a>:</h4>
<p>I have no idea why this rfc decided that hyphens are not approprate - it seems like an odd decision to me</p>



<a name="153901604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153901604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Omar El-Begawy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153901604">(Aug 10 2017 at 13:25)</a>:</h4>
<p>I have no idea either.  But my guess is that either the spec writing group did not have a use case where the hyphen was part of a query parameter and therefore did not even think that it could be an issue, or the hyphen is unreserved until given a role as a special character in the future.</p>



<a name="153901606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153901606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153901606">(Aug 10 2017 at 14:06)</a>:</h4>
<p>i don't see any rationale why variable names should be treated different than all other parts of the URI<br>
as far as I understand variable names are the only parts that have different rules </p>
<p>IMHO there is no real benefit in adding the restrictions of RFC 6750.</p>



<a name="153901607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153901607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153901607">(Aug 10 2017 at 14:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span>  there is no "instead" it would just mean, that submitting the query would need to escape the hyphen like</p>
<p>GET ..../Patient?adress%2dcity=New%20York</p>



<a name="153901609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153901609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153901609">(Aug 10 2017 at 14:31)</a>:</h4>
<p>I did just sent such an encoded query to Grahame's server and it worked well. So imho there is no need to change the search parameters.<br>
It would be up to the client to encode search parameter names according to RFC 6750 if desired.</p>
<p>Therefore I think there is no need for action regarding the specs</p>



<a name="153901620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153901620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153901620">(Aug 10 2017 at 15:08)</a>:</h4>
<p>Well, if some servers can handle dashes in search parameters and others can't, that creates a barrier for interoperability.  How prevelant are libraries that expect RFC 6750 adherence?</p>



<a name="153901688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153901688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153901688">(Aug 10 2017 at 17:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> just to put that right: RFC 6750 does not forbid dashes in variable names, but enforces escaping on transmission. </p>
<p>That escaping will be undone in the HTTP receiver on the server side before passing the HTTP request to the layer above. Therefore the  application will receive "normal" search parameters. <br>
For that reason, RFC 6750 can't be an issue on the server side, but only on the client side.</p>



<a name="153901785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153901785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153901785">(Aug 10 2017 at 20:28)</a>:</h4>
<p>So perhaps adding a note that some client systems may need to escape the "-" in search parameters is sufficient?</p>



<a name="153902006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153902006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Omar El-Begawy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153902006">(Aug 11 2017 at 05:53)</a>:</h4>
<p>We already tried replacing - with %2d. Didn't work.</p>



<a name="153902014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153902014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Scholz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153902014">(Aug 11 2017 at 07:26)</a>:</h4>
<p>That should have worked, as that ist what RFC 6750 says, <br>
If it didn't work your library is buggy on which side is the library located server or client ?</p>



<a name="153902156"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153902156" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Omar El-Begawy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153902156">(Aug 11 2017 at 13:47)</a>:</h4>
<p>The spec gives these:</p>
<div class="codehilite"><pre><span></span> varchar       =  ALPHA / DIGIT / &quot;_&quot; / pct-encoded
</pre></div>


<p>where</p>
<div class="codehilite"><pre><span></span> ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
 DIGIT          =  %x30-39             ; 0-9
 pct-encoded    =  &quot;%&quot; HEXDIG HEXDIG
 HEXDIG         =  DIGIT / &quot;A&quot; / &quot;B&quot; / &quot;C&quot; / &quot;D&quot; / &quot;E&quot; / &quot;F&quot;
                   ; case-insensitive
</pre></div>


<p>The percentage sign is not part of the spec, and therefore %2d is not valid. Your query works because STU3 is not compliant with RFC 6570. But if client applications want to adhere to the spec or they use libraries that do so, there will be queries that they cannot make to a FHIR server. This affects url validation, routing, etc.</p>
<p>Templates and standards are useful because they are general and reusable in different contexts. URIs can very well be arbitrary, but nonstandard URIs are a hindrance to interoperability, because it requires more time for developers to learn their patterns. Nonstandards compliance also makes systems prone to errors.</p>
<p>It would be quite questionable for us to ask application developers and contractors to replace - with %2d, as this cannot be found in the STU3 documentation. With multiple vendors building mobile applications for health care and contractors building services in a microservice environment, it is important to adhere to standards. We cannot guarantee that all parts of our system are interoperable if some follow a standard that others do not, nor can we guarantee that contracted parts of our system will pass the necessary audits.</p>



<a name="153902157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153902157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Omar El-Begawy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153902157">(Aug 11 2017 at 13:49)</a>:</h4>
<p>Please reference RFC 6570, which is about URI templates. I am not concerned with RFC 6750, which is about OAuth (earlier there was one question in this stream about OAuth, probably because the person made a query with the OAuth spec reference)</p>



<a name="153902196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20hyphen%20%20%28-%29%20in%20search%20parameters/near/153902196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20hyphen.20.20(-).20in.20search.20parameters.html#153902196">(Aug 11 2017 at 20:34)</a>:</h4>
<p>well, I think you should go to the authors of the library and suggest that they support '-' anyway. Even if we changed policy on this and made <em>breaking changes</em> to all of our resources - something I find unlikely at best - the change would still not be effective till R4 - which won't be published until end of next year and only adopted gradually after that. And none of this discussion has demonstrated that RFC 6570 has any real reason to ban '-'. I smells like an oversight to me.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
