---
layout: page
title: "FHIR Chat  · Mandatory/optional fields inconsistency (docs/json schema) · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html">Mandatory/optional fields inconsistency (docs/json schema)</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="204652767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/204652767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arseniy Zhizhelev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#204652767">(Jul 22 2020 at 11:09)</a>:</h4>
<p>It seems to me that there is a mismatch between FHIR Structure definition and JSON schema. <br>
In particular, JSON schema specifies Claim Insurance Focal field as optional, while documentation <a href="https://www.hl7.org/fhir/claim-definitions.html#Claim.insurance.focal">https://www.hl7.org/fhir/claim-definitions.html#Claim.insurance.focal</a> says it's mandatory.<br>
See<br>
<a href="https://github.com/nazrulworld/fhir.resources/issues/18#issuecomment-661692087">https://github.com/nazrulworld/fhir.resources/issues/18#issuecomment-661692087</a> for the context.</p>



<a name="204673517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/204673517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#204673517">(Jul 22 2020 at 14:32)</a>:</h4>
<p>That's not an error.  I expect you'll see there's a co-occurrence rule that requires either <code>focal</code> or <code>_focal</code>.</p>



<a name="205238238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/205238238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arseniy Zhizhelev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#205238238">(Jul 28 2020 at 13:57)</a>:</h4>
<p>Could you help me find this co-occurrence rule inside json schema? What I see for <code>"Claim_Insurance": </code> is this:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A provider issued list of professional services and products which have been provided, or are to be provided, to a patient which is sent to an insurer for reimbursement.&quot;</span><span class="p">,</span>
    <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>


      <span class="nt">&quot;focal&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A flag to indicate that this Coverage is to be used for adjudication of this claim when set to true.&quot;</span><span class="p">,</span>
        <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/boolean&quot;</span>
      <span class="p">},</span>
      <span class="nt">&quot;_focal&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Extensions for focal&quot;</span><span class="p">,</span>
        <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/Element&quot;</span>
      <span class="p">},</span>


      <span class="nt">&quot;coverage&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Reference to the insurance card level information contained in the Coverage resource. The coverage issuing insurer will use these details to locate the patient\u0027s actual coverage within the insurer\u0027s information system.&quot;</span><span class="p">,</span>
        <span class="nt">&quot;$ref&quot;</span><span class="p">:</span> <span class="s2">&quot;#/definitions/Reference&quot;</span>
      <span class="p">}</span>

    <span class="p">},</span>
    <span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">&quot;required&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;coverage&quot;</span>
    <span class="p">]</span>
  <span class="p">}</span>
</code></pre></div>


<p>I only see <code>required</code> field here - <code>coverage</code>.</p>



<a name="205248088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/205248088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#205248088">(Jul 28 2020 at 15:10)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="205295221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/205295221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#205295221">(Jul 28 2020 at 21:53)</a>:</h4>
<p>I'm not generating the co-occurence rules</p>



<a name="205295399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/205295399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#205295399">(Jul 28 2020 at 21:56)</a>:</h4>
<p>because I don't see how to, I think</p>



<a name="205295996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/205295996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#205295996">(Jul 28 2020 at 22:02)</a>:</h4>
<p>FHIR has its own structure definition and validation code - why not use that? JSON schemas are a poor fit</p>



<a name="205313461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/205313461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#205313461">(Jul 29 2020 at 02:55)</a>:</h4>
<p>I thought in a post long ago you said you had?  But if it's not possible, so be it.  In any case, the elements have to be optional because the minOccurs rule applies to (at least one of) not both of.</p>



<a name="207972505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/207972505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Flessner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#207972505">(Aug 25 2020 at 14:49)</a>:</h4>
<p>I'm seeing several other missing <code>required</code> statements in the JSON Schema and am wondering if I'm just not reading it right. A couple of exmaples:</p>
<ul>
<li>Annotation does not require <code>text</code></li>
<li>Extension does not require <code>url</code> </li>
</ul>
<p>I do see <em>some</em> <code>required</code> properties in other DataTypes, but they're not consistent. For example, Signature lists <code>type</code> and <code>who</code> as required but not <code>when</code>.</p>



<a name="207973517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/207973517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Flessner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#207973517">(Aug 25 2020 at 14:56)</a>:</h4>
<p>Oh; the missing <code>required</code> flags are all on primitive data types. Does this mean that if you have an extension on a required field with a primitive datatype that the instance is valid if <em>only</em> the extension is present? E.g. you can have an Extension with <code>_url</code> but no <code>url</code> ? I thought <code>url</code> was still required in this case.</p>



<a name="207977353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/207977353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#207977353">(Aug 25 2020 at 15:23)</a>:</h4>
<p>url is not required if _url is present</p>



<a name="208025412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Mandatory/optional%20fields%20inconsistency%20%28docs/json%20schema%29/near/208025412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Mandatory.2Foptional.20fields.20inconsistency.20(docs.2Fjson.20schema).html#208025412">(Aug 25 2020 at 21:21)</a>:</h4>
<p>extension is a special case, but the json schema generator doesn't know about that. Feel free to create a task to make extension.url a special case in the generator</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
