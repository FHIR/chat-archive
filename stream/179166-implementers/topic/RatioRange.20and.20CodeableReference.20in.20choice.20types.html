---
layout: page
title: "FHIR Chat  · RatioRange and CodeableReference in choice types · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html">RatioRange and CodeableReference in choice types</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="264157365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/264157365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#264157365">(Dec 08 2021 at 13:51)</a>:</h4>
<p>R4B introduces new data types RatioRange and CodeableReference, but the list at <a href="https://build.fhir.org/branches/R4B/datatypes.html#open">https://build.fhir.org/branches/R4B/datatypes.html#open</a> is not updated to include them.</p>
<p>RatioRange is already used as a choice type in Ingredient, so I assume they can both be used as extension values and that list should be updated to include them.</p>



<a name="264157720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/264157720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#264157720">(Dec 08 2021 at 13:54)</a>:</h4>
<p>Additionally, wherever the conformance resources (e.g. the ones you get from <a href="https://build.fhir.org/branches/R4B/downloads.html">https://build.fhir.org/branches/R4B/downloads.html</a>) list the set of allowed types, I think these two new types should be added.</p>



<a name="264158444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/264158444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#264158444">(Dec 08 2021 at 14:00)</a>:</h4>
<p>I also noticed something unusual while looking into this one:</p>
<p>Task.input.value[x] (<a href="https://build.fhir.org/branches/R4B/task-definitions.html#Task.input.value_x_">https://build.fhir.org/branches/R4B/task-definitions.html#Task.input.value_x_</a>) and Task.output.value[x] seems to enumerate all the different allowed types.  Should those just be an "open" types (*) instead?</p>
<p>For example, like: <a href="https://build.fhir.org/branches/R4B/elementdefinition-definitions.html#ElementDefinition.defaultValue_x_">https://build.fhir.org/branches/R4B/elementdefinition-definitions.html#ElementDefinition.defaultValue_x_</a></p>
<p>Interestingly, it seems like the "open" choice types end up with the expanded list of types in the actual conformance artifacts, so its just some display sugar I guess.<br>
Both cases are missing the new data types.</p>



<a name="264192991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/264192991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#264192991">(Dec 08 2021 at 17:49)</a>:</h4>
<p>Another spot that probably needs changing if the new types are allowed in "open" choice types:  <a href="https://build.fhir.org/branches/R4B/extensibility.html#list">https://build.fhir.org/branches/R4B/extensibility.html#list</a></p>



<a name="264193144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/264193144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#264193144">(Dec 08 2021 at 17:50)</a>:</h4>
<p>Also, I've always wondered, is that list different than <a href="https://build.fhir.org/branches/R4B/datatypes.html#open">https://build.fhir.org/branches/R4B/datatypes.html#open</a> ?  Maybe better just to maintain that list in one spot?</p>



<a name="264518166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/264518166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#264518166">(Dec 10 2021 at 22:33)</a>:</h4>
<p>I've opened <a href="http://jira.hl7.org/browse/FHIR-34453">FHIR#34453</a> for this one.</p>



<a name="264813031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/264813031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#264813031">(Dec 14 2021 at 05:11)</a>:</h4>
<p>fixed in R4B and R5</p>



<a name="264813054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/264813054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#264813054">(Dec 14 2021 at 05:11)</a>:</h4>
<p>the code maintains it in one place internally</p>



<a name="269180532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/269180532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#269180532">(Jan 24 2022 at 22:15)</a>:</h4>
<p>looks like this change will need to be backed out for R4B based on the new resolution posted to <a href="https://jira.hl7.org/browse/FHIR-34453">https://jira.hl7.org/browse/FHIR-34453</a> ...</p>



<a name="269181345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/269181345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#269181345">(Jan 24 2022 at 22:23)</a>:</h4>
<p>but I'm confused about how we could say its not an allowed choice type when its explicitly listed as a choice type in <a href="https://build.fhir.org/branches/R4B/ingredient.html">https://build.fhir.org/branches/R4B/ingredient.html</a></p>



<a name="269193096"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/269193096" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#269193096">(Jan 25 2022 at 00:37)</a>:</h4>
<p>Sorry, it SHOULD be a choice type.  It <em>can't</em> be an extension type.  We don't have to worry about choice types breaking anything because the only place they can be used is in the new/changed resources.</p>



<a name="269249343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RatioRange%20and%20CodeableReference%20in%20choice%20types/near/269249343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RatioRange.20and.20CodeableReference.20in.20choice.20types.html#269249343">(Jan 25 2022 at 12:31)</a>:</h4>
<p>ah, that wasn't clear to me from the resolution text at all.  agree it makes sense, although<br>
it sounds like a fun one given that grahame mentioned above that the two lists currently come from a single place</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
