---
layout: page
title: "FHIR Chat  · Caching of Consent linked in X-Consent header · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Caching.20of.20Consent.20linked.20in.20X-Consent.20header.html">Caching of Consent linked in X-Consent header</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="155208441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Caching%20of%20Consent%20linked%20in%20X-Consent%20header/near/155208441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Caching.20of.20Consent.20linked.20in.20X-Consent.20header.html#155208441">(Jan 15 2019 at 22:02)</a>:</h4>
<p>In Q3, Security and CBCP approved adding an <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19312&amp;start=0" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19312&amp;start=0">X-Consent header</a>.  </p>
<p>The custodian of the data can certainly retrieve the Consent resource from that URI every time it appears in the X-Consent header, but it would be preferable to allow the custodian to trust a cached copy of the Consent.  Of course, the details of the Consent may have changed, so we need a way to expire that cache.  </p>
<p>In Q3 we discussed two possibilities:<br>
1. Add an element to the Consent resource indicating for how long it could be cached before it should be retrieved again (similar to the expiration of a Certificate Revocation List).<br>
2. Include a lifetime or expiration with the X-Consent header.</p>
<p>The workgroup preferred the latter.  </p>
<p>I've thought about it more since then and have thought of another possibility:<br>
3. Include an e-tag with the X-Consent header.</p>
<p>The custodian could compare the e-tag of its cached version to the e-tag included in the X-Consent header.  At any point that a request comes in with a different e-tag, the custodian knows its copy is stale.</p>
<p>Bear in mind that the client is obligated to only use the X-Consent header when it knows that the Consent in the URI fulfills the policy requirements for the custodian to share data with it.  </p>
<p>Security/CBCP folks, what do you think of this option?</p>



<a name="155208934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Caching%20of%20Consent%20linked%20in%20X-Consent%20header/near/155208934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Caching.20of.20Consent.20linked.20in.20X-Consent.20header.html#155208934">(Jan 15 2019 at 22:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> <span class="user-mention" data-user-id="192587">@David Pyke</span></p>



<a name="155209328"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Caching%20of%20Consent%20linked%20in%20X-Consent%20header/near/155209328" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Caching.20of.20Consent.20linked.20in.20X-Consent.20header.html#155209328">(Jan 15 2019 at 22:17)</a>:</h4>
<p>interesting... I am happy to hear improvement requests and comments</p>



<a name="155209357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Caching%20of%20Consent%20linked%20in%20X-Consent%20header/near/155209357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Caching.20of.20Consent.20linked.20in.20X-Consent.20header.html#155209357">(Jan 15 2019 at 22:17)</a>:</h4>
<p>Note that <span class="user-mention" data-user-id="191356">@Jenni Syed</span> has questioned the use of X-Header -- " They have officially deprecated that convention. See <a href="https://stackoverflow.com/questions/3561381/custom-http-headers-naming-conventions" target="_blank" title="https://stackoverflow.com/questions/3561381/custom-http-headers-naming-conventions">https://stackoverflow.com/questions/3561381/custom-http-headers-naming-conventions</a> for a good explanation of history."   I expect I will just follow the lead of FHIR-I who has used this model quite extensively.</p>



<a name="155209735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Caching%20of%20Consent%20linked%20in%20X-Consent%20header/near/155209735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Caching.20of.20Consent.20linked.20in.20X-Consent.20header.html#155209735">(Jan 15 2019 at 22:22)</a>:</h4>
<p>Oh, I'd forgotten about that.  Yeah, I saw that too.</p>



<a name="155210010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Caching%20of%20Consent%20linked%20in%20X-Consent%20header/near/155210010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Blackmon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Caching.20of.20Consent.20linked.20in.20X-Consent.20header.html#155210010">(Jan 15 2019 at 22:27)</a>:</h4>
<p>RFC6648 has much to say as noted above. That said, of concern may be firewalls and gateways that may now (or at some time in the future) filter out those header elements as non-standard, and therefore subject to risk--rightly so or not. To the extent that this would be standardization by us contrary to the "do not standardize this" guidance, this might should give pause.</p>



<a name="155212651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Caching%20of%20Consent%20linked%20in%20X-Consent%20header/near/155212651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Caching.20of.20Consent.20linked.20in.20X-Consent.20header.html#155212651">(Jan 15 2019 at 23:10)</a>:</h4>
<p>if it gets dropped, there is loss of benefit, but I think the X-header uses in FHIR today are there to enable automation. In the case of X-Consent and X-Provenance (the two I know best) the server can always just FAIL the transaction and that failure message (OpertionOutcome) would indicate the lack of the X-header it is looking for... so, this degrades gracefully....... That said, if there is a better mechanism that FHIR-I defines, I am happy to use it.</p>



<a name="155212666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Caching%20of%20Consent%20linked%20in%20X-Consent%20header/near/155212666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Caching.20of.20Consent.20linked.20in.20X-Consent.20header.html#155212666">(Jan 15 2019 at 23:11)</a>:</h4>
<p>What does the community think about the e-tag improvement?</p>



<a name="155213100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Caching%20of%20Consent%20linked%20in%20X-Consent%20header/near/155213100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Caching.20of.20Consent.20linked.20in.20X-Consent.20header.html#155213100">(Jan 15 2019 at 23:18)</a>:</h4>
<p>I like it - it's more efficient than a time-out process and also safer</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
