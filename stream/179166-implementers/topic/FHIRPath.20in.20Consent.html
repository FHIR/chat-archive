---
layout: page
title: "FHIR Chat  · FHIRPath in Consent · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html">FHIRPath in Consent</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="230537440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230537440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shamil Nizamov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230537440">(Mar 16 2021 at 15:53)</a>:</h4>
<p>Can <em>Consent.provision.class</em> be used to withhold/disclosure of specific information using FHIRPath rather than a resource type?<br>
For example, if a patient decided to withhold only his/her gender, would it be possible to define <em>Patient.gender</em> in the <em>Consent.provision.code</em>?</p>



<a name="230538406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230538406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230538406">(Mar 16 2021 at 15:59)</a>:</h4>
<p><span class="user-mention" data-user-id="192587">@David Pyke</span></p>



<a name="230538583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230538583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230538583">(Mar 16 2021 at 16:00)</a>:</h4>
<p>Boy, you're quick... <br>
LOINC code LP189571-5 is    Gender identity, so yes, if you're using LOINC to define what's being suppressed, then that would work</p>



<a name="230544014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230544014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230544014">(Mar 16 2021 at 16:19)</a>:</h4>
<p><span class="user-mention" data-user-id="192587">@David Pyke</span>, I'm not sure that's what's being asked (although that may be what they want). Can you use FHIRPath to define the elements to withold?</p>



<a name="230546032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230546032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230546032">(Mar 16 2021 at 16:30)</a>:</h4>
<p>WE haven't really worked with a use case to have an expression define the required filter.  That being said, it could be done but would need to be an extension</p>



<a name="230548552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230548552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shamil Nizamov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230548552">(Mar 16 2021 at 16:44)</a>:</h4>
<p>This is exactly what we are trying to avoid, i.e., using codes that (suddenly) may change. It's quite easier to define the restricted element by the FHIRPath. For example:</p>
<div class="codehilite"><pre><span></span><code>  &lt;provision&gt;
    &lt;type value=&quot;deny&quot;/&gt;
    ...
    &lt;class&gt;
      &lt;system value=&quot;http://hl7.org/fhir/resource-types&quot;/&gt;
      &lt;code value=&quot;Patient&quot;/&gt;
    &lt;/class&gt;
    &lt;code&gt;
      &lt;coding&gt;
        &lt;system value=&quot;http://hl7.org/fhirpath&quot;/&gt;
        &lt;code value=&quot;Patient.gender&quot;/&gt;
      &lt;/coding&gt;
    &lt;/code&gt;
    ...
  &lt;/provision&gt;
</code></pre></div>
<p>PS. Should I submit a ticket to consider including FHIRPath or may be to introduce a new element for that?</p>



<a name="230558219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230558219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230558219">(Mar 16 2021 at 17:38)</a>:</h4>
<p>Yes please!</p>



<a name="230558810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230558810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ryan moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230558810">(Mar 16 2021 at 17:42)</a>:</h4>
<p>I would think you would have to define a new element to use fhirpath in, as if the binding is extensible it would be non-compliant to have a second way to represent "patient's gender" as a code.</p>



<a name="230559726"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230559726" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230559726">(Mar 16 2021 at 17:47)</a>:</h4>
<p>Absolutely. We would need an element that uses an expression, kind of like <a href="http://hl7.org/fhir/metadatatypes.html#Expression">http://hl7.org/fhir/metadatatypes.html#Expression</a></p>



<a name="230560294"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230560294" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shamil Nizamov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230560294">(Mar 16 2021 at 17:50)</a>:</h4>
<p>Why? Since the <em>.code</em> is CodeableConcept I should be able to use the following:</p>
<div class="codehilite"><pre><span></span><code>  &lt;code&gt;
    &lt;coding&gt;
      &lt;system value=&quot;http://loinc.org&quot;/&gt;
      &lt;code value=&quot;76691-5&quot;/&gt;
    &lt;/coding&gt;
    &lt;coding&gt;
      &lt;system value=&quot;http://hl7.org/fhirpath&quot;/&gt;
      &lt;code value=&quot;Patient.gender&quot;/&gt;
    &lt;/coding&gt;
  &lt;/code&gt;
</code></pre></div>



<a name="230561081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230561081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230561081">(Mar 16 2021 at 17:54)</a>:</h4>
<p>You might be able to but people will likely want to do more than that so it may be better to set up FHIRPath expressions in the resource itself</p>



<a name="230561228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230561228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230561228">(Mar 16 2021 at 17:55)</a>:</h4>
<p>And I don't believe FHIRPath is a registered code system so that may cause issues</p>



<a name="230561849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230561849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shamil Nizamov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230561849">(Mar 16 2021 at 17:58)</a>:</h4>
<p>I'm puzzled a bit, could you show an example with the FHIRPath expression in this context?<br>
And I likely need to submit a ticket to include FHIRPath to the FHIR Terminology as well.</p>



<a name="230562142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230562142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230562142">(Mar 16 2021 at 18:00)</a>:</h4>
<p>Creating FHIRPath as a codesystem is more than just a ticket.  That would be a major project.</p>



<a name="230565534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230565534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230565534">(Mar 16 2021 at 18:20)</a>:</h4>
<p>FHIRPath isn't a code system.  It doesn't define "concepts".  It doesn't provide definitions.  It's a different thing.  An extension that points to Expression is a much better path</p>



<a name="230567193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230567193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shamil Nizamov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230567193">(Mar 16 2021 at 18:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192587">David Pyke</span> <a href="#narrow/stream/179166-implementers/topic/FHIRPath.20in.20Consent/near/230558219">said</a>:</p>
<blockquote>
<p>Yes please!</p>
</blockquote>
<p>Created: <a href="https://jira.hl7.org/browse/FHIR-31550">FHIR-31550</a></p>



<a name="230572664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230572664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shamil Nizamov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230572664">(Mar 16 2021 at 19:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179166-implementers/topic/FHIRPath.20in.20Consent/near/230565534">said</a>:</p>
<blockquote>
<p>FHIRPath isn't a code system.  It doesn't define "concepts".  It doesn't provide definitions.  It's a different thing.  An extension that points to Expression is a much better path</p>
</blockquote>
<p>I know. But while waiting for a better option, and for internal use only, and trying to avoid extension which may be too much, such quick and dirty non compliant solution may work.</p>



<a name="230574007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230574007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230574007">(Mar 16 2021 at 19:17)</a>:</h4>
<p>how would abusing a code be "too much" than just defining an extension which would be exactly what you need?</p>



<a name="230574910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230574910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230574910">(Mar 16 2021 at 19:23)</a>:</h4>
<p>A non-compliant solution should <em>never</em> be preferable to using an extension.  Extensions are normal and a completely reasonable way to handle special requirements.  Abusing core elements is not a good plan.</p>



<a name="230597123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230597123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230597123">(Mar 16 2021 at 21:52)</a>:</h4>
<p>I think this is the model that we are looking at in Permission</p>



<a name="230597180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230597180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230597180">(Mar 16 2021 at 21:53)</a>:</h4>
<p>what we need are some real examples to work on. theory has only taken us so far</p>



<a name="230632584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/230632584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#230632584">(Mar 17 2021 at 03:31)</a>:</h4>
<p>One downside to using FHIRPath for disclosure consent is that it would be tied to a specific attribute (or perhaps enumerated attributes). Using a "do not disclose gender" code would allow the server to target administrative sex, gender observations, and potentially things like certain procedures or conditions, etc.</p>



<a name="231794219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/231794219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#231794219">(Mar 25 2021 at 12:51)</a>:</h4>
<p>The trick(s) would be not to do that (only on ) the instance, but doing it on the profiles ("all patient genders that leave this server")<br>
And on data class ("all things tagged as potentially sensitive")<br>
And on clusters of data ("whenever we see a Postal code AND a date of birth")</p>



<a name="231794336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/231794336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#231794336">(Mar 25 2021 at 12:52)</a>:</h4>
<p>Is there an approach that does not have such downside?</p>



<a name="231794679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/231794679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#231794679">(Mar 25 2021 at 12:55)</a>:</h4>
<p><span class="user-mention" data-user-id="192195">@Shamil</span> the idea of providing additional content for the codes is close to the tagging of the data, but in this case you are tagging the actual value. I presume that can also be addressed by FHIRPath.</p>



<a name="231794860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/231794860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#231794860">(Mar 25 2021 at 12:56)</a>:</h4>
<p>It's not clear if your use case is <br>
a) Patient says "I do not consent to sharing my gender data"<br>
b) hospital says "in this system, for that purpose, with that entity, we do not share gender data"</p>



<a name="231794919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/231794919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#231794919">(Mar 25 2021 at 12:56)</a>:</h4>
<p>a) is Consent<br>
b) is Permission land</p>



<a name="231795017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20in%20Consent/near/231795017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20in.20Consent.html#231795017">(Mar 25 2021 at 12:57)</a>:</h4>
<p>Permission.dataScope is an Expression exactly for these purposes</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
