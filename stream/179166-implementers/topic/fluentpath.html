---
layout: page
title: "FHIR Chat  · fluentpath · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html">fluentpath</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153819676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819676">(Apr 02 2016 at 04:57)</a>:</h4>
<p>I have some questions about fluent path based on implementing it </p>



<a name="153819677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819677">(Apr 02 2016 at 04:59)</a>:</h4>
<p>when does $this apply? can we say that $this is only available in a function when evaluating parameters, and then only as the proximal value in a parameter, and when you encounter it, it's the object on which the function is being evaluated</p>



<a name="153819678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819678">(Apr 02 2016 at 05:00)</a>:</h4>
<p>but that means that it's only the iterator functions (where, select, all)</p>



<a name="153819679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819679">(Apr 02 2016 at 05:00)</a>:</h4>
<p>That was my understanding, it would only be available within the iterators.</p>



<a name="153819680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819680">(Apr 02 2016 at 05:01)</a>:</h4>
<p>k. I'll implement it so. And I'll try and remember to make a ballot comment that we need to be more specific anbout this</p>



<a name="153819681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819681">(Apr 02 2016 at 05:01)</a>:</h4>
<p>I'll make a note as well.</p>



<a name="153819682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819682">(Apr 02 2016 at 05:10)</a>:</h4>
<p>another thing I haven't figured out - how can is and as be operators? </p>



<a name="153819683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819683">(Apr 02 2016 at 05:10)</a>:</h4>
<p>I've found that I need special handling for the function parameters for is and as because they are evaluated in the type space, not the instance space. </p>



<a name="153819684"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819684" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819684">(Apr 02 2016 at 05:11)</a>:</h4>
<p>but when they'er operators, I don't know how to do that because I process the operands before the operation. </p>



<a name="153819685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819685">(Apr 02 2016 at 05:11)</a>:</h4>
<p>thoughts?</p>



<a name="153819686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819686">(Apr 02 2016 at 05:14)</a>:</h4>
<p>Yeah, they're more like generic operators in that they have a compile-time resolve.</p>



<a name="153819687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819687">(Apr 02 2016 at 05:15)</a>:</h4>
<p>What we do in the CQL-to-ELM translator is resolve the type at compile-time and save it in the object model.</p>



<a name="153819688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819688">(Apr 02 2016 at 05:15)</a>:</h4>
<p>hmm. I hadn't thought of it like that. but that implies that there has to be a compile step</p>



<a name="153819689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819689">(Apr 02 2016 at 05:16)</a>:</h4>
<p>Well, either that or your run-time has to have some way to resolve a type.</p>



<a name="153819690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819690">(Apr 02 2016 at 05:16)</a>:</h4>
<p>I've implemented it both ways.</p>



<a name="153819691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819691">(Apr 02 2016 at 05:16)</a>:</h4>
<p>Do you have a context you could use at run-time to reach into the type model?</p>



<a name="153819692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819692">(Apr 02 2016 at 05:17)</a>:</h4>
<p>well, it's not so much that I can resolve a type or not, but that I have to know that I'm in the type space not the instance space </p>



<a name="153819693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819693">(Apr 02 2016 at 05:18)</a>:</h4>
<p>Yeah I see that's special case code because of the way the FluentPath grammar is built then.</p>



<a name="153819694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819694">(Apr 02 2016 at 05:19)</a>:</h4>
<p>should we note that? </p>



<a name="153819695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819695">(Apr 02 2016 at 05:19)</a>:</h4>
<p>You basically have to say, if this is an "is" or "as", remember that the operand is an type.</p>



<a name="153819697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819697">(Apr 02 2016 at 05:20)</a>:</h4>
<p>So, for the "is" and "as" expressions (where they are keywords), we do have a different production rule.</p>



<a name="153819698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819698">(Apr 02 2016 at 05:20)</a>:</h4>
<p>typeSpecifier</p>



<a name="153819699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819699">(Apr 02 2016 at 05:20)</a>:</h4>
<p>But for ".is()" and ".as()", we don't specify those in the grammar at all, so I'm not sure how we would handle that.</p>



<a name="153819700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819700">(Apr 02 2016 at 05:21)</a>:</h4>
<p>we say that in the definition of the functions. they were easier for me </p>



<a name="153819701"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819701" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819701">(Apr 02 2016 at 05:21)</a>:</h4>
<p>We could introduce specific rules for just those invocations.</p>



<a name="153819702"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819702" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819702">(Apr 02 2016 at 05:21)</a>:</h4>
<p>Or....</p>



<a name="153819703"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819703" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819703">(Apr 02 2016 at 05:21)</a>:</h4>
<p>we could introduce a typeof keyword...</p>



<a name="153819704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819704">(Apr 02 2016 at 05:22)</a>:</h4>
<p>Then Type would be a type and you could declare the .is() and .as() operators to take arguments of type Type.</p>



<a name="153819705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819705">(Apr 02 2016 at 05:22)</a>:</h4>
<p>(formatted for clarity)</p>



<a name="153819706"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819706" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819706">(Apr 02 2016 at 05:23)</a>:</h4>
<p>typeof is a keyword in the definitions or the language? it seems retrograde to have to specify it in is() and as() </p>



<a name="153819707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819707">(Apr 02 2016 at 05:23)</a>:</h4>
<p>and I can see how to solve it for me - it's similar to the notion of short cut boolean evaluation</p>



<a name="153819708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819708">(Apr 02 2016 at 05:23)</a>:</h4>
<p>and I do it a the same point</p>



<a name="153819709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819709">(Apr 02 2016 at 05:24)</a>:</h4>
<p>Keyword or method, either way would work.</p>



<a name="153819710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819710">(Apr 02 2016 at 05:24)</a>:</h4>
<p>well, let's just make sure we ballot about it </p>



<a name="153819711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819711">(Apr 02 2016 at 05:24)</a>:</h4>
<p>But if you have a solution, we can just note it as something to add clarifying documentation around.</p>



<a name="153819712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819712">(Apr 02 2016 at 05:24)</a>:</h4>
<p>Yep.</p>



<a name="153819713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819713">(Apr 02 2016 at 05:24)</a>:</h4>
<p>no point wasting cycles solving it now. it might be solved with better doco, or it might need something more. we can decide later </p>



<a name="153819714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819714">(Apr 02 2016 at 05:25)</a>:</h4>
<p>for now, I know how to implement it, but it is kind of unexpected</p>



<a name="153819715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819715">(Apr 02 2016 at 05:26)</a>:</h4>
<p>Agreed.</p>



<a name="153819750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819750">(Apr 03 2016 at 04:30)</a>:</h4>
<p>I have a problem with '-'. Take this expression:</p>



<a name="153819751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819751">(Apr 03 2016 at 04:31)</a>:</h4>
<p>Patient.name.given.where(substring($this.length()-3) = 'out')</p>



<a name="153819752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819752">(Apr 03 2016 at 04:31)</a>:</h4>
<p>here, - is an operator. </p>



<a name="153819753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819753">(Apr 03 2016 at 04:31)</a>:</h4>
<p>but take this expression:</p>



<a name="153819754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819754">(Apr 03 2016 at 04:31)</a>:</h4>
<p>Patient.name.given.count() &gt; -3</p>



<a name="153819755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819755">(Apr 03 2016 at 04:32)</a>:</h4>
<p>- here is part of the constant. </p>



<a name="153819756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819756">(Apr 03 2016 at 04:32)</a>:</h4>
<p>I don't know how to tell these apart in my lexer</p>



<a name="153819757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819757">(Apr 03 2016 at 04:38)</a>:</h4>
<p>Could be wrong, I didn't do the stuff in the .net implementation, but could have a look over what Ewout did.<br>
3 tokens at the end of the stream "&gt;", "-", "3"<br>
So you have the "-" token inbetwen an operator and a constant, so it should merge it into the const token.</p>



<a name="153819758"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819758" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819758">(Apr 03 2016 at 04:39)</a>:</h4>
<p>see, that breaks the separation between the lexer and the grammar</p>



<a name="153819759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819759">(Apr 03 2016 at 04:46)</a>:</h4>
<p>Yes, tokenizer breaks into the words, then the lexer needs to convert the tokens into correct tree for execution. In this case it is merging those 2 tokens into the constant as the substract operator when following a comparison operator.<br>
I haven't gone that close into the grammar to see how that fits into it.</p>



<a name="153819760"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819760" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819760">(Apr 03 2016 at 04:46)</a>:</h4>
<p>(I have been meaning to do that to review Ewout's implementation though)</p>



<a name="153819761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819761">(Apr 03 2016 at 05:03)</a>:</h4>
<p>I'll have to figure that out, I guess</p>



<a name="153819762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819762">(Apr 03 2016 at 05:03)</a>:</h4>
<p>a question: </p>



<a name="153819763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819763">(Apr 03 2016 at 05:03)</a>:</h4>
<p>'12345'.startsWith('') = false</p>



<a name="153819764"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819764" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819764">(Apr 03 2016 at 05:03)</a>:</h4>
<p>true? or false? </p>



<a name="153819765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819765">(Apr 03 2016 at 05:10)</a>:</h4>
<p>empty string?</p>



<a name="153819766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819766">(Apr 03 2016 at 05:11)</a>:</h4>
<p>good question, would also be good question for if the string was null/not found</p>



<a name="153819767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819767">(Apr 03 2016 at 05:11)</a>:</h4>
<p>maybe that's something that should be defined by the startswith operator</p>



<a name="153819768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819768">(Apr 03 2016 at 06:01)</a>:</h4>
<p>that's why I'm asking. Clearly, if it's empty for some reason, then the string can't start with it. but the empty string is different.</p>



<a name="153819769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819769">(Apr 03 2016 at 06:01)</a>:</h4>
<p>it's not allowed in fhir btw</p>



<a name="153819770"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819770" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819770">(Apr 03 2016 at 06:02)</a>:</h4>
<p>but a null is.</p>



<a name="153819773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819773">(Apr 03 2016 at 07:34)</a>:</h4>
<p>Another problem in the spec: the type datetime should be dateTime</p>



<a name="153819780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819780">(Apr 03 2016 at 08:28)</a>:</h4>
<p>the only date functions are today() and now(), I think we need some date manipulation functions also.<br>
Lots of validations have date relative features. But I guess that can be added later e.g. dateAdd(month, 12)</p>



<a name="153819802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819802">(Apr 03 2016 at 18:54)</a>:</h4>
<p>Regarding the unary minus, that should come back from the parser as a unary expression. The Antlr visitor will just do that, are you not using an Antlr generated visitor?</p>



<a name="153819803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819803">(Apr 03 2016 at 19:00)</a>:</h4>
<p>Regarding '12345'.startsWith(''), startsWith is usually defined in terms of a substring of the same length, which means startsWith('') would return true.</p>



<a name="153819804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819804">(Apr 03 2016 at 19:00)</a>:</h4>
<p>I'll note that we need to clarify the behavior.</p>



<a name="153819920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819920">(Apr 05 2016 at 00:19)</a>:</h4>
<p>I'm not using an Antlr grammar</p>



<a name="153819922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819922">(Apr 05 2016 at 00:19)</a>:</h4>
<p>I don't like the way all() is defined. </p>



<a name="153819923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819923">(Apr 05 2016 at 00:20)</a>:</h4>
<p>it should take a criteria - does all this collection meet this criteria? </p>



<a name="153819924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819924">(Apr 05 2016 at 00:21)</a>:</h4>
<p>as it is, you have to do select(criteria).all() - but the selection does - or could - drop the cases that don't meet the criteria, so .all() will be true. </p>



<a name="153819925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153819925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153819925">(Apr 05 2016 at 00:21)</a>:</h4>
<p>it's a lot easier if it's .all(criteria)</p>



<a name="153820087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820087">(Apr 06 2016 at 23:30)</a>:</h4>
<p>consider this invariant: entry.where(fullUrl).select(fullUrl+resource.meta.versionId).distinct()</p>



<a name="153820088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820088">(Apr 06 2016 at 23:31)</a>:</h4>
<p>if versionId is present, it contributes to the assessment of null. but it might not be. So this invariant fails because:</p>



<a name="153820089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820089">(Apr 06 2016 at 23:32)</a>:</h4>
<p>"The math operators require each operand to be a single element. Both operands must be of the same type, each operator below specifies which types are supported."</p>



<a name="153820090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820090">(Apr 06 2016 at 23:32)</a>:</h4>
<p>but resource.meta.versionId might not be present</p>



<a name="153820091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820091">(Apr 06 2016 at 23:32)</a>:</h4>
<p>at present the only way I could approach this is:</p>



<a name="153820092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820092">(Apr 06 2016 at 23:32)</a>:</h4>
<p>entry.where(fullUrl).select(fullUrl+iif(resource.meta.versionId, resource.meta.versionId, '')).distinct()</p>



<a name="153820093"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820093" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820093">(Apr 06 2016 at 23:33)</a>:</h4>
<p>that's painful. </p>



<a name="153820094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820094">(Apr 06 2016 at 23:33)</a>:</h4>
<p>I think I need to bring back &amp; operator</p>



<a name="153820116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820116">(Apr 07 2016 at 04:56)</a>:</h4>
<p>I have brought it back for FHIR. </p>



<a name="153820117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820117">(Apr 07 2016 at 04:56)</a>:</h4>
<p>it's just too finicty to deal with the stupid rules aorund plus that make sense for integers, but not strings</p>



<a name="153820448"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820448" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820448">(Apr 08 2016 at 05:07)</a>:</h4>
<p>Not sure I follow this last one, plus for integers, not strings?<br>
Is the &amp; the concatenation for strings instead of +?</p>



<a name="153820598"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820598" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820598">(Apr 11 2016 at 04:19)</a>:</h4>
<p>in my implementation, you can do string + String</p>



<a name="153820599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820599">(Apr 11 2016 at 04:20)</a>:</h4>
<p>but if either string is missing, it's an error, according to the rules for +, since they are type safe</p>



<a name="153820601"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820601" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820601">(Apr 11 2016 at 04:20)</a>:</h4>
<p>&amp; is not type safe - it simply appends left and right as strings together, and ignores missing parameters</p>



<a name="153820602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820602">(Apr 11 2016 at 04:21)</a>:</h4>
<p>I have 2 differences between my implementation  and the spec after ignoring the little details above in this topic:<br>
- I have the &amp; operator<br>
- I allow a selector on the .all() operation</p>



<a name="153820603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820603">(Apr 11 2016 at 04:22)</a>:</h4>
<p>hopefully I'll be upgrading both my DSTU2 and Montreal servers to use current fluent path in the next few hours - just doing testing now</p>



<a name="153820805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820805">(Apr 11 2016 at 17:11)</a>:</h4>
<p><span class="user-mention" data-user-email="grahame@healthintersections.com.au">@Grahame Grieve</span>: "but if either string is missing, it's an error, according to the rules for +, since they are type safe" It's not an error, it's just that the result is empty. In CQL we define a _coalesce_ operator that collapses the .iif() logic you have above. So with that operator it would be:</p>



<a name="153820806"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820806" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820806">(Apr 11 2016 at 17:11)</a>:</h4>
<p>entry.where(fullUrl).select(fullUrl + resource.meta.versionId.coalesce('')).distinct()</p>



<a name="153820807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820807">(Apr 11 2016 at 17:13)</a>:</h4>
<p>Having said that, I do like the notion of defining a string concatentation operator that is different than +, and having it treat empty differently would simplify things even further. But I would still propose the need for something like a coalesce operator.</p>



<a name="153820808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820808">(Apr 11 2016 at 17:13)</a>:</h4>
<p>I'll note the &amp; operator in the FluentPath comments.</p>



<a name="153820818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153820818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153820818">(Apr 11 2016 at 17:52)</a>:</h4>
<p>I've asked Bryn to speak about CQL (using FluentPath) at the upcoming WGM in Montreal. It would be nice to also have a speaker about FluentPath and its implementation aspects. Any volunteers? We need to spread the word about these two topics somewhat, most in the FHIR user comunity won't have heard about them..</p>



<a name="153821225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821225">(Apr 12 2016 at 13:55)</a>:</h4>
<p>Looking to see if there has been any progress on date manipulation operations/functions.<br>
My use cases are for comparing dates 6 or 12 months in past/future, both for validation and defaulting values (in my case with quesitonnaires)</p>



<a name="153821256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821256">(Apr 12 2016 at 15:21)</a>:</h4>
<p>The current FluentPath specification does not define date/time arithmetic. CQL defines a complete set though, so we have two options 1) incorporate the date/time arithmetic operations, or 2) use full CQL to express your use case.</p>



<a name="153821289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821289">(Apr 12 2016 at 19:16)</a>:</h4>
<p>I think that the preference will be 1, but do we need a complete set?</p>



<a name="153821296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821296">(Apr 12 2016 at 19:45)</a>:</h4>
<p>We can start with just the date arithmetic definitions to support this particular use case.</p>



<a name="153821298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821298">(Apr 12 2016 at 19:48)</a>:</h4>
<p>so +(dateTime, quantity), +(time, quantity), -(dateTime, quantity), -(time, quantity)</p>



<a name="153821304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821304">(Apr 12 2016 at 20:02)</a>:</h4>
<p>why would we not use + / - for this? </p>



<a name="153821310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821310">(Apr 12 2016 at 20:21)</a>:</h4>
<p>Agreed, that is the syntax CQL uses.</p>



<a name="153821315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821315">(Apr 12 2016 at 21:01)</a>:</h4>
<p>Is it documented how to express a const quantity? do I can represent 1d or -6m or +1y</p>



<a name="153821316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821316">(Apr 12 2016 at 21:02)</a>:</h4>
<p>I don't think it is, but given the complexity, I would define a function....</p>



<a name="153821329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821329">(Apr 12 2016 at 21:30)</a>:</h4>
<p>something like a Quantity resource constructor?</p>



<a name="153821342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821342">(Apr 12 2016 at 21:53)</a>:</h4>
<p>quantity(value, unit) or quantity(value, unit, system code)</p>



<a name="153821343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821343">(Apr 12 2016 at 21:54)</a>:</h4>
<p>CQL defines a quantity selector, but we did not define that in FluentPath. We talked about adding it, but never reached a decision.</p>



<a name="153821345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821345">(Apr 12 2016 at 21:54)</a>:</h4>
<p>Nope, I take it back.</p>



<a name="153821347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821347">(Apr 12 2016 at 21:54)</a>:</h4>
<p>It's in the grammar, just not documented in the md.</p>



<a name="153821349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821349">(Apr 12 2016 at 21:55)</a>:</h4>
<p>The syntax in the grammar is &lt;NUMBER unit?&gt;</p>



<a name="153821352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821352">(Apr 12 2016 at 21:56)</a>:</h4>
<p>Where unit is either a singular or plural date time precision (year(s), month(s), day(s), hour(s), minute(s), second(s), millisecond(s)), or a UCUM unit as a string.</p>



<a name="153821353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821353">(Apr 12 2016 at 21:56)</a>:</h4>
<p>So you can say:</p>



<a name="153821354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821354">(Apr 12 2016 at 21:56)</a>:</h4>
<p>6 months</p>



<a name="153821355"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821355" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821355">(Apr 12 2016 at 21:56)</a>:</h4>
<p>or</p>



<a name="153821357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821357">(Apr 12 2016 at 21:56)</a>:</h4>
<p>6 'mo'</p>



<a name="153821360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821360">(Apr 12 2016 at 21:56)</a>:</h4>
<p>I'll add a comment to document that in the md.</p>



<a name="153821361"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821361" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821361">(Apr 12 2016 at 21:57)</a>:</h4>
<p>but see, this doesn't deal with questions around the units </p>



<a name="153821363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821363">(Apr 12 2016 at 22:15)</a>:</h4>
<p>The simplest implementation is to just require that units be respected. A more sophisticated implementation could do conversion where possible.</p>



<a name="153821364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821364">(Apr 12 2016 at 22:16)</a>:</h4>
<p>For date/time arithmetic, it's fairly straightforward, and I imagine most implementations would just pass through to an underlying library to perform the computation.</p>



<a name="153821365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821365">(Apr 12 2016 at 22:16)</a>:</h4>
<p>For quantity arithmetic, the implementation just needs to ensure that if the values have units, they're the same, or it's an error.</p>



<a name="153821366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821366">(Apr 12 2016 at 22:17)</a>:</h4>
<p>well, which units? we should use ucum units if we're going to have a simple form</p>



<a name="153821367"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821367" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821367">(Apr 12 2016 at 22:17)</a>:</h4>
<p>Yeah, the expectation is UCUM units.</p>



<a name="153821370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821370">(Apr 12 2016 at 23:13)</a>:</h4>
<p>that's not what you said above</p>



<a name="153821371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821371">(Apr 12 2016 at 23:14)</a>:</h4>
<p>and I don't understand how that's not grammatically ambiguous</p>



<a name="153821396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821396">(Apr 13 2016 at 01:36)</a>:</h4>
<p>For the date/time precisions specifically, CQL defines keywords that are synonyms for the UCUM date/time precision.</p>



<a name="153821397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821397">(Apr 13 2016 at 01:42)</a>:</h4>
<p>As far as ambiguity, there's no other context where an expression is allowed to be followed by a literal like that. It requires lookahead, but I don't think it's ambiguous.</p>



<a name="153821408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153821408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153821408">(Apr 13 2016 at 06:03)</a>:</h4>
<p>regrding ambiguity, some ucum codes are ambiguous - e.g. *10</p>



<a name="153822732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822732">(Apr 21 2016 at 13:38)</a>:</h4>
<p>So, still working on fluent path quallity....</p>



<a name="153822733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822733">(Apr 21 2016 at 13:40)</a>:</h4>
<p>Lloyd has this series of constraints on Questionnaire Extensions:</p>



<a name="153822734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822734">(Apr 21 2016 at 13:40)</a>:</h4>
<div class="codehilite"><pre>valueInteger = 0 or $parent.required
valueInteger &lt;= 1 or $parent.repeats
$parent.type!=&#39;display&#39;
$parent.type!=&#39;display&#39;
$parent.type=&#39;choice&#39; or $parent.type=&#39;open-choice&#39;
$parent.type=&#39;choice&#39; or $parent.type=&#39;open-choice&#39;
$parent.type!=&#39;display&#39;
$parent.type=&#39;reference&#39;
$parent.type=&#39;display&#39;
$parent.type=&#39;reference&#39;
$parent.type!=&#39;display&#39;
$parent.type=&#39;reference&#39;
$parent.type=&#39;integer&#39; or $parent.type=&#39;decimal&#39;
$parent.type=&#39;integer&#39; or $parent.type=&#39;decimal&#39;
</pre></div>



<a name="153822735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822735">(Apr 21 2016 at 13:41)</a>:</h4>
<p>these are all illegal, and not implementable under the current spec </p>



<a name="153822736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822736">(Apr 21 2016 at 13:41)</a>:</h4>
<p>it's not obvious to me how this should be resolved</p>



<a name="153822740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822740">(Apr 21 2016 at 13:47)</a>:</h4>
<p>So the general use-case is the need to be able to make assertions about the context in which an extension is allowed to appear</p>



<a name="153822744"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822744" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822744">(Apr 21 2016 at 14:10)</a>:</h4>
<p>Can they be expressed on the parent node in terms of the children instead of on the children in terms of the parent?</p>



<a name="153822750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822750">(Apr 21 2016 at 14:37)</a>:</h4>
<p>No because their defined on the extension - and are trying to further constrain the type of node they're allowed to appear on.</p>



<a name="153822753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822753">(Apr 21 2016 at 14:42)</a>:</h4>
<p>I see, so it's a context invariant. The validation is already doing that with extensions, so it seems like it would work if we had a way to say 'this is a context invariant, evaluate it in terms of the container to which the extension is being applied', rather than 'this is an invariant, evaluate it in terms of the extension'.</p>



<a name="153822766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822766">(Apr 21 2016 at 20:01)</a>:</h4>
<p>I think that makes sense</p>



<a name="153822809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822809">(Apr 21 2016 at 22:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> : according to fluentpath, .length() can only be used for strings. but we have constraints on date lengths - lots of them - and you could imagine lengths being imposed for decimals and integers in some cases. so I think length() should be applicable to primitives, not strings </p>



<a name="153822810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822810">(Apr 21 2016 at 22:27)</a>:</h4>
<p>and do uris, codes, etc count as strings? avoid that question....</p>



<a name="153822843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822843">(Apr 22 2016 at 14:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  So for length constraints on decimals and integers, why not express it as a value constraint? value between 1 and 1000, e.g.</p>



<a name="153822845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822845">(Apr 22 2016 at 14:27)</a>:</h4>
<p>for length constraints on date/times, wouldn't it be better to express it in terms of precision? (i.e. what does date.length() &lt; 4 mean?)</p>



<a name="153822846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822846">(Apr 22 2016 at 14:28)</a>:</h4>
<p>And for uris, codes, yes, I think those are treated as strings. In the CQL implementation, I'm defining implicit conversions from the FluentPath/CQL primitives to the FHIR types, that should make it totally transparent to the user.</p>



<a name="153822849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822849">(Apr 22 2016 at 14:37)</a>:</h4>
<p>Sometimes you want to enforce a pure length.  So "-50" and "100" and "2.3" all have a length of "3".  That said, that's a fairly low frequency use-case.</p>



<a name="153822852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822852">(Apr 22 2016 at 14:50)</a>:</h4>
<p>I think in that case, you could always do a value.toString().length() = 3</p>



<a name="153822866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822866">(Apr 22 2016 at 17:00)</a>:</h4>
<p>That works for me</p>



<a name="153822870"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822870" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822870">(Apr 22 2016 at 19:29)</a>:</h4>
<p>well, ok, we could consider something more direct in terms of dates. Precision of dates is particularly frequent thing in constraints. </p>



<a name="153822871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822871">(Apr 22 2016 at 19:29)</a>:</h4>
<p>but what would that look like?</p>



<a name="153822981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153822981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153822981">(Apr 25 2016 at 18:48)</a>:</h4>
<p>Bryn - I didn't join the ballot pool for FluentPath - can you submit all my comments?</p>



<a name="153823188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823188">(Apr 26 2016 at 16:46)</a>:</h4>
<p>Sure, I've tracked them, I'll get them submitted.</p>



<a name="153823189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823189">(Apr 26 2016 at 16:50)</a>:</h4>
<p>Regarding the constraints on date precision, within CQL, we would say:</p>



<a name="153823190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823190">(Apr 26 2016 at 16:50)</a>:</h4>
<p>month from DatetimeValue is null</p>



<a name="153823191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823191">(Apr 26 2016 at 16:51)</a>:</h4>
<p>To enforce that a date/time could only be specified to a year, for example.</p>



<a name="153823192"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823192" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823192">(Apr 26 2016 at 16:51)</a>:</h4>
<p>I imagine the FluentPath for that would look like:</p>



<a name="153823193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823193">(Apr 26 2016 at 16:51)</a>:</h4>
<p>DateTimeValue.month().isNull()</p>



<a name="153823195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823195">(Apr 26 2016 at 17:07)</a>:</h4>
<p>.exists(). but we haven't defined a date time that works like that.</p>



<a name="153823196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823196">(Apr 26 2016 at 17:07)</a>:</h4>
<p>it's a lot harder to convert to real world constraints like XPath too</p>



<a name="153823375"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823375" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823375">(Apr 27 2016 at 13:44)</a>:</h4>
<p>So, I missed most of this thread because I must have misclicked in Zulip and it was all marked as read :-(</p>
<blockquote>
<p>That was my understanding, it would only be available within the iterators.</p>
</blockquote>
<p>I think what is the matter is that in some functions we're not passing VALUES as parameters (like the length into the substring() function), but we're passing functions as parameters, which are lazyly evaluated at the right moment by the function that is called. So, what happens with all() and any() is not that they are iterators, it's that they are functions that are passed (anonymous) functions (or in FP expressions that are lazily evaluated).</p>
<p>So, internally, in my AST after parsing, these functions receive a parameter that's a lambda expression, with $this as the single parameter. That would be compatible with just allowing $this in these iterators (though currently, $this works everywhere in the expressions on .NET)</p>



<a name="153823376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823376">(Apr 27 2016 at 13:45)</a>:</h4>
<p>but it's not definable what $this actually is in any other case</p>



<a name="153823377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823377">(Apr 27 2016 at 13:48)</a>:</h4>
<p>Informally, it's the outcome of the last statement before the "." invocation. Even if we would not allow it everywhere, it's present everywhere. I have assumed that:</p>
<p>Patient.name.substring(length()-4,2) is actually Patient.name.substring($this.length()-4,2).  Isn't that equivalent?  So you need to have $this available everywhere anyway?</p>



<a name="153823379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823379">(Apr 27 2016 at 13:49)</a>:</h4>
<p>I could only read Patient.name.substring(length()-4,2) to mean that length refers to the collection of names from <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a></p>



<a name="153823380"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823380" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823380">(Apr 27 2016 at 13:59)</a>:</h4>
<p>Right. Which in my interpretation means $this refers to the collection of names from <a href="http://Patient.name" target="_blank" title="http://Patient.name">Patient.name</a>.  Removing $this means removing the possibility for the user to refer back to that resultset. Why would we do that?</p>



<a name="153823381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823381">(Apr 27 2016 at 14:00)</a>:</h4>
<p>I don't understand. allowing $this implies that there's some other choice</p>



<a name="153823382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823382">(Apr 27 2016 at 14:00)</a>:</h4>
<p>and, in fact, that's how I found it being used</p>



<a name="153823383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823383">(Apr 27 2016 at 14:00)</a>:</h4>
<p>trying to refer a step further back</p>



<a name="153823384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823384">(Apr 27 2016 at 14:01)</a>:</h4>
<blockquote>
<p>Yeah I see that's special case code because of the way the FluentPath grammar is built then.</p>
</blockquote>
<p>It's turned into a separate AST node type indeed, since it's so special. I was reassured when I saw the .NET LINQ compiler treats these kind of nodes as a special case as well: <a href="https://msdn.microsoft.com/en-us/library/system.linq.expressions.typebinaryexpression(v=vs.110).aspx" target="_blank" title="https://msdn.microsoft.com/en-us/library/system.linq.expressions.typebinaryexpression(v=vs.110).aspx">https://msdn.microsoft.com/en-us/library/system.linq.expressions.typebinaryexpression(v=vs.110).aspx</a></p>



<a name="153823385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823385">(Apr 27 2016 at 14:02)</a>:</h4>
<p>(from the doc: TypeBinaryExpression Represents an operation between an expression and a type)</p>



<a name="153823387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823387">(Apr 27 2016 at 14:07)</a>:</h4>
<blockquote>
<p>Grahame Grieve: I don't like the way all() is defined.<br>
Grahame Grieve: it should take a criteria - does all this collection meet this criteria?</p>
</blockquote>
<p>Agree. I thought it was defined that way, I even put an example in the text that suggest it does ;-)</p>



<a name="153823388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823388">(Apr 27 2016 at 14:07)</a>:</h4>
<p>yeah. Bryn defined it differently, but I just treated it as if it took a criteria throughout the FHIR invariants</p>



<a name="153823389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823389">(Apr 27 2016 at 14:08)</a>:</h4>
<blockquote>
<p>Regarding '12345'.startsWith(''), startsWith is usually defined in terms of a substring of the same length, which means startsWith('') would return true.</p>
</blockquote>
<p>For what it's worth, the .NET StartsWith() function would return 'true' in this case.</p>



<a name="153823390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823390">(Apr 27 2016 at 14:13)</a>:</h4>
<blockquote>
<p>I think I need to bring back &amp; operator</p>
</blockquote>
<p>So, this would the first case where an operator does NOT propagate empty..I worry that this would be a source of confusion, though I do understand why you'd do it.  Maybe coalesce() would be a better option.</p>



<a name="153823391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823391">(Apr 27 2016 at 14:13)</a>:</h4>
<p>that just moves the deck chairs </p>



<a name="153823392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823392">(Apr 27 2016 at 14:14)</a>:</h4>
<p>but no, it's not about propgating empty - I don't use it on {}  and expect to get anything but {}</p>



<a name="153823393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823393">(Apr 27 2016 at 14:16)</a>:</h4>
<p>But it is about propagating empty. We've defined ALL our operators to propagate empty:  3+{}={}, "adfadfs" + {} = {}.  Now we want "asdfadf" + {} = "asdfadf".  So the new &amp; would NOT propagate empty anymore. Or would convert empty to '' automatically if you want. I think that is confusing.</p>



<a name="153823396"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823396" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823396">(Apr 27 2016 at 14:24)</a>:</h4>
<p>well, ok. but it's absolutely what is needed - to swallow nothing into nothing in the string. You might tihnk it's confusing, but try writing an expression without it - stringing your iif()s together... yuck</p>



<a name="153823506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823506">(Apr 27 2016 at 21:48)</a>:</h4>
<p>Ah the joys of timezones.<br>
We added the today/now expression in fluentpath (great).<br>
My new question is how do we communicate the intended timezone for evaluation?<br>
The expected answer is "the person who is calling the operation"<br>
But what about when the server and client are in different timezones, how is this offset handled? Can we have a standard way to communicate this to the Evaluation engines?<br>
Set of parameters that can be provided to the evaluator for execution.</p>



<a name="153823524"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823524" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823524">(Apr 28 2016 at 02:29)</a>:</h4>
<p>Brian can you explain to me what the intended timezone for evaluation is? Is that the preferred timezone the datetimes are expressed in?  As longs as each of the instances of dateTime's has a timezone when the hour component is there, what's the use of passing in the "actual" timezone?</p>



<a name="153823527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823527">(Apr 28 2016 at 03:30)</a>:</h4>
<p>the today or now functions.</p>



<a name="153823528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823528">(Apr 28 2016 at 03:30)</a>:</h4>
<p>rest of them, yes you're right.</p>



<a name="153823529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823529">(Apr 28 2016 at 03:31)</a>:</h4>
<p>actually, really only today.</p>



<a name="153823530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823530">(Apr 28 2016 at 03:31)</a>:</h4>
<p>comparisons should be ok where there are all timezones. But when only considering the date part, the timezone is important.</p>



<a name="153823551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823551">(Apr 28 2016 at 06:19)</a>:</h4>
<p>no I don't follow</p>



<a name="153823553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823553">(Apr 28 2016 at 06:22)</a>:</h4>
<p>consider a fhirpath validation rule that says <br>
<code>Appointment.Start &gt;= today()</code></p>



<a name="153823555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823555">(Apr 28 2016 at 06:23)</a>:</h4>
<p>today evaluates to <code>28 April 2016</code> (here in australia) but in USA this might evaulate to <code>27 April 2016</code> and thus rule will fail.</p>



<a name="153823557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823557">(Apr 28 2016 at 06:24)</a>:</h4>
<p>So the zone where  the evaluation of the rule occurs makes a difference here.</p>



<a name="153823559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823559">(Apr 28 2016 at 06:24)</a>:</h4>
<p>(This is basically the rule that we have failing)</p>



<a name="153823561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823561">(Apr 28 2016 at 06:25)</a>:</h4>
<p>this is a question about your pre-conditions. If you're actually running this about Australia, then that's correct. </p>



<a name="153823563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823563">(Apr 28 2016 at 06:26)</a>:</h4>
<p>Our deployment is Server in Melbourne, clients in Adelaide and Perth. So part of the day has issues submitting forms.</p>



<a name="153823564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823564">(Apr 28 2016 at 06:27)</a>:</h4>
<p>well, you can't make a rule that's so simple as appointment.start &gt; today - the rule itself lacks expressivity</p>



<a name="153823565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823565">(Apr 28 2016 at 06:27)</a>:</h4>
<p>appointment.start.universal() &gt;= today().universal()</p>



<a name="153823571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823571">(Apr 28 2016 at 06:39)</a>:</h4>
<p>(in the case I'm working with both properties are dates)</p>



<a name="153823572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823572">(Apr 28 2016 at 06:39)</a>:</h4>
<p>In the questionnaire</p>



<a name="153823573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823573">(Apr 28 2016 at 06:41)</a>:</h4>
<p>so?</p>



<a name="153823574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823574">(Apr 28 2016 at 06:41)</a>:</h4>
<p>The complete rule that I can't express is<br>
<code>today() &lt; date1 &lt; date2 &lt; today().add(6, months)</code></p>



<a name="153823575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823575">(Apr 28 2016 at 06:41)</a>:</h4>
<p>why can't you express that? </p>



<a name="153823576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823576">(Apr 28 2016 at 06:42)</a>:</h4>
<p>Can't add the months part at the end, and the timezone issue with evaulating today()</p>



<a name="153823577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823577">(Apr 28 2016 at 06:42)</a>:</h4>
<p>apart from that, is ok.</p>



<a name="153823578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823578">(Apr 28 2016 at 06:42)</a>:</h4>
<p>well, the general issue is: need date and time functions on the date/time class</p>



<a name="153823579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823579">(Apr 28 2016 at 06:43)</a>:</h4>
<p>yes, and the zone for evaluating today, and I'd be happy</p>



<a name="153823580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823580">(Apr 28 2016 at 06:47)</a>:</h4>
<p>I don't follow about the timezone for today bit, What's that got to do with the expression?</p>



<a name="153823581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823581">(Apr 28 2016 at 06:54)</a>:</h4>
<p>if the execution is done in a different timezone to the client, then the value may be different</p>



<a name="153823582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823582">(Apr 28 2016 at 06:54)</a>:</h4>
<p>what's that got to do with the expresssion?</p>



<a name="153823583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823583">(Apr 28 2016 at 06:55)</a>:</h4>
<p>Expression is correct.</p>



<a name="153823584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823584">(Apr 28 2016 at 06:56)</a>:</h4>
<p>evaluation isnt</p>



<a name="153823604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823604">(Apr 28 2016 at 18:19)</a>:</h4>
<p>Interesting. We had this same discussion in IHE yesterday related to XDS submission/queries.<br>
How do I find encounters handled by the night shift (not necessarily during my night, but during the night where it occured)? Documents submitted in the morning? The TZ offset at the querying client isn't necessarily the same as the offset at the server, or the offset at the system that submitted the resource. And, the time zone in effect at any of those today, isn't necessarily the same as the offset in effect when the resource was submitted.</p>



<a name="153823696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823696">(Apr 29 2016 at 04:15)</a>:</h4>
<p>Has also found a bug in the dotnet fluentpath implementation...<br>
We cache the execution tree to reduce the amount of re-parses are required.<br>
And then the first execution turns the today() into the value, and is not exectuted again, even when the value changes - which is worse when implementing the now() function.</p>



<a name="153823699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823699">(Apr 29 2016 at 04:36)</a>:</h4>
<p>So, in the CQL definitions of Today() and Now(), we define them to return the same value for a given "evaluation", and we define them to return based on the "evaluation request time", which is left somewhat open, but would typically be tied to the request date time (or an "evaluateAsOf" parameter if you wanted to support evaluation as of a certain point in time).</p>



<a name="153823700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823700">(Apr 29 2016 at 04:37)</a>:</h4>
<p>This way the engine can support caching within any given evaluation, but not across them, and the expression result is guaranteed to be deterministic.</p>



<a name="153823899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823899">(Apr 30 2016 at 00:30)</a>:</h4>
<p>Question to others that are implementing and/or testing this.<br>
Should these 2 expressions parse and evaluate correctly?<br>
<code>1 &lt; 2</code><br>
<code>1 &lt; -2</code><br>
<code>+1 &lt; +2</code></p>



<a name="153823900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823900">(Apr 30 2016 at 00:31)</a>:</h4>
<p>The dotnet fluentpath evaluator doesn't handle the inclusion of the negative (or positive)</p>



<a name="153823901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823901">(Apr 30 2016 at 00:32)</a>:</h4>
<p>or this one<br>
<code>-1&lt;2</code></p>



<a name="153823902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823902">(Apr 30 2016 at 00:35)</a>:</h4>
<p>the notepad++ fhir addin really doesn't like these either.</p>



<a name="153823903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823903">(Apr 30 2016 at 00:44)</a>:</h4>
<p>The FluentPath grammar supports them, and the CQL/FluentPath translator I'm working on handles them, but I don't think the other implementations are using the generated Antlr visitors. And IIRC, the initial FhirPath used to treat unary negation as part of the number literal rather than as a separate syntax, so that could be holdover behavior.</p>



<a name="153823907"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823907" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823907">(Apr 30 2016 at 00:54)</a>:</h4>
<p>the notepad++ plug-in should accept them. I'll add tests for them. I would have thought that negation is ok but not +</p>



<a name="153823911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823911">(Apr 30 2016 at 01:03)</a>:</h4>
<p>I wouldn't be fussed by the absense of the +<br>
I found it testing an implementation of an experimental dateadd('mm', -6) function with the dotnet client</p>



<a name="153823912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823912">(Apr 30 2016 at 01:10)</a>:</h4>
<p>fixed in both the java and pascal implemnetations. will release updates to notepad++ and my server soon</p>



<a name="153823917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153823917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153823917">(Apr 30 2016 at 01:12)</a>:</h4>
<p>Thanks Grahame, I'll look forward to testing it out.</p>



<a name="153824091"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824091" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824091">(May 02 2016 at 02:25)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  is it too late to add ballot comments on fluentpath? </p>



<a name="153824100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824100">(May 02 2016 at 02:46)</a>:</h4>
<p>Close is tomorrow, so shouldn't be</p>



<a name="153824107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824107">(May 02 2016 at 03:01)</a>:</h4>
<p>Hi Grahame, nope, if you get them to me now I can still add them in.</p>



<a name="153824108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824108">(May 02 2016 at 03:04)</a>:</h4>
<p>2 FHIR specific additions:<br>
 - we need a concise way to say 'no modifier extensions except for these ones'. Right now I'm not sure how I'd actually do that one<br>
- we need a .slice(structure, name) operation that allows an author to select a particular slice as defined in the referenced structure definition</p>



<a name="153824112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824112">(May 02 2016 at 03:26)</a>:</h4>
<p>Captured.</p>



<a name="153824123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824123">(May 02 2016 at 06:38)</a>:</h4>
<p>thanks</p>



<a name="153824127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824127">(May 02 2016 at 06:44)</a>:</h4>
<p>I'd also like to propose a date based function "dateadd" that takes 2 parameters<br>
1. datepart (yy, mm, dd, hh, mi, ss) as a string (happy if other literals are used, pulled these from TSQL)<br>
2. value (the number of units to add to that part of the date) </p>
<p>This will then permit the creation of an invariant like:<br>
valueDate &lt; today().dateadd("mm", 6)<br>
To cover a business rule for things like must be reviewed within 6 months.</p>



<a name="153824128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824128">(May 02 2016 at 06:45)</a>:</h4>
<p>we've got - generally - the need for date operations/operators in the ballot comments</p>



<a name="153824130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824130">(May 02 2016 at 06:47)</a>:</h4>
<p>Just wanted to be sure someone had put in a ballot comment for it.</p>



<a name="153824131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824131">(May 02 2016 at 06:47)</a>:</h4>
<p>The above is what I have put in as an experimental while I wait for an official function.</p>



<a name="153824160"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824160" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824160">(May 02 2016 at 15:20)</a>:</h4>
<p>The FP for <code>Patient:deceased</code> seems decidedly wrong: <code>Patient.deceased.exists()</code> since this returns <code>true</code> if the value of Patient.deceased is <code>false</code></p>
<p>What's the right way to report this? Tracker?</p>



<a name="153824167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824167">(May 02 2016 at 18:09)</a>:</h4>
<p>Hmm, I could swear I posted in this topic already. What's going on here? Oh well, take two.. From the latest SVN trunk:</p>
<p>Patient:deceased specifies the path <code>Patient.deceased.exists()</code> which seems wrong, since it will evaluate to <code>true</code> if the patient has a populated  value of <code>false</code></p>
<p>Practitioner:phone specifies the path <code>Practitioner.telecom.where(system='email') or Practitioner.practitionerRole.telecom.where(system='email')</code>, which evaluates to a boolean instead of two separate expressions. Should that <code>or</code> be a <code>|</code> like other "joined" expressions use?</p>



<a name="153824168"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824168" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824168">(May 02 2016 at 18:19)</a>:</h4>
<p>oh... now both posts are here. sorry, Zulip is being flaky on me.</p>



<a name="153824169"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824169" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824169">(May 02 2016 at 18:24)</a>:</h4>
<p>"The FP for Patient:deceased " - what FP? invariant? index? </p>



<a name="153824170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824170">(May 02 2016 at 18:24)</a>:</h4>
<p>yes the second should be |</p>



<a name="153824183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824183">(May 02 2016 at 20:01)</a>:</h4>
<p>Oh sorry, for <code>deceased</code> search parameter</p>



<a name="153824184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824184">(May 02 2016 at 20:05)</a>:</h4>
<p>The problem of course being that with the way that FP is written, a search for <code>Patient?deceased=true</code> will match any patient that has a value for Patient.deceased, whether that value is true or false.</p>



<a name="153824188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824188">(May 02 2016 at 20:36)</a>:</h4>
<p>yes that is wrong</p>



<a name="153824198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824198">(May 02 2016 at 21:59)</a>:</h4>
<p>Would these require a tracker item, or can I just fix them?</p>



<a name="153824211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824211">(May 02 2016 at 22:28)</a>:</h4>
<p>I think you can just fix them and use tracker....</p>



<a name="153824215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824215">(May 02 2016 at 22:30)</a>:</h4>
<p>nah can't find it</p>



<a name="153824275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824275">(May 02 2016 at 22:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span> the comment we have so far is to add +(DateTime, Quantity), -(DateTime, Quantity), +(Time, Quantity) and -(Time, Quantity).</p>



<a name="153824277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824277">(May 02 2016 at 22:46)</a>:</h4>
<p>So for your example that would look like valueDate &lt; today().add(6 'mo')</p>



<a name="153824288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824288">(May 02 2016 at 23:08)</a>:</h4>
<p>as long as the quantity can be defined/described to cover each of the components in the date, then all good.</p>



<a name="153824289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824289">(May 02 2016 at 23:09)</a>:</h4>
<p>(You can tag me as someone interested in that ballot item if there's a way to do that too)</p>



<a name="153824930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824930">(May 07 2016 at 09:19)</a>:</h4>
<p>sub-topic: reflection in fluent path</p>



<a name="153824931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824931">(May 07 2016 at 09:20)</a>:</h4>
<p>one of the issues in the fluent path ballot is that we need to be able to access the definitions of the element in an expression</p>



<a name="153824932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824932">(May 07 2016 at 09:21)</a>:</h4>
<p>in FHIR, the idea is that you'd do something like:</p>
<p>Observation.value.definition().max - .definition() would return a handle to an ElementDefinition, which you can navigate like any other object. </p>



<a name="153824933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824933">(May 07 2016 at 09:21)</a>:</h4>
<p>I'm not sure what you'd get from .definition in non-FHIR contexts </p>



<a name="153824934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824934">(May 07 2016 at 09:23)</a>:</h4>
<p>but the really interesting thing you want to do here is reason from the semantics in the definition - say, Snomed CT mappings. And to do this in a cross-profile way. E.g. you could define a base (explicit) profile that defines a constraint, and have the constraint refer to a definition that's found in a dictionary rather than an explicit profile (see the  HSPC lab profile for an example of this)</p>



<a name="153824935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153824935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153824935">(May 07 2016 at 09:24)</a>:</h4>
<p>so the natural question that follows is, .definition() refers to the base definition of the spec, but that's not the really useful definition to get hold of. I want the one of the definitions in one of the applicable profiles... but how do I ask for that?</p>



<a name="153825491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153825491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153825491">(May 08 2016 at 13:33)</a>:</h4>
<p>Maybe the "as" operator should take a url, so you can "cast" to a specific profile....</p>



<a name="153825492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153825492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153825492">(May 08 2016 at 13:34)</a>:</h4>
<p>By the way, I see this in a lot of examples:</p>
<p><code>Patient.name.empty().not()</code></p>
<p>There is however a short-cut in the current version of FP:</p>
<p><code>Patient.name.exists()</code></p>



<a name="153825495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153825495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153825495">(May 08 2016 at 13:35)</a>:</h4>
<p>where do these come from? I thought I want through and replaced all of those</p>



<a name="153825500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153825500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153825500">(May 08 2016 at 13:36)</a>:</h4>
<p>I saw them in an example you showed yesterday, but I also see others use this on the Zulip chats... (so it was not specifically about the fp's in the spec)</p>



<a name="153825501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153825501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153825501">(May 08 2016 at 13:36)</a>:</h4>
<p>ok</p>



<a name="153827331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827331">(May 12 2016 at 15:22)</a>:</h4>
<p>From <a href="http://hl7-fhir.github.io/fluentpath" target="_blank" title="http://hl7-fhir.github.io/fluentpath">http://hl7-fhir.github.io/fluentpath</a></p>
<blockquote>
<p>Patient.contained.all($this is Patient implies age &gt; 10)</p>
</blockquote>
<p>Is <code>age</code> a thing?</p>



<a name="153827336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827336">(May 12 2016 at 15:28)</a>:</h4>
<blockquote>
<p>repeat(projection: expression) : collection</p>
</blockquote>
<p>Does repeat here  mean something like "recurse" (i.e. repeat the procedure on its own output)?</p>



<a name="153827338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827338">(May 12 2016 at 15:30)</a>:</h4>
<p>age is not a thing. where did you get that from? </p>



<a name="153827339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827339">(May 12 2016 at 15:30)</a>:</h4>
<p>and yes, that's what it means</p>



<a name="153827340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827340">(May 12 2016 at 15:30)</a>:</h4>
<p>I got that from the URL I cited before my quotation :p</p>



<a name="153827341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827341">(May 12 2016 at 15:31)</a>:</h4>
<p>Does fluentpath express data math enough to say "Patients over 20 years old"? I assume yes but I couldn't figure out how.</p>



<a name="153827343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827343">(May 12 2016 at 15:31)</a>:</h4>
<p><code>now()</code> seems useful... but without date subtraction I can't put it together.</p>



<a name="153827345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827345">(May 12 2016 at 15:32)</a>:</h4>
<p>not right now - ballot comment that we need date operations, and then the answer will be yes</p>



<a name="153827346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827346">(May 12 2016 at 15:32)</a>:</h4>
<p>adding.</p>



<a name="153827627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827627">(May 13 2016 at 00:26)</a>:</h4>
<p>This is an example Bryn added, so I guess this is something that's there in the CQM, but not in FHIR. Remember, the examples are not necessarily FHIR anymore ;-)</p>



<a name="153827632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827632">(May 13 2016 at 01:53)</a>:</h4>
<p>That's not a great answer for whatever documentation is published <strong>in the FHIR build </strong>. </p>



<a name="153827640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827640">(May 13 2016 at 02:38)</a>:</h4>
<p>Yeah. I have to get used to that myself too. But that's also the reason for the name change (no more FHIR in the name).</p>
<p>As to publishing, what's the alternative? We've thought a bit about that at HIMSS...an external website with a publishing cycle not connected to the FHIR spec would be one option.</p>



<a name="153827659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827659">(May 13 2016 at 04:28)</a>:</h4>
<p>we already noted the date addition logic</p>



<a name="153827660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827660">(May 13 2016 at 04:31)</a>:</h4>
<p>Sorry, that was simple manipulation, not diffs of dates (which can return a timespan)</p>



<a name="153827669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153827669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153827669">(May 13 2016 at 07:53)</a>:</h4>
<p>well, we have to sort out the publication issue</p>



<a name="153830432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153830432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153830432">(May 29 2016 at 22:51)</a>:</h4>
<p>Is the XHTML accessable from within fluentpath?  I'm trying to figure out how to write a constraint that says "narrative must be a single string node with no mark-up"</p>



<a name="153830435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153830435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153830435">(May 29 2016 at 23:04)</a>:</h4>
<p>we haven't said anything about this, but there's no object model for xhtml, and I'm not keen to make one up.  This constraint would be easy if we said the xhtml was a string, and you could use a regex (.matches())</p>



<a name="153830441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153830441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153830441">(May 29 2016 at 23:33)</a>:</h4>
<p>So a regex that prohibited tags greater-than?  That might work here.  It's not going to work well for other use-cases we'd talked about, for example "this element needs to appear in the third row of the first table".  There are lots of use-cases for wanting to have fairly strict control over what the narrative looks like.  I'd hate to have that go away in the transition from xpath to fluentpath.  When you say there's no object model, why not?  We have a schema.  My impression was that fluentpath would work for anything you could express by schema.</p>



<a name="153830443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153830443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153830443">(May 29 2016 at 23:50)</a>:</h4>
<p>schema is not quite the same as object model because of... you guessed it.... mixed content</p>



<a name="153830444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153830444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153830444">(May 29 2016 at 23:58)</a>:</h4>
<p>Mixed content isn't really an issue.  That's just a "text node".  My guess is what really causes grief is there are some parts that are non-ordered - you can specify repeating properties interspersed with other properties.</p>



<a name="153831840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153831840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153831840">(Jun 06 2016 at 15:43)</a>:</h4>
<p>Following up on the discussion about reflection in FluentPath, I think the use of .as() to get at the profile information is the right approach, but what structure should be returned in non-FHIR contexts? The documentation says FluentPath works on a "MOF-equivalent type system", so in general we would need to expose a structure that provided that information, yes? </p>



<a name="153831841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153831841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153831841">(Jun 06 2016 at 15:45)</a>:</h4>
<p>CQL has a generic "model info" structure that supports this, it's just a simple exposure of classes, could we use that in the general case and then for FHIR specifically, provide a way to access the elementDefinition using the proposed .definition() operator?</p>



<a name="153833718"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833718" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833718">(Jun 20 2016 at 05:38)</a>:</h4>
<p>Looking to check if my understanding of using fluentpath with extensions is correct (and I'm not missing something)<br>
<code>Patient.extension.where(url='http://hl7.org/fhir/StructureDefinition/patient-mothersMaidenName').valueString</code></p>
<p>Is how I should read the Mothers maiden name for a patient in a fluentpath expression (for a custom search parameter)</p>



<a name="153833723"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833723" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833723">(Jun 20 2016 at 06:19)</a>:</h4>
<p>yes, but there's a short cut in the FHIR appendix:</p>



<a name="153833724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833724">(Jun 20 2016 at 06:19)</a>:</h4>
<div class="codehilite"><pre>Patient.extension(&#39;http://hl7.org/fhir/StructureDefinition/patient-mothersMaidenName&#39;).value
</pre></div>



<a name="153833725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833725">(Jun 20 2016 at 06:20)</a>:</h4>
<p>actually, your first bit was wrong - it's value, not valueString</p>



<a name="153833726"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833726" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833726">(Jun 20 2016 at 06:22)</a>:</h4>
<p>And it will work out that it needs to skip the valueString part, and go to @value<br>
xpath fhir:extension[@url='...']/fhir:valueString/@value</p>



<a name="153833727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833727">(Jun 20 2016 at 06:22)</a>:</h4>
<p>Is that defined in fluentpath, or the localized fhir version?<br>
That's pretty fhir specific.</p>



<a name="153833731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833731">(Jun 20 2016 at 06:23)</a>:</h4>
<p>yes, the @value is implicit. The String itself is the value. Think about the json alternative...</p>



<a name="153833735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833735">(Jun 20 2016 at 06:32)</a>:</h4>
<p>Still seems kinda fhir specific. (happy with that, but appears like a fhir localization)</p>



<a name="153833742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833742">(Jun 20 2016 at 06:48)</a>:</h4>
<p>which bit? the extension() bit is for sure </p>



<a name="153833743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833743">(Jun 20 2016 at 06:48)</a>:</h4>
<p>it's documented as a FHIR specific thing</p>



<a name="153833745"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833745" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833745">(Jun 20 2016 at 06:49)</a>:</h4>
<p>Thanks, will recheck.</p>



<a name="153833778"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833778" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833778">(Jun 20 2016 at 13:31)</a>:</h4>
<p>does this mean that extension is a reserved word in the fluentpath for fhir?<br>
and thus the syntax/format that I used wouldn't work (as extension is a reserved word)?</p>



<a name="153833836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153833836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153833836">(Jun 20 2016 at 22:30)</a>:</h4>
<p>.extension() is different to .extension</p>



<a name="153835874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153835874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153835874">(Jun 30 2016 at 12:47)</a>:</h4>
<p>Question about the fluentpath invariant sdf-12.</p>
<p>Currently it is written as <code>snapshot.element.base implies baseType</code></p>
<p>Believe it should say <code>snapshot.element.select(base) implies baseType</code></p>
<p>Can any of the fluentpath experts chime in?</p>



<a name="153835881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153835881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153835881">(Jun 30 2016 at 13:29)</a>:</h4>
<p>Those should both work to enforce that invariant, if there are base elements, then there must be a baseType. The first one will give a list of base elements, the second one will give a list of list of base elements, either way, interpreting that list as a boolean is effectively an exists.</p>



<a name="153836419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153836419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153836419">(Jul 05 2016 at 12:55)</a>:</h4>
<p>The fluentpath expression <code>today().toString().length() = 10</code> that is in the unit tests uses toString on a date. The toString defined here <code>http://hl7-fhir.github.io/fluentpath.html#1.32.4.4</code> doesn't say what to do with dates.</p>



<a name="153836420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153836420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153836420">(Jul 05 2016 at 12:58)</a>:</h4>
<p>they have an innate string representation</p>



<a name="153836422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153836422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153836422">(Jul 05 2016 at 13:03)</a>:</h4>
<p>given the others were explicitly called out what to do for them, should it also be explicitly stated?</p>



<a name="153836423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153836423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153836423">(Jul 05 2016 at 13:04)</a>:</h4>
<p>(Yes, I've updated it to return the string representation too)</p>



<a name="153847136"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153847136" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153847136">(Sep 12 2016 at 23:06)</a>:</h4>
<p>One more query language with implementation: <a href="https://stedolan.github.io/jq/manual/" target="_blank" title="https://stedolan.github.io/jq/manual/">https://stedolan.github.io/jq/manual/</a>.</p>



<a name="153847139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/fluentpath/near/153847139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/fluentpath.html#153847139">(Sep 12 2016 at 23:17)</a>:</h4>
<div class="codehilite"><pre>curl http://spark.furore.com/fhir/Patient?_format=json | jq &#39;.entry[].resource| {lastName: .name[0].family[0], firstName: .name[0].given[0], id: .id}&#39;
</pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
