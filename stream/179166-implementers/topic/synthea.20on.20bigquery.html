---
layout: page
title: "FHIR Chat  · synthea on bigquery · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html">synthea on bigquery</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153920213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920213">(Nov 17 2017 at 14:25)</a>:</h4>
<p><a href="https://bigquery.cloud.google.com/dataset/fhir-org-starter-project:synthea" target="_blank" title="https://bigquery.cloud.google.com/dataset/fhir-org-starter-project:synthea">https://bigquery.cloud.google.com/dataset/fhir-org-starter-project:synthea</a> is a copy of the Synthea "Synthetic MA" data that I just loaded into BQ.  <span class="user-mention" data-user-id="194832">@Eyal Oren</span> <span class="user-mention" data-user-id="194833">@Patrik Sundberg</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="153920214"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920214" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920214">(Nov 17 2017 at 14:26)</a>:</h4>
<p>(Code used to do the loading -- very rough, since I just put this together during the DevDays keynote... <a href="https://github.com/jmandel/synthea-to-bigquery" target="_blank" title="https://github.com/jmandel/synthea-to-bigquery">https://github.com/jmandel/synthea-to-bigquery</a>)</p>



<a name="153920218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920218">(Nov 17 2017 at 14:30)</a>:</h4>
<p>(and source .ndjson files in Google Cloud Stotrage are at <a href="https://storage.googleapis.com/fhir-synthetic-ma/2017-05-24/AllergyIntolerance.ndjson.gz" target="_blank" title="https://storage.googleapis.com/fhir-synthetic-ma/2017-05-24/AllergyIntolerance.ndjson.gz">https://storage.googleapis.com/fhir-synthetic-ma/2017-05-24/AllergyIntolerance.ndjson.gz</a> and so on... changing the resource.)</p>



<a name="153920219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920219">(Nov 17 2017 at 14:32)</a>:</h4>
<p>+1</p>



<a name="153920220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eyal Oren <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920220">(Nov 17 2017 at 14:33)</a>:</h4>
<p>try count(*) from synthea.Encounter or so</p>



<a name="153920221"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920221" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eyal Oren <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920221">(Nov 17 2017 at 14:33)</a>:</h4>
<p>it's fun</p>



<a name="153920222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eyal Oren <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920222">(Nov 17 2017 at 14:34)</a>:</h4>
<p>or e.g., select format_timestamp("%A", period.start), count(*) from synthea.Encounter group by 1</p>



<a name="153920223"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920223" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920223">(Nov 17 2017 at 14:34)</a>:</h4>
<p>(Patient and Observation are <del>still loading</del> loaded.)</p>



<a name="153920227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920227">(Nov 17 2017 at 15:31)</a>:</h4>
<p><span class="user-mention" data-user-id="191381">@Jason Walonoski</span> FYI  -- the synthea publications made this super easy, thanks!</p>



<a name="153920228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920228">(Nov 17 2017 at 16:18)</a>:</h4>
<p>awesome, thanks <span class="user-mention" data-user-id="191315">@Josh Mandel</span>  now we need to do a nice little tutorial</p>



<a name="153920248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920248">(Nov 17 2017 at 23:40)</a>:</h4>
<p>Yeah, definitely.  For anyone looking to whet their appetite, here's a mildly interesting kind of query that shows off a bunch of features -- it's definitely something that would be hard to do from the FHIR REST API alone. (Definitely a toy example, but with a realistic shape to it.)</p>
<p><em>Goal: see what fraction of patients are diagnosed with hypertension, stratified by the patient's maximum observed systolic blood pressure.</em>  </p>
<ul>
<li><a href="https://bigquery.cloud.google.com/savedquery/1026763011045:af2600264add402db85a96d06fced950" target="_blank" title="https://bigquery.cloud.google.com/savedquery/1026763011045:af2600264add402db85a96d06fced950">Link to saved query for exploration</a></li>
<li><a href="/user_uploads/10155/h2b08SZbwx3s5nTv2Xb3zttB/pasted_image.png" target="_blank" title="pasted_image.png">Example output</a></li>
</ul>
<div class="message_inline_image"><a href="/user_uploads/10155/h2b08SZbwx3s5nTv2Xb3zttB/pasted_image.png" target="_blank" title="Example output"><img src="/user_uploads/10155/h2b08SZbwx3s5nTv2Xb3zttB/pasted_image.png"></a></div>



<a name="153920249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920249">(Nov 17 2017 at 23:42)</a>:</h4>
<p>You start to see pretty quickly that the synthetic data are "way too clean" for real life, with a sharp diagnostic cutoff right at the guideline-compatible boundary of 140mmHg.</p>



<a name="153920250"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920250" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920250">(Nov 18 2017 at 04:15)</a>:</h4>
<p>We'd like to make the Mimic dataset available - a real de-identified value set. But it's not currently available in public, and so we need to negotiate with the owners to make it so</p>



<a name="153920252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920252">(Nov 18 2017 at 04:19)</a>:</h4>
<p><span class="user-mention" data-user-id="194832">@Eyal Oren</span> reading <span class="user-mention" data-user-id="191315">@Josh Mandel</span>'s query makes me wonder about introducing terminology service logic into BigQuery. How would we get it so that instead of   </p>
<div class="codehilite"><pre><span></span>where a_coding.code=&#39;55284-4&#39;
</pre></div>



<a name="153920253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920253">(Nov 18 2017 at 04:20)</a>:</h4>
<p>we can write something like </p>
<div class="codehilite"><pre><span></span>where a_coding.code in valueset &quot;http://my.com/ValueSet/all-blood-pressures&quot;
</pre></div>



<a name="153920254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920254">(Nov 18 2017 at 04:21)</a>:</h4>
<p>? (and I know that we've specifically been ensuring you don't need to in this case, I'm interested in the myriad other cases where we won't and can't)</p>



<a name="153920255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920255">(Nov 18 2017 at 04:22)</a>:</h4>
<p>in general, I'd look to define a closure table.... see <a href="http://build.fhir.org/terminology-service.html#closure" target="_blank" title="http://build.fhir.org/terminology-service.html#closure">http://build.fhir.org/terminology-service.html#closure</a></p>



<a name="153920257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920257">(Nov 18 2017 at 06:13)</a>:</h4>
<p>Having a set of authoritative vocabularies to join in here will be super helpful, I agree. Definite strength of the platform is being able to join across disparate data sets including reference data and instance data. (E.g. there is a public dataset of NPI data that could be directly joined with our "private" synthea data)</p>



<a name="153920258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920258">(Nov 18 2017 at 06:14)</a>:</h4>
<p>I can share an example of what the join would look like with rxnorm for example, since I have that loaded in a place that I can access. It's obviously not the same text that you suggested Graham but it is going to be reasonably straightforward and does allow on the fly creation of (effectively) value sets.</p>



<a name="153920259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920259">(Nov 18 2017 at 06:15)</a>:</h4>
<p>I think what you are saying is that it would be useful for a terminology service to be able to push expansions to a bigquery data set for this purpose</p>



<a name="153920260"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920260" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920260">(Nov 18 2017 at 06:45)</a>:</h4>
<p>Yes indeed <span class="emoji emoji-1f642" title="simple smile">:simple_smile:</span> There are a couple of directions to explore, including what you've described here as well as loading tables directly from source schema (e.g. for rxnorm, the <code>rxnrel</code>, <code>rxnsat</code>, <code>rxnconso</code> tables and so on). I think each approach will have some utility.</p>



<a name="153920261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920261">(Nov 18 2017 at 08:08)</a>:</h4>
<p>Well, my attempt to show a cool join is a bit delayed -- looks like the synthea data has <code>MedicationRequest</code> resources with references like</p>
<div class="codehilite"><pre><span></span>&quot;medicationReference&quot;: {
  &quot;reference&quot;: &quot;&quot;
}
</pre></div>


<p><span class="user-mention" data-user-id="191381">@Jason Walonoski</span>  is this a known issue with the data set?</p>



<a name="153920262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920262">(Nov 18 2017 at 08:09)</a>:</h4>
<p>(Also, I will have to update my loader to turning bundle-internal <code>urn:</code>  references into regular id-based references.)</p>



<a name="153920269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eyal Oren <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920269">(Nov 18 2017 at 17:06)</a>:</h4>
<p>agreed w/ wanting to join terminologies in, esp directly from their definition URLs.<br>
fyi that we have rxnorm already available on bigquery to be joined in : <a href="https://cloud.google.com/bigquery/public-data/rxnorm" target="_blank" title="https://cloud.google.com/bigquery/public-data/rxnorm">https://cloud.google.com/bigquery/public-data/rxnorm</a><br>
we can &amp; will do the same for loinc (i think folks are already worknig on that -- <span class="user-mention" data-user-id="191315">@Josh Mandel</span> you could load loinc into this same project just to demonstrate)</p>



<a name="153920270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eyal Oren <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920270">(Nov 18 2017 at 17:07)</a>:</h4>
<p>also agreed that a condition such as "where a_coding.code = '55284-4' " is in reality unlikely to be very useful, given the myriad of blood pressures in loinc ;-)</p>



<a name="153920271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920271">(Nov 18 2017 at 18:05)</a>:</h4>
<p>so of course you should load the terminologies. But I'm talking about value sets - not the same thing</p>



<a name="153920272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920272">(Nov 18 2017 at 18:16)</a>:</h4>
<p>Indeed the example query was just a toy (and for the Synthea data set, a single fixed code was good enough to demonstrate the rest of the logic -- it's quite homogenous).</p>



<a name="153920273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920273">(Nov 18 2017 at 18:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> definitely terminologies are different from value sets, and we need support for both. For "intensional" value sets, having access to the full terminology structure can help define/reconstitute the value set directly within an analytical query; the flexibility can be nice.</p>



<a name="153920274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920274">(Nov 18 2017 at 18:19)</a>:</h4>
<p>Do we have a FHIR representation of some/all value sets from the NLM Value Set Authority Center?</p>



<a name="153920275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920275">(Nov 18 2017 at 18:20)</a>:</h4>
<p>That'd be nice for various reasons, and we could load it into an abalytical db as well.</p>



<a name="153920276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920276">(Nov 18 2017 at 18:23)</a>:</h4>
<p>I've processed all the CDA value sets; I don't know if that's all the value sets.</p>



<a name="153920277"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920277" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920277">(Nov 18 2017 at 18:24)</a>:</h4>
<p>It's quite a lot of code to do expansions; let's say we decide to get on the terminology servers to push the expansions up (for those that are not infinite) - how would that happen?</p>



<a name="153920281"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920281" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920281">(Nov 18 2017 at 21:18)</a>:</h4>
<p>Does VSAC host (definitions for) any non-finite value sets? I didn't think so.</p>



<a name="153920290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920290">(Nov 19 2017 at 04:46)</a>:</h4>
<p>no VSAC doesn't. But FHIR has several of them - and it's because VSAC can't, not because there's no need</p>



<a name="153920335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920335">(Nov 19 2017 at 19:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191381">@Jason Walonoski</span> one other note on the data: looks like Immunizations don't have any <code>id</code>. Is this expected?</p>



<a name="153920383"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920383" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920383">(Nov 20 2017 at 13:37)</a>:</h4>
<p>Cool -- so using the public rxnorm data set, a join with clinical synthea data might ask: "How many synthea meds contained hydrocodone as an ingredient?" Knowing that hydrocodone is RxNorm concept <code>5489</code>, the query can be done with:</p>
<div class="codehilite"><pre><span></span><span class="k">SELECT</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span>
  <span class="o">`</span><span class="n">fhir</span><span class="o">-</span><span class="n">org</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">project</span><span class="p">.</span><span class="n">synthea</span><span class="p">.</span><span class="n">Medication</span><span class="o">`</span><span class="n">meds</span><span class="p">,</span> <span class="k">unnest</span><span class="p">(</span><span class="n">meds</span><span class="p">.</span><span class="n">code</span><span class="p">.</span><span class="n">coding</span><span class="p">)</span>  <span class="n">med_coding</span>
   <span class="k">join</span> <span class="o">`</span><span class="n">bigquery</span><span class="o">-</span><span class="k">public</span><span class="o">-</span><span class="k">data</span><span class="p">.</span><span class="n">nlm_rxnorm</span><span class="p">.</span><span class="n">rxn_all_pathways_current</span><span class="o">`</span> <span class="n">pathways</span>
     <span class="k">on</span> <span class="n">pathways</span><span class="p">.</span><span class="n">source_rxcui</span><span class="o">=</span><span class="k">cast</span><span class="p">(</span><span class="n">med_coding</span><span class="p">.</span><span class="n">code</span> <span class="k">as</span> <span class="n">string</span><span class="p">)</span>
<span class="k">where</span>
  <span class="n">med_coding</span><span class="p">.</span><span class="k">system</span><span class="o">=</span><span class="ss">&quot;http://www.nlm.nih.gov/research/umls/rxnorm&quot;</span> <span class="k">and</span>
  <span class="n">pathways</span><span class="p">.</span><span class="n">target_rxcui</span><span class="o">=</span><span class="ss">&quot;5489&quot;</span>
</pre></div>


<p>... this matches any single-ingredient drug, multi-ingredient drug, brand name, generic, pack, dose form, etc, that <em>contains hydrocodone as an ingredient</em>. It's otherwise quite challenging to do this kind of thing without pre-processing.</p>



<a name="153920471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920471">(Nov 20 2017 at 23:01)</a>:</h4>
<p>And now for an example query joining LOINC to clinical data! (This isn't an officially hosted copy of LOINC, but I've added it to our sample project just to illustrate the point.)</p>
<p><em>See how often deprecated, discouraged, or trial LOINC terms are used in the data set</em>:</p>
<div class="codehilite"><pre><span></span><span class="o">#</span><span class="n">standardSQL</span>
<span class="k">select</span> <span class="n">loinc</span><span class="p">.</span><span class="n">status</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">as</span> <span class="k">count</span>
<span class="k">from</span>
  <span class="n">synthea</span><span class="p">.</span><span class="n">Observation</span><span class="p">,</span>
  <span class="k">unnest</span><span class="p">(</span><span class="n">code</span><span class="p">.</span><span class="n">coding</span><span class="p">)</span> <span class="n">observation_coding</span>
  <span class="k">join</span> <span class="o">`</span><span class="n">loinc_test</span><span class="p">.</span><span class="n">loinc</span><span class="o">`</span> <span class="n">loinc</span> <span class="k">on</span> <span class="n">loinc</span><span class="p">.</span><span class="n">loinc_num</span><span class="o">=</span><span class="n">observation_coding</span><span class="p">.</span><span class="n">code</span>
<span class="k">where</span>
  <span class="n">observation_coding</span><span class="p">.</span><span class="k">system</span> <span class="o">=</span> <span class="ss">&quot;http://loinc.org&quot;</span>
<span class="k">group</span> <span class="k">by</span> <span class="n">loinc</span><span class="p">.</span><span class="n">status</span>
<span class="k">order</span> <span class="k">by</span> <span class="k">count</span>
</pre></div>


<table>
<thead>
<tr>
<th>status</th>
<th>count</th>
</tr>
</thead>
<tbody>
<tr>
<td>TRIAL</td>
<td>202426</td>
</tr>
<tr>
<td>DISCOURAGED</td>
<td>7037333</td>
</tr>
<tr>
<td>ACTIVE</td>
<td>50339669</td>
</tr>
</tbody>
</table>



<a name="153920479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920479">(Nov 21 2017 at 01:45)</a>:</h4>
<p>BTW, I re-loaded the synthea data with:</p>
<ul>
<li>Proper references now enabled across resources</li>
<li>An updated schema that includes descriptions for all fields (drawn from the FHIR spec)</li>
</ul>
<p>This approach avoids the auto-guessed schema that (wrongly) concluded thing like "<code>Observation.coding.code</code> is  an integer" (just 'cause only SNOMED codes were used in the data set, and those happen to be integers).</p>



<a name="153920480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920480">(Nov 21 2017 at 02:02)</a>:</h4>
<p>thanks</p>



<a name="153920493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920493">(Nov 21 2017 at 05:47)</a>:</h4>
<p>we do terminology in postgresql by introducing Concept resource- this simplify valuesets queries</p>



<a name="153920550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920550">(Nov 21 2017 at 09:00)</a>:</h4>
<p>Is there some alternative to XMLHttpRequest the can be used in BigQuery's UDFs?</p>



<a name="153920656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920656">(Nov 21 2017 at 13:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span>  Do you mean for fetching external data from within a udf? I don't think so, from <a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions" target="_blank" title="https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions">https://cloud.google.com/bigquery/docs/reference/standard-sql/user-defined-functions</a> . You'd need a js interpreter to  expose a special synchronous http request function, but udfs run in an environment  with only (a subset of) standards js built-ins. What's the use case you have in mind?</p>



<a name="153920675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920675">(Nov 21 2017 at 14:14)</a>:</h4>
<p>Hmm... seems like you found some interesting things with the Synthea data, as well as some issues.</p>
<p>Did you load the STU3 or DSTU2 data? I'm assuming STU3.</p>
<p>Immunizations were not assigned IDs because they aren't referenced by other resources in the Bundle. It is assumed the FHIR server will assign the ID during the transaction.</p>
<p>At the time the data was generated, we had MedicationRequest reference Medication resources. We later changed this just to have medicationCodeableConcept instead (Medication doesn't add any value here, since we're just using RxNorm codes). Apparently we did not regenerate the data to include this change. At any rate, the medicationReferences should point to a Medication by <code>"urn:uuid:#{resource_id}"</code> (that is Ruby syntax). Not sure why they are empty. But this is fixed in the latest version of Synthea.</p>



<a name="153920751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920751">(Nov 21 2017 at 16:32)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191381">@Jason Walonoski</span>! I just downloaded the published data set, using the most recent version (Version 2, which uses STU3) listed at <a href="https://syntheticmass.mitre.org/download.html" target="_blank" title="https://syntheticmass.mitre.org/download.html">https://syntheticmass.mitre.org/download.html</a>. Details <a href="https://github.com/jmandel/synthea-to-bigquery/blob/master/01-prepare.sh" target="_blank" title="https://github.com/jmandel/synthea-to-bigquery/blob/master/01-prepare.sh">here</a>. Is there a newer release I should be using?</p>



<a name="153920774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jason Walonoski <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920774">(Nov 21 2017 at 18:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> Thanks for posting your work on this -- it is very interesting, and I always like to see how others use the data. The link to Version 2 is the latest release of the <strong>data</strong>, so that is good. The latest release of the <strong>code</strong> has fixed those problems. So, we'll need to update the data. TBD on timeline for that.</p>



<a name="153920872"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920872" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920872">(Nov 22 2017 at 01:47)</a>:</h4>
<p>I'm looking for a way to connect up to a FHIR terminology server</p>



<a name="153920874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920874">(Nov 22 2017 at 01:51)</a>:</h4>
<p>todo what?</p>



<a name="153920875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920875">(Nov 22 2017 at 01:52)</a>:</h4>
<p>Clearly there are performance concerns about REST calls during query evaluation.  What would work is being able to populate a table as a result of REST call.  In particular I'm thinking about the results of $closure.  i.e., I'm hoping to be able to perform code:below type queries</p>



<a name="153920876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920876">(Nov 22 2017 at 02:10)</a>:</h4>
<p>well, Josh is effectively saying that if you upload the code system directly to the bigquery repository, you can do those things in sql.</p>



<a name="153920877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920877">(Nov 22 2017 at 02:10)</a>:</h4>
<p>unless the semantics of the code systems are as complicated as SNOMED Ct</p>



<a name="153920878"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920878" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920878">(Nov 22 2017 at 02:11)</a>:</h4>
<p>in which case the most effective way would be to generate the entire closure table and upload it once</p>



<a name="153920880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920880">(Nov 22 2017 at 02:36)</a>:</h4>
<p>I'm indeed saying what Grahame says I'm saying <span class="emoji emoji-1f642" title="simple smile">:simple_smile:</span> It's very useful to load closure tables especially for these recursive structures since BQ doesn't have "connect by" or "with recursive".</p>



<a name="153920881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920881">(Nov 22 2017 at 02:40)</a>:</h4>
<p>and this works for some cases. Michael and I are interested in the rest of the cases where the value set machinary brings real value</p>



<a name="153920882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920882">(Nov 22 2017 at 02:40)</a>:</h4>
<p>though code:below is not one of those cases</p>



<a name="153920883"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920883" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920883">(Nov 22 2017 at 02:49)</a>:</h4>
<p>Can you share some examples of where the value set machinery helps (and especially if helps in places where a closure table can't stand in for it)?</p>



<a name="153920885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920885">(Nov 22 2017 at 03:17)</a>:</h4>
<p>so there's several things a txserver - with logic - does over this:<br>
- in a value set, you make an arbitrary list of codes that are part of the value set that aren't purely derived from the semantics of the code system. So you really want the tx server to be able to push the final list up so you can join across them<br>
- but there's some value sets where the list of codes is not finite (ones with grammar). So in this case, generating the join table (loosely called a closure table so far) is a shared responsibility - the data source says 'here's the codes I have' and the terminology server says 'ok, here's the table for this set of codes'<br>
- the value set can cross code systems (makes people's skin crawl, but it happens)</p>



<a name="153920886"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920886" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920886">(Nov 22 2017 at 03:45)</a>:</h4>
<p>Most of the VSAC value sets cross code systems, fwiw</p>



<a name="153920887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920887">(Nov 22 2017 at 03:46)</a>:</h4>
<p>I'm not sure I understand the interaction you're describing with respect to "join tables" - - what does the resulting table say/mean/include?</p>



<a name="153920888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920888">(Nov 22 2017 at 03:47)</a>:</h4>
<p>For value sets that are finite: pushing these up into an analytics environment seems very natural.</p>



<a name="153920889"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920889" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920889">(Nov 22 2017 at 03:50)</a>:</h4>
<p>yes. I think that's the first of the 2 use cases here: post the value set to the Tx Server, and it pushes the expansion to the analytics store</p>



<a name="153920890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920890">(Nov 22 2017 at 03:50)</a>:</h4>
<p>then you can join using it</p>



<a name="153920891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920891">(Nov 22 2017 at 03:51)</a>:</h4>
<p>the infinite value sets need an additional step where the TS knows the set of codes in the join space</p>



<a name="153920900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920900">(Nov 22 2017 at 06:02)</a>:</h4>
<p>Yep. And of course you can do most of this on a code system basis with SQL stuff.  But generally that means you need to invest in learning about the table structure for every code system you're interested in.  And, of course, there's the whole SNOMED thing with (to a lesser extent) post coordination, but more common (IMO) valuesets defined with ECL.</p>
<p>Then there's ConceptMaps, but they're a problem at the moment as there's only the code-by-code $translate rather than an analogue to $expand (or $closure) for bulk-translation</p>



<a name="153920948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920948">(Nov 22 2017 at 07:39)</a>:</h4>
<p>well, when would you need an operation, as opposed to joining across a concept map content?</p>



<a name="153920995"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153920995" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153920995">(Nov 22 2017 at 11:14)</a>:</h4>
<p>We have some ConceptMaps that are algorithmic - effectively infinite - so you can't grab the content, store it in a table and then do a join with your data.  It's a similar scenario to the $closure use-case</p>



<a name="153921030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153921030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153921030">(Nov 22 2017 at 14:18)</a>:</h4>
<p>what's an example?</p>



<a name="153921196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153921196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153921196">(Nov 23 2017 at 01:35)</a>:</h4>
<p>A concept map that looks at a code's display in order to find an appropriate match - we have a range of algorithms for this and expose them as different ConceptMaps.  The usual use-case is mapping a large number of codes at once</p>



<a name="153921198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153921198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153921198">(Nov 23 2017 at 01:38)</a>:</h4>
<p>what does the concept map look like?</p>



<a name="153921215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153921215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153921215">(Nov 23 2017 at 02:22)</a>:</h4>
<p>It's implicitly defined and doesn't have an extension, only a URI that you pass to $translate (although the missing parameter to $translate that allows this still hasn't been added to 3.1.0 - <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13509" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13509">GF#13509</a>)</p>



<a name="153992296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/153992296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoran Milosevic <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#153992296">(Aug 31 2018 at 12:08)</a>:</h4>
<blockquote>
<p>We'd like to make the Mimic dataset available - a real de-identified value set. But it's not currently available in public, and so we need to negotiate with the owners to make it so</p>
</blockquote>
<p>Has there been any progress in mapping Mimic to FHIR directly (but not via OMOP)? That is, anyone knows anyone doing this? :-)</p>



<a name="154010733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/synthea%20on%20bigquery/near/154010733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cinyoung Hur <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/synthea.20on.20bigquery.html#154010733">(Oct 20 2018 at 11:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191398">@Zoran Milosevic</span> Hi, I'm interested in mapping MIMIC 3.0 to FHIR, and recently started to work on it. <a href="https://github.com/linewalks/mimic-fhir" target="_blank" title="https://github.com/linewalks/mimic-fhir">https://github.com/linewalks/mimic-fhir</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
