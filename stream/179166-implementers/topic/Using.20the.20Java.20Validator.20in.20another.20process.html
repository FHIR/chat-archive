---
layout: page
title: "FHIR Chat  · Using the Java Validator in another process · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html">Using the Java Validator in another process</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153928681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153928681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153928681">(Jan 12 2018 at 22:27)</a>:</h4>
<p>In the last few days, I've got around to something I've been meaning to for a while. I've set up the java validator so you can host it in another service, and use the services it has in a wider context. The way it works is </p>
<ul>
<li>put the jar in your class path</li>
<li>Find the class org.hl7.fhir.r4.validation.NativeHostServices or org.hl7.fhir.dstu3.validation.NativeHostServices</li>
<li>call init(path) where path refers to one of the definitions files from the main build (e.g. definitions.xml.zip) - required, do only once, do before anything else</li>
<li>call load(path) where path refers to the igpack.zip produced by the ig publisher (do this once for each IG you care about)</li>
<li>call connectToTxSvc(url) where the url is your terminology service of choice (can be <a href="http://tx.fhir.org/r4" target="_blank" title="http://tx.fhir.org/r4">http://tx.fhir.org/r4</a> or /r3)</li>
</ul>
<p>now the jar is ready for action. There's 3 functions you can call (all are thread safe):<br>
- validate - given a resource, validate it against all known rules<br>
- convert - given a resource in a different version convert it to this version (if possible)<br>
- unconvert - given a resource, convert it to a different version (if possible)</p>
<p>also, call "status" to get a json object that describes the internals of the jar (e.g. for server status)</p>
<p>The interface is optimised for JNI.</p>



<a name="153928682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153928682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153928682">(Jan 12 2018 at 22:28)</a>:</h4>
<p>let me know if this is something you're interested in , or if you want additional functions exposed</p>



<a name="153928707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153928707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153928707">(Jan 13 2018 at 13:35)</a>:</h4>
<p>thanks a lot for that effort, i'm very interested in this.</p>



<a name="153929119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153929119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anand Mohan Tumuluri <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153929119">(Jan 16 2018 at 20:58)</a>:</h4>
<p>Unfortunately this change breaks the command line use of the validator since it tries to validate references. Is there any flag to disable the reference resolution?</p>



<a name="153929206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153929206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153929206">(Jan 17 2018 at 11:21)</a>:</h4>
<p>I'm pretty sure this didn't break that.</p>



<a name="153929207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153929207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153929207">(Jan 17 2018 at 11:22)</a>:</h4>
<p>there's no parameter for that... I'll have to think about that</p>



<a name="153934927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153934927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153934927">(Feb 02 2018 at 04:50)</a>:</h4>
<p>Is this library available via HAPI?<br>
Also, what are the required capabilities of the external terminology service of choice?</p>



<a name="153934929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153934929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153934929">(Feb 02 2018 at 05:12)</a>:</h4>
<p>I don't know. <span class="user-mention" data-user-id="191319">@James Agnew</span> has to include the new files in HAPI</p>



<a name="153934930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153934930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153934930">(Feb 02 2018 at 05:12)</a>:</h4>
<p>capabilities - thorough support for terminology operations including $validate and $expand</p>



<a name="153934961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153934961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153934961">(Feb 02 2018 at 10:31)</a>:</h4>
<p>I don't really know what it would add for this to be available in HAPI. HAPI's existing wrapper and validation support chain framework have been providing the ability for you to keep a validator instance available for use in memory for a long time now.</p>
<p>Presumably the use case for this is more for JNI (which isn't really a design goal of HAPI's)?</p>



<a name="153934962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153934962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153934962">(Feb 02 2018 at 10:31)</a>:</h4>
<p>I think so</p>



<a name="153934963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153934963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153934963">(Feb 02 2018 at 10:32)</a>:</h4>
<p>still, maybe there's a role for other HAPI services inside a non-Java process?</p>



<a name="153934964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153934964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153934964">(Feb 02 2018 at 10:33)</a>:</h4>
<p>Possibly... TBH I have never even touched the JNI stuff, I don't know much about how to do it well...</p>



<a name="153934973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153934973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153934973">(Feb 02 2018 at 12:14)</a>:</h4>
<p>As a choice of design, I would use the HAPI validator as a separate service and just invoke it using regular HTTP</p>



<a name="153935007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153935007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Ettema <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153935007">(Feb 02 2018 at 15:40)</a>:</h4>
<p>Not sure if I'm missing something here, but this sounds like the $validate operation - <a href="http://build.fhir.org/resource-operations.html#validate" target="_blank" title="http://build.fhir.org/resource-operations.html#validate">http://build.fhir.org/resource-operations.html#validate</a>.</p>



<a name="153935009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153935009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153935009">(Feb 02 2018 at 15:42)</a>:</h4>
<p>for me it's behind that operation</p>



<a name="153935019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Using%20the%20Java%20Validator%20in%20another%20process/near/153935019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Using.20the.20Java.20Validator.20in.20another.20process.html#153935019">(Feb 02 2018 at 16:05)</a>:</h4>
<p>Or calling it prior to submitting a resource internally with specific profile(s)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
