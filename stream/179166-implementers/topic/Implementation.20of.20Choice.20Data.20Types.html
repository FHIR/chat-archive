---
layout: page
title: "FHIR Chat  · Implementation of Choice Data Types · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20of.20Choice.20Data.20Types.html">Implementation of Choice Data Types</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="166362752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20of%20Choice%20Data%20Types/near/166362752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Paquette <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20of.20Choice.20Data.20Types.html#166362752">(May 23 2019 at 13:57)</a>:</h4>
<p>Example: Patient properties <code>deceased[x]</code> and <code>multipleBirth[x]</code></p>
<p>My reading of <a href="http://build.fhir.org/formats.html#choice" target="_blank" title="http://build.fhir.org/formats.html#choice">http://build.fhir.org/formats.html#choice</a> [ref: "Elements that have a choice of data type cannot repeat - they must have a maximum cardinality of 1. When constructing an instance of an element with a choice of types, the authoring system must create a single element with a data type chosen from among the list of permitted data types."] implies to me that the implementation of choice data types should result in only one choice property (e.g., single polymorphic <code>deceased</code> property as opposed to the multiple <code>deceasedBoolean</code> and <code>deceasedDataTime</code> properties). Am I reading this correctly? Should the implementation be:</p>
<ul>
<li>a single <code>deceased</code> property that can support either a boolean data type or a dateTime data type</li>
<li>two properties of <code>deceasedBoolean</code> and <code>deceasedDataTime</code> where only one of these fields can be used at a time</li>
<li>something else that I'm missing...</li>
</ul>
<p>Looking at the generated <code>fhir.schema.json</code> from the downloads (JSON SCHEMA), the schema definition for "Patient" specifically defines the following (ignoring the "underscored prperties"): <code>deceasedBoolean</code>, <code>deceasedDateTime</code>. If the requirement is for a single polymorphic property, the "Patient" JSON Schema should have a single <code>deceased</code> property having a <code>oneOf</code> for type definitions for <code>boolean</code> and <code>dataTime</code> (string).</p>
<p>If the intent is to implement choice fields as one per data type (e.g., <code>deceasedBoolean</code>, <code>deceasedDateTime</code>), then based on the requirement to allow only one of these, the JSON Schema should have a "oneOf" for <code>deceasedBoolean</code> or <code>deceasedDateTime</code>.</p>
<p>I'd appreciate any insight on the underlying intent and how other folks are handling this in real implementations.</p>
<p>Thanks!</p>



<a name="166362856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20of%20Choice%20Data%20Types/near/166362856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20of.20Choice.20Data.20Types.html#166362856">(May 23 2019 at 13:58)</a>:</h4>
<blockquote>
<p>Example: Patient properties <code>deceased[x]</code> and <code>multipleBirth[x]</code></p>
<ul>
<li>two properties of <code>deceasedBoolean</code> and <code>deceasedDataTime</code> where only one of these fields can be used at a time</li>
</ul>
</blockquote>
<p>This.</p>



<a name="166364086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20of%20Choice%20Data%20Types/near/166364086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Paquette <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20of.20Choice.20Data.20Types.html#166364086">(May 23 2019 at 14:12)</a>:</h4>
<p>OK, thanks...<br>
So, shouldn't the JSON Schema enforce this by using "oneOf" for <code>deceasedBoolean</code> and <code>deceasedDateTime</code>? Or is the intent that an implementer must add appropriate logic on how to handle the specific uses?</p>



<a name="166367779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20of%20Choice%20Data%20Types/near/166367779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20of.20Choice.20Data.20Types.html#166367779">(May 23 2019 at 14:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="166744054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20of%20Choice%20Data%20Types/near/166744054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20of.20Choice.20Data.20Types.html#166744054">(May 28 2019 at 18:14)</a>:</h4>
<p>and again  ;) choice types in fhir json are represented in a wrong way - you will have combinatorial problems with more than one union in resource,  you could not have collection of union attributes, search problems etc. I will bomb until we fix it!</p>



<a name="166756954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20of%20Choice%20Data%20Types/near/166756954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20of.20Choice.20Data.20Types.html#166756954">(May 28 2019 at 20:38)</a>:</h4>
<blockquote>
<p>the intent that an implementer must add appropriate logic on how to handle the specific uses</p>
</blockquote>
<p>Json schema can't represent all the rules. So we add the ones to schema that people find useful, based on feedback. There's a tradeoff for different uses of the schema . for XML, we publish 2 different schema, for different purposes.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
