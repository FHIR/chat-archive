---
layout: page
title: "FHIR Chat  · Handling Contained Resources · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html">Handling Contained Resources</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153858698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153858698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153858698">(Nov 28 2016 at 16:42)</a>:</h4>
<p>According to FHIR specification around references and contained resources, <a href="https://www.hl7.org/fhir/references.html" target="_blank" title="https://www.hl7.org/fhir/references.html">https://www.hl7.org/fhir/references.html</a>, I can send to a FHIR server a resource such as an Observation reference an embedded patient resource if it is listed in the contained section of the Observation resource or within a Bundle. And I can successfully do this today against the HAPI server. My question is what does the FHIR server do with the "contained" resources after receiving such a message? </p>
<p>Can I tell the FHIR server to always create the contained resource if it's missing in the FHIR server? Because if it doesn't create the resource, I won't be able to do search for the Observation by the embedded patient identifiers specified in the contained resource.</p>



<a name="153858721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153858721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153858721">(Nov 28 2016 at 18:49)</a>:</h4>
<p>if you post to my server, it will allow you to search like that. This is limitation built into HAPI. But there's no way to *tell* the FHIR server to create the contained resource, because the only circumstance where you should use a contained resource is that one where it is impossible for either the client or the server to create an actual resource because there is not enough information</p>



<a name="153858724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153858724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153858724">(Nov 28 2016 at 19:00)</a>:</h4>
<p>So let's say I am interfacing with a FHIR server and trying to send Observation messages to that server. Are you recommending that before I add any Observation to the FHIR server that I need to make a query to the FHIR server first to see if the Patient resource exists or not and if it doesn't exist, make sure that it's created before submitting the Observation? </p>



<a name="153858725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153858725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153858725">(Nov 28 2016 at 19:01)</a>:</h4>
<p>that's one option. Another is to to submit a transaction. </p>



<a name="153858726"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153858726" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153858726">(Nov 28 2016 at 19:02)</a>:</h4>
<p>with a conditional create</p>



<a name="153858767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153858767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153858767">(Nov 28 2016 at 22:06)</a>:</h4>
<p>So Graphame, your server handles "contained" resources by creating the missing resources in the database and enabling search that way or are you handling queries for resources differently than HAPI by creating other search indexes?</p>



<a name="153858773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153858773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153858773">(Nov 28 2016 at 22:12)</a>:</h4>
<p>that's a false dichotomy. technically, I index contained resoruces like I index any other resources; they have a dual identity, their container id and their id, so I know they are contained resources from the index</p>



<a name="153860038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860038">(Dec 02 2016 at 21:14)</a>:</h4>
<p>Your implementation makes sense. What I don't understand is why aren't contained resources are not used more often for handling of references. It eliminates the back and forth chatter between the FHIR server and client for retrieval of internal identifiers for references . As a client I shouldn't have to know what the internal identifiers are of a FHIR server. Take the example of source health care system sharing data with potential interested parties. As the source system, I have my own identifiers for resources in my system. When I broadcast data changes to other systems, I shouldn't have to alter my message for each interested party to make sure that they can process it.</p>



<a name="153860040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860040">(Dec 02 2016 at 21:17)</a>:</h4>
<p>Transactions with conditional create doesn't quite help either. Once again, we are asking FHIR client to take responsibility of how resources are created in the FHIR server. What if two FHIR clients use different conditions for resolving of identifiers during conditional create? You can end up with data is not in sync.</p>



<a name="153860056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860056">(Dec 03 2016 at 01:13)</a>:</h4>
<p>You can ask the server to package things up using _include. </p>



<a name="153860057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860057">(Dec 03 2016 at 01:13)</a>:</h4>
<p>but contained resources are a fail as soon as you start handling inforrmation repeatedly, or in different contexts</p>



<a name="153860058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860058">(Dec 03 2016 at 01:13)</a>:</h4>
<p>or you have to update it </p>



<a name="153860059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860059">(Dec 03 2016 at 01:13)</a>:</h4>
<p>"When I broadcast data changes to other systems, I shouldn't have to alter my message for each interested party to make sure that they can process it." - that's for sure, but why would you think you need to?</p>



<a name="153860749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860749">(Dec 05 2016 at 17:06)</a>:</h4>
<p>How does _include help with the insertion of data with multiple references? Isn't _include used more for queries? The broadcast message scenario can be the following. Let's say I am an EMR system that currently works with HL7 v2 as means of sharing information and that now I wish push my Observation messages to other interested parties which are FHIR servers. The EMR system however is not a FHIR server. So the EMR sends FHIR messages to those FHIR servers using external FHIR references then it needs to craft a different message for each interested FHIR server. </p>



<a name="153860751"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860751" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860751">(Dec 05 2016 at 17:15)</a>:</h4>
<p>If not using external references, then as you said, it can be a Transaction with conditional create but that requires quite a bit more resources to be sent across then just references to identifiers. And the calling client is also specifying the condition on how the server matches the identifiers for conditional create. As just a client broadcasting message, why is it the client's job to dictate how the data is stored on the server </p>



<a name="153860758"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860758" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860758">(Dec 05 2016 at 17:30)</a>:</h4>
<p>Tom, yes _include is a query parameter. It is not a concept in messaging, except to the extent you mention that a sender can 'include' things that it thinks the recipient need (likely  Profile - IG  have defined to happen). It is this that needs to be decided, what is the IG that the sender will follow that tells it what to include. This would be influenced by knowledge of shared accessibility of a common REST service, such as a Patient Registry. With a shared service, like Patient, one can just use references to persistent Resources. BUT if you don't have shared REST services, then you must convey all appropriate information. </p>



<a name="153860826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860826">(Dec 05 2016 at 19:43)</a>:</h4>
<p>I still don't follow why a different message is required for each servrer</p>



<a name="153860933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860933">(Dec 05 2016 at 20:41)</a>:</h4>
<p>Example: Observation with patient MRN = 123. In FHIR Server 1, patient MRN=123 is represented as Patient/1. In FHIR Server 2, the same patient is represented as Patient/2. When you send the Observation with a link to the patient, you need to specify the subject. So which reference do you specify Patient/1 or Patient/2 ? Hence a different message per server</p>



<a name="153860969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860969">(Dec 05 2016 at 21:11)</a>:</h4>
<p>you should do what you'd do in v2: send the patient resource (= PID segment). Give it the identity of your own patient id, and put the identifiers in the patient resource (=PID-3)</p>



<a name="153860972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860972">(Dec 05 2016 at 21:12)</a>:</h4>
<p>then, the recipient server can <br>
- use your id, since that's what it does<br>
- use it's own id, and do reconciliation based on Patient.identifier - just like now</p>



<a name="153860973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153860973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153860973">(Dec 05 2016 at 21:12)</a>:</h4>
<p>no need for a different message per server</p>



<a name="153861042"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861042" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861042">(Dec 05 2016 at 22:35)</a>:</h4>
<p>Yes, that's what we are doing. putting the PID-3 elements inside Patient.identifier.value field and assigning the appropriate system. You are not talking about assigning the Patient resourcce's logical id to PID-3 correct?  And if the server decides to use its own logical "id" instead of what you are passing in then when you setup the subject reference  in the Observation it will still need to link to this newly generated logical "id". </p>



<a name="153861043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861043">(Dec 05 2016 at 22:37)</a>:</h4>
<p>no, I'm not saying to use the logical id of the resource in the Patient.identifier.</p>



<a name="153861044"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861044" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861044">(Dec 05 2016 at 22:37)</a>:</h4>
<p>Maybe I am missing something fundamental here. Is there an example of taking a HL7 v2 Observation message and breaking that down into a collection of FHIR resources that can be sent to any FHIR server without modification?</p>



<a name="153861045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861045">(Dec 05 2016 at 22:38)</a>:</h4>
<p>yes. see <a href="http://build.fhir.org/diagnosticreport-micro1.xml.html" target="_blank" title="http://build.fhir.org/diagnosticreport-micro1.xml.html">http://build.fhir.org/diagnosticreport-micro1.xml.html</a></p>



<a name="153861046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861046">(Dec 05 2016 at 22:38)</a>:</h4>
<p>no. I excluded the patient from that</p>



<a name="153861049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861049">(Dec 05 2016 at 22:46)</a>:</h4>
<p>so let's just take this little fragment:</p>
<div class="codehilite"><pre>MSH|^~\&amp;|Source|Source2|Dest|Dets2|20110620103832||ORU^R01^ORU_R01|2039068|D|2.3.1|||AL|NE|AU|ASCII|ENG
PID|1||124320^^^Source|124320^^^Source|TestPatient^Test^^^^^L|||M||||||||||||||||||||||N
PV1||O|AN^^^AN^^^^^A place|||||ID^Doctor^D^^^Dr^^||||||||||||P
</pre></div>



<a name="153861050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861050">(Dec 05 2016 at 22:50)</a>:</h4>
<p>you're going to get a bundle like this:</p>
<div class="codehilite"><pre>bundle
  type = collection
  entry
    fullUrl = http://[source]/Patient/xxxx
    resource = Patient
      id = xxxx
      identifier
        system = [source]
        value = 124320
      name
        family = TestPatient
        given = Test
      gender = M
  entry
    fullUrl = http://[source]/Encounter/yyyy
    resource = Encounter
      patient      
        reference = Patient/xxxx
        participant
          etc
  entry
    fullUrl = http://[source]/Observation/1234
    resource = Observation
      subject
        reference = Patient/xxxx
      code
        LOINC etc      
</pre></div>



<a name="153861051"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861051" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861051">(Dec 05 2016 at 22:50)</a>:</h4>
<p>short hand there...</p>



<a name="153861052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861052">(Dec 05 2016 at 22:51)</a>:</h4>
<p>the question is the value of xxxx. The correct value for xxxx is 'something from the source that will be constant each time the same patient is referenced' . </p>



<a name="153861053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861053">(Dec 05 2016 at 22:51)</a>:</h4>
<p>the recipients can use xxxx, or not. </p>



<a name="153861054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861054">(Dec 05 2016 at 22:54)</a>:</h4>
<p>So id = xxxx may or may not be the logical id depending on FHIR server implementation</p>



<a name="153861056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861056">(Dec 05 2016 at 22:58)</a>:</h4>
<p>now I'm not sure what you mean by 'logical id' </p>



<a name="153861057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861057">(Dec 05 2016 at 22:58)</a>:</h4>
<p>in FHIR terms, it *is* the logical id by definition</p>



<a name="153861058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861058">(Dec 05 2016 at 22:59)</a>:</h4>
<p>The logical id as defined here: <a href="https://www.hl7.org/FHIR/resource.html" target="_blank" title="https://www.hl7.org/FHIR/resource.html">https://www.hl7.org/FHIR/resource.html</a>. Which states "Each resource has an "id" element which contains the logical identity of the resource assigned by the server responsible for storing it"</p>



<a name="153861059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861059">(Dec 05 2016 at 23:00)</a>:</h4>
<p>I though that was what you are setting with id = xxxx</p>



<a name="153861061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861061">(Dec 05 2016 at 23:08)</a>:</h4>
<p>indeed, xxx is the logical id, by definition. </p>



<a name="153861062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861062">(Dec 05 2016 at 23:08)</a>:</h4>
<p>so I don't know what you meant when you said 'may not be the logical id'</p>



<a name="153861065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tom C <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861065">(Dec 05 2016 at 23:19)</a>:</h4>
<p>What I'm trying to say is how the FHIR server handles the "logical id" xxxx is up to the implementer. It can choose to store xxxx as the logical id in its Patient resource or it may choose a completely different identifier that it generates for the id field. If the FHIR server chooses the latter option would the FHIR client still be able to query for that specific patient using Patient/xxxx?</p>



<a name="153861067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861067">(Dec 05 2016 at 23:23)</a>:</h4>
<p>are you talking about the server processing the bundle? Then yes, it can choose to use xxxx or it can make up it's own. If it makes up it's own, then 2 questions arise:<br>
- how will it recognise the same patient resource next time, and match it to the same id?<br>
- what impact will that have on other systems</p>



<a name="153861068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Handling%20Contained%20Resources/near/153861068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Handling.20Contained.20Resources.html#153861068">(Dec 05 2016 at 23:24)</a>:</h4>
<p>so the answer to your last question is, pretty much no. In general, it's not safe to assume that resources will keep their logical id when they are moved from server to server unless you have independent confirmation that they will be kept the same</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
