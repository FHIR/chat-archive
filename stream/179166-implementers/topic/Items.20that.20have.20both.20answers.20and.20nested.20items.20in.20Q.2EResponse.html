---
layout: page
title: "FHIR Chat  · Items that have both answers and nested items in Q.Response · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html">Items that have both answers and nested items in Q.Response</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="177131919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/177131919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Grundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#177131919">(Oct 02 2019 at 08:46)</a>:</h4>
<p>When implementing POSTing of QuestionnaireResponse resource we have come across a problem with the fact that there is a validation rule on the QuestionnaireResponse.item "+ Rule: Nested item can't be beneath both item and answer" (qrs-1). This means we cannot find a way to implement a QuestionnaireResponse that has something like this:</p>
<p>Have you had fever? Yes/No<br>
-How long (if yes)?</p>
<p>The item "Have you had fever?" both has an answer Yes/No, and a follow up question/item nested with its own answer.</p>
<p>This seems to me a very common use case, how should we handle this? What is the reason for this validation rule?</p>



<a name="177132404"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/177132404" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#177132404">(Oct 02 2019 at 08:54)</a>:</h4>
<p>Do you have to nest it? Can't you just leave it as a sibling and use "enable-when" to only ask the second question if the answer to the first question is "yes"?</p>



<a name="177132847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/177132847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#177132847">(Oct 02 2019 at 09:02)</a>:</h4>
<p>See example: <a href="/user_uploads/10155/KHQ9R9FeJm1ETdRTg0Ach7qF/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> <br>
We use the Group (i.e. no answer) to group sets of questions and enable-when logic to skip questions.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/KHQ9R9FeJm1ETdRTg0Ach7qF/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/10155/KHQ9R9FeJm1ETdRTg0Ach7qF/pasted_image.png"></a></div>



<a name="177134808"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/177134808" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Grundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#177134808">(Oct 02 2019 at 09:34)</a>:</h4>
<p><span class="user-mention" data-user-id="191918">@Sarah Gaunt</span> , isn't "enable-when" applicable in a Questionnaire context, as in when filling in the questionnaire form in the UI, not when posting the response? The outcome of the questionnaire would still be an answer Yes on the parent question? Or have I missed something?</p>



<a name="177135342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/177135342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#177135342">(Oct 02 2019 at 09:44)</a>:</h4>
<p>Maybe I'm not really understanding the question! Yes, the enable-when is on the questionnaire, but the questionnaireResponse follows the same structure as the related Questionnaire. So if you have the enable when on the question that looks back at your fever question to see if it was yes or no, then when you have the Qresponse as yes, you'd just have the "how long' question as a sibling to the fever question.</p>



<a name="177135496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/177135496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#177135496">(Oct 02 2019 at 09:47)</a>:</h4>
<p>Is this what you are looking for: <a href="https://www.hl7.org/fhir/questionnaireresponse-example-bluebook.xml.html" target="_blank" title="https://www.hl7.org/fhir/questionnaireresponse-example-bluebook.xml.html">https://www.hl7.org/fhir/questionnaireresponse-example-bluebook.xml.html</a>  - see the end of that example with the &lt;linkId value="hepBgiven"/&gt;</p>



<a name="177135581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/177135581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sarah Gaunt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#177135581">(Oct 02 2019 at 09:48)</a>:</h4>
<p>NOTE (nothing to do with your question!) Gotta love our example writers - hahaha:</p>
<div class="codehilite"><pre><span></span>&lt;item&gt;
        &lt;linkId value=&quot;abnormalitiesAtBirth&quot;/&gt;
        &lt;text value=&quot;Abnormalities noted at birth&quot;/&gt;
        &lt;answer&gt;
         &lt;valueString value=&quot;Already able to speak Chinese&quot;/&gt;
     &lt;/answer&gt;
 &lt;/item&gt;
</pre></div>



<a name="177144543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/177144543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Berezny <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#177144543">(Oct 02 2019 at 12:26)</a>:</h4>
<p>You can have questions with nested answers in QuestionnaireResponse, take a look at some of the examples here:<br>
<a href="https://questionnaireresponse-parser.herokuapp.com/" target="_blank" title="https://questionnaireresponse-parser.herokuapp.com/">https://questionnaireresponse-parser.herokuapp.com/</a></p>



<a name="177155620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/177155620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#177155620">(Oct 02 2019 at 14:35)</a>:</h4>
<p>If you have an answer, you must nest children within the answer.  (That's because if you have an answer that can repeat, nested questions are answered for each answer.)</p>



<a name="179431761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/179431761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Grundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#179431761">(Oct 30 2019 at 13:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , what if we have a use case where the child question is not related to the parent item <em>answer</em> but instead only related to the <em>item</em>?</p>
<p>We at least support forms like this in our EHR which we now cannot map to FHIR due to this validation. I dont see any reasons why we really shouldnt allow it? Removing the validation would still allow you to nest your individual items to each item.answer?</p>



<a name="179431831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/179431831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#179431831">(Oct 30 2019 at 13:37)</a>:</h4>
<p>We have the ability to be dependent on whether an answer exists at all.  Other than that, I don't understand how a dependency could exist on an item.  Can you explain further?</p>



<a name="179433090"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/179433090" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Grundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#179433090">(Oct 30 2019 at 13:49)</a>:</h4>
<p>Is it correct to see it as you should only have to type of parent/child relationships?<br>
1) Item is a header with no answer, and it contains child items<br>
2) Child item is enabled only for a specific answer for parent item</p>
<p>And a third case is fundamentally incorrect, so it should be prevented with a validation rule:<br>
3) Item has an answer (or you can see it as header has an answer), and it also has child items that have no strong dependency to the parent answer, but they instead have a dependency (of some sort) to the parent question?</p>
<p>To be honest, I cant come up with what an example actual questionnaire would be, but this is supported in our EHR, and I dont really see why it shouldnt be allowed.</p>
<p>What is the benefit of this validation?</p>



<a name="179446802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/179446802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Grundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#179446802">(Oct 30 2019 at 15:54)</a>:</h4>
<p>I spoke briefly to a colleague who has more knowledge about the way our customers (everything from small GP clinics to large university hospitals) set up their questionnaire forms. </p>
<p>She gave an example where they would have a question item like "Coronary" where they could write something a bit more generic, probably in free text. Then they would have more specialized sub-items/child questions  to "Coronary" where those who want to fill in more specialized information could do that. It could be specialists that would always want to be more granular, or it could be that the use case (patient case) dictates whether you would want to use those more specialized items. </p>
<p>For this use case, the child items do not depend on the item.answer, but instead on the item, and it is also relevant for them to record both on item.answer and item.item.answer.</p>
<p>I can see an argument for "shouldnt this be a header with no answer" or "shouldnt this use enableWhen", but I also see no benefit of restricting this use case. I feel this validation should lie in a profile instead of the base resource. Especially with the overall strategy of being very careful with forcing implementers in one direction or the other in the base resources (such as almost never having cardinality 1..x).</p>



<a name="179448887"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/179448887" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#179448887">(Oct 30 2019 at 16:12)</a>:</h4>
<p>Can you be more specific about what you mean by a dependency on a parent "question" as opposed to an answer?<br>
In the example given, what is the dependency?  If the parent question is free text, what determines whether the child questions are enabled or not?  Just whether the parent has an answer?  (Because if so, that's supported)</p>



<a name="179451299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/179451299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Grundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#179451299">(Oct 30 2019 at 16:37)</a>:</h4>
<p>Apologies for being unclear :)</p>
<p>The child question is always enabled. It is independent of the answer of the parent question, and it is also independent of whether there is an answer to the parent at all.</p>



<a name="179458819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/179458819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#179458819">(Oct 30 2019 at 17:56)</a>:</h4>
<p>Why is it treated as a child?</p>



<a name="179458968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/179458968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#179458968">(Oct 30 2019 at 17:57)</a>:</h4>
<p>If the parent item is a group, then the child questions will automatically be displayed.  If the parent is a question, then the child questions are displayed for each answer selected for the parent.  If the parent is a question and you want the children displayed regardless of whether the parent is answered, then just don't make them children</p>



<a name="179459037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/179459037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#179459037">(Oct 30 2019 at 17:58)</a>:</h4>
<p>Alternatively, treat the parent as a group and make the first question a simple "details" question or something like that.</p>



<a name="179461085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Items%20that%20have%20both%20answers%20and%20nested%20items%20in%20Q.Response/near/179461085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Items.20that.20have.20both.20answers.20and.20nested.20items.20in.20Q.2EResponse.html#179461085">(Oct 30 2019 at 18:19)</a>:</h4>
<p>[Deleted] &lt;- had accidentally posted in wrong channel and couldn't find how to delete it, sorry</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
