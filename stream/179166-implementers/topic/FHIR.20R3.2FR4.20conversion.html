---
layout: page
title: "FHIR Chat  · FHIR R3/R4 conversion · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html">FHIR R3/R4 conversion</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188179972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/188179972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> manasvi sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#188179972">(Feb 14 2020 at 05:42)</a>:</h4>
<p>I am unable to transform a JSON file in STU 3  to R4 . I am using FHIR validator but it is unable to load the  hl7.fhir.transforms.v4v3  implementation guide.</p>



<a name="188181868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/188181868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#188181868">(Feb 14 2020 at 06:32)</a>:</h4>
<p>Can you provide the details of the error you're getting?</p>



<a name="188182550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/188182550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> manasvi sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#188182550">(Feb 14 2020 at 06:49)</a>:</h4>
<p>when I run the following cmd:<br>
java -jar org.hl7.fhir.validator.jar [r3-resource] -transform <a href="http://hl7.org/fhir/StructureMap/XX3to4" target="_blank" title="http://hl7.org/fhir/StructureMap/XX3to4">http://hl7.org/fhir/StructureMap/XX3to4</a> -ig hl7.fhir.transforms.v4v3 -output [dest-name]<br>
I am getting the following error:</p>
<ul>
<li>.. load IG from hl7.fhir.transforms.v4v3<br>
Exception in thread "main" org.hl7.fhir.exceptions.FHIRException: Unable to resolve the package 'hl7.fhir.transforms.v4v3'<br>
    at org.hl7.fhir.utilities.cache.PackageCacheManager.loadPackage(PackageCacheManager.java:674)<br>
    at org.hl7.fhir.r5.validation.ValidationEngine.resolvePackage(ValidationEngine.java:631)<br>
    at org.hl7.fhir.r5.validation.ValidationEngine.fetchByPackage(ValidationEngine.java:620)<br>
    at org.hl7.fhir.r5.validation.ValidationEngine.loadIgSource(ValidationEngine.java:459)<br>
    at org.hl7.fhir.r5.validation.ValidationEngine.loadIg(ValidationEngine.java:723)<br>
    at org.hl7.fhir.r5.validation.Validator.main(Validator.java:577)</li>
</ul>



<a name="188613346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/188613346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> manasvi sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#188613346">(Feb 20 2020 at 06:25)</a>:</h4>
<p>I transformed a JSON file from STU 3 for to R4<br>
using the FHIR validator jar</p>
<p>Using the following code to transform :</p>
<p>org.hl7.fhir.r4.model.Patient inR4= converter. convertPatient (p1);<br>
this program is converting the version but the urls like the system in identifier as shown below</p>
<p>“identifier”: [<br>
{<br>
“use”: “usual”,<br>
“type”: {<br>
“coding”: [<br>
{<br>
“system”: “http://hl7.org/fhir/v2/0203”,<br>
“code”: “MR”<br>
}<br>
]<br>
}</p>
<p>are the same so the response is failing the validation for version 4.0.1 of the FHIR validator<br>
I cant seem to find any code regarding the transformation of urls<br>
do we need to change the urls? and how we do it?</p>



<a name="188613897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/188613897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#188613897">(Feb 20 2020 at 06:41)</a>:</h4>
<p>Yes, you'll need to change the URLs.  the v2, v3 and some of the FHIR code systems moved to the <a href="http://terminology.hl7.org" target="_blank" title="http://terminology.hl7.org">terminology.hl7.org</a> root.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, is this translation something we could add into translation code - at least for the v2 and v3 stuff?  (FHIR stuff is messier because not all of it moves.)</p>



<a name="188613948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/188613948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#188613948">(Feb 20 2020 at 06:42)</a>:</h4>
<p>Side note - please don't ask the same question here and on stack overflow simultaneously - pick one and give the community time to respond before asking in the other place...</p>



<a name="188900395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/188900395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> manasvi sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#188900395">(Feb 24 2020 at 05:25)</a>:</h4>
<p>In the list  of all the changes (<a href="https://www.hl7.org/fhir/diff.html" target="_blank" title="https://www.hl7.org/fhir/diff.html">https://www.hl7.org/fhir/diff.html</a>)<br>
under Patient column there is no change in "system" field mentioned but it has been moved to  <a href="http://terminology.hl7.org" target="_blank" title="http://terminology.hl7.org">terminology.hl7.org</a> root <br>
so is there a list of all the changes in the urls?</p>



<a name="188900497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/188900497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#188900497">(Feb 24 2020 at 05:28)</a>:</h4>
<p>I haven't made a list of those.</p>



<a name="188900822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/188900822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> manasvi sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#188900822">(Feb 24 2020 at 05:36)</a>:</h4>
<p>Can you give the estimate of time when this information will be provided? or if you let me know a way to get this information it would be really helpful</p>



<a name="189567953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/189567953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#189567953">(Mar 03 2020 at 06:56)</a>:</h4>
<p>ok see <a href="https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator#UsingtheFHIRValidator-VersionConversion" target="_blank" title="https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator#UsingtheFHIRValidator-VersionConversion">https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator#UsingtheFHIRValidator-VersionConversion</a>. new release tomorrow, that does this tomorrow</p>



<a name="190049236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/190049236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> manasvi sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#190049236">(Mar 09 2020 at 08:45)</a>:</h4>
<p>Thank you.I will look into this <br>
Also how to  convert a Claim type resource? I cant seems to find any conversion code for claim type resource in the validator.</p>



<a name="190054949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/190054949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> manasvi sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#190054949">(Mar 09 2020 at 10:17)</a>:</h4>
<p>when I run the following command :<br>
java -jar org.hl7.fhir.validator.jar /Users/anuragshukla/Desktop/eobject/input/test1.json -version 3.0 -to-version 4.0 -output /Users/anuragshukla/Desktop/eobject/out.json</p>
<p>it gives the following error:<br>
...Failure: No matches found for rule for 'id to id' from <a href="http://hl7.org/fhir/StructureMap/Resource3to4" target="_blank" title="http://hl7.org/fhir/StructureMap/Resource3to4">http://hl7.org/fhir/StructureMap/Resource3to4</a>, from rule 'Resource-id'<br>
org.hl7.fhir.exceptions.FHIRException: No matches found for rule for 'id to id' from <a href="http://hl7.org/fhir/StructureMap/Resource3to4" target="_blank" title="http://hl7.org/fhir/StructureMap/Resource3to4">http://hl7.org/fhir/StructureMap/Resource3to4</a>, from rule 'Resource-id'<br>
    at org.hl7.fhir.r5.utils.StructureMapUtilities.resolveGroupByTypes(StructureMapUtilities.java:1577)<br>
    at org.hl7.fhir.r5.utils.StructureMapUtilities.executeRule(StructureMapUtilities.java:1428)<br>
    at org.hl7.fhir.r5.utils.StructureMapUtilities.executeGroup(StructureMapUtilities.java:1398)<br>
    at org.hl7.fhir.r5.utils.StructureMapUtilities.executeGroup(StructureMapUtilities.java:1394)<br>
    at org.hl7.fhir.r5.utils.StructureMapUtilities.executeGroup(StructureMapUtilities.java:1394)<br>
    at org.hl7.fhir.r5.utils.StructureMapUtilities.transform(StructureMapUtilities.java:1360)<br>
    at org.hl7.fhir.validation.ValidationEngine.transformVersion(ValidationEngine.java:1729)<br>
    at org.hl7.fhir.validation.Validator.main(Validator.java:612)</p>



<a name="190111505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/190111505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#190111505">(Mar 09 2020 at 20:02)</a>:</h4>
<p>what is in test1.json?</p>



<a name="190249798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20R3/R4%20conversion/near/190249798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> manasvi sharma <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20R3.2FR4.20conversion.html#190249798">(Mar 11 2020 at 04:25)</a>:</h4>
<p>it is a JSON file of Patient Resource type in STU 3<br>
an example of Patient Resource  given on FHIR website</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
