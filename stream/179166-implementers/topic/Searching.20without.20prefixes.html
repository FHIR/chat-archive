---
layout: page
title: "FHIR Chat  · Searching without prefixes · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20without.20prefixes.html">Searching without prefixes</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="248883130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20without%20prefixes/near/248883130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20without.20prefixes.html#248883130">(Aug 09 2021 at 17:49)</a>:</h4>
<p>Does the base FHIR specification require support for search without prefixes? This issue came up in the context of US Core and whether a server can require that prefixes be used for the date searches it contains (<a href="https://jira.hl7.org/browse/FHIR-33156">https://jira.hl7.org/browse/FHIR-33156</a>).</p>
<p>The section on Prefixes (<a href="https://www.hl7.org/fhir/search.html#prefix">https://www.hl7.org/fhir/search.html#prefix</a>) says:</p>
<blockquote>
<p>For the ordered parameter types of number, date, and quantity, a prefix to the parameter value may be used to control the nature of the matching.</p>
</blockquote>
<p>To me, "may be used" means that prefixes are optional for the above types.</p>
<p>The section on quantity searching (<a href="https://www.hl7.org/fhir/search.html#quantity">https://www.hl7.org/fhir/search.html#quantity</a>) explicitly states, "The prefix is optional," but the descriptions for number and date searching do not. My assumption is that the fact that similar language is not present in the sections on number and date searching is not intended to suggest that the prefixes are not optional for these types.</p>
<p>If prefixes are optional, does that mean a server is required to support searching without a prefix?</p>



<a name="248886089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20without%20prefixes/near/248886089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20without.20prefixes.html#248886089">(Aug 09 2021 at 18:14)</a>:</h4>
<p>(deleted)</p>



<a name="248889861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20without%20prefixes/near/248889861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20without.20prefixes.html#248889861">(Aug 09 2021 at 18:42)</a>:</h4>
<p>In the past, we had a couple of trackers and discussions on how to define the modifiers in the base SearchParameter resource vs an IG.  But looking back I think it is still unclear and we should say something more explicit like "these modifiers are all optional and you need to state which ones you support in a capability statement".</p>



<a name="248890459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20without%20prefixes/near/248890459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20without.20prefixes.html#248890459">(Aug 09 2021 at 18:47)</a>:</h4>
<p>FYI:  here is the SP for date</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"resourceType"</span><span class="p">:</span> <span class="s2">"SearchParameter"</span><span class="p">,</span>
  <span class="nt">"id"</span><span class="p">:</span> <span class="s2">"clinical-date"</span><span class="p">,</span>
  <span class="nt">"extension"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status"</span><span class="p">,</span>
      <span class="nt">"valueCode"</span><span class="p">:</span> <span class="s2">"trial-use"</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">"url"</span><span class="p">:</span> <span class="s2">"http://hl7.org/fhir/SearchParameter/clinical-date"</span><span class="p">,</span>
  <span class="nt">"version"</span><span class="p">:</span> <span class="s2">"4.0.1"</span><span class="p">,</span>
  <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"date"</span><span class="p">,</span>
  <span class="nt">"status"</span><span class="p">:</span> <span class="s2">"draft"</span><span class="p">,</span>
  <span class="nt">"experimental"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">"date"</span><span class="p">:</span> <span class="s2">"2019-11-01T09:29:23+11:00"</span><span class="p">,</span>
  <span class="nt">"publisher"</span><span class="p">:</span> <span class="s2">"Health Level Seven International (Patient Care)"</span><span class="p">,</span>
  <span class="nt">"contact"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">"telecom"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"url"</span><span class="p">,</span>
          <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"http://hl7.org/fhir"</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">"telecom"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">"system"</span><span class="p">:</span> <span class="s2">"url"</span><span class="p">,</span>
          <span class="nt">"value"</span><span class="p">:</span> <span class="s2">"http://www.hl7.org/Special/committees/patientcare/index.cfm"</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="nt">"description"</span><span class="p">:</span> <span class="s2">"Multiple Resources: \r\n\r\n* [AllergyIntolerance](allergyintolerance.html): Date first version of the resource instance was recorded\r\n* [CarePlan](careplan.html): Time period plan covers\r\n* [CareTeam](careteam.html): Time period team covers\r\n* [ClinicalImpression](clinicalimpression.html): When the assessment was documented\r\n* [Composition](composition.html): Composition editing time\r\n* [Consent](consent.html): When this Consent was created or indexed\r\n* [DiagnosticReport](diagnosticreport.html): The clinically relevant time of the report\r\n* [Encounter](encounter.html): A date within the period the Encounter lasted\r\n* [EpisodeOfCare](episodeofcare.html): The provided date search value falls within the episode of care's period\r\n* [FamilyMemberHistory](familymemberhistory.html): When history was recorded or last updated\r\n* [Flag](flag.html): Time period when flag is active\r\n* [Immunization](immunization.html): Vaccination  (non)-Administration Date\r\n* [List](list.html): When the list was prepared\r\n* [Observation](observation.html): Obtained date/time. If the obtained element is a period, a date that falls in the period\r\n* [Procedure](procedure.html): When the procedure was performed\r\n* [RiskAssessment](riskassessment.html): When was assessment made?\r\n* [SupplyRequest](supplyrequest.html): When the request was made\r\n"</span><span class="p">,</span>
  <span class="nt">"code"</span><span class="p">:</span> <span class="s2">"date"</span><span class="p">,</span>
  <span class="nt">"base"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"AllergyIntolerance"</span><span class="p">,</span>
    <span class="s2">"CarePlan"</span><span class="p">,</span>
    <span class="s2">"CareTeam"</span><span class="p">,</span>
    <span class="s2">"ClinicalImpression"</span><span class="p">,</span>
    <span class="s2">"Composition"</span><span class="p">,</span>
    <span class="s2">"Consent"</span><span class="p">,</span>
    <span class="s2">"DiagnosticReport"</span><span class="p">,</span>
    <span class="s2">"Encounter"</span><span class="p">,</span>
    <span class="s2">"EpisodeOfCare"</span><span class="p">,</span>
    <span class="s2">"FamilyMemberHistory"</span><span class="p">,</span>
    <span class="s2">"Flag"</span><span class="p">,</span>
    <span class="s2">"Immunization"</span><span class="p">,</span>
    <span class="s2">"List"</span><span class="p">,</span>
    <span class="s2">"Observation"</span><span class="p">,</span>
    <span class="s2">"Procedure"</span><span class="p">,</span>
    <span class="s2">"RiskAssessment"</span><span class="p">,</span>
    <span class="s2">"SupplyRequest"</span>
  <span class="p">],</span>
  <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"date"</span><span class="p">,</span>
  <span class="nt">"expression"</span><span class="p">:</span> <span class="s2">"AllergyIntolerance.recordedDate | CarePlan.period | CareTeam.period | ClinicalImpression.date | Composition.date | Consent.dateTime | DiagnosticReport.effective | Encounter.period | EpisodeOfCare.period | FamilyMemberHistory.date | Flag.period | Immunization.occurrence | List.date | Observation.effective | Procedure.performed | (RiskAssessment.occurrence as dateTime) | SupplyRequest.authoredOn"</span><span class="p">,</span>
  <span class="nt">"xpath"</span><span class="p">:</span> <span class="s2">"f:AllergyIntolerance/f:recordedDate | f:CarePlan/f:period | f:CareTeam/f:period | f:ClinicalImpression/f:date | f:Composition/f:date | f:Consent/f:dateTime | f:DiagnosticReport/f:effectiveDateTime | f:DiagnosticReport/f:effectivePeriod | f:Encounter/f:period | f:EpisodeOfCare/f:period | f:FamilyMemberHistory/f:date | f:Flag/f:period | f:Immunization/f:occurrenceDateTime | f:Immunization/f:occurrenceString | f:List/f:date | f:Observation/f:effectiveDateTime | f:Observation/f:effectivePeriod | f:Observation/f:effectiveTiming | f:Observation/f:effectiveInstant | f:Procedure/f:performedDateTime | f:Procedure/f:performedPeriod | f:Procedure/f:performedString | f:Procedure/f:performedAge | f:Procedure/f:performedRange | f:RiskAssessment/f:occurrenceDateTime | f:SupplyRequest/f:authoredOn"</span><span class="p">,</span>
  <span class="nt">"xpathUsage"</span><span class="p">:</span> <span class="s2">"normal"</span><span class="p">,</span>
  <span class="nt">"comparator"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"eq"</span><span class="p">,</span>
    <span class="s2">"ne"</span><span class="p">,</span>
    <span class="s2">"gt"</span><span class="p">,</span>
    <span class="s2">"ge"</span><span class="p">,</span>
    <span class="s2">"lt"</span><span class="p">,</span>
    <span class="s2">"le"</span><span class="p">,</span>
    <span class="s2">"sa"</span><span class="p">,</span>
    <span class="s2">"eb"</span><span class="p">,</span>
    <span class="s2">"ap"</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>



<a name="248891790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20without%20prefixes/near/248891790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Beatty <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20without.20prefixes.html#248891790">(Aug 09 2021 at 18:58)</a>:</h4>
<p>from the section on Prefixes, it states: "If no prefix is present, the prefix eq is assumed. "</p>



<a name="248892306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20without%20prefixes/near/248892306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stephen MacVicar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20without.20prefixes.html#248892306">(Aug 09 2021 at 19:02)</a>:</h4>
<blockquote>
<p>from the section on Prefixes, it states: "If no prefix is present, the prefix eq is assumed. "</p>
</blockquote>
<p>Right, and that gets confusing when you have <a href="https://www.hl7.org/fhir/us/core/SearchParameter-us-core-procedure-date.html">a search parameter which says that <code>eq</code> doesn't have to be supported</a>, which is what led to this issue being raised in US Core.</p>
<p>Can a server require that a prefix be supplied with that parameter because it doesn't have to support <code>eq</code>? Or does it need to support the <code>eq</code> functionality when no prefix is supplied, even if it doesn't support you explicitly sending the <code>eq</code> prefix?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
