---
layout: page
title: "FHIR Chat  · Referencing containing resource · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20containing.20resource.html">Referencing containing resource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="162661378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20containing%20resource/near/162661378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Haskins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20containing.20resource.html#162661378">(Apr 05 2019 at 21:09)</a>:</h4>
<p>Hi,<br>
I am trying to reference the containing resource, however I continue to receive errors when I reference from inside of the contained resource. </p>
<p>I will receive </p>
<p>"Unable to resolve resource '#person1'", </p>
<p>"If the resource is contained in another resource, it SHALL be referred to from elsewhere in the resource or SHALL refer to the containing resource ( (unmatched: provenance1)) [contained.where((('#'+id in (%resource.descendants().reference | %resource.descendants().as(canonical) | %resource.descendants().as(uri) | %resource.descendants().as(url))) or descendants().where(reference = '#').exists() or descendants().where(as(canonical) = '#').exists() or descendants().where(as(canonical) = '#').exists()).not()).trace('unmatched', id).empty()]" </p>
<p>and "SHALL have a contained resource if a local reference is provided ( (url: person1; ids: provenance1)) [reference.startsWith('#').not() or (reference.substring(1).trace('url') in %resource.contained.id.trace('ids'))]".</p>
<p>Here is what I am trying to send: </p>
<p>{<br>
  "id": "person1",<br>
  "name": [{<br>
    "given": ["Test"],<br>
    "family": "User"<br>
  }],<br>
  "contained": [ {<br>
    "id": "provenance1",<br>
    "agent": [{<br>
      "who": {<br>
        "display": "Tester"<br>
      }<br>
    }],<br>
    "target": [{<br>
      "reference": "#person1"<br>
    }],<br>
    "recorded": "2015-06-27T08:39:24+10:00",<br>
    "resourceType": "Provenance"<br>
  }],<br>
  "resourceType": "Person"<br>
}</p>
<p>I believe I am doing the reference correctly with the #. Am I doing something else wrong? Thanks.</p>



<a name="163115783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20containing%20resource/near/163115783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20containing.20resource.html#163115783">(Apr 11 2019 at 16:32)</a>:</h4>
<p>Try to put Provenance as the outer resource and Person as contained.</p>



<a name="163134198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20containing%20resource/near/163134198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20containing.20resource.html#163134198">(Apr 11 2019 at 20:27)</a>:</h4>
<p>To point from a contained resource to the container, the reference is just "#".  (See towards the end of <a href="http://hl7.org/fhir/references.html#contained" target="_blank" title="http://hl7.org/fhir/references.html#contained">http://hl7.org/fhir/references.html#contained</a>)</p>



<a name="163136015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20containing%20resource/near/163136015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Haskins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20containing.20resource.html#163136015">(Apr 11 2019 at 20:50)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> I must have missed that the other day when reading on referencing contained resources.</p>



<a name="163136697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Referencing%20containing%20resource/near/163136697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Referencing.20containing.20resource.html#163136697">(Apr 11 2019 at 20:59)</a>:</h4>
<p>No worries.  There's more than a few things to read :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
