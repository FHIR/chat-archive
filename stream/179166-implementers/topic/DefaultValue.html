---
layout: page
title: "FHIR Chat  · DefaultValue · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html">DefaultValue</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="233927577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/233927577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Radha Rajendran <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#233927577">(Apr 10 2021 at 05:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Okay . How and where to use defaultValue ?</p>



<a name="233927941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/233927941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#233927941">(Apr 10 2021 at 05:29)</a>:</h4>
<p>As it says in the comments in ElementDefinition, defaultValue is only allowed to be used in logical models.  It'll never be used in resource or data type definitions and it's prohibited for use in profiles on either of those.</p>



<a name="233928203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/233928203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Radha Rajendran <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#233928203">(Apr 10 2021 at 05:34)</a>:</h4>
<p>okay thank you</p>



<a name="233928352"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/233928352" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Radha Rajendran <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#233928352">(Apr 10 2021 at 05:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  One more question , How to define elements in structure definition  for complex data types such as CodeableConcept, BackboneElement   ?</p>



<a name="233929088"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/233929088" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#233929088">(Apr 10 2021 at 05:51)</a>:</h4>
<p>First, read the section on validation in the core spec? <a href="http://build.fhir.org/validation.html">http://build.fhir.org/validation.html</a></p>



<a name="233931773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/233931773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Radha Rajendran <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#233931773">(Apr 10 2021 at 06:43)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="259418618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/259418618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Rouhana <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#259418618">(Oct 28 2021 at 16:52)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> - what's the rationale behind prohibiting default values in profiles? I have a use case where it would be helpful for the sending system to not have to provide <code>identifier.system</code> for every resource. In my mind, a profile that defaults that element to a previously agreed upon value (but would still allow it to be overwritten) would be a helpful implementation tool.</p>



<a name="259419957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/259419957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#259419957">(Oct 28 2021 at 17:00)</a>:</h4>
<p>Instances need to be safe for systems to parse wherever they come from - so we can't allow different systems to assert different defaults (because that would mean we'd need to interpret instances differently based on where they came from).  Also, default values add complexity to processing because you need to treat an element with one value (null) as if it actually had a distinct value.</p>
<p>We <em>do</em> allow defaults for logical models - because those aren't about exchange.  However, for FHIR resources and data types, the only thing allowed is "meaning if missing" which is globally declared across all FHIR implementations.  E.g. "If deceases[x] is absent, you should presume the patient is alive".  That's obviously not a guarantee, but is a safe reasonable inference.  For anything else, you must explicitly populate the value.</p>



<a name="259426045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/259426045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Rouhana <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#259426045">(Oct 28 2021 at 17:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> - thanks for the context. I suppose I was thinking of "default values" as they're implemented in many relational databases, where if you insert a record and leave a field null, but that field has a default value defined, the field will actually be populated with the default on insert. Is there any standard/recommended approach for achieving this in a FHIR server implementation?</p>



<a name="259426922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/259426922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#259426922">(Oct 28 2021 at 17:51)</a>:</h4>
<p>Can you give a specific example you're wanting to set?  If it's setting a boolean to false, and the meaningIfMissing is "if not specified, assume false", then that's relatively safe.  However, for most other defaults, it's not safe and shouldn't be done when consuming FHIR data.  I.e. you can't say "if you don't send this element, we'll presume you mean X - because that saves bandwidth".  FHIR requires that X always be transmitted.</p>



<a name="259430019"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/259430019" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Rouhana <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#259430019">(Oct 28 2021 at 18:12)</a>:</h4>
<p>I'm thinking primarily of the namespace/code system context. Take the following example:</p>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">resourceType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Encounter</span>
<span class="nt">meta</span><span class="p">:</span>
  <span class="nt">source</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://example.org/source-1</span>
<span class="nt">identifier</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">12345</span>
<span class="nt">status</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">finished</span>
<span class="nt">class</span><span class="p">:</span>
  <span class="nt">code</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AMB</span>
<span class="nt">type</span><span class="p">:</span>
  <span class="nt">coding</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">code</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">subject</span><span class="p">:</span>
  <span class="nt">identifier</span><span class="p">:</span>
    <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">67890</span>
</code></pre></div>
<p>It would be helpful to say: "Because you've provided a <code>meta.source</code> value, I can look that up somewhere and contextualize the identifiers and codes that you've sent." Upon POSTing to the server, the resource would look like:</p>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">resourceType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Encounter</span>
<span class="nt">meta</span><span class="p">:</span>
  <span class="nt">source</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://example.org/source-1</span>
<span class="nt">identifier</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">12345</span>
  <span class="nt">system</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://example.org/namingsystem/source-1-encounter-id</span>
<span class="nt">status</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">finished</span>
<span class="nt">class</span><span class="p">:</span>
  <span class="nt">code</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AMB</span>
  <span class="nt">system</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://terminology.hl7.org/CodeSystem/v3-ActCode</span>
<span class="nt">type</span><span class="p">:</span>
  <span class="nt">coding</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">code</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">system</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://example.org/codesystem/source-1-encounter-type</span>
<span class="nt">subject</span><span class="p">:</span>
  <span class="nt">identifier</span><span class="p">:</span>
    <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">67890</span>
    <span class="nt">system</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://example.org/namingsystem/source-1-patient-id</span>
</code></pre></div>
<p>I realize that I could simply do some preprocessing upstream of the server to the same effect, but it's beneficial to (1) centralize that configuration and (2) have a canonical standard for documenting it.</p>



<a name="259434055"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/259434055" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#259434055">(Oct 28 2021 at 18:45)</a>:</h4>
<p>Nothing prevents your server from getting the input described above, and storing it as the output shown. The configuration would be only on the server.</p>



<a name="259437994"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/259437994" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matt Rouhana <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#259437994">(Oct 28 2021 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="192685">@Vassil Peytchev</span> understood, I'm just wondering if there's a best practice for doing the above. It would be useful to expose that configuration as a FHIR Resource - perhaps a custom one?</p>



<a name="259438371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DefaultValue/near/259438371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DefaultValue.html#259438371">(Oct 28 2021 at 19:16)</a>:</h4>
<p>As a rule, it's not a good idea to encourage the sender to transmit the data that way - as it requires the receiver to have special information to convert the record into "useable" form.  If it's a situation where you've got a device with limited bandwidth that always talks to a 'controller' system that inserts the additional data, then that's probably safe.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
