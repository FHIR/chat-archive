---
layout: page
title: "FHIR Chat  · Timing Validation error on periodUnit · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20Validation.20error.20on.20periodUnit.html">Timing Validation error on periodUnit</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="190966331"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20Validation%20error%20on%20periodUnit/near/190966331" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alessio Graziani <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20Validation.20error.20on.20periodUnit.html#190966331">(Mar 18 2020 at 11:18)</a>:</h4>
<p>Hi all,<br>
I'm getting the following error while validating (with the HAPI FHIR validation framework) a MedicationStatement: <em>The value provided ('d') is not in the value set <a href="http://hl7.org/fhir/ValueSet/units-of-time|4.0.0" target="_blank" title="http://hl7.org/fhir/ValueSet/units-of-time|4.0.0">http://hl7.org/fhir/ValueSet/units-of-time|4.0.0</a> (<a href="http://hl7.org/fhir/ValueSet/units-of-time" target="_blank" title="http://hl7.org/fhir/ValueSet/units-of-time">http://hl7.org/fhir/ValueSet/units-of-time</a>, and a code is required from this value set) (error message = Unknown code[d] in system[(none)])</em></p>
<p>This is the code that I use for creating the instance of Timing:</p>
<div class="codehilite"><pre><span></span>Timing timing = new Timing();
        timing.setRepeat((new Timing.TimingRepeatComponent())
                .setFrequency(2)
                .setPeriod(1)
                .setPeriodUnit(Timing.UnitsOfTime.D)
                .addTimeOfDay(&quot;08:00:00&quot;)
                .addTimeOfDay(&quot;20:00:00&quot;));
</pre></div>


<p>and this is the corresponding generated JSON:</p>
<div class="codehilite"><pre><span></span>            &quot;timing&quot;: {
              &quot;repeat&quot;: {
                &quot;frequency&quot;: 2,
                &quot;period&quot;: 1,
                &quot;periodUnit&quot;: &quot;d&quot;,
                &quot;timeOfDay&quot;: [
                  &quot;08:00:00&quot;,
                  &quot;20:00:00&quot;
                ]
              }
            }
</pre></div>


<p>The error is quite clear to understand, but I do not understand how to provide also the system ("<a href="http://unitsofmeasure.org" target="_blank" title="http://unitsofmeasure.org">http://unitsofmeasure.org</a>") to periodUnit, because the Timing java class only allows using only Timing.UnitsOfTime in method setPeriodUnit(). </p>
<p>The version I'm using is R4 version 4.1.0</p>
<p>Thanks<br>
Alessio Graziani</p>



<a name="190979444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20Validation%20error%20on%20periodUnit/near/190979444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20Validation.20error.20on.20periodUnit.html#190979444">(Mar 18 2020 at 13:31)</a>:</h4>
<p>I'd say the validation has it wrong - <code>periodUnit</code> is a code, so does not have (nor need) a system, and <code>d</code> is a valid code</p>



<a name="190983787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20Validation%20error%20on%20periodUnit/near/190983787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20Validation.20error.20on.20periodUnit.html#190983787">(Mar 18 2020 at 14:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="191062585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20Validation%20error%20on%20periodUnit/near/191062585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20Validation.20error.20on.20periodUnit.html#191062585">(Mar 19 2020 at 01:12)</a>:</h4>
<p>looks like a HAPI issue around hosting the validator to me .</p>



<a name="191130330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20Validation%20error%20on%20periodUnit/near/191130330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alessio Graziani <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20Validation.20error.20on.20periodUnit.html#191130330">(Mar 19 2020 at 15:33)</a>:</h4>
<p>What else should I do to get help for this potential issue? I also added an item on the Google HAPI groups...</p>



<a name="192168446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Timing%20Validation%20error%20on%20periodUnit/near/192168446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Timing.20Validation.20error.20on.20periodUnit.html#192168446">(Mar 29 2020 at 10:59)</a>:</h4>
<p>HAPI is doing a lot of work to address issues like this in release5 of HAPI - so try in the R5 candidate</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
