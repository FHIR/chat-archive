---
layout: page
title: "FHIR Chat  · FHIR&#x27;s JSON canonicalization scheme is normative? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html">FHIR&#x27;s JSON canonicalization scheme is normative?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="255267516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/255267516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#255267516">(Sep 28 2021 at 17:54)</a>:</h4>
<p><a href="http://build.fhir.org/json.html#canonical">http://build.fhir.org/json.html#canonical</a> is normative. Has anyone implemented this in a real-world system? (Or any system?)</p>



<a name="255347131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/255347131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#255347131">(Sep 29 2021 at 06:08)</a>:</h4>
<p>I have and played with it for signatures, but not in real world use case</p>



<a name="255347157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/255347157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#255347157">(Sep 29 2021 at 06:09)</a>:</h4>
<p><span class="user-mention" data-user-id="196248">@Evgenii Kogan</span> did you use this?</p>



<a name="255537036"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/255537036" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evgenii Kogan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#255537036">(Sep 30 2021 at 08:38)</a>:</h4>
<p>Yes, we do. We require laboratories to send JSONmin for signed lab results (bundle). Not every result is now signed, but some of them, starting at 2020.</p>



<a name="255568694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/255568694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#255568694">(Sep 30 2021 at 12:58)</a>:</h4>
<p>what kind of signature do you use?</p>



<a name="255590253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/255590253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evgenii Kogan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#255590253">(Sep 30 2021 at 15:06)</a>:</h4>
<p>We use qualified advanced digital signature.</p>



<a name="255593666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/255593666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evgenii Kogan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#255593666">(Sep 30 2021 at 15:27)</a>:</h4>
<p>Ups. API requires to send both JSON and PDF, and allows to sign or leave unsigned any of them. I am now unsure, how many JSONs are really signed, if any.  I will come back with the answer.</p>



<a name="255610869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/255610869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#255610869">(Sep 30 2021 at 17:09)</a>:</h4>
<p>Is FHIR canonization the same as <a href="https://www.rfc-editor.org/rfc/rfc8785">https://www.rfc-editor.org/rfc/rfc8785</a>?</p>



<a name="255618505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/255618505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#255618505">(Sep 30 2021 at 17:55)</a>:</h4>
<p><span class="user-mention" data-user-id="196248">@Evgenii Kogan</span> have you documented  your signature requirements for json and assuming is in English - can you share your documentation?</p>



<a name="255620588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/255620588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#255620588">(Sep 30 2021 at 18:04)</a>:</h4>
<p>I guess I would ask if you follow <a href="https://www.rfc-editor.org/rfc/rfc8785">https://www.rfc-editor.org/rfc/rfc8785</a> does that mean you have got <a href="http://build.fhir.org/json.html#canonical">http://build.fhir.org/json.html#canonical</a>  covered? expecially for the the text/narrative  xhtml parts?</p>



<a name="255662968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/255662968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#255662968">(Sep 30 2021 at 23:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> it is not. Especially around handling numbers, I think.</p>



<a name="259156446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/259156446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evgenii Kogan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#259156446">(Oct 26 2021 at 20:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> Sorry for dropping out. The doc is in Russian. The only signature technical requirement in it is the following: <br>
The Lab Result should be sent with the qualified advanced digital signature of the Laboratory Organisation. Signature should use R34.10-2012 algorithms (it is a local standard), have Cryptographic Message Syntax, and be sent in the Base64binary format in the HTTP header.<br>
Example:    .   signature: MIIThvcNAQcCoIITZjCCE2ICAQExDjAMBggqhQMHAQECAgUAMAsGCSqGSIb3DQEHAa...  <br>
In order to make the signature validation possible JSON should be minimised (JSONmin). It should not contain tab, space and other special symbols. Example:     .   {"resourceType":"Bundle","type":"transaction","meta":{"profile":["Struct...</p>



<a name="259156952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/259156952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evgenii Kogan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#259156952">(Oct 26 2021 at 20:32)</a>:</h4>
<p>...canonical - It is not covered. Developers say there was no need for that, because the whole JSON string is signed, not separate fields.</p>



<a name="259157444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/259157444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evgenii Kogan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#259157444">(Oct 26 2021 at 20:37)</a>:</h4>
<p>Additionally, I asked about real signatures - yes, some Labs send signed JSON strings.</p>



<a name="259158954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/259158954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#259158954">(Oct 26 2021 at 20:51)</a>:</h4>
<p>thanks for the summary, what was the rationale for putting the signature in the header and not using the signature element or Provenance?</p>



<a name="259307449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%27s%20JSON%20canonicalization%20scheme%20is%20normative%3F/near/259307449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR&#x27;s.20JSON.20canonicalization.20scheme.20is.20normative.3F.html#259307449">(Oct 27 2021 at 21:14)</a>:</h4>
<p>Signature element of what, in a single lab result? Provenance stored where? An approach using those here  isn't obvious, and signing a well defined serialized string... is pretty straightforward.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
