---
layout: page
title: "FHIR Chat  · Composition with image and a contained Binary · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20with.20image.20and.20a.20contained.20Binary.html">Composition with image and a contained Binary</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="224922476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20with%20image%20and%20a%20contained%20Binary/near/224922476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20with.20image.20and.20a.20contained.20Binary.html#224922476">(Feb 02 2021 at 19:23)</a>:</h4>
<p>Composition can have an image that uses data from a Binary. </p>
<div class="codehilite"><pre><span></span><code>&lt;td&gt;
   &lt;img src=&quot;#imageResource&quot; alt=&quot;an image&quot;/&gt;
&lt;/td&gt;
</code></pre></div>
<p>Does this have to be a contained resource, and not just another resource in the Bundle? The latter is not mentioned as a possibility and I can't see how it would work.</p>
<p><a href="http://build.fhir.org/narrative.html#id">http://build.fhir.org/narrative.html#id</a></p>
<p>However a contained resource has to be referenced from the containing, but servers don't seem to be able to detect the image to resource link, and reject it because of constraint dom-3.</p>



<a name="224923179"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20with%20image%20and%20a%20contained%20Binary/near/224923179" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20with.20image.20and.20a.20contained.20Binary.html#224923179">(Feb 02 2021 at 19:28)</a>:</h4>
<p><span class="user-mention" data-user-id="248735">@Lisa Nelson</span></p>



<a name="224926400"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20with%20image%20and%20a%20contained%20Binary/near/224926400" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20with.20image.20and.20a.20contained.20Binary.html#224926400">(Feb 02 2021 at 19:52)</a>:</h4>
<p><span class="user-mention" data-user-id="192205">@Lisa Nelson</span> (Lisa R Nelson) :-)</p>



<a name="225004070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20with%20image%20and%20a%20contained%20Binary/near/225004070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20with.20image.20and.20a.20contained.20Binary.html#225004070">(Feb 03 2021 at 11:43)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> the firely server cannot recognise that a contained Binary resource is referenced by its container, either by noticing the "src" link (as above), or by this trick of using a dummy extension</p>
<div class="codehilite"><pre><span></span><code>&lt;contained&gt;
    &lt;Binary&gt;
            &lt;id value=&quot;imageResource&quot;/&gt;
            &lt;contentType value=&quot;image/png&quot;/&gt;
            &lt;data value=&quot;iVBORw0-snip-=&quot;/&gt;
    &lt;/Binary&gt;
&lt;/contained&gt;
&lt;!-- If there is a contained resource that is not referenced by its container, servers may reject this.
Servers may not recognise that it is referenced by id, from the text.
This extension ensures there is a reference to the contained Binary that servers can see --&gt;
&lt;extension url=&quot;http://example/fhir/extension/dummyValidationReference&quot;&gt;
        &lt;valueReference&gt;
              &lt;reference value=&quot;#imageResource&quot;/&gt;
        &lt;/valueReference&gt;
&lt;/extension&gt;
</code></pre></div>



<a name="225019707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20with%20image%20and%20a%20contained%20Binary/near/225019707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20with.20image.20and.20a.20contained.20Binary.html#225019707">(Feb 03 2021 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191651">@Rik Smithies</span> Thanks for the pointer, let me ask a real Firely Server expert!</p>



<a name="225032527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20with%20image%20and%20a%20contained%20Binary/near/225032527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20with.20image.20and.20a.20contained.20Binary.html#225032527">(Feb 03 2021 at 15:37)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191651">@Rik Smithies</span> : Could you send me the full resource and the http request you're issuing?<br>
Plus the version of Firely Server you're using (or is it the public one, hence currently version 4.0.0)?</p>



<a name="225034766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Composition%20with%20image%20and%20a%20contained%20Binary/near/225034766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Composition.20with.20image.20and.20a.20contained.20Binary.html#225034766">(Feb 03 2021 at 15:52)</a>:</h4>
<p>sent, thanks</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
