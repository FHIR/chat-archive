---
layout: page
title: "FHIR Chat  · RequestGroup action offsets not relative · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html">RequestGroup action offsets not relative</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="267127302"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267127302" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267127302">(Jan 06 2022 at 23:03)</a>:</h4>
<p>What is the best way to capture offsets of related actions in RequestGroups that aren't relative?</p>
<p>For example, I would like to say, "after completing action A, do action B after 8am the next day".</p>



<a name="267128773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267128773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267128773">(Jan 06 2022 at 23:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>



<a name="267628341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267628341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267628341">(Jan 11 2022 at 18:53)</a>:</h4>
<p>The solution I am considering is to create new units to use in offsetRange which represents what I need. For example, "1 &lt;need unit name&gt;" would represent the next 8am, "2 &lt;need unit name&gt;" would represent the next next 8am, and so on.</p>



<a name="267646499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267646499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267646499">(Jan 11 2022 at 21:19)</a>:</h4>
<p>I wouldn't encourage that.  It's not really what units are for.</p>



<a name="267649311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267649311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267649311">(Jan 11 2022 at 21:41)</a>:</h4>
<p>Because the unit system I am thinking of defining isn't in UCUM?</p>



<a name="267651455"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267651455" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267651455">(Jan 11 2022 at 21:56)</a>:</h4>
<p>A unit is a type of measurement.  "next 8am" isn't a type of measurement.</p>



<a name="267655515"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267655515" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267655515">(Jan 11 2022 at 22:26)</a>:</h4>
<p>Sorry for my confusion on this topic. Is "age" considered a unit in FHIR? The "next 8am" "unit" I am contemplating is modelled based on age. Perhaps this is where my mistake is.</p>



<a name="267655695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267655695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267655695">(Jan 11 2022 at 22:28)</a>:</h4>
<p>No, age isn't a unit. days, weeks, or years, which can be used to measure age, are though.</p>



<a name="267656585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267656585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267656585">(Jan 11 2022 at 22:36)</a>:</h4>
<p>One of the criteria for being a unit is "can you do math with it?"  E.g. 2 days + 3 days = 5 days.  3 days * 2 = 6 days.  "1 next 8am" * 2 doesn't really make sense...</p>



<a name="267656705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267656705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267656705">(Jan 11 2022 at 22:37)</a>:</h4>
<p>Is that true? Temperature is a unit and you can't do math with it (at least not unrestricted math or any math). For example, -500 * 1 C doesn't make sense as -500 C doesn't exist.</p>



<a name="267656875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267656875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267656875">(Jan 11 2022 at 22:39)</a>:</h4>
<p>No but if the temp is 30 C and it goes up by 5 C then 30+5=35 C.</p>



<a name="267656911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267656911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267656911">(Jan 11 2022 at 22:39)</a>:</h4>
<p>And temp isn't a unit -- temp is measured in units; just like age.</p>



<a name="267656923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267656923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267656923">(Jan 11 2022 at 22:39)</a>:</h4>
<p>I understand the point. I think the problem with what I want to define can't be defined in an "absolute" sense. 1 next 8am doesn't make sense by itself. It needs a dateTime or make sense.</p>



<a name="267656989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267656989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267656989">(Jan 11 2022 at 22:40)</a>:</h4>
<p>And that's fair about temperature.</p>



<a name="267657165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267657165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267657165">(Jan 11 2022 at 22:42)</a>:</h4>
<p>I don't know the FHIR scheduling well, but it seems to me what you are trying to say is the "next morning" after an offset measured in days.</p>



<a name="267657182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267657182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267657182">(Jan 11 2022 at 22:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> yeah, that's exactly correct.</p>



<a name="267679827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267679827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267679827">(Jan 12 2022 at 03:53)</a>:</h4>
<p>I think you're going to need an extension.  However, would still like to hear from <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>.  (He may not have bandwidth until post-connectathon though.)</p>



<a name="267720815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267720815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267720815">(Jan 12 2022 at 13:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Yeah, after everyone's feedback, this is where my mind was going too. I'll proceed using an extension. If Bryn (or anyone else) has any further thoughts on this topic, it would of course be welcome and much appreciated.</p>



<a name="267962876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/RequestGroup%20action%20offsets%20not%20relative/near/267962876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/RequestGroup.20action.20offsets.20not.20relative.html#267962876">(Jan 14 2022 at 03:15)</a>:</h4>
<p>I agree, an extension is necessary. You could potentially do something dynamic with an expression extension (something like this admittedly contrived example):</p>
<div class="codehilite" data-code-language="XML"><pre><span></span><code><span class="nt">&lt;action&gt;</span>
  <span class="nt">&lt;action</span> <span class="na">id=</span><span class="s">"a"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title</span> <span class="na">value=</span><span class="s">"Do A"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/action&gt;</span>
  <span class="nt">&lt;action</span> <span class="na">id=</span><span class="s">"b"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title</span> <span class="na">value=</span><span class="s">"Do B after 8AM the next day"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;relatedAction&gt;</span>
      <span class="nt">&lt;actionId</span> <span class="na">value=</span><span class="s">"a"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;relationship</span> <span class="na">value=</span><span class="s">"after-end"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;offsetRange&gt;</span>
        <span class="nt">&lt;low&gt;</span>
          <span class="nt">&lt;extension</span> <span class="na">url=</span><span class="s">"http://hl7.org/fhir/StructureDefinition/cqf-expression&gt;</span>
<span class="s">            &lt;valueExpression&gt;</span>
<span class="s">              &lt;language value="</span><span class="err">text/cql-expression"</span><span class="nt">/&gt;</span>
              <span class="nt">&lt;expression</span> <span class="na">value=</span><span class="s">"(date from ((%context.action.where(id = 'a').timing as dateTime) + 1 day)) + 8 hours"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/valueExpression&gt;</span>
          <span class="nt">&lt;/extension&gt;</span>
        <span class="nt">&lt;/low&gt;</span>
      <span class="nt">&lt;/offsetRange&gt;</span>
    <span class="nt">&lt;/relatedAction&gt;</span>
  <span class="nt">&lt;/action&gt;</span>
<span class="nt">&lt;/action&gt;</span>
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
