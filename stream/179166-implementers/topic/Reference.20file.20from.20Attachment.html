---
layout: page
title: "FHIR Chat  · Reference file from Attachment · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html">Reference file from Attachment</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153937360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153937360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas Keil <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153937360">(Feb 14 2018 at 14:07)</a>:</h4>
<p>Hi, I have the following use case: I want to store a pdf next to a DiagnosticReport (DR) resource without having to embed the pdf into the DR to prevent loading not required data and to decrease loading time as those pdfs can be quite large. I know I can store the pdf inside DR.presentedForm as an Attachment but I don't want the files to be inline.<br>
I can imagine three possible solutions:<br>
1) post the files as a Binary and reference the Binary from the DR or the Attachment<br>
2) Set the Attachment.uri to the Binary<br>
3) Use an extension<br>
In my eyes, posting the files as a Binary and referencing them from the Attachment (not with Binary.uri) is the best way to achieve this. What do you think?</p>



<a name="153937368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153937368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153937368">(Feb 14 2018 at 14:14)</a>:</h4>
<p>I would suggest to post the PDF to a non FHIR REST Endpoint (as i assume that the FHIR Endpoint would put the PDFs in a DB) and then link to it from DR.Attachment in a second step).</p>



<a name="153937375"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153937375" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153937375">(Feb 14 2018 at 14:37)</a>:</h4>
<p>AFAIK, Vonk treats Binary content differently and stores it in files rather than the database, or at least it's on their roadmap (<span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> ?)<br>
Not sure how HAPI deals with it. As far as handling the references is concerned, I think it's best to align with how IHE MHD treats the Reference between DocumentReference and Binary...</p>



<a name="153937454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153937454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153937454">(Feb 14 2018 at 18:59)</a>:</h4>
<p>I'm not sure what the difference between (1) and (2) is, and I'm not sure how (3) could be better. Certainly the intent we had would be an attachment.uri pointing to a binary somewhere, potentially a Binary resource.</p>



<a name="153937784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153937784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153937784">(Feb 15 2018 at 15:00)</a>:</h4>
<p>the only downside of attachment.uri is that it can't be used to send a DiagReport &amp; Binary in one transaction bundle. Maybe it would be nice to add attachment.reference(binary), this would allow the desired usage of transferring both resources at once.<br>
Adding the PDF in the attachment at attachment.data would lead to the PDF only living inside of the DiagReport with the downside of  a huge resource, sometimes you only want the DiagReport without the PDF, sometimes you just want to get or reference the PDF without the DiagReport.<br>
Do you think adding attachment.reference(Binary) would make sense to solve these problems?</p>



<a name="153937801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153937801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153937801">(Feb 15 2018 at 15:13)</a>:</h4>
<p>Attachment.uri can certainly point to a Binary, so you can transmit both in a bundle.</p>



<a name="153937824"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153937824" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153937824">(Feb 15 2018 at 16:30)</a>:</h4>
<p>at the point of transmission i don't know yet the ID and therefore also not the uri of the Binary resource. If this would be a reference (or additional reference item) i could add a temporary ID (urn:uuid:) and the server would return the transaction bundle after posting with the actual given resource IDs. This isn't possible, as Attachment doesn't contains a reference, only uri - which wouldnt be replaced (at least we understood and tested)</p>



<a name="153937915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153937915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153937915">(Feb 15 2018 at 20:29)</a>:</h4>
<p>attachment uri should be replaced. according to the spec.</p>



<a name="153937916"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153937916" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153937916">(Feb 15 2018 at 20:30)</a>:</h4>
<p>for this specific scenario, in fact.</p>



<a name="153937917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153937917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153937917">(Feb 15 2018 at 20:30)</a>:</h4>
<p>if the server doesn't, make a bug report against it</p>



<a name="153938182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153938182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153938182">(Feb 16 2018 at 12:33)</a>:</h4>
<p>thanks for the clarification <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> i wasn't aware of this part of the spec.</p>



<a name="153938212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153938212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153938212">(Feb 16 2018 at 13:50)</a>:</h4>
<p>The fact that you can't query a Document with Metadata (DocumentReference) <em>and</em> Content (Binary) in one step, because uri doesn't support _include still disturbs me...</p>



<a name="153938269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153938269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153938269">(Feb 16 2018 at 19:56)</a>:</h4>
<p>you can make a task...</p>



<a name="153938904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153938904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153938904">(Feb 20 2018 at 10:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191450">@Simone Heckmann</span> : Yes, it is on the roadmap to provide full support for Binary. Storing that in the database or elsewhere is an implementation choice then. Storing files in db blobs is not really a problem anymore by the way for several databases.</p>



<a name="153939012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Grenz <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939012">(Feb 20 2018 at 17:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191450">@Simone Heckmann</span> I'd definitely support a change to support fetching both DR and Binary in a single fetch. Could take a number of forms - I'm not sure what guiding principles are in place for referencing Binary resources, but it seems like the "metadata" resources should support references to Binary.</p>



<a name="153939111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939111">(Feb 20 2018 at 20:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>, <span class="user-mention" data-user-id="191450">@Simone Heckmann</span> I can see adding support for _include, when the target is a Binary, but would you also follow the uri if it didn't point to a FHIR resource?</p>



<a name="153939112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939112">(Feb 20 2018 at 20:38)</a>:</h4>
<p>typically we'd say, server discretion, but IGs could make further rules</p>



<a name="153939113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939113">(Feb 20 2018 at 20:39)</a>:</h4>
<p>My first thought is that you can't put the result in a Bundle, so unless it is a FHIR resource, I'm not sure how you'd return it.</p>



<a name="153939114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939114">(Feb 20 2018 at 20:49)</a>:</h4>
<p>sure you can - wrap it in a binary.</p>



<a name="153939135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939135">(Feb 20 2018 at 21:18)</a>:</h4>
<p>Had not thought of supporting that. Wrapping in a Binary would be possible, if we can relate a stable id to the actual 'file'.</p>



<a name="153939184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939184">(Feb 20 2018 at 23:27)</a>:</h4>
<p>Could allow it to be an on-the-fly UUID if it's in the same Bundle.</p>



<a name="153939326"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939326" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939326">(Feb 21 2018 at 09:29)</a>:</h4>
<blockquote>
<p>Could allow it to be an on-the-fly UUID if it's in the same Bundle.</p>
</blockquote>
<p>would be a similar behavior to posting a binary linked through attachment inside of a Bundle.</p>



<a name="153939403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939403">(Feb 21 2018 at 17:12)</a>:</h4>
<p>I think that's an interesting approach, but if the community wants it, I think we need to move quickly before Bundle behavior becomes locked down.</p>



<a name="153939407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939407">(Feb 21 2018 at 17:46)</a>:</h4>
<p>This wouldn't be a change to Bundle.  It would be an additional feature of _include - and is something that would be allowed as part of our inter-version compatibility rules for normative.  Adding the capability wouldn't break existing systems - they'd just see a search parameter they didn't support and behave accordingly.</p>



<a name="153939409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939409">(Feb 21 2018 at 17:49)</a>:</h4>
<p>Really? Does anyone expect to get a temporary guid bundle internal reference back on a query?</p>



<a name="153939411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939411">(Feb 21 2018 at 17:50)</a>:</h4>
<p>They'd only get that if they invoked a query that used a search parameter that uses the new mechanism - which means they should expect it :)</p>



<a name="153939412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153939412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153939412">(Feb 21 2018 at 17:52)</a>:</h4>
<p>OK, makes sense.</p>



<a name="153942583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153942583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153942583">(Mar 06 2018 at 12:47)</a>:</h4>
<p>I think a search result bundle is very different from a posted Bundle (of type batch or transaction). In the former case the server hosts the resources in the bundle. They happen to be bundled for convenient retrieval, but should also be individually retrievable. By their logical id. So when the client comes back to retrieve one of the Binaries individually, using the id from that resource in the bundle, it should get the same Binary. A UUID could be that id, but then the server has to be able to map that to the correct Binary. That is wat I meant by having a 'stable id'. I think this behaviour should not be dependent upon a specific usage of _include.</p>



<a name="153953679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153953679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153953679">(Apr 23 2018 at 19:22)</a>:</h4>
<p>I looked for trackers to address the <code>_include</code> issue that  "The name of the search parameter which must be of type reference".  Have n't found any (which doesn't mean they are not there) I have a use case for DocRef where it would be nice if the search parameter could be and Attachment datatype too,  I think canonical too.    Where are we with this?</p>



<a name="153953776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153953776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153953776">(Apr 23 2018 at 23:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> , if you want the file referenced by the attachment included in the result, use the data element, rather than the url. I recognize that this requires coordination of the DocRef creator and reader, while the _include approach doesn't, but it is supported, and you can use _summary or _elements to include the data or not as you'd prefer.</p>
<p>I don't think including the content of arbitrary urls in a search result makes sense. What if the URL is to an ftp server?</p>
<p>Further, I'm not sure that, even if you could specify it in the query, it would be solve your problem. How would you include the arbitrary file in the returned bundle? There is no guarantee that the target will be a BackboneElement, which is needed to include it in a Bundle.</p>



<a name="153953791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153953791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153953791">(Apr 24 2018 at 02:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span>  I understand that is an option, but what if  some clients want it and others do not.  By inlining the content you limit the clients options.</p>



<a name="153953792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153953792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153953792">(Apr 24 2018 at 02:25)</a>:</h4>
<p>The expectation of the _include would be for FHIR endpoints.  I don't think would expect any old url to return anything.</p>



<a name="153953795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153953795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153953795">(Apr 24 2018 at 02:47)</a>:</h4>
<p>Well, clients that don’t want it can use _summary or _elements to exclude it, but I agree, I don’t think putting it in the attachment data is a nice solution. </p>
<p>However, I’m not thrilled with the _include approach. If we interpret _include to have meaning for urls to FHIR endpoints, then you are proposing to trade the “inefficiency” of two retrieves for the inefficiency of the base-64 encoded data in the body of a bundled Binary.  I’d rather do two retrieves.</p>



<a name="153953817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153953817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153953817">(Apr 24 2018 at 07:30)</a>:</h4>
<p>It would also clutter the implementation of _include in FHIR Servers. I'm not too enthousiastic.</p>



<a name="153953879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153953879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Marquard <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153953879">(Apr 24 2018 at 10:23)</a>:</h4>
<p>I am torn, but agree _include doesn't feel quite right.  When a client gets back the DocumentReference.Attachment.url, is there anyway to tell it's referencing a FHIR resource? <a href="http://hl7.org/fhir/datatypes.html#attachment" target="_blank" title="http://hl7.org/fhir/datatypes.html#attachment">attachment data type</a></p>



<a name="153954182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153954182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153954182">(Apr 24 2018 at 21:47)</a>:</h4>
<p>the server  can know by knowing the target</p>



<a name="153954689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153954689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153954689">(Apr 26 2018 at 21:43)</a>:</h4>
<p>I have heard interest from the MHD crowd for this... The fact that attachment.url is treated differently is continuing to present issues... I think we fixed the fixup thing, why can't we clarify the _include would work when the url points at a Resource type (including Binary)?</p>



<a name="153954691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153954691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153954691">(Apr 26 2018 at 22:43)</a>:</h4>
<p>Since Attachment provide option of reference or inline b64 how about alt approach of creating a custom search param to request option of url or inline (b64) content ( at servers discretion of course).</p>



<a name="153954884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20file%20from%20Attachment/near/153954884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20file.20from.20Attachment.html#153954884">(Apr 28 2018 at 12:51)</a>:</h4>
<p>Eric, so you would have the server re-encode the data from one to the other? That is far more than I was looking at, and it would not work for MHD. I just want a way to include the content at attachment.url in the results Bundle. It seems simple enough... right?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
