---
layout: page
title: "FHIR Chat  · FHIRPath Patch Test Cases · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html">FHIRPath Patch Test Cases</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="188499678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188499678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188499678">(Feb 18 2020 at 22:52)</a>:</h4>
<p>I recently added FHIRPath Patch support to our server. I downloaded the FHIRPath Patch test cases from <a href="https://www.hl7.org/fhir/fhirpatch.html" target="_blank" title="https://www.hl7.org/fhir/fhirpatch.html">https://www.hl7.org/fhir/fhirpatch.html</a> but hit a couple issues.</p>



<a name="188499730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188499730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188499730">(Feb 18 2020 at 22:53)</a>:</h4>
<p>IMHO the most egregious one is <code>Reorder List #4</code>:</p>
<div class="codehilite"><pre><span></span>  &lt;case name=&quot;Reorder List #4&quot; mode=&quot;forwards&quot;&gt;
    &lt;input&gt;
      &lt;Patient xmlns=&quot;http://hl7.org/fhir&quot;&gt;&lt;id value=&quot;test&quot;/&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 1&quot;/&gt;
        &lt;/identifier&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 2&quot;/&gt;
        &lt;/identifier&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 3&quot;/&gt;
        &lt;/identifier&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 4&quot;/&gt;
        &lt;/identifier&gt;
      &lt;/Patient&gt;
    &lt;/input&gt;
    &lt;diff&gt;
      &lt;Parameters xmlns=&quot;http://hl7.org/fhir&quot;&gt;&lt;id value=&quot;test&quot;/&gt;
        &lt;parameter&gt;
          &lt;name value=&quot;operation&quot;/&gt;
          &lt;part&gt;
            &lt;name value=&quot;type&quot;/&gt;
            &lt;valueCode value=&quot;move&quot;/&gt;
          &lt;/part&gt;
          &lt;part&gt;
            &lt;name value=&quot;path&quot;/&gt;
            &lt;valueString value=&quot;Patient.identifier&quot;/&gt;
          &lt;/part&gt;
          &lt;part&gt;
            &lt;name value=&quot;source&quot;/&gt;
            &lt;valueInteger value=&quot;0&quot;/&gt;
          &lt;/part&gt;
          &lt;part&gt;
            &lt;name value=&quot;destination&quot;/&gt;
            &lt;valueInteger value=&quot;3&quot;/&gt;
          &lt;/part&gt;
        &lt;/parameter&gt;
      &lt;/Parameters&gt;
    &lt;/diff&gt;
    &lt;output&gt;
      &lt;Patient xmlns=&quot;http://hl7.org/fhir&quot;&gt;&lt;id value=&quot;test&quot;/&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 2&quot;/&gt;
        &lt;/identifier&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 3&quot;/&gt;
        &lt;/identifier&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 1&quot;/&gt;
        &lt;/identifier&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 4&quot;/&gt;
        &lt;/identifier&gt;
      &lt;/Patient&gt;
    &lt;/output&gt;
  &lt;/case&gt;
</pre></div>



<a name="188499748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188499748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188499748">(Feb 18 2020 at 22:53)</a>:</h4>
<p>Shouldn't the expected output be:</p>
<div class="codehilite"><pre><span></span>      &lt;Patient xmlns=&quot;http://hl7.org/fhir&quot;&gt;&lt;id value=&quot;test&quot;/&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 2&quot;/&gt;
        &lt;/identifier&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 3&quot;/&gt;
        &lt;/identifier&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 4&quot;/&gt;
        &lt;/identifier&gt;
        &lt;identifier&gt;
          &lt;system value=&quot;http://example.org&quot;/&gt;
          &lt;value value=&quot;value 1&quot;/&gt;
        &lt;/identifier&gt;
      &lt;/Patient&gt;
</pre></div>


<p>?</p>



<a name="188499836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188499836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188499836">(Feb 18 2020 at 22:54)</a>:</h4>
<p>what does <code>mode="forwards"</code> mean in the test case element?</p>



<a name="188517688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188517688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188517688">(Feb 19 2020 at 05:48)</a>:</h4>
<p>Something is not right there, how do you move it to the start or to the end?<br>
Is the position the result after removing it, or before removing it, and is it 0 based.<br>
If that is the expected result, the only answer I can come up with is it means insert before item (without removing the source).<br>
I agree that this could do with some clarification.</p>



<a name="188550525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188550525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188550525">(Feb 19 2020 at 14:49)</a>:</h4>
<p>yeah, here was my assumption about how move should work for a list like [1,2,3,4]:</p>
<div class="codehilite"><pre><span></span>move(0,0) -&gt; 1,2,3,4
move(0,1) -&gt; 2,1,3,4
move(0,2) -&gt; 2,3,1,4
move(0,3) -&gt; 2,3,4,1
</pre></div>



<a name="188551252"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188551252" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188551252">(Feb 19 2020 at 14:57)</a>:</h4>
<p>OK, I opened <a href="https://jira.hl7.org/browse/FHIR-26324" target="_blank" title="https://jira.hl7.org/browse/FHIR-26324">https://jira.hl7.org/browse/FHIR-26324</a> for it...and I'm happy to open a PR with my suggested fix if someone can point me to the source of these examples</p>



<a name="188603728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188603728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188603728">(Feb 20 2020 at 01:47)</a>:</h4>
<p>mode is an instruction to the test engine for whether the test case is testing applying or generating differences</p>



<a name="188603735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188603735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188603735">(Feb 20 2020 at 01:47)</a>:</h4>
<p>because you can't always go in both directions</p>



<a name="188604015"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188604015" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188604015">(Feb 20 2020 at 01:55)</a>:</h4>
<p>further, I agree with your assumption and I can't see how my code doesn't work the way you think</p>



<a name="188604282"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188604282" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188604282">(Feb 20 2020 at 02:01)</a>:</h4>
<p>no it does - insert before delete</p>



<a name="188604363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188604363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188604363">(Feb 20 2020 at 02:03)</a>:</h4>
<p>That's the only test that's affected</p>



<a name="188604803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188604803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188604803">(Feb 20 2020 at 02:12)</a>:</h4>
<p>so I agree that test cases are wrong, and I'll update the test cases in their master location:</p>



<a name="188604811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRPath%20Patch%20Test%20Cases/near/188604811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRPath.20Patch.20Test.20Cases.html#188604811">(Feb 20 2020 at 02:12)</a>:</h4>
<p><a href="https://github.com/FHIR/fhir-test-cases" target="_blank" title="https://github.com/FHIR/fhir-test-cases">https://github.com/FHIR/fhir-test-cases</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
