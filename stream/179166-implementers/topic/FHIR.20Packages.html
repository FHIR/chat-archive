---
layout: page
title: "FHIR Chat  · FHIR Packages · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html">FHIR Packages</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="166242950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166242950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166242950">(May 22 2019 at 07:12)</a>:</h4>
<p>Hello everyone.<br>
I am new with FHIR and we have started an implementation with HAPI-FHIR server. </p>
<p>During the DevDays in the Netherlands there were information about FHIR Packages och versioning. The message was to version the Fhir packages.<br>
My question is: Is there any recommended way to use the "Fhir package version" in rest-communicaton in a similar way as the fhirVersion? <br>
Ex.<br>
Accept: fhirVersion=4.0, <strong>packageVersion=1.0.0</strong>, application/json+fhir</p>



<a name="166248585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166248585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166248585">(May 22 2019 at 08:52)</a>:</h4>
<p>When would this REST traffic occur?  Is this a Fhir client requesting the download of a package?  Or is this a client requesting a conformance resource (say a StructureDefinition) for a certain version of FHIR for a certain version of a package from a server?</p>



<a name="166252320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166252320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166252320">(May 22 2019 at 09:47)</a>:</h4>
<p><span class="user-mention" data-user-id="221915">@Theoharis Nalmpantidis</span> support for NPM packages in FHIR follows the (external) NPM specification. The FHIR spec itself does not specify how to search for and/or fetch an NPM package from an NPM server. Simplifier supports such functionality by means of a custom API endpoint that implements the NPM spec. The NPM spec defines how to deal with package versions.</p>



<a name="166262694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166262694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166262694">(May 22 2019 at 12:33)</a>:</h4>
<p>Hi I dont mean the rest-communication to the NPM package, it is when consuming a FHIR resource that conforms to a specific profile.</p>
<p>Here is one example:<br>
FhirContext ctx = FhirContext.forR4();<br>
ctx.setDefaultTypeForProfile("<a href="http://natmedlist.se/fhir/StructureDefinition/nll-patient|1.0" target="_blank" title="http://natmedlist.se/fhir/StructureDefinition/nll-patient|1.0">http://natmedlist.se/fhir/StructureDefinition/nll-patient|1.0</a>", EHMPatient.class);<br>
IGenericClient client = ctx.newRestfulGenericClient("<a href="http://nll-fhir-server.192.168.234.5.nip.io/fhir-server/fhir" target="_blank" title="http://nll-fhir-server.192.168.234.5.nip.io/fhir-server/fhir">http://nll-fhir-server.192.168.234.5.nip.io/fhir-server/fhir</a>");<br>
client.registerInterceptor(new LoggingInterceptor(true));<br>
Patient patient = client.read().resource(Patient.class).withId("82b3570c-8a51-464d-a53e-7fb55255063c").execute();</p>
<p>The logs.<br>
main] INFO ca.uhn.fhir.rest.client.interceptor.LoggingInterceptor - Client request: GET <a href="http://nll-fhir-server.192.168.234.5.nip.io/fhir-server/fhir/metadata" target="_blank" title="http://nll-fhir-server.192.168.234.5.nip.io/fhir-server/fhir/metadata">http://nll-fhir-server.192.168.234.5.nip.io/fhir-server/fhir/metadata</a> HTTP/1.1<br>
[main] INFO ca.uhn.fhir.rest.client.interceptor.LoggingInterceptor - Client request headers:<br>
Accept-Charset: utf-8<br>
Accept: application/fhir+xml;q=1.0, application/fhir+json;q=1.0, application/xml+fhir;q=0.9, application/json+fhir;q=0.9<br>
User-Agent: HAPI-FHIR/3.7.0 (FHIR Client; FHIR 4.0.0/R4; apache)</p>
<p>When I sniff the traffic is does not include which profile the client conforms to, is there any way to tell the FHIR-server to create a Resource according a specific profile based on FHIR package?</p>



<a name="166263686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166263686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166263686">(May 22 2019 at 12:49)</a>:</h4>
<p>I forgot to add this is necessary when supporting multiple versions of a specific profile under the same endpoint. <br>
Ex. http://[base]/fhir-server/fhir/Patient</p>



<a name="166265713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166265713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166265713">(May 22 2019 at 13:13)</a>:</h4>
<blockquote>
<p>When would this REST traffic occur?  Is this a Fhir client requesting the download of a package?  Or is this a client requesting a conformance resource (say a StructureDefinition) for a certain version of FHIR for a certain version of a package from a server?</p>
</blockquote>
<p>It is the last conformance resource for a certain version of FHIR for a certain version of a package.</p>



<a name="166266032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166266032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166266032">(May 22 2019 at 13:17)</a>:</h4>
<p><span class="user-mention" data-user-id="221915">@Theoharis Nalmpantidis</span>, although I am not familiar with HAPI, in general an instance of FHIR data (like a Patient) could state such claims in its meta data, specifically Patient.meta.profile.  This is not necessary, however, and you can use FHIR validation (using the $validate operation) to validate any instance against any chosen profile.  However, we have not yet defined how you'd tell the server where to look for such a profile. It is assumed a server has one "current" profile with a given canonical - especially if you use a canonical with a version | in it. Normally, servers would have loaded the content of a given package into their databases, and so be able to find that profile.   If (in the case you are suggesting) a server could have the contents of multiple packages with multiple versions of the given profile, then presumably the version becomes the discriminator.  If not, there's currently no way of telling the server which package you want to take the profile from.  It would probably be a parameter to $validate but its too early to say anything definite.</p>



<a name="166267032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166267032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166267032">(May 22 2019 at 13:29)</a>:</h4>
<p>Ok Thanks <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <br>
That was the kind of answer i was looking for. <br>
Would it be a bad idea to implement a packageVersion Accept http-header as the fhirVersion according to standard to support which profile to use?<br>
I was thinking about GET calls when using _include and _revinclude when both resources conform to specific profiles (with version).<br>
Ex. GET http://[base]/MedicationRequest?_include=Patient</p>



<a name="166272027"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166272027" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166272027">(May 22 2019 at 14:21)</a>:</h4>
<p>It's not a crazy idea to pilot - but that wouldn't mean it's part of FHIR yet, so you'd have to watch out to tell your clients that it is a private extension to the standard....</p>



<a name="166276270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166276270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166276270">(May 22 2019 at 15:01)</a>:</h4>
<p>Thanks for the answer :)</p>



<a name="166280854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166280854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166280854">(May 22 2019 at 15:45)</a>:</h4>
<p>FYI R4 introduces the notion of version-specific canonical url references of the form "http://...|1.0" (separated by a vertical bar). This is the preferred way of referencing a specific version of a profile.<br>
A resource instance could include a version-specific profile reference in the meta.profile element. This would allow a server to validate against that specific profile version, without having to introduce an additional HTTP header.</p>



<a name="166284841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166284841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166284841">(May 22 2019 at 16:29)</a>:</h4>
<p>Yes but it does not solve the fact that for instance Patient profile v.1.0 is included in the same package as MedicationRequest profile v.1.0. I looked at version-specific canonical url and yes it only solves versioning for a single Profile based on a conformance resource.</p>



<a name="166303704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166303704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166303704">(May 22 2019 at 19:56)</a>:</h4>
<p>I</p>



<a name="166303727"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166303727" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166303727">(May 22 2019 at 19:56)</a>:</h4>
<p>I'm not actually following the issue here. Why does the client need to know about packaging on the server?</p>



<a name="166316987"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166316987" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166316987">(May 22 2019 at 23:01)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <br>
We are at this stage designing profiles (version=1) that conform to specific FHIR Resources like Patient, MedicationRequest and MedicationDispense. <br>
All the profiles are going to be packaged according to standard NPM Packages.<br>
We are mapping FHIR resources to an internal datamodel before storing in DB which means that resource data could conform to a specific profiles different versions. The data stored in DB is version agnostic.<br>
Lets say that in 1-2 years from now that we have to profile the next major version of a resource (cause of legislation), during that time we will support 2 versions at the same time, our clients will have 6 months -1 year to adapt to the latest version. That means that we need some kind of mechanism to know which version our clients support or is it a better approach to launch a separate FHIR-Server instance for the new package version?</p>



<a name="166318803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166318803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166318803">(May 22 2019 at 23:33)</a>:</h4>
<p>You can simply declare the profile versions within your instances using the 'meta' element and avoid the need to require your clients to do anything 'custom'</p>



<a name="166333363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166333363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166333363">(May 23 2019 at 05:17)</a>:</h4>
<p>Could u please explain more? How would the server know which Profile version the client supports in a GET operation?</p>



<a name="166333838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166333838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166333838">(May 23 2019 at 05:31)</a>:</h4>
<p>The CapabilityStatement allows a server to declare what profiles (and versions) it supports (as well as what resources and operations it supports)</p>



<a name="166337934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166337934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166337934">(May 23 2019 at 07:06)</a>:</h4>
<p>OK I understand</p>



<a name="166435351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166435351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166435351">(May 24 2019 at 09:10)</a>:</h4>
<blockquote>
<p>How would the server know which Profile version the client supports in a GET operation?</p>
</blockquote>
<p>The server's CapabilityStatement would not answer that</p>



<a name="166435366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166435366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166435366">(May 24 2019 at 09:11)</a>:</h4>
<p>It would be instead the client asking the server which profiles it supports</p>



<a name="166459891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166459891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166459891">(May 24 2019 at 14:52)</a>:</h4>
<p>The Server's CapabilityStatement allows the server to declare which profiles (including which versions of which profiles) it supports using the supportedProfile element</p>



<a name="166464584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166464584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166464584">(May 24 2019 at 15:46)</a>:</h4>
<p>Yes but it does not answer solve which _profile to use when using a GET operation with _include and _revinclude. For instance request a MedicationRequest and including the Patient. How would that operation look like? [base]/MedicationRequest?identifier=id&amp;_include=MedicationRequest:subject&amp;_profile=http://fhir.example.com/mymedication|1.0,<strong>http://fhir.example.com/mypatient|1.0</strong>. <br>
Any suggestions?</p>



<a name="166469729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166469729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166469729">(May 24 2019 at 16:49)</a>:</h4>
<p>The data pointed to by the MedicationRequest will comply with whatever profiles it complies with.  If you're looking for data filtering based on profile, that's not something that FHIR supports.</p>



<a name="166477854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166477854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166477854">(May 24 2019 at 18:27)</a>:</h4>
<p>It is not data filtrering we are looking for, the solution for us would be to temporary launch an unique instance of a FHIR server per FHIR package major-version. I plan to attend the FHIR dev days in Amsterdam in November and to further explain the need.</p>



<a name="166486297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166486297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166486297">(May 24 2019 at 20:12)</a>:</h4>
<blockquote>
<p>How would that operation look like?</p>
</blockquote>
<p>I don't understand the operation - are you saying to only return medication requests where the patient conforms to that profile?</p>



<a name="166490521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166490521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166490521">(May 24 2019 at 21:10)</a>:</h4>
<p>I want a bundle response for a search operation where the medicationrequest is matched and the patient resource is included. How can the client define that the medicationrequest to conforms to profile A and patient to conforms to profile B?</p>



<a name="166490622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166490622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166490622">(May 24 2019 at 21:11)</a>:</h4>
<p>I don't know. How can the client define that something that already exists conforms to a set of rules when it requests to access it?</p>



<a name="166492172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166492172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166492172">(May 24 2019 at 21:30)</a>:</h4>
<p>The set of rules are designed and implemented based on FHIR package version. The set of rules can vary. We were hoping on approving clients based on FHIR package version. We are planning to have 2 simultaneous versions active in production so that clients will have time to adapt to the latest version according the clients release plan.</p>



<a name="166492288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166492288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166492288">(May 24 2019 at 21:32)</a>:</h4>
<p>The FHIR package version (semver ) is used as a contract</p>



<a name="166492477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166492477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166492477">(May 24 2019 at 21:34)</a>:</h4>
<p>ok so I went back and re-read the thread. From what you've said, I don't know why you aren't using the fhirVersion parameter on the mime type as documented at <a href="http://hl7.org/fhir/versioning.html" target="_blank" title="http://hl7.org/fhir/versioning.html">http://hl7.org/fhir/versioning.html</a></p>



<a name="166492593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166492593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166492593">(May 24 2019 at 21:36)</a>:</h4>
<p>Ok we are using that but if the profiles version could have mandatory extensions</p>



<a name="166492672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166492672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166492672">(May 24 2019 at 21:37)</a>:</h4>
<blockquote>
<p>the profiles version could have mandatory </p>
</blockquote>
<p>I don't know what that means?</p>



<a name="166492768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166492768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166492768">(May 24 2019 at 21:38)</a>:</h4>
<p>If I take a conformance resource and add a extension with a manadatory parameters</p>



<a name="166492823"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166492823" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166492823">(May 24 2019 at 21:39)</a>:</h4>
<p>And I the next major version of the package version add another mandatory parameter</p>



<a name="166492913"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166492913" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166492913">(May 24 2019 at 21:40)</a>:</h4>
<p>so different versions of the client have different business rules applied to their interactions based on different client declared package versions?</p>



<a name="166493143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166493143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166493143">(May 24 2019 at 21:45)</a>:</h4>
<p>Actually the business rules are located in the server not the client, for instance v1 medicationRequest profile has  extension parameter A mandatory, but v2 medicationRequest profile has extension parameters A and B mandatory</p>



<a name="166493208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166493208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166493208">(May 24 2019 at 21:46)</a>:</h4>
<p>And the FHIR data is transformed to a local db-model that can handle both profile version</p>



<a name="166493234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166493234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166493234">(May 24 2019 at 21:46)</a>:</h4>
<p>but in fact, B is not mandatory. Unless B is prohibited from reading content from v1</p>



<a name="166493258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166493258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166493258">(May 24 2019 at 21:47)</a>:</h4>
<p>Sorry B is mandatory but prohibited from reading</p>



<a name="166493264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166493264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166493264">(May 24 2019 at 21:47)</a>:</h4>
<p>forgot to write that.</p>



<a name="166493321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166493321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166493321">(May 24 2019 at 21:48)</a>:</h4>
<p>Lets say B is mandatory because the new profile version is a major version</p>



<a name="166493338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166493338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166493338">(May 24 2019 at 21:49)</a>:</h4>
<p>woah. we're really in the advanced place now. if...</p>
<blockquote>
<p>the new profile version is a major version</p>
</blockquote>
<p>Then fhirVersion will suffice.</p>



<a name="166493419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166493419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166493419">(May 24 2019 at 21:50)</a>:</h4>
<p>Yes I know the requirement could be the legislation in Sweden</p>



<a name="166493519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166493519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166493519">(May 24 2019 at 21:52)</a>:</h4>
<p>but really, that doesn't make any difference to your underlying use case. you still have different clients facing different rules. I think your choices are:</p>
<ul>
<li>track the client's business rules in the client registration (I assume that you have some registration framework)</li>
<li>define your own business rules parameter to the mime type (not really conformant with the stated intent of mime type parameters)</li>
<li>use Resource.implicitRules (my least favourite of these options)</li>
</ul>
<p>btw I am in Stockholm the week after next if you want to face-to-face about this</p>



<a name="166493688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166493688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166493688">(May 24 2019 at 21:55)</a>:</h4>
<p>Do you have the exact date maybe?<br>
I was thinking about 2 scenarios either letting clients add a packageVersion similar to the fhirVersion or to it make easy and launch a FHIR-Server per FHIR-package major version.</p>



<a name="166494111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166494111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166494111">(May 24 2019 at 22:02)</a>:</h4>
<p>in terms of micro-service.... yes, that's the obvious thing to do (your second option) but that ties the resource identity to the version of the representation (see discussion on the link above). So people don't always like micro-services for something like this</p>



<a name="166494275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166494275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166494275">(May 24 2019 at 22:05)</a>:</h4>
<p>I was meaning to launch a FHIR Server for the package not just a single conformance resource</p>



<a name="166494289"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166494289" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166494289">(May 24 2019 at 22:05)</a>:</h4>
<p>that's what I thought you meant</p>



<a name="166494357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166494357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166494357">(May 24 2019 at 22:06)</a>:</h4>
<p>ok</p>



<a name="166494986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166494986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166494986">(May 24 2019 at 22:19)</a>:</h4>
<p>Just one last question Grahame the link did you mean your previous post (with the options) or is it an actual link that I don't see in the chat log?</p>



<a name="166497904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166497904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166497904">(May 24 2019 at 23:12)</a>:</h4>
<p><a href="http://hl7.org/fhir/versioning.html" target="_blank" title="http://hl7.org/fhir/versioning.html">http://hl7.org/fhir/versioning.html</a></p>



<a name="166520298"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%20Packages/near/166520298" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Theoharis Nalmpantidis <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.20Packages.html#166520298">(May 25 2019 at 09:56)</a>:</h4>
<p>Ok thanks</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
