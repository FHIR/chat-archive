---
layout: page
title: "FHIR Chat  · Server-side alteration of resource · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html">Server-side alteration of resource</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153904951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904951">(Sep 08 2017 at 06:46)</a>:</h4>
<p>Say we had a very opinionated server that wanted to put some rules on FHIR resources stored on it. Is it acceptable behaviour for the server to make alterations to a Resource as it is being put onto the server?</p>
<p>To some extent it already does this with changes to metadata like last updated. Could it also add a code to an Observation? Generate a narrative and insert it into the resource (if the narrative was empty)?</p>
<p>If it did make these alterations, would it be required to make the altered resource be a new version? So client saves resource at version 5, server notices that it can helpfully generate a nice narrative - can it add the narrative to version 5 on save, or does it now need to generate a version 6 with narrative?</p>



<a name="153904952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904952">(Sep 08 2017 at 07:11)</a>:</h4>
<p>Pretending it is the same version sounds very nasty.<br>
Someone could reasonably complain, "That is not what I sent".</p>



<a name="153904967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904967">(Sep 08 2017 at 09:38)</a>:</h4>
<p>it's allowed - we very carefully don't say that this can't be done</p>



<a name="153904968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904968">(Sep 08 2017 at 09:38)</a>:</h4>
<p>but that doesn't make it wise</p>



<a name="153904970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904970">(Sep 08 2017 at 09:41)</a>:</h4>
<p>Do you mean not wise in all scenarios, or just not wise to fix up say version 5 of a resource on the server as it is being saved and still call it resource 5?</p>



<a name="153904971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904971">(Sep 08 2017 at 09:42)</a>:</h4>
<p>I presume there might be lots of scenarios where a server might receive version 5 of a resource and decide for whatever business reason that something needs to change - and have the server itself create version 6</p>



<a name="153904972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904972">(Sep 08 2017 at 09:42)</a>:</h4>
<p>That wouldn't be 'unwise'?</p>



<a name="153904973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904973">(Sep 08 2017 at 09:42)</a>:</h4>
<p>more the first. The server can alter as it saves. it doesn't have to update the version, but that might be useful to underscore that it changed it.</p>



<a name="153904974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904974">(Sep 08 2017 at 09:43)</a>:</h4>
<p>I was generally saying, the server altering the semantics as it saves the resource can be an unwise thing to do.</p>



<a name="153904977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904977">(Sep 08 2017 at 09:46)</a>:</h4>
<p>the clean approach is to increment the version as you make alterations. the server alterations is just another version increment. That also makes auditing a lot more simple</p>



<a name="153904978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904978">(Sep 08 2017 at 09:46)</a>:</h4>
<p>and your client will not be surprised</p>



<a name="153904980"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153904980" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153904980">(Sep 08 2017 at 09:47)</a>:</h4>
<p>Ok thanks. I think if I did do it I would definitely do a bump version and server to server POST.</p>



<a name="153905048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153905048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153905048">(Sep 08 2017 at 21:28)</a>:</h4>
<p>Altering is going to be pretty common actually - lots of servers won't be able to store all extensions received, or possibly even some of the core elements.  A bigger change is adding new elements or change data values.  That'll be less common, but is posisble if the system doesn't "trust" the sender for certain data, or if it has supplemental data it chooses to integrate.  Doing any of these things will break any digital signatures that happen to be present though.  The possibility of this occurring is one of the reasons we support echoing back the stored resource as part of the response to a 'create'.</p>



<a name="153905057"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153905057" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153905057">(Sep 08 2017 at 23:47)</a>:</h4>
<p>I was pondering this question with regards to fields like <code>CodeSystem.count</code> which may differ from the actual number of defined concepts (and where <code>CodeSystem.content == complete</code>)</p>



<a name="153906009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153906009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153906009">(Sep 10 2017 at 23:17)</a>:</h4>
<p>Is the unaltered (submitted) 'version' made available as a first version, or somewhere? I would recommend a Provenance record explain this sever modification and why. (Provenance.agent = server identity)</p>



<a name="153906011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server-side%20alteration%20of%20resource/near/153906011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Patterson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server-side.20alteration.20of.20resource.html#153906011">(Sep 10 2017 at 23:21)</a>:</h4>
<p>Yeah, I think in my head there are 2 approaches - an almost silent 'fixing' of something submitted - I'm pretty wary of that. And the 2nd approach would just be to accept the submitted version as per normal, and then the server itself submit a new version with its 'fixes' (with as you say a proper Provenance recorded with server as agent)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
