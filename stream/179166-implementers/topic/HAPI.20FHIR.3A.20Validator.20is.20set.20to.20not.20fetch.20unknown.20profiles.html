---
layout: page
title: "FHIR Chat  · HAPI FHIR: Validator is set to not fetch unknown profiles · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.3A.20Validator.20is.20set.20to.20not.20fetch.20unknown.20profiles.html">HAPI FHIR: Validator is set to not fetch unknown profiles</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="258225919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%3A%20Validator%20is%20set%20to%20not%20fetch%20unknown%20profiles/near/258225919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Franke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.3A.20Validator.20is.20set.20to.20not.20fetch.20unknown.20profiles.html#258225919">(Oct 19 2021 at 16:24)</a>:</h4>
<p>Hi,</p>
<p>I am currently setting up a HAPI FHIR Server (jpaserver-starter to be clear) which uses the Repository Validating Interceptor in order to validate its resources. Whenever I specifiy a profile in the meta of the requests body for which I require a validation I am getting the following error in my outcome:</p>
<p>&lt;issue&gt;<br>
        &lt;severity value="error"/&gt;<br>
        &lt;code value="processing"/&gt;<br>
        &lt;diagnostics value="Profile reference '<a href="https://fhir.kbv.de/StructureDefinition/KBV_PR_EAU_Condition_ICD|1.0.2">https://fhir.kbv.de/StructureDefinition/KBV_PR_EAU_Condition_ICD|1.0.2</a>' has not been checked because it is unknown, and the validator is set to not fetch unknown profiles"/&gt;<br>
        &lt;location value="Condition.meta.profile[0]"/&gt;<br>
        &lt;location value="Line 1, Col 40"/&gt;<br>
    &lt;/issue&gt;</p>
<p>I've set the following properties in AppProperties.java in order to overcome this (but I had no success so far):</p>
<ul>
<li>allow_external_references = true;</li>
<li>enable_repository_validating_interceptor = true;</li>
<li>refuse_to_fetch_third_party_urls = false;</li>
<li>requests_enabled = true;</li>
<li>responses_enabled = true;</li>
</ul>
<p>Has anybody in this community faced the same issue or does somebody know how i can set my validator to also fetch unknown profiles?</p>
<p>Greetings :)</p>



<a name="258245826"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%3A%20Validator%20is%20set%20to%20not%20fetch%20unknown%20profiles/near/258245826" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.3A.20Validator.20is.20set.20to.20not.20fetch.20unknown.20profiles.html#258245826">(Oct 19 2021 at 18:12)</a>:</h4>
<p>Probably best to ask on <a class="stream" data-stream-id="179167" href="/#narrow/stream/179167-hapi">#hapi</a></p>



<a name="258246885"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%3A%20Validator%20is%20set%20to%20not%20fetch%20unknown%20profiles/near/258246885" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.3A.20Validator.20is.20set.20to.20not.20fetch.20unknown.20profiles.html#258246885">(Oct 19 2021 at 18:19)</a>:</h4>
<p><span class="user-mention" data-user-id="392601">@Jonas Franke</span> please show your  application.yaml file</p>



<a name="258246961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%3A%20Validator%20is%20set%20to%20not%20fetch%20unknown%20profiles/near/258246961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.3A.20Validator.20is.20set.20to.20not.20fetch.20unknown.20profiles.html#258246961">(Oct 19 2021 at 18:19)</a>:</h4>
<p>It sounds like you havent installed the profiles/IG's</p>



<a name="258325972"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/HAPI%20FHIR%3A%20Validator%20is%20set%20to%20not%20fetch%20unknown%20profiles/near/258325972" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Franke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/HAPI.20FHIR.3A.20Validator.20is.20set.20to.20not.20fetch.20unknown.20profiles.html#258325972">(Oct 20 2021 at 07:46)</a>:</h4>
<p><a href="/user_uploads/10155/JS5bfdv9TFLcVTaVVHcmeD4i/application.yaml">application.yaml</a></p>
<div class="codehilite"><pre><span></span><code>spring:
  datasource:
    url: &#39;jdbc:h2:file:./target/database/h2&#39;
    #url: jdbc:h2:mem:test_mem
    username: sa
    password: null
    driverClassName: org.h2.Driver
    max-active: 15

    # database connection pool size
    hikari:
      maximum-pool-size: 10
  jpa:
    properties:
      hibernate.format_sql: false
      hibernate.show_sql: false
#      hibernate.dialect: org.hibernate.dialect.h2dialect
#      hibernate.hbm2ddl.auto: update
#      hibernate.jdbc.batch_size: 20
#      hibernate.cache.use_query_cache: false
#      hibernate.cache.use_second_level_cache: false
#      hibernate.cache.use_structured_entries: false
#      hibernate.cache.use_minimal_puts: false
###    These settings will enable fulltext search with lucene
#      hibernate.search.enabled: true
#      hibernate.search.backend.type: lucene
#      hibernate.search.backend.analysis.configurer: ca.uhn.fhir.jpa.search.HapiLuceneAnalysisConfigurer
#      hibernate.search.backend.directory.type: local-filesystem
#      hibernate.search.backend.directory.root: target/lucenefiles
#      hibernate.search.backend.lucene_version: lucene_current
  batch:
    job:
      enabled: false
  main:
#    TODO 5.6.0 -&gt; Prevent duplicate bean definitions in the Spring batch config in HAPI: see:
    allow-bean-definition-overriding: true
hapi:
  fhir:
    ### This is the FHIR version. Choose between, DSTU2, DSTU3, R4 or R5
    fhir_version: R4
### enable to use the ApacheProxyAddressStrategy which uses X-Forwarded-* headers
### to determine the FHIR server address
#   use_apache_address_strategy: false
### forces the use of the https:// protocol for the returned server address.
### alternatively, it may be set using the X-Forwarded-Proto header.
#   use_apache_address_strategy_https: false
### enable to set the Server URL
#    server_address: http://hapi.fhir.org/baseR4
#    defer_indexing_for_codesystems_of_size: 101
#    install_transitive_ig_dependencies: true
#    implementationguides:
###    example from registry (packages.fhir.org)
#      swiss:
#        name: swiss.mednet.fhir
#        version: 0.8.0
#      example not from registry
#      ips_1_0_0:
#        url: https://build.fhir.org/ig/HL7/fhir-ips/package.tgz
#        name: hl7.fhir.uv.ips
#        version: 1.0.0
#    supported_resource_types:
#      - Patient
#      - Observation
#    allow_cascading_deletes: true
#    allow_contains_searches: true
    allow_external_references: true
#    allow_multiple_delete: true
#    allow_override_default_search_params: true
#    auto_create_placeholder_reference_targets: false
#    cql_enabled: true
#    default_encoding: JSON
#    default_pretty_print: true
#    default_page_size: 20
#    delete_expunge_enabled: true
    enable_repository_validating_interceptor: true
#    enable_index_missing_fields: false
#    enable_index_contained_resource: false
#    enforce_referential_integrity_on_delete: false
#    enforce_referential_integrity_on_write: false
#    etag_support_enabled: true
#    expunge_enabled: true
#    daoconfig_client_id_strategy: null
#    client_id_strategy: ALPHANUMERIC
#    fhirpath_interceptor_enabled: false
#    filter_search_enabled: true
#    graphql_enabled: true
#    narrative_enabled: true
#    mdm_enabled: true
#    partitioning:
#      allow_references_across_partitions: false
#      partitioning_include_in_search_hashes: false
    cors:
      allow_Credentials: true
      # These are allowed_origin patterns, see: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/cors/CorsConfiguration.html#setAllowedOriginPatterns-java.util.List-
      allowed_origin:
        - &#39;*&#39;

    # Search coordinator thread pool sizes
    search-coord-core-pool-size: 20
    search-coord-max-pool-size: 100
    search-coord-queue-capacity: 200

#    logger:
#      error_format: &#39;ERROR - ${requestVerb} ${requestUrl}&#39;
#      format: &gt;-
#        Path[${servletPath}] Source[${requestHeader.x-forwarded-for}]
#        Operation[${operationType} ${operationName} ${idOrResourceName}]
#        UA[${requestHeader.user-agent}] Params[${requestParameters}]
#        ResponseEncoding[${responseEncodingNoDefault}]
#      log_exceptions: true
#      name: fhirtest.access
#    max_binary_size: 104857600
#    max_page_size: 200
#    retain_cached_searches_mins: 60
#    reuse_cached_search_results_millis: 60000
    tester:
        home:
          name: Local Tester
          server_address: &#39;http://localhost:8080/fhir&#39;
          refuse_to_fetch_third_party_urls: false
          fhir_version: R4
        global:
          name: Global Tester
          server_address: &quot;http://hapi.fhir.org/baseR4&quot;
          refuse_to_fetch_third_party_urls: false
          fhir_version: R4
    validation:
      requests_enabled: true
      responses_enabled: true
#    binary_storage_enabled: true
#    bulk_export_enabled: true
#    subscription:
#      resthook_enabled: true
#      websocket_enabled: false
#      email:
#        from: some@test.com
#        host: google.com
#        port:
#        username:
#        password:
#        auth:
#        startTlsEnable:
#        startTlsRequired:
#        quitWait:
#    lastn_enabled: true
###  This is configuration for normalized quantity serach level default is 0
###   0: NORMALIZED_QUANTITY_SEARCH_NOT_SUPPORTED - default
###   1: NORMALIZED_QUANTITY_STORAGE_SUPPORTED
###   2: NORMALIZED_QUANTITY_SEARCH_SUPPORTED
#    normalized_quantity_search_level: 2
#elasticsearch:
#  debug:
#    pretty_print_json_log: false
#    refresh_after_write: false
#  enabled: false
#  password: SomePassword
#  required_index_status: YELLOW
#  rest_url: &#39;localhost:9200&#39;
#  protocol: &#39;http&#39;
#  schema_management_strategy: CREATE
#  username: SomeUsername
</code></pre></div>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
