---
layout: page
title: "FHIR Chat  · Reference instances between IGs · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html">Reference instances between IGs</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="265284497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265284497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thea Mentz Soerensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265284497">(Dec 17 2021 at 11:30)</a>:</h4>
<p>Hi, we have a problem which concerns referencing instances created in one IG (1) in Bundle.entry.resource from another IG (2) in FSH.  <br>
<span class="user-mention" data-user-id="192155">@Anders Jensen</span> <br>
In IG (2) we have declared dependencies to (1) in the sushi-config.yaml file. <br>
In IG (1) is the following Organization-instance is created: <br>
<a href="/user_uploads/10155/vpHGHAFs_Ol2n5KFo4UR4IjS/Instance.png">Instance.png</a> <br>
In IG (2) we want to reference the above-mentioned Organization from the Bundle.entry.resource element. <br>
<a href="/user_uploads/10155/aEo5QD9Ll1ne_HGTkP26UklK/ReferenceToInstance.png">ReferenceToInstance.png</a><br>
It work just fine in the Bundle.entry.fullUrl element, but not in the resource element and we get the following error.  <br>
<a href="/user_uploads/10155/-p23J1vOhMYlU8sWCa1_On0-/Error.png">Error.png</a> <br>
We would really appreciate any input on how to solve this problem. <br>
Thank you in advance.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/vpHGHAFs_Ol2n5KFo4UR4IjS/Instance.png" title="Instance.png"><img src="/user_uploads/10155/vpHGHAFs_Ol2n5KFo4UR4IjS/Instance.png"></a></div><div class="message_inline_image"><a href="/user_uploads/10155/aEo5QD9Ll1ne_HGTkP26UklK/ReferenceToInstance.png" title="ReferenceToInstance.png"><img src="/user_uploads/10155/aEo5QD9Ll1ne_HGTkP26UklK/ReferenceToInstance.png"></a></div><div class="message_inline_image"><a href="/user_uploads/10155/-p23J1vOhMYlU8sWCa1_On0-/Error.png" title="Error.png"><img src="/user_uploads/10155/-p23J1vOhMYlU8sWCa1_On0-/Error.png"></a></div>



<a name="265291263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265291263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265291263">(Dec 17 2021 at 12:51)</a>:</h4>
<p>seems like a question for <a class="stream" data-stream-id="215610" href="/#narrow/stream/215610-shorthand">#shorthand</a></p>



<a name="265298116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265298116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265298116">(Dec 17 2021 at 13:57)</a>:</h4>
<p>You're creating these as examples (when <code>Usage:</code> is not specified, it defaults to <code>#example</code> for <em>Instances</em>).  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> -- should one IG be able to reference <em>examples</em> from another IG?  Or is the expectation that only the non-example resources can be referenced and used by other IGs?</p>



<a name="265298790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265298790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265298790">(Dec 17 2021 at 14:02)</a>:</h4>
<p>would be nice to be able to use examples from dependencies (core + IGs) as if they were part of your IG. I keep having to create core examples to build the story in my IG, these get copy/pasted around.</p>



<a name="265299798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265299798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265299798">(Dec 17 2021 at 14:11)</a>:</h4>
<p>I think a challenge is that examples don't necessarily have a canonical URL, and therefore don't necessarily have a unique id.  For example (no pun intended), the reference <code>Patient/Patient1</code> could exist in multiple dependency IGs; which one should be used?</p>



<a name="265299894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265299894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265299894">(Dec 17 2021 at 14:11)</a>:</h4>
<p>yup, but it does exist within an IG (or core); which do have a canonical root</p>



<a name="265300276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265300276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265300276">(Dec 17 2021 at 14:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> -- that's a good point.  I suppose we could try appending the IG canonical w/ <code>/{type}/{id}</code> to see if that gets us anywhere.  I can experiment a little to see if/how the IG Publisher handles this situation.  I have no idea if it is supported or not.</p>



<a name="265303843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265303843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265303843">(Dec 17 2021 at 14:42)</a>:</h4>
<p>Examples from the core spec can be used - <a href="#narrow/stream/179252-IG-creation/topic/Unable.20to.20resolve.20Core.20Spec.20Example.20Link/near/260759235">see here</a></p>



<a name="265305187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265305187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265305187">(Dec 17 2021 at 14:51)</a>:</h4>
<p>certainly structureDefinition from core; I didn't know (and that chat stream doesn't make it clear) that example resources from core can be used. I admit, I tried once and it was easier to copy/paste than try to figure it out</p>



<a name="265305962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265305962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265305962">(Dec 17 2021 at 14:57)</a>:</h4>
<p>There is a separate package for core examples that needs to be included as a dependency, that is what the other stream is showing</p>



<a name="265313513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265313513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265313513">(Dec 17 2021 at 15:45)</a>:</h4>
<p>Thanks for the pointer <span class="user-mention" data-user-id="192685">@Vassil Peytchev</span>.  That will help as I try to figure out how this should work.  Hopefully whatever works for FHIR core examples would also work for IG examples...</p>



<a name="265314984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265314984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265314984">(Dec 17 2021 at 15:54)</a>:</h4>
<p>ah, I missed that</p>



<a name="265315757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265315757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265315757">(Dec 17 2021 at 15:57)</a>:</h4>
<p>Just a heads up: I'm running into weirdness trying to declare the examples packages as a dependency in my SUSHI project.  For some reason it is forcing it to try to re-download FHIR R4 core (not sure why) and then failing.  I'm just reporting it now before <span class="user-mention" data-user-id="191404">@John Moehrke</span> reports it. ;-)</p>



<a name="265315934"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265315934" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265315934">(Dec 17 2021 at 15:57)</a>:</h4>
<p>drat...</p>



<a name="265316910"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265316910" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265316910">(Dec 17 2021 at 16:00)</a>:</h4>
<p>What's weird is if I declare it as a dependency, the first time I run SUSHI it actually runs fine!  But then the next time it encounters errors.  If I then delete the examples from the FHIR cache, it runs fine again!  But then running it after that (once again) causes errors.  Sigh.  I guess I'll break out the debugger!</p>



<a name="265320819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265320819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265320819">(Dec 17 2021 at 16:17)</a>:</h4>
<p>OK.  I see what is happening here (sort of).  The main problem is that the <code>hl7.fhir.r4.examples</code> package also happens to contain all of the FHIR core resource definitions.  So SUSHI loads that up and then tries to load up the actual FHIR R4 core and gets confused because it seems like nothing happened (since all of the core resources were already loaded).  That's an interesting one, but I think that some changes that <span class="user-mention" data-user-id="255031">@Julia Afeltra</span> is working on might fix that (maybe).  BUT... <em>should</em> the examples package contain all of the FHIR core resources too?  That means we have two different packages (w/ different ids) that provide resources with <em>the same canonicals and versions</em>.</p>



<a name="265329349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265329349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265329349">(Dec 17 2021 at 17:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="265360747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265360747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265360747">(Dec 17 2021 at 21:09)</a>:</h4>
<p>I experimented with this by creating a simple IG that depends on the mCODE IG.  In my IG, I created a Patient instance that depends on <a href="http://hl7.org/fhir/us/mcode/STU1/Practitioner-mCODEPractitionerExample01.html">mCODEPractitionerExample01</a> from mCODE.</p>
<p>I separately tried each of the following variations:</p>
<ul>
<li>reference by id: <code>"reference": "mCODEPractitionerExample01"</code></li>
<li>reference by type/id: <code>"reference": "Practitioner/mCODEPractitionerExample01"</code></li>
<li>reference by canonical/type/idL <code>"reference": "http://hl7.org/fhir/us/mcode/Practitioner/mCODEPractitionerExample01"</code></li>
</ul>
<p>In all cases, the IG Publisher reported an error that it couldn't resolve the reference and the link in the generated example narrative was broken.  So... it seems to me that you can't reference examples from other IGs (or if you can, someone needs to tell me how).</p>



<a name="265361421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265361421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265361421">(Dec 17 2021 at 21:14)</a>:</h4>
<p>Are the example instances in the package?</p>



<a name="265361594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265361594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265361594">(Dec 17 2021 at 21:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> - YES, in the package's <code>examples</code> folder.  I double-checked that.</p>



<a name="265361611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265361611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Moesel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265361611">(Dec 17 2021 at 21:16)</a>:</h4>
<p>BUT... I just looked at <span class="user-mention" data-user-id="431942">@Thea Mentz Soerensen</span>'s original question and now realize that they were not trying to use a reference.  They were trying to <em>inline</em> an example from another IG as a Bundle <code>entry.resource</code> (since <code>entry.resource</code> is <em>not</em> a Reference).  OK.  So that's a little different, but I expect we'd still run into issues if that inlined instance referenced any other examples from the IG.</p>
<p>So... SUSHI is not allowing an example from another IG to be <em>inlined</em> into an example in the current IG.  Looking at the SUSHI code and how we load dependencies, this does not surprise me.  Honestly, it will be a bit of work to support something like this because we currently <em>drop</em> most examples when we load the package.  In fact, we even drop some non-examples (like ConceptMap) when we load dependencies -- so we do need to make some improvements here anyway.</p>



<a name="265435077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265435077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265435077">(Dec 18 2021 at 18:38)</a>:</h4>
<blockquote>
<p>SUSHI is not allowing an example from another IG to be inlined into an example in the current IG</p>
</blockquote>
<p>and it shouldn't. There is a proposal to allow inlining descriptions of a resource from another IG, and I'm working on that at some stage, but I think it's mainly not FSH business. It'll probably be a parameter in the IG resource.</p>



<a name="265435159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265435159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265435159">(Dec 18 2021 at 18:40)</a>:</h4>
<blockquote>
<p>should the examples package contain all of the FHIR core resources too?</p>
</blockquote>
<p>Good question, and you're welcome to raise that for R4B/R5, but the packages are published now, so we have to deal with what I did there, and I agree that it's challenging. I have a special rule, that I don't load examples over core. (and someone just found a place where I'm still am, so I need to make another fix in that regard)</p>



<a name="265435196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265435196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265435196">(Dec 18 2021 at 18:41)</a>:</h4>
<blockquote>
<p>should the examples package contain all of the FHIR core resources too?</p>
</blockquote>
<p>totally. Just refer to them by {canonical-root}/{type}/{id} and they should totally work for both validation and presentation. If someone wants to make up an example that shows how they're not working, I'll add it to my todo list</p>



<a name="265531753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reference%20instances%20between%20IGs/near/265531753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thea Mentz Soerensen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reference.20instances.20between.20IGs.html#265531753">(Dec 20 2021 at 08:10)</a>:</h4>
<p>Thank you so much for your answers - they were very helpful!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
