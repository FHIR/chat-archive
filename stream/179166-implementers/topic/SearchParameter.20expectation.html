---
layout: page
title: "FHIR Chat  · SearchParameter expectation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html">SearchParameter expectation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="258204387"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258204387" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258204387">(Oct 19 2021 at 14:30)</a>:</h4>
<p>Yesterday, we had a very deep discussion on FHIR-I call about multipleAnd/multipleOr  in SearchParameter. I am wondering how SearchParameter is used in real world by server and client implementers. For example, US Core defines Patient's name search as <a href="/user_uploads/10155/PP_LemUdaE2sFLz9EmdX3jIw/image.png">image.png</a>. </p>
<div class="message_inline_image"><a href="/user_uploads/10155/PP_LemUdaE2sFLz9EmdX3jIw/image.png" title="image.png"><img src="/user_uploads/10155/PP_LemUdaE2sFLz9EmdX3jIw/image.png"></a></div><p>The name search parameter has <code>multipleAnd: True, Conformance Expectation = MAY)</code>. So it is up to the server implementer to decide if a server instance supports multipleAnd search and the server implementer has to declare his own SearchParameter for patient's name search to make that clear. </p>
<p>Should this searchParameter <code>derivedFrom</code> USCore's patient name search parameter? (I think so)</p>
<p>Can this searchParameter have <code>multipleAnd: False</code>? (I think so too)</p>
<p>I think the problem is that SearchParameter has multiple purpose, just like CapabilityStatement. When used in IG, it is a requirement for server implementation to meet. When used by a server instance, it is a capability the instance support. </p>
<p>I think we should distinguish these two use cases.</p>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191315">@Josh Mandel</span></p>



<a name="258249965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258249965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258249965">(Oct 19 2021 at 18:38)</a>:</h4>
<p>It is important to note that the SP in US Core are for documenting Server <strong>expected</strong> capabilities as Yunwei pointed out.</p>
<blockquote>
<p>Should this searchParameter derivedFrom USCore's patient name search parameter? (I think so)</p>
</blockquote>
<p>They are not intended to be a base SP upon which to be derived.  I would recommend using the base SP instead.</p>



<a name="258258484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258258484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258258484">(Oct 19 2021 at 19:35)</a>:</h4>
<p>That is confusing. A US Core compliant server has a SP not derived from corresponding US Core SP.</p>



<a name="258299507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258299507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258299507">(Oct 20 2021 at 01:35)</a>:</h4>
<p>A US Core compliant server having a SP with the same code as a base SP is implicitly using the base SP not a derived SP.  They can document its capabilities the same way as the IG using the base SP and not US Core.</p>



<a name="258367009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258367009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258367009">(Oct 20 2021 at 13:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191401">Eric Haas</span> <a href="#narrow/stream/179166-implementers/topic/SearchParameter.20expectation/near/258299507">said</a>:</p>
<blockquote>
<p>server having a SP with the same code as a base SP is implicitly using the base SP not a derived SP.  </p>
</blockquote>
<p>Is this written somewhere? <br>
I thought it was the other way.</p>



<a name="258384739"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258384739" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258384739">(Oct 20 2021 at 15:08)</a>:</h4>
<p>That was the result of several chats and from <span class="user-mention" data-user-id="191676">@Lee Surprenant</span> who was all over this.  :-)  bottom line you can't make up your own SP and call the same thing - hows a client to know what its searching for if my <code>patient</code> searches for patient and yours redefined <code>patient</code> searches for status.  But you are correct, the spec only states this obliquely here:</p>
<blockquote>
<p>Also, there is a single page that lists all the search parameters. Note that search parameter names are case sensitive, though this specification never defines different parameters with names that differ only in case. <em>Clients SHOULD use correct case, and servers SHALL not define additional parameters with different meanings with names that only differ in case.</em></p>
</blockquote>
<p>And I cannot find any trackers...</p>



<a name="258418412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258418412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258418412">(Oct 20 2021 at 18:25)</a>:</h4>
<p>You absolutely can make up your own SP and call it the same thing.  The obligation is actually on the client to look at the CapabilityStatement and determine what a given search string corresponds to.  I do agree that it's bad practice to name things the same as an official HL7 search parameter that mean something different, but given that HL7 can define new things in future versions and everyone else can make up search parameters named whatever they like, you <em>can't</em> trust that the meaning of a search string is the same on every server - you must always check the CapabilityStatement and the SearchParameter definitions.</p>



<a name="258433199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258433199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258433199">(Oct 20 2021 at 19:54)</a>:</h4>
<p>Although I personally think those search parameters should be reserved and only mod,  comps, mult ands , mult ors  changeable,  that little nugget should be in the patient safety checklist</p>



<a name="258440106"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258440106" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258440106">(Oct 20 2021 at 20:37)</a>:</h4>
<p>Feel free to submit a change request re: the safety list.<br>
The problem with "reserving names" is that core can introduce new names at any time.  So can HL7 International-published IGs.  So a name that was "free" to use a year ago might conflict with an HL7-defined name today.</p>



<a name="258442583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258442583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258442583">(Oct 20 2021 at 20:54)</a>:</h4>
<p>How about the original question I asked, should we add a <code>.kind</code> (like CapabilityStatement) to indicate this SP is a "requirement" or a "instance"?</p>



<a name="258451769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258451769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258451769">(Oct 20 2021 at 22:05)</a>:</h4>
<p>I don't understand that.  A SearchParameter is always a 'definition' - it's a kind of thing that can be searched upon.  Servers can point to an SP defined in an IG directly.</p>



<a name="258468173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258468173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258468173">(Oct 21 2021 at 00:43)</a>:</h4>
<p>uh-uh ... US Core express expected support of mods, comps, ors and ands. They are not implementable out of the box and have to be transformed to instances.   I think Yunwei's idea has merit.</p>



<a name="258473389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258473389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258473389">(Oct 21 2021 at 01:35)</a>:</h4>
<p>The default is that everything is there - if you support everything, you can use the ones out-of-the-box from the FHIR spec.</p>



<a name="258481854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258481854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258481854">(Oct 21 2021 at 03:26)</a>:</h4>
<p>The default is that everything is there<br>
<span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179166-implementers/topic/SearchParameter.20expectation/near/258473389">said</a>:</p>
<blockquote>
<p>The default is that everything is there - if you support everything, you can use the ones out-of-the-box from the FHIR spec.</p>
</blockquote>
<p>Where is that asserted in the FHIR Spec?  to me that mean all mods, comps, ands and ors and types are supported.</p>



<a name="258540006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258540006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258540006">(Oct 21 2021 at 12:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191320">Lloyd McKenzie</span> <a href="#narrow/stream/179166-implementers/topic/SearchParameter.20expectation/near/258418412">said</a>:</p>
<blockquote>
<p>You absolutely can make up your own SP and call it the same thing.  The obligation is actually on the client to look at the CapabilityStatement and determine what a given search string corresponds to.  I do agree that it's bad practice to name things the same as an official HL7 search parameter that mean something different, but given that HL7 can define new things in future versions and everyone else can make up search parameters named whatever they like, you <em>can't</em> trust that the meaning of a search string is the same on every server - you must always check the CapabilityStatement and the SearchParameter definitions.</p>
</blockquote>
<p>Tips on preventing any future HL7 defined search parameter from stepping on your current custom search parameter. Don't name your search parameter the same as any attribute on any current resource. Name it with your vendor name. Instead of searching for "thething" "epic_thething" it's unlikely that HL7 will ever use a high profile vendor name in a core name.</p>



<a name="258542644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/SearchParameter%20expectation/near/258542644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/SearchParameter.20expectation.html#258542644">(Oct 21 2021 at 13:13)</a>:</h4>
<p>You <em>can</em> do that.  However, the resolution mechanism is still "don't trust the name, look at the declared URL in the CapabilityStatement".</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
