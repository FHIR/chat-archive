---
layout: page
title: "FHIR Chat  · Search - Bundle contents when resources are not visible · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html">Search - Bundle contents when resources are not visible</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="248877978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248877978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248877978">(Aug 09 2021 at 17:12)</a>:</h4>
<p>Supposing a Patient has been taking <strong>paracetamol</strong> and <strong>disulfiram</strong>, but the disulfiram record is tagged as "not for disclosure";<br>
When we query for Patient medications, if the disulfiram is not disclosed, what are the best practices? Should the Bundle contain 1 or 2 entries? Is there interest in saying "total=2", or we really hide from the user that there may be more information?</p>



<a name="248879518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248879518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248879518">(Aug 09 2021 at 17:22)</a>:</h4>
<p>It really depends on policy.  Is there a "break the glass" capability where a provider can get access to the hidden record if they go through a particular process/seek patient consent?  If there's action they could take, then any time there's a circumstance where there <em>might</em> be information not revealed (based on access privileges), there should be a warning in the search response.  E.g. "These search results only contain records that do not have access restrictions.  To access 'restricted' information (if any), record patient consent or invoke emergency break-the-glass procedures."  The search count should represent the records actually available and navigable to - otherwise the client software will get confused.</p>



<a name="248879686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248879686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248879686">(Aug 09 2021 at 17:23)</a>:</h4>
<p>Presuming there is a break-thee-glass, is there any standard way to say "other records may exist"?</p>



<a name="248881299"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248881299" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248881299">(Aug 09 2021 at 17:35)</a>:</h4>
<p>'warning' OperationOutcome in the search-set Bundle is the best way.</p>



<a name="248887238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248887238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248887238">(Aug 09 2021 at 18:24)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> No there is not an agreed way to do this.</p>



<a name="248887818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248887818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248887818">(Aug 09 2021 at 18:26)</a>:</h4>
<p>First, note that there is no good reason to tell a user that they are receiving less than total data, unless there is some policy that indicates that the user is allowed to know this. Many (most) users will not be allowed to know that they are receiving less than full data. The users that might, are clinicians with privilege to elevate their active privilege (e.g. break-glass). It is only this subset of users that there is any legitimate reason to tell them that there is more data available.</p>



<a name="248888052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248888052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248888052">(Aug 09 2021 at 18:29)</a>:</h4>
<p>Second, there are plenty of stories that when a clinician, who was not authorized to invoke break-glass, was told that they were not seeing everything, these users would obsess on this lack of information and fail to properly review the information they were given. Thus these sites had explicitly turned OFF this, and therefore would never tell a user that was not authorized to break-glass when they were not being given everything.</p>



<a name="248888385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248888385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248888385">(Aug 09 2021 at 18:31)</a>:</h4>
<p>Third, it is unusual for clinicians to be restricted from seeing safety critical information. I have seen discussed that drug/allergy/intolerance interactions would never be blinded... This gets to Lloyds point about policy... any policy that would enable a blinding to a treating clinician had better have the rules clearly stated when that data being blinded would have a safety impact.</p>



<a name="248888573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248888573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248888573">(Aug 09 2021 at 18:32)</a>:</h4>
<p>Ok, assuming that such policy would exist (some users see the warning, some users don't see the warning) <br>
I wanted to see if there is / should be a standard way to tell those privileged users "there may be more than this", because this would drive behaviour, and the trigger for that behaviour should be somewhat known/standardized, right?</p>



<a name="248888585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248888585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248888585">(Aug 09 2021 at 18:32)</a>:</h4>
<p>Fourth, often policy has a different category for clinician with a legitimate treatment relationship, vs all other clinicians. Where the first group is never blinded. Any patient concern with someone that might be in this first group is enough to eliminate them completely.</p>



<a name="248888612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248888612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248888612">(Aug 09 2021 at 18:33)</a>:</h4>
<p>YES, I think there should be a defined method</p>



<a name="248888630"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248888630" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248888630">(Aug 09 2021 at 18:33)</a>:</h4>
<p>but there is not one yet</p>



<a name="248888668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248888668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248888668">(Aug 09 2021 at 18:33)</a>:</h4>
<p>i don't know of a leading potential.</p>



<a name="248888832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248888832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248888832">(Aug 09 2021 at 18:34)</a>:</h4>
<p>Hence the use case disulfiram - everyone wants to see all the medication of a patient, but a drug that is used to treat alcoholism problems may pose such challenges.</p>



<a name="248888973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248888973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248888973">(Aug 09 2021 at 18:35)</a>:</h4>
<p><a href="http://bundle.meta.security">bundle.meta.security</a> -- tag REDACTED</p>



<a name="248889142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248889142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248889142">(Aug 09 2021 at 18:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191832">Jose Costa Teixeira</span> <a href="#narrow/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible/near/248888832">said</a>:</p>
<blockquote>
<p>Hence the use case disulfiram - everyone wants to see all the medication of a patient, but a drug that is used to treat alcoholism problems may pose such challenges.</p>
</blockquote>
<p>I agree.. hence why this is not a policy that HL7 should state... And why I caution anyone that wants to blind this data to also address the safety concerns with the privacy concerns, and address it relevant to treating clinicians</p>



<a name="248889342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248889342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248889342">(Aug 09 2021 at 18:38)</a>:</h4>
<p>but.. Your concuding point is something I can agree with.... Given that there is some policy that would apply to a treatment case with a clinician user... and that policy allows the clinician user to be told that there is data being blinded... and that clinician does have break-glass capability... then HOW would the results of the search indicate less than full data was returned</p>



<a name="248889443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248889443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248889443">(Aug 09 2021 at 18:39)</a>:</h4>
<p>thus.. NOT a non-treatment case, NOT a non-clinical user, NOT a clinical user without break-glass authorization.</p>



<a name="248889572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248889572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248889572">(Aug 09 2021 at 18:40)</a>:</h4>
<p>I gravitate towards using <a href="http://bundle.meta.security">bundle.meta.security</a>... I am not confident that REDACTED is the best code, there likely needs to be one defined that does not yet exist.</p>



<a name="248889798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248889798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248889798">(Aug 09 2021 at 18:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191920">@Mohammad Jafari</span> do you have a pattern you used?</p>



<a name="248891435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248891435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248891435">(Aug 09 2021 at 18:55)</a>:</h4>
<p>Here is my proposal in 2015 <a href="https://healthcaresecprivacy.blogspot.com/2015/12/break-glass-on-fhir-solution.html">https://healthcaresecprivacy.blogspot.com/2015/12/break-glass-on-fhir-solution.html</a></p>



<a name="248891467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248891467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248891467">(Aug 09 2021 at 18:55)</a>:</h4>
<p>the break-glass section in the FHIR core <a href="http://build.fhir.org/security-labels.html#break-the-glass">http://build.fhir.org/security-labels.html#break-the-glass</a><br>
has an example operationOutcome</p>



<a name="248891683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248891683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248891683">(Aug 09 2021 at 18:57)</a>:</h4>
<p>which gets to the point.... that to have standardized return code, will directly lead to a need for a standardized break-glass.</p>



<a name="248891791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/248891791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#248891791">(Aug 09 2021 at 18:58)</a>:</h4>
<p>I am not against it, but am not going to dictate alone except in my blog. Meaning, I welcome discussion and consensus solution development.</p>



<a name="249881099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Search%20-%20Bundle%20contents%20when%20resources%20are%20not%20visible/near/249881099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mohammad Jafari <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Search.20-.20Bundle.20contents.20when.20resources.20are.20not.20visible.html#249881099">(Aug 18 2021 at 17:09)</a>:</h4>
<p>There was no use-case for me where the user had to be informed of the redaction after the redaction takes place --note that informing the recipient of the very fact that there has been a redaction can compromise privacy because it can be indicative that the record includes certain sensitive conditions. <br>
However, in an old pilot of a security labeling system we implemented, we used the <code>masked</code> <a href="http://hl7.org/fhir/v3/NullFlavor/cs.html">null flavour</a> as a code to indicated some information has been removed  for privacy reasons.<br>
In <a href="https://github.com/mojitoj/pauldron/tree/master/pauldron-hearth">Pauldron Hearth</a>, I simply remove the <code>total</code> attribute from the Bundle since it's optional. Note that since pauldron hearth is a proxy, it can only see the HTTP response and doesn't have any way to know the total number of resources to be returned if there are more than one page of results in the bundle.<br>
In the of multi-page results, there is still the risk of inference since a result page with redactions will have fewer resources than a normal page (since servers usually return pages of the same size when paginating)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
