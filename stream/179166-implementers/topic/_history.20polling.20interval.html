---
layout: page
title: "FHIR Chat  · _history polling interval · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html">_history polling interval</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153865263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865263">(Jan 03 2017 at 12:46)</a>:</h4>
<p>When using the _history interaction to poll a server for changes, how can I know up until which exact time the server reported the changes?<br>
E.g. I'm querying <br>
<a href="http://fhir3.healthintersections.com.au/open/Observation/_history?_since=2017-01-03T13:00:00.000Z+01:00" target="_blank" title="http://fhir3.healthintersections.com.au/open/Observation/_history?_since=2017-01-03T13:00:00.000Z+01:00">http://fhir3.healthintersections.com.au/open/Observation/_history?_since=2017-01-03T13:00:00.000Z+01:00</a><br>
With the next query interval, I want to make sure, I'm missing nothing, so which timestamp should I use?</p>
<p>Using the time at which I sent the last query seems unsafe to me.</p>



<a name="153865264"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865264" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865264">(Jan 03 2017 at 12:48)</a>:</h4>
<p>I noticed, that when I call the _history without parameters, Grahame's server returned a "_prior" timestamp in the url of the returned bundle. That would be pretty much exactly what I'm looking for, however, this is not documented in the spec.</p>



<a name="153865266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865266">(Jan 03 2017 at 12:50)</a>:</h4>
<p><a href="/user_uploads/10155/d3mONXxy1iqAc9EQUxS8q7M4/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/d3mONXxy1iqAc9EQUxS8q7M4/pasted_image.png" target="_blank" title="pasted_image.png"><img src="/user_uploads/10155/d3mONXxy1iqAc9EQUxS8q7M4/pasted_image.png"></a></div>



<a name="153865267"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865267" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865267">(Jan 03 2017 at 12:53)</a>:</h4>
<p>Ah, I get the _prior parameter added by Grahame's server if I call _history with params also, except that there's the "&amp;" missing between _since and _prior!<br>
<a href="/user_uploads/10155/YWzauJDK9JMgJOoHVhI8CFJQ/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/YWzauJDK9JMgJOoHVhI8CFJQ/pasted_image.png" target="_blank" title="pasted_image.png"><img src="/user_uploads/10155/YWzauJDK9JMgJOoHVhI8CFJQ/pasted_image.png"></a></div>



<a name="153865269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865269">(Jan 03 2017 at 13:06)</a>:</h4>
<p>HAPI does not return a _prior parameter. But in turn I get a  value for Bundle.meta.lastUpdated, that I could (safely?) use.</p>



<a name="153865270"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865270" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865270">(Jan 03 2017 at 13:08)</a>:</h4>
<p>brings me to another question: If I receive multipaged bundles, are the timestamps for Bundle.meta.lastUpdated the same for every page?<br>
If not: which one represents the exact time at which the result (total count) was composed/valid?</p>



<a name="153865283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865283">(Jan 03 2017 at 18:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> : Due to this issue, all of the self/first/next/last links in the history bundle from your server are broken...</p>



<a name="153865291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865291">(Jan 03 2017 at 20:01)</a>:</h4>
<p>I'll fix the bug in _prior. I would think that you would use the date header in the response as your time</p>



<a name="153865295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865295">(Jan 03 2017 at 20:04)</a>:</h4>
<p>Rrrr.. the one timestamp that's not properly formatted to use as parameter for the next call :P</p>



<a name="153865301"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865301" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865301">(Jan 03 2017 at 20:11)</a>:</h4>
<p>where is not it not formatted properly?</p>



<a name="153865303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865303">(Jan 03 2017 at 20:12)</a>:</h4>
<p>in the http header?</p>



<a name="153865304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865304">(Jan 03 2017 at 20:12)</a>:</h4>
<p>yes</p>



<a name="153865305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865305">(Jan 03 2017 at 20:12)</a>:</h4>
<p>not formatted the same, right</p>



<a name="153865394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865394">(Jan 04 2017 at 05:45)</a>:</h4>
<p>I've been using the last meta last modified from the bundle</p>



<a name="153865431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865431">(Jan 04 2017 at 13:24)</a>:</h4>
<p>Grahame's Server doesn't return bundle.meta.lastUpdated.<br>
But if I get you right, you're using bundle.entry.resource.meta.lastUpdated of the last entry on the last page of the results?</p>



<a name="153865433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865433">(Jan 04 2017 at 13:29)</a>:</h4>
<p>What do you do if there are no results? Make the Server check again in the next polling period? ;-)<br>
Like: "Really? NOTHING!?!"</p>



<a name="153865469"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865469" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865469">(Jan 04 2017 at 20:10)</a>:</h4>
<p>why wouldn't you poll again? I poll quicker if I got something than if I didn't. </p>



<a name="153865470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865470">(Jan 04 2017 at 20:11)</a>:</h4>
<p>my server will start returning meta.lastUpdated in the future</p>



<a name="153865472"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865472" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865472">(Jan 04 2017 at 20:14)</a>:</h4>
<p>Well, in a scenario where very few changes ever happen but you poll with short intervals, it wouldn't be very economic to poll the same interval over and over again, even though you already know that nothing happened during that period.</p>



<a name="153865474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865474">(Jan 04 2017 at 20:15)</a>:</h4>
<p>Thanks for adding meta.lastUpdated. That seems he easiest and most reliable way for me (even though I already implemented using the HTTP Date header yesterday)</p>



<a name="153865475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865475">(Jan 04 2017 at 20:15)</a>:</h4>
<p>yes. that's why to delay if nothing. In fact, I sometimes let polling gradually get longer to a pre-defined limit if nothing is happening. I think gmail has the same approach if it can't contact the server</p>



<a name="153865621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/_history%20polling%20interval/near/153865621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/_history.20polling.20interval.html#153865621">(Jan 04 2017 at 23:52)</a>:</h4>
<p>Good case for long-polling</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
