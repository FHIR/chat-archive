---
layout: page
title: "FHIR Chat  · 64-bit integer types · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html">64-bit integer types</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="180458162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180458162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180458162">(Nov 11 2019 at 20:42)</a>:</h4>
<p>Came across the need to describe event counts in subscriptions, and the integer value types only go to 32-bit, which will overflow in production systems.</p>
<p>As a workaround, we are using the decimal type with guidance that only integer values should be used, but using decimal has performance implications.</p>
<p>Thought I'd ask here for thoughts/comments/questions (unless there is somewhere more appropriate).  Thanks!</p>



<a name="180460274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180460274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180460274">(Nov 11 2019 at 21:12)</a>:</h4>
<p>where do we need to describe event counts in subscriptions?</p>



<a name="180461191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180461191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180461191">(Nov 11 2019 at 21:23)</a>:</h4>
<p>There's a sequence number sent to clients so they know if they have missed anything.  Right now it is defined as both a field on <a href="http://build.fhir.org/branches/argonaut-subscription/subscription-definitions.html#Subscription.eventCount" target="_blank" title="http://build.fhir.org/branches/argonaut-subscription/subscription-definitions.html#Subscription.eventCount">Subscription</a> (to discover current state) and an <a href="http://build.fhir.org/branches/argonaut-subscription/extension-subscription-event-count.html" target="_blank" title="http://build.fhir.org/branches/argonaut-subscription/extension-subscription-event-count.html">extension on bundle</a> (for inclusion in notifications).</p>



<a name="180461423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180461423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180461423">(Nov 11 2019 at 21:26)</a>:</h4>
<p>a sequence number for each subscription? and that will roll over past 2^32?</p>



<a name="180461577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180461577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180461577">(Nov 11 2019 at 21:28)</a>:</h4>
<p>That's feedback we've been getting, yes.</p>



<a name="180464263"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180464263" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180464263">(Nov 11 2019 at 22:05)</a>:</h4>
<p>hmm</p>



<a name="180465016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180465016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180465016">(Nov 11 2019 at 22:17)</a>:</h4>
<p>It's only 2^31. We have had FHIR stores with more than 2^31 resources in them. If you're doing 1000 operations per second it rolls over in less than a month. It's just not a large enough number.</p>
<p>If Subscriptions are only used at the patient level then this doesn't become a problem, but there are use cases with much broader criteria.</p>



<a name="180465721"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180465721" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180465721">(Nov 11 2019 at 22:27)</a>:</h4>
<p>Oh I'm sure the stores roll over that fast. And the total subscription count will too. but on a specific subscription.. not so obvious.</p>



<a name="180465761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180465761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180465761">(Nov 11 2019 at 22:27)</a>:</h4>
<p>anyway I'd rather use string than decimal, and either change the range of int of introduce a new type in R5</p>



<a name="180523280"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180523280" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180523280">(Nov 12 2019 at 14:48)</a>:</h4>
<p>Created <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25208" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25208">GF#25208</a></p>



<a name="180637627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180637627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180637627">(Nov 13 2019 at 15:31)</a>:</h4>
<blockquote>
<p>anyway I'd rather use string than decimal, and either change the range of int of introduce a new type in R5</p>
</blockquote>
<p>Can you say more about why string? Are you thinking the new R5 "int64" type would also have a string representation in JSON? Because if not, we would be changing the serialization in addition to the models.</p>



<a name="180668935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180668935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180668935">(Nov 13 2019 at 20:33)</a>:</h4>
<p>if it's an extension you'll be changing the serialisation anyway</p>



<a name="180669310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/180669310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#180669310">(Nov 13 2019 at 20:37)</a>:</h4>
<p>I figured that going with string would avoid the weirdities of decimals and variable precision, but it looks like we can at least claim that [-(2<strong>53)+1, (2</strong>53)-1] would be expected to be supported</p>



<a name="181049694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/181049694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#181049694">(Nov 18 2019 at 19:52)</a>:</h4>
<p>Yeah, I wasn't imagining an extension in the interim; was imaginging <code>decimal</code> in the interim.</p>



<a name="181049730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/181049730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#181049730">(Nov 18 2019 at 19:53)</a>:</h4>
<p>it's already an extension, no?</p>



<a name="181050021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/181050021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#181050021">(Nov 18 2019 at 19:56)</a>:</h4>
<p>I mean, <code>Subscription.eventCount</code> in the current build is an unsignedInt (<a href="http://build.fhir.org/subscription-definitions.html#Subscription.eventCount" target="_blank" title="http://build.fhir.org/subscription-definitions.html#Subscription.eventCount">http://build.fhir.org/subscription-definitions.html#Subscription.eventCount</a>), and we've been talking about switching to decimal.</p>



<a name="181050052"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/181050052" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#181050052">(Nov 18 2019 at 19:57)</a>:</h4>
<p>(There's also a way to convey this inline with each notification, as <a href="https://build.fhir.org/extension-bundle-event-count-definitions.html#extension.bundle-event-count" target="_blank" title="https://build.fhir.org/extension-bundle-event-count-definitions.html#extension.bundle-event-count">https://build.fhir.org/extension-bundle-event-count-definitions.html#extension.bundle-event-count</a> -- but this uses the same datatype as Subscription.eventCount.)</p>



<a name="181050126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/181050126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#181050126">(Nov 18 2019 at 19:58)</a>:</h4>
<p>ok well, I guess the serialization of the extension in bundle is going to change whatever but the json type doesn't change if you use decimal</p>



<a name="181050162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/181050162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#181050162">(Nov 18 2019 at 19:58)</a>:</h4>
<p>I don't know if any json implementations have problems with lossy precision for high values of decimals</p>



<a name="181055874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/181055874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#181055874">(Nov 18 2019 at 21:06)</a>:</h4>
<p>The default NSJSONSerialization library on iOS / macOS has problems with those because it uses doubles internally.</p>



<a name="181711964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/181711964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#181711964">(Nov 23 2019 at 11:27)</a>:</h4>
<p>also why no LongType in fhir base types ? Using decimal is a poor workaround</p>



<a name="181715662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/181715662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#181715662">(Nov 23 2019 at 13:20)</a>:</h4>
<p>No one had identified a use case. But here we have one, so we’re talking about it. But JSON doesn’t have it...</p>



<a name="181838290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/64-bit%20integer%20types/near/181838290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Florian Briand <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/64-bit.20integer.20types.html#181838290">(Nov 25 2019 at 16:28)</a>:</h4>
<p>With JSON, the community used to store "real life decimals" as string, because in most of the case, the loss dues to binary numeric precision is not acceptable.</p>
<p>The problem is well explained on this stackoverflow thread : <a href="https://stackoverflow.com/questions/35709595/why-would-you-use-a-string-in-json-to-represent-a-decimal-number" target="_blank" title="https://stackoverflow.com/questions/35709595/why-would-you-use-a-string-in-json-to-represent-a-decimal-number">https://stackoverflow.com/questions/35709595/why-would-you-use-a-string-in-json-to-represent-a-decimal-number</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
