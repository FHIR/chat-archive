---
layout: page
title: "FHIR Chat  · Different versions in and out for operations · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20versions.20in.20and.20out.20for.20operations.html">Different versions in and out for operations</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="179266867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20versions%20in%20and%20out%20for%20operations/near/179266867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20versions.20in.20and.20out.20for.20operations.html#179266867">(Oct 28 2019 at 19:33)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20912" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20912">GF#20912</a> notes that we currently say that it's an error to have an interaction that supports multiple versions - i.e. the Content-Type and Accept headers aren't for the same version.  However, we have a $convert operation that does exactly that.  We're wondering whether we should just carve out an exception for that one operation or whether it's appropriate to loosen the rule to allow version mixing in other situations.  If we loosen the rule, we'd also need to define how we wanted to enforce constraints so version mixing only occurs in appropriate circumstances and in appropriate ways</p>



<a name="179282178"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20versions%20in%20and%20out%20for%20operations/near/179282178" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20versions.20in.20and.20out.20for.20operations.html#179282178">(Oct 28 2019 at 22:22)</a>:</h4>
<p>yes</p>



<a name="179297068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20versions%20in%20and%20out%20for%20operations/near/179297068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20versions.20in.20and.20out.20for.20operations.html#179297068">(Oct 29 2019 at 03:21)</a>:</h4>
<p>That's an interesting answer to an either/or question <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  :)</p>



<a name="179297148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20versions%20in%20and%20out%20for%20operations/near/179297148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20versions.20in.20and.20out.20for.20operations.html#179297148">(Oct 29 2019 at 03:23)</a>:</h4>
<p>yep</p>



<a name="179312704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20versions%20in%20and%20out%20for%20operations/near/179312704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20versions.20in.20and.20out.20for.20operations.html#179312704">(Oct 29 2019 at 09:35)</a>:</h4>
<p>I can also imagine $transform uses with different fhirVersions (use this R4 StructureMap to map the input to an R3 Resource).<br>
For all the normal http interactions I don't really see a use for it, nor for any of the other operations defined in the spec.<br>
So I would suggest that all http interactions and predefined operations SHOULD have the same fhirVersion on Content-Type and Accept, except for $convert and $transform. Besided that, custom operations MAY accept different fhirVersions on Content-Type and Accept.<br>
But that leaves the question on how an operation can define that it accepts different versions.</p>



<a name="179322982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20versions%20in%20and%20out%20for%20operations/near/179322982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20versions.20in.20and.20out.20for.20operations.html#179322982">(Oct 29 2019 at 12:14)</a>:</h4>
<p>In my limited opinion, you should be loosening the rule in either case.  You either loosen it so that only $convert can function (and any that follow it's strict interaction rules) or further if there are other operations that might benefit it.  I don't think starting a potential list of exemptions would be a good way forward</p>



<a name="179324159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20versions%20in%20and%20out%20for%20operations/near/179324159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20versions.20in.20and.20out.20for.20operations.html#179324159">(Oct 29 2019 at 12:35)</a>:</h4>
<p>The core specification should not speak about deployment issues. It is a core spec. An implementation guide certainly can speak of deployment issues. Thus the core spec should not state that it is an error to have an interaction with multiple versions. It should have a well-defined error to indicate this condition, but it should not mandate any specific condition. It could use an example that is the one we describe today.</p>



<a name="179365418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Different%20versions%20in%20and%20out%20for%20operations/near/179365418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Different.20versions.20in.20and.20out.20for.20operations.html#179365418">(Oct 29 2019 at 19:31)</a>:</h4>
<p>I don't see that this is a deployment issue. It's a fundamental issue of definition of the API - when can you mix versions on a call</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
