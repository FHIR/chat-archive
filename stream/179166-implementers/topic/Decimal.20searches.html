---
layout: page
title: "FHIR Chat  · Decimal searches · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html">Decimal searches</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153985602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Decimal%20searches/near/153985602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Munini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html#153985602">(Aug 13 2018 at 01:19)</a>:</h4>
<p>I'm trying to better understand the intent of the implicit range concept for decimals described here:  <a href="http://build.fhir.org/search.html#number" target="_blank" title="http://build.fhir.org/search.html#number">http://build.fhir.org/search.html#number</a></p>
<p>Three examples are provided:<br>
[parameter]=100 Values that equal 100, to 3 significant figures precision, so this is actually searching for values in the range [99.5 ... 100.5)<br>
[parameter]=100.00  Values that equal 100, to 5 significant figures precision, so this is actually searching for values in the range [99.995 ... 100.005)<br>
[parameter]=1e2 Values that equal 100, to 1 significant figures precision, so this is actually searching for values in the range [95 ... 105)</p>
<p>Q1: I can't seem to locate anywhere (except in the examples) the definition of the size of the implicit range.  It seems to be dependent on the number of digits of the provided search parameter, but limited to 1 for the exponential form?</p>
<p>Q2:  I don't think that the prefixes sa and eb apply to the decimal data type - they only apply to date-oriented searches, correct?  The spec is a little confusing here because right after the definitions of sa and eb, it talks about implicit and explicit ranges, and provides an example "2.0 has an implicit range of 1.95 to 2.05"</p>
<p>Q3:  What is the value/intent of an implicit range on decimals for searching?  It seems to confuse things.  If someone wanted to find a value in that range, wouldn't they create a query similar to this: .../RiskAssessment?probability=gt99.5&amp;probability=lt100.5</p>



<a name="153985607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Decimal%20searches/near/153985607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html#153985607">(Aug 13 2018 at 01:53)</a>:</h4>
<p>The number of significant digits is the number of digits specified, excluding leading zeros.  So 100 and 1.00e2 both have the same number of significant digits.  We'd assumed that would be understood, but sounds like we need to make it explicit.  Can you submit a change request for us to make it so?</p>



<a name="153985608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Decimal%20searches/near/153985608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Munini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html#153985608">(Aug 13 2018 at 02:19)</a>:</h4>
<p>I would be happy to, Lloyd, but I guess I have a 4th question now...  If someone is searching for [parmeter]=100 on a decimal, they are going to get values in the range of 99.5 to 100.5, and not an exact match?  Isn't that going to cause a mess for clients?  They will need to iterate through results to find the exact match.  In the notes section of the datatypes page, it says "Implementations SHALL handle decimal values in ways that preserve and respect the precision of the value as represented for presentation purposes" Why doesn't the same apply to search parameter values?</p>



<a name="153985610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Decimal%20searches/near/153985610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html#153985610">(Aug 13 2018 at 02:22)</a>:</h4>
<p>The logic is that with decimal, there's no such thing as "exact match".  All decimal values are expressed to some level of precision based on the capabilities of the system or individual making the measurement.  So when you have a systolic blood pressure of "110 mmHg", that's not *exactly 110.0000000000"  It's some value that was greater or equal to 109.5 and less than 110.5.  If you do a search on 110 mmHg, you certainly wouldn't want to exclude a measurement that was 110.1 or 110.02.</p>



<a name="153985611"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Decimal%20searches/near/153985611" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html#153985611">(Aug 13 2018 at 02:22)</a>:</h4>
<p>(Though in practice, doing exact searches on decimal values is a rather uncommon thing to do - generally you check for things in a range.)</p>



<a name="153985613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Decimal%20searches/near/153985613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Munini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html#153985613">(Aug 13 2018 at 02:27)</a>:</h4>
<p>I see your point, however the counter argument is that .../RiskAssessment?probability=100 is going to return a lot of values that are not 100.</p>



<a name="153985614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Decimal%20searches/near/153985614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Munini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html#153985614">(Aug 13 2018 at 02:29)</a>:</h4>
<p>Lloyd, can you answer Q2 above too, please?  I'm still confused on that.  sa and eb do not apply to number search types, only dates, correct?</p>



<a name="153985615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Decimal%20searches/near/153985615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html#153985615">(Aug 13 2018 at 02:34)</a>:</h4>
<p>If you want to narrow your range, just specify a large precision.  E.g. RiskAssessment?probability=100.000000</p>
<p>My read is that sa and eb are only for date and time-related data types.  If you think this needs clarification, you can submit a change request for that too :)</p>



<a name="153985623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Decimal%20searches/near/153985623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Munini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html#153985623">(Aug 13 2018 at 02:55)</a>:</h4>
<p>Thanks Lloyd.<br>
Significant Figure item:  <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17668" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17668">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17668</a><br>
sa and eb item:  <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17669" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17669">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17669</a></p>



<a name="153985651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Decimal%20searches/near/153985651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrik Sundberg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html#153985651">(Aug 13 2018 at 06:01)</a>:</h4>
<p>a follow-up to this because now i'm confused: <a href="https://www.hl7.org/fhir/datatypes.html#decimal" target="_blank" title="https://www.hl7.org/fhir/datatypes.html#decimal">https://www.hl7.org/fhir/datatypes.html#decimal</a> states that a decimal is defined as "xs:decimal, except that decimals may not use exponents, ..."</p>
<p>so why would a search for 1e2 or 1.00e2 be allowed?</p>



<a name="153985658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Decimal%20searches/near/153985658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Decimal.20searches.html#153985658">(Aug 13 2018 at 06:05)</a>:</h4>
<p>Look at <a href="http://build.fhir.org" target="_blank" title="http://build.fhir.org">build.fhir.org</a> - we've changed the rule</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
