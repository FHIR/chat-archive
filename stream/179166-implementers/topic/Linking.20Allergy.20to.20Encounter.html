---
layout: page
title: "FHIR Chat  · Linking Allergy to Encounter · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html">Linking Allergy to Encounter</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153928875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153928875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Barnet <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153928875">(Jan 15 2018 at 15:43)</a>:</h4>
<p>Hopefully a very quick question. How do you link an allergy to the encounter that asserted the allergy? I can see that "similar" resources such as Observation, Condition, Immunization etc. all have an Encounter reference, but not AllergyIntolerance.</p>



<a name="153928880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153928880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153928880">(Jan 15 2018 at 15:54)</a>:</h4>
<p>So far we haven't seen that's a requirement for most systems - i.e. it doesn't meet the 80% rule of "most systems capture this".  If you think that assessment is in error, you can certainly raise a change request.  Alternatively you could raise a change request asking for a standard extension.</p>



<a name="153928893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153928893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Stenerson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153928893">(Jan 15 2018 at 16:53)</a>:</h4>
<p>Likewise AdverseEvent does not have a context reference. I ran into this recently when trying to link therapy related toxicity that is 'unnacceptable to patient' in chemotherapy to it's occurrence, ie which line of therapy did it happen during. I have created a condition profile with a category of 'therapy related toxicity' and a context reference.</p>



<a name="153928900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153928900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153928900">(Jan 15 2018 at 17:56)</a>:</h4>
<p>AdverseEvent is an event resource from a FHIR workflow perspective but has not yet been mapped to it and I think  the lack of a context  sounds like an critically important omission to this draft resource -  make a change request to add it.</p>



<a name="153928906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153928906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153928906">(Jan 15 2018 at 18:37)</a>:</h4>
<p>Agree.  Linking AdverseEvent to an encounter definitely sounds like part of the 80%.</p>



<a name="153929092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153929092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Stenerson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153929092">(Jan 16 2018 at 16:48)</a>:</h4>
<p><a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14458" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14458">#14458</a></p>



<a name="153929115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153929115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153929115">(Jan 16 2018 at 19:53)</a>:</h4>
<p>Thanks</p>



<a name="153929345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153929345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Russell Leftwich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153929345">(Jan 17 2018 at 20:36)</a>:</h4>
<p>Clinically linking Allergy to the encounter would be a requirement, since the details of the reaction are in the encounter.  And an allergy reaction is different from an AdverseEvent only in that the allergy reaction is not an AdverseEvent the first time because no one knew the patient had an allergy.</p>



<a name="153929388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153929388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153929388">(Jan 18 2018 at 05:24)</a>:</h4>
<p>Reactions would certainly be tied to an encounter.  But the assertion of an allergy may well happen at a different time than the recording of the reactions.  Reactions would typically be captured as Observations or possibly Conditions.  Is it common for systems to tie an allergy itself to an encounter?  (It's not something I've seen.)</p>



<a name="153929395"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153929395" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153929395">(Jan 18 2018 at 06:11)</a>:</h4>
<p>In NZ, the GP2GP Data Model allows just about all clinical entries (including allergies) to be related to a primary care encounter. If treating a patient for the first time, a GP will commonly ask if that patient has any allergies and record them (or absence thereof) with the underlying PMS creating the links. Of course, these are patient assertions, but I'd say they account for a significant % of allergies &amp; intolerances recorded in EHRs.</p>



<a name="153929517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153929517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153929517">(Jan 18 2018 at 21:12)</a>:</h4>
<p>Yes, our EHR can associate an encounter with an allergy (and I have seen it done with other EHRs, too, who send us allergy data to aggregate in our population health platform).</p>



<a name="153929584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153929584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153929584">(Jan 19 2018 at 10:19)</a>:</h4>
<p>I think it's slippery associating an allergy risk to an encounter. What does it mean:<br>
- the allergy was asserted during an encounter?<br>
- the allergy was asserted because of an encounter?<br>
- the allergy was the cause of an encounter?<br>
- the allergy was informed of during an encounter?<br>
- the allergy was caused by an encounter?</p>



<a name="153929632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153929632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153929632">(Jan 19 2018 at 15:59)</a>:</h4>
<p>In our EHR, the allergy is documented during that encounter.</p>



<a name="153929728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153929728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153929728">(Jan 19 2018 at 20:27)</a>:</h4>
<p>If EHRs made a clear distinction between Adverse Reactions and Allergies (risk of AR in the future if exposed to xx substance) the answers to Grahame's question would be clearer. Patients assert that they have allergies during encounters; presenting complaints are more likely to be ARs (might be the result of a known risk); an AR might happen during an encounter and might be directly or indirectly caused by one (e.g. prescribed medication).  Unfortunately, even though FHIR contains some degree of separation, it is only possible to attach Adverse Reactions to an AllergyIntolerance resource, hence the need to link AllergyIntolerance resources to an Encounter to cover all of these use cases.</p>



<a name="153929765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153929765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153929765">(Jan 20 2018 at 05:24)</a>:</h4>
<p>Peter - I assumed that the distinction was clear, and was only asking about the 'risk of  x' case. Permutating with event vs condition only makes thing worse</p>



<a name="153929882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153929882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Russell Leftwich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153929882">(Jan 21 2018 at 22:59)</a>:</h4>
<p>The 'risk of x' is a clinical judgement by the provider.  If the risk is a potential allergic reaction and the provider is a downstream provider contemplating administering a medication on the patient's allergy list then x can only reasonably be estimated with knowledge of the original assertion of the allergy.  That would seem to be by referencing the encounter where the allergy was asserted.  The alternative of asking the patient for details that they may not recall or may never have known is far less satisfactory in most cases.  Of course, over 80% of systems do allow you to do that.</p>



<a name="153930335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153930335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Stenerson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153930335">(Jan 23 2018 at 16:26)</a>:</h4>
<p>I have a related use case that I'm not sure how to classify in FHIR. Can anyone suggest an approach?</p>
<p>"If the patient is unable to tolerate Dabrafenib + trametinib,  single agent dabrafenib or vemurafenib are options". <br>
Dabrafenib+Trametinib are not a combination drug AFAIK, so to hold both in a single code, one would need to be created. </p>
<p>So the patient is given a combination drug and is unable to tolerate the combination, but one of the single agents is acceptable. Here the patient could end up with a Condition or an Observation of a symptom. May have an AllergyIntolerance asserted, and this may also be considered an AdverseEvent.</p>
<p>The condition has no link to the agents that caused it, but could be inferred because it is linked to a follow up encounter for that regimen or line of therapy. <br>
The AllergyIntolerance has no link to the point in the workflow where it was asserted (so I don't know which line of therapy this occured during). Also, I'm unsure if AllergyIntolerance can hold agent combinations in the code. It also does not have a link to a Condition or Observation that caused the assertion, but can code the causal substance.</p>
<p>Would this qualify as an AdverseEvent? An expected toxicity, intolerable to the patient. No medical errors were made, but I think it still qualifies. This resource also suffers from the 'can I put a combination of agents in the suspectEntity'. AdverseEvent can also reference the condition, if this is an AdverseEvent, and will hopefully have a context reference. I use the context to determine the line of therapy these events occurred at. (in a decision support system)</p>
<p>I guess I'm not suggesting any particular changes, but hoping someone has suggestions on the proper way to handle the above clinical statement in FHIR (taken from a lung cancer guideline). Thanks</p>



<a name="153930353"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153930353" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153930353">(Jan 23 2018 at 17:01)</a>:</h4>
<p>This is fairly complicated, but I'll take a stab at part of it.  I think what you are describing would be what could be thought of as a "conditional intolerance" - which is something that I don't believe we've addressed.  The idea is that there is an intolerance to dabrafenib <strong>if</strong> the patient is concurrently taking trametinib (and vice versa).  I don't think it would be a good idea to try represent this as an intolerance to the agents as a combination, because that is not how they are supplied, ordered or administered.   Representing the "conditional intolerance" would then be something that I think you would do in the extension space (at least at present), as the AllergyIntolerance resource doesn't have a mechanism for representing a precondition for the specified allergy or intolerance.</p>



<a name="153930654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153930654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153930654">(Jan 25 2018 at 04:56)</a>:</h4>
<p>One option would be to create two instances of <code>AllergyIntolerance</code>, one for each of the substances, and add notes to both that this problem only occurs in combination with the other substance.<br>
So you would create </p>
<div class="codehilite"><pre><span></span>AllergyIntolerance
.code = Dabrafenib
.note = &quot;Problem when used in combination with trametinib. No problems when used alone.&quot;
</pre></div>


<p>etc.</p>



<a name="153930696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153930696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153930696">(Jan 25 2018 at 14:27)</a>:</h4>
<p>Yes, that's a somewhat simpler and "lighter" approach to representing the "conditional intolerance".  Plus, of course, it's available right now without requiring an extension.  The downside, though, would potentially be that it wouldn't behave correctly with allergy/intolerance decision support applications, as false alerts would be expected to be generated for dabrafenib and trametinib alone as well as in combination.</p>



<a name="153930817"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153930817" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153930817">(Jan 26 2018 at 13:36)</a>:</h4>
<p>FYI - Yesterday, Patient Care approved both <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14566" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14566">GF#14566</a> and <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14458" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14458">GF#14458</a> to support referencing the Encounter from both AllergyIntolerance and AdverseEvent.</p>



<a name="153930823"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153930823" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153930823">(Jan 26 2018 at 15:41)</a>:</h4>
<p>Agree with support for the initial light approach that requires a human to read the information, and with moving forward with an extension that somehow encodes that it is a concurrent administration of multiple drugs that results in the intolerance. I suspect this is common enough in oncology - it would be great to get real examples. <span class="user-mention" data-user-id="196572">@Travis Stenerson</span> is this a real example?</p>



<a name="153930894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153930894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Travis Stenerson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153930894">(Jan 26 2018 at 19:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191503">@Robert McClure</span> <br>
This example is directly from the NCCN Non-small cell lung cancer guideline specifically for the BRAF V600E mutation positive disease.</p>



<a name="153932529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153932529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153932529">(Jan 29 2018 at 00:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191403">@Michelle (Moseman) Miller</span> <br>
In AllergyIntolerance consider moving <code>encounter</code> from between <code>patient</code> and <code>onset</code> to before <code>recorder</code> or after <code>asserter</code>, as they are more relevant to <code>encounter</code>.</p>



<a name="153932775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153932775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michelle (Moseman) Miller <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153932775">(Jan 29 2018 at 12:54)</a>:</h4>
<p>The reason for the current sequence is to align with w5 patterns of:  patient (who.focus), encounter (context), onset (when.init)</p>



<a name="153933125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153933125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153933125">(Jan 29 2018 at 22:41)</a>:</h4>
<p>Thanks Michelle.</p>



<a name="153933127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Linking%20Allergy%20to%20Encounter/near/153933127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Linking.20Allergy.20to.20Encounter.html#153933127">(Jan 29 2018 at 22:42)</a>:</h4>
<p>If anyone is interested, the link for w5 is <a href="http://build.fhir.org/w5" target="_blank" title="http://build.fhir.org/w5">http://build.fhir.org/w5</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
