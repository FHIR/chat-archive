---
layout: page
title: "FHIR Chat  · Procedure with contained device · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html">Procedure with contained device</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153964648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Johansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964648">(May 24 2018 at 18:28)</a>:</h4>
<p>I'm implementing a write operation for Device now, but the Device alone seems insufficient for the use case. I would require fields like performed date and coding. I asked earlier on another topic and I thought of using Procedure, but I cannot see how to pass a device as focalDevice? Is this supposed to be data I can pass to the server? I found no examples on the hapi fhir test client so I started questioning this.</p>
<p>How do you consider using the DomainResource contained for this purpose? I could then register a Procedure that has most of the data generally needed to register when, what, hows and put a Device in Contained.</p>



<a name="153964650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964650">(May 24 2018 at 18:30)</a>:</h4>
<p><a href="http://build.fhir.org/procedure-example-implant.xml.html" target="_blank" title="http://build.fhir.org/procedure-example-implant.xml.html">http://build.fhir.org/procedure-example-implant.xml.html</a></p>



<a name="153964665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Johansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964665">(May 24 2018 at 18:46)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> Thanks, it is however as I wrote that I cannot pass an actual Device, only a reference. So if a doctor is to register critical information on a patient, it would not be so simple. He would need to record when the patient got the implant, either by procedure date or patient age, and the device itself. What kind of coding does the device have etc.</p>



<a name="153964678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964678">(May 24 2018 at 19:26)</a>:</h4>
<p>i don't understand.</p>



<a name="153964680"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964680" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964680">(May 24 2018 at 19:27)</a>:</h4>
<p>the example has   &lt;performedDateTime value="2015-04-05"/&gt;</p>



<a name="153964681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964681">(May 24 2018 at 19:28)</a>:</h4>
<p>and in this case the device is referenced as implanted</p>



<a name="153964682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964682">(May 24 2018 at 19:28)</a>:</h4>
<p>but you can also have a device used. Thus:</p>



<a name="153964685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964685">(May 24 2018 at 19:29)</a>:</h4>
<p>instead of </p>
<div class="codehilite"><pre><span></span>  &lt;focalDevice&gt;
    &lt;action&gt;
      &lt;coding&gt;
        &lt;system value=&quot;http://hl7.org/fhir/device-action&quot;/&gt;
        &lt;code value=&quot;implanted&quot;/&gt;
      &lt;/coding&gt;
    &lt;/action&gt;
    &lt;manipulated&gt;
      &lt;reference value=&quot;Device/pacemaker_MDT_Azure_W1DR01&quot;/&gt;
    &lt;/manipulated&gt;
  &lt;/focalDevice&gt;
</pre></div>



<a name="153964686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964686">(May 24 2018 at 19:31)</a>:</h4>
<p>you would have </p>
<div class="codehilite"><pre><span></span>    &lt;usedReference&gt;
      &lt;reference value=&quot;Device/pacemaker_MDT_Azure_W1DR01&quot;/&gt;
    &lt;/usedReference&gt;
</pre></div>



<a name="153964687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964687">(May 24 2018 at 19:33)</a>:</h4>
<p>if you want to describe the characteristics of the device Device/pacemaker_MDT_Azure_W1DR01, that is another resource which can be contained</p>



<a name="153964791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Johansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964791">(May 25 2018 at 05:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> Mkey, I think I'm ending up with the Device being contained. Well, what I tried to explain was that I cannot refer to an existing Device. For our case a Device would need to be defined <em>through</em> a procedure. So you are correct in the assessment of me requiring a Procedure with the fields you gave example on. So the question was basically, would you use Procedure.contained to fit my need. Thanks :)</p>



<a name="153964793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964793">(May 25 2018 at 05:29)</a>:</h4>
<p>Kewl. If you you cannot point to an existing device resource, you can create one on the spot. <br>
You will notice that the attributes in Device are all optional, so you don't have to add anything you don't want.<br>
Adding procedure data to a device would not be good.</p>



<a name="153964794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Johansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964794">(May 25 2018 at 05:40)</a>:</h4>
<p>Okey, cause what I aim for is to register an implant on a patient. We don't have, nor register the data that belongs to the device; like manufacturer etc. We define type of implant through a code system, and then other "regular" data like date. I would require an extension to register when the patient got the Device and I feel the semantics are wrong doing it like this. It is the concept a Patient god a device vs a Patient had a procedure <em>where</em> he got the device. Thoughts?</p>



<a name="153964795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964795">(May 25 2018 at 05:42)</a>:</h4>
<p>on using a code, that might make sense. This is actually supported - see Procedure.usedCode.</p>



<a name="153964798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964798">(May 25 2018 at 05:45)</a>:</h4>
<p>on the modeling question - you say that you just want to inform the patient has a device. So what you are modeling is not a characteristic of the patient, nor a characteristic of the device, but an association between a patient and a device.</p>



<a name="153964800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964800">(May 25 2018 at 05:48)</a>:</h4>
<p><strong>keeping in mind that we will likely alter the device resource  and there might be some changes</strong> there are 2 options:<br>
you use procedure to define when that association patient-device was created (which gives you the information you need like data and device type),<br>
OR you use a device and can express the patient using device.patient (the exact position of this element will likely change).</p>



<a name="153964801"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964801" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Johansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964801">(May 25 2018 at 05:48)</a>:</h4>
<p>You are correct of course. The only thing I can register to a Device is:</p>
<p>{<br>
  "resourceType": "Device",<br>
  "type": {<br>
     "system": "1234",<br>
      "code": "1"<br>
    }<br>
}</p>
<p>So maybe Procedure.usedCode is just what I should use here. I define category in the Procedure to point to Implant category from our terminology server. Should be sufficient?</p>



<a name="153964802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964802">(May 25 2018 at 05:48)</a>:</h4>
<p>Using only a device and device.Patient would still lack the date of implant. Do using procedure seems more correct. Also this seems (arguably) better for interoperability. Many issues in interoperability are not about the data being there, and definitely not about the quantity of data, but a common understanding what that data means. If you express a procedure and a device, it is semantically sound, i think</p>



<a name="153964803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964803">(May 25 2018 at 05:51)</a>:</h4>
<blockquote>
<p>So maybe Procedure.usedCode is just what I should use here. I define category in the Procedure to point to Implant category from our terminology server. Should be sufficient?</p>
</blockquote>
<p>I think so, yes</p>



<a name="153964804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Procedure%20with%20contained%20device/near/153964804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Johansen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Procedure.20with.20contained.20device.html#153964804">(May 25 2018 at 05:52)</a>:</h4>
<p>I agree, and is self documented through profiling so should be safe to assume a common understanding of how to use the resource. Thanks a lot for the discussion Jose :)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
