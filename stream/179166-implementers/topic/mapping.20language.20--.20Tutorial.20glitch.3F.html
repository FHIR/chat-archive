---
layout: page
title: "FHIR Chat  · mapping language -- Tutorial glitch? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/mapping.20language.20--.20Tutorial.20glitch.3F.html">mapping language -- Tutorial glitch?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="186890868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/mapping%20language%20--%20Tutorial%20glitch%3F/near/186890868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Kesselman <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/mapping.20language.20--.20Tutorial.20glitch.3F.html#186890868">(Jan 29 2020 at 14:40)</a>:</h4>
<p>I've been looking at the description of the FHIR Mapping tool. It's mostly making sense to me, though its selection approach is driven by explicit context iterations.  Personally I prefer the recursion/predicate/modes model used in XSLT, but this can be made to work. (And yes, as someone who as worked on an XSLT implementation, I know I'm biased.)</p>
<p>The tutorial is, obviously, incomplete at this time -- but I have a few questions about the last section that has been written (#13), where it's mapping from a set of values, to a set of references to values stored separately.</p>
<p>src.f1 as s_f1 -&gt; create("TRight2") as rr, tgt.ptr = reference(rr) then {<br>
  s_f1 -&gt; rr.f2 = srcff;<br>
};</p>
<p>First,  the mapping statement is copying s_f1 to rr.f2, but there's no f2 in the target illustration. I presume that's a typo and they meant to say rr.f1 (or TRight2 was supposed to have an f2 child rather than the f1 shown).</p>
<p>Second, the description says "This mapping statement makes use a special known value "null" for the target context to indicate that the created element/object of type "TRight2" doesn't get added to any existing target context."  I don't see null in the sample statement.  Is that implicit in the create(), or did something get left out?</p>
<p>Third, there's no explanation of the " = srcff" clause.  Was that supposed to be "= s_f1", or is there something else going on here?</p>



<a name="186901464"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/mapping%20language%20--%20Tutorial%20glitch%3F/near/186901464" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/mapping.20language.20--.20Tutorial.20glitch.3F.html#186901464">(Jan 29 2020 at 16:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="186958118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/mapping%20language%20--%20Tutorial%20glitch%3F/near/186958118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/mapping.20language.20--.20Tutorial.20glitch.3F.html#186958118">(Jan 30 2020 at 06:21)</a>:</h4>
<p>My interpretation would be that "target context" refers to StructureMap.group.rule.target.context. The context is in many cases the variable / type name to which the rule applies. For example, given "src.f1 as s_f1 -&gt; tgt.example = create('TRight') as rr" the context for the create function would be "tgt". However, I don't see it documented anywhere that in this case the context should be "null". When converting the mapping language to StructureMap you can leave it out as the element is optional.</p>



<a name="186958234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/mapping%20language%20--%20Tutorial%20glitch%3F/near/186958234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/mapping.20language.20--.20Tutorial.20glitch.3F.html#186958234">(Jan 30 2020 at 06:25)</a>:</h4>
<p>The last part should be "s_f1 -&gt; rr.f1 = s_f1;". The simple form ("s_f1 -&gt; rr.f1;") can't be used as "s_f1" might be repeating.</p>



<a name="186958677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/mapping%20language%20--%20Tutorial%20glitch%3F/near/186958677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/mapping.20language.20--.20Tutorial.20glitch.3F.html#186958677">(Jan 30 2020 at 06:38)</a>:</h4>
<p>And all parameter passed as a string in the the tutorial should be using single instead of double quotes.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
