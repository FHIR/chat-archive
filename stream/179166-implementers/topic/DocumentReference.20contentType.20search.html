---
layout: page
title: "FHIR Chat  · DocumentReference contentType search · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html">DocumentReference contentType search</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153842334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gavin Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842334">(Aug 04 2016 at 01:08)</a>:</h4>
<p>I have a use case where I want to get all of the documents for a patient but limited to only certain contentTypes (DocumentReference.Attachment.contentType). This looks to not be possible via a standard search. That would mean I need to use a Named Query correct? I've got that working but I'm now struggling to find an example of what the OperationDefinition for the Conformance should look like in this case. Are there any good examples of named query conformances?</p>



<a name="153842335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842335">(Aug 04 2016 at 01:21)</a>:</h4>
<p>the easiest way would be to add a search parameter for content type</p>



<a name="153842336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gavin Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842336">(Aug 04 2016 at 01:29)</a>:</h4>
<p>does that imply that something like /fhir/1.0/DocumentReference?subject.identifier=ABC|DEF&amp;content.attachment.contentType=application/pdf is valid? I had assumed that if it wasn't listed as an avaliable search parameter (<a href="https://www.hl7.org/fhir/documentreference.html#search" target="_blank" title="https://www.hl7.org/fhir/documentreference.html#search">https://www.hl7.org/fhir/documentreference.html#search</a>) then I needed to do things other ways. Now that I reread I can't see a definite statement to that effect.<br>
If that form is allowed then my life gets much easier!</p>



<a name="153842337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842337">(Aug 04 2016 at 01:31)</a>:</h4>
<p><span class="user-mention" data-user-id="192386">@Gavin Millar</span> You can define your own SearchParameter resource instances and reference them with your Conformance resource</p>



<a name="153842338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842338">(Aug 04 2016 at 01:32)</a>:</h4>
<p>(In fact, you can't rely on the standard search parameter names - you always need to check the Conformance statement of the server you're talking to as it's theoretically possible for it to bind the standard names to a different search parameter definition)</p>



<a name="153842339"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842339" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842339">(Aug 04 2016 at 01:32)</a>:</h4>
<p>the search parameters are defined for convenience. You can add your own search parameters. I'd counsel against naming the search parameter 'content.attachment.contentType') because that looks like a chained search. It's more consistent style-wise to call it 'contentType' or equivalent</p>



<a name="153842340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842340">(Aug 04 2016 at 01:33)</a>:</h4>
<p>but you need get whatever servers you care about to support your search parameters</p>



<a name="153842341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gavin Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842341">(Aug 04 2016 at 01:43)</a>:</h4>
<p>OK, I think that all makes sense. I can define my own names for my own search parameters and use them in my server then it's just a matter of adding it as a search-parameter in my Conformance to state the name etc.<br>
Obviously this makes my server distinct in regards to this parameter which is probably fine for my use case (but certainly something to keep in mind)</p>



<a name="153842342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842342">(Aug 04 2016 at 01:45)</a>:</h4>
<p>yes, you can propose that we add such a search parameter on the grounds that other people might do the same thing</p>



<a name="153842343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gavin Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842343">(Aug 04 2016 at 01:46)</a>:</h4>
<p>I think that filtering by contentType for documents is fairly reasonable and I'd be keen to see it as part of the spec. Can you point me to where to make the suggestion/case ?</p>



<a name="153842345"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842345" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842345">(Aug 04 2016 at 01:49)</a>:</h4>
<p>'propose a change' link tat the bottom of each page</p>



<a name="153842391"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842391" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842391">(Aug 04 2016 at 11:16)</a>:</h4>
<p><span class="user-mention" data-user-id="192386">@Gavin Millar</span> do you really mean contentType? Or the more specific format? I ask because I expect that contentType might be less useful. Especially since there is only a few types that are likely (pdf, xml,json, etc). Where the format is an indication of the technology and use-case encoding. So format would differentiate between various types of meaning. </p>



<a name="153842392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842392">(Aug 04 2016 at 11:18)</a>:</h4>
<p>Further I expect that once you find a DocumentReference that has the content you want; when you then pull the content, the server holding that content could use your requesting (content type negotiation, or _format) to re-format the content to that format. This manipulation would be purely presentation manipulation. Much like http is intended to be used.</p>



<a name="153842393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842393">(Aug 04 2016 at 11:20)</a>:</h4>
<p>I put this into the IHE - MHD profile and have gotten many people commenting positively. The reformatting is not mandatory, but enabled by http and _format. </p>



<a name="153842394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842394">(Aug 04 2016 at 13:17)</a>:</h4>
<p>To the extent that "format" and "content type" are both captured in <code>DocumentReference</code>, it's useful to be able to search by both.  <span class="user-mention" data-user-id="191404">@John Moehrke</span>, I'm assuming that once you find a particular <code>DocumentReference.content</code> that you want, then GETting the attachment by <code>url</code> should return content according to the format and contentType specified in the DocumentReference. Is this right? </p>



<a name="153842425"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842425" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842425">(Aug 04 2016 at 18:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span>  I am not suggesting that the query parameter should not be added. I am just asking for the use-case where content type is significantly useful.  I provide the comments to help illuminate the intent of the parameters and elements that exist. And to point out that in XDS there has never been a need to query by the mime type.</p>



<a name="153842426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gavin Millar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842426">(Aug 04 2016 at 19:33)</a>:</h4>
<p><span class="user-mention" data-user-id="191404">@John Moehrke</span> : Yes, I really mean contentType. Our use case is around displaying a list of PDF documents (initially) as that is what we have the technology to accurately render for the client. Our source in this case has documents of other types (images, CCDA etc.) which are handled elsewhere. So it's not about the meaning of the document but rather it's MIMEtype/contentType etc.</p>
<p>I can understand that a more general case for filtering would be format (or class perhaps) but in our case we would prefer contentType.</p>



<a name="153842427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842427">(Aug 04 2016 at 19:37)</a>:</h4>
<p>okay. Include that use-case in the request for the query parameter. Seems reasonable in FHIR. I will note that it won't be supportable by a system that is using FHIR (MHD profile) infront of an XDS/XCA environment. This is NOT an important fact for FHIR specification. I point it out only as an operational perspective. </p>



<a name="153842429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153842429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153842429">(Aug 04 2016 at 19:54)</a>:</h4>
<p>this blog article explains why format ...  <a href="https://healthcaresecprivacy.blogspot.com/2015/10/ihe-formatcodes-are-mandatory.html" target="_blank" title="https://healthcaresecprivacy.blogspot.com/2015/10/ihe-formatcodes-are-mandatory.html">https://healthcaresecprivacy.blogspot.com/2015/10/ihe-formatcodes-are-mandatory.html</a></p>



<a name="153843094"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/DocumentReference%20contentType%20search/near/153843094" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/DocumentReference.20contentType.20search.html#153843094">(Aug 08 2016 at 23:22)</a>:</h4>
<p>This isn't relevant to Gavin's original question, however... </p>
<blockquote>
<p>when you then pull the content, the server holding that content could use your requesting (content type negotiation, or _format) to re-format the content to that format. This manipulation would be purely presentation manipulation.</p>
</blockquote>
<p>This is essentially what is proposed for MHD-I: Request an XDS-I image manifest as the specified contentType (application/dicom), and you get back a DICOM KOS (Key Object Selection), request it back as application/fhir+xml, and you get back a FHIR ImagingManifest resource.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
