---
layout: page
title: "FHIR Chat  · Questionnaire with conditional ValueSet binding? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html">Questionnaire with conditional ValueSet binding?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153869040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/153869040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#153869040">(Jan 25 2017 at 00:51)</a>:</h4>
<p>In a Questionnaire, can I make the "binding" to the permitted answers ValueSet conditional on the value of a previous question?<br>
For example, I may have a ValueSet of procedures for men and a different one for procedures for women and I want to use the appropriate ValueSet based on the answer to a male/female question item (yes, I know gender is more complex than this, but it's just an example)</p>



<a name="153869043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/153869043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#153869043">(Jan 25 2017 at 01:34)</a>:</h4>
<p>Not as part of core - meaning most systems wouldn't recognize it.  The easiest way to accomplish this behavior would be to have multiple questions and enable only one of them based on the answer to the previous question.</p>



<a name="153869048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/153869048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Donna Truran <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#153869048">(Jan 25 2017 at 04:32)</a>:</h4>
<p>Sorry Lloyd, I'm not sure I follow your advice. Could you expand a little, using Michael's  "Gender Answer with conditional binding to Gender specific Px ValueSet" example?  appreciated :-)</p>



<a name="153869180"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/153869180" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#153869180">(Jan 26 2017 at 01:25)</a>:</h4>
<p>&lt;q1 "What's your gender (M/F)?"&gt;<br>
  &lt;q1.1 "What healthcare conditions currently apply to you?" (valueset includes pregnancy) enableWhen q1=F/&gt;<br>
  &lt;q1.2 "What healthcare conditions currently apply to you?" (valueset includes prostate cancer) enableWhen q1=M/&gt;<br>
&lt;/q1&gt;</p>



<a name="153869181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/153869181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#153869181">(Jan 26 2017 at 01:26)</a>:</h4>
<p>That's rather abbreviated/pseudo-coded, but hopefully it conveys the gist</p>



<a name="153869456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/153869456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Donna Truran <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#153869456">(Jan 30 2017 at 01:41)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-email="lloyd@lmckenzie.com">@Lloyd McKenzie</span>  I now better understand this using this simple gender based example. I'm going to assume (!!! always dangerous) that I could use the same approach to do something more complex such as                                                                                                                                                                                                                                  &lt;q1 "Clinical discipline?" (Speech/Physiotherapy/Dietetics/Social Work/etc                                                                                               &lt;q1.1 "Patient condition managed this encounter?" (valueset Speech) enableWhen q1=Speech                                                              &lt;q1.2 "Patient condition managed this encounter?" (valueset Physiotherapy) enableWhen q1=Physiotherapy                                           &lt;q1.3 "Patient condition managed this encounter?" (valueset Dietetics) enableWhen q1=Dietetics                                                                    .... and so on.... for the 12 or so disciplines I might want to consolidate into a single questionnaire (for use in a multidisciplinary clinical practice?)  Stop me if I'm wrong! :-) thanks for your help.</p>



<a name="153869457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/153869457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#153869457">(Jan 30 2017 at 01:47)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , that's the only solution I'd been able to come up with.</p>



<a name="153869458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/153869458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#153869458">(Jan 30 2017 at 02:43)</a>:</h4>
<p><span class="user-mention" data-user-id="192192">@Donna Truran</span> I'm afraid that's the only way supported right now.  You could certainly be more concise with a modifier extension - at the cost that all your client systems would have to customize to support it and you'd have to use custom validators and renderers, etc. too.  That doesn't mean that the current design has hit the proper sweet-spot though.  We could certainly have a discussion about whether this sort of behavior falls within what would be considered "core" - i.e. something that 80%-ish of the systems that deal with questionnaires would be able to handle.</p>



<a name="153869459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/153869459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Donna Truran <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#153869459">(Jan 30 2017 at 02:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  that's great Lloyd... this will work well enough for the mock-up/demonstration stuff I'm doing at the moment... we can get more elegant when we have more time :-) appreciate your help.... cheers</p>



<a name="153870147"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/153870147" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#153870147">(Feb 06 2017 at 03:45)</a>:</h4>
<p>I think that this space rapidly falls into an unmanageable are of super complexity</p>



<a name="153870148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/153870148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#153870148">(Feb 06 2017 at 03:46)</a>:</h4>
<p>one thing we could do to make this manageable is to define a cda-hook operation that you use to decide whether a question is enabled, and whether a more refined value set for possible answers can be presented based on other answers </p>



<a name="179551993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/179551993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Glory Kim <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#179551993">(Oct 31 2019 at 16:59)</a>:</h4>
<p>Is it possible to create a valueSet that has enableWhen options? For example, I'm working on a questionnaire that has a section on 'communicable diseases'. It consists of 10 items (i.e. pregnancy, sleep apnea, diabetes, etc). Ideally, I was hoping to make the valueSet consist of these 10 items + additional logic. If the patient says 'yes' to pregnancy, then an enableWhen logic would ask "How many months?" And, if the patient also selects 'diabetes', it would cause another question to appear under it such as "What is your blood sugar?"</p>



<a name="179552241"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/179552241" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#179552241">(Oct 31 2019 at 17:01)</a>:</h4>
<p>That sounds like the enableWhen is tied to specific answers, not to a value set.  It's certainly fine if the list of choices is a value set.  If you want to tie enabling to membership of the answer in a particular value set (e.g. if one of the selected concommittent meds was an ACE inhibitor), you could do that with the enableWhenExpression extension</p>



<a name="179564451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/179564451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Glory Kim <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#179564451">(Oct 31 2019 at 18:55)</a>:</h4>
<p>Thanks Lloyd. I've found the extension here (<a href="http://build.fhir.org/ig/HL7/sdc/expressions.html" target="_blank" title="http://build.fhir.org/ig/HL7/sdc/expressions.html">http://build.fhir.org/ig/HL7/sdc/expressions.html</a>) but am unsure how to actually use the expression extension. Clicking on the <code>enableWhenExpression</code> leads me to a 404. For example, what is it's canonical url and how can I reference it?</p>



<a name="179564650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/179564650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#179564650">(Oct 31 2019 at 18:57)</a>:</h4>
<p>It's not yet available at the canonical URL - we need to publish the next version of SDC before that can happen - which is now looking like December or January.  The link is here: <a href="http://build.fhir.org/ig/HL7/sdc/extension-sdc-questionnaire-enableWhenExpression.html" target="_blank" title="http://build.fhir.org/ig/HL7/sdc/extension-sdc-questionnaire-enableWhenExpression.html">http://build.fhir.org/ig/HL7/sdc/extension-sdc-questionnaire-enableWhenExpression.html</a></p>



<a name="179564733"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Questionnaire%20with%20conditional%20ValueSet%20binding%3F/near/179564733" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Questionnaire.20with.20conditional.20ValueSet.20binding.3F.html#179564733">(Oct 31 2019 at 18:58)</a>:</h4>
<p>It allows you to use FHIRPath.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
