---
layout: page
title: "FHIR Chat  · Logical Reference and non-uniqueness · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html">Logical Reference and non-uniqueness</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="237341075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237341075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237341075">(May 04 2021 at 15:04)</a>:</h4>
<p>Any expectations or good-to-knows about using a logical reference that is not unique? <br>
e.g. a reference to a patient by EHR but there are 2 patient resources with same EHR number...</p>



<a name="237346699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237346699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237346699">(May 04 2021 at 15:30)</a>:</h4>
<p>This is an error condition, and should be treated as such.</p>



<a name="237452477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237452477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237452477">(May 05 2021 at 07:31)</a>:</h4>
<p>The <a href="http://hl7.org/fhir/R4/datatypes.html#identifier">R4 specification of the Identifier type</a> states that "The <code>value</code> SHALL be unique within the defined system and have a consistent meaning wherever it appears." That <em>sounds</em> to me like it would preclude using a business ID in an Identifier type if the ID may point to more than one entity. Or are there indications otherwise in the spec?</p>



<a name="237453215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237453215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237453215">(May 05 2021 at 07:38)</a>:</h4>
<p>Right, so I guess this SHALL is not a conformance requirement, but it is a statement of a dependency. It means "if you want to do this, you must ensure somehow that the value is unique in the system".</p>



<a name="237455195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237455195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237455195">(May 05 2021 at 07:56)</a>:</h4>
<p>note that the sentence carefully does not say that the association between the object containing the ID and the ID itself is 1:1 such that the value is unique within any given collection of objects</p>



<a name="237455272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237455272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237455272">(May 05 2021 at 07:57)</a>:</h4>
<p>as long as the business id is unique within it's own system, with a consistent meaning, it may be found in lots of objects, sometimes with different kinds</p>



<a name="237458949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237458949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237458949">(May 05 2021 at 08:28)</a>:</h4>
<p>Just to clarify, I read the sentence as saying that you cannot use a (system, code-value)-tuple in Identifier if that tuple identifies more than one <em>real life entity</em> (e.g. multiple patients).</p>



<a name="237463230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237463230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237463230">(May 05 2021 at 09:04)</a>:</h4>
<p>in practice, you may not know if things beyond your boundaries are unique and it is out of your control. Or this may start off as true, but later be false. It is fairly weak.</p>



<a name="237486191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237486191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237486191">(May 05 2021 at 12:27)</a>:</h4>
<p>if an identifier identifies more than one real world entity, I would think it's use is problematic, but it sill might be unique within the defined system and have a consistent meaning. Or it may be that the system is degenerate, and it should not be used</p>



<a name="237486728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237486728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237486728">(May 05 2021 at 12:31)</a>:</h4>
<p>Just realized I might be barking up the wrong tree <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span> <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span>, in your initial question with the two Patient resources with the same EHR number - would those two resources represent two <em>different</em> individuals or just be duplicate records for the same individual?</p>



<a name="237487814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237487814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237487814">(May 05 2021 at 12:40)</a>:</h4>
<p>My question was a bit more basic, but I see further now. <br>
My answer would be: the system can't guess if they are different patients or the same, right?</p>



<a name="237487919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237487919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237487919">(May 05 2021 at 12:41)</a>:</h4>
<p>as Rik explains. It depends on the boundaries and may change</p>



<a name="237520459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237520459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237520459">(May 05 2021 at 15:59)</a>:</h4>
<p>Simple real-world example.  You have a U.S. social security number.  There's a standard system for it.  Within that system, each social security number is supposed to refer to exactly one person.  However, that identifier can appear on a variety of Patient, Practitioner and RelatedPerson resources in a variety of systems.  Also, due to fraud, error, etc. the same social security number may appear on records for individuals who aren't all the same human being.  That would still meet the expectations of the wording of the "SHALL be unique within the defined system and have a consistent meaning".</p>



<a name="237564493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/237564493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ezequiel Morales <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#237564493">(May 05 2021 at 20:59)</a>:</h4>
<p>"within the defined system" seems to be the key concept here</p>



<a name="238318774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/238318774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Debbie Bucci <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#238318774">(May 11 2021 at 14:39)</a>:</h4>
<p>Newbie question -kind of ... Looking at using identifiers to help with potential matches in target system.   Assume "business" identifiers MAY be sent but not required and perhaps done so for privacy reason but ... beyond full blown PIX like functionality - is there a simple way to request known identifiers up front?  This looks like the closest thread to ask</p>



<a name="238319478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/238319478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#238319478">(May 11 2021 at 14:43)</a>:</h4>
<p>If you request a Patient resource, it SHOULD give you all the information you're allowed to see, so you shouldn't have to specify what you're looking for.  That being said, if you need to set up specific requirements, you can profile Patient to force the use of specific information</p>



<a name="238330720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/238330720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Debbie Bucci <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#238330720">(May 11 2021 at 15:44)</a>:</h4>
<p>So you are suggesting negotiate with <em>trading partner</em> not something that can be requested in code beyond knowing specifics about the sourceIdentifier you may be looking for ?</p>



<a name="238333416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/238333416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Pyke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#238333416">(May 11 2021 at 15:59)</a>:</h4>
<p>Correct.  They should be sending you all available information but if that's not the case, then you have to open a dialogue with them and see how to correct it.</p>



<a name="238336750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/238336750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#238336750">(May 11 2021 at 16:19)</a>:</h4>
<p>IHE has also defined the PIXm profile which defines an operation that provides alternate patient identifiers only for a given identifier, without returning the entire patient resource. The argument at the time it was developed was that access to the rest of a Patient resource may have different permissions. (<a href="https://www.ihe.net/uploadedFiles/Documents/ITI/IHE_ITI_Suppl_PIXm.pdf">https://www.ihe.net/uploadedFiles/Documents/ITI/IHE_ITI_Suppl_PIXm.pdf</a>; I think there's an informal FHIR IG equivalent)</p>



<a name="238338132"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/238338132" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Debbie Bucci <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#238338132">(May 11 2021 at 16:29)</a>:</h4>
<p>yes I've been studying that  ... its seems to be a layer above the existing pix backend messaging.  Something definitely to consider but if we could resolve other ways ...</p>



<a name="238341444"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/238341444" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Debbie Bucci <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#238341444">(May 11 2021 at 16:50)</a>:</h4>
<p>will search for the informal FHIR IG  ..</p>



<a name="238366900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/238366900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mahesh Chiliveri <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#238366900">(May 11 2021 at 19:16)</a>:</h4>
<p>Hi Everyone, We have requirement to test against these guidelines "HL7 CARIN BB, DaVinci PDEX, PlanNet &amp; Formulary guidelines" , Do you know how can i get the inferno community addition deployed on my local firewall inside docker to have validator up and running and test against these guidelines.</p>



<a name="238367086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/238367086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Scanlon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#238367086">(May 11 2021 at 19:17)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="411189">@Mahesh Chiliveri</span> -- could you ask this question over in <a class="stream" data-stream-id="179309" href="/#narrow/stream/179309-inferno">#inferno</a>?</p>



<a name="238529561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/238529561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#238529561">(May 12 2021 at 19:18)</a>:</h4>
<p>Informal draft, not approved, warning warning ..... IHE-PIXm in IG form <a href="http://build.fhir.org/ig/IHE/ITI.PIXm/branches/master/index.html">http://build.fhir.org/ig/IHE/ITI.PIXm/branches/master/index.html</a></p>



<a name="238544627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/238544627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Debbie Bucci <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#238544627">(May 12 2021 at 21:06)</a>:</h4>
<p>So the informal draft essentially points back to the IHE draft.  Assume the The goal is to have th3 $ihe-pix be a base operation that FHIR servers MAY support this like  $merge?     In theory it could be an <em>extended</em> operation for testing  if partners willing to support?</p>



<a name="276200940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276200940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruth berge <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276200940">(Mar 22 2022 at 14:57)</a>:</h4>
<p>for an Identifier 2.24..0.12 type... I understand this to mean that a fhir repository should not store identifiers that are not unique for that resource - though it seems that properties such as a period could also make them unique (but harder to search against).  If that is true, then an implementation guide like the DaVinci ATR that specifies a tax id to identify a group is either assuming that this identifier will only ever by used in one group or is breaking the rules.  I asked in the Da Vinci ATR in January and the answer did not address my question so I'm bringing it up here.  I see it as an issue if a given provider organization belongs to two contract groups and is compliant with ATR da Vinci that the repository would then have two fhir groups with the same tax id identifier and npi identifier.  I may be misreading something in ATR but I want to make sure that this question is raised and answered here in the broader community.  I would appreciate a better understanding of the wording in Da Vinci ATR.  Again I did ask in that thread in January but the response doesn't address my question and I asked again but no further response.</p>



<a name="276223665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276223665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276223665">(Mar 22 2022 at 17:17)</a>:</h4>
<p>FHIR's "uniqueness" requirement is a SHOULD.  There'll be lots of situations where a given identifier might not be unique.</p>



<a name="276223920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276223920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276223920">(Mar 22 2022 at 17:19)</a>:</h4>
<p>There is an expectation that a fully populated identifier (i.e. system + value) corresponds to only one business object.  I.e. there aren't two completely different organizations that have the same tax id.  However, the same 'business object' might well surface in multiple resource instances on the same server.  And sometimes errors or fraud happens where an identifier ends up on a resource it shouldn't.</p>



<a name="276253041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276253041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruth berge <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276253041">(Mar 22 2022 at 20:57)</a>:</h4>
<p>What is the expectation for people building profiles and igs?  Do we expect that they would build these profiles such that  SHOULD will not be violated by design?</p>



<a name="276253272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276253272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276253272">(Mar 22 2022 at 20:59)</a>:</h4>
<p>no specification ever existed that can keep people from doing stupid things... however claims of compliance are claims of compliance to ALL normative requirements, and claims of compliance are enforceable by either certification testing or contract terms.</p>



<a name="276261827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276261827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276261827">(Mar 22 2022 at 22:11)</a>:</h4>
<p>People building profiles and IGs have limited power to change the real world.  In most systems, there SHOULD only be one patient record with a particular U.S. SSN.  However, there are situations where that gets violated: fraud, old records brought over from a merged system; partitioned demographics between the hospital and the family medicine unit; [insert your reason here].</p>
<p>FHIR doesn't impose business rules.  It's up to systems to do that based on what works (and is necessary) in their context.  You'll absolutely find systems that will fail a POST that would duplicate an SSN and even enforce that down at the database level.  There will be other systems where 2 or 3 hits on a single SSN is typical.  Both types of systems can be fully FHIR conformant.</p>



<a name="276352672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276352672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ruth berge <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276352672">(Mar 23 2022 at 15:42)</a>:</h4>
<p>Agreed that people building igs and profiles can't change the real world and they shouldn't.  Their design should handle the real world situations and their designs and documentation should illuminate when they have enforced something that isn't recommended.  In the ATR case, they chose to use identifiers that will be reused.  But back to identifier, Lloyd you use the verb SHOULD in relation to the identifier.  Is there someplace in the FHIR documentation that uses that (since "SHOULD" is meaningful in FHIR)?  The identifier type , comparison with HL7 v2 conformance- neither of these say that.  I would appreciate if you share the reference.  Maybe its just the interpretation of what an identifier is and what it means?  It helps to see where these references are for other issues.  Maybe there should be something in identifier type that addresses this?</p>



<a name="276353761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276353761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276353761">(Mar 23 2022 at 15:49)</a>:</h4>
<p>the FHIR core specification is not the right place for SHOULD language. There are many use-cases of the resources in FHIR core that are not the clinical-treatment; for which the FHIR core needs to be able to support. So FHIR core focuses only on SHALL (minimal cardinality of 1), and MAY (minimal cardinality of 0). Should comes in during an Implementation Guide, which has a specific (set of) use-case(s), and setting.. thus can explain what Should means and when Should is allowed to be not.</p>



<a name="276362343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276362343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276362343">(Mar 23 2022 at 16:35)</a>:</h4>
<p>SHOULD establishes what's desirable/ideal/best practice.  It's something to think about during design.  But it's not enforced/enforceable.</p>



<a name="276381286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276381286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276381286">(Mar 23 2022 at 18:39)</a>:</h4>
<p>Otherwise stated: the difference between MAY and SHOULD is entirely conceptual  =)</p>



<a name="276394251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276394251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276394251">(Mar 23 2022 at 20:20)</a>:</h4>
<p>the difference between MAY and SHOULD is well defined in the IETF standard on normative words upon which FHIR is based -- <a href="https://www.ietf.org/rfc/rfc2119.txt">https://www.ietf.org/rfc/rfc2119.txt</a></p>



<a name="276394370"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276394370" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276394370">(Mar 23 2022 at 20:21)</a>:</h4>
<p><a href="https://www.hl7.org/fhir/conformance-rules.html">https://www.hl7.org/fhir/conformance-rules.html</a></p>



<a name="276397067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276397067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276397067">(Mar 23 2022 at 20:40)</a>:</h4>
<p>Sure - but from a 'practical use' standpoint developers have to handle both cases (e.g., present and not present).</p>
<p>During any given individual test/use, it could be either way and there is no realistic way to determine the difference.</p>



<a name="276399257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276399257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276399257">(Mar 23 2022 at 20:57)</a>:</h4>
<p>we don't have a mechanism in conformance resources (e.g. StructureDefinition) to differentiate between SHOULD and MAY... correct. But there is a difference.</p>



<a name="276399480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276399480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276399480">(Mar 23 2022 at 20:59)</a>:</h4>
<p>although SHOULD is often conditional, so invariants are one way to express those SHOULDs.</p>



<a name="276481079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Logical%20Reference%20and%20non-uniqueness/near/276481079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Logical.20Reference.20and.20non-uniqueness.html#276481079">(Mar 24 2022 at 14:14)</a>:</h4>
<p>Perhaps I was a bit too loose in my language when talking about conformance language  =)</p>
<p>That said, I do know the difference between the terms.  From the point of view of someone <em>consuming</em> the specifications, having delineation between (loosely ;-) "do this if you want to" and "well-behaved systems are expected to do this" is important.  To me, having the ability to use either in the core specification makes sense.</p>
<p>But <em>practically</em>, that boils down to a conceptual difference - well-behaved systems will need to handle either case gracefully.  I am against adding rules/testing around those terms because I am not convinced we do not have the ability to do so reliably.  Having invariants that often fail 'correctly' teaches people to ignore them, and I would prefer to discourage using 'SHOULD' as a replacement for conditional 'SHALL'.</p>
<p>(as a random note, we added an RFC filter (e.g., <a href="https://datatracker.ietf.org/doc/html/rfc2119">RFC2119</a>) to the regex so you don't have to type out URLs a while back - I <em>think</em> this is even the one that annoyed me enough to ask for it)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
