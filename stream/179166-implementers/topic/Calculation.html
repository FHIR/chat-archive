---
layout: page
title: "FHIR Chat  · Calculation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html">Calculation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153906926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153906926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153906926">(Sep 12 2017 at 11:24)</a>:</h4>
<p>Hi all, which resource shall I use to calculate a particular quantity? For instance, calculating the corrected QT interval in an ECG profile.  Thank you</p>



<a name="153906939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153906939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153906939">(Sep 12 2017 at 14:29)</a>:</h4>
<p>Observation</p>



<a name="153907374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153907374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153907374">(Sep 13 2017 at 12:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Bazett's formula to calculate corrected QT interval is  QTC = QT / √ RR. There are two variables QT and RR. Also, QT and RR have units (msec or sec). Which resource does this calculation? <a href="/user_uploads/10155/qI0LM2nj8jjx6TUT1YB4z_hX/qtc.PNG" target="_blank" title="qtc.PNG">qtc.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/qI0LM2nj8jjx6TUT1YB4z_hX/qtc.PNG" target="_blank" title="qtc.PNG"><img src="/user_uploads/10155/qI0LM2nj8jjx6TUT1YB4z_hX/qtc.PNG"></a></div>



<a name="153907401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153907401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christiaan Knaap <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153907401">(Sep 13 2017 at 14:38)</a>:</h4>
<p>A Resource is a datastructure, it does no calculations whatsoever. In the Observation resource you can add multiple components, so you can choose to include either QT and RR or the derived QTC, or all three. But the actual calculation has to be done in the software that processes the Observation. You can check the bloodpressure example resource to see one with multiple components (systolic and diastolic blood pressure in this case).</p>



<a name="153907403"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153907403" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153907403">(Sep 13 2017 at 14:49)</a>:</h4>
<p>Are you wanting a resource to store the definition of the calculation?</p>



<a name="153908967"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153908967" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153908967">(Sep 19 2017 at 07:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span>  Thank you <br>
<span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Yes. Which resource shall I pick?</p>



<a name="153909111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153909111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153909111">(Sep 19 2017 at 19:46)</a>:</h4>
<p>Library would be the option if you're wanting to store it in a computable way.</p>



<a name="153909112"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153909112" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153909112">(Sep 19 2017 at 19:48)</a>:</h4>
<p>That said, storing a single calculation in a Library would be "unusual".  What is your objective?</p>



<a name="153909726"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153909726" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153909726">(Sep 21 2017 at 13:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  My intention is to store some calculations (similar to corrected QT interval) in a resource. How can I do that using the resource 'Library'?   Can I use the resource 'Measure' to calculate certain quantity and store the result in MeasureReport?  Thank you</p>



<a name="153909740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153909740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153909740">(Sep 21 2017 at 15:25)</a>:</h4>
<p>You want to store the calculated values or you want to store the formula?  MeasureReport is for quality measures not for arbitrary calculations</p>



<a name="153909897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153909897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153909897">(Sep 22 2017 at 12:50)</a>:</h4>
<p>I want to store  formulae and the interpretation as well. <a href="/user_uploads/10155/XipapnKzW8WxeLPS7Xzrq_8J/calci.PNG" target="_blank" title="calci.PNG">calci.PNG</a> The QTc interval is calculated in the screenshot and the interpretation is displayed. Therefore I need a resource which can store formulae and interpretation for the respective formulae.</p>
<div class="message_inline_image"><a href="/user_uploads/10155/XipapnKzW8WxeLPS7Xzrq_8J/calci.PNG" target="_blank" title="calci.PNG"><img src="/user_uploads/10155/XipapnKzW8WxeLPS7Xzrq_8J/calci.PNG"></a></div>



<a name="153909930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153909930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153909930">(Sep 22 2017 at 14:36)</a>:</h4>
<p>Ok.  From the screen-shot, it looks like the storage of the formula is as a display string for consumption by a human reader, not as a computable artifact for machine execution.  Is that accurate?  Your screen looks like it's representing something we've been calling an ObservationDefinition - also known as an "observation master file entry".  It describes a test or observation that can be performed and relevant information about when/how/why the observation is done, how much it costs, etc.  Would that align with your use-case?</p>



<a name="153910300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153910300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153910300">(Sep 25 2017 at 12:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  I need a resource which can store both the formula for the consumption of a human reader and also computable artifact for machine execution. May I know  what is ObservationDefinition?</p>



<a name="153910442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153910442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153910442">(Sep 25 2017 at 14:36)</a>:</h4>
<p>ObservationDefinition is a proposed new resource that would support defining types of observations that can exist.  It does not exist yet (and it's not clear whether it'll get done prior to R4 or not).  It's possible you might also be able to use ActivityDefinition, though I'm not sure if this use-case is in scope.  <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> ?</p>



<a name="153910881"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153910881" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153910881">(Sep 27 2017 at 05:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Please suggest a resource which can store both the formula for the consumption of a human reader and also computable artifact for machine execution.</p>



<a name="153910997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153910997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153910997">(Sep 27 2017 at 14:25)</a>:</h4>
<p>Observation.text is for human consumption; all the rest of the resource is for machine execution...</p>



<a name="153911012"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153911012" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153911012">(Sep 27 2017 at 14:58)</a>:</h4>
<p>The only resource we have right now that <em>might</em> be a candidate is ActivityDefinition, but it's best to wait for guidance from <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> .  The alternative would be to define something in Basic.</p>



<a name="153911017"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153911017" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153911017">(Sep 27 2017 at 15:06)</a>:</h4>
<p><span class="user-mention" data-user-id="193568">@Pranitha Sruthi</span> , as Lloyd suggested, you could use a Library to store the logic as a CQL expression. It does sound like an ActivityDefinition would work though, you are defining a possible observation with instructions for how to calculate it (if I understand the use case correctly). So, in that usage, you'd specify the calculation as a dynamicValue element. See the <a href="http://build.fhir.org/cqif/cqif-topics-using-expressions.html" target="_blank" title="http://build.fhir.org/cqif/cqif-topics-using-expressions.html">Using Expressions</a> topic for more.</p>



<a name="153911206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153911206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153911206">(Sep 28 2017 at 12:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  Thank you<br>
<span class="user-mention" data-user-id="191404">@John Moehrke</span> Ok  thank you<br>
<span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  Thanks for your response. I have gone through the content.  How can I use the extension in my DiagnosticReport (ECG) profile?  I need to store the formula for the QTc interval and the computable artifact. Thank you</p>



<a name="153911244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153911244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153911244">(Sep 28 2017 at 14:37)</a>:</h4>
<p>So you'd capture the QTc as an Observation.  You'll need put a <a href="http://hl7.org/fhir/extension-event-definition.html" target="_blank" title="http://hl7.org/fhir/extension-event-definition.html">http://hl7.org/fhir/extension-event-definition.html</a> extension on the Observation that points to the ActivityDefinition.  And then you put the formula in the ActivityDefinition.</p>



<a name="153911431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153911431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153911431">(Sep 29 2017 at 02:02)</a>:</h4>
<p>Right, and in the ActivityDefinition, you would put the formula for the value as a dynamicValue element.</p>



<a name="153911892"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153911892" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153911892">(Oct 02 2017 at 20:26)</a>:</h4>
<p>so ActivityDefinition would also support operations on data, not only operations on activities?</p>



<a name="153911947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153911947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153911947">(Oct 03 2017 at 01:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  can the CQL expression handle the square root calculation?</p>



<a name="153912031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153912031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153912031">(Oct 03 2017 at 09:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  Is it not necessary to add the CQL extension?</p>



<a name="153912068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153912068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153912068">(Oct 03 2017 at 14:11)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span>, yes, the intent is to support dynamic calculation of values, including access to data in context.</p>



<a name="153912069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153912069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153912069">(Oct 03 2017 at 14:13)</a>:</h4>
<p><span class="user-mention" data-user-id="191367">@Brian Postlethwaite</span>, yes, just use the power, X ^ 0.5</p>



<a name="153912070"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153912070" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153912070">(Oct 03 2017 at 14:17)</a>:</h4>
<p><span class="user-mention" data-user-id="193568">@Pranitha Sruthi</span>, you only need to use the CQL extension for cases where the resources don't already have facilities to support expressions. The ActivityDefinition already has the dynamicValue attribute to support the extension. You could use the extension to describe the formula on the appropriate attributes in DiagnosticReport, but since it's instance-level, the only value in doing so would be descriptive. By using it on ActivityDefinition to describe how to build a DiagnosticReport, you provide a way to share the calculation.</p>



<a name="153912218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153912218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153912218">(Oct 04 2017 at 04:52)</a>:</h4>
<p><a href="/user_uploads/10155/vIox20V2iwvZy0zavp8OHlRQ/expression.PNG" target="_blank" title="expression.PNG">expression.PNG</a> <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>   I have mentioned the formula in the expression element as in the screenshot. Is that correct?</p>
<div class="message_inline_image"><a href="/user_uploads/10155/vIox20V2iwvZy0zavp8OHlRQ/expression.PNG" target="_blank" title="expression.PNG"><img src="/user_uploads/10155/vIox20V2iwvZy0zavp8OHlRQ/expression.PNG"></a></div>



<a name="153912894"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153912894" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153912894">(Oct 06 2017 at 21:30)</a>:</h4>
<p><span class="user-mention" data-user-id="193568">@Pranitha Sruthi</span> yes, that's correct, but you need to express QT and RR in terms of the attributes of the Observation, right?</p>



<a name="153912952"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153912952" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153912952">(Oct 07 2017 at 11:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  Yes. How can I do that?</p>



<a name="153912953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153912953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153912953">(Oct 07 2017 at 11:39)</a>:</h4>
<p>Do I need to install the cql software?</p>



<a name="153912974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153912974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153912974">(Oct 07 2017 at 22:40)</a>:</h4>
<p>Where are QT and RR represented in the Observation?</p>



<a name="153912991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153912991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153912991">(Oct 08 2017 at 14:24)</a>:</h4>
<p>Can they be interpreted independently?  If so, they'd be separate observations.  Otherwise they'd be components</p>



<a name="153913008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153913008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153913008">(Oct 09 2017 at 06:01)</a>:</h4>
<p>How can I represent QT interval and RR rate in the QTc profile (Observation)?</p>



<a name="153913113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153913113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153913113">(Oct 09 2017 at 13:46)</a>:</h4>
<p>I think I answered that in the prvious post in this thread?</p>



<a name="153913114"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153913114" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153913114">(Oct 09 2017 at 13:47)</a>:</h4>
<p>Yes but which method shall I use?  Are they 'components' or independant profiles?</p>



<a name="153913117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153913117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153913117">(Oct 09 2017 at 13:54)</a>:</h4>
<p>Do you understand what a QT interval and RR rate are?  Do you know if they can be interpretted independently?</p>



<a name="153913327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153913327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153913327">(Oct 10 2017 at 15:05)</a>:</h4>
<p>They are measurements made from the recorded ECG. I.e.,  The "QT" is the interval measured between the "Q" and the "T" part of the waveform (The waveform has specifically labeled parts). It is a measure of how well the heart is recovering from the work it just did. It is a measurement, but each heart-beat has a QT. And there is some interpretation of where exactly the Q and T are. Which is why the waveform needs to be scalable so that the human cardiologist can use their own diagnostic viewer calipers.</p>



<a name="153913358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153913358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153913358">(Oct 10 2017 at 18:42)</a>:</h4>
<p>Ok - and are the QT and RR typically examined and useful on their own?</p>



<a name="153919650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919650">(Nov 15 2017 at 09:27)</a>:</h4>
<p>Hi, <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  I have created a profile for the QTc calculation (formula) using the ActivityDefinition resource (as per your instructions). I have modified only the 'dynamicValue' element. Kindly check the screenshots for any mistakes. <a href="/user_uploads/10155/07dFfm8TJmZOE8UkRfwJJtt1/language.PNG" target="_blank" title="language.PNG">language.PNG</a> <a href="/user_uploads/10155/LgXABXTdXBU3xRr4oY5jvxS5/expression.PNG" target="_blank" title="expression.PNG">expression.PNG</a> <a href="/user_uploads/10155/zIZZKCnCDNgoGQvKWaYbQKdP/path.PNG" target="_blank" title="path.PNG">path.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/07dFfm8TJmZOE8UkRfwJJtt1/language.PNG" target="_blank" title="language.PNG"><img src="/user_uploads/10155/07dFfm8TJmZOE8UkRfwJJtt1/language.PNG"></a></div><div class="message_inline_image"><a href="/user_uploads/10155/LgXABXTdXBU3xRr4oY5jvxS5/expression.PNG" target="_blank" title="expression.PNG"><img src="/user_uploads/10155/LgXABXTdXBU3xRr4oY5jvxS5/expression.PNG"></a></div><div class="message_inline_image"><a href="/user_uploads/10155/zIZZKCnCDNgoGQvKWaYbQKdP/path.PNG" target="_blank" title="path.PNG"><img src="/user_uploads/10155/zIZZKCnCDNgoGQvKWaYbQKdP/path.PNG"></a></div>



<a name="153919709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919709">(Nov 15 2017 at 13:03)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="193568">@Pranitha Sruthi</span> , I think this is mixing the type/instance distinction. ActivityDefinition is already at the type level, so what's needed here isn't a profile on ActivityDefinition, but an instance of an ActivityDefinition that specifies how to construct an Observation. Does that make sense?</p>



<a name="153919711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919711">(Nov 15 2017 at 13:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span>  Sorry I don't know. Which one of them do you recommend?</p>



<a name="153919713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919713">(Nov 15 2017 at 13:12)</a>:</h4>
<p>Well, what I'm saying is that you don't need to define a profile, you need to define an ActivityDefinition.</p>



<a name="153919714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919714">(Nov 15 2017 at 13:14)</a>:</h4>
<p>Ok. How can I do that?</p>



<a name="153919715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919715">(Nov 15 2017 at 13:16)</a>:</h4>
<p>You'll need to manually create an XML or JSON instance.  There's no authoring tool for ActivityDefinitions that I'm aware of yet.  (Though you can and should use a tool that at least supports schema validation of your XML or JSON instance.)</p>



<a name="153919716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919716">(Nov 15 2017 at 13:17)</a>:</h4>
<p>Can I use clinFHIR?</p>



<a name="153919717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919717">(Nov 15 2017 at 13:19)</a>:</h4>
<p>I don't know if it supports ActivityDefinition yet - <span class="user-mention" data-user-id="191321">@David Hay</span> ?</p>



<a name="153919729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919729">(Nov 15 2017 at 14:38)</a>:</h4>
<p>Well, you should be able to build an instance of the ActivityType in the Scenario Builder (though I've not tries specifically). Was there something more that you wanted to do with it?</p>



<a name="153919895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919895">(Nov 16 2017 at 06:36)</a>:</h4>
<p><span class="user-mention" data-user-id="191321">@David Hay</span>  I have used Scenario Builder to create an instance for the ActivityDefinition. I need to add the formula for corrected QT interval of an ECG waveform.<br>
  {<br>
  "path": "QTc Interval",<br>
  "language": "text/cql",<br>
  "expression": "QT / RR^0.5"<br>
}<br>
I have edited the dynamicValue element of the resource. Is the above mentioned format correct?</p>



<a name="153919924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919924">(Nov 16 2017 at 08:35)</a>:</h4>
<p>Path needs to resolve to an element of the target resource. So if the ActivityDefinition is a template for an Observation, then the path would need to resolve to an element of an Observation, most likely "value", right? You're defining the expression for calculating the value of the Observation?</p>



<a name="153919925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919925">(Nov 16 2017 at 08:38)</a>:</h4>
<p>Ok. Should I mention the URL of the target Observation in the 'path'?</p>



<a name="153919931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919931">(Nov 16 2017 at 09:17)</a>:</h4>
<p>No, it's a relative path expressed from the root of the target resource.</p>



<a name="153919932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919932">(Nov 16 2017 at 09:18)</a>:</h4>
<p>Do you mean the location of the target resource?</p>



<a name="153919933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919933">(Nov 16 2017 at 09:20)</a>:</h4>
<p>No, just the target resource. Think of an ActivityDefinition is a set of instructions for constructing a resource. When you follow those instructions, you get an instance of a resource. That instance is what I'm calling the target here.</p>



<a name="153919935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919935">(Nov 16 2017 at 09:32)</a>:</h4>
<p>Can you give an example for the path?</p>



<a name="153919956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919956">(Nov 16 2017 at 10:06)</a>:</h4>
<p>Sure, path in this case should be <code>value</code>. You could say <code>valueQuantity</code> if you wanted to delineate the target type, but <code>value</code> is the target element.</p>



<a name="153919957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919957">(Nov 16 2017 at 10:07)</a>:</h4>
<p>Because what you're building is an Observation, and you're calculating the value of the Observation, right?</p>



<a name="153919959"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153919959" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153919959">(Nov 16 2017 at 10:12)</a>:</h4>
<p>Yes. As the result of the calculation would be a numerical quantity (number), the path has to be mentioned as 'value'.</p>



<a name="153933415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Calculation/near/153933415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pranitha Sruthi <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Calculation.html#153933415">(Jan 30 2018 at 13:52)</a>:</h4>
<p>Hi all, which one of the following is a better approach for calculating a particular quantity using a specific formula<br>
1. with the help of  a mobile client  or<br>
2. with the help of a cql executor?<br>
Thank you</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
