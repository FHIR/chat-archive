---
layout: page
title: "FHIR Chat  · code search with hierarchical values · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html">code search with hierarchical values</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153816135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816135">(Mar 17 2016 at 17:24)</a>:</h4>
<p><a href="http://hl7.org/fhir/valueset-allergy-intolerance-status.html" target="_blank" title="http://hl7.org/fhir/valueset-allergy-intolerance-status.html">http://hl7.org/fhir/valueset-allergy-intolerance-status.html</a> suggests a hierarchical value set  -- but this is a bit misleading in behavior; do we expect:<br>
<code>GET /AllergyIntolerance?status=active</code><br>
to return <code>unconfirmed</code> and <code>confirmed</code> results as well ?!</p>



<a name="153816144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816144">(Mar 17 2016 at 17:39)</a>:</h4>
<p>It would certainly be desirable, but it would be good to clarify in the spec.  Change request?</p>



<a name="153816159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816159">(Mar 17 2016 at 17:42)</a>:</h4>
<p>"It would certainly be desireable" Maybe, but it needs to be more clear when a single value is conveying a heirarchy. My inital thought is that this is very surprising value for something that doesn't seem multi-value (status - can something be in more than one state at a single time? maybe in physics :), but not intuitively)</p>



<a name="153816162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816162">(Mar 17 2016 at 17:44)</a>:</h4>
<p>But if I think of this in terms of the Observation.category, things can be categorized as multiple concepts - I can be both a "lab" and a "blood chem" (even though the spec doesn't allow a multi-value for that field)</p>



<a name="153816182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816182">(Mar 17 2016 at 18:18)</a>:</h4>
<p>"do we expect:<br>
GET /AllergyIntolerance?status=active<br>
to return unconfirmed and confirmed results as well ?!" - no. we are clear in the spec that we do not. There's a modifier if you want to include unconfirmed and confirmed as well. </p>



<a name="153816193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816193">(Mar 17 2016 at 18:31)</a>:</h4>
<p>@GG I can't find this in the spec so is unclear at least to me.  I would certainly expect the behaviour Josh desc<br>
ribes since 'active' is a parent concept of both 'unconfirmed' and 'confirmed'.</p>



<a name="153816194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816194">(Mar 17 2016 at 18:35)</a>:</h4>
<p>never mind found the references to modifiers</p>



<a name="153816195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816195">(Mar 17 2016 at 18:39)</a>:</h4>
<p>GET /AllergyIntolerance?status:below=active</p>



<a name="153816196"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816196" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816196">(Mar 17 2016 at 18:42)</a>:</h4>
<p>I certainly don't think we've described the interaction of modifiers like <code>:below</code> with tokens specified only by code (with no system). That's another can of worms. When search problems, can I write <code>GET /Condition?code:below=233873004</code>, without even specifying snomed??</p>



<a name="153816197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816197">(Mar 17 2016 at 18:43)</a>:</h4>
<p>And servers don't have a way to say "I support :below only in certain contexts"</p>



<a name="153816198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816198">(Mar 17 2016 at 18:44)</a>:</h4>
<p>Yes to your first questions ( its in the spec as an example GET [base]/Condition?code:below=126851005 )</p>



<a name="153816199"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816199" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816199">(Mar 17 2016 at 18:45)</a>:</h4>
<p>the search matches irrespective of code system - jsut readin this now</p>



<a name="153816200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816200">(Mar 17 2016 at 18:47)</a>:</h4>
<p>Josh there is probably room for improvement with regard to documentation. I'm not sure that it's worth providing a computable way to say which modifiers are represented in which cases, but we are clear about the equality thing:</p>



<a name="153816202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816202">(Mar 17 2016 at 18:48)</a>:</h4>
<p>Matches are literal (e.g. not based on subsumption or other code system features), but not case sensitive</p>



<a name="153816203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816203">(Mar 17 2016 at 18:48)</a>:</h4>
<p>we should say just that last bit.   I'll make a tracker</p>



<a name="153816204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816204">(Mar 17 2016 at 18:49)</a>:</h4>
<p>what's the tracker for?</p>



<a name="153816206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816206">(Mar 17 2016 at 18:50)</a>:</h4>
<p>to add "Matches are literal (e.g. not based on subsumption or other code system features), but not case sensitive"  to here <a href="http://hl7-fhir.github.io/search.html#token" target="_blank" title="http://hl7-fhir.github.io/search.html#token">http://hl7-fhir.github.io/search.html#token</a>   I think that clears it up.</p>



<a name="153816207"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816207" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816207">(Mar 17 2016 at 18:51)</a>:</h4>
<p>that's where I copied it from</p>



<a name="153816208"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816208" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816208">(Mar 17 2016 at 18:52)</a>:</h4>
<p>Obviously I need new glasses cause I just read it</p>



<a name="153816209"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816209" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816209">(Mar 17 2016 at 18:55)</a>:</h4>
<p>The thing I find incredibly confusing is this interacts with <code>code</code> datatypes like <code>AllergIntolerance.staus</code></p>



<a name="153816210"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816210" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816210">(Mar 17 2016 at 18:55)</a>:</h4>
<p>but I think it should be more prominent not an ..oh by the way..   and then say something like if you want to base on subsumption use the modifiers described below.   minor editorial stuff.  </p>



<a name="153816211"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816211" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816211">(Mar 17 2016 at 18:56)</a>:</h4>
<p>why is that confusing? </p>



<a name="153816213"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816213" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816213">(Mar 17 2016 at 18:56)</a>:</h4>
<p>its a token search</p>



<a name="153816215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816215">(Mar 17 2016 at 18:56)</a>:</h4>
<p>...still</p>



<a name="153816276"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816276" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816276">(Mar 17 2016 at 20:14)</a>:</h4>
<p>This discussion is giving me some shivers...  Your GET shoud NOT (please no) return subsumed codes based as a defualt because a value set expansion (that's what you are operating against for the GET) is a flat list of codes. The expansion can also include additional information, like the hierarchy defined in the code system the codes came from, but that information is suplemental and not somehow "inside the code". So if you want your GET to bring back codes from the value set based on some of the additional information available to you, you should structure the GET "query" to bring a value set subset based on defined parameters. For your example you need to craft a GET that explicitly communicates you want code="active" and all codes subsumed by "active". </p>



<a name="153816286"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816286" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816286">(Mar 17 2016 at 20:16)</a>:</h4>
<p>Rob - you've misunderstood the context of the question, which is the primary reason you have the shivers</p>



<a name="153816291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert McClure <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816291">(Mar 17 2016 at 20:17)</a>:</h4>
<p>OK... So when would a GET return subsumed concepts? </p>



<a name="153816295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/code%20search%20with%20hierarchical%20values/near/153816295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/code.20search.20with.20hierarchical.20values.html#153816295">(Mar 17 2016 at 20:18)</a>:</h4>
<p>well, we're not actually doing value set expansion here. The context is something else</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
