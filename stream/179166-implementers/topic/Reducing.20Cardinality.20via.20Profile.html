---
layout: page
title: "FHIR Chat  · Reducing Cardinality via Profile · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reducing.20Cardinality.20via.20Profile.html">Reducing Cardinality via Profile</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153872426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reducing%20Cardinality%20via%20Profile/near/153872426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reducing.20Cardinality.20via.20Profile.html#153872426">(Feb 17 2017 at 15:52)</a>:</h4>
<p>I'm scratching my head about about a <a href="https://github.com/jamesagnew/hapi-fhir/issues/564" target="_blank" title="https://github.com/jamesagnew/hapi-fhir/issues/564">bug</a> that was submitted to HAPI.</p>
<p>Say I have a resource with a field that has cardinality <code>0..*</code>, such as <code>Patient.name</code>. If I define a profile that reduces the cardinality of this field to <code>0..1</code> is it valid to then serialize the field as a simple HumanName object instead of an array of HumanName object?</p>



<a name="153872427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reducing%20Cardinality%20via%20Profile/near/153872427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reducing.20Cardinality.20via.20Profile.html#153872427">(Feb 17 2017 at 16:01)</a>:</h4>
<p>Hi James, I think that serialization should always adhere to the original structure of the base profile. Otherwise you would break to contract of the base profile.</p>



<a name="153872429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reducing%20Cardinality%20via%20Profile/near/153872429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pascal Pfiffner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reducing.20Cardinality.20via.20Profile.html#153872429">(Feb 17 2017 at 16:03)</a>:</h4>
<p>I would not expect to be able to parse that, since I'd still be expecting an array for <code>Patient.name</code> in JSON.</p>



<a name="153872430"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reducing%20Cardinality%20via%20Profile/near/153872430" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reducing.20Cardinality.20via.20Profile.html#153872430">(Feb 17 2017 at 16:03)</a>:</h4>
<p>Right</p>



<a name="153872432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reducing%20Cardinality%20via%20Profile/near/153872432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reducing.20Cardinality.20via.20Profile.html#153872432">(Feb 17 2017 at 16:11)</a>:</h4>
<p>I'm inclined to agree with this logic. I suspect HAPI isn't doing the right thing here.</p>



<a name="153872438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reducing%20Cardinality%20via%20Profile/near/153872438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reducing.20Cardinality.20via.20Profile.html#153872438">(Feb 17 2017 at 17:00)</a>:</h4>
<p>Serialization is always based on the resource and data type cardinality, not the profiled cardinality.  (One schema to rule them all! :))</p>



<a name="153872453"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reducing%20Cardinality%20via%20Profile/near/153872453" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reducing.20Cardinality.20via.20Profile.html#153872453">(Feb 17 2017 at 18:31)</a>:</h4>
<p>yes, it still has to be an array. in terms of the profile, the fact that it's an array rather than a singleton is still available</p>



<a name="153873063"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reducing%20Cardinality%20via%20Profile/near/153873063" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anand Mohan Tumuluri <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reducing.20Cardinality.20via.20Profile.html#153873063">(Feb 22 2017 at 20:36)</a>:</h4>
<p>I had a similar question about changing the cardinality of a field from <code>0..*</code> to <code>1..1</code> within a profile. From what I understand, the value should still be an array with 1 element. Is that correct? Otherwise, the base (de)serializers will not work at all.</p>



<a name="153873064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reducing%20Cardinality%20via%20Profile/near/153873064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anand Mohan Tumuluri <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reducing.20Cardinality.20via.20Profile.html#153873064">(Feb 22 2017 at 20:38)</a>:</h4>
<p>Even then, wont this break the profile validation? It needs to treat cardinality altered in a profile separately from the cardinality specified in the base.</p>



<a name="153873065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Reducing%20Cardinality%20via%20Profile/near/153873065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Reducing.20Cardinality.20via.20Profile.html#153873065">(Feb 22 2017 at 20:43)</a>:</h4>
<p>It shouldn't break profile validation.  The validator should be aware of whether it's looking at the original resource/data type definition vs. a constraining profile</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
