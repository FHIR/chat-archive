---
layout: page
title: "FHIR Chat  · Cross-Resource Referecnces · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html">Cross-Resource Referecnces</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153867650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867650">(Jan 16 2017 at 19:36)</a>:</h4>
<p>Question I've been asked:<br>
if an Observation refers to both a Patient and Encounter, does the Encounter have to refer to the same patient.</p>



<a name="153867651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867651">(Jan 16 2017 at 19:36)</a>:</h4>
<p>my usual answer to this is : probably, but it's very difficult to say that absolutely must</p>



<a name="153867652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867652">(Jan 16 2017 at 19:36)</a>:</h4>
<p>but is there anywhere in the spec where we really have to have consistent references like this?</p>



<a name="153867653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867653">(Jan 16 2017 at 19:39)</a>:</h4>
<p>I think it is best practice, but not always enforceable. Patient is optional on encounter. What happens if you create the Encounter first (without a patient), then create the Patient, and finally the Observation that points to both. </p>



<a name="153867654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867654">(Jan 16 2017 at 19:40)</a>:</h4>
<p>If we go by the 80-20 rule, wouldn't you say that they must match, and outliers need an extension?</p>



<a name="153867655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867655">(Jan 16 2017 at 19:41)</a>:</h4>
<p>I understand the question for the cases when the reference to patient is present in both places</p>



<a name="153867658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867658">(Jan 16 2017 at 19:58)</a>:</h4>
<p>80-20 rule - have to understand this: it is about design disagreement</p>



<a name="153867661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867661">(Jan 16 2017 at 19:58)</a>:</h4>
<p>it's not just patient, but patient is probably the most iportnat</p>



<a name="153867665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867665">(Jan 16 2017 at 20:06)</a>:</h4>
<p>If the encounter and the observation "almost always" point to the same patient, that is 80+% of the cases. This also allows cases of encounter without patient to default implicitly to the patient in the observation. A "third-party encounter" is explicitly placed in an extension.</p>



<a name="153867668"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867668" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867668">(Jan 16 2017 at 20:08)</a>:</h4>
<p>it's not whether the encounter+observation pointing to the same patient is 80% of cases, it's about whether 80+% of systems require them to to be the same in all cases</p>



<a name="153867669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867669">(Jan 16 2017 at 20:15)</a>:</h4>
<p>I would guess that 95+% of systems expect the patient to be the same.</p>



<a name="153867672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867672">(Jan 16 2017 at 20:16)</a>:</h4>
<p>Should we make them check to verify?</p>



<a name="153867742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867742">(Jan 16 2017 at 22:50)</a>:</h4>
<p>Scenario:<br>
There are duplicate Patients A &amp; B in the system.<br>
They're being merged by referencing B --&gt; A, <br>
Patient B is set to "inactive"<br>
The encounter E has been created before the merge and still points at B<br>
The observation is created after the merge and points at the active Patient A and the Encounter E</p>



<a name="153867743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867743">(Jan 16 2017 at 22:53)</a>:</h4>
<p>The assumption that Encounter and Observation always reference the same patient is only safe if merging Patients means updating all references. </p>



<a name="153867752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867752">(Jan 16 2017 at 23:21)</a>:</h4>
<p>Same patient is not the same as the identical patient resource. I think it is important to be the same patient.</p>



<a name="153867769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bo Dagnall <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867769">(Jan 17 2017 at 00:09)</a>:</h4>
<p>This potential problem isn't just about patients. Given the ability to create a network of referenced resources, the pattern where resource A references resource B and resource C, and resource B also references resource C is quite common (e.g., duplicate references to patient, provider, organization, encounter, condition or any other common resource). I agree that in most cases, the reference from A to C should be the same as the reference from B to C ( i.e., both A and B point to the same instance of C), but there are times where this may not be true. The problem is that I don't know of any way in FHIR to express when duplicate references should resolve to the same instance or not. If it is intentional for A to reference a different instance of C than B does, how do you communicate this? Further, if the references to C from A and B are meant to be the same, I believe we should be able to enforce this to avoid data quality issues that may arise. </p>



<a name="153867776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867776">(Jan 17 2017 at 00:55)</a>:</h4>
<p>so I have 2 questions in this space:<br>
- is there anywhere in the spec itself where we need to enforce consistent references<br>
- what are the requirements for a language that makes statements about this?</p>



<a name="153867781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867781">(Jan 17 2017 at 01:41)</a>:</h4>
<p>so we'll talk about this Wed breakfast. 7:30 am - get some breakfast downstairs, then come up to room 1146 and we'll discuss this</p>



<a name="153867785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867785">(Jan 17 2017 at 02:01)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> We could probably grab a room from Lillian that's a bit closer than having everyone go all the way up to your room if you want - shall I ask?</p>



<a name="153867786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867786">(Jan 17 2017 at 02:02)</a>:</h4>
<p>sure</p>



<a name="153867787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153867787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153867787">(Jan 17 2017 at 02:02)</a>:</h4>
<p>thx</p>



<a name="153868006"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153868006" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153868006">(Jan 18 2017 at 05:50)</a>:</h4>
<p>reminder - if you're interested in this topic, we'll be talking about it 7:30 am in room 1146 (bring your breakfast upstairs). If you can't get to floor 11, PM me directly and I'll come down and bring you up</p>



<a name="153868009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153868009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153868009">(Jan 18 2017 at 05:58)</a>:</h4>
<p>Can someone post a summary of this discussion after tomorrow morning? Thanks.</p>



<a name="153868101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153868101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153868101">(Jan 18 2017 at 16:26)</a>:</h4>
<p>Summary:<br>
- yes, we need to provide some framework to allow the conformance layer to make statements about consistency<br>
- mostly, what you want to make is statements about the compartments we already have defined - most critically, patient<br>
- we're going to add some warning wording associated with the patient compartment explaining the kind of cases that cause record sets to cross patients (mother/baby, transplants/tranfusions, family history (genetics), family counseling)<br>
- we will create a new resource that describes networks or clusters of resources. This will describe a tree of resources, and indicate, for each reference/target combination, what the rules are. <br>
- an example of the kind of thing that this resource is dealing with can be seen here: <a href="http://fhir.hl7.org.au/fhir/rcpa/cprofiles.html" target="_blank" title="http://fhir.hl7.org.au/fhir/rcpa/cprofiles.html">http://fhir.hl7.org.au/fhir/rcpa/cprofiles.html</a><br>
- when we make rules about the join between resources, we can make simple rules about compartments, or complex rulues using fhirpath<br>
- this 'PackageDefinition' resource (working name) will also find use in several other places, including the _include parameter. <br>
- you might see some drafts of this in the current build before R3, but it won't be part of R3</p>



<a name="153868133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Cross-Resource%20Referecnces/near/153868133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Cross-Resource.20Referecnces.html#153868133">(Jan 18 2017 at 17:57)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Thanks!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
