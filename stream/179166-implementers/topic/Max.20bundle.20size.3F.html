---
layout: page
title: "FHIR Chat  · Max bundle size? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html">Max bundle size?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="210502398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210502398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Hill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210502398">(Sep 18 2020 at 10:47)</a>:</h4>
<p>Is there a maximum number of entries in a bundle?  I don't see a limit in the Bundle resource specification, but I get this message from a Vonk server:</p>
<p>Response Body: {<br>
  "resourceType": "OperationOutcome",<br>
  "id": "4837048c-7915-4d68-a4dc-db6dd4c3ab3e",<br>
  "meta": {<br>
    "versionId": "c7a228fb-1b41-4610-86fd-472c807baaf3",<br>
    "lastUpdated": "2020-09-18T10:15:43.351+00:00"<br>
  },<br>
  "issue": [<br>
    {<br>
      "severity": "error",<br>
      "code": "exception",<br>
      "details": {<br>
        "coding": [<br>
          {<br>
            "system": "<a href="http://hl7.org/fhir/dotnet-api-operation-outcome">http://hl7.org/fhir/dotnet-api-operation-outcome</a>",<br>
            "code": "5006"<br>
          }<br>
        ],<br>
        "text": "Too many entries in bundle. Max supported number of entries is 500"<br>
      }<br>
    }<br>
  ]<br>
}</p>
<p>The HAPI server I'm testing with doesn't complain about this.</p>
<p>Anyone else run into this?</p>
<p>Thanks!</p>



<a name="210504162"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210504162" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210504162">(Sep 18 2020 at 11:06)</a>:</h4>
<p>there's no theortical limit to the size of a bundle, but servers are allowed - and pretty much have to - put some limit on to protect themselve s</p>



<a name="210542731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210542731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Hill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210542731">(Sep 18 2020 at 16:19)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> , </p>
<p>In post-acute care, some of the assessments are quite large, which results in a lengthy SDCQuestionnaireResponse.  When I convert that SDCQuestionnaireResponse into Observations for querying and storage, it results in over 500 observations.  There is another Observation-based resource that references these individual observations, so I am writing the whole thing as a transaction so that referential integrity is preserved in the destination system.</p>
<p>If there is a better approach, that would be great.  I agree that servers may have to have a limit - is 500 a suitable limit?</p>
<p>Thanks!</p>



<a name="210544457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210544457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210544457">(Sep 18 2020 at 16:33)</a>:</h4>
<p><span class="user-mention" data-user-id="222957">@Dave Hill</span> Have you checked whether you can configure that limit?</p>



<a name="210544976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210544976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Hill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210544976">(Sep 18 2020 at 16:37)</a>:</h4>
<p><span class="user-mention" data-user-id="197470">@Alexander Kiel</span> Thanks, I will check with the owner of the server.  I don't have direct access to that aspect of the server.  Anyone know if the Vonk server has that option?</p>



<a name="210545775"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210545775" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Hill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210545775">(Sep 18 2020 at 16:44)</a>:</h4>
<p>Looks like there is a setting in Vonk to do set the maximum size of an incoming bundle - <a href="http://docs.simplifier.net/vonk/configuration/appsettings.html#protect-against-large-input">http://docs.simplifier.net/vonk/configuration/appsettings.html#protect-against-large-input</a></p>



<a name="210546666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210546666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210546666">(Sep 18 2020 at 16:52)</a>:</h4>
<p><span class="user-mention" data-user-id="222957">@Dave Hill</span> Looks good.</p>



<a name="210547784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210547784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210547784">(Sep 18 2020 at 17:01)</a>:</h4>
<p>Might be a useful value to put in the capability statement? There are different dimensions along which the limits can be set, similar to the Vonk config. The Google server is configured with a 50MiB bundle limit, 4500 entries in a transaction, no limit in a batch (whatever you can fit into 50MiB and doesn't take so long that it hits the API timeout).</p>



<a name="210624394"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210624394" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210624394">(Sep 19 2020 at 16:56)</a>:</h4>
<p>I am more interested in where the codesystem "<a href="http://hl7.org/fhir/dotnet-api-operation-outcome">http://hl7.org/fhir/dotnet-api-operation-outcome</a>" is defined.  <span class="user-mention" data-user-id="203235">@Ward Weistra</span></p>



<a name="210625410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210625410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210625410">(Sep 19 2020 at 17:21)</a>:</h4>
<p>Great question <span class="user-mention" data-user-id="191506">@Yunwei Wang</span>, no hits: <a href="http://registry.fhir.org/results?query=%22http%3A%2F%2Fhl7.org%2Ffhir%2Fdotnet-api-operation-outcome%22&amp;latestFilter=true">http://registry.fhir.org/results?query=%22http%3A%2F%2Fhl7.org%2Ffhir%2Fdotnet-api-operation-outcome%22&amp;latestFilter=true</a> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>
<p>Btw, I suspect it's a performance based choice to not allow bundles to get too large.</p>
<p><span class="user-mention" data-user-id="191757">@Christiaan Knaap</span> <span class="user-mention" data-user-id="191347">@Mirjam Baltus</span> Is this max bundle size configurable? And should <a href="http://hl7.org/fhir/dotnet-api-operation-outcome">http://hl7.org/fhir/dotnet-api-operation-outcome</a> have a definition somewhere?</p>



<a name="210788470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210788470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210788470">(Sep 21 2020 at 19:27)</a>:</h4>
<p><span class="user-mention" data-user-id="203235">@Ward Weistra</span> Correct, it's just a protection for the server. It's configurable by setting the SizeLimit option MaxBatchEntries. See <a href="http://docs.simplifier.net/vonk/configuration/appsettings.html#protect-against-large-input">http://docs.simplifier.net/vonk/configuration/appsettings.html#protect-against-large-input</a></p>
<p>I agree that it's a bit too low by default, especially if you are dealing with Observation resources as described.<br>
Additionally, the is a limit for the max. size (in MB).</p>



<a name="210788860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210788860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210788860">(Sep 21 2020 at 19:31)</a>:</h4>
<p>Most of the codes from <a href="http://hl7.org/fhir/dotnet-api-operation-outcome">http://hl7.org/fhir/dotnet-api-operation-outcome</a> can be found here <a href="https://github.com/FirelyTeam/fhir-net-api/blob/add8073b8d096f66cde13f54c940048ba4363e0a/src/Hl7.Fhir.Specification/Support/Issue.cs">https://github.com/FirelyTeam/fhir-net-api/blob/add8073b8d096f66cde13f54c940048ba4363e0a/src/Hl7.Fhir.Specification/Support/Issue.cs</a></p>



<a name="210795953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210795953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210795953">(Sep 21 2020 at 20:32)</a>:</h4>
<p>A bit more human readable documentation for those codes is here: <a href="https://simplifier.net/docs/fhir-net-api/home">https://simplifier.net/docs/fhir-net-api/home</a></p>



<a name="210796086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Max%20bundle%20size%3F/near/210796086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ward Weistra <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Max.20bundle.20size.3F.html#210796086">(Sep 21 2020 at 20:33)</a>:</h4>
<p><span class="user-mention" data-user-id="222957">@Dave Hill</span> <span aria-label="wait one second" class="emoji emoji-261d" role="img" title="wait one second">:wait_one_second:</span>️</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
