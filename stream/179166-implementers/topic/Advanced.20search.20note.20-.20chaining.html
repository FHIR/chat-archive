---
layout: page
title: "FHIR Chat  · Advanced search note - chaining · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Advanced.20search.20note.20-.20chaining.html">Advanced search note - chaining</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="166054266"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Advanced%20search%20note%20-%20chaining/near/166054266" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Calderero <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Advanced.20search.20note.20-.20chaining.html#166054266">(May 20 2019 at 03:47)</a>:</h4>
<p>At the bottom of <a href="http://hl7.org/fhir/R4/search.html#chaining" target="_blank" title="http://hl7.org/fhir/R4/search.html#chaining">http://hl7.org/fhir/R4/search.html#chaining</a>, there's text that says:</p>
<blockquote>
<p>Advanced Search Note: Where a chained parameter searches a resource reference that may have more than one type of resource as its target, the parameter chain may end up referring to search parameters with the same name on more than one kind of resource at once. Servers SHOULD reject a search where the logical id refers to more than one matching resource across different types. For example, the client has to specify the type explicitly using the syntax in the second example above.</p>
</blockquote>
<p>This same note was present in STU3 (i.e. <a href="https://www.hl7.org/fhir/STU3/search.html#chaining" target="_blank" title="https://www.hl7.org/fhir/STU3/search.html#chaining">https://www.hl7.org/fhir/STU3/search.html#chaining</a>).<br>
If I were to interpret this, would this mean that searches like <code>AuditEvent?entity.patient=X</code> (i.e. <a href="http://hl7.org/fhir/STU3/compartmentdefinition-patient.html" target="_blank" title="http://hl7.org/fhir/STU3/compartmentdefinition-patient.html">http://hl7.org/fhir/STU3/compartmentdefinition-patient.html</a>) would always be rejected? I surmise that's why in R4, the Patient compartment had removed these types of searches from the list?</p>
<p>For the record, our FHIR server can handle <code>AuditEvent?entity.patient=X</code> but my other question is since the spec says "server SHOULD reject a search" does that mean we're not following the FHIR standard anymore? I tend to think that following the SHALL, MUST and SHOULD of the spec means we're FHIR-compliant and not following those would mean the opposite?</p>



<a name="166077433"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Advanced%20search%20note%20-%20chaining/near/166077433" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Advanced.20search.20note.20-.20chaining.html#166077433">(May 20 2019 at 11:38)</a>:</h4>
<p><code>entity.patient=x</code> is wrong - it should be <code>entity:Patient=x</code> or <code>entity=Patient/x</code><br>
Chaining works with search parameters of the target resource - so <code>entity:Patient.name=Smith</code> (and because <code>entity</code> has more that one type of resource as its target the <code>:Patient</code> part is needed)</p>



<a name="166080867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Advanced%20search%20note%20-%20chaining/near/166080867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Calderero <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Advanced.20search.20note.20-.20chaining.html#166080867">(May 20 2019 at 12:34)</a>:</h4>
<p>So you're saying that the compartment definition of Patient for STU3 is wrong/non-executable if there's an AuditEvent resource?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
