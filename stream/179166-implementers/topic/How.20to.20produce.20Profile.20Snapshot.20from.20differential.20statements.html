---
layout: page
title: "FHIR Chat  · How to produce Profile Snapshot from differential statements · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html">How to produce Profile Snapshot from differential statements</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="166800197"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/166800197" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadis Suraweera <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#166800197">(May 29 2019 at 09:55)</a>:</h4>
<p>Dear All,<br>
I am working with FHIR profiles and Is there any standard way of producing the Snapshot from differential statements? i am using forge-R4 and it produce only differential statements. The reason is, validation implementation require to have the Snapshot of the profile instead of differential statements.<br>
Thanks,<br>
Nadis Suraweera</p>



<a name="166803101"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/166803101" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#166803101">(May 29 2019 at 10:46)</a>:</h4>
<p>If you open the "Options" drop-down menu, you can check the "Save snapshot component" option in the section "Persistance Options" (looks like it's off by default).</p>



<a name="166808860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/166808860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#166808860">(May 29 2019 at 12:19)</a>:</h4>
<p>which validator requires the snapshot?</p>



<a name="167762772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/167762772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadis Suraweera <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#167762772">(Jun 10 2019 at 14:17)</a>:</h4>
<blockquote>
<p>If you open the "Options" drop-down menu, you can check the "Save snapshot component" option in the section "Persistance Options" (looks like it's off by default).</p>
</blockquote>
<p>Thank you very much <span class="user-mention" data-user-id="194703">@Morten Ernebjerg</span> it solved the problem.. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="167763009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/167763009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nadis Suraweera <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#167763009">(Jun 10 2019 at 14:20)</a>:</h4>
<blockquote>
<p>which validator requires the snapshot?</p>
</blockquote>
<p>Hi Grahame,<br>
HAPI FHIR validation expects snapshots rather than differential statements.. Tried the approach that <span class="user-mention" data-user-id="194703">@Morten Ernebjerg</span>  suggested and now it works fine..<br>
Thanks!.</p>



<a name="167763111"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/167763111" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#167763111">(Jun 10 2019 at 14:21)</a>:</h4>
<p>that was a bug in the validator. It's fixed now in the standalone validator, but that isn't released as part of the HAPI validator yet</p>



<a name="171896676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171896676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171896676">(Jul 28 2019 at 17:10)</a>:</h4>
<p>Hi,</p>
<p>with FHIR Validation tool Version 3.8.12-SNAPSHOT - Built 2019-07-22T20:01:22.449Z - Git 80c305fa5d9b, I get errors like:</p>
<div class="codehilite"><pre><span></span>Error in snapshot generation: Differential for https://fhir.bbmri.de/StructureDefinition/BbmriBiobank with id: Organization.contact:head.purpose.coding.system has an element that is not marked with a snapshot match
</pre></div>


<p>For profiles exported from Forge without snapshot definitions.</p>



<a name="171897417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171897417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171897417">(Jul 28 2019 at 17:36)</a>:</h4>
<p>That means that the snapshot is being generated and there's inconsistencies between the snapshot and the differential - which generally means that there's a differential issue</p>



<a name="171897798"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171897798" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171897798">(Jul 28 2019 at 17:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> Thanks! Do you see an issue here? <a href="https://github.com/samply/bbmri-fhir-ig/blob/36dda1a8aae6489bd68b2901cd6d418c0f8145df/profile/BbmriBiobank.StructureDefinition.json#L182" target="_blank" title="https://github.com/samply/bbmri-fhir-ig/blob/36dda1a8aae6489bd68b2901cd6d418c0f8145df/profile/BbmriBiobank.StructureDefinition.json#L182">https://github.com/samply/bbmri-fhir-ig/blob/36dda1a8aae6489bd68b2901cd6d418c0f8145df/profile/BbmriBiobank.StructureDefinition.json#L182</a></p>



<a name="171900275"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171900275" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171900275">(Jul 28 2019 at 19:07)</a>:</h4>
<p>The differential jumps directly from this: Organization.contact:head to Organization.contact:head.purpose.coding.system.  You need to have elements for Organization.contact:head.purpose and Organization.contact:head.purpose.coding to work with the publication tooling.  (Known limitation of the publication tools)</p>



<a name="171911877"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171911877" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171911877">(Jul 29 2019 at 01:13)</a>:</h4>
<p>This will be fixed in my next release - probably in a few hours time</p>



<a name="171920542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171920542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171920542">(Jul 29 2019 at 05:55)</a>:</h4>
<p>done.</p>



<a name="171930830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171930830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171930830">(Jul 29 2019 at 09:32)</a>:</h4>
<p><span class="user-mention" data-user-id="197470">@Alexander Kiel</span> to be clear, actually there is nothing wrong with your profile, according to the FHIR spec. However, some tooling (specifically IG Publisher) is not yet capable of processing a sparse differential. You can work around this tooling limitation by (manually) adding missing parent elements to the differential (w/o any constraints).</p>



<a name="171932564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171932564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Kiel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171932564">(Jul 29 2019 at 10:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> Thanks. Most of the issues are resolved with <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> last fix. Thanks for this. The only thing we (<span class="user-mention" data-user-id="221444">@Noemi Deppenwiese</span> ) see now is something like this:</p>
<div class="codehilite"><pre><span></span>Unable to generate snapshot for https://fhir.bbmri.de/StructureDefinition/BbmriNetworkMembership because
Attempt to a slice an element that does not repeat: Reference.identifier/Reference.identifier from
http://hl7.org/fhir/StructureDefinition/Reference in https://fhir.bbmri.de/StructureDefinition/BbmriNetworkMembership
</pre></div>


<p>Is this a problem in our profiles or can this be fixed in the validator also?</p>



<a name="171932852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171932852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171932852">(Jul 29 2019 at 10:08)</a>:</h4>
<p>It sounds like a problem in your profiles. You can’t slice something that doesn’t repeat</p>



<a name="171933485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171933485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noemi Deppenwiese <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171933485">(Jul 29 2019 at 10:19)</a>:</h4>
<p>After consulting the spec, it seems to be a error in our profiles since none of the elements in Reference repeat. IDK why Forge allowed me to slice identifier in the first place...</p>



<a name="171935143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171935143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171935143">(Jul 29 2019 at 10:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I think FHIR always allows you to type-slice a polymorphic element, regardless of the cardinality. For example, <code>ActivityDefinition.subject[x]</code> is 0...1</p>



<a name="171935222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20to%20produce%20Profile%20Snapshot%20from%20differential%20statements/near/171935222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20to.20produce.20Profile.20Snapshot.20from.20differential.20statements.html#171935222">(Jul 29 2019 at 10:49)</a>:</h4>
<p>Right. I should’ve said that too. But this doesn’t repeat and isn’t polymorphic</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
