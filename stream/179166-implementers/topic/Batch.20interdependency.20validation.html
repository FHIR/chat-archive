---
layout: page
title: "FHIR Chat  · Batch interdependency validation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependency.20validation.html">Batch interdependency validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="255650409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependency%20validation/near/255650409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependency.20validation.html#255650409">(Sep 30 2021 at 21:20)</a>:</h4>
<p>Batch semantics requires that "For a batch, there SHALL be no interdependencies between the different entries in the Bundle that cause change on the server."</p>
<p>This sentence really needs an "or else what happens?" clause. What error is returned, and is it for the entire operation or for an individual entry/entries? I would argue that it has to be at the level of the individual entries where the interdependency was detected.</p>
<p>It's quite difficult, maybe even impossible, to verify this constraint in a way that would allow the entire bundle to be rejected in every case. When resolving conditional operations or patches, the potential interdependencies are not necessarily known until each entry is being processed - so because entries are processed separately, the ones already processed cannot be rolled back. It would be problematic to "half process" each entry (doing reads and searches) just to validate this constraint before doing a second pass, since the batch is not a transaction.</p>
<p>I'm not sure what expectations other implementers have used for this situation.</p>



<a name="255660159"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Batch%20interdependency%20validation/near/255660159" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Batch.20interdependency.20validation.html#255660159">(Sep 30 2021 at 22:39)</a>:</h4>
<p>I think it's up to the server.  It could toss the whole batch after a preliminary analysis, could toss the batch entries after the point it finds a problem, could proceed on a best-effort basis to process those without dependencies, or could even try to manage dependencies and process things in an order that allows the dependencies to be satisfied.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
