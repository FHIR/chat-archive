---
layout: page
title: "FHIR Chat  · Bundle search request · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html">Bundle search request</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="173568729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/173568729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Madeline Hoskins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#173568729">(Aug 19 2019 at 18:51)</a>:</h4>
<p>Hi All, </p>
<p>I am working on some queries from an EMR. Can you please advise if the below syntax would be valid for the following scenario: Return the identifier and specialty of a PractitionerRole and include the practitioner and location resource. <br>
"request": {<br>
"method": "GET",<br>
"url": "/PractitionerRole/_include:practitioner,location&amp;_elements:identifier,specialty"<br>
}</p>



<a name="173573173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/173573173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#173573173">(Aug 19 2019 at 19:48)</a>:</h4>
<p>something like: <code>.../PractitionerRole?_include=PractitionerRole:practitioner&amp;_include=PractitionerRole:location</code> - I would not bother with <code>_elements</code>, it is not widely implemented and it is just an optimization,  you are going to get all elements (including those) if you do not specify it</p>



<a name="173573494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/173573494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Madeline Hoskins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#173573494">(Aug 19 2019 at 19:52)</a>:</h4>
<p>Thanks Michele. <br>
Also, for a Bundle with multiple entries or requests, how can I make sure the requests are made in the right order? Is this possible?</p>



<a name="173575445"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/173575445" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#173575445">(Aug 19 2019 at 20:15)</a>:</h4>
<p>Not sure - what is the right order?<br>
I'd suggest not to use a request bundle - it is another feature that is not widely implemented. Issue separate requests</p>



<a name="173677279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/173677279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Madeline Hoskins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#173677279">(Aug 20 2019 at 17:23)</a>:</h4>
<p>For example: I want to make sure that the first query is run before the last two. <br>
The first query finds the ServiceRequest for when the patientId = 123 and the response should include the Patient that represents the subject, PractitionerRole that represents the requester, PractitionerRole that represents the performer. <br>
The second query wants to include the resource referenced from the PractitionerRole.location field for the "requester" resource- so i need to be sure that the first query is run before jumping into the respective PractitionerRole resource that represents the requester. <br>
{<br>
    "resourceType": "Bundle",<br>
    "id": "bundle-request",<br>
    "type": "batch",<br>
    "entry": [{<br>
            "request": {<br>
                "method": "GET",<br>
                "url": "/ServiceRequest?Patient=123&amp;_include:ServiceRequest:subject,&amp;_include:ServiceRequest:requester,&amp;_include:ServiceRequest:performer"<br>
            }<br>
        },<br>
        {<br>
            "request": {<br>
                "method": "GET",<br>
                "url": "/PractitionerRole?_include:PractitionerRole:location"<br>
            }<br>
        },<br>
        {<br>
            "request": {<br>
                "method": "GET",<br>
                "url": "/PractitionerRole?_include:PractitionerRole:practitioner,&amp;_include:PractitionerRole:location"<br>
            }<br>
        }<br>
    ]<br>
}</p>



<a name="173677593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/173677593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#173677593">(Aug 20 2019 at 17:27)</a>:</h4>
<p>A query like <code>/PractitionerRole?_include=PractitionerRole:location</code> returns ALL PractitionerRole resources. If you want to limit that to the PratictionerRoles returned by the first search you cannot use a bundle - you have to issue the first search request, extract the PractitionerRole ids and use those to do another search (or - better - directly extracts the Location ids and get those)</p>



<a name="173678202"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/173678202" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Madeline Hoskins <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#173678202">(Aug 20 2019 at 17:33)</a>:</h4>
<p>Okay that makes sense. So i need multiple Bundles of requests? How would i a send a single request?</p>



<a name="173698325"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/173698325" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#173698325">(Aug 20 2019 at 21:37)</a>:</h4>
<p>You could say SeviceRequest?patient=123&amp;_include=ServiceRequest:subject&amp;_include=ServiceRequest:requester&amp;_include=ServiceRequest:performer&amp;_include:iterate=Practitioner:location<br>
However, that would give you the location of both requester and performer.  The only mechanism to get only the requester locations is to execute two independent requests.  There's no way to send a batch or transaction in which the parameters of one query are dependent on the results of a preceding query</p>



<a name="189498194"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/189498194" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jay Lyle <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#189498194">(Mar 02 2020 at 14:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191912">Michele Mottini</span> <a href="#narrow/stream/179166-implementers/topic/Bundle.20search.20request/near/173573173" title="#narrow/stream/179166-implementers/topic/Bundle.20search.20request/near/173573173">said</a>:</p>
<blockquote>
<p>something like: <code>.../PractitionerRole?_include=PractitionerRole:practitioner&amp;_include=PractitionerRole:location</code> - I would not bother with <code>_elements</code>, it is not widely implemented and it is just an optimization,  you are going to get all elements (including those) if you do not specify it</p>
</blockquote>
<p>We have one context in which medication orders link to patients, so the order screen and patient screen can be easily aligned with their resources using References. We have another context in which the order view contains a small number of identifying patient attributes (e.g., date of birth, ID). </p>
<p>I was thinking of mixing  _include &amp; _elements:<br>
GET [base]/MedicationOrder?status="Active"&amp;_include=MedicationOrder:patient?_elements=birthDate,identifier?type="SSN"</p>
<p>Your comment suggests this may not be worthwhile, but if we're getting all the pharmacy orders for a location, all those patient records are going to be heavy. Is this still your impression?</p>



<a name="189532338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/189532338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#189532338">(Mar 02 2020 at 20:23)</a>:</h4>
<p>That request gets all MedicationOrder with all their associated patient - yes, it is going to be heavy - and most actual server will reject it as too broad. Adding _elements would help reducing the amount of data to be returned, not much in term of the amount of data to find / extract, and again: most server do not implement _elements</p>



<a name="189532447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/189532447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#189532447">(Mar 02 2020 at 20:24)</a>:</h4>
<p>Also: <code>. . . .identifier?type=ssn</code> means search MedicationOrder by type, not return only the SSN identifiers, is that what you meant?</p>



<a name="189551545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Bundle%20search%20request/near/189551545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jay Lyle <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Bundle.20search.20request.html#189551545">(Mar 03 2020 at 00:15)</a>:</h4>
<p>Yes. This is for a pharmacy application, so the pharmacist can review the workload and select tasks. It should be restricted to specific clinics, which we might do with an operation, a compartment extension, or maybe just with custom code.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
