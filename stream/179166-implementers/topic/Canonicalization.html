---
layout: page
title: "FHIR Chat  · Canonicalization · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html">Canonicalization</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="172748053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/172748053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#172748053">(Aug 08 2019 at 08:38)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18441" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18441">GF#18441</a> raises an issue associated with the canonicalization algorithms. The task resolution says:</p>



<a name="172748062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/172748062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#172748062">(Aug 08 2019 at 08:38)</a>:</h4>
<blockquote>
<p>The canonicalization algorithm should <em>not</em> normalize information within XML attribute values or JSON object properties (excepting XHTML, where normalization SHALL happen normally).  The change will be to restrict normalization to the XHTML content and to content outside XML attribute and JSON property values.</p>
<p>Grahame will raise this with the community and see if this will actually impact anyone - and more importantly whether anyone objects to making this breaking change.</p>
<p>If the community is agreeable, we will flag this in the R4 spec as having been fixed in the R5 spec and will fix it there.</p>
<p>If the community is not agreeable, we will define new canonicalization algorithm URLs for the new "corrected" version.</p>
</blockquote>



<a name="172748075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/172748075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#172748075">(Aug 08 2019 at 08:39)</a>:</h4>
<p>does anyone have any issues with this?</p>



<a name="175930107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/175930107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#175930107">(Sep 17 2019 at 17:40)</a>:</h4>
<p>Looking at the GForge item, I think this is not well thought out. The canonicalization is mentioned in the context of digital signatures. The Signature data type explicitly references XML digital signature <a href="https://www.w3.org/TR/xmldsig-core1/" target="_blank" title="https://www.w3.org/TR/xmldsig-core1/">https://www.w3.org/TR/xmldsig-core1/</a> that in turn requires use of Canonical XML <a href="https://www.w3.org/TR/xml-c14n11/" target="_blank" title="https://www.w3.org/TR/xml-c14n11/">https://www.w3.org/TR/xml-c14n11/</a>. This means that XML attributes will be normalized, if XML dsig is used.</p>
<p>Furthermore, I don't understand the issue raised - the canonicalization happens as part of the signature process, the canonical form is not sent over the wire.</p>



<a name="176126616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176126616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176126616">(Sep 19 2019 at 18:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191315">@Josh Mandel</span></p>



<a name="176126629"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176126629" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176126629">(Sep 19 2019 at 18:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="176126742"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176126742" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176126742">(Sep 19 2019 at 18:16)</a>:</h4>
<p>the canonical form can be sent over the wire, or stored.</p>



<a name="176126966"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176126966" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176126966">(Sep 19 2019 at 18:18)</a>:</h4>
<p>but it's possible that the <span class="user-mention" data-user-id="192685">@Vassil Peytchev</span> is right about this - the question is how extensive are the use cases for canonicalisation on the wire... and they're small, I think</p>



<a name="176127521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176127521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176127521">(Sep 19 2019 at 18:23)</a>:</h4>
<p>he is right about this. This is mentioned pretty clearly in the xmldsig-core1 spec page.</p>



<a name="176127687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176127687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176127687">(Sep 19 2019 at 18:25)</a>:</h4>
<p>This is not even about canonicalisation on the wire - Lloyd is sitting next to us and is afraid that you can subtly change the meaning of a document by adding or removing spaces and tabs in markdown, and having no way for the receiver and sender to guarantee that this is caught.</p>



<a name="176128269"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176128269" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176128269">(Sep 19 2019 at 18:31)</a>:</h4>
<p>well, that'ss both true and <a href="http://false.in" target="_blank" title="http://false.in">false.in</a> both ways</p>



<a name="176128283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176128283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176128283">(Sep 19 2019 at 18:31)</a>:</h4>
<p>xml canonicalization might normalise attributes, but we don't have to.</p>



<a name="176128324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176128324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176128324">(Sep 19 2019 at 18:32)</a>:</h4>
<p>on other hand, exchange is a worry we don't need to make supreme.</p>



<a name="176128362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176128362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176128362">(Sep 19 2019 at 18:32)</a>:</h4>
<p>and the fact that different markdowns collapse to the same signature text doesn't scare me very much</p>



<a name="176145687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176145687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176145687">(Sep 19 2019 at 21:51)</a>:</h4>
<p>Consider this:</p>
<ul>
<li>
<p>Applications SHALL support the following:<br>
     * US Core profiles a, b an c<br>
     * Clinical genomics profiles<br>
     * All profiles define in this IG</p>
</li>
<li>
<p>Ensure you read usage the notes</p>
</li>
</ul>
<p>vs. this:</p>
<ul>
<li>
<p>Applications SHALL support the following:<br>
     * US Core profiles a, b an c<br>
     * Clinical genomics profiles</p>
</li>
<li>
<p>All profiles define in this IG<br>
     * Ensure you read usage notes</p>
</li>
</ul>



<a name="176145776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176145776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176145776">(Sep 19 2019 at 21:53)</a>:</h4>
<p>This is less likely to be a problem where the original author wasn't crafting content to allow manipulation.  But it'd be pretty easy for someone to craft content that <em>was</em> intended to allow manipulation</p>



<a name="176145777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176145777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176145777">(Sep 19 2019 at 21:53)</a>:</h4>
<p>The question was not, can canonicalization change the markdown. The question was, is the fact that it does a problem?</p>



<a name="176145787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176145787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176145787">(Sep 19 2019 at 21:53)</a>:</h4>
<p>The above change could have legal implications</p>



<a name="176145803"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176145803" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176145803">(Sep 19 2019 at 21:53)</a>:</h4>
<p>well, then, you should use json not xml. because you can't otherwise resolve that</p>



<a name="176145882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176145882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176145882">(Sep 19 2019 at 21:54)</a>:</h4>
<p>XML retains space in attributes.  It's the digital signature canonicalization that's the problem</p>



<a name="176145908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176145908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176145908">(Sep 19 2019 at 21:55)</a>:</h4>
<p>if you want to sign and be sure about markdown, use json not xml</p>



<a name="176149166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176149166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176149166">(Sep 19 2019 at 22:47)</a>:</h4>
<p>That could be part of the guidance we provide</p>



<a name="176149771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicalization/near/176149771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicalization.html#176149771">(Sep 19 2019 at 22:58)</a>:</h4>
<p>sure it should be</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
