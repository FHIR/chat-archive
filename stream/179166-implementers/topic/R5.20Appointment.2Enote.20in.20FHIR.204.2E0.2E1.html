---
layout: page
title: "FHIR Chat  · R5 Appointment.note in FHIR 4.0.1 · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R5.20Appointment.2Enote.20in.20FHIR.204.2E0.2E1.html">R5 Appointment.note in FHIR 4.0.1</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="273069109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R5%20Appointment.note%20in%20FHIR%204.0.1/near/273069109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Brendler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R5.20Appointment.2Enote.20in.20FHIR.204.2E0.2E1.html#273069109">(Feb 24 2022 at 10:07)</a>:</h4>
<p>Hello everyone,</p>
<p>I am looking for a way to implement comments for Appointments in FHIR 4.0.1.with a <code>0..*</code> relationship instead of <code>0..1</code> and also need additional data about each comment's author and a timestamp. <br>
I discovered that R5 already is supposed to provide exactly what I want with the <code>Appointment.note 0..* Annotation</code> <br>
(see <a href="https://hl7.org/fhir/5.0.0-snapshot1/appointment.html">https://hl7.org/fhir/5.0.0-snapshot1/appointment.html</a>, <a href="https://jira.hl7.org/browse/FHIR-19521">https://jira.hl7.org/browse/FHIR-19521</a>).</p>
<p>Are there any best practices doing this in FHIR 4.0.1 or even an existing extension?<br>
Any hints on how to implement this correctly with fsh are much appreciated!</p>
<p>Best regards</p>



<a name="273148149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R5%20Appointment.note%20in%20FHIR%204.0.1/near/273148149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R5.20Appointment.2Enote.20in.20FHIR.204.2E0.2E1.html#273148149">(Feb 24 2022 at 20:52)</a>:</h4>
<p>There are guidelines for using a 'standard' extension URL to adopt data elements defined in a different version of FHIR - see <a href="http://build.fhir.org/versions.html#extensions">http://build.fhir.org/versions.html#extensions</a></p>



<a name="273216807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R5%20Appointment.note%20in%20FHIR%204.0.1/near/273216807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Brendler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R5.20Appointment.2Enote.20in.20FHIR.204.2E0.2E1.html#273216807">(Feb 25 2022 at 11:24)</a>:</h4>
<p>Thanks a lot for the response!</p>
<p>I added the following to my sushi-config.yaml </p>
<div class="codehilite"><pre><span></span><code>dependencies:
  hl7.fhir.extensions.r5: 4.0.1
</code></pre></div>
<p>and changed MyCustomAppointment:</p>
<div class="codehilite"><pre><span></span><code>Profile:        MyCustomAppointment
Parent:         Appointment
Id:             my-custom-appointment
Title:          &quot;My Custom Appointment Profile&quot;
Description:    &quot;My Custom Profile for appointment data.&quot;

* extension contains http://hl7.org/fhir/5.0/StructureDefinition/extension-Appointment.note named note 0..1
</code></pre></div>
<p>Running <code>sushi .</code> reports no errors or warnings, but when I try to generate the IG with <code>./_genonce.sh</code> I receive the following error:</p>
<div class="codehilite"><pre><span></span><code>Publishing Content Failed: Error generating snapshot for My Custom Appointment Profile(my-custom-appointment): Unable to generate snapshot for http://example.com/fhir/CustomProfiles/4.0.1/StructureDefinition/my-custom-appointment in /home/myuser/APIs/fhir-api/fsh-generated/resources/StructureDefinition-my-custom-appointment (00:23.0596)
                                                                                 (00:23.0597)
Use -? to get command line help                                                  (00:23.0597)
                                                                                 (00:23.0597)
Stack Dump (for debugging):                                                      (00:23.0597)
java.lang.Exception: Error generating snapshot for My Custom Appointment Profile(my-custom-appointment): Unable to generate snapshot for http://example.com/fhir/CustomProfiles/4.0.1/StructureDefinition/my-custom-appointment in /home/myuser/APIs/fhir-api/fsh-generated/resources/StructureDefinition-my-custom-appointment
        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshots(Publisher.java:5403)
        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:4665)
        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:1005)
        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:856)
        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:10005)
Caused by: org.hl7.fhir.exceptions.FHIRException: Unable to generate snapshot for http://example.com/fhir/CustomProfiles/4.0.1/StructureDefinition/my-custom-appointment in /home/myuser/APIs/fhir-api/fsh-generated/resources/StructureDefinition-my-custom-appointment
        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:5456)
        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshots(Publisher.java:5401)
        ... 4 more
Caused by: org.hl7.fhir.exceptions.FHIRException: Reference to unknown extension http://hl7.org/fhir/5.0/StructureDefinition/extension-Appointment.note
        at org.hl7.fhir.r5.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:1167)
        at org.hl7.fhir.r5.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:1533)
        at org.hl7.fhir.r5.conformance.ProfileUtilities.generateSnapshot(ProfileUtilities.java:658)
        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:5451)
        ... 5 more
</code></pre></div>
<p>Is this due to R5 not yet being released?</p>
<p>I also tried with a snapshot URL but sushi didn't like that:<br>
<code>* extension contains http://hl7.org/fhir/5.0.0-snapshot1/StructureDefinition/extension-Appointment.note named note 0..1</code></p>



<a name="273522667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R5%20Appointment.note%20in%20FHIR%204.0.1/near/273522667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Brendler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R5.20Appointment.2Enote.20in.20FHIR.204.2E0.2E1.html#273522667">(Feb 28 2022 at 17:14)</a>:</h4>
<p>Any input would be much appreciated</p>



<a name="273528290"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R5%20Appointment.note%20in%20FHIR%204.0.1/near/273528290" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R5.20Appointment.2Enote.20in.20FHIR.204.2E0.2E1.html#273528290">(Feb 28 2022 at 17:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="273539651"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R5%20Appointment.note%20in%20FHIR%204.0.1/near/273539651" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R5.20Appointment.2Enote.20in.20FHIR.204.2E0.2E1.html#273539651">(Feb 28 2022 at 19:18)</a>:</h4>
<p>no that should work - how can I reproduce?</p>



<a name="273621525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R5%20Appointment.note%20in%20FHIR%204.0.1/near/273621525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Brendler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R5.20Appointment.2Enote.20in.20FHIR.204.2E0.2E1.html#273621525">(Mar 01 2022 at 10:51)</a>:</h4>
<p>Thanks for the responses <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> </p>
<p>I created a simple example based on a vanilla sushi project on github where you can try it yourself.</p>
<p>Steps to reproduce (on Linux):</p>
<div class="codehilite"><pre><span></span><code>git clone https://github.com/iroCheese/demo-fhir-appointment-profile.git
cd demo-fhir-appointment-profile
./_updatePublisher.sh
./_genonce.sh
</code></pre></div>
<p>The relevant changes are in <a href="https://github.com/iroCheese/demo-fhir-appointment-profile/commit/997550f69e51aefc56125590f8fb85fb974cc6f3">this commit</a>.</p>



<a name="274373446"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R5%20Appointment.note%20in%20FHIR%204.0.1/near/274373446" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Samuel Brendler <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R5.20Appointment.2Enote.20in.20FHIR.204.2E0.2E1.html#274373446">(Mar 07 2022 at 10:35)</a>:</h4>
<p>Can anyone reproduce this?</p>



<a name="274407536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R5%20Appointment.note%20in%20FHIR%204.0.1/near/274407536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jay B <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R5.20Appointment.2Enote.20in.20FHIR.204.2E0.2E1.html#274407536">(Mar 07 2022 at 15:30)</a>:</h4>
<p>Hey Hi</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
