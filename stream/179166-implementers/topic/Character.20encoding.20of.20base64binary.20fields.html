---
layout: page
title: "FHIR Chat  · Character encoding of base64binary fields · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Character.20encoding.20of.20base64binary.20fields.html">Character encoding of base64binary fields</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153902783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Character%20encoding%20of%20base64binary%20fields/near/153902783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge de la Garza <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Character.20encoding.20of.20base64binary.20fields.html#153902783">(Aug 18 2017 at 17:22)</a>:</h4>
<p>Suppose my programming platform represents non-ASCII characters internally with their Unicode values, for example:<br>
    "た" (HIRAGANA LETTER TA) = 0x305F<br>
So to put this in a field of type base64binary, I first have to base64-encode it, but before I can do that, I have to convert it somehow from a double-wide byte to a series of single-width bytes.  UTF-8 encoding comes to mind, in which case the value becomes:<br>
    0xE3 0x81 0x9F<br>
This base64-encodes to:<br>
    44Gf<br>
So that is what would go in the field value.  So my question this, if I then send this resource to another system, how is that system supposed to "know" that once the value is base-64 decoded, that it is still UTF-8 encoded?  Should UTF-8 encoding of the decoded value always be assumed?</p>



<a name="153902785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Character%20encoding%20of%20base64binary%20fields/near/153902785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Character.20encoding.20of.20base64binary.20fields.html#153902785">(Aug 18 2017 at 17:38)</a>:</h4>
<p>First, you'd look the mime type to figure out what kind of file you're dealing with.  If the content is a text file, you can use a BOM to indicate to the text processor that it's dealing with UTF.  If your content is in some other encoding, you'd have to use whatever conventions (if any) are in place for that type of character encoding.  And of course, if someone sends you UTF without a BOM, you have all the same fun that exists today when someone sends an email attachment with text that's in an unexpected encoding.  FHIR doesn't fix that problem.  (Which is why PDF or other syntaxes that don't have the encoding issue will often be easier to use.)</p>



<a name="153902786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Character%20encoding%20of%20base64binary%20fields/near/153902786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge de la Garza <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Character.20encoding.20of.20base64binary.20fields.html#153902786">(Aug 18 2017 at 17:46)</a>:</h4>
<blockquote>
<p>First, you'd look at the mime type</p>
</blockquote>
<p>The mime type of what?  This is in the context of a resource, for example, AuditEvent.entity.query.</p>



<a name="153902788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Character%20encoding%20of%20base64binary%20fields/near/153902788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Character.20encoding.20of.20base64binary.20fields.html#153902788">(Aug 18 2017 at 18:10)</a>:</h4>
<p>I was assuming you were referring to Binary or the Attachment data type.  I agree that AuditEvent.event.query seems under-specified.  It's not clear how this content should be parsed when un-encoded.  Can you submit a change request for that to be clarified?  (Or alternatively to change the data type to Attachment which would allow conveying the mime type.</p>



<a name="153903014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Character%20encoding%20of%20base64binary%20fields/near/153903014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge de la Garza <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Character.20encoding.20of.20base64binary.20fields.html#153903014">(Aug 21 2017 at 16:36)</a>:</h4>
<p>Submitted: <a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13759&amp;start=0" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13759&amp;start=0">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13759&amp;start=0</a><br>
Thanks Lloyd.</p>



<a name="153903390"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Character%20encoding%20of%20base64binary%20fields/near/153903390" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Character.20encoding.20of.20base64binary.20fields.html#153903390">(Aug 23 2017 at 13:03)</a>:</h4>
<p><span class="user-mention" data-user-id="192535">@Jorge de la Garza</span> The meaning of the AuditEvent.entity.query and AuditEvent.entity.detail encoding is specific to the AuditEvent.type,  AuditEvent.subtype,  AuditEvent.entity.type, and AuditEvent.entity.role.   This is just like in DICOM. We will improve the element definitions using your <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13759" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13759">GF#13759</a>. The base64 is intended only to be a general-use and safe container for event specific data blobs.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
