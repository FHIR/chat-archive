---
layout: page
title: "FHIR Chat  · Implementation Guides in Google FHIR · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20Guides.20in.20Google.20FHIR.html">Implementation Guides in Google FHIR</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="244315689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20Guides%20in%20Google%20FHIR/near/244315689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Merlyn Albery-Speyer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20Guides.20in.20Google.20FHIR.html#244315689">(Jun 29 2021 at 17:16)</a>:</h4>
<p>Hey folks,</p>
<p>I'm using Google FHIR and following these two sources of information to go about uploading implementation guides in order to enable validation on creation of FHIR resources:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=Q7WcYSyZ77o">Overview video</a><div class="youtube-video message_inline_image"><a data-id="Q7WcYSyZ77o" href="https://www.youtube.com/watch?v=Q7WcYSyZ77o"><img src="https://uploads.zulipusercontent.net/b70e7bd7f12ee14ccf1fe518a46ed40e856dec6c/68747470733a2f2f692e7974696d672e636f6d2f76692f513757635953795a37376f2f64656661756c742e6a7067"></a></div></li>
<li><a href="https://kellrott.medium.com/using-google-fhir-to-support-research-8f726834d77">Practical guide</a></li>
<li><a href="https://cloud.google.com/healthcare/docs/how-tos/fhir-profiles#configure_your_implementation_guide">Official documentation</a></li>
</ul>
<p>My question is: does anyone have examples as to what to add in the "global" field? E.g. which resources are listed for us-core for example.</p>
<p>Thanks!</p>



<a name="244316274"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20Guides%20in%20Google%20FHIR/near/244316274" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20Guides.20in.20Google.20FHIR.html#244316274">(Jun 29 2021 at 17:20)</a>:</h4>
<p>Global says "if you see a reference to this resource or data type with no declared profile, then behave as though the reference specified this global profile".</p>



<a name="244316297"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20Guides%20in%20Google%20FHIR/near/244316297" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20Guides.20in.20Google.20FHIR.html#244316297">(Jun 29 2021 at 17:20)</a>:</h4>
<p>It's not something that's widely used.</p>



<a name="244319193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20Guides%20in%20Google%20FHIR/near/244319193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20Guides.20in.20Google.20FHIR.html#244319193">(Jun 29 2021 at 17:41)</a>:</h4>
<p>We use global because the store configuration defines a set of profiles such that no resource of the specified types will be accepted unless it conforms to at least one of them.</p>
<p>Generally you would look at the profiles in the IG and list the resource types that they depend on (StructureDefinition.type). For US Core there are quite a few.</p>



<a name="244324076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20Guides%20in%20Google%20FHIR/near/244324076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Merlyn Albery-Speyer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20Guides.20in.20Google.20FHIR.html#244324076">(Jun 29 2021 at 18:14)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="197072">@Paul Church</span> ,</p>
<p>That matches my assumptions. For the us drug formulary IG, I added these lines:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;resourceType&quot;: &quot;ImplementationGuide&quot;,
  &quot;id&quot;: &quot;hl7.fhir.us.davinci-drug-formulary&quot;,

  &quot;global&quot;: [
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugAlternatives-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierDefinition-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-DrugTierID-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-EmailPlanContact-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-FormularyURL-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-MarketingURL-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-Network-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-PlanID-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-PlanIDType-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-PriorAuthorization-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-QuantityLimit-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-StepTherapyLimit-extension&quot; },
    { &quot;type&quot;: &quot;Extension&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-SummaryURL-extension&quot; },
    { &quot;type&quot;: &quot;List&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-CoveragePlan&quot; },
    { &quot;type&quot;: &quot;MedicationKnowledge&quot;, &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-FormularyDrug&quot; }
  ],
</code></pre></div>
<p>and I've enabled my FHIR store to use the IG successfully as far as I can tell:</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;name&quot;: &quot;projects/REDACTED/locations/REDACTED/datasets/REDACTED/fhirStores/REDACTED&quot;,
  &quot;enableUpdateCreate&quot;: true,
  &quot;version&quot;: &quot;R4&quot;,
  &quot;validationConfig&quot;: {
    &quot;enabledImplementationGuides&quot;: [
      &quot;http://hl7.org/fhir/us/davinci-drug-formulary/ImplementationGuide/hl7.fhir.us.davinci-drug-formulary&quot;
    ]
  }
}
</code></pre></div>
<p>however I can still successfully insert invalid data, e.g;</p>
<div class="codehilite"><pre><span></span><code>{
  &quot;code&quot;: {
    &quot;coding&quot;: [
      {
        &quot;code&quot;: &quot;1000091&quot;,
        &quot;display&quot;: &quot;doxepin hydrochloride 5 % Topical Cream&quot;,
        &quot;system&quot;: &quot;http://www.nlm.nih.gov/research/umls/rxnorm&quot;
      }
    ]
  },
  &quot;id&quot;: &quot;28b95b55-b9c5-4b4d-9b98-a67f5b611902&quot;,
  &quot;meta&quot;: {
    &quot;lastUpdated&quot;: &quot;2021-06-29T18:13:03.294000+00:00&quot;,
    &quot;profile&quot;: [
      &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-FormularyDrug&quot;
    ],
    &quot;versionId&quot;: &quot;MTYyNDk5MDM4MzI5NDAwMDAwMA&quot;
  },
  &quot;resourceType&quot;: &quot;MedicationKnowledge&quot;
}
</code></pre></div>
<p>^^ note that the required drug tier or plan id extensions are absent.</p>
<p>Any suggestions for how to go about debugging this?</p>
<p>Thanks!</p>



<a name="244324217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20Guides%20in%20Google%20FHIR/near/244324217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20Guides.20in.20Google.20FHIR.html#244324217">(Jun 29 2021 at 18:15)</a>:</h4>
<p>I'll take a look - you shouldn't need to put the extensions in that list, only the two profiles for formulary.</p>



<a name="244324476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20Guides%20in%20Google%20FHIR/near/244324476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20Guides.20in.20Google.20FHIR.html#244324476">(Jun 29 2021 at 18:17)</a>:</h4>
<p>I have an example from one of our solutions people who set up the formulary IG, his IG looks like this:</p>
<div class="codehilite"><pre><span></span><code>    &quot;global&quot;: [
        {
            &quot;type&quot;: &quot;List&quot;,
            &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-CoveragePlan&quot;
        },
        {
            &quot;type&quot;: &quot;MedicationKnowledge&quot;,
            &quot;profile&quot;: &quot;http://hl7.org/fhir/us/davinci-drug-formulary/StructureDefinition/usdf-FormularyDrug&quot;
        }
    ],
</code></pre></div>



<a name="244324589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20Guides%20in%20Google%20FHIR/near/244324589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20Guides.20in.20Google.20FHIR.html#244324589">(Jun 29 2021 at 18:18)</a>:</h4>
<p>Check the Cloud Logging for your project, if there were configuration errors that got in the way of validation they may show up there.</p>



<a name="244325530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20Guides%20in%20Google%20FHIR/near/244325530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20Guides.20in.20Google.20FHIR.html#244325530">(Jun 29 2021 at 18:24)</a>:</h4>
<p>Feel free to PM me to debug in more detail.</p>



<a name="244348637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Implementation%20Guides%20in%20Google%20FHIR/near/244348637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Merlyn Albery-Speyer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Implementation.20Guides.20in.20Google.20FHIR.html#244348637">(Jun 29 2021 at 21:13)</a>:</h4>
<p>Thanks to <span class="user-mention" data-user-id="197072">@Paul Church</span>, it looks like my mistake was not using the "v1beta1" API endpoints when updating the FHIR resources. (the "v1" endpoints do not perform profile validation)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
