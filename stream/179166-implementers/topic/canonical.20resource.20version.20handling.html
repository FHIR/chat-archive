---
layout: page
title: "FHIR Chat  · canonical resource version handling · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20resource.20version.20handling.html">canonical resource version handling</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="203959109"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20resource%20version%20handling/near/203959109" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shankar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20resource.20version.20handling.html#203959109">(Jul 15 2020 at 14:03)</a>:</h4>
<p>Hi, we have a requirement to support terminology catalogs (German EBM Catalogs) in our solution. Each  catalog can have multiple business versions to be supported at the same time. How can we achieve this behavior catalogs being canonical terminology resources? I found the following example in Fhir Site.</p>
<p>A value set is posted to a server (POST [base]/ValueSet) with ValueSet.url = "<a href="http://acme.com/valuesets/example">http://acme.com/valuesets/example</a>". This is identified as the 1st version of the value set (ValueSet.version = 1). When the server gets it, it assigns an identity e.g. <a href="http://ValueSet.id">ValueSet.id</a> = x1, and ValueSet.meta.versionId = 1. Later, another user creates a revised version of the value set, and this is called version 2. This time, as well as supporting this new version 2, there are production systems still using version 1, and both need to be valid on the value set server. So a new value set is created on the server (POST [base]/ValueSet) and is assigned the identiity 'x2'.</p>
<p>Now, there are two different value sets, both with URL "<a href="http://acme.com/valuesets/example">http://acme.com/valuesets/example</a>". One has <a href="http://ValueSet.id">ValueSet.id</a> = x1, ValueSet.version = 1 and ValueSet.meta.versionId = 1 and the other has <a href="http://ValueSet.id">ValueSet.id</a> = x2, ValueSet.version = 2 and ValueSet.meta.versionId = 1</p>
<p>In this example,  'example' resource has two business versions.  I am confused to understand this. Does it mean we shall always query/read always using 'id' (GET [base]/ValueSet/x1) ? Why this pattern is not strictly followed for conformance resources in the fhir specification? </p>
<p>Is it a valid request (GET [base]/ValueSet/example)? If yes, which business version shall be obtained in the above example?</p>
<p>Thanks in advance<br>
Shankar</p>



<a name="203984570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20resource%20version%20handling/near/203984570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20resource.20version.20handling.html#203984570">(Jul 15 2020 at 17:15)</a>:</h4>
<p>If you do a straight read, it'll be driven by the 'id', not the canonical URL.  If you do a search filtering by canonical URL, you'll get both.  If you have a canonical reference and want to know how the system will resolve between the two, it'll look at the .version element and if it can figure out a precedence between the two, it'll give the most recent.  If it can't, behavior is undefined.</p>



<a name="204045152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20resource%20version%20handling/near/204045152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shankar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20resource.20version.20handling.html#204045152">(Jul 16 2020 at 04:59)</a>:</h4>
<p>is it a good idea in that case to mandate the "id" field for canonical resources?</p>



<a name="204045602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20resource%20version%20handling/near/204045602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20resource.20version.20handling.html#204045602">(Jul 16 2020 at 05:08)</a>:</h4>
<p>You can't - because different servers use different styles of ids - and also because there are legitimate reasons to have multiple instances with the same canonical URL on the same server (i.e. different versions).</p>



<a name="204069772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20resource%20version%20handling/near/204069772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Signe Hejgaard Kristoffersen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20resource.20version.20handling.html#204069772">(Jul 16 2020 at 11:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> when you say different versions, do you mean record version or business version?</p>



<a name="204081766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20resource%20version%20handling/near/204081766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20resource.20version.20handling.html#204081766">(Jul 16 2020 at 13:19)</a>:</h4>
<p>Business version</p>



<a name="204082653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20resource%20version%20handling/near/204082653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Signe Hejgaard Kristoffersen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20resource.20version.20handling.html#204082653">(Jul 16 2020 at 13:26)</a>:</h4>
<p>Okay. Just tried creating two CodeSystems with the same url but different versions at <a href="http://hapi.fhir.org">hapi.fhir.org</a>, butI got the error: "Can not create multiple CodeSystem resources with CodeSystem.url \"http://provdennetest.dk\", already have one with resource ID: CodeSystem/xxx" for the second instance. But this should work then?</p>



<a name="204083788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/canonical%20resource%20version%20handling/near/204083788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/canonical.20resource.20version.20handling.html#204083788">(Jul 16 2020 at 13:34)</a>:</h4>
<p>Servers are always allowed to enforce their own business rules, but yes, a server that supported multiple instances with the same canonical URL but different 'version' elements would be fully conformant.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
