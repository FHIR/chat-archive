---
layout: page
title: "FHIR Chat  · Resources and Documents (SQL and NoSQL?) · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html">Resources and Documents (SQL and NoSQL?)</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153915185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915185">(Oct 22 2017 at 09:34)</a>:</h4>
<p>We're working on an reference implementation that mimicks PAS and EPR implementations. It's  based on implementations from the mid 90's to now, so we've naturally gone down the RDBMS SQL route. As expected, mapping FHIR resources to SQL tables has not proved to be an issue - so Patient resource is Patient table, Observation is Observation, etc.<br>
 However in a few cases where the FHIR resource/SQL table approach isn't appropiate and doesn't  sit fully within the EPR/PAS model. For example Composition, the resources it holsd can be stored in a EPR/PAS model but the Composition itself should also be stored intact as a possibly in a document/NoSQL database as it also records a point in time.</p>



<a name="153915186"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915186" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915186">(Oct 22 2017 at 09:40)</a>:</h4>
<p>The model appears to be a correct representation of how these are currently handled (loosely - as Composition may be in different alternative forms such as PDF, image, Hl7v3/CDA). DiagnosticReport could be handled similarly with Observations entered into the EPR/PAS but is also stored in it's entirety.</p>



<a name="153915187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915187">(Oct 22 2017 at 09:48)</a>:</h4>
<p>So if this representation is correct, I would use the EPR/PAS (SQL) to search for Observations, the Document store (NoSQL) to search for Compositions and DiagnosticReports. I wouldn't search the Document store for Observations - that could be done but is a more modern way of working.</p>



<a name="153915188"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915188" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915188">(Oct 22 2017 at 09:49)</a>:</h4>
<p>So if my model is correct, how do I go from the Observation to the Composition or DiagnosticReport?</p>



<a name="153915189"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915189" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915189">(Oct 22 2017 at 09:56)</a>:</h4>
<p>I could use an extension but I was expecting a Reference in Observation to Composition or DiagnosticReport as you would have with the more PAS/EPR focused resources.</p>



<a name="153915190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915190">(Oct 22 2017 at 10:20)</a>:</h4>
<p>On a similar note: most PAS/EPR's have the idea of Concept, CodeSystems and ValueSets which is seen in the FHIR (the logical model fits well). Most of EPR/PAS's I worked with have the basics of a resource API on Concept but FHIR has an operations/RPC interface on CodeSystem and no seperate Concept resource. I think I'm seeing three seperate API styles within and some points when the resource I’m working with belongs to a different style  - styles being RPC (terminology), Message API (document) and Resource API as defined here <a href="http://www.servicedesignpatterns.com/WebServiceAPIStyles" target="_blank" title="http://www.servicedesignpatterns.com/WebServiceAPIStyles">http://www.servicedesignpatterns.com/WebServiceAPIStyles</a></p>



<a name="153915193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915193">(Oct 22 2017 at 11:48)</a>:</h4>
<p>Why would you need to go from the Observation to the Composition? Composition contains a reference to the Observation it contains. If you're talking about "This Observation was taken from (shredded) from FHIR document X",  then in FHIR that would be Provenance. I would hardly expect a legacy system to have a notion about Provenance. But I guess the latter is not your reason for whishing to go from Observation to Composition. Could you elaborate on the reason?</p>



<a name="153915318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915318">(Oct 23 2017 at 07:44)</a>:</h4>
<p>Yes it is provenance/audit, it is tracing where an obvservation came from. DiagnosticReport is a better example, on the EPR's I worked with in the 90's the would have link to the report that delivered the Observation. That was represented in the UI, a user had the option of viewing the original report (from Observations). I'd be tempted to code Composition similarly, have a link from Observation's to Document (Composition, DocumentReference, etc).</p>



<a name="153915319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915319">(Oct 23 2017 at 07:46)</a>:</h4>
<p>On DB level it's a bit more clearer. After I've normalised the table I would create a link from Observation's to DiagnosticReport table, I would not have a DiagnosticReportObservations link table as per the FHIR Model.</p>



<a name="153915320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915320">(Oct 23 2017 at 07:59)</a>:</h4>
<p>p.s. I'm actually looking at what database model to use for resources.</p>



<a name="153915321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915321">(Oct 23 2017 at 08:01)</a>:</h4>
<p>and the answer I've got at present would be resources (SQL) and documents (NoSQL) with a few grey areas.</p>



<a name="153915334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915334">(Oct 23 2017 at 10:22)</a>:</h4>
<p>so we always anticipate that something is able to follow the indexes in reverse; if you build a database where the resources are your master form, then you <em>must</em> also have an index so that you can follow all the links in the reverse direction (from target to source)</p>



<a name="153915336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915336">(Oct 23 2017 at 10:23)</a>:</h4>
<p>if, in your persistence model, you chose to reverse some or all links... that's your choice. There's engineering optimization issues, and we don't design for them, since we are describing an interface</p>



<a name="153915343"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Resources%20and%20Documents%20%28SQL%20and%20NoSQL%3F%29/near/153915343" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Mayfield <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Resources.20and.20Documents.20(SQL.20and.20NoSQL.3F).html#153915343">(Oct 23 2017 at 10:49)</a>:</h4>
<p>and we can get to the reports via ProcedureRequest (which fits with the model I'm using for an EPR)</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
