---
layout: page
title: "FHIR Chat  · FHIRpath Tester · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html">FHIRpath Tester</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153922908"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153922908" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153922908">(Dec 05 2017 at 07:24)</a>:</h4>
<p>I'm testing my FHIRpath with FHIRpath Tester on the resource below. How can I test for values of profile? <br>
<code>meta.where(profile='a')</code> does not work where there is more than one profile element.<br>
Is there a problem with my FHIRpath? Is there a problem with FHIRpath Tester?</p>
<p><code>&lt;Patient xmlns="http://hl7.org/fhir"&gt;
  &lt;meta&gt;
    &lt;profile value="a"/&gt;
    &lt;profile value="b"/&gt;
    &lt;profile value="c"/&gt;
  &lt;/meta&gt;
&lt;/Patient&gt;</code></p>



<a name="153923032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923032">(Dec 05 2017 at 18:58)</a>:</h4>
<p>what are you trying to do?</p>



<a name="153923081"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923081" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923081">(Dec 05 2017 at 23:37)</a>:</h4>
<p>I'm trying to create an invariant to say that instances of Patient must have profile='a', and are allowed to have other profiles.</p>



<a name="153923107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923107">(Dec 06 2017 at 08:49)</a>:</h4>
<p>You need the invariant to return true, so if you need at least one of the profiles to be 'a', you could say:   <code>meta.any(profile = 'a')</code>.  Note that this allows for multiple profiles='a'.</p>
<p>That's the technical answer......Grahame's question remains: what are you trying to achieve?</p>



<a name="153923527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923527">(Dec 08 2017 at 01:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <br>
I am creating a profile of Patient and I want all instances of it to say in meta.profile that they are instances of it.<br>
I am trying to use an invariant for this.<br>
If the profile has URI "a", I want<br>
<code>&lt;Patient xmlns="http://hl7.org/fhir"&gt;
  &lt;meta&gt;
    &lt;profile value="a"/&gt;
    &lt;profile value="b"/&gt;
  &lt;/meta&gt;
&lt;/Patient&gt;</code> <br>
to pass validation and <br>
<code>&lt;Patient xmlns="http://hl7.org/fhir"&gt;
  &lt;meta&gt;
    &lt;profile value="b"/&gt;
  &lt;/meta&gt;
&lt;/Patient&gt;</code><br>
to fail validation</p>



<a name="153923528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923528">(Dec 08 2017 at 01:33)</a>:</h4>
<p>By the way, using the FHIRpath Tester, your suggestion returns true when there is only one profile, and false when there is more than one.</p>



<a name="153923529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923529">(Dec 08 2017 at 01:33)</a>:</h4>
<p>I'm not sure you've thought this through. why do you want to do this? It really sounds like a bad idea to me.</p>



<a name="153923530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923530">(Dec 08 2017 at 01:35)</a>:</h4>
<p>What are some of the problems?</p>



<a name="153923531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923531">(Dec 08 2017 at 01:36)</a>:</h4>
<p>well, a profile tag is a claim that a resource conforms to some profile. So an application can scan resources and identify ones that meet a particular profile, and mark them accordingly.</p>



<a name="153923532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923532">(Dec 08 2017 at 01:36)</a>:</h4>
<p>the claim may not be true. Or it may be missing.</p>



<a name="153923533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923533">(Dec 08 2017 at 01:37)</a>:</h4>
<p>by making a rule that the profile can only be valid if it states the profile, you are making it so that resources can never be identified to meet the rules unless they make that explicit claim</p>



<a name="153923534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923534">(Dec 08 2017 at 01:38)</a>:</h4>
<p>in particular, there's a rule about profiles: removing the profile from a resource must not change the meaning of the resource. It sounds to me like you're trying to make some hidden rule that's associated with the profile</p>



<a name="153923535"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923535" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923535">(Dec 08 2017 at 01:39)</a>:</h4>
<p>Ah!<br>
So on my design, conformance can never be discovered after the record is created.</p>



<a name="153923536"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923536" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923536">(Dec 08 2017 at 01:39)</a>:</h4>
<p>yes</p>



<a name="153923537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923537">(Dec 08 2017 at 01:40)</a>:</h4>
<p>they key is that asserting a profile claim is a denormalization for performance reasons, not a statement of meaning</p>



<a name="153923538"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923538" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923538">(Dec 08 2017 at 01:40)</a>:</h4>
<p>And my design would break the "profile assertions can be removed" principle.</p>



<a name="153923539"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923539" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923539">(Dec 08 2017 at 01:41)</a>:</h4>
<p>well, yes, indirectly</p>



<a name="153923540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIRpath%20Tester/near/153923540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Townley-O&#x27;Neill <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIRpath.20Tester.html#153923540">(Dec 08 2017 at 01:43)</a>:</h4>
<p>That explains why I have not seen a way to do this. I was puzzled at this being so hard to make work.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
