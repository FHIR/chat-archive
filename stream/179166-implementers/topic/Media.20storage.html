---
layout: page
title: "FHIR Chat  · Media storage · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Media.20storage.html">Media storage</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="256366603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Media%20storage/near/256366603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ephraim Kigamba <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Media.20storage.html#256366603">(Oct 06 2021 at 07:02)</a>:</h4>
<p>Hi<br>
I just started using media and noticed that most of it is saved inline as base64 encoded string even when saved as a Binary resource. I believe we would want to avoid saving big binaries in the database. This applies for both server and client when downloading and uploading. Is there an alternative?</p>



<a name="256399479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Media%20storage/near/256399479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Media.20storage.html#256399479">(Oct 06 2021 at 12:07)</a>:</h4>
<p>If you are in charge of the database, then you don't have to store the assets into the database. You can write middleware that pulls apart the media resource into database components and file components on ingestion and recomposes them on outgoing. FHIR doesn't dictate how you store information, it dictates how you <strong>exchange</strong> information.</p>



<a name="256402585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Media%20storage/near/256402585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Media.20storage.html#256402585">(Oct 06 2021 at 12:32)</a>:</h4>
<p>A related question to ask: "Who has custody of the media/documents that are being sent to your FHIR server?"   For example, are these radiology reports whose "authoritative content" is stored in a PACs system or DMS (Document Management System) do you want to maintain a 'shadow copy" of them or not?   If so, then maybe you might choose to store a reference to them in FHIR and let the external system manage the custody and life-cycle of them.</p>



<a name="256414312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Media%20storage/near/256414312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Venton <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Media.20storage.html#256414312">(Oct 06 2021 at 13:50)</a>:</h4>
<p>If I understand correctly: A user PUTs a media resource onto your FHIR server. That media resource contains a URL to a DMS. </p>
<ol>
<li>
<p>Do you (the server) have credentials to access the file? <br>
If No, the only choice you have is to maintain the url (see 2). If yes, do you "inline" the remote file in order to satisfy 2.</p>
</li>
<li>
<p>Does another user of your system have permission to GET the media resource ALSO have access to retrieve the document from the DMS? Do they have to? <br>
If you can't expect the user to have access to the DMS, does the server fetch the file JIT to inline it in the media resource or pass the URL and let the user deal with access to DMS?</p>
</li>
<li>
<p>If the DMS decides to life-cycle them out (obsolete them) what happens to your media resource?</p>
</li>
</ol>
<p>I can't answer these questions for you, you have to look at your solution and decide how you are going to handle each scenario. My suggestion is to make a shadow copy, that way you aren't reliant on another system to maintain the document on your schedule or your changing permissions, or your users access to DMS. If the DMS is the system is the one that PUT the resource onto you originally, perhaps the DMS should PATCH or DELETE your system as appropriate (if you so allow).</p>



<a name="256565408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Media%20storage/near/256565408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ephraim Kigamba <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Media.20storage.html#256565408">(Oct 07 2021 at 12:02)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="335936">@Daniel Venton</span></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
