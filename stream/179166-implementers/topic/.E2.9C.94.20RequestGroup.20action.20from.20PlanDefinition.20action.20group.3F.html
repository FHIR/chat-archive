---
layout: page
title: "FHIR Chat  · ✔ RequestGroup action from PlanDefinition action group? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20RequestGroup.20action.20from.20PlanDefinition.20action.20group.3F.html">✔ RequestGroup action from PlanDefinition action group?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="261644271"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20RequestGroup%20action%20from%20PlanDefinition%20action%20group%3F/near/261644271" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kyle Thompson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20RequestGroup.20action.20from.20PlanDefinition.20action.20group.3F.html#261644271">(Nov 16 2021 at 14:00)</a>:</h4>
<p>Consider a PlanDefinition with an action of the form: {"selectionBehavior": "exactly-one", "action": [{"id": .., }, {"id", ..}, ..]}. I.e. the action is an action group and we need to pick one and only one sub-action when applying the PlanDefinition.</p>
<p>When creating the RequestGroup from the PlanDefinition, is it best practice to create an action in the RequestGroup for the action group and to nest the sub-action from the action group inside that action? Or is there no standard way of applying action groups and it's left to the implementers to decide?</p>



<a name="261647100"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20RequestGroup%20action%20from%20PlanDefinition%20action%20group%3F/near/261647100" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20RequestGroup.20action.20from.20PlanDefinition.20action.20group.3F.html#261647100">(Nov 16 2021 at 14:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>



<a name="261672979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20RequestGroup%20action%20from%20PlanDefinition%20action%20group%3F/near/261672979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20RequestGroup.20action.20from.20PlanDefinition.20action.20group.3F.html#261672979">(Nov 16 2021 at 17:04)</a>:</h4>
<p>I would expect the action structure to be preserved in the resulting RequestGroup, but the spec isn't abundantly clear on that point: <a href="https://hl7.org/fhir/plandefinition.html#12.18.3.3">https://hl7.org/fhir/plandefinition.html#12.18.3.3</a><br>
The behavior in the ruler will recurse and should preserve the structure (though it currently isn't handling all the possibilities of behaviors) <a href="https://github.com/DBCG/cqf-ruler/blob/master/r4/src/main/java/org/opencds/cqf/r4/providers/PlanDefinitionApplyProvider.java#L345">https://github.com/DBCG/cqf-ruler/blob/master/r4/src/main/java/org/opencds/cqf/r4/providers/PlanDefinitionApplyProvider.java#L345</a><br>
It looks like the encender implementation will actually collapse the processedActions into the root of the RequestGroup: <a href="https://github.com/ccsm-cds-tools/encender/blob/main/src/main.js#L138">https://github.com/ccsm-cds-tools/encender/blob/main/src/main.js#L138</a><br>
We've been having discussions about PlanDefinition $apply semantics and nailing those down more clearly on the CPG-on-FHIR subgroup calls, the next one is tomorrow at 4:00 ET: <a href="https://www.hl7.org/concalls/CallDetails.cfm?concall=57471">https://www.hl7.org/concalls/CallDetails.cfm?concall=57471</a>, I'll add this as a topic for discussion.</p>



<a name="261673075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20RequestGroup%20action%20from%20PlanDefinition%20action%20group%3F/near/261673075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20RequestGroup.20action.20from.20PlanDefinition.20action.20group.3F.html#261673075">(Nov 16 2021 at 17:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191782">@Brian Kaney</span> <span class="user-mention" data-user-id="195840">@David Winters</span> <span class="user-mention" data-user-id="192545">@Alex Goel</span></p>



<a name="261673947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20RequestGroup%20action%20from%20PlanDefinition%20action%20group%3F/near/261673947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Winters <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20RequestGroup.20action.20from.20PlanDefinition.20action.20group.3F.html#261673947">(Nov 16 2021 at 17:11)</a>:</h4>
<p>I <em>thought</em> encender would preserve the structure but can take a closer look and refresh my memory before the meeting tomorrow.  Should be a fun discussion!</p>



<a name="261677175"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20RequestGroup%20action%20from%20PlanDefinition%20action%20group%3F/near/261677175" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Goel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20RequestGroup.20action.20from.20PlanDefinition.20action.20group.3F.html#261677175">(Nov 16 2021 at 17:35)</a>:</h4>
<p>I've only tested Encender with 1 action per PlanDefinition in the $apply so I don't know either</p>



<a name="261771103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20RequestGroup%20action%20from%20PlanDefinition%20action%20group%3F/near/261771103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Winters <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20RequestGroup.20action.20from.20PlanDefinition.20action.20group.3F.html#261771103">(Nov 17 2021 at 11:20)</a>:</h4>
<p>I may be misinterpreting the question, but this test shows how groups of actions should be treated with encender: <a href="https://github.com/ccsm-cds-tools/encender/blob/main/test/main.test.js#L160">https://github.com/ccsm-cds-tools/encender/blob/main/test/main.test.js#L160</a></p>



<a name="261771261"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20RequestGroup%20action%20from%20PlanDefinition%20action%20group%3F/near/261771261" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Winters <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20RequestGroup.20action.20from.20PlanDefinition.20action.20group.3F.html#261771261">(Nov 17 2021 at 11:22)</a>:</h4>
<p>Note encender doesn't currently support the <a href="http://hl7.org/fhir/uv/cpg/OperationDefinition-cpg-careplan-apply.html">mergeNestedCarePlans</a> option.  It also does not yet support <code>selectionBehavior</code>.</p>



<a name="262344164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20RequestGroup%20action%20from%20PlanDefinition%20action%20group%3F/near/262344164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20RequestGroup.20action.20from.20PlanDefinition.20action.20group.3F.html#262344164">(Nov 22 2021 at 16:37)</a>:</h4>
<p>Continuing the discussion from the CPG-on-FHIR call last Wednesday: </p>
<p>Based on the results of the Doodle poll, we'll be holding an ad-hoc CPG-on-FHIR call to continue PlanDefinition $apply semantics discussion on Tuesday the 23rd at 11:00AM ET:</p>
<p>Join Zoom Meeting<br>
<a href="https://zoom.us/j/2097018272?pwd=WC9tVWY2NnRTSmVHN21ja3gxeERqZz09">https://zoom.us/j/2097018272?pwd=WC9tVWY2NnRTSmVHN21ja3gxeERqZz09</a></p>
<p>Meeting ID: 209 701 8272<br>
Password: 343027<br>
One tap mobile<br>
+16465588656,,2097018272# US (New York)</p>
<p>+16699009128,,2097018272# US (San Jose)</p>
<p><a href="https://www.hl7.org/concalls/CallDetails.cfm?concall=58751">https://www.hl7.org/concalls/CallDetails.cfm?concall=58751</a></p>



<a name="269299624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/%E2%9C%94%20RequestGroup%20action%20from%20PlanDefinition%20action%20group%3F/near/269299624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/.E2.9C.94.20RequestGroup.20action.20from.20PlanDefinition.20action.20group.3F.html#269299624">(Jan 25 2022 at 18:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="401577">Kyle Thompson</span> has marked this topic as resolved.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
