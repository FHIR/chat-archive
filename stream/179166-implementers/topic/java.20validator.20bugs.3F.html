---
layout: page
title: "FHIR Chat  · java validator bugs? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/java.20validator.20bugs.3F.html">java validator bugs?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="167945378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/java%20validator%20bugs%3F/near/167945378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/java.20validator.20bugs.3F.html#167945378">(Jun 12 2019 at 13:18)</a>:</h4>
<p>1. When validating a whole folder each file should be validated if it is a valid resource. I just tested it and had some tsv(csv) files in the folder and got:</p>
<div class="codehilite"><pre><span></span>[Fatal Error] :1:1: Content is not allowed in prolog.
     .. not a resource: ./12345_789_somatic_snv.tsv
Exception in thread &quot;main&quot; java.lang.Exception: Unable to find/resolve/read -ig ./12345_789_somatic_snv.tsv
        at org.hl7.fhir.r5.validation.ValidationEngine.loadIgSource(ValidationEngine.java:446)
        at org.hl7.fhir.r5.validation.ValidationEngine.loadContent(ValidationEngine.java:780)
        at org.hl7.fhir.r5.validation.ValidationEngine.validate(ValidationEngine.java:812)
        at org.hl7.fhir.r5.validation.Validator.main(Validator.java:436)
</pre></div>


<p>2. I also get a stack trace on syntax errors:</p>
<div class="codehilite"><pre><span></span>Exception in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: Unable to find type Count for element valueCount with path Observation.component.value[x]
        at org.hl7.fhir.r5.elementmodel.Property.getChildProperties(Property.java:309)
        at org.hl7.fhir.r5.elementmodel.XmlParser.parseChildren(XmlParser.java:241)
        at org.hl7.fhir.r5.elementmodel.XmlParser.parseChildren(XmlParser.java:317)
        at org.hl7.fhir.r5.elementmodel.XmlParser.parseChildren(XmlParser.java:317)
        at org.hl7.fhir.r5.elementmodel.XmlParser.parse(XmlParser.java:178)
        at org.hl7.fhir.r5.elementmodel.XmlParser.parse(XmlParser.java:162)
        at org.hl7.fhir.r5.elementmodel.XmlParser.parse(XmlParser.java:134)
        at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:586)
        at org.hl7.fhir.r5.validation.ValidationEngine.validate(ValidationEngine.java:902)
        at org.hl7.fhir.r5.validation.ValidationEngine.validate(ValidationEngine.java:816)
        at org.hl7.fhir.r5.validation.Validator.main(Validator.java:436)
</pre></div>


<p>it would be better to catch these, report the error and continue with the validation</p>



<a name="167946550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/java%20validator%20bugs%3F/near/167946550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/java.20validator.20bugs.3F.html#167946550">(Jun 12 2019 at 13:30)</a>:</h4>
<p>3.: for every example file  i get: </p>
<div class="codehilite"><pre><span></span>error: Read off end of file: 4642092 / 2147483596:7
</pre></div>



<a name="167947032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/java%20validator%20bugs%3F/near/167947032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/java.20validator.20bugs.3F.html#167947032">(Jun 12 2019 at 13:35)</a>:</h4>
<p>the first error is - I try to read unknown files in case they are resources, and the xml library generates that log message internally</p>



<a name="167947123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/java%20validator%20bugs%3F/near/167947123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/java.20validator.20bugs.3F.html#167947123">(Jun 12 2019 at 13:36)</a>:</h4>
<p>I don't know what's with the second or third - can I reproduce?</p>



<a name="168394513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/java%20validator%20bugs%3F/near/168394513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/java.20validator.20bugs.3F.html#168394513">(Jun 18 2019 at 12:19)</a>:</h4>
<p>error 1: the validator exits after the stacktrace, would be nice to catch that parser exception <br>
error 2: Observation doesn't allow valueCount which was used here<br>
error 3: i've attached the example causing the error <a href="/user_uploads/10155/iZZVzcju6-mo8GrjCdpc2PGj/NGS_ObsVariant_SNV_12345_009_FGFR1.xml" target="_blank" title="NGS_ObsVariant_SNV_12345_009_FGFR1.xml">NGS_ObsVariant_SNV_12345_009_FGFR1.xml</a></p>



<a name="168394586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/java%20validator%20bugs%3F/near/168394586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/java.20validator.20bugs.3F.html#168394586">(Jun 18 2019 at 12:21)</a>:</h4>
<p>validated with latest java validator: "java -jar ~/Downloads/org.hl7.fhir.validator.jar . -version 4.0.0"</p>



<a name="168404453"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/java%20validator%20bugs%3F/near/168404453" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/java.20validator.20bugs.3F.html#168404453">(Jun 18 2019 at 14:10)</a>:</h4>
<p>Found another improvable Error message:<br>
<code>Element 'Observation.component[10].valueCodeableConcept.system': minimum required = 1, but only found 0</code><br>
Here the profile constrains component.value[x] to Quantity, the validator doesn't recognize the wrong data type.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
