---
layout: page
title: "FHIR Chat  · Searching against [base] · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html">Searching against [base]</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153973201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973201">(Jul 03 2018 at 17:56)</a>:</h4>
<p>What is the recommended structure of the response when a search is performed against the base URL, i.e.<br>
  GET [base]?[parameters]{&amp;_format=[mime-type]}<br>
I was hoping to see some examples of how mixed-type response bundles are structured, but <a href="https://www.hl7.org/fhir/bundle-examples.html" target="_blank" title="https://www.hl7.org/fhir/bundle-examples.html">https://www.hl7.org/fhir/bundle-examples.html</a> examples are still in to-do status.<br>
Would it be bad form to have an encompassing bundle, comprised of smaller bundles for each resource type? Or is it preferable to have all resource results in a flat bundle?<br>
Considering it from an implementer's perspective, there might be a preference to have each resource type within its own bundle, but very interested in the community's thoughts on this.<br>
Thanks!</p>



<a name="153973205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973205">(Jul 03 2018 at 18:50)</a>:</h4>
<p>All the resources must be flat in the root Bundle</p>



<a name="153973206"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973206" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973206">(Jul 03 2018 at 18:50)</a>:</h4>
<p>The only time you'll see Bundles as the entries in a searchset is if your search includes results from the Bundle endpoint</p>



<a name="153973222"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973222" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973222">(Jul 03 2018 at 20:11)</a>:</h4>
<p>where's the todo status?</p>



<a name="153973226"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973226" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973226">(Jul 03 2018 at 20:34)</a>:</h4>
<p><a href="https://www.hl7.org/fhir/bundle-response-medsallergies.xml.html" target="_blank" title="https://www.hl7.org/fhir/bundle-response-medsallergies.xml.html">https://www.hl7.org/fhir/bundle-response-medsallergies.xml.html</a></p>



<a name="153973227"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973227" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973227">(Jul 03 2018 at 20:34)</a>:</h4>
<p><a href="https://www.hl7.org/fhir/bundle-response-simplesummary.xml.html" target="_blank" title="https://www.hl7.org/fhir/bundle-response-simplesummary.xml.html">https://www.hl7.org/fhir/bundle-response-simplesummary.xml.html</a></p>



<a name="153973230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973230">(Jul 03 2018 at 20:46)</a>:</h4>
<p>In our particular scenario, we have separate DB repositories each for Observations, Immunizations, and MedicationStatements. Each of these exist as a separate API endpoint at the moment, each providing their own bundled searchset responses. <br>
If we want to offer a consolidated [base] endpoint for consumers, does that mean we need a middle layer to call each of these repositories, unpack the response bundles, and repack them into a flattened bundle for the ultimate response? Are there any other options, e.g. using a bundle of bundles? I didn't see anything in the FHIR spec explicitly forbidding this (as opposed to nested contains, which are strictly forbidden).</p>



<a name="153973234"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973234" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973234">(Jul 03 2018 at 21:04)</a>:</h4>
<p>Search results need to be returned consistently or systems won't be able to process them.  When you respond to a query,you're acting as though all of the data resides on your server.  The actual organization of the data is opaque to the recipient.  All of the URLs need to be expressed as though the data is local.  If you feel that's not clear from the current specification, please submit a change request and we'll make things more explicit.</p>



<a name="153973405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973405">(Jul 04 2018 at 18:06)</a>:</h4>
<blockquote>
<p>All of the URLs need to be expressed as though the data is local</p>
</blockquote>



<a name="153973406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973406">(Jul 04 2018 at 18:06)</a>:</h4>
<p>umm?</p>



<a name="153973407"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973407" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973407">(Jul 04 2018 at 18:06)</a>:</h4>
<p>because why?</p>



<a name="153973408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973408">(Jul 04 2018 at 18:06)</a>:</h4>
<p>the rest is true, and you'll need some kind of middleware / proxy to return a search as the client expects.</p>



<a name="153973414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973414">(Jul 04 2018 at 18:30)</a>:</h4>
<p>So when you query endpoint 1, you can get results from endpoint 2?</p>



<a name="153973423"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973423" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973423">(Jul 04 2018 at 19:40)</a>:</h4>
<p>sure. we've never said you can't do that, and there are solutions out there doing that</p>



<a name="153973424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973424">(Jul 04 2018 at 19:42)</a>:</h4>
<p>Do we call attention to the fact that it <em>is</em> allowed anywhere?  Because some people might find it surprising.  (I did :))</p>



<a name="153973428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973428">(Jul 04 2018 at 19:51)</a>:</h4>
<p>I don't think so</p>



<a name="153973465"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973465" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973465">(Jul 04 2018 at 21:25)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17447" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17447">GF#17447</a></p>



<a name="153973766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153973766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153973766">(Jul 05 2018 at 14:53)</a>:</h4>
<p>Thank you Graham, Lloyd for your input!</p>



<a name="153975008"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153975008" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153975008">(Jul 12 2018 at 20:29)</a>:</h4>
<p>At the end of <a href="https://www.hl7.org/fhir/search.html#_type" target="_blank" title="https://www.hl7.org/fhir/search.html#_type">https://www.hl7.org/fhir/search.html#_type</a>, there is a statement "In other contexts, searches on multiple types may allow resource specific search parameters" regarding searching against the [base_url]/ without specifying any resources.<br>
Could <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> or <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> elaborate on the phrase "in other contexts"?<br>
Would a server be allowed to define an endpoint as &lt;<a href="http://sampleorg.com/fhir/STU3/?patient.identifier=9900123" target="_blank" title="http://sampleorg.com/fhir/STU3/?patient.identifier=9900123">http://sampleorg.com/fhir/STU3/?patient.identifier=9900123</a>&gt; , where all resources (of all types) that have search param "patient" would be returned?  We know that [baseurl/Patient?$everything exists, but that requires both context-setting as well as returning a Patient resource.<br>
Thanks!</p>



<a name="153975321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153975321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153975321">(Jul 16 2018 at 00:34)</a>:</h4>
<p>i'm not sure what 'in other contexts' means in that sentence. I think we're saying that implementers should experiment and make proposals to us regarding this</p>



<a name="153976431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153976431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153976431">(Jul 19 2018 at 19:07)</a>:</h4>
<p>Thanks, Graham. To your knowledge, would enabling a global search via GET [BASE], allowing for patient identifier search param, break any established FHIR rules?<br>
For example: GET [BASE]?patient.identifier=someuri|910302, returning all resources (of all types) that contain a patient/subject with identifier someuri|910302?<br>
Or was the "<strong>in other contexts</strong>" on <a href="https://www.hl7.org/fhir/search.html#_type" target="_blank" title="https://www.hl7.org/fhir/search.html#_type">https://www.hl7.org/fhir/search.html#_type</a> specific to the use of <strong>_type</strong>, and not applicable to the global GET [BASE} search?<br>
Thanks!</p>



<a name="153976478"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153976478" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153976478">(Jul 19 2018 at 20:36)</a>:</h4>
<p>I'm not sure whether that 'breaks any established rules' because I'm not quite sure what the context of the question is. We could not define that without breaking our own rules about what we'll define, but I think that an implementer could define that as an extension. but it is outside what most servers expect - feedback has been strong that system wide searches like this across all resources are very diffiicult, which is why we are explicit about what parameters can be used across multiple resources</p>



<a name="153976522"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153976522" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153976522">(Jul 19 2018 at 21:23)</a>:</h4>
<p>Specifically, we want to allow for the global search "GET [BASE}?" with patient.identifier as a search parameter. We're worried that would conflict with statement "<a href="https://www.hl7.org/fhir/http.html#vsearch" target="_blank" title="https://www.hl7.org/fhir/http.html#vsearch">When searching all resources at once, only the parameters defined for all resources can be used.</a>" (but we were not sure if this may be allowed based on the statement "<a href="https://www.hl7.org/fhir/search.html#_type" target="_blank" title="https://www.hl7.org/fhir/search.html#_type">In other contexts, searches on multiple types may allow resource specific search parameters</a>.</p>
<p>We wanted to confirm that allowing for this search parameter for a global search was not explicitly non-conformant.</p>



<a name="153976604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153976604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153976604">(Jul 19 2018 at 22:39)</a>:</h4>
<p>I think that given that wording, it is non compliant if you don't enumerate the types.</p>



<a name="153976605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153976605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153976605">(Jul 19 2018 at 22:40)</a>:</h4>
<p>but I think you want Patient/$everything - that's what it sounds like. have you looked at that?</p>



<a name="153976846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153976846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153976846">(Jul 20 2018 at 12:42)</a>:</h4>
<p>Yes, we have looked at Patient/$everything, but we currently do not serve up a Patient resource yet. Additionally, Patient/$everything (and Patient/[id]/$everything) rely on either the setting patient context or on obtaining the logical ID -- we were hoping to enable access through a patient.identifier parameter instead. We're assessing out different options at this point. Thank you!</p>



<a name="153976849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153976849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153976849">(Jul 20 2018 at 12:47)</a>:</h4>
<p>we've not really discussed doing patient $everything by id .... but it's certainly problematic not have patient...</p>



<a name="153976861"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Searching%20against%20%5Bbase%5D/near/153976861" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Sinn <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Searching.20against.20.5Bbase.5D.html#153976861">(Jul 20 2018 at 14:01)</a>:</h4>
<p>The documentation documents the format as "[base]/Patient/[id]/$everything".(<a href="https://www.hl7.org/fhir/patient-operations.html#8.1.18.2" target="_blank" title="https://www.hl7.org/fhir/patient-operations.html#8.1.18.2">https://www.hl7.org/fhir/patient-operations.html#8.1.18.2</a>) .</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
