---
layout: page
title: "FHIR Chat  · Server supporting _contained searches · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html">Server supporting _contained searches</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="190062021"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/190062021" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#190062021">(Mar 09 2020 at 12:09)</a>:</h4>
<p>Do any servers support this, and how would the capability statement declare it?<br>
<a href="http://test.fhir.org/r4" target="_blank" title="http://test.fhir.org/r4">test.fhir.org/r4</a> appears to ignore _contained, unless I am using it wrongly (there seems no example usage in the spec)<br>
<a href="http://test.fhir.org/r4/Provenance?_contained=true&amp;patient.name=rik" target="_blank" title="http://test.fhir.org/r4/Provenance?_contained=true&amp;patient.name=rik">http://test.fhir.org/r4/Provenance?_contained=true&amp;patient.name=rik</a><br>
finds the same resource, whether or not I use _contained=true (and the self link strips it).</p>



<a name="190382217"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/190382217" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#190382217">(Mar 12 2020 at 12:13)</a>:</h4>
<p>So, maybe no servers implement searching into contained resources</p>



<a name="190383459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/190383459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#190383459">(Mar 12 2020 at 12:30)</a>:</h4>
<p>mine does</p>



<a name="190384599"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/190384599" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#190384599">(Mar 12 2020 at 12:43)</a>:</h4>
<p>ah thanks, good to know. When I tested it as above links it did not seem to look at the _contained parameter, and the self link didn't echo it back, implying it is not supported. Is the URL above correctly formatted?</p>



<a name="215700479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215700479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215700479">(Nov 05 2020 at 11:43)</a>:</h4>
<p><a href="http://test.fhir.org/r4/">http://test.fhir.org/r4/</a> didn't work when I tried it and isn't available for testing currently. Do any other servers support "_contained"? <span class="user-mention" data-user-id="191319">@James Agnew</span> <span class="user-mention" data-user-id="195775">@Michael Hansen</span> <span class="user-mention" data-user-id="197072">@Paul Church</span></p>



<a name="215731947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215731947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215731947">(Nov 05 2020 at 15:59)</a>:</h4>
<p>No for Google, and no for Microsoft based on their docs. Not sure if HAPI supports it but it's not listed in their search docs so I'm guessing no.</p>



<a name="215737028"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215737028" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215737028">(Nov 05 2020 at 16:28)</a>:</h4>
<p>Thanks Paul. It's strange that no one supports what seems a fairly important feature and one for which there is no workaround possible.</p>



<a name="215738117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215738117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215738117">(Nov 05 2020 at 16:34)</a>:</h4>
<p>Searching inside contained resources is technically tricky. I have never heard of anyone needing this feature.</p>



<a name="215738413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215738413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215738413">(Nov 05 2020 at 16:36)</a>:</h4>
<p>Well let me be the first ;-) <br>
If you need contained resources - and people do seem to - it doesn't seem unreasonable to be able to search them.</p>



<a name="215738699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215738699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215738699">(Nov 05 2020 at 16:38)</a>:</h4>
<p>It seems that this basically breaks contained resources.</p>



<a name="215743787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215743787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215743787">(Nov 05 2020 at 17:13)</a>:</h4>
<p>I do see some use of contained resources, but not searching on them. Because the contained resource is generally a stub or incomplete, it lacks a lot of the things one would normally search for. What's an example of a search that you need to do?</p>



<a name="215745176"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215745176" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215745176">(Nov 05 2020 at 17:23)</a>:</h4>
<p>Contained is not only for stubs as such, it is also used when there is no desire to make a whole endpoint for a resource type, </p>
<ul>
<li>there is no independent life cycle - but you still want to use that resource. </li>
</ul>
<p>Hence you may have a full Medication resource contained in a MedicationRequest. Or a Substance in a Medication. And you would want to be able to search on the codes at least. But basically the search params of that resource type. There are examples of both of those in the build, so it's not completely esoteric.</p>



<a name="215745657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215745657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215745657">(Nov 05 2020 at 17:26)</a>:</h4>
<p>But the general purpose fhir servers have an endpoint for every resource type. So our best practices are to split them out into normal resources.</p>



<a name="215745732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215745732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215745732">(Nov 05 2020 at 17:27)</a>:</h4>
<p>The bullet item in this your message  <span class="user-mention" data-user-id="191651">@Rik Smithies</span>  -- is this written somewhere in the FHIR spec, or supported by what you see there? The examples in <a href="http://build.fhir.org/search.html#containedType">http://build.fhir.org/search.html#containedType</a> are (I'm assuming!) intended to represent a case where the medication has no identifying information other than a code.</p>



<a name="215745905"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215745905" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215745905">(Nov 05 2020 at 17:28)</a>:</h4>
<p>Idle speculation, I wonder if we can replace a lot of use cases for stub contained resources with identifier references.</p>



<a name="215745921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215745921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215745921">(Nov 05 2020 at 17:28)</a>:</h4>
<p>"No desire to make a whole endpoint" is hard for me to interpret in terms of technical requirements/constraints/rationale, and introduces questions</p>



<a name="215746427"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215746427" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215746427">(Nov 05 2020 at 17:31)</a>:</h4>
<p>If you don't need to let people read or write them independently, then no endpoint is needed - less to bother with.</p>



<a name="215746799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215746799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215746799">(Nov 05 2020 at 17:33)</a>:</h4>
<p>The Google implementation has one API endpoint called GetResource, it handles every DSTU2, STU3, and R4 resource type. The idea of separate API endpoints is not how we think about the world.</p>



<a name="215746891"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215746891" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215746891">(Nov 05 2020 at 17:34)</a>:</h4>
<p>@Paul But where would the identifier reference point to? We want the resource to be embedded and not need its own endpoint, and still to exist in FHIR. An identifier reference is mainly for things that cannot be referenced by a FHIR url.</p>



<a name="215747080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215747080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215747080">(Nov 05 2020 at 17:35)</a>:</h4>
<p>What I mean is if you only ever use Substance contained in Medication, then you need /myserver/Medication, but you don't need /myserver/Substance "endpoint".</p>



<a name="215747204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215747204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215747204">(Nov 05 2020 at 17:36)</a>:</h4>
<p>It wouldn't point anywhere, in the case where the identifier is the only thing the server knows about the entity. I agree that if you know more about the resource, then this idea does not apply.</p>



<a name="215747330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215747330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215747330">(Nov 05 2020 at 17:37)</a>:</h4>
<p>yes if you only have an identifier, then you don't need contained at all. But that is a different issue.</p>



<a name="215749840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215749840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215749840">(Nov 05 2020 at 17:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span>  it wasn't meant to emphasised as a bullet but zulip intervened :-) It's not a quote. </p>
<p>But it's just a truism about contained resources. They don't have a lifecycle of their own. </p>
<p>And there are examples of this e.g. <a href="http://hl7.org/fhir/medicationadministration0302.xml.html">http://hl7.org/fhir/medicationadministration0302.xml.html</a></p>
<p>If you only use that resource type as contained (which I would imagine is common, if you use it as contained at all), then you don't need the machinery of a restful endpoint for that resource type. </p>
<p>You don't need people to write one resource then reference it from the other, or use a transaction. They just only ever use it as if it is an inline datatype.</p>
<p>I'm not suggesting some sort of parallel API endpoint. Only that an implementation may want to not support that resource as an endpoint, but still use it contained. I want to use Task within a resource, to indicate a change request for it. I won't ever use that Task un-contained, so it doesn't need a /Task endpoint.</p>



<a name="215760521"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215760521" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215760521">(Nov 05 2020 at 19:15)</a>:</h4>
<p>Normally you'd use chaining for that.  You wouldn't need _contained</p>



<a name="215761909"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215761909" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215761909">(Nov 05 2020 at 19:26)</a>:</h4>
<blockquote>
<p>I want to use Task within a resource, to indicate a change request for it.</p>
</blockquote>
<p>Oh my...  Is this really a good idea?</p>
<p>In general, I think the guidance that contained resources should not be used to "package" things together is very important. In this case that one side doesn't want to expose an endpoint for Task, maybe they can receive a notification of a Task existing on the requester side and act on it?</p>
<p>In the case of prescriptions, I would rather MedicationRequest have a reference to Substance (where the compound medication is described) in addition to code or a Medication resource. Having contained resources almost mandated for certain uses seems odd.</p>



<a name="215762163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215762163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215762163">(Nov 05 2020 at 19:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192685">Vassil Peytchev</span> <a href="#narrow/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches/near/215761909">said</a>:</p>
<blockquote>
<p>In the case of prescriptions, I would rather MedicationRequest have a reference to Substance (where the compound medication is described) in addition to code or a Medication resource. Having contained resources almost mandated for certain uses seems odd.</p>
</blockquote>
<p>No, Medication is where the compound medication is described.  And the MedRequest/Dispense/Admin/Statement does have a reference to a Medication resource (CodeableReference).  I'm just pointing out that implementers are containing the Medication resource rather than creating them separately.</p>



<a name="215762791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215762791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215762791">(Nov 05 2020 at 19:33)</a>:</h4>
<p>Containing Medication is fine.  Containing 'Task' is more problematic.  It'd be pretty unusual for Task to not have an independent identity.  "I don't want to maintain an endpoint" isn't a justification for using 'contained'.</p>



<a name="215765059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215765059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215765059">(Nov 05 2020 at 19:50)</a>:</h4>
<blockquote>
<p>No, Medication is where the compound medication is described. And the MedRequest/Dispense/Admin/Statement does have a reference to a Medication resource (CodeableReference). I'm just pointing out that implementers are containing the Medication resource rather than creating them separately.</p>
</blockquote>
<p>I was trying to point out that the requirement to have a Medication resource to describe compound medications is used as the reasoning behind containing Medication within MedRequest (I assume because there is no single record of the compund medication to be exposed as Medication resource?). If we had a substance backbone element within MedRequest that contained references to or codes of Ingredients to describe the compound medication, there would be no need to contain a Medication resource.</p>
<p>With the addition of the new MedicinalProduct-related resources, think we need to revise the way medications are handled, and hopefully simplify some of the things that seem to get way too complicated.</p>



<a name="215767639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215767639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215767639">(Nov 05 2020 at 20:11)</a>:</h4>
<p><span class="user-mention" data-user-id="192685">@Vassil Peytchev</span> yes sometimes a backbone would be good, but sometimes you want the same structure as a resource.  If something wants to act like a backbone sometimes and wants to act like a resource at others, that is what contained can do.</p>



<a name="215769099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215769099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215769099">(Nov 05 2020 at 20:24)</a>:</h4>
<p>But if you can't search on it the use is limited</p>



<a name="215776598"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215776598" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215776598">(Nov 05 2020 at 21:28)</a>:</h4>
<p>Excepting any other uses (or misuses), if Medication is going to be contained I can imagine that people will want to be able to search on it.</p>



<a name="215777342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215777342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215777342">(Nov 05 2020 at 21:35)</a>:</h4>
<p>I think Lloyd's point was that contained or not, you can use chaining - did I misunderstand?</p>



<a name="215777687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215777687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gino Canessa <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215777687">(Nov 05 2020 at 21:38)</a>:</h4>
<p>Just as an aside - this sounds like it would be a lot of work to implement in a performant way.</p>
<p>If the contained resource is an element attached to its parent, the fields will not have been indexed for searching (and even things like full text index don't help for searches on date ranges, etc.).</p>
<p>On the other hand, you cannot assume that contained fragments can be inserted into any normal tables directly.  At the very least, you'll need to modify any references/ids/etc. to restrict them to that particular bundle and make sure all the references link back up.</p>



<a name="215777884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215777884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215777884">(Nov 05 2020 at 21:40)</a>:</h4>
<p>I do not expect that a chained search can navigate into a contained resource. Is that something that other implementations support?</p>



<a name="215778514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215778514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215778514">(Nov 05 2020 at 21:47)</a>:</h4>
<p>I probably misunderstood...</p>



<a name="215783686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215783686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215783686">(Nov 05 2020 at 22:41)</a>:</h4>
<p>A chained search can <em>absolutely</em> navigate into a contained resource</p>



<a name="215783762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215783762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215783762">(Nov 05 2020 at 22:42)</a>:</h4>
<p>That's how they're typically accessed when searching.  And that's certainly something supported by HAPI and Grahame's server</p>



<a name="215783790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215783790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215783790">(Nov 05 2020 at 22:42)</a>:</h4>
<p>The notion of using _contained was very late to the game and isn't widely supported</p>



<a name="215784360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215784360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215784360">(Nov 05 2020 at 22:49)</a>:</h4>
<p>does _contained only affect the output? I thought it affected the search itself?</p>



<a name="215785822"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215785822" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215785822">(Nov 05 2020 at 23:06)</a>:</h4>
<p>_contained changes what's being searched.</p>



<a name="215786860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215786860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215786860">(Nov 05 2020 at 23:19)</a>:</h4>
<p>right, yes. But I now see that you can search into a contained Y in an X, using e.g. X?Y.code <br>
That doesn't need _contained.</p>



<a name="215786942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215786942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215786942">(Nov 05 2020 at 23:20)</a>:</h4>
<p>As long as you know what is contained in what, that is enough.</p>



<a name="215790018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215790018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215790018">(Nov 06 2020 at 00:04)</a>:</h4>
<p>When you're doing chaining, you don't care if it's contained or not.  MedicationRequest?medication.code=foo works whether the medication is contained or not.</p>



<a name="215790349"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215790349" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215790349">(Nov 06 2020 at 00:08)</a>:</h4>
<p>How is that implemented? Do the contained resources have their own database rows that can be joined?</p>



<a name="215790988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215790988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215790988">(Nov 06 2020 at 00:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191319">@James Agnew</span></p>



<a name="215800863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215800863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215800863">(Nov 06 2020 at 02:48)</a>:</h4>
<p>I think that's the usual approach (it's what the SMART server did, back in the day)</p>



<a name="215801663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215801663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215801663">(Nov 06 2020 at 03:05)</a>:</h4>
<p>HAPI certainly does not support this, for all of the same reasons listed above: tricky to implement in a performant way, and at least personally most use cases I've seen where someone has wanted to do it have ultimately been because the person was trying to misuse contained resources (and therefore a workaround existed to just use a non-contained resource, or an identifier reference, or an alternative to the reference (e.g. reasonCode instead of reasonReference).</p>
<p>OTOH I've seen a handful of people work around this limitation by creating a custom search parameter with a path that explicitly dives into the contained resource. Oddly enough one such instance was for compound medications like Vassil described above.</p>



<a name="215803569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215803569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215803569">(Nov 06 2020 at 03:47)</a>:</h4>
<p>Does HAPI support chaining into a contained resource though?</p>



<a name="215806065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215806065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215806065">(Nov 06 2020 at 04:44)</a>:</h4>
<p>Also, does _content search inside contained resources? Does _text search the narrative of contained resources, if they have one?</p>



<a name="215806631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215806631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215806631">(Nov 06 2020 at 04:58)</a>:</h4>
<p>Now it's midnight and you've got me writing a design doc for how this could be implemented.</p>



<a name="215843024"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215843024" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215843024">(Nov 06 2020 at 13:09)</a>:</h4>
<p>Presumably this would also work with reverse chaining? e.g. to search into a contained Provenance (which refers to the containing resource, not the other way around).</p>



<a name="215911053"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/215911053" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#215911053">(Nov 06 2020 at 22:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span> HAPI doesn't support _contained (which I'm fine with) or HAPI doesn't support chaining into contained resources (which is a pretty serious limitation because contained practitioners inside PractitionerRole, contained Medication inside various resources and lots of other scenarios like that will be pretty common.  There are lots of valid reasons for contained resources and you certainly don't want to drop to identifier references which are definitely non-searchable.</p>



<a name="216032688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216032688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216032688">(Nov 09 2020 at 00:06)</a>:</h4>
<p>The chaining use case is currently only achievable using custom search parameters with a FHIRPath that dives right into the contained resource for the indexed content.</p>



<a name="216104585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216104585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216104585">(Nov 09 2020 at 16:02)</a>:</h4>
<p>It seems like there's a real disconnect between Lloyd/Rik saying this is important and all of the implementers on this thread saying they're not doing it. Is there implementation experience on the EHR side?</p>



<a name="216107935"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216107935" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216107935">(Nov 09 2020 at 16:23)</a>:</h4>
<p>Most EHR do not have chained search at all</p>



<a name="216114938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216114938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jens Villadsen <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216114938">(Nov 09 2020 at 17:15)</a>:</h4>
<p>Most EHRs are arcane monoliths from the 80'ies or 90'ies which was based and build on different grounds of such search capabilties</p>



<a name="216128639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216128639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216128639">(Nov 09 2020 at 18:58)</a>:</h4>
<p>FHIR isn't only for facades onto big iron EHRs. When used that way, FHIRs capabilities are always likely to be a superset. Why bother with chaining at all?</p>
<p>But in general FHIR should  provide a consistent feature set. Contained resources without search are not much use. And they were invented for good reasons.</p>



<a name="216131161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216131161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216131161">(Nov 09 2020 at 19:19)</a>:</h4>
<p>Yes, I agree with that but the useful ideas with good reasons need to be tested through implementation experience! The search spec has made it all the way to normative and yet we're having this conversation about whether anyone actually supports _contained or chaining into contained resources.</p>



<a name="216132695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216132695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216132695">(Nov 09 2020 at 19:30)</a>:</h4>
<p>Completely agree with Paul on this.</p>
<p>I still don't understand the use cases for needing this (with 'this' meaning searches reaching into contained resources).</p>
<p>The only place I've personally seen it used for was the compound medications one, and if I'm honest, that just felt like it was working around a weakness in the resource models (i.e. clearly it was important to the implementer to be able to track ratios of products in an IV solution as an atomic unit-- so why don't we provide a way to do this that doesn't require contained resources?)</p>
<p>Are the other use cases similar?</p>



<a name="216133078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216133078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216133078">(Nov 09 2020 at 19:33)</a>:</h4>
<p>I've seen 'contained' resource in lots of cases.  Contained 'Provenance' where the Provenance isn't maintained independently.  Contained Questionnaire within QuestionnaireResponse when doing adaptive questionnaires.  Contained Practitioners when the source data captures the provider as part of the record rather than as a stand-alone registry entry.</p>



<a name="216133183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216133183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216133183">(Nov 09 2020 at 19:34)</a>:</h4>
<p>Contained is going to be pretty common - and being able to chain into contained resources is also going to matter</p>



<a name="216135755"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216135755" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216135755">(Nov 09 2020 at 19:56)</a>:</h4>
<blockquote>
<p>I've seen 'contained' resource in lots of cases.</p>
</blockquote>
<p>Seen in specifications, or seen in actual use?</p>



<a name="216136497"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216136497" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216136497">(Nov 09 2020 at 20:02)</a>:</h4>
<p>Actual use</p>



<a name="216137939"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216137939" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jean Duteau <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216137939">(Nov 09 2020 at 20:17)</a>:</h4>
<p>I'm involved in a number of implementations that are using contained resources.  One healthcare FHIR server uses contained resources for many of the reasons that Lloyd suggested.  Medications are contained because they need to provide the information in that resource but they aren't maintaining them independently.  Practitioners are contained because they have practitioner information but they aren't serving those up as independent resources.</p>



<a name="216138533"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216138533" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216138533">(Nov 09 2020 at 20:23)</a>:</h4>
<p>Lots of legacy repositories will have to use contained because of how their data is organized.  Even those with a strictly FHIR-based repository will still have to use contained where the resource doesn't have independent identity (e.g. the adaptive forms approach defined in Argonaut and SDC)</p>



<a name="216140203"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216140203" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216140203">(Nov 09 2020 at 20:39)</a>:</h4>
<p>We use contained Provenance - and cannot find a way to search. It needs reverse chaining. <br>
(I was wrong about Task, we use that but it is not contained...).</p>



<a name="216140830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216140830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216140830">(Nov 09 2020 at 20:46)</a>:</h4>
<p>If you have a contained provenance, it would be unusual to search on it.  To do that you would need _contained</p>



<a name="216142003"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216142003" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216142003">(Nov 09 2020 at 20:58)</a>:</h4>
<p>Well I guess that depends if you want to search on Provenance itself or to find containing resources that have some embedded Provenance aspect. The use case of Provenance  here is to hold the actual updated date of the (legacy) data, and not the timestamp of the resource. Then search on it.</p>



<a name="216143914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216143914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216143914">(Nov 09 2020 at 21:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> but have you seen _contained search or chaining into contained in lots of cases? It sounds to me like out of the production implementations represented here, nobody supports them, nobody has stated plans to support them, and nobody is quite sure if they're technically feasible at all.</p>



<a name="216144942"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216144942" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216144942">(Nov 09 2020 at 21:27)</a>:</h4>
<p>I have never seen _contained.  That's pretty esoteric.  DaVinci and SDC both require searching by the URL of the contained Questionnaire to retrieve completed questionnaires for instruments like promise.  Searching by dispenses by medication or lot number would also generally require hitting contained resources.  (There's zero chance of them being stand-alone resources, particularly in community pharmacy and even in inpatient, it'd be unusual.)</p>



<a name="216375940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216375940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Church <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216375940">(Nov 11 2020 at 17:38)</a>:</h4>
<p>If anyone wants to try implementing chaining into contained resources I would like to highlight the case where Patient/1 refers to a contained PractitionerRole #pr, and that PractitionerRole refers to a contained Organization #o (which is contained in the Patient, since contained resources aren't nested) with a name of X.</p>
<p>There are two interesting cases that should both return Patient/1:</p>
<ol>
<li>PractitionerRole?organization.name=X&amp;_contained=true</li>
<li>Patient?general-practitioner.organization.name=X</li>
</ol>



<a name="216448989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Server%20supporting%20_contained%20searches/near/216448989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Server.20supporting.20_contained.20searches.html#216448989">(Nov 12 2020 at 10:10)</a>:</h4>
<p>catching up with this... I absolutely support chaining into contained resources. Contained resources are a row in my database just like any other resources, with a key to the container resource (so I can decide whether I want to see them or not). I think I don't implement _contained fully but chained search into contained resources is important</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
