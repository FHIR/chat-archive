---
layout: page
title: "FHIR Chat  · issues with Cyrillic encoding in FhirServer · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html">issues with Cyrillic encoding in FhirServer</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="159488071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159488071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Novikov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159488071">(Feb 27 2019 at 07:12)</a>:</h4>
<p>Hi, Grahame,</p>
<p>We do use Cyrillic encoding Windows-1251 in our project (works with FHIR Server (windows) (<a href="http://www.healthintersections.com.au/FhirServer" target="_blank" title="http://www.healthintersections.com.au/FhirServer">http://www.healthintersections.com.au/FhirServer</a>)), but there is a function RemoveAccents located in library\support\FHIR.Support.Utilities.pas, which automatically converts string to 20127 encoding, but it makes high bytes look like '?’.</p>
<p>Can you correct this function so that when using Cyrillic (ru/rus) there is no conversion to the 20127 encoding?</p>



<a name="159680662"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159680662" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159680662">(Mar 01 2019 at 05:40)</a>:</h4>
<p>hmm. got some test cases for me?</p>



<a name="159680835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159680835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159680835">(Mar 01 2019 at 05:45)</a>:</h4>
<p>I guess I would be better to use this: <a href="https://docs.microsoft.com/en-us/windows/desktop/api/winnls/nf-winnls-normalizestring" target="_blank" title="https://docs.microsoft.com/en-us/windows/desktop/api/winnls/nf-winnls-normalizestring">https://docs.microsoft.com/en-us/windows/desktop/api/winnls/nf-winnls-normalizestring</a></p>



<a name="159681790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159681790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Novikov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159681790">(Mar 01 2019 at 06:11)</a>:</h4>
<p>go: http://**/r3#upload</p>
<p>put sample:<br>
{"resourceType":"Patient","language":"ru","identifier":[{"use":"usual","type":{"coding":[{"system":"http://hl7.org/fhir/v2/0203","code":"PT"}]},"system":"http://mesh.ru/PATIENTS.PATIENTS_ID","value":".330052","assigner":{"display":"ncpMD"}},{"system":"https://fhir.ncp.ru/NamingSystem/rus-snils","value":"024-406-708 20"}],"active":true,"name":[{"use":"usual","text":"СЕРГЕЕВ В. Н.","family":"СЕРГЕЕВ","given":["Валерий","Николаевич"]}],"telecom":[{"system":"phone","value":"с.т.7-913-999-77-74; д.т.:260-77-39; с.т.:8952-926-88-87 жена","use":"home","rank":2},{"system":"phone","value":"79139997774","use":"mobile","rank":1}],"gender":"male","birthDate":"1968-11-27","deceasedBoolean":false,"address":[{"use":"home","type":"postal","text":" Россия, Новосибирская обл., г. Новосибирск, ул. Гаранина,  д. 22, кв. 23","line":["street Гаранина","home 22","room 23"],"city":"г. Новосибирск","district":"","state":"Новосибирская обл","country":"RU"},{"use":"temp","type":"postal","text":"Новосибирская обл., г. Новосибирск, ул. Гаранина,  д. 22, кв. 23","line":["street Гаранина","home 22","room 23"],"city":"г. Новосибирск","district":"","state":"Новосибирская обл","country":"RU"}],"communication":[{"language":{"coding":[{"system":"urn:ietf:bcp:47","code":"ru","display":"Russian"}],"text":"Русский"},"preferred":true}],"managingOrganization":{"reference":"Organization/b6655adb-c3cf-4a89-a56d-4e27e4e5b924"}}</p>
<p>MSSQL: select * from IndexEntries where ResourceKey = &lt;NewID&gt;    in "Value"/"Value2" see symbols "?"  instead of cyrillic (bytes &gt; 127)</p>



<a name="159703954"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159703954" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159703954">(Mar 01 2019 at 11:40)</a>:</h4>
<p>what should this look like with accents removed? </p>
<blockquote>
<p>Валерий Николаевич СЕРГЕЕВ</p>
</blockquote>



<a name="159703975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159703975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159703975">(Mar 01 2019 at 11:41)</a>:</h4>
<blockquote>
<p>Валерии Николаевич СЕРГЕЕВ ?</p>
</blockquote>



<a name="159703990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159703990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159703990">(Mar 01 2019 at 11:41)</a>:</h4>
<p>is there other cyrillic accent characters?</p>



<a name="159703993"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159703993" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159703993">(Mar 01 2019 at 11:41)</a>:</h4>
<p>or does the concept not apply?</p>



<a name="159706037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159706037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159706037">(Mar 01 2019 at 12:06)</a>:</h4>
<p>my test cases:</p>



<a name="159706040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159706040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159706040">(Mar 01 2019 at 12:06)</a>:</h4>
<p>Assert.AreEqual('Grahame Grieve', RemoveAccents('Grahame Grieve'));<br>
  Assert.AreEqual('aaeeiiooouuu AAEEIIOOOUUU', RemoveAccents('aáeéiíoóöuúü AÁEÉIÍOÓÖUÚÜ'));<br>
  Assert.AreEqual('Валерии Николаевич СЕРГЕЕВ', RemoveAccents('Валерий Николаевич СЕРГЕЕВ'));</p>



<a name="159780961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159780961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159780961">(Mar 02 2019 at 06:17)</a>:</h4>
<p>ok I think it's fixed (and released but i haven't upgraded <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> yet)</p>



<a name="159783470"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159783470" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Novikov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159783470">(Mar 02 2019 at 07:36)</a>:</h4>
<p>I checked the new version of the project - it works correctly, thank you ..</p>



<a name="159784130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/issues%20with%20Cyrillic%20encoding%20in%20FhirServer/near/159784130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/issues.20with.20Cyrillic.20encoding.20in.20FhirServer.html#159784130">(Mar 02 2019 at 07:58)</a>:</h4>
<p>Great</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
