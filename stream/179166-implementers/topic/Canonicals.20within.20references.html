---
layout: page
title: "FHIR Chat  · Canonicals within references · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html">Canonicals within references</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="262007728"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262007728" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262007728">(Nov 18 2021 at 23:34)</a>:</h4>
<p>The resource resolution scheme described at <a href="http://build.fhir.org/references.html#literal">http://build.fhir.org/references.html#literal</a>, indicates that Reference.reference can contain a canonical, and that canonicals are part of the reference resolution scheme. Is this intended, or is it an accidental leftover from before we cleaved off canonical from Reference?</p>



<a name="262010665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262010665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262010665">(Nov 19 2021 at 00:08)</a>:</h4>
<p>Hmmm. I don't know the intention, but canonical URLs are valid absolute URIs which makes them valid <code>Reference.reference</code>s. Should there be an explicit statement that it's okay to resolve them from a cache of canonical content rather than dereferencing them over http? I kinda think it's a fair approach whether or not we specify it.</p>



<a name="262010981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262010981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262010981">(Nov 19 2021 at 00:12)</a>:</h4>
<p>I think we do say you can get them from a cache: "The URL may contain a reference to a canonical URL (see below) and applications can use the canonical URL resolution methods they support..."</p>



<a name="262011086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262011086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262011086">(Nov 19 2021 at 00:14)</a>:</h4>
<p>I'm just surprised to see us allow canonical resolution in Reference when we have a whole other data type specifically for canonicals.</p>



<a name="262020830"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262020830" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262020830">(Nov 19 2021 at 02:44)</a>:</h4>
<p>The <em>other data type</em> is great for reference that _need to be canonical_. I'm not sure that's an argument against allowing references that <em>might or might not be canonical</em> to be canonical.</p>



<a name="262021596"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262021596" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262021596">(Nov 19 2021 at 03:01)</a>:</h4>
<p>OK. It isn't that big an issue to me, I just saw it and thought it might have accidentally slipped through in. And I realize at this point even if we wanted to remove that ability, it would probably be pretty hard to do. (I've got other breaking changes I'd rather fight.)</p>



<a name="262023998"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262023998" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262023998">(Nov 19 2021 at 03:52)</a>:</h4>
<blockquote>
<p>it might have accidentally slipped through</p>
</blockquote>
<p>I agree <span class="user-mention" data-user-id="191380">@Elliot Silver</span> -- I have no idea whether this is intentional. Bet <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> will tell us when he has a chance. I'm just saying I happen to like it (but can understand why others might not).</p>



<a name="262024594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262024594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262024594">(Nov 19 2021 at 04:03)</a>:</h4>
<p>I'm pretty sure I never wrote that text.  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>?</p>



<a name="262024880"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262024880" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262024880">(Nov 19 2021 at 04:08)</a>:</h4>
<p>OK, so <a href="https://github.com/HL7/fhir/commit/13e9c9f10ce30f7a0c47c07652f32ece4bfd46b8">https://github.com/HL7/fhir/commit/13e9c9f10ce30f7a0c47c07652f32ece4bfd46b8</a> --  based on <a href="http://jira.hl7.org/browse/FHIR-16865">FHIR-16865</a>. Definitely intentional, explicit, and came after the canonical datatype was introduced.</p>



<a name="262024899"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262024899" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262024899">(Nov 19 2021 at 04:09)</a>:</h4>
<p>(I used <a href="https://github.com/HL7/fhir/blame/master/source/references.html">git blame on references.html</a>)</p>



<a name="262025087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262025087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262025087">(Nov 19 2021 at 04:13)</a>:</h4>
<p>yes I thought I wrote it. The question that lead to that was 'can Any contain a reference to a canonical resource?" and the answer must be yes</p>



<a name="262025317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262025317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262025317">(Nov 19 2021 at 04:18)</a>:</h4>
<p>But you can only specify the canonical resource in the reference if it's an actual valid reference, not if it's a canonical that doesn't resolve to a FHIR server, correct?</p>



<a name="262025841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262025841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262025841">(Nov 19 2021 at 04:29)</a>:</h4>
<p><em>should</em> only. Not sure about "can".</p>



<a name="262026119"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262026119" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262026119">(Nov 19 2021 at 04:34)</a>:</h4>
<p>It makes a huge difference to code.  I mean, sure, you can include a URL that won't resolve and fail to resolve it.  If if you can have a reference to a canonical and you're expect to do a canonical-like search to find it rather than just hitting the URL and bringing back whatever's there, that's a pretty significant imposition on Reference.</p>



<a name="262069700"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262069700" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262069700">(Nov 19 2021 at 14:03)</a>:</h4>
<p>Sure, but the same argument can be applied for almost any content that is sitting at a URL and resolvable only if you have the right security in place, where that could be plenty of interesting and arbitrary security approaches that have their own flavors of authentication and authorization,  all of which also requires writing specific code.  We certainly don't prohibit that.</p>



<a name="262099818"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262099818" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262099818">(Nov 19 2021 at 17:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> <a href="#narrow/stream/179166-implementers/topic/Canonicals.20within.20references/near/262025087">said</a>:</p>
<blockquote>
<p>The question that lead to that was 'can Any contain a reference to a canonical resource?" and the answer must be yes</p>
</blockquote>
<p>Absolutely, a reference can contain a reference to a ValueSet, CodeSystem, StructureDefinition or any other canonical resource. That reference can also use the canonical URL for that resource, if the canonical URL resolves to a resource using the FHIR resource resolution rules. So yes, Any can contain a reference to a canonical resource, but that doesn't mean it needs to be a canonical reference. What is the use case for supporting this?</p>
<p>I agree with <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> . Adding this complexity to reference seems like a significant imposition.</p>



<a name="262108639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262108639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262108639">(Nov 19 2021 at 18:31)</a>:</h4>
<p>If you have a Reference, the expectation (as I understood it) was that the sole way to resolve it is executing a GET on that URL to retrieve the content.  There was never <em>any</em> expectation that you might search through all of the registries you knew for a resource where url=[Reference.reference.value].  I'm fine with references that don't resolve in some circumatances.  I'm not fine with adding an additional mechanism to go find them or references that aren't required to follow FHIR's rules for RESTful URLs.</p>



<a name="262109037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262109037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262109037">(Nov 19 2021 at 18:34)</a>:</h4>
<p>We're not adding anything; we're discussing something that we added (or explicitly documented as allowed) in 2018.</p>



<a name="262111201"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262111201" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262111201">(Nov 19 2021 at 18:48)</a>:</h4>
<p>Yeah, that tracker item is pretty clear.  I just don't think the vast majority of the world knows and understands that's an expectation.</p>



<a name="262113360"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262113360" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262113360">(Nov 19 2021 at 19:02)</a>:</h4>
<p>Is there a "master list" of HL7-defined canonicals?</p>



<a name="262234467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262234467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262234467">(Nov 21 2021 at 10:53)</a>:</h4>
<p>well, in the base spec, yes: <a href="https://hl7.org/fhir/ns.html">https://hl7.org/fhir/ns.html</a></p>



<a name="262234474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262234474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262234474">(Nov 21 2021 at 10:53)</a>:</h4>
<p>there's no master list that covers all the IGs too</p>



<a name="262234531"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262234531" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262234531">(Nov 21 2021 at 10:54)</a>:</h4>
<p>I think it's true to say that we have no language that prevents a system from doing canonical-type resolution on a reference, but we we have no language that suggests that systems should do that, or should be capable of it</p>



<a name="262243600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262243600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262243600">(Nov 21 2021 at 14:40)</a>:</h4>
<p>"applications can use the canonical URL resolution methods they support" is a lot more than "no language that prevents". It's an explicit affirmation of this practice.</p>



<a name="262291493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Canonicals%20within%20references/near/262291493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Canonicals.20within.20references.html#262291493">(Nov 22 2021 at 08:40)</a>:</h4>
<p>that was Lloyd's wording not what the spec says</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
