---
layout: page
title: "FHIR Chat  · FHIR 1.4.0 Java / HAPI · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html">FHIR 1.4.0 Java / HAPI</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153821311"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821311" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821311">(Apr 12 2016 at 20:22)</a>:</h4>
<p>In the FHIR 1.4.0 Java models, there are lots of references to uhn/HAPI, which didn't exist in 1.0.2. I'm wondering if this is a generation error or the intent is to use HAPI in the official FHIR Java code.</p>



<a name="153821318"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821318" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821318">(Apr 12 2016 at 21:10)</a>:</h4>
<p>we are gradually merging the two code bases; the current code has dependencies on general hapi libraries </p>



<a name="153821319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821319">(Apr 12 2016 at 21:10)</a>:</h4>
<p>HAPI in turn uses the the RI java classes as the core model</p>



<a name="153821320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821320">(Apr 12 2016 at 21:11)</a>:</h4>
<p>so your question about HAPI vs the FHIR java code is no longer a binary choice</p>



<a name="153821321"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821321" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821321">(Apr 12 2016 at 21:11)</a>:</h4>
<p>it's more - this is the code that you use, how do you wrap it? </p>



<a name="153821327"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821327" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821327">(Apr 12 2016 at 21:28)</a>:</h4>
<p>Thank you Grahame. This merge actually causes lots of headache to our developers. They used Java models only and didn't plan to use HAPI. Now with 1.4.0 they've got lots of unnecessary (from their perspective) dependencies, coupled with HAPI Rest implementation, which is different from Rest we've been implementing. Also, our Swagger implementation stopped working because of the move to the polymorphic setter methods, for example, from "public void setValueAsInteger(int theValue)" to "setValue(int theValue)".</p>



<a name="153821351"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821351" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821351">(Apr 12 2016 at 21:55)</a>:</h4>
<p>you should only get dependent on a single HAPI low level library</p>



<a name="153821358"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821358" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821358">(Apr 12 2016 at 21:56)</a>:</h4>
<p>and we didn't take the setValue() method out. So I'm not sure that I follow</p>



<a name="153821480"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821480" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821480">(Apr 13 2016 at 14:17)</a>:</h4>
<p>I mean the methods like setValueAsInteger(int theValue), setValueAsLong(long theValue), etc. were replaced in a new version with polymorphic methods setValue(int theValue), setValue(long theValue), etc. This caused our Swagger implementation to stop working as apparently Swagger can’t handle overloaded methods.</p>



<a name="153821501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821501">(Apr 13 2016 at 14:55)</a>:</h4>
<p>I'm curious about how the HAPI inclusion is causing pain? It's true that the hapi core library contains the REST framework, and you need that library in order to use the RI structures now, but that doesn't mean you need to use HAPI's rest framework.</p>
<p>I'm assuming you may need to pull in SLF4j as well, but that would be it I would think?</p>



<a name="153821540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821540">(Apr 13 2016 at 17:55)</a>:</h4>
<p>The concern is that HAPI REST is tightly coupled with the FHIR models rather than being a separate module and that since REST framerwork has multiple dependencies, loading all these dependencies might bloat the compilation and potentially cause some naming conflicts. Right now we can live with this, but our suggestion for the next release would be to decouple the REST framework from the models.</p>



<a name="153821541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821541">(Apr 13 2016 at 17:56)</a>:</h4>
<p>What coupling are you referring to? The HAPI REST framework depends on the model, but the model has no dependency on the REST framework that I'm aware of</p>



<a name="153821543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821543">(Apr 13 2016 at 17:58)</a>:</h4>
<p>In other words, yes you need to include the HAPI JAR if you're using RI structures, but unless you want to use the REST framework, it will never get touched by the classloader.</p>



<a name="153821545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821545">(Apr 13 2016 at 18:04)</a>:</h4>
<p>I believe they were referring to "ca.uhn.fhir.rest.gclient..." in models, e.g. in MedicationDispense model.</p>



<a name="153821546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821546">(Apr 13 2016 at 18:05)</a>:</h4>
<p>Ahh right, yes those are in there now. Those do not actually invoke any of the rest framework though, they will not cause conflicts, or bloat other than 6 extra classes being loaded by the classloader</p>



<a name="153821572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Igor Sirkovich <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821572">(Apr 13 2016 at 20:05)</a>:</h4>
<p>Then this should be fine. Thank you for the explanation <span class="user-mention" data-user-id="191319">@James Agnew</span> .</p>



<a name="153821588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821588">(Apr 13 2016 at 20:26)</a>:</h4>
<p>Still, <span class="user-mention" data-user-id="191319">@James Agnew</span>, their presence in the jar causes the jar to get big, even if the class loader doesn't load them; it would at least cache thir identity too, wouldn't it?</p>



<a name="153821603"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/FHIR%201.4.0%20Java%20/%20HAPI/near/153821603" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/FHIR.201.2E4.2E0.20Java.20.2F.20HAPI.html#153821603">(Apr 13 2016 at 21:09)</a>:</h4>
<p>Not in a meaningful way. The JVM might cache the existance of extra classes, but until the classloader actually asks for them it wouldn't have a significant impact on memory...</p>
<p>The imact this change has is that a server app being deployed to an app server (e.g. a WAR file being deployed to JBoss) will be a few Mb bigger. But that's a few Mb of disk space, not of memory consumption... which I wouldn't personally consider significant in the context of a server app.</p>
<p>It is definitely significant in the context of an Android bundle though, which is something we're working on getting smaller...</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
