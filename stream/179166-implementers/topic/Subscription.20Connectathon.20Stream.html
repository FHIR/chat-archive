---
layout: page
title: "FHIR Chat  · Subscription Connectathon Stream · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html">Subscription Connectathon Stream</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153855125"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855125" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855125">(Nov 02 2016 at 20:28)</a>:</h4>
<p>so there's going to be a connectathon stream around the subscription resource in January, and it's already being worked on....</p>



<a name="153855126"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855126" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855126">(Nov 02 2016 at 20:28)</a>:</h4>
<p>It's raised a question for me: </p>



<a name="153855127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855127">(Nov 02 2016 at 20:28)</a>:</h4>
<p>the websocket documentation says:</p>



<a name="153855128"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855128" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855128">(Nov 02 2016 at 20:29)</a>:</h4>
<p>Client authenticates to server using a server-specified Web socket protocol (e.g. OAuth bearer token presentation)</p>



<a name="153855129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855129">(Nov 02 2016 at 20:30)</a>:</h4>
<p>just so we're clear about this: do we think that the server should OAuth on the the main end-point, and then use the same protocol? or do we think that the OAuth should occur on the web socket end-point? </p>



<a name="153855130"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855130" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855130">(Nov 02 2016 at 20:30)</a>:</h4>
<p>I don't know what that would even mean....</p>



<a name="153855131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855131">(Nov 02 2016 at 20:30)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> <span class="user-mention" data-user-id="191319">@James Agnew</span> <span class="user-mention" data-user-id="191661">@Praveen Ekkati</span> <span class="user-mention" data-user-id="191703">@Claude Nanjo</span> .. comments?</p>



<a name="153855181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855181">(Nov 02 2016 at 22:59)</a>:</h4>
<p>more on this: then we say:</p>



<a name="153855182"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855182" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855182">(Nov 02 2016 at 22:59)</a>:</h4>
<p>Server sends a "ping :id" message to notify the client each time a new result is available</p>



<a name="153855184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855184">(Nov 02 2016 at 23:00)</a>:</h4>
<p>if you can only subscribe to a single :id (that's what we imply, but not actually what we say explicitly) then why send :id? </p>



<a name="153855185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855185">(Nov 02 2016 at 23:00)</a>:</h4>
<p>can we also change it so that if you specify a payload type, then you get ping {resource}</p>



<a name="153855257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855257">(Nov 03 2016 at 10:48)</a>:</h4>
<p>(deleted) I read the meaning of :id wrong!</p>



<a name="153855259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Simone Heckmann <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855259">(Nov 03 2016 at 10:49)</a>:</h4>
<p>(deleted)</p>



<a name="153855414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855414">(Nov 03 2016 at 22:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I'm not sure I get your question on the OAuth part. I'd assume the OAuth authentication process is external to the FHIR server (as it always is of course) so by the time the client wants to open a websocket connection it presents the bearer token in its initial request before the connection gets upgraded to a websocket</p>



<a name="153855415"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855415" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855415">(Nov 03 2016 at 22:20)</a>:</h4>
<p>Also how do we imply that you can only subscribe to a single ID? You can subscribe to any search result, so by definition it's lots of IDs no?</p>
<p>I do agree that the protocol needs work (and/or further fleshing out) though. This would be a nice time to do that.</p>



<a name="153855417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855417">(Nov 03 2016 at 22:26)</a>:</h4>
<p>well, if you connect to a web socket end point, and it doesn't like your authentication, does it redirect the client to an OAuth end point instead of doing the websocket upgrade? </p>



<a name="153855418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855418">(Nov 03 2016 at 22:26)</a>:</h4>
<p>do web socket clients handle that? what's the expectation with this elsewhere</p>



<a name="153855419"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855419" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855419">(Nov 03 2016 at 22:27)</a>:</h4>
<p>as for binding - once you have a wb socket, then you (the client) send bind :[id]</p>



<a name="153855420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855420">(Nov 03 2016 at 22:27)</a>:</h4>
<p>and then you get messages for that subscription, by it's logical id </p>



<a name="153855421"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855421" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855421">(Nov 03 2016 at 22:28)</a>:</h4>
<p>that is, for the one logical id</p>



<a name="153855424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855424">(Nov 03 2016 at 22:37)</a>:</h4>
<p>also, you assume that the client just... knows... where to get the bearer token that it needs from....</p>



<a name="153855493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855493">(Nov 04 2016 at 12:16)</a>:</h4>
<p>At the FHIR specification for a subscription stream, you can only specify that authentication and authorization apply. For Connectathon you can define a specific policy to enforce. Subscriptions often do an access control check at both the subscription request, and prior to returning results. The first check is to confirm that the subscriber has proper rights to ask the subscription(question). This is often broad, meaning it doesn't do fine-grain rejections. The second (N) check(s) do the fine grain check (and re-verification that the requester is still authorized to subscribe). The second check(s) can choose to silently discard unauthorized data, or notify the subscriber (policy decision).</p>



<a name="153855540"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855540" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855540">(Nov 04 2016 at 18:54)</a>:</h4>
<p>and that answered the question how?</p>



<a name="153855584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855584">(Nov 04 2016 at 22:34)</a>:</h4>
<p>I definitely don't think we'd be doing any redirecting. Websockets are initiated by Javascript request so a simple 403 is probably all a client would be able to do anything useful with.</p>
<p>I guess a more fundamental question is why we get into the authorization stuff at all on the subscription page? I mean I would equally assume that searches are appropriately secured, but we don't mandate any particular authorization scheme there.</p>



<a name="153855585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855585">(Nov 04 2016 at 22:37)</a>:</h4>
<p>Re. the ID you're right. I'm now remembering that when I originally implemented the websocket protocol I read it wrong and assumed it was sending the IDs of the changed resources but that turned out to be incorrect and I had to fix it.</p>
<p>It probably makes sense to revisit the protocol as a whole, allowing for the server to send resource IDs or even bodies. I have trouble envisioning a use case where receiving the subscription ID would be useful for anything other than causing me to execute a follow-on search. Might as well just do the follow-on search proactively and send the results..</p>



<a name="153855587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855587">(Nov 04 2016 at 23:10)</a>:</h4>
<p>the id of just sending the id of the subscription is that you could do that in the clear, or at least, with a lot less security </p>



<a name="153855588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855588">(Nov 04 2016 at 23:11)</a>:</h4>
<p>I think from that point of view, if you're going to send the resource id, you might as well just send the resource</p>



<a name="153855589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855589">(Nov 04 2016 at 23:11)</a>:</h4>
<p>I think it would be useful if you could bind more than one id </p>



<a name="153855590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855590">(Nov 04 2016 at 23:11)</a>:</h4>
<p>e.g. bind :1 :2 :3</p>



<a name="153855592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153855592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153855592">(Nov 04 2016 at 23:13)</a>:</h4>
<p>as for security.. I agree we would say less e.g. remove the point "Client authenticates to server using a server-specified Web socket protocol (e.g. OAuth bearer token presentation)." and just add a note after the list to the effect that the web socket end-point must be appropriately secured</p>



<a name="153862584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153862584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153862584">(Dec 09 2016 at 02:37)</a>:</h4>
<p>Ah... trying to implement a websocket pub/sub protocol and run FHIR resources over it?  The Meteor community has had a pub/sub protocol called DDP (Data Distribution Protocol) running for the past 4 years, and have been running FHIR resources over it for the past year.   This may be relevant.  :)</p>
<p><a href="https://github.com/meteor/meteor/blob/devel/packages/ddp/DDP.md" target="_blank" title="https://github.com/meteor/meteor/blob/devel/packages/ddp/DDP.md">https://github.com/meteor/meteor/blob/devel/packages/ddp/DDP.md</a></p>



<a name="153862772"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153862772" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153862772">(Dec 09 2016 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> - link to DDP is <a href="https://github.com/meteor/meteor/blob/devel/packages/ddp/DDP.md" target="_blank" title="https://github.com/meteor/meteor/blob/devel/packages/ddp/DDP.md">https://github.com/meteor/meteor/blob/devel/packages/ddp/DDP.md</a></p>



<a name="153862773"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Subscription%20Connectathon%20Stream/near/153862773" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Subscription.20Connectathon.20Stream.html#153862773">(Dec 09 2016 at 19:14)</a>:</h4>
<p>Also, just as an FYI.... the DDP protocol has open-source clients in a dozen major languages...<br>
<a href="http://meteorpedia.com/read/DDP_Clients" target="_blank" title="http://meteorpedia.com/read/DDP_Clients">http://meteorpedia.com/read/DDP_Clients</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
