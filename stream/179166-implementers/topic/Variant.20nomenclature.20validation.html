---
layout: page
title: "FHIR Chat  · Variant nomenclature validation · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html">Variant nomenclature validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="206177749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206177749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206177749">(Aug 06 2020 at 18:18)</a>:</h4>
<p>Hi...I'm hitting an issue with variant nomenclature not validating. Using an example from mCODE, which I understand used to validate, I get this error:</p>
<blockquote>
<p>None of the codes provided are in the value set <a href="http://hl7.org/fhir/us/mcode/ValueSet/mcode-hgvs-vs">http://hl7.org/fhir/us/mcode/ValueSet/mcode-hgvs-vs</a> (<a href="http://hl7.org/fhir/us/mcode/ValueSet/mcode-hgvs-vs">http://hl7.org/fhir/us/mcode/ValueSet/mcode-hgvs-vs</a>), and a code from this value set is required) (codes = http://varnomen.hgvs.org#NC_000019.8:g.1171707G&gt;A)</p>
</blockquote>
<p>The full output from the validator .jar, including version numbers of everything is here: <a href="https://gist.github.com/masnick/30bf1eb03cc13ce68e6d4f06c2a52e3d">https://gist.github.com/masnick/30bf1eb03cc13ce68e6d4f06c2a52e3d</a>. Any help would be appreciated. Thanks!</p>



<a name="206456431"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206456431" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Kramer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206456431">(Aug 10 2020 at 12:50)</a>:</h4>
<p><span class="user-mention" data-user-id="322501">@Max Masnick</span> I think this is simply the fact that the terminology server used by the validator doesn't know or have access to the code system <a href="http://varnomen.hgvs.org">http://varnomen.hgvs.org</a>. To make matters even less clear, HGVS is more a naming <em>algorithm</em> than a finite set of codes. To even begin to solve this, we would have to have an algorithm to validate HGVS names, and have a way to embed the algorithm within the terminology server (that currently only stores lists of codes).</p>



<a name="206459048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206459048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> May Terry <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206459048">(Aug 10 2020 at 13:18)</a>:</h4>
<p>Seems like a couple of different issues: 1) modeling, 2) fhir validator tooling.  1) for modeling, there are a number of use cases where codeableConcept references not necessarily a fully defined terminology of codes and terms but a naming system with a binding that's <code>extensible</code>- for example HGVS as found in the Genomics Reporting IG and mCODE IG.  2) if the validator points to a terminology server which doesn't handle naming systems and the validator expects a match of a code, then how should the validator handle this?  Should it remain an explainable error, or could we loosen this message to a warning level?  <br>
We had earlier versions of the FHIR validator that didn't flag an error on this and I'm concerned that it will pose a challenge if we release a technical errata and it gets rejected because of this discrepancy.  cc: <span class="user-mention" data-user-id="191451">@Patrick Werner</span> since I think this affects both mCODE and the Genomics Reporting IG.</p>



<a name="206459520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206459520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206459520">(Aug 10 2020 at 13:22)</a>:</h4>
<p>Good explanation, yes hgvs is a grammar like ucum. This can be expressed as a CS.</p>



<a name="206459920"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206459920" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206459920">(Aug 10 2020 at 13:27)</a>:</h4>
<p>If the terminology backend doesn't know the CS there are three choices:</p>
<ul>
<li>give a info/warning that this couldn't be validated.</li>
<li>throw an error as it couldn't be validated.</li>
<li>ignore the validation for this CS<br>
This is up to the server implementer.</li>
</ul>



<a name="206460144"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206460144" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> May Terry <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206460144">(Aug 10 2020 at 13:29)</a>:</h4>
<p>Agreed. I guess I'm trying to ensure that we don't get dinged on technical errata releases because the examples are now throwing an error and failing validation.</p>



<a name="206460474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206460474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206460474">(Aug 10 2020 at 13:32)</a>:</h4>
<p>I think the validator shouldn't throw errors on missing CS, or have this being configurable. There are plenty of usecases where no complete CS/Terminology Servers are available.</p>



<a name="206501979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206501979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206501979">(Aug 10 2020 at 19:21)</a>:</h4>
<p>hmm. I'll investigate. On the whole I agree for this case. I'm not sure about some other cases that present the same to the validator</p>



<a name="206511839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206511839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206511839">(Aug 10 2020 at 20:53)</a>:</h4>
<p>what's the source being validated above?</p>



<a name="206680815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206680815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206680815">(Aug 12 2020 at 10:58)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> the file I was trying to validate is <a href="http://hl7.org/fhir/us/mcode/Observation-mCODECancerGeneticVariantExample01.xml">http://hl7.org/fhir/us/mcode/Observation-mCODECancerGeneticVariantExample01.xml</a>. Thanks for looking into this!</p>



<a name="206681492"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206681492" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206681492">(Aug 12 2020 at 11:07)</a>:</h4>
<p>if you were a non-fhir user, and you wanted to know whether an hgvs code was valid, what would you do?</p>



<a name="206681614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206681614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206681614">(Aug 12 2020 at 11:09)</a>:</h4>
<p><a href="https://variantvalidator.org/service/validate/">https://variantvalidator.org/service/validate/</a> thinks it's not valid...</p>



<a name="206682216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206682216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206682216">(Aug 12 2020 at 11:18)</a>:</h4>
<p>One way to do it is to look at the variant on ClinVar (<a href="https://www.ncbi.nlm.nih.gov/clinvar/variation/619728/">https://www.ncbi.nlm.nih.gov/clinvar/variation/619728/</a>) based on the ClinVar code in the instance, and I would assume that anything listed under HGVS would be valid.</p>
<p>In this case NC_000019.8:g.1171707G&gt;A is not listed on ClinVar so maybe that's a bad example (and should be changed in the example instance). </p>
<p>However, I did hit the same error with this file here, which is using a HGVS value from ClinVar that validates with <a href="http://variantvalidator.org">variantvalidator.org</a>: <a href="https://gist.githubusercontent.com/masnick/30bf1eb03cc13ce68e6d4f06c2a52e3d/raw/1fcd9e653e6b5f20a615cc19068b93c40bf9de5d/another_example.json">https://gist.githubusercontent.com/masnick/30bf1eb03cc13ce68e6d4f06c2a52e3d/raw/1fcd9e653e6b5f20a615cc19068b93c40bf9de5d/another_example.json</a></p>



<a name="206682365"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206682365" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206682365">(Aug 12 2020 at 11:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> here's the ClinVar link for reference: <a href="https://www.ncbi.nlm.nih.gov/clinvar/variation/128144/">https://www.ncbi.nlm.nih.gov/clinvar/variation/128144/</a></p>
<p>The variant is NC_000016.10:g.23603471G&gt;T</p>



<a name="206682988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206682988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206682988">(Aug 12 2020 at 11:29)</a>:</h4>
<p>This is the error I get with another_example.json:</p>
<div class="codehilite"><pre><span></span><code>Error @ Observation.component[2].value.ofType(CodeableConcept) (line 107, col28) : None of the codes provided are in the value set http://hl7.org/fhir/us/mcode/ValueSet/mcode-hgvs-vs (http://hl7.org/fhir/us/mcode/ValueSet/mcode-hgvs-vs), and a code from this value set is required) (codes = http://varnomen.hgvs.org#NC_000016.10:g.23603471G&gt;T)
</code></pre></div>



<a name="206704232"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206704232" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kevin Power <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206704232">(Aug 12 2020 at 14:51)</a>:</h4>
<p><span class="user-mention" data-user-id="322501">@Max Masnick</span> - We see this sort of error in the <a href="http://build.fhir.org/ig/HL7/genomics-reporting/">Genomics Reporting IG</a> quite often for HGVS and other code systems that are not yet supported.  For now, we have ignored the errors, but would love to do something to get these code systems supported.  I know <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> is supportive of that, but no one has had the time to make that happen just yet.  As <span class="user-mention" data-user-id="191451">@Patrick Werner</span> mentioned above, perhaps the validator should not be treating something like this as an error, or perhaps it could be suppressed by the IG?</p>
<p>This might be more than you really want, but the CG group (<a class="stream" data-stream-id="179197" href="/#narrow/stream/179197-genomics">#genomics</a> ) started cataloging a variety of tools that will perform this sort of HGVS validation, and you can see that list <a href="https://docs.google.com/document/d/1hqcs7l638RCytkwRXStSr18H49vZE5U5QXyL4zXF5es/edit">here</a>.</p>
<p>There are a few details in that document, but not near enough.  Suffice it to say that each of these tools have limitations.  We can <strong>broadly</strong> categorize into two parts:<br>
1 - Syntax, which can be done <a href="https://mutalyzer.nl/syntax-checker">here</a> and is mostly straightforward.<br>
2 - Semantics (do the parts make sense together - is the ref seq + version valid, is the ref allele indicated accurate, etc..), which to do well is difficult, and is where differences emerge between the various tools.</p>
<p>If we were to start somewhere, updating the validator to perform syntax validation for HGVS would be a nice start.  Much beyond that will be hard.</p>



<a name="206768184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206768184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206768184">(Aug 13 2020 at 00:02)</a>:</h4>
<p>ok, so from the next release of the IG Publisher, the error will change to the warning, but you won't notice because also HGVS codes will be validated by the multilyzer, though of course it only checks syntax, not semantics. If any one finds a trustworthy semantic checker, let me know</p>



<a name="206768494"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206768494" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Masnick <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206768494">(Aug 13 2020 at 00:07)</a>:</h4>
<p>Thanks all! <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, does the change to the IG Publisher also apply to the FHIR Validator? Or is that a separate codebase?</p>



<a name="206768520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Variant%20nomenclature%20validation/near/206768520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Variant.20nomenclature.20validation.html#206768520">(Aug 13 2020 at 00:08)</a>:</h4>
<p>same code base. in fact, all the changes were in the validator</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
