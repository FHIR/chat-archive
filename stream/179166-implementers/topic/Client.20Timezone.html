---
layout: page
title: "FHIR Chat  · Client Timezone · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html">Client Timezone</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="157576342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157576342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157576342">(Feb 05 2019 at 02:35)</a>:</h4>
<p>In discussing <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16550" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16550">GF#16550</a> today on the FHIR-I call, we are wondering what implementers reaction would be to suggesting that clients SHOULD follow this <a href="https://tools.ietf.org/html/draft-sharhalakis-httptz-05" target="_blank" title="https://tools.ietf.org/html/draft-sharhalakis-httptz-05">IETF proposal</a> (even though it is not a ratified standard HTTP header) to provide time zone information using the proposed Client Timezone header?</p>



<a name="157621977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157621977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157621977">(Feb 05 2019 at 17:13)</a>:</h4>
<p>I agree this is challenging.</p>



<a name="157622146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157622146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157622146">(Feb 05 2019 at 17:15)</a>:</h4>
<p>In the tracker, some people are talking about offsets and others are talking about time zones (and some about both).  I agree with Jenni's point from 05 Jul 2018, and I think we need this to be about <strong>offsets</strong> and leave time zones out of it.</p>



<a name="157622528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157622528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157622528">(Feb 05 2019 at 17:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> I think that IETF proposal would add complexity that might not get us anything, but I might be looking at it wrong.  </p>
<p>Option 1: The client says "give me all results after 2019-02-05T00:00:00-05:00"</p>
<p>Option 2: The client says "give me all results after 2019-02-05, and by the way, here are some extra headers letting you know that my offset it -05:00"</p>
<p>Is the latter enough easier for the client to make the additional complexity worth it?</p>



<a name="157622613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157622613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157622613">(Feb 05 2019 at 17:22)</a>:</h4>
<p>Agree there is definitely confusion there, but this is specifically (and importantly) about timezones. Without the timezone, there's no way to reliably know what time it actually is where the request originated, which is important for questions like "is it past midnight?"</p>



<a name="157622635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157622635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157622635">(Feb 05 2019 at 17:22)</a>:</h4>
<p>Offset alone doesn't give you that.</p>



<a name="157629382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157629382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157629382">(Feb 05 2019 at 18:44)</a>:</h4>
<p>And timezones change from country to country and year to year (typically because of law changes).   Who would keep track of the history of timezone changes?</p>



<a name="157631757"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157631757" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157631757">(Feb 05 2019 at 19:11)</a>:</h4>
<p>What I'm saying is that the server doesn't necessarily <em>need</em> to know the client's time zone.  If the client does a search with only a date (or with a date and time but no offset), the server needs to know what time the client thinks it is in order to give the client the results the client wants.  But if the client provides the server with the explicit date, time, and offset in the search parameter, the server doesn't need to know what time the client thinks it is.</p>



<a name="157631795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157631795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157631795">(Feb 05 2019 at 19:11)</a>:</h4>
<p>I'm not saying that just to punt work from the server to the client; the client has to do work either way.</p>



<a name="157631904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157631904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157631904">(Feb 05 2019 at 19:12)</a>:</h4>
<p>Is it easier for the client to provide the necessary specificity in a header than it is for the client to provide the same specificity in a search parameter?</p>



<a name="157632103"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157632103" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157632103">(Feb 05 2019 at 19:14)</a>:</h4>
<p>The timezone would be needed to translate from 1/2/2019 00:00 (essentially the timeless date/local date requested) to "midnight in my time zone"</p>



<a name="157632148"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157632148" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157632148">(Feb 05 2019 at 19:15)</a>:</h4>
<p>Telling the time offset there won't let you know, for example, that a DST change just happened or will happen and you need to account for that in finding "midnight local"</p>



<a name="157632255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157632255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157632255">(Feb 05 2019 at 19:16)</a>:</h4>
<p><span class="user-mention" data-user-id="194183">@John Silva</span>  Usually, most libraries and OSs use the Olson database to track that: <a href="https://en.wikipedia.org/wiki/Tz_database" target="_blank" title="https://en.wikipedia.org/wiki/Tz_database">https://en.wikipedia.org/wiki/Tz_database</a></p>



<a name="157632316"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157632316" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157632316">(Feb 05 2019 at 19:17)</a>:</h4>
<p>and if they don't, I feel it's a bit like the "don't roll your own crypto" saying. Don't roll your own TZ tracking... you're just asking for issues :)</p>



<a name="157633016"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157633016" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157633016">(Feb 05 2019 at 19:25)</a>:</h4>
<p>And I think the only place where requiring the client to provide the exact offset/time becomes weird is where the date itself in the system is timeless/imprecise. Otherwise, I would think that best practice is for clients to fully qualify the time</p>



<a name="157633139"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157633139" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157633139">(Feb 05 2019 at 19:26)</a>:</h4>
<p>Most of the time, when I've seen an app send in just a date (even for _lastUpdated), it's because they saw it in an example somewhere rather than they made a conscious decision to do it that way</p>



<a name="157640393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157640393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157640393">(Feb 05 2019 at 21:05)</a>:</h4>
<p>I hadn't thought of that (that using date only wouldn't be a conscious choice).</p>



<a name="157676646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157676646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157676646">(Feb 06 2019 at 09:28)</a>:</h4>
<p>My 5ct of implementer opinion on the initial question (for the statistics <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span> ): I would rather not split the timezone information into a header (especially not a non-standard one). I would find it confusing to have a second place where timezone-related information can go and suspect it will lead implementers with questions about what should go where, whether double-encoding is OK etc. Also, what happens if the header info contradicts timezone information explicitly put in a date field or search variable? Finally, my feeling is also that, beyond the added technical complexity, moving info into headers always increases the potential for client errors due to misunderstandings or misreadings of the spec.</p>



<a name="157679377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157679377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157679377">(Feb 06 2019 at 10:20)</a>:</h4>
<p>date fields can always have different timezones from the system - they can't disagree. I don't think that it matters whether the timezone information is in a header or a parameter.</p>



<a name="157679393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157679393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157679393">(Feb 06 2019 at 10:20)</a>:</h4>
<p>I think it's not so much search where it matters, but things like narrative generation, appointment matching, decision support around care planning</p>



<a name="157713142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157713142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157713142">(Feb 06 2019 at 18:30)</a>:</h4>
<p>Just to be clear: there is no where in FHIR today where you can communicate the time zone. The only thing that can be communicated is the offset of a specific time (and it may vary throughout a resource). Offsets are ambiguous (if trying to go to a unique time zone), and change within a given time zone during specific parts of the year or over time.</p>



<a name="157720273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157720273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157720273">(Feb 06 2019 at 19:55)</a>:</h4>
<p>Hmm, this same problem existed in the HL7 V2 world with the TimeStamp (TS) datatype and V2 has been dealing with this for ~30 years so I guess an elegant solution has still not been found ;-)   [In the 'earlier' V2 days, and even now, the default is that if a timestamp doesn't have an offset the V2 processing rules say to interpret it as 'local time' -- whatever that means!! the sender's local time the receiver's or something else?]</p>



<a name="157722873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157722873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157722873">(Feb 06 2019 at 20:25)</a>:</h4>
<p>receiver's local time. MSH-7 timestamp has traditionally been used as the sender's timezone offset</p>



<a name="157736569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157736569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157736569">(Feb 06 2019 at 23:21)</a>:</h4>
<p>Getting back to <span class="user-mention" data-user-id="191356">@Jenni Syed</span>'s point above, does someone have a real world use case for this, and if so what is it they want to do?</p>



<a name="157737187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157737187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157737187">(Feb 06 2019 at 23:31)</a>:</h4>
<p>decision making on the server side.</p>



<a name="157740085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157740085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157740085">(Feb 07 2019 at 00:18)</a>:</h4>
<p>What's a specific example?</p>



<a name="157741272"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157741272" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157741272">(Feb 07 2019 at 00:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span></p>



<a name="157742166"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157742166" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157742166">(Feb 07 2019 at 00:55)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191936">@Michael Donnelly</span> , I think a common example is scheduling an appointment. You really have to know the timezone in order to do that effectively. In decision support and quality measurement, there are cases where I'm looking for specific events to occur between admission and midnight on the admission date. If I'm running locally that's easy enough to tell, but as soon as I want to run that logic in the cloud, I can't answer the question, is it midnight where the request originated?</p>



<a name="157742285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157742285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bryn Rhodes <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157742285">(Feb 07 2019 at 00:57)</a>:</h4>
<p>Note that I'm not suggesting this is something that all clients would have to do. There are plenty of cases that simply don't require it. But for cases that do require it, there ought to be a way to support the use case that's consistent, so that different implementations don't do it different ways.</p>



<a name="157742790"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157742790" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157742790">(Feb 07 2019 at 01:05)</a>:</h4>
<p>Another example is I/O totals in an acute care unit; these are normally calculated for the shifts based on the local time zone, but these could be calculated on a server in the cloud that 'lives' "who knows where" (or the server/service could be moved based on load).   [To say nothing about the 'fun' problem of doing totals across the 'crazy hours' when the daylight saving time switches.]  This same server/service could be used for different hospitals in a hospital group that are located geographically across different time zones.</p>



<a name="157777848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157777848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157777848">(Feb 07 2019 at 13:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> and <span class="user-mention" data-user-id="194183">@John Silva</span>, both of those sound like cases where the client wants to refer to midnight in the <strong>server's time zone</strong> and/or in the <strong>time zone local to the department relevant to this resource</strong> rather than in the <strong>client's time zone</strong>.</p>



<a name="157777856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157777856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157777856">(Feb 07 2019 at 13:54)</a>:</h4>
<p>Am I thinking about this the wrong way?</p>



<a name="157778098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157778098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157778098">(Feb 07 2019 at 13:58)</a>:</h4>
<p>It seems like we have a few different potential problems that can contribute to these workflows having trouble:<br>
1. Difference between the client's offset and the server's offset.<br>
2. Difference between the server's offset and the offset of the <strong>department relevant to a resource</strong>.<br>
3. Different between the server's current offset and the offset for a time zone (perhaps the <strong>server's</strong>, perhaps the <strong>client's</strong>, perhaps the <strong>department's</strong>) at the time (or, worse, times) relevant to the resource.</p>



<a name="157778295"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157778295" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157778295">(Feb 07 2019 at 14:01)</a>:</h4>
<blockquote>
<p>2. Difference between the server's offset and the offset of the department relevant to a resource.</p>
</blockquote>
<p>Examples include:</p>
<ul>
<li>Scheduling an appointment </li>
<li>Decision support </li>
<li>Quality measures </li>
<li>I/O totals for acute care</li>
</ul>



<a name="157778408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157778408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157778408">(Feb 07 2019 at 14:02)</a>:</h4>
<blockquote>
<p>3. Different between the server's current offset and the offset for a time zone (perhaps the server's, perhaps the client's, perhaps the department's) at the time (or, worse, times) relevant to the resource.</p>
</blockquote>
<p>Examples include definitely:</p>
<ul>
<li>Scheduling an appointment</li>
<li>Quality measures</li>
</ul>
<p>And maybe in some edge cases (operationally during Spring forward/Fall back)</p>
<ul>
<li>Decision support</li>
<li>I/O totals for acute care</li>
</ul>



<a name="157778504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157778504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157778504">(Feb 07 2019 at 14:04)</a>:</h4>
<p>If the client happens to be in the same time zone as the department for the resource, anything that solves potential issue #1 also solves #2.</p>



<a name="157778604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157778604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157778604">(Feb 07 2019 at 14:05)</a>:</h4>
<p>But if the client is somewhere else, things have actually gotten murkier.</p>



<a name="157781637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157781637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157781637">(Feb 07 2019 at 14:44)</a>:</h4>
<p><span class="user-mention" data-user-id="191936">@Michael Donnelly</span>  -- well, in the example of I/O totals, it doesn't necessarily matter where the client is.   I'll give an example, which might add ever further confusion but this is the reality with dealing with timezones !  (We can thank Ben Franklin for this!!  <a href="http://www.webexhibits.org/daylightsaving/franklin.html" target="_blank" title="http://www.webexhibits.org/daylightsaving/franklin.html">http://www.webexhibits.org/daylightsaving/franklin.html</a>) </p>
<p>My (Dr. Who) hospital is in the UK (London) but I'm traveling to the Eastern US and I get a call from the clinical staff about my patient.   I need to look at my patient's chart.   I use my VPN client to authenticate on my hospital's network, but I run a local web client to access the EMR system at the hospital.  When I see my patient's data, even though I'm in the US, I need the data to be shown in the local (UK) time because that is what is going on with the patient.   So, in this example, even though my web client is running in the US Eastern time zone, I need the data to be displayed in UK local time.  (Also, what happens if the UK hospital's system is in the cloud and when I login I'm actually connecting to a cloud mirror in the US not the UK; which timezone should I expect to see?)   You can think of a similar scenario for 'remote radiologist' reviewing imaging studies; e.g. patients in the US have imaging studies which are 'read' by radiologists in India (for example), does the remote radiologist want to see there local time or the time of the patient's location; I suspect the latter.</p>
<p>The idea here is that the source data typically needs to be stored in the time zone where the patient observation (event, etc.) happened.   How this is viewed may not matter on where the client is located (and in which time zone) but I'm sure there are use cases where it might.</p>



<a name="157782731"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157782731" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157782731">(Feb 07 2019 at 14:59)</a>:</h4>
<p>I think we agree, <span class="user-mention" data-user-id="194183">@John Silva</span>.  What matters is where the patient is or where the encounter was or where a department is not where the client happens to be.</p>



<a name="157783447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157783447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Hatt <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157783447">(Feb 07 2019 at 15:09)</a>:</h4>
<p>Yes <span class="user-mention" data-user-id="191936">@Michael Donnelly</span>  I've always thought that <code>Location.position</code> is the best place for timezone information to live . Maybe even adding a property to <code>position</code> for how people in that <code>Location</code> set their clocks, since working back from coordinates is not easy.</p>



<a name="157795084"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157795084" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157795084">(Feb 07 2019 at 17:27)</a>:</h4>
<p>There is also some previous discussion around this on <a href="#narrow/stream/179166-implementers/topic/Date.20http.20header.20for.20timezone" title="#narrow/stream/179166-implementers/topic/Date.20http.20header.20for.20timezone">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/Date.20http.20header.20for.20timezone</a></p>



<a name="157795110"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157795110" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157795110">(Feb 07 2019 at 17:27)</a>:</h4>
<p>The client time zone (app) is also important for narratives and places where dates are calculated by the server for display/"localization"</p>



<a name="157795187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157795187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157795187">(Feb 07 2019 at 17:28)</a>:</h4>
<p>So, Facility time zone, patient time zone (may be the same as facility if the patient is at the site), client time zone/app time zone</p>



<a name="157795225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157795225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157795225">(Feb 07 2019 at 17:29)</a>:</h4>
<p>I feel like app comes into play as well for the timeless searches on date... the spec right now says the server will use local, but I think that's really surprising/apps don't think of it that way</p>



<a name="157795268"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157795268" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jenni Syed <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157795268">(Feb 07 2019 at 17:29)</a>:</h4>
<p>And when your server is cloud or has multiple timezones in a single instance... that you're searching over, it gets even more confusing</p>



<a name="157798949"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157798949" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157798949">(Feb 07 2019 at 18:16)</a>:</h4>
<p>Ah, I hadn't thought about display localization, <span class="user-mention" data-user-id="191356">@Jenni Syed</span> .</p>



<a name="157799150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157799150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157799150">(Feb 07 2019 at 18:18)</a>:</h4>
<p>What I was getting at above is that knowing the time zone of the client doesn't address any of the cases <span class="user-mention" data-user-id="191359">@Bryn Rhodes</span> and <span class="user-mention" data-user-id="194183">@John Silva</span> gave above.</p>



<a name="157801032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157801032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Silva <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157801032">(Feb 07 2019 at 18:39)</a>:</h4>
<p>Yes, I think both server and client side time zone information is necessary in certain use cases.  </p>
<p>Another related question; how do you store the times on the server (e.g. effectiveDateTime)?   If we store it "normalized to Zulu/UTC", then we handle the 'instance in time" and help with the problem with the spring forward/fall back issues but lose track of the local time that the event occurred.  Take a simple example,  if a baby was born at 12:01AM local time their birthday would be that date, but if someone looks at this date/time in UTC how would they know?  (Yes, that's why Patient.birthDate is only date but there are cases we need to record birth date and time, e.g. to distinguish multiples, neonates where time is very important, etc.)   Also, in the previous example, what would the remote doctor expect to see for I/O data or radiology reports that were stored in another time zone yet being shown on their client display?   (think about the added problem if this is historical data and the time zone information changed since the data was recorded.)</p>



<a name="157816486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157816486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157816486">(Feb 07 2019 at 21:59)</a>:</h4>
<p>The other use case is a location or healthcare services opening hours.<br>
As <span class="user-mention" data-user-id="191936">@Michael Donnelly</span> pointed out it's basically the timezone of the location (and is what we've done calculations from in the past where no info is available). This zone is on time (no date) as the datetime is generated for each day as needed.</p>



<a name="157816748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157816748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157816748">(Feb 07 2019 at 22:02)</a>:</h4>
<p>And as everyone here have pointed out, there are many considerations at play, the local app/browser zone is just one of them, and can play a part in formatting a display for the user.</p>



<a name="157835904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157835904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157835904">(Feb 08 2019 at 04:52)</a>:</h4>
<p>agree that the thing that matter is the timezone of the user of the client; generally, we've been conflating those but it's not always the same</p>



<a name="157835906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Client%20Timezone/near/157835906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Client.20Timezone.html#157835906">(Feb 08 2019 at 04:52)</a>:</h4>
<p>on my server, I store as received, but index on UTC</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
