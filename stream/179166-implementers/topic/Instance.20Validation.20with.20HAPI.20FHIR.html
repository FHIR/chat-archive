---
layout: page
title: "FHIR Chat  · Instance Validation with HAPI FHIR · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html">Instance Validation with HAPI FHIR</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="224503544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224503544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Claude Nanjo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224503544">(Jan 29 2021 at 17:10)</a>:</h4>
<p>Hello folks, does anyone have experience validating a FHIR instance (say a specific patient) against a 'home-made' (not US Core) profile programmatically (not via CLI)? If so, would you be able to share a code snippet on how to do that? I was hoping there would be a method such as validator.validate(myInstance, myProfile) or validator.validate(myInstance, myProfileURL) and if the latter, a way to register the profile with the FHIR context. Thank you!</p>



<a name="224540378"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224540378" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224540378">(Jan 29 2021 at 22:03)</a>:</h4>
<p><span class="user-mention" data-user-id="248736">@Mark Iantorno</span></p>



<a name="224540447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224540447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224540447">(Jan 29 2021 at 22:03)</a>:</h4>
<p>hey</p>



<a name="224540639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224540639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224540639">(Jan 29 2021 at 22:04)</a>:</h4>
<p>What do you mean by "validate a FHIR resource programmatically" and not via the cli</p>



<a name="224540674"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224540674" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224540674">(Jan 29 2021 at 22:04)</a>:</h4>
<p>Validating a resource is huge</p>



<a name="224540762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224540762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224540762">(Jan 29 2021 at 22:04)</a>:</h4>
<p>Like...I can point you to the repository in GitHub where that code lives, but it is 100k+ lines of code</p>



<a name="224540784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224540784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224540784">(Jan 29 2021 at 22:04)</a>:</h4>
<p>I presume "how do you trigger validation from code" - is there documentation about how to instantiate the ValidationEngine and then trigger validation of an instance?</p>



<a name="224540796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224540796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224540796">(Jan 29 2021 at 22:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191703">@Claude Nanjo</span></p>



<a name="224540864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224540864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224540864">(Jan 29 2021 at 22:05)</a>:</h4>
<p>There is not documentation on that</p>



<a name="224540956"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224540956" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224540956">(Jan 29 2021 at 22:05)</a>:</h4>
<p>you would have to clone the repository and the write the call the method in the validation package</p>



<a name="224541074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224541074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224541074">(Jan 29 2021 at 22:06)</a>:</h4>
<p>I do this in the soon to be a real tool validation website, I can point you to that repo</p>



<a name="224541143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224541143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224541143">(Jan 29 2021 at 22:06)</a>:</h4>
<p><a href="https://github.com/hapifhir/org.hl7.fhir.validator-wrapper">https://github.com/hapifhir/org.hl7.fhir.validator-wrapper</a> is the project</p>



<a name="224541362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224541362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224541362">(Jan 29 2021 at 22:07)</a>:</h4>
<p>If you look at this class here: <a href="https://github.com/hapifhir/org.hl7.fhir.validator-wrapper/blob/master/src/jvmMain/kotlin/routes/ValidationRoutes.kt">https://github.com/hapifhir/org.hl7.fhir.validator-wrapper/blob/master/src/jvmMain/kotlin/routes/ValidationRoutes.kt</a></p>



<a name="224541546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224541546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224541546">(Jan 29 2021 at 22:08)</a>:</h4>
<p>I create something called a ValidationRequest (<a href="https://github.com/hapifhir/org.hl7.fhir.validator-wrapper/blob/master/src/commonMain/kotlin/model/ValidationRequest.kt">https://github.com/hapifhir/org.hl7.fhir.validator-wrapper/blob/master/src/commonMain/kotlin/model/ValidationRequest.kt</a>) and then send it to the Validator</p>



<a name="224541633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224541633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224541633">(Jan 29 2021 at 22:09)</a>:</h4>
<p>it contains the Validation CliContext, in addition to the list of files that need to be validated</p>



<a name="224541687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224541687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224541687">(Jan 29 2021 at 22:09)</a>:</h4>
<p>The CliContext contains all the information that a request for validation takes in</p>



<a name="224541746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224541746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224541746">(Jan 29 2021 at 22:09)</a>:</h4>
<p>it's named CliContext because I originally refactored it when only the Cli existed</p>



<a name="224541879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224541879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224541879">(Jan 29 2021 at 22:10)</a>:</h4>
<p>Take a look at that code, it should give you a starting point, but if you have other questions, let me know</p>



<a name="224543379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224543379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224543379">(Jan 29 2021 at 22:17)</a>:</h4>
<p>Also, in the core libs the ValidationService class is here: <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.validation/src/main/java/org/hl7/fhir/validation/cli/services/ValidationService.java">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.validation/src/main/java/org/hl7/fhir/validation/cli/services/ValidationService.java</a></p>



<a name="224544310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224544310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Claude Nanjo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224544310">(Jan 29 2021 at 22:26)</a>:</h4>
<p>James responded to my enquiry with the following recommendation which we are trying now:</p>
<p>There is an example of how to supply custom definitions to the validator here: <a href="https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#recipe-supplying-custom-definitions">https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html#recipe-supplying-custom-definitions</a></p>
<p>This example is actually a bit out of date, a new version is about to get pushed. You'll want to add the following two lines as well:<br>
// This module supplies several code systems that are commonly used in validation<br>
supportChain.addValidationSupport(new CommonCodeSystemsTerminologyService(ctx));</p>
<p>// This module implements terminology services for in-memory code validation<br>
supportChain.addValidationSupport(new InMemoryTerminologyServerValidationSupport(ctx));</p>



<a name="224544410"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224544410" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224544410">(Jan 29 2021 at 22:27)</a>:</h4>
<p>So, just keep in mind that the HAPI validator does not align 100% with the core validator</p>



<a name="224544412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224544412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224544412">(Jan 29 2021 at 22:27)</a>:</h4>
<p>your results may vary</p>



<a name="224544496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224544496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224544496">(Jan 29 2021 at 22:28)</a>:</h4>
<p>So, you may have a resource that passes in HAPI but when run through the core validator, it fails</p>



<a name="224544508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224544508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224544508">(Jan 29 2021 at 22:28)</a>:</h4>
<p>or the other way around</p>



<a name="224544528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224544528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mark Iantorno <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224544528">(Jan 29 2021 at 22:28)</a>:</h4>
<p>but they are _mostly_ aligned</p>



<a name="224544532"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224544532" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Claude Nanjo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224544532">(Jan 29 2021 at 22:28)</a>:</h4>
<p>Thank you Mark. Sounds good. At some point, hopefully the two will converge.</p>



<a name="224544561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224544561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Claude Nanjo <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224544561">(Jan 29 2021 at 22:29)</a>:</h4>
<p>I will post our code once we verify it works for others who need to do the same thing.</p>



<a name="224589315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Instance%20Validation%20with%20HAPI%20FHIR/near/224589315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Instance.20Validation.20with.20HAPI.20FHIR.html#224589315">(Jan 30 2021 at 15:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191703">@Claude Nanjo</span> on the server se we implemented on top of hapi-fhir a $validate operation for both approaches and I think it might work similiar on the client side 1) hapi-fhir: <a href="https://github.com/ahdis/hapi-fhir-jpaserver-validator/blob/530/src/main/java/ch/ahdis/fhir/hapi/jpa/validation/ValidationProvider.java">https://github.com/ahdis/hapi-fhir-jpaserver-validator/blob/530/src/main/java/ch/ahdis/fhir/hapi/jpa/validation/ValidationProvider.java</a> and 2) hapi-fhir but using directly the core validator: <a href="https://github.com/ahdis/matchbox/blob/master/src/main/java/ch/ahdis/matchbox/validation/ValidationProvider.java">https://github.com/ahdis/matchbox/blob/master/src/main/java/ch/ahdis/matchbox/validation/ValidationProvider.java</a>. <span class="user-mention" data-user-id="248736">@Mark Iantorno</span> <span class="user-mention" data-user-id="191319">@James Agnew</span> happy to provide a pull request on the base hapi-fhir implementation if this would be something of interest to you to add $valdiate operation (it is not 100% spec conform because it is on the root of the server and not on the resource).</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
