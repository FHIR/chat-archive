---
layout: page
title: "FHIR Chat  · de-containment · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html">de-containment</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="223868306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/223868306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#223868306">(Jan 25 2021 at 08:45)</a>:</h4>
<p>Assuming one has a FHIR server that natively supports FHIR resources: if such a server is "updated' (by whatever FHIR-based method), when would one choose to 'de-contain' any contained resources? (A) If a contained resource (in the inbound data) already exists on the server (=can somehow be merged with an existing stand alone resource), (B) if the contained resource can be matched with some master data registry on some other FHIR server, .. any other footnotes / comments on a scenario like this ?</p>



<a name="223877713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/223877713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lin Zhang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#223877713">(Jan 25 2021 at 10:22)</a>:</h4>
<p>Good Question!</p>



<a name="223893697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/223893697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#223893697">(Jan 25 2021 at 13:07)</a>:</h4>
<p>Somehow "never" seems to be at the  top of the list of answers I can come up with...</p>



<a name="223893933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/223893933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#223893933">(Jan 25 2021 at 13:09)</a>:</h4>
<p>Interesting - why?</p>



<a name="223896971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/223896971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#223896971">(Jan 25 2021 at 13:33)</a>:</h4>
<p>I think because it introduces non-determinism - at one point I get a resource with contained content, at a later point that disappears. I think there are a lot of questions that need to be answered before a more concrete response can emerge, for example, how does the data get in the FHIR server? Is the use of contained resource profiled in an implementations guide? etc.</p>



<a name="223897496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/223897496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#223897496">(Jan 25 2021 at 13:38)</a>:</h4>
<p>Hmm - yes, as always there are caveats. However, generally speaking, de-containing contained resources sounds like the proper thing to do, for it enhances referential integrity between resources, and in terms of 'data quality management' in helps to increase the overall quality and consistency of the data.</p>



<a name="223912869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/223912869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#223912869">(Jan 25 2021 at 15:31)</a>:</h4>
<p>A client can't ever have any expectation for de-containment.  And typically there shouldn't be enough identifiable information in the contained resource to allow decontainment - if there is, it likely shouldn't have been contained in the first place.  Containment should <em>never</em> be used as a mechanism to allow posting a single resource instead of multiple.  If you want to do that, use transaction.</p>



<a name="223913022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/223913022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#223913022">(Jan 25 2021 at 15:32)</a>:</h4>
<p>If the sender sends something as contained, they're saying "this contained resource doesn't have any independent identity or relevance outside the scope of the containing resource".  Ignoring that assertion is risky</p>



<a name="224015004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/224015004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#224015004">(Jan 26 2021 at 09:31)</a>:</h4>
<p>I'm aware it's risky - but I'm also aware that clients may not play by the FHIR rules and contain things that shouldn't have been contained. Or rather: which in the limited scope of the client make sense to be contained, but which in the extended/larger scope of an EHR don't make sense to be contained.</p>



<a name="224016293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/224016293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Detlef Kraska <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#224016293">(Jan 26 2021 at 09:45)</a>:</h4>
<p>We had a similar discussion at our site when we talked about merging patient ressources from two different source systems in one FHIR server. Both systems use the same patient ID, but different FHIR profiles with different extensions for the patient ressource. To perform such a merge, you need business logic that is aware of the profiles and the context. I don't think a FHIR server can handle this on its own.</p>



<a name="224046501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/224046501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#224046501">(Jan 26 2021 at 14:31)</a>:</h4>
<p>Servers have full flexibility to do what they like with requests.  They can throw data away, supplement it, change it.  The key here is that the client can't have expectations about what's going to happen.  If a client says "I'm going to contain this resource for convenience and expect the server to un-contain it", that's non-conformant.  If a server says "this thing that you thought wasn't identifiable and had no independent existence, I <em>can</em> identify and choose to treat as independent", that's legitimate, though tricky.  It may make subsequent updates from that client harder or impossible.</p>



<a name="224047854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/224047854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#224047854">(Jan 26 2021 at 14:41)</a>:</h4>
<p>My point is, that if a server has the capabilities and logic to support it, it's (in general) <strong>desirable</strong> to de-contain, or to merge, given that this raises the overall quality level of your data. Would you agree with that statement ?</p>



<a name="224048730"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/224048730" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#224048730">(Jan 26 2021 at 14:47)</a>:</h4>
<p>I think it's use-case specific.  If I receive two patient records that I think are talking about the same individual, there are times when merging them is totally appropriate.  In other cases, I may very well want them kept separate - for privacy or other reasons.</p>



<a name="224062660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/224062660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#224062660">(Jan 26 2021 at 16:15)</a>:</h4>
<p>one specific use of containment that IHE leverages is within MHD/XDS to persist the patient demographics "at the time the document was published". There is a link to a managed Patient, that is expected to evolve with the patient demographics changes. The contained source patient information is explicitly contained so as to NOT be changed. Thus it represents the patient "as known" by the publisher of the document at the time the document was published.</p>



<a name="224063056"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/224063056" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#224063056">(Jan 26 2021 at 16:18)</a>:</h4>
<p>another I have seen is when there is supporting information, like Location, but where the data entered is not sufficient to match a managed supporting information....</p>



<a name="224063161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/224063161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#224063161">(Jan 26 2021 at 16:19)</a>:</h4>
<p>but I do recognize that there might be use-cases where there is sufficient information to de-contain, and policy that supports de-containment.  right?</p>



<a name="224941906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/224941906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#224941906">(Feb 02 2021 at 21:48)</a>:</h4>
<p>it may be possible for a server to perform de-containment. The grounds on which this would be possible are that the server has access to business logic - specifically, statements about uniqueness that can be verified against some repository - that the client does not.</p>



<a name="237255900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/237255900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Lamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#237255900">(May 04 2021 at 01:33)</a>:</h4>
<p>I'd like some clarification on something. If a server de-contains a POSTed resource within a transaction, then there is an extra resource. I'm assuming we would definitely want to keep the 1-1 correspondence between entries in the request and entries in the response, so a server should not (shall not?) add an extra 201 to the response entries.</p>



<a name="237261115"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/237261115" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#237261115">(May 04 2021 at 02:51)</a>:</h4>
<p>not, it can't. Like it couldn't if it was posted directly.</p>



<a name="237262546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/237262546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joe Lamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#237262546">(May 04 2021 at 03:16)</a>:</h4>
<p>Perfect, thanks.</p>



<a name="237263449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/de-containment/near/237263449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/de-containment.html#237263449">(May 04 2021 at 03:33)</a>:</h4>
<p>The base resource would just change the reference.  The client would have to resolve the reference to see what the de-contained resource had been resolved to.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
