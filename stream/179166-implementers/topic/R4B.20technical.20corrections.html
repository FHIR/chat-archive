---
layout: page
title: "FHIR Chat  · R4B technical corrections · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html">R4B technical corrections</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="267673341"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267673341" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267673341">(Jan 12 2022 at 01:51)</a>:</h4>
<p>R4B is going out the door with a number of technical corrections to the published R4 (4.0.1) version of the specification, but its bumping the version number to 4.3.0.</p>
<p>When we went 4.0.0 to 4.0.1 it was clear to me that all servers are expected to go to 4.0.1 and the transition was mostly invisible to clients because the <code>fhirVersion</code> for both releases was "4.0" (the advantage of omitting that last release digit at <a href="https://hl7.org/fhir/R4/versioning.html#mt-version">https://hl7.org/fhir/R4/versioning.html#mt-version</a>).</p>
<p>Now that we have the technical corrections going out in a "minor" release (or whatever hl7 calls that second number), the expectations are less clear to me.</p>
<p>For example, for some of the fhirpath constraint updates, would a server that enforces the (technically incorrect) 4.0.1 version of those constraints continue to be deemed conformant after 4.3.0 is published?<br>
Would a 4.0.1 implementation that uses the fixed/corrected 4.3.0 version of those constraints (while claiming it support version 4.0.1) be conformant?<br>
Is one more "right" than the other?</p>



<a name="267679992"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267679992" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267679992">(Jan 12 2022 at 03:56)</a>:</h4>
<p>Because there are some 'breaking' changes to certain resources and some internal architecture changes that impact servers, it's a more significant resources than just a 4.0.2.  We'd <em>like</em> everyone just just move to it like they did to 4.0.1, but no guarantees that will actually happen.</p>



<a name="267717291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267717291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267717291">(Jan 12 2022 at 12:33)</a>:</h4>
<p>Yeah, I was surprised by the limited number of systems (and test tools) at connectathon for R4B given that its so close to publication.<br>
We have a project where the new medication stuff is needed. Our current thinking is to update whole-sale (moving all 4.0.1 users to 4.3.0) and serving it from the same endpoints we had the 4.0.1 impl on (minus the resource types that got removed).<br>
However, since so many clients are using 4.0.1, I want to continue supporting requests that use a fhirVersion mime type attribute of 4.0 ...but still validate those against 4.3.0 instead of 4.0.1 so that we have consistency in the data.</p>



<a name="267717330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267717330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267717330">(Jan 12 2022 at 12:33)</a>:</h4>
<p>Its <em>mostly</em> backwards compatible, so this seems reasonable to me.  The only resource type where I think it could pose a major issue is Substance.  That was maturity level 2 in 4.0.1 but got reworked for 4.3.0.</p>



<a name="267717581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267717581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267717581">(Jan 12 2022 at 12:36)</a>:</h4>
<p>I found it interesting that Grahame took a different approach on his server and gave r4b its own separate endpoint.</p>



<a name="267717832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267717832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267717832">(Jan 12 2022 at 12:39)</a>:</h4>
<p>personally, I feel like we should maybe do more to encourage servers to at least backport the technical corrections to their R4 impls if they aren't planning to upgrade to R4B... although I think it would be easier if folks just moved to 4.3.0</p>



<a name="267760928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267760928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267760928">(Jan 12 2022 at 17:51)</a>:</h4>
<p>I have no choice but to put it on a separate end-point since some resources have changed. but it's useful for me to do so, since people can take an R4 client and point it at R4B and see that it works</p>



<a name="267779807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267779807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267779807">(Jan 12 2022 at 20:14)</a>:</h4>
<p>Back-porting R4B technical corrections to R4 is likely to cause a lot of pain though! This is where the "promise" of R4B is turning out not to quite fit reality; for most developers they'll need to treat it like a major release, in practice.</p>



<a name="267779825"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267779825" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267779825">(Jan 12 2022 at 20:14)</a>:</h4>
<p>(I wonder if we shouldn't just call it R5 given what we know today ;-))</p>



<a name="267781763"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267781763" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267781763">(Jan 12 2022 at 20:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191315">Josh Mandel</span> <a href="#narrow/stream/179166-implementers/topic/R4B.20technical.20corrections/near/267779825">said</a>:</p>
<blockquote>
<p>(I wonder if we shouldn't just call it R5 given what we know today ;-))</p>
</blockquote>
<p>I'm intrigued by that comment - any further details?</p>



<a name="267786961"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267786961" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267786961">(Jan 12 2022 at 21:12)</a>:</h4>
<p>Just from the perspective of deployed server and client infrastructure, library availability, etc. We're talking about changes that may not be formally "breaking" from an HL7  perspective but that will nevertheless cause developers to have to rewrite code.</p>



<a name="267787399"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267787399" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267787399">(Jan 12 2022 at 21:16)</a>:</h4>
<p>Thanks. It will be interesting to see how many errors my IDE reports when I switch to the R4B version of the C# reference library!</p>



<a name="267787411"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267787411" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267787411">(Jan 12 2022 at 21:16)</a>:</h4>
<p>it might be one of those things that seems worse in principal than in reality.  the reason i want to support R4B in-place is to <em>avoid</em> all the pains of a major update (e.g. data migration and the like).  its <em>so close</em> to backwards compatible, that I'm hoping none of our existing users would even notice.</p>



<a name="267787428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267787428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267787428">(Jan 12 2022 at 21:16)</a>:</h4>
<p>the big question for me is "is anyone using Substance" :-)</p>



<a name="267787606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267787606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267787606">(Jan 12 2022 at 21:18)</a>:</h4>
<p>right now, one of the biggest issues to this "in practice" (at least in my mind) is that our CapabilityStatement won't even be parsable to R4 clients if we say we're supporting 4.3.0</p>



<a name="267787622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267787622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267787622">(Jan 12 2022 at 21:18)</a>:</h4>
<p>so i'm worried they won't even try (even though it <em>would</em> work if they did)</p>



<a name="267787631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267787631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267787631">(Jan 12 2022 at 21:18)</a>:</h4>
<p>this is what i hit with the touchstone tool for example</p>



<a name="267787784"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267787784" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267787784">(Jan 12 2022 at 21:20)</a>:</h4>
<p>so what I'm playing with now is returning an R4 flavor of the CapabilityStatement that we can return for clients that pass a hint that they're using R4 (e.g. by passing the mime type parametert <code>fhirVersion=4.0.1</code>).  in this flavor, i omit any of the new resource types (and Substance) and we just advertise the capability that we have that is almost exactly equal to R4 behavior (aside from technical corrections)</p>



<a name="267787848"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267787848" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267787848">(Jan 12 2022 at 21:20)</a>:</h4>
<p>or, if we find this issue prevents R4 clients from working with us, maybe we'll serve that one UNLESS they indicate <code>fhirVersion=4.3.0</code></p>



<a name="267788528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267788528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267788528">(Jan 12 2022 at 21:26)</a>:</h4>
<p>It really depends on what the system does.  If it's "generic", there's enough changes under the covers, it matters.  If you're an EHR, then it probably doesn't matter at all.</p>



<a name="267788708"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267788708" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267788708">(Jan 12 2022 at 21:28)</a>:</h4>
<p>Substance was changed based on a misunderstanding, and has been reverted in the build version on R4B.</p>



<a name="267789161"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267789161" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267789161">(Jan 12 2022 at 21:32)</a>:</h4>
<blockquote>
<p>Substance was changed based on a misunderstanding, and has been reverted in the build version on R4B.</p>
</blockquote>
<p>oh, thats very interesting...i definitely didn't know that.  is that recent?</p>



<a name="267789238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267789238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267789238">(Jan 12 2022 at 21:33)</a>:</h4>
<p>Not really no. Shortly after the ballot ended I think</p>



<a name="267789333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267789333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267789333">(Jan 12 2022 at 21:34)</a>:</h4>
<p>ok, great.  i thought i was basing that analysis off our model diff, but i guess that incorrect mental model i had was actually from the ballot overview then.  great.</p>



<a name="267789948"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267789948" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267789948">(Jan 12 2022 at 21:40)</a>:</h4>
<p>Other than that and the Medication Definition stuff that all got renamed I wonder what breaking changes there are at a "it won't accept my resource" level. I've seen some internal changes to base types and so on that would cause libraries to change.</p>



<a name="267790037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267790037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267790037">(Jan 12 2022 at 21:41)</a>:</h4>
<p>see my CapabilityStatement one above for my connectathon takeaway</p>



<a name="267790219"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267790219" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267790219">(Jan 12 2022 at 21:43)</a>:</h4>
<p>I'm not sure how big the issue will be in practice (so far i only tested with touchstone), but my theory is that the required bindings for CapabilityStatement.fhirVersion and CapabilityStatement.rest.resource.type will result in other clients with similar issues</p>



<a name="267790255"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267790255" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267790255">(Jan 12 2022 at 21:43)</a>:</h4>
<p>does anyone know if we ever considered reducing those to Extensible?</p>



<a name="267791329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267791329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Surprenant <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267791329">(Jan 12 2022 at 21:52)</a>:</h4>
<blockquote>
<p>I wonder what breaking changes there are at a "it won't accept my resource" level</p>
</blockquote>
<p>Also, if interested, my notes from my first pass of looking for "subtly breaking changes" is at <a href="#narrow/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/R4B.20questions.20.2F.20issues</a></p>
<p>For example, I called out the changes to these two valuesets there but hadn't yet pieced together this it might prevent R4 clients from parsing our CapabilityStatement.<br>
I also referenced the two constraint updates that caused breakage in our system tests (but not sure the chances of breakage for "real" resources).</p>



<a name="267832735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267832735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267832735">(Jan 13 2022 at 07:30)</a>:</h4>
<p>Outsider tongue in cheek comment: given that the US requires R4, I expect us to go from R4B all the way up to R4Z before we call something R5. But it's effectively still a major release for most implementers.</p>



<a name="267918127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/R4B%20technical%20corrections/near/267918127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/R4B.20technical.20corrections.html#267918127">(Jan 13 2022 at 19:27)</a>:</h4>
<p>I recognize that your comment was tongue in cheek, but to be clear, the US certification program  is pegged to FHIR 4.0.1  and updates need to go through the standards version advancement process, as far as I understand. There is no particular reason that changing a minor versus a major number would impact that process (again as far as I understand)</p>
<p><a href="https://www.law.cornell.edu/cfr/text/45/170.215">https://www.law.cornell.edu/cfr/text/45/170.215</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
