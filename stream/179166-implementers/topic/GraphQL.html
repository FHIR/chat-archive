---
layout: page
title: "FHIR Chat  · GraphQL · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html">GraphQL</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153811305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153811305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153811305">(Nov 29 2015 at 21:38)</a>:</h4>
<p>Just to fire discussion:</p>
<p><a href="https://github.com/facebook/graphql" target="_blank" title="https://github.com/facebook/graphql">https://github.com/facebook/graphql</a><br>
<a href="https://github.com/Netflix/falcor" target="_blank" title="https://github.com/Netflix/falcor">https://github.com/Netflix/falcor</a></p>
<p><a href="https://www.youtube.com/watch?v=ByNs9TG30E8" target="_blank" title="https://www.youtube.com/watch?v=ByNs9TG30E8">https://www.youtube.com/watch?v=ByNs9TG30E8</a></p>
<div class="message_inline_image"><a href="https://www.youtube.com/watch?v=ByNs9TG30E8" target="_blank" title="https://www.youtube.com/watch?v=ByNs9TG30E8"><img src="https://i.ytimg.com/vi/ByNs9TG30E8/default.jpg"></a></div>



<a name="153852165"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153852165" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Chavez Aguilar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153852165">(Oct 06 2016 at 16:58)</a>:</h4>
<p>Hi, I am wondering if the use of GraphQL - <a href="http://graphql.org" target="_blank" title="http://graphql.org">http://graphql.org</a>  is something that has been discussed in the past (in the context of FHIR), if not, who can  I contact to start a discussion about it?  (some part of the tech industry is moving wards this type of API)</p>



<a name="153852167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153852167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Martin Chavez Aguilar <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153852167">(Oct 06 2016 at 16:59)</a>:</h4>
<p>Hi, I am wondering if the use of GraphQL - <a href="http://graphql.org" target="_blank" title="http://graphql.org">http://graphql.org</a>  is something that has been discussed in the past (in the context of FHIR), if not, who can  I contact to start a discussion about it?  (some part of the tech industry is moving wards this type of API)</p>



<a name="153852173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153852173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153852173">(Oct 06 2016 at 18:43)</a>:</h4>
<p>looks interesting. this would be the place to ask</p>



<a name="153852437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153852437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rowan Foster <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153852437">(Oct 10 2016 at 00:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> did a prototype around this a while back<br>
<a href="https://github.com/FHIR-CN/gra-fhir-ql" target="_blank" title="https://github.com/FHIR-CN/gra-fhir-ql">https://github.com/FHIR-CN/gra-fhir-ql</a></p>



<a name="153852679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153852679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153852679">(Oct 12 2016 at 09:38)</a>:</h4>
<p>+1. Looks like it solves real world problems (we are analyzed couple of our current projects on FHIR). We are going to support GraphQL in aidbox (after swagger:). In some way GraphQL is related to Compartments topic.</p>



<a name="153852729"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153852729" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Werner <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153852729">(Oct 12 2016 at 20:14)</a>:</h4>
<p><img alt=":heart:" class="emoji" src="/static/third/gemoji/images/emoji/heart.png" title=":heart:"> swagger</p>



<a name="153852765"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153852765" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153852765">(Oct 13 2016 at 04:02)</a>:</h4>
<p>Meteor is currently supporting GraphQL integration in Meteor apps via the Apollo database proxy; so Clinical Meteor currently has partial support for it.  We're waiting for GraphQL support in the Mongo shell before migrating the entire Clinical Meteor framework over to Apollo; but it's on the long term roadmap.  </p>



<a name="153890434"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890434" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890434">(May 18 2017 at 18:53)</a>:</h4>
<p>I've started working on a graphql processor in my server, with the aim of clarifying what we need to say in the FHIR spec about a standard way of using graphql with FHIR</p>



<a name="153890435"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890435" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890435">(May 18 2017 at 18:53)</a>:</h4>
<p>I'm creating this thread to discuss things as I go along. <span class="user-mention" data-user-id="191315">@Josh Mandel</span> at least is interested in this. </p>



<a name="153890436"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890436" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890436">(May 18 2017 at 18:54)</a>:</h4>
<p>let's start by how to invoke graphql... I think that it goes something like this:</p>



<a name="153890437"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890437" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890437">(May 18 2017 at 18:56)</a>:</h4>
<p>POST [base]/$graphql<br>
POST [base]/[Type]/$graphql<br>
POST [base]/[Type]/[id]/$graphql</p>



<a name="153890438"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890438" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890438">(May 18 2017 at 18:57)</a>:</h4>
<p>the nature of the queries/mutations supported depends on the scope at which it is implemented. e.g. if you invoke the graphql on an instance of a resource, the query has a known context and you don't specify a selection, where as if you invoke at a higher level, you have to provide a selection </p>



<a name="153890441"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890441" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890441">(May 18 2017 at 18:58)</a>:</h4>
<p>e.g. invoking at /Patient/example:</p>
<div class="codehilite"><pre><span></span>{
  active, name, address, dateOfBirth
}
</pre></div>



<a name="153890442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890442">(May 18 2017 at 18:59)</a>:</h4>
<p>but invoking at /Patient:</p>
<div class="codehilite"><pre><span></span>{
  Patient[id: example] { 
    active, name, aaddress, dateOfBirth
  }
}
</pre></div>



<a name="153890443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890443">(May 18 2017 at 19:00)</a>:</h4>
<p>also, let's, for now,  restrict ourselves only to queries, and get to talk about mutations later</p>



<a name="153890471"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890471" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890471">(May 18 2017 at 20:06)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="+1">:+1:</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> how do you deal with polymorphic elements and primitive extensions?</p>



<a name="153890474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890474">(May 18 2017 at 20:07)</a>:</h4>
<p>don't know. that's one of many questions to be resolved</p>



<a name="153890483"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890483" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890483">(May 18 2017 at 21:38)</a>:</h4>
<p>For polymorphic elements I'd consider just using the specified property names, like <code>valueString</code> or <code>valueCode</code> for <code>Observation.value[x]</code>. For references that can use &gt;1 type, I think we'd use object spreads like <code>... on Patient</code> or <code>... on Practitioner</code> to account for multiple possible types at a spot.</p>



<a name="153890484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890484">(May 18 2017 at 21:39)</a>:</h4>
<p>So for example I could query <code>/Patient/123/Procedure</code> with:</p>
<div class="codehilite"><pre><span></span>   Procedure {
        type {
          text
        }
        performer {
          actor {
            ... on Practitioner {
              name {
                given
              }
              identifier {
                system
                value
              }
            }
          }
        } 
      }
    }
</pre></div>



<a name="153890485"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890485" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890485">(May 18 2017 at 21:42)</a>:</h4>
<p>(deleted)</p>



<a name="153890488"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890488" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890488">(May 18 2017 at 23:59)</a>:</h4>
<p>note that Josh's example here autimatically walks across references. It's not clear that this is good for me - what does a server do with references that it can't resolve?</p>



<a name="153890490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890490">(May 19 2017 at 00:42)</a>:</h4>
<p>also, there's the question of whether it is good to support compartment queries like this, given that most servers are not supporting them</p>



<a name="153890508"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890508" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890508">(May 19 2017 at 09:50)</a>:</h4>
<p>So let's see if we can get consensus on something simple. Say I perform the following query: </p>
<div class="codehilite"><pre><span></span>POST [base]/Patient/example/$graphql

{
  identifier active name
}
</pre></div>



<a name="153890509"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890509" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890509">(May 19 2017 at 09:51)</a>:</h4>
<p>then the correct response is </p>
<div class="codehilite"><pre><span></span>{
  &quot;identifier&quot;: [
    {
      &quot;use&quot;: &quot;usual&quot;,
      &quot;type&quot;: {
        &quot;coding&quot;: [
          {
            &quot;system&quot;: &quot;http://hl7.org/fhir/v2/0203&quot;,
            &quot;code&quot;: &quot;MR&quot;
          }
        ]
      },
      &quot;system&quot;: &quot;urn:oid:1.2.36.146.595.217.0.1&quot;,
      &quot;value&quot;: &quot;12345&quot;,
      &quot;period&quot;: {
        &quot;start&quot;: &quot;2001-05-06&quot;
      },
      &quot;assigner&quot;: {
        &quot;display&quot;: &quot;Acme Healthcare&quot;
      }
    }
  ],
  &quot;active&quot;: true,
  &quot;name&quot;: [
    {
      &quot;use&quot;: &quot;official&quot;,
      &quot;family&quot;: &quot;Chalmers&quot;,
      &quot;given&quot;: [
        &quot;Peter&quot;,
        &quot;James&quot;
      ]
    },
    {
      &quot;use&quot;: &quot;usual&quot;,
      &quot;given&quot;: [
        &quot;Jim&quot;
      ]
    },
    {
      &quot;use&quot;: &quot;maiden&quot;,
      &quot;family&quot;: &quot;Windsor&quot;,
      &quot;given&quot;: [
        &quot;Peter&quot;,
        &quot;James&quot;
      ],
      &quot;period&quot;: {
        &quot;end&quot;: &quot;2002&quot;
      }
    }
  ]
}
</pre></div>



<a name="153890510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890510">(May 19 2017 at 09:51)</a>:</h4>
<p>anyone disagree with that?</p>



<a name="153890511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890511">(May 19 2017 at 10:07)</a>:</h4>
<p>less obvious question: is it relevant to talk about xml or turtle responses to graphQL?</p>



<a name="153890512"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890512" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890512">(May 19 2017 at 11:54)</a>:</h4>
<p>hmm no. fields must represent primitive values...</p>



<a name="153890513"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890513" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890513">(May 19 2017 at 12:07)</a>:</h4>
<p>does anyone know what this, in the GraphQL spec means?</p>
<div class="codehilite"><pre><span></span>Serialization formats which can only represent unordered maps should retain this order grammatically (such as JSON).
</pre></div>



<a name="153890519"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890519" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Moehrke <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890519">(May 19 2017 at 13:16)</a>:</h4>
<p>Might this be a good solution for more complex Privacy Consent rules? That is to support cases where the patient wants to blind a specific type of clinical condition, or specific episode, etc? I would like if the Consent resource could be more simple, and leverage a construct that is designed to do complex selection for more complex privacy needs.</p>



<a name="153890544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890544">(May 19 2017 at 17:34)</a>:</h4>
<p>I'm not sure how a query format would solve consent problems. I'm looking forward to it making things worse :-(</p>



<a name="153890549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890549">(May 19 2017 at 18:32)</a>:</h4>
<p>Have you all taken a look at Mostafa Sholkamy's gql-fhir tool?  It uses the Apollo graphQL libraries, which I can attest are getting very good attention and work on.  <br>
<a href="https://github.com/shalkam/gql-fhir/tree/master" target="_blank" title="https://github.com/shalkam/gql-fhir/tree/master">https://github.com/shalkam/gql-fhir/tree/master</a></p>



<a name="153890551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890551">(May 19 2017 at 19:00)</a>:</h4>
<p>hadn't seen it before. <span class="user-mention" data-user-id="193512">@Mostafa Sholkamy</span> are you tracking this topic?</p>



<a name="153890575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890575">(May 19 2017 at 22:37)</a>:</h4>
<p>In the bigger picture context?  Could this replace parts of the FHIR API (  specifically _query  ) in R4 or is it a supplementary piece that is outside of the FHIR specification.</p>



<a name="153890579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890579">(May 20 2017 at 00:47)</a>:</h4>
<p>_query is designed to provide more expressive ways of matching resources in a query; graphql is more focused on describing what properties to return and what links to follow from the resources that match (though there is certainly some overlap). </p>



<a name="153890580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890580">(May 20 2017 at 01:34)</a>:</h4>
<p>Hi,<br>
First let's talk about GraphQL for little.<br>
Now for developers building new APIs,  using REST style API - I can say - is no longer a thing<br>
<a href="http://nordicapis.com/is-graphql-the-end-of-rest-style-apis/" target="_blank" title="http://nordicapis.com/is-graphql-the-end-of-rest-style-apis/">http://nordicapis.com/is-graphql-the-end-of-rest-style-apis/</a> </p>
<p>Currently to develop a FHIR app using GraphQL will make it automatically non compliant with the FHIR specs.<br>
FHIR is adopting RESTful style API with a HTTP endpoint for each resource because it was a standard way in the industry to APIs back then.<br>
Of course that was before GraphQL come into the play, as oppose to REST; GraphQL is all about having a single HTTP endpoint for all your requests to save user having multiple round trips to get the data he wants.<br>
You can imagine it like writing a MYSQL query against a database except that it is using GraphQL query language and it sends the query string over HTTP.<br>
So doing something like this :<br>
POST [base]/$graphql<br>
POST [base]/[Type]/$graphql<br>
POST [base]/[Type]/[id]/$graphql</p>
<p>is not okay or necessary according to GraphQL standards ( it's all about a single HTTP endpoint )</p>
<p>Now I will talk about my project a little bit, how I am implementing GraphQL for FHIR.<br>
I am using my own JSON <a href="https://github.com/shalkam/gql-fhir/blob/master/src/data/fhir/helpers/gql-schema/index.js" target="_blank" title="https://github.com/shalkam/gql-fhir/blob/master/src/data/fhir/helpers/gql-schema/index.js">parser</a> - not complete yet -to convert Structure definitions into a GraphQL <a href="https://github.com/shalkam/gql-fhir/blob/master/src/data/schema.graphql" target="_blank" title="https://github.com/shalkam/gql-fhir/blob/master/src/data/schema.graphql">schema</a>.</p>
<p>What my project does:<br>
- It can handle all the CRUD operations for the supported resouces.</p>
<p>What my project does not:<br>
- Because of my lack of understanding for FHIR - especially the infrastructure part - it doesn't handle searches, bundles and conformance stuff I can say the whole infrastructure part is yet to be done.</p>
<p>Looking forward to knowing your thoughts about this.</p>
<p>Regards,<br>
Mostafa</p>



<a name="153890581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890581">(May 20 2017 at 01:54)</a>:</h4>
<p>I thought that Graphql returns only properties from resources and not the entire resources and is a shortcut for _revinclude or _include or a _query.  E.g.,  I could get all the practitioner names for a patient A using something like this...</p>



<a name="153890582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890582">(May 20 2017 at 01:54)</a>:</h4>
<p>{<br>
        Patient {<br>
          name<br>
          Practitioner{<br>
          name<br>
          }<br>
        }<br>
      }</p>
<div class="codehilite"><pre><span></span>    &quot;data&quot;: {
      &quot;Patient&quot;: {
        &quot;name&quot;: &quot;A&quot;,
        &quot;Practitioner&quot;: [
          {
            &quot;name&quot;: Dr X&quot;
          },
          {
           &quot;name&quot;: Dr Y&quot;
          },
          {
            &quot;name&quot;: &quot;Dr Z&quot;
          }
        ]
      }
    }
  }
</pre></div>



<a name="153890583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890583">(May 20 2017 at 02:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> GraphQL is all about getting the exact result a defined in the query string, it does not care about how we do it or what's going under the hood in the server</p>



<a name="153890584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890584">(May 20 2017 at 02:28)</a>:</h4>
<p>But the semantics of graphql require that you can define your "entry points" for a query and can start from the there, right <span class="user-mention" data-user-id="193512">@Mostafa Sholkamy</span>? For example, if I wanted to get a list of blood pressures and conditions for a given patient, this is readily expressed with graphql (well, if we assume what FHIR would call "reverse" relationships from Patient to Condition, and from Patient to Observation -- note that natively FHIR defines these relationships in the other direction, and we'll probably want to define both directions in a graphql mapping). But I can't use graphql to say "find me list of patients who have had an elevated blood pressure reading and also have a diagnosis of hypertension". In other words, it's not a graph search paradigm so much as filtered subgraph retrievable. Is that fair?</p>



<a name="153890586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890586">(May 20 2017 at 02:46)</a>:</h4>
<p>I think that there's 2 things at play here - one is using graphQL, and the other is changing your patterns. </p>



<a name="153890587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890587">(May 20 2017 at 02:47)</a>:</h4>
<p>These:</p>
<div class="codehilite"><pre><span></span>GET base/Patient/example/$graphql?q={name link active}
</pre></div>



<a name="153890588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890588">(May 20 2017 at 02:48)</a>:</h4>
<p>and</p>
<div class="codehilite"><pre><span></span>GET base/$graphql?q={Patient[id:example] {name link active}}
</pre></div>



<a name="153890589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890589">(May 20 2017 at 02:48)</a>:</h4>
<p>are synonymous. That doesn't mean that the first has no use, or that the second is going to replace RESTful URLs and make them redundant</p>



<a name="153890590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890590">(May 20 2017 at 02:50)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> you can use graphQL to say what you said, if we define it accordingly. But it's not inherent in graphql - it would be for us to define how that kind of search functionality is made available</p>



<a name="153890592"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890592" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890592">(May 20 2017 at 03:38)</a>:</h4>
<p>Do you mean by defining some clever set of arguments, in something akin to chained search? Like <code>Patient("_has:Procedure:patient.code":"123"){}</code>Sure, but I guess my point is is then it's not some new or newly-expressive graph-based model for query, it's just packing dots into a string argument. (Also graphql is nicely typed, which is awesome but I don't know if you can get this much flexibility without explicitly naming every allowed argument.)</p>



<a name="153890593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890593">(May 20 2017 at 03:41)</a>:</h4>
<p>Arguments within inner blocks don't change the behavior of the outer blocks, so you can't achieve this kind of query with nested graphql blocks.</p>



<a name="153890594"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890594" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890594">(May 20 2017 at 06:36)</a>:</h4>
<p>well, I was more thinking Patient(search: "[_filter string]") { fields..} where search is as specified here: <a href="http://hl7.org/fhir/search_filter.html" target="_blank" title="http://hl7.org/fhir/search_filter.html">http://hl7.org/fhir/search_filter.html</a></p>



<a name="153890604"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890604" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890604">(May 20 2017 at 14:03)</a>:</h4>
<p>for those tracking this discussion - I just created a first test case on this, in subversion - \build\tests\graphql.</p>



<a name="153890605"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890605" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890605">(May 20 2017 at 14:03)</a>:</h4>
<p>it says that if you execute this qraphql</p>
<div class="codehilite"><pre><span></span>{
  identifier { system value }
  active 
  name { text given family } 
}
</pre></div>



<a name="153890606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890606">(May 20 2017 at 14:03)</a>:</h4>
<p>against the resource context Patient/example (e.g. [base]/Patient/example/$graphql)</p>



<a name="153890607"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890607" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890607">(May 20 2017 at 14:04)</a>:</h4>
<p>then the correct output is</p>
<div class="codehilite"><pre><span></span>{
  &quot;identifier&quot;: [{
      &quot;system&quot;: &quot;urn:oid:1.2.36.146.595.217.0.1&quot;,
      &quot;value&quot;: &quot;12345&quot;
  }],
  &quot;active&quot;: true,
  &quot;name&quot;: [{
    &quot;given&quot;: [&quot;Peter&quot;,&quot;James&quot;],
    &quot;family&quot;: &quot;Chalmers&quot;
  },{
    &quot;given&quot;: [&quot;Jim&quot;]
  },{
    &quot;given&quot;: [&quot;Peter&quot;,&quot;James&quot;],
    &quot;family&quot;: &quot;Windsor&quot;
  }]
}
</pre></div>



<a name="153890608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890608">(May 20 2017 at 14:05)</a>:</h4>
<p>btw. I think that there's a pretty simple answer to the question of omitting mandatory attributes: the output of graphql is not expected to be resources, it's a view on them </p>



<a name="153890609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890609">(May 20 2017 at 14:06)</a>:</h4>
<p>can we all agree that if you execute this graphql against that resource, that's the correct outcome?</p>



<a name="153890610"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890610" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890610">(May 20 2017 at 14:11)</a>:</h4>
<p>if we can all agree to that, then the next things to work on are:<br>
- polymorphic fields <br>
- field filters and directives <br>
- extensions in primitive fields / schema reconciliation<br>
- forward reference resolution<br>
- searching resources (.e.g context [base]/$graphql)<br>
- backwards reference resolution<br>
- mutations<br>
(in that approximate order)</p>



<a name="153890612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890612">(May 20 2017 at 14:42)</a>:</h4>
<blockquote>
<p>well, I was more thinking Patient(search: "[_filter string]") { fields..} where search is as specified here: <a href="http://hl7.org/fhir/search_filter.html" target="_blank" title="http://hl7.org/fhir/search_filter.html">http://hl7.org/fhir/search_filter.html</a></p>
</blockquote>
<p>Sure. Again, just emphasizing that graphql doesn't provide a new model for graph <em>search</em>. It lets us use our existing models. </p>



<a name="153890613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890613">(May 20 2017 at 14:49)</a>:</h4>
<p>For forward reference resolution, I'd like to suggest that we just use a "resource" field within any reference, like <code>MedicationRequest { patient { resource {active} } }</code> -- this preserves access to the reference's display and value fields.</p>



<a name="153890614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890614">(May 20 2017 at 15:01)</a>:</h4>
<p>For reverse references, one option to consider is constructing names from "Source type" + underscore + "search parameter name". Like, to get conditions pointing to a patient, you might say <code>Patient { Condition_patient { id} }</code>. This feels a bit clumsy, but it's at least simple.</p>



<a name="153890615"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890615" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890615">(May 20 2017 at 15:09)</a>:</h4>
<p>If it were possible to refer to fields in a parent result, we could do something a bit cleaner like <code>Patient { Condition(patient: "$parent.id") { severity {text} }}</code>... but I don't think graphql defines something like this.</p>



<a name="153890616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890616">(May 20 2017 at 15:13)</a>:</h4>
<p>I guess we could just define things as working this way, with a magic "parent" variable or something like it (ideally, you'd be able to more precisely state which parent, with assigned variable names and stuff). But this kind of magic makes it hard to reuse existing graphql server support libraries...</p>



<a name="153890617"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890617" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890617">(May 20 2017 at 15:20)</a>:</h4>
<p>My preference would be the Condition_patient approach, which avoids blurring the boundary between references and arguments.</p>



<a name="153890621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890621">(May 20 2017 at 19:01)</a>:</h4>
<p>I don't understand anything from after you start talking about parent, but I agree with resource. This lets us do:</p>



<a name="153890622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890622">(May 20 2017 at 19:02)</a>:</h4>
<div class="codehilite"><pre><span></span>MedicationRequest { patient { resource(policy : error) {active} } }
</pre></div>



<a name="153890623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890623">(May 20 2017 at 19:02)</a>:</h4>
<p>or</p>
<div class="codehilite"><pre><span></span>MedicationRequest { patient { resource(policy : optional) {active} } }
</pre></div>



<a name="153890624"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890624" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890624">(May 20 2017 at 19:37)</a>:</h4>
<p>ok. so this graphQL:</p>
<div class="codehilite"><pre><span></span>{ 
  id
  subject { reference, resource {active} } 
  code {coding {system code} }
}
</pre></div>



<a name="153890625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890625">(May 20 2017 at 19:37)</a>:</h4>
<p>run in the context of Observation/example, gives this:</p>



<a name="153890626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890626">(May 20 2017 at 19:37)</a>:</h4>
<div class="codehilite"><pre><span></span>{
  &quot;id&quot; : &quot;example&quot;,
  &quot;subject&quot; : {
    &quot;reference&quot; : &quot;Patient/example&quot;,
    &quot;resource&quot; : {
      &quot;active&quot;: true
    }
  },
  &quot;code&quot;: {
    &quot;coding&quot;: [{
        &quot;system&quot;: &quot;http://loinc.org&quot;,
        &quot;code&quot;: &quot;29463-7&quot;
      },{
        &quot;system&quot;: &quot;http://loinc.org&quot;,
        &quot;code&quot;: &quot;3141-9&quot;
      },{
        &quot;system&quot;: &quot;http://snomed.info/sct&quot;,
        &quot;code&quot;: &quot;27113001&quot;
      },{
        &quot;system&quot;: &quot;http://acme.org/devices/clinical-codes&quot;,
        &quot;code&quot;: &quot;body-weight&quot;
      }]
  }
}
</pre></div>



<a name="153890633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890633">(May 20 2017 at 21:45)</a>:</h4>
<p>ok, static notes extracted from this thread: <a href="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL">http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL</a></p>



<a name="153890635"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890635" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890635">(May 20 2017 at 23:08)</a>:</h4>
<blockquote>
<p>I don't understand anything from after you start talking about parent</p>
</blockquote>
<p>Okay, how about before the stuff about "parent"? Thoughts on the <code>Condition_patient</code> notation?</p>



<a name="153890636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890636">(May 21 2017 at 03:31)</a>:</h4>
<p>I don't know what it's supposed to do. I think that the requirement is:<br>
- at this point in the graph, insert the list of resources that refer to this resource in property [x]</p>



<a name="153890637"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890637" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890637">(May 21 2017 at 03:42)</a>:</h4>
<p>That's close to how I'd describe the requirement, too. Only tweak I'd make is "insert the list of resources of type Y that refer to this resource via property X". So in my example, Y was "Condition" and X was the Condition's "patient" element acting as the source of the reference. I was suggesting we define a graphql field called "Condition_patient" to capture this relationship (would have preferred "Condition.patient", but <code>.</code> isn't valid) . Possibly we can further restrict X to "elements implicated by standard reference-type search parameters", which means we could use those search parameter names instead of having to point to arbitrary element paths.</p>



<a name="153890638"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890638" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890638">(May 21 2017 at 03:44)</a>:</h4>
<p>Also we should capture as an explicit goal: publishing a graphql schema for FHIR. This will make our design decisions explicit and easy to use from code. </p>



<a name="153890639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890639">(May 21 2017 at 03:54)</a>:</h4>
<p>I think search parameter names is correct. </p>



<a name="153890640"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890640" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890640">(May 21 2017 at 03:55)</a>:</h4>
<p>but I would have gone for something like this:</p>
<div class="codehilite"><pre><span></span>references(resource: Condition, parameter: patient) {
}
</pre></div>



<a name="153890641"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890641" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890641">(May 21 2017 at 03:55)</a>:</h4>
<p>instead of </p>
<div class="codehilite"><pre><span></span>Condition_patient {
}
</pre></div>



<a name="153890643"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890643" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890643">(May 21 2017 at 04:03)</a>:</h4>
<p>with regard to polymorphic types - there's kind of 2 ways to do it. Say we're dealing with Observation, and we want the value:</p>
<p>{<br>
  valueQuantity, valueCodeableConcept, valueString, valueBoolean, valueRange, valueRatio, valueSampledData, valueAttachment, valueTime, valueDateTime, valuePeriod<br>
}</p>



<a name="153890644"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890644" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890644">(May 21 2017 at 04:04)</a>:</h4>
<p>or we could go for <br>
{ <br>
  value<br>
}</p>



<a name="153890645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890645">(May 21 2017 at 04:05)</a>:</h4>
<p>actually, you can't. unless the types are all primitives - and I don't think that actually happens anywhere</p>



<a name="153890646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890646">(May 21 2017 at 04:06)</a>:</h4>
<p>you'd have to blow them out and specify their primitives, courtesy of GraphQL's rule about all leafs be scalars</p>



<a name="153890647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890647">(May 21 2017 at 04:23)</a>:</h4>
<p>so</p>
<div class="codehilite"><pre><span></span>{
  subject{reference}
  valueQuantity {value unit}
}
</pre></div>



<a name="153890648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890648">(May 21 2017 at 04:23)</a>:</h4>
<p>on Observation/example gives this:</p>
<div class="codehilite"><pre><span></span>{
  &quot;subject&quot; : {
    &quot;reference&quot; : &quot;Patient/example&quot;
  },
  &quot;valueQuantity&quot;: {
    &quot;value&quot;: 185,
    &quot;unit&quot;: &quot;lbs&quot;
  }
}
</pre></div>



<a name="153890649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890649">(May 21 2017 at 06:20)</a>:</h4>
<blockquote>
<p>can we all agree that if you execute this graphql against that resource, that's the correct outcome?</p>
</blockquote>
<p>Yes That is correct</p>



<a name="153890650"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890650" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890650">(May 21 2017 at 06:36)</a>:</h4>
<ul>
<li>searching resources <br>
I think we should create a filter type for each resource that uses search as defined here : <a href="http://hl7.org/fhir/search_filter.html" target="_blank" title="http://hl7.org/fhir/search_filter.html">http://hl7.org/fhir/search_filter.html</a><br>
and we can also create a resourceFilter interface that implements the common things when searching a resource.</li>
</ul>



<a name="153890652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890652">(May 21 2017 at 06:48)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> <br>
- references<br>
First thing I want to confirm that we all agree that we should add a <code>resource</code> field to the <code>Reference</code> element as that doesn't exist in FHIR specs<br>
<a href="http://hl7.org/fhir/references.html" target="_blank" title="http://hl7.org/fhir/references.html">http://hl7.org/fhir/references.html</a></p>
<p>Now that we have the <code>resource</code> field in hand it's pretty easy to resolve it.<br>
GraphQL has an interface type <a href="http://graphql.org/learn/schema/#interfaces" target="_blank" title="http://graphql.org/learn/schema/#interfaces">http://graphql.org/learn/schema/#interfaces</a> , So we can create a resource interface that has all the common fields for all resources then we can do something like this:</p>
<div class="codehilite"><pre><span></span>{
  id
  subject {
reference
resource {
    ...on Patient {
         birthDate
    }
    ...on Practioner {
           practitionerRole {  speciality }
   }
 }
  code {coding {system code} }
}
</pre></div>



<a name="153890654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890654">(May 21 2017 at 06:55)</a>:</h4>
<ul>
<li>extensions in primitive fields / schema reconciliation</li>
</ul>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  Could you explain more what do you mean by schema reconciliation?</p>
<p>I think there is no problem with extensions for primitive fields,the <code>_</code> prefix works just fine,  here is how I do it:<br>
first I define an element type </p>
<div class="codehilite"><pre><span></span># Base for all elements
type Element {
  id: ID
  extension: [Extension]
}
</pre></div>


<p>then use the element for the primitive field extension in <code>Address</code> type for example:</p>
<div class="codehilite"><pre><span></span># A postal address
type Address {
  id: ID
  extension: [Extension]
  use: String
  _use: Element
  type: String
  _type: Element
  text: String
  _text: Element
  line: [String]
  _line: Element
  city: String
  _city: Element
  district: String
  _district: Element
  state: String
  _state: Element
  postalCode: String
  _postalCode: Element
  country: String
  _country: Element
  period: Period
}
</pre></div>



<a name="153890655"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890655" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890655">(May 21 2017 at 07:31)</a>:</h4>
<p>so the question with extensions is whether graphql is specific to json, or more general. so far, all the discussion has been that it's a json only thing. that would make being explicit about the json representatation of extensions the right thing - which is what you've done</p>



<a name="153890656"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890656" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890656">(May 21 2017 at 07:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> that is correct GraphQL is for JSON only APIs</p>



<a name="153890658"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890658" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890658">(May 21 2017 at 09:43)</a>:</h4>
<p>that's not quite what the graphql spec says</p>



<a name="153890659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890659">(May 21 2017 at 10:12)</a>:</h4>
<p>the response is always json</p>



<a name="153890660"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890660" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890660">(May 21 2017 at 11:16)</a>:</h4>
<p>section 7.1: GraphQL does not require a specific serialization format. However, clients should use a serialization format that supports the major primitives in the GraphQL response</p>



<a name="153890661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890661">(May 21 2017 at 11:17)</a>:</h4>
<p>JSON is the preferred serialization format for GraphQL, though as noted above, GraphQL does not require a specific serialization format.</p>



<a name="153890663"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890663" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890663">(May 21 2017 at 13:04)</a>:</h4>
<p>it's the first time I see the this, but again I searched for any GraphQL server that supports anything other than JSON but I've found nothing</p>



<a name="153890664"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890664" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890664">(May 21 2017 at 16:08)</a>:</h4>
<p>yes that is certainly true</p>



<a name="153890665"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890665" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890665">(May 21 2017 at 16:08)</a>:</h4>
<p>I could be first ;-)</p>



<a name="153890671"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890671" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890671">(May 21 2017 at 19:09)</a>:</h4>
<p>back to extensions. Running this:</p>
<div class="codehilite"><pre><span></span>{
  subject { resource { birthDate } }
  subject { resource { _birthDate { extension {valueDateTime} } } }
}
</pre></div>



<a name="153890672"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890672" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890672">(May 21 2017 at 19:09)</a>:</h4>
<p>against Observation/20minute-apgar-score results in this output:</p>



<a name="153890673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890673">(May 21 2017 at 19:10)</a>:</h4>
<div class="codehilite"><pre><span></span>{
  &quot;subject&quot;: [{
    &quot;resource&quot;: {
      &quot;birthDate&quot;: &quot;2016-05-18&quot;
    }
  },{
    &quot;resource&quot;: {
      &quot;_birthDate&quot;: {
        &quot;extension&quot;:[{
            &quot;valueDateTime&quot;: &quot;2016-05-18T10:28:45Z&quot;
        }]
      }
    }
  }]
}
</pre></div>



<a name="153890675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890675">(May 21 2017 at 19:17)</a>:</h4>
<p>Well if I don't see a reason you should duplicate a fragment of the query twice, I think you would get an error with that.<br>
the correct one would look like that:</p>
<div class="codehilite"><pre><span></span>{
  subject { 
    resource { 
        birthDate
        _birthDate { 
            extension {
                valueDateTime
            }
         } 
    } 
   }
}
</pre></div>



<a name="153890676"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890676" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890676">(May 21 2017 at 19:24)</a>:</h4>
<p>oh -I was also testing that my processor handled that properly - as far as I can tell, the graphQL spec allows that. But I agree that the way you did it would be more natural</p>



<a name="153890677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890677">(May 21 2017 at 19:26)</a>:</h4>
<p>anyway, I've just set this live at <a href="http://test.fhir.org/r3" target="_blank" title="http://test.fhir.org/r3">http://test.fhir.org/r3</a> - so people can test it. Note that the server doesn't yet support root level query (only on resource instance) and it doesn't yet support anything on the todo list here: <a href="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL">http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL</a></p>



<a name="153890678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890678">(May 21 2017 at 19:27)</a>:</h4>
<p>one thing I haven't found in the graphql spec yet is how the client gets the schema... is it inline, or just doco?</p>



<a name="153890679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890679">(May 21 2017 at 19:29)</a>:</h4>
<p>e.g. <a href="http://test.fhir.org/r3/Observation/example/$graphql?query={%20id%20subject%20{%20reference,%20resource%20{active}%20}%20code%20{coding%20{system%20code}%20}}" target="_blank" title="http://test.fhir.org/r3/Observation/example/$graphql?query={%20id%20subject%20{%20reference,%20resource%20{active}%20}%20code%20{coding%20{system%20code}%20}}">http://test.fhir.org/r3/Observation/example/$graphql?query={%20id%20subject%20{%20reference,%20resource%20{active}%20}%20code%20{coding%20{system%20code}%20}}</a> btw</p>



<a name="153890681"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890681" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890681">(May 21 2017 at 19:40)</a>:</h4>
<blockquote>
<p>one thing I haven't found in the graphql spec yet is how the client gets the schema... is it inline, or just doco?</p>
</blockquote>
<p>Could you explain more what do you mean by that?</p>



<a name="153890682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890682">(May 21 2017 at 19:54)</a>:</h4>
<p>can the client actually ask the server for the schema? or does the server just have to publish it somewhere?</p>



<a name="153890683"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890683" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890683">(May 21 2017 at 19:58)</a>:</h4>
<p>hah - just found it - Schema Introspection.</p>



<a name="153890685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890685">(May 21 2017 at 20:11)</a>:</h4>
<p>yes, that is correct, this can also work as a sort of conformance statement if I understand it correctly</p>



<a name="153890686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890686">(May 21 2017 at 20:13)</a>:</h4>
<p>Good job with <a href="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL">http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL</a> <br>
I will go through it and I will give you my feedback on it</p>



<a name="153890687"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890687" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890687">(May 21 2017 at 20:28)</a>:</h4>
<p>As regard <strong> Data type mappings </strong> for primitive types<br>
In GraphQL you can create custom scalar types <a href="http://graphql.org/learn/schema/#scalar-types" target="_blank" title="http://graphql.org/learn/schema/#scalar-types">http://graphql.org/learn/schema/#scalar-types</a> <br>
In the GraphQL schema it's pretty easy you can just do something like:</p>
<div class="codehilite"><pre><span></span>scalar positiveInt
</pre></div>


<p>and the server determines how to deal with this scalar type, My project - it's using node.js -deals with it this way</p>
<div class="codehilite"><pre><span></span>import { GraphQLScalarType } from &#39;graphql&#39;;
import { GraphQLError } from &#39;graphql/error&#39;;
import { Kind } from &#39;graphql/language&#39;;

export default new GraphQLScalarType({
  name: &#39;positiveInt&#39;,
  description: &#39;an integer with value more than zero&#39;,
  serialize: value =&gt; {
    return value;
  },
  parseValue: value =&gt; {
    return value;
  },
  parseLiteral: ast =&gt; {
    if (ast.kind !== Kind.INT) {
      throw new GraphQLError(&#39;Query error: Can only parse integers got a: &#39; + ast.kind, [ ast ]);
    }
    if (!(ast.value &gt; 0)) {
      throw new GraphQLError(&#39;Query error: Not a valid positive integer&#39;, [ ast ]);
    }

    return ast.value;
  }
});
</pre></div>


<p>I've got my primitive types defined here<br>
<a href="https://github.com/shalkam/gql-fhir/tree/master/src/data/fhir/types/primitive" target="_blank" title="https://github.com/shalkam/gql-fhir/tree/master/src/data/fhir/types/primitive">https://github.com/shalkam/gql-fhir/tree/master/src/data/fhir/types/primitive</a></p>



<a name="153890688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890688">(May 21 2017 at 20:41)</a>:</h4>
<p>this can be also useful when profiling, an Array scalar type can be created for handling cardinality like this:</p>
<div class="codehilite"><pre><span></span>scalar ArrayMin1Max5
</pre></div>



<a name="153890689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890689">(May 21 2017 at 22:10)</a>:</h4>
<p>hmm. that loses the mapping to the underlying scalar type. How do you know that unsignedInt is a number in json? I think that's just bizarre, and I'd rather avoid defining them then</p>



<a name="153890690"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890690" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890690">(May 21 2017 at 22:11)</a>:</h4>
<p>so far, there's 2 things that strike as weird in graphql - that, and the fact that you have to do selection sets for objects</p>



<a name="153890691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890691">(May 21 2017 at 23:02)</a>:</h4>
<p>ok, back to reverse references (<span class="user-mention" data-user-id="191315">@Josh Mandel</span>). So after looking at the schema, let's do it this way:</p>
<div class="codehilite"><pre><span></span>{
  name {...}
  Condition(_key: patient) {
   .. fields from Condition ...
  }
}
</pre></div>



<a name="153890692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890692">(May 21 2017 at 23:03)</a>:</h4>
<p>name the resource type that you are looking up - helpful for typing - and, provide which index you want to use for matching as the argument '_key'. You can provide other search parameters as arguments, to further filter</p>



<a name="153890694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890694">(May 21 2017 at 23:35)</a>:</h4>
<p>And <code>_key</code> is limited to search parameters? I like this! I might change <code>_key</code> to <code>reference</code> or <code>_reference</code> just to avoid introducing a new term for this idea. </p>



<a name="153890696"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890696" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890696">(May 21 2017 at 23:36)</a>:</h4>
<p>yes. I don't mind changing to _reference. I will update the doco and my implementation</p>



<a name="153890697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890697">(May 21 2017 at 23:38)</a>:</h4>
<p>has to be _reference not reference because there are existing search parameters named reference and you might want to combine them</p>



<a name="153890698"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890698" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890698">(May 21 2017 at 23:38)</a>:</h4>
<p>I will update <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> to support this later today</p>



<a name="153890705"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890705" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890705">(May 22 2017 at 00:52)</a>:</h4>
<blockquote>
<p>hmm. that loses the mapping to the underlying scalar type. How do you know that unsignedInt is a number in json? I think that's just bizarre, and I'd rather avoid defining them then</p>
</blockquote>
<p>No, that is just a standard in GraphQL and fulfills a requirement in FHIR specs;  I don't see a reason why we should avoid it. You have a GraphQL schema string and you have <code>resolver</code> function for each type in the schema.<br>
a <code>resolver</code> function is responsible for getting the data to deliver to the client, it doesn't matter how but most of the time it will be doing some database queries against a model.</p>
<p>It's a GraphQL server responsibility to match those two together. <code>resolvers</code> can be written in any programming language according to your favorite language and according to that the server library you are using.</p>
<p>It's not the responsibility of HL7 to define how <code>resolver</code> functions will look like, it is just enough to write a GraphQL schema and then anyone can figure out how to resolve that schema in his way using his own preferred programming language.</p>
<p>Please take a look at this link and see if it makes more sense after : <a href="http://dev.apollodata.com/tools/graphql-tools/scalars.html" target="_blank" title="http://dev.apollodata.com/tools/graphql-tools/scalars.html">http://dev.apollodata.com/tools/graphql-tools/scalars.html</a> </p>



<a name="153890709"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890709" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890709">(May 22 2017 at 01:28)</a>:</h4>
<p>and here is another article about resolvers: <a href="http://dev.apollodata.com/tools/graphql-tools/resolvers.html" target="_blank" title="http://dev.apollodata.com/tools/graphql-tools/resolvers.html">http://dev.apollodata.com/tools/graphql-tools/resolvers.html</a></p>



<a name="153890710"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890710" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890710">(May 22 2017 at 01:29)</a>:</h4>
<p>Please note that most of the Links I am referencing are for Node.js libraries, of course other languages have their own corresponding libraries</p>



<a name="153890711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890711">(May 22 2017 at 02:00)</a>:</h4>
<p>right. resolvers are a private thing to the server. The question for the client is, what is scalar type xxx? a string? a number? something else?</p>



<a name="153890712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890712">(May 22 2017 at 02:22)</a>:</h4>
<p>on the subject of looking up reverse references, do we need to worry about there being too many of them?</p>



<a name="153890713"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890713" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890713">(May 22 2017 at 02:23)</a>:</h4>
<p>and if we did worry about it, what would we do about it?</p>



<a name="153890716"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890716" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890716">(May 22 2017 at 03:56)</a>:</h4>
<p>so there's another problem here - we define search parameter names with '-' in them. These make them non-valid argument names in graphQL</p>



<a name="153890717"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890717" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890717">(May 22 2017 at 04:24)</a>:</h4>
<p>for now, I am replacing - with _</p>



<a name="153890732"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890732" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890732">(May 22 2017 at 09:36)</a>:</h4>
<p>do we have any need for directives other than the mandatory ones?</p>



<a name="153890766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890766">(May 22 2017 at 15:09)</a>:</h4>
<blockquote>
<p>The question for the client is, what is scalar type xxx? a string? a number? something else?</p>
</blockquote>
<p>There is always a schema introspection every scalar type has its own description in the schema, Most of the time the type name itself is self explanatory.<br>
And also FHIR describes every scalar/primitive type</p>



<a name="153890767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890767">(May 22 2017 at 15:13)</a>:</h4>
<blockquote>
<p>on the subject of looking up reverse references, do we need to worry about there being too many of them?<br>
and if we did worry about it, what would we do about it?</p>
</blockquote>
<p>Do you mean like a some sort of pagination solution?</p>



<a name="153890777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890777">(May 22 2017 at 15:51)</a>:</h4>
<p>well, that's the question - do we need to?</p>



<a name="153890785"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890785" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890785">(May 22 2017 at 16:14)</a>:</h4>
<p>Of course if it's too many we have to paginate</p>



<a name="153890786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890786">(May 22 2017 at 16:14)</a>:</h4>
<p>Could you take a look at this : <a href="https://facebook.github.io/relay/docs/graphql-relay-specification.html" target="_blank" title="https://facebook.github.io/relay/docs/graphql-relay-specification.html">https://facebook.github.io/relay/docs/graphql-relay-specification.html</a> ?</p>



<a name="153890788"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890788" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890788">(May 22 2017 at 16:26)</a>:</h4>
<p>it adds more specifications to take care of pagination and other stuff</p>



<a name="153890791"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890791" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890791">(May 22 2017 at 16:39)</a>:</h4>
<p>so the way that works puts all the control on the part of the server,  yes? the client doesn't get to say anything about it? </p>



<a name="153890792"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890792" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890792">(May 22 2017 at 16:40)</a>:</h4>
<p>I'm also not sure how you would make that work deep inside a graph</p>



<a name="153890793"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890793" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890793">(May 22 2017 at 16:40)</a>:</h4>
<p>so looking at <a href="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL">http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL</a><br>
 I am confused by the notation or syntax of ellipses. <br>
of this:</p>
<div class="codehilite"><pre><span></span>      resource {
        ...on Patient {
</pre></div>


<p>vs ellipses here:</p>
<div class="codehilite"><pre><span></span>   {
   name {...}
    Condition(_reference: patient) {
    .. fields from Condition ...
    }
</pre></div>


<p>I'm assuming the first case is actual GraphQL syntax and the second means 'some data here' ?</p>



<a name="153890794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890794">(May 22 2017 at 16:40)</a>:</h4>
<p>ah yes. tricky. I'll make the second explicit</p>



<a name="153890795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890795">(May 22 2017 at 16:41)</a>:</h4>
<p>try that</p>



<a name="153890796"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890796" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890796">(May 22 2017 at 16:43)</a>:</h4>
<p>that is clearer.  thanks</p>



<a name="153890799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890799">(May 22 2017 at 17:31)</a>:</h4>
<blockquote>
<p>so the way that works puts all the control on the part of the server, yes? the client doesn't get to say anything about it?</p>
</blockquote>
<p>could you explain more?</p>



<a name="153890810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890810">(May 22 2017 at 18:22)</a>:</h4>
<p>I couldn't find anywhere in that approach where the client said whether it wanted paging </p>



<a name="153890812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890812">(May 22 2017 at 18:35)</a>:</h4>
<p>the client can always state whether it wants paging  or not<br>
so, using this example </p>
<div class="codehilite"><pre><span></span> {
   name {...}
    Condition(_reference: patient) {
    .. fields from Condition ...
    }
</pre></div>


<p>we can do something like this </p>
<div class="codehilite"><pre><span></span> {
   name {...}
    Condition(_reference: patient, start: 0, limit: 10) {
    .. fields from Condition ...
    }
</pre></div>



<a name="153890813"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890813" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890813">(May 22 2017 at 18:35)</a>:</h4>
<p>the arguments can always be changed per client query</p>



<a name="153890819"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890819" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890819">(May 22 2017 at 20:06)</a>:</h4>
<p>I missed that bit. Should we make this standard?</p>



<a name="153890829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890829">(May 22 2017 at 21:10)</a>:</h4>
<p>I think we should, yes. But a more difficult question: order....</p>



<a name="153890831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890831">(May 22 2017 at 23:32)</a>:</h4>
<p>I think we probably want to align our paging approach with what we do in the search API, using opaque "next page" tokens and a client-suggested count. </p>



<a name="153890832"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890832" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890832">(May 22 2017 at 23:33)</a>:</h4>
<p><a href="http://graphql.org/learn/pagination/" target="_blank" title="http://graphql.org/learn/pagination/">http://graphql.org/learn/pagination/</a> describes relevant considerations </p>



<a name="153890833"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890833" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890833">(May 22 2017 at 23:33)</a>:</h4>
<p>that makes sense at the root, but I'm quite unpersuaded that it makes sense deep inside a graph</p>



<a name="153890834"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890834" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890834">(May 22 2017 at 23:34)</a>:</h4>
<p>It does imply we need a kind wrapper though around the list of paginated things. Like a ConditionList instead of Condition. </p>



<a name="153890835"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890835" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890835">(May 22 2017 at 23:36)</a>:</h4>
<p>What I'm suggesting is essentially the best practice described on the "learn" site </p>



<a name="153890836"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890836" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890836">(May 22 2017 at 23:36)</a>:</h4>
<p>What worries you about it? </p>



<a name="153890837"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890837" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890837">(May 22 2017 at 23:42)</a>:</h4>
<p>it's one thing to say start/limit or something a the root, or have a cursor approach that matches what we do no</p>



<a name="153890838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890838">(May 22 2017 at 23:42)</a>:</h4>
<p>get me all the resources that match these conditions.... right. that's obvious. </p>



<a name="153890839"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890839" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890839">(May 22 2017 at 23:43)</a>:</h4>
<p>Oh, yes deeply nested this kind of token would be hard to pass into a followup query. I was imaging the followup query would be targeted to just the nested piece (not containing/repeating all the outer stuff). </p>



<a name="153890840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890840">(May 22 2017 at 23:44)</a>:</h4>
<p>it get's especially hard when you have nested lists - the server is keeping a lot of speculative lists that the client will never follow </p>



<a name="153890841"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890841" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890841">(May 22 2017 at 23:44)</a>:</h4>
<p>I'm not even sure how many servers would be able to retain an independent context in which the deep queries could be followed </p>



<a name="153890842"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890842" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890842">(May 22 2017 at 23:46)</a>:</h4>
<p>But letting the client provide offsets doesn't quite work either: if I do a top level query for Patients and want to get first 5 Encounters for each and then independently page through the next 5 Encounters for just the first patient... I'd probably just issue a follow-up query for that on patient's next encounters, rather than repeat the whole outer query, right? (I can't see another way to express it, because the outer query is doesn't give me a way to use different offsets for different patients.)</p>



<a name="153890843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890843">(May 22 2017 at 23:49)</a>:</h4>
<p>The server doesn't need to maintain speculative lists -- it can instead just produce pagination tokens that internally just represent something like "skip 15". The point is just that the server gets to choose (between this and db cursors or whatever), and the client treats it as opaque.</p>



<a name="153890845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890845">(May 23 2017 at 01:05)</a>:</h4>
<p>I can't present </p>



<a name="153890846"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890846" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890846">(May 23 2017 at 01:06)</a>:</h4>
<p>I can't present a token that means 'skip 15' unless I know what the server has to skip <em>from</em></p>



<a name="153890847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890847">(May 23 2017 at 01:07)</a>:</h4>
<p>I think that there's no place for pagination queries on anything but the root. For the nested stuff, just let the client specify a limit, and only on the root allow pagination and links for following the sequence (the stuff we already do)</p>



<a name="153890849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890849">(May 23 2017 at 02:53)</a>:</h4>
<p>And how does a client follow up beyond the initial fetch limit? A nicely designed pagination token embeds enough context to reproduce a query (e.g. The query parameters and an index of a last returned result.) </p>



<a name="153890850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890850">(May 23 2017 at 02:57)</a>:</h4>
<p>I'm just implementing it on the root. It's problematic. Here's my example, which should illustrate:</p>



<a name="153890851"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890851" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890851">(May 23 2017 at 02:58)</a>:</h4>
<p>request:</p>
<div class="codehilite"><pre><span></span>{
  Patient(active : true) { 
   id 
}
</pre></div>



<a name="153890852"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890852" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890852">(May 23 2017 at 02:58)</a>:</h4>
<p>response:</p>



<a name="153890853"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890853" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890853">(May 23 2017 at 02:59)</a>:</h4>
<div class="codehilite"><pre><span></span>{
  &quot;Patient&quot;: [
    {
      &quot;type&quot;: &quot;paging&quot;,
      &quot;first&quot;: &quot;search-id=e6686cc0-11cc-4266-a027-aef4c7f3fb&amp;&amp;active=true&amp;_sort=_id&amp;search-offset=0&amp;_count=50&quot;,
      &quot;next&quot;: &quot;search-id=e6686cc0-11cc-4266-a027-aef4c7f3fb&amp;&amp;active=true&amp;_sort=_id&amp;search-offset=50&amp;_count=50&quot;,
      &quot;last&quot;: &quot;search-id=e6686cc0-11cc-4266-a027-aef4c7f3fb&amp;&amp;active=true&amp;_sort=_id&amp;search-offset=200&amp;_count=50&quot;
    },
    {
      &quot;type&quot;: &quot;resource&quot;,
      &quot;id&quot;: &quot;1&quot;
    },
    {
      &quot;type&quot;: &quot;resource&quot;,
      &quot;id&quot;: &quot;100&quot;
    },
  .. etc...
  ]
}
</pre></div>



<a name="153890854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890854">(May 23 2017 at 03:00)</a>:</h4>
<p>This is doest look quite right. Your Connection object should have next/prev links and then an array of patients </p>



<a name="153890855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890855">(May 23 2017 at 03:00)</a>:</h4>
<p>first of all, you need to find somewhere to inject the paging control data. I chose one of several different possible ways here; there are others I expect we'll argue over. But you have to do something, if you're going to enable this. I just don't see the value on reverse reference resolution, only on the root searches</p>



<a name="153890856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890856">(May 23 2017 at 03:02)</a>:</h4>
<p>well, you can show what you think it should look like, but I don't see how it can look like you describe, given the way that graphQL works</p>



<a name="153890857"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890857" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890857">(May 23 2017 at 03:03)</a>:</h4>
<p>(yes, I'll be argue about this particular representation ;)) But when you say that you don't see me value... you're saying that there should be no way to get more than the first batch of things linked to from a top level result? Like, first 5 conditions in my example, and there's no value in every getting more? </p>



<a name="153890858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890858">(May 23 2017 at 03:03)</a>:</h4>
<p>and reading this <a href="http://graphql.org/learn/pagination/" target="_blank" title="http://graphql.org/learn/pagination/">http://graphql.org/learn/pagination/</a> tells me nothing because I don't know whether those fragments are schema, request, or response</p>



<a name="153890859"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890859" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890859">(May 23 2017 at 03:04)</a>:</h4>
<p>define 'top level result'</p>



<a name="153890860"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890860" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890860">(May 23 2017 at 03:04)</a>:</h4>
<p>Looking at the example at the bottom of that page: the left hand side is a query, and the right hand side is a response.</p>



<a name="153890862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890862">(May 23 2017 at 03:05)</a>:</h4>
<p>When I said "top level" just now, I'm referring to the query that finds patients and then for each patient finds conditions. "top level" meant the patients.</p>



<a name="153890863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890863">(May 23 2017 at 03:06)</a>:</h4>
<p>ok. so I'm sceptical of the value in setting up paging for the conditions - it's work for both client and server. And those lists are inherently both shorter and more bounded than the general search. </p>



<a name="153890864"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890864" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890864">(May 23 2017 at 03:18)</a>:</h4>
<p>but now I understand the link a little better... I really don't like their terms at all (connection, edge)... and I don't begin to understand how they intend the cursor to work</p>



<a name="153890866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890866">(May 23 2017 at 03:47)</a>:</h4>
<p>one option - more work for the server, but that's our usual choice - is to allow either. So </p>
<div class="codehilite"><pre><span></span>Condition(_reference : parameter, ... search parameters) {
}
</pre></div>



<a name="153890867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890867">(May 23 2017 at 03:48)</a>:</h4>
<p>or </p>
<div class="codehilite"><pre><span></span>ConditionConnection(_reference : parameter, ... search parameters, iteration parameters) {
  link {type, ref}
  totalCount offset pageSize
  node {
    ... fields....
  }
}
</pre></div>



<a name="153890868"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890868" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890868">(May 23 2017 at 03:50)</a>:</h4>
<p>but there'd have to be a rule that if you wanted to pursue the references on the nested queries, you'd have to iterate them directly, not in a nested fasion</p>



<a name="153890869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890869">(May 23 2017 at 03:51)</a>:</h4>
<p>I still have real problems with this though. In my server, I actually have to remember each result set specifically, so that you can iterate it with confidence. I'm going to be doing a lot of this for nothing...</p>



<a name="153890924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890924">(May 23 2017 at 09:42)</a>:</h4>
<p>I think all the paging stuff belongs inside the <code>Reference</code> data type</p>
<div class="codehilite"><pre><span></span># A reference from one resource to another
type Reference {
  id: ID
  extension: [Extension]
  reference: String
  _reference: Element
  display: String
  _display: Element
  resources(filter: JSON, .. any other parameters): ResourceInterface
}
</pre></div>



<a name="153890925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890925">(May 23 2017 at 09:44)</a>:</h4>
<p>Then whenever a reference is called we use the <code>Reference</code> type, it should be limited to a resource specific reference field</p>



<a name="153890933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890933">(May 23 2017 at 12:12)</a>:</h4>
<p>Resource is 0..1 here, there's no paging to be done. It's only the reverse references that don't have a home that can be 0..*</p>



<a name="153890957"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890957" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890957">(May 23 2017 at 13:23)</a>:</h4>
<p>ok, that is correct</p>



<a name="153890988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890988">(May 23 2017 at 19:26)</a>:</h4>
<blockquote>
<p>there'd have to be a rule that if you wanted to pursue the references on the nested queries, you'd have to iterate them directly, not in a nested fasion</p>
</blockquote>
<p>I think spelling this out directly would be good. I'm not 100% sure I understand what you mean by "iterate them directly". (Of course, an alternative is to say: if you want to page over these, you just issue a new query for <code>Condition(patient: "123"){}</code>...)</p>



<a name="153890989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890989">(May 23 2017 at 19:28)</a>:</h4>
<p>In </p>
<div class="codehilite"><pre><span></span>ConditionConnection(_reference : parameter, ... search parameters, iteration parameters) {
  link {type, ref}
  totalCount offset pageSize
</pre></div>


<p>... what are the <code>link.ref</code> properties? Full URLs to a page of FHIR REST API search results? Or a token that can be inserted into a follow-up graphql query?</p>



<a name="153890997"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153890997" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153890997">(May 23 2017 at 20:11)</a>:</h4>
<p>a token that can be used in a follow up query</p>



<a name="153891000"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891000" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891000">(May 23 2017 at 20:49)</a>:</h4>
<p>ok so wrote up where I think we are here:</p>



<a name="153891001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891001">(May 23 2017 at 20:49)</a>:</h4>
<p><a href="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Searching_resources" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Searching_resources">http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Searching_resources</a></p>



<a name="153891002"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891002" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891002">(May 23 2017 at 20:50)</a>:</h4>
<p>I have not updated the reverse references section yet - I will when we have consensus about top level searching</p>



<a name="153891022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891022">(May 23 2017 at 21:16)</a>:</h4>
<p>This looks like a great approach for the top-level results.</p>



<a name="153891038"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891038" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891038">(May 23 2017 at 23:00)</a>:</h4>
<p>In the primitive type mapping, I think every type should be mapped to a scalar type in GraphQL, instead of</p>
<blockquote>
<p>String | everything else</p>
</blockquote>



<a name="153891039"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891039" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891039">(May 23 2017 at 23:01)</a>:</h4>
<p>if there is no corresponding one in the default scalar types in GraphQL, a custom scalar type should be declared and then it's the server issue to resolve it</p>



<a name="153891040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891040">(May 23 2017 at 23:03)</a>:</h4>
<p>Can we discuss the <code>generate schema</code> in the open questions section?</p>



<a name="153891047"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891047" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891047">(May 24 2017 at 01:44)</a>:</h4>
<p>ok. updated the <a href="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Reverse_References" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Reverse_References">http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Reverse_References</a> section now</p>



<a name="153891048"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891048" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891048">(May 24 2017 at 01:45)</a>:</h4>
<p>why map to scalar instead of string?</p>



<a name="153891049"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891049" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891049">(May 24 2017 at 01:46)</a>:</h4>
<p>as for generate schema - I intend to generate a full graphQL schema for the entire specification, as an examplar for people to copy from / or use as a template for generating their own responses from their server. I think that would be a useful thing. And now that we've agreed on all the queries - well, I <em>think we have</em> ;-) - it's about time to generate the schema. If that all makes sense</p>



<a name="153891059"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891059" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891059">(May 24 2017 at 06:38)</a>:</h4>
<p>For, example GraphQL doesn't have a Date type we can easily create a Date scalar type, why use a string for that?<br>
We can also create a positiveInteger type to validate that a value is a positive integer. Or why did FHIR declare those primitive type at the first place?</p>



<a name="153891060"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891060" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891060">(May 24 2017 at 06:43)</a>:</h4>
<p>How are we going handle extensions in graphql? </p>



<a name="153891061"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891061" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891061">(May 24 2017 at 06:43)</a>:</h4>
<p>just like any other content. there's no need to do anything special</p>



<a name="153891062"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891062" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891062">(May 24 2017 at 06:44)</a>:</h4>
<p>with regard to positiveInteger etc - we expect FHIR processors to natively know what those things are. That seems a wrong assumption to make in graphQL - and the key question has to be, what are these things in json, right</p>



<a name="153891064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891064">(May 24 2017 at 06:48)</a>:</h4>
<p>I mean, if i have Patient with dozen of extensions and i want to get only <code>race</code> extension (specifying only what i need in graphql paradigm)?<br>
<code>{extension( race filter) { ..........}</code>?</p>



<a name="153891065"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891065" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891065">(May 24 2017 at 06:49)</a>:</h4>
<p>{ extension( url : "..") { valueCode }  }</p>



<a name="153891066"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891066" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891066">(May 24 2017 at 06:49)</a>:</h4>
<p>If i need couple of extensions - graphql aliasing?</p>



<a name="153891067"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891067" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891067">(May 24 2017 at 06:50)</a>:</h4>
<p>yes</p>



<a name="153891068"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891068" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891068">(May 24 2017 at 06:52)</a>:</h4>
<p>scalar types in GraphQL also have their corresponding resolvers in the server too</p>



<a name="153891069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891069">(May 24 2017 at 06:54)</a>:</h4>
<blockquote>
<p>the key question has to be, what are these things in json</p>
</blockquote>
<p>For example date time is of type Date in JSON but that doesn't exist in GraphQL</p>



<a name="153891071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891071">(May 24 2017 at 08:04)</a>:</h4>
<p>So, For now all the discussion has been around querying a list of patients, but there have to be a query that returns a single patient too</p>



<a name="153891073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891073">(May 24 2017 at 08:10)</a>:</h4>
<p>Taking my schema here : <a href="https://github.com/shalkam/gql-fhir/blob/master/src/data/schema.graphql" target="_blank" title="https://github.com/shalkam/gql-fhir/blob/master/src/data/schema.graphql">https://github.com/shalkam/gql-fhir/blob/master/src/data/schema.graphql</a> as a guide<br>
So, if the root query type looks like this :</p>
<div class="codehilite"><pre><span></span>type Query {
  Patient: PatientQuery
}
type PatientQuery {
  find(any filter goes here): [Patient]
  findOne(id: ID!, ... plus any other filter ...): Patient
}
</pre></div>


<p>So, we have <code>find</code> type that returns a list of patients and <code>findOne</code> that returns only one patient</p>



<a name="153891078"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891078" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891078">(May 24 2017 at 08:26)</a>:</h4>
<p>Same goes for mutations</p>
<div class="codehilite"><pre><span></span>type Mutation {
  Patient: PatientMutation
}
type PatientMutation {
  remove(_id: ID!): Patient
  upsert(data: PatientInput!): Patient
}
</pre></div>


<p>then a mutation will look like this:</p>
<div class="codehilite"><pre><span></span>mutation upsertPatient($data: PatientInput!)  {
  patient { upsert(data: $data) { ...patient fields goes here... } }
}
</pre></div>


<p>and a query </p>
<div class="codehilite"><pre><span></span> query find($filter: JSON){
  patient { find(filter: $filter) { ...patient fields goes here... } }
}
</pre></div>



<a name="153891080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891080">(May 24 2017 at 08:27)</a>:</h4>
<p>I think we should all agree how we should name the different crud operations and arguments used for them inside the GraphQL schema</p>



<a name="153891204"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891204" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891204">(May 24 2017 at 20:07)</a>:</h4>
<p>scalar types - chatting to graphQL guys - there's no solution for this. If the schema uses scalar types, then everyone in the picture just has to 'know' the scalar types magically</p>



<a name="153891205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891205">(May 24 2017 at 20:08)</a>:</h4>
<p>i mean, custom scalar types...</p>



<a name="153891212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891212">(May 24 2017 at 20:38)</a>:</h4>
<p>What about the reference here : <a href="http://hl7.org/fhir/datatypes.html" target="_blank" title="http://hl7.org/fhir/datatypes.html">http://hl7.org/fhir/datatypes.html</a> it states what is needed for each primitive type this can be a reference</p>



<a name="153891242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891242">(May 24 2017 at 22:42)</a>:</h4>
<p>well, indeed, that's the reference. </p>



<a name="153891243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891243">(May 24 2017 at 22:42)</a>:</h4>
<p>just not computable. </p>



<a name="153891244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891244">(May 24 2017 at 22:42)</a>:</h4>
<p>but that's a graphQL issue</p>



<a name="153891334"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891334" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891334">(May 26 2017 at 02:29)</a>:</h4>
<p>ok, updated <a href="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Searching_resources" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Searching_resources">http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Searching_resources</a></p>



<a name="153891335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891335">(May 26 2017 at 02:29)</a>:</h4>
<p>before we talk about mutations, can we talk about directives? </p>



<a name="153891336"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891336" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891336">(May 26 2017 at 02:32)</a>:</h4>
<p>GraphQL says that you should support directives - "GraphQL implementations should provide the @skip and @include directives."</p>



<a name="153891337"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891337" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891337">(May 26 2017 at 02:33)</a>:</h4>
<p>we could say, 'yeah, but no', or we could say 'SHALL provide'. Or we could remain silent. Any opinions? And should we define any other directives? (I haven't seen any need)</p>



<a name="153891414"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891414" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891414">(May 26 2017 at 21:37)</a>:</h4>
<p>updated <a href="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Searching_resources" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Searching_resources">http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Searching_resources</a> again after actually implementing it </p>



<a name="153891416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891416">(May 26 2017 at 23:11)</a>:</h4>
<p>and added actual working links for examples</p>



<a name="153891449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891449">(May 28 2017 at 21:14)</a>:</h4>
<p>ok, schema - I added to the build to generate scheme files. So far, I've only done the static schema. see<br>
<a href="http://build.fhir.org/types.graphql" target="_blank" title="http://build.fhir.org/types.graphql">http://build.fhir.org/types.graphql</a><br>
<a href="http://build.fhir.org/patient.graphql" target="_blank" title="http://build.fhir.org/patient.graphql">http://build.fhir.org/patient.graphql</a></p>
<p>or <a href="http://build.fhir.org/[resource].graphql" target="_blank" title="http://build.fhir.org/[resource].graphql">http://build.fhir.org/[resource].graphql</a> where resource name is all lowercase</p>



<a name="153891450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891450">(May 28 2017 at 21:15)</a>:</h4>
<p><span class="user-mention" data-user-id="191315">@Josh Mandel</span> and <span class="user-mention" data-user-id="193512">@Mostafa Sholkamy</span> please check the schema </p>



<a name="153891455"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891455" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891455">(May 29 2017 at 00:54)</a>:</h4>
<p>I think this example <a href="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Additional_Selectors" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Additional_Selectors">here</a>.....</p>
<div class="codehilite"><pre><span></span>     http://test.fhir.org/r3/Observation/example/$graphql?query={id,subject{reference,resource{...on%20Patient{birthDate}...on%20Practioner{practitionerRole{speciality}}}}code{coding{system,code}}}
</pre></div>


<p>should be this...</p>
<div class="codehilite"><pre><span></span>    http://test.fhir.org/r3/Observation/example/$graphql?query={id,subject{reference,resource{...on%20Patient{birthDate}}}code{coding{system,code}}}
</pre></div>


<p>(remove the practitiionerRole reference)</p>



<a name="153891456"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891456" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891456">(May 29 2017 at 00:55)</a>:</h4>
<p>The result is the same </p>



<a name="153891457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891457">(May 29 2017 at 01:17)</a>:</h4>
<p>well, it's not wrong - it's just that the example doesn't use that type. <br>
Actually, the type is not legal, so I just updated to something that is</p>



<a name="153891541"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891541" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891541">(May 29 2017 at 20:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> how come properties have <code>phrases_like_this</code> instead of <code>phrasesLikeThis</code>? </p>



<a name="153891543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891543">(May 29 2017 at 20:23)</a>:</h4>
<p>Oh, I see -- just for search parameters.</p>



<a name="153891544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891544">(May 29 2017 at 20:23)</a>:</h4>
<p>You're using the FHIR standard names with <code>_</code> --&gt; <code>-</code> to make them valid.</p>



<a name="153891545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891545">(May 29 2017 at 20:23)</a>:</h4>
<p>y. servers have to reverse the conversion</p>



<a name="153891546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891546">(May 29 2017 at 20:27)</a>:</h4>
<p>This schema proposes  two very similar ways to search patients, one returning <code>[Patient]</code> and the other returning <code>[PatientEdge]</code>.  It might be better just to do searches that include the count/score/pagination details (like FHIR's REST search does today).</p>



<a name="153891547"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891547" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891547">(May 29 2017 at 20:27)</a>:</h4>
<p>What's the use case for having the other one, too?</p>



<a name="153891548"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891548" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891548">(May 29 2017 at 20:29)</a>:</h4>
<p>Also, in any case, we should be sure to preserve search parameters that come from Resource (<code>_id</code>, <code>_lastUpdated</code>, etc)</p>



<a name="153891549"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891549" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891549">(May 29 2017 at 20:30)</a>:</h4>
<p>I think it's more relevant in reverse reference searches. There's 3 differences:<br>
- the returned graph is simpler <br>
- in particular, the returned graph doesn't need to be considered with logic asking 'is there more pages to get'<br>
- servers can fulfill the simpler search with much less resources, because they do not need to remember state about the searches</p>



<a name="153891550"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891550" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891550">(May 29 2017 at 20:30)</a>:</h4>
<p>_id is irrelevant. I'll update the generator to handle the others</p>



<a name="153891551"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891551" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891551">(May 29 2017 at 20:31)</a>:</h4>
<p><code>_id</code> is relevant because it lets you get a list of named patients without having to alias each, and it's just a nice analogy to our existing search behavior.</p>



<a name="153891552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891552">(May 29 2017 at 20:31)</a>:</h4>
<p>not following that</p>



<a name="153891553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891553">(May 29 2017 at 20:32)</a>:</h4>
<p>I want to get <code>PatientList("_id": "1, 2, 3")</code></p>



<a name="153891554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891554">(May 29 2017 at 20:32)</a>:</h4>
<p>That way search parameters would work in a consistent fashion between our REST API and the grpahql API.</p>



<a name="153891555"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891555" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891555">(May 29 2017 at 20:32)</a>:</h4>
<p>For the reverse search, even if a server doesn't want to implement support for pagination etc -- it's still important to communicate "this is not a complete list", which the Connection structure could/should let us say.</p>



<a name="153891556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891556">(May 29 2017 at 20:33)</a>:</h4>
<p>I think you mean PatientList(id: [1, 2,3]) but ok. </p>



<a name="153891557"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891557" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891557">(May 29 2017 at 20:33)</a>:</h4>
<p><code>[1,2,3]</code> isn't a valid string</p>



<a name="153891558"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891558" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891558">(May 29 2017 at 20:34)</a>:</h4>
<p>"1, 2, 3" is not a valid id</p>



<a name="153891559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891559">(May 29 2017 at 20:34)</a>:</h4>
<p>No, but that's how <code>_id</code> and other search parms work in FHIR's REST API: they define a comma-separated list as a string.</p>



<a name="153891560"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891560" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891560">(May 29 2017 at 20:34)</a>:</h4>
<p>question is whether the composite syntax should apply or not. </p>



<a name="153891561"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891561" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891561">(May 29 2017 at 20:35)</a>:</h4>
<p>I mean, being able to say "or" somehow is helpful. Do we have a better way?</p>



<a name="153891562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891562">(May 29 2017 at 20:35)</a>:</h4>
<p>If there is, I'd be happy to use that instead; I'm just missing it right now.</p>



<a name="153891563"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891563" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891563">(May 29 2017 at 20:36)</a>:</h4>
<p>yes we do. _filter. For syntactical reasons, most of the interesting FHIR search techniques are not possible in GraphQL, and I don't think we should bend over backwards to make them so - we should say, use _filter</p>



<a name="153891564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891564">(May 29 2017 at 20:36)</a>:</h4>
<p>We could define params like <code>whatever</code> + <code>_in</code> for each search param, to provide an array form, like <code>_id_in: ["1","2","3"]</code></p>



<a name="153891565"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891565" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891565">(May 29 2017 at 20:37)</a>:</h4>
<p>The filter language is a bit obscure; it's a lot of baggage just to say "or".</p>



<a name="153891566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891566">(May 29 2017 at 20:38)</a>:</h4>
<p>it's exactly the language used by other restful specifications, and it's not obscure to say _id eq 1 or Id eq 2</p>



<a name="153891567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891567">(May 29 2017 at 20:38)</a>:</h4>
<p>the two letter ops are obscure to me.</p>



<a name="153891568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891568">(May 29 2017 at 20:38)</a>:</h4>
<p>I haven't ever used another REST API with FHIR's filter syntax.</p>



<a name="153891569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891569">(May 29 2017 at 20:39)</a>:</h4>
<p>pffft. </p>



<a name="153891570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891570">(May 29 2017 at 20:39)</a>:</h4>
<p>But I understand the idea came from elsewhere (which is good).</p>



<a name="153891571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891571">(May 29 2017 at 20:39)</a>:</h4>
<p>Anyway, overall I think this schema approach looks really nice. I'd try very hard to condense the <code>PatientListType</code> and <code>PatientConnectionType</code>.</p>



<a name="153891572"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891572" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891572">(May 29 2017 at 20:40)</a>:</h4>
<p>given that we have arrays in graphql, it's much cleaner to avoid the syntactical issues with ',' and escapes bu saying to use json arrays and escaping instead</p>



<a name="153891573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891573">(May 29 2017 at 20:40)</a>:</h4>
<p>how you going to condense them? Force everyone to use the heavier weight Connection approach every time?</p>



<a name="153891574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891574">(May 29 2017 at 20:41)</a>:</h4>
<p>Any time you do a query that returns a list, you need to know if you're getting a complete result or just the the "first n matches", right?</p>



<a name="153891575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891575">(May 29 2017 at 20:42)</a>:</h4>
<p>I can't really think of a use case like "just give me some of a patient's allergies, dealer's choice"...</p>



<a name="153891576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891576">(May 29 2017 at 20:42)</a>:</h4>
<p>if you say "list" you get everything or an error - that's what the wiki page says. </p>



<a name="153891577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891577">(May 29 2017 at 20:42)</a>:</h4>
<p>I thought you reviewed all that and said you liked it...</p>



<a name="153891578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891578">(May 29 2017 at 20:42)</a>:</h4>
<p>I think I didn't understand this implication.</p>



<a name="153891579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891579">(May 29 2017 at 20:43)</a>:</h4>
<p>But that certainly helps!</p>



<a name="153891580"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891580" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891580">(May 29 2017 at 20:43)</a>:</h4>
<p>Have we addressed sort order?</p>



<a name="153891581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891581">(May 29 2017 at 20:43)</a>:</h4>
<p>(for lists or connections?)</p>



<a name="153891582"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891582" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891582">(May 29 2017 at 20:43)</a>:</h4>
<p>works like the search for both</p>



<a name="153891583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891583">(May 29 2017 at 20:43)</a>:</h4>
<p>Like, there are <code>_sort</code> params?</p>



<a name="153891584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891584">(May 29 2017 at 20:44)</a>:</h4>
<p>I didn't generate that though did I?</p>



<a name="153891585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891585">(May 29 2017 at 20:44)</a>:</h4>
<p>This isn't reflected in the Patient schema, no</p>



<a name="153891586"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891586" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891586">(May 29 2017 at 20:44)</a>:</h4>
<p>Or, not yet ;-)</p>



<a name="153891587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891587">(May 29 2017 at 20:44)</a>:</h4>
<p>That'll work fine though.</p>



<a name="153891588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891588">(May 29 2017 at 20:45)</a>:</h4>
<p>I'll generate the inherited search parameters and the sort parameters</p>



<a name="153891589"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891589" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891589">(May 29 2017 at 20:45)</a>:</h4>
<p>Super. graphql for FHIR will be massively convenient for a lot of folks, if it sees widespread support.</p>



<a name="153891590"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891590" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891590">(May 29 2017 at 20:46)</a>:</h4>
<p>(And I think it's still probably possible to do a reasonable job of implementing the graphql API on top of the REST API, as a proxy in from of servers that don't support it; I should review what it'll take to get there based on the current definitions.)</p>



<a name="153891591"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891591" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891591">(May 29 2017 at 20:48)</a>:</h4>
<p>I effectively did that in my server. The only alteration I made to my base server was to create a direct path for the *List search, that doesn't do paging/caching. That was for efficiency, not for functionality. (plus found and fixed some bugs on the way)</p>



<a name="153891593"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891593" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891593">(May 29 2017 at 20:57)</a>:</h4>
<p>ah.. .and you need to know, in the proxy, how paging works on the server. To the client, it's opaque, but to correctly transfer between syntaxes, you need to know how to take the URL apart and reconstruct it </p>



<a name="153891608"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891608" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891608">(May 30 2017 at 03:06)</a>:</h4>
<p>ok updated the generated graphQL according to our discussion</p>



<a name="153891618"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891618" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891618">(May 30 2017 at 06:47)</a>:</h4>
<p>so. finally, time to talk about mutation. my preferred approach would be that you could update a resource directly, but: </p>



<a name="153891619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891619">(May 30 2017 at 06:56)</a>:</h4>
<p>but nothing. I read something wrong. So create/update/delete. </p>



<a name="153891623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891623">(May 30 2017 at 07:04)</a>:</h4>
<p>but so many questions - are a set of mutations a batch? a transaction? How can you create a set of related resources? </p>



<a name="153891626"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891626" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891626">(May 30 2017 at 07:19)</a>:</h4>
<p>duh. no multiple mutations</p>



<a name="153891627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891627">(May 30 2017 at 07:50)</a>:</h4>
<p>I've been reading the graphQL spec about mutations, and am unclear on error handling. Here's questions I put on the graphQL chat:</p>



<a name="153891628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891628">(May 30 2017 at 07:50)</a>:</h4>
<ul>
<li>if execution fails, should a server return 200 OK with { "error" : ["..."] }? or should it have a different response code?</li>
<li>This forces a client have to handle HTTP errors (before you get to the graphQL processor), and also check for 200 OK + errors - why is that useful?</li>
<li>under what conditions would your response include both data and errors, and what should a client do with that?</li>
<li>the documentation helpfully says "If no data is returned, according to the GraphQL spec, the "data" field should only be included if the error occurred during execution" - I've read that several times, and I don't know what it means, either returning data if there is no data returned, or what the definition of 'during execution' is</li>
</ul>



<a name="153891632"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891632" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891632">(May 30 2017 at 09:17)</a>:</h4>
<p>I just upgraded my server to fix a mistake in every response.</p>



<a name="153891677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891677">(May 30 2017 at 19:00)</a>:</h4>
<p>and after dsicussion on the graphQL, chat, I've added a new section to the graphQL page:</p>



<a name="153891679"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891679" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891679">(May 30 2017 at 19:00)</a>:</h4>
<p><a href="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Conformance" target="_blank" title="http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Conformance">http://wiki.hl7.org/index.php?title=FHIR_and_GraphQL#Conformance</a></p>



<a name="153891831"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891831" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891831">(May 31 2017 at 20:37)</a>:</h4>
<p>I think it's time to move the wiki page to the spec itself. <span class="user-mention" data-user-id="191315">@Josh Mandel</span> <span class="user-mention" data-user-id="193512">@Mostafa Sholkamy</span> - do you agree? And is there enough interest for a connectathon stream? (Josh, I presume you see a cds-hooks interest here....)</p>



<a name="153891950"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891950" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891950">(Jun 01 2017 at 15:42)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I do not see in wiki how to query specific extension?</p>



<a name="153891975"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153891975" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153891975">(Jun 01 2017 at 20:53)</a>:</h4>
<p>added an example</p>



<a name="153893962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153893962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153893962">(Jun 15 2017 at 04:42)</a>:</h4>
<p>Github are getting in on the act: <a href="https://githubengineering.com/the-github-graphql-api/" target="_blank" title="https://githubengineering.com/the-github-graphql-api/">https://githubengineering.com/the-github-graphql-api/</a></p>



<a name="153893963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153893963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153893963">(Jun 15 2017 at 04:50)</a>:</h4>
<p>thx. </p>



<a name="153893964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153893964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153893964">(Jun 15 2017 at 04:50)</a>:</h4>
<p>should we have a Connectathon stream on graphQL? </p>



<a name="153894011"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894011" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894011">(Jun 15 2017 at 15:47)</a>:</h4>
<p>+1 on stream and can one do a LastN like search with it?  It was not clear to me whether this was possible?</p>



<a name="153894072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894072">(Jun 15 2017 at 21:48)</a>:</h4>
<p><span class="user-mention" data-user-email="eric@montagesystems.com.au" data-user-id="487">@Eric Browne</span>  h</p>



<a name="153894073"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894073" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894073">(Jun 15 2017 at 21:48)</a>:</h4>
<p>oops</p>



<a name="153894074"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894074" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894074">(Jun 15 2017 at 21:49)</a>:</h4>
<p><span class="user-mention" data-user-id="191401">@Eric Haas</span> yes - you can. Just add a _graphql parameter to the operation when you invoke it, and the graphql runs on the output. I've added an example to the wiki page, and my server will start supporting it next time I upgrade it </p>



<a name="153894076"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894076" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894076">(Jun 15 2017 at 21:51)</a>:</h4>
<p>I think it's time to move the graphQL stuff into the specification itself</p>



<a name="153894079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894079">(Jun 15 2017 at 22:01)</a>:</h4>
<p>I agree.  Is there a GForge</p>



<a name="153894080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894080">(Jun 15 2017 at 22:02)</a>:</h4>
<p>probably not</p>



<a name="153894083"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894083" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894083">(Jun 15 2017 at 22:05)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13532" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13532">GF#13532</a></p>



<a name="153894084"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894084" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894084">(Jun 15 2017 at 22:05)</a>:</h4>
<p>is now. <a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13531" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13531">GF#13531</a></p>



<a name="153894085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894085">(Jun 15 2017 at 22:05)</a>:</h4>
<p>lol</p>



<a name="153894086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894086">(Jun 15 2017 at 22:05)</a>:</h4>
<p>NM withdrew mine</p>



<a name="153894499"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894499" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894499">(Jun 20 2017 at 06:04)</a>:</h4>
<p><a href="http://wiki.hl7.org/index.php?title=201709_GraphQL" target="_blank" title="http://wiki.hl7.org/index.php?title=201709_GraphQL">http://wiki.hl7.org/index.php?title=201709_GraphQL</a></p>



<a name="153894500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894500">(Jun 20 2017 at 06:05)</a>:</h4>
<p>if you're interested in participating, please register your interest directly on the wiki, or mention it here. </p>



<a name="153894502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894502">(Jun 20 2017 at 06:05)</a>:</h4>
<p>I'm the track lead at the moment, but I'm looking for a volunteer to take this one on</p>



<a name="153894503"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153894503" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153894503">(Jun 20 2017 at 06:08)</a>:</h4>
<p>I have migrated the GraphQL documentation to here: <a href="http://build.fhir.org/graphql.html" target="_blank" title="http://build.fhir.org/graphql.html">http://build.fhir.org/graphql.html</a></p>



<a name="153896578"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153896578" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153896578">(Jul 11 2017 at 12:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  Does <a href="http://build.fhir.org/types.graphql" target="_blank" title="http://build.fhir.org/types.graphql">http://build.fhir.org/types.graphql</a> includes all datatypes in FHIR?<br>
and each resource like the patient's file <a href="http://build.fhir.org/patient.graphql" target="_blank" title="http://build.fhir.org/patient.graphql">http://build.fhir.org/patient.graphql</a> only includes types for backbone elements?</p>



<a name="153896579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153896579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153896579">(Jul 11 2017 at 12:31)</a>:</h4>
<p>yes that's right</p>



<a name="153896619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153896619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153896619">(Jul 11 2017 at 19:15)</a>:</h4>
<p>I've cleaned up those graphql files  <code>types.graphql</code> and <code>patient.graphql</code> they had some errors and changed some stuff too like the adding <code>PatientMutation</code> and <code>PatientQuery</code> types</p>



<a name="153896620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153896620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153896620">(Jul 11 2017 at 19:15)</a>:</h4>
<p>you can check it here <a href="https://gist.github.com/shalkam/5e68771783b941cc601d2a468589517e" target="_blank" title="https://gist.github.com/shalkam/5e68771783b941cc601d2a468589517e">https://gist.github.com/shalkam/5e68771783b941cc601d2a468589517e</a></p>



<a name="153898927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153898927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153898927">(Jul 28 2017 at 01:38)</a>:</h4>
<p>I've set up a full stack example for a patient resource in node.js using graphql, mongoose and  express<br>
Feel free to check it out <a href="https://github.com/shalkam/gql-fhir-patient-example" target="_blank" title="https://github.com/shalkam/gql-fhir-patient-example">https://github.com/shalkam/gql-fhir-patient-example</a></p>



<a name="153903989"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153903989" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abbie Watson <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153903989">(Aug 29 2017 at 22:52)</a>:</h4>
<p>Hi, releasing a proposal for an Apollo on FHIR architecture.  Integrated database proxy with Meteor on FHIR backend that serves up GraphQL queries.  </p>
<p><a href="https://medium.com/@awatson1978/apollo-on-fhir-architecture-3d5bf4d0fc97" target="_blank" title="https://medium.com/@awatson1978/apollo-on-fhir-architecture-3d5bf4d0fc97">https://medium.com/@awatson1978/apollo-on-fhir-architecture-3d5bf4d0fc97</a></p>
<p><a href="/user_uploads/10155/RzwM95w4zsPeebHi4ZBdlLeK/Apollo-on-FHIR-Architecture.png" target="_blank" title="Apollo-on-FHIR-Architecture.png">Apollo-on-FHIR-Architecture.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/RzwM95w4zsPeebHi4ZBdlLeK/Apollo-on-FHIR-Architecture.png" target="_blank" title="Apollo-on-FHIR-Architecture.png"><img src="/user_uploads/10155/RzwM95w4zsPeebHi4ZBdlLeK/Apollo-on-FHIR-Architecture.png"></a></div>



<a name="153910031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153910031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Peretokin <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153910031">(Sep 23 2017 at 06:21)</a>:</h4>
<p><a href="https://github.com/facebook/graphql/issues/351" target="_blank" title="https://github.com/facebook/graphql/issues/351">https://github.com/facebook/graphql/issues/351</a> [GraphQL Patent Infringement Issues] just a heads up</p>



<a name="153916382"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153916382" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153916382">(Oct 27 2017 at 08:36)</a>:</h4>
<p>Follow up: <a href="http://www.healthintersections.com.au/?p=2740" target="_blank" title="http://www.healthintersections.com.au/?p=2740">http://www.healthintersections.com.au/?p=2740</a></p>



<a name="153929619"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153929619" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karlo Martinez <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153929619">(Jan 19 2018 at 15:02)</a>:</h4>
<p><span class="user-mention" data-user-id="191678">@Abigail Watson</span> I read the article you wrote and  found it helpful for my current project. What I found most interesting where the graphics. I wonder, what tool where used to create them?</p>



<a name="153929620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153929620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karlo Martinez <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153929620">(Jan 19 2018 at 15:07)</a>:</h4>
<p><span class="user-mention" data-user-id="193512">@Mostafa Sholkamy</span> </p>
<blockquote>
<p>I've set up a full stack example for a patient resource in node.js using graphql, mongoose and  express<br>
Feel free to check it out <a href="https://github.com/shalkam/gql-fhir-patient-example" target="_blank" title="https://github.com/shalkam/gql-fhir-patient-example">https://github.com/shalkam/gql-fhir-patient-example</a></p>
</blockquote>
<p>Would it be possible that you forgot to push your commits to Github? I found the repository to be empty upon entering.</p>



<a name="153929622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153929622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karlo Martinez <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153929622">(Jan 19 2018 at 15:17)</a>:</h4>
<p>Hi there, I am Karlo Martínez from Puerto Rico. I am looking to use FHIR in a GraphQL server implementation and am having trouble figuring out the spec and found, through reading the topic thread that there might already exists resources to make it happen. I have a couple of questions that will help me start in the right direction.</p>
<p>Where can I find the GraphQL Type and Schema definitions for the resources?<br>
is there a particular reason why the wiki describes the usage in a REST-like manner? Meaning that there are multiple endpoints each for the different resources.</p>



<a name="153929754"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153929754" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153929754">(Jan 20 2018 at 00:30)</a>:</h4>
<p>have you read <a href="http://build.fhir.org/graphql.html" target="_blank" title="http://build.fhir.org/graphql.html">this</a></p>



<a name="153929917"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153929917" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karlo Martinez <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153929917">(Jan 22 2018 at 11:20)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191401">@Eric Haas</span> . Yes, I have for the most part. I am familiar with GraphQL, contrary to FHIR which I just recently got involved due to my employment. I have read through the thread and found some answers. I have never seen a GraphQL API that has multiple endpoints such as it's described. And would have also expected to find url's to the schemas in the documentation from previous works.</p>



<a name="153929918"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153929918" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153929918">(Jan 22 2018 at 12:45)</a>:</h4>
<p>you don't need to make use of the multiple end-points - you can only use the base on if you want</p>



<a name="153929919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153929919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153929919">(Jan 22 2018 at 12:47)</a>:</h4>
<p>for the schema: <a href="http://build.fhir.org/patient.graphql" target="_blank" title="http://build.fhir.org/patient.graphql">http://build.fhir.org/patient.graphql</a> , etc. I haven't got around to integrating all the schemas yet</p>



<a name="153929930"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153929930" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karlo Martinez <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153929930">(Jan 22 2018 at 13:47)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> </p>
<blockquote>
<p>for the schema: <a href="http://build.fhir.org/patient.graphql" target="_blank" title="http://build.fhir.org/patient.graphql">http://build.fhir.org/patient.graphql</a> , etc. I haven't got around to integrating all the schemas yet</p>
</blockquote>
<p>Thanks, I went and downloaded each one. Kind of troublesome to do by hand. Also rearranged them to be sorted by category, I'd be happy to share a zip file with all the schema's for convenience.</p>



<a name="153929931"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153929931" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karlo Martinez <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153929931">(Jan 22 2018 at 13:49)</a>:</h4>
<blockquote>
<p>you don't need to make use of the multiple end-points - you can only use the base on if you want</p>
</blockquote>
<p>Would this affect our chances of getting the FHIR public API to be HL7 certified, if there is such a thing?</p>



<a name="153930082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/153930082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#153930082">(Jan 22 2018 at 18:51)</a>:</h4>
<p>there is no such thing. but no, you choose what you want to implement - for now. We don't generally make rules like that - it's left to the implementation guides, and we haven't exploded implementation guides constraining graphql usage yet</p>



<a name="154016577"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154016577" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154016577">(Nov 08 2018 at 06:08)</a>:</h4>
<p>GraphQL now is foundation - <a href="https://medium.com/@leeb/introducing-the-graphql-foundation-3235d8186d6d" target="_blank" title="https://medium.com/@leeb/introducing-the-graphql-foundation-3235d8186d6d">https://medium.com/@leeb/introducing-the-graphql-foundation-3235d8186d6d</a></p>



<a name="154642977"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154642977" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154642977">(Jan 08 2019 at 13:09)</a>:</h4>
<p>Hello, when we started our development on FHIR GraphQL, we found on github an interesting project from Asymmetrik. Their implementation give a complete GraphQL definition of FHIR resources.: <a href="https://github.com/Asymmetrik/graphql-fhir" target="_blank" title="https://github.com/Asymmetrik/graphql-fhir">https://github.com/Asymmetrik/graphql-fhir</a>.</p>



<a name="154644362"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154644362" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154644362">(Jan 08 2019 at 13:30)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="198505">@Michele Korell</span>, thanks for checking us out. Just wanted to let everyone know that we are planning on open sourcing GraphQL definitions for all of R4 very soon, and a re-release of 3.0.1 and 1.0.2 with some fixes involving union types (End of the week or early next week). Hope you all find these useful and if you have any feedback, please feel free to reach out to me or <span class="user-mention" data-user-id="195693">@Jon Lee</span> either here or via an issue on Github.</p>



<a name="154656278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154656278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154656278">(Jan 08 2019 at 16:29)</a>:</h4>
<p>Would this be something that would make sense to generate as a reference implementation alongside the Java, C#, Javascript and other reference implementations?</p>



<a name="154663517"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154663517" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154663517">(Jan 08 2019 at 18:03)</a>:</h4>
<p>Yea absolutely</p>



<a name="154664193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154664193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154664193">(Jan 08 2019 at 18:13)</a>:</h4>
<p>Anything we can do to help get that started?</p>



<a name="154665121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154665121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154665121">(Jan 08 2019 at 18:26)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, what would we need to be done (beyond an open license)?</p>



<a name="154671397"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154671397" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154671397">(Jan 08 2019 at 19:49)</a>:</h4>
<p>I'm not sure what this is. We already publish graphQL definitions of the resources.</p>



<a name="154730505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154730505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geoffrey BAUDIN <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154730505">(Jan 09 2019 at 15:10)</a>:</h4>
<p>Please can you provide a link where definitions were published ?  I means *.graphql files.</p>



<a name="154781606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154781606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154781606">(Jan 10 2019 at 01:02)</a>:</h4>
<p>I found some definitions of FHIR resource as graphql file (Example: <a href="http://build.fhir.org/observation.graphql" target="_blank" title="http://build.fhir.org/observation.graphql">http://build.fhir.org/observation.graphql</a>) but it is available an endpoint that expose the whole schema? To allow a server work with remote schema definition, like is explained on Apollo GraphQL tools (<a href="https://www.apollographql.com/docs/graphql-tools/schema-stitching.html#remote-schemas" target="_blank" title="https://www.apollographql.com/docs/graphql-tools/schema-stitching.html#remote-schemas">https://www.apollographql.com/docs/graphql-tools/schema-stitching.html#remote-schemas</a>).</p>



<a name="154828869"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154828869" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154828869">(Jan 10 2019 at 10:14)</a>:</h4>
<p>I don't think I gathered them into a whole schema. What is required in it?</p>



<a name="154829389"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/154829389" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#154829389">(Jan 10 2019 at 10:24)</a>:</h4>
<p>Actually I'm looking for GraphQL endpoint (like the example “[base]/$graphql“ defined at <a href="http://build.fhir.org/graphql.html#invoking" target="_blank" title="http://build.fhir.org/graphql.html#invoking">http://build.fhir.org/graphql.html#invoking</a>) to execute an IntrospectionQuery and let me get the whole GraphQL schema. I try with <a href="http://test.fhir.org/r4/$graphql" target="_blank" title="http://test.fhir.org/r4/$graphql">http://test.fhir.org/r4/$graphql</a> but i cannot execute any query. Only queries on selected resource are working, for example:  <a href="http://test.fhir.org/r4/Patient/8/$graphql?query={id%20name{text,given,family}}" target="_blank" title="http://test.fhir.org/r4/Patient/8/$graphql?query={id%20name{text,given,family}}">http://test.fhir.org/r4/Patient/8/$graphql?query={id%20name{text,given,family}}</a></p>
<p>The following http query doesn't work:<br>
POST /r4/$graphql HTTP/1.1<br>
Host: <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a><br>
Content-Type: application/json<br>
{"query":"Patient(id:\"8\"){id name { text given family}}"}</p>



<a name="155340449"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/155340449" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#155340449">(Jan 17 2019 at 14:50)</a>:</h4>
<p>If there is anything we can do to help with this, we would love to contribute where appropriate. Unfortunately (or fortunately if your a javascript developer), all of our schemas are written as JS files, not .graphql files so the files themselves are specific to the node.js ecosystem. You could start the server and  run an introspectionQuery against it to get the full schema in .graphql syntax though.  We could do this and include those GraphQL files on Github but they are pretty large for a full server.</p>
<p>I did notice something in the observation.graphql and bundle.graphql files that <em>may</em> cause issues when used in GraphQL. The BundleEntry contains a resource property of type Resource. While this is what is defined in the spec, in GraphQL, this means you can only include the exact resource object, so you would not be able to return Patient and Observation or any other, just what is defined here, <a href="http://build.fhir.org/resource.html" target="_blank" title="http://build.fhir.org/resource.html">http://build.fhir.org/resource.html</a>.</p>
<p>Same thing with an Observation and any property of type Reference. We had to define them as strings on inputs when performing mutations, but on outputs, a.k.a. schemas, we define them as unions. For example, an Observation.subject can return with a resource of type patient, group, device, or location. So we have an inline union that checks the resource type and returns one of those four types to take advantage of result coercion.</p>



<a name="155341863"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/155341863" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#155341863">(Jan 17 2019 at 15:07)</a>:</h4>
<blockquote>
<p>POST /r4/$graphql HTTP/1.1<br>
Host: <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a><br>
Content-Type: application/json<br>
{"query":"Patient(id:\"8\"){id name { text given family}}"}</p>
</blockquote>
<p>That's supposed to work</p>



<a name="155343248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/155343248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#155343248">(Jan 17 2019 at 15:22)</a>:</h4>
<p>apparently I overlooked implementing that. I will work on it</p>



<a name="155356363"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/155356363" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#155356363">(Jan 17 2019 at 18:18)</a>:</h4>
<p>no, this is actually a formatting issue. I'm expecting, from the graphql spec, to get this:</p>



<a name="155356376"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/155356376" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#155356376">(Jan 17 2019 at 18:19)</a>:</h4>
<p><code>{"query":"{ Patient(id:\"8\"){id name { text given family}} }"}</code></p>



<a name="155356401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/155356401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#155356401">(Jan 17 2019 at 18:19)</a>:</h4>
<ul>
<li>note wrapping {}. My parser is not knowing how to parse with out the {}</li>
</ul>



<a name="155356496"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/155356496" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rick Geimer <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#155356496">(Jan 17 2019 at 18:20)</a>:</h4>
<p>(deleted)</p>



<a name="155356520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/155356520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#155356520">(Jan 17 2019 at 18:21)</a>:</h4>
<p>yes that bit</p>



<a name="159665666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159665666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159665666">(Mar 01 2019 at 00:09)</a>:</h4>
<p>Hello, I've executed some test with  <a href="http://test.fhir.org/r4/$graphql" target="_blank" title="http://test.fhir.org/r4/$graphql">http://test.fhir.org/r4/$graphql</a> endpoint and it is working as described in a previus post. But I've tried to introspect GraphQL schema against the same endpoint but without success. Normally it is suppose to return graphql schema of available queries and mutations, but actually i get an empty json with { "data" : { } }. They are a particular reason that introspection is not supported? <br>
By the way  there  is a new interesting project that contains all classes definitions  in typescript of fhir resources (<a href="https://github.com/Ahryman40k/typescript-fhir-types" target="_blank" title="https://github.com/Ahryman40k/typescript-fhir-types">https://github.com/Ahryman40k/typescript-fhir-types</a>). It is generated by using official fhir json definition (the one that can be download here: <a href="https://www.hl7.org/fhir/downloads.html" target="_blank" title="https://www.hl7.org/fhir/downloads.html">https://www.hl7.org/fhir/downloads.html</a>) and we use it to wrap GraphQL fhir queries responses.</p>



<a name="159680516"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159680516" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159680516">(Mar 01 2019 at 05:37)</a>:</h4>
<p>it looks like I haven't got around to doing introspection. I'll investigate</p>



<a name="159721216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159721216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159721216">(Mar 01 2019 at 15:08)</a>:</h4>
<p>I think that GraphQL schema introspection permit to get the CapabilityStatement of the server, but directly with server's integrated graphql-tools. In this way we doesn't have to write some logic that can retrieve capabilities of following endpoints. Micro services can be connected between each others trough schema stitching and introspection allow delegation of some operations. For example in a system that manage procedure, but doesn't has locally informations about Patients, it can directly delegate the resolution to right endpoint (only if it provide GraphQL interface).<br>
Interesting links (we implemented our system like hasura example): </p>
<ul>
<li><a href="https://blog.hasura.io/the-ultimate-guide-to-schema-stitching-in-graphql-f30178ac0072/#0e66" target="_blank" title="https://blog.hasura.io/the-ultimate-guide-to-schema-stitching-in-graphql-f30178ac0072/#0e66">https://blog.hasura.io/the-ultimate-guide-to-schema-stitching-in-graphql-f30178ac0072/#0e66</a></li>
<li><a href="https://graphql.org/learn/introspection/" target="_blank" title="https://graphql.org/learn/introspection/">https://graphql.org/learn/introspection/</a></li>
<li><a href="https://www.apollographql.com/docs/graphql-tools/schema-stitching.html#mergeSchemas" target="_blank" title="https://www.apollographql.com/docs/graphql-tools/schema-stitching.html#mergeSchemas">https://www.apollographql.com/docs/graphql-tools/schema-stitching.html#mergeSchemas</a></li>
</ul>



<a name="159738543"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159738543" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159738543">(Mar 01 2019 at 18:49)</a>:</h4>
<p>I understand why it would be useful</p>



<a name="159746262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159746262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoltan Simon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159746262">(Mar 01 2019 at 20:28)</a>:</h4>
<p>Hi , I am just about on the journey of setting a  hasura - fhirbase server for proof of concept... I have an  questions on a similar topic in the fhirbase stream. The missing feature for doing it, is on hasura's backlog already. In the meantime I am looking for alternatives such us <a href="http://prisma.io" target="_blank" title="http://prisma.io">prisma.io</a>. For that, I am trying to generate the graphql.types from json schemas... Btw is there already graphQL types officially released? I am also new to this domain so any advise or experience could be helpful. Thank you</p>



<a name="159753534"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159753534" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159753534">(Mar 01 2019 at 22:05)</a>:</h4>
<p>you can get grapql definitions for the json representation of the resources at <a href="http://build.fhir.org/observation.graphql" target="_blank" title="http://build.fhir.org/observation.graphql">http://build.fhir.org/observation.graphql</a> (or similar pattern)</p>



<a name="159753542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159753542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159753542">(Mar 01 2019 at 22:05)</a>:</h4>
<p>We get the actual schema from build fhir server, for example you can get the procedure schema at  <a href="http://build.fhir.org/procedure.graphql" target="_blank" title="http://build.fhir.org/procedure.graphql">http://build.fhir.org/procedure.graphql</a> endpoint.  Or you can donfload the Asymmetrik implementation from git (<a href="https://github.com/Asymmetrik/graphql-fhir" target="_blank" title="https://github.com/Asymmetrik/graphql-fhir">https://github.com/Asymmetrik/graphql-fhir</a>),  run the server and use graphql/utilities and use printSchema ( <a href="https://graphql.org/graphql-js/utilities/#printschema" target="_blank" title="https://graphql.org/graphql-js/utilities/#printschema">https://graphql.org/graphql-js/utilities/#printschema</a>) to generate  the whole schema in a single file. The only inconvenient is that the output file has 127'473 lines.</p>



<a name="159753786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159753786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoltan Simon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159753786">(Mar 01 2019 at 22:09)</a>:</h4>
<p>Thx, You saved me a lot of time :) Let's see what will work (or not) on this "zero effort" server experiment.</p>



<a name="159754654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159754654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoltan Simon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159754654">(Mar 01 2019 at 22:21)</a>:</h4>
<p><span class="user-mention" data-user-id="198505">@Michele Korell</span>  - Thx, I found the Asymmetrik stack too. It looks like an "interpretation / implementation done". Using the #printschema tool would be a reverse engineering  or kind of. I would go for a solution where I can have a "golden source" schema that I can load on the server. This way I would get better  <em>compliance</em>.  An option would be just go with the Asymmetrik stack and follow their way instead of building one. <em>I am on the first phase, learning &amp; understanding fhir, trying to convert magic to knowledge.</em> I might end up on the stack anyway..</p>



<a name="159755172"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159755172" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159755172">(Mar 01 2019 at 22:30)</a>:</h4>
<p>We used asymmetrik implementation as mock server between front-end and back-end. We put json resources examples of our implementation guide at resource resolvers. The graphql server example is also cool because it implements the OAuth2 SMART strategy (<a href="https://github.com/Asymmetrik/graphql-fhir/blob/master/FAQ.md#authentication" target="_blank" title="https://github.com/Asymmetrik/graphql-fhir/blob/master/FAQ.md#authentication">https://github.com/Asymmetrik/graphql-fhir/blob/master/FAQ.md#authentication</a>).</p>



<a name="159756279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159756279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zoltan Simon <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159756279">(Mar 01 2019 at 22:46)</a>:</h4>
<p>Yes asymmetrik stack looks solid. I am working in the Danish space (NemID auth) and I am also planning to build a React App on top of the stack. This  SMART <em>strategy</em>  is talking about jquery and plain html and iframes, not sure how much can be applied. (I might misunderstand it, lot to learn in this space...)</p>



<a name="159756761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159756761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159756761">(Mar 01 2019 at 22:54)</a>:</h4>
<p>Our setup are Angular and iOS app at front-end and using apollo graphql client. So at backend we decided to provide the SMART on FHIR auth strategy, GraphQL interface and optional RESTful endpoint if needed for external providers.</p>



<a name="159892714"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159892714" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159892714">(Mar 04 2019 at 07:30)</a>:</h4>
<p>Hello, i've tried to run the graphql schemas get from <a href="http://build.fhir.org" target="_blank" title="http://build.fhir.org">build.fhir.org</a> site with an Apollo GraphQL server but they are some problems:</p>
<ul>
<li>At the type ElementBase, property extension :  [Extension] {  &lt;- this open bracket cause error.</li>
<li>input type have the same name as type, this generate an error because it is a double generation. As is explained at <a href="https://graphql.org/learn/schema/#input-types" target="_blank" title="https://graphql.org/learn/schema/#input-types">https://graphql.org/learn/schema/#input-types</a> for an input type we cannot mix with type, so when is a double declaration the system can't differentiate.</li>
<li>Queries are defined as type. For example inside patient.graphql we can find:<br>
type PatientReadType {<br>
  Patient(id : ID!) : Patient<br>
}<br>
But for GraphQL they are two special types, Query and Mutation who are the only can have this kind of declarations, something like this:<br>
extend type Query {<br>
  Patient(id:ID!): Patient<br>
}</li>
</ul>
<p>And just define an empty base type Query inside types.graphql:<br>
type Query {<br>
    _empty: String<br>
  }<br>
(Has to be tested)</p>



<a name="159918879"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159918879" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159918879">(Mar 04 2019 at 14:46)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="198505">@Michele Korell</span> and <span class="user-mention" data-user-id="209208">@Zoltan Simon</span>, I am the lead developer building the Asymmetrik GraphQL FHIR server example and would love to hear any feedback you guys have for us on how it's been working for you or if there is anything else we can add that would be helpful. I'll admit, the single schema is massive (I use Atom text editor and it frequently crashed trying to do syntax highlighting on that), would it be better if we offered a way to grab schemas for individual resources? We are generating a lot of code from structure definitions (everything in resources folder is 100% generated and everything else is more custom) so generating additional things would not be very difficult for us.</p>



<a name="159927079"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159927079" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159927079">(Mar 04 2019 at 16:24)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="196306">@Robert Winterbottom</span> , I've a question about your generation, inside R4 release i see that you limit the resource extension for reference into a union, from which fhir definition you get these infos? Inside full JSON definition we didn't find that.</p>
<p>For example from your R4 schema:<br>
"""<br>
This observation is a group observation (e.g. a battery, a panel of tests, a set<br>
of vital sign measurements) that includes the target as a member of the group.<br>
"""<br>
union ObservationhasMember_hasMember_Union = Observation | QuestionnaireResponse | MolecularSequence</p>
<p>We are just looking how to implement resources validation layer whit our internal FHIR implementation guide.</p>



<a name="159932379"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159932379" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159932379">(Mar 04 2019 at 17:31)</a>:</h4>
<p>Ahh yes, this was a recent update in our code generator. Our first pass on code generation used JSON schemas but we found more useful information when parsing structure definitions.  So in our V2, we download the JSON version of FHIR definitions from here, <a href="https://www.hl7.org/fhir/downloads.html" target="_blank" title="https://www.hl7.org/fhir/downloads.html">https://www.hl7.org/fhir/downloads.html</a>, not the JSON schemas but the JSON representation of the structure definitions (for this case specifically profiles-resources.json and profiles-types.json). These include information specifying which types of references are allowed, which, in this case, you can see here, <a href="https://www.hl7.org/fhir/observation-definitions.html#Observation.hasMember" target="_blank" title="https://www.hl7.org/fhir/observation-definitions.html#Observation.hasMember">https://www.hl7.org/fhir/observation-definitions.html#Observation.hasMember</a>. It specifies the type is reference, and specifically one of Observation, QuestionnaireResponse, or MolecularSequence.</p>



<a name="159934576"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159934576" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159934576">(Mar 04 2019 at 17:58)</a>:</h4>
<p>Validation was actually one of the reasons we started moving away from JSON schemas, we just found the structure definitions have much more info and actually worked a lot better in our code generator.  If you are going to be in Washington for DevDays at the Microsoft Campus, I believe my colleague Jon and myself are going to be giving a talk on code generation at a higher level and what problems we think it can solve.</p>



<a name="159942569"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159942569" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159942569">(Mar 04 2019 at 19:30)</a>:</h4>
<p>You did a very good job! I was thinking that you used the structure definition. Actually we are developing a lot of microservices and we rely on GraphQL schema stitching to distribute the types, queries and mutations. <br>
For the DevDays unfortunately our hospital is based in Switzerland and at the moment is not planned to go at kind of events. Maybe in the future...</p>



<a name="159949761"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/159949761" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#159949761">(Mar 04 2019 at 20:54)</a>:</h4>
<p>Nice, schema stitching is a very interesting concept.  We generated a massive schema for the open source version but our code generator does some more advanced things, such as generating code for custom profiles to make a much smaller/lighter server implementation.  I can add a note to look into exposing the files individually per resource for one of our upcoming sprints since it should be a light lift to add it.  We are trying to add features consistently while working on our enterprise version for either the June dev days or the November one in Amsterdam.</p>



<a name="162091568"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162091568" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162091568">(Mar 29 2019 at 23:19)</a>:</h4>
<p>Hello,  <br>
I started to build an example server for Patient resource with Apollo GraphQL. I get the Patient GraphQL schema from <a href="http://build.fhir.org/patient.graphql" target="_blank" title="http://build.fhir.org/patient.graphql">http://build.fhir.org/patient.graphql</a>. As reported before I had to correct a lot of error in the schema, add Patient to Query type to permit to execute patient query and spend a lot of time to correct base data types. Actually is just an example and it doesn't support full CRUD. I've published the result at <a href="https://github.com/michelekorell/patient-fhir-graphql" target="_blank" title="https://github.com/michelekorell/patient-fhir-graphql">https://github.com/michelekorell/patient-fhir-graphql</a> and you can find the GraphQL schema at <a href="https://github.com/michelekorell/patient-fhir-graphql/blob/master/src/graphql/patient.ts" target="_blank" title="https://github.com/michelekorell/patient-fhir-graphql/blob/master/src/graphql/patient.ts">https://github.com/michelekorell/patient-fhir-graphql/blob/master/src/graphql/patient.ts</a> <br>
I think that it can be a good idea if we discuss about graphql specs and how define graphql to let working with common project like GraphCool, Prisma, Apollo, ... Actually the specs that can be found on <a href="http://build.fhir.org" target="_blank" title="http://build.fhir.org">build.fhir.org</a> can't be used directly. I have the impression that schemas are automatically generated, so:</p>
<ul>
<li>there is a section in github that contain this code? </li>
<li>We can participate to fix some problems?</li>
</ul>
<p>Bye!</p>



<a name="162147893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162147893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162147893">(Mar 31 2019 at 01:06)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I think you've done this generation for the spec?</p>



<a name="162150940"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162150940" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162150940">(Mar 31 2019 at 02:30)</a>:</h4>
<p>yes this is on my list to investigtae</p>



<a name="162212678"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162212678" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162212678">(Apr 01 2019 at 06:25)</a>:</h4>
<p>Actually we are looking how to generate the schema starting from resource sd. One of our colleague already developed a generator to create fhir resources from the json definitions, so I can look with him to add some templates to generate the graphql spec. This week I go to discuss with other implementers at our annual hl7 swiss meeting about graphql.</p>



<a name="162213173"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162213173" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162213173">(Apr 01 2019 at 06:36)</a>:</h4>
<p>you have an annual swiss hl7 meeting about graphQL?</p>



<a name="162213205"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162213205" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162213205">(Apr 01 2019 at 06:37)</a>:</h4>
<p>It is not about GraphQL, but Oliver Egger invite me to discuss about our work during the mini connectathon at morning session. How I wrote before it wasn't clear.</p>



<a name="162213584"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162213584" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162213584">(Apr 01 2019 at 06:47)</a>:</h4>
<p>ok thx. I will look into this tonight</p>



<a name="162220422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162220422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162220422">(Apr 01 2019 at 09:00)</a>:</h4>
<p>... and in types.graphql</p>



<a name="162220476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162220476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162220476">(Apr 01 2019 at 09:00)</a>:</h4>
<p>ok. I can easy fix teh ElementBase declaration</p>



<a name="162220504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162220504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162220504">(Apr 01 2019 at 09:00)</a>:</h4>
<blockquote>
<p>input type have the same name as type,</p>
</blockquote>
<p>where exactly is this error?</p>



<a name="162221291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162221291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162221291">(Apr 01 2019 at 09:13)</a>:</h4>
<p>This is a global problem, in GraphQL definition we cannot specify the same name for input and type because this create a circular reference. common implementations cannot handle this case. For example in my apollo graphql test implementation I removed all the input types to permit to use the schema. (see <a href="https://stackoverflow.com/a/41515879" target="_blank" title="https://stackoverflow.com/a/41515879">https://stackoverflow.com/a/41515879</a> as explanation)</p>



<a name="162221364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162221364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162221364">(Apr 01 2019 at 09:14)</a>:</h4>
<p>so what wasn't clear is where my schema actually does that</p>



<a name="162221562"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162221562" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162221562">(Apr 01 2019 at 09:16)</a>:</h4>
<p>Actually for example at patient.graphql whe have:</p>
<ul>
<li>
<p>type Patient { ... } at line 3<br>
and after:</p>
</li>
<li>
<p>input Patient {...} at line 61</p>
</li>
</ul>



<a name="162221645"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162221645" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162221645">(Apr 01 2019 at 09:18)</a>:</h4>
<p>uh that's a generation error -they are identical, no?</p>



<a name="162221675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162221675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162221675">(Apr 01 2019 at 09:18)</a>:</h4>
<p>no type vs input. so I need to namespace the input types?</p>



<a name="162221712"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162221712" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162221712">(Apr 01 2019 at 09:19)</a>:</h4>
<p>The specification advice to put Input after the resource name (<a href="https://graphql.org/learn/schema/#input-types" target="_blank" title="https://graphql.org/learn/schema/#input-types">https://graphql.org/learn/schema/#input-types</a>)</p>



<a name="162221838"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162221838" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162221838">(Apr 01 2019 at 09:21)</a>:</h4>
<p>ok. I sorted that.</p>



<a name="162221890"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162221890" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162221890">(Apr 01 2019 at 09:21)</a>:</h4>
<p>so I don't understand your 3rd issue either</p>



<a name="162221974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162221974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162221974">(Apr 01 2019 at 09:22)</a>:</h4>
<p>I found other error at line 229 of patient.graphql: PatientUpdate(id: IDresource: Patient): PatientUpdate  -&gt; after ID type they is not comma before resource.</p>



<a name="162222064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222064">(Apr 01 2019 at 09:24)</a>:</h4>
<p>k. anything more?</p>



<a name="162222071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222071">(Apr 01 2019 at 09:24)</a>:</h4>
<p>I'm looking with a colleague</p>



<a name="162222181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222181">(Apr 01 2019 at 09:26)</a>:</h4>
<p>k. I'll send you a regenerated patient.graphQl shortly.</p>



<a name="162222184"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222184" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222184">(Apr 01 2019 at 09:26)</a>:</h4>
<p>Maybe I miss understand how implements queries inside type definition.</p>



<a name="162222191"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222191" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222191">(Apr 01 2019 at 09:26)</a>:</h4>
<p>but also, seems like you want a single fhir.graphql for all resources?</p>



<a name="162222335"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222335" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222335">(Apr 01 2019 at 09:28)</a>:</h4>
<p>It can be useful to create a complete server with standard libs like apollo, but not required</p>



<a name="162222377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222377">(Apr 01 2019 at 09:29)</a>:</h4>
<p>with node package graphql-tools we can load all .graphql separately</p>



<a name="162222459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222459">(Apr 01 2019 at 09:30)</a>:</h4>
<p><a href="/user_uploads/10155/X-FXtzE58UG2Cg2DBlD6S_ZT/patient.graphql" target="_blank" title="patient.graphql">patient.graphql</a></p>



<a name="162222597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222597">(Apr 01 2019 at 09:32)</a>:</h4>
<p>Starting from line 124 for query PatientList is a space after each argument and before the ':'</p>



<a name="162222631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222631">(Apr 01 2019 at 09:33)</a>:</h4>
<p>there shouldn't be?</p>



<a name="162222720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222720">(Apr 01 2019 at 09:34)</a>:</h4>
<p><a href="/user_uploads/10155/c_bSdBlAzcfR0N3NJKfdsZTG/patient.graphql" target="_blank" title="patient.graphql">patient.graphql</a></p>



<a name="162222753"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222753" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222753">(Apr 01 2019 at 09:35)</a>:</h4>
<p>Now I'm trying to modify my sample Patient server to use it</p>



<a name="162222795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222795">(Apr 01 2019 at 09:36)</a>:</h4>
<p>I feel as though it violates all specification logic that the space matters</p>



<a name="162222888"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222888" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222888">(Apr 01 2019 at 09:37)</a>:</h4>
<p>still, it's not hard to remove them:</p>



<a name="162222898"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222898" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222898">(Apr 01 2019 at 09:37)</a>:</h4>
<p>We have to ask to facebook they do like that</p>



<a name="162222988"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162222988" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162222988">(Apr 01 2019 at 09:38)</a>:</h4>
<p><a href="/user_uploads/10155/g538RbeVekeFknm3jHr_lFYb/patient.graphql" target="_blank" title="patient.graphql">patient.graphql</a></p>



<a name="162223167"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162223167" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162223167">(Apr 01 2019 at 09:41)</a>:</h4>
<p>the parser of vscode like it better! thanks a lot. Now I try to integrate it inside my test server</p>



<a name="162223315"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162223315" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162223315">(Apr 01 2019 at 09:43)</a>:</h4>
<p>ok. let me know if there's more, and then we'll schedule this as an R4 technical correction</p>



<a name="162223762"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162223762" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162223762">(Apr 01 2019 at 09:51)</a>:</h4>
<p>line 90 input PatientContact was not generated as PatientContactInput</p>



<a name="162223858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162223858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162223858">(Apr 01 2019 at 09:53)</a>:</h4>
<p>same for input PatientCommunication and PatientLink</p>



<a name="162224200"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162224200" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162224200">(Apr 01 2019 at 09:59)</a>:</h4>
<p>I think is more complicated, by i corrected it by hand and actually all resources specified inside PatientInput has to be as input type. So for type HumanName i have to wrote an HumanNameInput that is used by PatientInput</p>



<a name="162224291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162224291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162224291">(Apr 01 2019 at 10:00)</a>:</h4>
<p>I have to fix by hand all data types before try to run my sample server</p>



<a name="162224408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162224408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162224408">(Apr 01 2019 at 10:02)</a>:</h4>
<p>They are some log when i try to run the apollo-server with this schema:<br>
  The type of PatientInput.generalPractitioner must be Input Type but got: [Reference].<br>
  The type of PatientInput.managingOrganization must be Input Type but got: Reference.<br>
  The type of PatientInput.link must be Input Type but got: [PatientLink].</p>



<a name="162224502"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162224502" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162224502">(Apr 01 2019 at 10:04)</a>:</h4>
<p>Once the schema is ok, I can implement a server that permit introspection of official fhir-graphql schema definitions.</p>



<a name="162232354"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162232354" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162232354">(Apr 01 2019 at 12:13)</a>:</h4>
<p>duh. I think I chased everything down here:</p>



<a name="162232418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162232418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162232418">(Apr 01 2019 at 12:14)</a>:</h4>
<p><a href="/user_uploads/10155/9gI0ctrD5BdVYhEky7D3ktFc/patient.graphql" target="_blank" title="patient.graphql">patient.graphql</a></p>



<a name="162232426"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162232426" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162232426">(Apr 01 2019 at 12:14)</a>:</h4>
<p><a href="/user_uploads/10155/6rIFjAfgIM15dsqcxZrTRuRs/types.graphql" target="_blank" title="types.graphql">types.graphql</a></p>



<a name="162237473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162237473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162237473">(Apr 01 2019 at 13:16)</a>:</h4>
<p>Hello thanks a lot!<br>
They are some small errors for the types.graphql:</p>
<ul>
<li>scalar is written starting with uppercase</li>
<li>ElementBase there is no definition for ElementBaseInput</li>
<li>at line 27 date scalar is defined a second time</li>
<li>at line 33 the uri scalar is defined a second time</li>
<li>at line 1072 url: null -&gt; url: uri!</li>
<li>at line 1126 url: nullInput! -&gt; url: uri!</li>
<li>at line 1183 given inside HumanName is not an array</li>
<li>at line 1195 same for HumanNameInput</li>
</ul>



<a name="162243310"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/162243310" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#162243310">(Apr 01 2019 at 14:21)</a>:</h4>
<p>Hello, here is the file i create starting from patient.graphql and types.graphql to let my sample server work. I've committed the last modification of my sample server on github.<br>
<a href="/user_uploads/10155/8semP-dfKbYfjJFBbn86MGtp/patient-sample-srv.graphql" target="_blank" title="patient-sample-srv.graphql">patient-sample-srv.graphql</a></p>



<a name="165621689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/165621689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> VP Herisse <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#165621689">(May 14 2019 at 13:25)</a>:</h4>
<p>(deleted)</p>



<a name="165622050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/165622050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> VP Herisse <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#165622050">(May 14 2019 at 13:28)</a>:</h4>
<p>(deleted)</p>



<a name="165622127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/165622127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> VP Herisse <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#165622127">(May 14 2019 at 13:29)</a>:</h4>
<blockquote>
<p>Hello, I've executed some test with  <a href="http://test.fhir.org/r4/$graphql" target="_blank" title="http://test.fhir.org/r4/$graphql">http://test.fhir.org/r4/$graphql</a> endpoint and it is working as described in a previus post. But I've tried to introspect GraphQL schema against the same endpoint but without success. Normally it is suppose to return graphql schema of available queries and mutations, but actually i get an empty json with { "data" : { } }. They are a particular reason that introspection is not supported? <br>
By the way  there  is a new interesting project that contains all classes definitions  in typescript of fhir resources (<a href="https://github.com/Ahryman40k/typescript-fhir-types" target="_blank" title="https://github.com/Ahryman40k/typescript-fhir-types">https://github.com/Ahryman40k/typescript-fhir-types</a>). It is generated by using official fhir json definition (the one that can be download here: <a href="https://www.hl7.org/fhir/downloads.html" target="_blank" title="https://www.hl7.org/fhir/downloads.html">https://www.hl7.org/fhir/downloads.html</a>) and we use it to wrap GraphQL fhir queries responses.</p>
</blockquote>
<p>Was looking for this all over google, Thank you Michele! :)</p>



<a name="167648794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167648794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167648794">(Jun 08 2019 at 12:15)</a>:</h4>
<p><span class="user-mention" data-user-id="198505">@Michele Korell</span> I am interested in your efforts for generating GraphQL types out of JSON ( it would equal structure definition resource I think ).<br>
Right now I am working on stuff that may this process easier it's for node.js for now, this is still in a very early stage both not completely done.<br>
- graphql-fhir-directives <a href="https://github.com/shalkam/graphql-fhir-directives" target="_blank" title="https://github.com/shalkam/graphql-fhir-directives">https://github.com/shalkam/graphql-fhir-directives</a> with aim to include all profiling capabilities into graphql schema.<br>
it now has <code>@card</code> which adds <code>min</code> and <code>max</code> for arrays and <code>@binding</code> directives which gets a code system json convert the field into enum type.</p>
<ul>
<li><a href="https://github.com/shalkam/graphql-fhir-primitive-types" target="_blank" title="https://github.com/shalkam/graphql-fhir-primitive-types">https://github.com/shalkam/graphql-fhir-primitive-types</a> this one adds primitive fields as defined in FHIR specs along with their resolvers.</li>
</ul>



<a name="167661984"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167661984" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167661984">(Jun 08 2019 at 18:26)</a>:</h4>
<p>We started the implementation of GraphQL in Aidbox - interested in this topic as well.</p>



<a name="167675786"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167675786" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167675786">(Jun 09 2019 at 00:53)</a>:</h4>
<p>Why are you generating the graphql types?</p>



<a name="167687491"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167687491" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167687491">(Jun 09 2019 at 07:07)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Most of the primitive data type in FHIR doesn't have their corresponding types in GraphQL, for example:-<br>
- We have different kinds of Integers values like <code>positiveInt</code>, <code>unsignedInt</code> and plain <code>integer</code><br>
- Same goes for <code>string</code> type we have also many sub-types basically with some regex on top</p>
<p>So, graphQL SDL (Schema definition language ) gives us the option to declare <code>scalar</code> ( = primitive )  types like this :-</p>
<div class="codehilite"><pre><span></span>scalar positiveInt
</pre></div>


<p>And a resolver for this type can be implemented for any graphQL server implementation in any language.<br>
And example for node.js</p>
<div class="codehilite"><pre><span></span>import { GraphQLScalarType } from &#39;graphql&#39;
import { GraphQLError } from &#39;graphql/error&#39;
import { Kind } from &#39;graphql/language&#39;

export default new GraphQLScalarType({
  name: &#39;positiveInt&#39;,
  description: &#39;an integer with value more than zero&#39;,
  serialize: value =&gt; {
    return value
  },
  parseValue: value =&gt; {
    return value
  },
  parseLiteral: ast =&gt; {
    if (ast.kind !== Kind.INT) {
      throw new GraphQLError(
        &#39;Query error: Can only parse integers got a: &#39; + ast.kind,
        [ast]
      )
    }
    if (!(ast.value &gt; 0)) {
      throw new GraphQLError(&#39;Query error: Not a valid positive integer&#39;, [ast])
    }

    return ast.value
  }
})
</pre></div>


<p>Notice we just add validation that it's an integer and the value is more zero.<br>
So, this is a declarative straight-forward way to represent FHIR data types and eventually resources using purely GraphQL SDL without any programming languages involved.<br>
Only later on developers will implement resolvers  for these based on FHIR specs and their favorite programming language</p>



<a name="167687554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167687554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167687554">(Jun 09 2019 at 07:09)</a>:</h4>
<p>that wasn't quite what I was asking - we already defined graphql schema - see <a href="http://build.fhir.org/patient.graphql" target="_blank" title="http://build.fhir.org/patient.graphql">http://build.fhir.org/patient.graphql</a> - why not use those?</p>



<a name="167687874"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167687874" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167687874">(Jun 09 2019 at 07:20)</a>:</h4>
<p>Most of primitive types doesn't exist in GraphQL like <code>positiveInt</code>, <code>code</code>, <code>oid</code> ... etc</p>



<a name="167687947"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167687947" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167687947">(Jun 09 2019 at 07:23)</a>:</h4>
<p>For me I may just use it even as a matter of naming to strictly follow FHIR specs, for example I may declare a scalar <code>id</code> in lower case, and just use GraphQL default <code>ID</code> scalar type for the resolver</p>
<div class="codehilite"><pre><span></span>SDL:
scalar id

Resolver:
const { GraphQLID } = require(&#39;graphql&#39;)

module.exports = GraphQLID
</pre></div>



<a name="167692238"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167692238" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167692238">(Jun 09 2019 at 09:41)</a>:</h4>
<p>I'm not sure that's an answer to my question?</p>



<a name="167711882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167711882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167711882">(Jun 09 2019 at 18:42)</a>:</h4>
<blockquote>
<p>that wasn't quite what I was asking - we already defined graphql schema - see <a href="http://build.fhir.org/patient.graphql" target="_blank" title="http://build.fhir.org/patient.graphql">http://build.fhir.org/patient.graphql</a> - why not use those?</p>
</blockquote>
<p>Not sure what do you mean by <code>those</code> here, is it scalar types like :-</p>
<div class="codehilite"><pre><span></span>deceasedDateTime: dateTime
language: code
</pre></div>


<p>or do you mean built-in GraphQL scalar types?</p>



<a name="167711901"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167711901" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167711901">(Jun 09 2019 at 18:43)</a>:</h4>
<p>why not use the graphQL definitions that are defined as part of the FHIR standard?</p>



<a name="167715230"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167715230" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167715230">(Jun 09 2019 at 20:13)</a>:</h4>
<p>If we talk specifically about the <code>patient.graphql</code>, it's incorrect as regard GraphQL syntax.<br>
For these two fields for example:</p>
<div class="codehilite"><pre><span></span>deceasedDateTime: dateTime
language: code
</pre></div>


<p>we need to declare two scalar types: </p>
<div class="codehilite"><pre><span></span>scalar dateTime
scalar code
</pre></div>


<p>Otherwise it will through an error if I put this schema as a part of the server configuration</p>



<a name="167715285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167715285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167715285">(Jun 09 2019 at 20:14)</a>:</h4>
<p>well, let's fix that. are there other issues?</p>



<a name="167715922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167715922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167715922">(Jun 09 2019 at 20:33)</a>:</h4>
<p>I will double check</p>



<a name="167757099"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167757099" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167757099">(Jun 10 2019 at 13:05)</a>:</h4>
<p>does any one know what the right mime type for the graphql schema is ?</p>



<a name="167767856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167767856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Connolly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167767856">(Jun 10 2019 at 15:17)</a>:</h4>
<p>I looked around, but I don't see a mime type for graphql schemas, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span></p>



<a name="167769507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167769507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167769507">(Jun 10 2019 at 15:36)</a>:</h4>
<p>I'll ask on the graphql face book page</p>



<a name="167772756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167772756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167772756">(Jun 10 2019 at 16:15)</a>:</h4>
<p>There is some information on that here, <a href="https://graphql.org/learn/serving-over-http/#post-request" target="_blank" title="https://graphql.org/learn/serving-over-http/#post-request">https://graphql.org/learn/serving-over-http/#post-request</a>, in short, it mentions you should use application/json. However, another option available for post-requests is to use application/graphql. If using application/graphql then you should treat the post body as a graphql query string (however I do not think you can use variables with this approach so application/json is probably better for that reason)</p>



<a name="167778077"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167778077" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167778077">(Jun 10 2019 at 17:27)</a>:</h4>
<p>the schema is not valid json</p>



<a name="167778131"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167778131" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167778131">(Jun 10 2019 at 17:28)</a>:</h4>
<p>I am asking about the schema itself</p>



<a name="167783243"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167783243" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167783243">(Jun 10 2019 at 18:25)</a>:</h4>
<p>ahh right, sorry, I misinterpreted that.  Unfortunately application/graphql is for query strings so that would not fit either.  In the javascript world, they are often treated as strings and then passed into parsers, so I'm not sure what the official mime type would/should be for a .graphql schema. Would be curious to hear what the facebook page says about that as well</p>



<a name="167793296"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167793296" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167793296">(Jun 10 2019 at 20:26)</a>:</h4>
<p>there is no mime type</p>



<a name="167836009"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/167836009" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#167836009">(Jun 11 2019 at 10:05)</a>:</h4>
<p>Hello,  actually the schema I put in my demo <a href="https://github.com/michelekorell/patient-fhir-graphql" target="_blank" title="https://github.com/michelekorell/patient-fhir-graphql">https://github.com/michelekorell/patient-fhir-graphql</a> is a merge of the specifications that we can found on <a href="http://build.fhir.org" target="_blank" title="http://build.fhir.org">build.fhir.org</a>. Some time ago <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>  made some fix and actually it work. The only change I made is to add the Query type that contains resource query.   I think that in official FHIR graphql schemas are some little problem of specification with operation on a resource inside a type definition. But on my point of view the declaration of scalar type is normal. The types are the same specified inside FHIR definition and has to respect the FHIR regex and not to depend on facebook's base type definition. So we can guarantee the interoperability between GraphQL and RESTful interfaces.</p>
<p>After small search for mime type at <a href="https://www.iana.org/assignments/media-types/media-types.xhtml#application" target="_blank" title="https://www.iana.org/assignments/media-types/media-types.xhtml#application">official list</a> I didn't find any specification about graphql. After looking our services requests we can see that a graphql query execute with a POST is an application/json with following structure</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;operationName&quot;</span><span class="p">:</span> <span class="s2">&quot;GetSomeThings&quot;</span><span class="p">,</span>
    <span class="nt">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;query getSome($var:type) {...}&quot;</span><span class="p">,</span>
    <span class="nt">&quot;variables&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;var&quot;</span><span class="p">:</span> <span class="mi">123</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>



<a name="168059685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168059685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168059685">(Jun 13 2019 at 16:11)</a>:</h4>
<p><span class="user-mention" data-user-id="198505">@Michele Korell</span> <span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> <span class="user-mention" data-user-id="196306">@Robert Winterbottom</span> <span class="user-mention" data-user-id="193512">@Mostafa Sholkamy</span> Are we interested in creating a set of test cases based on the resources included in the specifications so that we can check that the graphQL implementations are consistent?</p>



<a name="168061143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168061143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168061143">(Jun 13 2019 at 16:29)</a>:</h4>
<p>Yes, I'm really interested! We currently use a lot of graphql on our electronic patient record system!</p>



<a name="168069152"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168069152" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168069152">(Jun 13 2019 at 17:59)</a>:</h4>
<p>Should we develop a test suit for that?</p>



<a name="168085570"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168085570" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168085570">(Jun 13 2019 at 21:11)</a>:</h4>
<p>The idea of the test is to provide multiples uses cases to submit to endpoint where where can perform simple resource crud operation and try to resolve more complex dependencies by using resource extension defined in Reference field? </p>
<p>I have just a question about FHIR GraphQL specification at chapter <a href="http://build.fhir.org/graphql.html#mutations" target="_blank" title="http://build.fhir.org/graphql.html#mutations"> 3.1.2.8 Mutations</a>, the create operation is intended to be used like:</p>
<div class="codehilite"><pre><span></span>type Mutation {
  PatientCreate(res: PatientInput): Patient
}
</pre></div>


<p>and inside <a href="http://build.fhir.org/patient.graphql" target="_blank" title="http://build.fhir.org/patient.graphql">patient.graphql</a> is specified like field <a href="https://graphql.org/learn/schema/#arguments" target="_blank" title="https://graphql.org/learn/schema/#arguments">argument</a></p>
<div class="codehilite"><pre><span></span>type PatientCreateType {
  PatientCreate(resource: PatientInput): PatientCreation
}
</pre></div>


<p>In this case to make <a href="https://github.com/michelekorell/patient-fhir-graphql" target="_blank" title="https://github.com/michelekorell/patient-fhir-graphql">my demo</a> I made some modification on Patient.graphql file. By the way I made an error by putting the PatientCreate operation inside query type, oups...</p>



<a name="168096368"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168096368" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168096368">(Jun 14 2019 at 00:19)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I think that would be a great idea. Are you thinking some mock queries/scenarios and just documenting the results on the spec page?</p>



<a name="168098344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168098344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168098344">(Jun 14 2019 at 01:08)</a>:</h4>
<p>well, yes. I'm imagining a Json document with an array of objects each of which has a query (string) and either an error (String) or a json object that is the data output of the query. A client that knows how to follow the document could test any server</p>



<a name="168132291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168132291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168132291">(Jun 14 2019 at 12:55)</a>:</h4>
<p>That sounds good to me. We have a test framework in place so something like that would be very useful for us in the CI process as well as for our end users.</p>



<a name="168150319"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168150319" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mostafa Sholkamy <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168150319">(Jun 14 2019 at 16:29)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I've already done some tests on my own custom resources in node.js here: <a href="https://github.com/shalkam/gql-fhir-patient-example/blob/master/tests/patient/index.test.js" target="_blank" title="https://github.com/shalkam/gql-fhir-patient-example/blob/master/tests/patient/index.test.js">https://github.com/shalkam/gql-fhir-patient-example/blob/master/tests/patient/index.test.js</a>.</p>
<p>So, Where to find schemas to tests? I only have <a href="http://build.fhir.org/patient.graphql" target="_blank" title="http://build.fhir.org/patient.graphql">http://build.fhir.org/patient.graphql</a> because of the discussions we had ... I can start with this one.<br>
If there are more please let me know</p>



<a name="168153797"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168153797" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168153797">(Jun 14 2019 at 17:12)</a>:</h4>
<p><span class="user-mention" data-user-id="196306">@Robert Winterbottom</span> <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Actually we already have some UI tests on cypress ti intercept graphql queries and return mock data. For the future we plan to do the same think with nodejs backend. It can be a shared project, something like a web hook that permits to execute a test on selected endpoint and resources. At end of the operation it can return a mocha report about the test (or other format)</p>



<a name="168220307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168220307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168220307">(Jun 15 2019 at 19:31)</a>:</h4>
<p>so each of us will have different test frameworks, of course. What I want is to standardise the tests that they apply. With that in mind, I offer this as a starting position - can we agree to this format, and get this test passing on our servers?</p>



<a name="168220357"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168220357" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168220357">(Jun 15 2019 at 19:32)</a>:</h4>
<p><a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/resources/graphql/server-tests.json" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/resources/graphql/server-tests.json">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/resources/graphql/server-tests.json</a></p>



<a name="168220476"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168220476" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168220476">(Jun 15 2019 at 19:36)</a>:</h4>
<p>I guess the first key question is - should the tests create the resources that they operate on? or should they assume a pre-configured read-only interface?</p>



<a name="168220616"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168220616" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168220616">(Jun 15 2019 at 19:40)</a>:</h4>
<p><span class="user-mention" data-user-id="198505">@Michele Korell</span> I see that there are 2 different rules made here. What should we do? </p>
<ul>
<li>the specification calls for the return of a simple patient; the location header and operation outcome header would be lost</li>
<li>the schema anticipates a wrapper object that carries those and the resource</li>
</ul>
<p>Definitely in conflict with each other; how to resolve?</p>



<a name="168221010"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221010" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221010">(Jun 15 2019 at 19:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> your speaking about the test specification or the GraphQL query definition for resources?</p>



<a name="168221058"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221058" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221058">(Jun 15 2019 at 19:54)</a>:</h4>
<p>that is in response to your question about the mutation in the schema above. I'm not talking about the tests right now</p>



<a name="168221107"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221107" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221107">(Jun 15 2019 at 19:56)</a>:</h4>
<p>I'm looking at the issues with the generated schema - the scalar types and the complex types are all defined in types.graphql. The problem is that graphql doesn't define a way for one schema to reference another. (things like <a href="https://blog.apollographql.com/modularizing-your-graphql-schema-code-d7f71d5ed5f2" target="_blank" title="https://blog.apollographql.com/modularizing-your-graphql-schema-code-d7f71d5ed5f2">https://blog.apollographql.com/modularizing-your-graphql-schema-code-d7f71d5ed5f2</a> are all about js pre-processing). </p>
<p>So the options appear to be:</p>
<ul>
<li>add a documentation note to each resource schema noting the dependency on types.graphql</li>
<li>duplicate types.graphql into every resource schema</li>
<li>generate one single large combined schema</li>
</ul>
<p>Thoughts?</p>



<a name="168221254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221254">(Jun 15 2019 at 20:00)</a>:</h4>
<p>(note: there's a typo in <a href="http://build.fhir.org/types.graphql" target="_blank" title="http://build.fhir.org/types.graphql">http://build.fhir.org/types.graphql</a> - Scalar not scalar - that will fixed once we resolve this question. Also, I'll add a download that includes all the graphql schema in a single zip as well)</p>



<a name="168221371"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221371" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221371">(Jun 15 2019 at 20:04)</a>:</h4>
<p>They are another differents ways with apollographql tools. for example with <a href="https://www.apollographql.com/docs/graphql-tools/schema-transforms/" target="_blank" title="https://www.apollographql.com/docs/graphql-tools/schema-transforms/">transform</a> you can load multiples files and manipulate queries. Or maybe have an official endpoint that provide each FHIR version and compatible for introspection, we can perform some schema federation ( <a href="https://www.apollographql.com/docs/apollo-server/federation/migrating-from-stitching/" target="_blank" title="https://www.apollographql.com/docs/apollo-server/federation/migrating-from-stitching/">before was schema stitching</a> ) to build our endpoint schema.</p>



<a name="168221381"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221381" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221381">(Jun 15 2019 at 20:05)</a>:</h4>
<p>... I think you mean, we should have a single schema</p>



<a name="168221514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221514">(Jun 15 2019 at 20:09)</a>:</h4>
<p>or maybe: generate all the fragments, and also publish a single combined schema</p>



<a name="168221691"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221691" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221691">(Jun 15 2019 at 20:15)</a>:</h4>
<p>Have a big schema with all is simplier, but we lost the overview. In our hospital we made a service that only provide a big generated schema using introspection thecnics, but we found a lot of error and it is difficult to use. I like the idea to have Patient.graphql,  but in this case we must have at least Scalar and complex types in a base schema and for the other resources we can use extension operation to do something like:</p>
<div class="codehilite"><pre><span></span>extend type Query {
    Patient(...) : Patient
    PatientList(...) : Bundle
    ....
}
</pre></div>



<a name="168221737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221737">(Jun 15 2019 at 20:16)</a>:</h4>
<p>I don't understand this. types.graphl is the base schema, but how does it get included? What does 'extend' have to do with that?</p>



<a name="168221747"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221747" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221747">(Jun 15 2019 at 20:17)</a>:</h4>
<p>Actually, types.graphql contains only scalars and complex type?</p>



<a name="168221749"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221749" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221749">(Jun 15 2019 at 20:18)</a>:</h4>
<p>right. it's your base schema</p>



<a name="168221850"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221850" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221850">(Jun 15 2019 at 20:20)</a>:</h4>
<p>So, if I have understand right GraphQL, to merge two .graphql files we have to define somewhere the type Query {...} and in all other .graphql files we can use extend type Query</p>



<a name="168221857"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221857" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221857">(Jun 15 2019 at 20:20)</a>:</h4>
<p>where is that documented?</p>



<a name="168221866"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221866" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221866">(Jun 15 2019 at 20:21)</a>:</h4>
<p>And for me the best place to define base Query and Mutation is inside types.graphql because in any case we need Scalars and complex types.<br>
Wait a momen, i go search the doc</p>



<a name="168221921"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221921" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221921">(Jun 15 2019 at 20:23)</a>:</h4>
<p>Here: <a href="https://www.apollographql.com/docs/graphql-tools/generate-schema/#extending-types" target="_blank" title="https://www.apollographql.com/docs/graphql-tools/generate-schema/#extending-types">https://www.apollographql.com/docs/graphql-tools/generate-schema/#extending-types</a></p>



<a name="168221964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168221964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168221964">(Jun 15 2019 at 20:25)</a>:</h4>
<p>so there's nothing there about schema modularity. It might be that we should actually do that, though I'm not sure where that would be useful, but it doesn't help with the current question</p>



<a name="168222022"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168222022" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168222022">(Jun 15 2019 at 20:27)</a>:</h4>
<p>With apollo graphql-tools lib we can get multiples files in one executable schema. <br>
Maybe <span class="user-mention" data-user-id="196306">@Robert Winterbottom</span> can help us resolve these question, because asymmetrik worked a lot  for their FHIR GraphQL server and have more experience than me.</p>



<a name="168222064"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168222064" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168222064">(Jun 15 2019 at 20:28)</a>:</h4>
<p>the apollo tools do it by pre-processing. I presume that leads to one large schema...</p>



<a name="168222069"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168222069" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168222069">(Jun 15 2019 at 20:29)</a>:</h4>
<p>In our implementation we use to load multiples schemas and merge with base types and scalars</p>



<a name="168222342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168222342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168222342">(Jun 15 2019 at 20:38)</a>:</h4>
<p>The <a href="https://www.apollographql.com/docs/apollo-server/federation/federation-spec/" target="_blank" title="https://www.apollographql.com/docs/apollo-server/federation/federation-spec/">GraphQL federation</a> is a concept that i didn't study until now, but it can be a way to see what it could be done in case we have a big schema or multiples definitions. Our experience with a big schema is that is difficult to handle and find errors.</p>



<a name="168222408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168222408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168222408">(Jun 15 2019 at 20:41)</a>:</h4>
<p>I found an introduction chapter on apollographql federation: <a href="https://www.apollographql.com/docs/apollo-server/federation/introduction/" target="_blank" title="https://www.apollographql.com/docs/apollo-server/federation/introduction/">https://www.apollographql.com/docs/apollo-server/federation/introduction/</a></p>



<a name="168222623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168222623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168222623">(Jun 15 2019 at 20:49)</a>:</h4>
<p>But it is based on apollographql framework...</p>



<a name="168222673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168222673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168222673">(Jun 15 2019 at 20:50)</a>:</h4>
<blockquote>
<p>Note that the _service field is never exposed at the gateway. This is soley done to compose the schema</p>
</blockquote>



<a name="168222677"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168222677" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168222677">(Jun 15 2019 at 20:50)</a>:</h4>
<p>so, once again, private to Apollo</p>



<a name="168222795"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168222795" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168222795">(Jun 15 2019 at 20:54)</a>:</h4>
<blockquote>
<p>Our experience with a big schema is that is .. find errors.</p>
</blockquote>
<p>because it's big? or because there's errors to find?</p>



<a name="168256787"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168256787" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168256787">(Jun 16 2019 at 15:28)</a>:</h4>
<p>The problem of big schema is handle personal's IG restrictions</p>



<a name="168256912"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168256912" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168256912">(Jun 16 2019 at 15:30)</a>:</h4>
<p>Elsewhere our reference server work well with the big schema</p>



<a name="168266941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168266941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168266941">(Jun 16 2019 at 20:39)</a>:</h4>
<blockquote>
<p>handle personal's IG restrictions</p>
</blockquote>
<p>can you try this line again please</p>



<a name="168268652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168268652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168268652">(Jun 16 2019 at 21:32)</a>:</h4>
<blockquote>
<p>the apollo tools do it by pre-processing. I presume that leads to one large schema...</p>
</blockquote>
<p>Yes from what I have seen with apollo tools that is correct. It essentially forces you to wrap those types as strings so they can be stitched together into one big schema (for your root schema) and then you can also use them as smaller pieces for instance queries (e.g. Patient/&lt;patient-id&gt;/$graphql).</p>
<p>I (or Asymmetrik currently) don't use Apollo tools because facebooks own JS library works really well for our case. We also autogenerate schemas individually so modularity is extremely simple. However, our schemas are not in the schema language so they are not portable to other languages, they are specific to <code>graphql-js</code>.</p>



<a name="168268715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168268715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168268715">(Jun 16 2019 at 21:34)</a>:</h4>
<p>As far as loading the <code>types.graphql</code>, they need to be defined when they are used. In our case, we just require each module and all it's dependencies and they all work just fine, if you want to see what we did, here is an example of the patient resource, <a href="https://github.com/Asymmetrik/graphql-fhir/blob/master/src/resources/4_0_0/schemas/patient.schema.js" target="_blank" title="https://github.com/Asymmetrik/graphql-fhir/blob/master/src/resources/4_0_0/schemas/patient.schema.js">https://github.com/Asymmetrik/graphql-fhir/blob/master/src/resources/4_0_0/schemas/patient.schema.js</a>. So if you are using Apollo, you may have to either load everything together with <code>makeExecutableSchema</code> or redefine them in each schema where they are used.</p>



<a name="168268882"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168268882" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168268882">(Jun 16 2019 at 21:40)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> As far as the tests go, that setup file would work fine for us and be very easy to integrate.  </p>
<p>As for whether or not the tests should create the resources or assume they are present and the API is read only. I like the idea of supporting read only but does that mean we would need to have the example resources present at all times in our system (so end users can run the tests against our implementations themselves)?</p>



<a name="168269477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168269477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168269477">(Jun 16 2019 at 22:00)</a>:</h4>
<p>so the upshot is: there is no support at the schema level for stitching. We should probably publish modular and stitched schema</p>



<a name="168269501"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168269501" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168269501">(Jun 16 2019 at 22:01)</a>:</h4>
<p>if you write the schema as read-only then you need a special test set up, so you can run the tests. Or you always have test resources - and only test resources available - which means, a special test set up.</p>



<a name="168269506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168269506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168269506">(Jun 16 2019 at 22:01)</a>:</h4>
<p>but if the test scripts create the resources, you still end up with test resources on the server.... so my take is that you need a special testing server anyway.</p>



<a name="168269554"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168269554" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168269554">(Jun 16 2019 at 22:02)</a>:</h4>
<p>I prefer to run the test against a pre-canned set up since I already have that pre-canned setup ;-)</p>



<a name="168306602"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168306602" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168306602">(Jun 17 2019 at 12:45)</a>:</h4>
<p>Our testing framework has some convenient hooks for setting things like this up so this all sounds good to me</p>



<a name="168331409"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168331409" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168331409">(Jun 17 2019 at 17:46)</a>:</h4>
<p>ok. so we don't create the resources. But i might nominate the dependencies anyway in the json just to be clear. So any chance we can confirm that this test passes ok for <span class="user-mention" data-user-id="196306">@Robert Winterbottom</span>  and <span class="user-mention" data-user-id="198505">@Michele Korell</span> (and does anyone have interest in this)?</p>



<a name="168331978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168331978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168331978">(Jun 17 2019 at 17:52)</a>:</h4>
<p>Yea, I'll take a crack this afternoon at integrating it on our side and let you know how it goes</p>



<a name="168332229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168332229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168332229">(Jun 17 2019 at 17:55)</a>:</h4>
<p>ok thanks</p>



<a name="168340752"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168340752" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168340752">(Jun 17 2019 at 19:37)</a>:</h4>
<p>For me the idea is ok! I have just a doubt about the endpoint. Our implementation is based on single entry-point for all resources and not as example at resource: Patient/:id/$graphql<br>
Did you think we can support scenarios where we run queries against base url: myfhirserver.graphql/r4 ?</p>
<p>What I try to say about IG is: for example we added the ! symbol where we want have parameters that in standard definition are optional. We did it in graphql so the engine check for us.</p>
<p>Our server are also based on facebook's js lib, the only difference from asymmetrik is that we integrate the graphql-tools lib from apollo. This permit us to manipulate multiples pieces of schema to make them executable and simplify schema stitching</p>



<a name="168342871"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168342871" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168342871">(Jun 17 2019 at 20:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> So I noticed a few minor things with the test script.</p>
<p>First was the<code>tests.simple.url</code> was missing a trailing <code>}</code>, so it should be like this instead: <code>/Patient/example/$graphql?query={identifier{system,value}active,name{text,given,family}}</code>.</p>
<p>This still failed on our server because the query and results needed to include the datatype in them, so instead of <code>query={...&lt;return-fields&gt;}</code>, I needed to change it to <code>query={Patient{...&lt;return-fields&gt;}}</code>. I can't remember off the top of my head what the spec says so I'll need to look this up, but I do not think we are supposed to have an anonymous response, I think the response always needs to reference the data type, e.g. Patient.</p>
<p>Last, the <code>tests.simple.output</code> was missing the identifier and active response fields, they are in the example patient I downloaded from <a href="https://www.hl7.org/fhir/patient-example.json" target="_blank" title="https://www.hl7.org/fhir/patient-example.json">https://www.hl7.org/fhir/patient-example.json</a>. So I added those in. Our server also returned <code>text:null</code> in some of the objects, like name. This does not cause the test to fail because of the matcher I am using in my tests.</p>
<p>However, after those changes, the tests work fine against my local server.</p>



<a name="168343082"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168343082" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168343082">(Jun 17 2019 at 20:07)</a>:</h4>
<p>Also, I think we are in an interesting use case. Our server is open source and a facade, so the version on Github has no backend setup. To make this work, I setup a mock resolver that returned the <code>patient-example.json</code>. I will probably add instructions for anyone implementing a server based on our open source version, that they need to update the test to work against their back end with their resolvers.</p>



<a name="168343249"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168343249" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168343249">(Jun 17 2019 at 20:09)</a>:</h4>
<blockquote>
<p>For me the idea is ok! I have just a doubt about the endpoint. Our implementation is based on single entry-point for all resources and not as example at resource: Patient/:id/$graphql<br>
Did you think we can support scenarios where we run queries against base url: myfhirserver.graphql/r4 ?</p>
<p>What I try to say about IG is: for example we added the ! symbol where we want have parameters that in standard definition are optional. We did it in graphql so the engine check for us.</p>
<p>Our server are also based on facebook's js lib, the only difference from asymmetrik is that we integrate the graphql-tools lib from apollo. This permit us to manipulate multiples pieces of schema to make them executable and simplify schema stitching</p>
</blockquote>
<p>I agree, I think it would be nice to also have it able to test against the root schema. Could we add a property to the test snippet that signifies whether its an instance query against a single patient with id or whether it's against the root schema?</p>



<a name="168349364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168349364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168349364">(Jun 17 2019 at 21:30)</a>:</h4>
<p>ok I updated the tests. I added instance-tests and root tests</p>



<a name="168349418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168349418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168349418">(Jun 17 2019 at 21:31)</a>:</h4>
<blockquote>
<p>This still failed on our server because the query and results needed to include the datatype in them, so instead of query={...&lt;return-fields&gt;}, I needed to change it to query={Patient{...&lt;return-fields&gt;}}</p>
</blockquote>
<p>this is not what the FHIR spec currently says, and I don't see why that should be. The fact that it's Patient is already known by context, so there's no need to be explicit about that</p>



<a name="168394346"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168394346" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168394346">(Jun 18 2019 at 12:17)</a>:</h4>
<blockquote>
<blockquote>
<p>This still failed on our server because the query and results needed to include the datatype in them, so instead of query={...&lt;return-fields&gt;}, I needed to change it to query={Patient{...&lt;return-fields&gt;}}</p>
</blockquote>
<p>this is not what the FHIR spec currently says, and I don't see why that should be. The fact that it's Patient is already known by context, so there's no need to be explicit about that</p>
</blockquote>
<p>I had issues with doing that in the past (which is why our server did it that way) but was trying it again last night and was able to make it work that way without issue. Should be fairly easy to upgrade our server to use it that way for that context.</p>



<a name="168394442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168394442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168394442">(Jun 18 2019 at 12:18)</a>:</h4>
<p>For the root tests, I think you will need to include the Patient context in the results since the query can hit multiple data types</p>



<a name="168395774"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168395774" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168395774">(Jun 18 2019 at 12:36)</a>:</h4>
<p>indeed it does, no?</p>



<a name="168397667"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168397667" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168397667">(Jun 18 2019 at 12:59)</a>:</h4>
<p>I dont see it in the results for <code>root-tests</code></p>



<a name="168407933"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168407933" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168407933">(Jun 18 2019 at 14:47)</a>:</h4>
<p>Hmm, <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>, For the instance queries in your implementation, do you have to specify a resolver for each field?</p>
<p>When I use queries like this: <code>query={Patient{...&lt;return-fields&gt;}}</code>, it's easy for us to specify a Patient resolver that gets called once and returns the whole patient object. I realized through some more testing this morning that when I was switching our implementation to support <code>query={...&lt;return-fields&gt;}</code>, it invokes the fieldResolver once for each field. I was just curious if your implementation supported a single resolver for the whole object versus one resolver per field.</p>



<a name="168438127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168438127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168438127">(Jun 18 2019 at 17:49)</a>:</h4>
<p>I don't know anything about resolvers. I don't see anything about them in the standard?</p>



<a name="168438248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168438248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168438248">(Jun 18 2019 at 17:51)</a>:</h4>
<blockquote>
<p>you will need to include the Patient context in the results </p>
</blockquote>
<p>I thought that this was it:</p>
<blockquote>
<p>/$graphql?query={Patient(id:example){identifier{system,value}active,name{text,given,family}}}</p>
</blockquote>
<p>Patient is specified explicitly</p>



<a name="168440829"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168440829" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168440829">(Jun 18 2019 at 18:16)</a>:</h4>
<p>Ahh sorry, forgot to elaborate, so in that case (<code>/$graphql?query={Patient(id:example){identifier{system,value}active,name{text,given,family}}}</code>) patient is identified in the query, but it's missing in the resulting data. When hitting the root schema, a query could also look like this:</p>
<div class="codehilite"><pre><span></span>/$graphql?query={Patient(id:example){active}Observation(id:example){active}}
</pre></div>


<p>So the results should look something like this:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;Patient&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">false</span>
        <span class="p">},</span>
        <span class="nt">&quot;Observation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Without having the Patient and observation in the results, there is no way the consumer can know exactly what data type the fields are related to. I think the test file is supposed to look like this:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;root-tests&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;simple&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Just a simple test of the basic graphQL engine: a simple query on a known patient (example, from the spec)&quot;</span><span class="p">,</span>
            <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/$graphql?query={Patient(id:example){identifier{system,value}active,name{text,given,family}}}&quot;</span><span class="p">,</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;Patient&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;identifier&quot;</span><span class="p">:</span> <span class="p">[{</span>
                            <span class="nt">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:oid:1.2.36.146.595.217.0.1&quot;</span><span class="p">,</span>
                            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;12345&quot;</span>
                        <span class="p">}],</span>
                        <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">[{</span>
                            <span class="nt">&quot;given&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Peter&quot;</span><span class="p">,</span> <span class="s2">&quot;James&quot;</span><span class="p">],</span>
                            <span class="nt">&quot;family&quot;</span><span class="p">:</span> <span class="s2">&quot;Chalmers&quot;</span>
                        <span class="p">},</span> <span class="p">{</span>
                            <span class="nt">&quot;given&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Jim&quot;</span><span class="p">]</span>
                        <span class="p">},</span> <span class="p">{</span>
                            <span class="nt">&quot;given&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Peter&quot;</span><span class="p">,</span> <span class="s2">&quot;James&quot;</span><span class="p">],</span>
                            <span class="nt">&quot;family&quot;</span><span class="p">:</span> <span class="s2">&quot;Windsor&quot;</span>
                        <span class="p">}]</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>



<a name="168441856"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168441856" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168441856">(Jun 18 2019 at 18:27)</a>:</h4>
<blockquote>
<p>I don't know anything about resolvers. I don't see anything about them in the standard?</p>
</blockquote>
<p>They discuss them here, <a href="https://graphql.org/learn/execution/" target="_blank" title="https://graphql.org/learn/execution/">https://graphql.org/learn/execution/</a>. Essentially, anything that takes an argument will need a resolver to resolve any encapsulated data based on the provided arguments. In the case of the instance query where there aren't any arguments provided via the graphql query, just the rest param, you have to use field resolvers. At least that's the case in JavaScript. I think I can write an abstraction so that anyone implementing something based on our solution, won't have to worry about that. This may be a Javascript only thing.</p>



<a name="168443054"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168443054" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168443054">(Jun 18 2019 at 18:40)</a>:</h4>
<p>Also, should the search param be <code>_id</code> instead of <code>id</code>(<code>query={Patient(_id:"example")</code>)? I do not see <code>id</code> listed in the FHIR spec as a valid search parameter for patient</p>



<a name="168444530"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168444530" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168444530">(Jun 18 2019 at 18:55)</a>:</h4>
<p>oh. updated the tests for both issues.</p>



<a name="168444802"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168444802" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168444802">(Jun 18 2019 at 18:58)</a>:</h4>
<p>Great thanks. I'll test it again a little later tonight</p>



<a name="168459895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168459895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168459895">(Jun 18 2019 at 22:08)</a>:</h4>
<p>Hello, actually I'm in holidays for one and half week. My wife forbidden me to take the pc with. So I go to start my test when I'm back.</p>



<a name="168460004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168460004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168460004">(Jun 18 2019 at 22:10)</a>:</h4>
<p>ok</p>



<a name="168500964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168500964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168500964">(Jun 19 2019 at 12:22)</a>:</h4>
<blockquote>
<p>Hello, actually I'm in holidays for one and half week. My wife forbidden me to take the pc with. So I go to start my test when I'm back.</p>
</blockquote>
<p>Did you sneak away to write this message ;)</p>



<a name="168501193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168501193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168501193">(Jun 19 2019 at 12:25)</a>:</h4>
<blockquote>
<p>oh. updated the tests for both issues.</p>
</blockquote>
<p>Looks like the JSON is missing some commas, i'll paste a working version below that fixes the commas and adds quotes to the id in the root-test (without the quotes the graphql parser is treating the _id as an enum)</p>



<a name="168501285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168501285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168501285">(Jun 19 2019 at 12:26)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;@type&quot;</span><span class="p">:</span> <span class="s2">&quot;graphql-server-tests&quot;</span><span class="p">,</span>
    <span class="nt">&quot;instance-tests&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;simple&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Just a simple test of the basic graphQL engine: a simple query on a known patient (example, from the spec)&quot;</span><span class="p">,</span>
            <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/Patient/example/$graphql?query={identifier{system,value}active,name{text,given,family}}&quot;</span><span class="p">,</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;identifier&quot;</span><span class="p">:</span> <span class="p">[{</span>
                        <span class="nt">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:oid:1.2.36.146.595.217.0.1&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;12345&quot;</span>
                    <span class="p">}],</span>
                    <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">[{</span>
                        <span class="nt">&quot;given&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Peter&quot;</span><span class="p">,</span> <span class="s2">&quot;James&quot;</span><span class="p">],</span>
                        <span class="nt">&quot;family&quot;</span><span class="p">:</span> <span class="s2">&quot;Chalmers&quot;</span>
                    <span class="p">},</span> <span class="p">{</span>
                        <span class="nt">&quot;given&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Jim&quot;</span><span class="p">]</span>
                    <span class="p">},</span> <span class="p">{</span>
                        <span class="nt">&quot;given&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Peter&quot;</span><span class="p">,</span> <span class="s2">&quot;James&quot;</span><span class="p">],</span>
                        <span class="nt">&quot;family&quot;</span><span class="p">:</span> <span class="s2">&quot;Windsor&quot;</span>
                    <span class="p">}]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;root-tests&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;simple&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Just a simple test of the basic graphQL engine: a simple query on a known patient (example, from the spec)&quot;</span><span class="p">,</span>
            <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;/$graphql?query={Patient(_id:\&quot;example\&quot;){identifier{system,value}active,name{text,given,family}}}&quot;</span><span class="p">,</span>
            <span class="nt">&quot;output&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;Patient&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;identifier&quot;</span><span class="p">:</span> <span class="p">[{</span>
                            <span class="nt">&quot;system&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:oid:1.2.36.146.595.217.0.1&quot;</span><span class="p">,</span>
                            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;12345&quot;</span>
                        <span class="p">}],</span>
                        <span class="nt">&quot;active&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">[{</span>
                            <span class="nt">&quot;given&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Peter&quot;</span><span class="p">,</span> <span class="s2">&quot;James&quot;</span><span class="p">],</span>
                            <span class="nt">&quot;family&quot;</span><span class="p">:</span> <span class="s2">&quot;Chalmers&quot;</span>
                        <span class="p">},</span> <span class="p">{</span>
                            <span class="nt">&quot;given&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Jim&quot;</span><span class="p">]</span>
                        <span class="p">},</span> <span class="p">{</span>
                            <span class="nt">&quot;given&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Peter&quot;</span><span class="p">,</span> <span class="s2">&quot;James&quot;</span><span class="p">],</span>
                            <span class="nt">&quot;family&quot;</span><span class="p">:</span> <span class="s2">&quot;Windsor&quot;</span>
                        <span class="p">}]</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>



<a name="168501537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168501537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168501537">(Jun 19 2019 at 12:30)</a>:</h4>
<p>fixed</p>



<a name="168502092"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168502092" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168502092">(Jun 19 2019 at 12:38)</a>:</h4>
<p>Great thanks, works for me now!!</p>



<a name="168502121"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/168502121" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#168502121">(Jun 19 2019 at 12:38)</a>:</h4>
<p>great. time to add some more tests ;-)</p>



<a name="170432236"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/170432236" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#170432236">(Jul 09 2019 at 08:06)</a>:</h4>
<p>Hello, <br>
did you already think how manage resource update when somehow ask partial resource via GraphQL and send back the same object with some changes? Is better to update only parameters that are present or replace the resource? <br>
If someone make bad operations, it can erase some part of information. <br>
What you think about that?</p>



<a name="170469990"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/170469990" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#170469990">(Jul 09 2019 at 16:51)</a>:</h4>
<p>Hey Michele.</p>
<p>For our implementation, when users are doing any kind of mutations, we plan to only update the targeted resource with the provided properties and not modify any existing properties that are not provided. We think that replacing the full resource on a mutation could lead to accidental deletes of some properties and would also then force users to ask for the full object every time.  However, after talking with Grahame and others in Seattle, we also plan to allow writes via REST since there are some things with writes that are much more difficult in GraphQL (e.g. input unions are not allowed in GraphQL) than in REST.</p>



<a name="170586347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/170586347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#170586347">(Jul 10 2019 at 22:49)</a>:</h4>
<p>my personal opinion is that graphQL writes are a nightmare. It's find to say 'accept the object with some changes" until you discover that there was a filtered list in there. now what?</p>



<a name="170586388"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/170586388" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#170586388">(Jul 10 2019 at 22:49)</a>:</h4>
<p>I know the graphQL people want to use their hammer so writes are going to be treated as a nail... but I think it's a very bad idea. POST/PUT/PATCH should be the go, even if that makes life more apparently difficult for the client</p>



<a name="170698190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/170698190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#170698190">(Jul 12 2019 at 06:27)</a>:</h4>
<p>We was thinking develop an update on only provided fields, but after some review we see that they are to much use cases. I think we have to really look to use REST interfaces inside our microservices environment and GraphQL only to query data for end user application.</p>



<a name="171071669"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/171071669" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Misha Kaletsky <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#171071669">(Jul 17 2019 at 12:06)</a>:</h4>
<blockquote>
<p><a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/resources/graphql/server-tests.json" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/resources/graphql/server-tests.json">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/resources/graphql/server-tests.json</a></p>
</blockquote>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> link seems to be dead - did these get moved to <a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/857db5f86837ef041332230b8183ed1394b0dfc4/org.hl7.fhir.r5/src/test/resources/graphql/server-tests.json" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/857db5f86837ef041332230b8183ed1394b0dfc4/org.hl7.fhir.r5/src/test/resources/graphql/server-tests.json">here</a>? Using the commit hash url rather than master in case it happens again.</p>



<a name="171080884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/171080884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#171080884">(Jul 17 2019 at 14:01)</a>:</h4>
<p>they just got moved by <span class="user-mention" data-user-id="191319">@James Agnew</span></p>



<a name="171080900"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/171080900" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#171080900">(Jul 17 2019 at 14:01)</a>:</h4>
<p><a href="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/graphql/server-tests.json" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/graphql/server-tests.json">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/test/resources/graphql/server-tests.json</a></p>



<a name="176109996"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176109996" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Howard Kong <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176109996">(Sep 19 2019 at 15:20)</a>:</h4>
<p>Is there a publicly available version of the graphQL-FHIR server that developers and try out (similar to <a href="http://hapi.fhir.org/" target="_blank" title="http://hapi.fhir.org/">http://hapi.fhir.org/</a>)?</p>



<a name="176110032"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176110032" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176110032">(Sep 19 2019 at 15:21)</a>:</h4>
<p>both <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> and <a href="http://hapi.fhir.org" target="_blank" title="http://hapi.fhir.org">hapi.fhir.org</a> implement graphql and are publicly available, and both are open source</p>



<a name="176111606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176111606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Howard Kong <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176111606">(Sep 19 2019 at 15:36)</a>:</h4>
<p>Thanks!  I just tried, what is the graphql endpoint?  I tried <a href="http://hapi.fhir.org/graphql" target="_blank" title="http://hapi.fhir.org/graphql">http://hapi.fhir.org/graphql</a>, but got a 404.</p>



<a name="176111854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176111854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176111854">(Sep 19 2019 at 15:39)</a>:</h4>
<p>try the test server - the links to execute the statements are built right into the graphql  page on <a href="http://build.fhir.org/graphql.html" target="_blank" title="http://build.fhir.org/graphql.html">http://build.fhir.org/graphql.html</a></p>



<a name="176112366"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176112366" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176112366">(Sep 19 2019 at 15:44)</a>:</h4>
<p>Fwiw, here's a working query: <a href="http://hapi.fhir.org/baseR4/Patient/13/$graphql?query={name{text,given,family}}" target="_blank" title="http://hapi.fhir.org/baseR4/Patient/13/$graphql?query={name{text,given,family}}">http://hapi.fhir.org/baseR4/Patient/13/$graphql?query={name{text,given,family}}</a></p>



<a name="176113338"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176113338" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Howard Kong <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176113338">(Sep 19 2019 at 15:52)</a>:</h4>
<p>Now I get it.  I was looking for a /graphql endpoint and was expecting a GraphiQL interface.  That example link got me in the right direction.  Thank you both!</p>



<a name="176121256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176121256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Agnew <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176121256">(Sep 19 2019 at 17:20)</a>:</h4>
<p>heh- i do notice that the <code>Content-Type</code> is wrong on the link I posted above. Always something.... :) Need to fix that.</p>



<a name="176140929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176140929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Howard Kong <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176140929">(Sep 19 2019 at 20:52)</a>:</h4>
<p>I tried to get some other data using that example, e.g., <a href="http://hapi.fhir.org/baseR4/Patient/14/$graphql?query={name{text,use,family,given},telecom{text,system}}" target="_blank" title="http://hapi.fhir.org/baseR4/Patient/14/$graphql?query={name{text,use,family,given},telecom{text,system}}">http://hapi.fhir.org/baseR4/Patient/14/$graphql?query={name{text,use,family,given},telecom{text,system}}</a> or even <a href="http://hapi.fhir.org/baseR4/Patient/14/$graphql?query={name{text,use,family,given},gender}" target="_blank" title="http://hapi.fhir.org/baseR4/Patient/14/$graphql?query={name{text,use,family,given},gender}">http://hapi.fhir.org/baseR4/Patient/14/$graphql?query={name{text,use,family,given},gender}</a> and got the same response as without the extra fields.  Is there a schema associated with the graphql endpoint, something I can get via <a href="http://hapi.fhir.org/baseR4/$graphql?query={__schema" target="_blank" title="http://hapi.fhir.org/baseR4/$graphql?query={__schema">http://hapi.fhir.org/baseR4/$graphql?query={__schema</a> {types {name}}} ?</p>



<a name="176140979"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176140979" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176140979">(Sep 19 2019 at 20:53)</a>:</h4>
<p>there should be, but I haven't got to that for <a href="http://test.fhir.org" target="_blank" title="http://test.fhir.org">test.fhir.org</a> and I don't think that it's been done for <a href="http://hapi.fhir.org" target="_blank" title="http://hapi.fhir.org">hapi.fhir.org</a></p>



<a name="176189897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176189897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176189897">(Sep 20 2019 at 12:59)</a>:</h4>
<p><span class="user-mention" data-user-id="237430">@Howard Kong</span> We also have one you can spin up with the option of enabling a Graphiql interface. It's an open source facade server so it's not connected to a data source and is not currently deployed. However you can easily get it up and running with a couple of npm/yarn commands. It's available at <a href="https://github.com/Asymmetrik/graphql-fhir" target="_blank" title="https://github.com/Asymmetrik/graphql-fhir">https://github.com/Asymmetrik/graphql-fhir</a></p>



<a name="176389606"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176389606" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Howard Kong <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176389606">(Sep 23 2019 at 17:21)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="196306">@Robert Winterbottom</span> !</p>



<a name="176650089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/176650089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rik Smithies <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#176650089">(Sep 26 2019 at 11:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191319">@James Agnew</span>  I noticed that in Chrome, but it's ok in Postman, even with no headers specified.</p>



<a name="178334307"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/178334307" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#178334307">(Oct 16 2019 at 22:44)</a>:</h4>
<p>Hi GraphQL'ers . Is graphql powerful enough to support something (sorry for the non-standard yet usefull  dialect):</p>
<div class="codehilite"><pre><span></span>( Condition(coding=xxx, recorded-date=2019) after(20 days) Medication(coding=yyy) ) and Patient(deaceasedBoolean=true, gender=male)
</pre></div>


<p>this means give me all dead male patients who had a condition  20 days after  one medication. More generally do graphql handles complex operators between resources ? thanks a lot</p>



<a name="178337951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/178337951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#178337951">(Oct 16 2019 at 23:54)</a>:</h4>
<p>in principle it sounds doable. Did you try?</p>



<a name="178359756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/178359756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#178359756">(Oct 17 2019 at 08:14)</a>:</h4>
<p>No. I tried to master GraphQL a bit, but I didn´t find a way of expressing this.<br>
I only have the search engine ready to eat that logic (complex relationis between fhir resources)</p>



<a name="178559474"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/178559474" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#178559474">(Oct 19 2019 at 19:20)</a>:</h4>
<p>any people experimented in GraphQL?</p>



<a name="178756552"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/178756552" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Winterbottom <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#178756552">(Oct 22 2019 at 13:40)</a>:</h4>
<p>I can't see why this would not be doable. You may need to add additional arguments to your GraphQL definitions, but GraphQL allows you to define field level resolvers, which can aid in traversing relationships. You can also pass data between parent and child resolvers (check out this link, <a href="https://medium.com/paypal-engineering/graphql-resolvers-best-practices-cd36fdbcef55" target="_blank" title="https://medium.com/paypal-engineering/graphql-resolvers-best-practices-cd36fdbcef55">https://medium.com/paypal-engineering/graphql-resolvers-best-practices-cd36fdbcef55</a>). With this particular query, you might need to think about how these resources are related in FHIR, e.g., who refers to who.  A medication statement can point to a condition which can point to a patient, but patients do not point towards conditions.  Typically in GraphQL you want to think in graphs, but there is no reason why you cannot do aggregations of the data behind the scenes and add a simple custom schema on top.  I have done that for analytics and other things in the past. </p>
<p>There are a ton of articles about how to represent complex relationships in GraphQL, just try searching some and seeing if any design patterns jump out to you.</p>



<a name="178834545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/178834545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#178834545">(Oct 23 2019 at 08:59)</a>:</h4>
<p>Hello, our way is to pass a single string parameter that reflect the standard FHIR search. Behind the resolver can pass to desired connector, we have two case:</p>
<ul>
<li>the first one is that we are fetching data from a remote RESTful FHIR api, so we simple add the search string directly on path</li>
<li>the second one is that we search data on our internal database and our parser is able to build SQL query that reflect the db structure to complete the resource.</li>
</ul>



<a name="178985622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/178985622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#178985622">(Oct 24 2019 at 19:00)</a>:</h4>
<p><span class="user-mention" data-user-id="198505">@Michele Korell</span> could you elaborate on what use case you are solving with those two approaches ?</p>
<p>I also have in mind such syntax (which can be translated into low level database query or other fhir endpoints)</p>
<div class="codehilite"><pre><span></span>( Condition?coding=xxx&amp;recorded-date=2019 after(patient, recorded-date, date, 20 days) Medication?coding=yyy ) AND Patient?deaceasedBoolean=true&amp;gender=male )
</pre></div>


<p><span class="user-mention" data-user-id="196306">@Robert Winterbottom</span> thanks for the valuable pointers. I definitely have to look how this could be defined within Graphql dialect not to reinvent the wheel. Also I suspect graphQL is not as readible than the above syntax</p>



<a name="178995847"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/178995847" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#178995847">(Oct 24 2019 at 20:46)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="198505">Michele Korell</span> could you elaborate on what use case you are solving with those two approaches ?</p>
</blockquote>
<p><span class="user-mention" data-user-id="213944">@natus</span> :</p>
<p>Actually we developed a standard interface template inTypescript that permits to us to call differents implementations of connector. At front of our microservices we have a GraphQL and REST routes. They call the logic of the microservice that is able using a general query builder to call the standard connector interface. In this way we are able to call databases or others REST/GraphQL APIs. In Switzerland a lot of healthcare software manufacturer still develop proprietary interfaces because they believe that oblige customers keep their solution, our workaround is to build an FHIR based abstraction layer. This layer is able to translate all queries between all employed technologies.<br>
By the way, with our experience we found that GraphQL is very flexible for querying from FrontEnd application to a gateway. But for the communication between microservices we didn't found a good strategy to prevent lost of information if some fields are not in the mutation queries.</p>



<a name="179002432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/179002432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#179002432">(Oct 24 2019 at 22:04)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> Actually I'm working on testing with the specification you provided and did you think that it can be useful specify test scenario with Gherkin syntax?<br>
for example we can transform</p>
<div class="codehilite"><pre><span></span> &quot;description&quot; : &quot;Just a simple test of the basic graphQL engine: a simple query on a known patient (example, from the spec)&quot;,
</pre></div>


<p>to </p>
<div class="codehilite"><pre><span></span> &quot;description&quot; : &quot;Given a GraphQL patient endpoint When I call the \&quot;url\&quot; route Then I get the patient \&quot;output\&quot; data&quot;,
</pre></div>


<p>This is just a fast written example, but on our agility organisation we receive UserStories described in this way. Actually Cucumber is developed for a lot of frameworks (<a href="https://cucumber.io/docs/installation/" target="_blank" title="https://cucumber.io/docs/installation/">https://cucumber.io/docs/installation/</a>). In our hospital we use SpecFlow to drive Appium test framework and Cypress for e2e web applications tests.</p>
<p>What do you think about that?</p>



<a name="179121001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/179121001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> natus <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#179121001">(Oct 26 2019 at 11:00)</a>:</h4>
<p><span class="user-mention" data-user-id="198505">@Michele Korell</span> </p>
<blockquote>
<p>By the way, with our experience we found that GraphQL is very flexible for querying from FrontEnd application to a gateway. </p>
</blockquote>
<p>Good to know graphQL allows to federate switherland. I would be glad to have a deep look into this. By the way, I am not sure the use case I am looking for is covered by your design: joining resources together with complex criteria (counts, temporal, inner/outer/anti joins)</p>



<a name="179159392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/179159392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Korell <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#179159392">(Oct 27 2019 at 07:31)</a>:</h4>
<p><span class="user-mention" data-user-id="193729">@natus</span> in this case I don't understand well what you want really do. Can you provide an example? Try to build the query on a FHIR REST test server and describe how it has to work on graphql.</p>



<a name="182699963"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/182699963" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kendall Park <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#182699963">(Dec 05 2019 at 20:24)</a>:</h4>
<p>Do you guys know if it would be feasible to make a GraphQL adapter over a FHIR REST API (without GraphQL support)?</p>



<a name="182700849"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/182700849" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#182700849">(Dec 05 2019 at 20:35)</a>:</h4>
<p>I believe it's feasible</p>



<a name="182702251"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/182702251" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kendall Park <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#182702251">(Dec 05 2019 at 20:52)</a>:</h4>
<p>I'm trying to figure out how much work it would be, and whether someone else is already attempting a similar project. There are existing resources for using GraphQL with REST API's (<a href="https://github.com/apollographql/apollo-link-rest" target="_blank" title="https://github.com/apollographql/apollo-link-rest">https://github.com/apollographql/apollo-link-rest</a>). </p>
<p>To zoom out a bit, I'm trying to find a more expressive way to query an existing FHIR database. One option is to do a relational DB mirror (eg, fhirbase). Another option is GraphQL. The queries would be used for predictive modeling (training or inference). Like, "give me these specific lab results from Patient X within the last 24 hours."</p>



<a name="182702525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/182702525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#182702525">(Dec 05 2019 at 20:54)</a>:</h4>
<p>a graphQL proxy on a standard rest interface is very smart but has a real performance penalty that a direct DB approach wouldn't have</p>



<a name="182702553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/182702553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Mandel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#182702553">(Dec 05 2019 at 20:54)</a>:</h4>
<p>The requirements for training are substantially different than for inference. For training I'd be thinking more about bulk data extraction. For inference... I think it's important to lay out what your goals are.  I sketched out a quick take on how wrapping FHIR REST with Graphql would work <a href="https://github.com/jmandel/gra-fhir-ql" target="_blank" title="https://github.com/jmandel/gra-fhir-ql">back in 2015</a> and was pretty happy with it functionally -- but this approach will never be faster than REST API access.</p>



<a name="182703613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/182703613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kendall Park <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#182703613">(Dec 05 2019 at 21:03)</a>:</h4>
<p>The performance is going to be worse, but the relational mirror will come with its own headaches (eg, if you want run inference on a particular case on demand). You can use the proxy as a stand-in while you wait for GraphQL support in the original system. This is more about creating a sane and generalizable data science pipeline than it is about maximizing performance.</p>



<a name="182705915"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/182705915" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kendall Park <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#182705915">(Dec 05 2019 at 21:24)</a>:</h4>
<p>If data scientists work directly with the REST API, they'll be making multiple API calls and sifting through a ton of excess data in their Jupyter notebook (or container the model is deployed in). It's a bit unwieldy.</p>



<a name="182708116"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/182708116" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#182708116">(Dec 05 2019 at 21:44)</a>:</h4>
<p>yes, data scientists need some ETL running. graphQL is an option. So is sql as discussed om <a class="stream" data-stream-id="179219" href="/#narrow/stream/179219-analytics-on-FHIR">#analytics on FHIR</a></p>



<a name="182708229"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/182708229" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#182708229">(Dec 05 2019 at 21:45)</a>:</h4>
<p>though I'm sure a general purpose reusable graphQL proxy would be something that people would like. The HAPI graphQL engine could be used for that - just have to map from the callbacks to the REST API</p>



<a name="199733450"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/199733450" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> j k <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#199733450">(Jun 04 2020 at 11:30)</a>:</h4>
<p>Dear GraphQL-FHIR group, I would love to take a look at the graphql fhir schema, however the provided download link "<a href="http://build.fhir.org/fhir.graph.schema.zip">http://build.fhir.org/fhir.graph.schema.zip</a>" 404's. <br>
Is it deprecated or has it just moved?<br>
I hope this is the correct place to ask this question and apologize if it is not!</p>



<a name="199733620"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/199733620" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#199733620">(Jun 04 2020 at 11:32)</a>:</h4>
<p><a href="http://build.fhir.org/fhir.schema.graphql.zip">http://build.fhir.org/fhir.schema.graphql.zip</a></p>



<a name="199733623"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/199733623" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#199733623">(Jun 04 2020 at 11:32)</a>:</h4>
<p>is this it?</p>



<a name="199733855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/199733855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> j k <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#199733855">(Jun 04 2020 at 11:36)</a>:</h4>
<p>exactly! thanks for the quick response.</p>



<a name="208189422"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/208189422" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreea Dorca <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#208189422">(Aug 27 2020 at 08:20)</a>:</h4>
<p>Is there a library or something we could use to directly and easily convert GraphQL responses to FHIR resources? Or how could we do this using the JAVA language?</p>



<a name="208225553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/GraphQL/near/208225553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/GraphQL.html#208225553">(Aug 27 2020 at 14:39)</a>:</h4>
<p>See duplicate thread <a href="#narrow/stream/179166-implementers/topic/GraphQL.20to.20FHIR">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/GraphQL.20to.20FHIR</a></p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
