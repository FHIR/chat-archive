---
layout: page
title: "FHIR Chat  · Validation for required · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html">Validation for required</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153862737"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862737" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862737">(Dec 09 2016 at 14:27)</a>:</h4>
<p>We've fixed required validation in our FHIR library and run tests against FHIR 1.6 distrib  -  got about 22 failures like:</p>
<div class="codehilite"><pre> [{:expected &quot;field :code is required&quot;, 
  :actual {:extension [
        {:url &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-regex&quot;, :valueString &quot;-?([0]|([1-9][0-9]*))(\\.[0-9]+)?&quot;}], :_code {:extension [{:url &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;, :valueString &quot;number&quot;} 
       {:url &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type&quot;, :valueString &quot;xsd:decimal&quot;} 
       {:url &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;, :valueString &quot;xsd:decimal&quot;}]}},
 :path [:snapshot :element 3 :type 0]}

 {:expected &quot;field :code is required&quot;, 
  :actual {:extension [
       {:url &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-regex&quot;, :valueString &quot;-?([0]|([1-9][0-9]*))(\\.[0-9]+)?&quot;}],      :_code {:extension [{:url &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;, :valueString &quot;number&quot;}  
      {:url &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type&quot;, :valueString &quot;xsd:decimal&quot;} 
      {:url &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;, :valueString &quot;xsd:decimal&quot;}]}}, 
:path [:differential :element 1 :type 0]}]))
</pre></div>


<p>By spec StructureDefinition.differential.element.type.code is required, but here we see there is no code element, but only _code (primative extension) - should we treat it like <code>code required</code> is satisfied??</p>
<p>All this errors are related to profiles of primitive types.</p>



<a name="153862771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862771">(Dec 09 2016 at 19:11)</a>:</h4>
<p>this is not an error. if there's a code present, it must come from the value set. but in this case, there isn't a code present.</p>



<a name="153862862"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862862" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862862">(Dec 09 2016 at 22:34)</a>:</h4>
<p><a href="http://build.fhir.org/elementdefinition-definitions.html#ElementDefinition.type.code" target="_blank" title="http://build.fhir.org/elementdefinition-definitions.html#ElementDefinition.type.code">http://build.fhir.org/elementdefinition-definitions.html#ElementDefinition.type.code</a> 1..1?</p>



<a name="153862914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862914">(Dec 11 2016 at 07:31)</a>:</h4>
<p>It looks strange to use extensions in core to define primitives, isn't it?</p>



<a name="153862922"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862922" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862922">(Dec 11 2016 at 09:26)</a>:</h4>
<p>well, those things correspond to compiler magic in any other language. Whatever we do would be anomalous in so way. </p>



<a name="153862923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862923">(Dec 11 2016 at 09:26)</a>:</h4>
<p>though we later came up with a solution that could solve this better, actually, in that type is a URI now</p>



<a name="153862924"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862924" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862924">(Dec 11 2016 at 09:27)</a>:</h4>
<p>I could just reference the XSD type directly, and make the JSON and RDF information an extension </p>



<a name="153862925"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862925" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862925">(Dec 11 2016 at 09:27)</a>:</h4>
<p>couldn't do that earlier when we solved that dfferently. </p>



<a name="153862926"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862926" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862926">(Dec 11 2016 at 09:28)</a>:</h4>
<p><span class="user-mention" data-user-id="191351">@Chris Grenz</span> <span class="user-mention" data-user-id="191328">@Ewout Kramer</span> <span class="user-mention" data-user-id="191336">@Michel Rutten</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> <span class="user-mention" data-user-id="191319">@James Agnew</span> I think that this would be a better approach</p>



<a name="153862927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862927">(Dec 11 2016 at 09:30)</a>:</h4>
<p>so, specifically, we currently have:</p>
<div class="codehilite"><pre>          &lt;!-- Note: primitive values do not have an assigned type. e.g. this is compiler magic. XML, JSON and RDF types provided by extension --&gt;
            &lt;type&gt;
              &lt;code&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;&gt;
                  &lt;valueString value=&quot;boolean&quot;/&gt;
                &lt;/extension&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type&quot;&gt;
                  &lt;valueString value=&quot;xsd:boolean&quot;/&gt;
                &lt;/extension&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;&gt;
                  &lt;valueString value=&quot;xsd:boolean&quot;/&gt;
                &lt;/extension&gt;
              &lt;/code&gt;
            &lt;/type&gt;
</pre></div>



<a name="153862928"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862928" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862928">(Dec 11 2016 at 09:33)</a>:</h4>
<p>this would change to:</p>
<div class="codehilite"><pre>            &lt;type&gt;
              &lt;code value=&quot;http://www.w3.org/2001/XMLSchema#boolean&quot;&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;&gt;
                  &lt;valueString value=&quot;boolean&quot;/&gt;
                &lt;/extension&gt;
                &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;&gt;
                  &lt;valueUri value=&quot;xsd:boolean&quot;/&gt;
                &lt;/extension&gt;
              &lt;/code&gt;
            &lt;/type&gt;
</pre></div>



<a name="153862929"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862929" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862929">(Dec 11 2016 at 09:34)</a>:</h4>
<p>somwhat arbitrarily, I have chosen xsd as the master, because a/ it's richer then the json types and b/ RDF uses the same types</p>



<a name="153862938"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862938" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862938">(Dec 11 2016 at 11:38)</a>:</h4>
<p>May be add special elements to structure definition to do it without extensions?</p>



<a name="153862951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862951">(Dec 11 2016 at 16:02)</a>:</h4>
<p>I don't have a strong preference on this, though some may find it distasteful that XML is somehow "preferred".  (I understand that's not why you're doing it, just noting the impression it may trigger)</p>



<a name="153862962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862962">(Dec 11 2016 at 19:46)</a>:</h4>
<p>I mean, that basic core feature is defined in terms of extensions, breakage of semantic layers :)</p>



<a name="153862964"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862964" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862964">(Dec 11 2016 at 19:55)</a>:</h4>
<p>one that would be used in 6 places? </p>



<a name="153862965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862965">(Dec 11 2016 at 19:56)</a>:</h4>
<p>why not, you introduced contentReferences, which used in 5 places</p>



<a name="153862968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862968">(Dec 11 2016 at 20:01)</a>:</h4>
<p>we expect that to be used more. </p>



<a name="153862969"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862969" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862969">(Dec 11 2016 at 20:07)</a>:</h4>
<p>RDF type differs from xml type in one place - RDF makes anyURI a bNode (e.g. reference to RDF node) so we mapped anyURI to string for RDF</p>



<a name="153862970"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Validation%20for%20required/near/153862970" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Validation.20for.20required.html#153862970">(Dec 11 2016 at 20:08)</a>:</h4>
<p>JSON type is matching type, but that often means string since the type system is simpler. But it's done by rules, so it might be simpler to hard code the equivalence as a table somewhere</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
