---
layout: page
title: "FHIR Chat  · Coding slice size restrictions · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html">Coding slice size restrictions</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="158968098"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158968098" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158968098">(Feb 20 2019 at 11:53)</a>:</h4>
<p>Hello - obscure question here - I noticed a delta between stu3 and r4 with regards to coding slices, like Observation.code.coding:BPCode (xref:  <a href="http://hl7.org/fhir/bp.html" target="_blank" title="http://hl7.org/fhir/bp.html">http://hl7.org/fhir/bp.html</a>, <a href="http://hl7.org/fhir/STU3/bp.html" target="_blank" title="http://hl7.org/fhir/STU3/bp.html">http://hl7.org/fhir/STU3/bp.html</a>, also tracker item  20409 for bug in the differ)</p>



<a name="158968308"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158968308" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158968308">(Feb 20 2019 at 11:57)</a>:</h4>
<p>in STU3, these fields are listed as 0...<em>, but in R4, they're listed as 1...1 .  Given that the slicing is open in both cases, it seems like you'd be able to have multiple codings in either case that match those profiles, so I'm curious what the effective differences is.  Those are kind of a weird case  because I dunno why you'd want multiple codings with the same system AND code, but you could imagine a different case where it were JUST system that were fixed.  It seems to me that having Coding slicing be 0..</em> and 1...1  are effectively the same, since you can always add additional Codings to a CodeableConcept, does that sound right?</p>



<a name="158968374"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158968374" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158968374">(Feb 20 2019 at 11:58)</a>:</h4>
<p>erhm, looks like stars go italics, 0...\* above</p>



<a name="158968429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158968429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158968429">(Feb 20 2019 at 11:59)</a>:</h4>
<p>I guess another way to phrase this question:<br>
if a CodeableConcept has a open slicing for a Coding with a fixed system (e.g., <a href="http://loinc.org" target="_blank" title="http://loinc.org">loinc.org</a>), and a size of 1...1, is it <em>illegal</em> to have multiple codings with <a href="http://loinc.org" target="_blank" title="http://loinc.org">loinc.org</a>?  I guess would be "no" since it's open slicing, it's just that only one of them would "be" the slice (and it doesn't matter which one, as long as there is at least  one.</p>



<a name="158988040"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158988040" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158988040">(Feb 20 2019 at 16:02)</a>:</h4>
<p>The intention of the slicing is to say "there must be one code that looks like this" - thus the correction in R4.  The upper cardinality of "1" will ensure that there's at most one slice with that code and system.  We want to support the possibility for other codings as well - including potentially other LOINC codings.  It's common for there to be more detailed LOINC codes that you'd want to maintain.</p>



<a name="158993653"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158993653" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158993653">(Feb 20 2019 at 17:11)</a>:</h4>
<p>thanks Lloyd, that mostly makes sense.  so to be clear, when you say, "The upper cardinality of "1" will ensure that there's at most one slice with that code and system." does that mean that a record with TWO codes with that code any system would be invalid?  I know it's a weird and unlikely case, just trying to make sure I understand the implications</p>



<a name="158993746"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158993746" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158993746">(Feb 20 2019 at 17:13)</a>:</h4>
<p>and similarly, if ONLY the system were specified but not the code (i.e., "This code MUST have a LOINC code, but we're not saying what it has to be"), and the slice cardinality were 1...1, would a record with TWO LOINC codes be invalid?</p>



<a name="158994030"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158994030" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158994030">(Feb 20 2019 at 17:17)</a>:</h4>
<p>The slice is matching the combination of code + system.  It's totally fine if there are other codes from the same system</p>



<a name="158994072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158994072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158994072">(Feb 20 2019 at 17:17)</a>:</h4>
<p>it's the upper bound I'm asking about though</p>



<a name="158994183"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158994183" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158994183">(Feb 20 2019 at 17:19)</a>:</h4>
<p>if two records matched (code X system) would that be invalid</p>



<a name="158994439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158994439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158994439">(Feb 20 2019 at 17:22)</a>:</h4>
<p>Only if you were slicing only by system.  If you're slicing by code and system and the 1..1 slice defines a fixed value for code and system, then the cardinality constraint of the slice only applies to repetitions in the instance that match that slice.</p>



<a name="158994461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158994461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158994461">(Feb 20 2019 at 17:22)</a>:</h4>
<p>I.e. the instance repetition would have to match the system AND the code to be considered a member of the slice and count towards the max cardinality.</p>



<a name="158994537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158994537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158994537">(Feb 20 2019 at 17:23)</a>:</h4>
<p>ok that makes sense, so even though the slicing might be "open", the max cardinality constrains the max number of records that can match that slice</p>



<a name="158994564"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158994564" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158994564">(Feb 20 2019 at 17:24)</a>:</h4>
<p>thanks Lloyd!</p>



<a name="158994750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158994750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158994750">(Feb 20 2019 at 17:26)</a>:</h4>
<p>is there any restriction you know of that says that (code X system) must be unique? e.g., if I have two identical LOINC codes from the same system, but with potentially different other metadata (e.g., display, user_selected, etc.) would that be legal?  weird, definitely, but legal?</p>



<a name="158994759"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158994759" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158994759">(Feb 20 2019 at 17:26)</a>:</h4>
<p>(again, thank you so much for being so responsive, it makes a huge difference)</p>



<a name="158995256"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158995256" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158995256">(Feb 20 2019 at 17:32)</a>:</h4>
<p>There's no rule that prevents the same code + system pair from being present, though you could define an invariant if you wanted to.  We didn't define such an invariant because duplicate codings don't cause harm and there are theoretical use-cases where it might be useful.  For example, someone might do that because they want to convey multiple display names.  You might also have dumb code that injects translations and doesn't check to see if the code is already there.</p>



<a name="158995768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Coding%20slice%20size%20restrictions/near/158995768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick George <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Coding.20slice.20size.20restrictions.html#158995768">(Feb 20 2019 at 17:39)</a>:</h4>
<p>makes sense, thanks!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
