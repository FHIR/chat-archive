---
layout: page
title: "FHIR Chat  · Paging through a resource content · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html">Paging through a resource content</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="164997621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/164997621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#164997621">(May 06 2019 at 16:43)</a>:</h4>
<p>There are various resources that can contain very long lists of elements (eg List, Group, ValueSet) - it can be unpractical to GET one  of those in one go. Is there any way to 'page' through their content that I missed? If not - should we define maybe operation(s) to page through those lists?</p>



<a name="165003695"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165003695" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165003695">(May 06 2019 at 17:58)</a>:</h4>
<p>I guess an API could implement something like this in the transport layer. Not sure if it is wise to pull this into the FHIR spec. Note that resource fragments are not valid json/xml.</p>



<a name="165003783"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165003783" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165003783">(May 06 2019 at 17:59)</a>:</h4>
<p>ValueSet expansion has paging parameters in the $expand operation.</p>



<a name="165004317"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165004317" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165004317">(May 06 2019 at 18:05)</a>:</h4>
<p>nothing general so far</p>



<a name="165004506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165004506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165004506">(May 06 2019 at 18:07)</a>:</h4>
<p>so is the implication that we need something like <code>_elements=someProperty[0..10]</code> ?</p>



<a name="165004897"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165004897" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165004897">(May 06 2019 at 18:12)</a>:</h4>
<p>Maybe ... but I was thinking more along the lines of the way the $expand operation works, specifying a range (and relying on the fact that there is only one element that needs the paging)</p>



<a name="165005625"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165005625" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165005625">(May 06 2019 at 18:21)</a>:</h4>
<p>sounds like graphQL</p>



<a name="165005750"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165005750" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165005750">(May 06 2019 at 18:22)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> yes, you can do things at the transport layer, but the problem I am thinking about is the client having to limit the elements it gets for display or processing reasons, and so it would need valid json/xml resources, that transport layer stuff does not get you</p>



<a name="165006108"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165006108" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165006108">(May 06 2019 at 18:26)</a>:</h4>
<p>As Michel, I'm also not sure whether this should be covered in FHIR core.<br>
If I was in the need, I would probably put up a custom operation on Group/List.</p>
<p>What is your use case? Especially: is it necessary to have a Group or List, or might a search give the same results (e.g. using tags on the resources) - since a searchset Bundle has all that stuff out of the box</p>



<a name="165006300"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165006300" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165006300">(May 06 2019 at 18:29)</a>:</h4>
<p>Our specific use case is List, and we did solve it with a custom operation that returns a subsetted List with only a range of items</p>



<a name="165006329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165006329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165006329">(May 06 2019 at 18:29)</a>:</h4>
<p>But seems a fairly general case, hence my question here</p>



<a name="165006621"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165006621" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165006621">(May 06 2019 at 18:32)</a>:</h4>
<p>(Group are in the proposed bulk data specs, so systems that implement that are going to have large Groups to deal with)</p>



<a name="165040556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165040556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165040556">(May 07 2019 at 04:04)</a>:</h4>
<p>Huge resources maybe a bad idea. That's why for terminology in aidbox we  introduced Concept resource and sptit StructureDefinition into Element (Attribute) resource. Because after paging you will want sorting and filter, concurent update problems, hisory problems etc - you will duplicate half of api :(</p>



<a name="165040654"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165040654" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165040654">(May 07 2019 at 04:07)</a>:</h4>
<p>We also need ndjson representation of bundle for efficient stream processing</p>



<a name="165082965"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165082965" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165082965">(May 07 2019 at 15:40)</a>:</h4>
<blockquote>
<p>Huge resources maybe a bad idea</p>
</blockquote>
<p>Maybe they are a bad idea, but it is what we have....</p>



<a name="165083416"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165083416" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165083416">(May 07 2019 at 15:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> I don't understand how Concept resource could reduce the number of items in value set expansion.</p>



<a name="165083507"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165083507" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165083507">(May 07 2019 at 15:45)</a>:</h4>
<p><span class="user-mention" data-user-id="191764">@Cooper Thompson</span> and I were talking about that following a discussion earlier today in PA.</p>



<a name="165083579"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165083579" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165083579">(May 07 2019 at 15:46)</a>:</h4>
<p>FHIR already has an elegant solution for this for the Bundles returned by searches.  How directly can we leverage that?</p>



<a name="165083649"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165083649" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165083649">(May 07 2019 at 15:47)</a>:</h4>
<p>List has the List.entry BackboneElement.  What if we had a new resource, ListEntry, that had the same elements as List.entry?</p>



<a name="165083685"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165083685" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165083685">(May 07 2019 at 15:47)</a>:</h4>
<p>Following <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> 's comment, I think you first have to answer why graphql is not an appropriate solution.</p>



<a name="165083693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165083693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165083693">(May 07 2019 at 15:47)</a>:</h4>
<p>Then the List could have a new element, List.entryBundle to point to a Bundle of ListEntry resources.</p>



<a name="165083923"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165083923" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165083923">(May 07 2019 at 15:50)</a>:</h4>
<blockquote>
<p>Following <span class="user-mention silent" data-user-id="191316">Grahame Grieve</span> 's comment, I think you first have to answer why graphql is not an appropriate solution.</p>
</blockquote>
<p>I don't think it's unreasonable to consider multiple possible solutions and evaluate their relative merits.  (Except when one has already been adopted; in that case I agree that whoever wants to present an alternative first needs to explain why we should discard what we're already doing.)</p>



<a name="165084228"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084228" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084228">(May 07 2019 at 15:54)</a>:</h4>
<p>When Bundle is used as search result, the client can indicating paging using _count parameter. Similarly for valueSet expansion, client can provide offset and count for paging. When client request List/Group resource, what is the parameter for client to ask server for paging?</p>



<a name="165084439"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084439" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084439">(May 07 2019 at 15:57)</a>:</h4>
<p>For the ListEntry solution, a client would GET [base]/List/[id], find the url for the List.entryBundle, and GET the linked Bundle.  If the server didn't want to return the contents of the Bundle in a single page, it would provide a URL for the next page.  </p>
<p>For <a href="https://www.hl7.org/fhir/graphql.html" target="_blank" title="https://www.hl7.org/fhir/graphql.html">graphQL</a>, how does this work?  It looks like the client would POST to [base]/List/[id]/$graphql</p>



<a name="165084459"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084459" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084459">(May 07 2019 at 15:57)</a>:</h4>
<p>What does the client POST there?</p>



<a name="165084720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084720">(May 07 2019 at 16:00)</a>:</h4>
<blockquote>
<p>When Bundle is used as search result, the client can indicating paging using _count parameter. Similarly for valueSet expansion, client can provide offset and count for paging. When client request List/Group resource, what is the parameter for client to ask server for paging?</p>
</blockquote>
<p>It could use the same syntax as a search.  In fact, it could <strong>be</strong> a search.  If ListEntry has a List element that's a Reference to the parent list, the List.entryBundle element could be a uri to the search.  [base]/ListEntry?list=[the List's id]</p>



<a name="165084734"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084734" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084734">(May 07 2019 at 16:00)</a>:</h4>
<p>If we have a separate ListEntry resource then we can do normal paged searches directly on that I guess?</p>



<a name="165084779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084779">(May 07 2019 at 16:01)</a>:</h4>
<blockquote>
<p>If we have a separate ListEntry resource then we can do normal paged searches directly on that I guess?</p>
</blockquote>
<p>Yes!</p>



<a name="165084780"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084780" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084780">(May 07 2019 at 16:01)</a>:</h4>
<p>(I typed it at the same time...)</p>



<a name="165084804"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084804" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084804">(May 07 2019 at 16:01)</a>:</h4>
<p>I was using graphQL to get the list, I'd do Patches to update the list</p>



<a name="165084812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084812">(May 07 2019 at 16:01)</a>:</h4>
<p>A client could hit [base]/ListEntry?list=[the List's id]&amp;_count=100</p>



<a name="165084823"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084823" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084823">(May 07 2019 at 16:01)</a>:</h4>
<p>graphQL is really neither here nor there for mutations</p>



<a name="165084914"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084914" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084914">(May 07 2019 at 16:02)</a>:</h4>
<p>I assume Grahme was not proposing GraphQL as a solution - implementing a complete different API just to solve this does not seem very practical</p>



<a name="165084927"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084927" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084927">(May 07 2019 at 16:02)</a>:</h4>
<p>I have to say, I really don't like the idea of ListEntry-  feels like cracking a nut with a bulldozer</p>



<a name="165084941"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084941" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084941">(May 07 2019 at 16:02)</a>:</h4>
<p>That's fair.</p>



<a name="165084962"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084962" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084962">(May 07 2019 at 16:03)</a>:</h4>
<p>How complex would graphQL be?  What would the body be?</p>



<a name="165084974"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165084974" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165084974">(May 07 2019 at 16:03)</a>:</h4>
<p>I was reacting to the invention of a whole different API anyway that was like graphQL</p>



<a name="165085007"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085007" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085007">(May 07 2019 at 16:03)</a>:</h4>
<p>I'm not following then; is there a solution you recommend for paging through a List?</p>



<a name="165085259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085259">(May 07 2019 at 16:06)</a>:</h4>
<p>we've never really resolved the problem of a list getting too big. But i would say that the obvious solution is to add $subList $add $remove operations, and anything more sophisticated --&gt; graphQL</p>



<a name="165085293"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085293" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085293">(May 07 2019 at 16:06)</a>:</h4>
<p>I suppose you could look at List fragments in the style of CodeSystem fragments</p>



<a name="165085312"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085312" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085312">(May 07 2019 at 16:06)</a>:</h4>
<p>(not that it gets much use in CodeSystem implementations AFAIK)</p>



<a name="165085364"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085364" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085364">(May 07 2019 at 16:07)</a>:</h4>
<p>of course, that would only work if Lists were defined with and referenced by something like a canonical</p>



<a name="165085510"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085510" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085510">(May 07 2019 at 16:09)</a>:</h4>
<p>I don't disagree with Grahame's bulldozer point.  That said, every FHIR server has a bulldozer already, and every FHIR client knows how to drive one.</p>



<a name="165085527"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085527" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085527">(May 07 2019 at 16:09)</a>:</h4>
<p>I am a little bit lost in this discussion. So <span class="user-mention" data-user-id="191936">@Michael Donnelly</span> What is the proposed ListEntry resource and what is the difference from List?</p>



<a name="165085689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085689">(May 07 2019 at 16:10)</a>:</h4>
<p>yes we all know how to drive the big bulldozer (brrrrrrrm) but I don't think we always want to have to start it up just to get down the end of the driveway</p>



<a name="165085735"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085735" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085735">(May 07 2019 at 16:11)</a>:</h4>
<p>My idea (just noodling, not a proposal yet) is to have a ListEntry resource that has the same elements as the List.entry (List-dot-entry) BackboneElement.  Then a client can search for the ListEntry resources that are on a List.</p>



<a name="165085769"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085769" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085769">(May 07 2019 at 16:11)</a>:</h4>
<p>And then the client, like Michele said, can page through those results because it would be a normal search.</p>



<a name="165085776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085776">(May 07 2019 at 16:11)</a>:</h4>
<p>As I wrote above we solved it in our case adding a <code>../List/$getPage?pageSize=N&amp;pageNumber=M </code> operation  (and we tag the returned partial list as SUBSETTED) - that seems to be Grahame's $subList</p>



<a name="165085875"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085875" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085875">(May 07 2019 at 16:12)</a>:</h4>
<p>yes your $getPage is pretty much the same as $subList - doesn't matter what it's called</p>



<a name="165085876"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085876" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085876">(May 07 2019 at 16:12)</a>:</h4>
<p>Michele, how easy did clients find implementing that?</p>



<a name="165085951"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085951" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085951">(May 07 2019 at 16:13)</a>:</h4>
<p>And Grahame or Michele, what happens if the server wants to enforce paging even if the client doesn't ask for it?</p>



<a name="165085953"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085953" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085953">(May 07 2019 at 16:13)</a>:</h4>
<p>Don't know! Do not have any doing that yet (but it does not seem difficult)</p>



<a name="165085978"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165085978" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165085978">(May 07 2019 at 16:13)</a>:</h4>
<p>I agree, but I've been a bad judge of that sometimes in the past.</p>



<a name="165086034"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086034" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086034">(May 07 2019 at 16:14)</a>:</h4>
<p>If the list is too big we return a 422 'too expensive'</p>



<a name="165086075"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086075" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086075">(May 07 2019 at 16:14)</a>:</h4>
<p>And then the client can come back and ask again with a pageSize (or a smaller one)?</p>



<a name="165086086"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086086" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086086">(May 07 2019 at 16:14)</a>:</h4>
<p>and maybe a header link see..aslo... if you really want to be thorough</p>



<a name="165086102"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086102" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086102">(May 07 2019 at 16:14)</a>:</h4>
<p>Yes</p>



<a name="165086133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086133">(May 07 2019 at 16:15)</a>:</h4>
<p>Do you have an OperationOutcome that lets the client know how big a request is allowed?</p>



<a name="165086149"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086149" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086149">(May 07 2019 at 16:15)</a>:</h4>
<p>No, did not go that far</p>



<a name="165086174"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086174" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086174">(May 07 2019 at 16:15)</a>:</h4>
<p>But it wouldn't be hard.</p>



<a name="165086177"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086177" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086177">(May 07 2019 at 16:15)</a>:</h4>
<p>Don't understand 'see also' ?</p>



<a name="165086187"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086187" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086187">(May 07 2019 at 16:15)</a>:</h4>
<p>No, not hard</p>



<a name="165086279"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086279" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086279">(May 07 2019 at 16:16)</a>:</h4>
<p>(and our lists are read-only, so no need for $add, $remove....)</p>



<a name="165086432"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086432" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086432">(May 07 2019 at 16:18)</a>:</h4>
<p>I think that's a perfectly reasonable solution.  </p>
<p>I still think breaking out ListEntry would be easier for implementers (if harder for the standard), since developers of clients and servers would already have code to handle search paging, so there wouldn't be incremental effort for this.  BUT I'm not going to die on that hill.</p>



<a name="165086440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086440">(May 07 2019 at 16:18)</a>:</h4>
<p>see also - you could add a related link in an http header to advise clients that if they want to access a list you have said is too big, they can go there. (that's HATEOS). Of course, they will only know how to use 'there' if they have the secret knowledge from this conversation somehow, so it's not that useful</p>



<a name="165086511"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086511" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086511">(May 07 2019 at 16:19)</a>:</h4>
<p>breaking into listEntry would be better for searching for List, but really  bad for almost every other use of list - e.g. in documents, or just maintaining the list</p>



<a name="165086657"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086657" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086657">(May 07 2019 at 16:20)</a>:</h4>
<p>Could an alternative be to have an operation that could generate/return a sublist, perhaps even in the form of a bundle if you want to use that paging mechanism? (not advocating for it, just spitballing)</p>



<a name="165086699"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086699" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086699">(May 07 2019 at 16:21)</a>:</h4>
<p>Hmmm.</p>



<a name="165086736"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086736" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086736">(May 07 2019 at 16:21)</a>:</h4>
<p>e.g. <code>List/[id]/$enumerate?_count=10</code></p>



<a name="165086800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086800">(May 07 2019 at 16:22)</a>:</h4>
<p>that's what Michele has done and I proposed</p>



<a name="165086807"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086807" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086807">(May 07 2019 at 16:22)</a>:</h4>
<p>That's pretty much what <span class="user-mention" data-user-id="191912">@Michele Mottini</span> did, I think .</p>



<a name="165086816"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086816" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086816">(May 07 2019 at 16:22)</a>:</h4>
<p>oh, sorry. great minds, I guess</p>



<a name="165086884"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165086884" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165086884">(May 07 2019 at 16:23)</a>:</h4>
<p>OK - so agreed that the operation is the 'right' solution...should that be in the specs? Or not worth is?</p>



<a name="165087020"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165087020" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stefan Lang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165087020">(May 07 2019 at 16:24)</a>:</h4>
<p>Should it be an operation or might it be just a link element (as in Bundle) plus search-like parameters?</p>



<a name="165087080"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165087080" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165087080">(May 07 2019 at 16:25)</a>:</h4>
<p>yes please create a task to add $getPage, $add $remove to the spec.</p>



<a name="165087486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165087486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165087486">(May 07 2019 at 16:30)</a>:</h4>
<p>Is $add operation for adding item to the list?</p>



<a name="165087546"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165087546" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165087546">(May 07 2019 at 16:30)</a>:</h4>
<p>Yes - so you do not have to POST or PUT the entire thing</p>



<a name="165092588"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165092588" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165092588">(May 07 2019 at 17:32)</a>:</h4>
<p><a href="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21650" target="_blank" title="https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21650">GF#21650</a></p>



<a name="165094537"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165094537" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165094537">(May 07 2019 at 17:54)</a>:</h4>
<p>I think count is a great idea, but I'm concerned about offset.  </p>
<p>What if instead we had an equivalent to the next link in a Bundle?  As a server, if we have to support offset, we will need to iterate through the previous entries to count up to the offset.  If we return an opaque session parameter (like we do for a search), the client can pick up where it left off without an additional burden on the server.</p>



<a name="165095815"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165095815" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165095815">(May 07 2019 at 18:07)</a>:</h4>
<p>see extensive discussion of this on the terminology stream with regard to expand. What I've learnt is that people feel very passionate about this but I can't figure out why</p>



<a name="165095919"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165095919" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165095919">(May 07 2019 at 18:08)</a>:</h4>
<p>Copied that from $expand - for a List and Group the server should have the complete list of entries / members stored somewhere, so jumping to an offset does not seem that hard? (On searches is more complex because those are generated on the fly)</p>



<a name="165096190"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165096190" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165096190">(May 07 2019 at 18:11)</a>:</h4>
<p>What should happen if the List resource changes between iterations?</p>



<a name="165096484"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165096484" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165096484">(May 07 2019 at 18:14)</a>:</h4>
<p>offset problems should happen. Whatever the approach is</p>



<a name="165096614"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165096614" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165096614">(May 07 2019 at 18:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191343">@Michael Lawley</span> Good point! since ValueSet expansion does not change that often.</p>



<a name="165096777"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165096777" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165096777">(May 07 2019 at 18:18)</a>:</h4>
<blockquote>
<p>What should happen if the List resource changes between iterations?</p>
</blockquote>
<p>mhh..nothing? If offset is beyond the end return no entries / members (that would be the same behavior even if the resource did not change)</p>



<a name="165096986"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165096986" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165096986">(May 07 2019 at 18:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191912">@Michele Mottini</span> For example, client got first 100 item, then a new item was inserted at index 50, then the client requested next 100, the client could get the same item (index 100 before insert and index 101 after insert) twice.</p>



<a name="165097085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165097085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165097085">(May 07 2019 at 18:22)</a>:</h4>
<p>Yes - I'd be ok with that</p>



<a name="165097215"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165097215" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Radov <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165097215">(May 07 2019 at 18:24)</a>:</h4>
<blockquote>
<p>What should happen if the List resource changes between iterations?</p>
</blockquote>
<p>It should work the same way as a typical relational database cursor. Although there is some variation between database products, the usual approach is to take a <strong>snapshot</strong> during the initial request. Then as long as the cursor is open the client can page back and forth through that snapshot and won't see any changes.</p>



<a name="165097231"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165097231" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165097231">(May 07 2019 at 18:24)</a>:</h4>
<p>It is possible for Server to inform client that the list is changed. Other than that I don't know what else the server could do.</p>



<a name="165097418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165097418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165097418">(May 07 2019 at 18:26)</a>:</h4>
<p><span class="user-mention" data-user-id="220686">@Nick Radov</span> In theory this is good. I guess this put burden on server side complexity.</p>



<a name="165097545"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165097545" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165097545">(May 07 2019 at 18:28)</a>:</h4>
<blockquote>
<p>I guess this put burden on server side complexity.</p>
</blockquote>
<p>Not only on the server - the client should know / communicate which snapshot it is paging through, you'll need the same approach as a normal search - with next / previous links in the response etc. I would not go there</p>



<a name="165098113"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165098113" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165098113">(May 07 2019 at 18:34)</a>:</h4>
<p>If you use the ETAG of the underlying Resource, then that should be usable to detect whether a change has happened; simple for client &amp; server</p>



<a name="165100401"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165100401" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165100401">(May 07 2019 at 19:00)</a>:</h4>
<p>Not simple for the server.  If there's a list of 3500 entries and a client asks for 100 of them, the server would need to look at all 3500 to generate an etag.</p>



<a name="165107827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165107827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165107827">(May 07 2019 at 20:27)</a>:</h4>
<p>There are problems not only with the size of huge resources but with concurrent updates and history as well.  ListEntry, GroupEntry, Element, Concept is an approach to efficiently reuse existing FHIR API and implementations</p>



<a name="165108001"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108001" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108001">(May 07 2019 at 20:29)</a>:</h4>
<p>Otherwise, we have to add more and more irregularity and duplication into implementations.</p>



<a name="165108240"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108240" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108240">(May 07 2019 at 20:31)</a>:</h4>
<p>I'm not sure why adding resource types would be any less disruptive than adding operations</p>



<a name="165108304"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108304" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108304">(May 07 2019 at 20:32)</a>:</h4>
<p>Still don't understand how Concept could help paging  ValueSet expansion</p>



<a name="165108333"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108333" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108333">(May 07 2019 at 20:32)</a>:</h4>
<p>... which already works</p>



<a name="165108340"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108340" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108340">(May 07 2019 at 20:32)</a>:</h4>
<p>Because they  duplicate logic of  Search/ POST/PUT/PATCH</p>



<a name="165108406"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108406" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108406">(May 07 2019 at 20:33)</a>:</h4>
<p>Can you clarify?</p>



<a name="165108408"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108408" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108408">(May 07 2019 at 20:33)</a>:</h4>
<blockquote>
<p>Still don't understand how Concept could help paging  ValueSet expansion</p>
</blockquote>
<p>Concept resource turn expansion into FHIR Search</p>



<a name="165108477"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108477" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108477">(May 07 2019 at 20:34)</a>:</h4>
<p>expansion does a very different thing to FHIR Search</p>



<a name="165108544"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108544" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108544">(May 07 2019 at 20:35)</a>:</h4>
<p>What is the difference?</p>



<a name="165108781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yunwei Wang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108781">(May 07 2019 at 20:37)</a>:</h4>
<p><span class="user-mention" data-user-id="191318">@nicola (RIO/SS)</span> I guess your solution is that ValueSet.expansion contain [0..*] Concept and each Concept has a reference back to ValueSet so you search Concept?valueSet.id=12345. Is that correct?</p>



<a name="165108800"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108800" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108800">(May 07 2019 at 20:37)</a>:</h4>
<p>In 80% yes :)</p>



<a name="165108809"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108809" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108809">(May 07 2019 at 20:37)</a>:</h4>
<p>may be more</p>



<a name="165108906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165108906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165108906">(May 07 2019 at 20:38)</a>:</h4>
<p>In real apps probably 95%</p>



<a name="165109129"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109129" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109129">(May 07 2019 at 20:41)</a>:</h4>
<p>I'm pretty sure efficient terminology server do the same materialization internally?!</p>



<a name="165109158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109158">(May 07 2019 at 20:41)</a>:</h4>
<p>Nope</p>



<a name="165109248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109248">(May 07 2019 at 20:42)</a>:</h4>
<p>Please, fix me if i'm wrong</p>



<a name="165109322"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109322" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109322">(May 07 2019 at 20:43)</a>:</h4>
<p>Our product doesn't do that. And we certainly consider it to be an efficient terminology server.</p>



<a name="165109347"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109347" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109347">(May 07 2019 at 20:43)</a>:</h4>
<p>So you eval each expansion on every GET?</p>



<a name="165109447"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109447" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109447">(May 07 2019 at 20:44)</a>:</h4>
<p>I think ratio read to write for terminology server in production is about 1000 / 1</p>



<a name="165109451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109451">(May 07 2019 at 20:44)</a>:</h4>
<p>Well, that's complicated, but we don't store mappings of codes to the ValueSets of which they are a member</p>



<a name="165109486"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109486" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109486">(May 07 2019 at 20:45)</a>:</h4>
<p>Give me an example, where this approach will not work</p>



<a name="165109493"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109493" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109493">(May 07 2019 at 20:45)</a>:</h4>
<p>You can always supply a new ValueSet with your expand request. Either as an implicit ValueSet, or as a POST parameter to $expand</p>



<a name="165109504"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109504" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109504">(May 07 2019 at 20:45)</a>:</h4>
<p>And this is a powerful thing to do, and something we do often</p>



<a name="165109514"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109514" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109514">(May 07 2019 at 20:45)</a>:</h4>
<p>That's good for authoring - not for expluatation</p>



<a name="165109525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109525">(May 07 2019 at 20:45)</a>:</h4>
<p>Ours is not primarily an authoring product</p>



<a name="165109647"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109647" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Steel <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109647">(May 07 2019 at 20:47)</a>:</h4>
<p>I think we're well off topic. ValueSet is different from List and Group, in that it already has a Normative mechanism for paging content</p>



<a name="165109740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109740">(May 07 2019 at 20:48)</a>:</h4>
<p>Ok. But for me, it's a similar technical problem/anti-pattern.</p>



<a name="165109794"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109794" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109794">(May 07 2019 at 20:49)</a>:</h4>
<p>We've already got a request to support List with millions of references :(</p>



<a name="165109893"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165109893" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165109893">(May 07 2019 at 20:50)</a>:</h4>
<p>I'm a little bit scared - guys want to search by reference on these resources, probably next step is _revinlcude=* :).</p>



<a name="165110041"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165110041" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165110041">(May 07 2019 at 20:52)</a>:</h4>
<p>Yes, we can hack it and apply a different  strategy for storing and manipulating Lists - but that's will bring duplication</p>



<a name="165110443"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165110443" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nicola (RIO/SS) <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165110443">(May 07 2019 at 20:57)</a>:</h4>
<p>And yeah - internally we will do ListEntry for that :)</p>



<a name="165152855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165152855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165152855">(May 08 2019 at 11:05)</a>:</h4>
<p><span class="user-mention" data-user-id="191936">@Michael Donnelly</span> I don't follow.  If I have a List resource with 100000 members and you ask for 100..200, the ETAG for the List containing the subset is the ETAG for the original List, i.e., based on the technical version.  No need to inspect anything.</p>



<a name="165213976"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165213976" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165213976">(May 09 2019 at 00:38)</a>:</h4>
<p>That depends on how the List is represented in the server.  If it's a native FHIR server, and there's a List record with all those lines in it, you're great.  But if the list is a virtual thing in a façade server, it's a horse of an entirely different color.</p>



<a name="165214085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214085">(May 09 2019 at 00:41)</a>:</h4>
<p>For us, functionally speaking, returning entries if a List would be basically the same as returning entries in a search.</p>



<a name="165214138"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214138" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214138">(May 09 2019 at 00:42)</a>:</h4>
<p>In both cases, we (usually) use iterator functions.  So each time we do a search, we call the "get the next result" function until we've hit the _count limit.</p>



<a name="165214158"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214158" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214158">(May 09 2019 at 00:43)</a>:</h4>
<p>When we hit that limit for a search, we set a bookmark, generate a session token associated with it, and return the session token with the results.</p>



<a name="165214163"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214163" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214163">(May 09 2019 at 00:43)</a>:</h4>
<p>When a client hits the next url, it includes the session token, and we can find the bookmark and keep searching.</p>



<a name="165214170"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214170" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214170">(May 09 2019 at 00:43)</a>:</h4>
<p>If we had to do an offset instead of a bookmark, we'd start at the beginning and count the entries over which we iterated.</p>



<a name="165214216"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214216" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214216">(May 09 2019 at 00:44)</a>:</h4>
<p>And we hit the offset, we would start getting results.</p>



<a name="165214225"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214225" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214225">(May 09 2019 at 00:44)</a>:</h4>
<p>So we'd have to loop over a bunch of entries - more each page - even though the client didn't need them.</p>



<a name="165214248"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214248" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214248">(May 09 2019 at 00:45)</a>:</h4>
<p>An ETAG for what's basically a search would be even worse.  We'd need to iterate over the entire list, <strong>store it somewhere as an entire list</strong>, and take a checksum of it.</p>



<a name="165214303"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214303" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214303">(May 09 2019 at 00:46)</a>:</h4>
<p>We wouldn't be able to count on keeping that in memory, so we'd have to write the list to disk, checksum it, and then discard that storage.</p>



<a name="165214306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214306">(May 09 2019 at 00:46)</a>:</h4>
<p>Not excellent from a performance standpoint.</p>



<a name="165214377"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214377" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214377">(May 09 2019 at 00:48)</a>:</h4>
<p>Right...so your List is really a view of a search result / a dynamically generated thing; you don't have an internal list of references that are pro-actively maintained?</p>



<a name="165214454"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214454" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214454">(May 09 2019 at 00:50)</a>:</h4>
<p>Correct.</p>



<a name="165214473"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214473" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214473">(May 09 2019 at 00:50)</a>:</h4>
<p>So I think we have a three by two array of options (if we're using operations instead of new resource and a search):<br>
1. The client specifies an offset. <br>
2. The client specifies a bookmark (basically, the last entry it got last time).<br>
3. The server specifies a session token /  a next link.</p>



<a name="165214479"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214479" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214479">(May 09 2019 at 00:51)</a>:</h4>
<p>The other axis is with or without ETAGs.</p>



<a name="165214495"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214495" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214495">(May 09 2019 at 00:51)</a>:</h4>
<p>Option 2 or option 3 would be equally good for us.</p>



<a name="165214505"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214505" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214505">(May 09 2019 at 00:51)</a>:</h4>
<p>Would option 2 be as good for you as option 1?</p>



<a name="165214559"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214559" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214559">(May 09 2019 at 00:52)</a>:</h4>
<p>But if a client wants items 200..220 then they still need to iterate through with the next links and thus all the round-trip requests, rather than doing that server-side</p>



<a name="165214566"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214566" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214566">(May 09 2019 at 00:52)</a>:</h4>
<p>Instead of "give me 100 entries starting with entry 201" the client would say "give me 100 entries starting after f2e65bf5-ea34-4430-88ff-faa8a9fb816f" where f2e65bf5-ea34-4430-88ff-faa8a9fb816f is the 200th entry.</p>



<a name="165214581"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214581" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214581">(May 09 2019 at 00:53)</a>:</h4>
<p>Would the client need 200..220 if it hadn't already gotten 1..199?</p>



<a name="165214633"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165214633" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165214633">(May 09 2019 at 00:54)</a>:</h4>
<p>how does the client know about f2e65bf5-ea34-4430-88ff-faa8a9fb816f? Is it reasonable to assume that a client will only be interested in entries from 201 if she has previously looked at/retrieved up to item 200?</p>



<a name="165216385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165216385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165216385">(May 09 2019 at 01:31)</a>:</h4>
<p>The client would only know that if she had retrieved the list through entry 200.</p>



<a name="165216440"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165216440" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165216440">(May 09 2019 at 01:32)</a>:</h4>
<p>I <strong>think</strong> a client would only care about 201 having seen 1..200, but I'm definitely interested in hearing about other use cases.</p>



<a name="165239981"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165239981" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165239981">(May 09 2019 at 10:21)</a>:</h4>
<p>this is the same discussion as for ValueSet.expand - state based or offset based. <br>
<span class="user-mention" data-user-id="191936">@Michael Donnelly</span> I expect that the statement "your List is really a view of a search result / a dynamically generated thing" will not necessarily be true for all lists you deal with (in fact, it's likely that most legacy systems will have a mix of literal and inferred lists like this)</p>



<a name="165240283"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165240283" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165240283">(May 09 2019 at 10:26)</a>:</h4>
<p>Similar, yes, although I expect that there's a lot more literal Lists than there are literal ValueSet expansions.</p>



<a name="165240528"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165240528" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165240528">(May 09 2019 at 10:30)</a>:</h4>
<p>not in USA where the habitual practice is distributing expansions</p>



<a name="165240943"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165240943" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165240943">(May 09 2019 at 10:38)</a>:</h4>
<p>as I have only recently begun to recognize</p>



<a name="165241146"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165241146" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165241146">(May 09 2019 at 10:42)</a>:</h4>
<p>"not in USA where the habitual practice is distributing expansions" is a habitual practice in and around VSAC and quality measures, but I don't think it's really the established practice in general outside of that</p>



<a name="165248018"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165248018" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165248018">(May 09 2019 at 12:37)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="191936">Michael Donnelly</span> I expect that the statement "your List is really a view of a search result / a dynamically generated thing" will not necessarily be true for all lists you deal with (in fact, it's likely that most legacy systems will have a mix of literal and inferred lists like this)</p>
</blockquote>
<p>True.</p>



<a name="165248037"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165248037" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165248037">(May 09 2019 at 12:38)</a>:</h4>
<p>Likely, though, the larger the list the higher the odds that it isn't a single composed entity.</p>



<a name="165248198"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165248198" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165248198">(May 09 2019 at 12:39)</a>:</h4>
<p>As for state-based vs offset-based, how do you feel about the middle ground where the client specifies the entry after which it wants new entries?  I believe this gives both sides what they want.  <span class="user-mention" data-user-id="191343">@Michael Lawley</span>?  <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>?</p>



<a name="165249646"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165249646" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165249646">(May 09 2019 at 12:59)</a>:</h4>
<p><span class="user-mention" data-user-id="191936">@Michael Donnelly</span> : what are your list? From what you write I assume they cannot be created / modified via FHIR</p>



<a name="165251359"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165251359" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165251359">(May 09 2019 at 13:21)</a>:</h4>
<p>What we've done so far is a List of Patients.  It's the same patient list that clinicians and administrative staff use in the hospital.  This includes:</p>
<ul>
<li>A physician's "My List" of patients he or she is attending</li>
<li>A list of all the patients roomed in a specific unit</li>
<li>A census of all the patients in the hospital</li>
</ul>
<p>These are actually two kinds of list.  One is built in the system with rule-based criteria (e.g. "patients in the ICU").  The other is a manually managed list to which a user adds and removes patients.</p>



<a name="165251442"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165251442" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165251442">(May 09 2019 at 13:22)</a>:</h4>
<p>The system list will never be modifiable with FHIR.  The user-managed list can't be updated with FHIR <em>yet</em>, but we could add that in the future.</p>



<a name="165251458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165251458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165251458">(May 09 2019 at 13:22)</a>:</h4>
<p>We haven't gotten requests for it, but if someone in the App Orchard was interested, we would look into it.</p>



<a name="165251525"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165251525" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165251525">(May 09 2019 at 13:23)</a>:</h4>
<p>I haven't done a lot of work in that space, but my gut says that managing it with FHIR would be straightforward. (But don't quote me on that. <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span> )</p>



<a name="165251583"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165251583" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165251583">(May 09 2019 at 13:24)</a>:</h4>
<p>So the big one can be the patient in the hospital - some 1000s' ? Just do not implement $getPage - and do not worry about it</p>



<a name="165251612"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165251612" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165251612">(May 09 2019 at 13:24)</a>:</h4>
<p>I think the concept of bookmark-based paging through a list would also apply to valueset expansion.</p>



<a name="165251652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165251652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165251652">(May 09 2019 at 13:24)</a>:</h4>
<blockquote>
<p>So the big one can be the patient in the hospital - some 1000s' ? Just do not implement $getPage - and do not worry about it</p>
</blockquote>
<p>Not a bad point.</p>



<a name="165251756"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165251756" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165251756">(May 09 2019 at 13:25)</a>:</h4>
<p>No client yet has a use case where they need to fetch a list with more than 1,000 entries.  I <em>believe</em> today that if a List will contain more than 1,000 entries, we return an error instead of the List.</p>



<a name="165251845"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165251845" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165251845">(May 09 2019 at 13:26)</a>:</h4>
<p>I'm always wary of things like that, though.  Too often when I've said, "but nobody would ever need to..." I've later been proven wrong.</p>



<a name="165251906"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165251906" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165251906">(May 09 2019 at 13:27)</a>:</h4>
<p>So in your case, <span class="user-mention" data-user-id="191912">@Michele Mottini</span>, how well would it work to request an offset by referring to the last entry you got rather than a number of entries?</p>



<a name="165252150"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165252150" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michele Mottini <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165252150">(May 09 2019 at 13:29)</a>:</h4>
<p>We will have to search for that entry every time - not great, not too bad - but: that assumes that the same resource appears only once in a List (or Group) - and that is not in the specs</p>



<a name="165252573"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165252573" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165252573">(May 09 2019 at 13:34)</a>:</h4>
<p>here's a thought - if the server has a "next token", then the server can keep an association between this token and the corresponding offset-based link, then recognises this in the next request from the client and substitutes the token to avoid re-performing the search.<br>
Specifically:<br>
1. client asks for /List/icu-patients?count=10<br>
2. server performs search, iterates to construct List of Patients 0..9<br>
3. server sets bookmark &amp; generates session token then associates it with /List/icu-patients?offset=10<br>
4. client gets List, does whatever, and then asks for /List/icu-patients?count=10&amp;offset=10<br>
5. server looks up url /List/icu-patients?offset=10 and finds a session token, continues iterating to build List of next 10 Patients, and continues as per step 3<br>
If client instead asks for /List/icu-patients?count=10&amp;offset=11, then server needs to re-perform search, skip over first 11, etc  But, use cases suggest this is not a likely case.</p>



<a name="165252661"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165252661" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165252661">(May 09 2019 at 13:35)</a>:</h4>
<p>That would probably work.  I'd worry about edge cases it might introduce.</p>



<a name="165252748"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165252748" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165252748">(May 09 2019 at 13:36)</a>:</h4>
<blockquote>
<p>We will have to search for that entry every time - not great, not too bad - but: that assumes that the same resource appears only once in a List (or Group) - and that is not in the specs</p>
</blockquote>
<p>That's a major flaw in my idea, then. <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span></p>



<a name="165252812"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165252812" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165252812">(May 09 2019 at 13:37)</a>:</h4>
<p>Has there been discussion about why a List can include duplicate entries?</p>



<a name="165254567"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165254567" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Lawley <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165254567">(May 09 2019 at 13:59)</a>:</h4>
<p>This is just your option 3, but with implicit next links.  The main thing to be concerned about is that the client could re-issue its query with the offset in any place (and in fact reorder all parameters arbitrarily), so you need to do some URL normalisation process as part of the session token lookup</p>



<a name="165275089"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165275089" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165275089">(May 09 2019 at 18:05)</a>:</h4>
<p>Totally.</p>



<a name="165275118"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165275118" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165275118">(May 09 2019 at 18:05)</a>:</h4>
<p>I know we've taken that into account for search, so presumably we'd use the same logic.</p>



<a name="165277789"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165277789" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165277789">(May 09 2019 at 18:36)</a>:</h4>
<p>In theory an ordered List could indicate who you're seeing that day - and the same patient might appear more than once.  Though you could fix that problem by making it a List of Appointments instead...</p>



<a name="165285720"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/165285720" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Donnelly <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#165285720">(May 09 2019 at 20:20)</a>:</h4>
<p>Let me try a different angle: what need do clients have that would not be met by an opaque bookmark?  Note that nothing would stop a server from returning an opaque bookmark that happened to be a numeric offset.</p>



<a name="169839520"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Paging%20through%20a%20resource%20content/near/169839520" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Paging.20through.20a.20resource.20content.html#169839520">(Jul 08 2019 at 04:17)</a>:</h4>
<p>This thread sort of just stopped. <br>
One of the benefits of the next links used in the searching is that if the server doesn't like the page size provided, it can adjust it and continue, whereas the explicit use of count/page pairs just has to error out that the page size it too big.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
