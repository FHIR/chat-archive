---
layout: page
title: "FHIR Chat  · XML Version · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html">XML Version</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="190688291"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190688291" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190688291">(Mar 16 2020 at 06:58)</a>:</h4>
<p>We have never said whether we require a particular XML version (1.0 vs 1.1). Does anyone have any opinion about this?</p>



<a name="190689553"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190689553" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190689553">(Mar 16 2020 at 07:28)</a>:</h4>
<p>I thought we were only looking at XML 1.0<br>
approx 3 years ago we wanted to put the GS1 field separator in device.udiCarrier.carrierAIDC</p>



<a name="190689571"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190689571" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190689571">(Mar 16 2020 at 07:28)</a>:</h4>
<p>and we needed to use base64Binary.</p>



<a name="190689587"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190689587" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190689587">(Mar 16 2020 at 07:29)</a>:</h4>
<p>I think the reason was that one of the formats (JSON or XML) did not support the 0x1D character</p>



<a name="190747288"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190747288" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190747288">(Mar 16 2020 at 16:32)</a>:</h4>
<p>Are there XML processors that do not support XML 1.1?<br>
Is it easier to manage JSON &lt;-&gt; XML conversions if only XML 1.0 is supported?</p>



<a name="190783181"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190783181" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190783181">(Mar 16 2020 at 21:36)</a>:</h4>
<p>it's harder, in fact, because there are valid characters in json that are not valid in XML 1.0 but are in XML 1.1</p>



<a name="190783218"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190783218" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190783218">(Mar 16 2020 at 21:37)</a>:</h4>
<p>and it is 0x1D. But I don't remember any link between XML version and AIDC coming up in discussion</p>



<a name="190783840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190783840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190783840">(Mar 16 2020 at 21:44)</a>:</h4>
<p>Sounds like a strong case to require XML 1.1</p>



<a name="190834854"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190834854" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190834854">(Mar 17 2020 at 11:25)</a>:</h4>
<p>working on this... the validator uses the standard java SAX based parser. I thought, following <a href="https://xerces.apache.org/xerces2-j/faq-sax.html#faq-6" target="_blank" title="https://xerces.apache.org/xerces2-j/faq-sax.html#faq-6">https://xerces.apache.org/xerces2-j/faq-sax.html#faq-6</a>, the this code:</p>
<div class="codehilite"><pre><span></span>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDocumentLocator</span><span class="p">(</span><span class="n">Locator</span> <span class="n">locator</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">super</span><span class="p">.</span><span class="na">setDocumentLocator</span><span class="p">(</span><span class="n">locator</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="na">locator</span> <span class="o">=</span> <span class="n">locator</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="na">locator2</span> <span class="o">=</span> <span class="p">(</span><span class="n">org</span><span class="p">.</span><span class="na">xml</span><span class="p">.</span><span class="na">sax</span><span class="p">.</span><span class="na">ext</span><span class="p">.</span><span class="na">Locator2</span><span class="p">)</span> <span class="n">locator</span><span class="p">;</span>
      <span class="n">xmlVer</span> <span class="o">=</span> <span class="n">locator2</span><span class="p">.</span><span class="na">getXMLVersion</span><span class="p">();</span>
  <span class="p">}</span>
</pre></div>



<a name="190834858"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190834858" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190834858">(Mar 17 2020 at 11:25)</a>:</h4>
<p>on this XML:</p>



<a name="190901342"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190901342" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190901342">(Mar 17 2020 at 19:45)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="nt">&lt;CodeSystem</span> <span class="na">xmlns=</span><span class="s">&quot;http://hl7.org/fhir&quot;</span><span class="nt">/&gt;</span>
</pre></div>


<p>the locator2 interface reports the version as 1.0, not 1.1. Any ideas as to why?</p>



<a name="190907597"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190907597" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190907597">(Mar 17 2020 at 20:38)</a>:</h4>
<p>Take a look at how it is done in Writer.java under the SAX samples of Xerces. You need to get the locator during the very first startElement...</p>



<a name="190908529"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190908529" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190908529">(Mar 17 2020 at 20:46)</a>:</h4>
<p>doesn't work; don't know why. I'm just going to parse the XML header myself first - I have other reasons to do so</p>



<a name="190910193"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/190910193" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#190910193">(Mar 17 2020 at 21:01)</a>:</h4>
<p>FWIW,</p>
<div class="codehilite"><pre><span></span>java -cp ./xercesSamples.jar:./xercesImpl.jar:./serializer.jar sax.Writer ./xml_1_1_sample.xml
&lt;?xml version=&quot;1.1&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;CodeSystem&gt;&lt;/CodeSystem&gt;
</pre></div>


<p>Using your example as the sample file... Since namespaces are not enabled, the namespace is not being printed...</p>



<a name="191579461"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/191579461" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc de Graauw <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#191579461">(Mar 24 2020 at 08:47)</a>:</h4>
<p>I would not go for XML 1.1. See these comments by two XML experts: <a href="https://norman.walsh.name/2004/09/30/xml11" target="_blank" title="https://norman.walsh.name/2004/09/30/xml11">https://norman.walsh.name/2004/09/30/xml11</a>  and <a href="http://www.cafeconleche.org/books/effectivexml/chapters/03.html" target="_blank" title="http://www.cafeconleche.org/books/effectivexml/chapters/03.html">http://www.cafeconleche.org/books/effectivexml/chapters/03.html</a>. Still valid, I think. Especially what Elliotte says:  "Whereas XML 1.0 was conservative (Everything not permitted is forbidden) XML 1.1 is liberal (Everything not forbidden is permitted.) XML 1.0 listed the characters you could use in names. XML 1.1 lists the characters you can't use in names." An application expecting XML 1.0 but getting XML 1.1  would surely break. Of course, you could make &lt;?xml version="1.1" ... required in all FHIR instances, but that means all existing XML-based applications would have to change (unlike the rest of the world, we have quite some XML FHIR in the Netherlands).</p>



<a name="191619585"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/191619585" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#191619585">(Mar 24 2020 at 14:46)</a>:</h4>
<p>Given that the JSON format allows characters that are forbidden in XML 1.0, not using XML 1.1 limits interoperability. The concern about characters in names doesn't seem to apply, because the names are part of the specification, and that can be controlled.</p>



<a name="191639688"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/191639688" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc de Graauw <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#191639688">(Mar 24 2020 at 16:47)</a>:</h4>
<p>XML 1.1 is mostly about characters in names, of which you correctly say those should not be a problem. JSON text is Unicode, but doesn't allow control characters (<a href="https://www.json.org/" target="_blank" title="https://www.json.org/">https://www.json.org/</a>). XML 1.1 does allow some extra control characters in text - looks like it makes interoperability worse, not better.  Do you - or anybody else - have examples of content valid in JSON but not in XML 1.0, but valid in XML 1.1? I'm not convinced requiring XML 1.1 solves a real-world problem, and I'm pretty sure it introduces a lot of problems - having everybody upgrade to 1.1, for instance. I've seen a lot of production XML (v3, FHIR, other) and I've never yet encountered 1.1 in the wild.</p>



<a name="191647896"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/191647896" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vassil Peytchev <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#191647896">(Mar 24 2020 at 17:44)</a>:</h4>
<p>What I understood the issue to be was: </p>
<ul>
<li>in JSON you can send \u001d in the text</li>
<li>in XML 1.0 this character is not allowed</li>
<li>in XML 1.1 this character is allowed.</li>
</ul>
<p>If the above is correct, you have at least one use case where it is an issue. If I misunderstood, then XML 1.1 is probably not necessary.</p>



<a name="191730262"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/191730262" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc de Graauw <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#191730262">(Mar 25 2020 at 11:16)</a>:</h4>
<p>It's a real case, but in general I'd say if some texts can contain control characters other than TAB, NL, CR, it's best to use base64Binary as <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> has done - after all, from an XML or JSON viewpoint, this is more binary than textual content, and all issues around reserved or invalid characters are bypassed.</p>



<a name="191730973"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/191730973" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#191730973">(Mar 25 2020 at 11:24)</a>:</h4>
<p>well, we did base64 encoding because we had no choice... it hurts to tell vendors: when you scan a barcode, you either have a GS1 decoding algorithm, or a base64 encoding, or you cannot transmit the scanned barcode</p>



<a name="191974767"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/191974767" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#191974767">(Mar 27 2020 at 04:00)</a>:</h4>
<p>ICD-11 contains terms that have \u001d in their definition. I think we do not want to change code system to force the definition to be base64Binary</p>



<a name="191991711"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/191991711" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marc de Graauw <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#191991711">(Mar 27 2020 at 09:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> That makes it a mess indeed. No, you can't change the code system - it's possible  though to base64 the definition when serializing it in FHIR. Would require the definition in FHIR to be (string | base64Binary) though, does not seem the way forward either. Another route: since FHIR says nothing about 1.0 vs 1.1, the default assumption should be either is allowed. So if you need to serialize ICD-11 in FHIR, use XML 1.1 - that should be allowed today w/o any changes in specs anywhere. The one thing I see as problematic is <strong>requiring</strong> XML 1.1 for FHIR serialization - say "if you move to R5, you must move to XML 1.1".</p>



<a name="192067574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/XML%20Version/near/192067574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/XML.20Version.html#192067574">(Mar 27 2020 at 19:19)</a>:</h4>
<p>no that would certainly not be possible</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
