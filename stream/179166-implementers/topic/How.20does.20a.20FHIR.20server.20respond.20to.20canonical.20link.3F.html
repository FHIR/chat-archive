---
layout: page
title: "FHIR Chat  · How does a FHIR server respond to canonical link? · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20does.20a.20FHIR.20server.20respond.20to.20canonical.20link.3F.html">How does a FHIR server respond to canonical link?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="271950224"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20does%20a%20FHIR%20server%20respond%20to%20canonical%20link%3F/near/271950224" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Donn Relacion <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20does.20a.20FHIR.20server.20respond.20to.20canonical.20link.3F.html#271950224">(Feb 15 2022 at 09:57)</a>:</h4>
<p>According to the FHIR documentation regarding Canonical URLs (<a href="https://www.hl7.org/fhir/references.html#canonical">https://www.hl7.org/fhir/references.html#canonical</a>) references using the <code>url</code> element should be used when referencing conformance resources. According to the docs, a link such as <code>http://hl7.org/fhir/ValueSet/my-valueset|1.0</code> should be translated into a fhir search as in <code>fhir/ValueSet?url=http://hl7.org/fhir/ValueSet/my-valueset&amp;version=1.0</code>. Does this mean that a FHIR server should return a bundle when encountering <code>ValueSet/my-valueset</code> or just the resource? The docs mention about a result bundle if there is no match. Should the fhir server supposed handle this link at all? I'm working with a microsoft fhir server, and this type of interaction is not supported.</p>



<a name="271951779"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20does%20a%20FHIR%20server%20respond%20to%20canonical%20link%3F/near/271951779" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> René Spronk <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20does.20a.20FHIR.20server.20respond.20to.20canonical.20link.3F.html#271951779">(Feb 15 2022 at 10:11)</a>:</h4>
<p>It's a search like any other, so the result will always be a Bundle, regardless of the number of matches.</p>



<a name="271952827"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20does%20a%20FHIR%20server%20respond%20to%20canonical%20link%3F/near/271952827" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Donn Relacion <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20does.20a.20FHIR.20server.20respond.20to.20canonical.20link.3F.html#271952827">(Feb 15 2022 at 10:20)</a>:</h4>
<p>My concern is that the link <code>ValueSet/my-valueset</code> doesn't really look like a search interaction, it looks like a read interaction.</p>



<a name="271989715"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20does%20a%20FHIR%20server%20respond%20to%20canonical%20link%3F/near/271989715" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20does.20a.20FHIR.20server.20respond.20to.20canonical.20link.3F.html#271989715">(Feb 15 2022 at 15:24)</a>:</h4>
<p>There is no expectation that <code>[base]/ValueSet/my-valueset|someVersion</code> will necessarily resolve.  Instead, you parse and do a search wherever you typically store valuesets.  As a last resort, you can do a search on [base]/ValueSet?url=...&amp;version=someVersion.  (There's no expectation you can necessarily do a 'read' because there could be multiple instances of the same value set on the server, though it's super-convenient if doing a read gives you the 'current' value set.</p>



<a name="272065911"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20does%20a%20FHIR%20server%20respond%20to%20canonical%20link%3F/near/272065911" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Donn Relacion <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20does.20a.20FHIR.20server.20respond.20to.20canonical.20link.3F.html#272065911">(Feb 16 2022 at 02:17)</a>:</h4>
<p>Our project is currently working with Questionnaire resources, and we want it to be easier for the front-end to easily get the Questionnaire without using the autogenerated id created by the server. Initially, we decided with controlling the resource Id by using PUT instead of POST. But then the topic of versioning came up, I found that the same Id cannot be used, and that's when I looked into adding support for the canonical link.</p>
<p>Returning a bundle may not be very convenient with the end users though, but since this behavior is not expected of FHIR servers, I guess we could get away with returning only the best matching resource. Another option would be to continue using  the custom resource Id but adding the version in the Id and avoid this change altogether.</p>



<a name="272068405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/How%20does%20a%20FHIR%20server%20respond%20to%20canonical%20link%3F/near/272068405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/How.20does.20a.20FHIR.20server.20respond.20to.20canonical.20link.3F.html#272068405">(Feb 16 2022 at 03:02)</a>:</h4>
<p>We're looking at defining an operation that will retrieve a canonical - it'll grab the "most recent" if no version is specified, using the version comparison mechanism defined by the resource.  That would give you a singleton.  Otherwise, yes, you'll be dealing with a Bundle - presumably with one instance if you specify url + version.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
