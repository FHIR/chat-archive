---
layout: page
title: "FHIR Chat  · Android FHIR SDK Structured Data Capture Library · implementers"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/index.html">implementers</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html">Android FHIR SDK Structured Data Capture Library</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="274611982"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274611982" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274611982">(Mar 08 2022 at 21:46)</a>:</h4>
<p>Anyone familiar with this library <strong>Android FHIR SDK Structured Data Capture Library</strong></p>
<p>[https://github.com/google/android-fhir/wiki/Structured-Data-Capture-Library]</p>
<p>project</p>
<p><a href="https://github.com/google/android-fhir/">https://github.com/google/android-fhir/</a></p>
<p>It is a questionnaire renderer written in Kotlin for Android. I am trying to use it. Documentation is very thin at this stage. I have made some progress (I am using Java) but nothing too exciting. Just tried to render a simple Questionnaire, I get something on the screen but nothing after that.</p>



<a name="274626143"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274626143" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274626143">(Mar 09 2022 at 00:04)</a>:</h4>
<p><a href="https://wiki.digitalsquare.io/images/0/0c/Digital_Square_FHIR_Webinar_-_Android_FHIR_SDK.pdf">https://wiki.digitalsquare.io/images/0/0c/Digital_Square_FHIR_Webinar_-_Android_FHIR_SDK.pdf</a></p>



<a name="274626233"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274626233" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274626233">(Mar 09 2022 at 00:05)</a>:</h4>
<p>Here's a sample app: <a href="https://github.com/openhie/FoodAllergy-webinar/tree/master/android">https://github.com/openhie/FoodAllergy-webinar/tree/master/android</a></p>



<a name="274674457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274674457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tilo Christ <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274674457">(Mar 09 2022 at 11:28)</a>:</h4>
<p><span class="user-mention" data-user-id="366686">@Jing Tang</span> might be able to provide you with more insights.</p>



<a name="274690154"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274690154" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274690154">(Mar 09 2022 at 13:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span>  <span class="user-mention" data-user-id="366686">@Jing Tang</span>  I have been able to get a questionnaire to render but have been unable to get the response. One problem is that I don't know kotlin and I am doing it Java. The code for getting the questionnaire to render in Java was very different than that for kotlin. The documentation is too thin for me to get anything but null pointers when I try and retrieve the response.  For example, this critical value QUESTIONNAIRE_FRAGMENT_TAG is undefined in my project. I've looked at the sample apps and they are not helpful as they only do the setup of the questionnaire which I eventually hacked out in Java.</p>
<p>This code in the onCreate() will cause the questionnaire (hard coded String) to render. However,  I am unable to get the response in my Button's onClickListner() which I tap when I am done answering the questions.</p>
<div class="codehilite"><pre><span></span><code>        bundle = new Bundle();
        bundle.putString(QuestionnaireFragment.EXTRA_QUESTIONNAIRE_JSON_STRING, questionnaireOzair);
        questionnaireFragment = new QuestionnaireFragment();
        getSupportFragmentManager().
                beginTransaction()
                .setReorderingAllowed(true)
                .add(R.id.fragment_container_view, QuestionnaireFragment.class, bundle)
                .commit();
</code></pre></div>
<p>I know it's quite different than the kotlin example given in the Wiki.</p>



<a name="274690257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274690257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274690257">(Mar 09 2022 at 13:54)</a>:</h4>
<p><span class="user-mention" data-user-id="366686">@Jing Tang</span></p>



<a name="274696968"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274696968" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274696968">(Mar 09 2022 at 14:43)</a>:</h4>
<p>I got something like this to work:</p>
<p>Create the fragment</p>
<div class="codehilite"><pre><span></span><code>    private void createQuestionnaireFragment()
    {
        bundle = new Bundle();
        bundle.putString(QuestionnaireFragment.EXTRA_QUESTIONNAIRE_JSON_STRING, questionnaireOzair);
        questionnaireFragment = new QuestionnaireFragment();
        questionnaireFragment.setArguments(bundle);
        getSupportFragmentManager().
                beginTransaction()
                .setReorderingAllowed(true).add(R.id.fragment_container_view, questionnaireFragment)
                .commit();
    }
</code></pre></div>
<p>get the response</p>
<div class="codehilite"><pre><span></span><code>    public View.OnClickListener onButtonClickListener = new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Log.i(TAG, &quot;Done Questionnaire pressed by user&quot;);
            IParser serializer = FhirContext.forR4().newJsonParser();
            serializer.setPrettyPrint(true);
            String questStr = serializer.encodeResourceToString(questionnaireFragment.getQuestionnaireResponse());
            Log.i(TAG, questStr);
        }
    };
</code></pre></div>
<p>The difficulty I was having previously was getting the questionnaireFragment for retrieval. I was trying to get it after the rendering was done and it did not seem to exist.</p>
<p>I still need a lot of help here - so much is done under the hood I have no idea what is going on so it's just a matter of following very specific recipes.</p>



<a name="274760157"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274760157" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274760157">(Mar 09 2022 at 22:14)</a>:</h4>
<p><span class="user-mention" data-user-id="366686">@Jing Tang</span>  I have a very simple implementation that renders a Q and gives a QR. It's size, however, is huge. Something like 40 MB in debug and 34 MB in release. Is that due to the HAPI FHIR library?</p>
<p>However, what I would like to do it to be able to 'exit out' of the rendering process when a certain extension is read and then return to finish. Is that something possible to do?</p>



<a name="274788740"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274788740" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274788740">(Mar 10 2022 at 04:37)</a>:</h4>
<p><span class="user-mention" data-user-id="196019">@Fred Hersch</span> may also be able to help</p>



<a name="274824895"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274824895" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fred Hersch <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274824895">(Mar 10 2022 at 12:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191832">Jose Costa Teixeira</span> <a href="#narrow/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library/near/274788740">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="196019">Fred Hersch</span> may also be able to help</p>
</blockquote>
<p>Thanks <span class="user-mention" data-user-id="191832">@Jose Costa Teixeira</span> . Hi <span class="user-mention" data-user-id="192228">@Brian Reinhold</span>. Sorry to hear you are having such difficulty. Definitely keen to learn from this experience and see how we can address the documentation gap (which we are aware of!). Were you able to follow the example in the Digital Square webinar. Can you just lay out what you are trying to achieve and I'll see if there is a good example in the code base we can point you to. It may be easier to set up a call.</p>



<a name="274830873"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274830873" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shashi K <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274830873">(Mar 10 2022 at 13:01)</a>:</h4>
<p>Created profiles for resources but need help with creation of transaction bundle  and testing . Any tool available to do that.</p>



<a name="274877071"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274877071" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jing Tang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274877071">(Mar 10 2022 at 18:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192228">Brian Reinhold</span> <a href="#narrow/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library/near/274696968">said</a>:</p>
<blockquote>
<p>I still need a lot of help here - so much is done under the hood I have no idea what is going on so it's just a matter of following very specific recipes.</p>
</blockquote>
<p>Hey Brian - Glad you got this to work! What other help do you need?</p>



<a name="274877466"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274877466" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jing Tang <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274877466">(Mar 10 2022 at 18:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="192228">Brian Reinhold</span> <a href="#narrow/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library/near/274760157">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="366686">Jing Tang</span>  I have a very simple implementation that renders a Q and gives a QR. It's size, however, is huge. Something like 40 MB in debug and 34 MB in release. Is that due to the HAPI FHIR library?</p>
<p>However, what I would like to do it to be able to 'exit out' of the rendering process when a certain extension is read and then return to finish. Is that something possible to do?</p>
</blockquote>
<p>The sizes bloat is caused by some ML libraries in the QR code reader. I think we'll try to move that out of this library - but in the mean time you can also try to use progard to exclude it...</p>
<p>I don't really understand what you mean by exiting out. Can you give an example?</p>



<a name="274972840"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179166-implementers/topic/Android%20FHIR%20SDK%20Structured%20Data%20Capture%20Library/near/274972840" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Reinhold <a href="https://fhir.github.io/chat-archive/stream/179166-implementers/topic/Android.20FHIR.20SDK.20Structured.20Data.20Capture.20Library.html#274972840">(Mar 11 2022 at 13:16)</a>:</h4>
<p><span class="user-mention" data-user-id="366686">@Jing Tang</span>  I tried using the default proguard but it did not build.</p>
<p>THat aside, what I mean by 'exit' is to take over rendering under a certain condition. What I am doing is trying to specify how a user can get a question that requires the user to take a measurement with a communicating device. The user does so and the data communicated by the device is auto populated into the response. At the moment we are defining a new extension called 'real time' that tells the renderer that data is going to be generated. The extension will carry codes that tell the render what information from the device to capture. Of course this requires an implementation that is capable of communicating with the device and decoding the data from it.</p>
<p>Clearly no renderer is capable of that.</p>
<p>So I am wondering if there is a way to do it. It is nice to NOT have to write all that GUI code to display the questions and handle user responses!</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
