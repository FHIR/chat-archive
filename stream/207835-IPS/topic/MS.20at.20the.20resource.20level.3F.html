---
layout: page
title: "FHIR Chat  · MS at the resource level? · IPS"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/index.html">IPS</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html">MS at the resource level?</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="271024117"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271024117" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271024117">(Feb 07 2022 at 18:46)</a>:</h4>
<p>A number of (maybe all?) IPS resource profiles place a MS flag at the resource level. For example, ImagingStudy (<a href="http://build.fhir.org/ig/HL7/fhir-ips/StructureDefinition-ImagingStudy-uv-ips.html">build</a>, <a href="http://hl7.org/fhir/uv/ips/STU1/StructureDefinition-ImagingStudy-uv-ips.html">published STU1</a>) -- <br>
<a href="/user_uploads/10155/5h1T39lpyaWTvlLCQ4s5c3wJ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/5h1T39lpyaWTvlLCQ4s5c3wJ/image.png" title="image.png"><img src="/user_uploads/10155/5h1T39lpyaWTvlLCQ4s5c3wJ/image.png"></a></div>



<a name="271024123"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271024123" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271024123">(Feb 07 2022 at 18:46)</a>:</h4>
<p>Does this mean that ImagingStudy must be supported according to <a href="http://hl7.org/fhir/uv/ips/STU1/design.html#must-support">the IG's definition of MS</a> ?</p>



<a name="271024127"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271024127" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271024127">(Feb 07 2022 at 18:46)</a>:</h4>
<p>If so, how does this not contradict the division of required/recommended/optional as defined here: <a href="http://hl7.org/fhir/uv/ips/STU1/ipsStructure.html#list-of-profiles">http://hl7.org/fhir/uv/ips/STU1/ipsStructure.html#list-of-profiles</a> ?</p>



<a name="271024490"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271024490" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271024490">(Feb 07 2022 at 18:49)</a>:</h4>
<p>There is a ticket prohibiting (or maybe warning) against MS at the root of any profile/extension. I think it's approved, maybe waiting to be applied for R5.</p>



<a name="271025405"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271025405" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271025405">(Feb 07 2022 at 18:55)</a>:</h4>
<p>Good questions.  The primary answer is that we are currently re-evaluating all of our use of mustSupport in the IG, and it's very likely (unless we find a specific reason to do otherwise) that those mustSupport declarations will be removed.  Many of them them got there originally when the IG Publisher was generating a warning whenever there was any element in the differential that <strong>was not</strong> marked as mustSupport - we added a lot then to avoid those warnings (which the Publisher no longer generated), and until now we hadn't gone back to see which ones could/should be removed.</p>



<a name="271028392"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271028392" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271028392">(Feb 07 2022 at 19:16)</a>:</h4>
<p>So, Rob, is this the intended requirements for support of a FHIR IPS document: <a href="http://hl7.org/fhir/uv/ips/STU1/ipsStructure.html#list-of-profiles">http://hl7.org/fhir/uv/ips/STU1/ipsStructure.html#list-of-profiles</a> ?</p>



<a name="271037867"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271037867" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271037867">(Feb 07 2022 at 20:32)</a>:</h4>
<p>In addition to the resource-level MS, Composition also MS's about every resource/section type -- <a href="https://build.fhir.org/ig/HL7/fhir-ips/StructureDefinition-Composition-uv-ips.html">https://build.fhir.org/ig/HL7/fhir-ips/StructureDefinition-Composition-uv-ips.html</a>. This also contradicts: <a href="http://hl7.org/fhir/uv/ips/STU1/ipsStructure.html#list-of-profiles">http://hl7.org/fhir/uv/ips/STU1/ipsStructure.html#list-of-profiles</a>.</p>



<a name="271044046"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271044046" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271044046">(Feb 07 2022 at 21:26)</a>:</h4>
<p>MS at the resource level means that, when the profile is referenced in something else that can reference the full resource (e.g. Bundle, Parameters, etc.), that the referencing element SHALL be MS=true.  Given that that's a super bad idea to enforce, we agreed to say that wasn't something that's allowed.</p>



<a name="271179771"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271179771" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Isaac Vetter <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271179771">(Feb 08 2022 at 19:36)</a>:</h4>
<p>Thanks, Lloyd!</p>



<a name="271197500"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271197500" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271197500">(Feb 08 2022 at 22:00)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> I'm not sure that I followed that last comment entirely - or if I did follow it, why that would be true.  Could you try restating it?</p>



<a name="271205393"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271205393" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271205393">(Feb 08 2022 at 23:08)</a>:</h4>
<p>When you declare MS=true at the root of a type (resource, data type, or extension definition), what that means is that when that type is referenced with the declared profile somewhere else, that the element referencing the type MUST be MS=true as well.  (Same thing occurs with cardinality - except that in the case of extensions, sometimes we want it to.  E.g. if you set the cardinality of the base element for an extension to be 0..1, then the differential that references it needs to be a valid constraint on that - i.e. 0..0 or 0..1)</p>



<a name="271205475"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271205475" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271205475">(Feb 08 2022 at 23:09)</a>:</h4>
<p>If you want someone to have to support a particular profile, that's handled using CapabilityStatement, not by declaring MS=true on the profile root.</p>



<a name="271210285"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271210285" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271210285">(Feb 08 2022 at 23:55)</a>:</h4>
<p><span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span>  So, I think the corollary to the (first) statement that you made, given that interpretation, would be that with an element that is <strong>not</strong> specified as mustSupport=true, it would be non-conformant to attempt to reference a resource profile that <strong>is</strong> specified as mustSupport=true at the root level.  Is that what you are saying?  If so, I don't think that's the only possible interpretation that could be made.  And I don't believe that the current FHIR validator enforces that interpretation.  One thing that also wasn't entirely clear to me is if by "the element referencing the type" you mean that the element is specified as being <strong>of</strong> that profiled type, or if the element is a Reference to a resource of that profiled type (or possibly you meant both)?  An example of the former is <a href="http://build.fhir.org/ig/HL7/fhir-ips/StructureDefinition-Bundle-uv-ips.html">here</a>.  In this case Bundle.entry.resource <strong>is not</strong> declared as <strong>mustSupport</strong> (at the element level or in the slices), whereas the '...UvIps' profiles that are specified as the types of entry.resource <strong>are</strong> declared as <strong>mustSupport</strong> on the root element (all of them currently are, I believe).  This hasn't seemed to cause any issues with validation.  If it is stated somewhere in the FHIR specification that this is <strong>not</strong> allowed, that would be good to see.</p>



<a name="271211031"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271211031" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271211031">(Feb 09 2022 at 00:01)</a>:</h4>
<p>Nope.  If mustSupport isn't declared, you're free to assert it to be true or false.  However, if the profile root said MS=false, then a referencing element would also have to be MS=false.</p>



<a name="271211220"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271211220" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271211220">(Feb 09 2022 at 00:02)</a>:</h4>
<p>If you have a Bundle.entry where MS is not declared and it's referencing a profile where the root says MS=true, I'd expect the snapshot to show MS=true for the Bundle.entry.  If the Bundle.entry explicitly said MS=false, then I'd expect an error.</p>



<a name="271224451"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271224451" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271224451">(Feb 09 2022 at 02:59)</a>:</h4>
<p>Ok.  The snapshot does show it that way, as mustSupport - and that makes sense (I'd never actually looked at that before).  But with that, I'm still unclear as to the point you are trying to make here (emphasis mine):</p>
<blockquote>
<p>When you declare MS=true at the root of a type (resource, data type, or extension definition), what that means is that <strong>when that type is referenced with the declared profile somewhere else, that the element referencing the type MUST be MS=true as well</strong>.</p>
</blockquote>
<p>When you say <code>the type MUST be MS=true</code>, then that implies that the type also MUST NOT be MS=false or MS not declared - because those are the options.  And the referencing element as MS not declared is the case we were looking at in my IPS Bundle example above.  Seems contradictory.  What am I missing?</p>



<a name="271228253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271228253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271228253">(Feb 09 2022 at 04:01)</a>:</h4>
<p>If it's MS=undeclared, it becomes MS=true.  If it was MS=false, there'll be an error.</p>



<a name="271228344"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271228344" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271228344">(Feb 09 2022 at 04:02)</a>:</h4>
<p>Ok.  That's just not quite what you said in the original statement.  Appreciate the clarification!</p>



<a name="271228814"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271228814" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271228814">(Feb 09 2022 at 04:13)</a>:</h4>
<p>The other question (the one I'm the most interested in) is, regarding MS at the resource level, where you say "we agreed to say that wasn't something that's allowed' - where was it that we agreed and said that?  I don't recall having come across that before - and the validator doesn't complain about it.</p>



<a name="271230306"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271230306" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271230306">(Feb 09 2022 at 04:43)</a>:</h4>
<p>There's a tracker item where we agreed to prohibit it.  It's sitting among the 800+ yet to be applied...</p>



<a name="271234420"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271234420" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271234420">(Feb 09 2022 at 05:58)</a>:</h4>
<p><a href="http://jira.hl7.org/browse/FHIR-34347">J#34347</a>. Although I don't know why it is currently in triage. I thought it had been approved. (<span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> , am I reading it correctly that there are 1700 tracker items up for "block vote 1"?)</p>



<a name="271257613"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271257613" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271257613">(Feb 09 2022 at 10:39)</a>:</h4>
<p>Oh, thanks for the reference, <span class="user-mention" data-user-id="191380">@Elliot Silver</span> (and for submitting the issue initially).  Now that it's clearer what it is that we actually want to say, I agree that the principle makes sense (for IPS and otherwise).</p>



<a name="271291724"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271291724" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271291724">(Feb 09 2022 at 15:09)</a>:</h4>
<p><span class="user-mention" data-user-id="191380">@Elliot Silver</span> I suspect your search wasn't WG-specific and included issues that were already resolved</p>



<a name="271291768"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271291768" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271291768">(Feb 09 2022 at 15:09)</a>:</h4>
<p>The Block Vote grouping isn't automatically resolved when someone resolves the issue</p>



<a name="271292133"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/MS%20at%20the%20resource%20level%3F/near/271292133" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/MS.20at.20the.20resource.20level.3F.html#271292133">(Feb 09 2022 at 15:12)</a>:</h4>
<p>We'd discussed the issue here: <a href="#narrow/stream/179252-IG-creation/topic/Must.20support.20on.20resource.20root/near/261825057">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Must.20support.20on.20resource.20root/near/261825057</a>, but it hasn't come up on a call.  It's slated for block vote Monday.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
