---
layout: page
title: "FHIR Chat  · Composition Validation · IPS"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/index.html">IPS</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html">Composition Validation</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="268309212"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268309212" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Dimitrov <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268309212">(Jan 17 2022 at 19:44)</a>:</h4>
<p>Hi, I'm using the Inferno Validator (<a href="https://inferno.healthit.gov/community">https://inferno.healthit.gov/community</a>) to validate a IPS Composition resource against the IPS Profile, but I'm receiving some errors and I don't understand what exactly causes them: <br>
<a href="/user_uploads/10155/yXxHInG25t-of02tTCPjlFWw/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/yXxHInG25t-of02tTCPjlFWw/image.png" title="image.png"><img src="/user_uploads/10155/yXxHInG25t-of02tTCPjlFWw/image.png"></a></div><p>I used the following Condition resource for the validation: <a href="http://hapi.fhir.org/baseR4/Composition/2787729">http://hapi.fhir.org/baseR4/Composition/2787729</a></p>
<p>Note:<br>
For all referenced resources in the Composition, the meta.profile element was filled and points to the according StructureDefinition</p>



<a name="268311085"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268311085" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268311085">(Jan 17 2022 at 20:06)</a>:</h4>
<p><span class="user-mention" data-user-id="367809">@Alexander Dimitrov</span>. At least some of this (like "illegal use of resolve() in discriminator" ) appears to be related to the Inferno community version having an outdated version of the IPS spec.  We are migrating Inferno very soon to the new "framework" based version (currently at <a href="https://inferno-dev.healthit.gov/">inferno-dev</a>), and we plan to make all future updates in the new version.  You <strong>may</strong> get better validation results if you try using that now, as the IPS tests there are using a more recent (but not yet the very latest) version of the spec - and either way we would appreciate further feedback on how that works for you.  I am also getting close to finishing and pushing some significant updates to the IPS spec, mostly for cleaning up the validation of the IPS bundle and profiles.  Once that is available I think that should resolve most of your issues, and I will be updating the Inferno IPS test kit with the new version of the IPS spec as soon as possible after it's in the CI build.</p>



<a name="268360164"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268360164" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Dimitrov <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268360164">(Jan 18 2022 at 08:53)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> thanks for the very helpful response! I see that the Bundle profile is also included in the dev version, which is very nice! I will try out validating my generated IPS with the dev version and afterwards I will give a brief update here in the chat how everything went. Thanks again!</p>



<a name="268424013"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268424013" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Dimitrov <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268424013">(Jan 18 2022 at 17:08)</a>:</h4>
<p>The Composition validation still leads to a few errors:<br>
<a href="/user_uploads/10155/gxdEV1QR5Ul_cgPyG4NDikv7/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/gxdEV1QR5Ul_cgPyG4NDikv7/image.png" title="image.png"><img src="/user_uploads/10155/gxdEV1QR5Ul_cgPyG4NDikv7/image.png"></a></div><p>Can I assume that those will probably not appear with the next update, or are those errors on my end? </p>
<p>Nevertheless, with the Inferno Dev build I managed to successfully validate the IPS document as a whole (Bundle resource), which is very pleasing :)</p>



<a name="268433704"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268433704" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John D&#x27;Amore <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268433704">(Jan 18 2022 at 18:15)</a>:</h4>
<p><span class="user-mention" data-user-id="367809">@Alexander Dimitrov</span> Can you point to the Bundle which is being validated? If the errors are not present on the Bundle (which required Composition as first entry) then you are probably in the clear. I'm happy to look at with you.</p>



<a name="268436556"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268436556" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Dimitrov <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268436556">(Jan 18 2022 at 18:38)</a>:</h4>
<p><span class="user-mention" data-user-id="197638">@John D'Amore</span> this is the Bundle which I used for the validation: <a href="http://hapi.fhir.org/baseR4/Bundle/2788423">http://hapi.fhir.org/baseR4/Bundle/2788423</a></p>



<a name="268457980"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268457980" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268457980">(Jan 18 2022 at 21:25)</a>:</h4>
<p><span class="user-mention" data-user-id="367809">@Alexander Dimitrov</span> Thanks.  I'll plan to take a look at it after the Working Group meeting activities today.  I expect my further coming updates should resolve any errors that still remain - and looking at your bundle should help make sure that's the case.</p>



<a name="268460743"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268460743" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Dimitrov <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268460743">(Jan 18 2022 at 21:50)</a>:</h4>
<p>Thank you, very appreciated. One question which also comes to my mind: Should the meta.profile field be filled (with a reference to the StructureDefinitions) in the entry resources of the Bundle? In the provided Bundle examples from the IPS IG the meta.profile is also not filled, but wanted to ask just to be sure.</p>



<a name="268531694"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268531694" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268531694">(Jan 19 2022 at 12:33)</a>:</h4>
<p><span class="user-mention" data-user-id="367809">@Alexander Dimitrov</span> There is a lot going on this week and it may take me a little longer to look at this thoroughly.  Generally the guidance has been to not rely on having meta.profile populated, so we have not been including it in our examples.  By not including it, then at least we're not setting an example and implying (even erroneously) that it <strong>should</strong> be populated.  We can discuss it further, though.</p>



<a name="268589781"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268589781" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Jordan <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268589781">(Jan 19 2022 at 19:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> ,  I just ran the latest version of the Validator (5.6.25) against that new example, using the -ips parameter. No errors or warnings, just the usual bunch of Information Messages (i.e. one for each resource in the Bundle):</p>
<p>This element does not match any known slice defined in the profile <a href="http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips">http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips</a></p>



<a name="268590673"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268590673" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268590673">(Jan 19 2022 at 19:23)</a>:</h4>
<p>Doesn't sound too bad, <span class="user-mention" data-user-id="191364">@Peter Jordan</span>. :)  I assume that's pulling the IG from the published version (presumably) - not the CI build?  We'll need to validate again the package from the CI build - I think we should be able to do that. We talked further on the call today about where we want to go with the value set slicing (or replacing it) and will look at that further next week.</p>



<a name="268745682"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/268745682" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Dimitrov <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#268745682">(Jan 20 2022 at 19:35)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> no worries and thanks for the info about the meta.profile population!</p>



<a name="269283692"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/269283692" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John D&#x27;Amore <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#269283692">(Jan 25 2022 at 16:37)</a>:</h4>
<p><span class="user-mention" data-user-id="367809">@Alexander Dimitrov</span> I've gone ahead and checked out the Bundle you sent. It doesn't return any errors, so great work! It did return a series of warnings, which I fixed and posted out to this location: <a href="https://github.com/jddamore/IPSviewer/blob/main/samples/validated_samples/AT_ELGA_GmbH_01.json">https://github.com/jddamore/IPSviewer/blob/main/samples/validated_samples/AT_ELGA_GmbH_01.json</a></p>
<p>In terms of the warning fixes, they fell into a few groups: <br>
1) Changing Patient.identifier.type to SB from SS. That may or may not be appropriate for production, but this valueSet is the desired one: <a href="http://hl7.org/fhir/R4/valueset-identifier-type.html">http://hl7.org/fhir/R4/valueset-identifier-type.html</a><br>
2) Editing the display of the LOINC codes. Several were shorthand displays which clinicians would get and I just changed to match a near display from LOINC. There was one you might want to check out: LOINC 3209-4 (<a href="https://loinc.org/3209-4/">https://loinc.org/3209-4/</a>). You had this listed as Factor VII which is different from the code, which is factor VIII<br>
3) Editing to the LL and HH interpretation displays<br>
4) Adding another category for the Condition resources<br>
5) Removing the display from the Immunization resources SNOMED codes (since not matching English display from code)</p>
<p>Part of my work is with the Global Digital Health Partnership and we're having a mini-connectathon tomorrow (6:30-10:30 US ET). Since Austria is part of the GDHP, let me know if you'd have any interest to participate (Participation needs to be cleared, but I can ask).  My email is johnd (at) <a href="http://moreinformatics.com">moreinformatics.com</a></p>



<a name="269600693"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/269600693" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Dimitrov <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#269600693">(Jan 27 2022 at 16:46)</a>:</h4>
<p>Thanks a lot <span class="user-mention" data-user-id="197638">@John D'Amore</span> , very appreciated! And yes, was also very happy about the successful validation (although there are some warnings and infos to fix :) ) I will try to adapt the mapping, so that I can hopefully resolve the warnings you mentioned. <br>
Also thank you for the offer, I would indeed be interested, but at a bit later point. (there are still some adjustments I would like to do)</p>



<a name="269617195"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Composition%20Validation/near/269617195" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Elliot Silver <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Composition.20Validation.html#269617195">(Jan 27 2022 at 18:32)</a>:</h4>
<p><span class="user-mention" data-user-id="197638">@John D'Amore</span> , thanks. You hit on part of what was probing--whether DocRef is needed to support finding the documents. I'll also take a look at the video.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
