---
layout: page
title: "FHIR Chat  · Incomplete expansion of IPC ATC value set · IPS"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/index.html">IPS</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html">Incomplete expansion of IPC ATC value set</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="228946467"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/228946467" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#228946467">(Mar 05 2021 at 12:44)</a>:</h4>
<p>I was looking at the IPS medication profiles which has a binding to the WHO ATC - IPS value set in one slice on <code>code</code>. The value set is defined as containing all codes in the system <code>http://www.whocc.no/atc</code>, but the expansion in the IG (<a href="http://www.hl7.org/fhir/uv/ips/STU1/ValueSet-whoatc-uv-ips.html">http://www.hl7.org/fhir/uv/ips/STU1/ValueSet-whoatc-uv-ips.html</a>) is listed as containing only 275 codes, all but 5 of which start with 'A'. Was there a problem with the expansion? (I would have expected the first 1000 codes + and indication that not all codes are shown)</p>



<a name="228966014"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/228966014" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giorgio Cangioli <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#228966014">(Mar 05 2021 at 14:54)</a>:</h4>
<p>Not sure if the terminology server actually includes the complete ATC code systems, but <span class="user-mention" data-user-id="191405">@Rob Hausam</span> can give you a more aware answer  than me :-)</p>



<a name="228974185"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/228974185" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#228974185">(Mar 05 2021 at 15:43)</a>:</h4>
<p><span class="user-mention" data-user-id="194703">@Morten Ernebjerg</span> The issue is that we don't have (at least yet) a source for the complete set of ATC codes.  What we currently support in the terminology server (<a href="http://tx.fhir.org">tx.fhir.org</a>) is a small subset with a semi-random selection of codes from examples and by request.  If you or anyone is aware of a source of the ATC codes that is complete and readily accessible (i.e. ideally free of charge, or maybe very minimal cost), then we would definitely want to expand the support in <a href="http://tx.fhir.org">tx.fhir.org</a> to include that.  Let me know if you have any suggestions.</p>



<a name="228975843"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/228975843" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#228975843">(Mar 05 2021 at 15:54)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span>  Ah, interesting. I wish I did have all of ATC somewhere, but I'm afraid I don't (I naively assumed that the public availability of a searchable index meant it was easily available).  I see you can buy the whole set as Excel or XML for $200 <a href="https://www.whocc.no/atc_ddd_index_and_guidelines/order/">here</a>, which seems relatively minimal overall. Are there license issue with converting this into a CodeSystem and using it on  <a href="http://tx.fhir.org">tx.fhir.org</a>? If it's just about the Excel --&gt; CodeSystem conversion, I could probably do that <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> .</p>



<a name="228976498"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/228976498" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#228976498">(Mar 05 2021 at 15:59)</a>:</h4>
<p>(I cannot quite tell from the <a href="https://www.who.int/about/who-we-are/publishing-policies/copyright">WHO page on Copyright, Licensing and Permissions</a> whether one needs to get a license - unlike e.g. ICD, ATC is not explicitly listed a requiring a license, but the application form has "other" as an option when specifying the system for which a license is requested.)</p>



<a name="228981991"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/228981991" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#228981991">(Mar 05 2021 at 16:29)</a>:</h4>
<p><span class="user-mention" data-user-id="194703">@Morten Ernebjerg</span> I'm sure that some kind of license undoubtedly would be required (even if that's not obvious at the moment).  But hopefully they would be willing to have the content made available (to licensed users) via the FHIR API (as needed, not the entire code system contents) .  We would need to explore all of that with them through HTA.  I expect that is doable, but we don't have a budget for purchasing code systems and regular updates for them.  Even at a relatively minimal cost (as in this case), with multiple code systems and regular update schedules that begins to add up.  I'm not sure what solution(s) we might be able to work out for that, as it is an issue that we run into pretty frequently. <span class="user-mention" data-user-id="191316">@Grahame Grieve</span>?</p>



<a name="228982278"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/228982278" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#228982278">(Mar 05 2021 at 16:31)</a>:</h4>
<p>And if we need to discuss more we might want to move this to the terminology stream.</p>



<a name="229200412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/229200412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#229200412">(Mar 07 2021 at 16:39)</a>:</h4>
<p>nice. I just wrote this as a part of a requirement a few hours ago: Shared codes like ATC should be available</p>



<a name="229200424"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/229200424" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jose Costa Teixeira <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#229200424">(Mar 07 2021 at 16:39)</a>:</h4>
<p>I think there is interest in that</p>



<a name="229273904"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/229273904" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#229273904">(Mar 08 2021 at 10:04)</a>:</h4>
<p><span class="user-mention" data-user-id="247046">@Christine Haas</span></p>



<a name="229448526"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/229448526" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#229448526">(Mar 09 2021 at 09:41)</a>:</h4>
<p><span class="user-mention" data-user-id="191405">@Rob Hausam</span> Thanks for the background, there is always more than meets the naive eye <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> BTW, the inclusion of an ATC-fragment in <a href="http://tx.fhir.org">tx.fhir.org</a>  seems to causes the standard validator to throw spurious errors. I presume it happens because it assumes it knows all ATC codes &amp; then fails when trying to validate (most of)  them, cf. this:</p>
<div class="codehilite"><pre><span></span><code>*FAILURE*: 3 errors, 4 warnings, 7 notes
  Error @ Medication.code.coding[2] (line 18, col14) : The code &quot;V06DC01&quot; is not valid in the system http://www.whocc.no/atc; The code provided (http://www.whocc.no/atc#V06DC01) is not valid in the value set &#39;All codes known to the system&#39; (from http://tx.fhir.org/r4) for &#39;http://www.whocc.no/atc#V06DC01&#39;
</code></pre></div>
<p><del>Do you know if the underlying CodeSystem not have <code>content</code> = "fragment" or does the validator/term server not use this info?</del><br>
I see the underlying CodeSystem has <code>content</code> = "fragment", do you know if the validator uses this info?</p>



<a name="229475932"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/229475932" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rob Hausam <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#229475932">(Mar 09 2021 at 13:29)</a>:</h4>
<p><span class="user-mention" data-user-id="194703">@Morten Ernebjerg</span> Yes, the current ATC CodeSystem resource in the package used by <a href="http://tx.fhir.org">tx.fhir.org</a> is specified as <code>content</code> = 'fragment'.  Technically, according to our current guidance for CodeSystem that is not a correct usage of 'fragment', as this particular "fragment" is not obtained from the code system publisher - so we may need to add a new content type like 'partial' (or similar), but that's a different discussion to have in Vocabulary (and the terminology stream).  And it appears that the validator at least isn't making full use of this information (I haven't looked into the specific code for it) - I expect that <span class="user-mention" data-user-id="191316">@Grahame Grieve</span> can clarify the current state, and we can decide what it should be.</p>



<a name="235285087"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Incomplete%20expansion%20of%20IPC%20ATC%20value%20set/near/235285087" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Incomplete.20expansion.20of.20IPC.20ATC.20value.20set.html#235285087">(Apr 20 2021 at 04:17)</a>:</h4>
<p>I don't remember the current state</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
