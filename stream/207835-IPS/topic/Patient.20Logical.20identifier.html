---
layout: page
title: "FHIR Chat  · Patient Logical identifier · IPS"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/index.html">IPS</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html">Patient Logical identifier</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="217015142"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217015142" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Goel <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217015142">(Nov 17 2020 at 15:12)</a>:</h4>
<p>Hi, a few of us wanted to confirm that for the Immunization.patient.identifier in the IPS it should be a literal reference, and logical should be used when literal is not available. The wording is not clear. Is then Immunization.patient.reference the literal and Immunization.patient.identifier the logical only if the literal is unavailable? Does that mean if we fill reference, we do not need identifier? <span class="user-mention" data-user-id="192667">@Nityan Khanna</span> <span class="user-mention" data-user-id="252917">@Mo Ibrahim</span> <span class="user-mention" data-user-id="193307">@Derek Ritz</span> <a href="https://build.fhir.org/ig/HL7/fhir-ips/StructureDefinition-Immunization-uv-ips.html">https://build.fhir.org/ig/HL7/fhir-ips/StructureDefinition-Immunization-uv-ips.html</a><br>
<a href="/user_uploads/10155/gw_jrxDkJQ6K43R4LW126-v_/IPSImmunizationQuestion.png">IPSImmunizationQuestion.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/10155/gw_jrxDkJQ6K43R4LW126-v_/IPSImmunizationQuestion.png" title="IPSImmunizationQuestion.png"><img src="/user_uploads/10155/gw_jrxDkJQ6K43R4LW126-v_/IPSImmunizationQuestion.png"></a></div>



<a name="217036350"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217036350" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giorgio Cangioli <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217036350">(Nov 17 2020 at 17:39)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192545">@Alex Goel</span>   for some kinds of elements (including subject/patient) in the IPS we expect that a reference to an actual FHIR resource is provided. That the reason why the reference is 1..1 This doesn't exclude that you can provide a 'display' or an 'identifier' if you wish to ..but you are not obliged to do it ...</p>



<a name="217039506"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217039506" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Goel <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217039506">(Nov 17 2020 at 18:03)</a>:</h4>
<p><span class="user-mention" data-user-id="191415">@Giorgio Cangioli</span> thanks for the clarification. so that means that Immunization.patient.identifier in the IPS could be equivalent to the <a href="http://Patient.id">Patient.id</a>?</p>



<a name="217043799"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217043799" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giorgio Cangioli <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217043799">(Nov 17 2020 at 18:34)</a>:</h4>
<p>the <a href="http://Patient.id">Patient.id</a> is the id for that Patient  resource; not the "identifier" of that patient (see <a href="https://www.hl7.org/fhir/resource.html#identification">https://www.hl7.org/fhir/resource.html#identification</a>).</p>
<p>business identifiers of the patient are in Patient.identifier</p>
<p>if the <a href="http://patient.id">patient.id</a> = "ips-patient-1", a possible Immunization.patient.reference might be something like "<a href="http://myserver.foo/Patient/ips-patient-1">http://myserver.foo/Patient/ips-patient-1</a>" .</p>



<a name="217194766"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217194766" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Derek Ritz <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217194766">(Nov 18 2020 at 20:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191415">Giorgio Cangioli</span> <a href="#narrow/stream/207835-IPS/topic/Patient.20Logical.20identifier/near/217043799">said</a>:</p>
<blockquote>
<p>if the <a href="http://patient.id">patient.id</a> = "ips-patient-1", a possible Immunization.patient.reference might be something like "<a href="http://myserver.foo/Patient/ips-patient-1">http://myserver.foo/Patient/ips-patient-1</a>" .</p>
</blockquote>
<p>So... the composition.subject.reference and the immunization.patient.reference <strong>MUST</strong> be identical... right? It makes sense that these will all be the same... but it also is a bit <em>awkward</em> that we're normatively replicating the patient reference for various elements  inside the IPS composition, and the composition also normatively mandates the patient reference. I'm sure this is true for other resources, too, that are in the IPS composition. (I'm curious... would a FHIR server throw an exception if all of these patient references were <strong>NOT</strong> identical?)</p>
<p>Also... as you illustrate... the <a href="http://patient.id">patient.id</a> is a necessary part of the reference... or is it? Is it possible to create a valid reference that doesn't include the id in it?</p>
<p>Lastly... as has been getting discussed on another thread... although it isn't <strong>mandated</strong> that the reference should be a fully formed URL -- is sure could be considered as a "best practice" (especially in cases where there may be an EMPI server separate from the shared health record repository). <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="217196385"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217196385" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Gessner <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217196385">(Nov 18 2020 at 21:03)</a>:</h4>
<p>Interesting. I just notice that (at least in the context of a "Clinical Document") the rules for Context Conduction within a CDA Clinical Document were quite useful. In FHIR the idea is more like "each resource provides the fully qualified context"?</p>



<a name="217223072"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217223072" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217223072">(Nov 19 2020 at 02:32)</a>:</h4>
<p>They could also be quite tricky. FHIR takes that position that all references must be explicit...</p>



<a name="217241707"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217241707" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217241707">(Nov 19 2020 at 08:48)</a>:</h4>
<p>I only recently discovered the <a href="http://build.fhir.org/comparison.html">comparisons between FHIR and other standards</a> in the FHIR spec, but found them quite illuminating (especially as someone who never worked directly with the older standards). <a href="http://build.fhir.org/comparison-v3.html">The comparison between FHIR &amp; v3/RIM</a> offers the following argument for explicit references (along the lines of what David said)</p>
<blockquote>
<p>In FHIR, no context is conducted - everything is explicit. (...). One of the benefits of this approach is that each resource can be safely consumed and examined without concern for the context in which that resource was communicated. The meaning of each resource instance is fully self-contained.</p>
</blockquote>



<a name="217243855"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217243855" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giorgio Cangioli <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217243855">(Nov 19 2020 at 09:12)</a>:</h4>
<blockquote>
<p>So... the composition.subject.reference and the immunization.patient.reference <strong>MUST</strong> be identical... right? It makes sense that these will all be the same... but it also is a bit <em>awkward</em> that we're normatively replicating the patient reference for various elements  inside the IPS composition, and the composition also normatively mandates the patient reference. I'm sure this is true for other resources, too, that are in the IPS composition.</p>
</blockquote>
<p>Yes it is highly probable that all the information inside a IPS belong to the same patient :-)<br>
and, as explained by others, no context conduction is the way FHIR has been (IMHO correctly) designed.</p>



<a name="217243903"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217243903" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giorgio Cangioli <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217243903">(Nov 19 2020 at 09:13)</a>:</h4>
<blockquote>
<p>(I'm curious... would a FHIR server throw an exception if all of these patient references were <strong>NOT</strong> identical?)</p>
</blockquote>
<p>It might be a test to be done ...</p>



<a name="217244043"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217244043" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giorgio Cangioli <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217244043">(Nov 19 2020 at 09:14)</a>:</h4>
<blockquote>
<p>Also... as you illustrate... the <a href="http://patient.id">patient.id</a> is a necessary part of the reference... or is it? Is it possible to create a valid reference that doesn't include the id in it?<br>
Lastly... as has been getting discussed on another thread... although it isn't mandated that the reference should be a fully formed URL -- is sure could be considered as a "best practice" (especially in cases where there may be an EMPI server separate from the shared health record repository).</p>
</blockquote>
<p>there are different options for managing the references, in particular with bundles where you can use a sort of  'Temporary Resource identifier'  in case you don't know yet what is the 'real' id. In that case is the receiving server that will assigned the right ids  and references to the resources, as needed. <br>
[Removed wrong example, thanks Olivier]</p>



<a name="217248050"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217248050" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217248050">(Nov 19 2020 at 09:57)</a>:</h4>
<p>Are this references correct for a bundle which is not coming from a RESTFul API? I would have thought that the references should be in above example to the fullUrl: &lt;reference value="urn:uuid:2b90dd2b-2dab-4c75-9bb9-a355e07401e8"/&gt; maybe with the resource type added below the reference and that the id element is not added in the resource.</p>



<a name="217248265"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217248265" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217248265">(Nov 19 2020 at 09:59)</a>:</h4>
<p>with the example above I think the Patient entry would not be found according to the spec <a href="http://hl7.org/fhir/bundle.html#references">2.36.4.1 Resolving references in Bundles</a></p>



<a name="217248776"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217248776" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217248776">(Nov 19 2020 at 10:04)</a>:</h4>
<p>see also the example in the spec "reference to a locally identified resource" <a href="http://hl7.org/fhir/bundle-references.xml.html">http://hl7.org/fhir/bundle-references.xml.html</a></p>



<a name="217250242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217250242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Morten Ernebjerg <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217250242">(Nov 19 2020 at 10:20)</a>:</h4>
<p><span class="user-mention" data-user-id="191415">@Giorgio Cangioli</span> Maybe one comment on the IPS requirement that certain patient references be literal. I think this might be slightly awkward for certain use cases that use IPS as a "foundational library". For instance, we are using IPS as a basis for our profiles. These are also used in scenarios where the data is ingested piece by piece, rather than as a complete IPS document Bundle.  In some scenarios, the relevant patient is only identified by  the business context (e.g. through the authorization mechanism or via an ID on the source system). The data source does not (and cannot) know the <code>id</code> of the corresponding FHIR Patient resource on the server, only the server can make that connection. Hence , the source could provide an identifier but not a reference to a FHIR resource, i.e. they would always have to "wiggle out" of the requirement by filling <code>display</code> (or they would redundantly have to send along an own Patient resource with every piece of data).</p>



<a name="217260902"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217260902" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giorgio Cangioli <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217260902">(Nov 19 2020 at 12:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="191478">Oliver Egger</span> <a href="#narrow/stream/207835-IPS/topic/Patient.20Logical.20identifier/near/217248050">said</a>:</p>
<blockquote>
<p>Are this references correct for a bundle which is not coming from a RESTFul API? ...</p>
</blockquote>
<p>Sure, thank you for pointing this out :-)</p>



<a name="217261697"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/207835-IPS/topic/Patient%20Logical%20identifier/near/217261697" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giorgio Cangioli <a href="https://fhir.github.io/chat-archive/stream/207835-IPS/topic/Patient.20Logical.20identifier.html#217261697">(Nov 19 2020 at 12:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="194703">Morten Ernebjerg</span> <a href="#narrow/stream/207835-IPS/topic/Patient.20Logical.20identifier/near/217250242">said</a>:</p>
<blockquote>
<p>I think this might be slightly awkward for certain use cases that use IPS as a "foundational library". </p>
</blockquote>
<p>Hi <span class="user-mention" data-user-id="194703">@Morten Ernebjerg</span>  as you know the IPS has been (mainly) designed for being used within the IPS document, but this is a discussion that I think we should have for the evolution of the IPS, as for example distinguishing IPS document specific constraints from IPS constraints.</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
