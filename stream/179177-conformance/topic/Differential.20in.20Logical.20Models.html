---
layout: page
title: "FHIR Chat  · Differential in Logical Models · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html">Differential in Logical Models</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="171496324"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/171496324" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#171496324">(Jul 23 2019 at 07:35)</a>:</h4>
<p>The other day I had a discussion with <span class="user-mention" data-user-id="191336">@Michel Rutten</span> about the handling of the differential in logical models. Currently, Forge only populates the snapshot of a logical model and leaves the differential empty. I thought this was a bug in Forge, as I expected it to be closer aligned to a StructureDefinition of one of the core resources. Meaning that a differential as well as a snapshot is present. Could someone elaborate on the reasons for this implementation choice? I'm curious about it as I can't find an invariant mandating this behaviour as a rule?</p>



<a name="171582004"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/171582004" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#171582004">(Jul 24 2019 at 06:26)</a>:</h4>
<p>Or to ask the other way around: would anyone object to a new behaviour of Forge where Logical Models would also contain a differential? Would that break current tooling? Would the IG publisher be able to handle it?</p>



<a name="171933135"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/171933135" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Zautke <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#171933135">(Jul 29 2019 at 10:13)</a>:</h4>
<p>No objections? We really want to make sure that we don't break any existing stuff. The change would harmonise our current snapshot generation process and also help systems which rely on regenerating snapshots when receiving a StructureDefinition for  Logical Model.</p>



<a name="173078609"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173078609" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Hay <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173078609">(Aug 13 2019 at 02:03)</a>:</h4>
<p>What would the differential be from? Or - what's the source model that is being changed...</p>



<a name="173087600"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173087600" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173087600">(Aug 13 2019 at 05:51)</a>:</h4>
<p>source model would be the base definition where the logical model is derived/constrained from</p>



<a name="173087686"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173087686" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173087686">(Aug 13 2019 at 05:53)</a>:</h4>
<p>I would prefer to just develop the differential in a logical model and let the publishing stack handle the snapshot generation, this prevents inconsistencies between snapshot and differentials.</p>



<a name="173088045"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173088045" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Egger <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173088045">(Aug 13 2019 at 06:00)</a>:</h4>
<p>the ig publisher handles snapshot generation for specialization in logical models, I have created a pull request to support also constraint snapshot generation see <a href="https://github.com/hapifhir/org.hl7.fhir.core/pull/59" target="_blank" title="https://github.com/hapifhir/org.hl7.fhir.core/pull/59">https://github.com/hapifhir/org.hl7.fhir.core/pull/59</a></p>



<a name="173095955"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173095955" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173095955">(Aug 13 2019 at 08:38)</a>:</h4>
<p><span class="user-mention" data-user-id="191478">@Oliver Egger</span> yes, that makes sense. Serializing logical model definitions to the differential component (instead of snapshot) would allow deriving models from Resource, DomainResource or another logical model.</p>



<a name="173095971"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173095971" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173095971">(Aug 13 2019 at 08:39)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> <span class="user-mention" data-user-id="191320">@Lloyd McKenzie</span> ?</p>



<a name="173133242"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173133242" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean McIlvenna <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173133242">(Aug 13 2019 at 17:27)</a>:</h4>
<p>I'm still not sure what the "differential" is showing a difference compared to... I suppose if there is a baseDefinition, the differential is the difference from baseDefinition. But, if there is no baseDefinition, then it seems like snapshot is appropriate. I'd encourage a constraint indicating "if no baseDefinition, snapshot SHALL exist and differential SHALL NOT exist. otherwise, differential SHALL exist and snapshot MAY exist."</p>



<a name="173186140"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173186140" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173186140">(Aug 14 2019 at 09:00)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191505">@Sean McIlvenna</span>, all FHIR types are derived from <code>Resource</code> or <code>Element</code>. <code>Element</code> has a recursive definition: <code>Element.extension</code> is of type <code>Extension</code>, which is derived from... <code>Element</code>! This implies that the child element <code>Element.extension</code> (indirectly) inherits constraints from the root of <code>Element</code>. So by expanding the snapshot of <code>Element</code>, the profile actually pulls in constraints from itself. Pretty cool.</p>



<a name="173261237"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173261237" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173261237">(Aug 15 2019 at 02:49)</a>:</h4>
<p>right. Logical models are no different from the base types that we define in FHIR itself with a diff on Element or Resource, and then generating the snapshot</p>



<a name="173528463"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173528463" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173528463">(Aug 19 2019 at 09:18)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> does this mean that I should update Forge and implement <span class="user-mention" data-user-id="193430">@Alexander Zautke</span>'s proposed change? i.e. serialize logical models to differential component, instead of the snapshot component.</p>



<a name="173530305"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173530305" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173530305">(Aug 19 2019 at 09:48)</a>:</h4>
<p>yes, though you could serialise to both too</p>



<a name="173671675"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Differential%20in%20Logical%20Models/near/173671675" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Differential.20in.20Logical.20Models.html#173671675">(Aug 20 2019 at 16:12)</a>:</h4>
<p>Great, thanks! <span class="user-mention" data-user-id="193430">@Alexander Zautke</span> please take note</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
