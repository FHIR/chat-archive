---
layout: page
title: "FHIR Chat  · Annoying bug, not valid AllXsd value · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Annoying.20bug.2C.20not.20valid.20AllXsd.20value.html">Annoying bug, not valid AllXsd value</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153865244"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Annoying%20bug%2C%20not%20valid%20AllXsd%20value/near/153865244" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Annoying.20bug.2C.20not.20valid.20AllXsd.20value.html#153865244">(Jan 03 2017 at 08:24)</a>:</h4>
<p>Just tried 14.4.1 version of Forge today, but can't do anything with it. As I get a bug when I choose a resource to profile (any resource). The earlier version I have installed works fine but its kind of old (13.2). Will appreciate any help. By the way I run this in a Virtual Machine, Windows 10 because of my companys policy regarding third party software.</p>
<p>ERROR message:</p>
<p>2017-01-03T09:20:58<br>
Forge Forge 14.4.1 for DSTU2<br>
FHIR DevDays 2016 Edition (hotfix)<br>
Version: Version 14.4.1.0 (ClickOnce)<br>
FHIR Version: Fhir.NET library for 1.0.2</p>
<hr>
<p>FormatException in System.Xml:<br>
The string '2017-01-03T09.20.48+01:00' is not a valid AllXsd value.<br>
   at System.Xml.Schema.XsdDateTime..ctor(String text, XsdDateTimeFlags kinds)<br>
   at System.Xml.XmlConvert.ToDateTime(String s, XmlDateTimeSerializationMode dateTimeOption)<br>
   at Forge.ViewModels.FhirDateTimeExtensions.GetValue(FhirDateTime source)<br>
   at Forge.ViewModels.DateTimeStorageHandler..ctor(IViewModel property, Object instance, PropertyInfo propertyInfo, Object baseInstance, Boolean isForced)<br>
   at Forge.ViewModels.ProfileVM.set_ModelElement(Base value)<br>
   at Forge.ViewModels.ProfileVM.Initialize(Base modelElement, Base baseElement)<br>
   at Forge.ViewModels.ProfileVM..ctor(ISessionItem owner, StructureDefinition model, StructureDefinition baseModel, String contentDirectory)<br>
   at Forge.ViewModels.ProfileVM.New(ISessionItem owner, TypeReference typeRef)<br>
   at Forge.ViewModels.SessionItemVM.&lt;&gt;c__DisplayClass121_0.&lt;AddNewProfile&gt;b__0(ISessionItem owner)<br>
   at Forge.ViewModels.SessionItemVM..ctor(ISessionItem owner, Func`2 resourceFactory, Boolean isFolder, Boolean isPackageFolder, Boolean isResourceFolder)<br>
   at Forge.ViewModels.SessionItemVM.AddNewProfile(TypeReference typeRef)<br>
   at Forge.UI.Views.MainPage.&lt;&gt;c__DisplayClass16_0.&lt;NewProfile_Return&gt;b__0()<br>
   at Forge.UI.Views.MainPage.&lt;&gt;c__DisplayClass5_0.&lt;SafeAction&gt;b__0()</p>



<a name="153865253"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Annoying%20bug%2C%20not%20valid%20AllXsd%20value/near/153865253" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Annoying.20bug.2C.20not.20valid.20AllXsd.20value.html#153865253">(Jan 03 2017 at 10:55)</a>:</h4>
<p><span class="user-mention" data-user-id="192856">@Thomas Tveit Rosenlund</span> the time part "09.20.48" has an incorrect/unrecognized format (expecting 09:20:48, so with semicolon as separator). I can't immediately reproduce the issue on my machine, but I'll investigate further. Could be b/o localized datetime formatting settings on your machine.</p>



<a name="153865254"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Annoying%20bug%2C%20not%20valid%20AllXsd%20value/near/153865254" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Annoying.20bug.2C.20not.20valid.20AllXsd.20value.html#153865254">(Jan 03 2017 at 11:12)</a>:</h4>
<p>Thanks for your input <span class="user-mention" data-user-id="191336">@Michel Rutten</span> . Just tried changing my Region/Change location/Format setting from Norwegian to English (UK). And that did the trick. Somehow that regional setting overrides the time parameter in the latest Forge build to produce Norwegian time format somewhere, and that obviously triggered the bug. Thanks for the prompt reply!</p>



<a name="153865257"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Annoying%20bug%2C%20not%20valid%20AllXsd%20value/near/153865257" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Annoying.20bug.2C.20not.20valid.20AllXsd.20value.html#153865257">(Jan 03 2017 at 12:05)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="192856">@Thomas Tveit Rosenlund</span> that confirms my suspicion. I'm still trying to reproduce the issue in code by forcing a custom locale. Is your machine configured for the nn-NO locale?</p>



<a name="153865258"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Annoying%20bug%2C%20not%20valid%20AllXsd%20value/near/153865258" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Annoying.20bug.2C.20not.20valid.20AllXsd.20value.html#153865258">(Jan 03 2017 at 12:19)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="191336">@Michel Rutten</span>, my machine was configured to the nb-NO locale, and still is. I had to change the format settings specifically for time to get rid of the bug. </p>



<a name="153865259"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Annoying%20bug%2C%20not%20valid%20AllXsd%20value/near/153865259" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thomas Tveit Rosenlund <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Annoying.20bug.2C.20not.20valid.20AllXsd.20value.html#153865259">(Jan 03 2017 at 12:19)</a>:</h4>
<p><a href="/user_uploads/10155/DVRkN8d-FJ9A3Zdhd1dfW4k9/Skjermbilde-2017-01-03-13.13.12.png" target="_blank" title="Skjermbilde-2017-01-03-13.13.12.png">Skjermbilde-2017-01-03-13.13.12.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/10155/DVRkN8d-FJ9A3Zdhd1dfW4k9/Skjermbilde-2017-01-03-13.13.12.png" target="_blank" title="Skjermbilde-2017-01-03-13.13.12.png"><img src="/user_uploads/10155/DVRkN8d-FJ9A3Zdhd1dfW4k9/Skjermbilde-2017-01-03-13.13.12.png"></a></div>



<a name="153865273"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Annoying%20bug%2C%20not%20valid%20AllXsd%20value/near/153865273" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Annoying.20bug.2C.20not.20valid.20AllXsd.20value.html#153865273">(Jan 03 2017 at 14:04)</a>:</h4>
<p>Note to all: the issue proved to be related to regional (datetime format) settings. This will be fixed in the forthcoming Forge update.</p>



<a name="153865398"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Annoying%20bug%2C%20not%20valid%20AllXsd%20value/near/153865398" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brian Postlethwaite <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Annoying.20bug.2C.20not.20valid.20AllXsd.20value.html#153865398">(Jan 04 2017 at 06:11)</a>:</h4>
<p>Was that a forge issue, or .NET fhir client parser issue?</p>



<a name="153865412"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Annoying%20bug%2C%20not%20valid%20AllXsd%20value/near/153865412" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Annoying.20bug.2C.20not.20valid.20AllXsd.20value.html#153865412">(Jan 04 2017 at 09:17)</a>:</h4>
<p>Looks like this isue was fixed b/o some recent changes in the FHIR .NET API, specifically the FhirDateTime ctors now using XmlConvert.ToString to convert XML datetime strings to C# native DateTime(Offset).</p>



<a name="153865413"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Annoying%20bug%2C%20not%20valid%20AllXsd%20value/near/153865413" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Annoying.20bug.2C.20not.20valid.20AllXsd.20value.html#153865413">(Jan 04 2017 at 09:20)</a>:</h4>
<p>In Forge, I call a different (newer) overload with an additional parameter:<br>
XmlConvert.ToDateTime(value, XmlDateTimeSerializationMode.RoundtripKind)<br>
This seems to better handle timezone offset conversions. Maybe the FHIR .NET API should do this too... thoughts?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
