---
layout: page
title: "FHIR Chat  · LoMo specify units for Quantity · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html">LoMo specify units for Quantity</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153888622"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153888622" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153888622">(May 09 2017 at 09:31)</a>:</h4>
<p>How would I specify a particular set of units on a Quantity in a Logical Model? I came across this extension <a href="http://hl7.org/fhir/extension-elementdefinition-allowedunits.html" target="_blank" title="http://hl7.org/fhir/extension-elementdefinition-allowedunits.html">http://hl7.org/fhir/extension-elementdefinition-allowedunits.html</a> but it contains limited help on where to apply, and either way it looks as if Forge would not be of help in configuring it.</p>



<a name="153888627"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153888627" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153888627">(May 09 2017 at 10:07)</a>:</h4>
<p>it applies to any element - that's what you'd use</p>



<a name="153888628"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153888628" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153888628">(May 09 2017 at 10:07)</a>:</h4>
<p>Have to talk to Forge about supporting it </p>



<a name="153888631"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153888631" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153888631">(May 09 2017 at 10:14)</a>:</h4>
<p><span class="user-mention" data-user-id="191336">@Michel Rutten</span> Could you consider supporting this extension on Quantity type elements? The first issue that Forge doesn’t allow extensions on Logical Models at all</p>



<a name="153888634"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153888634" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153888634">(May 09 2017 at 10:23)</a>:</h4>
<p><span class="user-mention" data-user-id="191316">@Grahame Grieve</span> I have a feeling that either Forge or Logical Models in general lack here. <br>
- In a profile I would just apply a value set on Quantity.code and fix Quantity.system to UCUM. In case of multi datatype elements like Observation.value[x] I would first type slice to reach Quantity -- no need to use the extension, I think</p>
<p>The added benefit of not using the extension is that more tooling would consider a value set binding than an extension.</p>
<ul>
<li>In a Logical Model I cannot slice or extend and I'm unsure how much of that is a limitation of Forge or FHIR core.</li>
</ul>



<a name="153888636"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153888636" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153888636">(May 09 2017 at 10:24)</a>:</h4>
<p>Adding <span class="user-mention" data-user-id="192440">@Marc de Graauw</span> </p>



<a name="153888648"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153888648" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153888648">(May 09 2017 at 12:13)</a>:</h4>
<p>the limitations are a bit of both. But I think that the right thing to do is to create a task about 'what is the right way to constrain units' because i think the way you do it in profiles has problems, and we need a better way</p>



<a name="153888652"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153888652" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153888652">(May 09 2017 at 12:29)</a>:</h4>
<p>(deleted)</p>



<a name="153888659"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153888659" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153888659">(May 09 2017 at 12:32)</a>:</h4>
<p><a href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13353" target="_blank" title="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13353">GF#13353</a> added</p>



<a name="153888725"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153888725" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153888725">(May 09 2017 at 15:39)</a>:</h4>
<p>thx</p>



<a name="153888805"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153888805" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153888805">(May 09 2017 at 19:06)</a>:</h4>
<p>FYI Forge does not (yet) support slicing &amp; extensions in Logical Models simply because we didn't implement it yet. It is not a technical limitation. But users haven't asked for this until now; you're the first. Some guidelines by FHIR spec about this would be helpful.</p>



<a name="153889639"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153889639" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Kavanagh <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153889639">(May 12 2017 at 08:21)</a>:</h4>
<p><span class="user-mention" data-user-id="191375">@Alexander Henket</span> Out of interest, what is the use case for an extension on a LoMo?</p>



<a name="153889666"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153889666" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153889666">(May 12 2017 at 10:13)</a>:</h4>
<p>Normally probably seldomly so, but currently, by the looks of it if you want to say "Weight in kg or g" you cannot specify this unless you use a core extension that exists for that.</p>



<a name="153889689"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153889689" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153889689">(May 12 2017 at 11:02)</a>:</h4>
<p>Are you asking about extensions in the logical model instances, or in the definition of the logical model? Usually not much in the first case, bu quite a bit in the second</p>



<a name="153889810"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153889810" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Haas <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153889810">(May 12 2017 at 21:45)</a>:</h4>
<p>I am unclear what you all mean - is there an example of the second use case I can look at?</p>



<a name="153889811"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153889811" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153889811">(May 12 2017 at 22:56)</a>:</h4>
<p>Well, the cda logical model has extensions for namespace etc</p>



<a name="153892417"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153892417" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alexander Henket <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153892417">(Jun 06 2017 at 08:21)</a>:</h4>
<p>I finally got to implementing the extension. In DECOR we have separate units as a list on a concept. The logical mapping would be to add as many allowedUnits extensions as there are units listed in DECOR. But the extension seems to tell me, I can only add it once per context. Is this legal or not?</p>
<div class="codehilite"><pre><span></span>    &lt;element&gt;
        &lt;!-- unit is kg or g --&gt;
        &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/elementdefinition-allowedUnits&quot;&gt;
            &lt;valueCodeableConcept&gt;
                &lt;coding&gt;
                    &lt;system value=&quot;http://unitsofmeasure.org/&quot;/&gt;
                    &lt;code value=&quot;kg&quot;/&gt;
                &lt;/coding&gt;
            &lt;/valueCodeableConcept&gt;
        &lt;/extension&gt;
        &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/elementdefinition-allowedUnits&quot;&gt;
            &lt;valueCodeableConcept&gt;
                &lt;coding&gt;
                    &lt;system value=&quot;http://unitsofmeasure.org/&quot;/&gt;
                    &lt;code value=&quot;g&quot;/&gt;
                &lt;/coding&gt;
            &lt;/valueCodeableConcept&gt;
        &lt;/extension&gt;
        &lt;path value=&quot;measurement_message.weight&quot;/&gt;
</pre></div>


<p>Secondly at dataset level we allow MD's to enter the units free text. The MD's do not necessarily use UCUM to express what they meant. We solve that mapping in the implementation and leave the free text unit as is. When the unit happens to be a valid UCUM unit I produce what's above, but if not I produce:</p>
<div class="codehilite"><pre><span></span>        &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/elementdefinition-allowedUnits&quot;&gt;
            &lt;valueCodeableConcept&gt;
                &lt;text value=&quot;kilogram&quot;/&gt;
            &lt;/valueCodeableConcept&gt;
        &lt;/extension&gt;
</pre></div>


<p>I'm sure it's undesirable, but is it invalid?</p>



<a name="153892418"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153892418" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153892418">(Jun 06 2017 at 08:28)</a>:</h4>
<p>As defined, you can only have one repetition of that type of extension.  And because there's a required binding to UCUM, you couldn't use plain text by itself either</p>



<a name="153892574"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153892574" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153892574">(Jun 07 2017 at 01:07)</a>:</h4>
<p>shouldn't you do the first as a mapping to a value set? </p>



<a name="153892575"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/LoMo%20specify%20units%20for%20Quantity/near/153892575" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/LoMo.20specify.20units.20for.20Quantity.html#153892575">(Jun 07 2017 at 01:07)</a>:</h4>
<p>and are you constraining the unit, or the system/code in the second case?</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
