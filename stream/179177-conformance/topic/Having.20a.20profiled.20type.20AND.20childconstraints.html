---
layout: page
title: "FHIR Chat  · Having a profiled type AND childconstraints · conformance"
---

{% raw %}<h2>Stream: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/index.html">conformance</a></h2>
<h3>Topic: <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Having.20a.20profiled.20type.20AND.20childconstraints.html">Having a profiled type AND childconstraints</a></h3>

<hr>

<base href="https://chat.fhir.org">

<head><link href="https://fhir.github.io/chat-archive/style.css" rel="stylesheet"></head>

<a name="153900320"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Having%20a%20profiled%20type%20AND%20childconstraints/near/153900320" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Having.20a.20profiled.20type.20AND.20childconstraints.html#153900320">(Aug 03 2017 at 07:54)</a>:</h4>
<p>In a discussion with my profiling colleagues yesterday the following issue came up:</p>
<p>Say, you have a profile on Patient, and your national SDO has provided you with a profiled version of <code>HumanName</code>, called <code>HumanNameNL</code>. You'd like that use that profiled version of <code>HumanName</code> but wish to express some additional constraints on it.</p>
<p>Would it be useful to be able to constrain <code>Patient.name</code> in your new profile to <code>HumanNameNL</code> <em>and</em> add additional constraints to it "in place" in your profile (instead of you first defining <code>MyHumanNameNL</code> with those additional constraints and then pointing to that)?</p>
<p>If yes - my question to myself and other StructureDefinition-veterans: This can obviously be expressed in a StructureDefinition by having a TypeRef with a <code>profile</code> plus child constraints, but did we ever consider this? Do our tools support it?</p>



<a name="153900329"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Having%20a%20profiled%20type%20AND%20childconstraints/near/153900329" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Having.20a.20profiled.20type.20AND.20childconstraints.html#153900329">(Aug 03 2017 at 08:58)</a>:</h4>
<p>In my understanding, yes, this is allowed. <span class="user-mention" data-user-id="191351">@Chris Grenz</span> has done a great job working out the details and Forge has been supporting this since DSTU2 release.  Note that Forge users are actually creating (production) profiles that rely on this technique.</p>



<a name="153900330"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Having%20a%20profiled%20type%20AND%20childconstraints/near/153900330" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michel Rutten <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Having.20a.20profiled.20type.20AND.20childconstraints.html#153900330">(Aug 03 2017 at 08:59)</a>:</h4>
<p>See here: <a href="https://github.com/chrisgrenz/FHIR-Primer/wiki/Snapshots-Determining-Refines" target="_blank" title="https://github.com/chrisgrenz/FHIR-Primer/wiki/Snapshots-Determining-Refines">https://github.com/chrisgrenz/FHIR-Primer/wiki/Snapshots-Determining-Refines</a></p>



<a name="153900384"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Having%20a%20profiled%20type%20AND%20childconstraints/near/153900384" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Having.20a.20profiled.20type.20AND.20childconstraints.html#153900384">(Aug 03 2017 at 15:16)</a>:</h4>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> I do it all the time :)  So definitely supported by the IGPublisher and Validator</p>



<a name="153900428"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Having%20a%20profiled%20type%20AND%20childconstraints/near/153900428" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Having.20a.20profiled.20type.20AND.20childconstraints.html#153900428">(Aug 03 2017 at 21:18)</a>:</h4>
<p>this is already supported by the validator?</p>



<a name="153900429"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Having%20a%20profiled%20type%20AND%20childconstraints/near/153900429" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Having.20a.20profiled.20type.20AND.20childconstraints.html#153900429">(Aug 03 2017 at 21:18)</a>:</h4>
<p>do have a test case in the tests for it?</p>



<a name="153900457"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Having%20a%20profiled%20type%20AND%20childconstraints/near/153900457" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Having.20a.20profiled.20type.20AND.20childconstraints.html#153900457">(Aug 04 2017 at 07:40)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="191328">@Ewout Kramer</span> I do it all the time :)  So definitely supported by the IGPublisher and Validator</p>
</blockquote>
<p>As evident as this is for the end-user (;-)) it's actually pretty hard to support (at least for the snapshot generator and the validator): when I built this part in the .NET validator last year I discussed this with Grahame and concluded this was not a supported scenario.  So, I double checked with Grahame last week - and he was not too sure he supported it.  And as far as I can see, this is not something that you'd support accidentally...</p>



<a name="153900458"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Having%20a%20profiled%20type%20AND%20childconstraints/near/153900458" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ewout Kramer <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Having.20a.20profiled.20type.20AND.20childconstraints.html#153900458">(Aug 04 2017 at 07:43)</a>:</h4>
<p>Well, to be perfectly honest, it's easy to support in a non-performant or user-unfriendly way (mostly resulting in duplication of errors and unnecessary running the same validations twice), to do it well requires work.</p>



<a name="153900518"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Having%20a%20profiled%20type%20AND%20childconstraints/near/153900518" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lloyd McKenzie <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Having.20a.20profiled.20type.20AND.20childconstraints.html#153900518">(Aug 04 2017 at 15:24)</a>:</h4>
<p>I don't know if there are test cases, but this happens all the time when you constrain child elements of extensions - which I do all the time.  Pointing to an extension is done by declaring the type.  Then I list the value[whatever] element and sometimes assert child extensions for that.  I've done it with other data type profiles too.</p>



<a name="153900542"></a>
<h4><a href="https://chat.fhir.org#narrow/stream/179177-conformance/topic/Having%20a%20profiled%20type%20AND%20childconstraints/near/153900542" class="zl"><img src="https://fhir.github.io/chat-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Grahame Grieve <a href="https://fhir.github.io/chat-archive/stream/179177-conformance/topic/Having.20a.20profiled.20type.20AND.20childconstraints.html#153900542">(Aug 04 2017 at 20:25)</a>:</h4>
<p>I'd feel good if we had a test case checking that this is is handled ok</p>


{% endraw %}
<hr><p>Last updated: Apr 12 2022 at 19:14 UTC</p>
